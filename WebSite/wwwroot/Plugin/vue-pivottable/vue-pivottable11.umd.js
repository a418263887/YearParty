(function(sf,qc){typeof exports=="object"&&typeof module<"u"?qc(exports):typeof define=="function"&&define.amd?define(["exports"],qc):(sf=typeof globalThis<"u"?globalThis:sf||self,qc(sf.VuePivottable={}))})(this,function(sf){"use strict";const qc=function(pt,Xe,rt){const Ae=String(pt).split(".");let Je=Ae[0];const He=Ae.length>1?rt+Ae[1]:"",i=/(\d+)(\d{3})/;for(;i.test(Je);)Je=Je.replace(i,`$1${Xe}$2`);return Je+He},Nh=function(pt){const rt=Object.assign({},{digitsAfterDecimal:2,scaler:1,thousandsSep:",",decimalSep:".",prefix:"",suffix:""},pt);return function(Ae){if(isNaN(Ae)||!isFinite(Ae))return"";const Je=qc((rt.scaler*Ae).toFixed(rt.digitsAfterDecimal),rt.thousandsSep,rt.decimalSep);return`${rt.prefix}${Je}${rt.suffix}`}},zp=/(\d+)|(\D+)/g,Bh=/\d/,Op=/^0/,ac=(pt,Xe)=>{if(Xe!==null&&pt===null)return-1;if(pt!==null&&Xe===null)return 1;if(typeof pt=="number"&&isNaN(pt))return-1;if(typeof Xe=="number"&&isNaN(Xe))return 1;const rt=Number(pt),Ae=Number(Xe);if(rt<Ae)return-1;if(rt>Ae)return 1;if(typeof pt=="number"&&typeof Xe!="number")return-1;if(typeof Xe=="number"&&typeof pt!="number")return 1;if(typeof pt=="number"&&typeof Xe=="number")return 0;if(isNaN(Ae)&&!isNaN(rt))return-1;if(isNaN(rt)&&!isNaN(Ae))return 1;let Je=String(pt),He=String(Xe);if(Je===He)return 0;if(!Bh.test(Je)||!Bh.test(He))return Je>He?1:-1;for(Je=Je.match(zp),He=He.match(zp);Je.length&&He.length;){const i=Je.shift(),U=He.shift();if(i!==U)return Bh.test(i)&&Bh.test(U)?i.replace(Op,".0")-U.replace(Op,".0"):i>U?1:-1}return Je.length-He.length},Np=function(pt){const Xe={},rt={};for(const Ae in pt){const Je=pt[Ae];Xe[Je]=Ae,typeof Je=="string"&&(rt[Je.toLowerCase()]=Ae)}return function(Ae,Je){return Ae in Xe&&Je in Xe?Xe[Ae]-Xe[Je]:Ae in Xe?-1:Je in Xe?1:Ae in rt&&Je in rt?rt[Ae]-rt[Je]:Ae in rt?-1:Je in rt?1:ac(Ae,Je)}},Uh=function(pt,Xe){if(pt){if(typeof pt=="function"){const rt=pt(Xe);if(typeof rt=="function")return rt}else if(Xe in pt)return pt[Xe]}return ac},Oo=Nh(),Nf=Nh({digitsAfterDecimal:0}),tu=Nh({digitsAfterDecimal:1,scaler:100,suffix:"%"}),Xo={count(pt=Nf){return()=>function(){return{count:0,push(){this.count++},value(){return this.count},format:pt}}},uniques(pt,Xe=Nf){return function([rt]){return function(){return{uniq:[],push(Ae){Array.from(this.uniq).includes(Ae[rt])||this.uniq.push(Ae[rt])},value(){return pt(this.uniq)},format:Xe,numInputs:typeof rt<"u"?0:1}}}},sum(pt=Oo){return function([Xe]){return function(){return{sum:0,push(rt){isNaN(parseFloat(rt[Xe]))||(this.sum+=parseFloat(rt[Xe]))},value(){return this.sum},format:pt,numInputs:typeof Xe<"u"?0:1}}}},extremes(pt,Xe=Oo){return function([rt]){return function(Ae){return{val:null,sorter:Uh(typeof Ae<"u"?Ae.sorters:null,rt),push(Je){let He=Je[rt];["min","max"].includes(pt)&&(He=parseFloat(He),isNaN(He)||(this.val=Math[pt](He,this.val!==null?this.val:He))),pt==="first"&&this.sorter(He,this.val!==null?this.val:He)<=0&&(this.val=He),pt==="last"&&this.sorter(He,this.val!==null?this.val:He)>=0&&(this.val=He)},value(){return this.val},format(Je){return isNaN(Je)?Je:Xe(Je)},numInputs:typeof rt<"u"?0:1}}}},quantile(pt,Xe=Oo){return function([rt]){return function(){return{vals:[],push(Ae){const Je=parseFloat(Ae[rt]);isNaN(Je)||this.vals.push(Je)},value(){if(this.vals.length===0)return null;this.vals.sort((Je,He)=>Je-He);const Ae=(this.vals.length-1)*pt;return(this.vals[Math.floor(Ae)]+this.vals[Math.ceil(Ae)])/2},format:Xe,numInputs:typeof rt<"u"?0:1}}}},runningStat(pt="mean",Xe=1,rt=Oo){return function([Ae]){return function(){return{n:0,m:0,s:0,push(Je){const He=parseFloat(Je[Ae]);if(isNaN(He))return;this.n+=1,this.n===1&&(this.m=He);const i=this.m+(He-this.m)/this.n;this.s=this.s+(He-this.m)*(He-i),this.m=i},value(){if(pt==="mean")return this.n===0?0/0:this.m;if(this.n<=Xe)return 0;switch(pt){case"var":return this.s/(this.n-Xe);case"stdev":return Math.sqrt(this.s/(this.n-Xe));default:throw new Error("unknown mode for runningStat")}},format:rt,numInputs:typeof Ae<"u"?0:1}}}},sumOverSum(pt=Oo){return function([Xe,rt]){return function(){return{sumNum:0,sumDenom:0,push(Ae){isNaN(parseFloat(Ae[Xe]))||(this.sumNum+=parseFloat(Ae[Xe])),isNaN(parseFloat(Ae[rt]))||(this.sumDenom+=parseFloat(Ae[rt]))},value(){return this.sumNum/this.sumDenom},format:pt,numInputs:typeof Xe<"u"&&typeof rt<"u"?0:2}}}},fractionOf(pt,Xe="total",rt=tu){return(...Ae)=>function(Je,He,i){return{selector:{total:[[],[]],row:[He,[]],col:[[],i]}[Xe],inner:pt(...Array.from(Ae||[]))(Je,He,i),push(U){this.inner.push(U)},format:rt,value(){return this.inner.value()/Je.getAggregator(...Array.from(this.selector||[])).inner.value()},numInputs:pt(...Array.from(Ae||[]))().numInputs}}}};Xo.countUnique=pt=>Xo.uniques(Xe=>Xe.length,pt),Xo.listUnique=pt=>Xo.uniques(Xe=>Xe.join(pt),Xe=>Xe),Xo.max=pt=>Xo.extremes("max",pt),Xo.min=pt=>Xo.extremes("min",pt),Xo.first=pt=>Xo.extremes("first",pt),Xo.last=pt=>Xo.extremes("last",pt),Xo.median=pt=>Xo.quantile(.5,pt),Xo.average=pt=>Xo.runningStat("mean",1,pt),Xo.var=(pt,Xe)=>Xo.runningStat("var",pt,Xe),Xo.stdev=(pt,Xe)=>Xo.runningStat("stdev",pt,Xe);const eh=(pt=>({Count:pt.count(Nf),"Count Unique Values":pt.countUnique(Nf),"List Unique Values":pt.listUnique(", "),Sum:pt.sum(Oo),"Integer Sum":pt.sum(Nf),Average:pt.average(Oo),Median:pt.median(Oo),"Sample Variance":pt.var(1,Oo),"Sample Standard Deviation":pt.stdev(1,Oo),Minimum:pt.min(Oo),Maximum:pt.max(Oo),First:pt.first(Oo),Last:pt.last(Oo),"Sum over Sum":pt.sumOverSum(Oo),"Sum as Fraction of Total":pt.fractionOf(pt.sum(),"total",tu),"Sum as Fraction of Rows":pt.fractionOf(pt.sum(),"row",tu),"Sum as Fraction of Columns":pt.fractionOf(pt.sum(),"col",tu),"Count as Fraction of Total":pt.fractionOf(pt.count(),"total",tu),"Count as Fraction of Rows":pt.fractionOf(pt.count(),"row",tu),"Count as Fraction of Columns":pt.fractionOf(pt.count(),"col",tu)}))(Xo),b0=(pt=>({Compte:pt.count(Nf),"Compter les valeurs uniques":pt.countUnique(Nf),"Liste des valeurs uniques":pt.listUnique(", "),Somme:pt.sum(Oo),"Somme de nombres entiers":pt.sum(Nf),Moyenne:pt.average(Oo),M\u00E9diane:pt.median(Oo),"Variance de l'\xE9chantillon":pt.var(1,Oo),"\xC9cart-type de l'\xE9chantillon":pt.stdev(1,Oo),Minimum:pt.min(Oo),Maximum:pt.max(Oo),Premier:pt.first(Oo),Dernier:pt.last(Oo),"Somme Total":pt.sumOverSum(Oo),"Somme en fraction du total":pt.fractionOf(pt.sum(),"total",tu),"Somme en tant que fraction de lignes":pt.fractionOf(pt.sum(),"row",tu),"Somme en tant que fraction de colonnes":pt.fractionOf(pt.sum(),"col",tu),"Comptage en tant que fraction du total":pt.fractionOf(pt.count(),"total",tu),"Comptage en tant que fraction de lignes":pt.fractionOf(pt.count(),"row",tu),"Comptage en tant que fraction de colonnes":pt.fractionOf(pt.count(),"col",tu)}))(Xo),Bp={en:{aggregators:eh,localeStrings:{renderError:"An error occurred rendering the PivotTable results.",computeError:"An error occurred computing the PivotTable results.",uiRenderError:"An error occurred rendering the PivotTable UI.",selectAll:"Select All",selectNone:"Select None",tooMany:"(too many to list)",filterResults:"Filter values",totals:"Totals",vs:"vs",by:"by",cancel:"Cancel",only:"only"}},fr:{frAggregators:b0,localeStrings:{renderError:"Une erreur est survenue en dessinant le tableau crois\xE9.",computeError:"Une erreur est survenue en calculant le tableau crois\xE9.",uiRenderError:"Une erreur est survenue en dessinant l'interface du tableau crois\xE9 dynamique.",selectAll:"S\xE9lectionner tout",selectNone:"Ne rien s\xE9lectionner",tooMany:"(trop de valeurs \xE0 afficher)",filterResults:"Filtrer les valeurs",totals:"Totaux",vs:"sur",by:"par",apply:"Appliquer",cancel:"Annuler",only:"seul"}}},w0=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],_0=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],th=pt=>`0${pt}`.substr(-2,2),T0={bin(pt,Xe){return rt=>rt[pt]-rt[pt]%Xe},dateFormat(pt,Xe,rt=!1,Ae=w0,Je=_0){const He=rt?"UTC":"";return function(i){const U=new Date(Date.parse(i[pt]));return isNaN(U)?"":Xe.replace(/%(.)/g,function(V,w){switch(w){case"y":return U[`get${He}FullYear`]();case"m":return th(U[`get${He}Month`]()+1);case"n":return Ae[U[`get${He}Month`]()];case"d":return th(U[`get${He}Date`]());case"w":return Je[U[`get${He}Day`]()];case"x":return U[`get${He}Day`]();case"H":return th(U[`get${He}Hours`]());case"M":return th(U[`get${He}Minutes`]());case"S":return th(U[`get${He}Seconds`]());default:return`%${w}`}})}}};class ru{constructor(Xe={}){this.props=Object.assign({},ru.defaultProps,Xe),this.aggregator=this.props.aggregators[this.props.aggregatorName](this.props.vals),this.tree={},this.rowKeys=[],this.colKeys=[],this.rowTotals={},this.colTotals={},this.allTotal=this.aggregator(this,[],[]),this.sorted=!1,this.filteredData=[],ru.forEachRecord(this.props.data,this.props.derivedAttributes,rt=>{this.filter(rt)&&(this.filteredData.push(rt),this.processRecord(rt))})}filter(Xe){for(const rt in this.props.valueFilter)if(Xe[rt]in this.props.valueFilter[rt])return!1;return!0}forEachMatchingRecord(Xe,rt){return ru.forEachRecord(this.props.data,this.props.derivedAttributes,Ae=>{if(!!this.filter(Ae)){for(const Je in Xe)if(Xe[Je]!==(Je in Ae?Ae[Je]:"null"))return;rt(Ae)}})}arrSort(Xe){let rt;const Ae=(()=>{const Je=[];for(rt of Array.from(Xe))Je.push(Uh(this.props.sorters,rt));return Je})();return function(Je,He){for(const i of Object.keys(Ae||{})){const U=Ae[i],V=U(Je[i],He[i]);if(V!==0)return V}return 0}}sortKeys(){if(!this.sorted){this.sorted=!0;const Xe=(rt,Ae)=>this.getAggregator(rt,Ae).value();switch(this.props.rowOrder){case"value_a_to_z":this.rowKeys.sort((rt,Ae)=>ac(Xe(rt,[]),Xe(Ae,[])));break;case"value_z_to_a":this.rowKeys.sort((rt,Ae)=>-ac(Xe(rt,[]),Xe(Ae,[])));break;default:this.rowKeys.sort(this.arrSort(this.props.rows))}switch(this.props.colOrder){case"value_a_to_z":this.colKeys.sort((rt,Ae)=>ac(Xe([],rt),Xe([],Ae)));break;case"value_z_to_a":this.colKeys.sort((rt,Ae)=>-ac(Xe([],rt),Xe([],Ae)));break;default:this.colKeys.sort(this.arrSort(this.props.cols))}}}getFilteredData(){return this.filteredData}getColKeys(){return this.sortKeys(),this.colKeys}getRowKeys(){return this.sortKeys(),this.rowKeys}processRecord(Xe){const rt=[],Ae=[];for(const i of Array.from(this.props.cols))rt.push(i in Xe?Xe[i]:"null");for(const i of Array.from(this.props.rows))Ae.push(i in Xe?Xe[i]:"null");const Je=Ae.join(String.fromCharCode(0)),He=rt.join(String.fromCharCode(0));this.allTotal.push(Xe),Ae.length!==0&&(this.rowTotals[Je]||(this.rowKeys.push(Ae),this.rowTotals[Je]=this.aggregator(this,Ae,[])),this.rowTotals[Je].push(Xe)),rt.length!==0&&(this.colTotals[He]||(this.colKeys.push(rt),this.colTotals[He]=this.aggregator(this,[],rt)),this.colTotals[He].push(Xe)),rt.length!==0&&Ae.length!==0&&(this.tree[Je]||(this.tree[Je]={}),this.tree[Je][He]||(this.tree[Je][He]=this.aggregator(this,Ae,rt)),this.tree[Je][He].push(Xe))}getAggregator(Xe,rt){let Ae;const Je=Xe.join(String.fromCharCode(0)),He=rt.join(String.fromCharCode(0));return Xe.length===0&&rt.length===0?Ae=this.allTotal:Xe.length===0?Ae=this.colTotals[He]:rt.length===0?Ae=this.rowTotals[Je]:Ae=this.tree[Je][He],Ae||{value(){return null},format(){return""}}}}ru.forEachRecord=function(pt,Xe,rt){let Ae,Je;if(Object.getOwnPropertyNames(Xe).length===0?Ae=rt:Ae=function(He){for(const i in Xe){const U=Xe[i](He);U!==null&&(He[i]=U)}return rt(He)},typeof pt=="function")return pt(Ae);if(Array.isArray(pt))return Array.isArray(pt[0])?(()=>{const He=[];for(const i of Object.keys(pt||{})){const U=pt[i];if(i>0){Je={};for(const V of Object.keys(pt[0]||{})){const w=pt[0][V];Je[w]=U[V]}He.push(Ae(Je))}}return He})():(()=>{const He=[];for(Je of Array.from(pt))He.push(Ae(Je));return He})();throw new Error("unknown input format")},ru.defaultProps={aggregators:eh,cols:[],rows:[],vals:[],aggregatorName:"Count",sorters:{},valueFilter:{},rowOrder:"key_a_to_z",colOrder:"key_a_to_z",derivedAttributes:{}};const wc={props:{data:{type:[Array,Object,Function],required:!0},aggregators:{type:Object,default:function(){return eh}},aggregatorName:{type:String,default:"Count"},heatmapMode:String,tableColorScaleGenerator:{type:Function},tableOptions:{type:Object,default:function(){return{}}},renderers:Object,rendererName:{type:String,default:"Table"},locale:{type:String,default:"en"},locales:{type:Object,default:function(){return Bp}},rowTotal:{type:Boolean,default:!0},colTotal:{type:Boolean,default:!0},cols:{type:Array,default:function(){return[]}},rows:{type:Array,default:function(){return[]}},vals:{type:Array,default:function(){return[]}},attributes:{type:Array,default:function(){return[]}},valueFilter:{type:Object,default:function(){return{}}},sorters:{type:[Function,Object],default:function(){return{}}},derivedAttributes:{type:[Function,Object],default:function(){return{}}},rowOrder:{type:String,default:"key_a_to_z",validator:function(pt){return["key_a_to_z","value_a_to_z","value_z_to_a"].indexOf(pt)!==-1}},colOrder:{type:String,default:"key_a_to_z",validator:function(pt){return["key_a_to_z","value_a_to_z","value_z_to_a"].indexOf(pt)!==-1}},tableMaxWidth:{type:Number,default:0,validator:function(pt){return pt>=0}}},methods:{renderError(pt){return pt("span",this.locales[this.locale].localeStrings.renderError||"An error occurred rendering the PivotTable results.")},computeError(pt){return pt("span",this.locales[this.locale].localeStrings.computeError||"An error occurred computing the PivotTable results.")},uiRenderError(pt){return pt("span",this.locales[this.locale].localeStrings.uiRenderError||"An error occurred rendering the PivotTable UI.")}}};function A0(pt){const Xe=Math.min.apply(Math,pt),rt=Math.max.apply(Math,pt);return Ae=>{const Je=255-Math.round(255*(Ae-Xe)/(rt-Xe));return{backgroundColor:`rgb(255,${Je},${Je})`}}}function Vh(pt={}){return{name:pt.name,mixins:[wc],props:{heatmapMode:String,tableColorScaleGenerator:{type:Function,default:A0},tableOptions:{type:Object,default:function(){return{clickCallback:null}}},localeStrings:{type:Object,default:function(){return{totals:"Totals"}}}},methods:{spanSize(rt,Ae,Je){let He;if(Ae!==0){let U,V,w=!0;for(He=0,V=Je,U=V>=0;U?He<=V:He>=V;U?He++:He--)rt[Ae-1][He]!==rt[Ae][He]&&(w=!1);if(w)return-1}let i=0;for(;Ae+i<rt.length;){let U,V,w=!1;for(He=0,V=Je,U=V>=0;U?He<=V:He>=V;U?He++:He--)rt[Ae][He]!==rt[Ae+i][He]&&(w=!0);if(w)break;i++}return i}},render(rt){let Ae=null;try{const e=Object.assign({},this.$props,this.$attrs.props);Ae=new ru(e)}catch(e){if(console&&console.error(e.stack))return this.computeError(rt)}const Je=Ae.props.cols,He=Ae.props.rows,i=Ae.getRowKeys(),U=Ae.getColKeys(),V=Ae.getAggregator([],[]);let w=()=>{},f=()=>{},M=()=>{};if(pt.heatmapMode){const e=this.tableColorScaleGenerator,a=U.map(r=>Ae.getAggregator([],r).value());f=e(a);const n=i.map(r=>Ae.getAggregator(r,[]).value());if(M=e(n),pt.heatmapMode==="full"){const r=[];i.map(h=>U.map(s=>r.push(Ae.getAggregator(h,s).value())));const t=e(r);w=(h,s,o)=>t(o)}else if(pt.heatmapMode==="row"){const r={};i.map(t=>{const h=U.map(s=>Ae.getAggregator(t,s).value());r[t]=e(h)}),w=(t,h,s)=>r[t](s)}else if(pt.heatmapMode==="col"){const r={};U.map(t=>{const h=i.map(s=>Ae.getAggregator(s,t).value());r[t]=e(h)}),w=(t,h,s)=>r[h](s)}}const T=(e,a,n)=>{const r=this.tableOptions;if(r&&r.clickCallback){const t={};let h={};for(let s in Je)!n.hasOwnProperty(s)||(h=Je[s],n[s]!==null&&(t[h]=n[s]));for(let s in He)!a.hasOwnProperty(s)||(h=He[s],a[s]!==null&&(t[h]=a[s]));return s=>r.clickCallback(s,e,t,Ae)}};return rt("table",{staticClass:["pvtTable"]},[rt("thead",[Je.map((e,a)=>rt("tr",{attrs:{key:`colAttrs${a}`}},[a===0&&He.length!==0?rt("th",{attrs:{colSpan:He.length,rowSpan:Je.length}}):void 0,rt("th",{staticClass:["pvtAxisLabel"]},e),U.map((n,r)=>{const t=this.spanSize(U,r,a);return t===-1?null:rt("th",{staticClass:["pvtColLabel"],attrs:{key:`colKey${r}`,colSpan:t,rowSpan:a===Je.length-1&&He.length!==0?2:1}},n[a])}),a===0&&this.rowTotal?rt("th",{staticClass:["pvtTotalLabel"],attrs:{rowSpan:Je.length+(He.length===0?0:1)}},this.localeStrings.totals):void 0])),He.length!==0?rt("tr",[He.map((e,a)=>rt("th",{staticClass:["pvtAxisLabel"],attrs:{key:`rowAttr${a}`}},e)),this.rowTotal?rt("th",{staticClass:["pvtTotalLabel"]},Je.length===0?this.localeStrings.totals:null):Je.length===0?void 0:rt("th",{staticClass:["pvtTotalLabel"]},null)]):void 0]),rt("tbody",[i.map((e,a)=>{const n=Ae.getAggregator(e,[]);return rt("tr",{attrs:{key:`rowKeyRow${a}`}},[e.map((r,t)=>{const h=this.spanSize(i,a,t);return h===-1?null:rt("th",{staticClass:["pvtRowLabel"],attrs:{key:`rowKeyLabel${a}-${t}`,rowSpan:h,colSpan:t===He.length-1&&Je.length!==0?2:1}},r)}),U.map((r,t)=>{const h=Ae.getAggregator(e,r);return rt("td",{staticClass:["pvVal"],style:w(e,r,h.value()),attrs:{key:`pvtVal${a}-${t}`},on:this.tableOptions.clickCallback?{click:T(h.value(),e,r)}:{}},h.format(h.value()))}),this.rowTotal?rt("td",{staticClass:["pvtTotal"],style:M(n.value()),on:this.tableOptions.clickCallback?{click:T(n.value(),e,[])}:{}},n.format(n.value())):void 0])}),rt("tr",[this.colTotal?rt("th",{staticClass:["pvtTotalLabel"],attrs:{colSpan:He.length+(Je.length===0?0:1)}},this.localeStrings.totals):void 0,this.colTotal?U.map((e,a)=>{const n=Ae.getAggregator([],e);return rt("td",{staticClass:["pvtTotal"],style:f(n.value()),attrs:{key:`total${a}`},on:this.tableOptions.clickCallback?{click:T(n.value(),[],e)}:{}},n.format(n.value()))}):void 0,this.colTotal&&this.rowTotal?rt("td",{staticClass:["pvtGrandTotal"],on:this.tableOptions.clickCallback?{click:T(V.value(),[],[])}:{}},V.format(V.value())):void 0])])])},renderError(rt,Ae){return this.renderError(rt)}}}const M0={name:"tsv-export-renderers",mixins:[wc],render(pt){const Xe=new ru(this.$props),rt=Xe.getRowKeys(),Ae=Xe.getColKeys();rt.length===0&&rt.push([]),Ae.length===0&&Ae.push([]);const Je=Xe.props.rows.map(i=>i);Ae.length===1&&Ae[0].length===0?Je.push(this.aggregatorName):Ae.map(i=>Je.push(i.join("-")));const He=rt.map(i=>{const U=i.map(V=>V);return Ae.map(V=>{const w=Xe.getAggregator(i,V).value();U.push(w||"")}),U});return He.unshift(Je),pt("textarea",{style:{width:"100%",height:`${window.innerHeight/2}px`},attrs:{readOnly:!0},domProps:{value:He.map(i=>i.join("	")).join(`
`)}})},renderError(pt,Xe){return this.renderError(pt)}},Iv={Table:Vh({name:"vue-table"}),"Table Heatmap":Vh({heatmapMode:"full",name:"vue-table-heatmap"}),"Table Col Heatmap":Vh({heatmapMode:"col",name:"vue-table-col-heatmap"}),"Table Row Heatmap":Vh({heatmapMode:"row",name:"vue-table-col-heatmap"}),"Export Table TSV":M0},Hh={name:"vue-pivottable",mixins:[wc],computed:{rendererItems(){return this.renderers||Object.assign({},Iv)}},methods:{createPivottable(pt){const Xe=this.$props;return pt(this.rendererItems[this.rendererName],{props:Object.assign(Xe,{localeStrings:Xe.locales[Xe.locale].localeStrings})})},createWrapperContainer(pt){return pt("div",{style:{display:"block",width:"100%","overflow-x":"auto","max-width":this.tableMaxWidth?`${this.tableMaxWidth}px`:void 0}},[this.createPivottable(pt)])}},render(pt){return this.createWrapperContainer(pt)},renderError(pt,Xe){return this.renderError(pt)}},S0={name:"draggable-attribute",props:{open:{type:Boolean,default:!1},sortable:{type:Boolean,default:!0},draggable:{type:Boolean,default:!0},name:{type:String,required:!0},attrValues:{type:Object,required:!1},valueFilter:{type:Object,default:function(){return{}}},sorter:{type:Function,required:!0},localeStrings:{type:Object,default:function(){return{selectAll:"Select All",selectNone:"Select None",tooMany:"(too many to list)",filterResults:"Filter values",only:"only"}}},menuLimit:Number,zIndex:Number,async:Boolean,unused:Boolean},data(){return{filterText:"",attribute:"",values:[],filter:{}}},computed:{disabled(){return!this.sortable&&!this.draggable},sortonly(){return this.sortable&&!this.draggable}},methods:{setValuesInFilter(pt,Xe){const rt=Xe.reduce((Ae,Je)=>(Ae[Je]=!0,Ae),{});this.$emit("update:filter",{attribute:pt,valueFilter:rt})},addValuesToFilter(pt,Xe){const rt=Xe.reduce((Ae,Je)=>(Ae[Je]=!0,Ae),Object.assign({},this.valueFilter));this.$emit("update:filter",{attribute:pt,valueFilter:rt})},removeValuesFromFilter(pt,Xe){const rt=Xe.reduce((Ae,Je)=>(Ae[Je]&&delete Ae[Je],Ae),Object.assign({},this.valueFilter));this.$emit("update:filter",{attribute:pt,valueFilter:rt})},moveFilterBoxToTop(pt){this.$emit("moveToTop:filterbox",{attribute:pt})},toggleValue(pt){pt in this.valueFilter?this.removeValuesFromFilter(this.name,[pt]):this.addValuesToFilter(this.name,[pt])},matchesFilter(pt){return pt.toLowerCase().trim().includes(this.filterText.toLowerCase().trim())},selectOnly(pt,Xe){pt.stopPropagation(),this.value=Xe,this.setValuesInFilter(this.name,Object.keys(this.attrValues).filter(rt=>rt!==Xe))},getFilterBox(pt){const Xe=Object.keys(this.attrValues).length<this.menuLimit,Ae=Object.keys(this.attrValues).filter(this.matchesFilter.bind(this)).sort(this.sorter);return pt("div",{staticClass:["pvtFilterBox"],style:{display:"block",cursor:"initial",zIndex:this.zIndex},on:{click:Je=>{Je.stopPropagation(),this.moveFilterBoxToTop(this.name)}}},[pt("div",{staticClass:"pvtSearchContainer"},[Xe||pt("p",this.localeStrings.tooMany),Xe&&pt("input",{staticClass:["pvtSearch"],attrs:{type:"text",placeholder:this.localeStrings.filterResults},domProps:{value:this.filterText},on:{input:Je=>{this.filterText=Je.target.value,this.$emit("input",Je.target.value)}}}),pt("a",{staticClass:["pvtFilterTextClear"],on:{click:()=>{this.filterText=""}}}),pt("a",{staticClass:["pvtButton"],attrs:{role:"button"},on:{click:()=>this.removeValuesFromFilter(this.name,Object.keys(this.attrValues).filter(this.matchesFilter.bind(this)))}},this.localeStrings.selectAll),pt("a",{staticClass:["pvtButton"],attrs:{role:"button"},on:{click:()=>this.addValuesToFilter(this.name,Object.keys(this.attrValues).filter(this.matchesFilter.bind(this)))}},this.localeStrings.selectNone)]),Xe&&pt("div",{staticClass:["pvtCheckContainer"]},Ae.map(Je=>{const He=!(Je in this.valueFilter);return pt("p",{class:{selected:He},attrs:{key:Je},on:{click:()=>this.toggleValue(Je)}},[pt("input",{attrs:{type:"checkbox"},domProps:{checked:He}}),Je,pt("a",{staticClass:["pvtOnly"],on:{click:i=>this.selectOnly(i,Je)}},this.localeStrings.only),pt("a",{staticClass:["pvtOnlySpacer"]})])}))])},toggleFilterBox(pt){if(pt.stopPropagation(),!this.attrValues){this.$listeners["no:filterbox"]&&this.$emit("no:filterbox");return}this.openFilterBox(this.name,!this.open),this.moveFilterBoxToTop(this.name)},openFilterBox(pt,Xe){this.$emit("open:filterbox",{attribute:pt,open:Xe})}},render(pt){const Xe=Object.keys(this.valueFilter).length!==0?"pvtFilteredAttribute":"",rt=this.$scopedSlots.pvtAttr;return pt("li",{attrs:{"data-id":this.disabled?void 0:this.name}},[pt("span",{staticClass:["pvtAttr "+Xe],class:{sortonly:this.sortonly,disabled:this.disabled}},[rt?rt({name:this.name}):this.name,!this.disabled&&(!this.async||!this.unused&&this.async)?pt("span",{staticClass:["pvtTriangle"],on:{click:this.toggleFilterBox.bind(this)}},"  \u25BE"):void 0,this.open?this.getFilterBox(pt):void 0])])}},Fv={props:["values","value"],model:{prop:"value",event:"input"},created(){this.$emit("input",this.value||this.values[0])},methods:{handleChange(pt){this.$emit("input",pt.target.value)}},render(pt){return pt("select",{staticClass:["pvtDropdown"],domProps:{value:this.value},on:{change:this.handleChange}},[this.values.map(Xe=>{const rt=Xe;return pt("option",{attrs:{value:Xe,selected:Xe===this.value?"selected":void 0}},rt)})])}};var E0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function C0(pt){return pt&&pt.__esModule&&Object.prototype.hasOwnProperty.call(pt,"default")?pt.default:pt}function k0(pt){var Xe=pt.default;if(typeof Xe=="function"){var rt=function(){return Xe.apply(this,arguments)};rt.prototype=Xe.prototype}else rt={};return Object.defineProperty(rt,"__esModule",{value:!0}),Object.keys(pt).forEach(function(Ae){var Je=Object.getOwnPropertyDescriptor(pt,Ae);Object.defineProperty(rt,Ae,Je.get?Je:{enumerable:!0,get:function(){return pt[Ae]}})}),rt}var zv={exports:{}};(function(pt){pt.exports=function(Xe){var rt={};function Ae(Je){if(rt[Je])return rt[Je].exports;var He=rt[Je]={i:Je,l:!1,exports:{}};return Xe[Je].call(He.exports,He,He.exports,Ae),He.l=!0,He.exports}return Ae.m=Xe,Ae.c=rt,Ae.d=function(Je,He,i){Ae.o(Je,He)||Object.defineProperty(Je,He,{enumerable:!0,get:i})},Ae.r=function(Je){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(Je,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(Je,"__esModule",{value:!0})},Ae.t=function(Je,He){if(He&1&&(Je=Ae(Je)),He&8||He&4&&typeof Je=="object"&&Je&&Je.__esModule)return Je;var i=Object.create(null);if(Ae.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:Je}),He&2&&typeof Je!="string")for(var U in Je)Ae.d(i,U,function(V){return Je[V]}.bind(null,U));return i},Ae.n=function(Je){var He=Je&&Je.__esModule?function(){return Je.default}:function(){return Je};return Ae.d(He,"a",He),He},Ae.o=function(Je,He){return Object.prototype.hasOwnProperty.call(Je,He)},Ae.p="",Ae(Ae.s="fae3")}({"00ee":function(Xe,rt,Ae){var Je=Ae("b622"),He=Je("toStringTag"),i={};i[He]="z",Xe.exports=String(i)==="[object z]"},"0366":function(Xe,rt,Ae){var Je=Ae("e330"),He=Ae("59ed"),i=Ae("40d5"),U=Je(Je.bind);Xe.exports=function(V,w){return He(V),w===void 0?V:i?U(V,w):function(){return V.apply(w,arguments)}}},"04f8":function(Xe,rt,Ae){var Je=Ae("2d00"),He=Ae("d039");Xe.exports=!!Object.getOwnPropertySymbols&&!He(function(){var i=Symbol();return!String(i)||!(Object(i)instanceof Symbol)||!Symbol.sham&&Je&&Je<41})},"057f":function(Xe,rt,Ae){var Je=Ae("c6b6"),He=Ae("fc6a"),i=Ae("241c").f,U=Ae("4dae"),V=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],w=function(f){try{return i(f)}catch{return U(V)}};Xe.exports.f=function(M){return V&&Je(M)=="Window"?w(M):i(He(M))}},"06cf":function(Xe,rt,Ae){var Je=Ae("83ab"),He=Ae("c65b"),i=Ae("d1e7"),U=Ae("5c6c"),V=Ae("fc6a"),w=Ae("a04b"),f=Ae("1a2d"),M=Ae("0cfb"),T=Object.getOwnPropertyDescriptor;rt.f=Je?T:function(a,n){if(a=V(a),n=w(n),M)try{return T(a,n)}catch{}if(f(a,n))return U(!He(i.f,a,n),a[n])}},"07fa":function(Xe,rt,Ae){var Je=Ae("50c4");Xe.exports=function(He){return Je(He.length)}},"0b42":function(Xe,rt,Ae){var Je=Ae("e8b5"),He=Ae("68ee"),i=Ae("861d"),U=Ae("b622"),V=U("species"),w=Array;Xe.exports=function(f){var M;return Je(f)&&(M=f.constructor,He(M)&&(M===w||Je(M.prototype))?M=void 0:i(M)&&(M=M[V],M===null&&(M=void 0))),M===void 0?w:M}},"0b43":function(Xe,rt,Ae){var Je=Ae("04f8");Xe.exports=Je&&!!Symbol.for&&!!Symbol.keyFor},"0cb2":function(Xe,rt,Ae){var Je=Ae("e330"),He=Ae("7b0b"),i=Math.floor,U=Je("".charAt),V=Je("".replace),w=Je("".slice),f=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,M=/\$([$&'`]|\d{1,2})/g;Xe.exports=function(T,e,a,n,r,t){var h=a+T.length,s=n.length,o=M;return r!==void 0&&(r=He(r),o=f),V(t,o,function(y,d){var p;switch(U(d,0)){case"$":return"$";case"&":return T;case"`":return w(e,0,a);case"'":return w(e,h);case"<":p=r[w(d,1,-1)];break;default:var c=+d;if(c===0)return y;if(c>s){var m=i(c/10);return m===0?y:m<=s?n[m-1]===void 0?U(d,1):n[m-1]+U(d,1):y}p=n[c-1]}return p===void 0?"":p})}},"0cfb":function(Xe,rt,Ae){var Je=Ae("83ab"),He=Ae("d039"),i=Ae("cc12");Xe.exports=!Je&&!He(function(){return Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a!=7})},"0d51":function(Xe,rt){var Ae=String;Xe.exports=function(Je){try{return Ae(Je)}catch{return"Object"}}},"107c":function(Xe,rt,Ae){var Je=Ae("d039"),He=Ae("da84"),i=He.RegExp;Xe.exports=Je(function(){var U=i("(?<a>b)","g");return U.exec("b").groups.a!=="b"||"b".replace(U,"$<a>c")!=="bc"})},"13d2":function(Xe,rt,Ae){var Je=Ae("d039"),He=Ae("1626"),i=Ae("1a2d"),U=Ae("83ab"),V=Ae("5e77").CONFIGURABLE,w=Ae("8925"),f=Ae("69f3"),M=f.enforce,T=f.get,e=Object.defineProperty,a=U&&!Je(function(){return e(function(){},"length",{value:8}).length!==8}),n=String(String).split("String"),r=Xe.exports=function(t,h,s){String(h).slice(0,7)==="Symbol("&&(h="["+String(h).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),s&&s.getter&&(h="get "+h),s&&s.setter&&(h="set "+h),(!i(t,"name")||V&&t.name!==h)&&(U?e(t,"name",{value:h,configurable:!0}):t.name=h),a&&s&&i(s,"arity")&&t.length!==s.arity&&e(t,"length",{value:s.arity});try{s&&i(s,"constructor")&&s.constructor?U&&e(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch{}var o=M(t);return i(o,"source")||(o.source=n.join(typeof h=="string"?h:"")),t};Function.prototype.toString=r(function(){return He(this)&&T(this).source||w(this)},"toString")},"13d5":function(Xe,rt,Ae){var Je=Ae("23e7"),He=Ae("d58f").left,i=Ae("a640"),U=Ae("2d00"),V=Ae("605d"),w=i("reduce"),f=!V&&U>79&&U<83;Je({target:"Array",proto:!0,forced:!w||f},{reduce:function(T){var e=arguments.length;return He(this,T,e,e>1?arguments[1]:void 0)}})},"14c3":function(Xe,rt,Ae){var Je=Ae("c65b"),He=Ae("825a"),i=Ae("1626"),U=Ae("c6b6"),V=Ae("9263"),w=TypeError;Xe.exports=function(f,M){var T=f.exec;if(i(T)){var e=Je(T,f,M);return e!==null&&He(e),e}if(U(f)==="RegExp")return Je(V,f,M);throw w("RegExp#exec called on incompatible receiver")}},"14d9":function(Xe,rt,Ae){var Je=Ae("23e7"),He=Ae("7b0b"),i=Ae("07fa"),U=Ae("3a34"),V=Ae("3511"),w=Ae("d039"),f=w(function(){return[].push.call({length:4294967296},1)!==4294967297}),M=!function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(T){return T instanceof TypeError}}();Je({target:"Array",proto:!0,arity:1,forced:f||M},{push:function(e){var a=He(this),n=i(a),r=arguments.length;V(n+r);for(var t=0;t<r;t++)a[n]=arguments[t],n++;return U(a,n),n}})},"159b":function(Xe,rt,Ae){var Je=Ae("da84"),He=Ae("fdbc"),i=Ae("785a"),U=Ae("17c2"),V=Ae("9112"),w=function(M){if(M&&M.forEach!==U)try{V(M,"forEach",U)}catch{M.forEach=U}};for(var f in He)He[f]&&w(Je[f]&&Je[f].prototype);w(i)},1626:function(Xe,rt,Ae){var Je=Ae("8ea1"),He=Je.all;Xe.exports=Je.IS_HTMLDDA?function(i){return typeof i=="function"||i===He}:function(i){return typeof i=="function"}},"17c2":function(Xe,rt,Ae){var Je=Ae("b727").forEach,He=Ae("a640"),i=He("forEach");Xe.exports=i?[].forEach:function(V){return Je(this,V,arguments.length>1?arguments[1]:void 0)}},"1a2d":function(Xe,rt,Ae){var Je=Ae("e330"),He=Ae("7b0b"),i=Je({}.hasOwnProperty);Xe.exports=Object.hasOwn||function(V,w){return i(He(V),w)}},"1be4":function(Xe,rt,Ae){var Je=Ae("d066");Xe.exports=Je("document","documentElement")},"1d80":function(Xe,rt,Ae){var Je=Ae("7234"),He=TypeError;Xe.exports=function(i){if(Je(i))throw He("Can't call method on "+i);return i}},"1dde":function(Xe,rt,Ae){var Je=Ae("d039"),He=Ae("b622"),i=Ae("2d00"),U=He("species");Xe.exports=function(V){return i>=51||!Je(function(){var w=[],f=w.constructor={};return f[U]=function(){return{foo:1}},w[V](Boolean).foo!==1})}},"23cb":function(Xe,rt,Ae){var Je=Ae("5926"),He=Math.max,i=Math.min;Xe.exports=function(U,V){var w=Je(U);return w<0?He(w+V,0):i(w,V)}},"23e7":function(Xe,rt,Ae){var Je=Ae("da84"),He=Ae("06cf").f,i=Ae("9112"),U=Ae("cb2d"),V=Ae("6374"),w=Ae("e893"),f=Ae("94ca");Xe.exports=function(M,T){var e=M.target,a=M.global,n=M.stat,r,t,h,s,o,y;if(a?t=Je:n?t=Je[e]||V(e,{}):t=(Je[e]||{}).prototype,t)for(h in T){if(o=T[h],M.dontCallGetSet?(y=He(t,h),s=y&&y.value):s=t[h],r=f(a?h:e+(n?".":"#")+h,M.forced),!r&&s!==void 0){if(typeof o==typeof s)continue;w(o,s)}(M.sham||s&&s.sham)&&i(o,"sham",!0),U(t,h,o,M)}}},"241c":function(Xe,rt,Ae){var Je=Ae("ca84"),He=Ae("7839"),i=He.concat("length","prototype");rt.f=Object.getOwnPropertyNames||function(V){return Je(V,i)}},"2ad6":function(Xe,rt,Ae){var Je,He;(function(i,U){Je=U,He=typeof Je=="function"?Je.call(rt,Ae,rt,Xe):Je,He!==void 0&&(Xe.exports=He)})(typeof window<"u"?window:this,function(){if(typeof window>"u")return null;var i=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")(),U=i.requestAnimationFrame||i.mozRequestAnimationFrame||i.webkitRequestAnimationFrame||function(a){return i.setTimeout(a,20)},V=i.cancelAnimationFrame||i.mozCancelAnimationFrame||i.webkitCancelAnimationFrame||function(a){i.clearTimeout(a)};function w(a,n){var r=Object.prototype.toString.call(a),t=r==="[object Array]"||r==="[object NodeList]"||r==="[object HTMLCollection]"||r==="[object Object]"||typeof jQuery<"u"&&a instanceof jQuery||typeof Elements<"u"&&a instanceof Elements,h=0,s=a.length;if(t)for(;h<s;h++)n(a[h]);else n(a)}function f(a){if(!a.getBoundingClientRect)return{width:a.offsetWidth,height:a.offsetHeight};var n=a.getBoundingClientRect();return{width:Math.round(n.width),height:Math.round(n.height)}}function M(a,n){Object.keys(n).forEach(function(r){a.style[r]=n[r]})}var T=function(a,n){var r=0;function t(){var s=[];this.add=function(d){s.push(d)};var o,y;this.call=function(d){for(o=0,y=s.length;o<y;o++)s[o].call(this,d)},this.remove=function(d){var p=[];for(o=0,y=s.length;o<y;o++)s[o]!==d&&p.push(s[o]);s=p},this.length=function(){return s.length}}function h(s,o){if(!!s){if(s.resizedAttached){s.resizedAttached.add(o);return}s.resizedAttached=new t,s.resizedAttached.add(o),s.resizeSensor=document.createElement("div"),s.resizeSensor.dir="ltr",s.resizeSensor.className="resize-sensor";var y={pointerEvents:"none",position:"absolute",left:"0px",top:"0px",right:"0px",bottom:"0px",overflow:"hidden",zIndex:"-1",visibility:"hidden",maxWidth:"100%"},d={position:"absolute",left:"0px",top:"0px",transition:"0s"};M(s.resizeSensor,y);var p=document.createElement("div");p.className="resize-sensor-expand",M(p,y);var c=document.createElement("div");M(c,d),p.appendChild(c);var m=document.createElement("div");m.className="resize-sensor-shrink",M(m,y);var l=document.createElement("div");M(l,d),M(l,{width:"200%",height:"200%"}),m.appendChild(l),s.resizeSensor.appendChild(p),s.resizeSensor.appendChild(m),s.appendChild(s.resizeSensor);var x=window.getComputedStyle(s),u=x?x.getPropertyValue("position"):null;u!=="absolute"&&u!=="relative"&&u!=="fixed"&&u!=="sticky"&&(s.style.position="relative");var A=!1,_=0,g=f(s),b=0,v=0,k=!0;r=0;var S=function(){var D=s.offsetWidth,R=s.offsetHeight;c.style.width=D+10+"px",c.style.height=R+10+"px",p.scrollLeft=D+10,p.scrollTop=R+10,m.scrollLeft=D+10,m.scrollTop=R+10},E=function(){if(k){var D=s.offsetWidth===0&&s.offsetHeight===0;if(D){r||(r=U(function(){r=0,E()}));return}else k=!1}S()};s.resizeSensor.resetSensor=E;var C=function(){_=0,A&&(b=g.width,v=g.height,s.resizedAttached&&s.resizedAttached.call(g))},F=function(){g=f(s),A=g.width!==b||g.height!==v,A&&!_&&(_=U(C)),E()},I=function(D,R,O){D.attachEvent?D.attachEvent("on"+R,O):D.addEventListener(R,O)};I(p,"scroll",F),I(m,"scroll",F),r=U(function(){r=0,E()})}}w(a,function(s){h(s,n)}),this.detach=function(s){r||(V(r),r=0),T.detach(a,s)},this.reset=function(){a.resizeSensor.resetSensor()}};if(T.reset=function(a){w(a,function(n){n.resizeSensor.resetSensor()})},T.detach=function(a,n){w(a,function(r){!r||r.resizedAttached&&typeof n=="function"&&(r.resizedAttached.remove(n),r.resizedAttached.length())||r.resizeSensor&&(r.contains(r.resizeSensor)&&r.removeChild(r.resizeSensor),delete r.resizeSensor,delete r.resizedAttached)})},typeof MutationObserver<"u"){var e=new MutationObserver(function(a){for(var n in a)if(a.hasOwnProperty(n))for(var r=a[n].addedNodes,t=0;t<r.length;t++)r[t].resizeSensor&&T.reset(r[t])});document.addEventListener("DOMContentLoaded",function(a){e.observe(document.body,{childList:!0,subtree:!0})})}return T})},"2ba4":function(Xe,rt,Ae){var Je=Ae("40d5"),He=Function.prototype,i=He.apply,U=He.call;Xe.exports=typeof Reflect=="object"&&Reflect.apply||(Je?U.bind(i):function(){return U.apply(i,arguments)})},"2d00":function(Xe,rt,Ae){var Je=Ae("da84"),He=Ae("342f"),i=Je.process,U=Je.Deno,V=i&&i.versions||U&&U.version,w=V&&V.v8,f,M;w&&(f=w.split("."),M=f[0]>0&&f[0]<4?1:+(f[0]+f[1])),!M&&He&&(f=He.match(/Edge\/(\d+)/),(!f||f[1]>=74)&&(f=He.match(/Chrome\/(\d+)/),f&&(M=+f[1]))),Xe.exports=M},"342f":function(Xe,rt,Ae){var Je=Ae("d066");Xe.exports=Je("navigator","userAgent")||""},3511:function(Xe,rt){var Ae=TypeError,Je=9007199254740991;Xe.exports=function(He){if(He>Je)throw Ae("Maximum allowed index exceeded");return He}},"37e8":function(Xe,rt,Ae){var Je=Ae("83ab"),He=Ae("aed9"),i=Ae("9bf2"),U=Ae("825a"),V=Ae("fc6a"),w=Ae("df75");rt.f=Je&&!He?Object.defineProperties:function(M,T){U(M);for(var e=V(T),a=w(T),n=a.length,r=0,t;n>r;)i.f(M,t=a[r++],e[t]);return M}},"3a34":function(Xe,rt,Ae){var Je=Ae("83ab"),He=Ae("e8b5"),i=TypeError,U=Object.getOwnPropertyDescriptor,V=Je&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(w){return w instanceof TypeError}}();Xe.exports=V?function(w,f){if(He(w)&&!U(w,"length").writable)throw i("Cannot set read only .length");return w.length=f}:function(w,f){return w.length=f}},"3a9b":function(Xe,rt,Ae){var Je=Ae("e330");Xe.exports=Je({}.isPrototypeOf)},"40d5":function(Xe,rt,Ae){var Je=Ae("d039");Xe.exports=!Je(function(){var He=function(){}.bind();return typeof He!="function"||He.hasOwnProperty("prototype")})},"428d":function(Xe,rt,Ae){(function(Je,He){Xe.exports=He(Ae("2ad6"),Ae("f7fe"))})(this,function(Je,He){return function(i){function U(w){if(V[w])return V[w].exports;var f=V[w]={exports:{},id:w,loaded:!1};return i[w].call(f.exports,f,f.exports,U),f.loaded=!0,f.exports}var V={};return U.m=i,U.c=V,U.p="/",U(0)}([function(i,U,V){var w,f,M;(function(T,e){f=[i,U,V(10),V(38),V(39),V(9),V(37)],w=e,M=typeof w=="function"?w.apply(U,f):w,M!==void 0&&(i.exports=M)})(this,function(T,e,a,n,r){function t(A){return A&&A.__esModule?A:{default:A}}function h(A){if(!A)return{delay:u,initial:!1};var _=A.initial,g=_!==void 0&&_,b=(0,p.default)(A).map(function(v){return parseInt(v)}).find(function(v){return!isNaN(v)});return b=b||u,{delay:b,initial:g}}function s(A,_){var g={root:document.documentElement},b=new IntersectionObserver(function(v,k){v.forEach(function(S){S.isIntersecting&&(_(),k.disconnect())})},g);return b.observe(A),b}function o(A,_){var g=_.value,b=_.arg,v=_.options,k=function(){return g(A)};switch(b){case"debounce":k=x(function(){return g(A)},v.delay);break;case"throttle":k=x(function(){return g(A)},v.delay,{leading:!0,trailing:!0,maxWait:v.delay})}var S=new c.default(A,k);return v.initial&&g(A),S}function y(A,_,g){var b=_.value,v=_.arg,k=_.modifiers,S=g.context;if(!b||typeof b!="function")return void console.warn("v-resize should received a function as value");var E=h(k);return S&&S.$el===A&&S.$once("hook:deactivated",function(){d(A),S.$once("hook:activated",function(){y(A,{value:b,arg:v,modifiers:k},{context:S})})}),A.offsetParent?void o(A,{value:b,arg:v,options:E}):(E.initial=!0,void(A.__visibility__listener__=s(A,function(){return o(A,{value:b,arg:v,options:E})})))}function d(A){A.__visibility__listener__&&A.__visibility__listener__.disconnect(),A.resizeSensor&&c.default.detach(A)}Object.defineProperty(e,"__esModule",{value:!0});var p=t(a),c=t(n),m=t(r),l=m.default.debounce,x=l===void 0?m.default:l,u=150;e.default={inserted:y,unbind:d},T.exports=e.default})},function(i,U){var V=i.exports={version:"2.4.0"};typeof __e=="number"&&(__e=V)},function(i,U,V){i.exports=!V(3)(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},function(i,U){i.exports=function(V){try{return!!V()}catch{return!0}}},function(i,U){var V=i.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=V)},function(i,U){i.exports=function(V){return typeof V=="object"?V!==null:typeof V=="function"}},function(i,U){i.exports=function(V){if(V==null)throw TypeError("Can't call method on  "+V);return V}},function(i,U){var V=Math.ceil,w=Math.floor;i.exports=function(f){return isNaN(f=+f)?0:(f>0?w:V)(f)}},function(i,U,V){var w=V(23),f=V(6);i.exports=function(M){return w(f(M))}},function(i,U,V){var w,f,M;(function(T,e){f=[],w=e,M=typeof w=="function"?w.apply(U,f):w,M!==void 0&&(i.exports=M)})(this,function(){Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(T){if(this==null)throw new TypeError('"this" is null or not defined');var e=Object(this),a=e.length>>>0;if(typeof T!="function")throw new TypeError("predicate must be a function");for(var n=arguments[1],r=0;r<a;){var t=e[r];if(T.call(n,t,r,e))return t;r++}},configurable:!0,writable:!0})})},function(i,U,V){i.exports={default:V(11),__esModule:!0}},function(i,U,V){V(36),i.exports=V(1).Object.keys},function(i,U){i.exports=function(V){if(typeof V!="function")throw TypeError(V+" is not a function!");return V}},function(i,U,V){var w=V(5);i.exports=function(f){if(!w(f))throw TypeError(f+" is not an object!");return f}},function(i,U,V){var w=V(8),f=V(32),M=V(31);i.exports=function(T){return function(e,a,n){var r,t=w(e),h=f(t.length),s=M(n,h);if(T&&a!=a){for(;h>s;)if(r=t[s++],r!=r)return!0}else for(;h>s;s++)if((T||s in t)&&t[s]===a)return T||s||0;return!T&&-1}}},function(i,U){var V={}.toString;i.exports=function(w){return V.call(w).slice(8,-1)}},function(i,U,V){var w=V(12);i.exports=function(f,M,T){if(w(f),M===void 0)return f;switch(T){case 1:return function(e){return f.call(M,e)};case 2:return function(e,a){return f.call(M,e,a)};case 3:return function(e,a,n){return f.call(M,e,a,n)}}return function(){return f.apply(M,arguments)}}},function(i,U,V){var w=V(5),f=V(4).document,M=w(f)&&w(f.createElement);i.exports=function(T){return M?f.createElement(T):{}}},function(i,U){i.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(i,U,V){var w=V(4),f=V(1),M=V(16),T=V(21),e="prototype",a=function(n,r,t){var h,s,o,y=n&a.F,d=n&a.G,p=n&a.S,c=n&a.P,m=n&a.B,l=n&a.W,x=d?f:f[r]||(f[r]={}),u=x[e],A=d?w:p?w[r]:(w[r]||{})[e];d&&(t=r);for(h in t)s=!y&&A&&A[h]!==void 0,s&&h in x||(o=s?A[h]:t[h],x[h]=d&&typeof A[h]!="function"?t[h]:m&&s?M(o,w):l&&A[h]==o?function(_){var g=function(b,v,k){if(this instanceof _){switch(arguments.length){case 0:return new _;case 1:return new _(b);case 2:return new _(b,v)}return new _(b,v,k)}return _.apply(this,arguments)};return g[e]=_[e],g}(o):c&&typeof o=="function"?M(Function.call,o):o,c&&((x.virtual||(x.virtual={}))[h]=o,n&a.R&&u&&!u[h]&&T(u,h,o)))};a.F=1,a.G=2,a.S=4,a.P=8,a.B=16,a.W=32,a.U=64,a.R=128,i.exports=a},function(i,U){var V={}.hasOwnProperty;i.exports=function(w,f){return V.call(w,f)}},function(i,U,V){var w=V(24),f=V(28);i.exports=V(2)?function(M,T,e){return w.f(M,T,f(1,e))}:function(M,T,e){return M[T]=e,M}},function(i,U,V){i.exports=!V(2)&&!V(3)(function(){return Object.defineProperty(V(17)("div"),"a",{get:function(){return 7}}).a!=7})},function(i,U,V){var w=V(15);i.exports=Object("z").propertyIsEnumerable(0)?Object:function(f){return w(f)=="String"?f.split(""):Object(f)}},function(i,U,V){var w=V(13),f=V(22),M=V(34),T=Object.defineProperty;U.f=V(2)?Object.defineProperty:function(e,a,n){if(w(e),a=M(a,!0),w(n),f)try{return T(e,a,n)}catch{}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[a]=n.value),e}},function(i,U,V){var w=V(20),f=V(8),M=V(14)(!1),T=V(29)("IE_PROTO");i.exports=function(e,a){var n,r=f(e),t=0,h=[];for(n in r)n!=T&&w(r,n)&&h.push(n);for(;a.length>t;)w(r,n=a[t++])&&(~M(h,n)||h.push(n));return h}},function(i,U,V){var w=V(25),f=V(18);i.exports=Object.keys||function(M){return w(M,f)}},function(i,U,V){var w=V(19),f=V(1),M=V(3);i.exports=function(T,e){var a=(f.Object||{})[T]||Object[T],n={};n[T]=e(a),w(w.S+w.F*M(function(){a(1)}),"Object",n)}},function(i,U){i.exports=function(V,w){return{enumerable:!(1&V),configurable:!(2&V),writable:!(4&V),value:w}}},function(i,U,V){var w=V(30)("keys"),f=V(35);i.exports=function(M){return w[M]||(w[M]=f(M))}},function(i,U,V){var w=V(4),f="__core-js_shared__",M=w[f]||(w[f]={});i.exports=function(T){return M[T]||(M[T]={})}},function(i,U,V){var w=V(7),f=Math.max,M=Math.min;i.exports=function(T,e){return T=w(T),T<0?f(T+e,0):M(T,e)}},function(i,U,V){var w=V(7),f=Math.min;i.exports=function(M){return M>0?f(w(M),9007199254740991):0}},function(i,U,V){var w=V(6);i.exports=function(f){return Object(w(f))}},function(i,U,V){var w=V(5);i.exports=function(f,M){if(!w(f))return f;var T,e;if(M&&typeof(T=f.toString)=="function"&&!w(e=T.call(f))||typeof(T=f.valueOf)=="function"&&!w(e=T.call(f))||!M&&typeof(T=f.toString)=="function"&&!w(e=T.call(f)))return e;throw TypeError("Can't convert object to primitive value")}},function(i,U){var V=0,w=Math.random();i.exports=function(f){return"Symbol(".concat(f===void 0?"":f,")_",(++V+w).toString(36))}},function(i,U,V){var w=V(33),f=V(26);V(27)("keys",function(){return function(M){return f(w(M))}})},function(i,U){(function(V,w){function f(y){this.time=y.time,this.target=y.target,this.rootBounds=y.rootBounds,this.boundingClientRect=y.boundingClientRect,this.intersectionRect=y.intersectionRect||h(),this.isIntersecting=!!y.intersectionRect;var d=this.boundingClientRect,p=d.width*d.height,c=this.intersectionRect,m=c.width*c.height;p?this.intersectionRatio=m/p:this.intersectionRatio=this.isIntersecting?1:0}function M(y,d){var p=d||{};if(typeof y!="function")throw new Error("callback must be a function");if(p.root&&p.root.nodeType!=1)throw new Error("root must be an Element");this._checkForIntersections=e(this._checkForIntersections.bind(this),this.THROTTLE_TIMEOUT),this._callback=y,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(p.rootMargin),this.thresholds=this._initThresholds(p.threshold),this.root=p.root||null,this.rootMargin=this._rootMarginValues.map(function(c){return c.value+c.unit}).join(" ")}function T(){return V.performance&&performance.now&&performance.now()}function e(y,d){var p=null;return function(){p||(p=setTimeout(function(){y(),p=null},d))}}function a(y,d,p,c){typeof y.addEventListener=="function"?y.addEventListener(d,p,c||!1):typeof y.attachEvent=="function"&&y.attachEvent("on"+d,p)}function n(y,d,p,c){typeof y.removeEventListener=="function"?y.removeEventListener(d,p,c||!1):typeof y.detatchEvent=="function"&&y.detatchEvent("on"+d,p)}function r(y,d){var p=Math.max(y.top,d.top),c=Math.min(y.bottom,d.bottom),m=Math.max(y.left,d.left),l=Math.min(y.right,d.right),x=l-m,u=c-p;return x>=0&&u>=0&&{top:p,bottom:c,left:m,right:l,width:x,height:u}}function t(y){var d;try{d=y.getBoundingClientRect()}catch{}return d?(d.width&&d.height||(d={top:d.top,right:d.right,bottom:d.bottom,left:d.left,width:d.right-d.left,height:d.bottom-d.top}),d):h()}function h(){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}function s(y,d){for(var p=d;p;){if(p==y)return!0;p=o(p)}return!1}function o(y){var d=y.parentNode;return d&&d.nodeType==11&&d.host?d.host:d}if("IntersectionObserver"in V&&"IntersectionObserverEntry"in V&&"intersectionRatio"in V.IntersectionObserverEntry.prototype)return void("isIntersecting"in V.IntersectionObserverEntry.prototype||Object.defineProperty(V.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}}));M.prototype.THROTTLE_TIMEOUT=100,M.prototype.POLL_INTERVAL=null,M.prototype.USE_MUTATION_OBSERVER=!0,M.prototype.observe=function(y){var d=this._observationTargets.some(function(p){return p.element==y});if(!d){if(!y||y.nodeType!=1)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:y,entry:null}),this._monitorIntersections(),this._checkForIntersections()}},M.prototype.unobserve=function(y){this._observationTargets=this._observationTargets.filter(function(d){return d.element!=y}),this._observationTargets.length||(this._unmonitorIntersections(),this._unregisterInstance())},M.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorIntersections(),this._unregisterInstance()},M.prototype.takeRecords=function(){var y=this._queuedEntries.slice();return this._queuedEntries=[],y},M.prototype._initThresholds=function(y){var d=y||[0];return Array.isArray(d)||(d=[d]),d.sort().filter(function(p,c,m){if(typeof p!="number"||isNaN(p)||p<0||p>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return p!==m[c-1]})},M.prototype._parseRootMargin=function(y){var d=y||"0px",p=d.split(/\s+/).map(function(c){var m=/^(-?\d*\.?\d+)(px|%)$/.exec(c);if(!m)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(m[1]),unit:m[2]}});return p[1]=p[1]||p[0],p[2]=p[2]||p[0],p[3]=p[3]||p[1],p},M.prototype._monitorIntersections=function(){this._monitoringIntersections||(this._monitoringIntersections=!0,this.POLL_INTERVAL?this._monitoringInterval=setInterval(this._checkForIntersections,this.POLL_INTERVAL):(a(V,"resize",this._checkForIntersections,!0),a(w,"scroll",this._checkForIntersections,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in V&&(this._domObserver=new MutationObserver(this._checkForIntersections),this._domObserver.observe(w,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))))},M.prototype._unmonitorIntersections=function(){this._monitoringIntersections&&(this._monitoringIntersections=!1,clearInterval(this._monitoringInterval),this._monitoringInterval=null,n(V,"resize",this._checkForIntersections,!0),n(w,"scroll",this._checkForIntersections,!0),this._domObserver&&(this._domObserver.disconnect(),this._domObserver=null))},M.prototype._checkForIntersections=function(){var y=this._rootIsInDom(),d=y?this._getRootRect():h();this._observationTargets.forEach(function(p){var c=p.element,m=t(c),l=this._rootContainsTarget(c),x=p.entry,u=y&&l&&this._computeTargetAndRootIntersection(c,d),A=p.entry=new f({time:T(),target:c,boundingClientRect:m,rootBounds:d,intersectionRect:u});x?y&&l?this._hasCrossedThreshold(x,A)&&this._queuedEntries.push(A):x&&x.isIntersecting&&this._queuedEntries.push(A):this._queuedEntries.push(A)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)},M.prototype._computeTargetAndRootIntersection=function(y,d){if(V.getComputedStyle(y).display!="none"){for(var p=t(y),c=p,m=o(y),l=!1;!l;){var x=null,u=m.nodeType==1?V.getComputedStyle(m):{};if(u.display=="none")return;if(m==this.root||m==w?(l=!0,x=d):m!=w.body&&m!=w.documentElement&&u.overflow!="visible"&&(x=t(m)),x&&(c=r(x,c),!c))break;m=o(m)}return c}},M.prototype._getRootRect=function(){var y;if(this.root)y=t(this.root);else{var d=w.documentElement,p=w.body;y={top:0,left:0,right:d.clientWidth||p.clientWidth,width:d.clientWidth||p.clientWidth,bottom:d.clientHeight||p.clientHeight,height:d.clientHeight||p.clientHeight}}return this._expandRectByRootMargin(y)},M.prototype._expandRectByRootMargin=function(y){var d=this._rootMarginValues.map(function(c,m){return c.unit=="px"?c.value:c.value*(m%2?y.width:y.height)/100}),p={top:y.top-d[0],right:y.right+d[1],bottom:y.bottom+d[2],left:y.left-d[3]};return p.width=p.right-p.left,p.height=p.bottom-p.top,p},M.prototype._hasCrossedThreshold=function(y,d){var p=y&&y.isIntersecting?y.intersectionRatio||0:-1,c=d.isIntersecting?d.intersectionRatio||0:-1;if(p!==c)for(var m=0;m<this.thresholds.length;m++){var l=this.thresholds[m];if(l==p||l==c||l<p!=l<c)return!0}},M.prototype._rootIsInDom=function(){return!this.root||s(w,this.root)},M.prototype._rootContainsTarget=function(y){return s(this.root||w,y)},M.prototype._registerInstance=function(){},M.prototype._unregisterInstance=function(){},V.IntersectionObserver=M,V.IntersectionObserverEntry=f})(window,document)},function(i,U){i.exports=Je},function(i,U){i.exports=He}])})},"428f":function(Xe,rt,Ae){var Je=Ae("da84");Xe.exports=Je},"44ad":function(Xe,rt,Ae){var Je=Ae("e330"),He=Ae("d039"),i=Ae("c6b6"),U=Object,V=Je("".split);Xe.exports=He(function(){return!U("z").propertyIsEnumerable(0)})?function(w){return i(w)=="String"?V(w,""):U(w)}:U},"485a":function(Xe,rt,Ae){var Je=Ae("c65b"),He=Ae("1626"),i=Ae("861d"),U=TypeError;Xe.exports=function(V,w){var f,M;if(w==="string"&&He(f=V.toString)&&!i(M=Je(f,V))||He(f=V.valueOf)&&!i(M=Je(f,V))||w!=="string"&&He(f=V.toString)&&!i(M=Je(f,V)))return M;throw U("Can't convert object to primitive value")}},"4d64":function(Xe,rt,Ae){var Je=Ae("fc6a"),He=Ae("23cb"),i=Ae("07fa"),U=function(V){return function(w,f,M){var T=Je(w),e=i(T),a=He(M,e),n;if(V&&f!=f){for(;e>a;)if(n=T[a++],n!=n)return!0}else for(;e>a;a++)if((V||a in T)&&T[a]===f)return V||a||0;return!V&&-1}};Xe.exports={includes:U(!0),indexOf:U(!1)}},"4dae":function(Xe,rt,Ae){var Je=Ae("23cb"),He=Ae("07fa"),i=Ae("8418"),U=Array,V=Math.max;Xe.exports=function(w,f,M){for(var T=He(w),e=Je(f,T),a=Je(M===void 0?T:M,T),n=U(V(a-e,0)),r=0;e<a;e++,r++)i(n,r,w[e]);return n.length=r,n}},"4de4":function(Xe,rt,Ae){var Je=Ae("23e7"),He=Ae("b727").filter,i=Ae("1dde"),U=i("filter");Je({target:"Array",proto:!0,forced:!U},{filter:function(w){return He(this,w,arguments.length>1?arguments[1]:void 0)}})},"50c4":function(Xe,rt,Ae){var Je=Ae("5926"),He=Math.min;Xe.exports=function(i){return i>0?He(Je(i),9007199254740991):0}},5319:function(Xe,rt,Ae){var Je=Ae("2ba4"),He=Ae("c65b"),i=Ae("e330"),U=Ae("d784"),V=Ae("d039"),w=Ae("825a"),f=Ae("1626"),M=Ae("7234"),T=Ae("5926"),e=Ae("50c4"),a=Ae("577e"),n=Ae("1d80"),r=Ae("8aa5"),t=Ae("dc4a"),h=Ae("0cb2"),s=Ae("14c3"),o=Ae("b622"),y=o("replace"),d=Math.max,p=Math.min,c=i([].concat),m=i([].push),l=i("".indexOf),x=i("".slice),u=function(b){return b===void 0?b:String(b)},A=function(){return"a".replace(/./,"$0")==="$0"}(),_=function(){return/./[y]?/./[y]("a","$0")==="":!1}(),g=!V(function(){var b=/./;return b.exec=function(){var v=[];return v.groups={a:"7"},v},"".replace(b,"$<a>")!=="7"});U("replace",function(b,v,k){var S=_?"$":"$0";return[function(C,F){var I=n(this),D=M(C)?void 0:t(C,y);return D?He(D,C,I,F):He(v,a(I),C,F)},function(E,C){var F=w(this),I=a(E);if(typeof C=="string"&&l(C,S)===-1&&l(C,"$<")===-1){var D=k(v,F,I,C);if(D.done)return D.value}var R=f(C);R||(C=a(C));var O=F.global;if(O){var z=F.unicode;F.lastIndex=0}for(var B=[];;){var G=s(F,I);if(G===null||(m(B,G),!O))break;var Q=a(G[0]);Q===""&&(F.lastIndex=r(I,e(F.lastIndex),z))}for(var X="",j=0,re=0;re<B.length;re++){G=B[re];for(var ue=a(G[0]),K=d(p(T(G.index),I.length),0),te=[],Y=1;Y<G.length;Y++)m(te,u(G[Y]));var H=G.groups;if(R){var ee=c([ue],te,K,I);H!==void 0&&m(ee,H);var ne=a(Je(C,void 0,ee))}else ne=h(ue,I,K,te,H,C);K>=j&&(X+=x(I,j,K)+ne,j=K+ue.length)}return X+x(I,j)}]},!g||!A||_)},5692:function(Xe,rt,Ae){var Je=Ae("c430"),He=Ae("c6cd");(Xe.exports=function(i,U){return He[i]||(He[i]=U!==void 0?U:{})})("versions",[]).push({version:"3.26.0",mode:Je?"pure":"global",copyright:"\xA9 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.26.0/LICENSE",source:"https://github.com/zloirock/core-js"})},"56ef":function(Xe,rt,Ae){var Je=Ae("d066"),He=Ae("e330"),i=Ae("241c"),U=Ae("7418"),V=Ae("825a"),w=He([].concat);Xe.exports=Je("Reflect","ownKeys")||function(M){var T=i.f(V(M)),e=U.f;return e?w(T,e(M)):T}},"577e":function(Xe,rt,Ae){var Je=Ae("f5df"),He=String;Xe.exports=function(i){if(Je(i)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return He(i)}},"57b9":function(Xe,rt,Ae){var Je=Ae("c65b"),He=Ae("d066"),i=Ae("b622"),U=Ae("cb2d");Xe.exports=function(){var V=He("Symbol"),w=V&&V.prototype,f=w&&w.valueOf,M=i("toPrimitive");w&&!w[M]&&U(w,M,function(T){return Je(f,this)},{arity:1})}},5926:function(Xe,rt,Ae){var Je=Ae("b42e");Xe.exports=function(He){var i=+He;return i!==i||i===0?0:Je(i)}},"59ed":function(Xe,rt,Ae){var Je=Ae("1626"),He=Ae("0d51"),i=TypeError;Xe.exports=function(U){if(Je(U))return U;throw i(He(U)+" is not a function")}},"5a47":function(Xe,rt,Ae){var Je=Ae("23e7"),He=Ae("04f8"),i=Ae("d039"),U=Ae("7418"),V=Ae("7b0b"),w=!He||i(function(){U.f(1)});Je({target:"Object",stat:!0,forced:w},{getOwnPropertySymbols:function(M){var T=U.f;return T?T(V(M)):[]}})},"5c6c":function(Xe,rt){Xe.exports=function(Ae,Je){return{enumerable:!(Ae&1),configurable:!(Ae&2),writable:!(Ae&4),value:Je}}},"5e77":function(Xe,rt,Ae){var Je=Ae("83ab"),He=Ae("1a2d"),i=Function.prototype,U=Je&&Object.getOwnPropertyDescriptor,V=He(i,"name"),w=V&&function(){}.name==="something",f=V&&(!Je||Je&&U(i,"name").configurable);Xe.exports={EXISTS:V,PROPER:w,CONFIGURABLE:f}},"605d":function(Xe,rt,Ae){var Je=Ae("c6b6"),He=Ae("da84");Xe.exports=Je(He.process)=="process"},"60da":function(Xe,rt,Ae){var Je=Ae("83ab"),He=Ae("e330"),i=Ae("c65b"),U=Ae("d039"),V=Ae("df75"),w=Ae("7418"),f=Ae("d1e7"),M=Ae("7b0b"),T=Ae("44ad"),e=Object.assign,a=Object.defineProperty,n=He([].concat);Xe.exports=!e||U(function(){if(Je&&e({b:1},e(a({},"a",{enumerable:!0,get:function(){a(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var r={},t={},h=Symbol(),s="abcdefghijklmnopqrst";return r[h]=7,s.split("").forEach(function(o){t[o]=o}),e({},r)[h]!=7||V(e({},t)).join("")!=s})?function(t,h){for(var s=M(t),o=arguments.length,y=1,d=w.f,p=f.f;o>y;)for(var c=T(arguments[y++]),m=d?n(V(c),d(c)):V(c),l=m.length,x=0,u;l>x;)u=m[x++],(!Je||i(p,c,u))&&(s[u]=c[u]);return s}:e},"61cc":function(Xe,rt,Ae){(function(Je){var He,He;(function(i){Xe.exports=i()})(function(){return function(){function i(U,V,w){function f(e,a){if(!V[e]){if(!U[e]){var n=typeof He=="function"&&He;if(!a&&n)return He(e,!0);if(M)return M(e,!0);var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}var t=V[e]={exports:{}};U[e][0].call(t.exports,function(h){var s=U[e][1][h];return f(s||h)},t,t.exports,i,U,V,w)}return V[e].exports}for(var M=typeof He=="function"&&He,T=0;T<w.length;T++)f(w[T]);return f}return i}()({1:[function(i,U,V){var w=i("../src/lib"),f={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:rgba(0,0,0,0);border:6px solid rgba(0,0,0,0);z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid rgba(0,0,0,0);border-left-color:#69738a;margin-top:8px;margin-right:-30px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var M in f){var T=M.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");w.addStyleRule(T,f[M])}},{"../src/lib":515}],2:[function(i,U,V){U.exports=i("../src/transforms/aggregate")},{"../src/transforms/aggregate":1127}],3:[function(i,U,V){U.exports=i("../src/traces/bar")},{"../src/traces/bar":665}],4:[function(i,U,V){U.exports=i("../src/traces/barpolar")},{"../src/traces/barpolar":678}],5:[function(i,U,V){U.exports=i("../src/traces/box")},{"../src/traces/box":688}],6:[function(i,U,V){U.exports=i("../src/components/calendars")},{"../src/components/calendars":365}],7:[function(i,U,V){U.exports=i("../src/traces/candlestick")},{"../src/traces/candlestick":697}],8:[function(i,U,V){U.exports=i("../src/traces/carpet")},{"../src/traces/carpet":716}],9:[function(i,U,V){U.exports=i("../src/traces/choropleth")},{"../src/traces/choropleth":730}],10:[function(i,U,V){U.exports=i("../src/traces/choroplethmapbox")},{"../src/traces/choroplethmapbox":737}],11:[function(i,U,V){U.exports=i("../src/traces/cone")},{"../src/traces/cone":743}],12:[function(i,U,V){U.exports=i("../src/traces/contour")},{"../src/traces/contour":758}],13:[function(i,U,V){U.exports=i("../src/traces/contourcarpet")},{"../src/traces/contourcarpet":769}],14:[function(i,U,V){U.exports=i("../src/core")},{"../src/core":493}],15:[function(i,U,V){U.exports=i("../src/traces/densitymapbox")},{"../src/traces/densitymapbox":777}],16:[function(i,U,V){U.exports=i("../src/transforms/filter")},{"../src/transforms/filter":1128}],17:[function(i,U,V){U.exports=i("../src/traces/funnel")},{"../src/traces/funnel":787}],18:[function(i,U,V){U.exports=i("../src/traces/funnelarea")},{"../src/traces/funnelarea":796}],19:[function(i,U,V){U.exports=i("../src/transforms/groupby")},{"../src/transforms/groupby":1129}],20:[function(i,U,V){U.exports=i("../src/traces/heatmap")},{"../src/traces/heatmap":809}],21:[function(i,U,V){U.exports=i("../src/traces/heatmapgl")},{"../src/traces/heatmapgl":820}],22:[function(i,U,V){U.exports=i("../src/traces/histogram")},{"../src/traces/histogram":832}],23:[function(i,U,V){U.exports=i("../src/traces/histogram2d")},{"../src/traces/histogram2d":838}],24:[function(i,U,V){U.exports=i("../src/traces/histogram2dcontour")},{"../src/traces/histogram2dcontour":842}],25:[function(i,U,V){U.exports=i("../src/traces/icicle")},{"../src/traces/icicle":848}],26:[function(i,U,V){U.exports=i("../src/traces/image")},{"../src/traces/image":861}],27:[function(i,U,V){var w=i("./core");w.register([i("./bar"),i("./box"),i("./heatmap"),i("./histogram"),i("./histogram2d"),i("./histogram2dcontour"),i("./contour"),i("./scatterternary"),i("./violin"),i("./funnel"),i("./waterfall"),i("./image"),i("./pie"),i("./sunburst"),i("./treemap"),i("./icicle"),i("./funnelarea"),i("./scatter3d"),i("./surface"),i("./isosurface"),i("./volume"),i("./mesh3d"),i("./cone"),i("./streamtube"),i("./scattergeo"),i("./choropleth"),i("./scattergl"),i("./splom"),i("./pointcloud"),i("./heatmapgl"),i("./parcoords"),i("./parcats"),i("./scattermapbox"),i("./choroplethmapbox"),i("./densitymapbox"),i("./sankey"),i("./indicator"),i("./table"),i("./carpet"),i("./scattercarpet"),i("./contourcarpet"),i("./ohlc"),i("./candlestick"),i("./scatterpolar"),i("./scatterpolargl"),i("./barpolar"),i("./scattersmith"),i("./aggregate"),i("./filter"),i("./groupby"),i("./sort"),i("./calendars")]),U.exports=w},{"./aggregate":2,"./bar":3,"./barpolar":4,"./box":5,"./calendars":6,"./candlestick":7,"./carpet":8,"./choropleth":9,"./choroplethmapbox":10,"./cone":11,"./contour":12,"./contourcarpet":13,"./core":14,"./densitymapbox":15,"./filter":16,"./funnel":17,"./funnelarea":18,"./groupby":19,"./heatmap":20,"./heatmapgl":21,"./histogram":22,"./histogram2d":23,"./histogram2dcontour":24,"./icicle":25,"./image":26,"./indicator":28,"./isosurface":29,"./mesh3d":30,"./ohlc":31,"./parcats":32,"./parcoords":33,"./pie":34,"./pointcloud":35,"./sankey":36,"./scatter3d":37,"./scattercarpet":38,"./scattergeo":39,"./scattergl":40,"./scattermapbox":41,"./scatterpolar":42,"./scatterpolargl":43,"./scattersmith":44,"./scatterternary":45,"./sort":46,"./splom":47,"./streamtube":48,"./sunburst":49,"./surface":50,"./table":51,"./treemap":52,"./violin":53,"./volume":54,"./waterfall":55}],28:[function(i,U,V){U.exports=i("../src/traces/indicator")},{"../src/traces/indicator":869}],29:[function(i,U,V){U.exports=i("../src/traces/isosurface")},{"../src/traces/isosurface":875}],30:[function(i,U,V){U.exports=i("../src/traces/mesh3d")},{"../src/traces/mesh3d":880}],31:[function(i,U,V){U.exports=i("../src/traces/ohlc")},{"../src/traces/ohlc":885}],32:[function(i,U,V){U.exports=i("../src/traces/parcats")},{"../src/traces/parcats":894}],33:[function(i,U,V){U.exports=i("../src/traces/parcoords")},{"../src/traces/parcoords":905}],34:[function(i,U,V){U.exports=i("../src/traces/pie")},{"../src/traces/pie":916}],35:[function(i,U,V){U.exports=i("../src/traces/pointcloud")},{"../src/traces/pointcloud":925}],36:[function(i,U,V){U.exports=i("../src/traces/sankey")},{"../src/traces/sankey":931}],37:[function(i,U,V){U.exports=i("../src/traces/scatter3d")},{"../src/traces/scatter3d":969}],38:[function(i,U,V){U.exports=i("../src/traces/scattercarpet")},{"../src/traces/scattercarpet":976}],39:[function(i,U,V){U.exports=i("../src/traces/scattergeo")},{"../src/traces/scattergeo":984}],40:[function(i,U,V){U.exports=i("../src/traces/scattergl")},{"../src/traces/scattergl":998}],41:[function(i,U,V){U.exports=i("../src/traces/scattermapbox")},{"../src/traces/scattermapbox":1008}],42:[function(i,U,V){U.exports=i("../src/traces/scatterpolar")},{"../src/traces/scatterpolar":1016}],43:[function(i,U,V){U.exports=i("../src/traces/scatterpolargl")},{"../src/traces/scatterpolargl":1024}],44:[function(i,U,V){U.exports=i("../src/traces/scattersmith")},{"../src/traces/scattersmith":1031}],45:[function(i,U,V){U.exports=i("../src/traces/scatterternary")},{"../src/traces/scatterternary":1039}],46:[function(i,U,V){U.exports=i("../src/transforms/sort")},{"../src/transforms/sort":1131}],47:[function(i,U,V){U.exports=i("../src/traces/splom")},{"../src/traces/splom":1049}],48:[function(i,U,V){U.exports=i("../src/traces/streamtube")},{"../src/traces/streamtube":1057}],49:[function(i,U,V){U.exports=i("../src/traces/sunburst")},{"../src/traces/sunburst":1065}],50:[function(i,U,V){U.exports=i("../src/traces/surface")},{"../src/traces/surface":1074}],51:[function(i,U,V){U.exports=i("../src/traces/table")},{"../src/traces/table":1082}],52:[function(i,U,V){U.exports=i("../src/traces/treemap")},{"../src/traces/treemap":1093}],53:[function(i,U,V){U.exports=i("../src/traces/violin")},{"../src/traces/violin":1106}],54:[function(i,U,V){U.exports=i("../src/traces/volume")},{"../src/traces/volume":1114}],55:[function(i,U,V){U.exports=i("../src/traces/waterfall")},{"../src/traces/waterfall":1122}],56:[function(i,U,V){(function(w,f){typeof V=="object"&&typeof U<"u"?f(V,i("d3-array"),i("d3-collection"),i("d3-shape"),i("elementary-circuits-directed-graph")):f(w.d3=w.d3||{},w.d3,w.d3,w.d3,null)})(this,function(w,f,M,T,e){e=e&&e.hasOwnProperty("default")?e.default:e;function a(ce){return ce.target.depth}function n(ce){return ce.depth}function r(ce,de){return de-1-ce.height}function t(ce,de){return ce.sourceLinks.length?ce.depth:de-1}function h(ce){return ce.targetLinks.length?ce.depth:ce.sourceLinks.length?f.min(ce.sourceLinks,a)-1:0}function s(ce){return function(){return ce}}var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ce){return typeof ce}:function(ce){return ce&&typeof Symbol=="function"&&ce.constructor===Symbol&&ce!==Symbol.prototype?"symbol":typeof ce};function y(ce,de){return p(ce.source,de.source)||ce.index-de.index}function d(ce,de){return p(ce.target,de.target)||ce.index-de.index}function p(ce,de){return ce.partOfCycle===de.partOfCycle?ce.y0-de.y0:ce.circularLinkType==="top"||de.circularLinkType==="bottom"?-1:1}function c(ce){return ce.value}function m(ce){return(ce.y0+ce.y1)/2}function l(ce){return m(ce.source)}function x(ce){return m(ce.target)}function u(ce){return ce.index}function A(ce){return ce.nodes}function _(ce){return ce.links}function g(ce,de){var ye=ce.get(de);if(!ye)throw new Error("missing: "+de);return ye}function b(ce,de){return de(ce)}var v=25,k=10,S=.3;function E(){var ce=0,de=0,ye=1,ge=1,me=24,Se,Le=u,Oe=t,we=A,Ce=_,Ke=32,Ye=2,Fe,Re=null;function je(){var Lt={nodes:we.apply(null,arguments),links:Ce.apply(null,arguments)};xt(Lt),C(Lt,Le,Re),Nt(Lt),Pt(Lt),F(Lt,Le),$t(Lt,Ke,Le),Ut(Lt);for(var We=4,ot=0;ot<We;ot++)q(Lt,ge,Le),ie(Lt,ge,Le),ee(Lt,de,ge,Le),q(Lt,ge,Le),ie(Lt,ge,Le);return be(Lt,de,ge),B(Lt,Ye,ge,Le),Lt}je.nodeId=function(Lt){return arguments.length?(Le=typeof Lt=="function"?Lt:s(Lt),je):Le},je.nodeAlign=function(Lt){return arguments.length?(Oe=typeof Lt=="function"?Lt:s(Lt),je):Oe},je.nodeWidth=function(Lt){return arguments.length?(me=+Lt,je):me},je.nodePadding=function(Lt){return arguments.length?(Se=+Lt,je):Se},je.nodes=function(Lt){return arguments.length?(we=typeof Lt=="function"?Lt:s(Lt),je):we},je.links=function(Lt){return arguments.length?(Ce=typeof Lt=="function"?Lt:s(Lt),je):Ce},je.size=function(Lt){return arguments.length?(ce=de=0,ye=+Lt[0],ge=+Lt[1],je):[ye-ce,ge-de]},je.extent=function(Lt){return arguments.length?(ce=+Lt[0][0],ye=+Lt[1][0],de=+Lt[0][1],ge=+Lt[1][1],je):[[ce,de],[ye,ge]]},je.iterations=function(Lt){return arguments.length?(Ke=+Lt,je):Ke},je.circularLinkGap=function(Lt){return arguments.length?(Ye=+Lt,je):Ye},je.nodePaddingRatio=function(Lt){return arguments.length?(Fe=+Lt,je):Fe},je.sortNodes=function(Lt){return arguments.length?(Re=Lt,je):Re},je.update=function(Lt){return F(Lt,Le),Ut(Lt),Lt.links.forEach(function(We){We.circular&&(We.circularLinkType=We.y0+We.y1<ge?"top":"bottom",We.source.circularLinkType=We.circularLinkType,We.target.circularLinkType=We.circularLinkType)}),q(Lt,ge,Le,!1),ie(Lt,ge,Le),B(Lt,Ye,ge,Le),Lt};function xt(Lt){Lt.nodes.forEach(function(ot,Ge){ot.index=Ge,ot.sourceLinks=[],ot.targetLinks=[]});var We=M.map(Lt.nodes,Le);return Lt.links.forEach(function(ot,Ge){ot.index=Ge;var Me=ot.source,Ve=ot.target;(typeof Me>"u"?"undefined":o(Me))!=="object"&&(Me=ot.source=g(We,Me)),(typeof Ve>"u"?"undefined":o(Ve))!=="object"&&(Ve=ot.target=g(We,Ve)),Me.sourceLinks.push(ot),Ve.targetLinks.push(ot)}),Lt}function Nt(Lt){Lt.nodes.forEach(function(We){We.partOfCycle=!1,We.value=Math.max(f.sum(We.sourceLinks,c),f.sum(We.targetLinks,c)),We.sourceLinks.forEach(function(ot){ot.circular&&(We.partOfCycle=!0,We.circularLinkType=ot.circularLinkType)}),We.targetLinks.forEach(function(ot){ot.circular&&(We.partOfCycle=!0,We.circularLinkType=ot.circularLinkType)})})}function tr(Lt){var We=0,ot=0,Ge=0,Me=0,Ve=f.max(Lt.nodes,function(Qe){return Qe.column});return Lt.links.forEach(function(Qe){Qe.circular&&(Qe.circularLinkType=="top"?We=We+Qe.width:ot=ot+Qe.width,Qe.target.column==0&&(Me=Me+Qe.width),Qe.source.column==Ve&&(Ge=Ge+Qe.width))}),We=We>0?We+v+k:We,ot=ot>0?ot+v+k:ot,Ge=Ge>0?Ge+v+k:Ge,Me=Me>0?Me+v+k:Me,{top:We,bottom:ot,left:Me,right:Ge}}function Ht(Lt,We){var ot=f.max(Lt.nodes,function(wt){return wt.column}),Ge=ye-ce,Me=ge-de,Ve=Ge+We.right+We.left,Qe=Me+We.top+We.bottom,tt=Ge/Ve,St=Me/Qe;return ce=ce*tt+We.left,ye=We.right==0?ye:ye*tt,de=de*St+We.top,ge=ge*St,Lt.nodes.forEach(function(wt){wt.x0=ce+wt.column*((ye-ce-me)/ot),wt.x1=wt.x0+me}),St}function Pt(Lt){var We,ot,Ge;for(We=Lt.nodes,ot=[],Ge=0;We.length;++Ge,We=ot,ot=[])We.forEach(function(Me){Me.depth=Ge,Me.sourceLinks.forEach(function(Ve){ot.indexOf(Ve.target)<0&&!Ve.circular&&ot.push(Ve.target)})});for(We=Lt.nodes,ot=[],Ge=0;We.length;++Ge,We=ot,ot=[])We.forEach(function(Me){Me.height=Ge,Me.targetLinks.forEach(function(Ve){ot.indexOf(Ve.source)<0&&!Ve.circular&&ot.push(Ve.source)})});Lt.nodes.forEach(function(Me){Me.column=Math.floor(Oe.call(null,Me,Ge))})}function $t(Lt,We,ot){var Ge=M.nest().key(function(wt){return wt.column}).sortKeys(f.ascending).entries(Lt.nodes).map(function(wt){return wt.values});Qe(ot),St();for(var Me=1,Ve=We;Ve>0;--Ve)tt(Me*=.99,ot),St();function Qe(wt){if(Fe){var Ct=1/0;Ge.forEach(function(Qt){var Zt=ge*Fe/(Qt.length+1);Ct=Zt<Ct?Zt:Ct}),Se=Ct}var jt=f.min(Ge,function(Qt){return(ge-de-(Qt.length-1)*Se)/f.sum(Qt,c)});jt=jt*S,Lt.links.forEach(function(Qt){Qt.width=Qt.value*jt});var Bt=tr(Lt),Wt=Ht(Lt,Bt);jt=jt*Wt,Lt.links.forEach(function(Qt){Qt.width=Qt.value*jt}),Ge.forEach(function(Qt){var Zt=Qt.length;Qt.forEach(function(cr,Xr){cr.depth==Ge.length-1&&Zt==1||cr.depth==0&&Zt==1?(cr.y0=ge/2-cr.value*jt,cr.y1=cr.y0+cr.value*jt):cr.partOfCycle?R(cr,wt)==0?(cr.y0=ge/2+Xr,cr.y1=cr.y0+cr.value*jt):cr.circularLinkType=="top"?(cr.y0=de+Xr,cr.y1=cr.y0+cr.value*jt):(cr.y0=ge-cr.value*jt-Xr,cr.y1=cr.y0+cr.value*jt):Bt.top==0||Bt.bottom==0?(cr.y0=(ge-de)/Zt*Xr,cr.y1=cr.y0+cr.value*jt):(cr.y0=(ge-de)/2-Zt/2+Xr,cr.y1=cr.y0+cr.value*jt)})})}function tt(wt,Ct){var jt=Ge.length;Ge.forEach(function(Bt){var Wt=Bt.length,Qt=Bt[0].depth;Bt.forEach(function(Zt){var cr;if((Zt.sourceLinks.length||Zt.targetLinks.length)&&!(Zt.partOfCycle&&R(Zt,Ct)>0))if(Qt==0&&Wt==1)cr=Zt.y1-Zt.y0,Zt.y0=ge/2-cr/2,Zt.y1=ge/2+cr/2;else if(Qt==jt-1&&Wt==1)cr=Zt.y1-Zt.y0,Zt.y0=ge/2-cr/2,Zt.y1=ge/2+cr/2;else{var Xr=0,vn=f.mean(Zt.sourceLinks,x),en=f.mean(Zt.targetLinks,l);vn&&en?Xr=(vn+en)/2:Xr=vn||en;var ut=(Xr-m(Zt))*wt;Zt.y0+=ut,Zt.y1+=ut}})})}function St(){Ge.forEach(function(wt){var Ct,jt,Bt=de,Wt=wt.length,Qt;for(wt.sort(p),Qt=0;Qt<Wt;++Qt)Ct=wt[Qt],jt=Bt-Ct.y0,jt>0&&(Ct.y0+=jt,Ct.y1+=jt),Bt=Ct.y1+Se;if(jt=Bt-Se-ge,jt>0)for(Bt=Ct.y0-=jt,Ct.y1-=jt,Qt=Wt-2;Qt>=0;--Qt)Ct=wt[Qt],jt=Ct.y1+Se-Bt,jt>0&&(Ct.y0-=jt,Ct.y1-=jt),Bt=Ct.y0})}}function Ut(Lt){Lt.nodes.forEach(function(We){We.sourceLinks.sort(d),We.targetLinks.sort(y)}),Lt.nodes.forEach(function(We){var ot=We.y0,Ge=ot,Me=We.y1,Ve=Me;We.sourceLinks.forEach(function(Qe){Qe.circular?(Qe.y0=Me-Qe.width/2,Me=Me-Qe.width):(Qe.y0=ot+Qe.width/2,ot+=Qe.width)}),We.targetLinks.forEach(function(Qe){Qe.circular?(Qe.y1=Ve-Qe.width/2,Ve=Ve-Qe.width):(Qe.y1=Ge+Qe.width/2,Ge+=Qe.width)})})}return je}function C(ce,de,ye){var ge=0;if(ye===null){for(var me=[],Se=0;Se<ce.links.length;Se++){var Le=ce.links[Se],Oe=Le.source.index,we=Le.target.index;me[Oe]||(me[Oe]=[]),me[we]||(me[we]=[]),me[Oe].indexOf(we)===-1&&me[Oe].push(we)}var Ce=e(me);Ce.sort(function(Re,je){return Re.length-je.length});var Ke={};for(Se=0;Se<Ce.length;Se++){var Ye=Ce[Se],Fe=Ye.slice(-2);Ke[Fe[0]]||(Ke[Fe[0]]={}),Ke[Fe[0]][Fe[1]]=!0}ce.links.forEach(function(Re){var je=Re.target.index,xt=Re.source.index;je===xt||Ke[xt]&&Ke[xt][je]?(Re.circular=!0,Re.circularLinkID=ge,ge=ge+1):Re.circular=!1})}else ce.links.forEach(function(Re){Re.source[ye]<Re.target[ye]?Re.circular=!1:(Re.circular=!0,Re.circularLinkID=ge,ge=ge+1)})}function F(ce,de){var ye=0,ge=0;ce.links.forEach(function(me){me.circular&&(me.source.circularLinkType||me.target.circularLinkType?me.circularLinkType=me.source.circularLinkType?me.source.circularLinkType:me.target.circularLinkType:me.circularLinkType=ye<ge?"top":"bottom",me.circularLinkType=="top"?ye=ye+1:ge=ge+1,ce.nodes.forEach(function(Se){(b(Se,de)==b(me.source,de)||b(Se,de)==b(me.target,de))&&(Se.circularLinkType=me.circularLinkType)}))}),ce.links.forEach(function(me){me.circular&&(me.source.circularLinkType==me.target.circularLinkType&&(me.circularLinkType=me.source.circularLinkType),oe(me,de)&&(me.circularLinkType=me.source.circularLinkType))})}function I(ce){var de=Math.abs(ce.y1-ce.y0),ye=Math.abs(ce.target.x0-ce.source.x1);return Math.atan(ye/de)}function D(ce,de){return ce.source.column<de.target.column?!1:!(ce.target.column>de.source.column)}function R(ce,de){var ye=0;ce.sourceLinks.forEach(function(me){ye=me.circular&&!oe(me,de)?ye+1:ye});var ge=0;return ce.targetLinks.forEach(function(me){ge=me.circular&&!oe(me,de)?ge+1:ge}),ye+ge}function O(ce){var de=ce.source.sourceLinks,ye=0;de.forEach(function(Se){ye=Se.circular?ye+1:ye});var ge=ce.target.targetLinks,me=0;return ge.forEach(function(Se){me=Se.circular?me+1:me}),!(ye>1||me>1)}function z(ce,de,ye){return ce.sort(Q),ce.forEach(function(ge,me){var Se=0;if(oe(ge,ye)&&O(ge))ge.circularPathData.verticalBuffer=Se+ge.width/2;else{var Le=0;for(Le;Le<me;Le++)if(D(ce[me],ce[Le])){var Oe=ce[Le].circularPathData.verticalBuffer+ce[Le].width/2+de;Se=Oe>Se?Oe:Se}ge.circularPathData.verticalBuffer=Se+ge.width/2}}),ce}function B(ce,de,ye,ge){var me=5,Se=f.min(ce.links,function(we){return we.source.y0});ce.links.forEach(function(we){we.circular&&(we.circularPathData={})});var Le=ce.links.filter(function(we){return we.circularLinkType=="top"});z(Le,de,ge);var Oe=ce.links.filter(function(we){return we.circularLinkType=="bottom"});z(Oe,de,ge),ce.links.forEach(function(we){if(we.circular){if(we.circularPathData.arcRadius=we.width+k,we.circularPathData.leftNodeBuffer=me,we.circularPathData.rightNodeBuffer=me,we.circularPathData.sourceWidth=we.source.x1-we.source.x0,we.circularPathData.sourceX=we.source.x0+we.circularPathData.sourceWidth,we.circularPathData.targetX=we.target.x0,we.circularPathData.sourceY=we.y0,we.circularPathData.targetY=we.y1,oe(we,ge)&&O(we))we.circularPathData.leftSmallArcRadius=k+we.width/2,we.circularPathData.leftLargeArcRadius=k+we.width/2,we.circularPathData.rightSmallArcRadius=k+we.width/2,we.circularPathData.rightLargeArcRadius=k+we.width/2,we.circularLinkType=="bottom"?(we.circularPathData.verticalFullExtent=we.source.y1+v+we.circularPathData.verticalBuffer,we.circularPathData.verticalLeftInnerExtent=we.circularPathData.verticalFullExtent-we.circularPathData.leftLargeArcRadius,we.circularPathData.verticalRightInnerExtent=we.circularPathData.verticalFullExtent-we.circularPathData.rightLargeArcRadius):(we.circularPathData.verticalFullExtent=we.source.y0-v-we.circularPathData.verticalBuffer,we.circularPathData.verticalLeftInnerExtent=we.circularPathData.verticalFullExtent+we.circularPathData.leftLargeArcRadius,we.circularPathData.verticalRightInnerExtent=we.circularPathData.verticalFullExtent+we.circularPathData.rightLargeArcRadius);else{var Ce=we.source.column,Ke=we.circularLinkType,Ye=ce.links.filter(function(je){return je.source.column==Ce&&je.circularLinkType==Ke});we.circularLinkType=="bottom"?Ye.sort(j):Ye.sort(X);var Fe=0;Ye.forEach(function(je,xt){je.circularLinkID==we.circularLinkID&&(we.circularPathData.leftSmallArcRadius=k+we.width/2+Fe,we.circularPathData.leftLargeArcRadius=k+we.width/2+xt*de+Fe),Fe=Fe+je.width}),Ce=we.target.column,Ye=ce.links.filter(function(je){return je.target.column==Ce&&je.circularLinkType==Ke}),we.circularLinkType=="bottom"?Ye.sort(ue):Ye.sort(re),Fe=0,Ye.forEach(function(je,xt){je.circularLinkID==we.circularLinkID&&(we.circularPathData.rightSmallArcRadius=k+we.width/2+Fe,we.circularPathData.rightLargeArcRadius=k+we.width/2+xt*de+Fe),Fe=Fe+je.width}),we.circularLinkType=="bottom"?(we.circularPathData.verticalFullExtent=Math.max(ye,we.source.y1,we.target.y1)+v+we.circularPathData.verticalBuffer,we.circularPathData.verticalLeftInnerExtent=we.circularPathData.verticalFullExtent-we.circularPathData.leftLargeArcRadius,we.circularPathData.verticalRightInnerExtent=we.circularPathData.verticalFullExtent-we.circularPathData.rightLargeArcRadius):(we.circularPathData.verticalFullExtent=Se-v-we.circularPathData.verticalBuffer,we.circularPathData.verticalLeftInnerExtent=we.circularPathData.verticalFullExtent+we.circularPathData.leftLargeArcRadius,we.circularPathData.verticalRightInnerExtent=we.circularPathData.verticalFullExtent+we.circularPathData.rightLargeArcRadius)}we.circularPathData.leftInnerExtent=we.circularPathData.sourceX+we.circularPathData.leftNodeBuffer,we.circularPathData.rightInnerExtent=we.circularPathData.targetX-we.circularPathData.rightNodeBuffer,we.circularPathData.leftFullExtent=we.circularPathData.sourceX+we.circularPathData.leftLargeArcRadius+we.circularPathData.leftNodeBuffer,we.circularPathData.rightFullExtent=we.circularPathData.targetX-we.circularPathData.rightLargeArcRadius-we.circularPathData.rightNodeBuffer}if(we.circular)we.path=G(we);else{var Re=T.linkHorizontal().source(function(je){var xt=je.source.x0+(je.source.x1-je.source.x0),Nt=je.y0;return[xt,Nt]}).target(function(je){var xt=je.target.x0,Nt=je.y1;return[xt,Nt]});we.path=Re(we)}})}function G(ce){var de="";return ce.circularLinkType=="top"?de="M"+ce.circularPathData.sourceX+" "+ce.circularPathData.sourceY+" L"+ce.circularPathData.leftInnerExtent+" "+ce.circularPathData.sourceY+" A"+ce.circularPathData.leftLargeArcRadius+" "+ce.circularPathData.leftSmallArcRadius+" 0 0 0 "+ce.circularPathData.leftFullExtent+" "+(ce.circularPathData.sourceY-ce.circularPathData.leftSmallArcRadius)+" L"+ce.circularPathData.leftFullExtent+" "+ce.circularPathData.verticalLeftInnerExtent+" A"+ce.circularPathData.leftLargeArcRadius+" "+ce.circularPathData.leftLargeArcRadius+" 0 0 0 "+ce.circularPathData.leftInnerExtent+" "+ce.circularPathData.verticalFullExtent+" L"+ce.circularPathData.rightInnerExtent+" "+ce.circularPathData.verticalFullExtent+" A"+ce.circularPathData.rightLargeArcRadius+" "+ce.circularPathData.rightLargeArcRadius+" 0 0 0 "+ce.circularPathData.rightFullExtent+" "+ce.circularPathData.verticalRightInnerExtent+" L"+ce.circularPathData.rightFullExtent+" "+(ce.circularPathData.targetY-ce.circularPathData.rightSmallArcRadius)+" A"+ce.circularPathData.rightLargeArcRadius+" "+ce.circularPathData.rightSmallArcRadius+" 0 0 0 "+ce.circularPathData.rightInnerExtent+" "+ce.circularPathData.targetY+" L"+ce.circularPathData.targetX+" "+ce.circularPathData.targetY:de="M"+ce.circularPathData.sourceX+" "+ce.circularPathData.sourceY+" L"+ce.circularPathData.leftInnerExtent+" "+ce.circularPathData.sourceY+" A"+ce.circularPathData.leftLargeArcRadius+" "+ce.circularPathData.leftSmallArcRadius+" 0 0 1 "+ce.circularPathData.leftFullExtent+" "+(ce.circularPathData.sourceY+ce.circularPathData.leftSmallArcRadius)+" L"+ce.circularPathData.leftFullExtent+" "+ce.circularPathData.verticalLeftInnerExtent+" A"+ce.circularPathData.leftLargeArcRadius+" "+ce.circularPathData.leftLargeArcRadius+" 0 0 1 "+ce.circularPathData.leftInnerExtent+" "+ce.circularPathData.verticalFullExtent+" L"+ce.circularPathData.rightInnerExtent+" "+ce.circularPathData.verticalFullExtent+" A"+ce.circularPathData.rightLargeArcRadius+" "+ce.circularPathData.rightLargeArcRadius+" 0 0 1 "+ce.circularPathData.rightFullExtent+" "+ce.circularPathData.verticalRightInnerExtent+" L"+ce.circularPathData.rightFullExtent+" "+(ce.circularPathData.targetY+ce.circularPathData.rightSmallArcRadius)+" A"+ce.circularPathData.rightLargeArcRadius+" "+ce.circularPathData.rightSmallArcRadius+" 0 0 1 "+ce.circularPathData.rightInnerExtent+" "+ce.circularPathData.targetY+" L"+ce.circularPathData.targetX+" "+ce.circularPathData.targetY,de}function Q(ce,de){return K(ce)==K(de)?ce.circularLinkType=="bottom"?j(ce,de):X(ce,de):K(de)-K(ce)}function X(ce,de){return ce.y0-de.y0}function j(ce,de){return de.y0-ce.y0}function re(ce,de){return ce.y1-de.y1}function ue(ce,de){return de.y1-ce.y1}function K(ce){return ce.target.column-ce.source.column}function te(ce){return ce.target.x0-ce.source.x1}function Y(ce,de){var ye=I(ce),ge=te(de)/Math.tan(ye),me=ae(ce)=="up"?ce.y1+ge:ce.y1-ge;return me}function H(ce,de){var ye=I(ce),ge=te(de)/Math.tan(ye),me=ae(ce)=="up"?ce.y1-ge:ce.y1+ge;return me}function ee(ce,de,ye,ge){ce.links.forEach(function(me){if(!me.circular&&me.target.column-me.source.column>1){var Se=me.source.column+1,Le=me.target.column-1,Oe=1,we=Le-Se+1;for(Oe=1;Se<=Le;Se++,Oe++)ce.nodes.forEach(function(Ce){if(Ce.column==Se){var Ke=Oe/(we+1),Ye=Math.pow(1-Ke,3),Fe=3*Ke*Math.pow(1-Ke,2),Re=3*Math.pow(Ke,2)*(1-Ke),je=Math.pow(Ke,3),xt=Ye*me.y0+Fe*me.y0+Re*me.y1+je*me.y1,Nt=xt-me.width/2,tr=xt+me.width/2,Ht;Nt>Ce.y0&&Nt<Ce.y1?(Ht=Ce.y1-Nt+10,Ht=Ce.circularLinkType=="bottom"?Ht:-Ht,Ce=Z(Ce,Ht,de,ye),ce.nodes.forEach(function(Pt){b(Pt,ge)==b(Ce,ge)||Pt.column!=Ce.column||ne(Ce,Pt)&&Z(Pt,Ht,de,ye)})):tr>Ce.y0&&tr<Ce.y1?(Ht=tr-Ce.y0+10,Ce=Z(Ce,Ht,de,ye),ce.nodes.forEach(function(Pt){b(Pt,ge)==b(Ce,ge)||Pt.column!=Ce.column||Pt.y0<Ce.y1&&Pt.y1>Ce.y1&&Z(Pt,Ht,de,ye)})):Nt<Ce.y0&&tr>Ce.y1&&(Ht=tr-Ce.y0+10,Ce=Z(Ce,Ht,de,ye),ce.nodes.forEach(function(Pt){b(Pt,ge)==b(Ce,ge)||Pt.column!=Ce.column||Pt.y0<Ce.y1&&Pt.y1>Ce.y1&&Z(Pt,Ht,de,ye)}))}})}})}function ne(ce,de){return ce.y0>de.y0&&ce.y0<de.y1||ce.y1>de.y0&&ce.y1<de.y1?!0:ce.y0<de.y0&&ce.y1>de.y1}function Z(ce,de,ye,ge){return ce.y0+de>=ye&&ce.y1+de<=ge&&(ce.y0=ce.y0+de,ce.y1=ce.y1+de,ce.targetLinks.forEach(function(me){me.y1=me.y1+de}),ce.sourceLinks.forEach(function(me){me.y0=me.y0+de})),ce}function q(ce,de,ye,ge){ce.nodes.forEach(function(me){ge&&me.y+(me.y1-me.y0)>de&&(me.y=me.y-(me.y+(me.y1-me.y0)-de));var Se=ce.links.filter(function(we){return b(we.source,ye)==b(me,ye)}),Le=Se.length;Le>1&&Se.sort(function(we,Ce){if(!we.circular&&!Ce.circular){if(we.target.column==Ce.target.column)return we.y1-Ce.y1;if(se(we,Ce)){if(we.target.column>Ce.target.column){var Ke=H(Ce,we);return we.y1-Ke}if(Ce.target.column>we.target.column){var Ye=H(we,Ce);return Ye-Ce.y1}}else return we.y1-Ce.y1}if(we.circular&&!Ce.circular)return we.circularLinkType=="top"?-1:1;if(Ce.circular&&!we.circular)return Ce.circularLinkType=="top"?1:-1;if(we.circular&&Ce.circular)return we.circularLinkType===Ce.circularLinkType&&we.circularLinkType=="top"?we.target.column===Ce.target.column?we.target.y1-Ce.target.y1:Ce.target.column-we.target.column:we.circularLinkType===Ce.circularLinkType&&we.circularLinkType=="bottom"?we.target.column===Ce.target.column?Ce.target.y1-we.target.y1:we.target.column-Ce.target.column:we.circularLinkType=="top"?-1:1});var Oe=me.y0;Se.forEach(function(we){we.y0=Oe+we.width/2,Oe=Oe+we.width}),Se.forEach(function(we,Ce){if(we.circularLinkType=="bottom"){var Ke=Ce+1,Ye=0;for(Ke;Ke<Le;Ke++)Ye=Ye+Se[Ke].width;we.y0=me.y1-Ye-we.width/2}})})}function ie(ce,de,ye){ce.nodes.forEach(function(ge){var me=ce.links.filter(function(Oe){return b(Oe.target,ye)==b(ge,ye)}),Se=me.length;Se>1&&me.sort(function(Oe,we){if(!Oe.circular&&!we.circular){if(Oe.source.column==we.source.column)return Oe.y0-we.y0;if(se(Oe,we)){if(we.source.column<Oe.source.column){var Ce=Y(we,Oe);return Oe.y0-Ce}if(Oe.source.column<we.source.column){var Ke=Y(Oe,we);return Ke-we.y0}}else return Oe.y0-we.y0}if(Oe.circular&&!we.circular)return Oe.circularLinkType=="top"?-1:1;if(we.circular&&!Oe.circular)return we.circularLinkType=="top"?1:-1;if(Oe.circular&&we.circular)return Oe.circularLinkType===we.circularLinkType&&Oe.circularLinkType=="top"?Oe.source.column===we.source.column?Oe.source.y1-we.source.y1:Oe.source.column-we.source.column:Oe.circularLinkType===we.circularLinkType&&Oe.circularLinkType=="bottom"?Oe.source.column===we.source.column?Oe.source.y1-we.source.y1:we.source.column-Oe.source.column:Oe.circularLinkType=="top"?-1:1});var Le=ge.y0;me.forEach(function(Oe){Oe.y1=Le+Oe.width/2,Le=Le+Oe.width}),me.forEach(function(Oe,we){if(Oe.circularLinkType=="bottom"){var Ce=we+1,Ke=0;for(Ce;Ce<Se;Ce++)Ke=Ke+me[Ce].width;Oe.y1=ge.y1-Ke-Oe.width/2}})})}function se(ce,de){return ae(ce)==ae(de)}function ae(ce){return ce.y0-ce.y1>0?"up":"down"}function oe(ce,de){return b(ce.source,de)==b(ce.target,de)}function be(ce,de,ye){var ge=ce.nodes,me=ce.links,Se=!1,Le=!1;if(me.forEach(function(Fe){Fe.circularLinkType=="top"?Se=!0:Fe.circularLinkType=="bottom"&&(Le=!0)}),Se==!1||Le==!1){var Oe=f.min(ge,function(Fe){return Fe.y0}),we=f.max(ge,function(Fe){return Fe.y1}),Ce=we-Oe,Ke=ye-de,Ye=Ke/Ce;ge.forEach(function(Fe){var Re=(Fe.y1-Fe.y0)*Ye;Fe.y0=(Fe.y0-Oe)*Ye,Fe.y1=Fe.y0+Re}),me.forEach(function(Fe){Fe.y0=(Fe.y0-Oe)*Ye,Fe.y1=(Fe.y1-Oe)*Ye,Fe.width=Fe.width*Ye})}}w.sankeyCircular=E,w.sankeyCenter=h,w.sankeyLeft=n,w.sankeyRight=r,w.sankeyJustify=t,Object.defineProperty(w,"__esModule",{value:!0})})},{"d3-array":107,"d3-collection":108,"d3-shape":119,"elementary-circuits-directed-graph":130}],57:[function(i,U,V){(function(w,f){typeof V=="object"&&typeof U<"u"?f(V,i("d3-array"),i("d3-collection"),i("d3-shape")):f(w.d3=w.d3||{},w.d3,w.d3,w.d3)})(this,function(w,f,M,T){function e(k){return k.target.depth}function a(k){return k.depth}function n(k,S){return S-1-k.height}function r(k,S){return k.sourceLinks.length?k.depth:S-1}function t(k){return k.targetLinks.length?k.depth:k.sourceLinks.length?f.min(k.sourceLinks,e)-1:0}function h(k){return function(){return k}}function s(k,S){return y(k.source,S.source)||k.index-S.index}function o(k,S){return y(k.target,S.target)||k.index-S.index}function y(k,S){return k.y0-S.y0}function d(k){return k.value}function p(k){return(k.y0+k.y1)/2}function c(k){return p(k.source)*k.value}function m(k){return p(k.target)*k.value}function l(k){return k.index}function x(k){return k.nodes}function u(k){return k.links}function A(k,S){var E=k.get(S);if(!E)throw new Error("missing: "+S);return E}var _=function(){var k=0,S=0,E=1,C=1,F=24,I=8,D=l,R=r,O=x,z=u,B=32,G=2/3;function Q(){var te={nodes:O.apply(null,arguments),links:z.apply(null,arguments)};return X(te),j(te),re(te),ue(te),K(te),te}Q.update=function(te){return K(te),te},Q.nodeId=function(te){return arguments.length?(D=typeof te=="function"?te:h(te),Q):D},Q.nodeAlign=function(te){return arguments.length?(R=typeof te=="function"?te:h(te),Q):R},Q.nodeWidth=function(te){return arguments.length?(F=+te,Q):F},Q.nodePadding=function(te){return arguments.length?(I=+te,Q):I},Q.nodes=function(te){return arguments.length?(O=typeof te=="function"?te:h(te),Q):O},Q.links=function(te){return arguments.length?(z=typeof te=="function"?te:h(te),Q):z},Q.size=function(te){return arguments.length?(k=S=0,E=+te[0],C=+te[1],Q):[E-k,C-S]},Q.extent=function(te){return arguments.length?(k=+te[0][0],E=+te[1][0],S=+te[0][1],C=+te[1][1],Q):[[k,S],[E,C]]},Q.iterations=function(te){return arguments.length?(B=+te,Q):B};function X(te){te.nodes.forEach(function(H,ee){H.index=ee,H.sourceLinks=[],H.targetLinks=[]});var Y=M.map(te.nodes,D);te.links.forEach(function(H,ee){H.index=ee;var ne=H.source,Z=H.target;typeof ne!="object"&&(ne=H.source=A(Y,ne)),typeof Z!="object"&&(Z=H.target=A(Y,Z)),ne.sourceLinks.push(H),Z.targetLinks.push(H)})}function j(te){te.nodes.forEach(function(Y){Y.value=Math.max(f.sum(Y.sourceLinks,d),f.sum(Y.targetLinks,d))})}function re(te){var Y,H,ee;for(Y=te.nodes,H=[],ee=0;Y.length;++ee,Y=H,H=[])Y.forEach(function(Z){Z.depth=ee,Z.sourceLinks.forEach(function(q){H.indexOf(q.target)<0&&H.push(q.target)})});for(Y=te.nodes,H=[],ee=0;Y.length;++ee,Y=H,H=[])Y.forEach(function(Z){Z.height=ee,Z.targetLinks.forEach(function(q){H.indexOf(q.source)<0&&H.push(q.source)})});var ne=(E-k-F)/(ee-1);te.nodes.forEach(function(Z){Z.x1=(Z.x0=k+Math.max(0,Math.min(ee-1,Math.floor(R.call(null,Z,ee))))*ne)+F})}function ue(te){var Y=M.nest().key(function(se){return se.x0}).sortKeys(f.ascending).entries(te.nodes).map(function(se){return se.values});ne(),ie();for(var H=1,ee=B;ee>0;--ee)q(H*=.99),ie(),Z(H),ie();function ne(){var se=f.max(Y,function(be){return be.length}),ae=G*(C-S)/(se-1);I>ae&&(I=ae);var oe=f.min(Y,function(be){return(C-S-(be.length-1)*I)/f.sum(be,d)});Y.forEach(function(be){be.forEach(function(ce,de){ce.y1=(ce.y0=de)+ce.value*oe})}),te.links.forEach(function(be){be.width=be.value*oe})}function Z(se){Y.forEach(function(ae){ae.forEach(function(oe){if(oe.targetLinks.length){var be=(f.sum(oe.targetLinks,c)/f.sum(oe.targetLinks,d)-p(oe))*se;oe.y0+=be,oe.y1+=be}})})}function q(se){Y.slice().reverse().forEach(function(ae){ae.forEach(function(oe){if(oe.sourceLinks.length){var be=(f.sum(oe.sourceLinks,m)/f.sum(oe.sourceLinks,d)-p(oe))*se;oe.y0+=be,oe.y1+=be}})})}function ie(){Y.forEach(function(se){var ae,oe,be=S,ce=se.length,de;for(se.sort(y),de=0;de<ce;++de)ae=se[de],oe=be-ae.y0,oe>0&&(ae.y0+=oe,ae.y1+=oe),be=ae.y1+I;if(oe=be-I-C,oe>0)for(be=ae.y0-=oe,ae.y1-=oe,de=ce-2;de>=0;--de)ae=se[de],oe=ae.y1+I-be,oe>0&&(ae.y0-=oe,ae.y1-=oe),be=ae.y0})}}function K(te){te.nodes.forEach(function(Y){Y.sourceLinks.sort(o),Y.targetLinks.sort(s)}),te.nodes.forEach(function(Y){var H=Y.y0,ee=H;Y.sourceLinks.forEach(function(ne){ne.y0=H+ne.width/2,H+=ne.width}),Y.targetLinks.forEach(function(ne){ne.y1=ee+ne.width/2,ee+=ne.width})})}return Q};function g(k){return[k.source.x1,k.y0]}function b(k){return[k.target.x0,k.y1]}var v=function(){return T.linkHorizontal().source(g).target(b)};w.sankey=_,w.sankeyCenter=t,w.sankeyLeft=a,w.sankeyRight=n,w.sankeyJustify=r,w.sankeyLinkHorizontal=v,Object.defineProperty(w,"__esModule",{value:!0})})},{"d3-array":107,"d3-collection":108,"d3-shape":119}],58:[function(i,U,V){(function(){var w={version:"3.8.0"},f=[].slice,M=function(le){return f.call(le)},T=self.document;function e(le){return le&&(le.ownerDocument||le.document||le).documentElement}function a(le){return le&&(le.ownerDocument&&le.ownerDocument.defaultView||le.document&&le||le.defaultView)}if(T)try{M(T.documentElement.childNodes)[0].nodeType}catch{M=function(_e){for(var De=_e.length,Ue=new Array(De);De--;)Ue[De]=_e[De];return Ue}}if(Date.now||(Date.now=function(){return+new Date}),T)try{T.createElement("DIV").style.setProperty("opacity",0,"")}catch{var n=this.Element.prototype,r=n.setAttribute,t=n.setAttributeNS,h=this.CSSStyleDeclaration.prototype,s=h.setProperty;n.setAttribute=function(_e,De){r.call(this,_e,De+"")},n.setAttributeNS=function(_e,De,Ue){t.call(this,_e,De,Ue+"")},h.setProperty=function(_e,De,Ue){s.call(this,_e,De+"",Ue)}}w.ascending=o;function o(le,_e){return le<_e?-1:le>_e?1:le>=_e?0:NaN}w.descending=function(le,_e){return _e<le?-1:_e>le?1:_e>=le?0:NaN},w.min=function(le,_e){var De=-1,Ue=le.length,Be,qe;if(arguments.length===1){for(;++De<Ue;)if((qe=le[De])!=null&&qe>=qe){Be=qe;break}for(;++De<Ue;)(qe=le[De])!=null&&Be>qe&&(Be=qe)}else{for(;++De<Ue;)if((qe=_e.call(le,le[De],De))!=null&&qe>=qe){Be=qe;break}for(;++De<Ue;)(qe=_e.call(le,le[De],De))!=null&&Be>qe&&(Be=qe)}return Be},w.max=function(le,_e){var De=-1,Ue=le.length,Be,qe;if(arguments.length===1){for(;++De<Ue;)if((qe=le[De])!=null&&qe>=qe){Be=qe;break}for(;++De<Ue;)(qe=le[De])!=null&&qe>Be&&(Be=qe)}else{for(;++De<Ue;)if((qe=_e.call(le,le[De],De))!=null&&qe>=qe){Be=qe;break}for(;++De<Ue;)(qe=_e.call(le,le[De],De))!=null&&qe>Be&&(Be=qe)}return Be},w.extent=function(le,_e){var De=-1,Ue=le.length,Be,qe,Mt;if(arguments.length===1){for(;++De<Ue;)if((qe=le[De])!=null&&qe>=qe){Be=Mt=qe;break}for(;++De<Ue;)(qe=le[De])!=null&&(Be>qe&&(Be=qe),Mt<qe&&(Mt=qe))}else{for(;++De<Ue;)if((qe=_e.call(le,le[De],De))!=null&&qe>=qe){Be=Mt=qe;break}for(;++De<Ue;)(qe=_e.call(le,le[De],De))!=null&&(Be>qe&&(Be=qe),Mt<qe&&(Mt=qe))}return[Be,Mt]};function y(le){return le===null?NaN:+le}function d(le){return!isNaN(le)}w.sum=function(le,_e){var De=0,Ue=le.length,Be,qe=-1;if(arguments.length===1)for(;++qe<Ue;)d(Be=+le[qe])&&(De+=Be);else for(;++qe<Ue;)d(Be=+_e.call(le,le[qe],qe))&&(De+=Be);return De},w.mean=function(le,_e){var De=0,Ue=le.length,Be,qe=-1,Mt=Ue;if(arguments.length===1)for(;++qe<Ue;)d(Be=y(le[qe]))?De+=Be:--Mt;else for(;++qe<Ue;)d(Be=y(_e.call(le,le[qe],qe)))?De+=Be:--Mt;if(Mt)return De/Mt},w.quantile=function(le,_e){var De=(le.length-1)*_e+1,Ue=Math.floor(De),Be=+le[Ue-1],qe=De-Ue;return qe?Be+qe*(le[Ue]-Be):Be},w.median=function(le,_e){var De=[],Ue=le.length,Be,qe=-1;if(arguments.length===1)for(;++qe<Ue;)d(Be=y(le[qe]))&&De.push(Be);else for(;++qe<Ue;)d(Be=y(_e.call(le,le[qe],qe)))&&De.push(Be);if(De.length)return w.quantile(De.sort(o),.5)},w.variance=function(le,_e){var De=le.length,Ue=0,Be,qe,Mt=0,mt=-1,Ot=0;if(arguments.length===1)for(;++mt<De;)d(Be=y(le[mt]))&&(qe=Be-Ue,Ue+=qe/++Ot,Mt+=qe*(Be-Ue));else for(;++mt<De;)d(Be=y(_e.call(le,le[mt],mt)))&&(qe=Be-Ue,Ue+=qe/++Ot,Mt+=qe*(Be-Ue));if(Ot>1)return Mt/(Ot-1)},w.deviation=function(){var le=w.variance.apply(this,arguments);return le&&Math.sqrt(le)};function p(le){return{left:function(_e,De,Ue,Be){for(arguments.length<3&&(Ue=0),arguments.length<4&&(Be=_e.length);Ue<Be;){var qe=Ue+Be>>>1;le(_e[qe],De)<0?Ue=qe+1:Be=qe}return Ue},right:function(_e,De,Ue,Be){for(arguments.length<3&&(Ue=0),arguments.length<4&&(Be=_e.length);Ue<Be;){var qe=Ue+Be>>>1;le(_e[qe],De)>0?Be=qe:Ue=qe+1}return Ue}}}var c=p(o);w.bisectLeft=c.left,w.bisect=w.bisectRight=c.right,w.bisector=function(le){return p(le.length===1?function(_e,De){return o(le(_e),De)}:le)},w.shuffle=function(le,_e,De){(Ue=arguments.length)<3&&(De=le.length,Ue<2&&(_e=0));for(var Ue=De-_e,Be,qe;Ue;)qe=Math.random()*Ue--|0,Be=le[Ue+_e],le[Ue+_e]=le[qe+_e],le[qe+_e]=Be;return le},w.permute=function(le,_e){for(var De=_e.length,Ue=new Array(De);De--;)Ue[De]=le[_e[De]];return Ue},w.pairs=function(le){for(var _e=0,De=le.length-1,Ue=le[0],Be=new Array(De<0?0:De);_e<De;)Be[_e]=[Ue,Ue=le[++_e]];return Be},w.transpose=function(le){if(!(qe=le.length))return[];for(var _e=-1,De=w.min(le,m),Ue=new Array(De);++_e<De;)for(var Be=-1,qe,Mt=Ue[_e]=new Array(qe);++Be<qe;)Mt[Be]=le[Be][_e];return Ue};function m(le){return le.length}w.zip=function(){return w.transpose(arguments)},w.keys=function(le){var _e=[];for(var De in le)_e.push(De);return _e},w.values=function(le){var _e=[];for(var De in le)_e.push(le[De]);return _e},w.entries=function(le){var _e=[];for(var De in le)_e.push({key:De,value:le[De]});return _e},w.merge=function(le){for(var _e=le.length,De,Ue=-1,Be=0,qe,Mt;++Ue<_e;)Be+=le[Ue].length;for(qe=new Array(Be);--_e>=0;)for(Mt=le[_e],De=Mt.length;--De>=0;)qe[--Be]=Mt[De];return qe};var l=Math.abs;w.range=function(le,_e,De){if(arguments.length<3&&(De=1,arguments.length<2&&(_e=le,le=0)),(_e-le)/De===1/0)throw new Error("infinite range");var Ue=[],Be=x(l(De)),qe=-1,Mt;if(le*=Be,_e*=Be,De*=Be,De<0)for(;(Mt=le+De*++qe)>_e;)Ue.push(Mt/Be);else for(;(Mt=le+De*++qe)<_e;)Ue.push(Mt/Be);return Ue};function x(le){for(var _e=1;le*_e%1;)_e*=10;return _e}function u(le,_e){for(var De in _e)Object.defineProperty(le.prototype,De,{value:_e[De],enumerable:!1})}w.map=function(le,_e){var De=new A;if(le instanceof A)le.forEach(function(mt,Ot){De.set(mt,Ot)});else if(Array.isArray(le)){var Ue=-1,Be=le.length,qe;if(arguments.length===1)for(;++Ue<Be;)De.set(Ue,le[Ue]);else for(;++Ue<Be;)De.set(_e.call(le,qe=le[Ue],Ue),qe)}else for(var Mt in le)De.set(Mt,le[Mt]);return De};function A(){this._=Object.create(null)}var _="__proto__",g="\0";u(A,{has:k,get:function(le){return this._[b(le)]},set:function(le,_e){return this._[b(le)]=_e},remove:S,keys:E,values:function(){var le=[];for(var _e in this._)le.push(this._[_e]);return le},entries:function(){var le=[];for(var _e in this._)le.push({key:v(_e),value:this._[_e]});return le},size:C,empty:F,forEach:function(le){for(var _e in this._)le.call(this,v(_e),this._[_e])}});function b(le){return(le+="")===_||le[0]===g?g+le:le}function v(le){return(le+="")[0]===g?le.slice(1):le}function k(le){return b(le)in this._}function S(le){return(le=b(le))in this._&&delete this._[le]}function E(){var le=[];for(var _e in this._)le.push(v(_e));return le}function C(){var le=0;for(var _e in this._)++le;return le}function F(){for(var le in this._)return!1;return!0}w.nest=function(){var le={},_e=[],De=[],Ue,Be;function qe(mt,Ot,er){if(er>=_e.length)return Be?Be.call(le,Ot):Ue?Ot.sort(Ue):Ot;for(var or=-1,sr=Ot.length,Lr=_e[er++],nn,pn,zr,Wr=new A,qr;++or<sr;)(qr=Wr.get(nn=Lr(pn=Ot[or])))?qr.push(pn):Wr.set(nn,[pn]);return mt?(pn=mt(),zr=function(fn,hn){pn.set(fn,qe(mt,hn,er))}):(pn={},zr=function(fn,hn){pn[fn]=qe(mt,hn,er)}),Wr.forEach(zr),pn}function Mt(mt,Ot){if(Ot>=_e.length)return mt;var er=[],or=De[Ot++];return mt.forEach(function(sr,Lr){er.push({key:sr,values:Mt(Lr,Ot)})}),or?er.sort(function(sr,Lr){return or(sr.key,Lr.key)}):er}return le.map=function(mt,Ot){return qe(Ot,mt,0)},le.entries=function(mt){return Mt(qe(w.map,mt,0),0)},le.key=function(mt){return _e.push(mt),le},le.sortKeys=function(mt){return De[_e.length-1]=mt,le},le.sortValues=function(mt){return Ue=mt,le},le.rollup=function(mt){return Be=mt,le},le},w.set=function(le){var _e=new I;if(le)for(var De=0,Ue=le.length;De<Ue;++De)_e.add(le[De]);return _e};function I(){this._=Object.create(null)}u(I,{has:k,add:function(le){return this._[b(le+="")]=!0,le},remove:S,values:E,size:C,empty:F,forEach:function(le){for(var _e in this._)le.call(this,v(_e))}}),w.behavior={};function D(le){return le}w.rebind=function(le,_e){for(var De=1,Ue=arguments.length,Be;++De<Ue;)le[Be=arguments[De]]=R(le,_e,_e[Be]);return le};function R(le,_e,De){return function(){var Ue=De.apply(_e,arguments);return Ue===_e?le:Ue}}function O(le,_e){if(_e in le)return _e;_e=_e.charAt(0).toUpperCase()+_e.slice(1);for(var De=0,Ue=z.length;De<Ue;++De){var Be=z[De]+_e;if(Be in le)return Be}}var z=["webkit","ms","moz","Moz","o","O"];function B(){}w.dispatch=function(){for(var le=new G,_e=-1,De=arguments.length;++_e<De;)le[arguments[_e]]=Q(le);return le};function G(){}G.prototype.on=function(le,_e){var De=le.indexOf("."),Ue="";if(De>=0&&(Ue=le.slice(De+1),le=le.slice(0,De)),le)return arguments.length<2?this[le].on(Ue):this[le].on(Ue,_e);if(arguments.length===2){if(_e==null)for(le in this)this.hasOwnProperty(le)&&this[le].on(Ue,null);return this}};function Q(le){var _e=[],De=new A;function Ue(){for(var Be=_e,qe=-1,Mt=Be.length,mt;++qe<Mt;)(mt=Be[qe].on)&&mt.apply(this,arguments);return le}return Ue.on=function(Be,qe){var Mt=De.get(Be),mt;return arguments.length<2?Mt&&Mt.on:(Mt&&(Mt.on=null,_e=_e.slice(0,mt=_e.indexOf(Mt)).concat(_e.slice(mt+1)),De.remove(Be)),qe&&_e.push(De.set(Be,{on:qe})),le)},Ue}w.event=null;function X(){w.event.preventDefault()}function j(){for(var le=w.event,_e;_e=le.sourceEvent;)le=_e;return le}function re(le){for(var _e=new G,De=0,Ue=arguments.length;++De<Ue;)_e[arguments[De]]=Q(_e);return _e.of=function(Be,qe){return function(Mt){try{var mt=Mt.sourceEvent=w.event;Mt.target=le,w.event=Mt,_e[Mt.type].apply(Be,qe)}finally{w.event=mt}}},_e}w.requote=function(le){return le.replace(ue,"\\$&")};var ue=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,K={}.__proto__?function(le,_e){le.__proto__=_e}:function(le,_e){for(var De in _e)le[De]=_e[De]};function te(le){return K(le,ne),le}var Y=function(le,_e){return _e.querySelector(le)},H=function(le,_e){return _e.querySelectorAll(le)},ee=function(le,_e){var De=le.matches||le[O(le,"matchesSelector")];return ee=function(Ue,Be){return De.call(Ue,Be)},ee(le,_e)};typeof Sizzle=="function"&&(Y=function(le,_e){return Sizzle(le,_e)[0]||null},H=Sizzle,ee=Sizzle.matchesSelector),w.selection=function(){return w.select(T.documentElement)};var ne=w.selection.prototype=[];ne.select=function(le){var _e=[],De,Ue,Be,qe;le=Z(le);for(var Mt=-1,mt=this.length;++Mt<mt;){_e.push(De=[]),De.parentNode=(Be=this[Mt]).parentNode;for(var Ot=-1,er=Be.length;++Ot<er;)(qe=Be[Ot])?(De.push(Ue=le.call(qe,qe.__data__,Ot,Mt)),Ue&&"__data__"in qe&&(Ue.__data__=qe.__data__)):De.push(null)}return te(_e)};function Z(le){return typeof le=="function"?le:function(){return Y(le,this)}}ne.selectAll=function(le){var _e=[],De,Ue;le=q(le);for(var Be=-1,qe=this.length;++Be<qe;)for(var Mt=this[Be],mt=-1,Ot=Mt.length;++mt<Ot;)(Ue=Mt[mt])&&(_e.push(De=M(le.call(Ue,Ue.__data__,mt,Be))),De.parentNode=Ue);return te(_e)};function q(le){return typeof le=="function"?le:function(){return H(le,this)}}var ie="http://www.w3.org/1999/xhtml",se={svg:"http://www.w3.org/2000/svg",xhtml:ie,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};w.ns={prefix:se,qualify:function(le){var _e=le.indexOf(":"),De=le;return _e>=0&&(De=le.slice(0,_e))!=="xmlns"&&(le=le.slice(_e+1)),se.hasOwnProperty(De)?{space:se[De],local:le}:le}},ne.attr=function(le,_e){if(arguments.length<2){if(typeof le=="string"){var De=this.node();return le=w.ns.qualify(le),le.local?De.getAttributeNS(le.space,le.local):De.getAttribute(le)}for(_e in le)this.each(ae(_e,le[_e]));return this}return this.each(ae(le,_e))};function ae(le,_e){le=w.ns.qualify(le);function De(){this.removeAttribute(le)}function Ue(){this.removeAttributeNS(le.space,le.local)}function Be(){this.setAttribute(le,_e)}function qe(){this.setAttributeNS(le.space,le.local,_e)}function Mt(){var Ot=_e.apply(this,arguments);Ot==null?this.removeAttribute(le):this.setAttribute(le,Ot)}function mt(){var Ot=_e.apply(this,arguments);Ot==null?this.removeAttributeNS(le.space,le.local):this.setAttributeNS(le.space,le.local,Ot)}return _e==null?le.local?Ue:De:typeof _e=="function"?le.local?mt:Mt:le.local?qe:Be}function oe(le){return le.trim().replace(/\s+/g," ")}ne.classed=function(le,_e){if(arguments.length<2){if(typeof le=="string"){var De=this.node(),Ue=(le=ce(le)).length,Be=-1;if(_e=De.classList){for(;++Be<Ue;)if(!_e.contains(le[Be]))return!1}else for(_e=De.getAttribute("class");++Be<Ue;)if(!be(le[Be]).test(_e))return!1;return!0}for(_e in le)this.each(de(_e,le[_e]));return this}return this.each(de(le,_e))};function be(le){return new RegExp("(?:^|\\s+)"+w.requote(le)+"(?:\\s+|$)","g")}function ce(le){return(le+"").trim().split(/^|\s+/)}function de(le,_e){le=ce(le).map(ye);var De=le.length;function Ue(){for(var qe=-1;++qe<De;)le[qe](this,_e)}function Be(){for(var qe=-1,Mt=_e.apply(this,arguments);++qe<De;)le[qe](this,Mt)}return typeof _e=="function"?Be:Ue}function ye(le){var _e=be(le);return function(De,Ue){if(Be=De.classList)return Ue?Be.add(le):Be.remove(le);var Be=De.getAttribute("class")||"";Ue?(_e.lastIndex=0,_e.test(Be)||De.setAttribute("class",oe(Be+" "+le))):De.setAttribute("class",oe(Be.replace(_e," ")))}}ne.style=function(le,_e,De){var Ue=arguments.length;if(Ue<3){if(typeof le!="string"){Ue<2&&(_e="");for(De in le)this.each(ge(De,le[De],_e));return this}if(Ue<2){var Be=this.node();return a(Be).getComputedStyle(Be,null).getPropertyValue(le)}De=""}return this.each(ge(le,_e,De))};function ge(le,_e,De){function Ue(){this.style.removeProperty(le)}function Be(){this.style.setProperty(le,_e,De)}function qe(){var Mt=_e.apply(this,arguments);Mt==null?this.style.removeProperty(le):this.style.setProperty(le,Mt,De)}return _e==null?Ue:typeof _e=="function"?qe:Be}ne.property=function(le,_e){if(arguments.length<2){if(typeof le=="string")return this.node()[le];for(_e in le)this.each(me(_e,le[_e]));return this}return this.each(me(le,_e))};function me(le,_e){function De(){delete this[le]}function Ue(){this[le]=_e}function Be(){var qe=_e.apply(this,arguments);qe==null?delete this[le]:this[le]=qe}return _e==null?De:typeof _e=="function"?Be:Ue}ne.text=function(le){return arguments.length?this.each(typeof le=="function"?function(){var _e=le.apply(this,arguments);this.textContent=_e==null?"":_e}:le==null?function(){this.textContent=""}:function(){this.textContent=le}):this.node().textContent},ne.html=function(le){return arguments.length?this.each(typeof le=="function"?function(){var _e=le.apply(this,arguments);this.innerHTML=_e==null?"":_e}:le==null?function(){this.innerHTML=""}:function(){this.innerHTML=le}):this.node().innerHTML},ne.append=function(le){return le=Se(le),this.select(function(){return this.appendChild(le.apply(this,arguments))})};function Se(le){function _e(){var Ue=this.ownerDocument,Be=this.namespaceURI;return Be===ie&&Ue.documentElement.namespaceURI===ie?Ue.createElement(le):Ue.createElementNS(Be,le)}function De(){return this.ownerDocument.createElementNS(le.space,le.local)}return typeof le=="function"?le:(le=w.ns.qualify(le)).local?De:_e}ne.insert=function(le,_e){return le=Se(le),_e=Z(_e),this.select(function(){return this.insertBefore(le.apply(this,arguments),_e.apply(this,arguments)||null)})},ne.remove=function(){return this.each(Le)};function Le(){var le=this.parentNode;le&&le.removeChild(this)}ne.data=function(le,_e){var De=-1,Ue=this.length,Be,qe;if(!arguments.length){for(le=new Array(Ue=(Be=this[0]).length);++De<Ue;)(qe=Be[De])&&(le[De]=qe.__data__);return le}function Mt(or,sr){var Lr,nn=or.length,pn=sr.length,zr=Math.min(nn,pn),Wr=new Array(pn),qr=new Array(pn),fn=new Array(nn),hn,tn;if(_e){var jn=new A,la=new Array(nn),Ea;for(Lr=-1;++Lr<nn;)(hn=or[Lr])&&(jn.has(Ea=_e.call(hn,hn.__data__,Lr))?fn[Lr]=hn:jn.set(Ea,hn),la[Lr]=Ea);for(Lr=-1;++Lr<pn;)(hn=jn.get(Ea=_e.call(sr,tn=sr[Lr],Lr)))?hn!==!0&&(Wr[Lr]=hn,hn.__data__=tn):qr[Lr]=Oe(tn),jn.set(Ea,!0);for(Lr=-1;++Lr<nn;)Lr in la&&jn.get(la[Lr])!==!0&&(fn[Lr]=or[Lr])}else{for(Lr=-1;++Lr<zr;)hn=or[Lr],tn=sr[Lr],hn?(hn.__data__=tn,Wr[Lr]=hn):qr[Lr]=Oe(tn);for(;Lr<pn;++Lr)qr[Lr]=Oe(sr[Lr]);for(;Lr<nn;++Lr)fn[Lr]=or[Lr]}qr.update=Wr,qr.parentNode=Wr.parentNode=fn.parentNode=or.parentNode,mt.push(qr),Ot.push(Wr),er.push(fn)}var mt=Ye([]),Ot=te([]),er=te([]);if(typeof le=="function")for(;++De<Ue;)Mt(Be=this[De],le.call(Be,Be.parentNode.__data__,De));else for(;++De<Ue;)Mt(Be=this[De],le);return Ot.enter=function(){return mt},Ot.exit=function(){return er},Ot};function Oe(le){return{__data__:le}}ne.datum=function(le){return arguments.length?this.property("__data__",le):this.property("__data__")},ne.filter=function(le){var _e=[],De,Ue,Be;typeof le!="function"&&(le=we(le));for(var qe=0,Mt=this.length;qe<Mt;qe++){_e.push(De=[]),De.parentNode=(Ue=this[qe]).parentNode;for(var mt=0,Ot=Ue.length;mt<Ot;mt++)(Be=Ue[mt])&&le.call(Be,Be.__data__,mt,qe)&&De.push(Be)}return te(_e)};function we(le){return function(){return ee(this,le)}}ne.order=function(){for(var le=-1,_e=this.length;++le<_e;)for(var De=this[le],Ue=De.length-1,Be=De[Ue],qe;--Ue>=0;)(qe=De[Ue])&&(Be&&Be!==qe.nextSibling&&Be.parentNode.insertBefore(qe,Be),Be=qe);return this},ne.sort=function(le){le=Ce.apply(this,arguments);for(var _e=-1,De=this.length;++_e<De;)this[_e].sort(le);return this.order()};function Ce(le){return arguments.length||(le=o),function(_e,De){return _e&&De?le(_e.__data__,De.__data__):!_e-!De}}ne.each=function(le){return Ke(this,function(_e,De,Ue){le.call(_e,_e.__data__,De,Ue)})};function Ke(le,_e){for(var De=0,Ue=le.length;De<Ue;De++)for(var Be=le[De],qe=0,Mt=Be.length,mt;qe<Mt;qe++)(mt=Be[qe])&&_e(mt,qe,De);return le}ne.call=function(le){var _e=M(arguments);return le.apply(_e[0]=this,_e),this},ne.empty=function(){return!this.node()},ne.node=function(){for(var le=0,_e=this.length;le<_e;le++)for(var De=this[le],Ue=0,Be=De.length;Ue<Be;Ue++){var qe=De[Ue];if(qe)return qe}return null},ne.size=function(){var le=0;return Ke(this,function(){++le}),le};function Ye(le){return K(le,Fe),le}var Fe=[];w.selection.enter=Ye,w.selection.enter.prototype=Fe,Fe.append=ne.append,Fe.empty=ne.empty,Fe.node=ne.node,Fe.call=ne.call,Fe.size=ne.size,Fe.select=function(le){for(var _e=[],De,Ue,Be,qe,Mt,mt=-1,Ot=this.length;++mt<Ot;){Be=(qe=this[mt]).update,_e.push(De=[]),De.parentNode=qe.parentNode;for(var er=-1,or=qe.length;++er<or;)(Mt=qe[er])?(De.push(Be[er]=Ue=le.call(qe.parentNode,Mt.__data__,er,mt)),Ue.__data__=Mt.__data__):De.push(null)}return te(_e)},Fe.insert=function(le,_e){return arguments.length<2&&(_e=Re(this)),ne.insert.call(this,le,_e)};function Re(le){var _e,De;return function(Ue,Be,qe){var Mt=le[qe].update,mt=Mt.length,Ot;for(qe!=De&&(De=qe,_e=0),Be>=_e&&(_e=Be+1);!(Ot=Mt[_e])&&++_e<mt;);return Ot}}w.select=function(le){var _e;return typeof le=="string"?(_e=[Y(le,T)],_e.parentNode=T.documentElement):(_e=[le],_e.parentNode=e(le)),te([_e])},w.selectAll=function(le){var _e;return typeof le=="string"?(_e=M(H(le,T)),_e.parentNode=T.documentElement):(_e=M(le),_e.parentNode=null),te([_e])},ne.on=function(le,_e,De){var Ue=arguments.length;if(Ue<3){if(typeof le!="string"){Ue<2&&(_e=!1);for(De in le)this.each(je(De,le[De],_e));return this}if(Ue<2)return(Ue=this.node()["__on"+le])&&Ue._;De=!1}return this.each(je(le,_e,De))};function je(le,_e,De){var Ue="__on"+le,Be=le.indexOf("."),qe=Nt;Be>0&&(le=le.slice(0,Be));var Mt=xt.get(le);Mt&&(le=Mt,qe=tr);function mt(){var or=this[Ue];or&&(this.removeEventListener(le,or,or.$),delete this[Ue])}function Ot(){var or=qe(_e,M(arguments));mt.call(this),this.addEventListener(le,this[Ue]=or,or.$=De),or._=_e}function er(){var or=new RegExp("^__on([^.]+)"+w.requote(le)+"$"),sr;for(var Lr in this)if(sr=Lr.match(or)){var nn=this[Lr];this.removeEventListener(sr[1],nn,nn.$),delete this[Lr]}}return Be?_e?Ot:mt:_e?B:er}var xt=w.map({mouseenter:"mouseover",mouseleave:"mouseout"});T&&xt.forEach(function(le){"on"+le in T&&xt.remove(le)});function Nt(le,_e){return function(De){var Ue=w.event;w.event=De,_e[0]=this.__data__;try{le.apply(this,_e)}finally{w.event=Ue}}}function tr(le,_e){var De=Nt(le,_e);return function(Ue){var Be=this,qe=Ue.relatedTarget;(!qe||qe!==Be&&!(qe.compareDocumentPosition(Be)&8))&&De.call(Be,Ue)}}var Ht,Pt=0;function $t(le){var _e=".dragsuppress-"+ ++Pt,De="click"+_e,Ue=w.select(a(le)).on("touchmove"+_e,X).on("dragstart"+_e,X).on("selectstart"+_e,X);if(Ht==null&&(Ht="onselectstart"in le?!1:O(le.style,"userSelect")),Ht){var Be=e(le).style,qe=Be[Ht];Be[Ht]="none"}return function(Mt){if(Ue.on(_e,null),Ht&&(Be[Ht]=qe),Mt){var mt=function(){Ue.on(De,null)};Ue.on(De,function(){X(),mt()},!0),setTimeout(mt,0)}}}w.mouse=function(le){return Lt(le,j())};var Ut=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function Lt(le,_e){_e.changedTouches&&(_e=_e.changedTouches[0]);var De=le.ownerSVGElement||le;if(De.createSVGPoint){var Ue=De.createSVGPoint();if(Ut<0){var Be=a(le);if(Be.scrollX||Be.scrollY){De=w.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var qe=De[0][0].getScreenCTM();Ut=!(qe.f||qe.e),De.remove()}}return Ut?(Ue.x=_e.pageX,Ue.y=_e.pageY):(Ue.x=_e.clientX,Ue.y=_e.clientY),Ue=Ue.matrixTransform(le.getScreenCTM().inverse()),[Ue.x,Ue.y]}var Mt=le.getBoundingClientRect();return[_e.clientX-Mt.left-le.clientLeft,_e.clientY-Mt.top-le.clientTop]}w.touch=function(le,_e,De){if(arguments.length<3&&(De=_e,_e=j().changedTouches),_e){for(var Ue=0,Be=_e.length,qe;Ue<Be;++Ue)if((qe=_e[Ue]).identifier===De)return Lt(le,qe)}},w.behavior.drag=function(){var le=re(Be,"drag","dragstart","dragend"),_e=null,De=qe(B,w.mouse,a,"mousemove","mouseup"),Ue=qe(We,w.touch,D,"touchmove","touchend");function Be(){this.on("mousedown.drag",De).on("touchstart.drag",Ue)}function qe(Mt,mt,Ot,er,or){return function(){var sr=this,Lr=w.event.target.correspondingElement||w.event.target,nn=sr.parentNode,pn=le.of(sr,arguments),zr=0,Wr=Mt(),qr=".drag"+(Wr==null?"":"-"+Wr),fn,hn=w.select(Ot(Lr)).on(er+qr,la).on(or+qr,Ea),tn=$t(Lr),jn=mt(nn,Wr);_e?(fn=_e.apply(sr,arguments),fn=[fn.x-jn[0],fn.y-jn[1]]):fn=[0,0],pn({type:"dragstart"});function la(){var ca=mt(nn,Wr),Ra,pa;!ca||(Ra=ca[0]-jn[0],pa=ca[1]-jn[1],zr|=Ra|pa,jn=ca,pn({type:"drag",x:ca[0]+fn[0],y:ca[1]+fn[1],dx:Ra,dy:pa}))}function Ea(){!mt(nn,Wr)||(hn.on(er+qr,null).on(or+qr,null),tn(zr),pn({type:"dragend"}))}}}return Be.origin=function(Mt){return arguments.length?(_e=Mt,Be):_e},w.rebind(Be,le,"on")};function We(){return w.event.changedTouches[0].identifier}w.touches=function(le,_e){return arguments.length<2&&(_e=j().touches),_e?M(_e).map(function(De){var Ue=Lt(le,De);return Ue.identifier=De.identifier,Ue}):[]};var ot=1e-6,Ge=ot*ot,Me=Math.PI,Ve=2*Me,Qe=Ve-ot,tt=Me/2,St=Me/180,wt=180/Me;function Ct(le,_e,De){return(_e[0]-le[0])*(De[1]-le[1])-(_e[1]-le[1])*(De[0]-le[0])}function jt(le){return le>1?tt:le<-1?-tt:Math.asin(le)}function Bt(le){return((le=Math.exp(le))-1/le)/2}function Wt(le){return((le=Math.exp(le))+1/le)/2}function Qt(le){return((le=Math.exp(2*le))-1)/(le+1)}var Zt=Math.SQRT2,cr=2,Xr=4;w.interpolateZoom=function(le,_e){var De=le[0],Ue=le[1],Be=le[2],qe=_e[0],Mt=_e[1],mt=_e[2],Ot=qe-De,er=Mt-Ue,or=Ot*Ot+er*er,sr,Lr;if(or<Ge)Lr=Math.log(mt/Be)/Zt,sr=function(fn){return[De+fn*Ot,Ue+fn*er,Be*Math.exp(Zt*fn*Lr)]};else{var nn=Math.sqrt(or),pn=(mt*mt-Be*Be+Xr*or)/(2*Be*cr*nn),zr=(mt*mt-Be*Be-Xr*or)/(2*mt*cr*nn),Wr=Math.log(Math.sqrt(pn*pn+1)-pn),qr=Math.log(Math.sqrt(zr*zr+1)-zr);Lr=(qr-Wr)/Zt,sr=function(fn){var hn=fn*Lr,tn=Wt(Wr),jn=Be/(cr*nn)*(tn*Qt(Zt*hn+Wr)-Bt(Wr));return[De+jn*Ot,Ue+jn*er,Be*tn/Wt(Zt*hn+Wr)]}}return sr.duration=Lr*1e3,sr},w.behavior.zoom=function(){var le={x:0,y:0,k:1},_e,De,Ue,Be=[960,500],qe=vn,Mt=250,mt=0,Ot="mousedown.zoom",er="mousemove.zoom",or="mouseup.zoom",sr,Lr="touchstart.zoom",nn,pn=re(hn,"zoomstart","zoom","zoomend"),zr,Wr,qr,fn;ut||(ut="onwheel"in T?(en=function(){return-w.event.deltaY*(w.event.deltaMode?120:1)},"wheel"):"onmousewheel"in T?(en=function(){return w.event.wheelDelta},"mousewheel"):(en=function(){return-w.event.detail},"MozMousePixelScroll"));function hn(ga){ga.on(Ot,ii).on(ut+".zoom",Ao).on("dblclick.zoom",ji).on(Lr,Ei)}hn.event=function(ga){ga.each(function(){var hi=pn.of(this,arguments),qa=le;Qa?w.select(this).transition().each("start.zoom",function(){le=this.__chart__||{x:0,y:0,k:1},pa(hi)}).tween("zoom:zoom",function(){var Oi=Be[0],di=Be[1],xo=De?De[0]:Oi/2,fo=De?De[1]:di/2,ko=w.interpolateZoom([(xo-le.x)/le.k,(fo-le.y)/le.k,Oi/le.k],[(xo-qa.x)/qa.k,(fo-qa.y)/qa.k,Oi/qa.k]);return function(us){var qo=ko(us),fs=Oi/qo[2];this.__chart__=le={x:xo-qo[0]*fs,y:fo-qo[1]*fs,k:fs},ja(hi)}}).each("interrupt.zoom",function(){Oa(hi)}).each("end.zoom",function(){Oa(hi)}):(this.__chart__=le,pa(hi),ja(hi),Oa(hi))})},hn.translate=function(ga){return arguments.length?(le={x:+ga[0],y:+ga[1],k:le.k},Ra(),hn):[le.x,le.y]},hn.scale=function(ga){return arguments.length?(le={x:le.x,y:le.y,k:null},la(+ga),Ra(),hn):le.k},hn.scaleExtent=function(ga){return arguments.length?(qe=ga==null?vn:[+ga[0],+ga[1]],hn):qe},hn.center=function(ga){return arguments.length?(Ue=ga&&[+ga[0],+ga[1]],hn):Ue},hn.size=function(ga){return arguments.length?(Be=ga&&[+ga[0],+ga[1]],hn):Be},hn.duration=function(ga){return arguments.length?(Mt=+ga,hn):Mt},hn.x=function(ga){return arguments.length?(Wr=ga,zr=ga.copy(),le={x:0,y:0,k:1},hn):Wr},hn.y=function(ga){return arguments.length?(fn=ga,qr=ga.copy(),le={x:0,y:0,k:1},hn):fn};function tn(ga){return[(ga[0]-le.x)/le.k,(ga[1]-le.y)/le.k]}function jn(ga){return[ga[0]*le.k+le.x,ga[1]*le.k+le.y]}function la(ga){le.k=Math.max(qe[0],Math.min(qe[1],ga))}function Ea(ga,hi){hi=jn(hi),le.x+=ga[0]-hi[0],le.y+=ga[1]-hi[1]}function ca(ga,hi,qa,Oi){ga.__chart__={x:le.x,y:le.y,k:le.k},la(Math.pow(2,Oi)),Ea(De=hi,qa),ga=w.select(ga),Mt>0&&(ga=ga.transition().duration(Mt)),ga.call(hn.event)}function Ra(){Wr&&Wr.domain(zr.range().map(function(ga){return(ga-le.x)/le.k}).map(zr.invert)),fn&&fn.domain(qr.range().map(function(ga){return(ga-le.y)/le.k}).map(qr.invert))}function pa(ga){mt++||ga({type:"zoomstart"})}function ja(ga){Ra(),ga({type:"zoom",scale:le.k,translate:[le.x,le.y]})}function Oa(ga){--mt||(ga({type:"zoomend"}),De=null)}function ii(){var ga=this,hi=pn.of(ga,arguments),qa=0,Oi=w.select(a(ga)).on(er,fo).on(or,ko),di=tn(w.mouse(ga)),xo=$t(ga);Nn.call(ga),pa(hi);function fo(){qa=1,Ea(w.mouse(ga),di),ja(hi)}function ko(){Oi.on(er,null).on(or,null),xo(qa),Oa(hi)}}function Ei(){var ga=this,hi=pn.of(ga,arguments),qa={},Oi=0,di,xo=".zoom-"+w.event.changedTouches[0].identifier,fo="touchmove"+xo,ko="touchend"+xo,us=[],qo=w.select(ga),fs=$t(ga);Qi(),pa(hi),qo.on(Ot,null).on(Lr,Qi);function ro(){var Do=w.touches(ga);return di=le.k,Do.forEach(function(vo){vo.identifier in qa&&(qa[vo.identifier]=tn(vo))}),Do}function Qi(){var Do=w.event.target;w.select(Do).on(fo,Ua).on(ko,ei),us.push(Do);for(var vo=w.event.changedTouches,Wo=0,io=vo.length;Wo<io;++Wo)qa[vo[Wo].identifier]=null;var cs=ro(),Us=Date.now();if(cs.length===1){if(Us-nn<500){var gu=cs[0];ca(ga,gu,qa[gu.identifier],Math.floor(Math.log(le.k)/Math.LN2)+1),X()}nn=Us}else if(cs.length>1){var gu=cs[0],oo=cs[1],Wf=gu[0]-oo[0],Jl=gu[1]-oo[1];Oi=Wf*Wf+Jl*Jl}}function Ua(){var Do=w.touches(ga),vo,Wo,io,cs;Nn.call(ga);for(var Us=0,gu=Do.length;Us<gu;++Us,cs=null)if(io=Do[Us],cs=qa[io.identifier]){if(Wo)break;vo=io,Wo=cs}if(cs){var oo=(oo=io[0]-vo[0])*oo+(oo=io[1]-vo[1])*oo,Wf=Oi&&Math.sqrt(oo/Oi);vo=[(vo[0]+io[0])/2,(vo[1]+io[1])/2],Wo=[(Wo[0]+cs[0])/2,(Wo[1]+cs[1])/2],la(Wf*di)}nn=null,Ea(vo,Wo),ja(hi)}function ei(){if(w.event.touches.length){for(var Do=w.event.changedTouches,vo=0,Wo=Do.length;vo<Wo;++vo)delete qa[Do[vo].identifier];for(var io in qa)return void ro()}w.selectAll(us).on(xo,null),qo.on(Ot,ii).on(Lr,Ei),fs(),Oa(hi)}}function Ao(){var ga=pn.of(this,arguments);sr?clearTimeout(sr):(Nn.call(this),_e=tn(De=Ue||w.mouse(this)),pa(ga)),sr=setTimeout(function(){sr=null,Oa(ga)},50),X(),la(Math.pow(2,en()*.002)*le.k),Ea(De,_e),ja(ga)}function ji(){var ga=w.mouse(this),hi=Math.log(le.k)/Math.LN2;ca(this,ga,tn(ga),w.event.shiftKey?Math.ceil(hi)-1:Math.floor(hi)+1)}return w.rebind(hn,pn,"on")};var vn=[0,1/0],en,ut;w.color=ar;function ar(){}ar.prototype.toString=function(){return this.rgb()+""},w.hsl=rr;function rr(le,_e,De){return this instanceof rr?(this.h=+le,this.s=+_e,void(this.l=+De)):arguments.length<2?le instanceof rr?new rr(le.h,le.s,le.l):Jr(""+le,ur,rr):new rr(le,_e,De)}var Kt=rr.prototype=new ar;Kt.brighter=function(le){return le=Math.pow(.7,arguments.length?le:1),new rr(this.h,this.s,this.l/le)},Kt.darker=function(le){return le=Math.pow(.7,arguments.length?le:1),new rr(this.h,this.s,le*this.l)},Kt.rgb=function(){return Er(this.h,this.s,this.l)};function Er(le,_e,De){var Ue,Be;le=isNaN(le)?0:(le%=360)<0?le+360:le,_e=isNaN(_e)||_e<0?0:_e>1?1:_e,De=De<0?0:De>1?1:De,Be=De<=.5?De*(1+_e):De+_e-De*_e,Ue=2*De-Be;function qe(mt){return mt>360?mt-=360:mt<0&&(mt+=360),mt<60?Ue+(Be-Ue)*mt/60:mt<180?Be:mt<240?Ue+(Be-Ue)*(240-mt)/60:Ue}function Mt(mt){return Math.round(qe(mt)*255)}return new Jt(Mt(le+120),Mt(le),Mt(le-120))}w.hcl=st;function st(le,_e,De){return this instanceof st?(this.h=+le,this.c=+_e,void(this.l=+De)):arguments.length<2?le instanceof st?new st(le.h,le.c,le.l):le instanceof vt?yt(le.l,le.a,le.b):yt((le=_r((le=w.rgb(le)).r,le.g,le.b)).l,le.a,le.b):new st(le,_e,De)}var et=st.prototype=new ar;et.brighter=function(le){return new st(this.h,this.c,Math.min(100,this.l+kt*(arguments.length?le:1)))},et.darker=function(le){return new st(this.h,this.c,Math.max(0,this.l-kt*(arguments.length?le:1)))},et.rgb=function(){return ht(this.h,this.c,this.l).rgb()};function ht(le,_e,De){return isNaN(le)&&(le=0),isNaN(_e)&&(_e=0),new vt(De,Math.cos(le*=St)*_e,Math.sin(le)*_e)}w.lab=vt;function vt(le,_e,De){return this instanceof vt?(this.l=+le,this.a=+_e,void(this.b=+De)):arguments.length<2?le instanceof vt?new vt(le.l,le.a,le.b):le instanceof st?ht(le.h,le.c,le.l):_r((le=Jt(le)).r,le.g,le.b):new vt(le,_e,De)}var kt=18,Vt=.95047,Pe=1,ke=1.08883,lt=vt.prototype=new ar;lt.brighter=function(le){return new vt(Math.min(100,this.l+kt*(arguments.length?le:1)),this.a,this.b)},lt.darker=function(le){return new vt(Math.max(0,this.l-kt*(arguments.length?le:1)),this.a,this.b)},lt.rgb=function(){return ft(this.l,this.a,this.b)};function ft(le,_e,De){var Ue=(le+16)/116,Be=Ue+_e/500,qe=Ue-De/200;return Be=Rt(Be)*Vt,Ue=Rt(Ue)*Pe,qe=Rt(qe)*ke,new Jt(Dt(3.2404542*Be-1.5371385*Ue-.4985314*qe),Dt(-.969266*Be+1.8760108*Ue+.041556*qe),Dt(.0556434*Be-.2040259*Ue+1.0572252*qe))}function yt(le,_e,De){return le>0?new st(Math.atan2(De,_e)*wt,Math.sqrt(_e*_e+De*De),le):new st(NaN,NaN,le)}function Rt(le){return le>.206893034?le*le*le:(le-4/29)/7.787037}function _t(le){return le>.008856?Math.pow(le,1/3):7.787037*le+4/29}function Dt(le){return Math.round(255*(le<=.00304?12.92*le:1.055*Math.pow(le,1/2.4)-.055))}w.rgb=Jt;function Jt(le,_e,De){return this instanceof Jt?(this.r=~~le,this.g=~~_e,void(this.b=~~De)):arguments.length<2?le instanceof Jt?new Jt(le.r,le.g,le.b):Jr(""+le,Jt,Er):new Jt(le,_e,De)}function fr(le){return new Jt(le>>16,le>>8&255,le&255)}function Rr(le){return fr(le)+""}var Sr=Jt.prototype=new ar;Sr.brighter=function(le){le=Math.pow(.7,arguments.length?le:1);var _e=this.r,De=this.g,Ue=this.b,Be=30;return!_e&&!De&&!Ue?new Jt(Be,Be,Be):(_e&&_e<Be&&(_e=Be),De&&De<Be&&(De=Be),Ue&&Ue<Be&&(Ue=Be),new Jt(Math.min(255,_e/le),Math.min(255,De/le),Math.min(255,Ue/le)))},Sr.darker=function(le){return le=Math.pow(.7,arguments.length?le:1),new Jt(le*this.r,le*this.g,le*this.b)},Sr.hsl=function(){return ur(this.r,this.g,this.b)},Sr.toString=function(){return"#"+Pr(this.r)+Pr(this.g)+Pr(this.b)};function Pr(le){return le<16?"0"+Math.max(0,le).toString(16):Math.min(255,le).toString(16)}function Jr(le,_e,De){var Ue=0,Be=0,qe=0,Mt,mt,Ot;if(Mt=/([a-z]+)\((.*)\)/.exec(le=le.toLowerCase()),Mt)switch(mt=Mt[2].split(","),Mt[1]){case"hsl":return De(parseFloat(mt[0]),parseFloat(mt[1])/100,parseFloat(mt[2])/100);case"rgb":return _e(Yr(mt[0]),Yr(mt[1]),Yr(mt[2]))}return(Ot=Dr.get(le))?_e(Ot.r,Ot.g,Ot.b):(le!=null&&le.charAt(0)==="#"&&!isNaN(Ot=parseInt(le.slice(1),16))&&(le.length===4?(Ue=(Ot&3840)>>4,Ue=Ue>>4|Ue,Be=Ot&240,Be=Be>>4|Be,qe=Ot&15,qe=qe<<4|qe):le.length===7&&(Ue=(Ot&16711680)>>16,Be=(Ot&65280)>>8,qe=Ot&255)),_e(Ue,Be,qe))}function ur(le,_e,De){var Ue=Math.min(le/=255,_e/=255,De/=255),Be=Math.max(le,_e,De),qe=Be-Ue,Mt,mt,Ot=(Be+Ue)/2;return qe?(mt=Ot<.5?qe/(Be+Ue):qe/(2-Be-Ue),le==Be?Mt=(_e-De)/qe+(_e<De?6:0):_e==Be?Mt=(De-le)/qe+2:Mt=(le-_e)/qe+4,Mt*=60):(Mt=NaN,mt=Ot>0&&Ot<1?0:Mt),new rr(Mt,mt,Ot)}function _r(le,_e,De){le=Br(le),_e=Br(_e),De=Br(De);var Ue=_t((.4124564*le+.3575761*_e+.1804375*De)/Vt),Be=_t((.2126729*le+.7151522*_e+.072175*De)/Pe),qe=_t((.0193339*le+.119192*_e+.9503041*De)/ke);return vt(116*Be-16,500*(Ue-Be),200*(Be-qe))}function Br(le){return(le/=255)<=.04045?le/12.92:Math.pow((le+.055)/1.055,2.4)}function Yr(le){var _e=parseFloat(le);return le.charAt(le.length-1)==="%"?Math.round(_e*2.55):_e}var Dr=w.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Dr.forEach(function(le,_e){Dr.set(le,fr(_e))});function it(le){return typeof le=="function"?le:function(){return le}}w.functor=it,w.xhr=zt(D);function zt(le){return function(_e,De,Ue){return arguments.length===2&&typeof De=="function"&&(Ue=De,De=null),qt(_e,De,le,Ue)}}function qt(le,_e,De,Ue){var Be={},qe=w.dispatch("beforesend","progress","load","error"),Mt={},mt=new XMLHttpRequest,Ot=null;self.XDomainRequest&&!("withCredentials"in mt)&&/^(http(s)?:)?\/\//.test(le)&&(mt=new XDomainRequest),"onload"in mt?mt.onload=mt.onerror=er:mt.onreadystatechange=function(){mt.readyState>3&&er()};function er(){var or=mt.status,sr;if(!or&&Ur(mt)||or>=200&&or<300||or===304){try{sr=De.call(Be,mt)}catch(Lr){qe.error.call(Be,Lr);return}qe.load.call(Be,sr)}else qe.error.call(Be,mt)}return mt.onprogress=function(or){var sr=w.event;w.event=or;try{qe.progress.call(Be,mt)}finally{w.event=sr}},Be.header=function(or,sr){return or=(or+"").toLowerCase(),arguments.length<2?Mt[or]:(sr==null?delete Mt[or]:Mt[or]=sr+"",Be)},Be.mimeType=function(or){return arguments.length?(_e=or==null?null:or+"",Be):_e},Be.responseType=function(or){return arguments.length?(Ot=or,Be):Ot},Be.response=function(or){return De=or,Be},["get","post"].forEach(function(or){Be[or]=function(){return Be.send.apply(Be,[or].concat(M(arguments)))}}),Be.send=function(or,sr,Lr){if(arguments.length===2&&typeof sr=="function"&&(Lr=sr,sr=null),mt.open(or,le,!0),_e!=null&&!("accept"in Mt)&&(Mt.accept=_e+",*/*"),mt.setRequestHeader)for(var nn in Mt)mt.setRequestHeader(nn,Mt[nn]);return _e!=null&&mt.overrideMimeType&&mt.overrideMimeType(_e),Ot!=null&&(mt.responseType=Ot),Lr!=null&&Be.on("error",Lr).on("load",function(pn){Lr(null,pn)}),qe.beforesend.call(Be,mt),mt.send(sr==null?null:sr),Be},Be.abort=function(){return mt.abort(),Be},w.rebind(Be,qe,"on"),Ue==null?Be:Be.get(hr(Ue))}function hr(le){return le.length===1?function(_e,De){le(_e==null?De:null)}:le}function Ur(le){var _e=le.responseType;return _e&&_e!=="text"?le.response:le.responseText}w.dsv=function(le,_e){var De=new RegExp('["'+le+`
]`),Ue=le.charCodeAt(0);function Be(er,or,sr){arguments.length<3&&(sr=or,or=null);var Lr=qt(er,_e,or==null?qe:Mt(or),sr);return Lr.row=function(nn){return arguments.length?Lr.response((or=nn)==null?qe:Mt(nn)):or},Lr}function qe(er){return Be.parse(er.responseText)}function Mt(er){return function(or){return Be.parse(or.responseText,er)}}Be.parse=function(er,or){var sr;return Be.parseRows(er,function(Lr,nn){if(sr)return sr(Lr,nn-1);var pn=function(zr){for(var Wr={},qr=Lr.length,fn=0;fn<qr;++fn)Wr[Lr[fn]]=zr[fn];return Wr};sr=or?function(zr,Wr){return or(pn(zr),Wr)}:pn})},Be.parseRows=function(er,or){var sr={},Lr={},nn=[],pn=er.length,zr=0,Wr=0,qr,fn;function hn(){if(zr>=pn)return Lr;if(fn)return fn=!1,sr;var jn=zr;if(er.charCodeAt(jn)===34){for(var la=jn;la++<pn;)if(er.charCodeAt(la)===34){if(er.charCodeAt(la+1)!==34)break;++la}zr=la+2;var Ea=er.charCodeAt(la+1);return Ea===13?(fn=!0,er.charCodeAt(la+2)===10&&++zr):Ea===10&&(fn=!0),er.slice(jn+1,la).replace(/""/g,'"')}for(;zr<pn;){var Ea=er.charCodeAt(zr++),ca=1;if(Ea===10)fn=!0;else if(Ea===13)fn=!0,er.charCodeAt(zr)===10&&(++zr,++ca);else if(Ea!==Ue)continue;return er.slice(jn,zr-ca)}return er.slice(jn)}for(;(qr=hn())!==Lr;){for(var tn=[];qr!==sr&&qr!==Lr;)tn.push(qr),qr=hn();or&&(tn=or(tn,Wr++))==null||nn.push(tn)}return nn},Be.format=function(er){if(Array.isArray(er[0]))return Be.formatRows(er);var or=new I,sr=[];return er.forEach(function(Lr){for(var nn in Lr)or.has(nn)||sr.push(or.add(nn))}),[sr.map(Ot).join(le)].concat(er.map(function(Lr){return sr.map(function(nn){return Ot(Lr[nn])}).join(le)})).join(`
`)},Be.formatRows=function(er){return er.map(mt).join(`
`)};function mt(er){return er.map(Ot).join(le)}function Ot(er){return De.test(er)?'"'+er.replace(/\"/g,'""')+'"':er}return Be},w.csv=w.dsv(",","text/csv"),w.tsv=w.dsv("	","text/tab-separated-values");var Gr,Ir,Cr,Kr,Cn=this[O(this,"requestAnimationFrame")]||function(le){setTimeout(le,17)};w.timer=function(){yn.apply(this,arguments)};function yn(le,_e,De){var Ue=arguments.length;Ue<2&&(_e=0),Ue<3&&(De=Date.now());var Be=De+_e,qe={c:le,t:Be,n:null};return Ir?Ir.n=qe:Gr=qe,Ir=qe,Cr||(Kr=clearTimeout(Kr),Cr=1,Cn(Yn)),qe}function Yn(){var le=In(),_e=Jn()-le;_e>24?(isFinite(_e)&&(clearTimeout(Kr),Kr=setTimeout(Yn,_e)),Cr=0):(Cr=1,Cn(Yn))}w.timer.flush=function(){In(),Jn()};function In(){for(var le=Date.now(),_e=Gr;_e;)le>=_e.t&&_e.c(le-_e.t)&&(_e.c=null),_e=_e.n;return le}function Jn(){for(var le,_e=Gr,De=1/0;_e;)_e.c?(_e.t<De&&(De=_e.t),_e=(le=_e).n):_e=le?le.n=_e.n:Gr=_e.n;return Ir=le,De}w.round=function(le,_e){return _e?Math.round(le*(_e=Math.pow(10,_e)))/_e:Math.round(le)},w.geom={};function Zn(le){return le[0]}function ba(le){return le[1]}w.geom.hull=function(le){var _e=Zn,De=ba;if(arguments.length)return Ue(le);function Ue(Be){if(Be.length<3)return[];var qe=it(_e),Mt=it(De),mt,Ot=Be.length,er=[],or=[];for(mt=0;mt<Ot;mt++)er.push([+qe.call(this,Be[mt],mt),+Mt.call(this,Be[mt],mt),mt]);for(er.sort(xi),mt=0;mt<Ot;mt++)or.push([er[mt][0],-er[mt][1]]);var sr=Pa(er),Lr=Pa(or),nn=Lr[0]===sr[0],pn=Lr[Lr.length-1]===sr[sr.length-1],zr=[];for(mt=sr.length-1;mt>=0;--mt)zr.push(Be[er[sr[mt]][2]]);for(mt=+nn;mt<Lr.length-pn;++mt)zr.push(Be[er[Lr[mt]][2]]);return zr}return Ue.x=function(Be){return arguments.length?(_e=Be,Ue):_e},Ue.y=function(Be){return arguments.length?(De=Be,Ue):De},Ue};function Pa(le){for(var _e=le.length,De=[0,1],Ue=2,Be=2;Be<_e;Be++){for(;Ue>1&&Ct(le[De[Ue-2]],le[De[Ue-1]],le[Be])<=0;)--Ue;De[Ue++]=Be}return De.slice(0,Ue)}function xi(le,_e){return le[0]-_e[0]||le[1]-_e[1]}w.geom.polygon=function(le){return K(le,Ka),le};var Ka=w.geom.polygon.prototype=[];Ka.area=function(){for(var le=-1,_e=this.length,De,Ue=this[_e-1],Be=0;++le<_e;)De=Ue,Ue=this[le],Be+=De[1]*Ue[0]-De[0]*Ue[1];return Be*.5},Ka.centroid=function(le){var _e=-1,De=this.length,Ue=0,Be=0,qe,Mt=this[De-1],mt;for(arguments.length||(le=-1/(6*this.area()));++_e<De;)qe=Mt,Mt=this[_e],mt=qe[0]*Mt[1]-Mt[0]*qe[1],Ue+=(qe[0]+Mt[0])*mt,Be+=(qe[1]+Mt[1])*mt;return[Ue*le,Be*le]},Ka.clip=function(le){for(var _e,De=kr(le),Ue=-1,Be=this.length-kr(this),qe,Mt,mt=this[Be-1],Ot,er,or;++Ue<Be;){for(_e=le.slice(),le.length=0,Ot=this[Ue],er=_e[(Mt=_e.length-De)-1],qe=-1;++qe<Mt;)or=_e[qe],ti(or,mt,Ot)?(ti(er,mt,Ot)||le.push($a(er,or,mt,Ot)),le.push(or)):ti(er,mt,Ot)&&le.push($a(er,or,mt,Ot)),er=or;De&&le.push(le[0]),mt=Ot}return le};function ti(le,_e,De){return(De[0]-_e[0])*(le[1]-_e[1])<(De[1]-_e[1])*(le[0]-_e[0])}function $a(le,_e,De,Ue){var Be=le[0],qe=De[0],Mt=_e[0]-Be,mt=Ue[0]-qe,Ot=le[1],er=De[1],or=_e[1]-Ot,sr=Ue[1]-er,Lr=(mt*(Ot-er)-sr*(Be-qe))/(sr*Mt-mt*or);return[Be+Lr*Mt,Ot+Lr*or]}function kr(le){var _e=le[0],De=le[le.length-1];return!(_e[0]-De[0]||_e[1]-De[1])}var bn,gn,Ln,qn=[],da,oa,Bn=[];function $n(){va(this),this.edge=this.site=this.circle=null}function Xa(le){var _e=qn.pop()||new $n;return _e.site=le,_e}function gi(le){Ar(le),Ln.remove(le),qn.push(le),va(le)}function Xt(le){var _e=le.circle,De=_e.x,Ue=_e.cy,Be={x:De,y:Ue},qe=le.P,Mt=le.N,mt=[le];gi(le);for(var Ot=qe;Ot.circle&&l(De-Ot.circle.x)<ot&&l(Ue-Ot.circle.cy)<ot;)qe=Ot.P,mt.unshift(Ot),gi(Ot),Ot=qe;mt.unshift(Ot),Ar(Ot);for(var er=Mt;er.circle&&l(De-er.circle.x)<ot&&l(Ue-er.circle.cy)<ot;)Mt=er.N,mt.push(er),gi(er),er=Mt;mt.push(er),Ar(er);var or=mt.length,sr;for(sr=1;sr<or;++sr)er=mt[sr],Ot=mt[sr-1],fa(er.edge,Ot.site,er.site,Be);Ot=mt[0],er=mt[or-1],er.edge=En(Ot.site,er.site,null,Be),Tr(Ot),Tr(er)}function mr(le){for(var _e=le.x,De=le.y,Ue,Be,qe,Mt,mt=Ln._;mt;)if(qe=un(mt,De)-_e,qe>ot)mt=mt.L;else if(Mt=_e-xn(mt,De),Mt>ot){if(!mt.R){Ue=mt;break}mt=mt.R}else{qe>-ot?(Ue=mt.P,Be=mt):Mt>-ot?(Ue=mt,Be=mt.N):Ue=Be=mt;break}var Ot=Xa(le);if(Ln.insert(Ue,Ot),!(!Ue&&!Be)){if(Ue===Be){Ar(Ue),Be=Xa(Ue.site),Ln.insert(Ot,Be),Ot.edge=Be.edge=En(Ue.site,Ot.site),Tr(Ue),Tr(Be);return}if(!Be){Ot.edge=En(Ue.site,Ot.site);return}Ar(Ue),Ar(Be);var er=Ue.site,or=er.x,sr=er.y,Lr=le.x-or,nn=le.y-sr,pn=Be.site,zr=pn.x-or,Wr=pn.y-sr,qr=2*(Lr*Wr-nn*zr),fn=Lr*Lr+nn*nn,hn=zr*zr+Wr*Wr,tn={x:(Wr*fn-nn*hn)/qr+or,y:(Lr*hn-zr*fn)/qr+sr};fa(Be.edge,er,pn,tn),Ot.edge=En(er,le,null,tn),Be.edge=En(le,pn,null,tn),Tr(Ue),Tr(Be)}}function un(le,_e){var De=le.site,Ue=De.x,Be=De.y,qe=Be-_e;if(!qe)return Ue;var Mt=le.P;if(!Mt)return-1/0;De=Mt.site;var mt=De.x,Ot=De.y,er=Ot-_e;if(!er)return mt;var or=mt-Ue,sr=1/qe-1/er,Lr=or/er;return sr?(-Lr+Math.sqrt(Lr*Lr-2*sr*(or*or/(-2*er)-Ot+er/2+Be-qe/2)))/sr+Ue:(Ue+mt)/2}function xn(le,_e){var De=le.N;if(De)return un(De,_e);var Ue=le.site;return Ue.y===_e?Ue.x:1/0}function sn(le){this.site=le,this.edges=[]}sn.prototype.prepare=function(){for(var le=this.edges,_e=le.length,De;_e--;)De=le[_e].edge,(!De.b||!De.a)&&le.splice(_e,1);return le.sort(Mn),le.length};function kn(le){for(var _e=le[0][0],De=le[1][0],Ue=le[0][1],Be=le[1][1],qe,Mt,mt,Ot,er=gn,or=er.length,sr,Lr,nn,pn,zr,Wr;or--;)if(sr=er[or],!(!sr||!sr.prepare()))for(nn=sr.edges,pn=nn.length,Lr=0;Lr<pn;)Wr=nn[Lr].end(),mt=Wr.x,Ot=Wr.y,zr=nn[++Lr%pn].start(),qe=zr.x,Mt=zr.y,(l(mt-qe)>ot||l(Ot-Mt)>ot)&&(nn.splice(Lr,0,new wa(ea(sr.site,Wr,l(mt-_e)<ot&&Be-Ot>ot?{x:_e,y:l(qe-_e)<ot?Mt:Be}:l(Ot-Be)<ot&&De-mt>ot?{x:l(Mt-Be)<ot?qe:De,y:Be}:l(mt-De)<ot&&Ot-Ue>ot?{x:De,y:l(qe-De)<ot?Mt:Ue}:l(Ot-Ue)<ot&&mt-_e>ot?{x:l(Mt-Ue)<ot?qe:_e,y:Ue}:null),sr.site,null)),++pn)}function Mn(le,_e){return _e.angle-le.angle}function dn(){va(this),this.x=this.y=this.arc=this.site=this.cy=null}function Tr(le){var _e=le.P,De=le.N;if(!(!_e||!De)){var Ue=_e.site,Be=le.site,qe=De.site;if(Ue!==qe){var Mt=Be.x,mt=Be.y,Ot=Ue.x-Mt,er=Ue.y-mt,or=qe.x-Mt,Wr=qe.y-mt,sr=2*(Ot*Wr-er*or);if(!(sr>=-Ge)){var Lr=Ot*Ot+er*er,nn=or*or+Wr*Wr,pn=(Wr*Lr-er*nn)/sr,zr=(Ot*nn-or*Lr)/sr,Wr=zr+mt,qr=Bn.pop()||new dn;qr.arc=le,qr.site=Be,qr.x=pn+Mt,qr.y=Wr+Math.sqrt(pn*pn+zr*zr),qr.cy=Wr,le.circle=qr;for(var fn=null,hn=oa._;hn;)if(qr.y<hn.y||qr.y===hn.y&&qr.x<=hn.x)if(hn.L)hn=hn.L;else{fn=hn.P;break}else if(hn.R)hn=hn.R;else{fn=hn;break}oa.insert(fn,qr),fn||(da=qr)}}}}function Ar(le){var _e=le.circle;_e&&(_e.P||(da=_e.N),oa.remove(_e),Bn.push(_e),va(_e),le.circle=null)}function Vr(le,_e,De,Ue){return function(Be){var qe=Be.a,Mt=Be.b,mt=qe.x,Ot=qe.y,er=Mt.x,or=Mt.y,sr=0,Lr=1,nn=er-mt,pn=or-Ot,zr;if(zr=le-mt,!(!nn&&zr>0)){if(zr/=nn,nn<0){if(zr<sr)return;zr<Lr&&(Lr=zr)}else if(nn>0){if(zr>Lr)return;zr>sr&&(sr=zr)}if(zr=De-mt,!(!nn&&zr<0)){if(zr/=nn,nn<0){if(zr>Lr)return;zr>sr&&(sr=zr)}else if(nn>0){if(zr<sr)return;zr<Lr&&(Lr=zr)}if(zr=_e-Ot,!(!pn&&zr>0)){if(zr/=pn,pn<0){if(zr<sr)return;zr<Lr&&(Lr=zr)}else if(pn>0){if(zr>Lr)return;zr>sr&&(sr=zr)}if(zr=Ue-Ot,!(!pn&&zr<0)){if(zr/=pn,pn<0){if(zr>Lr)return;zr>sr&&(sr=zr)}else if(pn>0){if(zr<sr)return;zr<Lr&&(Lr=zr)}return sr>0&&(Be.a={x:mt+sr*nn,y:Ot+sr*pn}),Lr<1&&(Be.b={x:mt+Lr*nn,y:Ot+Lr*pn}),Be}}}}}}function _n(le){for(var _e=bn,De=Vr(le[0][0],le[0][1],le[1][0],le[1][1]),Ue=_e.length,Be;Ue--;)Be=_e[Ue],(!Gn(Be,le)||!De(Be)||l(Be.a.x-Be.b.x)<ot&&l(Be.a.y-Be.b.y)<ot)&&(Be.a=Be.b=null,_e.splice(Ue,1))}function Gn(le,_e){var De=le.b;if(De)return!0;var Ue=le.a,Be=_e[0][0],qe=_e[1][0],Mt=_e[0][1],mt=_e[1][1],Ot=le.l,er=le.r,or=Ot.x,sr=Ot.y,Lr=er.x,nn=er.y,pn=(or+Lr)/2,zr=(sr+nn)/2,Wr,qr;if(nn===sr){if(pn<Be||pn>=qe)return;if(or>Lr){if(!Ue)Ue={x:pn,y:Mt};else if(Ue.y>=mt)return;De={x:pn,y:mt}}else{if(!Ue)Ue={x:pn,y:mt};else if(Ue.y<Mt)return;De={x:pn,y:Mt}}}else if(Wr=(or-Lr)/(nn-sr),qr=zr-Wr*pn,Wr<-1||Wr>1)if(or>Lr){if(!Ue)Ue={x:(Mt-qr)/Wr,y:Mt};else if(Ue.y>=mt)return;De={x:(mt-qr)/Wr,y:mt}}else{if(!Ue)Ue={x:(mt-qr)/Wr,y:mt};else if(Ue.y<Mt)return;De={x:(Mt-qr)/Wr,y:Mt}}else if(sr<nn){if(!Ue)Ue={x:Be,y:Wr*Be+qr};else if(Ue.x>=qe)return;De={x:qe,y:Wr*qe+qr}}else{if(!Ue)Ue={x:qe,y:Wr*qe+qr};else if(Ue.x<Be)return;De={x:Be,y:Wr*Be+qr}}return le.a=Ue,le.b=De,!0}function sa(le,_e){this.l=le,this.r=_e,this.a=this.b=null}function En(le,_e,De,Ue){var Be=new sa(le,_e);return bn.push(Be),De&&fa(Be,le,_e,De),Ue&&fa(Be,_e,le,Ue),gn[le.i].edges.push(new wa(Be,le,_e)),gn[_e.i].edges.push(new wa(Be,_e,le)),Be}function ea(le,_e,De){var Ue=new sa(le,null);return Ue.a=_e,Ue.b=De,bn.push(Ue),Ue}function fa(le,_e,De,Ue){!le.a&&!le.b?(le.a=Ue,le.l=_e,le.r=De):le.l===De?le.b=Ue:le.a=Ue}function wa(le,_e,De){var Ue=le.a,Be=le.b;this.edge=le,this.site=_e,this.angle=De?Math.atan2(De.y-_e.y,De.x-_e.x):le.l===_e?Math.atan2(Be.x-Ue.x,Ue.y-Be.y):Math.atan2(Ue.x-Be.x,Be.y-Ue.y)}wa.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};function Aa(){this._=null}function va(le){le.U=le.C=le.L=le.R=le.P=le.N=null}Aa.prototype={insert:function(le,_e){var De,Ue,Be;if(le){if(_e.P=le,_e.N=le.N,le.N&&(le.N.P=_e),le.N=_e,le.R){for(le=le.R;le.L;)le=le.L;le.L=_e}else le.R=_e;De=le}else this._?(le=Jo(this._),_e.P=null,_e.N=le,le.P=le.L=_e,De=le):(_e.P=_e.N=null,this._=_e,De=null);for(_e.L=_e.R=null,_e.U=De,_e.C=!0,le=_e;De&&De.C;)Ue=De.U,De===Ue.L?(Be=Ue.R,Be&&Be.C?(De.C=Be.C=!1,Ue.C=!0,le=Ue):(le===De.R&&(La(this,De),le=De,De=le.U),De.C=!1,Ue.C=!0,So(this,Ue))):(Be=Ue.L,Be&&Be.C?(De.C=Be.C=!1,Ue.C=!0,le=Ue):(le===De.L&&(So(this,De),le=De,De=le.U),De.C=!1,Ue.C=!0,La(this,Ue))),De=le.U;this._.C=!1},remove:function(le){le.N&&(le.N.P=le.P),le.P&&(le.P.N=le.N),le.N=le.P=null;var _e=le.U,De,Ue=le.L,Be=le.R,qe,Mt;if(Ue?Be?qe=Jo(Be):qe=Ue:qe=Be,_e?_e.L===le?_e.L=qe:_e.R=qe:this._=qe,Ue&&Be?(Mt=qe.C,qe.C=le.C,qe.L=Ue,Ue.U=qe,qe!==Be?(_e=qe.U,qe.U=le.U,le=qe.R,_e.L=le,qe.R=Be,Be.U=qe):(qe.U=_e,_e=qe,le=qe.R)):(Mt=le.C,le=qe),le&&(le.U=_e),!Mt){if(le&&le.C){le.C=!1;return}do{if(le===this._)break;if(le===_e.L){if(De=_e.R,De.C&&(De.C=!1,_e.C=!0,La(this,_e),De=_e.R),De.L&&De.L.C||De.R&&De.R.C){(!De.R||!De.R.C)&&(De.L.C=!1,De.C=!0,So(this,De),De=_e.R),De.C=_e.C,_e.C=De.R.C=!1,La(this,_e),le=this._;break}}else if(De=_e.L,De.C&&(De.C=!1,_e.C=!0,So(this,_e),De=_e.L),De.L&&De.L.C||De.R&&De.R.C){(!De.L||!De.L.C)&&(De.R.C=!1,De.C=!0,La(this,De),De=_e.L),De.C=_e.C,_e.C=De.L.C=!1,So(this,_e),le=this._;break}De.C=!0,le=_e,_e=_e.U}while(!le.C);le&&(le.C=!1)}}};function La(le,_e){var De=_e,Ue=_e.R,Be=De.U;Be?Be.L===De?Be.L=Ue:Be.R=Ue:le._=Ue,Ue.U=Be,De.U=Ue,De.R=Ue.L,De.R&&(De.R.U=De),Ue.L=De}function So(le,_e){var De=_e,Ue=_e.L,Be=De.U;Be?Be.L===De?Be.L=Ue:Be.R=Ue:le._=Ue,Ue.U=Be,De.U=Ue,De.L=Ue.R,De.L&&(De.L.U=De),Ue.R=De}function Jo(le){for(;le.L;)le=le.L;return le}function vs(le,_e){var De=le.sort(Cl).pop(),Ue,Be,qe;for(bn=[],gn=new Array(le.length),Ln=new Aa,oa=new Aa;;)if(qe=da,De&&(!qe||De.y<qe.y||De.y===qe.y&&De.x<qe.x))(De.x!==Ue||De.y!==Be)&&(gn[De.i]=new sn(De),mr(De),Ue=De.x,Be=De.y),De=le.pop();else if(qe)Xt(qe.arc);else break;_e&&(_n(_e),kn(_e));var Mt={cells:gn,edges:bn};return Ln=oa=bn=gn=null,Mt}function Cl(le,_e){return _e.y-le.y||_e.x-le.x}w.geom.voronoi=function(le){var _e=Zn,De=ba,Ue=_e,Be=De,qe=Ul;if(le)return Mt(le);function Mt(Ot){var er=new Array(Ot.length),or=qe[0][0],sr=qe[0][1],Lr=qe[1][0],nn=qe[1][1];return vs(mt(Ot),qe).cells.forEach(function(pn,zr){var Wr=pn.edges,qr=pn.site,fn=er[zr]=Wr.length?Wr.map(function(hn){var tn=hn.start();return[tn.x,tn.y]}):qr.x>=or&&qr.x<=Lr&&qr.y>=sr&&qr.y<=nn?[[or,nn],[Lr,nn],[Lr,sr],[or,sr]]:[];fn.point=Ot[zr]}),er}function mt(Ot){return Ot.map(function(er,or){return{x:Math.round(Ue(er,or)/ot)*ot,y:Math.round(Be(er,or)/ot)*ot,i:or}})}return Mt.links=function(Ot){return vs(mt(Ot)).edges.filter(function(er){return er.l&&er.r}).map(function(er){return{source:Ot[er.l.i],target:Ot[er.r.i]}})},Mt.triangles=function(Ot){var er=[];return vs(mt(Ot)).cells.forEach(function(or,sr){for(var Lr=or.site,nn=or.edges.sort(Mn),pn=-1,zr=nn.length,Wr,qr=nn[zr-1].edge,fn=qr.l===Lr?qr.r:qr.l;++pn<zr;)Wr=fn,qr=nn[pn].edge,fn=qr.l===Lr?qr.r:qr.l,sr<Wr.i&&sr<fn.i&&_u(Lr,Wr,fn)<0&&er.push([Ot[sr],Ot[Wr.i],Ot[fn.i]])}),er},Mt.x=function(Ot){return arguments.length?(Ue=it(_e=Ot),Mt):_e},Mt.y=function(Ot){return arguments.length?(Be=it(De=Ot),Mt):De},Mt.clipExtent=function(Ot){return arguments.length?(qe=Ot==null?Ul:Ot,Mt):qe===Ul?null:qe},Mt.size=function(Ot){return arguments.length?Mt.clipExtent(Ot&&[[0,0],Ot]):qe===Ul?null:qe&&qe[1]},Mt};var Ul=[[-1e6,-1e6],[1e6,1e6]];function _u(le,_e,De){return(le.x-De.x)*(_e.y-le.y)-(le.x-_e.x)*(De.y-le.y)}w.geom.delaunay=function(le){return w.geom.voronoi().triangles(le)},w.geom.quadtree=function(le,_e,De,Ue,Be){var qe=Zn,Mt=ba,mt;if(mt=arguments.length)return qe=_i,Mt=hl,mt===3&&(Be=De,Ue=_e,De=_e=0),Ot(le);function Ot(er){var or,sr=it(qe),Lr=it(Mt),nn,pn,zr,Wr,qr,fn,hn,tn;if(_e!=null)qr=_e,fn=De,hn=Ue,tn=Be;else if(hn=tn=-(qr=fn=1/0),nn=[],pn=[],Wr=er.length,mt)for(zr=0;zr<Wr;++zr)or=er[zr],or.x<qr&&(qr=or.x),or.y<fn&&(fn=or.y),or.x>hn&&(hn=or.x),or.y>tn&&(tn=or.y),nn.push(or.x),pn.push(or.y);else for(zr=0;zr<Wr;++zr){var jn=+sr(or=er[zr],zr),la=+Lr(or,zr);jn<qr&&(qr=jn),la<fn&&(fn=la),jn>hn&&(hn=jn),la>tn&&(tn=la),nn.push(jn),pn.push(la)}var Ea=hn-qr,ca=tn-fn;Ea>ca?tn=fn+Ea:hn=qr+ca;function Ra(Oa,ii,Ei,Ao,ji,ga,hi,qa){if(!(isNaN(Ei)||isNaN(Ao)))if(Oa.leaf){var Oi=Oa.x,di=Oa.y;if(Oi!=null)if(l(Oi-Ei)+l(di-Ao)<.01)pa(Oa,ii,Ei,Ao,ji,ga,hi,qa);else{var xo=Oa.point;Oa.x=Oa.y=Oa.point=null,pa(Oa,xo,Oi,di,ji,ga,hi,qa),pa(Oa,ii,Ei,Ao,ji,ga,hi,qa)}else Oa.x=Ei,Oa.y=Ao,Oa.point=ii}else pa(Oa,ii,Ei,Ao,ji,ga,hi,qa)}function pa(Oa,ii,Ei,Ao,ji,ga,hi,qa){var Oi=(ji+hi)*.5,di=(ga+qa)*.5,xo=Ei>=Oi,fo=Ao>=di,ko=fo<<1|xo;Oa.leaf=!1,Oa=Oa.nodes[ko]||(Oa.nodes[ko]=el()),xo?ji=Oi:hi=Oi,fo?ga=di:qa=di,Ra(Oa,ii,Ei,Ao,ji,ga,hi,qa)}var ja=el();if(ja.add=function(Oa){Ra(ja,Oa,+sr(Oa,++zr),+Lr(Oa,zr),qr,fn,hn,tn)},ja.visit=function(Oa){qi(Oa,ja,qr,fn,hn,tn)},ja.find=function(Oa){return No(ja,Oa[0],Oa[1],qr,fn,hn,tn)},zr=-1,_e==null){for(;++zr<Wr;)Ra(ja,er[zr],nn[zr],pn[zr],qr,fn,hn,tn);--zr}else er.forEach(ja.add);return nn=pn=er=or=null,ja}return Ot.x=function(er){return arguments.length?(qe=er,Ot):qe},Ot.y=function(er){return arguments.length?(Mt=er,Ot):Mt},Ot.extent=function(er){return arguments.length?(er==null?_e=De=Ue=Be=null:(_e=+er[0][0],De=+er[0][1],Ue=+er[1][0],Be=+er[1][1]),Ot):_e==null?null:[[_e,De],[Ue,Be]]},Ot.size=function(er){return arguments.length?(er==null?_e=De=Ue=Be=null:(_e=De=0,Ue=+er[0],Be=+er[1]),Ot):_e==null?null:[Ue-_e,Be-De]},Ot};function _i(le){return le.x}function hl(le){return le.y}function el(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function qi(le,_e,De,Ue,Be,qe){if(!le(_e,De,Ue,Be,qe)){var Mt=(De+Be)*.5,mt=(Ue+qe)*.5,Ot=_e.nodes;Ot[0]&&qi(le,Ot[0],De,Ue,Mt,mt),Ot[1]&&qi(le,Ot[1],Mt,Ue,Be,mt),Ot[2]&&qi(le,Ot[2],De,mt,Mt,qe),Ot[3]&&qi(le,Ot[3],Mt,mt,Be,qe)}}function No(le,_e,De,Ue,Be,qe,Mt){var mt=1/0,Ot;return function er(or,sr,Lr,nn,pn){if(!(sr>qe||Lr>Mt||nn<Ue||pn<Be)){if(zr=or.point){var zr,Wr=_e-or.x,qr=De-or.y,fn=Wr*Wr+qr*qr;if(fn<mt){var hn=Math.sqrt(mt=fn);Ue=_e-hn,Be=De-hn,qe=_e+hn,Mt=De+hn,Ot=zr}}for(var tn=or.nodes,jn=(sr+nn)*.5,la=(Lr+pn)*.5,Ea=_e>=jn,ca=De>=la,Ra=ca<<1|Ea,pa=Ra+4;Ra<pa;++Ra)if(or=tn[Ra&3])switch(Ra&3){case 0:er(or,sr,Lr,jn,la);break;case 1:er(or,jn,Lr,nn,la);break;case 2:er(or,sr,la,jn,pn);break;case 3:er(or,jn,la,nn,pn);break}}}(le,Ue,Be,qe,Mt),Ot}w.interpolateRgb=Vl;function Vl(le,_e){le=w.rgb(le),_e=w.rgb(_e);var De=le.r,Ue=le.g,Be=le.b,qe=_e.r-De,Mt=_e.g-Ue,mt=_e.b-Be;return function(Ot){return"#"+Pr(Math.round(De+qe*Ot))+Pr(Math.round(Ue+Mt*Ot))+Pr(Math.round(Be+mt*Ot))}}w.interpolateObject=Is;function Is(le,_e){var De={},Ue={},Be;for(Be in le)Be in _e?De[Be]=yo(le[Be],_e[Be]):Ue[Be]=le[Be];for(Be in _e)Be in le||(Ue[Be]=_e[Be]);return function(qe){for(Be in De)Ue[Be]=De[Be](qe);return Ue}}w.interpolateNumber=Gi;function Gi(le,_e){return le=+le,_e=+_e,function(De){return le*(1-De)+_e*De}}w.interpolateString=kl;function kl(le,_e){var De=lo.lastIndex=Zi.lastIndex=0,Ue,Be,qe,Mt=-1,mt=[],Ot=[];for(le=le+"",_e=_e+"";(Ue=lo.exec(le))&&(Be=Zi.exec(_e));)(qe=Be.index)>De&&(qe=_e.slice(De,qe),mt[Mt]?mt[Mt]+=qe:mt[++Mt]=qe),(Ue=Ue[0])===(Be=Be[0])?mt[Mt]?mt[Mt]+=Be:mt[++Mt]=Be:(mt[++Mt]=null,Ot.push({i:Mt,x:Gi(Ue,Be)})),De=Zi.lastIndex;return De<_e.length&&(qe=_e.slice(De),mt[Mt]?mt[Mt]+=qe:mt[++Mt]=qe),mt.length<2?Ot[0]?(_e=Ot[0].x,function(er){return _e(er)+""}):function(){return _e}:(_e=Ot.length,function(er){for(var or=0,sr;or<_e;++or)mt[(sr=Ot[or]).i]=sr.x(er);return mt.join("")})}var lo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Zi=new RegExp(lo.source,"g");w.interpolate=yo;function yo(le,_e){for(var De=w.interpolators.length,Ue;--De>=0&&!(Ue=w.interpolators[De](le,_e)););return Ue}w.interpolators=[function(le,_e){var De=typeof _e;return(De==="string"?Dr.has(_e.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(_e)?Vl:kl:_e instanceof ar?Vl:Array.isArray(_e)?uo:De==="object"&&isNaN(_e)?Is:Gi)(le,_e)}],w.interpolateArray=uo;function uo(le,_e){var De=[],Ue=[],Be=le.length,qe=_e.length,Mt=Math.min(le.length,_e.length),mt;for(mt=0;mt<Mt;++mt)De.push(yo(le[mt],_e[mt]));for(;mt<Be;++mt)Ue[mt]=le[mt];for(;mt<qe;++mt)Ue[mt]=_e[mt];return function(Ot){for(mt=0;mt<Mt;++mt)Ue[mt]=De[mt](Ot);return Ue}}var _s=function(){return D},vl=w.map({linear:_s,poly:Hs,quad:function(){return Bo},cubic:function(){return uf},sin:function(){return ou},exp:function(){return ff},circle:function(){return cf},elastic:pl,back:su,bounce:function(){return Gs}}),Bu=w.map({in:D,out:Uu,"in-out":tl,"out-in":function(le){return tl(Uu(le))}});w.ease=function(le){var _e=le.indexOf("-"),De=_e>=0?le.slice(0,_e):le,Ue=_e>=0?le.slice(_e+1):"in";return De=vl.get(De)||_s,Ue=Bu.get(Ue)||D,ps(Ue(De.apply(null,f.call(arguments,1))))};function ps(le){return function(_e){return _e<=0?0:_e>=1?1:le(_e)}}function Uu(le){return function(_e){return 1-le(1-_e)}}function tl(le){return function(_e){return .5*(_e<.5?le(2*_e):2-le(2-2*_e))}}function Bo(le){return le*le}function uf(le){return le*le*le}function rl(le){if(le<=0)return 0;if(le>=1)return 1;var _e=le*le,De=_e*le;return 4*(le<.5?De:3*(le-_e)+De-.75)}function Hs(le){return function(_e){return Math.pow(_e,le)}}function ou(le){return 1-Math.cos(le*tt)}function ff(le){return Math.pow(2,10*(le-1))}function cf(le){return 1-Math.sqrt(1-le*le)}function pl(le,_e){var De;return arguments.length<2&&(_e=.45),arguments.length?De=_e/Ve*Math.asin(1/le):(le=1,De=_e/4),function(Ue){return 1+le*Math.pow(2,-10*Ue)*Math.sin((Ue-De)*Ve/_e)}}function su(le){return le||(le=1.70158),function(_e){return _e*_e*((le+1)*_e-le)}}function Gs(le){return le<1/2.75?7.5625*le*le:le<2/2.75?7.5625*(le-=1.5/2.75)*le+.75:le<2.5/2.75?7.5625*(le-=2.25/2.75)*le+.9375:7.5625*(le-=2.625/2.75)*le+.984375}w.interpolateHcl=Tu;function Tu(le,_e){le=w.hcl(le),_e=w.hcl(_e);var De=le.h,Ue=le.c,Be=le.l,qe=_e.h-De,Mt=_e.c-Ue,mt=_e.l-Be;return isNaN(Mt)&&(Mt=0,Ue=isNaN(Ue)?_e.c:Ue),isNaN(qe)?(qe=0,De=isNaN(De)?_e.h:De):qe>180?qe-=360:qe<-180&&(qe+=360),function(Ot){return ht(De+qe*Ot,Ue+Mt*Ot,Be+mt*Ot)+""}}w.interpolateHsl=Ll;function Ll(le,_e){le=w.hsl(le),_e=w.hsl(_e);var De=le.h,Ue=le.s,Be=le.l,qe=_e.h-De,Mt=_e.s-Ue,mt=_e.l-Be;return isNaN(Mt)&&(Mt=0,Ue=isNaN(Ue)?_e.s:Ue),isNaN(qe)?(qe=0,De=isNaN(De)?_e.h:De):qe>180?qe-=360:qe<-180&&(qe+=360),function(Ot){return Er(De+qe*Ot,Ue+Mt*Ot,Be+mt*Ot)+""}}w.interpolateLab=Au;function Au(le,_e){le=w.lab(le),_e=w.lab(_e);var De=le.l,Ue=le.a,Be=le.b,qe=_e.l-De,Mt=_e.a-Ue,mt=_e.b-Be;return function(Ot){return ft(De+qe*Ot,Ue+Mt*Ot,Be+mt*Ot)+""}}w.interpolateRound=Vu;function Vu(le,_e){return _e-=le,function(De){return Math.round(le+_e*De)}}w.transform=function(le){var _e=T.createElementNS(w.ns.prefix.svg,"g");return(w.transform=function(De){if(De!=null){_e.setAttribute("transform",De);var Ue=_e.transform.baseVal.consolidate()}return new lu(Ue?Ue.matrix:uu)})(le)};function lu(le){var _e=[le.a,le.b],De=[le.c,le.d],Ue=dl(_e),Be=hf(_e,De),qe=dl(Mu(De,_e,-Be))||0;_e[0]*De[1]<De[0]*_e[1]&&(_e[0]*=-1,_e[1]*=-1,Ue*=-1,Be*=-1),this.rotate=(Ue?Math.atan2(_e[1],_e[0]):Math.atan2(-De[0],De[1]))*wt,this.translate=[le.e,le.f],this.scale=[Ue,qe],this.skew=qe?Math.atan2(Be,qe)*wt:0}lu.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};function hf(le,_e){return le[0]*_e[0]+le[1]*_e[1]}function dl(le){var _e=Math.sqrt(hf(le,le));return _e&&(le[0]/=_e,le[1]/=_e),_e}function Mu(le,_e,De){return le[0]+=De*_e[0],le[1]+=De*_e[1],le}var uu={a:1,b:0,c:0,d:1,e:0,f:0};w.interpolateTransform=fu;function Fs(le){return le.length?le.pop()+",":""}function Hl(le,_e,De,Ue){if(le[0]!==_e[0]||le[1]!==_e[1]){var Be=De.push("translate(",null,",",null,")");Ue.push({i:Be-4,x:Gi(le[0],_e[0])},{i:Be-2,x:Gi(le[1],_e[1])})}else(_e[0]||_e[1])&&De.push("translate("+_e+")")}function Su(le,_e,De,Ue){le!==_e?(le-_e>180?_e+=360:_e-le>180&&(le+=360),Ue.push({i:De.push(Fs(De)+"rotate(",null,")")-2,x:Gi(le,_e)})):_e&&De.push(Fs(De)+"rotate("+_e+")")}function Hu(le,_e,De,Ue){le!==_e?Ue.push({i:De.push(Fs(De)+"skewX(",null,")")-2,x:Gi(le,_e)}):_e&&De.push(Fs(De)+"skewX("+_e+")")}function Gu(le,_e,De,Ue){if(le[0]!==_e[0]||le[1]!==_e[1]){var Be=De.push(Fs(De)+"scale(",null,",",null,")");Ue.push({i:Be-4,x:Gi(le[0],_e[0])},{i:Be-2,x:Gi(le[1],_e[1])})}else(_e[0]!==1||_e[1]!==1)&&De.push(Fs(De)+"scale("+_e+")")}function fu(le,_e){var De=[],Ue=[];return le=w.transform(le),_e=w.transform(_e),Hl(le.translate,_e.translate,De,Ue),Su(le.rotate,_e.rotate,De,Ue),Hu(le.skew,_e.skew,De,Ue),Gu(le.scale,_e.scale,De,Ue),le=_e=null,function(Be){for(var qe=-1,Mt=Ue.length,mt;++qe<Mt;)De[(mt=Ue[qe]).i]=mt.x(Be);return De.join("")}}function vf(le,_e){return _e=(_e-=le=+le)||1/_e,function(De){return(De-le)/_e}}function Yu(le,_e){return _e=(_e-=le=+le)||1/_e,function(De){return Math.max(0,Math.min(1,(De-le)/_e))}}w.layout={},w.layout.bundle=function(){return function(le){for(var _e=[],De=-1,Ue=le.length;++De<Ue;)_e.push(ds(le[De]));return _e}};function ds(le){for(var _e=le.source,De=le.target,Ue=Dl(_e,De),Be=[_e];_e!==Ue;)_e=_e.parent,Be.push(_e);for(var qe=Be.length;De!==Ue;)Be.splice(qe,0,De),De=De.parent;return Be}function Pl(le){for(var _e=[],De=le.parent;De!=null;)_e.push(le),le=De,De=De.parent;return _e.push(le),_e}function Dl(le,_e){if(le===_e)return le;for(var De=Pl(le),Ue=Pl(_e),Be=De.pop(),qe=Ue.pop(),Mt=null;Be===qe;)Mt=Be,Be=De.pop(),qe=Ue.pop();return Mt}w.layout.chord=function(){var le={},_e,De,Ue,Be,qe=0,Mt,mt,Ot;function er(){var sr={},Lr=[],nn=w.range(Be),pn=[],zr,Wr,qr,fn,hn;for(_e=[],De=[],zr=0,fn=-1;++fn<Be;){for(Wr=0,hn=-1;++hn<Be;)Wr+=Ue[fn][hn];Lr.push(Wr),pn.push(w.range(Be)),zr+=Wr}for(Mt&&nn.sort(function(ja,Oa){return Mt(Lr[ja],Lr[Oa])}),mt&&pn.forEach(function(ja,Oa){ja.sort(function(ii,Ei){return mt(Ue[Oa][ii],Ue[Oa][Ei])})}),zr=(Ve-qe*Be)/zr,Wr=0,fn=-1;++fn<Be;){for(qr=Wr,hn=-1;++hn<Be;){var tn=nn[fn],jn=pn[tn][hn],la=Ue[tn][jn],Ea=Wr,ca=Wr+=la*zr;sr[tn+"-"+jn]={index:tn,subindex:jn,startAngle:Ea,endAngle:ca,value:la}}De[tn]={index:tn,startAngle:qr,endAngle:Wr,value:Lr[tn]},Wr+=qe}for(fn=-1;++fn<Be;)for(hn=fn-1;++hn<Be;){var Ra=sr[fn+"-"+hn],pa=sr[hn+"-"+fn];(Ra.value||pa.value)&&_e.push(Ra.value<pa.value?{source:pa,target:Ra}:{source:Ra,target:pa})}Ot&&or()}function or(){_e.sort(function(sr,Lr){return Ot((sr.source.value+sr.target.value)/2,(Lr.source.value+Lr.target.value)/2)})}return le.matrix=function(sr){return arguments.length?(Be=(Ue=sr)&&Ue.length,_e=De=null,le):Ue},le.padding=function(sr){return arguments.length?(qe=sr,_e=De=null,le):qe},le.sortGroups=function(sr){return arguments.length?(Mt=sr,_e=De=null,le):Mt},le.sortSubgroups=function(sr){return arguments.length?(mt=sr,_e=null,le):mt},le.sortChords=function(sr){return arguments.length?(Ot=sr,_e&&or(),le):Ot},le.chords=function(){return _e||er(),_e},le.groups=function(){return De||er(),De},le},w.layout.force=function(){var le={},_e=w.dispatch("start","tick","end"),De,Ue=[1,1],Be,qe,Mt=.9,mt=Ws,Ot=bo,er=-30,or=Gl,sr=.1,Lr=.64,nn=[],pn=[],zr,Wr,qr;function fn(tn){return function(jn,la,Ea,ca){if(jn.point!==tn){var Ra=jn.cx-tn.x,pa=jn.cy-tn.y,ja=ca-la,Oa=Ra*Ra+pa*pa;if(ja*ja/Lr<Oa){if(Oa<or){var ii=jn.charge/Oa;tn.px-=Ra*ii,tn.py-=pa*ii}return!0}if(jn.point&&Oa&&Oa<or){var ii=jn.pointCharge/Oa;tn.px-=Ra*ii,tn.py-=pa*ii}}return!jn.charge}}le.tick=function(){if((qe*=.99)<.005)return De=null,_e.end({type:"end",alpha:qe=0}),!0;var tn=nn.length,jn=pn.length,la,Ea,ca,Ra,pa,ja,Oa,ii,Ei;for(Ea=0;Ea<jn;++Ea)ca=pn[Ea],Ra=ca.source,pa=ca.target,ii=pa.x-Ra.x,Ei=pa.y-Ra.y,(ja=ii*ii+Ei*Ei)&&(ja=qe*Wr[Ea]*((ja=Math.sqrt(ja))-zr[Ea])/ja,ii*=ja,Ei*=ja,pa.x-=ii*(Oa=Ra.weight+pa.weight?Ra.weight/(Ra.weight+pa.weight):.5),pa.y-=Ei*Oa,Ra.x+=ii*(Oa=1-Oa),Ra.y+=Ei*Oa);if((Oa=qe*sr)&&(ii=Ue[0]/2,Ei=Ue[1]/2,Ea=-1,Oa))for(;++Ea<tn;)ca=nn[Ea],ca.x+=(ii-ca.x)*Oa,ca.y+=(Ei-ca.y)*Oa;if(er)for(Ys(la=w.geom.quadtree(nn),qe,qr),Ea=-1;++Ea<tn;)(ca=nn[Ea]).fixed||la.visit(fn(ca));for(Ea=-1;++Ea<tn;)ca=nn[Ea],ca.fixed?(ca.x=ca.px,ca.y=ca.py):(ca.x-=(ca.px-(ca.px=ca.x))*Mt,ca.y-=(ca.py-(ca.py=ca.y))*Mt);_e.tick({type:"tick",alpha:qe})},le.nodes=function(tn){return arguments.length?(nn=tn,le):nn},le.links=function(tn){return arguments.length?(pn=tn,le):pn},le.size=function(tn){return arguments.length?(Ue=tn,le):Ue},le.linkDistance=function(tn){return arguments.length?(mt=typeof tn=="function"?tn:+tn,le):mt},le.distance=le.linkDistance,le.linkStrength=function(tn){return arguments.length?(Ot=typeof tn=="function"?tn:+tn,le):Ot},le.friction=function(tn){return arguments.length?(Mt=+tn,le):Mt},le.charge=function(tn){return arguments.length?(er=typeof tn=="function"?tn:+tn,le):er},le.chargeDistance=function(tn){return arguments.length?(or=tn*tn,le):Math.sqrt(or)},le.gravity=function(tn){return arguments.length?(sr=+tn,le):sr},le.theta=function(tn){return arguments.length?(Lr=tn*tn,le):Math.sqrt(Lr)},le.alpha=function(tn){return arguments.length?(tn=+tn,qe?tn>0?qe=tn:(De.c=null,De.t=NaN,De=null,_e.end({type:"end",alpha:qe=0})):tn>0&&(_e.start({type:"start",alpha:qe=tn}),De=yn(le.tick)),le):qe},le.start=function(){var tn,jn=nn.length,la=pn.length,Ea=Ue[0],ca=Ue[1],Ra,pa;for(tn=0;tn<jn;++tn)(pa=nn[tn]).index=tn,pa.weight=0;for(tn=0;tn<la;++tn)pa=pn[tn],typeof pa.source=="number"&&(pa.source=nn[pa.source]),typeof pa.target=="number"&&(pa.target=nn[pa.target]),++pa.source.weight,++pa.target.weight;for(tn=0;tn<jn;++tn)pa=nn[tn],isNaN(pa.x)&&(pa.x=ja("x",Ea)),isNaN(pa.y)&&(pa.y=ja("y",ca)),isNaN(pa.px)&&(pa.px=pa.x),isNaN(pa.py)&&(pa.py=pa.y);if(zr=[],typeof mt=="function")for(tn=0;tn<la;++tn)zr[tn]=+mt.call(this,pn[tn],tn);else for(tn=0;tn<la;++tn)zr[tn]=mt;if(Wr=[],typeof Ot=="function")for(tn=0;tn<la;++tn)Wr[tn]=+Ot.call(this,pn[tn],tn);else for(tn=0;tn<la;++tn)Wr[tn]=Ot;if(qr=[],typeof er=="function")for(tn=0;tn<jn;++tn)qr[tn]=+er.call(this,nn[tn],tn);else for(tn=0;tn<jn;++tn)qr[tn]=er;function ja(Oa,ii){if(!Ra){for(Ra=new Array(jn),ji=0;ji<jn;++ji)Ra[ji]=[];for(ji=0;ji<la;++ji){var Ei=pn[ji];Ra[Ei.source.index].push(Ei.target),Ra[Ei.target.index].push(Ei.source)}}for(var Ao=Ra[tn],ji=-1,ga=Ao.length,hi;++ji<ga;)if(!isNaN(hi=Ao[ji][Oa]))return hi;return Math.random()*ii}return le.resume()},le.resume=function(){return le.alpha(.1)},le.stop=function(){return le.alpha(0)},le.drag=function(){if(Be||(Be=w.behavior.drag().origin(D).on("dragstart.force",Eu).on("drag.force",hn).on("dragend.force",zs)),!arguments.length)return Be;this.on("mouseover.force",Uo).on("mouseout.force",cu).call(Be)};function hn(tn){tn.px=w.event.x,tn.py=w.event.y,le.resume()}return w.rebind(le,_e,"on")};function Eu(le){le.fixed|=2}function zs(le){le.fixed&=-7}function Uo(le){le.fixed|=4,le.px=le.x,le.py=le.y}function cu(le){le.fixed&=-5}function Ys(le,_e,De){var Ue=0,Be=0;if(le.charge=0,!le.leaf)for(var qe=le.nodes,Mt=qe.length,mt=-1,Ot;++mt<Mt;)Ot=qe[mt],Ot!=null&&(Ys(Ot,_e,De),le.charge+=Ot.charge,Ue+=Ot.charge*Ot.cx,Be+=Ot.charge*Ot.cy);if(le.point){le.leaf||(le.point.x+=Math.random()-.5,le.point.y+=Math.random()-.5);var er=_e*De[le.point.index];le.charge+=le.pointCharge=er,Ue+=er*le.point.x,Be+=er*le.point.y}le.cx=Ue/le.charge,le.cy=Be/le.charge}var Ws=20,bo=1,Gl=1/0;w.layout.hierarchy=function(){var le=hu,_e=Wl,De=Rl;function Ue(Be){var qe=[Be],Mt=[],mt;for(Be.depth=0;(mt=qe.pop())!=null;)if(Mt.push(mt),(er=_e.call(Ue,mt,mt.depth))&&(Ot=er.length)){for(var Ot,er,or;--Ot>=0;)qe.push(or=er[Ot]),or.parent=mt,or.depth=mt.depth+1;De&&(mt.value=0),mt.children=er}else De&&(mt.value=+De.call(Ue,mt,mt.depth)||0),delete mt.children;return Os(Be,function(sr){var Lr,nn;le&&(Lr=sr.children)&&Lr.sort(le),De&&(nn=sr.parent)&&(nn.value+=sr.value)}),Mt}return Ue.sort=function(Be){return arguments.length?(le=Be,Ue):le},Ue.children=function(Be){return arguments.length?(_e=Be,Ue):_e},Ue.value=function(Be){return arguments.length?(De=Be,Ue):De},Ue.revalue=function(Be){return De&&(yl(Be,function(qe){qe.children&&(qe.value=0)}),Os(Be,function(qe){var Mt;qe.children||(qe.value=+De.call(Ue,qe,qe.depth)||0),(Mt=qe.parent)&&(Mt.value+=qe.value)})),Be},Ue};function Yl(le,_e){return w.rebind(le,_e,"sort","children","value"),le.nodes=le,le.links=jl,le}function yl(le,_e){for(var De=[le];(le=De.pop())!=null;)if(_e(le),(Be=le.children)&&(Ue=Be.length))for(var Ue,Be;--Ue>=0;)De.push(Be[Ue])}function Os(le,_e){for(var De=[le],Ue=[];(le=De.pop())!=null;)if(Ue.push(le),(Mt=le.children)&&(qe=Mt.length))for(var Be=-1,qe,Mt;++Be<qe;)De.push(Mt[Be]);for(;(le=Ue.pop())!=null;)_e(le)}function Wl(le){return le.children}function Rl(le){return le.value}function hu(le,_e){return _e.value-le.value}function jl(le){return w.merge(le.map(function(_e){return(_e.children||[]).map(function(De){return{source:_e,target:De}})}))}w.layout.partition=function(){var le=w.layout.hierarchy(),_e=[1,1];function De(qe,Mt,mt,Ot){var er=qe.children;if(qe.x=Mt,qe.y=qe.depth*Ot,qe.dx=mt,qe.dy=Ot,er&&(sr=er.length)){var or=-1,sr,Lr,nn;for(mt=qe.value?mt/qe.value:0;++or<sr;)De(Lr=er[or],Mt,nn=Lr.value*mt,Ot),Mt+=nn}}function Ue(qe){var Mt=qe.children,mt=0;if(Mt&&(er=Mt.length))for(var Ot=-1,er;++Ot<er;)mt=Math.max(mt,Ue(Mt[Ot]));return 1+mt}function Be(qe,Mt){var mt=le.call(this,qe,Mt);return De(mt[0],0,_e[0],_e[1]/Ue(mt[0])),mt}return Be.size=function(qe){return arguments.length?(_e=qe,Be):_e},Yl(Be,le)},w.layout.pie=function(){var le=Number,_e=ml,De=0,Ue=Ve,Be=0;function qe(Mt){var mt=Mt.length,Ot=Mt.map(function(fn,hn){return+le.call(qe,fn,hn)}),er=+(typeof De=="function"?De.apply(this,arguments):De),or=(typeof Ue=="function"?Ue.apply(this,arguments):Ue)-er,sr=Math.min(Math.abs(or)/mt,+(typeof Be=="function"?Be.apply(this,arguments):Be)),Lr=sr*(or<0?-1:1),nn=w.sum(Ot),pn=nn?(or-mt*Lr)/nn:0,zr=w.range(mt),Wr=[],qr;return _e!=null&&zr.sort(_e===ml?function(fn,hn){return Ot[hn]-Ot[fn]}:function(fn,hn){return _e(Mt[fn],Mt[hn])}),zr.forEach(function(fn){Wr[fn]={data:Mt[fn],value:qr=Ot[fn],startAngle:er,endAngle:er+=qr*pn+Lr,padAngle:sr}}),Wr}return qe.value=function(Mt){return arguments.length?(le=Mt,qe):le},qe.sort=function(Mt){return arguments.length?(_e=Mt,qe):_e},qe.startAngle=function(Mt){return arguments.length?(De=Mt,qe):De},qe.endAngle=function(Mt){return arguments.length?(Ue=Mt,qe):Ue},qe.padAngle=function(Mt){return arguments.length?(Be=Mt,qe):Be},qe};var ml={};w.layout.stack=function(){var le=D,_e=Xl,De=xl,Ue=Lf,Be=pf,qe=Ts;function Mt(mt,Ot){if(!(pn=mt.length))return mt;var er=mt.map(function(fn,hn){return le.call(Mt,fn,hn)}),or=er.map(function(fn){return fn.map(function(hn,tn){return[Be.call(Mt,hn,tn),qe.call(Mt,hn,tn)]})}),sr=_e.call(Mt,or,Ot);er=w.permute(er,sr),or=w.permute(or,sr);var Lr=De.call(Mt,or,Ot),nn=er[0].length,pn,zr,Wr,qr;for(Wr=0;Wr<nn;++Wr)for(Ue.call(Mt,er[0][Wr],qr=Lr[Wr],or[0][Wr][1]),zr=1;zr<pn;++zr)Ue.call(Mt,er[zr][Wr],qr+=or[zr-1][Wr][1],or[zr][Wr][1]);return mt}return Mt.values=function(mt){return arguments.length?(le=mt,Mt):le},Mt.order=function(mt){return arguments.length?(_e=typeof mt=="function"?mt:Cu.get(mt)||Xl,Mt):_e},Mt.offset=function(mt){return arguments.length?(De=typeof mt=="function"?mt:Il.get(mt)||xl,Mt):De},Mt.x=function(mt){return arguments.length?(Be=mt,Mt):Be},Mt.y=function(mt){return arguments.length?(qe=mt,Mt):qe},Mt.out=function(mt){return arguments.length?(Ue=mt,Mt):Ue},Mt};function pf(le){return le.x}function Ts(le){return le.y}function Lf(le,_e,De){le.y0=_e,le.y=De}var Cu=w.map({"inside-out":function(le){var _e=le.length,De,Ue,Be=le.map(Zl),qe=le.map(Wu),Mt=w.range(_e).sort(function(sr,Lr){return Be[sr]-Be[Lr]}),mt=0,Ot=0,er=[],or=[];for(De=0;De<_e;++De)Ue=Mt[De],mt<Ot?(mt+=qe[Ue],er.push(Ue)):(Ot+=qe[Ue],or.push(Ue));return or.reverse().concat(er)},reverse:function(le){return w.range(le.length).reverse()},default:Xl}),Il=w.map({silhouette:function(le){var _e=le.length,De=le[0].length,Ue=[],Be=0,qe,Mt,mt,Ot=[];for(Mt=0;Mt<De;++Mt){for(qe=0,mt=0;qe<_e;qe++)mt+=le[qe][Mt][1];mt>Be&&(Be=mt),Ue.push(mt)}for(Mt=0;Mt<De;++Mt)Ot[Mt]=(Be-Ue[Mt])/2;return Ot},wiggle:function(le){var _e=le.length,De=le[0],Ue=De.length,Be,qe,Mt,mt,Ot,er,or,sr,Lr,nn=[];for(nn[0]=sr=Lr=0,qe=1;qe<Ue;++qe){for(Be=0,mt=0;Be<_e;++Be)mt+=le[Be][qe][1];for(Be=0,Ot=0,or=De[qe][0]-De[qe-1][0];Be<_e;++Be){for(Mt=0,er=(le[Be][qe][1]-le[Be][qe-1][1])/(2*or);Mt<Be;++Mt)er+=(le[Mt][qe][1]-le[Mt][qe-1][1])/or;Ot+=er*le[Be][qe][1]}nn[qe]=sr-=mt?Ot/mt*or:0,sr<Lr&&(Lr=sr)}for(qe=0;qe<Ue;++qe)nn[qe]-=Lr;return nn},expand:function(le){var _e=le.length,De=le[0].length,Ue=1/_e,Be,qe,Mt,mt=[];for(qe=0;qe<De;++qe){for(Be=0,Mt=0;Be<_e;Be++)Mt+=le[Be][qe][1];if(Mt)for(Be=0;Be<_e;Be++)le[Be][qe][1]/=Mt;else for(Be=0;Be<_e;Be++)le[Be][qe][1]=Ue}for(qe=0;qe<De;++qe)mt[qe]=0;return mt},zero:xl});function Xl(le){return w.range(le.length)}function xl(le){for(var _e=-1,De=le[0].length,Ue=[];++_e<De;)Ue[_e]=0;return Ue}function Zl(le){for(var _e=1,De=0,Ue=le[0][1],Be,qe=le.length;_e<qe;++_e)(Be=le[_e][1])>Ue&&(De=_e,Ue=Be);return De}function Wu(le){return le.reduce(ju,0)}function ju(le,_e){return le+_e[1]}w.layout.histogram=function(){var le=!0,_e=Number,De=Fl,Ue=Pf;function Be(qe,Lr){for(var mt=[],Ot=qe.map(_e,this),er=De.call(this,Ot,Lr),or=Ue.call(this,er,Ot,Lr),sr,Lr=-1,nn=Ot.length,pn=or.length-1,zr=le?1:1/nn,Wr;++Lr<pn;)sr=mt[Lr]=[],sr.dx=or[Lr+1]-(sr.x=or[Lr]),sr.y=0;if(pn>0)for(Lr=-1;++Lr<nn;)Wr=Ot[Lr],Wr>=er[0]&&Wr<=er[1]&&(sr=mt[w.bisect(or,Wr,1,pn)-1],sr.y+=zr,sr.push(qe[Lr]));return mt}return Be.value=function(qe){return arguments.length?(_e=qe,Be):_e},Be.range=function(qe){return arguments.length?(De=it(qe),Be):De},Be.bins=function(qe){return arguments.length?(Ue=typeof qe=="number"?function(Mt){return Yi(Mt,qe)}:it(qe),Be):Ue},Be.frequency=function(qe){return arguments.length?(le=!!qe,Be):le},Be};function Pf(le,_e){return Yi(le,Math.ceil(Math.log(_e.length)/Math.LN2+1))}function Yi(le,_e){for(var De=-1,Ue=+le[0],Be=(le[1]-Ue)/_e,qe=[];++De<=_e;)qe[De]=Be*De+Ue;return qe}function Fl(le){return[w.min(le),w.max(le)]}w.layout.pack=function(){var le=w.layout.hierarchy().sort(bl),_e=0,De=[1,1],Ue;function Be(qe,Mt){var mt=le.call(this,qe,Mt),Ot=mt[0],er=De[0],or=De[1],sr=Ue==null?Math.sqrt:typeof Ue=="function"?Ue:function(){return Ue};if(Ot.x=Ot.y=0,Os(Ot,function(nn){nn.r=+sr(nn.value)}),Os(Ot,wo),_e){var Lr=_e*(Ue?1:Math.max(2*Ot.r/er,2*Ot.r/or))/2;Os(Ot,function(nn){nn.r+=Lr}),Os(Ot,wo),Os(Ot,function(nn){nn.r-=Lr})}return nl(Ot,er/2,or/2,Ue?1:1/Math.max(2*Ot.r/er,2*Ot.r/or)),mt}return Be.size=function(qe){return arguments.length?(De=qe,Be):De},Be.radius=function(qe){return arguments.length?(Ue=qe==null||typeof qe=="function"?qe:+qe,Be):Ue},Be.padding=function(qe){return arguments.length?(_e=+qe,Be):_e},Yl(Be,le)};function bl(le,_e){return le.value-_e.value}function gs(le,_e){var De=le._pack_next;le._pack_next=_e,_e._pack_prev=le,_e._pack_next=De,De._pack_prev=_e}function As(le,_e){le._pack_next=_e,_e._pack_prev=le}function Kl(le,_e){var De=_e.x-le.x,Ue=_e.y-le.y,Be=le.r+_e.r;return .999*Be*Be>De*De+Ue*Ue}function wo(le){if(!(_e=le.children)||!(Lr=_e.length))return;var _e,De=1/0,Ue=-1/0,Be=1/0,qe=-1/0,Mt,mt,Ot,er,or,sr,Lr;function nn(tn){De=Math.min(tn.x-tn.r,De),Ue=Math.max(tn.x+tn.r,Ue),Be=Math.min(tn.y-tn.r,Be),qe=Math.max(tn.y+tn.r,qe)}if(_e.forEach(Xu),Mt=_e[0],Mt.x=-Mt.r,Mt.y=0,nn(Mt),Lr>1&&(mt=_e[1],mt.x=mt.r,mt.y=0,nn(mt),Lr>2))for(Ot=_e[2],al(Mt,mt,Ot),nn(Ot),gs(Mt,Ot),Mt._pack_prev=Ot,gs(Ot,mt),mt=Mt._pack_next,er=3;er<Lr;er++){al(Mt,mt,Ot=_e[er]);var pn=0,zr=1,Wr=1;for(or=mt._pack_next;or!==mt;or=or._pack_next,zr++)if(Kl(or,Ot)){pn=1;break}if(pn==1)for(sr=Mt._pack_prev;sr!==or._pack_prev&&!Kl(sr,Ot);sr=sr._pack_prev,Wr++);pn?(zr<Wr||zr==Wr&&mt.r<Mt.r?As(Mt,mt=or):As(Mt=sr,mt),er--):(gs(Mt,Ot),mt=Ot,nn(Ot))}var qr=(De+Ue)/2,fn=(Be+qe)/2,hn=0;for(er=0;er<Lr;er++)Ot=_e[er],Ot.x-=qr,Ot.y-=fn,hn=Math.max(hn,Ot.r+Math.sqrt(Ot.x*Ot.x+Ot.y*Ot.y));le.r=hn,_e.forEach(Ms)}function Xu(le){le._pack_next=le._pack_prev=le}function Ms(le){delete le._pack_next,delete le._pack_prev}function nl(le,_e,De,Ue){var Be=le.children;if(le.x=_e+=Ue*le.x,le.y=De+=Ue*le.y,le.r*=Ue,Be)for(var qe=-1,Mt=Be.length;++qe<Mt;)nl(Be[qe],_e,De,Ue)}function al(le,_e,De){var Ue=le.r+De.r,Be=_e.x-le.x,qe=_e.y-le.y;if(Ue&&(Be||qe)){var Mt=_e.r+De.r,mt=Be*Be+qe*qe;Mt*=Mt,Ue*=Ue;var Ot=.5+(Ue-Mt)/(2*mt),er=Math.sqrt(Math.max(0,2*Mt*(Ue+mt)-(Ue-=mt)*Ue-Mt*Mt))/(2*mt);De.x=le.x+Ot*Be+er*qe,De.y=le.y+Ot*qe-er*Be}else De.x=le.x+Ue,De.y=le.y}w.layout.tree=function(){var le=w.layout.hierarchy().sort(null).value(null),_e=js,De=[1,1],Ue=null;function Be(or,sr){var Lr=le.call(this,or,sr),nn=Lr[0],pn=qe(nn);if(Os(pn,Mt),pn.parent.m=-pn.z,yl(pn,mt),Ue)yl(nn,er);else{var zr=nn,Wr=nn,qr=nn;yl(nn,function(jn){jn.x<zr.x&&(zr=jn),jn.x>Wr.x&&(Wr=jn),jn.depth>qr.depth&&(qr=jn)});var fn=_e(zr,Wr)/2-zr.x,hn=De[0]/(Wr.x+_e(Wr,zr)/2+fn),tn=De[1]/(qr.depth||1);yl(nn,function(jn){jn.x=(jn.x+fn)*hn,jn.y=jn.depth*tn})}return Lr}function qe(or){for(var sr={A:null,children:[or]},Lr=[sr],nn;(nn=Lr.pop())!=null;)for(var pn=nn.children,zr,Wr=0,qr=pn.length;Wr<qr;++Wr)Lr.push((pn[Wr]=zr={_:pn[Wr],parent:nn,children:(zr=pn[Wr].children)&&zr.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:Wr}).a=zr);return sr.children[0]}function Mt(or){var sr=or.children,Lr=or.parent.children,nn=or.i?Lr[or.i-1]:null;if(sr.length){Es(or);var pn=(sr[0].z+sr[sr.length-1].z)/2;nn?(or.z=nn.z+_e(or._,nn._),or.m=or.z-pn):or.z=pn}else nn&&(or.z=nn.z+_e(or._,nn._));or.parent.A=Ot(or,nn,or.parent.A||Lr[0])}function mt(or){or._.x=or.z+or.parent.m,or.m+=or.parent.m}function Ot(or,sr,Lr){if(sr){for(var nn=or,pn=or,zr=sr,Wr=nn.parent.children[0],qr=nn.m,fn=pn.m,hn=zr.m,tn=Wr.m,jn;zr=eo(zr),nn=Ss(nn),zr&&nn;)Wr=Ss(Wr),pn=eo(pn),pn.a=or,jn=zr.z+hn-nn.z-qr+_e(zr._,nn._),jn>0&&(Vo(Zu(zr,or,Lr),or,jn),qr+=jn,fn+=jn),hn+=zr.m,qr+=nn.m,tn+=Wr.m,fn+=pn.m;zr&&!eo(pn)&&(pn.t=zr,pn.m+=hn-fn),nn&&!Ss(Wr)&&(Wr.t=nn,Wr.m+=qr-tn,Lr=or)}return Lr}function er(or){or.x*=De[0],or.y=or.depth*De[1]}return Be.separation=function(or){return arguments.length?(_e=or,Be):_e},Be.size=function(or){return arguments.length?(Ue=(De=or)==null?er:null,Be):Ue?null:De},Be.nodeSize=function(or){return arguments.length?(Ue=(De=or)==null?null:er,Be):Ue?De:null},Yl(Be,le)};function js(le,_e){return le.parent==_e.parent?1:2}function Ss(le){var _e=le.children;return _e.length?_e[0]:le.t}function eo(le){var _e=le.children,De;return(De=_e.length)?_e[De-1]:le.t}function Vo(le,_e,De){var Ue=De/(_e.i-le.i);_e.c-=Ue,_e.s+=De,le.c+=Ue,_e.z+=De,_e.m+=De}function Es(le){for(var _e=0,De=0,Ue=le.children,Be=Ue.length,qe;--Be>=0;)qe=Ue[Be],qe.z+=_e,qe.m+=_e,_e+=qe.s+(De+=qe.c)}function Zu(le,_e,De){return le.a.parent===_e.parent?le.a:De}w.layout.cluster=function(){var le=w.layout.hierarchy().sort(null).value(null),_e=js,De=[1,1],Ue=!1;function Be(qe,Mt){var mt=le.call(this,qe,Mt),Ot=mt[0],er,or=0;Os(Ot,function(zr){var Wr=zr.children;Wr&&Wr.length?(zr.x=Ku(Wr),zr.y=vu(Wr)):(zr.x=er?or+=_e(zr,er):0,zr.y=0,er=zr)});var sr=Tt(Ot),Lr=Yt(Ot),nn=sr.x-_e(sr,Lr)/2,pn=Lr.x+_e(Lr,sr)/2;return Os(Ot,Ue?function(zr){zr.x=(zr.x-Ot.x)*De[0],zr.y=(Ot.y-zr.y)*De[1]}:function(zr){zr.x=(zr.x-nn)/(pn-nn)*De[0],zr.y=(1-(Ot.y?zr.y/Ot.y:1))*De[1]}),mt}return Be.separation=function(qe){return arguments.length?(_e=qe,Be):_e},Be.size=function(qe){return arguments.length?(Ue=(De=qe)==null,Be):Ue?null:De},Be.nodeSize=function(qe){return arguments.length?(Ue=(De=qe)!=null,Be):Ue?De:null},Yl(Be,le)};function vu(le){return 1+w.max(le,function(_e){return _e.y})}function Ku(le){return le.reduce(function(_e,De){return _e+De.x},0)/le.length}function Tt(le){var _e=le.children;return _e&&_e.length?Tt(_e[0]):le}function Yt(le){var _e=le.children,De;return _e&&(De=_e.length)?Yt(_e[De-1]):le}w.layout.treemap=function(){var le=w.layout.hierarchy(),_e=Math.round,De=[1,1],Ue=null,Be=yr,qe=!1,Mt,mt="squarify",Ot=.5*(1+Math.sqrt(5));function er(zr,Wr){for(var qr=-1,fn=zr.length,hn,tn;++qr<fn;)tn=(hn=zr[qr]).value*(Wr<0?0:Wr),hn.area=isNaN(tn)||tn<=0?0:tn}function or(zr){var Wr=zr.children;if(Wr&&Wr.length){var qr=Be(zr),fn=[],hn=Wr.slice(),tn,jn=1/0,la,Ea=mt==="slice"?qr.dx:mt==="dice"?qr.dy:mt==="slice-dice"?zr.depth&1?qr.dy:qr.dx:Math.min(qr.dx,qr.dy),ca;for(er(hn,qr.dx*qr.dy/zr.value),fn.area=0;(ca=hn.length)>0;)fn.push(tn=hn[ca-1]),fn.area+=tn.area,mt!=="squarify"||(la=Lr(fn,Ea))<=jn?(hn.pop(),jn=la):(fn.area-=fn.pop().area,nn(fn,Ea,qr,!1),Ea=Math.min(qr.dx,qr.dy),fn.length=fn.area=0,jn=1/0);fn.length&&(nn(fn,Ea,qr,!0),fn.length=fn.area=0),Wr.forEach(or)}}function sr(zr){var Wr=zr.children;if(Wr&&Wr.length){var qr=Be(zr),fn=Wr.slice(),hn,tn=[];for(er(fn,qr.dx*qr.dy/zr.value),tn.area=0;hn=fn.pop();)tn.push(hn),tn.area+=hn.area,hn.z!=null&&(nn(tn,hn.z?qr.dx:qr.dy,qr,!fn.length),tn.length=tn.area=0);Wr.forEach(sr)}}function Lr(zr,Wr){for(var qr=zr.area,fn,hn=0,tn=1/0,jn=-1,la=zr.length;++jn<la;)!(fn=zr[jn].area)||(fn<tn&&(tn=fn),fn>hn&&(hn=fn));return qr*=qr,Wr*=Wr,qr?Math.max(Wr*hn*Ot/qr,qr/(Wr*tn*Ot)):1/0}function nn(zr,Wr,qr,fn){var hn=-1,tn=zr.length,jn=qr.x,la=qr.y,Ea=Wr?_e(zr.area/Wr):0,ca;if(Wr==qr.dx){for((fn||Ea>qr.dy)&&(Ea=qr.dy);++hn<tn;)ca=zr[hn],ca.x=jn,ca.y=la,ca.dy=Ea,jn+=ca.dx=Math.min(qr.x+qr.dx-jn,Ea?_e(ca.area/Ea):0);ca.z=!0,ca.dx+=qr.x+qr.dx-jn,qr.y+=Ea,qr.dy-=Ea}else{for((fn||Ea>qr.dx)&&(Ea=qr.dx);++hn<tn;)ca=zr[hn],ca.x=jn,ca.y=la,ca.dx=Ea,la+=ca.dy=Math.min(qr.y+qr.dy-la,Ea?_e(ca.area/Ea):0);ca.z=!1,ca.dy+=qr.y+qr.dy-la,qr.x+=Ea,qr.dx-=Ea}}function pn(zr){var Wr=Mt||le(zr),qr=Wr[0];return qr.x=qr.y=0,qr.value?(qr.dx=De[0],qr.dy=De[1]):qr.dx=qr.dy=0,Mt&&le.revalue(qr),er([qr],qr.dx*qr.dy/qr.value),(Mt?sr:or)(qr),qe&&(Mt=Wr),Wr}return pn.size=function(zr){return arguments.length?(De=zr,pn):De},pn.padding=function(zr){if(!arguments.length)return Ue;function Wr(hn){var tn=zr.call(pn,hn,hn.depth);return tn==null?yr(hn):vr(hn,typeof tn=="number"?[tn,tn,tn,tn]:tn)}function qr(hn){return vr(hn,zr)}var fn;return Be=(Ue=zr)==null?yr:(fn=typeof zr)=="function"?Wr:(fn==="number"&&(zr=[zr,zr,zr,zr]),qr),pn},pn.round=function(zr){return arguments.length?(_e=zr?Math.round:Number,pn):_e!=Number},pn.sticky=function(zr){return arguments.length?(qe=zr,Mt=null,pn):qe},pn.ratio=function(zr){return arguments.length?(Ot=zr,pn):Ot},pn.mode=function(zr){return arguments.length?(mt=zr+"",pn):mt},Yl(pn,le)};function yr(le){return{x:le.x,y:le.y,dx:le.dx,dy:le.dy}}function vr(le,_e){var De=le.x+_e[3],Ue=le.y+_e[0],Be=le.dx-_e[1]-_e[3],qe=le.dy-_e[0]-_e[2];return Be<0&&(De+=Be/2,Be=0),qe<0&&(Ue+=qe/2,qe=0),{x:De,y:Ue,dx:Be,dy:qe}}w.random={normal:function(le,_e){var De=arguments.length;return De<2&&(_e=1),De<1&&(le=0),function(){var Ue,Be,qe;do Ue=Math.random()*2-1,Be=Math.random()*2-1,qe=Ue*Ue+Be*Be;while(!qe||qe>1);return le+_e*Ue*Math.sqrt(-2*Math.log(qe)/qe)}},logNormal:function(){var le=w.random.normal.apply(w,arguments);return function(){return Math.exp(le())}},bates:function(le){var _e=w.random.irwinHall(le);return function(){return _e()/le}},irwinHall:function(le){return function(){for(var _e=0,De=0;De<le;De++)_e+=Math.random();return _e}}},w.scale={};function Nr(le){var _e=le[0],De=le[le.length-1];return _e<De?[_e,De]:[De,_e]}function ln(le){return le.rangeExtent?le.rangeExtent():Nr(le.range())}function wn(le,_e,De,Ue){var Be=De(le[0],le[1]),qe=Ue(_e[0],_e[1]);return function(Mt){return qe(Be(Mt))}}function Pn(le,_e){var De=0,Ue=le.length-1,Be=le[De],qe=le[Ue],Mt;return qe<Be&&(Mt=De,De=Ue,Ue=Mt,Mt=Be,Be=qe,qe=Mt),le[De]=_e.floor(Be),le[Ue]=_e.ceil(qe),le}function zn(le){return le?{floor:function(_e){return Math.floor(_e/le)*le},ceil:function(_e){return Math.ceil(_e/le)*le}}:Wn}var Wn={floor:D,ceil:D};function Tn(le,_e,De,Ue){var Be=[],qe=[],Mt=0,mt=Math.min(le.length,_e.length)-1;for(le[mt]<le[0]&&(le=le.slice().reverse(),_e=_e.slice().reverse());++Mt<=mt;)Be.push(De(le[Mt-1],le[Mt])),qe.push(Ue(_e[Mt-1],_e[Mt]));return function(Ot){var er=w.bisect(le,Ot,1,mt)-1;return qe[er](Be[er](Ot))}}w.scale.linear=function(){return Vn([0,1],[0,1],yo,!1)};function Vn(le,_e,De,Ue){var Be,qe;function Mt(){var Ot=Math.min(le.length,_e.length)>2?Tn:wn,er=Ue?Yu:vf;return Be=Ot(le,_e,er,De),qe=Ot(_e,le,er,yo),mt}function mt(Ot){return Be(Ot)}return mt.invert=function(Ot){return qe(Ot)},mt.domain=function(Ot){return arguments.length?(le=Ot.map(Number),Mt()):le},mt.range=function(Ot){return arguments.length?(_e=Ot,Mt()):_e},mt.rangeRound=function(Ot){return mt.range(Ot).interpolate(Vu)},mt.clamp=function(Ot){return arguments.length?(Ue=Ot,Mt()):Ue},mt.interpolate=function(Ot){return arguments.length?(De=Ot,Mt()):De},mt.ticks=function(Ot){return Ha(le,Ot)},mt.tickFormat=function(Ot,er){return d3_scale_linearTickFormat(le,Ot,er)},mt.nice=function(Ot){return Xn(le,Ot),Mt()},mt.copy=function(){return Vn(le,_e,De,Ue)},Mt()}function On(le,_e){return w.rebind(le,_e,"range","rangeRound","interpolate","clamp")}function Xn(le,_e){return Pn(le,zn(aa(le,_e)[2])),Pn(le,zn(aa(le,_e)[2])),le}function aa(le,_e){_e==null&&(_e=10);var De=Nr(le),Ue=De[1]-De[0],Be=Math.pow(10,Math.floor(Math.log(Ue/_e)/Math.LN10)),qe=_e/Ue*Be;return qe<=.15?Be*=10:qe<=.35?Be*=5:qe<=.75&&(Be*=2),De[0]=Math.ceil(De[0]/Be)*Be,De[1]=Math.floor(De[1]/Be)*Be+Be*.5,De[2]=Be,De}function Ha(le,_e){return w.range.apply(w,aa(le,_e))}w.scale.log=function(){return Ia(w.scale.linear().domain([0,1]),10,!0,[1,10])};function Ia(le,_e,De,Ue){function Be(mt){return(De?Math.log(mt<0?0:mt):-Math.log(mt>0?0:-mt))/Math.log(_e)}function qe(mt){return De?Math.pow(_e,mt):-Math.pow(_e,-mt)}function Mt(mt){return le(Be(mt))}return Mt.invert=function(mt){return qe(le.invert(mt))},Mt.domain=function(mt){return arguments.length?(De=mt[0]>=0,le.domain((Ue=mt.map(Number)).map(Be)),Mt):Ue},Mt.base=function(mt){return arguments.length?(_e=+mt,le.domain(Ue.map(Be)),Mt):_e},Mt.nice=function(){var mt=Pn(Ue.map(Be),De?Math:Ga);return le.domain(mt),Ue=mt.map(qe),Mt},Mt.ticks=function(){var mt=Nr(Ue),Ot=[],er=mt[0],or=mt[1],sr=Math.floor(Be(er)),Lr=Math.ceil(Be(or)),nn=_e%1?2:_e;if(isFinite(Lr-sr)){if(De){for(;sr<Lr;sr++)for(var pn=1;pn<nn;pn++)Ot.push(qe(sr)*pn);Ot.push(qe(sr))}else for(Ot.push(qe(sr));sr++<Lr;)for(var pn=nn-1;pn>0;pn--)Ot.push(qe(sr)*pn);for(sr=0;Ot[sr]<er;sr++);for(Lr=Ot.length;Ot[Lr-1]>or;Lr--);Ot=Ot.slice(sr,Lr)}return Ot},Mt.copy=function(){return Ia(le.copy(),_e,De,Ue)},On(Mt,le)}var Ga={floor:function(le){return-Math.ceil(-le)},ceil:function(le){return-Math.floor(-le)}};w.scale.pow=function(){return Ya(w.scale.linear(),1,[0,1])};function Ya(le,_e,De){var Ue=ra(_e),Be=ra(1/_e);function qe(Mt){return le(Ue(Mt))}return qe.invert=function(Mt){return Be(le.invert(Mt))},qe.domain=function(Mt){return arguments.length?(le.domain((De=Mt.map(Number)).map(Ue)),qe):De},qe.ticks=function(Mt){return Ha(De,Mt)},qe.tickFormat=function(Mt,mt){return d3_scale_linearTickFormat(De,Mt,mt)},qe.nice=function(Mt){return qe.domain(Xn(De,Mt))},qe.exponent=function(Mt){return arguments.length?(Ue=ra(_e=Mt),Be=ra(1/_e),le.domain(De.map(Ue)),qe):_e},qe.copy=function(){return Ya(le.copy(),_e,De)},On(qe,le)}function ra(le){return function(_e){return _e<0?-Math.pow(-_e,le):Math.pow(_e,le)}}w.scale.sqrt=function(){return w.scale.pow().exponent(.5)},w.scale.ordinal=function(){return ma([],{t:"range",a:[[]]})};function ma(le,_e){var De,Ue,Be;function qe(mt){return Ue[((De.get(mt)||(_e.t==="range"?De.set(mt,le.push(mt)):NaN))-1)%Ue.length]}function Mt(mt,Ot){return w.range(le.length).map(function(er){return mt+Ot*er})}return qe.domain=function(mt){if(!arguments.length)return le;le=[],De=new A;for(var Ot=-1,er=mt.length,or;++Ot<er;)De.has(or=mt[Ot])||De.set(or,le.push(or));return qe[_e.t].apply(qe,_e.a)},qe.range=function(mt){return arguments.length?(Ue=mt,Be=0,_e={t:"range",a:arguments},qe):Ue},qe.rangePoints=function(mt,Ot){arguments.length<2&&(Ot=0);var er=mt[0],or=mt[1],sr=le.length<2?(er=(er+or)/2,0):(or-er)/(le.length-1+Ot);return Ue=Mt(er+sr*Ot/2,sr),Be=0,_e={t:"rangePoints",a:arguments},qe},qe.rangeRoundPoints=function(mt,Ot){arguments.length<2&&(Ot=0);var er=mt[0],or=mt[1],sr=le.length<2?(er=or=Math.round((er+or)/2),0):(or-er)/(le.length-1+Ot)|0;return Ue=Mt(er+Math.round(sr*Ot/2+(or-er-(le.length-1+Ot)*sr)/2),sr),Be=0,_e={t:"rangeRoundPoints",a:arguments},qe},qe.rangeBands=function(mt,Ot,er){arguments.length<2&&(Ot=0),arguments.length<3&&(er=Ot);var or=mt[1]<mt[0],sr=mt[or-0],Lr=mt[1-or],nn=(Lr-sr)/(le.length-Ot+2*er);return Ue=Mt(sr+nn*er,nn),or&&Ue.reverse(),Be=nn*(1-Ot),_e={t:"rangeBands",a:arguments},qe},qe.rangeRoundBands=function(mt,Ot,er){arguments.length<2&&(Ot=0),arguments.length<3&&(er=Ot);var or=mt[1]<mt[0],sr=mt[or-0],Lr=mt[1-or],nn=Math.floor((Lr-sr)/(le.length-Ot+2*er));return Ue=Mt(sr+Math.round((Lr-sr-(le.length-Ot)*nn)/2),nn),or&&Ue.reverse(),Be=Math.round(nn*(1-Ot)),_e={t:"rangeRoundBands",a:arguments},qe},qe.rangeBand=function(){return Be},qe.rangeExtent=function(){return Nr(_e.a[0])},qe.copy=function(){return ma(le,_e)},qe.domain(le)}w.scale.category10=function(){return w.scale.ordinal().range(Ja)},w.scale.category20=function(){return w.scale.ordinal().range(ai)},w.scale.category20b=function(){return w.scale.ordinal().range(Mi)},w.scale.category20c=function(){return w.scale.ordinal().range(Si)};var Ja=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Rr),ai=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(Rr),Mi=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(Rr),Si=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Rr);w.scale.quantile=function(){return Ci([],[])};function Ci(le,_e){var De;function Ue(){var qe=0,Mt=_e.length;for(De=[];++qe<Mt;)De[qe-1]=w.quantile(le,qe/Mt);return Be}function Be(qe){if(!isNaN(qe=+qe))return _e[w.bisect(De,qe)]}return Be.domain=function(qe){return arguments.length?(le=qe.map(y).filter(d).sort(o),Ue()):le},Be.range=function(qe){return arguments.length?(_e=qe,Ue()):_e},Be.quantiles=function(){return De},Be.invertExtent=function(qe){return qe=_e.indexOf(qe),qe<0?[NaN,NaN]:[qe>0?De[qe-1]:le[0],qe<De.length?De[qe]:le[le.length-1]]},Be.copy=function(){return Ci(le,_e)},Ue()}w.scale.quantize=function(){return Fi(0,1,[0,1])};function Fi(le,_e,De){var Ue,Be;function qe(mt){return De[Math.max(0,Math.min(Be,Math.floor(Ue*(mt-le))))]}function Mt(){return Ue=De.length/(_e-le),Be=De.length-1,qe}return qe.domain=function(mt){return arguments.length?(le=+mt[0],_e=+mt[mt.length-1],Mt()):[le,_e]},qe.range=function(mt){return arguments.length?(De=mt,Mt()):De},qe.invertExtent=function(mt){return mt=De.indexOf(mt),mt=mt<0?NaN:mt/Ue+le,[mt,mt+1/Ue]},qe.copy=function(){return Fi(le,_e,De)},Mt()}w.scale.threshold=function(){return pi([.5],[0,1])};function pi(le,_e){function De(Ue){if(Ue<=Ue)return _e[w.bisect(le,Ue)]}return De.domain=function(Ue){return arguments.length?(le=Ue,De):le},De.range=function(Ue){return arguments.length?(_e=Ue,De):_e},De.invertExtent=function(Ue){return Ue=_e.indexOf(Ue),[le[Ue-1],le[Ue]]},De.copy=function(){return pi(le,_e)},De}w.scale.identity=function(){return Lo([0,1])};function Lo(le){function _e(De){return+De}return _e.invert=_e,_e.domain=_e.range=function(De){return arguments.length?(le=De.map(_e),_e):le},_e.ticks=function(De){return Ha(le,De)},_e.tickFormat=function(De,Ue){return d3_scale_linearTickFormat(le,De,Ue)},_e.copy=function(){return Lo(le)},_e}w.svg={};function ho(){return 0}w.svg.arc=function(){var le=xa,_e=ki,De=ho,Ue=ni,Be=_o,qe=Eo,Mt=Cs;function mt(){var er=Math.max(0,+le.apply(this,arguments)),or=Math.max(0,+_e.apply(this,arguments)),sr=Be.apply(this,arguments)-tt,Lr=qe.apply(this,arguments)-tt,nn=Math.abs(Lr-sr),pn=sr>Lr?0:1;if(or<er&&(zr=or,or=er,er=zr),nn>=Qe)return Ot(or,pn)+(er?Ot(er,1-pn):"")+"Z";var zr,Wr,qr,fn,hn=0,tn=0,jn,la,Ea,ca,Ra,pa,ja,Oa,ii=[];if((fn=(+Mt.apply(this,arguments)||0)/2)&&(qr=Ue===ni?Math.sqrt(er*er+or*or):+Ue.apply(this,arguments),pn||(tn*=-1),or&&(tn=jt(qr/or*Math.sin(fn))),er&&(hn=jt(qr/er*Math.sin(fn)))),or){jn=or*Math.cos(sr+tn),la=or*Math.sin(sr+tn),Ea=or*Math.cos(Lr-tn),ca=or*Math.sin(Lr-tn);var Ei=Math.abs(Lr-sr-2*tn)<=Me?0:1;if(tn&&Xs(jn,la,Ea,ca)===pn^Ei){var Ao=(sr+Lr)/2;jn=or*Math.cos(Ao),la=or*Math.sin(Ao),Ea=ca=null}}else jn=la=0;if(er){Ra=er*Math.cos(Lr-hn),pa=er*Math.sin(Lr-hn),ja=er*Math.cos(sr+hn),Oa=er*Math.sin(sr+hn);var ji=Math.abs(sr-Lr+2*hn)<=Me?0:1;if(hn&&Xs(Ra,pa,ja,Oa)===1-pn^ji){var ga=(sr+Lr)/2;Ra=er*Math.cos(ga),pa=er*Math.sin(ga),ja=Oa=null}}else Ra=pa=0;if(nn>ot&&(zr=Math.min(Math.abs(or-er)/2,+De.apply(this,arguments)))>.001){Wr=er<or^pn?0:1;var hi=zr,qa=zr;if(nn<Me){var Oi=ja==null?[Ra,pa]:Ea==null?[jn,la]:$a([jn,la],[ja,Oa],[Ea,ca],[Ra,pa]),di=jn-Oi[0],xo=la-Oi[1],fo=Ea-Oi[0],ko=ca-Oi[1],us=1/Math.sin(Math.acos((di*fo+xo*ko)/(Math.sqrt(di*di+xo*xo)*Math.sqrt(fo*fo+ko*ko)))/2),qo=Math.sqrt(Oi[0]*Oi[0]+Oi[1]*Oi[1]);qa=Math.min(zr,(er-qo)/(us-1)),hi=Math.min(zr,(or-qo)/(us+1))}if(Ea!=null){var fs=Qo(ja==null?[Ra,pa]:[ja,Oa],[jn,la],or,hi,pn),ro=Qo([Ea,ca],[Ra,pa],or,hi,pn);zr===hi?ii.push("M",fs[0],"A",hi,",",hi," 0 0,",Wr," ",fs[1],"A",or,",",or," 0 ",1-pn^Xs(fs[1][0],fs[1][1],ro[1][0],ro[1][1]),",",pn," ",ro[1],"A",hi,",",hi," 0 0,",Wr," ",ro[0]):ii.push("M",fs[0],"A",hi,",",hi," 0 1,",Wr," ",ro[0])}else ii.push("M",jn,",",la);if(ja!=null){var Qi=Qo([jn,la],[ja,Oa],er,-qa,pn),Ua=Qo([Ra,pa],Ea==null?[jn,la]:[Ea,ca],er,-qa,pn);zr===qa?ii.push("L",Ua[0],"A",qa,",",qa," 0 0,",Wr," ",Ua[1],"A",er,",",er," 0 ",pn^Xs(Ua[1][0],Ua[1][1],Qi[1][0],Qi[1][1]),",",1-pn," ",Qi[1],"A",qa,",",qa," 0 0,",Wr," ",Qi[0]):ii.push("L",Ua[0],"A",qa,",",qa," 0 0,",Wr," ",Qi[0])}else ii.push("L",Ra,",",pa)}else ii.push("M",jn,",",la),Ea!=null&&ii.push("A",or,",",or," 0 ",Ei,",",pn," ",Ea,",",ca),ii.push("L",Ra,",",pa),ja!=null&&ii.push("A",er,",",er," 0 ",ji,",",1-pn," ",ja,",",Oa);return ii.push("Z"),ii.join("")}function Ot(er,or){return"M0,"+er+"A"+er+","+er+" 0 1,"+or+" 0,"+-er+"A"+er+","+er+" 0 1,"+or+" 0,"+er}return mt.innerRadius=function(er){return arguments.length?(le=it(er),mt):le},mt.outerRadius=function(er){return arguments.length?(_e=it(er),mt):_e},mt.cornerRadius=function(er){return arguments.length?(De=it(er),mt):De},mt.padRadius=function(er){return arguments.length?(Ue=er==ni?ni:it(er),mt):Ue},mt.startAngle=function(er){return arguments.length?(Be=it(er),mt):Be},mt.endAngle=function(er){return arguments.length?(qe=it(er),mt):qe},mt.padAngle=function(er){return arguments.length?(Mt=it(er),mt):Mt},mt.centroid=function(){var er=(+le.apply(this,arguments)+ +_e.apply(this,arguments))/2,or=(+Be.apply(this,arguments)+ +qe.apply(this,arguments))/2-tt;return[Math.cos(or)*er,Math.sin(or)*er]},mt};var ni="auto";function xa(le){return le.innerRadius}function ki(le){return le.outerRadius}function _o(le){return le.startAngle}function Eo(le){return le.endAngle}function Cs(le){return le&&le.padAngle}function Xs(le,_e,De,Ue){return(le-De)*_e-(_e-Ue)*le>0?0:1}function Qo(le,_e,De,Ue,Be){var qe=le[0]-_e[0],Mt=le[1]-_e[1],mt=(Be?Ue:-Ue)/Math.sqrt(qe*qe+Mt*Mt),Ot=mt*Mt,er=-mt*qe,or=le[0]+Ot,sr=le[1]+er,Lr=_e[0]+Ot,nn=_e[1]+er,pn=(or+Lr)/2,zr=(sr+nn)/2,Wr=Lr-or,qr=nn-sr,fn=Wr*Wr+qr*qr,hn=De-Ue,tn=or*nn-Lr*sr,jn=(qr<0?-1:1)*Math.sqrt(Math.max(0,hn*hn*fn-tn*tn)),la=(tn*qr-Wr*jn)/fn,Ea=(-tn*Wr-qr*jn)/fn,ca=(tn*qr+Wr*jn)/fn,Ra=(-tn*Wr+qr*jn)/fn,pa=la-pn,ja=Ea-zr,Oa=ca-pn,ii=Ra-zr;return pa*pa+ja*ja>Oa*Oa+ii*ii&&(la=ca,Ea=Ra),[[la-Ot,Ea-er],[la*De/hn,Ea*De/hn]]}function wl(){return!0}function Ns(le){var _e=Zn,De=ba,Ue=wl,Be=Po,qe=Be.key,Mt=.7;function mt(Ot){var er=[],or=[],sr=-1,Lr=Ot.length,nn,pn=it(_e),zr=it(De);function Wr(){er.push("M",Be(le(or),Mt))}for(;++sr<Lr;)Ue.call(this,nn=Ot[sr],sr)?or.push([+pn.call(this,nn,sr),+zr.call(this,nn,sr)]):or.length&&(Wr(),or=[]);return or.length&&Wr(),er.length?er.join(""):null}return mt.x=function(Ot){return arguments.length?(_e=Ot,mt):_e},mt.y=function(Ot){return arguments.length?(De=Ot,mt):De},mt.defined=function(Ot){return arguments.length?(Ue=Ot,mt):Ue},mt.interpolate=function(Ot){return arguments.length?(typeof Ot=="function"?qe=Be=Ot:qe=(Be=ks.get(Ot)||Po).key,mt):qe},mt.tension=function(Ot){return arguments.length?(Mt=Ot,mt):Mt},mt}w.svg.line=function(){return Ns(D)};var ks=w.map({linear:Po,"linear-closed":pu,step:ku,"step-before":Ls,"step-after":Ju,basis:Zs,"basis-open":Df,"basis-closed":yf,bundle:mf,cardinal:df,"cardinal-open":du,"cardinal-closed":uc,monotone:Ze});ks.forEach(function(le,_e){_e.key=le,_e.closed=/-closed$/.test(le)});function Po(le){return le.length>1?le.join("L"):le+"Z"}function pu(le){return le.join("L")+"Z"}function ku(le){for(var _e=0,De=le.length,Ue=le[0],Be=[Ue[0],",",Ue[1]];++_e<De;)Be.push("H",(Ue[0]+(Ue=le[_e])[0])/2,"V",Ue[1]);return De>1&&Be.push("H",Ue[0]),Be.join("")}function Ls(le){for(var _e=0,De=le.length,Ue=le[0],Be=[Ue[0],",",Ue[1]];++_e<De;)Be.push("V",(Ue=le[_e])[1],"H",Ue[0]);return Be.join("")}function Ju(le){for(var _e=0,De=le.length,Ue=le[0],Be=[Ue[0],",",Ue[1]];++_e<De;)Be.push("H",(Ue=le[_e])[0],"V",Ue[1]);return Be.join("")}function du(le,_e){return le.length<4?Po(le):le[1]+Qu(le.slice(1,-1),gf(le,_e))}function uc(le,_e){return le.length<3?pu(le):le[0]+Qu((le.push(le[0]),le),gf([le[le.length-2]].concat(le,[le[1]]),_e))}function df(le,_e){return le.length<3?Po(le):le[0]+Qu(le,gf(le,_e))}function Qu(le,_e){if(_e.length<1||le.length!=_e.length&&le.length!=_e.length+2)return Po(le);var De=le.length!=_e.length,Ue="",Be=le[0],qe=le[1],Mt=_e[0],mt=Mt,Ot=1;if(De&&(Ue+="Q"+(qe[0]-Mt[0]*2/3)+","+(qe[1]-Mt[1]*2/3)+","+qe[0]+","+qe[1],Be=le[1],Ot=2),_e.length>1){mt=_e[1],qe=le[Ot],Ot++,Ue+="C"+(Be[0]+Mt[0])+","+(Be[1]+Mt[1])+","+(qe[0]-mt[0])+","+(qe[1]-mt[1])+","+qe[0]+","+qe[1];for(var er=2;er<_e.length;er++,Ot++)qe=le[Ot],mt=_e[er],Ue+="S"+(qe[0]-mt[0])+","+(qe[1]-mt[1])+","+qe[0]+","+qe[1]}if(De){var or=le[Ot];Ue+="Q"+(qe[0]+mt[0]*2/3)+","+(qe[1]+mt[1]*2/3)+","+or[0]+","+or[1]}return Ue}function gf(le,_e){for(var De=[],Ue=(1-_e)/2,Be,qe=le[0],Mt=le[1],mt=1,Ot=le.length;++mt<Ot;)Be=qe,qe=Mt,Mt=le[mt],De.push([Ue*(Mt[0]-Be[0]),Ue*(Mt[1]-Be[1])]);return De}function Zs(le){if(le.length<3)return Po(le);var _e=1,De=le.length,Ue=le[0],Be=Ue[0],qe=Ue[1],Mt=[Be,Be,Be,(Ue=le[1])[0]],mt=[qe,qe,qe,Ue[1]],Ot=[Be,",",qe,"L",$o(Bs,Mt),",",$o(Bs,mt)];for(le.push(le[De-1]);++_e<=De;)Ue=le[_e],Mt.shift(),Mt.push(Ue[0]),mt.shift(),mt.push(Ue[1]),$u(Ot,Mt,mt);return le.pop(),Ot.push("L",Ue),Ot.join("")}function Df(le){if(le.length<4)return Po(le);for(var _e=[],De=-1,Ue=le.length,Be,qe=[0],Mt=[0];++De<3;)Be=le[De],qe.push(Be[0]),Mt.push(Be[1]);for(_e.push($o(Bs,qe)+","+$o(Bs,Mt)),--De;++De<Ue;)Be=le[De],qe.shift(),qe.push(Be[0]),Mt.shift(),Mt.push(Be[1]),$u(_e,qe,Mt);return _e.join("")}function yf(le){for(var _e,De=-1,Ue=le.length,Be=Ue+4,qe,Mt=[],mt=[];++De<4;)qe=le[De%Ue],Mt.push(qe[0]),mt.push(qe[1]);for(_e=[$o(Bs,Mt),",",$o(Bs,mt)],--De;++De<Be;)qe=le[De%Ue],Mt.shift(),Mt.push(qe[0]),mt.shift(),mt.push(qe[1]),$u(_e,Mt,mt);return _e.join("")}function mf(le,_e){var De=le.length-1;if(De)for(var Ue=le[0][0],Be=le[0][1],qe=le[De][0]-Ue,Mt=le[De][1]-Be,mt=-1,Ot,er;++mt<=De;)Ot=le[mt],er=mt/De,Ot[0]=_e*Ot[0]+(1-_e)*(Ue+er*qe),Ot[1]=_e*Ot[1]+(1-_e)*(Be+er*Mt);return Zs(le)}function $o(le,_e){return le[0]*_e[0]+le[1]*_e[1]+le[2]*_e[2]+le[3]*_e[3]}var xf=[0,2/3,1/3,0],Yf=[0,1/3,2/3,0],Bs=[0,1/6,2/3,1/6];function $u(le,_e,De){le.push("C",$o(xf,_e),",",$o(xf,De),",",$o(Yf,_e),",",$o(Yf,De),",",$o(Bs,_e),",",$o(Bs,De))}function qu(le,_e){return(_e[1]-le[1])/(_e[0]-le[0])}function bf(le){for(var _e=0,De=le.length-1,Ue=[],Be=le[0],qe=le[1],Mt=Ue[0]=qu(Be,qe);++_e<De;)Ue[_e]=(Mt+(Mt=qu(Be=qe,qe=le[_e+1])))/2;return Ue[_e]=Mt,Ue}function ze(le){for(var _e=[],De,Ue,Be,qe,Mt=bf(le),mt=-1,Ot=le.length-1;++mt<Ot;)De=qu(le[mt],le[mt+1]),l(De)<ot?Mt[mt]=Mt[mt+1]=0:(Ue=Mt[mt]/De,Be=Mt[mt+1]/De,qe=Ue*Ue+Be*Be,qe>9&&(qe=De*3/Math.sqrt(qe),Mt[mt]=qe*Ue,Mt[mt+1]=qe*Be));for(mt=-1;++mt<=Ot;)qe=(le[Math.min(Ot,mt+1)][0]-le[Math.max(0,mt-1)][0])/(6*(1+Mt[mt]*Mt[mt])),_e.push([qe||0,Mt[mt]*qe||0]);return _e}function Ze(le){return le.length<3?Po(le):le[0]+Qu(le,ze(le))}w.svg.line.radial=function(){var le=Ns(at);return le.radius=le.x,delete le.x,le.angle=le.y,delete le.y,le};function at(le){for(var _e,De=-1,Ue=le.length,Be,qe;++De<Ue;)_e=le[De],Be=_e[0],qe=_e[1]-tt,_e[0]=Be*Math.cos(qe),_e[1]=Be*Math.sin(qe);return le}function ct(le){var _e=Zn,De=Zn,Ue=0,Be=ba,qe=wl,Mt=Po,mt=Mt.key,Ot=Mt,er="L",or=.7;function sr(Lr){var nn=[],pn=[],zr=[],Wr=-1,qr=Lr.length,fn,hn=it(_e),tn=it(Ue),jn=_e===De?function(){return Ea}:it(De),la=Ue===Be?function(){return ca}:it(Be),Ea,ca;function Ra(){nn.push("M",Mt(le(zr),or),er,Ot(le(pn.reverse()),or),"Z")}for(;++Wr<qr;)qe.call(this,fn=Lr[Wr],Wr)?(pn.push([Ea=+hn.call(this,fn,Wr),ca=+tn.call(this,fn,Wr)]),zr.push([+jn.call(this,fn,Wr),+la.call(this,fn,Wr)])):pn.length&&(Ra(),pn=[],zr=[]);return pn.length&&Ra(),nn.length?nn.join(""):null}return sr.x=function(Lr){return arguments.length?(_e=De=Lr,sr):De},sr.x0=function(Lr){return arguments.length?(_e=Lr,sr):_e},sr.x1=function(Lr){return arguments.length?(De=Lr,sr):De},sr.y=function(Lr){return arguments.length?(Ue=Be=Lr,sr):Be},sr.y0=function(Lr){return arguments.length?(Ue=Lr,sr):Ue},sr.y1=function(Lr){return arguments.length?(Be=Lr,sr):Be},sr.defined=function(Lr){return arguments.length?(qe=Lr,sr):qe},sr.interpolate=function(Lr){return arguments.length?(typeof Lr=="function"?mt=Mt=Lr:mt=(Mt=ks.get(Lr)||Po).key,Ot=Mt.reverse||Mt,er=Mt.closed?"M":"L",sr):mt},sr.tension=function(Lr){return arguments.length?(or=Lr,sr):or},sr}Ls.reverse=Ju,Ju.reverse=Ls,w.svg.area=function(){return ct(D)},w.svg.area.radial=function(){var le=ct(at);return le.radius=le.x,delete le.x,le.innerRadius=le.x0,delete le.x0,le.outerRadius=le.x1,delete le.x1,le.angle=le.y,delete le.y,le.startAngle=le.y0,delete le.y0,le.endAngle=le.y1,delete le.y1,le};function Et(le){return le.source}function At(le){return le.target}w.svg.chord=function(){var le=Et,_e=At,De=It,Ue=_o,Be=Eo;function qe(or,sr){var Lr=Mt(this,le,or,sr),nn=Mt(this,_e,or,sr);return"M"+Lr.p0+Ot(Lr.r,Lr.p1,Lr.a1-Lr.a0)+(mt(Lr,nn)?er(Lr.r,Lr.p1,Lr.r,Lr.p0):er(Lr.r,Lr.p1,nn.r,nn.p0)+Ot(nn.r,nn.p1,nn.a1-nn.a0)+er(nn.r,nn.p1,Lr.r,Lr.p0))+"Z"}function Mt(or,sr,Lr,nn){var pn=sr.call(or,Lr,nn),zr=De.call(or,pn,nn),Wr=Ue.call(or,pn,nn)-tt,qr=Be.call(or,pn,nn)-tt;return{r:zr,a0:Wr,a1:qr,p0:[zr*Math.cos(Wr),zr*Math.sin(Wr)],p1:[zr*Math.cos(qr),zr*Math.sin(qr)]}}function mt(or,sr){return or.a0==sr.a0&&or.a1==sr.a1}function Ot(or,sr,Lr){return"A"+or+","+or+" 0 "+ +(Lr>Me)+",1 "+sr}function er(or,sr,Lr,nn){return"Q 0,0 "+nn}return qe.radius=function(or){return arguments.length?(De=it(or),qe):De},qe.source=function(or){return arguments.length?(le=it(or),qe):le},qe.target=function(or){return arguments.length?(_e=it(or),qe):_e},qe.startAngle=function(or){return arguments.length?(Ue=it(or),qe):Ue},qe.endAngle=function(or){return arguments.length?(Be=it(or),qe):Be},qe};function It(le){return le.radius}w.svg.diagonal=function(){var le=Et,_e=At,De=gr;function Ue(Be,qe){var Mt=le.call(this,Be,qe),mt=_e.call(this,Be,qe),Ot=(Mt.y+mt.y)/2,er=[Mt,{x:Mt.x,y:Ot},{x:mt.x,y:Ot},mt];return er=er.map(De),"M"+er[0]+"C"+er[1]+" "+er[2]+" "+er[3]}return Ue.source=function(Be){return arguments.length?(le=it(Be),Ue):le},Ue.target=function(Be){return arguments.length?(_e=it(Be),Ue):_e},Ue.projection=function(Be){return arguments.length?(De=Be,Ue):De},Ue};function gr(le){return[le.x,le.y]}w.svg.diagonal.radial=function(){var le=w.svg.diagonal(),_e=gr,De=le.projection;return le.projection=function(Ue){return arguments.length?De(br(_e=Ue)):_e},le};function br(le){return function(){var _e=le.apply(this,arguments),De=_e[0],Ue=_e[1]-tt;return[De*Math.cos(Ue),De*Math.sin(Ue)]}}w.svg.symbol=function(){var le=Mr,_e=pr;function De(Ue,Be){return($r.get(le.call(this,Ue,Be))||Or)(_e.call(this,Ue,Be))}return De.type=function(Ue){return arguments.length?(le=it(Ue),De):le},De.size=function(Ue){return arguments.length?(_e=it(Ue),De):_e},De};function pr(){return 64}function Mr(){return"circle"}function Or(le){var _e=Math.sqrt(le/Me);return"M0,"+_e+"A"+_e+","+_e+" 0 1,1 0,"+-_e+"A"+_e+","+_e+" 0 1,1 0,"+_e+"Z"}var $r=w.map({circle:Or,cross:function(le){var _e=Math.sqrt(le/5)/2;return"M"+-3*_e+","+-_e+"H"+-_e+"V"+-3*_e+"H"+_e+"V"+-_e+"H"+3*_e+"V"+_e+"H"+_e+"V"+3*_e+"H"+-_e+"V"+_e+"H"+-3*_e+"Z"},diamond:function(le){var _e=Math.sqrt(le/(2*Sn)),De=_e*Sn;return"M0,"+-_e+"L"+De+",0 0,"+_e+" "+-De+",0Z"},square:function(le){var _e=Math.sqrt(le)/2;return"M"+-_e+","+-_e+"L"+_e+","+-_e+" "+_e+","+_e+" "+-_e+","+_e+"Z"},"triangle-down":function(le){var _e=Math.sqrt(le/on),De=_e*on/2;return"M0,"+De+"L"+_e+","+-De+" "+-_e+","+-De+"Z"},"triangle-up":function(le){var _e=Math.sqrt(le/on),De=_e*on/2;return"M0,"+-De+"L"+_e+","+De+" "+-_e+","+De+"Z"}});w.svg.symbolTypes=$r.keys();var on=Math.sqrt(3),Sn=Math.tan(30*St);ne.transition=function(le){for(var _e=Qa||++ri,De=fi(le),Ue=[],Be,qe,Mt=si||{time:Date.now(),ease:rl,delay:0,duration:250},mt=-1,Ot=this.length;++mt<Ot;){Ue.push(Be=[]);for(var er=this[mt],or=-1,sr=er.length;++or<sr;)(qe=er[or])&&to(qe,or,De,_e,Mt),Be.push(qe)}return _a(Ue,De,_e)},ne.interrupt=function(le){return this.each(le==null?Nn:Qn(fi(le)))};var Nn=Qn(fi());function Qn(le){return function(){var _e,De,Ue;(_e=this[le])&&(Ue=_e[De=_e.active])&&(Ue.timer.c=null,Ue.timer.t=NaN,--_e.count?delete _e[De]:delete this[le],_e.active+=.5,Ue.event&&Ue.event.interrupt.call(this,this.__data__,Ue.index))}}function _a(le,_e,De){return K(le,Ma),le.namespace=_e,le.id=De,le}var Ma=[],ri=0,Qa,si;Ma.call=ne.call,Ma.empty=ne.empty,Ma.node=ne.node,Ma.size=ne.size,w.transition=function(le,_e){return le&&le.transition?Qa?le.transition(_e):le:w.selection().transition(le)},w.transition.prototype=Ma,Ma.select=function(le){var _e=this.id,De=this.namespace,Ue=[],Be,qe,Mt;le=Z(le);for(var mt=-1,Ot=this.length;++mt<Ot;){Ue.push(Be=[]);for(var er=this[mt],or=-1,sr=er.length;++or<sr;)(Mt=er[or])&&(qe=le.call(Mt,Mt.__data__,or,mt))?("__data__"in Mt&&(qe.__data__=Mt.__data__),to(qe,or,De,_e,Mt[De][_e]),Be.push(qe)):Be.push(null)}return _a(Ue,De,_e)},Ma.selectAll=function(le){var _e=this.id,De=this.namespace,Ue=[],Be,qe,Mt,mt,Ot;le=q(le);for(var er=-1,or=this.length;++er<or;)for(var sr=this[er],Lr=-1,nn=sr.length;++Lr<nn;)if(Mt=sr[Lr]){Ot=Mt[De][_e],qe=le.call(Mt,Mt.__data__,Lr,er),Ue.push(Be=[]);for(var pn=-1,zr=qe.length;++pn<zr;)(mt=qe[pn])&&to(mt,pn,De,_e,Ot),Be.push(mt)}return _a(Ue,De,_e)},Ma.filter=function(le){var _e=[],De,Ue,Be;typeof le!="function"&&(le=we(le));for(var qe=0,Mt=this.length;qe<Mt;qe++){_e.push(De=[]);for(var Ue=this[qe],mt=0,Ot=Ue.length;mt<Ot;mt++)(Be=Ue[mt])&&le.call(Be,Be.__data__,mt,qe)&&De.push(Be)}return _a(_e,this.namespace,this.id)},Ma.tween=function(le,_e){var De=this.id,Ue=this.namespace;return arguments.length<2?this.node()[Ue][De].tween.get(le):Ke(this,_e==null?function(Be){Be[Ue][De].tween.remove(le)}:function(Be){Be[Ue][De].tween.set(le,_e)})};function wi(le,_e,De,Ue){var Be=le.id,qe=le.namespace;return Ke(le,typeof De=="function"?function(Mt,mt,Ot){Mt[qe][Be].tween.set(_e,Ue(De.call(Mt,Mt.__data__,mt,Ot)))}:(De=Ue(De),function(Mt){Mt[qe][Be].tween.set(_e,De)}))}Ma.attr=function(le,_e){if(arguments.length<2){for(_e in le)this.attr(_e,le[_e]);return this}var De=le=="transform"?fu:yo,Ue=w.ns.qualify(le);function Be(){this.removeAttribute(Ue)}function qe(){this.removeAttributeNS(Ue.space,Ue.local)}function Mt(Ot){return Ot==null?Be:(Ot+="",function(){var er=this.getAttribute(Ue),or;return er!==Ot&&(or=De(er,Ot),function(sr){this.setAttribute(Ue,or(sr))})})}function mt(Ot){return Ot==null?qe:(Ot+="",function(){var er=this.getAttributeNS(Ue.space,Ue.local),or;return er!==Ot&&(or=De(er,Ot),function(sr){this.setAttributeNS(Ue.space,Ue.local,or(sr))})})}return wi(this,"attr."+le,_e,Ue.local?mt:Mt)},Ma.attrTween=function(le,_e){var De=w.ns.qualify(le);function Ue(qe,Mt){var mt=_e.call(this,qe,Mt,this.getAttribute(De));return mt&&function(Ot){this.setAttribute(De,mt(Ot))}}function Be(qe,Mt){var mt=_e.call(this,qe,Mt,this.getAttributeNS(De.space,De.local));return mt&&function(Ot){this.setAttributeNS(De.space,De.local,mt(Ot))}}return this.tween("attr."+le,De.local?Be:Ue)},Ma.style=function(le,_e,De){var Ue=arguments.length;if(Ue<3){if(typeof le!="string"){Ue<2&&(_e="");for(De in le)this.style(De,le[De],_e);return this}De=""}function Be(){this.style.removeProperty(le)}function qe(Mt){return Mt==null?Be:(Mt+="",function(){var mt=a(this).getComputedStyle(this,null).getPropertyValue(le),Ot;return mt!==Mt&&(Ot=yo(mt,Mt),function(er){this.style.setProperty(le,Ot(er),De)})})}return wi(this,"style."+le,_e,qe)},Ma.styleTween=function(le,_e,De){arguments.length<3&&(De="");function Ue(Be,qe){var Mt=_e.call(this,Be,qe,a(this).getComputedStyle(this,null).getPropertyValue(le));return Mt&&function(mt){this.style.setProperty(le,Mt(mt),De)}}return this.tween("style."+le,Ue)},Ma.text=function(le){return wi(this,"text",le,mo)};function mo(le){return le==null&&(le=""),function(){this.textContent=le}}Ma.remove=function(){var le=this.namespace;return this.each("end.transition",function(){var _e;this[le].count<2&&(_e=this.parentNode)&&_e.removeChild(this)})},Ma.ease=function(le){var _e=this.id,De=this.namespace;return arguments.length<1?this.node()[De][_e].ease:(typeof le!="function"&&(le=w.ease.apply(w,arguments)),Ke(this,function(Ue){Ue[De][_e].ease=le}))},Ma.delay=function(le){var _e=this.id,De=this.namespace;return arguments.length<1?this.node()[De][_e].delay:Ke(this,typeof le=="function"?function(Ue,Be,qe){Ue[De][_e].delay=+le.call(Ue,Ue.__data__,Be,qe)}:(le=+le,function(Ue){Ue[De][_e].delay=le}))},Ma.duration=function(le){var _e=this.id,De=this.namespace;return arguments.length<1?this.node()[De][_e].duration:Ke(this,typeof le=="function"?function(Ue,Be,qe){Ue[De][_e].duration=Math.max(1,le.call(Ue,Ue.__data__,Be,qe))}:(le=Math.max(1,le),function(Ue){Ue[De][_e].duration=le}))},Ma.each=function(le,_e){var De=this.id,Ue=this.namespace;if(arguments.length<2){var Be=si,qe=Qa;try{Qa=De,Ke(this,function(Mt,mt,Ot){si=Mt[Ue][De],le.call(Mt,Mt.__data__,mt,Ot)})}finally{si=Be,Qa=qe}}else Ke(this,function(Mt){var mt=Mt[Ue][De];(mt.event||(mt.event=w.dispatch("start","end","interrupt"))).on(le,_e)});return this},Ma.transition=function(){for(var le=this.id,_e=++ri,De=this.namespace,Ue=[],Be,qe,Mt,mt,Ot=0,er=this.length;Ot<er;Ot++){Ue.push(Be=[]);for(var qe=this[Ot],or=0,sr=qe.length;or<sr;or++)(Mt=qe[or])&&(mt=Mt[De][le],to(Mt,or,De,_e,{time:mt.time,ease:mt.ease,delay:mt.delay+mt.duration,duration:mt.duration})),Be.push(Mt)}return _a(Ue,De,_e)};function fi(le){return le==null?"__transition__":"__transition_"+le+"__"}function to(le,_e,De,Ue,Be){var qe=le[De]||(le[De]={active:0,count:0}),Mt=qe[Ue],mt,Ot,er,or,sr;function Lr(zr){var Wr=Mt.delay;if(Ot.t=Wr+mt,Wr<=zr)return nn(zr-Wr);Ot.c=nn}function nn(zr){var Wr=qe.active,qr=qe[Wr];qr&&(qr.timer.c=null,qr.timer.t=NaN,--qe.count,delete qe[Wr],qr.event&&qr.event.interrupt.call(le,le.__data__,qr.index));for(var fn in qe)if(+fn<Ue){var hn=qe[fn];hn.timer.c=null,hn.timer.t=NaN,--qe.count,delete qe[fn]}Ot.c=pn,yn(function(){return Ot.c&&pn(zr||1)&&(Ot.c=null,Ot.t=NaN),1},0,mt),qe.active=Ue,Mt.event&&Mt.event.start.call(le,le.__data__,_e),sr=[],Mt.tween.forEach(function(tn,jn){(jn=jn.call(le,le.__data__,_e))&&sr.push(jn)}),or=Mt.ease,er=Mt.duration}function pn(zr){for(var Wr=zr/er,qr=or(Wr),fn=sr.length;fn>0;)sr[--fn].call(le,qr);if(Wr>=1)return Mt.event&&Mt.event.end.call(le,le.__data__,_e),--qe.count?delete qe[Ue]:delete le[De],1}Mt||(mt=Be.time,Ot=yn(Lr,0,mt),Mt=qe[Ue]={tween:new A,time:mt,timer:Ot,delay:Be.delay,duration:Be.duration,ease:Be.ease,index:_e},Be=null,++qe.count)}w.svg.axis=function(){var le=w.scale.linear(),_e=To,De=6,Ue=6,Be=3,qe=[10],Mt=null,mt;function Ot(er){er.each(function(){var or=w.select(this),sr=this.__chart__||le,Lr=this.__chart__=le.copy(),nn=Mt==null?Lr.ticks?Lr.ticks.apply(Lr,qe):Lr.domain():Mt,pn=mt==null?Lr.tickFormat?Lr.tickFormat.apply(Lr,qe):D:mt,zr=or.selectAll(".tick").data(nn,Lr),Wr=zr.enter().insert("g",".domain").attr("class","tick").style("opacity",ot),qr=w.transition(zr.exit()).style("opacity",ot).remove(),fn=w.transition(zr.order()).style("opacity",1),hn=Math.max(De,0)+Be,tn,jn=ln(Lr),la=or.selectAll(".domain").data([0]),Ea=(la.enter().append("path").attr("class","domain"),w.transition(la));Wr.append("line"),Wr.append("text");var ca=Wr.select("line"),Ra=fn.select("line"),pa=zr.select("text").text(pn),ja=Wr.select("text"),Oa=fn.select("text"),ii=_e==="top"||_e==="left"?-1:1,Ei,Ao,ji,ga;if(_e==="bottom"||_e==="top"?(tn=Li,Ei="x",ji="y",Ao="x2",ga="y2",pa.attr("dy",ii<0?"0em":".71em").style("text-anchor","middle"),Ea.attr("d","M"+jn[0]+","+ii*Ue+"V0H"+jn[1]+"V"+ii*Ue)):(tn=zi,Ei="y",ji="x",Ao="y2",ga="x2",pa.attr("dy",".32em").style("text-anchor",ii<0?"end":"start"),Ea.attr("d","M"+ii*Ue+","+jn[0]+"H0V"+jn[1]+"H"+ii*Ue)),ca.attr(ga,ii*De),ja.attr(ji,ii*hn),Ra.attr(Ao,0).attr(ga,ii*De),Oa.attr(Ei,0).attr(ji,ii*hn),Lr.rangeBand){var hi=Lr,qa=hi.rangeBand()/2;sr=Lr=function(Oi){return hi(Oi)+qa}}else sr.rangeBand?sr=Lr:qr.call(tn,Lr,sr);Wr.call(tn,sr,Lr),fn.call(tn,Lr,Lr)})}return Ot.scale=function(er){return arguments.length?(le=er,Ot):le},Ot.orient=function(er){return arguments.length?(_e=er in Io?er+"":To,Ot):_e},Ot.ticks=function(){return arguments.length?(qe=M(arguments),Ot):qe},Ot.tickValues=function(er){return arguments.length?(Mt=er,Ot):Mt},Ot.tickFormat=function(er){return arguments.length?(mt=er,Ot):mt},Ot.tickSize=function(er){var or=arguments.length;return or?(De=+er,Ue=+arguments[or-1],Ot):De},Ot.innerTickSize=function(er){return arguments.length?(De=+er,Ot):De},Ot.outerTickSize=function(er){return arguments.length?(Ue=+er,Ot):Ue},Ot.tickPadding=function(er){return arguments.length?(Be=+er,Ot):Be},Ot.tickSubdivide=function(){return arguments.length&&Ot},Ot};var To="bottom",Io={top:1,right:1,bottom:1,left:1};function Li(le,_e,De){le.attr("transform",function(Ue){var Be=_e(Ue);return"translate("+(isFinite(Be)?Be:De(Ue))+",0)"})}function zi(le,_e,De){le.attr("transform",function(Ue){var Be=_e(Ue);return"translate(0,"+(isFinite(Be)?Be:De(Ue))+")"})}w.svg.brush=function(){var le=re(or,"brushstart","brush","brushend"),_e=null,De=null,Ue=[0,0],Be=[0,0],qe,Mt,mt=!0,Ot=!0,er=Co[0];function or(zr){zr.each(function(){var Wr=w.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",pn).on("touchstart.brush",pn),qr=Wr.selectAll(".background").data([0]);qr.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),Wr.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var fn=Wr.selectAll(".resize").data(er,D);fn.exit().remove(),fn.enter().append("g").attr("class",function(la){return"resize "+la}).style("cursor",function(la){return Ps[la]}).append("rect").attr("x",function(la){return/[ew]$/.test(la)?-3:null}).attr("y",function(la){return/^[ns]/.test(la)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),fn.style("display",or.empty()?"none":null);var hn=w.transition(Wr),tn=w.transition(qr),jn;_e&&(jn=ln(_e),tn.attr("x",jn[0]).attr("width",jn[1]-jn[0]),Lr(hn)),De&&(jn=ln(De),tn.attr("y",jn[0]).attr("height",jn[1]-jn[0]),nn(hn)),sr(hn)})}or.event=function(zr){zr.each(function(){var Wr=le.of(this,arguments),qr={x:Ue,y:Be,i:qe,j:Mt},fn=this.__chart__||qr;this.__chart__=qr,Qa?w.select(this).transition().each("start.brush",function(){qe=fn.i,Mt=fn.j,Ue=fn.x,Be=fn.y,Wr({type:"brushstart"})}).tween("brush:brush",function(){var hn=uo(Ue,qr.x),tn=uo(Be,qr.y);return qe=Mt=null,function(jn){Ue=qr.x=hn(jn),Be=qr.y=tn(jn),Wr({type:"brush",mode:"resize"})}}).each("end.brush",function(){qe=qr.i,Mt=qr.j,Wr({type:"brush",mode:"resize"}),Wr({type:"brushend"})}):(Wr({type:"brushstart"}),Wr({type:"brush",mode:"resize"}),Wr({type:"brushend"}))})};function sr(zr){zr.selectAll(".resize").attr("transform",function(Wr){return"translate("+Ue[+/e$/.test(Wr)]+","+Be[+/^s/.test(Wr)]+")"})}function Lr(zr){zr.select(".extent").attr("x",Ue[0]),zr.selectAll(".extent,.n>rect,.s>rect").attr("width",Ue[1]-Ue[0])}function nn(zr){zr.select(".extent").attr("y",Be[0]),zr.selectAll(".extent,.e>rect,.w>rect").attr("height",Be[1]-Be[0])}function pn(){var zr=this,Wr=w.select(w.event.target),qr=le.of(zr,arguments),fn=w.select(zr),hn=Wr.datum(),tn=!/^(n|s)$/.test(hn)&&_e,jn=!/^(e|w)$/.test(hn)&&De,la=Wr.classed("extent"),Ea=$t(zr),ca,Ra=w.mouse(zr),pa,ja=w.select(a(zr)).on("keydown.brush",Ei).on("keyup.brush",Ao);if(w.event.changedTouches?ja.on("touchmove.brush",ji).on("touchend.brush",hi):ja.on("mousemove.brush",ji).on("mouseup.brush",hi),fn.interrupt().selectAll("*").interrupt(),la)Ra[0]=Ue[0]-Ra[0],Ra[1]=Be[0]-Ra[1];else if(hn){var Oa=+/w$/.test(hn),ii=+/^n/.test(hn);pa=[Ue[1-Oa]-Ra[0],Be[1-ii]-Ra[1]],Ra[0]=Ue[Oa],Ra[1]=Be[ii]}else w.event.altKey&&(ca=Ra.slice());fn.style("pointer-events","none").selectAll(".resize").style("display",null),w.select("body").style("cursor",Wr.style("cursor")),qr({type:"brushstart"}),ji();function Ei(){w.event.keyCode==32&&(la||(ca=null,Ra[0]-=Ue[1],Ra[1]-=Be[1],la=2),X())}function Ao(){w.event.keyCode==32&&la==2&&(Ra[0]+=Ue[1],Ra[1]+=Be[1],la=0,X())}function ji(){var qa=w.mouse(zr),Oi=!1;pa&&(qa[0]+=pa[0],qa[1]+=pa[1]),la||(w.event.altKey?(ca||(ca=[(Ue[0]+Ue[1])/2,(Be[0]+Be[1])/2]),Ra[0]=Ue[+(qa[0]<ca[0])],Ra[1]=Be[+(qa[1]<ca[1])]):ca=null),tn&&ga(qa,_e,0)&&(Lr(fn),Oi=!0),jn&&ga(qa,De,1)&&(nn(fn),Oi=!0),Oi&&(sr(fn),qr({type:"brush",mode:la?"move":"resize"}))}function ga(qa,Oi,di){var xo=ln(Oi),fo=xo[0],ko=xo[1],us=Ra[di],qo=di?Be:Ue,fs=qo[1]-qo[0],ro,Qi;if(la&&(fo-=us,ko-=fs+us),ro=(di?Ot:mt)?Math.max(fo,Math.min(ko,qa[di])):qa[di],la?Qi=(ro+=us)+fs:(ca&&(us=Math.max(fo,Math.min(ko,2*ca[di]-ro))),us<ro?(Qi=ro,ro=us):Qi=us),qo[0]!=ro||qo[1]!=Qi)return di?Mt=null:qe=null,qo[0]=ro,qo[1]=Qi,!0}function hi(){ji(),fn.style("pointer-events","all").selectAll(".resize").style("display",or.empty()?"none":null),w.select("body").style("cursor",null),ja.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),Ea(),qr({type:"brushend"})}}return or.x=function(zr){return arguments.length?(_e=zr,er=Co[!_e<<1|!De],or):_e},or.y=function(zr){return arguments.length?(De=zr,er=Co[!_e<<1|!De],or):De},or.clamp=function(zr){return arguments.length?(_e&&De?(mt=!!zr[0],Ot=!!zr[1]):_e?mt=!!zr:De&&(Ot=!!zr),or):_e&&De?[mt,Ot]:_e?mt:De?Ot:null},or.extent=function(zr){var Wr,qr,fn,hn,tn;return arguments.length?(_e&&(Wr=zr[0],qr=zr[1],De&&(Wr=Wr[0],qr=qr[0]),qe=[Wr,qr],_e.invert&&(Wr=_e(Wr),qr=_e(qr)),qr<Wr&&(tn=Wr,Wr=qr,qr=tn),(Wr!=Ue[0]||qr!=Ue[1])&&(Ue=[Wr,qr])),De&&(fn=zr[0],hn=zr[1],_e&&(fn=fn[1],hn=hn[1]),Mt=[fn,hn],De.invert&&(fn=De(fn),hn=De(hn)),hn<fn&&(tn=fn,fn=hn,hn=tn),(fn!=Be[0]||hn!=Be[1])&&(Be=[fn,hn])),or):(_e&&(qe?(Wr=qe[0],qr=qe[1]):(Wr=Ue[0],qr=Ue[1],_e.invert&&(Wr=_e.invert(Wr),qr=_e.invert(qr)),qr<Wr&&(tn=Wr,Wr=qr,qr=tn))),De&&(Mt?(fn=Mt[0],hn=Mt[1]):(fn=Be[0],hn=Be[1],De.invert&&(fn=De.invert(fn),hn=De.invert(hn)),hn<fn&&(tn=fn,fn=hn,hn=tn))),_e&&De?[[Wr,fn],[qr,hn]]:_e?[Wr,qr]:De&&[fn,hn])},or.clear=function(){return or.empty()||(Ue=[0,0],Be=[0,0],qe=Mt=null),or},or.empty=function(){return!!_e&&Ue[0]==Ue[1]||!!De&&Be[0]==Be[1]},w.rebind(or,le,"on")};var Ps={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Co=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];w.text=zt(function(le){return le.responseText}),w.json=function(le,_e){return qt(le,"application/json",Yo,_e)};function Yo(le){return JSON.parse(le.responseText)}w.html=function(le,_e){return qt(le,"text/html",ls,_e)};function ls(le){var _e=T.createRange();return _e.selectNode(T.body),_e.createContextualFragment(le.responseText)}w.xml=zt(function(le){return le.responseXML}),typeof U=="object"&&U.exports?U.exports=w:this.d3=w}).apply(self)},{}],59:[function(i,U,V){U.exports=i("./quad")},{"./quad":60}],60:[function(i,U,V){var w=i("binary-search-bounds"),f=i("clamp"),M=i("parse-rect"),T=i("array-bounds"),e=i("pick-by-alias"),a=i("defined"),n=i("flatten-vertex-data"),r=i("is-obj"),t=i("dtype"),h=i("math-log2"),s=1073741824;U.exports=function(d,p){p||(p={}),d=n(d,"float64"),p=e(p,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});var c=a(p.maxDepth,255),m=a(p.bounds,T(d,2));m[0]===m[2]&&m[2]++,m[1]===m[3]&&m[3]++;var l=o(d,m),x=d.length>>>1,u;p.dtype||(p.dtype="array"),typeof p.dtype=="string"?u=new(t(p.dtype))(x):p.dtype&&(u=p.dtype,Array.isArray(u)&&(u.length=x));for(var A=0;A<x;++A)u[A]=A;var _=[],g=[],b=[],v=[];D(0,0,1,u,0,1);for(var k=0,S=0;S<_.length;S++){var E=_[S];if(u.set)u.set(E,k);else for(var C=0,F=E.length;C<F;C++)u[C+k]=E[C];var I=k+_[S].length;v[S]=[k,I],k=I}return u.range=R,u;function D(B,G,Q,X,j,re){if(!X.length)return null;var ue=_[j]||(_[j]=[]),K=b[j]||(b[j]=[]),te=g[j]||(g[j]=[]),Y=ue.length;if(j++,j>c||re>s){for(var H=0;H<X.length;H++)ue.push(X[H]),K.push(re),te.push(null,null,null,null);return Y}if(ue.push(X[0]),K.push(re),X.length<=1)return te.push(null,null,null,null),Y;for(var ee=Q*.5,ne=B+ee,Z=G+ee,q=[],ie=[],se=[],ae=[],oe=1,be=X.length;oe<be;oe++){var ce=X[oe],de=l[ce*2],ye=l[ce*2+1];de<ne?ye<Z?q.push(ce):ie.push(ce):ye<Z?se.push(ce):ae.push(ce)}return re<<=2,te.push(D(B,G,ee,q,j,re),D(B,Z,ee,ie,j,re+1),D(ne,G,ee,se,j,re+2),D(ne,Z,ee,ae,j,re+3)),Y}function R(){for(var B=[],G=arguments.length;G--;)B[G]=arguments[G];var Q;if(r(B[B.length-1])){var X=B.pop();!B.length&&(X.x!=null||X.l!=null||X.left!=null)&&(B=[X],Q={}),Q=e(X,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else Q={};B.length||(B=m);var j=M.apply(void 0,B),re=[Math.min(j.x,j.x+j.width),Math.min(j.y,j.y+j.height),Math.max(j.x,j.x+j.width),Math.max(j.y,j.y+j.height)],ue=re[0],K=re[1],te=re[2],Y=re[3],H=o([ue,K,te,Y],m),ee=H[0],ne=H[1],Z=H[2],q=H[3],ie=a(Q.level,_.length);if(Q.d!=null){var se;typeof Q.d=="number"?se=[Q.d,Q.d]:Q.d.length&&(se=Q.d),ie=Math.min(Math.max(Math.ceil(-h(Math.abs(se[0])/(m[2]-m[0]))),Math.ceil(-h(Math.abs(se[1])/(m[3]-m[1])))),ie)}if(ie=Math.min(ie,_.length),Q.lod)return O(ee,ne,Z,q,ie);var ae=[];oe(0,0,1,0,0,1);function oe(ce,de,ye,ge,me,Se){if(!(me===null||Se===null)){var Le=ce+ye,Oe=de+ye;if(!(ee>Le||ne>Oe||Z<ce||q<de)&&!(ge>=ie)&&me!==Se){var we=_[ge];Se===void 0&&(Se=we.length);for(var Ce=me;Ce<Se;Ce++){var Ke=we[Ce],Ye=d[Ke*2],Fe=d[Ke*2+1];Ye>=ue&&Ye<=te&&Fe>=K&&Fe<=Y&&ae.push(Ke)}var Re=g[ge],je=Re[me*4+0],xt=Re[me*4+1],Nt=Re[me*4+2],tr=Re[me*4+3],Ht=be(Re,me+1),Pt=ye*.5,$t=ge+1;oe(ce,de,Pt,$t,je,xt||Nt||tr||Ht),oe(ce,de+Pt,Pt,$t,xt,Nt||tr||Ht),oe(ce+Pt,de,Pt,$t,Nt,tr||Ht),oe(ce+Pt,de+Pt,Pt,$t,tr,Ht)}}}function be(ce,de){for(var ye=null,ge=0;ye===null;)if(ye=ce[de*4+ge],ge++,ge>ce.length)return null;return ye}return ae}function O(B,G,Q,X,j){for(var re=[],ue=0;ue<j;ue++){var K=b[ue],te=v[ue][0],Y=z(B,G,ue),H=z(Q,X,ue),ee=w.ge(K,Y),ne=w.gt(K,H,ee,K.length-1);re[ue]=[ee+te,ne+te]}return re}function z(B,G,Q){for(var X=1,j=.5,re=.5,ue=.5,K=0;K<Q;K++)X<<=2,X+=B<j?G<re?0:1:G<re?2:3,ue*=.5,j+=B<j?-ue:ue,re+=G<re?-ue:ue;return X}};function o(y,d){for(var p=d[0],c=d[1],m=d[2],l=d[3],x=1/(m-p),u=1/(l-c),A=new Array(y.length),_=0,g=y.length/2;_<g;_++)A[2*_]=f((y[2*_]-p)*x,0,1),A[2*_+1]=f((y[2*_+1]-c)*u,0,1);return A}},{"array-bounds":71,"binary-search-bounds":80,clamp:86,defined:124,dtype:127,"flatten-vertex-data":191,"is-obj":235,"math-log2":240,"parse-rect":249,"pick-by-alias":253}],61:[function(i,U,V){Object.defineProperty(V,"__esModule",{value:!0});var w=i("@turf/meta"),f=6378137;function M(r){return w.geomReduce(r,function(t,h){return t+T(h)},0)}V.default=M;function T(r){var t=0,h;switch(r.type){case"Polygon":return e(r.coordinates);case"MultiPolygon":for(h=0;h<r.coordinates.length;h++)t+=e(r.coordinates[h]);return t;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function e(r){var t=0;if(r&&r.length>0){t+=Math.abs(a(r[0]));for(var h=1;h<r.length;h++)t-=Math.abs(a(r[h]))}return t}function a(r){var t,h,s,o,y,d,p,c=0,m=r.length;if(m>2){for(p=0;p<m;p++)p===m-2?(o=m-2,y=m-1,d=0):p===m-1?(o=m-1,y=0,d=1):(o=p,y=p+1,d=p+2),t=r[o],h=r[y],s=r[d],c+=(n(s[0])-n(t[0]))*Math.sin(n(h[1]));c=c*f*f/2}return c}function n(r){return r*Math.PI/180}},{"@turf/meta":63}],62:[function(i,U,V){Object.defineProperty(V,"__esModule",{value:!0}),V.earthRadius=63710088e-1,V.factors={centimeters:V.earthRadius*100,centimetres:V.earthRadius*100,degrees:V.earthRadius/111325,feet:V.earthRadius*3.28084,inches:V.earthRadius*39.37,kilometers:V.earthRadius/1e3,kilometres:V.earthRadius/1e3,meters:V.earthRadius,metres:V.earthRadius,miles:V.earthRadius/1609.344,millimeters:V.earthRadius*1e3,millimetres:V.earthRadius*1e3,nauticalmiles:V.earthRadius/1852,radians:1,yards:V.earthRadius*1.0936},V.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/V.earthRadius,yards:1.0936133},V.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function w(S,E,C){C===void 0&&(C={});var F={type:"Feature"};return(C.id===0||C.id)&&(F.id=C.id),C.bbox&&(F.bbox=C.bbox),F.properties=E||{},F.geometry=S,F}V.feature=w;function f(S,E,C){switch(S){case"Point":return M(E).geometry;case"LineString":return n(E).geometry;case"Polygon":return e(E).geometry;case"MultiPoint":return s(E).geometry;case"MultiLineString":return h(E).geometry;case"MultiPolygon":return o(E).geometry;default:throw new Error(S+" is invalid")}}V.geometry=f;function M(S,E,C){if(C===void 0&&(C={}),!S)throw new Error("coordinates is required");if(!Array.isArray(S))throw new Error("coordinates must be an Array");if(S.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!g(S[0])||!g(S[1]))throw new Error("coordinates must contain numbers");var F={type:"Point",coordinates:S};return w(F,E,C)}V.point=M;function T(S,E,C){return C===void 0&&(C={}),t(S.map(function(F){return M(F,E)}),C)}V.points=T;function e(S,E,C){C===void 0&&(C={});for(var F=0,I=S;F<I.length;F++){var D=I[F];if(D.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var R=0;R<D[D.length-1].length;R++)if(D[D.length-1][R]!==D[0][R])throw new Error("First and last Position are not equivalent.")}var O={type:"Polygon",coordinates:S};return w(O,E,C)}V.polygon=e;function a(S,E,C){return C===void 0&&(C={}),t(S.map(function(F){return e(F,E)}),C)}V.polygons=a;function n(S,E,C){if(C===void 0&&(C={}),S.length<2)throw new Error("coordinates must be an array of two or more positions");var F={type:"LineString",coordinates:S};return w(F,E,C)}V.lineString=n;function r(S,E,C){return C===void 0&&(C={}),t(S.map(function(F){return n(F,E)}),C)}V.lineStrings=r;function t(S,E){E===void 0&&(E={});var C={type:"FeatureCollection"};return E.id&&(C.id=E.id),E.bbox&&(C.bbox=E.bbox),C.features=S,C}V.featureCollection=t;function h(S,E,C){C===void 0&&(C={});var F={type:"MultiLineString",coordinates:S};return w(F,E,C)}V.multiLineString=h;function s(S,E,C){C===void 0&&(C={});var F={type:"MultiPoint",coordinates:S};return w(F,E,C)}V.multiPoint=s;function o(S,E,C){C===void 0&&(C={});var F={type:"MultiPolygon",coordinates:S};return w(F,E,C)}V.multiPolygon=o;function y(S,E,C){C===void 0&&(C={});var F={type:"GeometryCollection",geometries:S};return w(F,E,C)}V.geometryCollection=y;function d(S,E){if(E===void 0&&(E=0),E&&!(E>=0))throw new Error("precision must be a positive number");var C=Math.pow(10,E||0);return Math.round(S*C)/C}V.round=d;function p(S,E){E===void 0&&(E="kilometers");var C=V.factors[E];if(!C)throw new Error(E+" units is invalid");return S*C}V.radiansToLength=p;function c(S,E){E===void 0&&(E="kilometers");var C=V.factors[E];if(!C)throw new Error(E+" units is invalid");return S/C}V.lengthToRadians=c;function m(S,E){return x(c(S,E))}V.lengthToDegrees=m;function l(S){var E=S%360;return E<0&&(E+=360),E}V.bearingToAzimuth=l;function x(S){var E=S%(2*Math.PI);return E*180/Math.PI}V.radiansToDegrees=x;function u(S){var E=S%360;return E*Math.PI/180}V.degreesToRadians=u;function A(S,E,C){if(E===void 0&&(E="kilometers"),C===void 0&&(C="kilometers"),!(S>=0))throw new Error("length must be a positive number");return p(c(S,E),C)}V.convertLength=A;function _(S,E,C){if(E===void 0&&(E="meters"),C===void 0&&(C="kilometers"),!(S>=0))throw new Error("area must be a positive number");var F=V.areaFactors[E];if(!F)throw new Error("invalid original units");var I=V.areaFactors[C];if(!I)throw new Error("invalid final units");return S/F*I}V.convertArea=_;function g(S){return!isNaN(S)&&S!==null&&!Array.isArray(S)}V.isNumber=g;function b(S){return!!S&&S.constructor===Object}V.isObject=b;function v(S){if(!S)throw new Error("bbox is required");if(!Array.isArray(S))throw new Error("bbox must be an Array");if(S.length!==4&&S.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");S.forEach(function(E){if(!g(E))throw new Error("bbox must only contain numbers")})}V.validateBBox=v;function k(S){if(!S)throw new Error("id is required");if(["string","number"].indexOf(typeof S)===-1)throw new Error("id must be a number or a string")}V.validateId=k},{}],63:[function(i,U,V){Object.defineProperty(V,"__esModule",{value:!0});var w=i("@turf/helpers");function f(x,u,A){if(x!==null)for(var _,g,b,v,k,S,E,C=0,F=0,I,D=x.type,R=D==="FeatureCollection",O=D==="Feature",z=R?x.features.length:1,B=0;B<z;B++){E=R?x.features[B].geometry:O?x.geometry:x,I=E?E.type==="GeometryCollection":!1,k=I?E.geometries.length:1;for(var G=0;G<k;G++){var Q=0,X=0;if(v=I?E.geometries[G]:E,v!==null){S=v.coordinates;var j=v.type;switch(C=A&&(j==="Polygon"||j==="MultiPolygon")?1:0,j){case null:break;case"Point":if(u(S,F,B,Q,X)===!1)return!1;F++,Q++;break;case"LineString":case"MultiPoint":for(_=0;_<S.length;_++){if(u(S[_],F,B,Q,X)===!1)return!1;F++,j==="MultiPoint"&&Q++}j==="LineString"&&Q++;break;case"Polygon":case"MultiLineString":for(_=0;_<S.length;_++){for(g=0;g<S[_].length-C;g++){if(u(S[_][g],F,B,Q,X)===!1)return!1;F++}j==="MultiLineString"&&Q++,j==="Polygon"&&X++}j==="Polygon"&&Q++;break;case"MultiPolygon":for(_=0;_<S.length;_++){for(X=0,g=0;g<S[_].length;g++){for(b=0;b<S[_][g].length-C;b++){if(u(S[_][g][b],F,B,Q,X)===!1)return!1;F++}X++}Q++}break;case"GeometryCollection":for(_=0;_<v.geometries.length;_++)if(f(v.geometries[_],u,A)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function M(x,u,A,_){var g=A;return f(x,function(b,v,k,S,E){v===0&&A===void 0?g=b:g=u(g,b,v,k,S,E)},_),g}function T(x,u){var A;switch(x.type){case"FeatureCollection":for(A=0;A<x.features.length&&u(x.features[A].properties,A)!==!1;A++);break;case"Feature":u(x.properties,0);break}}function e(x,u,A){var _=A;return T(x,function(g,b){b===0&&A===void 0?_=g:_=u(_,g,b)}),_}function a(x,u){if(x.type==="Feature")u(x,0);else if(x.type==="FeatureCollection")for(var A=0;A<x.features.length&&u(x.features[A],A)!==!1;A++);}function n(x,u,A){var _=A;return a(x,function(g,b){b===0&&A===void 0?_=g:_=u(_,g,b)}),_}function r(x){var u=[];return f(x,function(A){u.push(A)}),u}function t(x,u){var A,_,g,b,v,k,S,E,C,F,I=0,D=x.type==="FeatureCollection",R=x.type==="Feature",O=D?x.features.length:1;for(A=0;A<O;A++){for(k=D?x.features[A].geometry:R?x.geometry:x,E=D?x.features[A].properties:R?x.properties:{},C=D?x.features[A].bbox:R?x.bbox:void 0,F=D?x.features[A].id:R?x.id:void 0,S=k?k.type==="GeometryCollection":!1,v=S?k.geometries.length:1,g=0;g<v;g++){if(b=S?k.geometries[g]:k,b===null){if(u(null,I,E,C,F)===!1)return!1;continue}switch(b.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(u(b,I,E,C,F)===!1)return!1;break}case"GeometryCollection":{for(_=0;_<b.geometries.length;_++)if(u(b.geometries[_],I,E,C,F)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}I++}}function h(x,u,A){var _=A;return t(x,function(g,b,v,k,S){b===0&&A===void 0?_=g:_=u(_,g,b,v,k,S)}),_}function s(x,u){t(x,function(A,_,g,b,v){var k=A===null?null:A.type;switch(k){case null:case"Point":case"LineString":case"Polygon":return u(w.feature(A,g,{bbox:b,id:v}),_,0)===!1?!1:void 0}var S;switch(k){case"MultiPoint":S="Point";break;case"MultiLineString":S="LineString";break;case"MultiPolygon":S="Polygon";break}for(var E=0;E<A.coordinates.length;E++){var C=A.coordinates[E],F={type:S,coordinates:C};if(u(w.feature(F,g),_,E)===!1)return!1}})}function o(x,u,A){var _=A;return s(x,function(g,b,v){b===0&&v===0&&A===void 0?_=g:_=u(_,g,b,v)}),_}function y(x,u){s(x,function(A,_,g){var b=0;if(!!A.geometry){var v=A.geometry.type;if(!(v==="Point"||v==="MultiPoint")){var k,S=0,E=0,C=0;if(f(A,function(F,I,D,R,O){if(k===void 0||_>S||R>E||O>C){k=F,S=_,E=R,C=O,b=0;return}var z=w.lineString([k,F],A.properties);if(u(z,_,g,O,b)===!1)return!1;b++,k=F})===!1)return!1}}})}function d(x,u,A){var _=A,g=!1;return y(x,function(b,v,k,S,E){g===!1&&A===void 0?_=b:_=u(_,b,v,k,S,E),g=!0}),_}function p(x,u){if(!x)throw new Error("geojson is required");s(x,function(A,_,g){if(A.geometry!==null){var b=A.geometry.type,v=A.geometry.coordinates;switch(b){case"LineString":if(u(A,_,g,0,0)===!1)return!1;break;case"Polygon":for(var k=0;k<v.length;k++)if(u(w.lineString(v[k],A.properties),_,g,k)===!1)return!1;break}}})}function c(x,u,A){var _=A;return p(x,function(g,b,v,k){b===0&&A===void 0?_=g:_=u(_,g,b,v,k)}),_}function m(x,u){if(u=u||{},!w.isObject(u))throw new Error("options is invalid");var A=u.featureIndex||0,_=u.multiFeatureIndex||0,g=u.geometryIndex||0,b=u.segmentIndex||0,v=u.properties,k;switch(x.type){case"FeatureCollection":A<0&&(A=x.features.length+A),v=v||x.features[A].properties,k=x.features[A].geometry;break;case"Feature":v=v||x.properties,k=x.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":k=x;break;default:throw new Error("geojson is invalid")}if(k===null)return null;var S=k.coordinates;switch(k.type){case"Point":case"MultiPoint":return null;case"LineString":return b<0&&(b=S.length+b-1),w.lineString([S[b],S[b+1]],v,u);case"Polygon":return g<0&&(g=S.length+g),b<0&&(b=S[g].length+b-1),w.lineString([S[g][b],S[g][b+1]],v,u);case"MultiLineString":return _<0&&(_=S.length+_),b<0&&(b=S[_].length+b-1),w.lineString([S[_][b],S[_][b+1]],v,u);case"MultiPolygon":return _<0&&(_=S.length+_),g<0&&(g=S[_].length+g),b<0&&(b=S[_][g].length-b-1),w.lineString([S[_][g][b],S[_][g][b+1]],v,u)}throw new Error("geojson is invalid")}function l(x,u){if(u=u||{},!w.isObject(u))throw new Error("options is invalid");var A=u.featureIndex||0,_=u.multiFeatureIndex||0,g=u.geometryIndex||0,b=u.coordIndex||0,v=u.properties,k;switch(x.type){case"FeatureCollection":A<0&&(A=x.features.length+A),v=v||x.features[A].properties,k=x.features[A].geometry;break;case"Feature":v=v||x.properties,k=x.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":k=x;break;default:throw new Error("geojson is invalid")}if(k===null)return null;var S=k.coordinates;switch(k.type){case"Point":return w.point(S,v,u);case"MultiPoint":return _<0&&(_=S.length+_),w.point(S[_],v,u);case"LineString":return b<0&&(b=S.length+b),w.point(S[b],v,u);case"Polygon":return g<0&&(g=S.length+g),b<0&&(b=S[g].length+b),w.point(S[g][b],v,u);case"MultiLineString":return _<0&&(_=S.length+_),b<0&&(b=S[_].length+b),w.point(S[_][b],v,u);case"MultiPolygon":return _<0&&(_=S.length+_),g<0&&(g=S[_].length+g),b<0&&(b=S[_][g].length-b),w.point(S[_][g][b],v,u)}throw new Error("geojson is invalid")}V.coordEach=f,V.coordReduce=M,V.propEach=T,V.propReduce=e,V.featureEach=a,V.featureReduce=n,V.coordAll=r,V.geomEach=t,V.geomReduce=h,V.flattenEach=s,V.flattenReduce=o,V.segmentEach=y,V.segmentReduce=d,V.lineEach=p,V.lineReduce=c,V.findSegment=m,V.findPoint=l},{"@turf/helpers":62}],64:[function(i,U,V){Object.defineProperty(V,"__esModule",{value:!0});var w=i("@turf/meta");function f(M){var T=[1/0,1/0,-1/0,-1/0];return w.coordEach(M,function(e){T[0]>e[0]&&(T[0]=e[0]),T[1]>e[1]&&(T[1]=e[1]),T[2]<e[0]&&(T[2]=e[0]),T[3]<e[1]&&(T[3]=e[1])}),T}f.default=f,V.default=f},{"@turf/meta":66}],65:[function(i,U,V){arguments[4][62][0].apply(V,arguments)},{dup:62}],66:[function(i,U,V){arguments[4][63][0].apply(V,arguments)},{"@turf/helpers":65,dup:63}],67:[function(i,U,V){Object.defineProperty(V,"__esModule",{value:!0});var w=i("@turf/meta"),f=i("@turf/helpers");function M(T,e){e===void 0&&(e={});var a=0,n=0,r=0;return w.coordEach(T,function(t){a+=t[0],n+=t[1],r++}),f.point([a/r,n/r],e.properties)}V.default=M},{"@turf/helpers":68,"@turf/meta":69}],68:[function(i,U,V){Object.defineProperty(V,"__esModule",{value:!0}),V.earthRadius=63710088e-1,V.factors={centimeters:V.earthRadius*100,centimetres:V.earthRadius*100,degrees:V.earthRadius/111325,feet:V.earthRadius*3.28084,inches:V.earthRadius*39.37,kilometers:V.earthRadius/1e3,kilometres:V.earthRadius/1e3,meters:V.earthRadius,metres:V.earthRadius,miles:V.earthRadius/1609.344,millimeters:V.earthRadius*1e3,millimetres:V.earthRadius*1e3,nauticalmiles:V.earthRadius/1852,radians:1,yards:V.earthRadius/1.0936},V.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/V.earthRadius,yards:1/1.0936},V.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function w(O,z,B){B===void 0&&(B={});var G={type:"Feature"};return(B.id===0||B.id)&&(G.id=B.id),B.bbox&&(G.bbox=B.bbox),G.properties=z||{},G.geometry=O,G}V.feature=w;function f(O,z,B){switch(O){case"Point":return M(z).geometry;case"LineString":return n(z).geometry;case"Polygon":return e(z).geometry;case"MultiPoint":return s(z).geometry;case"MultiLineString":return h(z).geometry;case"MultiPolygon":return o(z).geometry;default:throw new Error(O+" is invalid")}}V.geometry=f;function M(O,z,B){B===void 0&&(B={});var G={type:"Point",coordinates:O};return w(G,z,B)}V.point=M;function T(O,z,B){return B===void 0&&(B={}),t(O.map(function(G){return M(G,z)}),B)}V.points=T;function e(O,z,B){B===void 0&&(B={});for(var G=0,Q=O;G<Q.length;G++){var X=Q[G];if(X.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var j=0;j<X[X.length-1].length;j++)if(X[X.length-1][j]!==X[0][j])throw new Error("First and last Position are not equivalent.")}var re={type:"Polygon",coordinates:O};return w(re,z,B)}V.polygon=e;function a(O,z,B){return B===void 0&&(B={}),t(O.map(function(G){return e(G,z)}),B)}V.polygons=a;function n(O,z,B){if(B===void 0&&(B={}),O.length<2)throw new Error("coordinates must be an array of two or more positions");var G={type:"LineString",coordinates:O};return w(G,z,B)}V.lineString=n;function r(O,z,B){return B===void 0&&(B={}),t(O.map(function(G){return n(G,z)}),B)}V.lineStrings=r;function t(O,z){z===void 0&&(z={});var B={type:"FeatureCollection"};return z.id&&(B.id=z.id),z.bbox&&(B.bbox=z.bbox),B.features=O,B}V.featureCollection=t;function h(O,z,B){B===void 0&&(B={});var G={type:"MultiLineString",coordinates:O};return w(G,z,B)}V.multiLineString=h;function s(O,z,B){B===void 0&&(B={});var G={type:"MultiPoint",coordinates:O};return w(G,z,B)}V.multiPoint=s;function o(O,z,B){B===void 0&&(B={});var G={type:"MultiPolygon",coordinates:O};return w(G,z,B)}V.multiPolygon=o;function y(O,z,B){B===void 0&&(B={});var G={type:"GeometryCollection",geometries:O};return w(G,z,B)}V.geometryCollection=y;function d(O,z){if(z===void 0&&(z=0),z&&!(z>=0))throw new Error("precision must be a positive number");var B=Math.pow(10,z||0);return Math.round(O*B)/B}V.round=d;function p(O,z){z===void 0&&(z="kilometers");var B=V.factors[z];if(!B)throw new Error(z+" units is invalid");return O*B}V.radiansToLength=p;function c(O,z){z===void 0&&(z="kilometers");var B=V.factors[z];if(!B)throw new Error(z+" units is invalid");return O/B}V.lengthToRadians=c;function m(O,z){return x(c(O,z))}V.lengthToDegrees=m;function l(O){var z=O%360;return z<0&&(z+=360),z}V.bearingToAzimuth=l;function x(O){var z=O%(2*Math.PI);return z*180/Math.PI}V.radiansToDegrees=x;function u(O){var z=O%360;return z*Math.PI/180}V.degreesToRadians=u;function A(O,z,B){if(z===void 0&&(z="kilometers"),B===void 0&&(B="kilometers"),!(O>=0))throw new Error("length must be a positive number");return p(c(O,z),B)}V.convertLength=A;function _(O,z,B){if(z===void 0&&(z="meters"),B===void 0&&(B="kilometers"),!(O>=0))throw new Error("area must be a positive number");var G=V.areaFactors[z];if(!G)throw new Error("invalid original units");var Q=V.areaFactors[B];if(!Q)throw new Error("invalid final units");return O/G*Q}V.convertArea=_;function g(O){return!isNaN(O)&&O!==null&&!Array.isArray(O)&&!/^\s*$/.test(O)}V.isNumber=g;function b(O){return!!O&&O.constructor===Object}V.isObject=b;function v(O){if(!O)throw new Error("bbox is required");if(!Array.isArray(O))throw new Error("bbox must be an Array");if(O.length!==4&&O.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");O.forEach(function(z){if(!g(z))throw new Error("bbox must only contain numbers")})}V.validateBBox=v;function k(O){if(!O)throw new Error("id is required");if(["string","number"].indexOf(typeof O)===-1)throw new Error("id must be a number or a string")}V.validateId=k;function S(){throw new Error("method has been renamed to `radiansToDegrees`")}V.radians2degrees=S;function E(){throw new Error("method has been renamed to `degreesToRadians`")}V.degrees2radians=E;function C(){throw new Error("method has been renamed to `lengthToDegrees`")}V.distanceToDegrees=C;function F(){throw new Error("method has been renamed to `lengthToRadians`")}V.distanceToRadians=F;function I(){throw new Error("method has been renamed to `radiansToLength`")}V.radiansToDistance=I;function D(){throw new Error("method has been renamed to `bearingToAzimuth`")}V.bearingToAngle=D;function R(){throw new Error("method has been renamed to `convertLength`")}V.convertDistance=R},{}],69:[function(i,U,V){Object.defineProperty(V,"__esModule",{value:!0});var w=i("@turf/helpers");function f(x,u,A){if(x!==null)for(var _,g,b,v,k,S,E,C=0,F=0,I,D=x.type,R=D==="FeatureCollection",O=D==="Feature",z=R?x.features.length:1,B=0;B<z;B++){E=R?x.features[B].geometry:O?x.geometry:x,I=E?E.type==="GeometryCollection":!1,k=I?E.geometries.length:1;for(var G=0;G<k;G++){var Q=0,X=0;if(v=I?E.geometries[G]:E,v!==null){S=v.coordinates;var j=v.type;switch(C=A&&(j==="Polygon"||j==="MultiPolygon")?1:0,j){case null:break;case"Point":if(u(S,F,B,Q,X)===!1)return!1;F++,Q++;break;case"LineString":case"MultiPoint":for(_=0;_<S.length;_++){if(u(S[_],F,B,Q,X)===!1)return!1;F++,j==="MultiPoint"&&Q++}j==="LineString"&&Q++;break;case"Polygon":case"MultiLineString":for(_=0;_<S.length;_++){for(g=0;g<S[_].length-C;g++){if(u(S[_][g],F,B,Q,X)===!1)return!1;F++}j==="MultiLineString"&&Q++,j==="Polygon"&&X++}j==="Polygon"&&Q++;break;case"MultiPolygon":for(_=0;_<S.length;_++){for(X=0,g=0;g<S[_].length;g++){for(b=0;b<S[_][g].length-C;b++){if(u(S[_][g][b],F,B,Q,X)===!1)return!1;F++}X++}Q++}break;case"GeometryCollection":for(_=0;_<v.geometries.length;_++)if(f(v.geometries[_],u,A)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function M(x,u,A,_){var g=A;return f(x,function(b,v,k,S,E){v===0&&A===void 0?g=b:g=u(g,b,v,k,S,E)},_),g}function T(x,u){var A;switch(x.type){case"FeatureCollection":for(A=0;A<x.features.length&&u(x.features[A].properties,A)!==!1;A++);break;case"Feature":u(x.properties,0);break}}function e(x,u,A){var _=A;return T(x,function(g,b){b===0&&A===void 0?_=g:_=u(_,g,b)}),_}function a(x,u){if(x.type==="Feature")u(x,0);else if(x.type==="FeatureCollection")for(var A=0;A<x.features.length&&u(x.features[A],A)!==!1;A++);}function n(x,u,A){var _=A;return a(x,function(g,b){b===0&&A===void 0?_=g:_=u(_,g,b)}),_}function r(x){var u=[];return f(x,function(A){u.push(A)}),u}function t(x,u){var A,_,g,b,v,k,S,E,C,F,I=0,D=x.type==="FeatureCollection",R=x.type==="Feature",O=D?x.features.length:1;for(A=0;A<O;A++){for(k=D?x.features[A].geometry:R?x.geometry:x,E=D?x.features[A].properties:R?x.properties:{},C=D?x.features[A].bbox:R?x.bbox:void 0,F=D?x.features[A].id:R?x.id:void 0,S=k?k.type==="GeometryCollection":!1,v=S?k.geometries.length:1,g=0;g<v;g++){if(b=S?k.geometries[g]:k,b===null){if(u(null,I,E,C,F)===!1)return!1;continue}switch(b.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(u(b,I,E,C,F)===!1)return!1;break}case"GeometryCollection":{for(_=0;_<b.geometries.length;_++)if(u(b.geometries[_],I,E,C,F)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}I++}}function h(x,u,A){var _=A;return t(x,function(g,b,v,k,S){b===0&&A===void 0?_=g:_=u(_,g,b,v,k,S)}),_}function s(x,u){t(x,function(A,_,g,b,v){var k=A===null?null:A.type;switch(k){case null:case"Point":case"LineString":case"Polygon":return u(w.feature(A,g,{bbox:b,id:v}),_,0)===!1?!1:void 0}var S;switch(k){case"MultiPoint":S="Point";break;case"MultiLineString":S="LineString";break;case"MultiPolygon":S="Polygon";break}for(var E=0;E<A.coordinates.length;E++){var C=A.coordinates[E],F={type:S,coordinates:C};if(u(w.feature(F,g),_,E)===!1)return!1}})}function o(x,u,A){var _=A;return s(x,function(g,b,v){b===0&&v===0&&A===void 0?_=g:_=u(_,g,b,v)}),_}function y(x,u){s(x,function(A,_,g){var b=0;if(!!A.geometry){var v=A.geometry.type;if(!(v==="Point"||v==="MultiPoint")){var k,S=0,E=0,C=0;if(f(A,function(F,I,D,R,O){if(k===void 0||_>S||R>E||O>C){k=F,S=_,E=R,C=O,b=0;return}var z=w.lineString([k,F],A.properties);if(u(z,_,g,O,b)===!1)return!1;b++,k=F})===!1)return!1}}})}function d(x,u,A){var _=A,g=!1;return y(x,function(b,v,k,S,E){g===!1&&A===void 0?_=b:_=u(_,b,v,k,S,E),g=!0}),_}function p(x,u){if(!x)throw new Error("geojson is required");s(x,function(A,_,g){if(A.geometry!==null){var b=A.geometry.type,v=A.geometry.coordinates;switch(b){case"LineString":if(u(A,_,g,0,0)===!1)return!1;break;case"Polygon":for(var k=0;k<v.length;k++)if(u(w.lineString(v[k],A.properties),_,g,k)===!1)return!1;break}}})}function c(x,u,A){var _=A;return p(x,function(g,b,v,k){b===0&&A===void 0?_=g:_=u(_,g,b,v,k)}),_}function m(x,u){if(u=u||{},!w.isObject(u))throw new Error("options is invalid");var A=u.featureIndex||0,_=u.multiFeatureIndex||0,g=u.geometryIndex||0,b=u.segmentIndex||0,v=u.properties,k;switch(x.type){case"FeatureCollection":A<0&&(A=x.features.length+A),v=v||x.features[A].properties,k=x.features[A].geometry;break;case"Feature":v=v||x.properties,k=x.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":k=x;break;default:throw new Error("geojson is invalid")}if(k===null)return null;var S=k.coordinates;switch(k.type){case"Point":case"MultiPoint":return null;case"LineString":return b<0&&(b=S.length+b-1),w.lineString([S[b],S[b+1]],v,u);case"Polygon":return g<0&&(g=S.length+g),b<0&&(b=S[g].length+b-1),w.lineString([S[g][b],S[g][b+1]],v,u);case"MultiLineString":return _<0&&(_=S.length+_),b<0&&(b=S[_].length+b-1),w.lineString([S[_][b],S[_][b+1]],v,u);case"MultiPolygon":return _<0&&(_=S.length+_),g<0&&(g=S[_].length+g),b<0&&(b=S[_][g].length-b-1),w.lineString([S[_][g][b],S[_][g][b+1]],v,u)}throw new Error("geojson is invalid")}function l(x,u){if(u=u||{},!w.isObject(u))throw new Error("options is invalid");var A=u.featureIndex||0,_=u.multiFeatureIndex||0,g=u.geometryIndex||0,b=u.coordIndex||0,v=u.properties,k;switch(x.type){case"FeatureCollection":A<0&&(A=x.features.length+A),v=v||x.features[A].properties,k=x.features[A].geometry;break;case"Feature":v=v||x.properties,k=x.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":k=x;break;default:throw new Error("geojson is invalid")}if(k===null)return null;var S=k.coordinates;switch(k.type){case"Point":return w.point(S,v,u);case"MultiPoint":return _<0&&(_=S.length+_),w.point(S[_],v,u);case"LineString":return b<0&&(b=S.length+b),w.point(S[b],v,u);case"Polygon":return g<0&&(g=S.length+g),b<0&&(b=S[g].length+b),w.point(S[g][b],v,u);case"MultiLineString":return _<0&&(_=S.length+_),b<0&&(b=S[_].length+b),w.point(S[_][b],v,u);case"MultiPolygon":return _<0&&(_=S.length+_),g<0&&(g=S[_].length+g),b<0&&(b=S[_][g].length-b),w.point(S[_][g][b],v,u)}throw new Error("geojson is invalid")}V.coordEach=f,V.coordReduce=M,V.propEach=T,V.propReduce=e,V.featureEach=a,V.featureReduce=n,V.coordAll=r,V.geomEach=t,V.geomReduce=h,V.flattenEach=s,V.flattenReduce=o,V.segmentEach=y,V.segmentReduce=d,V.lineEach=p,V.lineReduce=c,V.findSegment=m,V.findPoint=l},{"@turf/helpers":68}],70:[function(i,U,V){U.exports=w;function w(f){var M=0,T=0,e=0,a=0;return f.map(function(n){n=n.slice();var r=n[0],t=r.toUpperCase();if(r!=t)switch(n[0]=t,r){case"a":n[6]+=e,n[7]+=a;break;case"v":n[1]+=a;break;case"h":n[1]+=e;break;default:for(var h=1;h<n.length;)n[h++]+=e,n[h++]+=a}switch(t){case"Z":e=M,a=T;break;case"H":e=n[1];break;case"V":a=n[1];break;case"M":e=M=n[1],a=T=n[2];break;default:e=n[n.length-2],a=n[n.length-1]}return n})}},{}],71:[function(i,U,V){U.exports=w;function w(f,M){if(!f||f.length==null)throw Error("Argument should be an array");M==null?M=1:M=Math.floor(M);for(var T=Array(M*2),e=0;e<M;e++){for(var a=-1/0,n=1/0,r=e,t=f.length;r<t;r+=M)f[r]>a&&(a=f[r]),f[r]<n&&(n=f[r]);T[e]=n,T[M+e]=a}return T}},{}],72:[function(i,U,V){U.exports=function(w,f,M){if(typeof Array.prototype.findIndex=="function")return w.findIndex(f,M);if(typeof f!="function")throw new TypeError("predicate must be a function");var T=Object(w),e=T.length;if(e===0)return-1;for(var a=0;a<e;a++)if(f.call(M,T[a],a,T))return a;return-1}},{}],73:[function(i,U,V){var w=i("array-bounds");U.exports=f;function f(M,T,e){if(!M||M.length==null)throw Error("Argument should be an array");T==null&&(T=1),e==null&&(e=w(M,T));for(var a=0;a<T;a++){var n=e[T+a],r=e[a],t=a,h=M.length;if(n===1/0&&r===-1/0)for(t=a;t<h;t+=T)M[t]=M[t]===n?1:M[t]===r?0:.5;else if(n===1/0)for(t=a;t<h;t+=T)M[t]=M[t]===n?1:0;else if(r===-1/0)for(t=a;t<h;t+=T)M[t]=M[t]===r?0:1;else{var s=n-r;for(t=a;t<h;t+=T)isNaN(M[t])||(M[t]=s===0?.5:(M[t]-r)/s)}}return M}},{"array-bounds":71}],74:[function(i,U,V){U.exports=function(f,M){var T=typeof f=="number",e=typeof M=="number";T&&!e?(M=f,f=0):!T&&!e&&(f=0,M=0),f=f|0,M=M|0;var a=M-f;if(a<0)throw new Error("array length must be positive");for(var n=new Array(a),r=0,t=f;r<a;r++,t++)n[r]=t;return n}},{}],75:[function(i,U,V){(function(w){(function(){var f=i("object-assign");/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function M(E,C){if(E===C)return 0;for(var F=E.length,I=C.length,D=0,R=Math.min(F,I);D<R;++D)if(E[D]!==C[D]){F=E[D],I=C[D];break}return F<I?-1:I<F?1:0}function T(E){return w.Buffer&&typeof w.Buffer.isBuffer=="function"?w.Buffer.isBuffer(E):!!(E!=null&&E._isBuffer)}var e=i("util/"),a=Object.prototype.hasOwnProperty,n=Array.prototype.slice,r=function(){return function(){}.name==="foo"}();function t(E){return Object.prototype.toString.call(E)}function h(E){return T(E)||typeof w.ArrayBuffer!="function"?!1:typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(E):E?!!(E instanceof DataView||E.buffer&&E.buffer instanceof ArrayBuffer):!1}var s=U.exports=l,o=/\s*function\s+([^\(\s]*)\s*/;function y(E){if(!!e.isFunction(E)){if(r)return E.name;var C=E.toString(),F=C.match(o);return F&&F[1]}}s.AssertionError=function(C){this.name="AssertionError",this.actual=C.actual,this.expected=C.expected,this.operator=C.operator,C.message?(this.message=C.message,this.generatedMessage=!1):(this.message=c(this),this.generatedMessage=!0);var F=C.stackStartFunction||m;if(Error.captureStackTrace)Error.captureStackTrace(this,F);else{var I=new Error;if(I.stack){var D=I.stack,R=y(F),O=D.indexOf(`
`+R);if(O>=0){var z=D.indexOf(`
`,O+1);D=D.substring(z+1)}this.stack=D}}},e.inherits(s.AssertionError,Error);function d(E,C){return typeof E=="string"?E.length<C?E:E.slice(0,C):E}function p(E){if(r||!e.isFunction(E))return e.inspect(E);var C=y(E),F=C?": "+C:"";return"[Function"+F+"]"}function c(E){return d(p(E.actual),128)+" "+E.operator+" "+d(p(E.expected),128)}function m(E,C,F,I,D){throw new s.AssertionError({message:F,actual:E,expected:C,operator:I,stackStartFunction:D})}s.fail=m;function l(E,C){E||m(E,!0,C,"==",s.ok)}s.ok=l,s.equal=function(C,F,I){C!=F&&m(C,F,I,"==",s.equal)},s.notEqual=function(C,F,I){C==F&&m(C,F,I,"!=",s.notEqual)},s.deepEqual=function(C,F,I){x(C,F,!1)||m(C,F,I,"deepEqual",s.deepEqual)},s.deepStrictEqual=function(C,F,I){x(C,F,!0)||m(C,F,I,"deepStrictEqual",s.deepStrictEqual)};function x(E,C,F,I){if(E===C)return!0;if(T(E)&&T(C))return M(E,C)===0;if(e.isDate(E)&&e.isDate(C))return E.getTime()===C.getTime();if(e.isRegExp(E)&&e.isRegExp(C))return E.source===C.source&&E.global===C.global&&E.multiline===C.multiline&&E.lastIndex===C.lastIndex&&E.ignoreCase===C.ignoreCase;if((E===null||typeof E!="object")&&(C===null||typeof C!="object"))return F?E===C:E==C;if(h(E)&&h(C)&&t(E)===t(C)&&!(E instanceof Float32Array||E instanceof Float64Array))return M(new Uint8Array(E.buffer),new Uint8Array(C.buffer))===0;if(T(E)!==T(C))return!1;I=I||{actual:[],expected:[]};var D=I.actual.indexOf(E);return D!==-1&&D===I.expected.indexOf(C)?!0:(I.actual.push(E),I.expected.push(C),A(E,C,F,I))}function u(E){return Object.prototype.toString.call(E)=="[object Arguments]"}function A(E,C,F,I){if(E==null||C===null||C===void 0)return!1;if(e.isPrimitive(E)||e.isPrimitive(C))return E===C;if(F&&Object.getPrototypeOf(E)!==Object.getPrototypeOf(C))return!1;var D=u(E),R=u(C);if(D&&!R||!D&&R)return!1;if(D)return E=n.call(E),C=n.call(C),x(E,C,F);var O=S(E),z=S(C),B,G;if(O.length!==z.length)return!1;for(O.sort(),z.sort(),G=O.length-1;G>=0;G--)if(O[G]!==z[G])return!1;for(G=O.length-1;G>=0;G--)if(B=O[G],!x(E[B],C[B],F,I))return!1;return!0}s.notDeepEqual=function(C,F,I){x(C,F,!1)&&m(C,F,I,"notDeepEqual",s.notDeepEqual)},s.notDeepStrictEqual=_;function _(E,C,F){x(E,C,!0)&&m(E,C,F,"notDeepStrictEqual",_)}s.strictEqual=function(C,F,I){C!==F&&m(C,F,I,"===",s.strictEqual)},s.notStrictEqual=function(C,F,I){C===F&&m(C,F,I,"!==",s.notStrictEqual)};function g(E,C){if(!E||!C)return!1;if(Object.prototype.toString.call(C)=="[object RegExp]")return C.test(E);try{if(E instanceof C)return!0}catch{}return Error.isPrototypeOf(C)?!1:C.call({},E)===!0}function b(E){var C;try{E()}catch(F){C=F}return C}function v(E,C,F,I){var D;if(typeof C!="function")throw new TypeError('"block" argument must be a function');typeof F=="string"&&(I=F,F=null),D=b(C),I=(F&&F.name?" ("+F.name+").":".")+(I?" "+I:"."),E&&!D&&m(D,F,"Missing expected exception"+I);var R=typeof I=="string",O=!E&&e.isError(D),z=!E&&D&&!F;if((O&&R&&g(D,F)||z)&&m(D,F,"Got unwanted exception"+I),E&&D&&F&&!g(D,F)||!E&&D)throw D}s.throws=function(E,C,F){v(!0,E,C,F)},s.doesNotThrow=function(E,C,F){v(!1,E,C,F)},s.ifError=function(E){if(E)throw E};function k(E,C){E||m(E,!0,C,"==",k)}s.strict=f(k,s,{equal:s.strictEqual,deepEqual:s.deepStrictEqual,notEqual:s.notStrictEqual,notDeepEqual:s.notDeepStrictEqual}),s.strict.strict=s.strict;var S=Object.keys||function(E){var C=[];for(var F in E)a.call(E,F)&&C.push(F);return C}}).call(this)}).call(this,typeof Je<"u"?Je:typeof self<"u"?self:typeof window<"u"?window:{})},{"object-assign":247,"util/":78}],76:[function(i,U,V){typeof Object.create=="function"?U.exports=function(f,M){f.super_=M,f.prototype=Object.create(M.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}})}:U.exports=function(f,M){f.super_=M;var T=function(){};T.prototype=M.prototype,f.prototype=new T,f.prototype.constructor=f}},{}],77:[function(i,U,V){U.exports=function(f){return f&&typeof f=="object"&&typeof f.copy=="function"&&typeof f.fill=="function"&&typeof f.readUInt8=="function"}},{}],78:[function(i,U,V){(function(w,f){(function(){var M=/%[sdj%]/g;V.format=function(z){if(!A(z)){for(var B=[],G=0;G<arguments.length;G++)B.push(a(arguments[G]));return B.join(" ")}for(var G=1,Q=arguments,X=Q.length,j=String(z).replace(M,function(ue){if(ue==="%%")return"%";if(G>=X)return ue;switch(ue){case"%s":return String(Q[G++]);case"%d":return Number(Q[G++]);case"%j":try{return JSON.stringify(Q[G++])}catch{return"[Circular]"}default:return ue}}),re=Q[G];G<X;re=Q[++G])l(re)||!v(re)?j+=" "+re:j+=" "+a(re);return j},V.deprecate=function(z,B){if(g(f.process))return function(){return V.deprecate(z,B).apply(this,arguments)};if(w.noDeprecation===!0)return z;var G=!1;function Q(){if(!G){if(w.throwDeprecation)throw new Error(B);w.traceDeprecation?console.trace(B):console.error(B),G=!0}return z.apply(this,arguments)}return Q};var T={},e;V.debuglog=function(z){if(g(e)&&(e=w.env.NODE_DEBUG||""),z=z.toUpperCase(),!T[z])if(new RegExp("\\b"+z+"\\b","i").test(e)){var B=w.pid;T[z]=function(){var G=V.format.apply(V,arguments);console.error("%s %d: %s",z,B,G)}}else T[z]=function(){};return T[z]};function a(z,B){var G={seen:[],stylize:r};return arguments.length>=3&&(G.depth=arguments[2]),arguments.length>=4&&(G.colors=arguments[3]),m(B)?G.showHidden=B:B&&V._extend(G,B),g(G.showHidden)&&(G.showHidden=!1),g(G.depth)&&(G.depth=2),g(G.colors)&&(G.colors=!1),g(G.customInspect)&&(G.customInspect=!0),G.colors&&(G.stylize=n),h(G,z,G.depth)}V.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function n(z,B){var G=a.styles[B];return G?"\x1B["+a.colors[G][0]+"m"+z+"\x1B["+a.colors[G][1]+"m":z}function r(z,B){return z}function t(z){var B={};return z.forEach(function(G,Q){B[G]=!0}),B}function h(z,B,G){if(z.customInspect&&B&&E(B.inspect)&&B.inspect!==V.inspect&&!(B.constructor&&B.constructor.prototype===B)){var Q=B.inspect(G,z);return A(Q)||(Q=h(z,Q,G)),Q}var X=s(z,B);if(X)return X;var j=Object.keys(B),re=t(j);if(z.showHidden&&(j=Object.getOwnPropertyNames(B)),S(B)&&(j.indexOf("message")>=0||j.indexOf("description")>=0))return o(B);if(j.length===0){if(E(B)){var ue=B.name?": "+B.name:"";return z.stylize("[Function"+ue+"]","special")}if(b(B))return z.stylize(RegExp.prototype.toString.call(B),"regexp");if(k(B))return z.stylize(Date.prototype.toString.call(B),"date");if(S(B))return o(B)}var K="",te=!1,Y=["{","}"];if(c(B)&&(te=!0,Y=["[","]"]),E(B)){var H=B.name?": "+B.name:"";K=" [Function"+H+"]"}if(b(B)&&(K=" "+RegExp.prototype.toString.call(B)),k(B)&&(K=" "+Date.prototype.toUTCString.call(B)),S(B)&&(K=" "+o(B)),j.length===0&&(!te||B.length==0))return Y[0]+K+Y[1];if(G<0)return b(B)?z.stylize(RegExp.prototype.toString.call(B),"regexp"):z.stylize("[Object]","special");z.seen.push(B);var ee;return te?ee=y(z,B,G,re,j):ee=j.map(function(ne){return d(z,B,G,re,ne,te)}),z.seen.pop(),p(ee,K,Y)}function s(z,B){if(g(B))return z.stylize("undefined","undefined");if(A(B)){var G="'"+JSON.stringify(B).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return z.stylize(G,"string")}if(u(B))return z.stylize(""+B,"number");if(m(B))return z.stylize(""+B,"boolean");if(l(B))return z.stylize("null","null")}function o(z){return"["+Error.prototype.toString.call(z)+"]"}function y(z,B,G,Q,X){for(var j=[],re=0,ue=B.length;re<ue;++re)O(B,String(re))?j.push(d(z,B,G,Q,String(re),!0)):j.push("");return X.forEach(function(K){K.match(/^\d+$/)||j.push(d(z,B,G,Q,K,!0))}),j}function d(z,B,G,Q,X,j){var re,ue,K;if(K=Object.getOwnPropertyDescriptor(B,X)||{value:B[X]},K.get?K.set?ue=z.stylize("[Getter/Setter]","special"):ue=z.stylize("[Getter]","special"):K.set&&(ue=z.stylize("[Setter]","special")),O(Q,X)||(re="["+X+"]"),ue||(z.seen.indexOf(K.value)<0?(l(G)?ue=h(z,K.value,null):ue=h(z,K.value,G-1),ue.indexOf(`
`)>-1&&(j?ue=ue.split(`
`).map(function(te){return"  "+te}).join(`
`).substr(2):ue=`
`+ue.split(`
`).map(function(te){return"   "+te}).join(`
`))):ue=z.stylize("[Circular]","special")),g(re)){if(j&&X.match(/^\d+$/))return ue;re=JSON.stringify(""+X),re.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(re=re.substr(1,re.length-2),re=z.stylize(re,"name")):(re=re.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),re=z.stylize(re,"string"))}return re+": "+ue}function p(z,B,G){var Q=z.reduce(function(X,j){return j.indexOf(`
`)>=0,X+j.replace(/\u001b\[\d\d?m/g,"").length+1},0);return Q>60?G[0]+(B===""?"":B+`
 `)+" "+z.join(`,
  `)+" "+G[1]:G[0]+B+" "+z.join(", ")+" "+G[1]}function c(z){return Array.isArray(z)}V.isArray=c;function m(z){return typeof z=="boolean"}V.isBoolean=m;function l(z){return z===null}V.isNull=l;function x(z){return z==null}V.isNullOrUndefined=x;function u(z){return typeof z=="number"}V.isNumber=u;function A(z){return typeof z=="string"}V.isString=A;function _(z){return typeof z=="symbol"}V.isSymbol=_;function g(z){return z===void 0}V.isUndefined=g;function b(z){return v(z)&&F(z)==="[object RegExp]"}V.isRegExp=b;function v(z){return typeof z=="object"&&z!==null}V.isObject=v;function k(z){return v(z)&&F(z)==="[object Date]"}V.isDate=k;function S(z){return v(z)&&(F(z)==="[object Error]"||z instanceof Error)}V.isError=S;function E(z){return typeof z=="function"}V.isFunction=E;function C(z){return z===null||typeof z=="boolean"||typeof z=="number"||typeof z=="string"||typeof z=="symbol"||typeof z>"u"}V.isPrimitive=C,V.isBuffer=i("./support/isBuffer");function F(z){return Object.prototype.toString.call(z)}function I(z){return z<10?"0"+z.toString(10):z.toString(10)}var D=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function R(){var z=new Date,B=[I(z.getHours()),I(z.getMinutes()),I(z.getSeconds())].join(":");return[z.getDate(),D[z.getMonth()],B].join(" ")}V.log=function(){console.log("%s - %s",R(),V.format.apply(V,arguments))},V.inherits=i("inherits"),V._extend=function(z,B){if(!B||!v(B))return z;for(var G=Object.keys(B),Q=G.length;Q--;)z[G[Q]]=B[G[Q]];return z};function O(z,B){return Object.prototype.hasOwnProperty.call(z,B)}}).call(this)}).call(this,i("_process"),typeof Je<"u"?Je:typeof self<"u"?self:typeof window<"u"?window:{})},{"./support/isBuffer":77,_process:278,inherits:76}],79:[function(i,U,V){V.byteLength=r,V.toByteArray=h,V.fromByteArray=y;for(var w=[],f=[],M=typeof Uint8Array<"u"?Uint8Array:Array,T="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,a=T.length;e<a;++e)w[e]=T[e],f[T.charCodeAt(e)]=e;f["-".charCodeAt(0)]=62,f["_".charCodeAt(0)]=63;function n(d){var p=d.length;if(p%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var c=d.indexOf("=");c===-1&&(c=p);var m=c===p?0:4-c%4;return[c,m]}function r(d){var p=n(d),c=p[0],m=p[1];return(c+m)*3/4-m}function t(d,p,c){return(p+c)*3/4-c}function h(d){var p,c=n(d),m=c[0],l=c[1],x=new M(t(d,m,l)),u=0,A=l>0?m-4:m,_;for(_=0;_<A;_+=4)p=f[d.charCodeAt(_)]<<18|f[d.charCodeAt(_+1)]<<12|f[d.charCodeAt(_+2)]<<6|f[d.charCodeAt(_+3)],x[u++]=p>>16&255,x[u++]=p>>8&255,x[u++]=p&255;return l===2&&(p=f[d.charCodeAt(_)]<<2|f[d.charCodeAt(_+1)]>>4,x[u++]=p&255),l===1&&(p=f[d.charCodeAt(_)]<<10|f[d.charCodeAt(_+1)]<<4|f[d.charCodeAt(_+2)]>>2,x[u++]=p>>8&255,x[u++]=p&255),x}function s(d){return w[d>>18&63]+w[d>>12&63]+w[d>>6&63]+w[d&63]}function o(d,p,c){for(var m,l=[],x=p;x<c;x+=3)m=(d[x]<<16&16711680)+(d[x+1]<<8&65280)+(d[x+2]&255),l.push(s(m));return l.join("")}function y(d){for(var p,c=d.length,m=c%3,l=[],x=16383,u=0,A=c-m;u<A;u+=x)l.push(o(d,u,u+x>A?A:u+x));return m===1?(p=d[c-1],l.push(w[p>>2]+w[p<<4&63]+"==")):m===2&&(p=(d[c-2]<<8)+d[c-1],l.push(w[p>>10]+w[p>>4&63]+w[p<<2&63]+"=")),l.join("")}},{}],80:[function(i,U,V){function w(n,r,t,h,s){for(var o=s+1;h<=s;){var y=h+s>>>1,d=n[y],p=t!==void 0?t(d,r):d-r;p>=0?(o=y,s=y-1):h=y+1}return o}function f(n,r,t,h,s){for(var o=s+1;h<=s;){var y=h+s>>>1,d=n[y],p=t!==void 0?t(d,r):d-r;p>0?(o=y,s=y-1):h=y+1}return o}function M(n,r,t,h,s){for(var o=h-1;h<=s;){var y=h+s>>>1,d=n[y],p=t!==void 0?t(d,r):d-r;p<0?(o=y,h=y+1):s=y-1}return o}function T(n,r,t,h,s){for(var o=h-1;h<=s;){var y=h+s>>>1,d=n[y],p=t!==void 0?t(d,r):d-r;p<=0?(o=y,h=y+1):s=y-1}return o}function e(n,r,t,h,s){for(;h<=s;){var o=h+s>>>1,y=n[o],d=t!==void 0?t(y,r):y-r;if(d===0)return o;d<=0?h=o+1:s=o-1}return-1}function a(n,r,t,h,s,o){return typeof t=="function"?o(n,r,t,h===void 0?0:h|0,s===void 0?n.length-1:s|0):o(n,r,void 0,t===void 0?0:t|0,h===void 0?n.length-1:h|0)}U.exports={ge:function(n,r,t,h,s){return a(n,r,t,h,s,w)},gt:function(n,r,t,h,s){return a(n,r,t,h,s,f)},lt:function(n,r,t,h,s){return a(n,r,t,h,s,M)},le:function(n,r,t,h,s){return a(n,r,t,h,s,T)},eq:function(n,r,t,h,s){return a(n,r,t,h,s,e)}}},{}],81:[function(i,U,V){var w=32;V.INT_BITS=w,V.INT_MAX=2147483647,V.INT_MIN=-1<<w-1,V.sign=function(T){return(T>0)-(T<0)},V.abs=function(T){var e=T>>w-1;return(T^e)-e},V.min=function(T,e){return e^(T^e)&-(T<e)},V.max=function(T,e){return T^(T^e)&-(T<e)},V.isPow2=function(T){return!(T&T-1)&&!!T},V.log2=function(T){var e,a;return e=(T>65535)<<4,T>>>=e,a=(T>255)<<3,T>>>=a,e|=a,a=(T>15)<<2,T>>>=a,e|=a,a=(T>3)<<1,T>>>=a,e|=a,e|T>>1},V.log10=function(T){return T>=1e9?9:T>=1e8?8:T>=1e7?7:T>=1e6?6:T>=1e5?5:T>=1e4?4:T>=1e3?3:T>=100?2:T>=10?1:0},V.popCount=function(T){return T=T-(T>>>1&1431655765),T=(T&858993459)+(T>>>2&858993459),(T+(T>>>4)&252645135)*16843009>>>24};function f(T){var e=32;return T&=-T,T&&e--,T&65535&&(e-=16),T&16711935&&(e-=8),T&252645135&&(e-=4),T&858993459&&(e-=2),T&1431655765&&(e-=1),e}V.countTrailingZeros=f,V.nextPow2=function(T){return T+=T===0,--T,T|=T>>>1,T|=T>>>2,T|=T>>>4,T|=T>>>8,T|=T>>>16,T+1},V.prevPow2=function(T){return T|=T>>>1,T|=T>>>2,T|=T>>>4,T|=T>>>8,T|=T>>>16,T-(T>>>1)},V.parity=function(T){return T^=T>>>16,T^=T>>>8,T^=T>>>4,T&=15,27030>>>T&1};var M=new Array(256);(function(T){for(var e=0;e<256;++e){var a=e,n=e,r=7;for(a>>>=1;a;a>>>=1)n<<=1,n|=a&1,--r;T[e]=n<<r&255}})(M),V.reverse=function(T){return M[T&255]<<24|M[T>>>8&255]<<16|M[T>>>16&255]<<8|M[T>>>24&255]},V.interleave2=function(T,e){return T&=65535,T=(T|T<<8)&16711935,T=(T|T<<4)&252645135,T=(T|T<<2)&858993459,T=(T|T<<1)&1431655765,e&=65535,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,T|e<<1},V.deinterleave2=function(T,e){return T=T>>>e&1431655765,T=(T|T>>>1)&858993459,T=(T|T>>>2)&252645135,T=(T|T>>>4)&16711935,T=(T|T>>>16)&65535,T<<16>>16},V.interleave3=function(T,e,a){return T&=1023,T=(T|T<<16)&4278190335,T=(T|T<<8)&251719695,T=(T|T<<4)&3272356035,T=(T|T<<2)&1227133513,e&=1023,e=(e|e<<16)&4278190335,e=(e|e<<8)&251719695,e=(e|e<<4)&3272356035,e=(e|e<<2)&1227133513,T|=e<<1,a&=1023,a=(a|a<<16)&4278190335,a=(a|a<<8)&251719695,a=(a|a<<4)&3272356035,a=(a|a<<2)&1227133513,T|a<<2},V.deinterleave3=function(T,e){return T=T>>>e&1227133513,T=(T|T>>>2)&3272356035,T=(T|T>>>4)&251719695,T=(T|T>>>8)&4278190335,T=(T|T>>>16)&1023,T<<22>>22},V.nextCombination=function(T){var e=T|T-1;return e+1|(~e&-~e)-1>>>f(T)+1}},{}],82:[function(i,U,V){var w=i("clamp");U.exports=M;var f=1e20;function M(a,n){n||(n={});var r=n.cutoff==null?.25:n.cutoff,t=n.radius==null?8:n.radius,h=n.channel||0,s,o,y,d,p,c,m,l,x,u,A;if(ArrayBuffer.isView(a)||Array.isArray(a)){if(!n.width||!n.height)throw Error("For raw data width and height should be provided by options");s=n.width,o=n.height,d=a,n.stride?c=n.stride:c=Math.floor(a.length/s/o)}else window.HTMLCanvasElement&&a instanceof window.HTMLCanvasElement?(l=a,m=l.getContext("2d"),s=l.width,o=l.height,x=m.getImageData(0,0,s,o),d=x.data,c=4):window.CanvasRenderingContext2D&&a instanceof window.CanvasRenderingContext2D?(l=a.canvas,m=a,s=l.width,o=l.height,x=m.getImageData(0,0,s,o),d=x.data,c=4):window.ImageData&&a instanceof window.ImageData&&(x=a,s=a.width,o=a.height,d=x.data,c=4);if(y=Math.max(s,o),window.Uint8ClampedArray&&d instanceof window.Uint8ClampedArray||window.Uint8Array&&d instanceof window.Uint8Array)for(p=d,d=Array(s*o),u=0,A=p.length;u<A;u++)d[u]=p[u*c+h]/255;else if(c!==1)throw Error("Raw data can have only 1 value per pixel");var _=Array(s*o),g=Array(s*o),b=Array(y),v=Array(y),k=Array(y+1),S=Array(y);for(u=0,A=s*o;u<A;u++){var E=d[u];_[u]=E===1?0:E===0?f:Math.pow(Math.max(0,.5-E),2),g[u]=E===1?f:E===0?0:Math.pow(Math.max(0,E-.5),2)}T(_,s,o,b,v,S,k),T(g,s,o,b,v,S,k);var C=window.Float32Array?new Float32Array(s*o):new Array(s*o);for(u=0,A=s*o;u<A;u++)C[u]=w(1-((_[u]-g[u])/t+r),0,1);return C}function T(a,n,r,t,h,s,o){for(var y=0;y<n;y++){for(var d=0;d<r;d++)t[d]=a[d*n+y];for(e(t,h,s,o,r),d=0;d<r;d++)a[d*n+y]=h[d]}for(d=0;d<r;d++){for(y=0;y<n;y++)t[y]=a[d*n+y];for(e(t,h,s,o,n),y=0;y<n;y++)a[d*n+y]=Math.sqrt(h[y])}}function e(a,n,r,t,h){r[0]=0,t[0]=-f,t[1]=+f;for(var s=1,o=0;s<h;s++){for(var y=(a[s]+s*s-(a[r[o]]+r[o]*r[o]))/(2*s-2*r[o]);y<=t[o];)o--,y=(a[s]+s*s-(a[r[o]]+r[o]*r[o]))/(2*s-2*r[o]);o++,r[o]=s,t[o]=y,t[o+1]=+f}for(s=0,o=0;s<h;s++){for(;t[o+1]<s;)o++;n[s]=(s-r[o])*(s-r[o])+a[r[o]]}}},{clamp:86}],83:[function(i,U,V){},{}],84:[function(i,U,V){var w=typeof Reflect=="object"?Reflect:null,f=w&&typeof w.apply=="function"?w.apply:function(u,A,_){return Function.prototype.apply.call(u,A,_)},M;w&&typeof w.ownKeys=="function"?M=w.ownKeys:Object.getOwnPropertySymbols?M=function(u){return Object.getOwnPropertyNames(u).concat(Object.getOwnPropertySymbols(u))}:M=function(u){return Object.getOwnPropertyNames(u)};function T(x){console&&console.warn&&console.warn(x)}var e=Number.isNaN||function(u){return u!==u};function a(){a.init.call(this)}U.exports=a,U.exports.once=l,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var n=10;function r(x){if(typeof x!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof x)}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return n},set:function(x){if(typeof x!="number"||x<0||e(x))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+x+".");n=x}}),a.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(u){if(typeof u!="number"||u<0||e(u))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+u+".");return this._maxListeners=u,this};function t(x){return x._maxListeners===void 0?a.defaultMaxListeners:x._maxListeners}a.prototype.getMaxListeners=function(){return t(this)},a.prototype.emit=function(u){for(var A=[],_=1;_<arguments.length;_++)A.push(arguments[_]);var g=u==="error",b=this._events;if(b!==void 0)g=g&&b.error===void 0;else if(!g)return!1;if(g){var v;if(A.length>0&&(v=A[0]),v instanceof Error)throw v;var k=new Error("Unhandled error."+(v?" ("+v.message+")":""));throw k.context=v,k}var S=b[u];if(S===void 0)return!1;if(typeof S=="function")f(S,this,A);else for(var E=S.length,C=p(S,E),_=0;_<E;++_)f(C[_],this,A);return!0};function h(x,u,A,_){var g,b,v;if(r(A),b=x._events,b===void 0?(b=x._events=Object.create(null),x._eventsCount=0):(b.newListener!==void 0&&(x.emit("newListener",u,A.listener?A.listener:A),b=x._events),v=b[u]),v===void 0)v=b[u]=A,++x._eventsCount;else if(typeof v=="function"?v=b[u]=_?[A,v]:[v,A]:_?v.unshift(A):v.push(A),g=t(x),g>0&&v.length>g&&!v.warned){v.warned=!0;var k=new Error("Possible EventEmitter memory leak detected. "+v.length+" "+String(u)+" listeners added. Use emitter.setMaxListeners() to increase limit");k.name="MaxListenersExceededWarning",k.emitter=x,k.type=u,k.count=v.length,T(k)}return x}a.prototype.addListener=function(u,A){return h(this,u,A,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(u,A){return h(this,u,A,!0)};function s(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function o(x,u,A){var _={fired:!1,wrapFn:void 0,target:x,type:u,listener:A},g=s.bind(_);return g.listener=A,_.wrapFn=g,g}a.prototype.once=function(u,A){return r(A),this.on(u,o(this,u,A)),this},a.prototype.prependOnceListener=function(u,A){return r(A),this.prependListener(u,o(this,u,A)),this},a.prototype.removeListener=function(u,A){var _,g,b,v,k;if(r(A),g=this._events,g===void 0)return this;if(_=g[u],_===void 0)return this;if(_===A||_.listener===A)--this._eventsCount===0?this._events=Object.create(null):(delete g[u],g.removeListener&&this.emit("removeListener",u,_.listener||A));else if(typeof _!="function"){for(b=-1,v=_.length-1;v>=0;v--)if(_[v]===A||_[v].listener===A){k=_[v].listener,b=v;break}if(b<0)return this;b===0?_.shift():c(_,b),_.length===1&&(g[u]=_[0]),g.removeListener!==void 0&&this.emit("removeListener",u,k||A)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(u){var A,_,g;if(_=this._events,_===void 0)return this;if(_.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):_[u]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete _[u]),this;if(arguments.length===0){var b=Object.keys(_),v;for(g=0;g<b.length;++g)v=b[g],v!=="removeListener"&&this.removeAllListeners(v);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(A=_[u],typeof A=="function")this.removeListener(u,A);else if(A!==void 0)for(g=A.length-1;g>=0;g--)this.removeListener(u,A[g]);return this};function y(x,u,A){var _=x._events;if(_===void 0)return[];var g=_[u];return g===void 0?[]:typeof g=="function"?A?[g.listener||g]:[g]:A?m(g):p(g,g.length)}a.prototype.listeners=function(u){return y(this,u,!0)},a.prototype.rawListeners=function(u){return y(this,u,!1)},a.listenerCount=function(x,u){return typeof x.listenerCount=="function"?x.listenerCount(u):d.call(x,u)},a.prototype.listenerCount=d;function d(x){var u=this._events;if(u!==void 0){var A=u[x];if(typeof A=="function")return 1;if(A!==void 0)return A.length}return 0}a.prototype.eventNames=function(){return this._eventsCount>0?M(this._events):[]};function p(x,u){for(var A=new Array(u),_=0;_<u;++_)A[_]=x[_];return A}function c(x,u){for(;u+1<x.length;u++)x[u]=x[u+1];x.pop()}function m(x){for(var u=new Array(x.length),A=0;A<u.length;++A)u[A]=x[A].listener||x[A];return u}function l(x,u){return new Promise(function(A,_){function g(){b!==void 0&&x.removeListener("error",b),A([].slice.call(arguments))}var b;u!=="error"&&(b=function(k){x.removeListener(u,g),_(k)},x.once("error",b)),x.once(u,g)})}},{}],85:[function(i,U,V){(function(w){(function(){var f=i("base64-js"),M=i("ieee754");V.Buffer=n,V.SlowBuffer=m,V.INSPECT_MAX_BYTES=50;var T=2147483647;V.kMaxLength=T,n.TYPED_ARRAY_SUPPORT=e(),!n.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function e(){try{var se=new Uint8Array(1);return se.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},se.foo()===42}catch{return!1}}Object.defineProperty(n.prototype,"parent",{enumerable:!0,get:function(){if(!!n.isBuffer(this))return this.buffer}}),Object.defineProperty(n.prototype,"offset",{enumerable:!0,get:function(){if(!!n.isBuffer(this))return this.byteOffset}});function a(se){if(se>T)throw new RangeError('The value "'+se+'" is invalid for option "size"');var ae=new Uint8Array(se);return ae.__proto__=n.prototype,ae}function n(se,ae,oe){if(typeof se=="number"){if(typeof ae=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return s(se)}return r(se,ae,oe)}typeof Symbol<"u"&&Symbol.species!=null&&n[Symbol.species]===n&&Object.defineProperty(n,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),n.poolSize=8192;function r(se,ae,oe){if(typeof se=="string")return o(se,ae);if(ArrayBuffer.isView(se))return y(se);if(se==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof se);if(q(se,ArrayBuffer)||se&&q(se.buffer,ArrayBuffer))return d(se,ae,oe);if(typeof se=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var be=se.valueOf&&se.valueOf();if(be!=null&&be!==se)return n.from(be,ae,oe);var ce=p(se);if(ce)return ce;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof se[Symbol.toPrimitive]=="function")return n.from(se[Symbol.toPrimitive]("string"),ae,oe);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof se)}n.from=function(se,ae,oe){return r(se,ae,oe)},n.prototype.__proto__=Uint8Array.prototype,n.__proto__=Uint8Array;function t(se){if(typeof se!="number")throw new TypeError('"size" argument must be of type number');if(se<0)throw new RangeError('The value "'+se+'" is invalid for option "size"')}function h(se,ae,oe){return t(se),se<=0?a(se):ae!==void 0?typeof oe=="string"?a(se).fill(ae,oe):a(se).fill(ae):a(se)}n.alloc=function(se,ae,oe){return h(se,ae,oe)};function s(se){return t(se),a(se<0?0:c(se)|0)}n.allocUnsafe=function(se){return s(se)},n.allocUnsafeSlow=function(se){return s(se)};function o(se,ae){if((typeof ae!="string"||ae==="")&&(ae="utf8"),!n.isEncoding(ae))throw new TypeError("Unknown encoding: "+ae);var oe=l(se,ae)|0,be=a(oe),ce=be.write(se,ae);return ce!==oe&&(be=be.slice(0,ce)),be}function y(se){for(var ae=se.length<0?0:c(se.length)|0,oe=a(ae),be=0;be<ae;be+=1)oe[be]=se[be]&255;return oe}function d(se,ae,oe){if(ae<0||se.byteLength<ae)throw new RangeError('"offset" is outside of buffer bounds');if(se.byteLength<ae+(oe||0))throw new RangeError('"length" is outside of buffer bounds');var be;return ae===void 0&&oe===void 0?be=new Uint8Array(se):oe===void 0?be=new Uint8Array(se,ae):be=new Uint8Array(se,ae,oe),be.__proto__=n.prototype,be}function p(se){if(n.isBuffer(se)){var ae=c(se.length)|0,oe=a(ae);return oe.length===0||se.copy(oe,0,0,ae),oe}if(se.length!==void 0)return typeof se.length!="number"||ie(se.length)?a(0):y(se);if(se.type==="Buffer"&&Array.isArray(se.data))return y(se.data)}function c(se){if(se>=T)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+T.toString(16)+" bytes");return se|0}function m(se){return+se!=se&&(se=0),n.alloc(+se)}n.isBuffer=function(ae){return ae!=null&&ae._isBuffer===!0&&ae!==n.prototype},n.compare=function(ae,oe){if(q(ae,Uint8Array)&&(ae=n.from(ae,ae.offset,ae.byteLength)),q(oe,Uint8Array)&&(oe=n.from(oe,oe.offset,oe.byteLength)),!n.isBuffer(ae)||!n.isBuffer(oe))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(ae===oe)return 0;for(var be=ae.length,ce=oe.length,de=0,ye=Math.min(be,ce);de<ye;++de)if(ae[de]!==oe[de]){be=ae[de],ce=oe[de];break}return be<ce?-1:ce<be?1:0},n.isEncoding=function(ae){switch(String(ae).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},n.concat=function(ae,oe){if(!Array.isArray(ae))throw new TypeError('"list" argument must be an Array of Buffers');if(ae.length===0)return n.alloc(0);var be;if(oe===void 0)for(oe=0,be=0;be<ae.length;++be)oe+=ae[be].length;var ce=n.allocUnsafe(oe),de=0;for(be=0;be<ae.length;++be){var ye=ae[be];if(q(ye,Uint8Array)&&(ye=n.from(ye)),!n.isBuffer(ye))throw new TypeError('"list" argument must be an Array of Buffers');ye.copy(ce,de),de+=ye.length}return ce};function l(se,ae){if(n.isBuffer(se))return se.length;if(ArrayBuffer.isView(se)||q(se,ArrayBuffer))return se.byteLength;if(typeof se!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof se);var oe=se.length,be=arguments.length>2&&arguments[2]===!0;if(!be&&oe===0)return 0;for(var ce=!1;;)switch(ae){case"ascii":case"latin1":case"binary":return oe;case"utf8":case"utf-8":return Y(se).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return oe*2;case"hex":return oe>>>1;case"base64":return ne(se).length;default:if(ce)return be?-1:Y(se).length;ae=(""+ae).toLowerCase(),ce=!0}}n.byteLength=l;function x(se,ae,oe){var be=!1;if((ae===void 0||ae<0)&&(ae=0),ae>this.length||((oe===void 0||oe>this.length)&&(oe=this.length),oe<=0)||(oe>>>=0,ae>>>=0,oe<=ae))return"";for(se||(se="utf8");;)switch(se){case"hex":return z(this,ae,oe);case"utf8":case"utf-8":return F(this,ae,oe);case"ascii":return R(this,ae,oe);case"latin1":case"binary":return O(this,ae,oe);case"base64":return C(this,ae,oe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,ae,oe);default:if(be)throw new TypeError("Unknown encoding: "+se);se=(se+"").toLowerCase(),be=!0}}n.prototype._isBuffer=!0;function u(se,ae,oe){var be=se[ae];se[ae]=se[oe],se[oe]=be}n.prototype.swap16=function(){var ae=this.length;if(ae%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var oe=0;oe<ae;oe+=2)u(this,oe,oe+1);return this},n.prototype.swap32=function(){var ae=this.length;if(ae%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var oe=0;oe<ae;oe+=4)u(this,oe,oe+3),u(this,oe+1,oe+2);return this},n.prototype.swap64=function(){var ae=this.length;if(ae%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var oe=0;oe<ae;oe+=8)u(this,oe,oe+7),u(this,oe+1,oe+6),u(this,oe+2,oe+5),u(this,oe+3,oe+4);return this},n.prototype.toString=function(){var ae=this.length;return ae===0?"":arguments.length===0?F(this,0,ae):x.apply(this,arguments)},n.prototype.toLocaleString=n.prototype.toString,n.prototype.equals=function(ae){if(!n.isBuffer(ae))throw new TypeError("Argument must be a Buffer");return this===ae?!0:n.compare(this,ae)===0},n.prototype.inspect=function(){var ae="",oe=V.INSPECT_MAX_BYTES;return ae=this.toString("hex",0,oe).replace(/(.{2})/g,"$1 ").trim(),this.length>oe&&(ae+=" ... "),"<Buffer "+ae+">"},n.prototype.compare=function(ae,oe,be,ce,de){if(q(ae,Uint8Array)&&(ae=n.from(ae,ae.offset,ae.byteLength)),!n.isBuffer(ae))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof ae);if(oe===void 0&&(oe=0),be===void 0&&(be=ae?ae.length:0),ce===void 0&&(ce=0),de===void 0&&(de=this.length),oe<0||be>ae.length||ce<0||de>this.length)throw new RangeError("out of range index");if(ce>=de&&oe>=be)return 0;if(ce>=de)return-1;if(oe>=be)return 1;if(oe>>>=0,be>>>=0,ce>>>=0,de>>>=0,this===ae)return 0;for(var ye=de-ce,ge=be-oe,me=Math.min(ye,ge),Se=this.slice(ce,de),Le=ae.slice(oe,be),Oe=0;Oe<me;++Oe)if(Se[Oe]!==Le[Oe]){ye=Se[Oe],ge=Le[Oe];break}return ye<ge?-1:ge<ye?1:0};function A(se,ae,oe,be,ce){if(se.length===0)return-1;if(typeof oe=="string"?(be=oe,oe=0):oe>2147483647?oe=2147483647:oe<-2147483648&&(oe=-2147483648),oe=+oe,ie(oe)&&(oe=ce?0:se.length-1),oe<0&&(oe=se.length+oe),oe>=se.length){if(ce)return-1;oe=se.length-1}else if(oe<0)if(ce)oe=0;else return-1;if(typeof ae=="string"&&(ae=n.from(ae,be)),n.isBuffer(ae))return ae.length===0?-1:_(se,ae,oe,be,ce);if(typeof ae=="number")return ae=ae&255,typeof Uint8Array.prototype.indexOf=="function"?ce?Uint8Array.prototype.indexOf.call(se,ae,oe):Uint8Array.prototype.lastIndexOf.call(se,ae,oe):_(se,[ae],oe,be,ce);throw new TypeError("val must be string, number or Buffer")}function _(se,ae,oe,be,ce){var de=1,ye=se.length,ge=ae.length;if(be!==void 0&&(be=String(be).toLowerCase(),be==="ucs2"||be==="ucs-2"||be==="utf16le"||be==="utf-16le")){if(se.length<2||ae.length<2)return-1;de=2,ye/=2,ge/=2,oe/=2}function me(Ce,Ke){return de===1?Ce[Ke]:Ce.readUInt16BE(Ke*de)}var Se;if(ce){var Le=-1;for(Se=oe;Se<ye;Se++)if(me(se,Se)===me(ae,Le===-1?0:Se-Le)){if(Le===-1&&(Le=Se),Se-Le+1===ge)return Le*de}else Le!==-1&&(Se-=Se-Le),Le=-1}else for(oe+ge>ye&&(oe=ye-ge),Se=oe;Se>=0;Se--){for(var Oe=!0,we=0;we<ge;we++)if(me(se,Se+we)!==me(ae,we)){Oe=!1;break}if(Oe)return Se}return-1}n.prototype.includes=function(ae,oe,be){return this.indexOf(ae,oe,be)!==-1},n.prototype.indexOf=function(ae,oe,be){return A(this,ae,oe,be,!0)},n.prototype.lastIndexOf=function(ae,oe,be){return A(this,ae,oe,be,!1)};function g(se,ae,oe,be){oe=Number(oe)||0;var ce=se.length-oe;be?(be=Number(be),be>ce&&(be=ce)):be=ce;var de=ae.length;be>de/2&&(be=de/2);for(var ye=0;ye<be;++ye){var ge=parseInt(ae.substr(ye*2,2),16);if(ie(ge))return ye;se[oe+ye]=ge}return ye}function b(se,ae,oe,be){return Z(Y(ae,se.length-oe),se,oe,be)}function v(se,ae,oe,be){return Z(H(ae),se,oe,be)}function k(se,ae,oe,be){return v(se,ae,oe,be)}function S(se,ae,oe,be){return Z(ne(ae),se,oe,be)}function E(se,ae,oe,be){return Z(ee(ae,se.length-oe),se,oe,be)}n.prototype.write=function(ae,oe,be,ce){if(oe===void 0)ce="utf8",be=this.length,oe=0;else if(be===void 0&&typeof oe=="string")ce=oe,be=this.length,oe=0;else if(isFinite(oe))oe=oe>>>0,isFinite(be)?(be=be>>>0,ce===void 0&&(ce="utf8")):(ce=be,be=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var de=this.length-oe;if((be===void 0||be>de)&&(be=de),ae.length>0&&(be<0||oe<0)||oe>this.length)throw new RangeError("Attempt to write outside buffer bounds");ce||(ce="utf8");for(var ye=!1;;)switch(ce){case"hex":return g(this,ae,oe,be);case"utf8":case"utf-8":return b(this,ae,oe,be);case"ascii":return v(this,ae,oe,be);case"latin1":case"binary":return k(this,ae,oe,be);case"base64":return S(this,ae,oe,be);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,ae,oe,be);default:if(ye)throw new TypeError("Unknown encoding: "+ce);ce=(""+ce).toLowerCase(),ye=!0}},n.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function C(se,ae,oe){return ae===0&&oe===se.length?f.fromByteArray(se):f.fromByteArray(se.slice(ae,oe))}function F(se,ae,oe){oe=Math.min(se.length,oe);for(var be=[],ce=ae;ce<oe;){var de=se[ce],ye=null,ge=de>239?4:de>223?3:de>191?2:1;if(ce+ge<=oe){var me,Se,Le,Oe;switch(ge){case 1:de<128&&(ye=de);break;case 2:me=se[ce+1],(me&192)===128&&(Oe=(de&31)<<6|me&63,Oe>127&&(ye=Oe));break;case 3:me=se[ce+1],Se=se[ce+2],(me&192)===128&&(Se&192)===128&&(Oe=(de&15)<<12|(me&63)<<6|Se&63,Oe>2047&&(Oe<55296||Oe>57343)&&(ye=Oe));break;case 4:me=se[ce+1],Se=se[ce+2],Le=se[ce+3],(me&192)===128&&(Se&192)===128&&(Le&192)===128&&(Oe=(de&15)<<18|(me&63)<<12|(Se&63)<<6|Le&63,Oe>65535&&Oe<1114112&&(ye=Oe))}}ye===null?(ye=65533,ge=1):ye>65535&&(ye-=65536,be.push(ye>>>10&1023|55296),ye=56320|ye&1023),be.push(ye),ce+=ge}return D(be)}var I=4096;function D(se){var ae=se.length;if(ae<=I)return String.fromCharCode.apply(String,se);for(var oe="",be=0;be<ae;)oe+=String.fromCharCode.apply(String,se.slice(be,be+=I));return oe}function R(se,ae,oe){var be="";oe=Math.min(se.length,oe);for(var ce=ae;ce<oe;++ce)be+=String.fromCharCode(se[ce]&127);return be}function O(se,ae,oe){var be="";oe=Math.min(se.length,oe);for(var ce=ae;ce<oe;++ce)be+=String.fromCharCode(se[ce]);return be}function z(se,ae,oe){var be=se.length;(!ae||ae<0)&&(ae=0),(!oe||oe<0||oe>be)&&(oe=be);for(var ce="",de=ae;de<oe;++de)ce+=te(se[de]);return ce}function B(se,ae,oe){for(var be=se.slice(ae,oe),ce="",de=0;de<be.length;de+=2)ce+=String.fromCharCode(be[de]+be[de+1]*256);return ce}n.prototype.slice=function(ae,oe){var be=this.length;ae=~~ae,oe=oe===void 0?be:~~oe,ae<0?(ae+=be,ae<0&&(ae=0)):ae>be&&(ae=be),oe<0?(oe+=be,oe<0&&(oe=0)):oe>be&&(oe=be),oe<ae&&(oe=ae);var ce=this.subarray(ae,oe);return ce.__proto__=n.prototype,ce};function G(se,ae,oe){if(se%1!==0||se<0)throw new RangeError("offset is not uint");if(se+ae>oe)throw new RangeError("Trying to access beyond buffer length")}n.prototype.readUIntLE=function(ae,oe,be){ae=ae>>>0,oe=oe>>>0,be||G(ae,oe,this.length);for(var ce=this[ae],de=1,ye=0;++ye<oe&&(de*=256);)ce+=this[ae+ye]*de;return ce},n.prototype.readUIntBE=function(ae,oe,be){ae=ae>>>0,oe=oe>>>0,be||G(ae,oe,this.length);for(var ce=this[ae+--oe],de=1;oe>0&&(de*=256);)ce+=this[ae+--oe]*de;return ce},n.prototype.readUInt8=function(ae,oe){return ae=ae>>>0,oe||G(ae,1,this.length),this[ae]},n.prototype.readUInt16LE=function(ae,oe){return ae=ae>>>0,oe||G(ae,2,this.length),this[ae]|this[ae+1]<<8},n.prototype.readUInt16BE=function(ae,oe){return ae=ae>>>0,oe||G(ae,2,this.length),this[ae]<<8|this[ae+1]},n.prototype.readUInt32LE=function(ae,oe){return ae=ae>>>0,oe||G(ae,4,this.length),(this[ae]|this[ae+1]<<8|this[ae+2]<<16)+this[ae+3]*16777216},n.prototype.readUInt32BE=function(ae,oe){return ae=ae>>>0,oe||G(ae,4,this.length),this[ae]*16777216+(this[ae+1]<<16|this[ae+2]<<8|this[ae+3])},n.prototype.readIntLE=function(ae,oe,be){ae=ae>>>0,oe=oe>>>0,be||G(ae,oe,this.length);for(var ce=this[ae],de=1,ye=0;++ye<oe&&(de*=256);)ce+=this[ae+ye]*de;return de*=128,ce>=de&&(ce-=Math.pow(2,8*oe)),ce},n.prototype.readIntBE=function(ae,oe,be){ae=ae>>>0,oe=oe>>>0,be||G(ae,oe,this.length);for(var ce=oe,de=1,ye=this[ae+--ce];ce>0&&(de*=256);)ye+=this[ae+--ce]*de;return de*=128,ye>=de&&(ye-=Math.pow(2,8*oe)),ye},n.prototype.readInt8=function(ae,oe){return ae=ae>>>0,oe||G(ae,1,this.length),this[ae]&128?(255-this[ae]+1)*-1:this[ae]},n.prototype.readInt16LE=function(ae,oe){ae=ae>>>0,oe||G(ae,2,this.length);var be=this[ae]|this[ae+1]<<8;return be&32768?be|4294901760:be},n.prototype.readInt16BE=function(ae,oe){ae=ae>>>0,oe||G(ae,2,this.length);var be=this[ae+1]|this[ae]<<8;return be&32768?be|4294901760:be},n.prototype.readInt32LE=function(ae,oe){return ae=ae>>>0,oe||G(ae,4,this.length),this[ae]|this[ae+1]<<8|this[ae+2]<<16|this[ae+3]<<24},n.prototype.readInt32BE=function(ae,oe){return ae=ae>>>0,oe||G(ae,4,this.length),this[ae]<<24|this[ae+1]<<16|this[ae+2]<<8|this[ae+3]},n.prototype.readFloatLE=function(ae,oe){return ae=ae>>>0,oe||G(ae,4,this.length),M.read(this,ae,!0,23,4)},n.prototype.readFloatBE=function(ae,oe){return ae=ae>>>0,oe||G(ae,4,this.length),M.read(this,ae,!1,23,4)},n.prototype.readDoubleLE=function(ae,oe){return ae=ae>>>0,oe||G(ae,8,this.length),M.read(this,ae,!0,52,8)},n.prototype.readDoubleBE=function(ae,oe){return ae=ae>>>0,oe||G(ae,8,this.length),M.read(this,ae,!1,52,8)};function Q(se,ae,oe,be,ce,de){if(!n.isBuffer(se))throw new TypeError('"buffer" argument must be a Buffer instance');if(ae>ce||ae<de)throw new RangeError('"value" argument is out of bounds');if(oe+be>se.length)throw new RangeError("Index out of range")}n.prototype.writeUIntLE=function(ae,oe,be,ce){if(ae=+ae,oe=oe>>>0,be=be>>>0,!ce){var de=Math.pow(2,8*be)-1;Q(this,ae,oe,be,de,0)}var ye=1,ge=0;for(this[oe]=ae&255;++ge<be&&(ye*=256);)this[oe+ge]=ae/ye&255;return oe+be},n.prototype.writeUIntBE=function(ae,oe,be,ce){if(ae=+ae,oe=oe>>>0,be=be>>>0,!ce){var de=Math.pow(2,8*be)-1;Q(this,ae,oe,be,de,0)}var ye=be-1,ge=1;for(this[oe+ye]=ae&255;--ye>=0&&(ge*=256);)this[oe+ye]=ae/ge&255;return oe+be},n.prototype.writeUInt8=function(ae,oe,be){return ae=+ae,oe=oe>>>0,be||Q(this,ae,oe,1,255,0),this[oe]=ae&255,oe+1},n.prototype.writeUInt16LE=function(ae,oe,be){return ae=+ae,oe=oe>>>0,be||Q(this,ae,oe,2,65535,0),this[oe]=ae&255,this[oe+1]=ae>>>8,oe+2},n.prototype.writeUInt16BE=function(ae,oe,be){return ae=+ae,oe=oe>>>0,be||Q(this,ae,oe,2,65535,0),this[oe]=ae>>>8,this[oe+1]=ae&255,oe+2},n.prototype.writeUInt32LE=function(ae,oe,be){return ae=+ae,oe=oe>>>0,be||Q(this,ae,oe,4,4294967295,0),this[oe+3]=ae>>>24,this[oe+2]=ae>>>16,this[oe+1]=ae>>>8,this[oe]=ae&255,oe+4},n.prototype.writeUInt32BE=function(ae,oe,be){return ae=+ae,oe=oe>>>0,be||Q(this,ae,oe,4,4294967295,0),this[oe]=ae>>>24,this[oe+1]=ae>>>16,this[oe+2]=ae>>>8,this[oe+3]=ae&255,oe+4},n.prototype.writeIntLE=function(ae,oe,be,ce){if(ae=+ae,oe=oe>>>0,!ce){var de=Math.pow(2,8*be-1);Q(this,ae,oe,be,de-1,-de)}var ye=0,ge=1,me=0;for(this[oe]=ae&255;++ye<be&&(ge*=256);)ae<0&&me===0&&this[oe+ye-1]!==0&&(me=1),this[oe+ye]=(ae/ge>>0)-me&255;return oe+be},n.prototype.writeIntBE=function(ae,oe,be,ce){if(ae=+ae,oe=oe>>>0,!ce){var de=Math.pow(2,8*be-1);Q(this,ae,oe,be,de-1,-de)}var ye=be-1,ge=1,me=0;for(this[oe+ye]=ae&255;--ye>=0&&(ge*=256);)ae<0&&me===0&&this[oe+ye+1]!==0&&(me=1),this[oe+ye]=(ae/ge>>0)-me&255;return oe+be},n.prototype.writeInt8=function(ae,oe,be){return ae=+ae,oe=oe>>>0,be||Q(this,ae,oe,1,127,-128),ae<0&&(ae=255+ae+1),this[oe]=ae&255,oe+1},n.prototype.writeInt16LE=function(ae,oe,be){return ae=+ae,oe=oe>>>0,be||Q(this,ae,oe,2,32767,-32768),this[oe]=ae&255,this[oe+1]=ae>>>8,oe+2},n.prototype.writeInt16BE=function(ae,oe,be){return ae=+ae,oe=oe>>>0,be||Q(this,ae,oe,2,32767,-32768),this[oe]=ae>>>8,this[oe+1]=ae&255,oe+2},n.prototype.writeInt32LE=function(ae,oe,be){return ae=+ae,oe=oe>>>0,be||Q(this,ae,oe,4,2147483647,-2147483648),this[oe]=ae&255,this[oe+1]=ae>>>8,this[oe+2]=ae>>>16,this[oe+3]=ae>>>24,oe+4},n.prototype.writeInt32BE=function(ae,oe,be){return ae=+ae,oe=oe>>>0,be||Q(this,ae,oe,4,2147483647,-2147483648),ae<0&&(ae=4294967295+ae+1),this[oe]=ae>>>24,this[oe+1]=ae>>>16,this[oe+2]=ae>>>8,this[oe+3]=ae&255,oe+4};function X(se,ae,oe,be,ce,de){if(oe+be>se.length)throw new RangeError("Index out of range");if(oe<0)throw new RangeError("Index out of range")}function j(se,ae,oe,be,ce){return ae=+ae,oe=oe>>>0,ce||X(se,ae,oe,4),M.write(se,ae,oe,be,23,4),oe+4}n.prototype.writeFloatLE=function(ae,oe,be){return j(this,ae,oe,!0,be)},n.prototype.writeFloatBE=function(ae,oe,be){return j(this,ae,oe,!1,be)};function re(se,ae,oe,be,ce){return ae=+ae,oe=oe>>>0,ce||X(se,ae,oe,8),M.write(se,ae,oe,be,52,8),oe+8}n.prototype.writeDoubleLE=function(ae,oe,be){return re(this,ae,oe,!0,be)},n.prototype.writeDoubleBE=function(ae,oe,be){return re(this,ae,oe,!1,be)},n.prototype.copy=function(ae,oe,be,ce){if(!n.isBuffer(ae))throw new TypeError("argument should be a Buffer");if(be||(be=0),!ce&&ce!==0&&(ce=this.length),oe>=ae.length&&(oe=ae.length),oe||(oe=0),ce>0&&ce<be&&(ce=be),ce===be||ae.length===0||this.length===0)return 0;if(oe<0)throw new RangeError("targetStart out of bounds");if(be<0||be>=this.length)throw new RangeError("Index out of range");if(ce<0)throw new RangeError("sourceEnd out of bounds");ce>this.length&&(ce=this.length),ae.length-oe<ce-be&&(ce=ae.length-oe+be);var de=ce-be;if(this===ae&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(oe,be,ce);else if(this===ae&&be<oe&&oe<ce)for(var ye=de-1;ye>=0;--ye)ae[ye+oe]=this[ye+be];else Uint8Array.prototype.set.call(ae,this.subarray(be,ce),oe);return de},n.prototype.fill=function(ae,oe,be,ce){if(typeof ae=="string"){if(typeof oe=="string"?(ce=oe,oe=0,be=this.length):typeof be=="string"&&(ce=be,be=this.length),ce!==void 0&&typeof ce!="string")throw new TypeError("encoding must be a string");if(typeof ce=="string"&&!n.isEncoding(ce))throw new TypeError("Unknown encoding: "+ce);if(ae.length===1){var de=ae.charCodeAt(0);(ce==="utf8"&&de<128||ce==="latin1")&&(ae=de)}}else typeof ae=="number"&&(ae=ae&255);if(oe<0||this.length<oe||this.length<be)throw new RangeError("Out of range index");if(be<=oe)return this;oe=oe>>>0,be=be===void 0?this.length:be>>>0,ae||(ae=0);var ye;if(typeof ae=="number")for(ye=oe;ye<be;++ye)this[ye]=ae;else{var ge=n.isBuffer(ae)?ae:n.from(ae,ce),me=ge.length;if(me===0)throw new TypeError('The value "'+ae+'" is invalid for argument "value"');for(ye=0;ye<be-oe;++ye)this[ye+oe]=ge[ye%me]}return this};var ue=/[^+/0-9A-Za-z-_]/g;function K(se){if(se=se.split("=")[0],se=se.trim().replace(ue,""),se.length<2)return"";for(;se.length%4!==0;)se=se+"=";return se}function te(se){return se<16?"0"+se.toString(16):se.toString(16)}function Y(se,ae){ae=ae||1/0;for(var oe,be=se.length,ce=null,de=[],ye=0;ye<be;++ye){if(oe=se.charCodeAt(ye),oe>55295&&oe<57344){if(!ce){if(oe>56319){(ae-=3)>-1&&de.push(239,191,189);continue}else if(ye+1===be){(ae-=3)>-1&&de.push(239,191,189);continue}ce=oe;continue}if(oe<56320){(ae-=3)>-1&&de.push(239,191,189),ce=oe;continue}oe=(ce-55296<<10|oe-56320)+65536}else ce&&(ae-=3)>-1&&de.push(239,191,189);if(ce=null,oe<128){if((ae-=1)<0)break;de.push(oe)}else if(oe<2048){if((ae-=2)<0)break;de.push(oe>>6|192,oe&63|128)}else if(oe<65536){if((ae-=3)<0)break;de.push(oe>>12|224,oe>>6&63|128,oe&63|128)}else if(oe<1114112){if((ae-=4)<0)break;de.push(oe>>18|240,oe>>12&63|128,oe>>6&63|128,oe&63|128)}else throw new Error("Invalid code point")}return de}function H(se){for(var ae=[],oe=0;oe<se.length;++oe)ae.push(se.charCodeAt(oe)&255);return ae}function ee(se,ae){for(var oe,be,ce,de=[],ye=0;ye<se.length&&!((ae-=2)<0);++ye)oe=se.charCodeAt(ye),be=oe>>8,ce=oe%256,de.push(ce),de.push(be);return de}function ne(se){return f.toByteArray(K(se))}function Z(se,ae,oe,be){for(var ce=0;ce<be&&!(ce+oe>=ae.length||ce>=se.length);++ce)ae[ce+oe]=se[ce];return ce}function q(se,ae){return se instanceof ae||se!=null&&se.constructor!=null&&se.constructor.name!=null&&se.constructor.name===ae.name}function ie(se){return se!==se}}).call(this)}).call(this,i("buffer").Buffer)},{"base64-js":79,buffer:85,ieee754:230}],86:[function(i,U,V){U.exports=w;function w(f,M,T){return M<T?f<M?M:f>T?T:f:f<T?T:f>M?M:f}},{}],87:[function(i,U,V){var w=i("clamp");U.exports=f,U.exports.to=f,U.exports.from=M;function f(T,e){e==null&&(e=!0);var a=T[0],n=T[1],r=T[2],t=T[3];t==null&&(t=e?1:255),e&&(a*=255,n*=255,r*=255,t*=255),a=w(a,0,255)&255,n=w(n,0,255)&255,r=w(r,0,255)&255,t=w(t,0,255)&255;var h=a*16777216+(n<<16)+(r<<8)+t;return h}function M(T,e){T=+T;var a=T>>>24,n=(T&16711680)>>>16,r=(T&65280)>>>8,t=T&255;return e===!1?[a,n,r,t]:[a/255,n/255,r/255,t/255]}},{clamp:86}],88:[function(i,U,V){U.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},{}],89:[function(i,U,V){var w=i("color-rgba"),f=i("clamp"),M=i("dtype");U.exports=function(a,n){(n==="float"||!n)&&(n="array"),n==="uint"&&(n="uint8"),n==="uint_clamped"&&(n="uint8_clamped");var r=M(n),t=new r(4),h=n!=="uint8"&&n!=="uint8_clamped";return(!a.length||typeof a=="string")&&(a=w(a),a[0]/=255,a[1]/=255,a[2]/=255),T(a)?(t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3]!=null?a[3]:255,h&&(t[0]/=255,t[1]/=255,t[2]/=255,t[3]/=255),t):(h?(t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3]!=null?a[3]:1):(t[0]=f(Math.floor(a[0]*255),0,255),t[1]=f(Math.floor(a[1]*255),0,255),t[2]=f(Math.floor(a[2]*255),0,255),t[3]=a[3]==null?255:f(Math.floor(a[3]*255),0,255)),t)};function T(e){return!!(e instanceof Uint8Array||e instanceof Uint8ClampedArray||Array.isArray(e)&&(e[0]>1||e[0]===0)&&(e[1]>1||e[1]===0)&&(e[2]>1||e[2]===0)&&(!e[3]||e[3]>1))}},{clamp:86,"color-rgba":91,dtype:127}],90:[function(i,U,V){(function(w){(function(){var f=i("color-name"),M=i("is-plain-obj"),T=i("defined");U.exports=a;var e={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function a(n){var r,t=[],h=1,s;if(typeof n=="string")if(f[n])t=f[n].slice(),s="rgb";else if(n==="transparent")h=0,s="rgb",t=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(n)){var o=n.slice(1),y=o.length,d=y<=4;h=1,d?(t=[parseInt(o[0]+o[0],16),parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16)],y===4&&(h=parseInt(o[3]+o[3],16)/255)):(t=[parseInt(o[0]+o[1],16),parseInt(o[2]+o[3],16),parseInt(o[4]+o[5],16)],y===8&&(h=parseInt(o[6]+o[7],16)/255)),t[0]||(t[0]=0),t[1]||(t[1]=0),t[2]||(t[2]=0),s="rgb"}else if(r=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(n)){var p=r[1],c=p==="rgb",o=p.replace(/a$/,"");s=o;var y=o==="cmyk"?4:o==="gray"?1:3;t=r[2].trim().split(/\s*,\s*/).map(function(u,A){if(/%$/.test(u))return A===y?parseFloat(u)/100:o==="rgb"?parseFloat(u)*255/100:parseFloat(u);if(o[A]==="h"){if(/deg$/.test(u))return parseFloat(u);if(e[u]!==void 0)return e[u]}return parseFloat(u)}),p===o&&t.push(1),h=c||t[y]===void 0?1:t[y],t=t.slice(0,y)}else n.length>10&&/[0-9](?:\s|\/)/.test(n)&&(t=n.match(/([0-9]+)/g).map(function(l){return parseFloat(l)}),s=n.match(/([a-z])/ig).join("").toLowerCase());else if(!isNaN(n))s="rgb",t=[n>>>16,(n&65280)>>>8,n&255];else if(M(n)){var m=T(n.r,n.red,n.R,null);m!==null?(s="rgb",t=[m,T(n.g,n.green,n.G),T(n.b,n.blue,n.B)]):(s="hsl",t=[T(n.h,n.hue,n.H),T(n.s,n.saturation,n.S),T(n.l,n.lightness,n.L,n.b,n.brightness)]),h=T(n.a,n.alpha,n.opacity,1),n.opacity!=null&&(h/=100)}else(Array.isArray(n)||w.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(n))&&(t=[n[0],n[1],n[2]],s="rgb",h=n.length===4?n[3]:1);return{space:s,values:t,alpha:h}}}).call(this)}).call(this,typeof Je<"u"?Je:typeof self<"u"?self:typeof window<"u"?window:{})},{"color-name":88,defined:124,"is-plain-obj":236}],91:[function(i,U,V){var w=i("color-parse"),f=i("color-space/hsl"),M=i("clamp");U.exports=function(e){var a,n=w(e);return n.space?(a=Array(3),a[0]=M(n.values[0],0,255),a[1]=M(n.values[1],0,255),a[2]=M(n.values[2],0,255),n.space[0]==="h"&&(a=f.rgb(a)),a.push(M(n.alpha,0,1)),a):[]}},{clamp:86,"color-parse":90,"color-space/hsl":92}],92:[function(i,U,V){var w=i("./rgb");U.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(f){var M=f[0]/360,T=f[1]/100,e=f[2]/100,a,n,r,t,h;if(T===0)return h=e*255,[h,h,h];e<.5?n=e*(1+T):n=e+T-e*T,a=2*e-n,t=[0,0,0];for(var s=0;s<3;s++)r=M+1/3*-(s-1),r<0?r++:r>1&&r--,6*r<1?h=a+(n-a)*6*r:2*r<1?h=n:3*r<2?h=a+(n-a)*(2/3-r)*6:h=a,t[s]=h*255;return t}},w.hsl=function(f){var M=f[0]/255,T=f[1]/255,e=f[2]/255,a=Math.min(M,T,e),n=Math.max(M,T,e),r=n-a,t,h,s;return n===a?t=0:M===n?t=(T-e)/r:T===n?t=2+(e-M)/r:e===n&&(t=4+(M-T)/r),t=Math.min(t*60,360),t<0&&(t+=360),s=(a+n)/2,n===a?h=0:s<=.5?h=r/(n+a):h=r/(2-n-a),[t,h*100,s*100]}},{"./rgb":93}],93:[function(i,U,V){U.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},{}],94:[function(i,U,V){U.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|\xE7)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?=.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|\xE9)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|\xE9)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|\xE3)o.?tom(e|\xE9)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},{}],95:[function(i,U,V){U.exports=["xx-small","x-small","small","medium","large","x-large","xx-large","larger","smaller"]},{}],96:[function(i,U,V){U.exports=["normal","condensed","semi-condensed","extra-condensed","ultra-condensed","expanded","semi-expanded","extra-expanded","ultra-expanded"]},{}],97:[function(i,U,V){U.exports=["normal","italic","oblique"]},{}],98:[function(i,U,V){U.exports=["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"]},{}],99:[function(i,U,V){U.exports={parse:i("./parse"),stringify:i("./stringify")}},{"./parse":101,"./stringify":102}],100:[function(i,U,V){var w=i("css-font-size-keywords");U.exports={isSize:function(M){return/^[\d\.]/.test(M)||M.indexOf("/")!==-1||w.indexOf(M)!==-1}}},{"css-font-size-keywords":95}],101:[function(i,U,V){var w=i("unquote"),f=i("css-global-keywords"),M=i("css-system-font-keywords"),T=i("css-font-weight-keywords"),e=i("css-font-style-keywords"),a=i("css-font-stretch-keywords"),n=i("string-split-by"),r=i("./lib/util").isSize;U.exports=h;var t=h.cache={};function h(o){if(typeof o!="string")throw new Error("Font argument must be a string.");if(t[o])return t[o];if(o==="")throw new Error("Cannot parse an empty string.");if(M.indexOf(o)!==-1)return t[o]={system:o};for(var y={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},d=n(o,/\s+/),p;p=d.shift();){if(f.indexOf(p)!==-1)return["style","variant","weight","stretch"].forEach(function(m){y[m]=p}),t[o]=y;if(e.indexOf(p)!==-1){y.style=p;continue}if(p==="normal"||p==="small-caps"){y.variant=p;continue}if(a.indexOf(p)!==-1){y.stretch=p;continue}if(T.indexOf(p)!==-1){y.weight=p;continue}if(r(p)){var c=n(p,"/");if(y.size=c[0],c[1]!=null?y.lineHeight=s(c[1]):d[0]==="/"&&(d.shift(),y.lineHeight=s(d.shift())),!d.length)throw new Error("Missing required font-family.");return y.family=n(d.join(" "),/\s*,\s*/).map(w),t[o]=y}throw new Error("Unknown or unsupported font token: "+p)}throw new Error("Missing required font-size.")}function s(o){var y=parseFloat(o);return y.toString()===o?y:o}},{"./lib/util":100,"css-font-stretch-keywords":96,"css-font-style-keywords":97,"css-font-weight-keywords":98,"css-global-keywords":103,"css-system-font-keywords":104,"string-split-by":306,unquote:329}],102:[function(i,U,V){var w=i("pick-by-alias"),f=i("./lib/util").isSize,M=o(i("css-global-keywords")),T=o(i("css-system-font-keywords")),e=o(i("css-font-weight-keywords")),a=o(i("css-font-style-keywords")),n=o(i("css-font-stretch-keywords")),r={normal:1,"small-caps":1},t={serif:1,"sans-serif":1,monospace:1,cursive:1,fantasy:1,"system-ui":1},h={style:"normal",variant:"normal",weight:"normal",stretch:"normal",size:"1rem",lineHeight:"normal",family:"serif"};U.exports=function(d){if(d=w(d,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"}),d.system)return d.system&&s(d.system,T),d.system;if(s(d.style,a),s(d.variant,r),s(d.weight,e),s(d.stretch,n),d.size==null&&(d.size=h.size),typeof d.size=="number"&&(d.size+="px"),!f)throw Error("Bad size value `"+d.size+"`");d.family||(d.family=h.family),Array.isArray(d.family)&&(d.family.length||(d.family=[h.family]),d.family=d.family.map(function(c){return t[c]?c:'"'+c+'"'}).join(", "));var p=[];return p.push(d.style),d.variant!==d.style&&p.push(d.variant),d.weight!==d.variant&&d.weight!==d.style&&p.push(d.weight),d.stretch!==d.weight&&d.stretch!==d.variant&&d.stretch!==d.style&&p.push(d.stretch),p.push(d.size+(d.lineHeight==null||d.lineHeight==="normal"||d.lineHeight+""=="1"?"":"/"+d.lineHeight)),p.push(d.family),p.filter(Boolean).join(" ")};function s(y,d){if(y&&!d[y]&&!M[y])throw Error("Unknown keyword `"+y+"`");return y}function o(y){for(var d={},p=0;p<y.length;p++)d[y[p]]=1;return d}},{"./lib/util":100,"css-font-stretch-keywords":96,"css-font-style-keywords":97,"css-font-weight-keywords":98,"css-global-keywords":103,"css-system-font-keywords":104,"pick-by-alias":253}],103:[function(i,U,V){U.exports=["inherit","initial","unset"]},{}],104:[function(i,U,V){U.exports=["caption","icon","menu","message-box","small-caption","status-bar"]},{}],105:[function(i,U,V){var w=i("type/value/is"),f=i("type/value/ensure"),M=i("type/plain-function/ensure"),T=i("es5-ext/object/copy"),e=i("es5-ext/object/normalize-options"),a=i("es5-ext/object/map"),n=Function.prototype.bind,r=Object.defineProperty,t=Object.prototype.hasOwnProperty,h;h=function(s,o,y){var d=f(o)&&M(o.value),p;return p=T(o),delete p.writable,delete p.value,p.get=function(){return!y.overwriteDefinition&&t.call(this,s)?d:(o.value=n.call(d,y.resolveContext?y.resolveContext(this):this),r(this,s,o),this[s])},p},U.exports=function(s){var o=e(arguments[1]);return w(o.resolveContext)&&M(o.resolveContext),a(s,function(y,d){return h(d,y,o)})}},{"es5-ext/object/copy":147,"es5-ext/object/map":155,"es5-ext/object/normalize-options":156,"type/plain-function/ensure":322,"type/value/ensure":326,"type/value/is":327}],106:[function(i,U,V){var w=i("type/value/is"),f=i("type/plain-function/is"),M=i("es5-ext/object/assign"),T=i("es5-ext/object/normalize-options"),e=i("es5-ext/string/#/contains"),a=U.exports=function(n,r){var t,h,s,o,y;return arguments.length<2||typeof n!="string"?(o=r,r=n,n=null):o=arguments[2],w(n)?(t=e.call(n,"c"),h=e.call(n,"e"),s=e.call(n,"w")):(t=s=!0,h=!1),y={value:r,configurable:t,enumerable:h,writable:s},o?M(T(o),y):y};a.gs=function(n,r,t){var h,s,o,y;return typeof n!="string"?(o=t,t=r,r=n,n=null):o=arguments[3],w(r)?f(r)?w(t)?f(t)||(o=t,t=void 0):t=void 0:(o=r,r=t=void 0):r=void 0,w(n)?(h=e.call(n,"c"),s=e.call(n,"e")):(h=!0,s=!1),y={get:r,set:t,configurable:h,enumerable:s},o?M(T(o),y):y}},{"es5-ext/object/assign":144,"es5-ext/object/normalize-options":156,"es5-ext/string/#/contains":163,"type/plain-function/is":323,"type/value/is":327}],107:[function(i,U,V){(function(w,f){f(typeof V=="object"&&typeof U<"u"?V:w.d3=w.d3||{})})(this,function(w){function f(Y,H){return Y<H?-1:Y>H?1:Y>=H?0:NaN}function M(Y){return Y.length===1&&(Y=T(Y)),{left:function(H,ee,ne,Z){for(ne==null&&(ne=0),Z==null&&(Z=H.length);ne<Z;){var q=ne+Z>>>1;Y(H[q],ee)<0?ne=q+1:Z=q}return ne},right:function(H,ee,ne,Z){for(ne==null&&(ne=0),Z==null&&(Z=H.length);ne<Z;){var q=ne+Z>>>1;Y(H[q],ee)>0?Z=q:ne=q+1}return ne}}}function T(Y){return function(H,ee){return f(Y(H),ee)}}var e=M(f),a=e.right,n=e.left;function r(Y,H){H==null&&(H=t);for(var ee=0,ne=Y.length-1,Z=Y[0],q=new Array(ne<0?0:ne);ee<ne;)q[ee]=H(Z,Z=Y[++ee]);return q}function t(Y,H){return[Y,H]}function h(Y,H,ee){var ne=Y.length,Z=H.length,q=new Array(ne*Z),ie,se,ae,oe;for(ee==null&&(ee=t),ie=ae=0;ie<ne;++ie)for(oe=Y[ie],se=0;se<Z;++se,++ae)q[ae]=ee(oe,H[se]);return q}function s(Y,H){return H<Y?-1:H>Y?1:H>=Y?0:NaN}function o(Y){return Y===null?NaN:+Y}function y(Y,H){var ee=Y.length,ne=0,Z=-1,q=0,ie,se,ae=0;if(H==null)for(;++Z<ee;)isNaN(ie=o(Y[Z]))||(se=ie-q,q+=se/++ne,ae+=se*(ie-q));else for(;++Z<ee;)isNaN(ie=o(H(Y[Z],Z,Y)))||(se=ie-q,q+=se/++ne,ae+=se*(ie-q));if(ne>1)return ae/(ne-1)}function d(Y,H){var ee=y(Y,H);return ee&&Math.sqrt(ee)}function p(Y,H){var ee=Y.length,ne=-1,Z,q,ie;if(H==null){for(;++ne<ee;)if((Z=Y[ne])!=null&&Z>=Z)for(q=ie=Z;++ne<ee;)(Z=Y[ne])!=null&&(q>Z&&(q=Z),ie<Z&&(ie=Z))}else for(;++ne<ee;)if((Z=H(Y[ne],ne,Y))!=null&&Z>=Z)for(q=ie=Z;++ne<ee;)(Z=H(Y[ne],ne,Y))!=null&&(q>Z&&(q=Z),ie<Z&&(ie=Z));return[q,ie]}var c=Array.prototype,m=c.slice,l=c.map;function x(Y){return function(){return Y}}function u(Y){return Y}function A(Y,H,ee){Y=+Y,H=+H,ee=(Z=arguments.length)<2?(H=Y,Y=0,1):Z<3?1:+ee;for(var ne=-1,Z=Math.max(0,Math.ceil((H-Y)/ee))|0,q=new Array(Z);++ne<Z;)q[ne]=Y+ne*ee;return q}var _=Math.sqrt(50),g=Math.sqrt(10),b=Math.sqrt(2);function v(Y,H,ee){var ne,Z=-1,q,ie,se;if(H=+H,Y=+Y,ee=+ee,Y===H&&ee>0)return[Y];if((ne=H<Y)&&(q=Y,Y=H,H=q),(se=k(Y,H,ee))===0||!isFinite(se))return[];if(se>0)for(Y=Math.ceil(Y/se),H=Math.floor(H/se),ie=new Array(q=Math.ceil(H-Y+1));++Z<q;)ie[Z]=(Y+Z)*se;else for(Y=Math.floor(Y*se),H=Math.ceil(H*se),ie=new Array(q=Math.ceil(Y-H+1));++Z<q;)ie[Z]=(Y-Z)/se;return ne&&ie.reverse(),ie}function k(Y,H,ee){var ne=(H-Y)/Math.max(0,ee),Z=Math.floor(Math.log(ne)/Math.LN10),q=ne/Math.pow(10,Z);return Z>=0?(q>=_?10:q>=g?5:q>=b?2:1)*Math.pow(10,Z):-Math.pow(10,-Z)/(q>=_?10:q>=g?5:q>=b?2:1)}function S(Y,H,ee){var ne=Math.abs(H-Y)/Math.max(0,ee),Z=Math.pow(10,Math.floor(Math.log(ne)/Math.LN10)),q=ne/Z;return q>=_?Z*=10:q>=g?Z*=5:q>=b&&(Z*=2),H<Y?-Z:Z}function E(Y){return Math.ceil(Math.log(Y.length)/Math.LN2)+1}function C(){var Y=u,H=p,ee=E;function ne(Z){var q,ie=Z.length,se,ae=new Array(ie);for(q=0;q<ie;++q)ae[q]=Y(Z[q],q,Z);var oe=H(ae),be=oe[0],ce=oe[1],de=ee(ae,be,ce);Array.isArray(de)||(de=S(be,ce,de),de=A(Math.ceil(be/de)*de,ce,de));for(var ye=de.length;de[0]<=be;)de.shift(),--ye;for(;de[ye-1]>ce;)de.pop(),--ye;var ge=new Array(ye+1),me;for(q=0;q<=ye;++q)me=ge[q]=[],me.x0=q>0?de[q-1]:be,me.x1=q<ye?de[q]:ce;for(q=0;q<ie;++q)se=ae[q],be<=se&&se<=ce&&ge[a(de,se,0,ye)].push(Z[q]);return ge}return ne.value=function(Z){return arguments.length?(Y=typeof Z=="function"?Z:x(Z),ne):Y},ne.domain=function(Z){return arguments.length?(H=typeof Z=="function"?Z:x([Z[0],Z[1]]),ne):H},ne.thresholds=function(Z){return arguments.length?(ee=typeof Z=="function"?Z:Array.isArray(Z)?x(m.call(Z)):x(Z),ne):ee},ne}function F(Y,H,ee){if(ee==null&&(ee=o),!!(ne=Y.length)){if((H=+H)<=0||ne<2)return+ee(Y[0],0,Y);if(H>=1)return+ee(Y[ne-1],ne-1,Y);var ne,Z=(ne-1)*H,q=Math.floor(Z),ie=+ee(Y[q],q,Y),se=+ee(Y[q+1],q+1,Y);return ie+(se-ie)*(Z-q)}}function I(Y,H,ee){return Y=l.call(Y,o).sort(f),Math.ceil((ee-H)/(2*(F(Y,.75)-F(Y,.25))*Math.pow(Y.length,-1/3)))}function D(Y,H,ee){return Math.ceil((ee-H)/(3.5*d(Y)*Math.pow(Y.length,-1/3)))}function R(Y,H){var ee=Y.length,ne=-1,Z,q;if(H==null){for(;++ne<ee;)if((Z=Y[ne])!=null&&Z>=Z)for(q=Z;++ne<ee;)(Z=Y[ne])!=null&&Z>q&&(q=Z)}else for(;++ne<ee;)if((Z=H(Y[ne],ne,Y))!=null&&Z>=Z)for(q=Z;++ne<ee;)(Z=H(Y[ne],ne,Y))!=null&&Z>q&&(q=Z);return q}function O(Y,H){var ee=Y.length,ne=ee,Z=-1,q,ie=0;if(H==null)for(;++Z<ee;)isNaN(q=o(Y[Z]))?--ne:ie+=q;else for(;++Z<ee;)isNaN(q=o(H(Y[Z],Z,Y)))?--ne:ie+=q;if(ne)return ie/ne}function z(Y,H){var ee=Y.length,ne=-1,Z,q=[];if(H==null)for(;++ne<ee;)isNaN(Z=o(Y[ne]))||q.push(Z);else for(;++ne<ee;)isNaN(Z=o(H(Y[ne],ne,Y)))||q.push(Z);return F(q.sort(f),.5)}function B(Y){for(var H=Y.length,ee,ne=-1,Z=0,q,ie;++ne<H;)Z+=Y[ne].length;for(q=new Array(Z);--H>=0;)for(ie=Y[H],ee=ie.length;--ee>=0;)q[--Z]=ie[ee];return q}function G(Y,H){var ee=Y.length,ne=-1,Z,q;if(H==null){for(;++ne<ee;)if((Z=Y[ne])!=null&&Z>=Z)for(q=Z;++ne<ee;)(Z=Y[ne])!=null&&q>Z&&(q=Z)}else for(;++ne<ee;)if((Z=H(Y[ne],ne,Y))!=null&&Z>=Z)for(q=Z;++ne<ee;)(Z=H(Y[ne],ne,Y))!=null&&q>Z&&(q=Z);return q}function Q(Y,H){for(var ee=H.length,ne=new Array(ee);ee--;)ne[ee]=Y[H[ee]];return ne}function X(Y,H){if(!!(ee=Y.length)){var ee,ne=0,Z=0,q,ie=Y[Z];for(H==null&&(H=f);++ne<ee;)(H(q=Y[ne],ie)<0||H(ie,ie)!==0)&&(ie=q,Z=ne);if(H(ie,ie)===0)return Z}}function j(Y,H,ee){for(var ne=(ee==null?Y.length:ee)-(H=H==null?0:+H),Z,q;ne;)q=Math.random()*ne--|0,Z=Y[ne+H],Y[ne+H]=Y[q+H],Y[q+H]=Z;return Y}function re(Y,H){var ee=Y.length,ne=-1,Z,q=0;if(H==null)for(;++ne<ee;)(Z=+Y[ne])&&(q+=Z);else for(;++ne<ee;)(Z=+H(Y[ne],ne,Y))&&(q+=Z);return q}function ue(Y){if(!(q=Y.length))return[];for(var H=-1,ee=G(Y,K),ne=new Array(ee);++H<ee;)for(var Z=-1,q,ie=ne[H]=new Array(q);++Z<q;)ie[Z]=Y[Z][H];return ne}function K(Y){return Y.length}function te(){return ue(arguments)}w.bisect=a,w.bisectRight=a,w.bisectLeft=n,w.ascending=f,w.bisector=M,w.cross=h,w.descending=s,w.deviation=d,w.extent=p,w.histogram=C,w.thresholdFreedmanDiaconis=I,w.thresholdScott=D,w.thresholdSturges=E,w.max=R,w.mean=O,w.median=z,w.merge=B,w.min=G,w.pairs=r,w.permute=Q,w.quantile=F,w.range=A,w.scan=X,w.shuffle=j,w.sum=re,w.ticks=v,w.tickIncrement=k,w.tickStep=S,w.transpose=ue,w.variance=y,w.zip=te,Object.defineProperty(w,"__esModule",{value:!0})})},{}],108:[function(i,U,V){(function(w,f){f(typeof V=="object"&&typeof U<"u"?V:w.d3=w.d3||{})})(this,function(w){var f="$";function M(){}M.prototype=T.prototype={constructor:M,has:function(c){return f+c in this},get:function(c){return this[f+c]},set:function(c,m){return this[f+c]=m,this},remove:function(c){var m=f+c;return m in this&&delete this[m]},clear:function(){for(var c in this)c[0]===f&&delete this[c]},keys:function(){var c=[];for(var m in this)m[0]===f&&c.push(m.slice(1));return c},values:function(){var c=[];for(var m in this)m[0]===f&&c.push(this[m]);return c},entries:function(){var c=[];for(var m in this)m[0]===f&&c.push({key:m.slice(1),value:this[m]});return c},size:function(){var c=0;for(var m in this)m[0]===f&&++c;return c},empty:function(){for(var c in this)if(c[0]===f)return!1;return!0},each:function(c){for(var m in this)m[0]===f&&c(this[m],m.slice(1),this)}};function T(c,m){var l=new M;if(c instanceof M)c.each(function(g,b){l.set(b,g)});else if(Array.isArray(c)){var x=-1,u=c.length,A;if(m==null)for(;++x<u;)l.set(x,c[x]);else for(;++x<u;)l.set(m(A=c[x],x,c),A)}else if(c)for(var _ in c)l.set(_,c[_]);return l}function e(){var c=[],m=[],l,x,u;function A(g,b,v,k){if(b>=c.length)return l!=null&&g.sort(l),x!=null?x(g):g;for(var S=-1,E=g.length,C=c[b++],F,I,D=T(),R,O=v();++S<E;)(R=D.get(F=C(I=g[S])+""))?R.push(I):D.set(F,[I]);return D.each(function(z,B){k(O,B,A(z,b,v,k))}),O}function _(g,b){if(++b>c.length)return g;var v,k=m[b-1];return x!=null&&b>=c.length?v=g.entries():(v=[],g.each(function(S,E){v.push({key:E,values:_(S,b)})})),k!=null?v.sort(function(S,E){return k(S.key,E.key)}):v}return u={object:function(g){return A(g,0,a,n)},map:function(g){return A(g,0,r,t)},entries:function(g){return _(A(g,0,r,t),0)},key:function(g){return c.push(g),u},sortKeys:function(g){return m[c.length-1]=g,u},sortValues:function(g){return l=g,u},rollup:function(g){return x=g,u}}}function a(){return{}}function n(c,m,l){c[m]=l}function r(){return T()}function t(c,m,l){c.set(m,l)}function h(){}var s=T.prototype;h.prototype=o.prototype={constructor:h,has:s.has,add:function(c){return c+="",this[f+c]=c,this},remove:s.remove,clear:s.clear,values:s.keys,size:s.size,empty:s.empty,each:s.each};function o(c,m){var l=new h;if(c instanceof h)c.each(function(A){l.add(A)});else if(c){var x=-1,u=c.length;if(m==null)for(;++x<u;)l.add(c[x]);else for(;++x<u;)l.add(m(c[x],x,c))}return l}function y(c){var m=[];for(var l in c)m.push(l);return m}function d(c){var m=[];for(var l in c)m.push(c[l]);return m}function p(c){var m=[];for(var l in c)m.push({key:l,value:c[l]});return m}w.nest=e,w.set=o,w.map=T,w.keys=y,w.values=d,w.entries=p,Object.defineProperty(w,"__esModule",{value:!0})})},{}],109:[function(i,U,V){(function(w,f){typeof V=="object"&&typeof U<"u"?f(V):(w=w||self,f(w.d3=w.d3||{}))})(this,function(w){function f(Re,je,xt){Re.prototype=je.prototype=xt,xt.constructor=Re}function M(Re,je){var xt=Object.create(Re.prototype);for(var Nt in je)xt[Nt]=je[Nt];return xt}function T(){}var e=.7,a=1/e,n="\\s*([+-]?\\d+)\\s*",r="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",t="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",h=/^#([0-9a-f]{3,8})$/,s=new RegExp("^rgb\\("+[n,n,n]+"\\)$"),o=new RegExp("^rgb\\("+[t,t,t]+"\\)$"),y=new RegExp("^rgba\\("+[n,n,n,r]+"\\)$"),d=new RegExp("^rgba\\("+[t,t,t,r]+"\\)$"),p=new RegExp("^hsl\\("+[r,t,t]+"\\)$"),c=new RegExp("^hsla\\("+[r,t,t,r]+"\\)$"),m={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};f(T,A,{copy:function(Re){return Object.assign(new this.constructor,this,Re)},displayable:function(){return this.rgb().displayable()},hex:l,formatHex:l,formatHsl:x,formatRgb:u,toString:u});function l(){return this.rgb().formatHex()}function x(){return I(this).formatHsl()}function u(){return this.rgb().formatRgb()}function A(Re){var je,xt;return Re=(Re+"").trim().toLowerCase(),(je=h.exec(Re))?(xt=je[1].length,je=parseInt(je[1],16),xt===6?_(je):xt===3?new k(je>>8&15|je>>4&240,je>>4&15|je&240,(je&15)<<4|je&15,1):xt===8?g(je>>24&255,je>>16&255,je>>8&255,(je&255)/255):xt===4?g(je>>12&15|je>>8&240,je>>8&15|je>>4&240,je>>4&15|je&240,((je&15)<<4|je&15)/255):null):(je=s.exec(Re))?new k(je[1],je[2],je[3],1):(je=o.exec(Re))?new k(je[1]*255/100,je[2]*255/100,je[3]*255/100,1):(je=y.exec(Re))?g(je[1],je[2],je[3],je[4]):(je=d.exec(Re))?g(je[1]*255/100,je[2]*255/100,je[3]*255/100,je[4]):(je=p.exec(Re))?F(je[1],je[2]/100,je[3]/100,1):(je=c.exec(Re))?F(je[1],je[2]/100,je[3]/100,je[4]):m.hasOwnProperty(Re)?_(m[Re]):Re==="transparent"?new k(NaN,NaN,NaN,0):null}function _(Re){return new k(Re>>16&255,Re>>8&255,Re&255,1)}function g(Re,je,xt,Nt){return Nt<=0&&(Re=je=xt=NaN),new k(Re,je,xt,Nt)}function b(Re){return Re instanceof T||(Re=A(Re)),Re?(Re=Re.rgb(),new k(Re.r,Re.g,Re.b,Re.opacity)):new k}function v(Re,je,xt,Nt){return arguments.length===1?b(Re):new k(Re,je,xt,Nt==null?1:Nt)}function k(Re,je,xt,Nt){this.r=+Re,this.g=+je,this.b=+xt,this.opacity=+Nt}f(k,v,M(T,{brighter:function(Re){return Re=Re==null?a:Math.pow(a,Re),new k(this.r*Re,this.g*Re,this.b*Re,this.opacity)},darker:function(Re){return Re=Re==null?e:Math.pow(e,Re),new k(this.r*Re,this.g*Re,this.b*Re,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:S,formatHex:S,formatRgb:E,toString:E}));function S(){return"#"+C(this.r)+C(this.g)+C(this.b)}function E(){var Re=this.opacity;return Re=isNaN(Re)?1:Math.max(0,Math.min(1,Re)),(Re===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(Re===1?")":", "+Re+")")}function C(Re){return Re=Math.max(0,Math.min(255,Math.round(Re)||0)),(Re<16?"0":"")+Re.toString(16)}function F(Re,je,xt,Nt){return Nt<=0?Re=je=xt=NaN:xt<=0||xt>=1?Re=je=NaN:je<=0&&(Re=NaN),new R(Re,je,xt,Nt)}function I(Re){if(Re instanceof R)return new R(Re.h,Re.s,Re.l,Re.opacity);if(Re instanceof T||(Re=A(Re)),!Re)return new R;if(Re instanceof R)return Re;Re=Re.rgb();var je=Re.r/255,xt=Re.g/255,Nt=Re.b/255,tr=Math.min(je,xt,Nt),Ht=Math.max(je,xt,Nt),Pt=NaN,$t=Ht-tr,Ut=(Ht+tr)/2;return $t?(je===Ht?Pt=(xt-Nt)/$t+(xt<Nt)*6:xt===Ht?Pt=(Nt-je)/$t+2:Pt=(je-xt)/$t+4,$t/=Ut<.5?Ht+tr:2-Ht-tr,Pt*=60):$t=Ut>0&&Ut<1?0:Pt,new R(Pt,$t,Ut,Re.opacity)}function D(Re,je,xt,Nt){return arguments.length===1?I(Re):new R(Re,je,xt,Nt==null?1:Nt)}function R(Re,je,xt,Nt){this.h=+Re,this.s=+je,this.l=+xt,this.opacity=+Nt}f(R,D,M(T,{brighter:function(Re){return Re=Re==null?a:Math.pow(a,Re),new R(this.h,this.s,this.l*Re,this.opacity)},darker:function(Re){return Re=Re==null?e:Math.pow(e,Re),new R(this.h,this.s,this.l*Re,this.opacity)},rgb:function(){var Re=this.h%360+(this.h<0)*360,je=isNaN(Re)||isNaN(this.s)?0:this.s,xt=this.l,Nt=xt+(xt<.5?xt:1-xt)*je,tr=2*xt-Nt;return new k(O(Re>=240?Re-240:Re+120,tr,Nt),O(Re,tr,Nt),O(Re<120?Re+240:Re-120,tr,Nt),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var Re=this.opacity;return Re=isNaN(Re)?1:Math.max(0,Math.min(1,Re)),(Re===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(Re===1?")":", "+Re+")")}}));function O(Re,je,xt){return(Re<60?je+(xt-je)*Re/60:Re<180?xt:Re<240?je+(xt-je)*(240-Re)/60:je)*255}var z=Math.PI/180,B=180/Math.PI,G=18,Q=.96422,X=1,j=.82521,re=4/29,ue=6/29,K=3*ue*ue,te=ue*ue*ue;function Y(Re){if(Re instanceof ne)return new ne(Re.l,Re.a,Re.b,Re.opacity);if(Re instanceof ce)return de(Re);Re instanceof k||(Re=b(Re));var je=se(Re.r),xt=se(Re.g),Nt=se(Re.b),tr=Z((.2225045*je+.7168786*xt+.0606169*Nt)/X),Ht,Pt;return je===xt&&xt===Nt?Ht=Pt=tr:(Ht=Z((.4360747*je+.3850649*xt+.1430804*Nt)/Q),Pt=Z((.0139322*je+.0971045*xt+.7141733*Nt)/j)),new ne(116*tr-16,500*(Ht-tr),200*(tr-Pt),Re.opacity)}function H(Re,je){return new ne(Re,0,0,je==null?1:je)}function ee(Re,je,xt,Nt){return arguments.length===1?Y(Re):new ne(Re,je,xt,Nt==null?1:Nt)}function ne(Re,je,xt,Nt){this.l=+Re,this.a=+je,this.b=+xt,this.opacity=+Nt}f(ne,ee,M(T,{brighter:function(Re){return new ne(this.l+G*(Re==null?1:Re),this.a,this.b,this.opacity)},darker:function(Re){return new ne(this.l-G*(Re==null?1:Re),this.a,this.b,this.opacity)},rgb:function(){var Re=(this.l+16)/116,je=isNaN(this.a)?Re:Re+this.a/500,xt=isNaN(this.b)?Re:Re-this.b/200;return je=Q*q(je),Re=X*q(Re),xt=j*q(xt),new k(ie(3.1338561*je-1.6168667*Re-.4906146*xt),ie(-.9787684*je+1.9161415*Re+.033454*xt),ie(.0719453*je-.2289914*Re+1.4052427*xt),this.opacity)}}));function Z(Re){return Re>te?Math.pow(Re,1/3):Re/K+re}function q(Re){return Re>ue?Re*Re*Re:K*(Re-re)}function ie(Re){return 255*(Re<=.0031308?12.92*Re:1.055*Math.pow(Re,1/2.4)-.055)}function se(Re){return(Re/=255)<=.04045?Re/12.92:Math.pow((Re+.055)/1.055,2.4)}function ae(Re){if(Re instanceof ce)return new ce(Re.h,Re.c,Re.l,Re.opacity);if(Re instanceof ne||(Re=Y(Re)),Re.a===0&&Re.b===0)return new ce(NaN,0<Re.l&&Re.l<100?0:NaN,Re.l,Re.opacity);var je=Math.atan2(Re.b,Re.a)*B;return new ce(je<0?je+360:je,Math.sqrt(Re.a*Re.a+Re.b*Re.b),Re.l,Re.opacity)}function oe(Re,je,xt,Nt){return arguments.length===1?ae(Re):new ce(xt,je,Re,Nt==null?1:Nt)}function be(Re,je,xt,Nt){return arguments.length===1?ae(Re):new ce(Re,je,xt,Nt==null?1:Nt)}function ce(Re,je,xt,Nt){this.h=+Re,this.c=+je,this.l=+xt,this.opacity=+Nt}function de(Re){if(isNaN(Re.h))return new ne(Re.l,0,0,Re.opacity);var je=Re.h*z;return new ne(Re.l,Math.cos(je)*Re.c,Math.sin(je)*Re.c,Re.opacity)}f(ce,be,M(T,{brighter:function(Re){return new ce(this.h,this.c,this.l+G*(Re==null?1:Re),this.opacity)},darker:function(Re){return new ce(this.h,this.c,this.l-G*(Re==null?1:Re),this.opacity)},rgb:function(){return de(this).rgb()}}));var ye=-.14861,ge=1.78277,me=-.29227,Se=-.90649,Le=1.97294,Oe=Le*Se,we=Le*ge,Ce=ge*me-Se*ye;function Ke(Re){if(Re instanceof Fe)return new Fe(Re.h,Re.s,Re.l,Re.opacity);Re instanceof k||(Re=b(Re));var je=Re.r/255,xt=Re.g/255,Nt=Re.b/255,tr=(Ce*Nt+Oe*je-we*xt)/(Ce+Oe-we),Ht=Nt-tr,Pt=(Le*(xt-tr)-me*Ht)/Se,$t=Math.sqrt(Pt*Pt+Ht*Ht)/(Le*tr*(1-tr)),Ut=$t?Math.atan2(Pt,Ht)*B-120:NaN;return new Fe(Ut<0?Ut+360:Ut,$t,tr,Re.opacity)}function Ye(Re,je,xt,Nt){return arguments.length===1?Ke(Re):new Fe(Re,je,xt,Nt==null?1:Nt)}function Fe(Re,je,xt,Nt){this.h=+Re,this.s=+je,this.l=+xt,this.opacity=+Nt}f(Fe,Ye,M(T,{brighter:function(Re){return Re=Re==null?a:Math.pow(a,Re),new Fe(this.h,this.s,this.l*Re,this.opacity)},darker:function(Re){return Re=Re==null?e:Math.pow(e,Re),new Fe(this.h,this.s,this.l*Re,this.opacity)},rgb:function(){var Re=isNaN(this.h)?0:(this.h+120)*z,je=+this.l,xt=isNaN(this.s)?0:this.s*je*(1-je),Nt=Math.cos(Re),tr=Math.sin(Re);return new k(255*(je+xt*(ye*Nt+ge*tr)),255*(je+xt*(me*Nt+Se*tr)),255*(je+xt*(Le*Nt)),this.opacity)}})),w.color=A,w.cubehelix=Ye,w.gray=H,w.hcl=be,w.hsl=D,w.lab=ee,w.lch=oe,w.rgb=v,Object.defineProperty(w,"__esModule",{value:!0})})},{}],110:[function(i,U,V){(function(w,f){typeof V=="object"&&typeof U<"u"?f(V):(w=w||self,f(w.d3=w.d3||{}))})(this,function(w){var f={value:function(){}};function M(){for(var r=0,t=arguments.length,h={},s;r<t;++r){if(!(s=arguments[r]+"")||s in h||/[\s.]/.test(s))throw new Error("illegal type: "+s);h[s]=[]}return new T(h)}function T(r){this._=r}function e(r,t){return r.trim().split(/^|\s+/).map(function(h){var s="",o=h.indexOf(".");if(o>=0&&(s=h.slice(o+1),h=h.slice(0,o)),h&&!t.hasOwnProperty(h))throw new Error("unknown type: "+h);return{type:h,name:s}})}T.prototype=M.prototype={constructor:T,on:function(r,t){var h=this._,s=e(r+"",h),o,y=-1,d=s.length;if(arguments.length<2){for(;++y<d;)if((o=(r=s[y]).type)&&(o=a(h[o],r.name)))return o;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++y<d;)if(o=(r=s[y]).type)h[o]=n(h[o],r.name,t);else if(t==null)for(o in h)h[o]=n(h[o],r.name,null);return this},copy:function(){var r={},t=this._;for(var h in t)r[h]=t[h].slice();return new T(r)},call:function(r,t){if((o=arguments.length-2)>0)for(var h=new Array(o),s=0,o,y;s<o;++s)h[s]=arguments[s+2];if(!this._.hasOwnProperty(r))throw new Error("unknown type: "+r);for(y=this._[r],s=0,o=y.length;s<o;++s)y[s].value.apply(t,h)},apply:function(r,t,h){if(!this._.hasOwnProperty(r))throw new Error("unknown type: "+r);for(var s=this._[r],o=0,y=s.length;o<y;++o)s[o].value.apply(t,h)}};function a(r,t){for(var h=0,s=r.length,o;h<s;++h)if((o=r[h]).name===t)return o.value}function n(r,t,h){for(var s=0,o=r.length;s<o;++s)if(r[s].name===t){r[s]=f,r=r.slice(0,s).concat(r.slice(s+1));break}return h!=null&&r.push({name:t,value:h}),r}w.dispatch=M,Object.defineProperty(w,"__esModule",{value:!0})})},{}],111:[function(i,U,V){(function(w,f){typeof V=="object"&&typeof U<"u"?f(V,i("d3-quadtree"),i("d3-collection"),i("d3-dispatch"),i("d3-timer")):f(w.d3=w.d3||{},w.d3,w.d3,w.d3,w.d3)})(this,function(w,f,M,T,e){function a(b,v){var k;b==null&&(b=0),v==null&&(v=0);function S(){var E,C=k.length,F,I=0,D=0;for(E=0;E<C;++E)F=k[E],I+=F.x,D+=F.y;for(I=I/C-b,D=D/C-v,E=0;E<C;++E)F=k[E],F.x-=I,F.y-=D}return S.initialize=function(E){k=E},S.x=function(E){return arguments.length?(b=+E,S):b},S.y=function(E){return arguments.length?(v=+E,S):v},S}function n(b){return function(){return b}}function r(){return(Math.random()-.5)*1e-6}function t(b){return b.x+b.vx}function h(b){return b.y+b.vy}function s(b){var v,k,S=1,E=1;typeof b!="function"&&(b=n(b==null?1:+b));function C(){for(var D,R=v.length,O,z,B,G,Q,X,j=0;j<E;++j)for(O=f.quadtree(v,t,h).visitAfter(F),D=0;D<R;++D)z=v[D],Q=k[z.index],X=Q*Q,B=z.x+z.vx,G=z.y+z.vy,O.visit(re);function re(ue,K,te,Y,H){var ee=ue.data,ne=ue.r,Z=Q+ne;if(ee){if(ee.index>z.index){var q=B-ee.x-ee.vx,ie=G-ee.y-ee.vy,se=q*q+ie*ie;se<Z*Z&&(q===0&&(q=r(),se+=q*q),ie===0&&(ie=r(),se+=ie*ie),se=(Z-(se=Math.sqrt(se)))/se*S,z.vx+=(q*=se)*(Z=(ne*=ne)/(X+ne)),z.vy+=(ie*=se)*Z,ee.vx-=q*(Z=1-Z),ee.vy-=ie*Z)}return}return K>B+Z||Y<B-Z||te>G+Z||H<G-Z}}function F(D){if(D.data)return D.r=k[D.data.index];for(var R=D.r=0;R<4;++R)D[R]&&D[R].r>D.r&&(D.r=D[R].r)}function I(){if(!!v){var D,R=v.length,O;for(k=new Array(R),D=0;D<R;++D)O=v[D],k[O.index]=+b(O,D,v)}}return C.initialize=function(D){v=D,I()},C.iterations=function(D){return arguments.length?(E=+D,C):E},C.strength=function(D){return arguments.length?(S=+D,C):S},C.radius=function(D){return arguments.length?(b=typeof D=="function"?D:n(+D),I(),C):b},C}function o(b){return b.index}function y(b,v){var k=b.get(v);if(!k)throw new Error("missing: "+v);return k}function d(b){var v=o,k=O,S,E=n(30),C,F,I,D,R=1;b==null&&(b=[]);function O(X){return 1/Math.min(I[X.source.index],I[X.target.index])}function z(X){for(var j=0,re=b.length;j<R;++j)for(var ue=0,K,te,Y,H,ee,ne,Z;ue<re;++ue)K=b[ue],te=K.source,Y=K.target,H=Y.x+Y.vx-te.x-te.vx||r(),ee=Y.y+Y.vy-te.y-te.vy||r(),ne=Math.sqrt(H*H+ee*ee),ne=(ne-C[ue])/ne*X*S[ue],H*=ne,ee*=ne,Y.vx-=H*(Z=D[ue]),Y.vy-=ee*Z,te.vx+=H*(Z=1-Z),te.vy+=ee*Z}function B(){if(!!F){var X,j=F.length,re=b.length,ue=M.map(F,v),K;for(X=0,I=new Array(j);X<re;++X)K=b[X],K.index=X,typeof K.source!="object"&&(K.source=y(ue,K.source)),typeof K.target!="object"&&(K.target=y(ue,K.target)),I[K.source.index]=(I[K.source.index]||0)+1,I[K.target.index]=(I[K.target.index]||0)+1;for(X=0,D=new Array(re);X<re;++X)K=b[X],D[X]=I[K.source.index]/(I[K.source.index]+I[K.target.index]);S=new Array(re),G(),C=new Array(re),Q()}}function G(){if(!!F)for(var X=0,j=b.length;X<j;++X)S[X]=+k(b[X],X,b)}function Q(){if(!!F)for(var X=0,j=b.length;X<j;++X)C[X]=+E(b[X],X,b)}return z.initialize=function(X){F=X,B()},z.links=function(X){return arguments.length?(b=X,B(),z):b},z.id=function(X){return arguments.length?(v=X,z):v},z.iterations=function(X){return arguments.length?(R=+X,z):R},z.strength=function(X){return arguments.length?(k=typeof X=="function"?X:n(+X),G(),z):k},z.distance=function(X){return arguments.length?(E=typeof X=="function"?X:n(+X),Q(),z):E},z}function p(b){return b.x}function c(b){return b.y}var m=10,l=Math.PI*(3-Math.sqrt(5));function x(b){var v,k=1,S=.001,E=1-Math.pow(S,1/300),C=0,F=.6,I=M.map(),D=e.timer(O),R=T.dispatch("tick","end");b==null&&(b=[]);function O(){z(),R.call("tick",v),k<S&&(D.stop(),R.call("end",v))}function z(Q){var X,j=b.length,re;Q===void 0&&(Q=1);for(var ue=0;ue<Q;++ue)for(k+=(C-k)*E,I.each(function(K){K(k)}),X=0;X<j;++X)re=b[X],re.fx==null?re.x+=re.vx*=F:(re.x=re.fx,re.vx=0),re.fy==null?re.y+=re.vy*=F:(re.y=re.fy,re.vy=0);return v}function B(){for(var Q=0,X=b.length,j;Q<X;++Q){if(j=b[Q],j.index=Q,j.fx!=null&&(j.x=j.fx),j.fy!=null&&(j.y=j.fy),isNaN(j.x)||isNaN(j.y)){var re=m*Math.sqrt(Q),ue=Q*l;j.x=re*Math.cos(ue),j.y=re*Math.sin(ue)}(isNaN(j.vx)||isNaN(j.vy))&&(j.vx=j.vy=0)}}function G(Q){return Q.initialize&&Q.initialize(b),Q}return B(),v={tick:z,restart:function(){return D.restart(O),v},stop:function(){return D.stop(),v},nodes:function(Q){return arguments.length?(b=Q,B(),I.each(G),v):b},alpha:function(Q){return arguments.length?(k=+Q,v):k},alphaMin:function(Q){return arguments.length?(S=+Q,v):S},alphaDecay:function(Q){return arguments.length?(E=+Q,v):+E},alphaTarget:function(Q){return arguments.length?(C=+Q,v):C},velocityDecay:function(Q){return arguments.length?(F=1-Q,v):1-F},force:function(Q,X){return arguments.length>1?(X==null?I.remove(Q):I.set(Q,G(X)),v):I.get(Q)},find:function(Q,X,j){var re=0,ue=b.length,K,te,Y,H,ee;for(j==null?j=1/0:j*=j,re=0;re<ue;++re)H=b[re],K=Q-H.x,te=X-H.y,Y=K*K+te*te,Y<j&&(ee=H,j=Y);return ee},on:function(Q,X){return arguments.length>1?(R.on(Q,X),v):R.on(Q)}}}function u(){var b,v,k,S=n(-30),E,C=1,F=1/0,I=.81;function D(B){var G,Q=b.length,X=f.quadtree(b,p,c).visitAfter(O);for(k=B,G=0;G<Q;++G)v=b[G],X.visit(z)}function R(){if(!!b){var B,G=b.length,Q;for(E=new Array(G),B=0;B<G;++B)Q=b[B],E[Q.index]=+S(Q,B,b)}}function O(B){var G=0,Q,X,j=0,re,ue,K;if(B.length){for(re=ue=K=0;K<4;++K)(Q=B[K])&&(X=Math.abs(Q.value))&&(G+=Q.value,j+=X,re+=X*Q.x,ue+=X*Q.y);B.x=re/j,B.y=ue/j}else{Q=B,Q.x=Q.data.x,Q.y=Q.data.y;do G+=E[Q.data.index];while(Q=Q.next)}B.value=G}function z(B,G,Q,X){if(!B.value)return!0;var j=B.x-v.x,re=B.y-v.y,ue=X-G,K=j*j+re*re;if(ue*ue/I<K)return K<F&&(j===0&&(j=r(),K+=j*j),re===0&&(re=r(),K+=re*re),K<C&&(K=Math.sqrt(C*K)),v.vx+=j*B.value*k/K,v.vy+=re*B.value*k/K),!0;if(B.length||K>=F)return;(B.data!==v||B.next)&&(j===0&&(j=r(),K+=j*j),re===0&&(re=r(),K+=re*re),K<C&&(K=Math.sqrt(C*K)));do B.data!==v&&(ue=E[B.data.index]*k/K,v.vx+=j*ue,v.vy+=re*ue);while(B=B.next)}return D.initialize=function(B){b=B,R()},D.strength=function(B){return arguments.length?(S=typeof B=="function"?B:n(+B),R(),D):S},D.distanceMin=function(B){return arguments.length?(C=B*B,D):Math.sqrt(C)},D.distanceMax=function(B){return arguments.length?(F=B*B,D):Math.sqrt(F)},D.theta=function(B){return arguments.length?(I=B*B,D):Math.sqrt(I)},D}function A(b,v,k){var S,E=n(.1),C,F;typeof b!="function"&&(b=n(+b)),v==null&&(v=0),k==null&&(k=0);function I(R){for(var O=0,z=S.length;O<z;++O){var B=S[O],G=B.x-v||1e-6,Q=B.y-k||1e-6,X=Math.sqrt(G*G+Q*Q),j=(F[O]-X)*C[O]*R/X;B.vx+=G*j,B.vy+=Q*j}}function D(){if(!!S){var R,O=S.length;for(C=new Array(O),F=new Array(O),R=0;R<O;++R)F[R]=+b(S[R],R,S),C[R]=isNaN(F[R])?0:+E(S[R],R,S)}}return I.initialize=function(R){S=R,D()},I.strength=function(R){return arguments.length?(E=typeof R=="function"?R:n(+R),D(),I):E},I.radius=function(R){return arguments.length?(b=typeof R=="function"?R:n(+R),D(),I):b},I.x=function(R){return arguments.length?(v=+R,I):v},I.y=function(R){return arguments.length?(k=+R,I):k},I}function _(b){var v=n(.1),k,S,E;typeof b!="function"&&(b=n(b==null?0:+b));function C(I){for(var D=0,R=k.length,O;D<R;++D)O=k[D],O.vx+=(E[D]-O.x)*S[D]*I}function F(){if(!!k){var I,D=k.length;for(S=new Array(D),E=new Array(D),I=0;I<D;++I)S[I]=isNaN(E[I]=+b(k[I],I,k))?0:+v(k[I],I,k)}}return C.initialize=function(I){k=I,F()},C.strength=function(I){return arguments.length?(v=typeof I=="function"?I:n(+I),F(),C):v},C.x=function(I){return arguments.length?(b=typeof I=="function"?I:n(+I),F(),C):b},C}function g(b){var v=n(.1),k,S,E;typeof b!="function"&&(b=n(b==null?0:+b));function C(I){for(var D=0,R=k.length,O;D<R;++D)O=k[D],O.vy+=(E[D]-O.y)*S[D]*I}function F(){if(!!k){var I,D=k.length;for(S=new Array(D),E=new Array(D),I=0;I<D;++I)S[I]=isNaN(E[I]=+b(k[I],I,k))?0:+v(k[I],I,k)}}return C.initialize=function(I){k=I,F()},C.strength=function(I){return arguments.length?(v=typeof I=="function"?I:n(+I),F(),C):v},C.y=function(I){return arguments.length?(b=typeof I=="function"?I:n(+I),F(),C):b},C}w.forceCenter=a,w.forceCollide=s,w.forceLink=d,w.forceManyBody=u,w.forceRadial=A,w.forceSimulation=x,w.forceX=_,w.forceY=g,Object.defineProperty(w,"__esModule",{value:!0})})},{"d3-collection":108,"d3-dispatch":110,"d3-quadtree":118,"d3-timer":123}],112:[function(i,U,V){(function(w,f){typeof V=="object"&&typeof U<"u"?f(V):(w=typeof globalThis<"u"?globalThis:w||self,f(w.d3=w.d3||{}))})(this,function(w){function f(b){return Math.abs(b=Math.round(b))>=1e21?b.toLocaleString("en").replace(/,/g,""):b.toString(10)}function M(b,v){if((k=(b=v?b.toExponential(v-1):b.toExponential()).indexOf("e"))<0)return null;var k,S=b.slice(0,k);return[S.length>1?S[0]+S.slice(2):S,+b.slice(k+1)]}function T(b){return b=M(Math.abs(b)),b?b[1]:NaN}function e(b,v){return function(k,S){for(var E=k.length,C=[],F=0,I=b[0],D=0;E>0&&I>0&&(D+I+1>S&&(I=Math.max(1,S-D)),C.push(k.substring(E-=I,E+I)),!((D+=I+1)>S));)I=b[F=(F+1)%b.length];return C.reverse().join(v)}}function a(b){return function(v){return v.replace(/[0-9]/g,function(k){return b[+k]})}}var n=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function r(b){if(!(v=n.exec(b)))throw new Error("invalid format: "+b);var v;return new t({fill:v[1],align:v[2],sign:v[3],symbol:v[4],zero:v[5],width:v[6],comma:v[7],precision:v[8]&&v[8].slice(1),trim:v[9],type:v[10]})}r.prototype=t.prototype;function t(b){this.fill=b.fill===void 0?" ":b.fill+"",this.align=b.align===void 0?">":b.align+"",this.sign=b.sign===void 0?"-":b.sign+"",this.symbol=b.symbol===void 0?"":b.symbol+"",this.zero=!!b.zero,this.width=b.width===void 0?void 0:+b.width,this.comma=!!b.comma,this.precision=b.precision===void 0?void 0:+b.precision,this.trim=!!b.trim,this.type=b.type===void 0?"":b.type+""}t.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function h(b){e:for(var v=b.length,k=1,S=-1,E;k<v;++k)switch(b[k]){case".":S=E=k;break;case"0":S===0&&(S=k),E=k;break;default:if(!+b[k])break e;S>0&&(S=0);break}return S>0?b.slice(0,S)+b.slice(E+1):b}var s;function o(b,v){var k=M(b,v);if(!k)return b+"";var S=k[0],E=k[1],C=E-(s=Math.max(-8,Math.min(8,Math.floor(E/3)))*3)+1,F=S.length;return C===F?S:C>F?S+new Array(C-F+1).join("0"):C>0?S.slice(0,C)+"."+S.slice(C):"0."+new Array(1-C).join("0")+M(b,Math.max(0,v+C-1))[0]}function y(b,v){var k=M(b,v);if(!k)return b+"";var S=k[0],E=k[1];return E<0?"0."+new Array(-E).join("0")+S:S.length>E+1?S.slice(0,E+1)+"."+S.slice(E+1):S+new Array(E-S.length+2).join("0")}var d={"%":function(b,v){return(b*100).toFixed(v)},b:function(b){return Math.round(b).toString(2)},c:function(b){return b+""},d:f,e:function(b,v){return b.toExponential(v)},f:function(b,v){return b.toFixed(v)},g:function(b,v){return b.toPrecision(v)},o:function(b){return Math.round(b).toString(8)},p:function(b,v){return y(b*100,v)},r:y,s:o,X:function(b){return Math.round(b).toString(16).toUpperCase()},x:function(b){return Math.round(b).toString(16)}};function p(b){return b}var c=Array.prototype.map,m=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function l(b){var v=b.grouping===void 0||b.thousands===void 0?p:e(c.call(b.grouping,Number),b.thousands+""),k=b.currency===void 0?"":b.currency[0]+"",S=b.currency===void 0?"":b.currency[1]+"",E=b.decimal===void 0?".":b.decimal+"",C=b.numerals===void 0?p:a(c.call(b.numerals,String)),F=b.percent===void 0?"%":b.percent+"",I=b.minus===void 0?"-":b.minus+"",D=b.nan===void 0?"NaN":b.nan+"";function R(z){z=r(z);var B=z.fill,G=z.align,Q=z.sign,X=z.symbol,j=z.zero,re=z.width,ue=z.comma,K=z.precision,te=z.trim,Y=z.type;Y==="n"?(ue=!0,Y="g"):d[Y]||(K===void 0&&(K=12),te=!0,Y="g"),(j||B==="0"&&G==="=")&&(j=!0,B="0",G="=");var H=X==="$"?k:X==="#"&&/[boxX]/.test(Y)?"0"+Y.toLowerCase():"",ee=X==="$"?S:/[%p]/.test(Y)?F:"",ne=d[Y],Z=/[defgprs%]/.test(Y);K=K===void 0?6:/[gprs]/.test(Y)?Math.max(1,Math.min(21,K)):Math.max(0,Math.min(20,K));function q(ie){var se=H,ae=ee,oe,be,ce;if(Y==="c")ae=ne(ie)+ae,ie="";else{ie=+ie;var de=ie<0||1/ie<0;if(ie=isNaN(ie)?D:ne(Math.abs(ie),K),te&&(ie=h(ie)),de&&+ie==0&&Q!=="+"&&(de=!1),se=(de?Q==="("?Q:I:Q==="-"||Q==="("?"":Q)+se,ae=(Y==="s"?m[8+s/3]:"")+ae+(de&&Q==="("?")":""),Z){for(oe=-1,be=ie.length;++oe<be;)if(ce=ie.charCodeAt(oe),48>ce||ce>57){ae=(ce===46?E+ie.slice(oe+1):ie.slice(oe))+ae,ie=ie.slice(0,oe);break}}}ue&&!j&&(ie=v(ie,1/0));var ye=se.length+ie.length+ae.length,ge=ye<re?new Array(re-ye+1).join(B):"";switch(ue&&j&&(ie=v(ge+ie,ge.length?re-ae.length:1/0),ge=""),G){case"<":ie=se+ie+ae+ge;break;case"=":ie=se+ge+ie+ae;break;case"^":ie=ge.slice(0,ye=ge.length>>1)+se+ie+ae+ge.slice(ye);break;default:ie=ge+se+ie+ae;break}return C(ie)}return q.toString=function(){return z+""},q}function O(z,B){var G=R((z=r(z),z.type="f",z)),Q=Math.max(-8,Math.min(8,Math.floor(T(B)/3)))*3,X=Math.pow(10,-Q),j=m[8+Q/3];return function(re){return G(X*re)+j}}return{format:R,formatPrefix:O}}var x;u({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function u(b){return x=l(b),w.format=x.format,w.formatPrefix=x.formatPrefix,x}function A(b){return Math.max(0,-T(Math.abs(b)))}function _(b,v){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(T(v)/3)))*3-T(Math.abs(b)))}function g(b,v){return b=Math.abs(b),v=Math.abs(v)-b,Math.max(0,T(v)-T(b))+1}w.FormatSpecifier=t,w.formatDefaultLocale=u,w.formatLocale=l,w.formatSpecifier=r,w.precisionFixed=A,w.precisionPrefix=_,w.precisionRound=g,Object.defineProperty(w,"__esModule",{value:!0})})},{}],113:[function(i,U,V){(function(w,f){typeof V=="object"&&typeof U<"u"?f(V,i("d3-geo"),i("d3-array")):f(w.d3=w.d3||{},w.d3,w.d3)})(this,function(w,f,M){var T=Math.abs,e=Math.atan,a=Math.atan2,n=Math.cos,r=Math.exp,t=Math.floor,h=Math.log,s=Math.max,o=Math.min,y=Math.pow,d=Math.round,p=Math.sign||function(ze){return ze>0?1:ze<0?-1:0},c=Math.sin,m=Math.tan,l=1e-6,x=1e-12,u=Math.PI,A=u/2,_=u/4,g=Math.SQRT1_2,b=D(2),v=D(u),k=u*2,S=180/u,E=u/180;function C(ze){return ze?ze/Math.sin(ze):1}function F(ze){return ze>1?A:ze<-1?-A:Math.asin(ze)}function I(ze){return ze>1?0:ze<-1?u:Math.acos(ze)}function D(ze){return ze>0?Math.sqrt(ze):0}function R(ze){return ze=r(2*ze),(ze-1)/(ze+1)}function O(ze){return(r(ze)-r(-ze))/2}function z(ze){return(r(ze)+r(-ze))/2}function B(ze){return h(ze+D(ze*ze+1))}function G(ze){return h(ze+D(ze*ze-1))}function Q(ze){var Ze=m(ze/2),at=2*h(n(ze/2))/(Ze*Ze);function ct(Et,At){var It=n(Et),gr=n(At),br=c(At),pr=gr*It,Mr=-((1-pr?h((1+pr)/2)/(1-pr):-.5)+at/(1+pr));return[Mr*gr*c(Et),Mr*br]}return ct.invert=function(Et,At){var It=D(Et*Et+At*At),gr=-ze/2,br=50,pr;if(!It)return[0,0];do{var Mr=gr/2,Or=n(Mr),$r=c(Mr),on=$r/Or,Sn=-h(T(Or));gr-=pr=(2/on*Sn-at*on-It)/(-Sn/($r*$r)+1-at/(2*Or*Or))*(Or<0?.7:1)}while(T(pr)>l&&--br>0);var Nn=c(gr);return[a(Et*Nn,It*n(gr)),F(At*Nn/It)]},ct}function X(){var ze=A,Ze=f.geoProjectionMutator(Q),at=Ze(ze);return at.radius=function(ct){return arguments.length?Ze(ze=ct*E):ze*S},at.scale(179.976).clipAngle(147)}function j(ze,Ze){var at=n(Ze),ct=C(I(at*n(ze/=2)));return[2*at*c(ze)*ct,c(Ze)*ct]}j.invert=function(ze,Ze){if(!(ze*ze+4*Ze*Ze>u*u+l)){var at=ze,ct=Ze,Et=25;do{var At=c(at),It=c(at/2),gr=n(at/2),br=c(ct),pr=n(ct),Mr=c(2*ct),Or=br*br,$r=pr*pr,on=It*It,Sn=1-$r*gr*gr,Nn=Sn?I(pr*gr)*D(Qn=1/Sn):Qn=0,Qn,_a=2*Nn*pr*It-ze,Ma=Nn*br-Ze,ri=Qn*($r*on+Nn*pr*gr*Or),Qa=Qn*(.5*At*Mr-Nn*2*br*It),si=Qn*.25*(Mr*It-Nn*br*$r*At),wi=Qn*(Or*gr+Nn*on*pr),mo=Qa*si-wi*ri;if(!mo)break;var fi=(Ma*Qa-_a*wi)/mo,to=(_a*si-Ma*ri)/mo;at-=fi,ct-=to}while((T(fi)>l||T(to)>l)&&--Et>0);return[at,ct]}};function re(){return f.geoProjection(j).scale(152.63)}function ue(ze){var Ze=c(ze),at=n(ze),ct=ze>=0?1:-1,Et=m(ct*ze),At=(1+Ze-at)/2;function It(gr,br){var pr=n(br),Mr=n(gr/=2);return[(1+pr)*c(gr),(ct*br>-a(Mr,Et)-.001?0:-ct*10)+At+c(br)*at-(1+pr)*Ze*Mr]}return It.invert=function(gr,br){var pr=0,Mr=0,Or=50;do{var $r=n(pr),on=c(pr),Sn=n(Mr),Nn=c(Mr),Qn=1+Sn,_a=Qn*on-gr,Ma=At+Nn*at-Qn*Ze*$r-br,ri=Qn*$r/2,Qa=-on*Nn,si=Ze*Qn*on/2,wi=at*Sn+Ze*$r*Nn,mo=Qa*si-wi*ri,fi=(Ma*Qa-_a*wi)/mo/2,to=(_a*si-Ma*ri)/mo;T(to)>2&&(to/=2),pr-=fi,Mr-=to}while((T(fi)>l||T(to)>l)&&--Or>0);return ct*Mr>-a(n(pr),Et)-.001?[pr*2,Mr]:null},It}function K(){var ze=20*E,Ze=ze>=0?1:-1,at=m(Ze*ze),ct=f.geoProjectionMutator(ue),Et=ct(ze),At=Et.stream;return Et.parallel=function(It){return arguments.length?(at=m((Ze=(ze=It*E)>=0?1:-1)*ze),ct(ze)):ze*S},Et.stream=function(It){var gr=Et.rotate(),br=At(It),pr=(Et.rotate([0,0]),At(It)),Mr=Et.precision();return Et.rotate(gr),br.sphere=function(){pr.polygonStart(),pr.lineStart();for(var Or=Ze*-180;Ze*Or<180;Or+=Ze*90)pr.point(Or,Ze*90);if(ze)for(;Ze*(Or-=3*Ze*Mr)>=-180;)pr.point(Or,Ze*-a(n(Or*E/2),at)*S);pr.lineEnd(),pr.polygonEnd()},br},Et.scale(218.695).center([0,28.0974])}function te(ze,Ze){var at=m(Ze/2),ct=D(1-at*at),Et=1+ct*n(ze/=2),At=c(ze)*ct/Et,It=at/Et,gr=At*At,br=It*It;return[4/3*At*(3+gr-3*br),4/3*It*(3+3*gr-br)]}te.invert=function(ze,Ze){if(ze*=3/8,Ze*=3/8,!ze&&T(Ze)>1)return null;var at=ze*ze,ct=Ze*Ze,Et=1+at+ct,At=D((Et-D(Et*Et-4*Ze*Ze))/2),It=F(At)/3,gr=At?G(T(Ze/At))/3:B(T(ze))/3,br=n(It),pr=z(gr),Mr=pr*pr-br*br;return[p(ze)*2*a(O(gr)*br,.25-Mr),p(Ze)*2*a(pr*c(It),.25+Mr)]};function Y(){return f.geoProjection(te).scale(66.1603)}var H=D(8),ee=h(1+b);function ne(ze,Ze){var at=T(Ze);return at<_?[ze,h(m(_+Ze/2))]:[ze*n(at)*(2*b-1/c(at)),p(Ze)*(2*b*(at-_)-h(m(at/2)))]}ne.invert=function(ze,Ze){if((At=T(Ze))<ee)return[ze,2*e(r(Ze))-A];var at=_,ct=25,Et,At;do{var It=n(at/2),gr=m(at/2);at-=Et=(H*(at-_)-h(gr)-At)/(H-It*It/(2*gr))}while(T(Et)>x&&--ct>0);return[ze/(n(at)*(H-1/c(at))),p(Ze)*at]};function Z(){return f.geoProjection(ne).scale(112.314)}function q(ze){var Ze=2*u/ze;function at(ct,Et){var At=f.geoAzimuthalEquidistantRaw(ct,Et);if(T(ct)>A){var It=a(At[1],At[0]),gr=D(At[0]*At[0]+At[1]*At[1]),br=Ze*d((It-A)/Ze)+A,pr=a(c(It-=br),2-n(It));It=br+F(u/gr*c(pr))-pr,At[0]=gr*n(It),At[1]=gr*c(It)}return At}return at.invert=function(ct,Et){var At=D(ct*ct+Et*Et);if(At>A){var It=a(Et,ct),gr=Ze*d((It-A)/Ze)+A,br=It>gr?-1:1,pr=At*n(gr-It),Mr=1/m(br*I((pr-u)/D(u*(u-2*pr)+At*At)));It=gr+2*e((Mr+br*D(Mr*Mr-3))/3),ct=At*n(It),Et=At*c(It)}return f.geoAzimuthalEquidistantRaw.invert(ct,Et)},at}function ie(){var ze=5,Ze=f.geoProjectionMutator(q),at=Ze(ze),ct=at.stream,Et=.01,At=-n(Et*E),It=c(Et*E);return at.lobes=function(gr){return arguments.length?Ze(ze=+gr):ze},at.stream=function(gr){var br=at.rotate(),pr=ct(gr),Mr=(at.rotate([0,0]),ct(gr));return at.rotate(br),pr.sphere=function(){Mr.polygonStart(),Mr.lineStart();for(var Or=0,$r=360/ze,on=2*u/ze,Sn=90-180/ze,Nn=A;Or<ze;++Or,Sn-=$r,Nn-=on)Mr.point(a(It*n(Nn),At)*S,F(It*c(Nn))*S),Sn<-90?(Mr.point(-90,-180-Sn-Et),Mr.point(-90,-180-Sn+Et)):(Mr.point(90,Sn+Et),Mr.point(90,Sn-Et));Mr.lineEnd(),Mr.polygonEnd()},pr},at.scale(87.8076).center([0,17.1875]).clipAngle(180-.001)}function se(ze,Ze){if(arguments.length<2&&(Ze=ze),Ze===1)return f.geoAzimuthalEqualAreaRaw;if(Ze===1/0)return ae;function at(ct,Et){var At=f.geoAzimuthalEqualAreaRaw(ct/Ze,Et);return At[0]*=ze,At}return at.invert=function(ct,Et){var At=f.geoAzimuthalEqualAreaRaw.invert(ct/ze,Et);return At[0]*=Ze,At},at}function ae(ze,Ze){return[ze*n(Ze)/n(Ze/=2),2*c(Ze)]}ae.invert=function(ze,Ze){var at=2*F(Ze/2);return[ze*n(at/2)/n(at),at]};function oe(){var ze=2,Ze=f.geoProjectionMutator(se),at=Ze(ze);return at.coefficient=function(ct){return arguments.length?Ze(ze=+ct):ze},at.scale(169.529)}function be(ze,Ze,at){var ct=100,Et,At,It;at=at===void 0?0:+at,Ze=+Ze;do At=ze(at),It=ze(at+l),At===It&&(It=At+l),at-=Et=-1*l*(At-Ze)/(At-It);while(ct-- >0&&T(Et)>l);return ct<0?NaN:at}function ce(ze,Ze,at){return Ze===void 0&&(Ze=40),at===void 0&&(at=x),function(ct,Et,At,It){var gr,br,pr;At=At===void 0?0:+At,It=It===void 0?0:+It;for(var Mr=0;Mr<Ze;Mr++){var Or=ze(At,It),$r=Or[0]-ct,on=Or[1]-Et;if(T($r)<at&&T(on)<at)break;var Sn=$r*$r+on*on;if(Sn>gr){At-=br/=2,It-=pr/=2;continue}gr=Sn;var Nn=(At>0?-1:1)*at,Qn=(It>0?-1:1)*at,_a=ze(At+Nn,It),Ma=ze(At,It+Qn),ri=(_a[0]-Or[0])/Nn,Qa=(_a[1]-Or[1])/Nn,si=(Ma[0]-Or[0])/Qn,wi=(Ma[1]-Or[1])/Qn,mo=wi*ri-Qa*si,fi=(T(mo)<.5?.5:1)/mo;if(br=(on*si-$r*wi)*fi,pr=($r*Qa-on*ri)*fi,At+=br,It+=pr,T(br)<at&&T(pr)<at)break}return[At,It]}}function de(){var ze=se(1.68,2),Ze=1.4,at=12;function ct(Et,At){if(Et+At<-Ze){var It=(Et-At+1.6)*(Et+At+Ze)/8;Et+=It,At-=.8*It*c(At+u/2)}var gr=ze(Et,At),br=(1-n(Et*At))/at;return gr[1]<0&&(gr[0]*=1+br),gr[1]>0&&(gr[1]*=1+br/1.5*gr[0]*gr[0]),gr}return ct.invert=ce(ct),ct}function ye(){return f.geoProjection(de()).rotate([-16.5,-42]).scale(176.57).center([7.93,.09])}function ge(ze,Ze){var at=ze*c(Ze),ct=30,Et;do Ze-=Et=(Ze+c(Ze)-at)/(1+n(Ze));while(T(Et)>l&&--ct>0);return Ze/2}function me(ze,Ze,at){function ct(Et,At){return[ze*Et*n(At=ge(at,At)),Ze*c(At)]}return ct.invert=function(Et,At){return At=F(At/Ze),[Et/(ze*n(At)),F((2*At+c(2*At))/at)]},ct}var Se=me(b/A,b,u);function Le(){return f.geoProjection(Se).scale(169.529)}var Oe=2.00276,we=1.11072;function Ce(ze,Ze){var at=ge(u,Ze);return[Oe*ze/(1/n(Ze)+we/n(at)),(Ze+b*c(at))/Oe]}Ce.invert=function(ze,Ze){var at=Oe*Ze,ct=Ze<0?-_:_,Et=25,At,It;do It=at-b*c(ct),ct-=At=(c(2*ct)+2*ct-u*c(It))/(2*n(2*ct)+2+u*n(It)*b*n(ct));while(T(At)>l&&--Et>0);return It=at-b*c(ct),[ze*(1/n(It)+we/n(ct))/Oe,It]};function Ke(){return f.geoProjection(Ce).scale(160.857)}function Ye(ze){var Ze=0,at=f.geoProjectionMutator(ze),ct=at(Ze);return ct.parallel=function(Et){return arguments.length?at(Ze=Et*E):Ze*S},ct}function Fe(ze,Ze){return[ze*n(Ze),Ze]}Fe.invert=function(ze,Ze){return[ze/n(Ze),Ze]};function Re(){return f.geoProjection(Fe).scale(152.63)}function je(ze){if(!ze)return Fe;var Ze=1/m(ze);function at(ct,Et){var At=Ze+ze-Et,It=At&&ct*n(Et)/At;return[At*c(It),Ze-At*n(It)]}return at.invert=function(ct,Et){var At=D(ct*ct+(Et=Ze-Et)*Et),It=Ze+ze-At;return[At/n(It)*a(ct,Et),It]},at}function xt(){return Ye(je).scale(123.082).center([0,26.1441]).parallel(45)}function Nt(ze){function Ze(at,ct){var Et=A-ct,At=Et&&at*ze*c(Et)/Et;return[Et*c(At)/ze,A-Et*n(At)]}return Ze.invert=function(at,ct){var Et=at*ze,At=A-ct,It=D(Et*Et+At*At),gr=a(Et,At);return[(It?It/c(It):1)*gr/ze,A-It]},Ze}function tr(){var ze=.5,Ze=f.geoProjectionMutator(Nt),at=Ze(ze);return at.fraction=function(ct){return arguments.length?Ze(ze=+ct):ze},at.scale(158.837)}var Ht=me(1,4/u,u);function Pt(){return f.geoProjection(Ht).scale(152.63)}function $t(ze,Ze,at,ct,Et,At){var It=n(At),gr;if(T(ze)>1||T(At)>1)gr=I(at*Et+Ze*ct*It);else{var br=c(ze/2),pr=c(At/2);gr=2*F(D(br*br+Ze*ct*pr*pr))}return T(gr)>l?[gr,a(ct*c(At),Ze*Et-at*ct*It)]:[0,0]}function Ut(ze,Ze,at){return I((ze*ze+Ze*Ze-at*at)/(2*ze*Ze))}function Lt(ze){return ze-2*u*t((ze+u)/(2*u))}function We(ze,Ze,at){for(var ct=[[ze[0],ze[1],c(ze[1]),n(ze[1])],[Ze[0],Ze[1],c(Ze[1]),n(Ze[1])],[at[0],at[1],c(at[1]),n(at[1])]],Et=ct[2],At,It=0;It<3;++It,Et=At)At=ct[It],Et.v=$t(At[1]-Et[1],Et[3],Et[2],At[3],At[2],At[0]-Et[0]),Et.point=[0,0];var gr=Ut(ct[0].v[0],ct[2].v[0],ct[1].v[0]),br=Ut(ct[0].v[0],ct[1].v[0],ct[2].v[0]),pr=u-gr;ct[2].point[1]=0,ct[0].point[0]=-(ct[1].point[0]=ct[0].v[0]/2);var Mr=[ct[2].point[0]=ct[0].point[0]+ct[2].v[0]*n(gr),2*(ct[0].point[1]=ct[1].point[1]=ct[2].v[0]*c(gr))];function Or($r,on){var Sn=c(on),Nn=n(on),Qn=new Array(3),_a;for(_a=0;_a<3;++_a){var Ma=ct[_a];if(Qn[_a]=$t(on-Ma[1],Ma[3],Ma[2],Nn,Sn,$r-Ma[0]),!Qn[_a][0])return Ma.point;Qn[_a][1]=Lt(Qn[_a][1]-Ma.v[1])}var ri=Mr.slice();for(_a=0;_a<3;++_a){var Qa=_a==2?0:_a+1,si=Ut(ct[_a].v[0],Qn[_a][0],Qn[Qa][0]);Qn[_a][1]<0&&(si=-si),_a?_a==1?(si=br-si,ri[0]-=Qn[_a][0]*n(si),ri[1]-=Qn[_a][0]*c(si)):(si=pr-si,ri[0]+=Qn[_a][0]*n(si),ri[1]+=Qn[_a][0]*c(si)):(ri[0]+=Qn[_a][0]*n(si),ri[1]-=Qn[_a][0]*c(si))}return ri[0]/=3,ri[1]/=3,ri}return Or}function ot(ze){return ze[0]*=E,ze[1]*=E,ze}function Ge(){return Me([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])}function Me(ze,Ze,at){var ct=f.geoCentroid({type:"MultiPoint",coordinates:[ze,Ze,at]}),Et=[-ct[0],-ct[1]],At=f.geoRotation(Et),It=We(ot(At(ze)),ot(At(Ze)),ot(At(at)));It.invert=ce(It);var gr=f.geoProjection(It).rotate(Et),br=gr.center;return delete gr.rotate,gr.center=function(pr){return arguments.length?br(At(pr)):At.invert(br())},gr.clipAngle(90)}function Ve(ze,Ze){var at=D(1-c(Ze));return[2/v*ze*at,v*(1-at)]}Ve.invert=function(ze,Ze){var at=(at=Ze/v-1)*at;return[at>0?ze*D(u/at)/2:0,F(1-at)]};function Qe(){return f.geoProjection(Ve).scale(95.6464).center([0,30])}function tt(ze){var Ze=m(ze);function at(ct,Et){return[ct,(ct?ct/c(ct):1)*(c(Et)*n(ct)-Ze*n(Et))]}return at.invert=Ze?function(ct,Et){ct&&(Et*=c(ct)/ct);var At=n(ct);return[ct,2*a(D(At*At+Ze*Ze-Et*Et)-At,Ze-Et)]}:function(ct,Et){return[ct,F(ct?Et*m(ct)/ct:Et)]},at}function St(){return Ye(tt).scale(249.828).clipAngle(90)}var wt=D(3);function Ct(ze,Ze){return[wt*ze*(2*n(2*Ze/3)-1)/v,wt*v*c(Ze/3)]}Ct.invert=function(ze,Ze){var at=3*F(Ze/(wt*v));return[v*ze/(wt*(2*n(2*at/3)-1)),at]};function jt(){return f.geoProjection(Ct).scale(156.19)}function Bt(ze){var Ze=n(ze);function at(ct,Et){return[ct*Ze,c(Et)/Ze]}return at.invert=function(ct,Et){return[ct/Ze,F(Et*Ze)]},at}function Wt(){return Ye(Bt).parallel(38.58).scale(195.044)}function Qt(ze){var Ze=n(ze);function at(ct,Et){return[ct*Ze,(1+Ze)*m(Et/2)]}return at.invert=function(ct,Et){return[ct/Ze,e(Et/(1+Ze))*2]},at}function Zt(){return Ye(Qt).scale(124.75)}function cr(ze,Ze){var at=D(8/(3*u));return[at*ze*(1-T(Ze)/u),at*Ze]}cr.invert=function(ze,Ze){var at=D(8/(3*u)),ct=Ze/at;return[ze/(at*(1-T(ct)/u)),ct]};function Xr(){return f.geoProjection(cr).scale(165.664)}function vn(ze,Ze){var at=D(4-3*c(T(Ze)));return[2/D(6*u)*ze*at,p(Ze)*D(2*u/3)*(2-at)]}vn.invert=function(ze,Ze){var at=2-T(Ze)/D(2*u/3);return[ze*D(6*u)/(2*at),p(Ze)*F((4-at*at)/3)]};function en(){return f.geoProjection(vn).scale(165.664)}function ut(ze,Ze){var at=D(u*(4+u));return[2/at*ze*(1+D(1-4*Ze*Ze/(u*u))),4/at*Ze]}ut.invert=function(ze,Ze){var at=D(u*(4+u))/2;return[ze*at/(1+D(1-Ze*Ze*(4+u)/(4*u))),Ze*at/2]};function ar(){return f.geoProjection(ut).scale(180.739)}function rr(ze,Ze){var at=(2+A)*c(Ze);Ze/=2;for(var ct=0,Et=1/0;ct<10&&T(Et)>l;ct++){var At=n(Ze);Ze-=Et=(Ze+c(Ze)*(At+2)-at)/(2*At*(1+At))}return[2/D(u*(4+u))*ze*(1+n(Ze)),2*D(u/(4+u))*c(Ze)]}rr.invert=function(ze,Ze){var at=Ze*D((4+u)/u)/2,ct=F(at),Et=n(ct);return[ze/(2/D(u*(4+u))*(1+Et)),F((ct+at*(Et+2))/(2+A))]};function Kt(){return f.geoProjection(rr).scale(180.739)}function Er(ze,Ze){return[ze*(1+n(Ze))/D(2+u),2*Ze/D(2+u)]}Er.invert=function(ze,Ze){var at=D(2+u),ct=Ze*at/2;return[at*ze/(1+n(ct)),ct]};function st(){return f.geoProjection(Er).scale(173.044)}function et(ze,Ze){for(var at=(1+A)*c(Ze),ct=0,Et=1/0;ct<10&&T(Et)>l;ct++)Ze-=Et=(Ze+c(Ze)-at)/(1+n(Ze));return at=D(2+u),[ze*(1+n(Ze))/at,2*Ze/at]}et.invert=function(ze,Ze){var at=1+A,ct=D(at/2);return[ze*2*ct/(1+n(Ze*=ct)),F((Ze+c(Ze))/at)]};function ht(){return f.geoProjection(et).scale(173.044)}var vt=3+2*b;function kt(ze,Ze){var at=c(ze/=2),ct=n(ze),Et=D(n(Ze)),At=n(Ze/=2),It=c(Ze)/(At+b*ct*Et),gr=D(2/(1+It*It)),br=D((b*At+(ct+at)*Et)/(b*At+(ct-at)*Et));return[vt*(gr*(br-1/br)-2*h(br)),vt*(gr*It*(br+1/br)-2*e(It))]}kt.invert=function(ze,Ze){if(!(At=te.invert(ze/1.2,Ze*1.065)))return null;var at=At[0],ct=At[1],Et=20,At;ze/=vt,Ze/=vt;do{var It=at/2,gr=ct/2,br=c(It),pr=n(It),Mr=c(gr),Or=n(gr),$r=n(ct),on=D($r),Sn=Mr/(Or+b*pr*on),Nn=Sn*Sn,Qn=D(2/(1+Nn)),_a=b*Or+(pr+br)*on,Ma=b*Or+(pr-br)*on,ri=_a/Ma,Qa=D(ri),si=Qa-1/Qa,wi=Qa+1/Qa,mo=Qn*si-2*h(Qa)-ze,fi=Qn*Sn*wi-2*e(Sn)-Ze,to=Mr&&g*on*br*Nn/Mr,To=(b*pr*Or+on)/(2*(Or+b*pr*on)*(Or+b*pr*on)*on),Io=-.5*Sn*Qn*Qn*Qn,Li=Io*to,zi=Io*To,Ps=(Ps=2*Or+b*on*(pr-br))*Ps*Qa,Co=(b*pr*Or*on+$r)/Ps,Yo=-(b*br*Mr)/(on*Ps),ls=si*Li-2*Co/Qa+Qn*(Co+Co/ri),le=si*zi-2*Yo/Qa+Qn*(Yo+Yo/ri),_e=Sn*wi*Li-2*to/(1+Nn)+Qn*wi*to+Qn*Sn*(Co-Co/ri),De=Sn*wi*zi-2*To/(1+Nn)+Qn*wi*To+Qn*Sn*(Yo-Yo/ri),Ue=le*_e-De*ls;if(!Ue)break;var Be=(fi*le-mo*De)/Ue,qe=(mo*_e-fi*ls)/Ue;at-=Be,ct=s(-A,o(A,ct-qe))}while((T(Be)>l||T(qe)>l)&&--Et>0);return T(T(ct)-A)<l?[0,ct]:Et&&[at,ct]};function Vt(){return f.geoProjection(kt).scale(62.5271)}var Pe=n(35*E);function ke(ze,Ze){var at=m(Ze/2);return[ze*Pe*D(1-at*at),(1+Pe)*at]}ke.invert=function(ze,Ze){var at=Ze/(1+Pe);return[ze&&ze/(Pe*D(1-at*at)),2*e(at)]};function lt(){return f.geoProjection(ke).scale(137.152)}function ft(ze,Ze){var at=Ze/2,ct=n(at);return[2*ze/v*n(Ze)*ct*ct,v*m(at)]}ft.invert=function(ze,Ze){var at=e(Ze/v),ct=n(at),Et=2*at;return[ze*v/2/(n(Et)*ct*ct),Et]};function yt(){return f.geoProjection(ft).scale(135.264)}function Rt(ze){var Ze=1-ze,at=At(u,0)[0]-At(-u,0)[0],ct=At(0,A)[1]-At(0,-A)[1],Et=D(2*ct/at);function At(br,pr){var Mr=n(pr),Or=c(pr);return[Mr/(Ze+ze*Mr)*br,Ze*pr+ze*Or]}function It(br,pr){var Mr=At(br,pr);return[Mr[0]*Et,Mr[1]/Et]}function gr(br){return It(0,br)[1]}return It.invert=function(br,pr){var Mr=be(gr,pr),Or=br/Et*(ze+Ze/n(Mr));return[Or,Mr]},It}function _t(){var ze=.5,Ze=f.geoProjectionMutator(Rt),at=Ze(ze);return at.alpha=function(ct){return arguments.length?Ze(ze=+ct):ze},at.scale(168.725)}function Dt(ze){return[ze[0]/2,F(m(ze[1]/2*E))*S]}function Jt(ze){return[ze[0]*2,2*e(c(ze[1]*E))*S]}function fr(ze){ze==null&&(ze=f.geoOrthographic);var Ze=ze(),at=f.geoEquirectangular().scale(S).precision(0).clipAngle(null).translate([0,0]);function ct(At){return Ze(Dt(At))}Ze.invert&&(ct.invert=function(At){return Jt(Ze.invert(At))}),ct.stream=function(At){var It=Ze.stream(At),gr=at.stream({point:function(br,pr){It.point(br/2,F(m(-pr/2*E))*S)},lineStart:function(){It.lineStart()},lineEnd:function(){It.lineEnd()},polygonStart:function(){It.polygonStart()},polygonEnd:function(){It.polygonEnd()}});return gr.sphere=It.sphere,gr};function Et(At){ct[At]=function(){return arguments.length?(Ze[At].apply(Ze,arguments),ct):Ze[At]()}}return ct.rotate=function(At){return arguments.length?(at.rotate(At),ct):at.rotate()},ct.center=function(At){return arguments.length?(Ze.center(Dt(At)),ct):Jt(Ze.center())},Et("angle"),Et("clipAngle"),Et("clipExtent"),Et("fitExtent"),Et("fitHeight"),Et("fitSize"),Et("fitWidth"),Et("scale"),Et("translate"),Et("precision"),ct.scale(249.5)}function Rr(ze,Ze){var at=2*u/Ze,ct=ze*ze;function Et(At,It){var gr=f.geoAzimuthalEquidistantRaw(At,It),br=gr[0],pr=gr[1],Mr=br*br+pr*pr;if(Mr>ct){var Or=D(Mr),$r=a(pr,br),on=at*d($r/at),Sn=$r-on,Nn=ze*n(Sn),Qn=(ze*c(Sn)-Sn*c(Nn))/(A-Nn),_a=Sr(Sn,Qn),Ma=(u-ze)/Pr(_a,Nn,u);br=Or;var ri=50,Qa;do br-=Qa=(ze+Pr(_a,Nn,br)*Ma-Or)/(_a(br)*Ma);while(T(Qa)>l&&--ri>0);pr=Sn*c(br),br<A&&(pr-=Qn*(br-A));var si=c(on),wi=n(on);gr[0]=br*wi-pr*si,gr[1]=br*si+pr*wi}return gr}return Et.invert=function(At,It){var gr=At*At+It*It;if(gr>ct){var br=D(gr),pr=a(It,At),Mr=at*d(pr/at),Or=pr-Mr;At=br*n(Or),It=br*c(Or);for(var $r=At-A,on=c(At),Sn=It/on,Nn=At<A?1/0:0,Qn=10;;){var _a=ze*c(Sn),Ma=ze*n(Sn),ri=c(Ma),Qa=A-Ma,si=(_a-Sn*ri)/Qa,wi=Sr(Sn,si);if(T(Nn)<x||!--Qn)break;Sn-=Nn=(Sn*on-si*$r-It)/(on-$r*2*(Qa*(Ma+Sn*_a*n(Ma)-ri)-_a*(_a-Sn*ri))/(Qa*Qa))}br=ze+Pr(wi,Ma,At)*(u-ze)/Pr(wi,Ma,u),pr=Mr+Sn,At=br*n(pr),It=br*c(pr)}return f.geoAzimuthalEquidistantRaw.invert(At,It)},Et}function Sr(ze,Ze){return function(at){var ct=ze*n(at);return at<A&&(ct-=Ze),D(1+ct*ct)}}function Pr(ze,Ze,at){for(var ct=50,Et=(at-Ze)/ct,At=ze(Ze)+ze(at),It=1,gr=Ze;It<ct;++It)At+=2*ze(gr+=Et);return At*.5*Et}function Jr(){var ze=6,Ze=30*E,at=n(Ze),ct=c(Ze),Et=f.geoProjectionMutator(Rr),At=Et(Ze,ze),It=At.stream,gr=.01,br=-n(gr*E),pr=c(gr*E);return At.radius=function(Mr){return arguments.length?(at=n(Ze=Mr*E),ct=c(Ze),Et(Ze,ze)):Ze*S},At.lobes=function(Mr){return arguments.length?Et(Ze,ze=+Mr):ze},At.stream=function(Mr){var Or=At.rotate(),$r=It(Mr),on=(At.rotate([0,0]),It(Mr));return At.rotate(Or),$r.sphere=function(){on.polygonStart(),on.lineStart();for(var Sn=0,Nn=2*u/ze,Qn=0;Sn<ze;++Sn,Qn-=Nn)on.point(a(pr*n(Qn),br)*S,F(pr*c(Qn))*S),on.point(a(ct*n(Qn-Nn/2),at)*S,F(ct*c(Qn-Nn/2))*S);on.lineEnd(),on.polygonEnd()},$r},At.rotate([90,-40]).scale(91.7095).clipAngle(180-.001)}function ur(ze,Ze,at,ct,Et,At,It,gr){arguments.length<8&&(gr=0);function br(pr,Mr){if(!Mr)return[ze*pr/u,0];var Or=Mr*Mr,$r=ze+Or*(Ze+Or*(at+Or*ct)),on=Mr*(Et-1+Or*(At-gr+Or*It)),Sn=($r*$r+on*on)/(2*on),Nn=pr*F($r/Sn)/u;return[Sn*c(Nn),Mr*(1+Or*gr)+Sn*(1-n(Nn))]}return br.invert=function(pr,Mr){var Or=u*pr/ze,$r=Mr,on,Sn,Nn=50;do{var Qn=$r*$r,_a=ze+Qn*(Ze+Qn*(at+Qn*ct)),Ma=$r*(Et-1+Qn*(At-gr+Qn*It)),ri=_a*_a+Ma*Ma,Qa=2*Ma,si=ri/Qa,wi=si*si,mo=F(_a/si)/u,fi=Or*mo,to=_a*_a,To=(2*Ze+Qn*(4*at+Qn*6*ct))*$r,Io=Et+Qn*(3*At+Qn*5*It),Li=2*(_a*To+Ma*(Io-1)),zi=2*(Io-1),Ps=(Li*Qa-ri*zi)/(Qa*Qa),Co=n(fi),Yo=c(fi),ls=si*Co,le=si*Yo,_e=Or/u*(1/D(1-to/wi))*(To*si-_a*Ps)/wi,De=le-pr,Ue=$r*(1+Qn*gr)+si-ls-Mr,Be=Ps*Yo+ls*_e,qe=ls*mo,Mt=1+Ps-(Ps*Co-le*_e),mt=le*mo,Ot=Be*mt-Mt*qe;if(!Ot)break;Or-=on=(Ue*Be-De*Mt)/Ot,$r-=Sn=(De*mt-Ue*qe)/Ot}while((T(on)>l||T(Sn)>l)&&--Nn>0);return[Or,$r]},br}var _r=ur(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555);function Br(){return f.geoProjection(_r).scale(149.995)}var Yr=ur(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742);function Dr(){return f.geoProjection(Yr).scale(153.93)}var it=ur(5/6*u,-.62636,-.0344,0,1.3493,-.05524,0,.045);function zt(){return f.geoProjection(it).scale(130.945)}function qt(ze,Ze){var at=ze*ze,ct=Ze*Ze;return[ze*(1-.162388*ct)*(.87-952426e-9*at*at),Ze*(1+ct/12)]}qt.invert=function(ze,Ze){var at=ze,ct=Ze,Et=50,At;do{var It=ct*ct;ct-=At=(ct*(1+It/12)-Ze)/(1+It/4)}while(T(At)>l&&--Et>0);Et=50,ze/=1-.162388*It;do{var gr=(gr=at*at)*gr;at-=At=(at*(.87-952426e-9*gr)-ze)/(.87-.00476213*gr)}while(T(At)>l&&--Et>0);return[at,ct]};function hr(){return f.geoProjection(qt).scale(131.747)}var Ur=ur(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);function Gr(){return f.geoProjection(Ur).scale(131.087)}function Ir(ze){var Ze=ze(A,0)[0]-ze(-A,0)[0];function at(ct,Et){var At=ct>0?-.5:.5,It=ze(ct+At*u,Et);return It[0]-=At*Ze,It}return ze.invert&&(at.invert=function(ct,Et){var At=ct>0?-.5:.5,It=ze.invert(ct+At*Ze,Et),gr=It[0]-At*u;return gr<-u?gr+=2*u:gr>u&&(gr-=2*u),It[0]=gr,It}),at}function Cr(ze,Ze){var at=p(ze),ct=p(Ze),Et=n(Ze),At=n(ze)*Et,It=c(ze)*Et,gr=c(ct*Ze);ze=T(a(It,gr)),Ze=F(At),T(ze-A)>l&&(ze%=A);var br=Kr(ze>u/4?A-ze:ze,Ze);return ze>u/4&&(gr=br[0],br[0]=-br[1],br[1]=-gr),br[0]*=at,br[1]*=-ct,br}Cr.invert=function(ze,Ze){T(ze)>1&&(ze=p(ze)*2-ze),T(Ze)>1&&(Ze=p(Ze)*2-Ze);var at=p(ze),ct=p(Ze),Et=-at*ze,At=-ct*Ze,It=At/Et<1,gr=Cn(It?At:Et,It?Et:At),br=gr[0],pr=gr[1],Mr=n(pr);return It&&(br=-A-br),[at*(a(c(br)*Mr,-c(pr))+u),ct*F(n(br)*Mr)]};function Kr(ze,Ze){if(Ze===A)return[0,0];var at=c(Ze),ct=at*at,Et=ct*ct,At=1+Et,It=1+3*Et,gr=1-Et,br=F(1/D(At)),pr=gr+ct*At*br,Mr=(1-at)/pr,Or=D(Mr),$r=Mr*At,on=D($r),Sn=Or*gr,Nn,Qn;if(ze===0)return[0,-(Sn+ct*on)];var _a=n(Ze),Ma=1/_a,ri=2*at*_a,Qa=(-3*ct+br*It)*ri,si=(-pr*_a-(1-at)*Qa)/(pr*pr),wi=.5*si/Or,mo=gr*wi-2*ct*Or*ri,fi=ct*At*si+Mr*It*ri,to=-Ma*ri,To=-Ma*fi,Io=-2*Ma*mo,Li=4*ze/u,zi;if(ze>.222*u||Ze<u/4&&ze>.175*u){if(Nn=(Sn+ct*D($r*(1+Et)-Sn*Sn))/(1+Et),ze>u/4)return[Nn,Nn];var Ps=Nn,Co=.5*Nn;Nn=.5*(Co+Ps),Qn=50;do{var Yo=D($r-Nn*Nn),ls=Nn*(Io+to*Yo)+To*F(Nn/on)-Li;if(!ls)break;ls<0?Co=Nn:Ps=Nn,Nn=.5*(Co+Ps)}while(T(Ps-Co)>l&&--Qn>0)}else{Nn=l,Qn=25;do{var le=Nn*Nn,_e=D($r-le),De=Io+to*_e,Ue=Nn*De+To*F(Nn/on)-Li,Be=De+(To-to*le)/_e;Nn-=zi=_e?Ue/Be:0}while(T(zi)>l&&--Qn>0)}return[Nn,-Sn-ct*D($r-Nn*Nn)]}function Cn(ze,Ze){for(var at=0,ct=1,Et=.5,At=50;;){var It=Et*Et,gr=D(Et),br=F(1/D(1+It)),pr=1-It+Et*(1+It)*br,Mr=(1-gr)/pr,Or=D(Mr),$r=Mr*(1+It),on=Or*(1-It),Sn=$r-ze*ze,Nn=D(Sn),Qn=Ze+on+Et*Nn;if(T(ct-at)<x||--At===0||Qn===0)break;Qn>0?at=Et:ct=Et,Et=.5*(at+ct)}if(!At)return null;var _a=F(gr),Ma=n(_a),ri=1/Ma,Qa=2*gr*Ma,si=(-3*Et+br*(1+3*It))*Qa,wi=(-pr*Ma-(1-gr)*si)/(pr*pr),mo=.5*wi/Or,fi=(1-It)*mo-2*Et*Or*Qa,to=-2*ri*fi,To=-ri*Qa,Io=-ri*(Et*(1+It)*wi+Mr*(1+3*It)*Qa);return[u/4*(ze*(to+To*Nn)+Io*F(ze/D($r))),_a]}function yn(){return f.geoProjection(Ir(Cr)).scale(239.75)}function Yn(ze,Ze,at){var ct,Et,At;return ze?(ct=In(ze,at),Ze?(Et=In(Ze,1-at),At=Et[1]*Et[1]+at*ct[0]*ct[0]*Et[0]*Et[0],[[ct[0]*Et[2]/At,ct[1]*ct[2]*Et[0]*Et[1]/At],[ct[1]*Et[1]/At,-ct[0]*ct[2]*Et[0]*Et[2]/At],[ct[2]*Et[1]*Et[2]/At,-at*ct[0]*ct[1]*Et[0]/At]]):[[ct[0],0],[ct[1],0],[ct[2],0]]):(Et=In(Ze,1-at),[[0,Et[0]/Et[1]],[1/Et[1],0],[Et[2]/Et[1],0]])}function In(ze,Ze){var at,ct,Et,At,It;if(Ze<l)return At=c(ze),ct=n(ze),at=Ze*(ze-At*ct)/4,[At-at*ct,ct+at*At,1-Ze*At*At/2,ze-at];if(Ze>=1-l)return at=(1-Ze)/4,ct=z(ze),At=R(ze),Et=1/ct,It=ct*O(ze),[At+at*(It-ze)/(ct*ct),Et-at*At*Et*(It-ze),Et+at*At*Et*(It+ze),2*e(r(ze))-A+at*(It-ze)/ct];var gr=[1,0,0,0,0,0,0,0,0],br=[D(Ze),0,0,0,0,0,0,0,0],pr=0;for(ct=D(1-Ze),It=1;T(br[pr]/gr[pr])>l&&pr<8;)at=gr[pr++],br[pr]=(at-ct)/2,gr[pr]=(at+ct)/2,ct=D(at*ct),It*=2;Et=It*gr[pr]*ze;do At=br[pr]*c(ct=Et)/gr[pr],Et=(F(At)+Et)/2;while(--pr);return[c(Et),At=n(Et),At/n(Et-ct),Et]}function Jn(ze,Ze,at){var ct=T(ze),Et=T(Ze),At=O(Et);if(ct){var It=1/c(ct),gr=1/(m(ct)*m(ct)),br=-(gr+at*(At*At*It*It)-1+at),pr=(at-1)*gr,Mr=(-br+D(br*br-4*pr))/2;return[Zn(e(1/D(Mr)),at)*p(ze),Zn(e(D((Mr/gr-1)/at)),1-at)*p(Ze)]}return[0,Zn(e(At),1-at)*p(Ze)]}function Zn(ze,Ze){if(!Ze)return ze;if(Ze===1)return h(m(ze/2+_));for(var at=1,ct=D(1-Ze),Et=D(Ze),At=0;T(Et)>l;At++){if(ze%u){var It=e(ct*m(ze)/at);It<0&&(It+=u),ze+=It+~~(ze/u)*u}else ze+=ze;Et=(at+ct)/2,ct=D(at*ct),Et=((at=Et)-ct)/2}return ze/(y(2,At)*at)}function ba(ze,Ze){var at=(b-1)/(b+1),ct=D(1-at*at),Et=Zn(A,ct*ct),At=-1,It=h(m(u/4+T(Ze)/2)),gr=r(At*It)/D(at),br=Pa(gr*n(At*ze),gr*c(At*ze)),pr=Jn(br[0],br[1],ct*ct);return[-pr[1],(Ze>=0?1:-1)*(.5*Et-pr[0])]}function Pa(ze,Ze){var at=ze*ze,ct=Ze+1,Et=1-at-Ze*Ze;return[.5*((ze>=0?A:-A)-a(Et,2*ze)),-.25*h(Et*Et+4*at)+.5*h(ct*ct+at)]}function xi(ze,Ze){var at=Ze[0]*Ze[0]+Ze[1]*Ze[1];return[(ze[0]*Ze[0]+ze[1]*Ze[1])/at,(ze[1]*Ze[0]-ze[0]*Ze[1])/at]}ba.invert=function(ze,Ze){var at=(b-1)/(b+1),ct=D(1-at*at),Et=Zn(A,ct*ct),At=-1,It=Yn(.5*Et-Ze,-ze,ct*ct),gr=xi(It[0],It[1]),br=a(gr[1],gr[0])/At;return[br,2*e(r(.5/At*h(at*gr[0]*gr[0]+at*gr[1]*gr[1])))-A]};function Ka(){return f.geoProjection(Ir(ba)).scale(151.496)}function ti(ze){var Ze=c(ze),at=n(ze),ct=$a(ze);ct.invert=$a(-ze);function Et(At,It){var gr=ct(At,It);At=gr[0],It=gr[1];var br=c(It),pr=n(It),Mr=n(At),Or=I(Ze*br+at*pr*Mr),$r=c(Or),on=T($r)>l?Or/$r:1;return[on*at*c(At),(T(At)>A?on:-on)*(Ze*pr-at*br*Mr)]}return Et.invert=function(At,It){var gr=D(At*At+It*It),br=-c(gr),pr=n(gr),Mr=gr*pr,Or=-It*br,$r=gr*Ze,on=D(Mr*Mr+Or*Or-$r*$r),Sn=a(Mr*$r+Or*on,Or*$r-Mr*on),Nn=(gr>A?-1:1)*a(At*br,gr*n(Sn)*pr+It*c(Sn)*br);return ct.invert(Nn,Sn)},Et}function $a(ze){var Ze=c(ze),at=n(ze);return function(ct,Et){var At=n(Et),It=n(ct)*At,gr=c(ct)*At,br=c(Et);return[a(gr,It*at-br*Ze),F(br*at+It*Ze)]}}function kr(){var ze=0,Ze=f.geoProjectionMutator(ti),at=Ze(ze),ct=at.rotate,Et=at.stream,At=f.geoCircle();return at.parallel=function(It){if(!arguments.length)return ze*S;var gr=at.rotate();return Ze(ze=It*E).rotate(gr)},at.rotate=function(It){return arguments.length?(ct.call(at,[It[0],It[1]-ze*S]),At.center([-It[0],-It[1]]),at):(It=ct.call(at),It[1]+=ze*S,It)},at.stream=function(It){return It=Et(It),It.sphere=function(){It.polygonStart();var gr=.01,br=At.radius(90-gr)().coordinates[0],pr=br.length-1,Mr=-1,Or;for(It.lineStart();++Mr<pr;)It.point((Or=br[Mr])[0],Or[1]);for(It.lineEnd(),br=At.radius(90+gr)().coordinates[0],pr=br.length-1,It.lineStart();--Mr>=0;)It.point((Or=br[Mr])[0],Or[1]);It.lineEnd(),It.polygonEnd()},It},at.scale(79.4187).parallel(45).clipAngle(180-.001)}var bn=3,gn=F(1-1/bn)*S,Ln=Bt(0);function qn(ze){var Ze=gn*E,at=Ve(u,Ze)[0]-Ve(-u,Ze)[0],ct=Ln(0,Ze)[1],Et=Ve(0,Ze)[1],At=v-Et,It=k/ze,gr=4/k,br=ct+At*At*4/k;function pr(Mr,Or){var $r,on=T(Or);if(on>Ze){var Sn=o(ze-1,s(0,t((Mr+u)/It)));Mr+=u*(ze-1)/ze-Sn*It,$r=Ve(Mr,on),$r[0]=$r[0]*k/at-k*(ze-1)/(2*ze)+Sn*k/ze,$r[1]=ct+($r[1]-Et)*4*At/k,Or<0&&($r[1]=-$r[1])}else $r=Ln(Mr,Or);return $r[0]*=gr,$r[1]/=br,$r}return pr.invert=function(Mr,Or){Mr/=gr,Or*=br;var $r=T(Or);if($r>ct){var on=o(ze-1,s(0,t((Mr+u)/It)));Mr=(Mr+u*(ze-1)/ze-on*It)*at/k;var Sn=Ve.invert(Mr,.25*($r-ct)*k/At+Et);return Sn[0]-=u*(ze-1)/ze-on*It,Or<0&&(Sn[1]=-Sn[1]),Sn}return Ln.invert(Mr,Or)},pr}function da(ze,Ze){return[ze,Ze&1?90-l:gn]}function oa(ze,Ze){return[ze,Ze&1?-90+l:-gn]}function Bn(ze){return[ze[0]*(1-l),ze[1]]}function $n(ze){var Ze=[].concat(M.range(-180,180+ze/2,ze).map(da),M.range(180,-180-ze/2,-ze).map(oa));return{type:"Polygon",coordinates:[ze===180?Ze.map(Bn):Ze]}}function Xa(){var ze=4,Ze=f.geoProjectionMutator(qn),at=Ze(ze),ct=at.stream;return at.lobes=function(Et){return arguments.length?Ze(ze=+Et):ze},at.stream=function(Et){var At=at.rotate(),It=ct(Et),gr=(at.rotate([0,0]),ct(Et));return at.rotate(At),It.sphere=function(){f.geoStream($n(180/ze),gr)},It},at.scale(239.75)}function gi(ze){var Ze=1+ze,at=c(1/Ze),ct=F(at),Et=2*D(u/(At=u+4*ct*Ze)),At,It=.5*Et*(Ze+D(ze*(2+ze))),gr=ze*ze,br=Ze*Ze;function pr(Mr,Or){var $r=1-c(Or),on,Sn;if($r&&$r<2){var Nn=A-Or,Qn=25,_a;do{var Ma=c(Nn),ri=n(Nn),Qa=ct+a(Ma,Ze-ri),si=1+br-2*Ze*ri;Nn-=_a=(Nn-gr*ct-Ze*Ma+si*Qa-.5*$r*At)/(2*Ze*Ma*Qa)}while(T(_a)>x&&--Qn>0);on=Et*D(si),Sn=Mr*Qa/u}else on=Et*(ze+$r),Sn=Mr*ct/u;return[on*c(Sn),It-on*n(Sn)]}return pr.invert=function(Mr,Or){var $r=Mr*Mr+(Or-=It)*Or,on=(1+br-$r/(Et*Et))/(2*Ze),Sn=I(on),Nn=c(Sn),Qn=ct+a(Nn,Ze-on);return[F(Mr/D($r))*u/Qn,F(1-2*(Sn-gr*ct-Ze*Nn+(1+br-2*Ze*on)*Qn)/At)]},pr}function Xt(){var ze=1,Ze=f.geoProjectionMutator(gi),at=Ze(ze);return at.ratio=function(ct){return arguments.length?Ze(ze=+ct):ze},at.scale(167.774).center([0,18.67])}var mr=.7109889596207567,un=.0528035274542;function xn(ze,Ze){return Ze>-mr?(ze=Se(ze,Ze),ze[1]+=un,ze):Fe(ze,Ze)}xn.invert=function(ze,Ze){return Ze>-mr?Se.invert(ze,Ze-un):Fe.invert(ze,Ze)};function sn(){return f.geoProjection(xn).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}function kn(ze,Ze){return T(Ze)>mr?(ze=Se(ze,Ze),ze[1]-=Ze>0?un:-un,ze):Fe(ze,Ze)}kn.invert=function(ze,Ze){return T(Ze)>mr?Se.invert(ze,Ze+(Ze>0?un:-un)):Fe.invert(ze,Ze)};function Mn(){return f.geoProjection(kn).scale(152.63)}function dn(ze,Ze,at,ct){var Et=D(4*u/(2*at+(1+ze-Ze/2)*c(2*at)+(ze+Ze)/2*c(4*at)+Ze/2*c(6*at))),At=D(ct*c(at)*D((1+ze*n(2*at)+Ze*n(4*at))/(1+ze+Ze))),It=at*br(1);function gr(Or){return D(1+ze*n(2*Or)+Ze*n(4*Or))}function br(Or){var $r=Or*at;return(2*$r+(1+ze-Ze/2)*c(2*$r)+(ze+Ze)/2*c(4*$r)+Ze/2*c(6*$r))/at}function pr(Or){return gr(Or)*c(Or)}var Mr=function(Or,$r){var on=at*be(br,It*c($r)/at,$r/u);isNaN(on)&&(on=at*p($r));var Sn=Et*gr(on);return[Sn*At*Or/u*n(on),Sn/At*c(on)]};return Mr.invert=function(Or,$r){var on=be(pr,$r*At/Et);return[Or*u/(n(on)*Et*At*gr(on)),F(at*br(on/at)/It)]},at===0&&(Et=D(ct/u),Mr=function(Or,$r){return[Or*Et,c($r)/Et]},Mr.invert=function(Or,$r){return[Or/Et,F($r*Et)]}),Mr}function Tr(){var ze=1,Ze=0,at=45*E,ct=2,Et=f.geoProjectionMutator(dn),At=Et(ze,Ze,at,ct);return At.a=function(It){return arguments.length?Et(ze=+It,Ze,at,ct):ze},At.b=function(It){return arguments.length?Et(ze,Ze=+It,at,ct):Ze},At.psiMax=function(It){return arguments.length?Et(ze,Ze,at=+It*E,ct):at*S},At.ratio=function(It){return arguments.length?Et(ze,Ze,at,ct=+It):ct},At.scale(180.739)}function Ar(ze,Ze,at,ct,Et,At,It,gr,br,pr,Mr){if(Mr.nanEncountered)return NaN;var Or,$r,on,Sn,Nn,Qn,_a,Ma,ri,Qa;if(Or=at-Ze,$r=ze(Ze+Or*.25),on=ze(at-Or*.25),isNaN($r)){Mr.nanEncountered=!0;return}if(isNaN(on)){Mr.nanEncountered=!0;return}return Sn=Or*(ct+4*$r+Et)/12,Nn=Or*(Et+4*on+At)/12,Qn=Sn+Nn,Qa=(Qn-It)/15,pr>br?(Mr.maxDepthCount++,Qn+Qa):Math.abs(Qa)<gr?Qn+Qa:(_a=Ze+Or*.5,Ma=Ar(ze,Ze,_a,ct,$r,Et,Sn,gr*.5,br,pr+1,Mr),isNaN(Ma)?(Mr.nanEncountered=!0,NaN):(ri=Ar(ze,_a,at,Et,on,At,Nn,gr*.5,br,pr+1,Mr),isNaN(ri)?(Mr.nanEncountered=!0,NaN):Ma+ri))}function Vr(ze,Ze,at,ct,Et){var At={maxDepthCount:0,nanEncountered:!1};ct===void 0&&(ct=1e-8),Et===void 0&&(Et=20);var It=ze(Ze),gr=ze(.5*(Ze+at)),br=ze(at),pr=(It+4*gr+br)*(at-Ze)/6,Mr=Ar(ze,Ze,at,It,gr,br,pr,ct,Et,1,At);return Mr}function _n(ze,Ze,at){function ct(on){return ze+(1-ze)*y(1-y(on,Ze),1/Ze)}function Et(on){return Vr(ct,0,on,1e-4)}for(var At=1/Et(1),It=1e3,gr=(1+1e-8)*At,br=[],pr=0;pr<=It;pr++)br.push(Et(pr/It)*gr);function Mr(on){var Sn=0,Nn=It,Qn=It>>1;do br[Qn]>on?Nn=Qn:Sn=Qn,Qn=Sn+Nn>>1;while(Qn>Sn);var _a=br[Qn+1]-br[Qn];return _a&&(_a=(on-br[Qn+1])/_a),(Qn+1+_a)/It}var Or=2*Mr(1)/u*At/at,$r=function(on,Sn){var Nn=Mr(T(c(Sn))),Qn=ct(Nn)*on;return Nn/=Or,[Qn,Sn>=0?Nn:-Nn]};return $r.invert=function(on,Sn){var Nn;return Sn*=Or,T(Sn)<1&&(Nn=p(Sn)*F(Et(T(Sn))*At)),[on/ct(T(Sn)),Nn]},$r}function Gn(){var ze=0,Ze=2.5,at=1.183136,ct=f.geoProjectionMutator(_n),Et=ct(ze,Ze,at);return Et.alpha=function(At){return arguments.length?ct(ze=+At,Ze,at):ze},Et.k=function(At){return arguments.length?ct(ze,Ze=+At,at):Ze},Et.gamma=function(At){return arguments.length?ct(ze,Ze,at=+At):at},Et.scale(152.63)}function sa(ze,Ze){return T(ze[0]-Ze[0])<l&&T(ze[1]-Ze[1])<l}function En(ze,Ze){for(var at=-1,ct=ze.length,Et=ze[0],At,It,gr,br=[];++at<ct;){At=ze[at],It=(At[0]-Et[0])/Ze,gr=(At[1]-Et[1])/Ze;for(var pr=0;pr<Ze;++pr)br.push([Et[0]+pr*It,Et[1]+pr*gr]);Et=At}return br.push(At),br}function ea(ze){var Ze=[],at,ct,Et,At,It,gr,br,pr=ze[0].length;for(br=0;br<pr;++br)at=ze[0][br],ct=at[0][0],Et=at[0][1],At=at[1][1],It=at[2][0],gr=at[2][1],Ze.push(En([[ct+l,Et+l],[ct+l,At-l],[It-l,At-l],[It-l,gr+l]],30));for(br=ze[1].length-1;br>=0;--br)at=ze[1][br],ct=at[0][0],Et=at[0][1],At=at[1][1],It=at[2][0],gr=at[2][1],Ze.push(En([[It-l,gr-l],[It-l,At+l],[ct+l,At+l],[ct+l,Et-l]],30));return{type:"Polygon",coordinates:[M.merge(Ze)]}}function fa(ze,Ze,at){var ct,Et;function At(br,pr){for(var Mr=pr<0?-1:1,Or=Ze[+(pr<0)],$r=0,on=Or.length-1;$r<on&&br>Or[$r][2][0];++$r);var Sn=ze(br-Or[$r][1][0],pr);return Sn[0]+=ze(Or[$r][1][0],Mr*pr>Mr*Or[$r][0][1]?Or[$r][0][1]:pr)[0],Sn}at?At.invert=at(At):ze.invert&&(At.invert=function(br,pr){for(var Mr=Et[+(pr<0)],Or=Ze[+(pr<0)],$r=0,on=Mr.length;$r<on;++$r){var Sn=Mr[$r];if(Sn[0][0]<=br&&br<Sn[1][0]&&Sn[0][1]<=pr&&pr<Sn[1][1]){var Nn=ze.invert(br-ze(Or[$r][1][0],0)[0],pr);return Nn[0]+=Or[$r][1][0],sa(At(Nn[0],Nn[1]),[br,pr])?Nn:null}}});var It=f.geoProjection(At),gr=It.stream;return It.stream=function(br){var pr=It.rotate(),Mr=gr(br),Or=(It.rotate([0,0]),gr(br));return It.rotate(pr),Mr.sphere=function(){f.geoStream(ct,Or)},Mr},It.lobes=function(br){return arguments.length?(ct=ea(br),Ze=br.map(function(pr){return pr.map(function(Mr){return[[Mr[0][0]*E,Mr[0][1]*E],[Mr[1][0]*E,Mr[1][1]*E],[Mr[2][0]*E,Mr[2][1]*E]]})}),Et=Ze.map(function(pr){return pr.map(function(Mr){var Or=ze(Mr[0][0],Mr[0][1])[0],$r=ze(Mr[2][0],Mr[2][1])[0],on=ze(Mr[1][0],Mr[0][1])[1],Sn=ze(Mr[1][0],Mr[1][1])[1],Nn;return on>Sn&&(Nn=on,on=Sn,Sn=Nn),[[Or,on],[$r,Sn]]})}),It):Ze.map(function(pr){return pr.map(function(Mr){return[[Mr[0][0]*S,Mr[0][1]*S],[Mr[1][0]*S,Mr[1][1]*S],[Mr[2][0]*S,Mr[2][1]*S]]})})},Ze!=null&&It.lobes(Ze),It}var wa=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function Aa(){return fa(Ce,wa).scale(160.857)}var va=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function La(){return fa(kn,va).scale(152.63)}var So=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function Jo(){return fa(Se,So).scale(169.529)}var vs=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function Cl(){return fa(Se,vs).scale(169.529).rotate([20,0])}var Ul=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]];function _u(){return fa(xn,Ul,ce).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}var _i=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]];function hl(){return fa(Fe,_i).scale(152.63).rotate([-20,0])}function el(ze,Ze){return[3/k*ze*D(u*u/3-Ze*Ze),Ze]}el.invert=function(ze,Ze){return[k/3*ze/D(u*u/3-Ze*Ze),Ze]};function qi(){return f.geoProjection(el).scale(158.837)}function No(ze){function Ze(at,ct){if(T(T(ct)-A)<l)return[0,ct<0?-2:2];var Et=c(ct),At=y((1+Et)/(1-Et),ze/2),It=.5*(At+1/At)+n(at*=ze);return[2*c(at)/It,(At-1/At)/It]}return Ze.invert=function(at,ct){var Et=T(ct);if(T(Et-2)<l)return at?null:[0,p(ct)*A];if(Et>2)return null;at/=2,ct/=2;var At=at*at,It=ct*ct,gr=2*ct/(1+At+It);return gr=y((1+gr)/(1-gr),1/ze),[a(2*at,1-At-It)/ze,F((gr-1)/(gr+1))]},Ze}function Vl(){var ze=.5,Ze=f.geoProjectionMutator(No),at=Ze(ze);return at.spacing=function(ct){return arguments.length?Ze(ze=+ct):ze},at.scale(124.75)}var Is=u/b;function Gi(ze,Ze){return[ze*(1+D(n(Ze)))/2,Ze/(n(Ze/2)*n(ze/6))]}Gi.invert=function(ze,Ze){var at=T(ze),ct=T(Ze),Et=l,At=A;ct<Is?At*=ct/Is:Et+=6*I(Is/ct);for(var It=0;It<25;It++){var gr=c(At),br=D(n(At)),pr=c(At/2),Mr=n(At/2),Or=c(Et/6),$r=n(Et/6),on=.5*Et*(1+br)-at,Sn=At/(Mr*$r)-ct,Nn=br?-.25*Et*gr/br:0,Qn=.5*(1+br),_a=(1+.5*At*pr/Mr)/(Mr*$r),Ma=At/Mr*(Or/6)/($r*$r),ri=Nn*Ma-_a*Qn,Qa=(on*Ma-Sn*Qn)/ri,si=(Sn*Nn-on*_a)/ri;if(At-=Qa,Et-=si,T(Qa)<l&&T(si)<l)break}return[ze<0?-Et:Et,Ze<0?-At:At]};function kl(){return f.geoProjection(Gi).scale(97.2672)}function lo(ze,Ze){var at=ze*ze,ct=Ze*Ze;return[ze*(.975534+ct*(-.119161+at*-.0143059+ct*-.0547009)),Ze*(1.00384+at*(.0802894+ct*-.02855+at*199025e-9)+ct*(.0998909+ct*-.0491032))]}lo.invert=function(ze,Ze){var at=p(ze)*u,ct=Ze/2,Et=50;do{var At=at*at,It=ct*ct,gr=at*ct,br=at*(.975534+It*(-.119161+At*-.0143059+It*-.0547009))-ze,pr=ct*(1.00384+At*(.0802894+It*-.02855+At*199025e-9)+It*(.0998909+It*-.0491032))-Ze,Mr=.975534-It*(.119161+3*At*.0143059+It*.0547009),Or=-gr*(2*.119161+4*.0547009*It+2*.0143059*At),$r=gr*(2*.0802894+4*199025e-9*At+2*-.02855*It),on=1.00384+At*(.0802894+199025e-9*At)+It*(3*(.0998909-.02855*At)-5*.0491032*It),Sn=Or*$r-on*Mr,Nn=(pr*Or-br*on)/Sn,Qn=(br*$r-pr*Mr)/Sn;at-=Nn,ct-=Qn}while((T(Nn)>l||T(Qn)>l)&&--Et>0);return Et&&[at,ct]};function Zi(){return f.geoProjection(lo).scale(139.98)}function yo(ze,Ze){return[c(ze)/n(Ze),m(Ze)*n(ze)]}yo.invert=function(ze,Ze){var at=ze*ze,ct=Ze*Ze,Et=ct+1,At=at+Et,It=ze?g*D((At-D(At*At-4*at))/at):1/D(Et);return[F(ze*It),p(Ze)*I(It)]};function uo(){return f.geoProjection(yo).scale(144.049).clipAngle(90-.001)}function _s(ze){var Ze=n(ze),at=m(_+ze/2);function ct(Et,At){var It=At-ze,gr=T(It)<l?Et*Ze:T(gr=_+At/2)<l||T(T(gr)-A)<l?0:Et*It/h(m(gr)/at);return[gr,It]}return ct.invert=function(Et,At){var It,gr=At+ze;return[T(At)<l?Et/Ze:T(It=_+gr/2)<l||T(T(It)-A)<l?0:Et*h(m(It)/at)/At,gr]},ct}function vl(){return Ye(_s).parallel(40).scale(158.837)}function Bu(ze,Ze){return[ze,1.25*h(m(_+.4*Ze))]}Bu.invert=function(ze,Ze){return[ze,2.5*e(r(.8*Ze))-.625*u]};function ps(){return f.geoProjection(Bu).scale(108.318)}function Uu(ze){var Ze=ze.length-1;function at(ct,Et){for(var At=n(Et),It=2/(1+At*n(ct)),gr=It*At*c(ct),br=It*c(Et),pr=Ze,Mr=ze[pr],Or=Mr[0],$r=Mr[1],on;--pr>=0;)Mr=ze[pr],Or=Mr[0]+gr*(on=Or)-br*$r,$r=Mr[1]+gr*$r+br*on;return Or=gr*(on=Or)-br*$r,$r=gr*$r+br*on,[Or,$r]}return at.invert=function(ct,Et){var At=20,It=ct,gr=Et;do{for(var br=Ze,pr=ze[br],Mr=pr[0],Or=pr[1],$r=0,on=0,Sn;--br>=0;)pr=ze[br],$r=Mr+It*(Sn=$r)-gr*on,on=Or+It*on+gr*Sn,Mr=pr[0]+It*(Sn=Mr)-gr*Or,Or=pr[1]+It*Or+gr*Sn;$r=Mr+It*(Sn=$r)-gr*on,on=Or+It*on+gr*Sn,Mr=It*(Sn=Mr)-gr*Or-ct,Or=It*Or+gr*Sn-Et;var Nn=$r*$r+on*on,Qn,_a;It-=Qn=(Mr*$r+Or*on)/Nn,gr-=_a=(Or*$r-Mr*on)/Nn}while(T(Qn)+T(_a)>l*l&&--At>0);if(At){var Ma=D(It*It+gr*gr),ri=2*e(Ma*.5),Qa=c(ri);return[a(It*Qa,Ma*n(ri)),Ma?F(gr*Qa/Ma):0]}},at}var tl=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],Bo=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],uf=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],rl=[[.9245,0],[0,0],[.01943,0]],Hs=[[.721316,0],[0,0],[-.00881625,-.00617325]];function ou(){return Gs(tl,[152,-64]).scale(1400).center([-160.908,62.4864]).clipAngle(30).angle(7.8)}function ff(){return Gs(Bo,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])}function cf(){return Gs(uf,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])}function pl(){return Gs(rl,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)}function su(){return Gs(Hs,[165,10]).scale(250).clipAngle(130).center([-165,-10])}function Gs(ze,Ze){var at=f.geoProjection(Uu(ze)).rotate(Ze).clipAngle(90),ct=f.geoRotation(Ze),Et=at.center;return delete at.rotate,at.center=function(At){return arguments.length?Et(ct(At)):ct.invert(Et())},at}var Tu=D(6),Ll=D(7);function Au(ze,Ze){var at=F(7*c(Ze)/(3*Tu));return[Tu*ze*(2*n(2*at/3)-1)/Ll,9*c(at/3)/Ll]}Au.invert=function(ze,Ze){var at=3*F(Ze*Ll/9);return[ze*Ll/(Tu*(2*n(2*at/3)-1)),F(c(at)*3*Tu/7)]};function Vu(){return f.geoProjection(Au).scale(164.859)}function lu(ze,Ze){for(var at=(1+g)*c(Ze),ct=Ze,Et=0,At;Et<25&&(ct-=At=(c(ct/2)+c(ct)-at)/(.5*n(ct/2)+n(ct)),!(T(At)<l));Et++);return[ze*(1+2*n(ct)/n(ct/2))/(3*b),2*D(3)*c(ct/2)/D(2+b)]}lu.invert=function(ze,Ze){var at=Ze*D(2+b)/(2*D(3)),ct=2*F(at);return[3*b*ze/(1+2*n(ct)/n(ct/2)),F((at+c(ct))/(1+g))]};function hf(){return f.geoProjection(lu).scale(188.209)}function dl(ze,Ze){for(var at=D(6/(4+u)),ct=(1+u/4)*c(Ze),Et=Ze/2,At=0,It;At<25&&(Et-=It=(Et/2+c(Et)-ct)/(.5+n(Et)),!(T(It)<l));At++);return[at*(.5+n(Et))*ze/1.5,at*Et]}dl.invert=function(ze,Ze){var at=D(6/(4+u)),ct=Ze/at;return T(T(ct)-A)<l&&(ct=ct<0?-A:A),[1.5*ze/(at*(.5+n(ct))),F((ct/2+c(ct))/(1+u/4))]};function Mu(){return f.geoProjection(dl).scale(166.518)}function uu(ze,Ze){var at=Ze*Ze,ct=at*at,Et=at*ct;return[ze*(.84719-.13063*at+Et*Et*(-.04515+.05494*at-.02326*ct+.00331*Et)),Ze*(1.01183+ct*ct*(-.02625+.01926*at-.00396*ct))]}uu.invert=function(ze,Ze){var at=Ze,ct=25,Et,At,It,gr;do At=at*at,It=At*At,at-=Et=(at*(1.01183+It*It*(-.02625+.01926*At-.00396*It))-Ze)/(1.01183+It*It*(9*-.02625+11*.01926*At+13*-.00396*It));while(T(Et)>x&&--ct>0);return At=at*at,It=At*At,gr=At*It,[ze/(.84719-.13063*At+gr*gr*(-.04515+.05494*At-.02326*It+.00331*gr)),at]};function Fs(){return f.geoProjection(uu).scale(175.295)}function Hl(ze,Ze){return[ze*(1+n(Ze))/2,2*(Ze-m(Ze/2))]}Hl.invert=function(ze,Ze){for(var at=Ze/2,ct=0,Et=1/0;ct<10&&T(Et)>l;++ct){var At=n(Ze/2);Ze-=Et=(Ze-m(Ze/2)-at)/(1-.5/(At*At))}return[2*ze/(1+n(Ze)),Ze]};function Su(){return f.geoProjection(Hl).scale(152.63)}var Hu=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function Gu(){return fa(se(1/0),Hu).rotate([20,0]).scale(152.63)}function fu(ze,Ze){var at=c(Ze),ct=n(Ze),Et=p(ze);if(ze===0||T(Ze)===A)return[0,Ze];if(Ze===0)return[ze,0];if(T(ze)===A)return[ze*ct,A*at];var At=u/(2*ze)-2*ze/u,It=2*Ze/u,gr=(1-It*It)/(at-It),br=At*At,pr=gr*gr,Mr=1+br/pr,Or=1+pr/br,$r=(At*at/gr-At/2)/Mr,on=(pr*at/br+gr/2)/Or,Sn=$r*$r+ct*ct/Mr,Nn=on*on-(pr*at*at/br+gr*at-1)/Or;return[A*($r+D(Sn)*Et),A*(on+D(Nn<0?0:Nn)*p(-Ze*At)*Et)]}fu.invert=function(ze,Ze){ze/=A,Ze/=A;var at=ze*ze,ct=Ze*Ze,Et=at+ct,At=u*u;return[ze?(Et-1+D((1-Et)*(1-Et)+4*at))/(2*ze)*A:0,be(function(It){return Et*(u*c(It)-2*It)*u+4*It*It*(Ze-c(It))+2*u*It-At*Ze},0)]};function vf(){return f.geoProjection(fu).scale(127.267)}var Yu=1.0148,ds=.23185,Pl=-.14499,Dl=.02406,Eu=Yu,zs=5*ds,Uo=7*Pl,cu=9*Dl,Ys=1.790857183;function Ws(ze,Ze){var at=Ze*Ze;return[ze,Ze*(Yu+at*at*(ds+at*(Pl+Dl*at)))]}Ws.invert=function(ze,Ze){Ze>Ys?Ze=Ys:Ze<-Ys&&(Ze=-Ys);var at=Ze,ct;do{var Et=at*at;at-=ct=(at*(Yu+Et*Et*(ds+Et*(Pl+Dl*Et)))-Ze)/(Eu+Et*Et*(zs+Et*(Uo+cu*Et)))}while(T(ct)>l);return[ze,at]};function bo(){return f.geoProjection(Ws).scale(139.319)}function Gl(ze,Ze){if(T(Ze)<l)return[ze,0];var at=m(Ze),ct=ze*c(Ze);return[c(ct)/at,Ze+(1-n(ct))/at]}Gl.invert=function(ze,Ze){if(T(Ze)<l)return[ze,0];var at=ze*ze+Ze*Ze,ct=Ze*.5,Et=10,At;do{var It=m(ct),gr=1/n(ct),br=at-2*Ze*ct+ct*ct;ct-=At=(It*br+2*(ct-Ze))/(2+br*gr*gr+2*(ct-Ze)*It)}while(T(At)>l&&--Et>0);return It=m(ct),[(T(Ze)<T(ct+1/It)?F(ze*It):p(Ze)*p(ze)*(I(T(ze*It))+A))/c(ct),ct]};function Yl(){return f.geoProjection(Gl).scale(103.74)}function yl(ze,Ze){var at=Rl(ze[1],ze[0]),ct=Rl(Ze[1],Ze[0]),Et=jl(at,ct),At=hu(at)/hu(ct);return Wl([1,0,ze[0][0],0,1,ze[0][1]],Wl([At,0,0,0,At,0],Wl([n(Et),c(Et),0,-c(Et),n(Et),0],[1,0,-Ze[0][0],0,1,-Ze[0][1]])))}function Os(ze){var Ze=1/(ze[0]*ze[4]-ze[1]*ze[3]);return[Ze*ze[4],-Ze*ze[1],Ze*(ze[1]*ze[5]-ze[2]*ze[4]),-Ze*ze[3],Ze*ze[0],Ze*(ze[2]*ze[3]-ze[0]*ze[5])]}function Wl(ze,Ze){return[ze[0]*Ze[0]+ze[1]*Ze[3],ze[0]*Ze[1]+ze[1]*Ze[4],ze[0]*Ze[2]+ze[1]*Ze[5]+ze[2],ze[3]*Ze[0]+ze[4]*Ze[3],ze[3]*Ze[1]+ze[4]*Ze[4],ze[3]*Ze[2]+ze[4]*Ze[5]+ze[5]]}function Rl(ze,Ze){return[ze[0]-Ze[0],ze[1]-Ze[1]]}function hu(ze){return D(ze[0]*ze[0]+ze[1]*ze[1])}function jl(ze,Ze){return a(ze[0]*Ze[1]-ze[1]*Ze[0],ze[0]*Ze[0]+ze[1]*Ze[1])}function ml(ze,Ze,at){ct(ze,{transform:null});function ct(pr,Mr){if(pr.edges=Cu(pr.face),Mr.face){var Or=pr.shared=Lf(pr.face,Mr.face),$r=yl(Or.map(Mr.project),Or.map(pr.project));pr.transform=Mr.transform?Wl(Mr.transform,$r):$r;for(var on=Mr.edges,Sn=0,Nn=on.length;Sn<Nn;++Sn)Ts(Or[0],on[Sn][1])&&Ts(Or[1],on[Sn][0])&&(on[Sn]=pr),Ts(Or[0],on[Sn][0])&&Ts(Or[1],on[Sn][1])&&(on[Sn]=pr);for(on=pr.edges,Sn=0,Nn=on.length;Sn<Nn;++Sn)Ts(Or[0],on[Sn][0])&&Ts(Or[1],on[Sn][1])&&(on[Sn]=Mr),Ts(Or[0],on[Sn][1])&&Ts(Or[1],on[Sn][0])&&(on[Sn]=Mr)}else pr.transform=Mr.transform;return pr.children&&pr.children.forEach(function(Qn){ct(Qn,pr)}),pr}function Et(pr,Mr){var Or=Ze(pr,Mr),$r=Or.project([pr*S,Mr*S]),on;return(on=Or.transform)?[on[0]*$r[0]+on[1]*$r[1]+on[2],-(on[3]*$r[0]+on[4]*$r[1]+on[5])]:($r[1]=-$r[1],$r)}Il(ze)&&(Et.invert=function(pr,Mr){var Or=At(ze,[pr,-Mr]);return Or&&(Or[0]*=E,Or[1]*=E,Or)});function At(pr,Mr){var Or=pr.project.invert,$r=pr.transform,on=Mr;if($r&&($r=Os($r),on=[$r[0]*on[0]+$r[1]*on[1]+$r[2],$r[3]*on[0]+$r[4]*on[1]+$r[5]]),Or&&pr===It(Sn=Or(on)))return Sn;for(var Sn,Nn=pr.children,Qn=0,_a=Nn&&Nn.length;Qn<_a;++Qn)if(Sn=At(Nn[Qn],Mr))return Sn}function It(pr){return Ze(pr[0]*E,pr[1]*E)}var gr=f.geoProjection(Et),br=gr.stream;return gr.stream=function(pr){var Mr=gr.rotate(),Or=br(pr),$r=(gr.rotate([0,0]),br(pr));return gr.rotate(Mr),Or.sphere=function(){$r.polygonStart(),$r.lineStart(),pf($r,ze),$r.lineEnd(),$r.polygonEnd()},Or},gr.angle(at==null?-30:at*S)}function pf(ze,Ze,at){var ct,Et=Ze.edges,At=Et.length,It,gr={type:"MultiPoint",coordinates:Ze.face},br=Ze.face.filter(function(Nn){return T(Nn[1])!==90}),pr=f.geoBounds({type:"MultiPoint",coordinates:br}),Mr=!1,Or=-1,$r=pr[1][0]-pr[0][0],on=$r===180||$r===360?[(pr[0][0]+pr[1][0])/2,(pr[0][1]+pr[1][1])/2]:f.geoCentroid(gr);if(at)for(;++Or<At&&Et[Or]!==at;);++Or;for(var Sn=0;Sn<At;++Sn)It=Et[(Sn+Or)%At],Array.isArray(It)?(Mr||(ze.point((ct=f.geoInterpolate(It[0],on)(l))[0],ct[1]),Mr=!0),ze.point((ct=f.geoInterpolate(It[1],on)(l))[0],ct[1])):(Mr=!1,It!==at&&pf(ze,It,Ze))}function Ts(ze,Ze){return ze&&Ze&&ze[0]===Ze[0]&&ze[1]===Ze[1]}function Lf(ze,Ze){for(var at,ct,Et=ze.length,At=null,It=0;It<Et;++It){at=ze[It];for(var gr=Ze.length;--gr>=0;)if(ct=Ze[gr],at[0]===ct[0]&&at[1]===ct[1]){if(At)return[At,at];At=at}}}function Cu(ze){for(var Ze=ze.length,at=[],ct=ze[Ze-1],Et=0;Et<Ze;++Et)at.push([ct,ct=ze[Et]]);return at}function Il(ze){return ze.project.invert||ze.children&&ze.children.some(Il)}var Xl=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],xl=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(ze){return ze.map(function(Ze){return Xl[Ze]})});function Zl(ze){ze=ze||function(at){var ct=f.geoCentroid({type:"MultiPoint",coordinates:at});return f.geoGnomonic().scale(1).translate([0,0]).rotate([-ct[0],-ct[1]])};var Ze=xl.map(function(at){return{face:at,project:ze(at)}});return[-1,0,0,1,0,1,4,5].forEach(function(at,ct){var Et=Ze[at];Et&&(Et.children||(Et.children=[])).push(Ze[ct])}),ml(Ze[0],function(at,ct){return Ze[at<-u/2?ct<0?6:4:at<0?ct<0?2:0:at<u/2?ct<0?3:1:ct<0?7:5]}).angle(-30).scale(101.858).center([0,45])}var Wu=2/D(3);function ju(ze,Ze){var at=Ve(ze,Ze);return[at[0]*Wu,at[1]]}ju.invert=function(ze,Ze){return Ve.invert(ze/Wu,Ze)};function Pf(ze){ze=ze||function(at){var ct=f.geoCentroid({type:"MultiPoint",coordinates:at});return f.geoProjection(ju).translate([0,0]).scale(1).rotate(ct[1]>0?[-ct[0],0]:[180-ct[0],180])};var Ze=xl.map(function(at){return{face:at,project:ze(at)}});return[-1,0,0,1,0,1,4,5].forEach(function(at,ct){var Et=Ze[at];Et&&(Et.children||(Et.children=[])).push(Ze[ct])}),ml(Ze[0],function(at,ct){return Ze[at<-u/2?ct<0?6:4:at<0?ct<0?2:0:at<u/2?ct<0?3:1:ct<0?7:5]}).angle(-30).scale(121.906).center([0,48.5904])}function Yi(ze){ze=ze||function(It){var gr=It.length===6?f.geoCentroid({type:"MultiPoint",coordinates:It}):It[0];return f.geoGnomonic().scale(1).translate([0,0]).rotate([-gr[0],-gr[1]])};var Ze=xl.map(function(It){for(var gr=It.map(As),br=gr.length,pr=gr[br-1],Mr,Or=[],$r=0;$r<br;++$r)Mr=gr[$r],Or.push(gs([pr[0]*.9486832980505138+Mr[0]*.31622776601683794,pr[1]*.9486832980505138+Mr[1]*.31622776601683794,pr[2]*.9486832980505138+Mr[2]*.31622776601683794]),gs([Mr[0]*.9486832980505138+pr[0]*.31622776601683794,Mr[1]*.9486832980505138+pr[1]*.31622776601683794,Mr[2]*.9486832980505138+pr[2]*.31622776601683794])),pr=Mr;return Or}),at=[],ct=[-1,0,0,1,0,1,4,5];Ze.forEach(function(It,gr){for(var br=xl[gr],pr=br.length,Mr=at[gr]=[],Or=0;Or<pr;++Or)Ze.push([br[Or],It[(Or*2+2)%(2*pr)],It[(Or*2+1)%(2*pr)]]),ct.push(gr),Mr.push(bl(As(It[(Or*2+2)%(2*pr)]),As(It[(Or*2+1)%(2*pr)])))});var Et=Ze.map(function(It){return{project:ze(It),face:It}});ct.forEach(function(It,gr){var br=Et[It];br&&(br.children||(br.children=[])).push(Et[gr])});function At(It,gr){var br=n(gr),pr=[br*n(It),br*c(It),c(gr)],Mr=It<-u/2?gr<0?6:4:It<0?gr<0?2:0:It<u/2?gr<0?3:1:gr<0?7:5,Or=at[Mr];return Et[Fl(Or[0],pr)<0?8+3*Mr:Fl(Or[1],pr)<0?8+3*Mr+1:Fl(Or[2],pr)<0?8+3*Mr+2:Mr]}return ml(Et[0],At).angle(-30).scale(110.625).center([0,45])}function Fl(ze,Ze){for(var at=0,ct=ze.length,Et=0;at<ct;++at)Et+=ze[at]*Ze[at];return Et}function bl(ze,Ze){return[ze[1]*Ze[2]-ze[2]*Ze[1],ze[2]*Ze[0]-ze[0]*Ze[2],ze[0]*Ze[1]-ze[1]*Ze[0]]}function gs(ze){return[a(ze[1],ze[0])*S,F(s(-1,o(1,ze[2])))*S]}function As(ze){var Ze=ze[0]*E,at=ze[1]*E,ct=n(at);return[ct*n(Ze),ct*c(Ze),c(at)]}function Kl(){}function wo(ze){if((at=ze.length)<4)return!1;for(var Ze=0,at,ct=ze[at-1][1]*ze[0][0]-ze[at-1][0]*ze[0][1];++Ze<at;)ct+=ze[Ze-1][1]*ze[Ze][0]-ze[Ze-1][0]*ze[Ze][1];return ct<=0}function Xu(ze,Ze){for(var at=Ze[0],ct=Ze[1],Et=!1,At=0,It=ze.length,gr=It-1;At<It;gr=At++){var br=ze[At],pr=br[0],Mr=br[1],Or=ze[gr],$r=Or[0],on=Or[1];Mr>ct^on>ct&&at<($r-pr)*(ct-Mr)/(on-Mr)+pr&&(Et=!Et)}return Et}function Ms(ze,Ze){var at=Ze.stream,ct;if(!at)throw new Error("invalid projection");switch(ze&&ze.type){case"Feature":ct=al;break;case"FeatureCollection":ct=nl;break;default:ct=Ss;break}return ct(ze,at)}function nl(ze,Ze){return{type:"FeatureCollection",features:ze.features.map(function(at){return al(at,Ze)})}}function al(ze,Ze){return{type:"Feature",id:ze.id,properties:ze.properties,geometry:Ss(ze.geometry,Ze)}}function js(ze,Ze){return{type:"GeometryCollection",geometries:ze.geometries.map(function(at){return Ss(at,Ze)})}}function Ss(ze,Ze){if(!ze)return null;if(ze.type==="GeometryCollection")return js(ze,Ze);var at;switch(ze.type){case"Point":at=Es;break;case"MultiPoint":at=Es;break;case"LineString":at=Zu;break;case"MultiLineString":at=Zu;break;case"Polygon":at=vu;break;case"MultiPolygon":at=vu;break;case"Sphere":at=vu;break;default:return null}return f.geoStream(ze,Ze(at)),at.result()}var eo=[],Vo=[],Es={point:function(ze,Ze){eo.push([ze,Ze])},result:function(){var ze=eo.length?eo.length<2?{type:"Point",coordinates:eo[0]}:{type:"MultiPoint",coordinates:eo}:null;return eo=[],ze}},Zu={lineStart:Kl,point:function(ze,Ze){eo.push([ze,Ze])},lineEnd:function(){eo.length&&(Vo.push(eo),eo=[])},result:function(){var ze=Vo.length?Vo.length<2?{type:"LineString",coordinates:Vo[0]}:{type:"MultiLineString",coordinates:Vo}:null;return Vo=[],ze}},vu={polygonStart:Kl,lineStart:Kl,point:function(ze,Ze){eo.push([ze,Ze])},lineEnd:function(){var ze=eo.length;if(ze){do eo.push(eo[0].slice());while(++ze<4);Vo.push(eo),eo=[]}},polygonEnd:Kl,result:function(){if(!Vo.length)return null;var ze=[],Ze=[];return Vo.forEach(function(at){wo(at)?ze.push([at]):Ze.push(at)}),Ze.forEach(function(at){var ct=at[0];ze.some(function(Et){if(Xu(Et[0],ct))return Et.push(at),!0})||ze.push([at])}),Vo=[],ze.length?ze.length>1?{type:"MultiPolygon",coordinates:ze}:{type:"Polygon",coordinates:ze[0]}:null}};function Ku(ze){var Ze=ze(A,0)[0]-ze(-A,0)[0];function at(ct,Et){var At=T(ct)<A,It=ze(At?ct:ct>0?ct-u:ct+u,Et),gr=(It[0]-It[1])*g,br=(It[0]+It[1])*g;if(At)return[gr,br];var pr=Ze*g,Mr=gr>0^br>0?-1:1;return[Mr*gr-p(br)*pr,Mr*br-p(gr)*pr]}return ze.invert&&(at.invert=function(ct,Et){var At=(ct+Et)*g,It=(Et-ct)*g,gr=T(At)<.5*Ze&&T(It)<.5*Ze;if(!gr){var br=Ze*g,pr=At>0^It>0?-1:1,Mr=-pr*ct+(It>0?1:-1)*br,Or=-pr*Et+(At>0?1:-1)*br;At=(-Mr-Or)*g,It=(Mr-Or)*g}var $r=ze.invert(At,It);return gr||($r[0]+=At>0?u:-u),$r}),f.geoProjection(at).rotate([-90,-90,45]).clipAngle(180-.001)}function Tt(){return Ku(Cr).scale(176.423)}function Yt(){return Ku(ba).scale(111.48)}function yr(ze,Ze){if(!(0<=(Ze=+Ze)&&Ze<=20))throw new Error("invalid digits");function at(pr){var Mr=pr.length,Or=2,$r=new Array(Mr);for($r[0]=+pr[0].toFixed(Ze),$r[1]=+pr[1].toFixed(Ze);Or<Mr;)$r[Or]=pr[Or],++Or;return $r}function ct(pr){return pr.map(at)}function Et(pr){for(var Mr=at(pr[0]),Or=[Mr],$r=1;$r<pr.length;$r++){var on=at(pr[$r]);(on.length>2||on[0]!=Mr[0]||on[1]!=Mr[1])&&(Or.push(on),Mr=on)}return Or.length===1&&pr.length>1&&Or.push(at(pr[pr.length-1])),Or}function At(pr){return pr.map(Et)}function It(pr){if(pr==null)return pr;var Mr;switch(pr.type){case"GeometryCollection":Mr={type:"GeometryCollection",geometries:pr.geometries.map(It)};break;case"Point":Mr={type:"Point",coordinates:at(pr.coordinates)};break;case"MultiPoint":Mr={type:pr.type,coordinates:ct(pr.coordinates)};break;case"LineString":Mr={type:pr.type,coordinates:Et(pr.coordinates)};break;case"MultiLineString":case"Polygon":Mr={type:pr.type,coordinates:At(pr.coordinates)};break;case"MultiPolygon":Mr={type:"MultiPolygon",coordinates:pr.coordinates.map(At)};break;default:return pr}return pr.bbox!=null&&(Mr.bbox=pr.bbox),Mr}function gr(pr){var Mr={type:"Feature",properties:pr.properties,geometry:It(pr.geometry)};return pr.id!=null&&(Mr.id=pr.id),pr.bbox!=null&&(Mr.bbox=pr.bbox),Mr}if(ze!=null)switch(ze.type){case"Feature":return gr(ze);case"FeatureCollection":{var br={type:"FeatureCollection",features:ze.features.map(gr)};return ze.bbox!=null&&(br.bbox=ze.bbox),br}default:return It(ze)}return ze}function vr(ze){var Ze=c(ze);function at(ct,Et){var At=Ze?m(ct*Ze/2)/Ze:ct/2;if(!Et)return[2*At,-ze];var It=2*e(At*c(Et)),gr=1/m(Et);return[c(It)*gr,Et+(1-n(It))*gr-ze]}return at.invert=function(ct,Et){if(T(Et+=ze)<l)return[Ze?2*e(Ze*ct/2)/Ze:ct,0];var At=ct*ct+Et*Et,It=0,gr=10,br;do{var pr=m(It),Mr=1/n(It),Or=At-2*Et*It+It*It;It-=br=(pr*Or+2*(It-Et))/(2+Or*Mr*Mr+2*(It-Et)*pr)}while(T(br)>l&&--gr>0);var $r=ct*(pr=m(It)),on=m(T(Et)<T(It+1/pr)?F($r)*.5:I($r)*.5+u/4)/c(It);return[Ze?2*e(Ze*on)/Ze:2*on,It]},at}function Nr(){return Ye(vr).scale(131.215)}var ln=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];ln.forEach(function(ze){ze[1]*=1.0144});function wn(ze,Ze){var at=o(18,T(Ze)*36/u),ct=t(at),Et=at-ct,At=(Or=ln[ct])[0],It=Or[1],gr=(Or=ln[++ct])[0],br=Or[1],pr=(Or=ln[o(19,++ct)])[0],Mr=Or[1],Or;return[ze*(gr+Et*(pr-At)/2+Et*Et*(pr-2*gr+At)/2),(Ze>0?A:-A)*(br+Et*(Mr-It)/2+Et*Et*(Mr-2*br+It)/2)]}wn.invert=function(ze,Ze){var at=Ze/A,ct=at*90,Et=o(18,T(ct/5)),At=s(0,t(Et));do{var It=ln[At][1],gr=ln[At+1][1],br=ln[o(19,At+2)][1],pr=br-It,Mr=br-2*gr+It,Or=2*(T(at)-gr)/pr,$r=Mr/pr,on=Or*(1-$r*Or*(1-2*$r*Or));if(on>=0||At===1){ct=(Ze>=0?5:-5)*(on+Et);var Sn=50,Nn;do Et=o(18,T(ct)/5),At=t(Et),on=Et-At,It=ln[At][1],gr=ln[At+1][1],br=ln[o(19,At+2)][1],ct-=(Nn=(Ze>=0?A:-A)*(gr+on*(br-It)/2+on*on*(br-2*gr+It)/2)-Ze)*S;while(T(Nn)>x&&--Sn>0);break}}while(--At>=0);var Qn=ln[At][0],_a=ln[At+1][0],Ma=ln[o(19,At+2)][0];return[ze/(_a+on*(Ma-Qn)/2+on*on*(Ma-2*_a+Qn)/2),ct*E]};function Pn(){return f.geoProjection(wn).scale(152.63)}function zn(ze){function Ze(at,ct){var Et=n(ct),At=(ze-1)/(ze-Et*n(at));return[At*Et*c(at),At*c(ct)]}return Ze.invert=function(at,ct){var Et=at*at+ct*ct,At=D(Et),It=(ze-D(1-Et*(ze+1)/(ze-1)))/((ze-1)/At+At/(ze-1));return[a(at*It,At*D(1-It*It)),At?F(ct*It/At):0]},Ze}function Wn(ze,Ze){var at=zn(ze);if(!Ze)return at;var ct=n(Ze),Et=c(Ze);function At(It,gr){var br=at(It,gr),pr=br[1],Mr=pr*Et/(ze-1)+ct;return[br[0]*ct/Mr,pr/Mr]}return At.invert=function(It,gr){var br=(ze-1)/(ze-1-gr*Et);return at.invert(br*It,br*gr*ct)},At}function Tn(){var ze=2,Ze=0,at=f.geoProjectionMutator(Wn),ct=at(ze,Ze);return ct.distance=function(Et){return arguments.length?at(ze=+Et,Ze):ze},ct.tilt=function(Et){return arguments.length?at(ze,Ze=Et*E):Ze*S},ct.scale(432.147).clipAngle(I(1/ze)*S-1e-6)}var Vn=1e-4,On=1e4,Xn=-180,aa=Xn+Vn,Ha=180,Ia=Ha-Vn,Ga=-90,Ya=Ga+Vn,ra=90,ma=ra-Vn;function Ja(ze){return ze.length>0}function ai(ze){return Math.floor(ze*On)/On}function Mi(ze){return ze===Ga||ze===ra?[0,ze]:[Xn,ai(ze)]}function Si(ze){var Ze=ze[0],at=ze[1],ct=!1;return Ze<=aa?(Ze=Xn,ct=!0):Ze>=Ia&&(Ze=Ha,ct=!0),at<=Ya?(at=Ga,ct=!0):at>=ma&&(at=ra,ct=!0),ct?[Ze,at]:ze}function Ci(ze){return ze.map(Si)}function Fi(ze,Ze,at){for(var ct=0,Et=ze.length;ct<Et;++ct){var At=ze[ct].slice();at.push({index:-1,polygon:Ze,ring:At});for(var It=0,gr=At.length;It<gr;++It){var br=At[It],pr=br[0],Mr=br[1];if(pr<=aa||pr>=Ia||Mr<=Ya||Mr>=ma){At[It]=Si(br);for(var Or=It+1;Or<gr;++Or){var $r=At[Or],on=$r[0],Sn=$r[1];if(on>aa&&on<Ia&&Sn>Ya&&Sn<ma)break}if(Or===It+1)continue;if(It){var Nn={index:-1,polygon:Ze,ring:At.slice(0,It+1)};Nn.ring[Nn.ring.length-1]=Mi(Mr),at[at.length-1]=Nn}else at.pop();if(Or>=gr)break;at.push({index:-1,polygon:Ze,ring:At=At.slice(Or-1)}),At[0]=Mi(At[0][1]),It=-1,gr=At.length}}}}function pi(ze){var Ze,at=ze.length,ct={},Et={},At,It,gr,br,pr;for(Ze=0;Ze<at;++Ze){if(At=ze[Ze],It=At.ring[0],br=At.ring[At.ring.length-1],It[0]===br[0]&&It[1]===br[1]){At.polygon.push(At.ring),ze[Ze]=null;continue}At.index=Ze,ct[It]=Et[br]=At}for(Ze=0;Ze<at;++Ze)if(At=ze[Ze],At){if(It=At.ring[0],br=At.ring[At.ring.length-1],gr=Et[It],pr=ct[br],delete ct[It],delete Et[br],It[0]===br[0]&&It[1]===br[1]){At.polygon.push(At.ring);continue}gr?(delete Et[It],delete ct[gr.ring[0]],gr.ring.pop(),ze[gr.index]=null,At={index:-1,polygon:gr.polygon,ring:gr.ring.concat(At.ring)},gr===pr?At.polygon.push(At.ring):(At.index=at++,ze.push(ct[At.ring[0]]=Et[At.ring[At.ring.length-1]]=At))):pr?(delete ct[br],delete Et[pr.ring[pr.ring.length-1]],At.ring.pop(),At={index:at++,polygon:pr.polygon,ring:At.ring.concat(pr.ring)},ze[pr.index]=null,ze.push(ct[At.ring[0]]=Et[At.ring[At.ring.length-1]]=At)):(At.ring.push(At.ring[0]),At.polygon.push(At.ring))}}function Lo(ze){var Ze={type:"Feature",geometry:ho(ze.geometry)};return ze.id!=null&&(Ze.id=ze.id),ze.bbox!=null&&(Ze.bbox=ze.bbox),ze.properties!=null&&(Ze.properties=ze.properties),Ze}function ho(ze){if(ze==null)return ze;var Ze,at,ct,Et;switch(ze.type){case"GeometryCollection":Ze={type:"GeometryCollection",geometries:ze.geometries.map(ho)};break;case"Point":Ze={type:"Point",coordinates:Si(ze.coordinates)};break;case"MultiPoint":case"LineString":Ze={type:ze.type,coordinates:Ci(ze.coordinates)};break;case"MultiLineString":Ze={type:"MultiLineString",coordinates:ze.coordinates.map(Ci)};break;case"Polygon":{var At=[];Fi(ze.coordinates,At,at=[]),pi(at),Ze={type:"Polygon",coordinates:At};break}case"MultiPolygon":{at=[],ct=-1,Et=ze.coordinates.length;for(var It=new Array(Et);++ct<Et;)Fi(ze.coordinates[ct],It[ct]=[],at);pi(at),Ze={type:"MultiPolygon",coordinates:It.filter(Ja)};break}default:return ze}return ze.bbox!=null&&(Ze.bbox=ze.bbox),Ze}function ni(ze){if(ze==null)return ze;switch(ze.type){case"Feature":return Lo(ze);case"FeatureCollection":{var Ze={type:"FeatureCollection",features:ze.features.map(Lo)};return ze.bbox!=null&&(Ze.bbox=ze.bbox),Ze}default:return ho(ze)}}function xa(ze,Ze){var at=m(Ze/2),ct=c(_*at);return[ze*(.74482-.34588*ct*ct),1.70711*at]}xa.invert=function(ze,Ze){var at=Ze/1.70711,ct=c(_*at);return[ze/(.74482-.34588*ct*ct),2*e(at)]};function ki(){return f.geoProjection(xa).scale(146.153)}function _o(ze,Ze,at){var ct=f.geoInterpolate(Ze,at),Et=ct(.5),At=f.geoRotation([-Et[0],-Et[1]])(Ze),It=ct.distance/2,gr=-F(c(At[1]*E)/c(It)),br=[-Et[0],-Et[1],-(At[0]>0?u-gr:gr)*S],pr=f.geoProjection(ze(It)).rotate(br),Mr=f.geoRotation(br),Or=pr.center;return delete pr.rotate,pr.center=function($r){return arguments.length?Or(Mr($r)):Mr.invert(Or())},pr.clipAngle(90)}function Eo(ze){var Ze=n(ze);function at(ct,Et){var At=f.geoGnomonicRaw(ct,Et);return At[0]*=Ze,At}return at.invert=function(ct,Et){return f.geoGnomonicRaw.invert(ct/Ze,Et)},at}function Cs(){return Xs([-158,21.5],[-77,39]).clipAngle(60).scale(400)}function Xs(ze,Ze){return _o(Eo,ze,Ze)}function Qo(ze){if(!(ze*=2))return f.geoAzimuthalEquidistantRaw;var Ze=-ze/2,at=-Ze,ct=ze*ze,Et=m(at),At=.5/c(at);function It(gr,br){var pr=I(n(br)*n(gr-Ze)),Mr=I(n(br)*n(gr-at)),Or=br<0?-1:1;return pr*=pr,Mr*=Mr,[(pr-Mr)/(2*ze),Or*D(4*ct*Mr-(ct-pr+Mr)*(ct-pr+Mr))/(2*ze)]}return It.invert=function(gr,br){var pr=br*br,Mr=n(D(pr+($r=gr+Ze)*$r)),Or=n(D(pr+($r=gr+at)*$r)),$r,on;return[a(on=Mr-Or,$r=(Mr+Or)*Et),(br<0?-1:1)*I(D($r*$r+on*on)*At)]},It}function wl(){return Ns([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)}function Ns(ze,Ze){return _o(Qo,ze,Ze)}function ks(ze,Ze){if(T(Ze)<l)return[ze,0];var at=T(Ze/A),ct=F(at);if(T(ze)<l||T(T(Ze)-A)<l)return[0,p(Ze)*u*m(ct/2)];var Et=n(ct),At=T(u/ze-ze/u)/2,It=At*At,gr=Et/(at+Et-1),br=gr*(2/at-1),pr=br*br,Mr=pr+It,Or=gr-pr,$r=It+gr;return[p(ze)*u*(At*Or+D(It*Or*Or-Mr*(gr*gr-pr)))/Mr,p(Ze)*u*(br*$r-At*D((It+1)*Mr-$r*$r))/Mr]}ks.invert=function(ze,Ze){if(T(Ze)<l)return[ze,0];if(T(ze)<l)return[0,A*c(2*e(Ze/u))];var at=(ze/=u)*ze,ct=(Ze/=u)*Ze,Et=at+ct,At=Et*Et,It=-T(Ze)*(1+Et),gr=It-2*ct+at,br=-2*It+1+2*ct+At,pr=ct/br+(2*gr*gr*gr/(br*br*br)-9*It*gr/(br*br))/27,Mr=(It-gr*gr/(3*br))/br,Or=2*D(-Mr/3),$r=I(3*pr/(Mr*Or))/3;return[u*(Et-1+D(1+2*(at-ct)+At))/(2*ze),p(Ze)*u*(-Or*n($r+u/3)-gr/(3*br))]};function Po(){return f.geoProjection(ks).scale(79.4183)}function pu(ze,Ze){if(T(Ze)<l)return[ze,0];var at=T(Ze/A),ct=F(at);if(T(ze)<l||T(T(Ze)-A)<l)return[0,p(Ze)*u*m(ct/2)];var Et=n(ct),At=T(u/ze-ze/u)/2,It=At*At,gr=Et*(D(1+It)-At*Et)/(1+It*at*at);return[p(ze)*u*gr,p(Ze)*u*D(1-gr*(2*At+gr))]}pu.invert=function(ze,Ze){if(!ze)return[0,A*c(2*e(Ze/u))];var at=T(ze/u),ct=(1-at*at-(Ze/=u)*Ze)/(2*at),Et=ct*ct,At=D(Et+1);return[p(ze)*u*(At-ct),p(Ze)*A*c(2*a(D((1-2*ct*at)*(ct+At)-at),D(At+ct+at)))]};function ku(){return f.geoProjection(pu).scale(79.4183)}function Ls(ze,Ze){if(T(Ze)<l)return[ze,0];var at=Ze/A,ct=F(at);if(T(ze)<l||T(T(Ze)-A)<l)return[0,u*m(ct/2)];var Et=(u/ze-ze/u)/2,At=at/(1+n(ct));return[u*(p(ze)*D(Et*Et+1-At*At)-Et),u*At]}Ls.invert=function(ze,Ze){if(!Ze)return[ze,0];var at=Ze/u,ct=(u*u*(1-at*at)-ze*ze)/(2*u*ze);return[ze?u*(p(ze)*D(ct*ct+1)-ct):0,A*c(2*e(at))]};function Ju(){return f.geoProjection(Ls).scale(79.4183)}function du(ze,Ze){if(!Ze)return[ze,0];var at=T(Ze);if(!ze||at===A)return[0,Ze];var ct=at/A,Et=ct*ct,At=(8*ct-Et*(Et+2)-5)/(2*Et*(ct-1)),It=At*At,gr=ct*At,br=Et+It+2*gr,pr=ct+3*At,Mr=ze/A,Or=Mr+1/Mr,$r=p(T(ze)-A)*D(Or*Or-4),on=$r*$r,Sn=br*(Et+It*on-1)+(1-Et)*(Et*(pr*pr+4*It)+12*gr*It+4*It*It),Nn=($r*(br+It-1)+2*D(Sn))/(4*br+on);return[p(ze)*A*Nn,p(Ze)*A*D(1+$r*T(Nn)-Nn*Nn)]}du.invert=function(ze,Ze){var at;if(!ze||!Ze)return[ze,Ze];Ze/=u;var ct=p(ze)*ze/A,Et=(ct*ct-1+4*Ze*Ze)/T(ct),At=Et*Et,It=2*Ze,gr=50;do{var br=It*It,pr=(8*It-br*(br+2)-5)/(2*br*(It-1)),Mr=(3*It-br*It-10)/(2*br*It),Or=pr*pr,$r=It*pr,on=It+pr,Sn=on*on,Nn=It+3*pr,Qn=Sn*(br+Or*At-1)+(1-br)*(br*(Nn*Nn+4*Or)+Or*(12*$r+4*Or)),_a=-2*on*(4*$r*Or+(1-4*br+3*br*br)*(1+Mr)+Or*(-6+14*br-At+(-8+8*br-2*At)*Mr)+$r*(-8+12*br+(-10+10*br-At)*Mr)),Ma=D(Qn),ri=Et*(Sn+Or-1)+2*Ma-ct*(4*Sn+At),Qa=Et*(2*pr*Mr+2*on*(1+Mr))+_a/Ma-8*on*(Et*(-1+Or+Sn)+2*Ma)*(1+Mr)/(At+4*Sn);It-=at=ri/Qa}while(at>l&&--gr>0);return[p(ze)*(D(Et*Et+4)+Et)*u/4,A*It]};function uc(){return f.geoProjection(du).scale(127.16)}function df(ze,Ze,at,ct,Et){function At(It,gr){var br=at*c(ct*gr),pr=D(1-br*br),Mr=D(2/(1+pr*n(It*=Et)));return[ze*pr*Mr*c(It),Ze*br*Mr]}return At.invert=function(It,gr){var br=It/ze,pr=gr/Ze,Mr=D(br*br+pr*pr),Or=2*F(Mr/2);return[a(It*m(Or),ze*Mr)/Et,Mr&&F(gr*c(Or)/(Ze*at*Mr))/ct]},At}function Qu(ze,Ze,at,ct){var Et=u/3;ze=s(ze,l),Ze=s(Ze,l),ze=o(ze,A),Ze=o(Ze,u-l),at=s(at,0),at=o(at,100-l),ct=s(ct,l);var At=at/100+1,It=ct/100,gr=I(At*n(Et))/Et,br=c(ze)/c(gr*A),pr=Ze/u,Mr=D(It*c(ze/2)/c(Ze/2)),Or=Mr/D(pr*br*gr),$r=1/(Mr*D(pr*br*gr));return df(Or,$r,br,gr,pr)}function gf(){var ze=65*E,Ze=60*E,at=20,ct=200,Et=f.geoProjectionMutator(Qu),At=Et(ze,Ze,at,ct);return At.poleline=function(It){return arguments.length?Et(ze=+It*E,Ze,at,ct):ze*S},At.parallels=function(It){return arguments.length?Et(ze,Ze=+It*E,at,ct):Ze*S},At.inflation=function(It){return arguments.length?Et(ze,Ze,at=+It,ct):at},At.ratio=function(It){return arguments.length?Et(ze,Ze,at,ct=+It):ct},At.scale(163.775)}function Zs(){return gf().poleline(65).parallels(60).inflation(0).ratio(200).scale(172.633)}var Df=4*u+3*D(3),yf=2*D(2*u*D(3)/Df),mf=me(yf*D(3)/u,yf,Df/6);function $o(){return f.geoProjection(mf).scale(176.84)}function xf(ze,Ze){return[ze*D(1-3*Ze*Ze/(u*u)),Ze]}xf.invert=function(ze,Ze){return[ze/D(1-3*Ze*Ze/(u*u)),Ze]};function Yf(){return f.geoProjection(xf).scale(152.63)}function Bs(ze,Ze){var at=n(Ze),ct=n(ze)*at,Et=1-ct,At=n(ze=a(c(ze)*at,-c(Ze))),It=c(ze);return at=D(1-ct*ct),[It*at-At*Et,-At*at-It*Et]}Bs.invert=function(ze,Ze){var at=(ze*ze+Ze*Ze)/-2,ct=D(-at*(2+at)),Et=Ze*at+ze*ct,At=ze*at-Ze*ct,It=D(At*At+Et*Et);return[a(ct*Et,It*(1+at)),It?-F(ct*At/It):0]};function $u(){return f.geoProjection(Bs).rotate([0,-90,45]).scale(124.75).clipAngle(180-.001)}function qu(ze,Ze){var at=j(ze,Ze);return[(at[0]+ze/A)/2,(at[1]+Ze)/2]}qu.invert=function(ze,Ze){var at=ze,ct=Ze,Et=25;do{var At=n(ct),It=c(ct),gr=c(2*ct),br=It*It,pr=At*At,Mr=c(at),Or=n(at/2),$r=c(at/2),on=$r*$r,Sn=1-pr*Or*Or,Nn=Sn?I(At*Or)*D(Qn=1/Sn):Qn=0,Qn,_a=.5*(2*Nn*At*$r+at/A)-ze,Ma=.5*(Nn*It+ct)-Ze,ri=.5*Qn*(pr*on+Nn*At*Or*br)+.5/A,Qa=Qn*(Mr*gr/4-Nn*It*$r),si=.125*Qn*(gr*$r-Nn*It*pr*Mr),wi=.5*Qn*(br*Or+Nn*on*At)+.5,mo=Qa*si-wi*ri,fi=(Ma*Qa-_a*wi)/mo,to=(_a*si-Ma*ri)/mo;at-=fi,ct-=to}while((T(fi)>l||T(to)>l)&&--Et>0);return[at,ct]};function bf(){return f.geoProjection(qu).scale(158.837)}w.geoNaturalEarth=f.geoNaturalEarth1,w.geoNaturalEarthRaw=f.geoNaturalEarth1Raw,w.geoAiry=X,w.geoAiryRaw=Q,w.geoAitoff=re,w.geoAitoffRaw=j,w.geoArmadillo=K,w.geoArmadilloRaw=ue,w.geoAugust=Y,w.geoAugustRaw=te,w.geoBaker=Z,w.geoBakerRaw=ne,w.geoBerghaus=ie,w.geoBerghausRaw=q,w.geoBertin1953=ye,w.geoBertin1953Raw=de,w.geoBoggs=Ke,w.geoBoggsRaw=Ce,w.geoBonne=xt,w.geoBonneRaw=je,w.geoBottomley=tr,w.geoBottomleyRaw=Nt,w.geoBromley=Pt,w.geoBromleyRaw=Ht,w.geoChamberlin=Me,w.geoChamberlinRaw=We,w.geoChamberlinAfrica=Ge,w.geoCollignon=Qe,w.geoCollignonRaw=Ve,w.geoCraig=St,w.geoCraigRaw=tt,w.geoCraster=jt,w.geoCrasterRaw=Ct,w.geoCylindricalEqualArea=Wt,w.geoCylindricalEqualAreaRaw=Bt,w.geoCylindricalStereographic=Zt,w.geoCylindricalStereographicRaw=Qt,w.geoEckert1=Xr,w.geoEckert1Raw=cr,w.geoEckert2=en,w.geoEckert2Raw=vn,w.geoEckert3=ar,w.geoEckert3Raw=ut,w.geoEckert4=Kt,w.geoEckert4Raw=rr,w.geoEckert5=st,w.geoEckert5Raw=Er,w.geoEckert6=ht,w.geoEckert6Raw=et,w.geoEisenlohr=Vt,w.geoEisenlohrRaw=kt,w.geoFahey=lt,w.geoFaheyRaw=ke,w.geoFoucaut=yt,w.geoFoucautRaw=ft,w.geoFoucautSinusoidal=_t,w.geoFoucautSinusoidalRaw=Rt,w.geoGilbert=fr,w.geoGingery=Jr,w.geoGingeryRaw=Rr,w.geoGinzburg4=Br,w.geoGinzburg4Raw=_r,w.geoGinzburg5=Dr,w.geoGinzburg5Raw=Yr,w.geoGinzburg6=zt,w.geoGinzburg6Raw=it,w.geoGinzburg8=hr,w.geoGinzburg8Raw=qt,w.geoGinzburg9=Gr,w.geoGinzburg9Raw=Ur,w.geoGringorten=yn,w.geoGringortenRaw=Cr,w.geoGuyou=Ka,w.geoGuyouRaw=ba,w.geoHammer=oe,w.geoHammerRaw=se,w.geoHammerRetroazimuthal=kr,w.geoHammerRetroazimuthalRaw=ti,w.geoHealpix=Xa,w.geoHealpixRaw=qn,w.geoHill=Xt,w.geoHillRaw=gi,w.geoHomolosine=Mn,w.geoHomolosineRaw=kn,w.geoHufnagel=Tr,w.geoHufnagelRaw=dn,w.geoHyperelliptical=Gn,w.geoHyperellipticalRaw=_n,w.geoInterrupt=fa,w.geoInterruptedBoggs=Aa,w.geoInterruptedHomolosine=La,w.geoInterruptedMollweide=Jo,w.geoInterruptedMollweideHemispheres=Cl,w.geoInterruptedSinuMollweide=_u,w.geoInterruptedSinusoidal=hl,w.geoKavrayskiy7=qi,w.geoKavrayskiy7Raw=el,w.geoLagrange=Vl,w.geoLagrangeRaw=No,w.geoLarrivee=kl,w.geoLarriveeRaw=Gi,w.geoLaskowski=Zi,w.geoLaskowskiRaw=lo,w.geoLittrow=uo,w.geoLittrowRaw=yo,w.geoLoximuthal=vl,w.geoLoximuthalRaw=_s,w.geoMiller=ps,w.geoMillerRaw=Bu,w.geoModifiedStereographic=Gs,w.geoModifiedStereographicRaw=Uu,w.geoModifiedStereographicAlaska=ou,w.geoModifiedStereographicGs48=ff,w.geoModifiedStereographicGs50=cf,w.geoModifiedStereographicMiller=pl,w.geoModifiedStereographicLee=su,w.geoMollweide=Le,w.geoMollweideRaw=Se,w.geoMtFlatPolarParabolic=Vu,w.geoMtFlatPolarParabolicRaw=Au,w.geoMtFlatPolarQuartic=hf,w.geoMtFlatPolarQuarticRaw=lu,w.geoMtFlatPolarSinusoidal=Mu,w.geoMtFlatPolarSinusoidalRaw=dl,w.geoNaturalEarth2=Fs,w.geoNaturalEarth2Raw=uu,w.geoNellHammer=Su,w.geoNellHammerRaw=Hl,w.geoInterruptedQuarticAuthalic=Gu,w.geoNicolosi=vf,w.geoNicolosiRaw=fu,w.geoPatterson=bo,w.geoPattersonRaw=Ws,w.geoPolyconic=Yl,w.geoPolyconicRaw=Gl,w.geoPolyhedral=ml,w.geoPolyhedralButterfly=Zl,w.geoPolyhedralCollignon=Pf,w.geoPolyhedralWaterman=Yi,w.geoProject=Ms,w.geoGringortenQuincuncial=Tt,w.geoPeirceQuincuncial=Yt,w.geoPierceQuincuncial=Yt,w.geoQuantize=yr,w.geoQuincuncial=Ku,w.geoRectangularPolyconic=Nr,w.geoRectangularPolyconicRaw=vr,w.geoRobinson=Pn,w.geoRobinsonRaw=wn,w.geoSatellite=Tn,w.geoSatelliteRaw=Wn,w.geoSinuMollweide=sn,w.geoSinuMollweideRaw=xn,w.geoSinusoidal=Re,w.geoSinusoidalRaw=Fe,w.geoStitch=ni,w.geoTimes=ki,w.geoTimesRaw=xa,w.geoTwoPointAzimuthal=Xs,w.geoTwoPointAzimuthalRaw=Eo,w.geoTwoPointAzimuthalUsa=Cs,w.geoTwoPointEquidistant=Ns,w.geoTwoPointEquidistantRaw=Qo,w.geoTwoPointEquidistantUsa=wl,w.geoVanDerGrinten=Po,w.geoVanDerGrintenRaw=ks,w.geoVanDerGrinten2=ku,w.geoVanDerGrinten2Raw=pu,w.geoVanDerGrinten3=Ju,w.geoVanDerGrinten3Raw=Ls,w.geoVanDerGrinten4=uc,w.geoVanDerGrinten4Raw=du,w.geoWagner=gf,w.geoWagner7=Zs,w.geoWagnerRaw=Qu,w.geoWagner4=$o,w.geoWagner4Raw=mf,w.geoWagner6=Yf,w.geoWagner6Raw=xf,w.geoWiechel=$u,w.geoWiechelRaw=Bs,w.geoWinkel3=bf,w.geoWinkel3Raw=qu,Object.defineProperty(w,"__esModule",{value:!0})})},{"d3-array":107,"d3-geo":114}],114:[function(i,U,V){(function(w,f){typeof V=="object"&&typeof U<"u"?f(V,i("d3-array")):(w=w||self,f(w.d3=w.d3||{},w.d3))})(this,function(w,f){function M(){return new T}function T(){this.reset()}T.prototype={constructor:T,reset:function(){this.s=this.t=0},add:function(Tt){a(e,Tt,this.t),a(this,e.s,this.s),this.s?this.t+=e.t:this.s=e.t},valueOf:function(){return this.s}};var e=new T;function a(Tt,Yt,yr){var vr=Tt.s=Yt+yr,Nr=vr-Yt,ln=vr-Nr;Tt.t=Yt-ln+(yr-Nr)}var n=1e-6,r=1e-12,t=Math.PI,h=t/2,s=t/4,o=t*2,y=180/t,d=t/180,p=Math.abs,c=Math.atan,m=Math.atan2,l=Math.cos,x=Math.ceil,u=Math.exp,A=Math.log,_=Math.pow,g=Math.sin,b=Math.sign||function(Tt){return Tt>0?1:Tt<0?-1:0},v=Math.sqrt,k=Math.tan;function S(Tt){return Tt>1?0:Tt<-1?t:Math.acos(Tt)}function E(Tt){return Tt>1?h:Tt<-1?-h:Math.asin(Tt)}function C(Tt){return(Tt=g(Tt/2))*Tt}function F(){}function I(Tt,Yt){Tt&&R.hasOwnProperty(Tt.type)&&R[Tt.type](Tt,Yt)}var D={Feature:function(Tt,Yt){I(Tt.geometry,Yt)},FeatureCollection:function(Tt,Yt){for(var yr=Tt.features,vr=-1,Nr=yr.length;++vr<Nr;)I(yr[vr].geometry,Yt)}},R={Sphere:function(Tt,Yt){Yt.sphere()},Point:function(Tt,Yt){Tt=Tt.coordinates,Yt.point(Tt[0],Tt[1],Tt[2])},MultiPoint:function(Tt,Yt){for(var yr=Tt.coordinates,vr=-1,Nr=yr.length;++vr<Nr;)Tt=yr[vr],Yt.point(Tt[0],Tt[1],Tt[2])},LineString:function(Tt,Yt){O(Tt.coordinates,Yt,0)},MultiLineString:function(Tt,Yt){for(var yr=Tt.coordinates,vr=-1,Nr=yr.length;++vr<Nr;)O(yr[vr],Yt,0)},Polygon:function(Tt,Yt){z(Tt.coordinates,Yt)},MultiPolygon:function(Tt,Yt){for(var yr=Tt.coordinates,vr=-1,Nr=yr.length;++vr<Nr;)z(yr[vr],Yt)},GeometryCollection:function(Tt,Yt){for(var yr=Tt.geometries,vr=-1,Nr=yr.length;++vr<Nr;)I(yr[vr],Yt)}};function O(Tt,Yt,yr){var vr=-1,Nr=Tt.length-yr,ln;for(Yt.lineStart();++vr<Nr;)ln=Tt[vr],Yt.point(ln[0],ln[1],ln[2]);Yt.lineEnd()}function z(Tt,Yt){var yr=-1,vr=Tt.length;for(Yt.polygonStart();++yr<vr;)O(Tt[yr],Yt,1);Yt.polygonEnd()}function B(Tt,Yt){Tt&&D.hasOwnProperty(Tt.type)?D[Tt.type](Tt,Yt):I(Tt,Yt)}var G=M(),Q=M(),X,j,re,ue,K,te={point:F,lineStart:F,lineEnd:F,polygonStart:function(){G.reset(),te.lineStart=Y,te.lineEnd=H},polygonEnd:function(){var Tt=+G;Q.add(Tt<0?o+Tt:Tt),this.lineStart=this.lineEnd=this.point=F},sphere:function(){Q.add(o)}};function Y(){te.point=ee}function H(){ne(X,j)}function ee(Tt,Yt){te.point=ne,X=Tt,j=Yt,Tt*=d,Yt*=d,re=Tt,ue=l(Yt=Yt/2+s),K=g(Yt)}function ne(Tt,Yt){Tt*=d,Yt*=d,Yt=Yt/2+s;var yr=Tt-re,vr=yr>=0?1:-1,Nr=vr*yr,ln=l(Yt),wn=g(Yt),Pn=K*wn,zn=ue*ln+Pn*l(Nr),Wn=Pn*vr*g(Nr);G.add(m(Wn,zn)),re=Tt,ue=ln,K=wn}function Z(Tt){return Q.reset(),B(Tt,te),Q*2}function q(Tt){return[m(Tt[1],Tt[0]),E(Tt[2])]}function ie(Tt){var Yt=Tt[0],yr=Tt[1],vr=l(yr);return[vr*l(Yt),vr*g(Yt),g(yr)]}function se(Tt,Yt){return Tt[0]*Yt[0]+Tt[1]*Yt[1]+Tt[2]*Yt[2]}function ae(Tt,Yt){return[Tt[1]*Yt[2]-Tt[2]*Yt[1],Tt[2]*Yt[0]-Tt[0]*Yt[2],Tt[0]*Yt[1]-Tt[1]*Yt[0]]}function oe(Tt,Yt){Tt[0]+=Yt[0],Tt[1]+=Yt[1],Tt[2]+=Yt[2]}function be(Tt,Yt){return[Tt[0]*Yt,Tt[1]*Yt,Tt[2]*Yt]}function ce(Tt){var Yt=v(Tt[0]*Tt[0]+Tt[1]*Tt[1]+Tt[2]*Tt[2]);Tt[0]/=Yt,Tt[1]/=Yt,Tt[2]/=Yt}var de,ye,ge,me,Se,Le,Oe,we,Ce=M(),Ke,Ye,Fe={point:Re,lineStart:xt,lineEnd:Nt,polygonStart:function(){Fe.point=tr,Fe.lineStart=Ht,Fe.lineEnd=Pt,Ce.reset(),te.polygonStart()},polygonEnd:function(){te.polygonEnd(),Fe.point=Re,Fe.lineStart=xt,Fe.lineEnd=Nt,G<0?(de=-(ge=180),ye=-(me=90)):Ce>n?me=90:Ce<-n&&(ye=-90),Ye[0]=de,Ye[1]=ge},sphere:function(){de=-(ge=180),ye=-(me=90)}};function Re(Tt,Yt){Ke.push(Ye=[de=Tt,ge=Tt]),Yt<ye&&(ye=Yt),Yt>me&&(me=Yt)}function je(Tt,Yt){var yr=ie([Tt*d,Yt*d]);if(we){var vr=ae(we,yr),Nr=[vr[1],-vr[0],0],ln=ae(Nr,vr);ce(ln),ln=q(ln);var wn=Tt-Se,Pn=wn>0?1:-1,zn=ln[0]*y*Pn,Wn,Tn=p(wn)>180;Tn^(Pn*Se<zn&&zn<Pn*Tt)?(Wn=ln[1]*y,Wn>me&&(me=Wn)):(zn=(zn+360)%360-180,Tn^(Pn*Se<zn&&zn<Pn*Tt)?(Wn=-ln[1]*y,Wn<ye&&(ye=Wn)):(Yt<ye&&(ye=Yt),Yt>me&&(me=Yt))),Tn?Tt<Se?$t(de,Tt)>$t(de,ge)&&(ge=Tt):$t(Tt,ge)>$t(de,ge)&&(de=Tt):ge>=de?(Tt<de&&(de=Tt),Tt>ge&&(ge=Tt)):Tt>Se?$t(de,Tt)>$t(de,ge)&&(ge=Tt):$t(Tt,ge)>$t(de,ge)&&(de=Tt)}else Ke.push(Ye=[de=Tt,ge=Tt]);Yt<ye&&(ye=Yt),Yt>me&&(me=Yt),we=yr,Se=Tt}function xt(){Fe.point=je}function Nt(){Ye[0]=de,Ye[1]=ge,Fe.point=Re,we=null}function tr(Tt,Yt){if(we){var yr=Tt-Se;Ce.add(p(yr)>180?yr+(yr>0?360:-360):yr)}else Le=Tt,Oe=Yt;te.point(Tt,Yt),je(Tt,Yt)}function Ht(){te.lineStart()}function Pt(){tr(Le,Oe),te.lineEnd(),p(Ce)>n&&(de=-(ge=180)),Ye[0]=de,Ye[1]=ge,we=null}function $t(Tt,Yt){return(Yt-=Tt)<0?Yt+360:Yt}function Ut(Tt,Yt){return Tt[0]-Yt[0]}function Lt(Tt,Yt){return Tt[0]<=Tt[1]?Tt[0]<=Yt&&Yt<=Tt[1]:Yt<Tt[0]||Tt[1]<Yt}function We(Tt){var Yt,yr,vr,Nr,ln,wn,Pn;if(me=ge=-(de=ye=1/0),Ke=[],B(Tt,Fe),yr=Ke.length){for(Ke.sort(Ut),Yt=1,vr=Ke[0],ln=[vr];Yt<yr;++Yt)Nr=Ke[Yt],Lt(vr,Nr[0])||Lt(vr,Nr[1])?($t(vr[0],Nr[1])>$t(vr[0],vr[1])&&(vr[1]=Nr[1]),$t(Nr[0],vr[1])>$t(vr[0],vr[1])&&(vr[0]=Nr[0])):ln.push(vr=Nr);for(wn=-1/0,yr=ln.length-1,Yt=0,vr=ln[yr];Yt<=yr;vr=Nr,++Yt)Nr=ln[Yt],(Pn=$t(vr[1],Nr[0]))>wn&&(wn=Pn,de=Nr[0],ge=vr[1])}return Ke=Ye=null,de===1/0||ye===1/0?[[NaN,NaN],[NaN,NaN]]:[[de,ye],[ge,me]]}var ot,Ge,Me,Ve,Qe,tt,St,wt,Ct,jt,Bt,Wt,Qt,Zt,cr,Xr,vn={sphere:F,point:en,lineStart:ar,lineEnd:Er,polygonStart:function(){vn.lineStart=st,vn.lineEnd=et},polygonEnd:function(){vn.lineStart=ar,vn.lineEnd=Er}};function en(Tt,Yt){Tt*=d,Yt*=d;var yr=l(Yt);ut(yr*l(Tt),yr*g(Tt),g(Yt))}function ut(Tt,Yt,yr){++ot,Me+=(Tt-Me)/ot,Ve+=(Yt-Ve)/ot,Qe+=(yr-Qe)/ot}function ar(){vn.point=rr}function rr(Tt,Yt){Tt*=d,Yt*=d;var yr=l(Yt);Zt=yr*l(Tt),cr=yr*g(Tt),Xr=g(Yt),vn.point=Kt,ut(Zt,cr,Xr)}function Kt(Tt,Yt){Tt*=d,Yt*=d;var yr=l(Yt),vr=yr*l(Tt),Nr=yr*g(Tt),ln=g(Yt),wn=m(v((wn=cr*ln-Xr*Nr)*wn+(wn=Xr*vr-Zt*ln)*wn+(wn=Zt*Nr-cr*vr)*wn),Zt*vr+cr*Nr+Xr*ln);Ge+=wn,tt+=wn*(Zt+(Zt=vr)),St+=wn*(cr+(cr=Nr)),wt+=wn*(Xr+(Xr=ln)),ut(Zt,cr,Xr)}function Er(){vn.point=en}function st(){vn.point=ht}function et(){vt(Wt,Qt),vn.point=en}function ht(Tt,Yt){Wt=Tt,Qt=Yt,Tt*=d,Yt*=d,vn.point=vt;var yr=l(Yt);Zt=yr*l(Tt),cr=yr*g(Tt),Xr=g(Yt),ut(Zt,cr,Xr)}function vt(Tt,Yt){Tt*=d,Yt*=d;var yr=l(Yt),vr=yr*l(Tt),Nr=yr*g(Tt),ln=g(Yt),wn=cr*ln-Xr*Nr,Pn=Xr*vr-Zt*ln,zn=Zt*Nr-cr*vr,Wn=v(wn*wn+Pn*Pn+zn*zn),Tn=E(Wn),Vn=Wn&&-Tn/Wn;Ct+=Vn*wn,jt+=Vn*Pn,Bt+=Vn*zn,Ge+=Tn,tt+=Tn*(Zt+(Zt=vr)),St+=Tn*(cr+(cr=Nr)),wt+=Tn*(Xr+(Xr=ln)),ut(Zt,cr,Xr)}function kt(Tt){ot=Ge=Me=Ve=Qe=tt=St=wt=Ct=jt=Bt=0,B(Tt,vn);var Yt=Ct,yr=jt,vr=Bt,Nr=Yt*Yt+yr*yr+vr*vr;return Nr<r&&(Yt=tt,yr=St,vr=wt,Ge<n&&(Yt=Me,yr=Ve,vr=Qe),Nr=Yt*Yt+yr*yr+vr*vr,Nr<r)?[NaN,NaN]:[m(yr,Yt)*y,E(vr/v(Nr))*y]}function Vt(Tt){return function(){return Tt}}function Pe(Tt,Yt){function yr(vr,Nr){return vr=Tt(vr,Nr),Yt(vr[0],vr[1])}return Tt.invert&&Yt.invert&&(yr.invert=function(vr,Nr){return vr=Yt.invert(vr,Nr),vr&&Tt.invert(vr[0],vr[1])}),yr}function ke(Tt,Yt){return[p(Tt)>t?Tt+Math.round(-Tt/o)*o:Tt,Yt]}ke.invert=ke;function lt(Tt,Yt,yr){return(Tt%=o)?Yt||yr?Pe(yt(Tt),Rt(Yt,yr)):yt(Tt):Yt||yr?Rt(Yt,yr):ke}function ft(Tt){return function(Yt,yr){return Yt+=Tt,[Yt>t?Yt-o:Yt<-t?Yt+o:Yt,yr]}}function yt(Tt){var Yt=ft(Tt);return Yt.invert=ft(-Tt),Yt}function Rt(Tt,Yt){var yr=l(Tt),vr=g(Tt),Nr=l(Yt),ln=g(Yt);function wn(Pn,zn){var Wn=l(zn),Tn=l(Pn)*Wn,Vn=g(Pn)*Wn,On=g(zn),Xn=On*yr+Tn*vr;return[m(Vn*Nr-Xn*ln,Tn*yr-On*vr),E(Xn*Nr+Vn*ln)]}return wn.invert=function(Pn,zn){var Wn=l(zn),Tn=l(Pn)*Wn,Vn=g(Pn)*Wn,On=g(zn),Xn=On*Nr-Vn*ln;return[m(Vn*Nr+On*ln,Tn*yr+Xn*vr),E(Xn*yr-Tn*vr)]},wn}function _t(Tt){Tt=lt(Tt[0]*d,Tt[1]*d,Tt.length>2?Tt[2]*d:0);function Yt(yr){return yr=Tt(yr[0]*d,yr[1]*d),yr[0]*=y,yr[1]*=y,yr}return Yt.invert=function(yr){return yr=Tt.invert(yr[0]*d,yr[1]*d),yr[0]*=y,yr[1]*=y,yr},Yt}function Dt(Tt,Yt,yr,vr,Nr,ln){if(!!yr){var wn=l(Yt),Pn=g(Yt),zn=vr*yr;Nr==null?(Nr=Yt+vr*o,ln=Yt-zn/2):(Nr=Jt(wn,Nr),ln=Jt(wn,ln),(vr>0?Nr<ln:Nr>ln)&&(Nr+=vr*o));for(var Wn,Tn=Nr;vr>0?Tn>ln:Tn<ln;Tn-=zn)Wn=q([wn,-Pn*l(Tn),-Pn*g(Tn)]),Tt.point(Wn[0],Wn[1])}}function Jt(Tt,Yt){Yt=ie(Yt),Yt[0]-=Tt,ce(Yt);var yr=S(-Yt[1]);return((-Yt[2]<0?-yr:yr)+o-n)%o}function fr(){var Tt=Vt([0,0]),Yt=Vt(90),yr=Vt(6),vr,Nr,ln={point:wn};function wn(zn,Wn){vr.push(zn=Nr(zn,Wn)),zn[0]*=y,zn[1]*=y}function Pn(){var zn=Tt.apply(this,arguments),Wn=Yt.apply(this,arguments)*d,Tn=yr.apply(this,arguments)*d;return vr=[],Nr=lt(-zn[0]*d,-zn[1]*d,0).invert,Dt(ln,Wn,Tn,1),zn={type:"Polygon",coordinates:[vr]},vr=Nr=null,zn}return Pn.center=function(zn){return arguments.length?(Tt=typeof zn=="function"?zn:Vt([+zn[0],+zn[1]]),Pn):Tt},Pn.radius=function(zn){return arguments.length?(Yt=typeof zn=="function"?zn:Vt(+zn),Pn):Yt},Pn.precision=function(zn){return arguments.length?(yr=typeof zn=="function"?zn:Vt(+zn),Pn):yr},Pn}function Rr(){var Tt=[],Yt;return{point:function(yr,vr,Nr){Yt.push([yr,vr,Nr])},lineStart:function(){Tt.push(Yt=[])},lineEnd:F,rejoin:function(){Tt.length>1&&Tt.push(Tt.pop().concat(Tt.shift()))},result:function(){var yr=Tt;return Tt=[],Yt=null,yr}}}function Sr(Tt,Yt){return p(Tt[0]-Yt[0])<n&&p(Tt[1]-Yt[1])<n}function Pr(Tt,Yt,yr,vr){this.x=Tt,this.z=Yt,this.o=yr,this.e=vr,this.v=!1,this.n=this.p=null}function Jr(Tt,Yt,yr,vr,Nr){var ln=[],wn=[],Pn,zn;if(Tt.forEach(function(aa){if(!((Ha=aa.length-1)<=0)){var Ha,Ia=aa[0],Ga=aa[Ha],Ya;if(Sr(Ia,Ga)){if(!Ia[2]&&!Ga[2]){for(Nr.lineStart(),Pn=0;Pn<Ha;++Pn)Nr.point((Ia=aa[Pn])[0],Ia[1]);Nr.lineEnd();return}Ga[0]+=2*n}ln.push(Ya=new Pr(Ia,aa,null,!0)),wn.push(Ya.o=new Pr(Ia,null,Ya,!1)),ln.push(Ya=new Pr(Ga,aa,null,!1)),wn.push(Ya.o=new Pr(Ga,null,Ya,!0))}}),!!ln.length){for(wn.sort(Yt),ur(ln),ur(wn),Pn=0,zn=wn.length;Pn<zn;++Pn)wn[Pn].e=yr=!yr;for(var Wn=ln[0],Tn,Vn;;){for(var On=Wn,Xn=!0;On.v;)if((On=On.n)===Wn)return;Tn=On.z,Nr.lineStart();do{if(On.v=On.o.v=!0,On.e){if(Xn)for(Pn=0,zn=Tn.length;Pn<zn;++Pn)Nr.point((Vn=Tn[Pn])[0],Vn[1]);else vr(On.x,On.n.x,1,Nr);On=On.n}else{if(Xn)for(Tn=On.p.z,Pn=Tn.length-1;Pn>=0;--Pn)Nr.point((Vn=Tn[Pn])[0],Vn[1]);else vr(On.x,On.p.x,-1,Nr);On=On.p}On=On.o,Tn=On.z,Xn=!Xn}while(!On.v);Nr.lineEnd()}}}function ur(Tt){if(!!(Yt=Tt.length)){for(var Yt,yr=0,vr=Tt[0],Nr;++yr<Yt;)vr.n=Nr=Tt[yr],Nr.p=vr,vr=Nr;vr.n=Nr=Tt[0],Nr.p=vr}}var _r=M();function Br(Tt){return p(Tt[0])<=t?Tt[0]:b(Tt[0])*((p(Tt[0])+t)%o-t)}function Yr(Tt,Yt){var yr=Br(Yt),vr=Yt[1],Nr=g(vr),ln=[g(yr),-l(yr),0],wn=0,Pn=0;_r.reset(),Nr===1?vr=h+n:Nr===-1&&(vr=-h-n);for(var zn=0,Wn=Tt.length;zn<Wn;++zn)if(!!(Vn=(Tn=Tt[zn]).length))for(var Tn,Vn,On=Tn[Vn-1],Xn=Br(On),aa=On[1]/2+s,Ha=g(aa),Ia=l(aa),Ga=0;Ga<Vn;++Ga,Xn=ra,Ha=Ja,Ia=ai,On=Ya){var Ya=Tn[Ga],ra=Br(Ya),ma=Ya[1]/2+s,Ja=g(ma),ai=l(ma),Mi=ra-Xn,Si=Mi>=0?1:-1,Ci=Si*Mi,Fi=Ci>t,pi=Ha*Ja;if(_r.add(m(pi*Si*g(Ci),Ia*ai+pi*l(Ci))),wn+=Fi?Mi+Si*o:Mi,Fi^Xn>=yr^ra>=yr){var Lo=ae(ie(On),ie(Ya));ce(Lo);var ho=ae(ln,Lo);ce(ho);var ni=(Fi^Mi>=0?-1:1)*E(ho[2]);(vr>ni||vr===ni&&(Lo[0]||Lo[1]))&&(Pn+=Fi^Mi>=0?1:-1)}}return(wn<-n||wn<n&&_r<-n)^Pn&1}function Dr(Tt,Yt,yr,vr){return function(Nr){var ln=Yt(Nr),wn=Rr(),Pn=Yt(wn),zn=!1,Wn,Tn,Vn,On={point:Xn,lineStart:Ha,lineEnd:Ia,polygonStart:function(){On.point=Ga,On.lineStart=Ya,On.lineEnd=ra,Tn=[],Wn=[]},polygonEnd:function(){On.point=Xn,On.lineStart=Ha,On.lineEnd=Ia,Tn=f.merge(Tn);var ma=Yr(Wn,vr);Tn.length?(zn||(Nr.polygonStart(),zn=!0),Jr(Tn,zt,ma,yr,Nr)):ma&&(zn||(Nr.polygonStart(),zn=!0),Nr.lineStart(),yr(null,null,1,Nr),Nr.lineEnd()),zn&&(Nr.polygonEnd(),zn=!1),Tn=Wn=null},sphere:function(){Nr.polygonStart(),Nr.lineStart(),yr(null,null,1,Nr),Nr.lineEnd(),Nr.polygonEnd()}};function Xn(ma,Ja){Tt(ma,Ja)&&Nr.point(ma,Ja)}function aa(ma,Ja){ln.point(ma,Ja)}function Ha(){On.point=aa,ln.lineStart()}function Ia(){On.point=Xn,ln.lineEnd()}function Ga(ma,Ja){Vn.push([ma,Ja]),Pn.point(ma,Ja)}function Ya(){Pn.lineStart(),Vn=[]}function ra(){Ga(Vn[0][0],Vn[0][1]),Pn.lineEnd();var ma=Pn.clean(),Ja=wn.result(),ai,Mi=Ja.length,Si,Ci,Fi;if(Vn.pop(),Wn.push(Vn),Vn=null,!!Mi){if(ma&1){if(Ci=Ja[0],(Si=Ci.length-1)>0){for(zn||(Nr.polygonStart(),zn=!0),Nr.lineStart(),ai=0;ai<Si;++ai)Nr.point((Fi=Ci[ai])[0],Fi[1]);Nr.lineEnd()}return}Mi>1&&ma&2&&Ja.push(Ja.pop().concat(Ja.shift())),Tn.push(Ja.filter(it))}}return On}}function it(Tt){return Tt.length>1}function zt(Tt,Yt){return((Tt=Tt.x)[0]<0?Tt[1]-h-n:h-Tt[1])-((Yt=Yt.x)[0]<0?Yt[1]-h-n:h-Yt[1])}var qt=Dr(function(){return!0},hr,Gr,[-t,-h]);function hr(Tt){var Yt=NaN,yr=NaN,vr=NaN,Nr;return{lineStart:function(){Tt.lineStart(),Nr=1},point:function(ln,wn){var Pn=ln>0?t:-t,zn=p(ln-Yt);p(zn-t)<n?(Tt.point(Yt,yr=(yr+wn)/2>0?h:-h),Tt.point(vr,yr),Tt.lineEnd(),Tt.lineStart(),Tt.point(Pn,yr),Tt.point(ln,yr),Nr=0):vr!==Pn&&zn>=t&&(p(Yt-vr)<n&&(Yt-=vr*n),p(ln-Pn)<n&&(ln-=Pn*n),yr=Ur(Yt,yr,ln,wn),Tt.point(vr,yr),Tt.lineEnd(),Tt.lineStart(),Tt.point(Pn,yr),Nr=0),Tt.point(Yt=ln,yr=wn),vr=Pn},lineEnd:function(){Tt.lineEnd(),Yt=yr=NaN},clean:function(){return 2-Nr}}}function Ur(Tt,Yt,yr,vr){var Nr,ln,wn=g(Tt-yr);return p(wn)>n?c((g(Yt)*(ln=l(vr))*g(yr)-g(vr)*(Nr=l(Yt))*g(Tt))/(Nr*ln*wn)):(Yt+vr)/2}function Gr(Tt,Yt,yr,vr){var Nr;if(Tt==null)Nr=yr*h,vr.point(-t,Nr),vr.point(0,Nr),vr.point(t,Nr),vr.point(t,0),vr.point(t,-Nr),vr.point(0,-Nr),vr.point(-t,-Nr),vr.point(-t,0),vr.point(-t,Nr);else if(p(Tt[0]-Yt[0])>n){var ln=Tt[0]<Yt[0]?t:-t;Nr=yr*ln/2,vr.point(-ln,Nr),vr.point(0,Nr),vr.point(ln,Nr)}else vr.point(Yt[0],Yt[1])}function Ir(Tt){var Yt=l(Tt),yr=6*d,vr=Yt>0,Nr=p(Yt)>n;function ln(Tn,Vn,On,Xn){Dt(Xn,Tt,yr,On,Tn,Vn)}function wn(Tn,Vn){return l(Tn)*l(Vn)>Yt}function Pn(Tn){var Vn,On,Xn,aa,Ha;return{lineStart:function(){aa=Xn=!1,Ha=1},point:function(Ia,Ga){var Ya=[Ia,Ga],ra,ma=wn(Ia,Ga),Ja=vr?ma?0:Wn(Ia,Ga):ma?Wn(Ia+(Ia<0?t:-t),Ga):0;if(!Vn&&(aa=Xn=ma)&&Tn.lineStart(),ma!==Xn&&(ra=zn(Vn,Ya),(!ra||Sr(Vn,ra)||Sr(Ya,ra))&&(Ya[2]=1)),ma!==Xn)Ha=0,ma?(Tn.lineStart(),ra=zn(Ya,Vn),Tn.point(ra[0],ra[1])):(ra=zn(Vn,Ya),Tn.point(ra[0],ra[1],2),Tn.lineEnd()),Vn=ra;else if(Nr&&Vn&&vr^ma){var ai;!(Ja&On)&&(ai=zn(Ya,Vn,!0))&&(Ha=0,vr?(Tn.lineStart(),Tn.point(ai[0][0],ai[0][1]),Tn.point(ai[1][0],ai[1][1]),Tn.lineEnd()):(Tn.point(ai[1][0],ai[1][1]),Tn.lineEnd(),Tn.lineStart(),Tn.point(ai[0][0],ai[0][1],3)))}ma&&(!Vn||!Sr(Vn,Ya))&&Tn.point(Ya[0],Ya[1]),Vn=Ya,Xn=ma,On=Ja},lineEnd:function(){Xn&&Tn.lineEnd(),Vn=null},clean:function(){return Ha|(aa&&Xn)<<1}}}function zn(Tn,Vn,On){var Xn=ie(Tn),aa=ie(Vn),Ha=[1,0,0],Ia=ae(Xn,aa),Ga=se(Ia,Ia),Ya=Ia[0],ra=Ga-Ya*Ya;if(!ra)return!On&&Tn;var ma=Yt*Ga/ra,Ja=-Yt*Ya/ra,ai=ae(Ha,Ia),Mi=be(Ha,ma),Si=be(Ia,Ja);oe(Mi,Si);var Ci=ai,Fi=se(Mi,Ci),pi=se(Ci,Ci),Lo=Fi*Fi-pi*(se(Mi,Mi)-1);if(!(Lo<0)){var ho=v(Lo),ni=be(Ci,(-Fi-ho)/pi);if(oe(ni,Mi),ni=q(ni),!On)return ni;var xa=Tn[0],ki=Vn[0],_o=Tn[1],Eo=Vn[1],Cs;ki<xa&&(Cs=xa,xa=ki,ki=Cs);var Xs=ki-xa,Qo=p(Xs-t)<n,wl=Qo||Xs<n;if(!Qo&&Eo<_o&&(Cs=_o,_o=Eo,Eo=Cs),wl?Qo?_o+Eo>0^ni[1]<(p(ni[0]-xa)<n?_o:Eo):_o<=ni[1]&&ni[1]<=Eo:Xs>t^(xa<=ni[0]&&ni[0]<=ki)){var Ns=be(Ci,(-Fi+ho)/pi);return oe(Ns,Mi),[ni,q(Ns)]}}}function Wn(Tn,Vn){var On=vr?Tt:t-Tt,Xn=0;return Tn<-On?Xn|=1:Tn>On&&(Xn|=2),Vn<-On?Xn|=4:Vn>On&&(Xn|=8),Xn}return Dr(wn,Pn,ln,vr?[0,-Tt]:[-t,Tt-t])}function Cr(Tt,Yt,yr,vr,Nr,ln){var wn=Tt[0],Pn=Tt[1],zn=Yt[0],Wn=Yt[1],Tn=0,Vn=1,On=zn-wn,Xn=Wn-Pn,aa;if(aa=yr-wn,!(!On&&aa>0)){if(aa/=On,On<0){if(aa<Tn)return;aa<Vn&&(Vn=aa)}else if(On>0){if(aa>Vn)return;aa>Tn&&(Tn=aa)}if(aa=Nr-wn,!(!On&&aa<0)){if(aa/=On,On<0){if(aa>Vn)return;aa>Tn&&(Tn=aa)}else if(On>0){if(aa<Tn)return;aa<Vn&&(Vn=aa)}if(aa=vr-Pn,!(!Xn&&aa>0)){if(aa/=Xn,Xn<0){if(aa<Tn)return;aa<Vn&&(Vn=aa)}else if(Xn>0){if(aa>Vn)return;aa>Tn&&(Tn=aa)}if(aa=ln-Pn,!(!Xn&&aa<0)){if(aa/=Xn,Xn<0){if(aa>Vn)return;aa>Tn&&(Tn=aa)}else if(Xn>0){if(aa<Tn)return;aa<Vn&&(Vn=aa)}return Tn>0&&(Tt[0]=wn+Tn*On,Tt[1]=Pn+Tn*Xn),Vn<1&&(Yt[0]=wn+Vn*On,Yt[1]=Pn+Vn*Xn),!0}}}}}var Kr=1e9,Cn=-Kr;function yn(Tt,Yt,yr,vr){function Nr(Wn,Tn){return Tt<=Wn&&Wn<=yr&&Yt<=Tn&&Tn<=vr}function ln(Wn,Tn,Vn,On){var Xn=0,aa=0;if(Wn==null||(Xn=wn(Wn,Vn))!==(aa=wn(Tn,Vn))||zn(Wn,Tn)<0^Vn>0)do On.point(Xn===0||Xn===3?Tt:yr,Xn>1?vr:Yt);while((Xn=(Xn+Vn+4)%4)!==aa);else On.point(Tn[0],Tn[1])}function wn(Wn,Tn){return p(Wn[0]-Tt)<n?Tn>0?0:3:p(Wn[0]-yr)<n?Tn>0?2:1:p(Wn[1]-Yt)<n?Tn>0?1:0:Tn>0?3:2}function Pn(Wn,Tn){return zn(Wn.x,Tn.x)}function zn(Wn,Tn){var Vn=wn(Wn,1),On=wn(Tn,1);return Vn!==On?Vn-On:Vn===0?Tn[1]-Wn[1]:Vn===1?Wn[0]-Tn[0]:Vn===2?Wn[1]-Tn[1]:Tn[0]-Wn[0]}return function(Wn){var Tn=Wn,Vn=Rr(),On,Xn,aa,Ha,Ia,Ga,Ya,ra,ma,Ja,ai,Mi={point:Si,lineStart:Lo,lineEnd:ho,polygonStart:Fi,polygonEnd:pi};function Si(xa,ki){Nr(xa,ki)&&Tn.point(xa,ki)}function Ci(){for(var xa=0,ki=0,_o=Xn.length;ki<_o;++ki)for(var Eo=Xn[ki],Cs=1,Xs=Eo.length,Qo=Eo[0],wl,Ns,ks=Qo[0],Po=Qo[1];Cs<Xs;++Cs)wl=ks,Ns=Po,Qo=Eo[Cs],ks=Qo[0],Po=Qo[1],Ns<=vr?Po>vr&&(ks-wl)*(vr-Ns)>(Po-Ns)*(Tt-wl)&&++xa:Po<=vr&&(ks-wl)*(vr-Ns)<(Po-Ns)*(Tt-wl)&&--xa;return xa}function Fi(){Tn=Vn,On=[],Xn=[],ai=!0}function pi(){var xa=Ci(),ki=ai&&xa,_o=(On=f.merge(On)).length;(ki||_o)&&(Wn.polygonStart(),ki&&(Wn.lineStart(),ln(null,null,1,Wn),Wn.lineEnd()),_o&&Jr(On,Pn,xa,ln,Wn),Wn.polygonEnd()),Tn=Wn,On=Xn=aa=null}function Lo(){Mi.point=ni,Xn&&Xn.push(aa=[]),Ja=!0,ma=!1,Ya=ra=NaN}function ho(){On&&(ni(Ha,Ia),Ga&&ma&&Vn.rejoin(),On.push(Vn.result())),Mi.point=Si,ma&&Tn.lineEnd()}function ni(xa,ki){var _o=Nr(xa,ki);if(Xn&&aa.push([xa,ki]),Ja)Ha=xa,Ia=ki,Ga=_o,Ja=!1,_o&&(Tn.lineStart(),Tn.point(xa,ki));else if(_o&&ma)Tn.point(xa,ki);else{var Eo=[Ya=Math.max(Cn,Math.min(Kr,Ya)),ra=Math.max(Cn,Math.min(Kr,ra))],Cs=[xa=Math.max(Cn,Math.min(Kr,xa)),ki=Math.max(Cn,Math.min(Kr,ki))];Cr(Eo,Cs,Tt,Yt,yr,vr)?(ma||(Tn.lineStart(),Tn.point(Eo[0],Eo[1])),Tn.point(Cs[0],Cs[1]),_o||Tn.lineEnd(),ai=!1):_o&&(Tn.lineStart(),Tn.point(xa,ki),ai=!1)}Ya=xa,ra=ki,ma=_o}return Mi}}function Yn(){var Tt=0,Yt=0,yr=960,vr=500,Nr,ln,wn;return wn={stream:function(Pn){return Nr&&ln===Pn?Nr:Nr=yn(Tt,Yt,yr,vr)(ln=Pn)},extent:function(Pn){return arguments.length?(Tt=+Pn[0][0],Yt=+Pn[0][1],yr=+Pn[1][0],vr=+Pn[1][1],Nr=ln=null,wn):[[Tt,Yt],[yr,vr]]}}}var In=M(),Jn,Zn,ba,Pa={sphere:F,point:F,lineStart:xi,lineEnd:F,polygonStart:F,polygonEnd:F};function xi(){Pa.point=ti,Pa.lineEnd=Ka}function Ka(){Pa.point=Pa.lineEnd=F}function ti(Tt,Yt){Tt*=d,Yt*=d,Jn=Tt,Zn=g(Yt),ba=l(Yt),Pa.point=$a}function $a(Tt,Yt){Tt*=d,Yt*=d;var yr=g(Yt),vr=l(Yt),Nr=p(Tt-Jn),ln=l(Nr),wn=g(Nr),Pn=vr*wn,zn=ba*yr-Zn*vr*ln,Wn=Zn*yr+ba*vr*ln;In.add(m(v(Pn*Pn+zn*zn),Wn)),Jn=Tt,Zn=yr,ba=vr}function kr(Tt){return In.reset(),B(Tt,Pa),+In}var bn=[null,null],gn={type:"LineString",coordinates:bn};function Ln(Tt,Yt){return bn[0]=Tt,bn[1]=Yt,kr(gn)}var qn={Feature:function(Tt,Yt){return oa(Tt.geometry,Yt)},FeatureCollection:function(Tt,Yt){for(var yr=Tt.features,vr=-1,Nr=yr.length;++vr<Nr;)if(oa(yr[vr].geometry,Yt))return!0;return!1}},da={Sphere:function(){return!0},Point:function(Tt,Yt){return Bn(Tt.coordinates,Yt)},MultiPoint:function(Tt,Yt){for(var yr=Tt.coordinates,vr=-1,Nr=yr.length;++vr<Nr;)if(Bn(yr[vr],Yt))return!0;return!1},LineString:function(Tt,Yt){return $n(Tt.coordinates,Yt)},MultiLineString:function(Tt,Yt){for(var yr=Tt.coordinates,vr=-1,Nr=yr.length;++vr<Nr;)if($n(yr[vr],Yt))return!0;return!1},Polygon:function(Tt,Yt){return Xa(Tt.coordinates,Yt)},MultiPolygon:function(Tt,Yt){for(var yr=Tt.coordinates,vr=-1,Nr=yr.length;++vr<Nr;)if(Xa(yr[vr],Yt))return!0;return!1},GeometryCollection:function(Tt,Yt){for(var yr=Tt.geometries,vr=-1,Nr=yr.length;++vr<Nr;)if(oa(yr[vr],Yt))return!0;return!1}};function oa(Tt,Yt){return Tt&&da.hasOwnProperty(Tt.type)?da[Tt.type](Tt,Yt):!1}function Bn(Tt,Yt){return Ln(Tt,Yt)===0}function $n(Tt,Yt){for(var yr,vr,Nr,ln=0,wn=Tt.length;ln<wn;ln++){if(vr=Ln(Tt[ln],Yt),vr===0||ln>0&&(Nr=Ln(Tt[ln],Tt[ln-1]),Nr>0&&yr<=Nr&&vr<=Nr&&(yr+vr-Nr)*(1-Math.pow((yr-vr)/Nr,2))<r*Nr))return!0;yr=vr}return!1}function Xa(Tt,Yt){return!!Yr(Tt.map(gi),Xt(Yt))}function gi(Tt){return Tt=Tt.map(Xt),Tt.pop(),Tt}function Xt(Tt){return[Tt[0]*d,Tt[1]*d]}function mr(Tt,Yt){return(Tt&&qn.hasOwnProperty(Tt.type)?qn[Tt.type]:oa)(Tt,Yt)}function un(Tt,Yt,yr){var vr=f.range(Tt,Yt-n,yr).concat(Yt);return function(Nr){return vr.map(function(ln){return[Nr,ln]})}}function xn(Tt,Yt,yr){var vr=f.range(Tt,Yt-n,yr).concat(Yt);return function(Nr){return vr.map(function(ln){return[ln,Nr]})}}function sn(){var Tt,Yt,yr,vr,Nr,ln,wn,Pn,zn=10,Wn=zn,Tn=90,Vn=360,On,Xn,aa,Ha,Ia=2.5;function Ga(){return{type:"MultiLineString",coordinates:Ya()}}function Ya(){return f.range(x(vr/Tn)*Tn,yr,Tn).map(aa).concat(f.range(x(Pn/Vn)*Vn,wn,Vn).map(Ha)).concat(f.range(x(Yt/zn)*zn,Tt,zn).filter(function(ra){return p(ra%Tn)>n}).map(On)).concat(f.range(x(ln/Wn)*Wn,Nr,Wn).filter(function(ra){return p(ra%Vn)>n}).map(Xn))}return Ga.lines=function(){return Ya().map(function(ra){return{type:"LineString",coordinates:ra}})},Ga.outline=function(){return{type:"Polygon",coordinates:[aa(vr).concat(Ha(wn).slice(1),aa(yr).reverse().slice(1),Ha(Pn).reverse().slice(1))]}},Ga.extent=function(ra){return arguments.length?Ga.extentMajor(ra).extentMinor(ra):Ga.extentMinor()},Ga.extentMajor=function(ra){return arguments.length?(vr=+ra[0][0],yr=+ra[1][0],Pn=+ra[0][1],wn=+ra[1][1],vr>yr&&(ra=vr,vr=yr,yr=ra),Pn>wn&&(ra=Pn,Pn=wn,wn=ra),Ga.precision(Ia)):[[vr,Pn],[yr,wn]]},Ga.extentMinor=function(ra){return arguments.length?(Yt=+ra[0][0],Tt=+ra[1][0],ln=+ra[0][1],Nr=+ra[1][1],Yt>Tt&&(ra=Yt,Yt=Tt,Tt=ra),ln>Nr&&(ra=ln,ln=Nr,Nr=ra),Ga.precision(Ia)):[[Yt,ln],[Tt,Nr]]},Ga.step=function(ra){return arguments.length?Ga.stepMajor(ra).stepMinor(ra):Ga.stepMinor()},Ga.stepMajor=function(ra){return arguments.length?(Tn=+ra[0],Vn=+ra[1],Ga):[Tn,Vn]},Ga.stepMinor=function(ra){return arguments.length?(zn=+ra[0],Wn=+ra[1],Ga):[zn,Wn]},Ga.precision=function(ra){return arguments.length?(Ia=+ra,On=un(ln,Nr,90),Xn=xn(Yt,Tt,Ia),aa=un(Pn,wn,90),Ha=xn(vr,yr,Ia),Ga):Ia},Ga.extentMajor([[-180,-90+n],[180,90-n]]).extentMinor([[-180,-80-n],[180,80+n]])}function kn(){return sn()()}function Mn(Tt,Yt){var yr=Tt[0]*d,vr=Tt[1]*d,Nr=Yt[0]*d,ln=Yt[1]*d,wn=l(vr),Pn=g(vr),zn=l(ln),Wn=g(ln),Tn=wn*l(yr),Vn=wn*g(yr),On=zn*l(Nr),Xn=zn*g(Nr),aa=2*E(v(C(ln-vr)+wn*zn*C(Nr-yr))),Ha=g(aa),Ia=aa?function(Ga){var Ya=g(Ga*=aa)/Ha,ra=g(aa-Ga)/Ha,ma=ra*Tn+Ya*On,Ja=ra*Vn+Ya*Xn,ai=ra*Pn+Ya*Wn;return[m(Ja,ma)*y,m(ai,v(ma*ma+Ja*Ja))*y]}:function(){return[yr*y,vr*y]};return Ia.distance=aa,Ia}function dn(Tt){return Tt}var Tr=M(),Ar=M(),Vr,_n,Gn,sa,En={point:F,lineStart:F,lineEnd:F,polygonStart:function(){En.lineStart=ea,En.lineEnd=Aa},polygonEnd:function(){En.lineStart=En.lineEnd=En.point=F,Tr.add(p(Ar)),Ar.reset()},result:function(){var Tt=Tr/2;return Tr.reset(),Tt}};function ea(){En.point=fa}function fa(Tt,Yt){En.point=wa,Vr=Gn=Tt,_n=sa=Yt}function wa(Tt,Yt){Ar.add(sa*Tt-Gn*Yt),Gn=Tt,sa=Yt}function Aa(){wa(Vr,_n)}var va=1/0,La=va,So=-va,Jo=So,vs={point:Cl,lineStart:F,lineEnd:F,polygonStart:F,polygonEnd:F,result:function(){var Tt=[[va,La],[So,Jo]];return So=Jo=-(La=va=1/0),Tt}};function Cl(Tt,Yt){Tt<va&&(va=Tt),Tt>So&&(So=Tt),Yt<La&&(La=Yt),Yt>Jo&&(Jo=Yt)}var Ul=0,_u=0,_i=0,hl=0,el=0,qi=0,No=0,Vl=0,Is=0,Gi,kl,lo,Zi,yo={point:uo,lineStart:_s,lineEnd:ps,polygonStart:function(){yo.lineStart=Uu,yo.lineEnd=tl},polygonEnd:function(){yo.point=uo,yo.lineStart=_s,yo.lineEnd=ps},result:function(){var Tt=Is?[No/Is,Vl/Is]:qi?[hl/qi,el/qi]:_i?[Ul/_i,_u/_i]:[NaN,NaN];return Ul=_u=_i=hl=el=qi=No=Vl=Is=0,Tt}};function uo(Tt,Yt){Ul+=Tt,_u+=Yt,++_i}function _s(){yo.point=vl}function vl(Tt,Yt){yo.point=Bu,uo(lo=Tt,Zi=Yt)}function Bu(Tt,Yt){var yr=Tt-lo,vr=Yt-Zi,Nr=v(yr*yr+vr*vr);hl+=Nr*(lo+Tt)/2,el+=Nr*(Zi+Yt)/2,qi+=Nr,uo(lo=Tt,Zi=Yt)}function ps(){yo.point=uo}function Uu(){yo.point=Bo}function tl(){uf(Gi,kl)}function Bo(Tt,Yt){yo.point=uf,uo(Gi=lo=Tt,kl=Zi=Yt)}function uf(Tt,Yt){var yr=Tt-lo,vr=Yt-Zi,Nr=v(yr*yr+vr*vr);hl+=Nr*(lo+Tt)/2,el+=Nr*(Zi+Yt)/2,qi+=Nr,Nr=Zi*Tt-lo*Yt,No+=Nr*(lo+Tt),Vl+=Nr*(Zi+Yt),Is+=Nr*3,uo(lo=Tt,Zi=Yt)}function rl(Tt){this._context=Tt}rl.prototype={_radius:4.5,pointRadius:function(Tt){return this._radius=Tt,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(Tt,Yt){switch(this._point){case 0:{this._context.moveTo(Tt,Yt),this._point=1;break}case 1:{this._context.lineTo(Tt,Yt);break}default:{this._context.moveTo(Tt+this._radius,Yt),this._context.arc(Tt,Yt,this._radius,0,o);break}}},result:F};var Hs=M(),ou,ff,cf,pl,su,Gs={point:F,lineStart:function(){Gs.point=Tu},lineEnd:function(){ou&&Ll(ff,cf),Gs.point=F},polygonStart:function(){ou=!0},polygonEnd:function(){ou=null},result:function(){var Tt=+Hs;return Hs.reset(),Tt}};function Tu(Tt,Yt){Gs.point=Ll,ff=pl=Tt,cf=su=Yt}function Ll(Tt,Yt){pl-=Tt,su-=Yt,Hs.add(v(pl*pl+su*su)),pl=Tt,su=Yt}function Au(){this._string=[]}Au.prototype={_radius:4.5,_circle:Vu(4.5),pointRadius:function(Tt){return(Tt=+Tt)!==this._radius&&(this._radius=Tt,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(Tt,Yt){switch(this._point){case 0:{this._string.push("M",Tt,",",Yt),this._point=1;break}case 1:{this._string.push("L",Tt,",",Yt);break}default:{this._circle==null&&(this._circle=Vu(this._radius)),this._string.push("M",Tt,",",Yt,this._circle);break}}},result:function(){if(this._string.length){var Tt=this._string.join("");return this._string=[],Tt}else return null}};function Vu(Tt){return"m0,"+Tt+"a"+Tt+","+Tt+" 0 1,1 0,"+-2*Tt+"a"+Tt+","+Tt+" 0 1,1 0,"+2*Tt+"z"}function lu(Tt,Yt){var yr=4.5,vr,Nr;function ln(wn){return wn&&(typeof yr=="function"&&Nr.pointRadius(+yr.apply(this,arguments)),B(wn,vr(Nr))),Nr.result()}return ln.area=function(wn){return B(wn,vr(En)),En.result()},ln.measure=function(wn){return B(wn,vr(Gs)),Gs.result()},ln.bounds=function(wn){return B(wn,vr(vs)),vs.result()},ln.centroid=function(wn){return B(wn,vr(yo)),yo.result()},ln.projection=function(wn){return arguments.length?(vr=wn==null?(Tt=null,dn):(Tt=wn).stream,ln):Tt},ln.context=function(wn){return arguments.length?(Nr=wn==null?(Yt=null,new Au):new rl(Yt=wn),typeof yr!="function"&&Nr.pointRadius(yr),ln):Yt},ln.pointRadius=function(wn){return arguments.length?(yr=typeof wn=="function"?wn:(Nr.pointRadius(+wn),+wn),ln):yr},ln.projection(Tt).context(Yt)}function hf(Tt){return{stream:dl(Tt)}}function dl(Tt){return function(Yt){var yr=new Mu;for(var vr in Tt)yr[vr]=Tt[vr];return yr.stream=Yt,yr}}function Mu(){}Mu.prototype={constructor:Mu,point:function(Tt,Yt){this.stream.point(Tt,Yt)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function uu(Tt,Yt,yr){var vr=Tt.clipExtent&&Tt.clipExtent();return Tt.scale(150).translate([0,0]),vr!=null&&Tt.clipExtent(null),B(yr,Tt.stream(vs)),Yt(vs.result()),vr!=null&&Tt.clipExtent(vr),Tt}function Fs(Tt,Yt,yr){return uu(Tt,function(vr){var Nr=Yt[1][0]-Yt[0][0],ln=Yt[1][1]-Yt[0][1],wn=Math.min(Nr/(vr[1][0]-vr[0][0]),ln/(vr[1][1]-vr[0][1])),Pn=+Yt[0][0]+(Nr-wn*(vr[1][0]+vr[0][0]))/2,zn=+Yt[0][1]+(ln-wn*(vr[1][1]+vr[0][1]))/2;Tt.scale(150*wn).translate([Pn,zn])},yr)}function Hl(Tt,Yt,yr){return Fs(Tt,[[0,0],Yt],yr)}function Su(Tt,Yt,yr){return uu(Tt,function(vr){var Nr=+Yt,ln=Nr/(vr[1][0]-vr[0][0]),wn=(Nr-ln*(vr[1][0]+vr[0][0]))/2,Pn=-ln*vr[0][1];Tt.scale(150*ln).translate([wn,Pn])},yr)}function Hu(Tt,Yt,yr){return uu(Tt,function(vr){var Nr=+Yt,ln=Nr/(vr[1][1]-vr[0][1]),wn=-ln*vr[0][0],Pn=(Nr-ln*(vr[1][1]+vr[0][1]))/2;Tt.scale(150*ln).translate([wn,Pn])},yr)}var Gu=16,fu=l(30*d);function vf(Tt,Yt){return+Yt?ds(Tt,Yt):Yu(Tt)}function Yu(Tt){return dl({point:function(Yt,yr){Yt=Tt(Yt,yr),this.stream.point(Yt[0],Yt[1])}})}function ds(Tt,Yt){function yr(vr,Nr,ln,wn,Pn,zn,Wn,Tn,Vn,On,Xn,aa,Ha,Ia){var Ga=Wn-vr,Ya=Tn-Nr,ra=Ga*Ga+Ya*Ya;if(ra>4*Yt&&Ha--){var ma=wn+On,Ja=Pn+Xn,ai=zn+aa,Mi=v(ma*ma+Ja*Ja+ai*ai),Si=E(ai/=Mi),Ci=p(p(ai)-1)<n||p(ln-Vn)<n?(ln+Vn)/2:m(Ja,ma),Fi=Tt(Ci,Si),pi=Fi[0],Lo=Fi[1],ho=pi-vr,ni=Lo-Nr,xa=Ya*ho-Ga*ni;(xa*xa/ra>Yt||p((Ga*ho+Ya*ni)/ra-.5)>.3||wn*On+Pn*Xn+zn*aa<fu)&&(yr(vr,Nr,ln,wn,Pn,zn,pi,Lo,Ci,ma/=Mi,Ja/=Mi,ai,Ha,Ia),Ia.point(pi,Lo),yr(pi,Lo,Ci,ma,Ja,ai,Wn,Tn,Vn,On,Xn,aa,Ha,Ia))}}return function(vr){var Nr,ln,wn,Pn,zn,Wn,Tn,Vn,On,Xn,aa,Ha,Ia={point:Ga,lineStart:Ya,lineEnd:ma,polygonStart:function(){vr.polygonStart(),Ia.lineStart=Ja},polygonEnd:function(){vr.polygonEnd(),Ia.lineStart=Ya}};function Ga(Si,Ci){Si=Tt(Si,Ci),vr.point(Si[0],Si[1])}function Ya(){Vn=NaN,Ia.point=ra,vr.lineStart()}function ra(Si,Ci){var Fi=ie([Si,Ci]),pi=Tt(Si,Ci);yr(Vn,On,Tn,Xn,aa,Ha,Vn=pi[0],On=pi[1],Tn=Si,Xn=Fi[0],aa=Fi[1],Ha=Fi[2],Gu,vr),vr.point(Vn,On)}function ma(){Ia.point=Ga,vr.lineEnd()}function Ja(){Ya(),Ia.point=ai,Ia.lineEnd=Mi}function ai(Si,Ci){ra(Nr=Si,Ci),ln=Vn,wn=On,Pn=Xn,zn=aa,Wn=Ha,Ia.point=ra}function Mi(){yr(Vn,On,Tn,Xn,aa,Ha,ln,wn,Nr,Pn,zn,Wn,Gu,vr),Ia.lineEnd=ma,ma()}return Ia}}var Pl=dl({point:function(Tt,Yt){this.stream.point(Tt*d,Yt*d)}});function Dl(Tt){return dl({point:function(Yt,yr){var vr=Tt(Yt,yr);return this.stream.point(vr[0],vr[1])}})}function Eu(Tt,Yt,yr,vr,Nr){function ln(wn,Pn){return wn*=vr,Pn*=Nr,[Yt+Tt*wn,yr-Tt*Pn]}return ln.invert=function(wn,Pn){return[(wn-Yt)/Tt*vr,(yr-Pn)/Tt*Nr]},ln}function zs(Tt,Yt,yr,vr,Nr,ln){var wn=l(ln),Pn=g(ln),zn=wn*Tt,Wn=Pn*Tt,Tn=wn/Tt,Vn=Pn/Tt,On=(Pn*yr-wn*Yt)/Tt,Xn=(Pn*Yt+wn*yr)/Tt;function aa(Ha,Ia){return Ha*=vr,Ia*=Nr,[zn*Ha-Wn*Ia+Yt,yr-Wn*Ha-zn*Ia]}return aa.invert=function(Ha,Ia){return[vr*(Tn*Ha-Vn*Ia+On),Nr*(Xn-Vn*Ha-Tn*Ia)]},aa}function Uo(Tt){return cu(function(){return Tt})()}function cu(Tt){var Yt,yr=150,vr=480,Nr=250,ln=0,wn=0,Pn=0,zn=0,Wn=0,Tn,Vn=0,On=1,Xn=1,aa=null,Ha=qt,Ia=null,Ga,Ya,ra,ma=dn,Ja=.5,ai,Mi,Si,Ci,Fi;function pi(xa){return Si(xa[0]*d,xa[1]*d)}function Lo(xa){return xa=Si.invert(xa[0],xa[1]),xa&&[xa[0]*y,xa[1]*y]}pi.stream=function(xa){return Ci&&Fi===xa?Ci:Ci=Pl(Dl(Tn)(Ha(ai(ma(Fi=xa)))))},pi.preclip=function(xa){return arguments.length?(Ha=xa,aa=void 0,ni()):Ha},pi.postclip=function(xa){return arguments.length?(ma=xa,Ia=Ga=Ya=ra=null,ni()):ma},pi.clipAngle=function(xa){return arguments.length?(Ha=+xa?Ir(aa=xa*d):(aa=null,qt),ni()):aa*y},pi.clipExtent=function(xa){return arguments.length?(ma=xa==null?(Ia=Ga=Ya=ra=null,dn):yn(Ia=+xa[0][0],Ga=+xa[0][1],Ya=+xa[1][0],ra=+xa[1][1]),ni()):Ia==null?null:[[Ia,Ga],[Ya,ra]]},pi.scale=function(xa){return arguments.length?(yr=+xa,ho()):yr},pi.translate=function(xa){return arguments.length?(vr=+xa[0],Nr=+xa[1],ho()):[vr,Nr]},pi.center=function(xa){return arguments.length?(ln=xa[0]%360*d,wn=xa[1]%360*d,ho()):[ln*y,wn*y]},pi.rotate=function(xa){return arguments.length?(Pn=xa[0]%360*d,zn=xa[1]%360*d,Wn=xa.length>2?xa[2]%360*d:0,ho()):[Pn*y,zn*y,Wn*y]},pi.angle=function(xa){return arguments.length?(Vn=xa%360*d,ho()):Vn*y},pi.reflectX=function(xa){return arguments.length?(On=xa?-1:1,ho()):On<0},pi.reflectY=function(xa){return arguments.length?(Xn=xa?-1:1,ho()):Xn<0},pi.precision=function(xa){return arguments.length?(ai=vf(Mi,Ja=xa*xa),ni()):v(Ja)},pi.fitExtent=function(xa,ki){return Fs(pi,xa,ki)},pi.fitSize=function(xa,ki){return Hl(pi,xa,ki)},pi.fitWidth=function(xa,ki){return Su(pi,xa,ki)},pi.fitHeight=function(xa,ki){return Hu(pi,xa,ki)};function ho(){var xa=zs(yr,0,0,On,Xn,Vn).apply(null,Yt(ln,wn)),ki=(Vn?zs:Eu)(yr,vr-xa[0],Nr-xa[1],On,Xn,Vn);return Tn=lt(Pn,zn,Wn),Mi=Pe(Yt,ki),Si=Pe(Tn,Mi),ai=vf(Mi,Ja),ni()}function ni(){return Ci=Fi=null,pi}return function(){return Yt=Tt.apply(this,arguments),pi.invert=Yt.invert&&Lo,ho()}}function Ys(Tt){var Yt=0,yr=t/3,vr=cu(Tt),Nr=vr(Yt,yr);return Nr.parallels=function(ln){return arguments.length?vr(Yt=ln[0]*d,yr=ln[1]*d):[Yt*y,yr*y]},Nr}function Ws(Tt){var Yt=l(Tt);function yr(vr,Nr){return[vr*Yt,g(Nr)/Yt]}return yr.invert=function(vr,Nr){return[vr/Yt,E(Nr*Yt)]},yr}function bo(Tt,Yt){var yr=g(Tt),vr=(yr+g(Yt))/2;if(p(vr)<n)return Ws(Tt);var Nr=1+yr*(2*vr-yr),ln=v(Nr)/vr;function wn(Pn,zn){var Wn=v(Nr-2*vr*g(zn))/vr;return[Wn*g(Pn*=vr),ln-Wn*l(Pn)]}return wn.invert=function(Pn,zn){var Wn=ln-zn,Tn=m(Pn,p(Wn))*b(Wn);return Wn*vr<0&&(Tn-=t*b(Pn)*b(Wn)),[Tn/vr,E((Nr-(Pn*Pn+Wn*Wn)*vr*vr)/(2*vr))]},wn}function Gl(){return Ys(bo).scale(155.424).center([0,33.6442])}function Yl(){return Gl().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function yl(Tt){var Yt=Tt.length;return{point:function(yr,vr){for(var Nr=-1;++Nr<Yt;)Tt[Nr].point(yr,vr)},sphere:function(){for(var yr=-1;++yr<Yt;)Tt[yr].sphere()},lineStart:function(){for(var yr=-1;++yr<Yt;)Tt[yr].lineStart()},lineEnd:function(){for(var yr=-1;++yr<Yt;)Tt[yr].lineEnd()},polygonStart:function(){for(var yr=-1;++yr<Yt;)Tt[yr].polygonStart()},polygonEnd:function(){for(var yr=-1;++yr<Yt;)Tt[yr].polygonEnd()}}}function Os(){var Tt,Yt,yr=Yl(),vr,Nr=Gl().rotate([154,0]).center([-2,58.5]).parallels([55,65]),ln,wn=Gl().rotate([157,0]).center([-3,19.9]).parallels([8,18]),Pn,zn,Wn={point:function(On,Xn){zn=[On,Xn]}};function Tn(On){var Xn=On[0],aa=On[1];return zn=null,vr.point(Xn,aa),zn||(ln.point(Xn,aa),zn)||(Pn.point(Xn,aa),zn)}Tn.invert=function(On){var Xn=yr.scale(),aa=yr.translate(),Ha=(On[0]-aa[0])/Xn,Ia=(On[1]-aa[1])/Xn;return(Ia>=.12&&Ia<.234&&Ha>=-.425&&Ha<-.214?Nr:Ia>=.166&&Ia<.234&&Ha>=-.214&&Ha<-.115?wn:yr).invert(On)},Tn.stream=function(On){return Tt&&Yt===On?Tt:Tt=yl([yr.stream(Yt=On),Nr.stream(On),wn.stream(On)])},Tn.precision=function(On){return arguments.length?(yr.precision(On),Nr.precision(On),wn.precision(On),Vn()):yr.precision()},Tn.scale=function(On){return arguments.length?(yr.scale(On),Nr.scale(On*.35),wn.scale(On),Tn.translate(yr.translate())):yr.scale()},Tn.translate=function(On){if(!arguments.length)return yr.translate();var Xn=yr.scale(),aa=+On[0],Ha=+On[1];return vr=yr.translate(On).clipExtent([[aa-.455*Xn,Ha-.238*Xn],[aa+.455*Xn,Ha+.238*Xn]]).stream(Wn),ln=Nr.translate([aa-.307*Xn,Ha+.201*Xn]).clipExtent([[aa-.425*Xn+n,Ha+.12*Xn+n],[aa-.214*Xn-n,Ha+.234*Xn-n]]).stream(Wn),Pn=wn.translate([aa-.205*Xn,Ha+.212*Xn]).clipExtent([[aa-.214*Xn+n,Ha+.166*Xn+n],[aa-.115*Xn-n,Ha+.234*Xn-n]]).stream(Wn),Vn()},Tn.fitExtent=function(On,Xn){return Fs(Tn,On,Xn)},Tn.fitSize=function(On,Xn){return Hl(Tn,On,Xn)},Tn.fitWidth=function(On,Xn){return Su(Tn,On,Xn)},Tn.fitHeight=function(On,Xn){return Hu(Tn,On,Xn)};function Vn(){return Tt=Yt=null,Tn}return Tn.scale(1070)}function Wl(Tt){return function(Yt,yr){var vr=l(Yt),Nr=l(yr),ln=Tt(vr*Nr);return[ln*Nr*g(Yt),ln*g(yr)]}}function Rl(Tt){return function(Yt,yr){var vr=v(Yt*Yt+yr*yr),Nr=Tt(vr),ln=g(Nr),wn=l(Nr);return[m(Yt*ln,vr*wn),E(vr&&yr*ln/vr)]}}var hu=Wl(function(Tt){return v(2/(1+Tt))});hu.invert=Rl(function(Tt){return 2*E(Tt/2)});function jl(){return Uo(hu).scale(124.75).clipAngle(180-.001)}var ml=Wl(function(Tt){return(Tt=S(Tt))&&Tt/g(Tt)});ml.invert=Rl(function(Tt){return Tt});function pf(){return Uo(ml).scale(79.4188).clipAngle(180-.001)}function Ts(Tt,Yt){return[Tt,A(k((h+Yt)/2))]}Ts.invert=function(Tt,Yt){return[Tt,2*c(u(Yt))-h]};function Lf(){return Cu(Ts).scale(961/o)}function Cu(Tt){var Yt=Uo(Tt),yr=Yt.center,vr=Yt.scale,Nr=Yt.translate,ln=Yt.clipExtent,wn=null,Pn,zn,Wn;Yt.scale=function(Vn){return arguments.length?(vr(Vn),Tn()):vr()},Yt.translate=function(Vn){return arguments.length?(Nr(Vn),Tn()):Nr()},Yt.center=function(Vn){return arguments.length?(yr(Vn),Tn()):yr()},Yt.clipExtent=function(Vn){return arguments.length?(Vn==null?wn=Pn=zn=Wn=null:(wn=+Vn[0][0],Pn=+Vn[0][1],zn=+Vn[1][0],Wn=+Vn[1][1]),Tn()):wn==null?null:[[wn,Pn],[zn,Wn]]};function Tn(){var Vn=t*vr(),On=Yt(_t(Yt.rotate()).invert([0,0]));return ln(wn==null?[[On[0]-Vn,On[1]-Vn],[On[0]+Vn,On[1]+Vn]]:Tt===Ts?[[Math.max(On[0]-Vn,wn),Pn],[Math.min(On[0]+Vn,zn),Wn]]:[[wn,Math.max(On[1]-Vn,Pn)],[zn,Math.min(On[1]+Vn,Wn)]])}return Tn()}function Il(Tt){return k((h+Tt)/2)}function Xl(Tt,Yt){var yr=l(Tt),vr=Tt===Yt?g(Tt):A(yr/l(Yt))/A(Il(Yt)/Il(Tt)),Nr=yr*_(Il(Tt),vr)/vr;if(!vr)return Ts;function ln(wn,Pn){Nr>0?Pn<-h+n&&(Pn=-h+n):Pn>h-n&&(Pn=h-n);var zn=Nr/_(Il(Pn),vr);return[zn*g(vr*wn),Nr-zn*l(vr*wn)]}return ln.invert=function(wn,Pn){var zn=Nr-Pn,Wn=b(vr)*v(wn*wn+zn*zn),Tn=m(wn,p(zn))*b(zn);return zn*vr<0&&(Tn-=t*b(wn)*b(zn)),[Tn/vr,2*c(_(Nr/Wn,1/vr))-h]},ln}function xl(){return Ys(Xl).scale(109.5).parallels([30,30])}function Zl(Tt,Yt){return[Tt,Yt]}Zl.invert=Zl;function Wu(){return Uo(Zl).scale(152.63)}function ju(Tt,Yt){var yr=l(Tt),vr=Tt===Yt?g(Tt):(yr-l(Yt))/(Yt-Tt),Nr=yr/vr+Tt;if(p(vr)<n)return Zl;function ln(wn,Pn){var zn=Nr-Pn,Wn=vr*wn;return[zn*g(Wn),Nr-zn*l(Wn)]}return ln.invert=function(wn,Pn){var zn=Nr-Pn,Wn=m(wn,p(zn))*b(zn);return zn*vr<0&&(Wn-=t*b(wn)*b(zn)),[Wn/vr,Nr-b(vr)*v(wn*wn+zn*zn)]},ln}function Pf(){return Ys(ju).scale(131.154).center([0,13.9389])}var Yi=1.340264,Fl=-.081106,bl=893e-6,gs=.003796,As=v(3)/2,Kl=12;function wo(Tt,Yt){var yr=E(As*g(Yt)),vr=yr*yr,Nr=vr*vr*vr;return[Tt*l(yr)/(As*(Yi+3*Fl*vr+Nr*(7*bl+9*gs*vr))),yr*(Yi+Fl*vr+Nr*(bl+gs*vr))]}wo.invert=function(Tt,Yt){for(var yr=Yt,vr=yr*yr,Nr=vr*vr*vr,ln=0,wn,Pn,zn;ln<Kl&&(Pn=yr*(Yi+Fl*vr+Nr*(bl+gs*vr))-Yt,zn=Yi+3*Fl*vr+Nr*(7*bl+9*gs*vr),yr-=wn=Pn/zn,vr=yr*yr,Nr=vr*vr*vr,!(p(wn)<r));++ln);return[As*Tt*(Yi+3*Fl*vr+Nr*(7*bl+9*gs*vr))/l(yr),E(g(yr)/As)]};function Xu(){return Uo(wo).scale(177.158)}function Ms(Tt,Yt){var yr=l(Yt),vr=l(Tt)*yr;return[yr*g(Tt)/vr,g(Yt)/vr]}Ms.invert=Rl(c);function nl(){return Uo(Ms).scale(144.049).clipAngle(60)}function al(){var Tt=1,Yt=0,yr=0,vr=1,Nr=1,ln=0,wn,Pn,zn=null,Wn,Tn,Vn,On=1,Xn=1,aa=dl({point:function(ma,Ja){var ai=ra([ma,Ja]);this.stream.point(ai[0],ai[1])}}),Ha=dn,Ia,Ga;function Ya(){return On=Tt*vr,Xn=Tt*Nr,Ia=Ga=null,ra}function ra(ma){var Ja=ma[0]*On,ai=ma[1]*Xn;if(ln){var Mi=ai*wn-Ja*Pn;Ja=Ja*wn+ai*Pn,ai=Mi}return[Ja+Yt,ai+yr]}return ra.invert=function(ma){var Ja=ma[0]-Yt,ai=ma[1]-yr;if(ln){var Mi=ai*wn+Ja*Pn;Ja=Ja*wn-ai*Pn,ai=Mi}return[Ja/On,ai/Xn]},ra.stream=function(ma){return Ia&&Ga===ma?Ia:Ia=aa(Ha(Ga=ma))},ra.postclip=function(ma){return arguments.length?(Ha=ma,zn=Wn=Tn=Vn=null,Ya()):Ha},ra.clipExtent=function(ma){return arguments.length?(Ha=ma==null?(zn=Wn=Tn=Vn=null,dn):yn(zn=+ma[0][0],Wn=+ma[0][1],Tn=+ma[1][0],Vn=+ma[1][1]),Ya()):zn==null?null:[[zn,Wn],[Tn,Vn]]},ra.scale=function(ma){return arguments.length?(Tt=+ma,Ya()):Tt},ra.translate=function(ma){return arguments.length?(Yt=+ma[0],yr=+ma[1],Ya()):[Yt,yr]},ra.angle=function(ma){return arguments.length?(ln=ma%360*d,Pn=g(ln),wn=l(ln),Ya()):ln*y},ra.reflectX=function(ma){return arguments.length?(vr=ma?-1:1,Ya()):vr<0},ra.reflectY=function(ma){return arguments.length?(Nr=ma?-1:1,Ya()):Nr<0},ra.fitExtent=function(ma,Ja){return Fs(ra,ma,Ja)},ra.fitSize=function(ma,Ja){return Hl(ra,ma,Ja)},ra.fitWidth=function(ma,Ja){return Su(ra,ma,Ja)},ra.fitHeight=function(ma,Ja){return Hu(ra,ma,Ja)},ra}function js(Tt,Yt){var yr=Yt*Yt,vr=yr*yr;return[Tt*(.8707-.131979*yr+vr*(-.013791+vr*(.003971*yr-.001529*vr))),Yt*(1.007226+yr*(.015085+vr*(-.044475+.028874*yr-.005916*vr)))]}js.invert=function(Tt,Yt){var yr=Yt,vr=25,Nr;do{var ln=yr*yr,wn=ln*ln;yr-=Nr=(yr*(1.007226+ln*(.015085+wn*(-.044475+.028874*ln-.005916*wn)))-Yt)/(1.007226+ln*(.015085*3+wn*(-.044475*7+.028874*9*ln-.005916*11*wn)))}while(p(Nr)>n&&--vr>0);return[Tt/(.8707+(ln=yr*yr)*(-.131979+ln*(-.013791+ln*ln*ln*(.003971-.001529*ln)))),yr]};function Ss(){return Uo(js).scale(175.295)}function eo(Tt,Yt){return[l(Yt)*g(Tt),g(Yt)]}eo.invert=Rl(E);function Vo(){return Uo(eo).scale(249.5).clipAngle(90+n)}function Es(Tt,Yt){var yr=l(Yt),vr=1+l(Tt)*yr;return[yr*g(Tt)/vr,g(Yt)/vr]}Es.invert=Rl(function(Tt){return 2*c(Tt)});function Zu(){return Uo(Es).scale(250).clipAngle(142)}function vu(Tt,Yt){return[A(k((h+Yt)/2)),-Tt]}vu.invert=function(Tt,Yt){return[-Yt,2*c(u(Tt))-h]};function Ku(){var Tt=Cu(vu),Yt=Tt.center,yr=Tt.rotate;return Tt.center=function(vr){return arguments.length?Yt([-vr[1],vr[0]]):(vr=Yt(),[vr[1],-vr[0]])},Tt.rotate=function(vr){return arguments.length?yr([vr[0],vr[1],vr.length>2?vr[2]+90:90]):(vr=yr(),[vr[0],vr[1],vr[2]-90])},yr([0,0,90]).scale(159.155)}w.geoAlbers=Yl,w.geoAlbersUsa=Os,w.geoArea=Z,w.geoAzimuthalEqualArea=jl,w.geoAzimuthalEqualAreaRaw=hu,w.geoAzimuthalEquidistant=pf,w.geoAzimuthalEquidistantRaw=ml,w.geoBounds=We,w.geoCentroid=kt,w.geoCircle=fr,w.geoClipAntimeridian=qt,w.geoClipCircle=Ir,w.geoClipExtent=Yn,w.geoClipRectangle=yn,w.geoConicConformal=xl,w.geoConicConformalRaw=Xl,w.geoConicEqualArea=Gl,w.geoConicEqualAreaRaw=bo,w.geoConicEquidistant=Pf,w.geoConicEquidistantRaw=ju,w.geoContains=mr,w.geoDistance=Ln,w.geoEqualEarth=Xu,w.geoEqualEarthRaw=wo,w.geoEquirectangular=Wu,w.geoEquirectangularRaw=Zl,w.geoGnomonic=nl,w.geoGnomonicRaw=Ms,w.geoGraticule=sn,w.geoGraticule10=kn,w.geoIdentity=al,w.geoInterpolate=Mn,w.geoLength=kr,w.geoMercator=Lf,w.geoMercatorRaw=Ts,w.geoNaturalEarth1=Ss,w.geoNaturalEarth1Raw=js,w.geoOrthographic=Vo,w.geoOrthographicRaw=eo,w.geoPath=lu,w.geoProjection=Uo,w.geoProjectionMutator=cu,w.geoRotation=_t,w.geoStereographic=Zu,w.geoStereographicRaw=Es,w.geoStream=B,w.geoTransform=hf,w.geoTransverseMercator=Ku,w.geoTransverseMercatorRaw=vu,Object.defineProperty(w,"__esModule",{value:!0})})},{"d3-array":107}],115:[function(i,U,V){(function(w,f){typeof V=="object"&&typeof U<"u"?f(V):(w=w||self,f(w.d3=w.d3||{}))})(this,function(w){function f(Ge,Me){return Ge.parent===Me.parent?1:2}function M(Ge){return Ge.reduce(T,0)/Ge.length}function T(Ge,Me){return Ge+Me.x}function e(Ge){return 1+Ge.reduce(a,0)}function a(Ge,Me){return Math.max(Ge,Me.y)}function n(Ge){for(var Me;Me=Ge.children;)Ge=Me[0];return Ge}function r(Ge){for(var Me;Me=Ge.children;)Ge=Me[Me.length-1];return Ge}function t(){var Ge=f,Me=1,Ve=1,Qe=!1;function tt(St){var wt,Ct=0;St.eachAfter(function(Zt){var cr=Zt.children;cr?(Zt.x=M(cr),Zt.y=e(cr)):(Zt.x=wt?Ct+=Ge(Zt,wt):0,Zt.y=0,wt=Zt)});var jt=n(St),Bt=r(St),Wt=jt.x-Ge(jt,Bt)/2,Qt=Bt.x+Ge(Bt,jt)/2;return St.eachAfter(Qe?function(Zt){Zt.x=(Zt.x-St.x)*Me,Zt.y=(St.y-Zt.y)*Ve}:function(Zt){Zt.x=(Zt.x-Wt)/(Qt-Wt)*Me,Zt.y=(1-(St.y?Zt.y/St.y:1))*Ve})}return tt.separation=function(St){return arguments.length?(Ge=St,tt):Ge},tt.size=function(St){return arguments.length?(Qe=!1,Me=+St[0],Ve=+St[1],tt):Qe?null:[Me,Ve]},tt.nodeSize=function(St){return arguments.length?(Qe=!0,Me=+St[0],Ve=+St[1],tt):Qe?[Me,Ve]:null},tt}function h(Ge){var Me=0,Ve=Ge.children,Qe=Ve&&Ve.length;if(!Qe)Me=1;else for(;--Qe>=0;)Me+=Ve[Qe].value;Ge.value=Me}function s(){return this.eachAfter(h)}function o(Ge){var Me=this,Ve,Qe=[Me],tt,St,wt;do for(Ve=Qe.reverse(),Qe=[];Me=Ve.pop();)if(Ge(Me),tt=Me.children,tt)for(St=0,wt=tt.length;St<wt;++St)Qe.push(tt[St]);while(Qe.length);return this}function y(Ge){for(var Me=this,Ve=[Me],Qe,tt;Me=Ve.pop();)if(Ge(Me),Qe=Me.children,Qe)for(tt=Qe.length-1;tt>=0;--tt)Ve.push(Qe[tt]);return this}function d(Ge){for(var Me=this,Ve=[Me],Qe=[],tt,St,wt;Me=Ve.pop();)if(Qe.push(Me),tt=Me.children,tt)for(St=0,wt=tt.length;St<wt;++St)Ve.push(tt[St]);for(;Me=Qe.pop();)Ge(Me);return this}function p(Ge){return this.eachAfter(function(Me){for(var Ve=+Ge(Me.data)||0,Qe=Me.children,tt=Qe&&Qe.length;--tt>=0;)Ve+=Qe[tt].value;Me.value=Ve})}function c(Ge){return this.eachBefore(function(Me){Me.children&&Me.children.sort(Ge)})}function m(Ge){for(var Me=this,Ve=l(Me,Ge),Qe=[Me];Me!==Ve;)Me=Me.parent,Qe.push(Me);for(var tt=Qe.length;Ge!==Ve;)Qe.splice(tt,0,Ge),Ge=Ge.parent;return Qe}function l(Ge,Me){if(Ge===Me)return Ge;var Ve=Ge.ancestors(),Qe=Me.ancestors(),tt=null;for(Ge=Ve.pop(),Me=Qe.pop();Ge===Me;)tt=Ge,Ge=Ve.pop(),Me=Qe.pop();return tt}function x(){for(var Ge=this,Me=[Ge];Ge=Ge.parent;)Me.push(Ge);return Me}function u(){var Ge=[];return this.each(function(Me){Ge.push(Me)}),Ge}function A(){var Ge=[];return this.eachBefore(function(Me){Me.children||Ge.push(Me)}),Ge}function _(){var Ge=this,Me=[];return Ge.each(function(Ve){Ve!==Ge&&Me.push({source:Ve.parent,target:Ve})}),Me}function g(Ge,Me){var Ve=new E(Ge),Qe=+Ge.value&&(Ve.value=Ge.value),tt,St=[Ve],wt,Ct,jt,Bt;for(Me==null&&(Me=v);tt=St.pop();)if(Qe&&(tt.value=+tt.data.value),(Ct=Me(tt.data))&&(Bt=Ct.length))for(tt.children=new Array(Bt),jt=Bt-1;jt>=0;--jt)St.push(wt=tt.children[jt]=new E(Ct[jt])),wt.parent=tt,wt.depth=tt.depth+1;return Ve.eachBefore(S)}function b(){return g(this).eachBefore(k)}function v(Ge){return Ge.children}function k(Ge){Ge.data=Ge.data.data}function S(Ge){var Me=0;do Ge.height=Me;while((Ge=Ge.parent)&&Ge.height<++Me)}function E(Ge){this.data=Ge,this.depth=this.height=0,this.parent=null}E.prototype=g.prototype={constructor:E,count:s,each:o,eachAfter:d,eachBefore:y,sum:p,sort:c,path:m,ancestors:x,descendants:u,leaves:A,links:_,copy:b};var C=Array.prototype.slice;function F(Ge){for(var Me=Ge.length,Ve,Qe;Me;)Qe=Math.random()*Me--|0,Ve=Ge[Me],Ge[Me]=Ge[Qe],Ge[Qe]=Ve;return Ge}function I(Ge){for(var Me=0,Ve=(Ge=F(C.call(Ge))).length,Qe=[],tt,St;Me<Ve;)tt=Ge[Me],St&&O(St,tt)?++Me:(St=B(Qe=D(Qe,tt)),Me=0);return St}function D(Ge,Me){var Ve,Qe;if(z(Me,Ge))return[Me];for(Ve=0;Ve<Ge.length;++Ve)if(R(Me,Ge[Ve])&&z(Q(Ge[Ve],Me),Ge))return[Ge[Ve],Me];for(Ve=0;Ve<Ge.length-1;++Ve)for(Qe=Ve+1;Qe<Ge.length;++Qe)if(R(Q(Ge[Ve],Ge[Qe]),Me)&&R(Q(Ge[Ve],Me),Ge[Qe])&&R(Q(Ge[Qe],Me),Ge[Ve])&&z(X(Ge[Ve],Ge[Qe],Me),Ge))return[Ge[Ve],Ge[Qe],Me];throw new Error}function R(Ge,Me){var Ve=Ge.r-Me.r,Qe=Me.x-Ge.x,tt=Me.y-Ge.y;return Ve<0||Ve*Ve<Qe*Qe+tt*tt}function O(Ge,Me){var Ve=Ge.r-Me.r+1e-6,Qe=Me.x-Ge.x,tt=Me.y-Ge.y;return Ve>0&&Ve*Ve>Qe*Qe+tt*tt}function z(Ge,Me){for(var Ve=0;Ve<Me.length;++Ve)if(!O(Ge,Me[Ve]))return!1;return!0}function B(Ge){switch(Ge.length){case 1:return G(Ge[0]);case 2:return Q(Ge[0],Ge[1]);case 3:return X(Ge[0],Ge[1],Ge[2])}}function G(Ge){return{x:Ge.x,y:Ge.y,r:Ge.r}}function Q(Ge,Me){var Ve=Ge.x,Qe=Ge.y,tt=Ge.r,St=Me.x,wt=Me.y,Ct=Me.r,jt=St-Ve,Bt=wt-Qe,Wt=Ct-tt,Qt=Math.sqrt(jt*jt+Bt*Bt);return{x:(Ve+St+jt/Qt*Wt)/2,y:(Qe+wt+Bt/Qt*Wt)/2,r:(Qt+tt+Ct)/2}}function X(Ge,Me,Ve){var Qe=Ge.x,tt=Ge.y,St=Ge.r,wt=Me.x,Ct=Me.y,jt=Me.r,Bt=Ve.x,Wt=Ve.y,Qt=Ve.r,Zt=Qe-wt,cr=Qe-Bt,Xr=tt-Ct,vn=tt-Wt,en=jt-St,ut=Qt-St,ar=Qe*Qe+tt*tt-St*St,rr=ar-wt*wt-Ct*Ct+jt*jt,Kt=ar-Bt*Bt-Wt*Wt+Qt*Qt,Er=cr*Xr-Zt*vn,st=(Xr*Kt-vn*rr)/(Er*2)-Qe,et=(vn*en-Xr*ut)/Er,ht=(cr*rr-Zt*Kt)/(Er*2)-tt,vt=(Zt*ut-cr*en)/Er,kt=et*et+vt*vt-1,Vt=2*(St+st*et+ht*vt),Pe=st*st+ht*ht-St*St,ke=-(kt?(Vt+Math.sqrt(Vt*Vt-4*kt*Pe))/(2*kt):Pe/Vt);return{x:Qe+st+et*ke,y:tt+ht+vt*ke,r:ke}}function j(Ge,Me,Ve){var Qe=Ge.x-Me.x,tt,St,wt=Ge.y-Me.y,Ct,jt,Bt=Qe*Qe+wt*wt;Bt?(St=Me.r+Ve.r,St*=St,jt=Ge.r+Ve.r,jt*=jt,St>jt?(tt=(Bt+jt-St)/(2*Bt),Ct=Math.sqrt(Math.max(0,jt/Bt-tt*tt)),Ve.x=Ge.x-tt*Qe-Ct*wt,Ve.y=Ge.y-tt*wt+Ct*Qe):(tt=(Bt+St-jt)/(2*Bt),Ct=Math.sqrt(Math.max(0,St/Bt-tt*tt)),Ve.x=Me.x+tt*Qe-Ct*wt,Ve.y=Me.y+tt*wt+Ct*Qe)):(Ve.x=Me.x+Ve.r,Ve.y=Me.y)}function re(Ge,Me){var Ve=Ge.r+Me.r-1e-6,Qe=Me.x-Ge.x,tt=Me.y-Ge.y;return Ve>0&&Ve*Ve>Qe*Qe+tt*tt}function ue(Ge){var Me=Ge._,Ve=Ge.next._,Qe=Me.r+Ve.r,tt=(Me.x*Ve.r+Ve.x*Me.r)/Qe,St=(Me.y*Ve.r+Ve.y*Me.r)/Qe;return tt*tt+St*St}function K(Ge){this._=Ge,this.next=null,this.previous=null}function te(Ge){if(!(tt=Ge.length))return 0;var Me,Ve,Qe,tt,St,wt,Ct,jt,Bt,Wt,Qt;if(Me=Ge[0],Me.x=0,Me.y=0,!(tt>1))return Me.r;if(Ve=Ge[1],Me.x=-Ve.r,Ve.x=Me.r,Ve.y=0,!(tt>2))return Me.r+Ve.r;j(Ve,Me,Qe=Ge[2]),Me=new K(Me),Ve=new K(Ve),Qe=new K(Qe),Me.next=Qe.previous=Ve,Ve.next=Me.previous=Qe,Qe.next=Ve.previous=Me;e:for(Ct=3;Ct<tt;++Ct){j(Me._,Ve._,Qe=Ge[Ct]),Qe=new K(Qe),jt=Ve.next,Bt=Me.previous,Wt=Ve._.r,Qt=Me._.r;do if(Wt<=Qt){if(re(jt._,Qe._)){Ve=jt,Me.next=Ve,Ve.previous=Me,--Ct;continue e}Wt+=jt._.r,jt=jt.next}else{if(re(Bt._,Qe._)){Me=Bt,Me.next=Ve,Ve.previous=Me,--Ct;continue e}Qt+=Bt._.r,Bt=Bt.previous}while(jt!==Bt.next);for(Qe.previous=Me,Qe.next=Ve,Me.next=Ve.previous=Ve=Qe,St=ue(Me);(Qe=Qe.next)!==Ve;)(wt=ue(Qe))<St&&(Me=Qe,St=wt);Ve=Me.next}for(Me=[Ve._],Qe=Ve;(Qe=Qe.next)!==Ve;)Me.push(Qe._);for(Qe=I(Me),Ct=0;Ct<tt;++Ct)Me=Ge[Ct],Me.x-=Qe.x,Me.y-=Qe.y;return Qe.r}function Y(Ge){return te(Ge),Ge}function H(Ge){return Ge==null?null:ee(Ge)}function ee(Ge){if(typeof Ge!="function")throw new Error;return Ge}function ne(){return 0}function Z(Ge){return function(){return Ge}}function q(Ge){return Math.sqrt(Ge.value)}function ie(){var Ge=null,Me=1,Ve=1,Qe=ne;function tt(St){return St.x=Me/2,St.y=Ve/2,Ge?St.eachBefore(se(Ge)).eachAfter(ae(Qe,.5)).eachBefore(oe(1)):St.eachBefore(se(q)).eachAfter(ae(ne,1)).eachAfter(ae(Qe,St.r/Math.min(Me,Ve))).eachBefore(oe(Math.min(Me,Ve)/(2*St.r))),St}return tt.radius=function(St){return arguments.length?(Ge=H(St),tt):Ge},tt.size=function(St){return arguments.length?(Me=+St[0],Ve=+St[1],tt):[Me,Ve]},tt.padding=function(St){return arguments.length?(Qe=typeof St=="function"?St:Z(+St),tt):Qe},tt}function se(Ge){return function(Me){Me.children||(Me.r=Math.max(0,+Ge(Me)||0))}}function ae(Ge,Me){return function(Ve){if(Qe=Ve.children){var Qe,tt,St=Qe.length,wt=Ge(Ve)*Me||0,Ct;if(wt)for(tt=0;tt<St;++tt)Qe[tt].r+=wt;if(Ct=te(Qe),wt)for(tt=0;tt<St;++tt)Qe[tt].r-=wt;Ve.r=Ct+wt}}}function oe(Ge){return function(Me){var Ve=Me.parent;Me.r*=Ge,Ve&&(Me.x=Ve.x+Ge*Me.x,Me.y=Ve.y+Ge*Me.y)}}function be(Ge){Ge.x0=Math.round(Ge.x0),Ge.y0=Math.round(Ge.y0),Ge.x1=Math.round(Ge.x1),Ge.y1=Math.round(Ge.y1)}function ce(Ge,Me,Ve,Qe,tt){for(var St=Ge.children,wt,Ct=-1,jt=St.length,Bt=Ge.value&&(Qe-Me)/Ge.value;++Ct<jt;)wt=St[Ct],wt.y0=Ve,wt.y1=tt,wt.x0=Me,wt.x1=Me+=wt.value*Bt}function de(){var Ge=1,Me=1,Ve=0,Qe=!1;function tt(wt){var Ct=wt.height+1;return wt.x0=wt.y0=Ve,wt.x1=Ge,wt.y1=Me/Ct,wt.eachBefore(St(Me,Ct)),Qe&&wt.eachBefore(be),wt}function St(wt,Ct){return function(jt){jt.children&&ce(jt,jt.x0,wt*(jt.depth+1)/Ct,jt.x1,wt*(jt.depth+2)/Ct);var Bt=jt.x0,Wt=jt.y0,Qt=jt.x1-Ve,Zt=jt.y1-Ve;Qt<Bt&&(Bt=Qt=(Bt+Qt)/2),Zt<Wt&&(Wt=Zt=(Wt+Zt)/2),jt.x0=Bt,jt.y0=Wt,jt.x1=Qt,jt.y1=Zt}}return tt.round=function(wt){return arguments.length?(Qe=!!wt,tt):Qe},tt.size=function(wt){return arguments.length?(Ge=+wt[0],Me=+wt[1],tt):[Ge,Me]},tt.padding=function(wt){return arguments.length?(Ve=+wt,tt):Ve},tt}var ye="$",ge={depth:-1},me={};function Se(Ge){return Ge.id}function Le(Ge){return Ge.parentId}function Oe(){var Ge=Se,Me=Le;function Ve(Qe){var tt,St,wt=Qe.length,Ct,jt,Bt,Wt=new Array(wt),Qt,Zt,cr={};for(St=0;St<wt;++St)tt=Qe[St],Bt=Wt[St]=new E(tt),(Qt=Ge(tt,St,Qe))!=null&&(Qt+="")&&(Zt=ye+(Bt.id=Qt),cr[Zt]=Zt in cr?me:Bt);for(St=0;St<wt;++St)if(Bt=Wt[St],Qt=Me(Qe[St],St,Qe),Qt==null||!(Qt+="")){if(Ct)throw new Error("multiple roots");Ct=Bt}else{if(jt=cr[ye+Qt],!jt)throw new Error("missing: "+Qt);if(jt===me)throw new Error("ambiguous: "+Qt);jt.children?jt.children.push(Bt):jt.children=[Bt],Bt.parent=jt}if(!Ct)throw new Error("no root");if(Ct.parent=ge,Ct.eachBefore(function(Xr){Xr.depth=Xr.parent.depth+1,--wt}).eachBefore(S),Ct.parent=null,wt>0)throw new Error("cycle");return Ct}return Ve.id=function(Qe){return arguments.length?(Ge=ee(Qe),Ve):Ge},Ve.parentId=function(Qe){return arguments.length?(Me=ee(Qe),Ve):Me},Ve}function we(Ge,Me){return Ge.parent===Me.parent?1:2}function Ce(Ge){var Me=Ge.children;return Me?Me[0]:Ge.t}function Ke(Ge){var Me=Ge.children;return Me?Me[Me.length-1]:Ge.t}function Ye(Ge,Me,Ve){var Qe=Ve/(Me.i-Ge.i);Me.c-=Qe,Me.s+=Ve,Ge.c+=Qe,Me.z+=Ve,Me.m+=Ve}function Fe(Ge){for(var Me=0,Ve=0,Qe=Ge.children,tt=Qe.length,St;--tt>=0;)St=Qe[tt],St.z+=Me,St.m+=Me,Me+=St.s+(Ve+=St.c)}function Re(Ge,Me,Ve){return Ge.a.parent===Me.parent?Ge.a:Ve}function je(Ge,Me){this._=Ge,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=Me}je.prototype=Object.create(E.prototype);function xt(Ge){for(var Me=new je(Ge,0),Ve,Qe=[Me],tt,St,wt,Ct;Ve=Qe.pop();)if(St=Ve._.children)for(Ve.children=new Array(Ct=St.length),wt=Ct-1;wt>=0;--wt)Qe.push(tt=Ve.children[wt]=new je(St[wt],wt)),tt.parent=Ve;return(Me.parent=new je(null,0)).children=[Me],Me}function Nt(){var Ge=we,Me=1,Ve=1,Qe=null;function tt(Bt){var Wt=xt(Bt);if(Wt.eachAfter(St),Wt.parent.m=-Wt.z,Wt.eachBefore(wt),Qe)Bt.eachBefore(jt);else{var Qt=Bt,Zt=Bt,cr=Bt;Bt.eachBefore(function(ar){ar.x<Qt.x&&(Qt=ar),ar.x>Zt.x&&(Zt=ar),ar.depth>cr.depth&&(cr=ar)});var Xr=Qt===Zt?1:Ge(Qt,Zt)/2,vn=Xr-Qt.x,en=Me/(Zt.x+Xr+vn),ut=Ve/(cr.depth||1);Bt.eachBefore(function(ar){ar.x=(ar.x+vn)*en,ar.y=ar.depth*ut})}return Bt}function St(Bt){var Wt=Bt.children,Qt=Bt.parent.children,Zt=Bt.i?Qt[Bt.i-1]:null;if(Wt){Fe(Bt);var cr=(Wt[0].z+Wt[Wt.length-1].z)/2;Zt?(Bt.z=Zt.z+Ge(Bt._,Zt._),Bt.m=Bt.z-cr):Bt.z=cr}else Zt&&(Bt.z=Zt.z+Ge(Bt._,Zt._));Bt.parent.A=Ct(Bt,Zt,Bt.parent.A||Qt[0])}function wt(Bt){Bt._.x=Bt.z+Bt.parent.m,Bt.m+=Bt.parent.m}function Ct(Bt,Wt,Qt){if(Wt){for(var Zt=Bt,cr=Bt,Xr=Wt,vn=Zt.parent.children[0],en=Zt.m,ut=cr.m,ar=Xr.m,rr=vn.m,Kt;Xr=Ke(Xr),Zt=Ce(Zt),Xr&&Zt;)vn=Ce(vn),cr=Ke(cr),cr.a=Bt,Kt=Xr.z+ar-Zt.z-en+Ge(Xr._,Zt._),Kt>0&&(Ye(Re(Xr,Bt,Qt),Bt,Kt),en+=Kt,ut+=Kt),ar+=Xr.m,en+=Zt.m,rr+=vn.m,ut+=cr.m;Xr&&!Ke(cr)&&(cr.t=Xr,cr.m+=ar-ut),Zt&&!Ce(vn)&&(vn.t=Zt,vn.m+=en-rr,Qt=Bt)}return Qt}function jt(Bt){Bt.x*=Me,Bt.y=Bt.depth*Ve}return tt.separation=function(Bt){return arguments.length?(Ge=Bt,tt):Ge},tt.size=function(Bt){return arguments.length?(Qe=!1,Me=+Bt[0],Ve=+Bt[1],tt):Qe?null:[Me,Ve]},tt.nodeSize=function(Bt){return arguments.length?(Qe=!0,Me=+Bt[0],Ve=+Bt[1],tt):Qe?[Me,Ve]:null},tt}function tr(Ge,Me,Ve,Qe,tt){for(var St=Ge.children,wt,Ct=-1,jt=St.length,Bt=Ge.value&&(tt-Ve)/Ge.value;++Ct<jt;)wt=St[Ct],wt.x0=Me,wt.x1=Qe,wt.y0=Ve,wt.y1=Ve+=wt.value*Bt}var Ht=(1+Math.sqrt(5))/2;function Pt(Ge,Me,Ve,Qe,tt,St){for(var wt=[],Ct=Me.children,jt,Bt,Wt=0,Qt=0,Zt=Ct.length,cr,Xr,vn=Me.value,en,ut,ar,rr,Kt,Er,st;Wt<Zt;){cr=tt-Ve,Xr=St-Qe;do en=Ct[Qt++].value;while(!en&&Qt<Zt);for(ut=ar=en,Er=Math.max(Xr/cr,cr/Xr)/(vn*Ge),st=en*en*Er,Kt=Math.max(ar/st,st/ut);Qt<Zt;++Qt){if(en+=Bt=Ct[Qt].value,Bt<ut&&(ut=Bt),Bt>ar&&(ar=Bt),st=en*en*Er,rr=Math.max(ar/st,st/ut),rr>Kt){en-=Bt;break}Kt=rr}wt.push(jt={value:en,dice:cr<Xr,children:Ct.slice(Wt,Qt)}),jt.dice?ce(jt,Ve,Qe,tt,vn?Qe+=Xr*en/vn:St):tr(jt,Ve,Qe,vn?Ve+=cr*en/vn:tt,St),vn-=en,Wt=Qt}return wt}var $t=function Ge(Me){function Ve(Qe,tt,St,wt,Ct){Pt(Me,Qe,tt,St,wt,Ct)}return Ve.ratio=function(Qe){return Ge((Qe=+Qe)>1?Qe:1)},Ve}(Ht);function Ut(){var Ge=$t,Me=!1,Ve=1,Qe=1,tt=[0],St=ne,wt=ne,Ct=ne,jt=ne,Bt=ne;function Wt(Zt){return Zt.x0=Zt.y0=0,Zt.x1=Ve,Zt.y1=Qe,Zt.eachBefore(Qt),tt=[0],Me&&Zt.eachBefore(be),Zt}function Qt(Zt){var cr=tt[Zt.depth],Xr=Zt.x0+cr,vn=Zt.y0+cr,en=Zt.x1-cr,ut=Zt.y1-cr;en<Xr&&(Xr=en=(Xr+en)/2),ut<vn&&(vn=ut=(vn+ut)/2),Zt.x0=Xr,Zt.y0=vn,Zt.x1=en,Zt.y1=ut,Zt.children&&(cr=tt[Zt.depth+1]=St(Zt)/2,Xr+=Bt(Zt)-cr,vn+=wt(Zt)-cr,en-=Ct(Zt)-cr,ut-=jt(Zt)-cr,en<Xr&&(Xr=en=(Xr+en)/2),ut<vn&&(vn=ut=(vn+ut)/2),Ge(Zt,Xr,vn,en,ut))}return Wt.round=function(Zt){return arguments.length?(Me=!!Zt,Wt):Me},Wt.size=function(Zt){return arguments.length?(Ve=+Zt[0],Qe=+Zt[1],Wt):[Ve,Qe]},Wt.tile=function(Zt){return arguments.length?(Ge=ee(Zt),Wt):Ge},Wt.padding=function(Zt){return arguments.length?Wt.paddingInner(Zt).paddingOuter(Zt):Wt.paddingInner()},Wt.paddingInner=function(Zt){return arguments.length?(St=typeof Zt=="function"?Zt:Z(+Zt),Wt):St},Wt.paddingOuter=function(Zt){return arguments.length?Wt.paddingTop(Zt).paddingRight(Zt).paddingBottom(Zt).paddingLeft(Zt):Wt.paddingTop()},Wt.paddingTop=function(Zt){return arguments.length?(wt=typeof Zt=="function"?Zt:Z(+Zt),Wt):wt},Wt.paddingRight=function(Zt){return arguments.length?(Ct=typeof Zt=="function"?Zt:Z(+Zt),Wt):Ct},Wt.paddingBottom=function(Zt){return arguments.length?(jt=typeof Zt=="function"?Zt:Z(+Zt),Wt):jt},Wt.paddingLeft=function(Zt){return arguments.length?(Bt=typeof Zt=="function"?Zt:Z(+Zt),Wt):Bt},Wt}function Lt(Ge,Me,Ve,Qe,tt){var St=Ge.children,wt,Ct=St.length,jt,Bt=new Array(Ct+1);for(Bt[0]=jt=wt=0;wt<Ct;++wt)Bt[wt+1]=jt+=St[wt].value;Wt(0,Ct,Ge.value,Me,Ve,Qe,tt);function Wt(Qt,Zt,cr,Xr,vn,en,ut){if(Qt>=Zt-1){var ar=St[Qt];ar.x0=Xr,ar.y0=vn,ar.x1=en,ar.y1=ut;return}for(var rr=Bt[Qt],Kt=cr/2+rr,Er=Qt+1,st=Zt-1;Er<st;){var et=Er+st>>>1;Bt[et]<Kt?Er=et+1:st=et}Kt-Bt[Er-1]<Bt[Er]-Kt&&Qt+1<Er&&--Er;var ht=Bt[Er]-rr,vt=cr-ht;if(en-Xr>ut-vn){var kt=(Xr*vt+en*ht)/cr;Wt(Qt,Er,ht,Xr,vn,kt,ut),Wt(Er,Zt,vt,kt,vn,en,ut)}else{var Vt=(vn*vt+ut*ht)/cr;Wt(Qt,Er,ht,Xr,vn,en,Vt),Wt(Er,Zt,vt,Xr,Vt,en,ut)}}}function We(Ge,Me,Ve,Qe,tt){(Ge.depth&1?tr:ce)(Ge,Me,Ve,Qe,tt)}var ot=function Ge(Me){function Ve(Qe,tt,St,wt,Ct){if((jt=Qe._squarify)&&jt.ratio===Me)for(var jt,Bt,Wt,Qt,Zt=-1,cr,Xr=jt.length,vn=Qe.value;++Zt<Xr;){for(Bt=jt[Zt],Wt=Bt.children,Qt=Bt.value=0,cr=Wt.length;Qt<cr;++Qt)Bt.value+=Wt[Qt].value;Bt.dice?ce(Bt,tt,St,wt,St+=(Ct-St)*Bt.value/vn):tr(Bt,tt,St,tt+=(wt-tt)*Bt.value/vn,Ct),vn-=Bt.value}else Qe._squarify=jt=Pt(Me,Qe,tt,St,wt,Ct),jt.ratio=Me}return Ve.ratio=function(Qe){return Ge((Qe=+Qe)>1?Qe:1)},Ve}(Ht);w.cluster=t,w.hierarchy=g,w.pack=ie,w.packEnclose=I,w.packSiblings=Y,w.partition=de,w.stratify=Oe,w.tree=Nt,w.treemap=Ut,w.treemapBinary=Lt,w.treemapDice=ce,w.treemapResquarify=ot,w.treemapSlice=tr,w.treemapSliceDice=We,w.treemapSquarify=$t,Object.defineProperty(w,"__esModule",{value:!0})})},{}],116:[function(i,U,V){(function(w,f){typeof V=="object"&&typeof U<"u"?f(V,i("d3-color")):(w=w||self,f(w.d3=w.d3||{},w.d3))})(this,function(w,f){function M(we,Ce,Ke,Ye,Fe){var Re=we*we,je=Re*we;return((1-3*we+3*Re-je)*Ce+(4-6*Re+3*je)*Ke+(1+3*we+3*Re-3*je)*Ye+je*Fe)/6}function T(we){var Ce=we.length-1;return function(Ke){var Ye=Ke<=0?Ke=0:Ke>=1?(Ke=1,Ce-1):Math.floor(Ke*Ce),Fe=we[Ye],Re=we[Ye+1],je=Ye>0?we[Ye-1]:2*Fe-Re,xt=Ye<Ce-1?we[Ye+2]:2*Re-Fe;return M((Ke-Ye/Ce)*Ce,je,Fe,Re,xt)}}function e(we){var Ce=we.length;return function(Ke){var Ye=Math.floor(((Ke%=1)<0?++Ke:Ke)*Ce),Fe=we[(Ye+Ce-1)%Ce],Re=we[Ye%Ce],je=we[(Ye+1)%Ce],xt=we[(Ye+2)%Ce];return M((Ke-Ye/Ce)*Ce,Fe,Re,je,xt)}}function a(we){return function(){return we}}function n(we,Ce){return function(Ke){return we+Ke*Ce}}function r(we,Ce,Ke){return we=Math.pow(we,Ke),Ce=Math.pow(Ce,Ke)-we,Ke=1/Ke,function(Ye){return Math.pow(we+Ye*Ce,Ke)}}function t(we,Ce){var Ke=Ce-we;return Ke?n(we,Ke>180||Ke<-180?Ke-360*Math.round(Ke/360):Ke):a(isNaN(we)?Ce:we)}function h(we){return(we=+we)==1?s:function(Ce,Ke){return Ke-Ce?r(Ce,Ke,we):a(isNaN(Ce)?Ke:Ce)}}function s(we,Ce){var Ke=Ce-we;return Ke?n(we,Ke):a(isNaN(we)?Ce:we)}var o=function we(Ce){var Ke=h(Ce);function Ye(Fe,Re){var je=Ke((Fe=f.rgb(Fe)).r,(Re=f.rgb(Re)).r),xt=Ke(Fe.g,Re.g),Nt=Ke(Fe.b,Re.b),tr=s(Fe.opacity,Re.opacity);return function(Ht){return Fe.r=je(Ht),Fe.g=xt(Ht),Fe.b=Nt(Ht),Fe.opacity=tr(Ht),Fe+""}}return Ye.gamma=we,Ye}(1);function y(we){return function(Ce){var Ke=Ce.length,Ye=new Array(Ke),Fe=new Array(Ke),Re=new Array(Ke),je,xt;for(je=0;je<Ke;++je)xt=f.rgb(Ce[je]),Ye[je]=xt.r||0,Fe[je]=xt.g||0,Re[je]=xt.b||0;return Ye=we(Ye),Fe=we(Fe),Re=we(Re),xt.opacity=1,function(Nt){return xt.r=Ye(Nt),xt.g=Fe(Nt),xt.b=Re(Nt),xt+""}}}var d=y(T),p=y(e);function c(we,Ce){Ce||(Ce=[]);var Ke=we?Math.min(Ce.length,we.length):0,Ye=Ce.slice(),Fe;return function(Re){for(Fe=0;Fe<Ke;++Fe)Ye[Fe]=we[Fe]*(1-Re)+Ce[Fe]*Re;return Ye}}function m(we){return ArrayBuffer.isView(we)&&!(we instanceof DataView)}function l(we,Ce){return(m(Ce)?c:x)(we,Ce)}function x(we,Ce){var Ke=Ce?Ce.length:0,Ye=we?Math.min(Ke,we.length):0,Fe=new Array(Ye),Re=new Array(Ke),je;for(je=0;je<Ye;++je)Fe[je]=E(we[je],Ce[je]);for(;je<Ke;++je)Re[je]=Ce[je];return function(xt){for(je=0;je<Ye;++je)Re[je]=Fe[je](xt);return Re}}function u(we,Ce){var Ke=new Date;return we=+we,Ce=+Ce,function(Ye){return Ke.setTime(we*(1-Ye)+Ce*Ye),Ke}}function A(we,Ce){return we=+we,Ce=+Ce,function(Ke){return we*(1-Ke)+Ce*Ke}}function _(we,Ce){var Ke={},Ye={},Fe;(we===null||typeof we!="object")&&(we={}),(Ce===null||typeof Ce!="object")&&(Ce={});for(Fe in Ce)Fe in we?Ke[Fe]=E(we[Fe],Ce[Fe]):Ye[Fe]=Ce[Fe];return function(Re){for(Fe in Ke)Ye[Fe]=Ke[Fe](Re);return Ye}}var g=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,b=new RegExp(g.source,"g");function v(we){return function(){return we}}function k(we){return function(Ce){return we(Ce)+""}}function S(we,Ce){var Ke=g.lastIndex=b.lastIndex=0,Ye,Fe,Re,je=-1,xt=[],Nt=[];for(we=we+"",Ce=Ce+"";(Ye=g.exec(we))&&(Fe=b.exec(Ce));)(Re=Fe.index)>Ke&&(Re=Ce.slice(Ke,Re),xt[je]?xt[je]+=Re:xt[++je]=Re),(Ye=Ye[0])===(Fe=Fe[0])?xt[je]?xt[je]+=Fe:xt[++je]=Fe:(xt[++je]=null,Nt.push({i:je,x:A(Ye,Fe)})),Ke=b.lastIndex;return Ke<Ce.length&&(Re=Ce.slice(Ke),xt[je]?xt[je]+=Re:xt[++je]=Re),xt.length<2?Nt[0]?k(Nt[0].x):v(Ce):(Ce=Nt.length,function(tr){for(var Ht=0,Pt;Ht<Ce;++Ht)xt[(Pt=Nt[Ht]).i]=Pt.x(tr);return xt.join("")})}function E(we,Ce){var Ke=typeof Ce,Ye;return Ce==null||Ke==="boolean"?a(Ce):(Ke==="number"?A:Ke==="string"?(Ye=f.color(Ce))?(Ce=Ye,o):S:Ce instanceof f.color?o:Ce instanceof Date?u:m(Ce)?c:Array.isArray(Ce)?x:typeof Ce.valueOf!="function"&&typeof Ce.toString!="function"||isNaN(Ce)?_:A)(we,Ce)}function C(we){var Ce=we.length;return function(Ke){return we[Math.max(0,Math.min(Ce-1,Math.floor(Ke*Ce)))]}}function F(we,Ce){var Ke=t(+we,+Ce);return function(Ye){var Fe=Ke(Ye);return Fe-360*Math.floor(Fe/360)}}function I(we,Ce){return we=+we,Ce=+Ce,function(Ke){return Math.round(we*(1-Ke)+Ce*Ke)}}var D=180/Math.PI,R={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function O(we,Ce,Ke,Ye,Fe,Re){var je,xt,Nt;return(je=Math.sqrt(we*we+Ce*Ce))&&(we/=je,Ce/=je),(Nt=we*Ke+Ce*Ye)&&(Ke-=we*Nt,Ye-=Ce*Nt),(xt=Math.sqrt(Ke*Ke+Ye*Ye))&&(Ke/=xt,Ye/=xt,Nt/=xt),we*Ye<Ce*Ke&&(we=-we,Ce=-Ce,Nt=-Nt,je=-je),{translateX:Fe,translateY:Re,rotate:Math.atan2(Ce,we)*D,skewX:Math.atan(Nt)*D,scaleX:je,scaleY:xt}}var z,B,G,Q;function X(we){return we==="none"?R:(z||(z=document.createElement("DIV"),B=document.documentElement,G=document.defaultView),z.style.transform=we,we=G.getComputedStyle(B.appendChild(z),null).getPropertyValue("transform"),B.removeChild(z),we=we.slice(7,-1).split(","),O(+we[0],+we[1],+we[2],+we[3],+we[4],+we[5]))}function j(we){return we==null||(Q||(Q=document.createElementNS("http://www.w3.org/2000/svg","g")),Q.setAttribute("transform",we),!(we=Q.transform.baseVal.consolidate()))?R:(we=we.matrix,O(we.a,we.b,we.c,we.d,we.e,we.f))}function re(we,Ce,Ke,Ye){function Fe(tr){return tr.length?tr.pop()+" ":""}function Re(tr,Ht,Pt,$t,Ut,Lt){if(tr!==Pt||Ht!==$t){var We=Ut.push("translate(",null,Ce,null,Ke);Lt.push({i:We-4,x:A(tr,Pt)},{i:We-2,x:A(Ht,$t)})}else(Pt||$t)&&Ut.push("translate("+Pt+Ce+$t+Ke)}function je(tr,Ht,Pt,$t){tr!==Ht?(tr-Ht>180?Ht+=360:Ht-tr>180&&(tr+=360),$t.push({i:Pt.push(Fe(Pt)+"rotate(",null,Ye)-2,x:A(tr,Ht)})):Ht&&Pt.push(Fe(Pt)+"rotate("+Ht+Ye)}function xt(tr,Ht,Pt,$t){tr!==Ht?$t.push({i:Pt.push(Fe(Pt)+"skewX(",null,Ye)-2,x:A(tr,Ht)}):Ht&&Pt.push(Fe(Pt)+"skewX("+Ht+Ye)}function Nt(tr,Ht,Pt,$t,Ut,Lt){if(tr!==Pt||Ht!==$t){var We=Ut.push(Fe(Ut)+"scale(",null,",",null,")");Lt.push({i:We-4,x:A(tr,Pt)},{i:We-2,x:A(Ht,$t)})}else(Pt!==1||$t!==1)&&Ut.push(Fe(Ut)+"scale("+Pt+","+$t+")")}return function(tr,Ht){var Pt=[],$t=[];return tr=we(tr),Ht=we(Ht),Re(tr.translateX,tr.translateY,Ht.translateX,Ht.translateY,Pt,$t),je(tr.rotate,Ht.rotate,Pt,$t),xt(tr.skewX,Ht.skewX,Pt,$t),Nt(tr.scaleX,tr.scaleY,Ht.scaleX,Ht.scaleY,Pt,$t),tr=Ht=null,function(Ut){for(var Lt=-1,We=$t.length,ot;++Lt<We;)Pt[(ot=$t[Lt]).i]=ot.x(Ut);return Pt.join("")}}}var ue=re(X,"px, ","px)","deg)"),K=re(j,", ",")",")"),te=Math.SQRT2,Y=2,H=4,ee=1e-12;function ne(we){return((we=Math.exp(we))+1/we)/2}function Z(we){return((we=Math.exp(we))-1/we)/2}function q(we){return((we=Math.exp(2*we))-1)/(we+1)}function ie(we,Ce){var Ke=we[0],Ye=we[1],Fe=we[2],Re=Ce[0],je=Ce[1],xt=Ce[2],Nt=Re-Ke,tr=je-Ye,Ht=Nt*Nt+tr*tr,Pt,$t;if(Ht<ee)$t=Math.log(xt/Fe)/te,Pt=function(Me){return[Ke+Me*Nt,Ye+Me*tr,Fe*Math.exp(te*Me*$t)]};else{var Ut=Math.sqrt(Ht),Lt=(xt*xt-Fe*Fe+H*Ht)/(2*Fe*Y*Ut),We=(xt*xt-Fe*Fe-H*Ht)/(2*xt*Y*Ut),ot=Math.log(Math.sqrt(Lt*Lt+1)-Lt),Ge=Math.log(Math.sqrt(We*We+1)-We);$t=(Ge-ot)/te,Pt=function(Me){var Ve=Me*$t,Qe=ne(ot),tt=Fe/(Y*Ut)*(Qe*q(te*Ve+ot)-Z(ot));return[Ke+tt*Nt,Ye+tt*tr,Fe*Qe/ne(te*Ve+ot)]}}return Pt.duration=$t*1e3,Pt}function se(we){return function(Ce,Ke){var Ye=we((Ce=f.hsl(Ce)).h,(Ke=f.hsl(Ke)).h),Fe=s(Ce.s,Ke.s),Re=s(Ce.l,Ke.l),je=s(Ce.opacity,Ke.opacity);return function(xt){return Ce.h=Ye(xt),Ce.s=Fe(xt),Ce.l=Re(xt),Ce.opacity=je(xt),Ce+""}}}var ae=se(t),oe=se(s);function be(we,Ce){var Ke=s((we=f.lab(we)).l,(Ce=f.lab(Ce)).l),Ye=s(we.a,Ce.a),Fe=s(we.b,Ce.b),Re=s(we.opacity,Ce.opacity);return function(je){return we.l=Ke(je),we.a=Ye(je),we.b=Fe(je),we.opacity=Re(je),we+""}}function ce(we){return function(Ce,Ke){var Ye=we((Ce=f.hcl(Ce)).h,(Ke=f.hcl(Ke)).h),Fe=s(Ce.c,Ke.c),Re=s(Ce.l,Ke.l),je=s(Ce.opacity,Ke.opacity);return function(xt){return Ce.h=Ye(xt),Ce.c=Fe(xt),Ce.l=Re(xt),Ce.opacity=je(xt),Ce+""}}}var de=ce(t),ye=ce(s);function ge(we){return function Ce(Ke){Ke=+Ke;function Ye(Fe,Re){var je=we((Fe=f.cubehelix(Fe)).h,(Re=f.cubehelix(Re)).h),xt=s(Fe.s,Re.s),Nt=s(Fe.l,Re.l),tr=s(Fe.opacity,Re.opacity);return function(Ht){return Fe.h=je(Ht),Fe.s=xt(Ht),Fe.l=Nt(Math.pow(Ht,Ke)),Fe.opacity=tr(Ht),Fe+""}}return Ye.gamma=Ce,Ye}(1)}var me=ge(t),Se=ge(s);function Le(we,Ce){for(var Ke=0,Ye=Ce.length-1,Fe=Ce[0],Re=new Array(Ye<0?0:Ye);Ke<Ye;)Re[Ke]=we(Fe,Fe=Ce[++Ke]);return function(je){var xt=Math.max(0,Math.min(Ye-1,Math.floor(je*=Ye)));return Re[xt](je-xt)}}function Oe(we,Ce){for(var Ke=new Array(Ce),Ye=0;Ye<Ce;++Ye)Ke[Ye]=we(Ye/(Ce-1));return Ke}w.interpolate=E,w.interpolateArray=l,w.interpolateBasis=T,w.interpolateBasisClosed=e,w.interpolateCubehelix=me,w.interpolateCubehelixLong=Se,w.interpolateDate=u,w.interpolateDiscrete=C,w.interpolateHcl=de,w.interpolateHclLong=ye,w.interpolateHsl=ae,w.interpolateHslLong=oe,w.interpolateHue=F,w.interpolateLab=be,w.interpolateNumber=A,w.interpolateNumberArray=c,w.interpolateObject=_,w.interpolateRgb=o,w.interpolateRgbBasis=d,w.interpolateRgbBasisClosed=p,w.interpolateRound=I,w.interpolateString=S,w.interpolateTransformCss=ue,w.interpolateTransformSvg=K,w.interpolateZoom=ie,w.piecewise=Le,w.quantize=Oe,Object.defineProperty(w,"__esModule",{value:!0})})},{"d3-color":109}],117:[function(i,U,V){(function(w,f){typeof V=="object"&&typeof U<"u"?f(V):(w=w||self,f(w.d3=w.d3||{}))})(this,function(w){var f=Math.PI,M=2*f,T=1e-6,e=M-T;function a(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function n(){return new a}a.prototype=n.prototype={constructor:a,moveTo:function(r,t){this._+="M"+(this._x0=this._x1=+r)+","+(this._y0=this._y1=+t)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(r,t){this._+="L"+(this._x1=+r)+","+(this._y1=+t)},quadraticCurveTo:function(r,t,h,s){this._+="Q"+ +r+","+ +t+","+(this._x1=+h)+","+(this._y1=+s)},bezierCurveTo:function(r,t,h,s,o,y){this._+="C"+ +r+","+ +t+","+ +h+","+ +s+","+(this._x1=+o)+","+(this._y1=+y)},arcTo:function(r,t,h,s,o){r=+r,t=+t,h=+h,s=+s,o=+o;var y=this._x1,d=this._y1,p=h-r,c=s-t,m=y-r,l=d-t,x=m*m+l*l;if(o<0)throw new Error("negative radius: "+o);if(this._x1===null)this._+="M"+(this._x1=r)+","+(this._y1=t);else if(x>T)if(!(Math.abs(l*p-c*m)>T)||!o)this._+="L"+(this._x1=r)+","+(this._y1=t);else{var u=h-y,A=s-d,_=p*p+c*c,g=u*u+A*A,b=Math.sqrt(_),v=Math.sqrt(x),k=o*Math.tan((f-Math.acos((_+x-g)/(2*b*v)))/2),S=k/v,E=k/b;Math.abs(S-1)>T&&(this._+="L"+(r+S*m)+","+(t+S*l)),this._+="A"+o+","+o+",0,0,"+ +(l*u>m*A)+","+(this._x1=r+E*p)+","+(this._y1=t+E*c)}},arc:function(r,t,h,s,o,y){r=+r,t=+t,h=+h,y=!!y;var d=h*Math.cos(s),p=h*Math.sin(s),c=r+d,m=t+p,l=1^y,x=y?s-o:o-s;if(h<0)throw new Error("negative radius: "+h);this._x1===null?this._+="M"+c+","+m:(Math.abs(this._x1-c)>T||Math.abs(this._y1-m)>T)&&(this._+="L"+c+","+m),h&&(x<0&&(x=x%M+M),x>e?this._+="A"+h+","+h+",0,1,"+l+","+(r-d)+","+(t-p)+"A"+h+","+h+",0,1,"+l+","+(this._x1=c)+","+(this._y1=m):x>T&&(this._+="A"+h+","+h+",0,"+ +(x>=f)+","+l+","+(this._x1=r+h*Math.cos(o))+","+(this._y1=t+h*Math.sin(o))))},rect:function(r,t,h,s){this._+="M"+(this._x0=this._x1=+r)+","+(this._y0=this._y1=+t)+"h"+ +h+"v"+ +s+"h"+-h+"Z"},toString:function(){return this._}},w.path=n,Object.defineProperty(w,"__esModule",{value:!0})})},{}],118:[function(i,U,V){(function(w,f){typeof V=="object"&&typeof U<"u"?f(V):(w=w||self,f(w.d3=w.d3||{}))})(this,function(w){function f(b){var v=+this._x.call(null,b),k=+this._y.call(null,b);return M(this.cover(v,k),v,k,b)}function M(b,v,k,S){if(isNaN(v)||isNaN(k))return b;var E,C=b._root,F={data:S},I=b._x0,D=b._y0,R=b._x1,O=b._y1,z,B,G,Q,X,j,re,ue;if(!C)return b._root=F,b;for(;C.length;)if((X=v>=(z=(I+R)/2))?I=z:R=z,(j=k>=(B=(D+O)/2))?D=B:O=B,E=C,!(C=C[re=j<<1|X]))return E[re]=F,b;if(G=+b._x.call(null,C.data),Q=+b._y.call(null,C.data),v===G&&k===Q)return F.next=C,E?E[re]=F:b._root=F,b;do E=E?E[re]=new Array(4):b._root=new Array(4),(X=v>=(z=(I+R)/2))?I=z:R=z,(j=k>=(B=(D+O)/2))?D=B:O=B;while((re=j<<1|X)===(ue=(Q>=B)<<1|G>=z));return E[ue]=C,E[re]=F,b}function T(b){var v,k,S=b.length,E,C,F=new Array(S),I=new Array(S),D=1/0,R=1/0,O=-1/0,z=-1/0;for(k=0;k<S;++k)isNaN(E=+this._x.call(null,v=b[k]))||isNaN(C=+this._y.call(null,v))||(F[k]=E,I[k]=C,E<D&&(D=E),E>O&&(O=E),C<R&&(R=C),C>z&&(z=C));if(D>O||R>z)return this;for(this.cover(D,R).cover(O,z),k=0;k<S;++k)M(this,F[k],I[k],b[k]);return this}function e(b,v){if(isNaN(b=+b)||isNaN(v=+v))return this;var k=this._x0,S=this._y0,E=this._x1,C=this._y1;if(isNaN(k))E=(k=Math.floor(b))+1,C=(S=Math.floor(v))+1;else{for(var F=E-k,I=this._root,D,R;k>b||b>=E||S>v||v>=C;)switch(R=(v<S)<<1|b<k,D=new Array(4),D[R]=I,I=D,F*=2,R){case 0:E=k+F,C=S+F;break;case 1:k=E-F,C=S+F;break;case 2:E=k+F,S=C-F;break;case 3:k=E-F,S=C-F;break}this._root&&this._root.length&&(this._root=I)}return this._x0=k,this._y0=S,this._x1=E,this._y1=C,this}function a(){var b=[];return this.visit(function(v){if(!v.length)do b.push(v.data);while(v=v.next)}),b}function n(b){return arguments.length?this.cover(+b[0][0],+b[0][1]).cover(+b[1][0],+b[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function r(b,v,k,S,E){this.node=b,this.x0=v,this.y0=k,this.x1=S,this.y1=E}function t(b,v,k){var S,E=this._x0,C=this._y0,F,I,D,R,O=this._x1,z=this._y1,B=[],G=this._root,Q,X;for(G&&B.push(new r(G,E,C,O,z)),k==null?k=1/0:(E=b-k,C=v-k,O=b+k,z=v+k,k*=k);Q=B.pop();)if(!(!(G=Q.node)||(F=Q.x0)>O||(I=Q.y0)>z||(D=Q.x1)<E||(R=Q.y1)<C))if(G.length){var j=(F+D)/2,re=(I+R)/2;B.push(new r(G[3],j,re,D,R),new r(G[2],F,re,j,R),new r(G[1],j,I,D,re),new r(G[0],F,I,j,re)),(X=(v>=re)<<1|b>=j)&&(Q=B[B.length-1],B[B.length-1]=B[B.length-1-X],B[B.length-1-X]=Q)}else{var ue=b-+this._x.call(null,G.data),K=v-+this._y.call(null,G.data),te=ue*ue+K*K;if(te<k){var Y=Math.sqrt(k=te);E=b-Y,C=v-Y,O=b+Y,z=v+Y,S=G.data}}return S}function h(b){if(isNaN(O=+this._x.call(null,b))||isNaN(z=+this._y.call(null,b)))return this;var v,k=this._root,S,E,C,F=this._x0,I=this._y0,D=this._x1,R=this._y1,O,z,B,G,Q,X,j,re;if(!k)return this;if(k.length)for(;;){if((Q=O>=(B=(F+D)/2))?F=B:D=B,(X=z>=(G=(I+R)/2))?I=G:R=G,v=k,!(k=k[j=X<<1|Q]))return this;if(!k.length)break;(v[j+1&3]||v[j+2&3]||v[j+3&3])&&(S=v,re=j)}for(;k.data!==b;)if(E=k,!(k=k.next))return this;return(C=k.next)&&delete k.next,E?(C?E.next=C:delete E.next,this):v?(C?v[j]=C:delete v[j],(k=v[0]||v[1]||v[2]||v[3])&&k===(v[3]||v[2]||v[1]||v[0])&&!k.length&&(S?S[re]=k:this._root=k),this):(this._root=C,this)}function s(b){for(var v=0,k=b.length;v<k;++v)this.remove(b[v]);return this}function o(){return this._root}function y(){var b=0;return this.visit(function(v){if(!v.length)do++b;while(v=v.next)}),b}function d(b){var v=[],k,S=this._root,E,C,F,I,D;for(S&&v.push(new r(S,this._x0,this._y0,this._x1,this._y1));k=v.pop();)if(!b(S=k.node,C=k.x0,F=k.y0,I=k.x1,D=k.y1)&&S.length){var R=(C+I)/2,O=(F+D)/2;(E=S[3])&&v.push(new r(E,R,O,I,D)),(E=S[2])&&v.push(new r(E,C,O,R,D)),(E=S[1])&&v.push(new r(E,R,F,I,O)),(E=S[0])&&v.push(new r(E,C,F,R,O))}return this}function p(b){var v=[],k=[],S;for(this._root&&v.push(new r(this._root,this._x0,this._y0,this._x1,this._y1));S=v.pop();){var E=S.node;if(E.length){var C,F=S.x0,I=S.y0,D=S.x1,R=S.y1,O=(F+D)/2,z=(I+R)/2;(C=E[0])&&v.push(new r(C,F,I,O,z)),(C=E[1])&&v.push(new r(C,O,I,D,z)),(C=E[2])&&v.push(new r(C,F,z,O,R)),(C=E[3])&&v.push(new r(C,O,z,D,R))}k.push(S)}for(;S=k.pop();)b(S.node,S.x0,S.y0,S.x1,S.y1);return this}function c(b){return b[0]}function m(b){return arguments.length?(this._x=b,this):this._x}function l(b){return b[1]}function x(b){return arguments.length?(this._y=b,this):this._y}function u(b,v,k){var S=new A(v==null?c:v,k==null?l:k,NaN,NaN,NaN,NaN);return b==null?S:S.addAll(b)}function A(b,v,k,S,E,C){this._x=b,this._y=v,this._x0=k,this._y0=S,this._x1=E,this._y1=C,this._root=void 0}function _(b){for(var v={data:b.data},k=v;b=b.next;)k=k.next={data:b.data};return v}var g=u.prototype=A.prototype;g.copy=function(){var b=new A(this._x,this._y,this._x0,this._y0,this._x1,this._y1),v=this._root,k,S;if(!v)return b;if(!v.length)return b._root=_(v),b;for(k=[{source:v,target:b._root=new Array(4)}];v=k.pop();)for(var E=0;E<4;++E)(S=v.source[E])&&(S.length?k.push({source:S,target:v.target[E]=new Array(4)}):v.target[E]=_(S));return b},g.add=f,g.addAll=T,g.cover=e,g.data=a,g.extent=n,g.find=t,g.remove=h,g.removeAll=s,g.root=o,g.size=y,g.visit=d,g.visitAfter=p,g.x=m,g.y=x,w.quadtree=u,Object.defineProperty(w,"__esModule",{value:!0})})},{}],119:[function(i,U,V){(function(w,f){typeof V=="object"&&typeof U<"u"?f(V,i("d3-path")):(w=w||self,f(w.d3=w.d3||{},w.d3))})(this,function(w,f){function M(it){return function(){return it}}var T=Math.abs,e=Math.atan2,a=Math.cos,n=Math.max,r=Math.min,t=Math.sin,h=Math.sqrt,s=1e-12,o=Math.PI,y=o/2,d=2*o;function p(it){return it>1?0:it<-1?o:Math.acos(it)}function c(it){return it>=1?y:it<=-1?-y:Math.asin(it)}function m(it){return it.innerRadius}function l(it){return it.outerRadius}function x(it){return it.startAngle}function u(it){return it.endAngle}function A(it){return it&&it.padAngle}function _(it,zt,qt,hr,Ur,Gr,Ir,Cr){var Kr=qt-it,Cn=hr-zt,yn=Ir-Ur,Yn=Cr-Gr,In=Yn*Kr-yn*Cn;if(!(In*In<s))return In=(yn*(zt-Gr)-Yn*(it-Ur))/In,[it+In*Kr,zt+In*Cn]}function g(it,zt,qt,hr,Ur,Gr,Ir){var Cr=it-qt,Kr=zt-hr,Cn=(Ir?Gr:-Gr)/h(Cr*Cr+Kr*Kr),yn=Cn*Kr,Yn=-Cn*Cr,In=it+yn,Jn=zt+Yn,Zn=qt+yn,ba=hr+Yn,Pa=(In+Zn)/2,xi=(Jn+ba)/2,Ka=Zn-In,ti=ba-Jn,$a=Ka*Ka+ti*ti,kr=Ur-Gr,bn=In*ba-Zn*Jn,gn=(ti<0?-1:1)*h(n(0,kr*kr*$a-bn*bn)),Ln=(bn*ti-Ka*gn)/$a,qn=(-bn*Ka-ti*gn)/$a,da=(bn*ti+Ka*gn)/$a,oa=(-bn*Ka+ti*gn)/$a,Bn=Ln-Pa,$n=qn-xi,Xa=da-Pa,gi=oa-xi;return Bn*Bn+$n*$n>Xa*Xa+gi*gi&&(Ln=da,qn=oa),{cx:Ln,cy:qn,x01:-yn,y01:-Yn,x11:Ln*(Ur/kr-1),y11:qn*(Ur/kr-1)}}function b(){var it=m,zt=l,qt=M(0),hr=null,Ur=x,Gr=u,Ir=A,Cr=null;function Kr(){var Cn,yn,Yn=+it.apply(this,arguments),In=+zt.apply(this,arguments),Jn=Ur.apply(this,arguments)-y,Zn=Gr.apply(this,arguments)-y,ba=T(Zn-Jn),Pa=Zn>Jn;if(Cr||(Cr=Cn=f.path()),In<Yn&&(yn=In,In=Yn,Yn=yn),!(In>s))Cr.moveTo(0,0);else if(ba>d-s)Cr.moveTo(In*a(Jn),In*t(Jn)),Cr.arc(0,0,In,Jn,Zn,!Pa),Yn>s&&(Cr.moveTo(Yn*a(Zn),Yn*t(Zn)),Cr.arc(0,0,Yn,Zn,Jn,Pa));else{var xi=Jn,Ka=Zn,ti=Jn,$a=Zn,kr=ba,bn=ba,gn=Ir.apply(this,arguments)/2,Ln=gn>s&&(hr?+hr.apply(this,arguments):h(Yn*Yn+In*In)),qn=r(T(In-Yn)/2,+qt.apply(this,arguments)),da=qn,oa=qn,Bn,$n;if(Ln>s){var Xa=c(Ln/Yn*t(gn)),gi=c(Ln/In*t(gn));(kr-=Xa*2)>s?(Xa*=Pa?1:-1,ti+=Xa,$a-=Xa):(kr=0,ti=$a=(Jn+Zn)/2),(bn-=gi*2)>s?(gi*=Pa?1:-1,xi+=gi,Ka-=gi):(bn=0,xi=Ka=(Jn+Zn)/2)}var Xt=In*a(xi),mr=In*t(xi),un=Yn*a($a),xn=Yn*t($a);if(qn>s){var sn=In*a(Ka),kn=In*t(Ka),Mn=Yn*a(ti),dn=Yn*t(ti),Tr;if(ba<o&&(Tr=_(Xt,mr,Mn,dn,sn,kn,un,xn))){var Ar=Xt-Tr[0],Vr=mr-Tr[1],_n=sn-Tr[0],Gn=kn-Tr[1],sa=1/t(p((Ar*_n+Vr*Gn)/(h(Ar*Ar+Vr*Vr)*h(_n*_n+Gn*Gn)))/2),En=h(Tr[0]*Tr[0]+Tr[1]*Tr[1]);da=r(qn,(Yn-En)/(sa-1)),oa=r(qn,(In-En)/(sa+1))}}bn>s?oa>s?(Bn=g(Mn,dn,Xt,mr,In,oa,Pa),$n=g(sn,kn,un,xn,In,oa,Pa),Cr.moveTo(Bn.cx+Bn.x01,Bn.cy+Bn.y01),oa<qn?Cr.arc(Bn.cx,Bn.cy,oa,e(Bn.y01,Bn.x01),e($n.y01,$n.x01),!Pa):(Cr.arc(Bn.cx,Bn.cy,oa,e(Bn.y01,Bn.x01),e(Bn.y11,Bn.x11),!Pa),Cr.arc(0,0,In,e(Bn.cy+Bn.y11,Bn.cx+Bn.x11),e($n.cy+$n.y11,$n.cx+$n.x11),!Pa),Cr.arc($n.cx,$n.cy,oa,e($n.y11,$n.x11),e($n.y01,$n.x01),!Pa))):(Cr.moveTo(Xt,mr),Cr.arc(0,0,In,xi,Ka,!Pa)):Cr.moveTo(Xt,mr),!(Yn>s)||!(kr>s)?Cr.lineTo(un,xn):da>s?(Bn=g(un,xn,sn,kn,Yn,-da,Pa),$n=g(Xt,mr,Mn,dn,Yn,-da,Pa),Cr.lineTo(Bn.cx+Bn.x01,Bn.cy+Bn.y01),da<qn?Cr.arc(Bn.cx,Bn.cy,da,e(Bn.y01,Bn.x01),e($n.y01,$n.x01),!Pa):(Cr.arc(Bn.cx,Bn.cy,da,e(Bn.y01,Bn.x01),e(Bn.y11,Bn.x11),!Pa),Cr.arc(0,0,Yn,e(Bn.cy+Bn.y11,Bn.cx+Bn.x11),e($n.cy+$n.y11,$n.cx+$n.x11),Pa),Cr.arc($n.cx,$n.cy,da,e($n.y11,$n.x11),e($n.y01,$n.x01),!Pa))):Cr.arc(0,0,Yn,$a,ti,Pa)}if(Cr.closePath(),Cn)return Cr=null,Cn+""||null}return Kr.centroid=function(){var Cn=(+it.apply(this,arguments)+ +zt.apply(this,arguments))/2,yn=(+Ur.apply(this,arguments)+ +Gr.apply(this,arguments))/2-o/2;return[a(yn)*Cn,t(yn)*Cn]},Kr.innerRadius=function(Cn){return arguments.length?(it=typeof Cn=="function"?Cn:M(+Cn),Kr):it},Kr.outerRadius=function(Cn){return arguments.length?(zt=typeof Cn=="function"?Cn:M(+Cn),Kr):zt},Kr.cornerRadius=function(Cn){return arguments.length?(qt=typeof Cn=="function"?Cn:M(+Cn),Kr):qt},Kr.padRadius=function(Cn){return arguments.length?(hr=Cn==null?null:typeof Cn=="function"?Cn:M(+Cn),Kr):hr},Kr.startAngle=function(Cn){return arguments.length?(Ur=typeof Cn=="function"?Cn:M(+Cn),Kr):Ur},Kr.endAngle=function(Cn){return arguments.length?(Gr=typeof Cn=="function"?Cn:M(+Cn),Kr):Gr},Kr.padAngle=function(Cn){return arguments.length?(Ir=typeof Cn=="function"?Cn:M(+Cn),Kr):Ir},Kr.context=function(Cn){return arguments.length?(Cr=Cn==null?null:Cn,Kr):Cr},Kr}function v(it){this._context=it}v.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(it,zt){switch(it=+it,zt=+zt,this._point){case 0:this._point=1,this._line?this._context.lineTo(it,zt):this._context.moveTo(it,zt);break;case 1:this._point=2;default:this._context.lineTo(it,zt);break}}};function k(it){return new v(it)}function S(it){return it[0]}function E(it){return it[1]}function C(){var it=S,zt=E,qt=M(!0),hr=null,Ur=k,Gr=null;function Ir(Cr){var Kr,Cn=Cr.length,yn,Yn=!1,In;for(hr==null&&(Gr=Ur(In=f.path())),Kr=0;Kr<=Cn;++Kr)!(Kr<Cn&&qt(yn=Cr[Kr],Kr,Cr))===Yn&&((Yn=!Yn)?Gr.lineStart():Gr.lineEnd()),Yn&&Gr.point(+it(yn,Kr,Cr),+zt(yn,Kr,Cr));if(In)return Gr=null,In+""||null}return Ir.x=function(Cr){return arguments.length?(it=typeof Cr=="function"?Cr:M(+Cr),Ir):it},Ir.y=function(Cr){return arguments.length?(zt=typeof Cr=="function"?Cr:M(+Cr),Ir):zt},Ir.defined=function(Cr){return arguments.length?(qt=typeof Cr=="function"?Cr:M(!!Cr),Ir):qt},Ir.curve=function(Cr){return arguments.length?(Ur=Cr,hr!=null&&(Gr=Ur(hr)),Ir):Ur},Ir.context=function(Cr){return arguments.length?(Cr==null?hr=Gr=null:Gr=Ur(hr=Cr),Ir):hr},Ir}function F(){var it=S,zt=null,qt=M(0),hr=E,Ur=M(!0),Gr=null,Ir=k,Cr=null;function Kr(yn){var Yn,In,Jn,Zn=yn.length,ba,Pa=!1,xi,Ka=new Array(Zn),ti=new Array(Zn);for(Gr==null&&(Cr=Ir(xi=f.path())),Yn=0;Yn<=Zn;++Yn){if(!(Yn<Zn&&Ur(ba=yn[Yn],Yn,yn))===Pa)if(Pa=!Pa)In=Yn,Cr.areaStart(),Cr.lineStart();else{for(Cr.lineEnd(),Cr.lineStart(),Jn=Yn-1;Jn>=In;--Jn)Cr.point(Ka[Jn],ti[Jn]);Cr.lineEnd(),Cr.areaEnd()}Pa&&(Ka[Yn]=+it(ba,Yn,yn),ti[Yn]=+qt(ba,Yn,yn),Cr.point(zt?+zt(ba,Yn,yn):Ka[Yn],hr?+hr(ba,Yn,yn):ti[Yn]))}if(xi)return Cr=null,xi+""||null}function Cn(){return C().defined(Ur).curve(Ir).context(Gr)}return Kr.x=function(yn){return arguments.length?(it=typeof yn=="function"?yn:M(+yn),zt=null,Kr):it},Kr.x0=function(yn){return arguments.length?(it=typeof yn=="function"?yn:M(+yn),Kr):it},Kr.x1=function(yn){return arguments.length?(zt=yn==null?null:typeof yn=="function"?yn:M(+yn),Kr):zt},Kr.y=function(yn){return arguments.length?(qt=typeof yn=="function"?yn:M(+yn),hr=null,Kr):qt},Kr.y0=function(yn){return arguments.length?(qt=typeof yn=="function"?yn:M(+yn),Kr):qt},Kr.y1=function(yn){return arguments.length?(hr=yn==null?null:typeof yn=="function"?yn:M(+yn),Kr):hr},Kr.lineX0=Kr.lineY0=function(){return Cn().x(it).y(qt)},Kr.lineY1=function(){return Cn().x(it).y(hr)},Kr.lineX1=function(){return Cn().x(zt).y(qt)},Kr.defined=function(yn){return arguments.length?(Ur=typeof yn=="function"?yn:M(!!yn),Kr):Ur},Kr.curve=function(yn){return arguments.length?(Ir=yn,Gr!=null&&(Cr=Ir(Gr)),Kr):Ir},Kr.context=function(yn){return arguments.length?(yn==null?Gr=Cr=null:Cr=Ir(Gr=yn),Kr):Gr},Kr}function I(it,zt){return zt<it?-1:zt>it?1:zt>=it?0:NaN}function D(it){return it}function R(){var it=D,zt=I,qt=null,hr=M(0),Ur=M(d),Gr=M(0);function Ir(Cr){var Kr,Cn=Cr.length,yn,Yn,In=0,Jn=new Array(Cn),Zn=new Array(Cn),ba=+hr.apply(this,arguments),Pa=Math.min(d,Math.max(-d,Ur.apply(this,arguments)-ba)),xi,Ka=Math.min(Math.abs(Pa)/Cn,Gr.apply(this,arguments)),ti=Ka*(Pa<0?-1:1),$a;for(Kr=0;Kr<Cn;++Kr)($a=Zn[Jn[Kr]=Kr]=+it(Cr[Kr],Kr,Cr))>0&&(In+=$a);for(zt!=null?Jn.sort(function(kr,bn){return zt(Zn[kr],Zn[bn])}):qt!=null&&Jn.sort(function(kr,bn){return qt(Cr[kr],Cr[bn])}),Kr=0,Yn=In?(Pa-Cn*ti)/In:0;Kr<Cn;++Kr,ba=xi)yn=Jn[Kr],$a=Zn[yn],xi=ba+($a>0?$a*Yn:0)+ti,Zn[yn]={data:Cr[yn],index:Kr,value:$a,startAngle:ba,endAngle:xi,padAngle:Ka};return Zn}return Ir.value=function(Cr){return arguments.length?(it=typeof Cr=="function"?Cr:M(+Cr),Ir):it},Ir.sortValues=function(Cr){return arguments.length?(zt=Cr,qt=null,Ir):zt},Ir.sort=function(Cr){return arguments.length?(qt=Cr,zt=null,Ir):qt},Ir.startAngle=function(Cr){return arguments.length?(hr=typeof Cr=="function"?Cr:M(+Cr),Ir):hr},Ir.endAngle=function(Cr){return arguments.length?(Ur=typeof Cr=="function"?Cr:M(+Cr),Ir):Ur},Ir.padAngle=function(Cr){return arguments.length?(Gr=typeof Cr=="function"?Cr:M(+Cr),Ir):Gr},Ir}var O=B(k);function z(it){this._curve=it}z.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(it,zt){this._curve.point(zt*Math.sin(it),zt*-Math.cos(it))}};function B(it){function zt(qt){return new z(it(qt))}return zt._curve=it,zt}function G(it){var zt=it.curve;return it.angle=it.x,delete it.x,it.radius=it.y,delete it.y,it.curve=function(qt){return arguments.length?zt(B(qt)):zt()._curve},it}function Q(){return G(C().curve(O))}function X(){var it=F().curve(O),zt=it.curve,qt=it.lineX0,hr=it.lineX1,Ur=it.lineY0,Gr=it.lineY1;return it.angle=it.x,delete it.x,it.startAngle=it.x0,delete it.x0,it.endAngle=it.x1,delete it.x1,it.radius=it.y,delete it.y,it.innerRadius=it.y0,delete it.y0,it.outerRadius=it.y1,delete it.y1,it.lineStartAngle=function(){return G(qt())},delete it.lineX0,it.lineEndAngle=function(){return G(hr())},delete it.lineX1,it.lineInnerRadius=function(){return G(Ur())},delete it.lineY0,it.lineOuterRadius=function(){return G(Gr())},delete it.lineY1,it.curve=function(Ir){return arguments.length?zt(B(Ir)):zt()._curve},it}function j(it,zt){return[(zt=+zt)*Math.cos(it-=Math.PI/2),zt*Math.sin(it)]}var re=Array.prototype.slice;function ue(it){return it.source}function K(it){return it.target}function te(it){var zt=ue,qt=K,hr=S,Ur=E,Gr=null;function Ir(){var Cr,Kr=re.call(arguments),Cn=zt.apply(this,Kr),yn=qt.apply(this,Kr);if(Gr||(Gr=Cr=f.path()),it(Gr,+hr.apply(this,(Kr[0]=Cn,Kr)),+Ur.apply(this,Kr),+hr.apply(this,(Kr[0]=yn,Kr)),+Ur.apply(this,Kr)),Cr)return Gr=null,Cr+""||null}return Ir.source=function(Cr){return arguments.length?(zt=Cr,Ir):zt},Ir.target=function(Cr){return arguments.length?(qt=Cr,Ir):qt},Ir.x=function(Cr){return arguments.length?(hr=typeof Cr=="function"?Cr:M(+Cr),Ir):hr},Ir.y=function(Cr){return arguments.length?(Ur=typeof Cr=="function"?Cr:M(+Cr),Ir):Ur},Ir.context=function(Cr){return arguments.length?(Gr=Cr==null?null:Cr,Ir):Gr},Ir}function Y(it,zt,qt,hr,Ur){it.moveTo(zt,qt),it.bezierCurveTo(zt=(zt+hr)/2,qt,zt,Ur,hr,Ur)}function H(it,zt,qt,hr,Ur){it.moveTo(zt,qt),it.bezierCurveTo(zt,qt=(qt+Ur)/2,hr,qt,hr,Ur)}function ee(it,zt,qt,hr,Ur){var Gr=j(zt,qt),Ir=j(zt,qt=(qt+Ur)/2),Cr=j(hr,qt),Kr=j(hr,Ur);it.moveTo(Gr[0],Gr[1]),it.bezierCurveTo(Ir[0],Ir[1],Cr[0],Cr[1],Kr[0],Kr[1])}function ne(){return te(Y)}function Z(){return te(H)}function q(){var it=te(ee);return it.angle=it.x,delete it.x,it.radius=it.y,delete it.y,it}var ie={draw:function(it,zt){var qt=Math.sqrt(zt/o);it.moveTo(qt,0),it.arc(0,0,qt,0,d)}},se={draw:function(it,zt){var qt=Math.sqrt(zt/5)/2;it.moveTo(-3*qt,-qt),it.lineTo(-qt,-qt),it.lineTo(-qt,-3*qt),it.lineTo(qt,-3*qt),it.lineTo(qt,-qt),it.lineTo(3*qt,-qt),it.lineTo(3*qt,qt),it.lineTo(qt,qt),it.lineTo(qt,3*qt),it.lineTo(-qt,3*qt),it.lineTo(-qt,qt),it.lineTo(-3*qt,qt),it.closePath()}},ae=Math.sqrt(1/3),oe=ae*2,be={draw:function(it,zt){var qt=Math.sqrt(zt/oe),hr=qt*ae;it.moveTo(0,-qt),it.lineTo(hr,0),it.lineTo(0,qt),it.lineTo(-hr,0),it.closePath()}},ce=.8908130915292852,de=Math.sin(o/10)/Math.sin(7*o/10),ye=Math.sin(d/10)*de,ge=-Math.cos(d/10)*de,me={draw:function(it,zt){var qt=Math.sqrt(zt*ce),hr=ye*qt,Ur=ge*qt;it.moveTo(0,-qt),it.lineTo(hr,Ur);for(var Gr=1;Gr<5;++Gr){var Ir=d*Gr/5,Cr=Math.cos(Ir),Kr=Math.sin(Ir);it.lineTo(Kr*qt,-Cr*qt),it.lineTo(Cr*hr-Kr*Ur,Kr*hr+Cr*Ur)}it.closePath()}},Se={draw:function(it,zt){var qt=Math.sqrt(zt),hr=-qt/2;it.rect(hr,hr,qt,qt)}},Le=Math.sqrt(3),Oe={draw:function(it,zt){var qt=-Math.sqrt(zt/(Le*3));it.moveTo(0,qt*2),it.lineTo(-Le*qt,-qt),it.lineTo(Le*qt,-qt),it.closePath()}},we=-.5,Ce=Math.sqrt(3)/2,Ke=1/Math.sqrt(12),Ye=(Ke/2+1)*3,Fe={draw:function(it,zt){var qt=Math.sqrt(zt/Ye),hr=qt/2,Ur=qt*Ke,Gr=hr,Ir=qt*Ke+qt,Cr=-Gr,Kr=Ir;it.moveTo(hr,Ur),it.lineTo(Gr,Ir),it.lineTo(Cr,Kr),it.lineTo(we*hr-Ce*Ur,Ce*hr+we*Ur),it.lineTo(we*Gr-Ce*Ir,Ce*Gr+we*Ir),it.lineTo(we*Cr-Ce*Kr,Ce*Cr+we*Kr),it.lineTo(we*hr+Ce*Ur,we*Ur-Ce*hr),it.lineTo(we*Gr+Ce*Ir,we*Ir-Ce*Gr),it.lineTo(we*Cr+Ce*Kr,we*Kr-Ce*Cr),it.closePath()}},Re=[ie,se,be,Se,me,Oe,Fe];function je(){var it=M(ie),zt=M(64),qt=null;function hr(){var Ur;if(qt||(qt=Ur=f.path()),it.apply(this,arguments).draw(qt,+zt.apply(this,arguments)),Ur)return qt=null,Ur+""||null}return hr.type=function(Ur){return arguments.length?(it=typeof Ur=="function"?Ur:M(Ur),hr):it},hr.size=function(Ur){return arguments.length?(zt=typeof Ur=="function"?Ur:M(+Ur),hr):zt},hr.context=function(Ur){return arguments.length?(qt=Ur==null?null:Ur,hr):qt},hr}function xt(){}function Nt(it,zt,qt){it._context.bezierCurveTo((2*it._x0+it._x1)/3,(2*it._y0+it._y1)/3,(it._x0+2*it._x1)/3,(it._y0+2*it._y1)/3,(it._x0+4*it._x1+zt)/6,(it._y0+4*it._y1+qt)/6)}function tr(it){this._context=it}tr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Nt(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(it,zt){switch(it=+it,zt=+zt,this._point){case 0:this._point=1,this._line?this._context.lineTo(it,zt):this._context.moveTo(it,zt);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Nt(this,it,zt);break}this._x0=this._x1,this._x1=it,this._y0=this._y1,this._y1=zt}};function Ht(it){return new tr(it)}function Pt(it){this._context=it}Pt.prototype={areaStart:xt,areaEnd:xt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(it,zt){switch(it=+it,zt=+zt,this._point){case 0:this._point=1,this._x2=it,this._y2=zt;break;case 1:this._point=2,this._x3=it,this._y3=zt;break;case 2:this._point=3,this._x4=it,this._y4=zt,this._context.moveTo((this._x0+4*this._x1+it)/6,(this._y0+4*this._y1+zt)/6);break;default:Nt(this,it,zt);break}this._x0=this._x1,this._x1=it,this._y0=this._y1,this._y1=zt}};function $t(it){return new Pt(it)}function Ut(it){this._context=it}Ut.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(it,zt){switch(it=+it,zt=+zt,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var qt=(this._x0+4*this._x1+it)/6,hr=(this._y0+4*this._y1+zt)/6;this._line?this._context.lineTo(qt,hr):this._context.moveTo(qt,hr);break;case 3:this._point=4;default:Nt(this,it,zt);break}this._x0=this._x1,this._x1=it,this._y0=this._y1,this._y1=zt}};function Lt(it){return new Ut(it)}function We(it,zt){this._basis=new tr(it),this._beta=zt}We.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var it=this._x,zt=this._y,qt=it.length-1;if(qt>0)for(var hr=it[0],Ur=zt[0],Gr=it[qt]-hr,Ir=zt[qt]-Ur,Cr=-1,Kr;++Cr<=qt;)Kr=Cr/qt,this._basis.point(this._beta*it[Cr]+(1-this._beta)*(hr+Kr*Gr),this._beta*zt[Cr]+(1-this._beta)*(Ur+Kr*Ir));this._x=this._y=null,this._basis.lineEnd()},point:function(it,zt){this._x.push(+it),this._y.push(+zt)}};var ot=function it(zt){function qt(hr){return zt===1?new tr(hr):new We(hr,zt)}return qt.beta=function(hr){return it(+hr)},qt}(.85);function Ge(it,zt,qt){it._context.bezierCurveTo(it._x1+it._k*(it._x2-it._x0),it._y1+it._k*(it._y2-it._y0),it._x2+it._k*(it._x1-zt),it._y2+it._k*(it._y1-qt),it._x2,it._y2)}function Me(it,zt){this._context=it,this._k=(1-zt)/6}Me.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Ge(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(it,zt){switch(it=+it,zt=+zt,this._point){case 0:this._point=1,this._line?this._context.lineTo(it,zt):this._context.moveTo(it,zt);break;case 1:this._point=2,this._x1=it,this._y1=zt;break;case 2:this._point=3;default:Ge(this,it,zt);break}this._x0=this._x1,this._x1=this._x2,this._x2=it,this._y0=this._y1,this._y1=this._y2,this._y2=zt}};var Ve=function it(zt){function qt(hr){return new Me(hr,zt)}return qt.tension=function(hr){return it(+hr)},qt}(0);function Qe(it,zt){this._context=it,this._k=(1-zt)/6}Qe.prototype={areaStart:xt,areaEnd:xt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(it,zt){switch(it=+it,zt=+zt,this._point){case 0:this._point=1,this._x3=it,this._y3=zt;break;case 1:this._point=2,this._context.moveTo(this._x4=it,this._y4=zt);break;case 2:this._point=3,this._x5=it,this._y5=zt;break;default:Ge(this,it,zt);break}this._x0=this._x1,this._x1=this._x2,this._x2=it,this._y0=this._y1,this._y1=this._y2,this._y2=zt}};var tt=function it(zt){function qt(hr){return new Qe(hr,zt)}return qt.tension=function(hr){return it(+hr)},qt}(0);function St(it,zt){this._context=it,this._k=(1-zt)/6}St.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(it,zt){switch(it=+it,zt=+zt,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ge(this,it,zt);break}this._x0=this._x1,this._x1=this._x2,this._x2=it,this._y0=this._y1,this._y1=this._y2,this._y2=zt}};var wt=function it(zt){function qt(hr){return new St(hr,zt)}return qt.tension=function(hr){return it(+hr)},qt}(0);function Ct(it,zt,qt){var hr=it._x1,Ur=it._y1,Gr=it._x2,Ir=it._y2;if(it._l01_a>s){var Cr=2*it._l01_2a+3*it._l01_a*it._l12_a+it._l12_2a,Kr=3*it._l01_a*(it._l01_a+it._l12_a);hr=(hr*Cr-it._x0*it._l12_2a+it._x2*it._l01_2a)/Kr,Ur=(Ur*Cr-it._y0*it._l12_2a+it._y2*it._l01_2a)/Kr}if(it._l23_a>s){var Cn=2*it._l23_2a+3*it._l23_a*it._l12_a+it._l12_2a,yn=3*it._l23_a*(it._l23_a+it._l12_a);Gr=(Gr*Cn+it._x1*it._l23_2a-zt*it._l12_2a)/yn,Ir=(Ir*Cn+it._y1*it._l23_2a-qt*it._l12_2a)/yn}it._context.bezierCurveTo(hr,Ur,Gr,Ir,it._x2,it._y2)}function jt(it,zt){this._context=it,this._alpha=zt}jt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(it,zt){if(it=+it,zt=+zt,this._point){var qt=this._x2-it,hr=this._y2-zt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(qt*qt+hr*hr,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(it,zt):this._context.moveTo(it,zt);break;case 1:this._point=2;break;case 2:this._point=3;default:Ct(this,it,zt);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=it,this._y0=this._y1,this._y1=this._y2,this._y2=zt}};var Bt=function it(zt){function qt(hr){return zt?new jt(hr,zt):new Me(hr,0)}return qt.alpha=function(hr){return it(+hr)},qt}(.5);function Wt(it,zt){this._context=it,this._alpha=zt}Wt.prototype={areaStart:xt,areaEnd:xt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(it,zt){if(it=+it,zt=+zt,this._point){var qt=this._x2-it,hr=this._y2-zt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(qt*qt+hr*hr,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=it,this._y3=zt;break;case 1:this._point=2,this._context.moveTo(this._x4=it,this._y4=zt);break;case 2:this._point=3,this._x5=it,this._y5=zt;break;default:Ct(this,it,zt);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=it,this._y0=this._y1,this._y1=this._y2,this._y2=zt}};var Qt=function it(zt){function qt(hr){return zt?new Wt(hr,zt):new Qe(hr,0)}return qt.alpha=function(hr){return it(+hr)},qt}(.5);function Zt(it,zt){this._context=it,this._alpha=zt}Zt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(it,zt){if(it=+it,zt=+zt,this._point){var qt=this._x2-it,hr=this._y2-zt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(qt*qt+hr*hr,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ct(this,it,zt);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=it,this._y0=this._y1,this._y1=this._y2,this._y2=zt}};var cr=function it(zt){function qt(hr){return zt?new Zt(hr,zt):new St(hr,0)}return qt.alpha=function(hr){return it(+hr)},qt}(.5);function Xr(it){this._context=it}Xr.prototype={areaStart:xt,areaEnd:xt,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(it,zt){it=+it,zt=+zt,this._point?this._context.lineTo(it,zt):(this._point=1,this._context.moveTo(it,zt))}};function vn(it){return new Xr(it)}function en(it){return it<0?-1:1}function ut(it,zt,qt){var hr=it._x1-it._x0,Ur=zt-it._x1,Gr=(it._y1-it._y0)/(hr||Ur<0&&-0),Ir=(qt-it._y1)/(Ur||hr<0&&-0),Cr=(Gr*Ur+Ir*hr)/(hr+Ur);return(en(Gr)+en(Ir))*Math.min(Math.abs(Gr),Math.abs(Ir),.5*Math.abs(Cr))||0}function ar(it,zt){var qt=it._x1-it._x0;return qt?(3*(it._y1-it._y0)/qt-zt)/2:zt}function rr(it,zt,qt){var hr=it._x0,Ur=it._y0,Gr=it._x1,Ir=it._y1,Cr=(Gr-hr)/3;it._context.bezierCurveTo(hr+Cr,Ur+Cr*zt,Gr-Cr,Ir-Cr*qt,Gr,Ir)}function Kt(it){this._context=it}Kt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:rr(this,this._t0,ar(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(it,zt){var qt=NaN;if(it=+it,zt=+zt,!(it===this._x1&&zt===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(it,zt):this._context.moveTo(it,zt);break;case 1:this._point=2;break;case 2:this._point=3,rr(this,ar(this,qt=ut(this,it,zt)),qt);break;default:rr(this,this._t0,qt=ut(this,it,zt));break}this._x0=this._x1,this._x1=it,this._y0=this._y1,this._y1=zt,this._t0=qt}}};function Er(it){this._context=new st(it)}(Er.prototype=Object.create(Kt.prototype)).point=function(it,zt){Kt.prototype.point.call(this,zt,it)};function st(it){this._context=it}st.prototype={moveTo:function(it,zt){this._context.moveTo(zt,it)},closePath:function(){this._context.closePath()},lineTo:function(it,zt){this._context.lineTo(zt,it)},bezierCurveTo:function(it,zt,qt,hr,Ur,Gr){this._context.bezierCurveTo(zt,it,hr,qt,Gr,Ur)}};function et(it){return new Kt(it)}function ht(it){return new Er(it)}function vt(it){this._context=it}vt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var it=this._x,zt=this._y,qt=it.length;if(qt)if(this._line?this._context.lineTo(it[0],zt[0]):this._context.moveTo(it[0],zt[0]),qt===2)this._context.lineTo(it[1],zt[1]);else for(var hr=kt(it),Ur=kt(zt),Gr=0,Ir=1;Ir<qt;++Gr,++Ir)this._context.bezierCurveTo(hr[0][Gr],Ur[0][Gr],hr[1][Gr],Ur[1][Gr],it[Ir],zt[Ir]);(this._line||this._line!==0&&qt===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(it,zt){this._x.push(+it),this._y.push(+zt)}};function kt(it){var zt,qt=it.length-1,hr,Ur=new Array(qt),Gr=new Array(qt),Ir=new Array(qt);for(Ur[0]=0,Gr[0]=2,Ir[0]=it[0]+2*it[1],zt=1;zt<qt-1;++zt)Ur[zt]=1,Gr[zt]=4,Ir[zt]=4*it[zt]+2*it[zt+1];for(Ur[qt-1]=2,Gr[qt-1]=7,Ir[qt-1]=8*it[qt-1]+it[qt],zt=1;zt<qt;++zt)hr=Ur[zt]/Gr[zt-1],Gr[zt]-=hr,Ir[zt]-=hr*Ir[zt-1];for(Ur[qt-1]=Ir[qt-1]/Gr[qt-1],zt=qt-2;zt>=0;--zt)Ur[zt]=(Ir[zt]-Ur[zt+1])/Gr[zt];for(Gr[qt-1]=(it[qt]+Ur[qt-1])/2,zt=0;zt<qt-1;++zt)Gr[zt]=2*it[zt+1]-Ur[zt+1];return[Ur,Gr]}function Vt(it){return new vt(it)}function Pe(it,zt){this._context=it,this._t=zt}Pe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(it,zt){switch(it=+it,zt=+zt,this._point){case 0:this._point=1,this._line?this._context.lineTo(it,zt):this._context.moveTo(it,zt);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,zt),this._context.lineTo(it,zt);else{var qt=this._x*(1-this._t)+it*this._t;this._context.lineTo(qt,this._y),this._context.lineTo(qt,zt)}break}}this._x=it,this._y=zt}};function ke(it){return new Pe(it,.5)}function lt(it){return new Pe(it,0)}function ft(it){return new Pe(it,1)}function yt(it,zt){if((Ir=it.length)>1)for(var qt=1,hr,Ur,Gr=it[zt[0]],Ir,Cr=Gr.length;qt<Ir;++qt)for(Ur=Gr,Gr=it[zt[qt]],hr=0;hr<Cr;++hr)Gr[hr][1]+=Gr[hr][0]=isNaN(Ur[hr][1])?Ur[hr][0]:Ur[hr][1]}function Rt(it){for(var zt=it.length,qt=new Array(zt);--zt>=0;)qt[zt]=zt;return qt}function _t(it,zt){return it[zt]}function Dt(){var it=M([]),zt=Rt,qt=yt,hr=_t;function Ur(Gr){var Ir=it.apply(this,arguments),Cr,Kr=Gr.length,Cn=Ir.length,yn=new Array(Cn),Yn;for(Cr=0;Cr<Cn;++Cr){for(var In=Ir[Cr],Jn=yn[Cr]=new Array(Kr),Zn=0,ba;Zn<Kr;++Zn)Jn[Zn]=ba=[0,+hr(Gr[Zn],In,Zn,Gr)],ba.data=Gr[Zn];Jn.key=In}for(Cr=0,Yn=zt(yn);Cr<Cn;++Cr)yn[Yn[Cr]].index=Cr;return qt(yn,Yn),yn}return Ur.keys=function(Gr){return arguments.length?(it=typeof Gr=="function"?Gr:M(re.call(Gr)),Ur):it},Ur.value=function(Gr){return arguments.length?(hr=typeof Gr=="function"?Gr:M(+Gr),Ur):hr},Ur.order=function(Gr){return arguments.length?(zt=Gr==null?Rt:typeof Gr=="function"?Gr:M(re.call(Gr)),Ur):zt},Ur.offset=function(Gr){return arguments.length?(qt=Gr==null?yt:Gr,Ur):qt},Ur}function Jt(it,zt){if((hr=it.length)>0){for(var qt,hr,Ur=0,Gr=it[0].length,Ir;Ur<Gr;++Ur){for(Ir=qt=0;qt<hr;++qt)Ir+=it[qt][Ur][1]||0;if(Ir)for(qt=0;qt<hr;++qt)it[qt][Ur][1]/=Ir}yt(it,zt)}}function fr(it,zt){if((Kr=it.length)>0)for(var qt,hr=0,Ur,Gr,Ir,Cr,Kr,Cn=it[zt[0]].length;hr<Cn;++hr)for(Ir=Cr=0,qt=0;qt<Kr;++qt)(Gr=(Ur=it[zt[qt]][hr])[1]-Ur[0])>0?(Ur[0]=Ir,Ur[1]=Ir+=Gr):Gr<0?(Ur[1]=Cr,Ur[0]=Cr+=Gr):(Ur[0]=0,Ur[1]=Gr)}function Rr(it,zt){if((Ur=it.length)>0){for(var qt=0,hr=it[zt[0]],Ur,Gr=hr.length;qt<Gr;++qt){for(var Ir=0,Cr=0;Ir<Ur;++Ir)Cr+=it[Ir][qt][1]||0;hr[qt][1]+=hr[qt][0]=-Cr/2}yt(it,zt)}}function Sr(it,zt){if(!(!((Ir=it.length)>0)||!((Gr=(Ur=it[zt[0]]).length)>0))){for(var qt=0,hr=1,Ur,Gr,Ir;hr<Gr;++hr){for(var Cr=0,Kr=0,Cn=0;Cr<Ir;++Cr){for(var yn=it[zt[Cr]],Yn=yn[hr][1]||0,In=yn[hr-1][1]||0,Jn=(Yn-In)/2,Zn=0;Zn<Cr;++Zn){var ba=it[zt[Zn]],Pa=ba[hr][1]||0,xi=ba[hr-1][1]||0;Jn+=Pa-xi}Kr+=Yn,Cn+=Jn*Yn}Ur[hr-1][1]+=Ur[hr-1][0]=qt,Kr&&(qt-=Cn/Kr)}Ur[hr-1][1]+=Ur[hr-1][0]=qt,yt(it,zt)}}function Pr(it){var zt=it.map(Jr);return Rt(it).sort(function(qt,hr){return zt[qt]-zt[hr]})}function Jr(it){for(var zt=-1,qt=0,hr=it.length,Ur,Gr=-1/0;++zt<hr;)(Ur=+it[zt][1])>Gr&&(Gr=Ur,qt=zt);return qt}function ur(it){var zt=it.map(_r);return Rt(it).sort(function(qt,hr){return zt[qt]-zt[hr]})}function _r(it){for(var zt=0,qt=-1,hr=it.length,Ur;++qt<hr;)(Ur=+it[qt][1])&&(zt+=Ur);return zt}function Br(it){return ur(it).reverse()}function Yr(it){var zt=it.length,qt,hr,Ur=it.map(_r),Gr=Pr(it),Ir=0,Cr=0,Kr=[],Cn=[];for(qt=0;qt<zt;++qt)hr=Gr[qt],Ir<Cr?(Ir+=Ur[hr],Kr.push(hr)):(Cr+=Ur[hr],Cn.push(hr));return Cn.reverse().concat(Kr)}function Dr(it){return Rt(it).reverse()}w.arc=b,w.area=F,w.areaRadial=X,w.curveBasis=Ht,w.curveBasisClosed=$t,w.curveBasisOpen=Lt,w.curveBundle=ot,w.curveCardinal=Ve,w.curveCardinalClosed=tt,w.curveCardinalOpen=wt,w.curveCatmullRom=Bt,w.curveCatmullRomClosed=Qt,w.curveCatmullRomOpen=cr,w.curveLinear=k,w.curveLinearClosed=vn,w.curveMonotoneX=et,w.curveMonotoneY=ht,w.curveNatural=Vt,w.curveStep=ke,w.curveStepAfter=ft,w.curveStepBefore=lt,w.line=C,w.lineRadial=Q,w.linkHorizontal=ne,w.linkRadial=q,w.linkVertical=Z,w.pie=R,w.pointRadial=j,w.radialArea=X,w.radialLine=Q,w.stack=Dt,w.stackOffsetDiverging=fr,w.stackOffsetExpand=Jt,w.stackOffsetNone=yt,w.stackOffsetSilhouette=Rr,w.stackOffsetWiggle=Sr,w.stackOrderAppearance=Pr,w.stackOrderAscending=ur,w.stackOrderDescending=Br,w.stackOrderInsideOut=Yr,w.stackOrderNone=Rt,w.stackOrderReverse=Dr,w.symbol=je,w.symbolCircle=ie,w.symbolCross=se,w.symbolDiamond=be,w.symbolSquare=Se,w.symbolStar=me,w.symbolTriangle=Oe,w.symbolWye=Fe,w.symbols=Re,Object.defineProperty(w,"__esModule",{value:!0})})},{"d3-path":117}],120:[function(i,U,V){(function(w,f){typeof V=="object"&&typeof U<"u"?f(V,i("d3-time")):(w=w||self,f(w.d3=w.d3||{},w.d3))})(this,function(w,f){function M(We){if(0<=We.y&&We.y<100){var ot=new Date(-1,We.m,We.d,We.H,We.M,We.S,We.L);return ot.setFullYear(We.y),ot}return new Date(We.y,We.m,We.d,We.H,We.M,We.S,We.L)}function T(We){if(0<=We.y&&We.y<100){var ot=new Date(Date.UTC(-1,We.m,We.d,We.H,We.M,We.S,We.L));return ot.setUTCFullYear(We.y),ot}return new Date(Date.UTC(We.y,We.m,We.d,We.H,We.M,We.S,We.L))}function e(We,ot,Ge){return{y:We,m:ot,d:Ge,H:0,M:0,S:0,L:0}}function a(We){var ot=We.dateTime,Ge=We.date,Me=We.time,Ve=We.periods,Qe=We.days,tt=We.shortDays,St=We.months,wt=We.shortMonths,Ct=y(Ve),jt=d(Ve),Bt=y(Qe),Wt=d(Qe),Qt=y(tt),Zt=d(tt),cr=y(St),Xr=d(St),vn=y(wt),en=d(wt),ut={a:ft,A:yt,b:Rt,B:_t,c:null,d:z,e:z,f:j,H:B,I:G,j:Q,L:X,m:re,M:ue,p:Dt,q:Jt,Q:je,s:xt,S:K,u:te,U:Y,V:H,w:ee,W:ne,x:null,X:null,y:Z,Y:q,Z:ie,"%":Re},ar={a:fr,A:Rr,b:Sr,B:Pr,c:null,d:se,e:se,f:de,H:ae,I:oe,j:be,L:ce,m:ye,M:ge,p:Jr,q:ur,Q:je,s:xt,S:me,u:Se,U:Le,V:Oe,w:we,W:Ce,x:null,X:null,y:Ke,Y:Ye,Z:Fe,"%":Re},rr={a:ht,A:vt,b:kt,B:Vt,c:Pe,d:v,e:v,f:I,H:S,I:S,j:k,L:F,m:b,M:E,p:et,q:g,Q:R,s:O,S:C,u:c,U:m,V:l,w:p,W:x,x:ke,X:lt,y:A,Y:u,Z:_,"%":D};ut.x=Kt(Ge,ut),ut.X=Kt(Me,ut),ut.c=Kt(ot,ut),ar.x=Kt(Ge,ar),ar.X=Kt(Me,ar),ar.c=Kt(ot,ar);function Kt(_r,Br){return function(Yr){var Dr=[],it=-1,zt=0,qt=_r.length,hr,Ur,Gr;for(Yr instanceof Date||(Yr=new Date(+Yr));++it<qt;)_r.charCodeAt(it)===37&&(Dr.push(_r.slice(zt,it)),(Ur=n[hr=_r.charAt(++it)])!=null?hr=_r.charAt(++it):Ur=hr==="e"?" ":"0",(Gr=Br[hr])&&(hr=Gr(Yr,Ur)),Dr.push(hr),zt=it+1);return Dr.push(_r.slice(zt,it)),Dr.join("")}}function Er(_r,Br){return function(Yr){var Dr=e(1900,void 0,1),it=st(Dr,_r,Yr+="",0),zt,qt;if(it!=Yr.length)return null;if("Q"in Dr)return new Date(Dr.Q);if("s"in Dr)return new Date(Dr.s*1e3+("L"in Dr?Dr.L:0));if(Br&&!("Z"in Dr)&&(Dr.Z=0),"p"in Dr&&(Dr.H=Dr.H%12+Dr.p*12),Dr.m===void 0&&(Dr.m="q"in Dr?Dr.q:0),"V"in Dr){if(Dr.V<1||Dr.V>53)return null;"w"in Dr||(Dr.w=1),"Z"in Dr?(zt=T(e(Dr.y,0,1)),qt=zt.getUTCDay(),zt=qt>4||qt===0?f.utcMonday.ceil(zt):f.utcMonday(zt),zt=f.utcDay.offset(zt,(Dr.V-1)*7),Dr.y=zt.getUTCFullYear(),Dr.m=zt.getUTCMonth(),Dr.d=zt.getUTCDate()+(Dr.w+6)%7):(zt=M(e(Dr.y,0,1)),qt=zt.getDay(),zt=qt>4||qt===0?f.timeMonday.ceil(zt):f.timeMonday(zt),zt=f.timeDay.offset(zt,(Dr.V-1)*7),Dr.y=zt.getFullYear(),Dr.m=zt.getMonth(),Dr.d=zt.getDate()+(Dr.w+6)%7)}else("W"in Dr||"U"in Dr)&&("w"in Dr||(Dr.w="u"in Dr?Dr.u%7:"W"in Dr?1:0),qt="Z"in Dr?T(e(Dr.y,0,1)).getUTCDay():M(e(Dr.y,0,1)).getDay(),Dr.m=0,Dr.d="W"in Dr?(Dr.w+6)%7+Dr.W*7-(qt+5)%7:Dr.w+Dr.U*7-(qt+6)%7);return"Z"in Dr?(Dr.H+=Dr.Z/100|0,Dr.M+=Dr.Z%100,T(Dr)):M(Dr)}}function st(_r,Br,Yr,Dr){for(var it=0,zt=Br.length,qt=Yr.length,hr,Ur;it<zt;){if(Dr>=qt)return-1;if(hr=Br.charCodeAt(it++),hr===37){if(hr=Br.charAt(it++),Ur=rr[hr in n?Br.charAt(it++):hr],!Ur||(Dr=Ur(_r,Yr,Dr))<0)return-1}else if(hr!=Yr.charCodeAt(Dr++))return-1}return Dr}function et(_r,Br,Yr){var Dr=Ct.exec(Br.slice(Yr));return Dr?(_r.p=jt[Dr[0].toLowerCase()],Yr+Dr[0].length):-1}function ht(_r,Br,Yr){var Dr=Qt.exec(Br.slice(Yr));return Dr?(_r.w=Zt[Dr[0].toLowerCase()],Yr+Dr[0].length):-1}function vt(_r,Br,Yr){var Dr=Bt.exec(Br.slice(Yr));return Dr?(_r.w=Wt[Dr[0].toLowerCase()],Yr+Dr[0].length):-1}function kt(_r,Br,Yr){var Dr=vn.exec(Br.slice(Yr));return Dr?(_r.m=en[Dr[0].toLowerCase()],Yr+Dr[0].length):-1}function Vt(_r,Br,Yr){var Dr=cr.exec(Br.slice(Yr));return Dr?(_r.m=Xr[Dr[0].toLowerCase()],Yr+Dr[0].length):-1}function Pe(_r,Br,Yr){return st(_r,ot,Br,Yr)}function ke(_r,Br,Yr){return st(_r,Ge,Br,Yr)}function lt(_r,Br,Yr){return st(_r,Me,Br,Yr)}function ft(_r){return tt[_r.getDay()]}function yt(_r){return Qe[_r.getDay()]}function Rt(_r){return wt[_r.getMonth()]}function _t(_r){return St[_r.getMonth()]}function Dt(_r){return Ve[+(_r.getHours()>=12)]}function Jt(_r){return 1+~~(_r.getMonth()/3)}function fr(_r){return tt[_r.getUTCDay()]}function Rr(_r){return Qe[_r.getUTCDay()]}function Sr(_r){return wt[_r.getUTCMonth()]}function Pr(_r){return St[_r.getUTCMonth()]}function Jr(_r){return Ve[+(_r.getUTCHours()>=12)]}function ur(_r){return 1+~~(_r.getUTCMonth()/3)}return{format:function(_r){var Br=Kt(_r+="",ut);return Br.toString=function(){return _r},Br},parse:function(_r){var Br=Er(_r+="",!1);return Br.toString=function(){return _r},Br},utcFormat:function(_r){var Br=Kt(_r+="",ar);return Br.toString=function(){return _r},Br},utcParse:function(_r){var Br=Er(_r+="",!0);return Br.toString=function(){return _r},Br}}}var n={"-":"",_:" ",0:"0"},r=/^\s*\d+/,t=/^%/,h=/[\\^$*+?|[\]().{}]/g;function s(We,ot,Ge){var Me=We<0?"-":"",Ve=(Me?-We:We)+"",Qe=Ve.length;return Me+(Qe<Ge?new Array(Ge-Qe+1).join(ot)+Ve:Ve)}function o(We){return We.replace(h,"\\$&")}function y(We){return new RegExp("^(?:"+We.map(o).join("|")+")","i")}function d(We){for(var ot={},Ge=-1,Me=We.length;++Ge<Me;)ot[We[Ge].toLowerCase()]=Ge;return ot}function p(We,ot,Ge){var Me=r.exec(ot.slice(Ge,Ge+1));return Me?(We.w=+Me[0],Ge+Me[0].length):-1}function c(We,ot,Ge){var Me=r.exec(ot.slice(Ge,Ge+1));return Me?(We.u=+Me[0],Ge+Me[0].length):-1}function m(We,ot,Ge){var Me=r.exec(ot.slice(Ge,Ge+2));return Me?(We.U=+Me[0],Ge+Me[0].length):-1}function l(We,ot,Ge){var Me=r.exec(ot.slice(Ge,Ge+2));return Me?(We.V=+Me[0],Ge+Me[0].length):-1}function x(We,ot,Ge){var Me=r.exec(ot.slice(Ge,Ge+2));return Me?(We.W=+Me[0],Ge+Me[0].length):-1}function u(We,ot,Ge){var Me=r.exec(ot.slice(Ge,Ge+4));return Me?(We.y=+Me[0],Ge+Me[0].length):-1}function A(We,ot,Ge){var Me=r.exec(ot.slice(Ge,Ge+2));return Me?(We.y=+Me[0]+(+Me[0]>68?1900:2e3),Ge+Me[0].length):-1}function _(We,ot,Ge){var Me=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(ot.slice(Ge,Ge+6));return Me?(We.Z=Me[1]?0:-(Me[2]+(Me[3]||"00")),Ge+Me[0].length):-1}function g(We,ot,Ge){var Me=r.exec(ot.slice(Ge,Ge+1));return Me?(We.q=Me[0]*3-3,Ge+Me[0].length):-1}function b(We,ot,Ge){var Me=r.exec(ot.slice(Ge,Ge+2));return Me?(We.m=Me[0]-1,Ge+Me[0].length):-1}function v(We,ot,Ge){var Me=r.exec(ot.slice(Ge,Ge+2));return Me?(We.d=+Me[0],Ge+Me[0].length):-1}function k(We,ot,Ge){var Me=r.exec(ot.slice(Ge,Ge+3));return Me?(We.m=0,We.d=+Me[0],Ge+Me[0].length):-1}function S(We,ot,Ge){var Me=r.exec(ot.slice(Ge,Ge+2));return Me?(We.H=+Me[0],Ge+Me[0].length):-1}function E(We,ot,Ge){var Me=r.exec(ot.slice(Ge,Ge+2));return Me?(We.M=+Me[0],Ge+Me[0].length):-1}function C(We,ot,Ge){var Me=r.exec(ot.slice(Ge,Ge+2));return Me?(We.S=+Me[0],Ge+Me[0].length):-1}function F(We,ot,Ge){var Me=r.exec(ot.slice(Ge,Ge+3));return Me?(We.L=+Me[0],Ge+Me[0].length):-1}function I(We,ot,Ge){var Me=r.exec(ot.slice(Ge,Ge+6));return Me?(We.L=Math.floor(Me[0]/1e3),Ge+Me[0].length):-1}function D(We,ot,Ge){var Me=t.exec(ot.slice(Ge,Ge+1));return Me?Ge+Me[0].length:-1}function R(We,ot,Ge){var Me=r.exec(ot.slice(Ge));return Me?(We.Q=+Me[0],Ge+Me[0].length):-1}function O(We,ot,Ge){var Me=r.exec(ot.slice(Ge));return Me?(We.s=+Me[0],Ge+Me[0].length):-1}function z(We,ot){return s(We.getDate(),ot,2)}function B(We,ot){return s(We.getHours(),ot,2)}function G(We,ot){return s(We.getHours()%12||12,ot,2)}function Q(We,ot){return s(1+f.timeDay.count(f.timeYear(We),We),ot,3)}function X(We,ot){return s(We.getMilliseconds(),ot,3)}function j(We,ot){return X(We,ot)+"000"}function re(We,ot){return s(We.getMonth()+1,ot,2)}function ue(We,ot){return s(We.getMinutes(),ot,2)}function K(We,ot){return s(We.getSeconds(),ot,2)}function te(We){var ot=We.getDay();return ot===0?7:ot}function Y(We,ot){return s(f.timeSunday.count(f.timeYear(We)-1,We),ot,2)}function H(We,ot){var Ge=We.getDay();return We=Ge>=4||Ge===0?f.timeThursday(We):f.timeThursday.ceil(We),s(f.timeThursday.count(f.timeYear(We),We)+(f.timeYear(We).getDay()===4),ot,2)}function ee(We){return We.getDay()}function ne(We,ot){return s(f.timeMonday.count(f.timeYear(We)-1,We),ot,2)}function Z(We,ot){return s(We.getFullYear()%100,ot,2)}function q(We,ot){return s(We.getFullYear()%1e4,ot,4)}function ie(We){var ot=We.getTimezoneOffset();return(ot>0?"-":(ot*=-1,"+"))+s(ot/60|0,"0",2)+s(ot%60,"0",2)}function se(We,ot){return s(We.getUTCDate(),ot,2)}function ae(We,ot){return s(We.getUTCHours(),ot,2)}function oe(We,ot){return s(We.getUTCHours()%12||12,ot,2)}function be(We,ot){return s(1+f.utcDay.count(f.utcYear(We),We),ot,3)}function ce(We,ot){return s(We.getUTCMilliseconds(),ot,3)}function de(We,ot){return ce(We,ot)+"000"}function ye(We,ot){return s(We.getUTCMonth()+1,ot,2)}function ge(We,ot){return s(We.getUTCMinutes(),ot,2)}function me(We,ot){return s(We.getUTCSeconds(),ot,2)}function Se(We){var ot=We.getUTCDay();return ot===0?7:ot}function Le(We,ot){return s(f.utcSunday.count(f.utcYear(We)-1,We),ot,2)}function Oe(We,ot){var Ge=We.getUTCDay();return We=Ge>=4||Ge===0?f.utcThursday(We):f.utcThursday.ceil(We),s(f.utcThursday.count(f.utcYear(We),We)+(f.utcYear(We).getUTCDay()===4),ot,2)}function we(We){return We.getUTCDay()}function Ce(We,ot){return s(f.utcMonday.count(f.utcYear(We)-1,We),ot,2)}function Ke(We,ot){return s(We.getUTCFullYear()%100,ot,2)}function Ye(We,ot){return s(We.getUTCFullYear()%1e4,ot,4)}function Fe(){return"+0000"}function Re(){return"%"}function je(We){return+We}function xt(We){return Math.floor(+We/1e3)}var Nt;tr({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function tr(We){return Nt=a(We),w.timeFormat=Nt.format,w.timeParse=Nt.parse,w.utcFormat=Nt.utcFormat,w.utcParse=Nt.utcParse,Nt}var Ht="%Y-%m-%dT%H:%M:%S.%LZ";function Pt(We){return We.toISOString()}var $t=Date.prototype.toISOString?Pt:w.utcFormat(Ht);function Ut(We){var ot=new Date(We);return isNaN(ot)?null:ot}var Lt=+new Date("2000-01-01T00:00:00.000Z")?Ut:w.utcParse(Ht);w.isoFormat=$t,w.isoParse=Lt,w.timeFormatDefaultLocale=tr,w.timeFormatLocale=a,Object.defineProperty(w,"__esModule",{value:!0})})},{"d3-time":121}],121:[function(i,U,V){(function(w,f){typeof V=="object"&&typeof U<"u"?f(V):(w=w||self,f(w.d3=w.d3||{}))})(this,function(w){var f=new Date,M=new Date;function T(we,Ce,Ke,Ye){function Fe(Re){return we(Re=arguments.length===0?new Date:new Date(+Re)),Re}return Fe.floor=function(Re){return we(Re=new Date(+Re)),Re},Fe.ceil=function(Re){return we(Re=new Date(Re-1)),Ce(Re,1),we(Re),Re},Fe.round=function(Re){var je=Fe(Re),xt=Fe.ceil(Re);return Re-je<xt-Re?je:xt},Fe.offset=function(Re,je){return Ce(Re=new Date(+Re),je==null?1:Math.floor(je)),Re},Fe.range=function(Re,je,xt){var Nt=[],tr;if(Re=Fe.ceil(Re),xt=xt==null?1:Math.floor(xt),!(Re<je)||!(xt>0))return Nt;do Nt.push(tr=new Date(+Re)),Ce(Re,xt),we(Re);while(tr<Re&&Re<je);return Nt},Fe.filter=function(Re){return T(function(je){if(je>=je)for(;we(je),!Re(je);)je.setTime(je-1)},function(je,xt){if(je>=je)if(xt<0)for(;++xt<=0;)for(;Ce(je,-1),!Re(je););else for(;--xt>=0;)for(;Ce(je,1),!Re(je););})},Ke&&(Fe.count=function(Re,je){return f.setTime(+Re),M.setTime(+je),we(f),we(M),Math.floor(Ke(f,M))},Fe.every=function(Re){return Re=Math.floor(Re),!isFinite(Re)||!(Re>0)?null:Re>1?Fe.filter(Ye?function(je){return Ye(je)%Re===0}:function(je){return Fe.count(0,je)%Re===0}):Fe}),Fe}var e=T(function(){},function(we,Ce){we.setTime(+we+Ce)},function(we,Ce){return Ce-we});e.every=function(we){return we=Math.floor(we),!isFinite(we)||!(we>0)?null:we>1?T(function(Ce){Ce.setTime(Math.floor(Ce/we)*we)},function(Ce,Ke){Ce.setTime(+Ce+Ke*we)},function(Ce,Ke){return(Ke-Ce)/we}):e};var a=e.range,n=1e3,r=6e4,t=36e5,h=864e5,s=6048e5,o=T(function(we){we.setTime(we-we.getMilliseconds())},function(we,Ce){we.setTime(+we+Ce*n)},function(we,Ce){return(Ce-we)/n},function(we){return we.getUTCSeconds()}),y=o.range,d=T(function(we){we.setTime(we-we.getMilliseconds()-we.getSeconds()*n)},function(we,Ce){we.setTime(+we+Ce*r)},function(we,Ce){return(Ce-we)/r},function(we){return we.getMinutes()}),p=d.range,c=T(function(we){we.setTime(we-we.getMilliseconds()-we.getSeconds()*n-we.getMinutes()*r)},function(we,Ce){we.setTime(+we+Ce*t)},function(we,Ce){return(Ce-we)/t},function(we){return we.getHours()}),m=c.range,l=T(function(we){we.setHours(0,0,0,0)},function(we,Ce){we.setDate(we.getDate()+Ce)},function(we,Ce){return(Ce-we-(Ce.getTimezoneOffset()-we.getTimezoneOffset())*r)/h},function(we){return we.getDate()-1}),x=l.range;function u(we){return T(function(Ce){Ce.setDate(Ce.getDate()-(Ce.getDay()+7-we)%7),Ce.setHours(0,0,0,0)},function(Ce,Ke){Ce.setDate(Ce.getDate()+Ke*7)},function(Ce,Ke){return(Ke-Ce-(Ke.getTimezoneOffset()-Ce.getTimezoneOffset())*r)/s})}var A=u(0),_=u(1),g=u(2),b=u(3),v=u(4),k=u(5),S=u(6),E=A.range,C=_.range,F=g.range,I=b.range,D=v.range,R=k.range,O=S.range,z=T(function(we){we.setDate(1),we.setHours(0,0,0,0)},function(we,Ce){we.setMonth(we.getMonth()+Ce)},function(we,Ce){return Ce.getMonth()-we.getMonth()+(Ce.getFullYear()-we.getFullYear())*12},function(we){return we.getMonth()}),B=z.range,G=T(function(we){we.setMonth(0,1),we.setHours(0,0,0,0)},function(we,Ce){we.setFullYear(we.getFullYear()+Ce)},function(we,Ce){return Ce.getFullYear()-we.getFullYear()},function(we){return we.getFullYear()});G.every=function(we){return!isFinite(we=Math.floor(we))||!(we>0)?null:T(function(Ce){Ce.setFullYear(Math.floor(Ce.getFullYear()/we)*we),Ce.setMonth(0,1),Ce.setHours(0,0,0,0)},function(Ce,Ke){Ce.setFullYear(Ce.getFullYear()+Ke*we)})};var Q=G.range,X=T(function(we){we.setUTCSeconds(0,0)},function(we,Ce){we.setTime(+we+Ce*r)},function(we,Ce){return(Ce-we)/r},function(we){return we.getUTCMinutes()}),j=X.range,re=T(function(we){we.setUTCMinutes(0,0,0)},function(we,Ce){we.setTime(+we+Ce*t)},function(we,Ce){return(Ce-we)/t},function(we){return we.getUTCHours()}),ue=re.range,K=T(function(we){we.setUTCHours(0,0,0,0)},function(we,Ce){we.setUTCDate(we.getUTCDate()+Ce)},function(we,Ce){return(Ce-we)/h},function(we){return we.getUTCDate()-1}),te=K.range;function Y(we){return T(function(Ce){Ce.setUTCDate(Ce.getUTCDate()-(Ce.getUTCDay()+7-we)%7),Ce.setUTCHours(0,0,0,0)},function(Ce,Ke){Ce.setUTCDate(Ce.getUTCDate()+Ke*7)},function(Ce,Ke){return(Ke-Ce)/s})}var H=Y(0),ee=Y(1),ne=Y(2),Z=Y(3),q=Y(4),ie=Y(5),se=Y(6),ae=H.range,oe=ee.range,be=ne.range,ce=Z.range,de=q.range,ye=ie.range,ge=se.range,me=T(function(we){we.setUTCDate(1),we.setUTCHours(0,0,0,0)},function(we,Ce){we.setUTCMonth(we.getUTCMonth()+Ce)},function(we,Ce){return Ce.getUTCMonth()-we.getUTCMonth()+(Ce.getUTCFullYear()-we.getUTCFullYear())*12},function(we){return we.getUTCMonth()}),Se=me.range,Le=T(function(we){we.setUTCMonth(0,1),we.setUTCHours(0,0,0,0)},function(we,Ce){we.setUTCFullYear(we.getUTCFullYear()+Ce)},function(we,Ce){return Ce.getUTCFullYear()-we.getUTCFullYear()},function(we){return we.getUTCFullYear()});Le.every=function(we){return!isFinite(we=Math.floor(we))||!(we>0)?null:T(function(Ce){Ce.setUTCFullYear(Math.floor(Ce.getUTCFullYear()/we)*we),Ce.setUTCMonth(0,1),Ce.setUTCHours(0,0,0,0)},function(Ce,Ke){Ce.setUTCFullYear(Ce.getUTCFullYear()+Ke*we)})};var Oe=Le.range;w.timeDay=l,w.timeDays=x,w.timeFriday=k,w.timeFridays=R,w.timeHour=c,w.timeHours=m,w.timeInterval=T,w.timeMillisecond=e,w.timeMilliseconds=a,w.timeMinute=d,w.timeMinutes=p,w.timeMonday=_,w.timeMondays=C,w.timeMonth=z,w.timeMonths=B,w.timeSaturday=S,w.timeSaturdays=O,w.timeSecond=o,w.timeSeconds=y,w.timeSunday=A,w.timeSundays=E,w.timeThursday=v,w.timeThursdays=D,w.timeTuesday=g,w.timeTuesdays=F,w.timeWednesday=b,w.timeWednesdays=I,w.timeWeek=A,w.timeWeeks=E,w.timeYear=G,w.timeYears=Q,w.utcDay=K,w.utcDays=te,w.utcFriday=ie,w.utcFridays=ye,w.utcHour=re,w.utcHours=ue,w.utcMillisecond=e,w.utcMilliseconds=a,w.utcMinute=X,w.utcMinutes=j,w.utcMonday=ee,w.utcMondays=oe,w.utcMonth=me,w.utcMonths=Se,w.utcSaturday=se,w.utcSaturdays=ge,w.utcSecond=o,w.utcSeconds=y,w.utcSunday=H,w.utcSundays=ae,w.utcThursday=q,w.utcThursdays=de,w.utcTuesday=ne,w.utcTuesdays=be,w.utcWednesday=Z,w.utcWednesdays=ce,w.utcWeek=H,w.utcWeeks=ae,w.utcYear=Le,w.utcYears=Oe,Object.defineProperty(w,"__esModule",{value:!0})})},{}],122:[function(i,U,V){arguments[4][121][0].apply(V,arguments)},{dup:121}],123:[function(i,U,V){(function(w,f){typeof V=="object"&&typeof U<"u"?f(V):(w=w||self,f(w.d3=w.d3||{}))})(this,function(w){var f=0,M=0,T=0,e=1e3,a,n,r=0,t=0,h=0,s=typeof performance=="object"&&performance.now?performance:Date,o=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(b){setTimeout(b,17)};function y(){return t||(o(d),t=s.now()+h)}function d(){t=0}function p(){this._call=this._time=this._next=null}p.prototype=c.prototype={constructor:p,restart:function(b,v,k){if(typeof b!="function")throw new TypeError("callback is not a function");k=(k==null?y():+k)+(v==null?0:+v),!this._next&&n!==this&&(n?n._next=this:a=this,n=this),this._call=b,this._time=k,A()},stop:function(){this._call&&(this._call=null,this._time=1/0,A())}};function c(b,v,k){var S=new p;return S.restart(b,v,k),S}function m(){y(),++f;for(var b=a,v;b;)(v=t-b._time)>=0&&b._call.call(null,v),b=b._next;--f}function l(){t=(r=s.now())+h,f=M=0;try{m()}finally{f=0,u(),t=0}}function x(){var b=s.now(),v=b-r;v>e&&(h-=v,r=b)}function u(){for(var b,v=a,k,S=1/0;v;)v._call?(S>v._time&&(S=v._time),b=v,v=v._next):(k=v._next,v._next=null,v=b?b._next=k:a=k);n=b,A(S)}function A(b){if(!f){M&&(M=clearTimeout(M));var v=b-t;v>24?(b<1/0&&(M=setTimeout(l,b-s.now()-h)),T&&(T=clearInterval(T))):(T||(r=s.now(),T=setInterval(x,e)),f=1,o(l))}}function _(b,v,k){var S=new p;return v=v==null?0:+v,S.restart(function(E){S.stop(),b(E+v)},v,k),S}function g(b,v,k){var S=new p,E=v;return v==null?(S.restart(b,v,k),S):(v=+v,k=k==null?y():+k,S.restart(function C(F){F+=E,S.restart(C,E+=v,k),b(F)},v,k),S)}w.interval=g,w.now=y,w.timeout=_,w.timer=c,w.timerFlush=m,Object.defineProperty(w,"__esModule",{value:!0})})},{}],124:[function(i,U,V){U.exports=function(){for(var w=0;w<arguments.length;w++)if(arguments[w]!==void 0)return arguments[w]}},{}],125:[function(i,U,V){U.exports=T;var w=T.canvas=document.createElement("canvas"),f=w.getContext("2d"),M=e([32,126]);T.createPairs=e,T.ascii=M;function T(a,n){Array.isArray(a)&&(a=a.join(", "));var r={},t,h=16,s=.05;n&&(n.length===2&&typeof n[0]=="number"?t=e(n):Array.isArray(n)?t=n:(n.o?t=e(n.o):n.pairs&&(t=n.pairs),n.fontSize&&(h=n.fontSize),n.threshold!=null&&(s=n.threshold))),t||(t=M),f.font=h+"px "+a;for(var o=0;o<t.length;o++){var y=t[o],d=f.measureText(y[0]).width+f.measureText(y[1]).width,p=f.measureText(y).width;if(Math.abs(d-p)>h*s){var c=(p-d)/h;r[y]=c*1e3}}return r}function e(a){for(var n=[],r=a[0];r<=a[1];r++)for(var t=String.fromCharCode(r),h=a[0];h<a[1];h++){var s=String.fromCharCode(h),o=t+s;n.push(o)}return n}},{}],126:[function(i,U,V){var w=i("abs-svg-path"),f=i("normalize-svg-path"),M={M:"moveTo",C:"bezierCurveTo"};U.exports=function(T,e){T.beginPath(),f(w(e)).forEach(function(a){var n=a[0],r=a.slice(1);T[M[n]].apply(T,r)}),T.closePath()}},{"abs-svg-path":70,"normalize-svg-path":246}],127:[function(i,U,V){U.exports=function(w){switch(w){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},{}],128:[function(i,U,V){function w(T,e,a){var n=T[a]|0;if(n<=0)return[];var r=new Array(n),t;if(a===T.length-1)for(t=0;t<n;++t)r[t]=e;else for(t=0;t<n;++t)r[t]=w(T,e,a+1);return r}function f(T,e){var a,n;for(a=new Array(T),n=0;n<T;++n)a[n]=e;return a}function M(T,e){switch(typeof e>"u"&&(e=0),typeof T){case"number":if(T>0)return f(T|0,e);break;case"object":if(typeof T.length=="number")return w(T,e,0);break}return[]}U.exports=M},{}],129:[function(i,U,V){U.exports=w,U.exports.default=w;function w(R,O,z){z=z||2;var B=O&&O.length,G=B?O[0]*z:R.length,Q=f(R,0,G,z,!0),X=[];if(!Q||Q.next===Q.prev)return X;var j,re,ue,K,te,Y,H;if(B&&(Q=t(R,O,Q,z)),R.length>80*z){j=ue=R[0],re=K=R[1];for(var ee=z;ee<G;ee+=z)te=R[ee],Y=R[ee+1],te<j&&(j=te),Y<re&&(re=Y),te>ue&&(ue=te),Y>K&&(K=Y);H=Math.max(ue-j,K-re),H=H!==0?1/H:0}return T(Q,X,z,j,re,H),X}function f(R,O,z,B,G){var Q,X;if(G===D(R,O,z,B)>0)for(Q=O;Q<z;Q+=B)X=C(Q,R[Q],R[Q+1],X);else for(Q=z-B;Q>=O;Q-=B)X=C(Q,R[Q],R[Q+1],X);return X&&A(X,X.next)&&(F(X),X=X.next),X}function M(R,O){if(!R)return R;O||(O=R);var z=R,B;do if(B=!1,!z.steiner&&(A(z,z.next)||u(z.prev,z,z.next)===0)){if(F(z),z=O=z.prev,z===z.next)break;B=!0}else z=z.next;while(B||z!==O);return O}function T(R,O,z,B,G,Q,X){if(!!R){!X&&Q&&d(R,B,G,Q);for(var j=R,re,ue;R.prev!==R.next;){if(re=R.prev,ue=R.next,Q?a(R,B,G,Q):e(R)){O.push(re.i/z),O.push(R.i/z),O.push(ue.i/z),F(R),R=ue.next,j=ue.next;continue}if(R=ue,R===j){X?X===1?(R=n(M(R),O,z),T(R,O,z,B,G,Q,2)):X===2&&r(R,O,z,B,G,Q):T(M(R),O,z,B,G,Q,1);break}}}}function e(R){var O=R.prev,z=R,B=R.next;if(u(O,z,B)>=0)return!1;for(var G=R.next.next;G!==R.prev;){if(l(O.x,O.y,z.x,z.y,B.x,B.y,G.x,G.y)&&u(G.prev,G,G.next)>=0)return!1;G=G.next}return!0}function a(R,O,z,B){var G=R.prev,Q=R,X=R.next;if(u(G,Q,X)>=0)return!1;for(var j=G.x<Q.x?G.x<X.x?G.x:X.x:Q.x<X.x?Q.x:X.x,re=G.y<Q.y?G.y<X.y?G.y:X.y:Q.y<X.y?Q.y:X.y,ue=G.x>Q.x?G.x>X.x?G.x:X.x:Q.x>X.x?Q.x:X.x,K=G.y>Q.y?G.y>X.y?G.y:X.y:Q.y>X.y?Q.y:X.y,te=c(j,re,O,z,B),Y=c(ue,K,O,z,B),H=R.prevZ,ee=R.nextZ;H&&H.z>=te&&ee&&ee.z<=Y;){if(H!==R.prev&&H!==R.next&&l(G.x,G.y,Q.x,Q.y,X.x,X.y,H.x,H.y)&&u(H.prev,H,H.next)>=0||(H=H.prevZ,ee!==R.prev&&ee!==R.next&&l(G.x,G.y,Q.x,Q.y,X.x,X.y,ee.x,ee.y)&&u(ee.prev,ee,ee.next)>=0))return!1;ee=ee.nextZ}for(;H&&H.z>=te;){if(H!==R.prev&&H!==R.next&&l(G.x,G.y,Q.x,Q.y,X.x,X.y,H.x,H.y)&&u(H.prev,H,H.next)>=0)return!1;H=H.prevZ}for(;ee&&ee.z<=Y;){if(ee!==R.prev&&ee!==R.next&&l(G.x,G.y,Q.x,Q.y,X.x,X.y,ee.x,ee.y)&&u(ee.prev,ee,ee.next)>=0)return!1;ee=ee.nextZ}return!0}function n(R,O,z){var B=R;do{var G=B.prev,Q=B.next.next;!A(G,Q)&&_(G,B,B.next,Q)&&k(G,Q)&&k(Q,G)&&(O.push(G.i/z),O.push(B.i/z),O.push(Q.i/z),F(B),F(B.next),B=R=Q),B=B.next}while(B!==R);return M(B)}function r(R,O,z,B,G,Q){var X=R;do{for(var j=X.next.next;j!==X.prev;){if(X.i!==j.i&&x(X,j)){var re=E(X,j);X=M(X,X.next),re=M(re,re.next),T(X,O,z,B,G,Q),T(re,O,z,B,G,Q);return}j=j.next}X=X.next}while(X!==R)}function t(R,O,z,B){var G=[],Q,X,j,re,ue;for(Q=0,X=O.length;Q<X;Q++)j=O[Q]*B,re=Q<X-1?O[Q+1]*B:R.length,ue=f(R,j,re,B,!1),ue===ue.next&&(ue.steiner=!0),G.push(m(ue));for(G.sort(h),Q=0;Q<G.length;Q++)s(G[Q],z),z=M(z,z.next);return z}function h(R,O){return R.x-O.x}function s(R,O){if(O=o(R,O),O){var z=E(O,R);M(O,O.next),M(z,z.next)}}function o(R,O){var z=O,B=R.x,G=R.y,Q=-1/0,X;do{if(G<=z.y&&G>=z.next.y&&z.next.y!==z.y){var j=z.x+(G-z.y)*(z.next.x-z.x)/(z.next.y-z.y);if(j<=B&&j>Q){if(Q=j,j===B){if(G===z.y)return z;if(G===z.next.y)return z.next}X=z.x<z.next.x?z:z.next}}z=z.next}while(z!==O);if(!X)return null;if(B===Q)return X;var re=X,ue=X.x,K=X.y,te=1/0,Y;z=X;do B>=z.x&&z.x>=ue&&B!==z.x&&l(G<K?B:Q,G,ue,K,G<K?Q:B,G,z.x,z.y)&&(Y=Math.abs(G-z.y)/(B-z.x),k(z,R)&&(Y<te||Y===te&&(z.x>X.x||z.x===X.x&&y(X,z)))&&(X=z,te=Y)),z=z.next;while(z!==re);return X}function y(R,O){return u(R.prev,R,O.prev)<0&&u(O.next,R,R.next)<0}function d(R,O,z,B){var G=R;do G.z===null&&(G.z=c(G.x,G.y,O,z,B)),G.prevZ=G.prev,G.nextZ=G.next,G=G.next;while(G!==R);G.prevZ.nextZ=null,G.prevZ=null,p(G)}function p(R){var O,z,B,G,Q,X,j,re,ue=1;do{for(z=R,R=null,Q=null,X=0;z;){for(X++,B=z,j=0,O=0;O<ue&&(j++,B=B.nextZ,!!B);O++);for(re=ue;j>0||re>0&&B;)j!==0&&(re===0||!B||z.z<=B.z)?(G=z,z=z.nextZ,j--):(G=B,B=B.nextZ,re--),Q?Q.nextZ=G:R=G,G.prevZ=Q,Q=G;z=B}Q.nextZ=null,ue*=2}while(X>1);return R}function c(R,O,z,B,G){return R=32767*(R-z)*G,O=32767*(O-B)*G,R=(R|R<<8)&16711935,R=(R|R<<4)&252645135,R=(R|R<<2)&858993459,R=(R|R<<1)&1431655765,O=(O|O<<8)&16711935,O=(O|O<<4)&252645135,O=(O|O<<2)&858993459,O=(O|O<<1)&1431655765,R|O<<1}function m(R){var O=R,z=R;do(O.x<z.x||O.x===z.x&&O.y<z.y)&&(z=O),O=O.next;while(O!==R);return z}function l(R,O,z,B,G,Q,X,j){return(G-X)*(O-j)-(R-X)*(Q-j)>=0&&(R-X)*(B-j)-(z-X)*(O-j)>=0&&(z-X)*(Q-j)-(G-X)*(B-j)>=0}function x(R,O){return R.next.i!==O.i&&R.prev.i!==O.i&&!v(R,O)&&(k(R,O)&&k(O,R)&&S(R,O)&&(u(R.prev,R,O.prev)||u(R,O.prev,O))||A(R,O)&&u(R.prev,R,R.next)>0&&u(O.prev,O,O.next)>0)}function u(R,O,z){return(O.y-R.y)*(z.x-O.x)-(O.x-R.x)*(z.y-O.y)}function A(R,O){return R.x===O.x&&R.y===O.y}function _(R,O,z,B){var G=b(u(R,O,z)),Q=b(u(R,O,B)),X=b(u(z,B,R)),j=b(u(z,B,O));return!!(G!==Q&&X!==j||G===0&&g(R,z,O)||Q===0&&g(R,B,O)||X===0&&g(z,R,B)||j===0&&g(z,O,B))}function g(R,O,z){return O.x<=Math.max(R.x,z.x)&&O.x>=Math.min(R.x,z.x)&&O.y<=Math.max(R.y,z.y)&&O.y>=Math.min(R.y,z.y)}function b(R){return R>0?1:R<0?-1:0}function v(R,O){var z=R;do{if(z.i!==R.i&&z.next.i!==R.i&&z.i!==O.i&&z.next.i!==O.i&&_(z,z.next,R,O))return!0;z=z.next}while(z!==R);return!1}function k(R,O){return u(R.prev,R,R.next)<0?u(R,O,R.next)>=0&&u(R,R.prev,O)>=0:u(R,O,R.prev)<0||u(R,R.next,O)<0}function S(R,O){var z=R,B=!1,G=(R.x+O.x)/2,Q=(R.y+O.y)/2;do z.y>Q!=z.next.y>Q&&z.next.y!==z.y&&G<(z.next.x-z.x)*(Q-z.y)/(z.next.y-z.y)+z.x&&(B=!B),z=z.next;while(z!==R);return B}function E(R,O){var z=new I(R.i,R.x,R.y),B=new I(O.i,O.x,O.y),G=R.next,Q=O.prev;return R.next=O,O.prev=R,z.next=G,G.prev=z,B.next=z,z.prev=B,Q.next=B,B.prev=Q,B}function C(R,O,z,B){var G=new I(R,O,z);return B?(G.next=B.next,G.prev=B,B.next.prev=G,B.next=G):(G.prev=G,G.next=G),G}function F(R){R.next.prev=R.prev,R.prev.next=R.next,R.prevZ&&(R.prevZ.nextZ=R.nextZ),R.nextZ&&(R.nextZ.prevZ=R.prevZ)}function I(R,O,z){this.i=R,this.x=O,this.y=z,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}w.deviation=function(R,O,z,B){var G=O&&O.length,Q=G?O[0]*z:R.length,X=Math.abs(D(R,0,Q,z));if(G)for(var j=0,re=O.length;j<re;j++){var ue=O[j]*z,K=j<re-1?O[j+1]*z:R.length;X-=Math.abs(D(R,ue,K,z))}var te=0;for(j=0;j<B.length;j+=3){var Y=B[j]*z,H=B[j+1]*z,ee=B[j+2]*z;te+=Math.abs((R[Y]-R[ee])*(R[H+1]-R[Y+1])-(R[Y]-R[H])*(R[ee+1]-R[Y+1]))}return X===0&&te===0?0:Math.abs((te-X)/X)};function D(R,O,z,B){for(var G=0,Q=O,X=z-B;Q<z;Q+=B)G+=(R[X]-R[Q])*(R[Q+1]+R[X+1]),X=Q;return G}w.flatten=function(R){for(var O=R[0][0].length,z={vertices:[],holes:[],dimensions:O},B=0,G=0;G<R.length;G++){for(var Q=0;Q<R[G].length;Q++)for(var X=0;X<O;X++)z.vertices.push(R[G][Q][X]);G>0&&(B+=R[G-1].length,z.holes.push(B))}return z}},{}],130:[function(i,U,V){var w=i("strongly-connected-components");U.exports=function(M,T){var e=[],a=[],n=[],r={},t=[],h;function s(A){n[A]=!1,r.hasOwnProperty(A)&&Object.keys(r[A]).forEach(function(_){delete r[A][_],n[_]&&s(_)})}function o(A){var _=!1;a.push(A),n[A]=!0;var g,b;for(g=0;g<t[A].length;g++)b=t[A][g],b===h?(y(h,a),_=!0):n[b]||(_=o(b));if(_)s(A);else for(g=0;g<t[A].length;g++){b=t[A][g];var v=r[b];v||(v={},r[b]=v),v[b]=!0}return a.pop(),_}function y(A,_){var g=[].concat(_).concat(A);T?T(o):e.push(g)}function d(A){for(var _=0;_<M.length;_++)_<A&&(M[_]=[]),M[_]=M[_].filter(function(g){return g>=A})}function p(A){d(A);for(var _=M,g=w(_),b=g.components.filter(function(I){return I.length>1}),v=1/0,k,S=0;S<b.length;S++)for(var E=0;E<b[S].length;E++)b[S][E]<v&&(v=b[S][E],k=S);var C=b[k];if(!C)return!1;var F=M.map(function(I,D){return C.indexOf(D)===-1?[]:I.filter(function(R){return C.indexOf(R)!==-1})});return{leastVertex:v,adjList:F}}h=0;for(var c=M.length;h<c;){var m=p(h);if(h=m.leastVertex,t=m.adjList,t){for(var l=0;l<t.length;l++)for(var x=0;x<t[l].length;x++){var u=t[l][x];n[+u]=!1,r[u]={}}o(h),h=h+1}else h=c}if(!T)return e}},{"strongly-connected-components":307}],131:[function(i,U,V){var w=i("../../object/valid-value");U.exports=function(){return w(this).length=0,this}},{"../../object/valid-value":162}],132:[function(i,U,V){U.exports=i("./is-implemented")()?Array.from:i("./shim")},{"./is-implemented":133,"./shim":134}],133:[function(i,U,V){U.exports=function(){var w=Array.from,f,M;return typeof w!="function"?!1:(f=["raz","dwa"],M=w(f),Boolean(M&&M!==f&&M[1]==="dwa"))}},{}],134:[function(i,U,V){var w=i("es6-symbol").iterator,f=i("../../function/is-arguments"),M=i("../../function/is-function"),T=i("../../number/to-pos-integer"),e=i("../../object/valid-callable"),a=i("../../object/valid-value"),n=i("../../object/is-value"),r=i("../../string/is-string"),t=Array.isArray,h=Function.prototype.call,s={configurable:!0,enumerable:!0,writable:!0,value:null},o=Object.defineProperty;U.exports=function(y){var d=arguments[1],p=arguments[2],c,m,l,x,u,A,_,g,b,v;if(y=Object(a(y)),n(d)&&e(d),!this||this===Array||!M(this)){if(!d){if(f(y))return u=y.length,u!==1?Array.apply(null,y):(x=new Array(1),x[0]=y[0],x);if(t(y)){for(x=new Array(u=y.length),m=0;m<u;++m)x[m]=y[m];return x}}x=[]}else c=this;if(!t(y)){if((b=y[w])!==void 0){for(_=e(b).call(y),c&&(x=new c),g=_.next(),m=0;!g.done;)v=d?h.call(d,p,g.value,m):g.value,c?(s.value=v,o(x,m,s)):x[m]=v,g=_.next(),++m;u=m}else if(r(y)){for(u=y.length,c&&(x=new c),m=0,l=0;m<u;++m)v=y[m],m+1<u&&(A=v.charCodeAt(0),A>=55296&&A<=56319&&(v+=y[++m])),v=d?h.call(d,p,v,l):v,c?(s.value=v,o(x,l,s)):x[l]=v,++l;u=l}}if(u===void 0)for(u=T(y.length),c&&(x=new c(u)),m=0;m<u;++m)v=d?h.call(d,p,y[m],m):y[m],c?(s.value=v,o(x,m,s)):x[m]=v;return c&&(s.value=null,x.length=u),x}},{"../../function/is-arguments":135,"../../function/is-function":136,"../../number/to-pos-integer":142,"../../object/is-value":151,"../../object/valid-callable":160,"../../object/valid-value":162,"../../string/is-string":166,"es6-symbol":175}],135:[function(i,U,V){var w=Object.prototype.toString,f=w.call(function(){return arguments}());U.exports=function(M){return w.call(M)===f}},{}],136:[function(i,U,V){var w=Object.prototype.toString,f=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);U.exports=function(M){return typeof M=="function"&&f(w.call(M))}},{}],137:[function(i,U,V){U.exports=function(){}},{}],138:[function(i,U,V){U.exports=i("./is-implemented")()?Math.sign:i("./shim")},{"./is-implemented":139,"./shim":140}],139:[function(i,U,V){U.exports=function(){var w=Math.sign;return typeof w!="function"?!1:w(10)===1&&w(-20)===-1}},{}],140:[function(i,U,V){U.exports=function(w){return w=Number(w),isNaN(w)||w===0?w:w>0?1:-1}},{}],141:[function(i,U,V){var w=i("../math/sign"),f=Math.abs,M=Math.floor;U.exports=function(T){return isNaN(T)?0:(T=Number(T),T===0||!isFinite(T)?T:w(T)*M(f(T)))}},{"../math/sign":138}],142:[function(i,U,V){var w=i("./to-integer"),f=Math.max;U.exports=function(M){return f(0,w(M))}},{"./to-integer":141}],143:[function(i,U,V){var w=i("./valid-callable"),f=i("./valid-value"),M=Function.prototype.bind,T=Function.prototype.call,e=Object.keys,a=Object.prototype.propertyIsEnumerable;U.exports=function(n,r){return function(t,h){var s,o=arguments[2],y=arguments[3];return t=Object(f(t)),w(h),s=e(t),y&&s.sort(typeof y=="function"?M.call(y,t):void 0),typeof n!="function"&&(n=s[n]),T.call(n,s,function(d,p){return a.call(t,d)?T.call(h,o,t[d],d,t,p):r})}}},{"./valid-callable":160,"./valid-value":162}],144:[function(i,U,V){U.exports=i("./is-implemented")()?Object.assign:i("./shim")},{"./is-implemented":145,"./shim":146}],145:[function(i,U,V){U.exports=function(){var w=Object.assign,f;return typeof w!="function"?!1:(f={foo:"raz"},w(f,{bar:"dwa"},{trzy:"trzy"}),f.foo+f.bar+f.trzy==="razdwatrzy")}},{}],146:[function(i,U,V){var w=i("../keys"),f=i("../valid-value"),M=Math.max;U.exports=function(T,e){var a,n,r=M(arguments.length,2),t;for(T=Object(f(T)),t=function(h){try{T[h]=e[h]}catch(s){a||(a=s)}},n=1;n<r;++n)e=arguments[n],w(e).forEach(t);if(a!==void 0)throw a;return T}},{"../keys":152,"../valid-value":162}],147:[function(i,U,V){var w=i("../array/from"),f=i("./assign"),M=i("./valid-value");U.exports=function(T){var e=Object(M(T)),a=arguments[1],n=Object(arguments[2]);if(e!==T&&!a)return e;var r={};return a?w(a,function(t){(n.ensure||t in T)&&(r[t]=T[t])}):f(r,T),r}},{"../array/from":132,"./assign":144,"./valid-value":162}],148:[function(i,U,V){var w=Object.create,f;i("./set-prototype-of/is-implemented")()||(f=i("./set-prototype-of/shim")),U.exports=function(){var M,T,e;return!f||f.level!==1?w:(M={},T={},e={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(a){if(a==="__proto__"){T[a]={configurable:!0,enumerable:!1,writable:!0,value:void 0};return}T[a]=e}),Object.defineProperties(M,T),Object.defineProperty(f,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:M}),function(a,n){return w(a===null?M:a,n)})}()},{"./set-prototype-of/is-implemented":158,"./set-prototype-of/shim":159}],149:[function(i,U,V){U.exports=i("./_iterate")("forEach")},{"./_iterate":143}],150:[function(i,U,V){var w=i("./is-value"),f={function:!0,object:!0};U.exports=function(M){return w(M)&&f[typeof M]||!1}},{"./is-value":151}],151:[function(i,U,V){var w=i("../function/noop")();U.exports=function(f){return f!==w&&f!==null}},{"../function/noop":137}],152:[function(i,U,V){U.exports=i("./is-implemented")()?Object.keys:i("./shim")},{"./is-implemented":153,"./shim":154}],153:[function(i,U,V){U.exports=function(){try{return Object.keys("primitive"),!0}catch{return!1}}},{}],154:[function(i,U,V){var w=i("../is-value"),f=Object.keys;U.exports=function(M){return f(w(M)?Object(M):M)}},{"../is-value":151}],155:[function(i,U,V){var w=i("./valid-callable"),f=i("./for-each"),M=Function.prototype.call;U.exports=function(T,e){var a={},n=arguments[2];return w(e),f(T,function(r,t,h,s){a[t]=M.call(e,n,r,t,h,s)}),a}},{"./for-each":149,"./valid-callable":160}],156:[function(i,U,V){var w=i("./is-value"),f=Array.prototype.forEach,M=Object.create,T=function(e,a){var n;for(n in e)a[n]=e[n]};U.exports=function(e){var a=M(null);return f.call(arguments,function(n){!w(n)||T(Object(n),a)}),a}},{"./is-value":151}],157:[function(i,U,V){U.exports=i("./is-implemented")()?Object.setPrototypeOf:i("./shim")},{"./is-implemented":158,"./shim":159}],158:[function(i,U,V){var w=Object.create,f=Object.getPrototypeOf,M={};U.exports=function(){var T=Object.setPrototypeOf,e=arguments[0]||w;return typeof T!="function"?!1:f(T(e(null),M))===M}},{}],159:[function(i,U,V){var w=i("../is-object"),f=i("../valid-value"),M=Object.prototype.isPrototypeOf,T=Object.defineProperty,e={configurable:!0,enumerable:!1,writable:!0,value:void 0},a;a=function(n,r){if(f(n),r===null||w(r))return n;throw new TypeError("Prototype must be null or an object")},U.exports=function(n){var r,t;return n?(n.level===2?n.set?(t=n.set,r=function(h,s){return t.call(a(h,s),s),h}):r=function(h,s){return a(h,s).__proto__=s,h}:r=function h(s,o){var y;return a(s,o),y=M.call(h.nullPolyfill,s),y&&delete h.nullPolyfill.__proto__,o===null&&(o=h.nullPolyfill),s.__proto__=o,y&&T(h.nullPolyfill,"__proto__",e),s},Object.defineProperty(r,"level",{configurable:!1,enumerable:!1,writable:!1,value:n.level})):null}(function(){var n=Object.create(null),r={},t,h=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(h){try{t=h.set,t.call(n,r)}catch{}if(Object.getPrototypeOf(n)===r)return{set:t,level:2}}return n.__proto__=r,Object.getPrototypeOf(n)===r?{level:2}:(n={},n.__proto__=r,Object.getPrototypeOf(n)===r?{level:1}:!1)}()),i("../create")},{"../create":148,"../is-object":150,"../valid-value":162}],160:[function(i,U,V){U.exports=function(w){if(typeof w!="function")throw new TypeError(w+" is not a function");return w}},{}],161:[function(i,U,V){var w=i("./is-object");U.exports=function(f){if(!w(f))throw new TypeError(f+" is not an Object");return f}},{"./is-object":150}],162:[function(i,U,V){var w=i("./is-value");U.exports=function(f){if(!w(f))throw new TypeError("Cannot use null or undefined");return f}},{"./is-value":151}],163:[function(i,U,V){U.exports=i("./is-implemented")()?String.prototype.contains:i("./shim")},{"./is-implemented":164,"./shim":165}],164:[function(i,U,V){var w="razdwatrzy";U.exports=function(){return typeof w.contains!="function"?!1:w.contains("dwa")===!0&&w.contains("foo")===!1}},{}],165:[function(i,U,V){var w=String.prototype.indexOf;U.exports=function(f){return w.call(this,f,arguments[1])>-1}},{}],166:[function(i,U,V){var w=Object.prototype.toString,f=w.call("");U.exports=function(M){return typeof M=="string"||M&&typeof M=="object"&&(M instanceof String||w.call(M)===f)||!1}},{}],167:[function(i,U,V){var w=Object.create(null),f=Math.random;U.exports=function(){var M;do M=f().toString(36).slice(2);while(w[M]);return M}},{}],168:[function(i,U,V){var w=i("es5-ext/object/set-prototype-of"),f=i("es5-ext/string/#/contains"),M=i("d"),T=i("es6-symbol"),e=i("./"),a=Object.defineProperty,n;n=U.exports=function(r,t){if(!(this instanceof n))throw new TypeError("Constructor requires 'new'");e.call(this,r),t?f.call(t,"key+value")?t="key+value":f.call(t,"key")?t="key":t="value":t="value",a(this,"__kind__",M("",t))},w&&w(n,e),delete n.prototype.constructor,n.prototype=Object.create(e.prototype,{_resolve:M(function(r){return this.__kind__==="value"?this.__list__[r]:this.__kind__==="key+value"?[r,this.__list__[r]]:r})}),a(n.prototype,T.toStringTag,M("c","Array Iterator"))},{"./":171,d:106,"es5-ext/object/set-prototype-of":157,"es5-ext/string/#/contains":163,"es6-symbol":175}],169:[function(i,U,V){var w=i("es5-ext/function/is-arguments"),f=i("es5-ext/object/valid-callable"),M=i("es5-ext/string/is-string"),T=i("./get"),e=Array.isArray,a=Function.prototype.call,n=Array.prototype.some;U.exports=function(r,t){var h,s=arguments[2],o,y,d,p,c,m,l;if(e(r)||w(r)?h="array":M(r)?h="string":r=T(r),f(t),y=function(){d=!0},h==="array"){n.call(r,function(x){return a.call(t,s,x,y),d});return}if(h==="string"){for(c=r.length,p=0;p<c&&(m=r[p],p+1<c&&(l=m.charCodeAt(0),l>=55296&&l<=56319&&(m+=r[++p])),a.call(t,s,m,y),!d);++p);return}for(o=r.next();!o.done;){if(a.call(t,s,o.value,y),d)return;o=r.next()}}},{"./get":170,"es5-ext/function/is-arguments":135,"es5-ext/object/valid-callable":160,"es5-ext/string/is-string":166}],170:[function(i,U,V){var w=i("es5-ext/function/is-arguments"),f=i("es5-ext/string/is-string"),M=i("./array"),T=i("./string"),e=i("./valid-iterable"),a=i("es6-symbol").iterator;U.exports=function(n){return typeof e(n)[a]=="function"?n[a]():w(n)?new M(n):f(n)?new T(n):new M(n)}},{"./array":168,"./string":173,"./valid-iterable":174,"es5-ext/function/is-arguments":135,"es5-ext/string/is-string":166,"es6-symbol":175}],171:[function(i,U,V){var w=i("es5-ext/array/#/clear"),f=i("es5-ext/object/assign"),M=i("es5-ext/object/valid-callable"),T=i("es5-ext/object/valid-value"),e=i("d"),a=i("d/auto-bind"),n=i("es6-symbol"),r=Object.defineProperty,t=Object.defineProperties,h;U.exports=h=function(s,o){if(!(this instanceof h))throw new TypeError("Constructor requires 'new'");t(this,{__list__:e("w",T(s)),__context__:e("w",o),__nextIndex__:e("w",0)}),o&&(M(o.on),o.on("_add",this._onAdd),o.on("_delete",this._onDelete),o.on("_clear",this._onClear))},delete h.prototype.constructor,t(h.prototype,f({_next:e(function(){var s;if(!!this.__list__){if(this.__redo__&&(s=this.__redo__.shift(),s!==void 0))return s;if(this.__nextIndex__<this.__list__.length)return this.__nextIndex__++;this._unBind()}}),next:e(function(){return this._createResult(this._next())}),_createResult:e(function(s){return s===void 0?{done:!0,value:void 0}:{done:!1,value:this._resolve(s)}}),_resolve:e(function(s){return this.__list__[s]}),_unBind:e(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:e(function(){return"[object "+(this[n.toStringTag]||"Object")+"]"})},a({_onAdd:e(function(s){if(!(s>=this.__nextIndex__)){if(++this.__nextIndex__,!this.__redo__){r(this,"__redo__",e("c",[s]));return}this.__redo__.forEach(function(o,y){o>=s&&(this.__redo__[y]=++o)},this),this.__redo__.push(s)}}),_onDelete:e(function(s){var o;s>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(o=this.__redo__.indexOf(s),o!==-1&&this.__redo__.splice(o,1),this.__redo__.forEach(function(y,d){y>s&&(this.__redo__[d]=--y)},this)))}),_onClear:e(function(){this.__redo__&&w.call(this.__redo__),this.__nextIndex__=0})}))),r(h.prototype,n.iterator,e(function(){return this}))},{d:106,"d/auto-bind":105,"es5-ext/array/#/clear":131,"es5-ext/object/assign":144,"es5-ext/object/valid-callable":160,"es5-ext/object/valid-value":162,"es6-symbol":175}],172:[function(i,U,V){var w=i("es5-ext/function/is-arguments"),f=i("es5-ext/object/is-value"),M=i("es5-ext/string/is-string"),T=i("es6-symbol").iterator,e=Array.isArray;U.exports=function(a){return f(a)?e(a)||M(a)||w(a)?!0:typeof a[T]=="function":!1}},{"es5-ext/function/is-arguments":135,"es5-ext/object/is-value":151,"es5-ext/string/is-string":166,"es6-symbol":175}],173:[function(i,U,V){var w=i("es5-ext/object/set-prototype-of"),f=i("d"),M=i("es6-symbol"),T=i("./"),e=Object.defineProperty,a;a=U.exports=function(n){if(!(this instanceof a))throw new TypeError("Constructor requires 'new'");n=String(n),T.call(this,n),e(this,"__length__",f("",n.length))},w&&w(a,T),delete a.prototype.constructor,a.prototype=Object.create(T.prototype,{_next:f(function(){if(!!this.__list__){if(this.__nextIndex__<this.__length__)return this.__nextIndex__++;this._unBind()}}),_resolve:f(function(n){var r=this.__list__[n],t;return this.__nextIndex__===this.__length__?r:(t=r.charCodeAt(0),t>=55296&&t<=56319?r+this.__list__[this.__nextIndex__++]:r)})}),e(a.prototype,M.toStringTag,f("c","String Iterator"))},{"./":171,d:106,"es5-ext/object/set-prototype-of":157,"es6-symbol":175}],174:[function(i,U,V){var w=i("./is-iterable");U.exports=function(f){if(!w(f))throw new TypeError(f+" is not iterable");return f}},{"./is-iterable":172}],175:[function(i,U,V){U.exports=i("./is-implemented")()?i("ext/global-this").Symbol:i("./polyfill")},{"./is-implemented":176,"./polyfill":181,"ext/global-this":188}],176:[function(i,U,V){var w=i("ext/global-this"),f={object:!0,symbol:!0};U.exports=function(){var M=w.Symbol,T;if(typeof M!="function")return!1;T=M("test symbol");try{String(T)}catch{return!1}return!(!f[typeof M.iterator]||!f[typeof M.toPrimitive]||!f[typeof M.toStringTag])}},{"ext/global-this":188}],177:[function(i,U,V){U.exports=function(w){return w?typeof w=="symbol"?!0:!w.constructor||w.constructor.name!=="Symbol"?!1:w[w.constructor.toStringTag]==="Symbol":!1}},{}],178:[function(i,U,V){var w=i("d"),f=Object.create,M=Object.defineProperty,T=Object.prototype,e=f(null);U.exports=function(a){for(var n=0,r,t;e[a+(n||"")];)++n;return a+=n||"",e[a]=!0,r="@@"+a,M(T,r,w.gs(null,function(h){t||(t=!0,M(this,r,w(h)),t=!1)})),r}},{d:106}],179:[function(i,U,V){var w=i("d"),f=i("ext/global-this").Symbol;U.exports=function(M){return Object.defineProperties(M,{hasInstance:w("",f&&f.hasInstance||M("hasInstance")),isConcatSpreadable:w("",f&&f.isConcatSpreadable||M("isConcatSpreadable")),iterator:w("",f&&f.iterator||M("iterator")),match:w("",f&&f.match||M("match")),replace:w("",f&&f.replace||M("replace")),search:w("",f&&f.search||M("search")),species:w("",f&&f.species||M("species")),split:w("",f&&f.split||M("split")),toPrimitive:w("",f&&f.toPrimitive||M("toPrimitive")),toStringTag:w("",f&&f.toStringTag||M("toStringTag")),unscopables:w("",f&&f.unscopables||M("unscopables"))})}},{d:106,"ext/global-this":188}],180:[function(i,U,V){var w=i("d"),f=i("../../../validate-symbol"),M=Object.create(null);U.exports=function(T){return Object.defineProperties(T,{for:w(function(e){return M[e]?M[e]:M[e]=T(String(e))}),keyFor:w(function(e){var a;f(e);for(a in M)if(M[a]===e)return a})})}},{"../../../validate-symbol":182,d:106}],181:[function(i,U,V){var w=i("d"),f=i("./validate-symbol"),M=i("ext/global-this").Symbol,T=i("./lib/private/generate-name"),e=i("./lib/private/setup/standard-symbols"),a=i("./lib/private/setup/symbol-registry"),n=Object.create,r=Object.defineProperties,t=Object.defineProperty,h,s,o;if(typeof M=="function")try{String(M()),o=!0}catch{}else M=null;s=function(d){if(this instanceof s)throw new TypeError("Symbol is not a constructor");return h(d)},U.exports=h=function y(d){var p;if(this instanceof y)throw new TypeError("Symbol is not a constructor");return o?M(d):(p=n(s.prototype),d=d===void 0?"":String(d),r(p,{__description__:w("",d),__name__:w("",T(d))}))},e(h),a(h),r(s.prototype,{constructor:w(h),toString:w("",function(){return this.__name__})}),r(h.prototype,{toString:w(function(){return"Symbol ("+f(this).__description__+")"}),valueOf:w(function(){return f(this)})}),t(h.prototype,h.toPrimitive,w("",function(){var y=f(this);return typeof y=="symbol"?y:y.toString()})),t(h.prototype,h.toStringTag,w("c","Symbol")),t(s.prototype,h.toStringTag,w("c",h.prototype[h.toStringTag])),t(s.prototype,h.toPrimitive,w("c",h.prototype[h.toPrimitive]))},{"./lib/private/generate-name":178,"./lib/private/setup/standard-symbols":179,"./lib/private/setup/symbol-registry":180,"./validate-symbol":182,d:106,"ext/global-this":188}],182:[function(i,U,V){var w=i("./is-symbol");U.exports=function(f){if(!w(f))throw new TypeError(f+" is not a symbol");return f}},{"./is-symbol":177}],183:[function(i,U,V){U.exports=i("./is-implemented")()?WeakMap:i("./polyfill")},{"./is-implemented":184,"./polyfill":186}],184:[function(i,U,V){U.exports=function(){var w,f;if(typeof WeakMap!="function")return!1;try{w=new WeakMap([[f={},"one"],[{},"two"],[{},"three"]])}catch{return!1}return!(String(w)!=="[object WeakMap]"||typeof w.set!="function"||w.set({},1)!==w||typeof w.delete!="function"||typeof w.has!="function"||w.get(f)!=="one")}},{}],185:[function(i,U,V){U.exports=function(){return typeof WeakMap!="function"?!1:Object.prototype.toString.call(new WeakMap)==="[object WeakMap]"}()},{}],186:[function(i,U,V){var w=i("es5-ext/object/is-value"),f=i("es5-ext/object/set-prototype-of"),M=i("es5-ext/object/valid-object"),T=i("es5-ext/object/valid-value"),e=i("es5-ext/string/random-uniq"),a=i("d"),n=i("es6-iterator/get"),r=i("es6-iterator/for-of"),t=i("es6-symbol").toStringTag,h=i("./is-native-implemented"),s=Array.isArray,o=Object.defineProperty,y=Object.prototype.hasOwnProperty,d=Object.getPrototypeOf,p;U.exports=p=function(){var c=arguments[0],m;if(!(this instanceof p))throw new TypeError("Constructor requires 'new'");return m=h&&f&&WeakMap!==p?f(new WeakMap,d(this)):this,w(c)&&(s(c)||(c=n(c))),o(m,"__weakMapData__",a("c","$weakMap$"+e())),c&&r(c,function(l){T(l),m.set(l[0],l[1])}),m},h&&(f&&f(p,WeakMap),p.prototype=Object.create(WeakMap.prototype,{constructor:a(p)})),Object.defineProperties(p.prototype,{delete:a(function(c){return y.call(M(c),this.__weakMapData__)?(delete c[this.__weakMapData__],!0):!1}),get:a(function(c){if(!!y.call(M(c),this.__weakMapData__))return c[this.__weakMapData__]}),has:a(function(c){return y.call(M(c),this.__weakMapData__)}),set:a(function(c,m){return o(M(c),this.__weakMapData__,a("c",m)),this}),toString:a(function(){return"[object WeakMap]"})}),o(p.prototype,t,a("c","WeakMap"))},{"./is-native-implemented":185,d:106,"es5-ext/object/is-value":151,"es5-ext/object/set-prototype-of":157,"es5-ext/object/valid-object":161,"es5-ext/object/valid-value":162,"es5-ext/string/random-uniq":167,"es6-iterator/for-of":169,"es6-iterator/get":170,"es6-symbol":175}],187:[function(i,U,V){var w=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};U.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return w()}try{return __global__||w()}finally{delete Object.prototype.__global__}}()},{}],188:[function(i,U,V){U.exports=i("./is-implemented")()?globalThis:i("./implementation")},{"./implementation":187,"./is-implemented":189}],189:[function(i,U,V){U.exports=function(){return typeof globalThis!="object"||!globalThis?!1:globalThis.Array===Array}},{}],190:[function(i,U,V){var w=i("is-string-blank");U.exports=function(f){var M=typeof f;if(M==="string"){var T=f;if(f=+f,f===0&&w(T))return!1}else if(M!=="number")return!1;return f-f<1}},{"is-string-blank":237}],191:[function(i,U,V){var w=i("dtype");U.exports=f;function f(M,T,e){if(!M)throw new TypeError("must specify data as first parameter");if(e=+(e||0)|0,Array.isArray(M)&&M[0]&&typeof M[0][0]=="number"){var a=M[0].length,n=M.length*a,r,t,h,s;(!T||typeof T=="string")&&(T=new(w(T||"float32"))(n+e));var o=T.length-e;if(n!==o)throw new Error("source length "+n+" ("+a+"x"+M.length+") does not match destination length "+o);for(r=0,h=e;r<M.length;r++)for(t=0;t<a;t++)T[h++]=M[r][t]===null?NaN:M[r][t]}else if(!T||typeof T=="string"){var y=w(T||"float32");if(Array.isArray(M)||T==="array")for(T=new y(M.length+e),r=0,h=e,s=T.length;h<s;h++,r++)T[h]=M[r]===null?NaN:M[r];else e===0?T=new y(M):(T=new y(M.length+e),T.set(M,e))}else T.set(M,e);return T}},{dtype:127}],192:[function(i,U,V){var w=i("css-font/stringify"),f=[32,126];U.exports=M;function M(T){T=T||{};var e=T.shape?T.shape:T.canvas?[T.canvas.width,T.canvas.height]:[512,512],a=T.canvas||document.createElement("canvas"),n=T.font,r=typeof T.step=="number"?[T.step,T.step]:T.step||[32,32],t=T.chars||f;if(n&&typeof n!="string"&&(n=w(n)),!Array.isArray(t))t=String(t).split("");else if(t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number"){for(var h=[],s=t[0],o=0;s<=t[1];s++)h[o++]=String.fromCharCode(s);t=h}e=e.slice(),a.width=e[0],a.height=e[1];var y=a.getContext("2d");y.fillStyle="#000",y.fillRect(0,0,a.width,a.height),y.font=n,y.textAlign="center",y.textBaseline="middle",y.fillStyle="#fff";for(var d=r[0]/2,p=r[1]/2,s=0;s<t.length;s++)y.fillText(t[s],d,p),(d+=r[0])>e[0]-r[0]/2&&(d=r[0]/2,p+=r[1]);return a}},{"css-font/stringify":102}],193:[function(i,U,V){U.exports=w,w.canvas=document.createElement("canvas"),w.cache={};function w(s,a){a||(a={}),(typeof s=="string"||Array.isArray(s))&&(a.family=s);var n=Array.isArray(a.family)?a.family.join(", "):a.family;if(!n)throw Error("`family` must be defined");var r=a.size||a.fontSize||a.em||48,t=a.weight||a.fontWeight||"",h=a.style||a.fontStyle||"",s=[h,t,r].join(" ")+"px "+n,o=a.origin||"top";if(w.cache[n]&&r<=w.cache[n].em)return f(w.cache[n],o);var y=a.canvas||w.canvas,d=y.getContext("2d"),p={upper:a.upper!==void 0?a.upper:"H",lower:a.lower!==void 0?a.lower:"x",descent:a.descent!==void 0?a.descent:"p",ascent:a.ascent!==void 0?a.ascent:"h",tittle:a.tittle!==void 0?a.tittle:"i",overshoot:a.overshoot!==void 0?a.overshoot:"O"},c=Math.ceil(r*1.5);y.height=c,y.width=c*.5,d.font=s;var m="H",l={top:0};d.clearRect(0,0,c,c),d.textBaseline="top",d.fillStyle="black",d.fillText(m,0,0);var x=M(d.getImageData(0,0,c,c));d.clearRect(0,0,c,c),d.textBaseline="bottom",d.fillText(m,0,c);var u=M(d.getImageData(0,0,c,c));l.lineHeight=l.bottom=c-u+x,d.clearRect(0,0,c,c),d.textBaseline="alphabetic",d.fillText(m,0,c);var A=M(d.getImageData(0,0,c,c)),_=c-A-1+x;l.baseline=l.alphabetic=_,d.clearRect(0,0,c,c),d.textBaseline="middle",d.fillText(m,0,c*.5);var g=M(d.getImageData(0,0,c,c));l.median=l.middle=c-g-1+x-c*.5,d.clearRect(0,0,c,c),d.textBaseline="hanging",d.fillText(m,0,c*.5);var b=M(d.getImageData(0,0,c,c));l.hanging=c-b-1+x-c*.5,d.clearRect(0,0,c,c),d.textBaseline="ideographic",d.fillText(m,0,c);var v=M(d.getImageData(0,0,c,c));if(l.ideographic=c-v-1+x,p.upper&&(d.clearRect(0,0,c,c),d.textBaseline="top",d.fillText(p.upper,0,0),l.upper=M(d.getImageData(0,0,c,c)),l.capHeight=l.baseline-l.upper),p.lower&&(d.clearRect(0,0,c,c),d.textBaseline="top",d.fillText(p.lower,0,0),l.lower=M(d.getImageData(0,0,c,c)),l.xHeight=l.baseline-l.lower),p.tittle&&(d.clearRect(0,0,c,c),d.textBaseline="top",d.fillText(p.tittle,0,0),l.tittle=M(d.getImageData(0,0,c,c))),p.ascent&&(d.clearRect(0,0,c,c),d.textBaseline="top",d.fillText(p.ascent,0,0),l.ascent=M(d.getImageData(0,0,c,c))),p.descent&&(d.clearRect(0,0,c,c),d.textBaseline="top",d.fillText(p.descent,0,0),l.descent=T(d.getImageData(0,0,c,c))),p.overshoot){d.clearRect(0,0,c,c),d.textBaseline="top",d.fillText(p.overshoot,0,0);var k=T(d.getImageData(0,0,c,c));l.overshoot=k-_}for(var S in l)l[S]/=r;return l.em=r,w.cache[n]=l,f(l,o)}function f(e,a){var n={};typeof a=="string"&&(a=e[a]);for(var r in e)r!=="em"&&(n[r]=e[r]-a);return n}function M(e){for(var a=e.height,n=e.data,r=3;r<n.length;r+=4)if(n[r]!==0)return Math.floor((r-3)*.25/a)}function T(e){for(var a=e.height,n=e.data,r=n.length-1;r>0;r-=4)if(n[r]!==0)return Math.floor((r-3)*.25/a)}},{}],194:[function(i,U,V){U.exports=w;function w(f,M){if(typeof f!="string")throw new TypeError("must specify type string");if(M=M||{},typeof document>"u"&&!M.canvas)return null;var T=M.canvas||document.createElement("canvas");typeof M.width=="number"&&(T.width=M.width),typeof M.height=="number"&&(T.height=M.height);var e=M,a;try{var n=[f];f.indexOf("webgl")===0&&n.push("experimental-"+f);for(var r=0;r<n.length;r++)if(a=T.getContext(n[r],e),a)return a}catch{a=null}return a||null}},{}],195:[function(i,U,V){U.exports=w;function w(f,M){var T=M[0],e=M[1],a=M[2],n=M[3],r=M[4],t=M[5],h=M[6],s=M[7],o=M[8],y=M[9],d=M[10],p=M[11],c=M[12],m=M[13],l=M[14],x=M[15];return f[0]=t*(d*x-p*l)-y*(h*x-s*l)+m*(h*p-s*d),f[1]=-(e*(d*x-p*l)-y*(a*x-n*l)+m*(a*p-n*d)),f[2]=e*(h*x-s*l)-t*(a*x-n*l)+m*(a*s-n*h),f[3]=-(e*(h*p-s*d)-t*(a*p-n*d)+y*(a*s-n*h)),f[4]=-(r*(d*x-p*l)-o*(h*x-s*l)+c*(h*p-s*d)),f[5]=T*(d*x-p*l)-o*(a*x-n*l)+c*(a*p-n*d),f[6]=-(T*(h*x-s*l)-r*(a*x-n*l)+c*(a*s-n*h)),f[7]=T*(h*p-s*d)-r*(a*p-n*d)+o*(a*s-n*h),f[8]=r*(y*x-p*m)-o*(t*x-s*m)+c*(t*p-s*y),f[9]=-(T*(y*x-p*m)-o*(e*x-n*m)+c*(e*p-n*y)),f[10]=T*(t*x-s*m)-r*(e*x-n*m)+c*(e*s-n*t),f[11]=-(T*(t*p-s*y)-r*(e*p-n*y)+o*(e*s-n*t)),f[12]=-(r*(y*l-d*m)-o*(t*l-h*m)+c*(t*d-h*y)),f[13]=T*(y*l-d*m)-o*(e*l-a*m)+c*(e*d-a*y),f[14]=-(T*(t*l-h*m)-r*(e*l-a*m)+c*(e*h-a*t)),f[15]=T*(t*d-h*y)-r*(e*d-a*y)+o*(e*h-a*t),f}},{}],196:[function(i,U,V){U.exports=w;function w(f){var M=new Float32Array(16);return M[0]=f[0],M[1]=f[1],M[2]=f[2],M[3]=f[3],M[4]=f[4],M[5]=f[5],M[6]=f[6],M[7]=f[7],M[8]=f[8],M[9]=f[9],M[10]=f[10],M[11]=f[11],M[12]=f[12],M[13]=f[13],M[14]=f[14],M[15]=f[15],M}},{}],197:[function(i,U,V){U.exports=w;function w(f,M){return f[0]=M[0],f[1]=M[1],f[2]=M[2],f[3]=M[3],f[4]=M[4],f[5]=M[5],f[6]=M[6],f[7]=M[7],f[8]=M[8],f[9]=M[9],f[10]=M[10],f[11]=M[11],f[12]=M[12],f[13]=M[13],f[14]=M[14],f[15]=M[15],f}},{}],198:[function(i,U,V){U.exports=w;function w(){var f=new Float32Array(16);return f[0]=1,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=1,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=1,f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f}},{}],199:[function(i,U,V){U.exports=w;function w(f){var M=f[0],T=f[1],e=f[2],a=f[3],n=f[4],r=f[5],t=f[6],h=f[7],s=f[8],o=f[9],y=f[10],d=f[11],p=f[12],c=f[13],m=f[14],l=f[15],x=M*r-T*n,u=M*t-e*n,A=M*h-a*n,_=T*t-e*r,g=T*h-a*r,b=e*h-a*t,v=s*c-o*p,k=s*m-y*p,S=s*l-d*p,E=o*m-y*c,C=o*l-d*c,F=y*l-d*m;return x*F-u*C+A*E+_*S-g*k+b*v}},{}],200:[function(i,U,V){U.exports=w;function w(f,M){var T=M[0],e=M[1],a=M[2],n=M[3],r=T+T,t=e+e,h=a+a,s=T*r,o=e*r,y=e*t,d=a*r,p=a*t,c=a*h,m=n*r,l=n*t,x=n*h;return f[0]=1-y-c,f[1]=o+x,f[2]=d-l,f[3]=0,f[4]=o-x,f[5]=1-s-c,f[6]=p+m,f[7]=0,f[8]=d+l,f[9]=p-m,f[10]=1-s-y,f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f}},{}],201:[function(i,U,V){U.exports=w;function w(f,M,T){var e,a,n,r=T[0],t=T[1],h=T[2],s=Math.sqrt(r*r+t*t+h*h);return Math.abs(s)<1e-6?null:(s=1/s,r*=s,t*=s,h*=s,e=Math.sin(M),a=Math.cos(M),n=1-a,f[0]=r*r*n+a,f[1]=t*r*n+h*e,f[2]=h*r*n-t*e,f[3]=0,f[4]=r*t*n-h*e,f[5]=t*t*n+a,f[6]=h*t*n+r*e,f[7]=0,f[8]=r*h*n+t*e,f[9]=t*h*n-r*e,f[10]=h*h*n+a,f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f)}},{}],202:[function(i,U,V){U.exports=w;function w(f,M,T){var e=M[0],a=M[1],n=M[2],r=M[3],t=e+e,h=a+a,s=n+n,o=e*t,y=e*h,d=e*s,p=a*h,c=a*s,m=n*s,l=r*t,x=r*h,u=r*s;return f[0]=1-(p+m),f[1]=y+u,f[2]=d-x,f[3]=0,f[4]=y-u,f[5]=1-(o+m),f[6]=c+l,f[7]=0,f[8]=d+x,f[9]=c-l,f[10]=1-(o+p),f[11]=0,f[12]=T[0],f[13]=T[1],f[14]=T[2],f[15]=1,f}},{}],203:[function(i,U,V){U.exports=w;function w(f,M){return f[0]=M[0],f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=M[1],f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=M[2],f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f}},{}],204:[function(i,U,V){U.exports=w;function w(f,M){return f[0]=1,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=1,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=1,f[11]=0,f[12]=M[0],f[13]=M[1],f[14]=M[2],f[15]=1,f}},{}],205:[function(i,U,V){U.exports=w;function w(f,M){var T=Math.sin(M),e=Math.cos(M);return f[0]=1,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=e,f[6]=T,f[7]=0,f[8]=0,f[9]=-T,f[10]=e,f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f}},{}],206:[function(i,U,V){U.exports=w;function w(f,M){var T=Math.sin(M),e=Math.cos(M);return f[0]=e,f[1]=0,f[2]=-T,f[3]=0,f[4]=0,f[5]=1,f[6]=0,f[7]=0,f[8]=T,f[9]=0,f[10]=e,f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f}},{}],207:[function(i,U,V){U.exports=w;function w(f,M){var T=Math.sin(M),e=Math.cos(M);return f[0]=e,f[1]=T,f[2]=0,f[3]=0,f[4]=-T,f[5]=e,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=1,f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f}},{}],208:[function(i,U,V){U.exports=w;function w(f,M,T,e,a,n,r){var t=1/(T-M),h=1/(a-e),s=1/(n-r);return f[0]=n*2*t,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=n*2*h,f[6]=0,f[7]=0,f[8]=(T+M)*t,f[9]=(a+e)*h,f[10]=(r+n)*s,f[11]=-1,f[12]=0,f[13]=0,f[14]=r*n*2*s,f[15]=0,f}},{}],209:[function(i,U,V){U.exports=w;function w(f){return f[0]=1,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=1,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=1,f[11]=0,f[12]=0,f[13]=0,f[14]=0,f[15]=1,f}},{}],210:[function(i,U,V){U.exports={create:i("./create"),clone:i("./clone"),copy:i("./copy"),identity:i("./identity"),transpose:i("./transpose"),invert:i("./invert"),adjoint:i("./adjoint"),determinant:i("./determinant"),multiply:i("./multiply"),translate:i("./translate"),scale:i("./scale"),rotate:i("./rotate"),rotateX:i("./rotateX"),rotateY:i("./rotateY"),rotateZ:i("./rotateZ"),fromRotation:i("./fromRotation"),fromRotationTranslation:i("./fromRotationTranslation"),fromScaling:i("./fromScaling"),fromTranslation:i("./fromTranslation"),fromXRotation:i("./fromXRotation"),fromYRotation:i("./fromYRotation"),fromZRotation:i("./fromZRotation"),fromQuat:i("./fromQuat"),frustum:i("./frustum"),perspective:i("./perspective"),perspectiveFromFieldOfView:i("./perspectiveFromFieldOfView"),ortho:i("./ortho"),lookAt:i("./lookAt"),str:i("./str")}},{"./adjoint":195,"./clone":196,"./copy":197,"./create":198,"./determinant":199,"./fromQuat":200,"./fromRotation":201,"./fromRotationTranslation":202,"./fromScaling":203,"./fromTranslation":204,"./fromXRotation":205,"./fromYRotation":206,"./fromZRotation":207,"./frustum":208,"./identity":209,"./invert":211,"./lookAt":212,"./multiply":213,"./ortho":214,"./perspective":215,"./perspectiveFromFieldOfView":216,"./rotate":217,"./rotateX":218,"./rotateY":219,"./rotateZ":220,"./scale":221,"./str":222,"./translate":223,"./transpose":224}],211:[function(i,U,V){U.exports=w;function w(f,M){var T=M[0],e=M[1],a=M[2],n=M[3],r=M[4],t=M[5],h=M[6],s=M[7],o=M[8],y=M[9],d=M[10],p=M[11],c=M[12],m=M[13],l=M[14],x=M[15],u=T*t-e*r,A=T*h-a*r,_=T*s-n*r,g=e*h-a*t,b=e*s-n*t,v=a*s-n*h,k=o*m-y*c,S=o*l-d*c,E=o*x-p*c,C=y*l-d*m,F=y*x-p*m,I=d*x-p*l,D=u*I-A*F+_*C+g*E-b*S+v*k;return D?(D=1/D,f[0]=(t*I-h*F+s*C)*D,f[1]=(a*F-e*I-n*C)*D,f[2]=(m*v-l*b+x*g)*D,f[3]=(d*b-y*v-p*g)*D,f[4]=(h*E-r*I-s*S)*D,f[5]=(T*I-a*E+n*S)*D,f[6]=(l*_-c*v-x*A)*D,f[7]=(o*v-d*_+p*A)*D,f[8]=(r*F-t*E+s*k)*D,f[9]=(e*E-T*F-n*k)*D,f[10]=(c*b-m*_+x*u)*D,f[11]=(y*_-o*b-p*u)*D,f[12]=(t*S-r*C-h*k)*D,f[13]=(T*C-e*S+a*k)*D,f[14]=(m*A-c*g-l*u)*D,f[15]=(o*g-y*A+d*u)*D,f):null}},{}],212:[function(i,U,V){var w=i("./identity");U.exports=f;function f(M,T,e,a){var n,r,t,h,s,o,y,d,p,c,m=T[0],l=T[1],x=T[2],u=a[0],A=a[1],_=a[2],g=e[0],b=e[1],v=e[2];return Math.abs(m-g)<1e-6&&Math.abs(l-b)<1e-6&&Math.abs(x-v)<1e-6?w(M):(y=m-g,d=l-b,p=x-v,c=1/Math.sqrt(y*y+d*d+p*p),y*=c,d*=c,p*=c,n=A*p-_*d,r=_*y-u*p,t=u*d-A*y,c=Math.sqrt(n*n+r*r+t*t),c?(c=1/c,n*=c,r*=c,t*=c):(n=0,r=0,t=0),h=d*t-p*r,s=p*n-y*t,o=y*r-d*n,c=Math.sqrt(h*h+s*s+o*o),c?(c=1/c,h*=c,s*=c,o*=c):(h=0,s=0,o=0),M[0]=n,M[1]=h,M[2]=y,M[3]=0,M[4]=r,M[5]=s,M[6]=d,M[7]=0,M[8]=t,M[9]=o,M[10]=p,M[11]=0,M[12]=-(n*m+r*l+t*x),M[13]=-(h*m+s*l+o*x),M[14]=-(y*m+d*l+p*x),M[15]=1,M)}},{"./identity":209}],213:[function(i,U,V){U.exports=w;function w(f,M,T){var e=M[0],a=M[1],n=M[2],r=M[3],t=M[4],h=M[5],s=M[6],o=M[7],y=M[8],d=M[9],p=M[10],c=M[11],m=M[12],l=M[13],x=M[14],u=M[15],A=T[0],_=T[1],g=T[2],b=T[3];return f[0]=A*e+_*t+g*y+b*m,f[1]=A*a+_*h+g*d+b*l,f[2]=A*n+_*s+g*p+b*x,f[3]=A*r+_*o+g*c+b*u,A=T[4],_=T[5],g=T[6],b=T[7],f[4]=A*e+_*t+g*y+b*m,f[5]=A*a+_*h+g*d+b*l,f[6]=A*n+_*s+g*p+b*x,f[7]=A*r+_*o+g*c+b*u,A=T[8],_=T[9],g=T[10],b=T[11],f[8]=A*e+_*t+g*y+b*m,f[9]=A*a+_*h+g*d+b*l,f[10]=A*n+_*s+g*p+b*x,f[11]=A*r+_*o+g*c+b*u,A=T[12],_=T[13],g=T[14],b=T[15],f[12]=A*e+_*t+g*y+b*m,f[13]=A*a+_*h+g*d+b*l,f[14]=A*n+_*s+g*p+b*x,f[15]=A*r+_*o+g*c+b*u,f}},{}],214:[function(i,U,V){U.exports=w;function w(f,M,T,e,a,n,r){var t=1/(M-T),h=1/(e-a),s=1/(n-r);return f[0]=-2*t,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=-2*h,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=2*s,f[11]=0,f[12]=(M+T)*t,f[13]=(a+e)*h,f[14]=(r+n)*s,f[15]=1,f}},{}],215:[function(i,U,V){U.exports=w;function w(f,M,T,e,a){var n=1/Math.tan(M/2),r=1/(e-a);return f[0]=n/T,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=n,f[6]=0,f[7]=0,f[8]=0,f[9]=0,f[10]=(a+e)*r,f[11]=-1,f[12]=0,f[13]=0,f[14]=2*a*e*r,f[15]=0,f}},{}],216:[function(i,U,V){U.exports=w;function w(f,M,T,e){var a=Math.tan(M.upDegrees*Math.PI/180),n=Math.tan(M.downDegrees*Math.PI/180),r=Math.tan(M.leftDegrees*Math.PI/180),t=Math.tan(M.rightDegrees*Math.PI/180),h=2/(r+t),s=2/(a+n);return f[0]=h,f[1]=0,f[2]=0,f[3]=0,f[4]=0,f[5]=s,f[6]=0,f[7]=0,f[8]=-((r-t)*h*.5),f[9]=(a-n)*s*.5,f[10]=e/(T-e),f[11]=-1,f[12]=0,f[13]=0,f[14]=e*T/(T-e),f[15]=0,f}},{}],217:[function(i,U,V){U.exports=w;function w(f,M,T,e){var a=e[0],n=e[1],r=e[2],t=Math.sqrt(a*a+n*n+r*r),h,s,o,y,d,p,c,m,l,x,u,A,_,g,b,v,k,S,E,C,F,I,D,R;return Math.abs(t)<1e-6?null:(t=1/t,a*=t,n*=t,r*=t,h=Math.sin(T),s=Math.cos(T),o=1-s,y=M[0],d=M[1],p=M[2],c=M[3],m=M[4],l=M[5],x=M[6],u=M[7],A=M[8],_=M[9],g=M[10],b=M[11],v=a*a*o+s,k=n*a*o+r*h,S=r*a*o-n*h,E=a*n*o-r*h,C=n*n*o+s,F=r*n*o+a*h,I=a*r*o+n*h,D=n*r*o-a*h,R=r*r*o+s,f[0]=y*v+m*k+A*S,f[1]=d*v+l*k+_*S,f[2]=p*v+x*k+g*S,f[3]=c*v+u*k+b*S,f[4]=y*E+m*C+A*F,f[5]=d*E+l*C+_*F,f[6]=p*E+x*C+g*F,f[7]=c*E+u*C+b*F,f[8]=y*I+m*D+A*R,f[9]=d*I+l*D+_*R,f[10]=p*I+x*D+g*R,f[11]=c*I+u*D+b*R,M!==f&&(f[12]=M[12],f[13]=M[13],f[14]=M[14],f[15]=M[15]),f)}},{}],218:[function(i,U,V){U.exports=w;function w(f,M,T){var e=Math.sin(T),a=Math.cos(T),n=M[4],r=M[5],t=M[6],h=M[7],s=M[8],o=M[9],y=M[10],d=M[11];return M!==f&&(f[0]=M[0],f[1]=M[1],f[2]=M[2],f[3]=M[3],f[12]=M[12],f[13]=M[13],f[14]=M[14],f[15]=M[15]),f[4]=n*a+s*e,f[5]=r*a+o*e,f[6]=t*a+y*e,f[7]=h*a+d*e,f[8]=s*a-n*e,f[9]=o*a-r*e,f[10]=y*a-t*e,f[11]=d*a-h*e,f}},{}],219:[function(i,U,V){U.exports=w;function w(f,M,T){var e=Math.sin(T),a=Math.cos(T),n=M[0],r=M[1],t=M[2],h=M[3],s=M[8],o=M[9],y=M[10],d=M[11];return M!==f&&(f[4]=M[4],f[5]=M[5],f[6]=M[6],f[7]=M[7],f[12]=M[12],f[13]=M[13],f[14]=M[14],f[15]=M[15]),f[0]=n*a-s*e,f[1]=r*a-o*e,f[2]=t*a-y*e,f[3]=h*a-d*e,f[8]=n*e+s*a,f[9]=r*e+o*a,f[10]=t*e+y*a,f[11]=h*e+d*a,f}},{}],220:[function(i,U,V){U.exports=w;function w(f,M,T){var e=Math.sin(T),a=Math.cos(T),n=M[0],r=M[1],t=M[2],h=M[3],s=M[4],o=M[5],y=M[6],d=M[7];return M!==f&&(f[8]=M[8],f[9]=M[9],f[10]=M[10],f[11]=M[11],f[12]=M[12],f[13]=M[13],f[14]=M[14],f[15]=M[15]),f[0]=n*a+s*e,f[1]=r*a+o*e,f[2]=t*a+y*e,f[3]=h*a+d*e,f[4]=s*a-n*e,f[5]=o*a-r*e,f[6]=y*a-t*e,f[7]=d*a-h*e,f}},{}],221:[function(i,U,V){U.exports=w;function w(f,M,T){var e=T[0],a=T[1],n=T[2];return f[0]=M[0]*e,f[1]=M[1]*e,f[2]=M[2]*e,f[3]=M[3]*e,f[4]=M[4]*a,f[5]=M[5]*a,f[6]=M[6]*a,f[7]=M[7]*a,f[8]=M[8]*n,f[9]=M[9]*n,f[10]=M[10]*n,f[11]=M[11]*n,f[12]=M[12],f[13]=M[13],f[14]=M[14],f[15]=M[15],f}},{}],222:[function(i,U,V){U.exports=w;function w(f){return"mat4("+f[0]+", "+f[1]+", "+f[2]+", "+f[3]+", "+f[4]+", "+f[5]+", "+f[6]+", "+f[7]+", "+f[8]+", "+f[9]+", "+f[10]+", "+f[11]+", "+f[12]+", "+f[13]+", "+f[14]+", "+f[15]+")"}},{}],223:[function(i,U,V){U.exports=w;function w(f,M,T){var e=T[0],a=T[1],n=T[2],r,t,h,s,o,y,d,p,c,m,l,x;return M===f?(f[12]=M[0]*e+M[4]*a+M[8]*n+M[12],f[13]=M[1]*e+M[5]*a+M[9]*n+M[13],f[14]=M[2]*e+M[6]*a+M[10]*n+M[14],f[15]=M[3]*e+M[7]*a+M[11]*n+M[15]):(r=M[0],t=M[1],h=M[2],s=M[3],o=M[4],y=M[5],d=M[6],p=M[7],c=M[8],m=M[9],l=M[10],x=M[11],f[0]=r,f[1]=t,f[2]=h,f[3]=s,f[4]=o,f[5]=y,f[6]=d,f[7]=p,f[8]=c,f[9]=m,f[10]=l,f[11]=x,f[12]=r*e+o*a+c*n+M[12],f[13]=t*e+y*a+m*n+M[13],f[14]=h*e+d*a+l*n+M[14],f[15]=s*e+p*a+x*n+M[15]),f}},{}],224:[function(i,U,V){U.exports=w;function w(f,M){if(f===M){var T=M[1],e=M[2],a=M[3],n=M[6],r=M[7],t=M[11];f[1]=M[4],f[2]=M[8],f[3]=M[12],f[4]=T,f[6]=M[9],f[7]=M[13],f[8]=e,f[9]=n,f[11]=M[14],f[12]=a,f[13]=r,f[14]=t}else f[0]=M[0],f[1]=M[4],f[2]=M[8],f[3]=M[12],f[4]=M[1],f[5]=M[5],f[6]=M[9],f[7]=M[13],f[8]=M[2],f[9]=M[6],f[10]=M[10],f[11]=M[14],f[12]=M[3],f[13]=M[7],f[14]=M[11],f[15]=M[15];return f}},{}],225:[function(i,U,V){var w=i("css-font"),f=i("pick-by-alias"),M=i("regl"),T=i("gl-util/context"),e=i("es6-weak-map"),a=i("color-normalize"),n=i("font-atlas"),r=i("typedarray-pool"),t=i("parse-rect"),h=i("is-plain-obj"),s=i("parse-unit"),o=i("to-px"),y=i("detect-kerning"),d=i("object-assign"),p=i("font-measure"),c=i("flatten-vertex-data"),m=i("bit-twiddle"),l=m.nextPow2,x=new e,u=!1;if(document.body){var A=document.body.appendChild(document.createElement("div"));A.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(A).fontStretch&&(u=!0),document.body.removeChild(A)}var _=function(v){g(v)?(v={regl:v},this.gl=v.regl._gl):this.gl=T(v),this.shader=x.get(this.gl),this.shader?this.regl=this.shader.regl:this.regl=v.regl||M({gl:this.gl}),this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"}),this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"}),this.shader||(this.shader=this.createShader(),x.set(this.gl,this.shader)),this.batch=[],this.fontSize=[],this.font=[],this.fontAtlas=[],this.draw=this.shader.draw.bind(this),this.render=function(){this.regl._refresh(),this.draw(this.batch)},this.canvas=this.gl.canvas,this.update(h(v)?v:{})};_.prototype.createShader=function(){var v=this.regl,k=v({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:v.prop("count"),offset:v.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:v.this("sizeBuffer")},width:{offset:0,stride:8,buffer:v.this("sizeBuffer")},char:v.this("charBuffer"),position:v.this("position")},uniforms:{atlasSize:function(E,C){return[C.atlas.width,C.atlas.height]},atlasDim:function(E,C){return[C.atlas.cols,C.atlas.rows]},atlas:function(E,C){return C.atlas.texture},charStep:function(E,C){return C.atlas.step},em:function(E,C){return C.atlas.em},color:v.prop("color"),opacity:v.prop("opacity"),viewport:v.this("viewportArray"),scale:v.this("scale"),align:v.prop("align"),baseline:v.prop("baseline"),translate:v.this("translate"),positionOffset:v.prop("positionOffset")},primitive:"points",viewport:v.this("viewport"),vert:`
			precision highp float;
			attribute float width, charOffset, char;
			attribute vec2 position;
			uniform float fontSize, charStep, em, align, baseline;
			uniform vec4 viewport;
			uniform vec4 color;
			uniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;
			varying vec2 charCoord, charId;
			varying float charWidth;
			varying vec4 fontColor;
			void main () {
				vec2 offset = floor(em * (vec2(align + charOffset, baseline)
					+ vec2(positionOffset.x, -positionOffset.y)))
					/ (viewport.zw * scale.xy);

				vec2 position = (position + translate) * scale;
				position += offset * scale;

				charCoord = position * viewport.zw + viewport.xy;

				gl_Position = vec4(position * 2. - 1., 0, 1);

				gl_PointSize = charStep;

				charId.x = mod(char, atlasDim.x);
				charId.y = floor(char / atlasDim.x);

				charWidth = width * em;

				fontColor = color / 255.;
			}`,frag:`
			precision highp float;
			uniform float fontSize, charStep, opacity;
			uniform vec2 atlasSize;
			uniform vec4 viewport;
			uniform sampler2D atlas;
			varying vec4 fontColor;
			varying vec2 charCoord, charId;
			varying float charWidth;

			float lightness(vec4 color) {
				return color.r * 0.299 + color.g * 0.587 + color.b * 0.114;
			}

			void main () {
				vec2 uv = gl_FragCoord.xy - charCoord + charStep * .5;
				float halfCharStep = floor(charStep * .5 + .5);

				// invert y and shift by 1px (FF expecially needs that)
				uv.y = charStep - uv.y;

				// ignore points outside of character bounding box
				float halfCharWidth = ceil(charWidth * .5);
				if (floor(uv.x) > halfCharStep + halfCharWidth ||
					floor(uv.x) < halfCharStep - halfCharWidth) return;

				uv += charId * charStep;
				uv = uv / atlasSize;

				vec4 color = fontColor;
				vec4 mask = texture2D(atlas, uv);

				float maskY = lightness(mask);
				// float colorY = lightness(color);
				color.a *= maskY;
				color.a *= opacity;

				// color.a += .1;

				// antialiasing, see yiq color space y-channel formula
				// color.rgb += (1. - color.rgb) * (1. - mask.rgb);

				gl_FragColor = color;
			}`}),S={};return{regl:v,draw:k,atlas:S}},_.prototype.update=function(v){var k=this;if(typeof v=="string")v={text:v};else if(!v)return;v=f(v,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0),v.opacity!=null&&(Array.isArray(v.opacity)?this.opacity=v.opacity.map(function(we){return parseFloat(we)}):this.opacity=parseFloat(v.opacity)),v.viewport!=null&&(this.viewport=t(v.viewport),this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),this.viewport==null&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),v.kerning!=null&&(this.kerning=v.kerning),v.offset!=null&&(typeof v.offset=="number"&&(v.offset=[v.offset,0]),this.positionOffset=c(v.offset)),v.direction&&(this.direction=v.direction),v.range&&(this.range=v.range,this.scale=[1/(v.range[2]-v.range[0]),1/(v.range[3]-v.range[1])],this.translate=[-v.range[0],-v.range[1]]),v.scale&&(this.scale=v.scale),v.translate&&(this.translate=v.translate),this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]),this.translate||(this.translate=[0,0]),!this.font.length&&!v.font&&(v.font=_.baseFontSize+"px sans-serif");var S=!1,E=!1;if(v.font&&(Array.isArray(v.font)?v.font:[v.font]).forEach(function(we,Ce){if(typeof we=="string")try{we=w.parse(we)}catch{we=w.parse(_.baseFontSize+"px "+we)}else we=w.parse(w.stringify(we));var Ke=w.stringify({size:_.baseFontSize,family:we.family,stretch:u?we.stretch:void 0,variant:we.variant,weight:we.weight,style:we.style}),Ye=s(we.size),Fe=Math.round(Ye[0]*o(Ye[1]));if(Fe!==k.fontSize[Ce]&&(E=!0,k.fontSize[Ce]=Fe),(!k.font[Ce]||Ke!=k.font[Ce].baseString)&&(S=!0,k.font[Ce]=_.fonts[Ke],!k.font[Ce])){var Re=we.family.join(", "),je=[we.style];we.style!=we.variant&&je.push(we.variant),we.variant!=we.weight&&je.push(we.weight),u&&we.weight!=we.stretch&&je.push(we.stretch),k.font[Ce]={baseString:Ke,family:Re,weight:we.weight,stretch:we.stretch,style:we.style,variant:we.variant,width:{},kerning:{},metrics:p(Re,{origin:"top",fontSize:_.baseFontSize,fontStyle:je.join(" ")})},_.fonts[Ke]=k.font[Ce]}}),(S||E)&&this.font.forEach(function(we,Ce){var Ke=w.stringify({size:k.fontSize[Ce],family:we.family,stretch:u?we.stretch:void 0,variant:we.variant,weight:we.weight,style:we.style});if(k.fontAtlas[Ce]=k.shader.atlas[Ke],!k.fontAtlas[Ce]){var Ye=we.metrics;k.shader.atlas[Ke]=k.fontAtlas[Ce]={fontString:Ke,step:Math.ceil(k.fontSize[Ce]*Ye.bottom*.5)*2,em:k.fontSize[Ce],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:k.regl.texture()}}v.text==null&&(v.text=k.text)}),typeof v.text=="string"&&v.position&&v.position.length>2){for(var C=Array(v.position.length*.5),F=0;F<C.length;F++)C[F]=v.text;v.text=C}var I;if(v.text!=null||S){if(this.textOffsets=[0],Array.isArray(v.text)){this.count=v.text[0].length,this.counts=[this.count];for(var D=1;D<v.text.length;D++)this.textOffsets[D]=this.textOffsets[D-1]+v.text[D-1].length,this.count+=v.text[D].length,this.counts.push(v.text[D].length);this.text=v.text.join("")}else this.text=v.text,this.count=this.text.length,this.counts=[this.count];I=[],this.font.forEach(function(we,Ce){_.atlasContext.font=we.baseString;for(var Ke=k.fontAtlas[Ce],Ye=0;Ye<k.text.length;Ye++){var Fe=k.text.charAt(Ye);if(Ke.ids[Fe]==null&&(Ke.ids[Fe]=Ke.chars.length,Ke.chars.push(Fe),I.push(Fe)),we.width[Fe]==null&&(we.width[Fe]=_.atlasContext.measureText(Fe).width/_.baseFontSize,k.kerning)){var Re=[];for(var je in we.width)Re.push(je+Fe,Fe+je);d(we.kerning,y(we.family,{pairs:Re}))}}})}if(v.position)if(v.position.length>2){for(var R=!v.position[0].length,O=r.mallocFloat(this.count*2),z=0,B=0;z<this.counts.length;z++){var G=this.counts[z];if(R)for(var Q=0;Q<G;Q++)O[B++]=v.position[z*2],O[B++]=v.position[z*2+1];else for(var X=0;X<G;X++)O[B++]=v.position[z][0],O[B++]=v.position[z][1]}this.position.call?this.position({type:"float",data:O}):this.position=this.regl.buffer({type:"float",data:O}),r.freeFloat(O)}else this.position.destroy&&this.position.destroy(),this.position={constant:v.position};if(v.text||S){var j=r.mallocUint8(this.count),re=r.mallocFloat(this.count*2);this.textWidth=[];for(var ue=0,K=0;ue<this.counts.length;ue++){for(var te=this.counts[ue],Y=this.font[ue]||this.font[0],H=this.fontAtlas[ue]||this.fontAtlas[0],ee=0;ee<te;ee++){var ne=this.text.charAt(K),Z=this.text.charAt(K-1);if(j[K]=H.ids[ne],re[K*2]=Y.width[ne],ee){var q=re[K*2-2],ie=re[K*2],se=re[K*2-1],ae=se+q*.5+ie*.5;if(this.kerning){var oe=Y.kerning[Z+ne];oe&&(ae+=oe*.001)}re[K*2+1]=ae}else re[K*2+1]=re[K*2]*.5;K++}this.textWidth.push(re.length?re[K*2-2]*.5+re[K*2-1]:0)}v.align||(v.align=this.align),this.charBuffer({data:j,type:"uint8",usage:"stream"}),this.sizeBuffer({data:re,type:"float",usage:"stream"}),r.freeUint8(j),r.freeFloat(re),I.length&&this.font.forEach(function(we,Ce){var Ke=k.fontAtlas[Ce],Ye=Ke.step,Fe=Math.floor(_.maxAtlasSize/Ye),Re=Math.min(Fe,Ke.chars.length),je=Math.ceil(Ke.chars.length/Re),xt=l(Re*Ye),Nt=l(je*Ye);Ke.width=xt,Ke.height=Nt,Ke.rows=je,Ke.cols=Re,Ke.em&&Ke.texture({data:n({canvas:_.atlasCanvas,font:Ke.fontString,chars:Ke.chars,shape:[xt,Nt],step:[Ye,Ye]})})})}if(v.align&&(this.align=v.align,this.alignOffset=this.textWidth.map(function(we,Ce){var Ke=Array.isArray(k.align)?k.align.length>1?k.align[Ce]:k.align[0]:k.align;if(typeof Ke=="number")return Ke;switch(Ke){case"right":case"end":return-we;case"center":case"centre":case"middle":return-we*.5}return 0})),this.baseline==null&&v.baseline==null&&(v.baseline=0),v.baseline!=null&&(this.baseline=v.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function(we,Ce){var Ke=(k.font[Ce]||k.font[0]).metrics,Ye=0;return Ye+=Ke.bottom*.5,typeof we=="number"?Ye+=we-Ke.baseline:Ye+=-Ke[we],Ye*=-1,Ye})),v.color!=null)if(v.color||(v.color="transparent"),typeof v.color=="string"||!isNaN(v.color))this.color=a(v.color,"uint8");else{var be;if(typeof v.color[0]=="number"&&v.color.length>this.counts.length){var ce=v.color.length;be=r.mallocUint8(ce);for(var de=(v.color.subarray||v.color.slice).bind(v.color),ye=0;ye<ce;ye+=4)be.set(a(de(ye,ye+4),"uint8"),ye)}else{var ge=v.color.length;be=r.mallocUint8(ge*4);for(var me=0;me<ge;me++)be.set(a(v.color[me]||0,"uint8"),me*4)}this.color=be}if(v.position||v.text||v.color||v.baseline||v.align||v.font||v.offset||v.opacity){var Se=this.color.length>4||this.baselineOffset.length>1||this.align&&this.align.length>1||this.fontAtlas.length>1||this.positionOffset.length>2;if(Se){var Le=Math.max(this.position.length*.5||0,this.color.length*.25||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,this.positionOffset.length*.5||0);this.batch=Array(Le);for(var Oe=0;Oe<this.batch.length;Oe++)this.batch[Oe]={count:this.counts.length>1?this.counts[Oe]:this.counts[0],offset:this.textOffsets.length>1?this.textOffsets[Oe]:this.textOffsets[0],color:this.color?this.color.length<=4?this.color:this.color.subarray(Oe*4,Oe*4+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[Oe]:this.opacity,baseline:this.baselineOffset[Oe]!=null?this.baselineOffset[Oe]:this.baselineOffset[0],align:this.align?this.alignOffset[Oe]!=null?this.alignOffset[Oe]:this.alignOffset[0]:0,atlas:this.fontAtlas[Oe]||this.fontAtlas[0],positionOffset:this.positionOffset.length>2?this.positionOffset.subarray(Oe*2,Oe*2+2):this.positionOffset}}else this.count?this.batch=[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:this.batch=[]}},_.prototype.destroy=function(){},_.prototype.kerning=!0,_.prototype.position={constant:new Float32Array(2)},_.prototype.translate=null,_.prototype.scale=null,_.prototype.font=null,_.prototype.text="",_.prototype.positionOffset=[0,0],_.prototype.opacity=1,_.prototype.color=new Uint8Array([0,0,0,255]),_.prototype.alignOffset=[0,0],_.maxAtlasSize=1024,_.atlasCanvas=document.createElement("canvas"),_.atlasContext=_.atlasCanvas.getContext("2d",{alpha:!1}),_.baseFontSize=64,_.fonts={};function g(b){return typeof b=="function"&&b._gl&&b.prop&&b.texture&&b.buffer}U.exports=_},{"bit-twiddle":81,"color-normalize":89,"css-font":99,"detect-kerning":125,"es6-weak-map":183,"flatten-vertex-data":191,"font-atlas":192,"font-measure":193,"gl-util/context":226,"is-plain-obj":236,"object-assign":247,"parse-rect":249,"parse-unit":251,"pick-by-alias":253,regl:284,"to-px":315,"typedarray-pool":328}],226:[function(i,U,V){(function(w){(function(){var f=i("pick-by-alias");U.exports=function(t){if(t?typeof t=="string"&&(t={container:t}):t={},T(t)?t={container:t}:e(t)?t={container:t}:a(t)?t={gl:t}:t=f(t,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0),t.pixelRatio||(t.pixelRatio=w.pixelRatio||1),t.gl)return t.gl;if(t.canvas&&(t.container=t.canvas.parentNode),t.container){if(typeof t.container=="string"){var h=document.querySelector(t.container);if(!h)throw Error("Element "+t.container+" is not found");t.container=h}T(t.container)?(t.canvas=t.container,t.container=t.canvas.parentNode):t.canvas||(t.canvas=n(),t.container.appendChild(t.canvas),M(t))}else if(!t.canvas)if(typeof document<"u")t.container=document.body||document.documentElement,t.canvas=n(),t.container.appendChild(t.canvas),M(t);else throw Error("Not DOM environment. Use headless-gl.");return t.gl||["webgl","experimental-webgl","webgl-experimental"].some(function(s){try{t.gl=t.canvas.getContext(s,t.attrs)}catch{}return t.gl}),t.gl};function M(r){if(r.container)if(r.container==document.body)document.body.style.width||(r.canvas.width=r.width||r.pixelRatio*w.innerWidth),document.body.style.height||(r.canvas.height=r.height||r.pixelRatio*w.innerHeight);else{var t=r.container.getBoundingClientRect();r.canvas.width=r.width||t.right-t.left,r.canvas.height=r.height||t.bottom-t.top}}function T(r){return typeof r.getContext=="function"&&"width"in r&&"height"in r}function e(r){return typeof r.nodeName=="string"&&typeof r.appendChild=="function"&&typeof r.getBoundingClientRect=="function"}function a(r){return typeof r.drawArrays=="function"||typeof r.drawElements=="function"}function n(){var r=document.createElement("canvas");return r.style.position="absolute",r.style.top=0,r.style.left=0,r}}).call(this)}).call(this,typeof Je<"u"?Je:typeof self<"u"?self:typeof window<"u"?window:{})},{"pick-by-alias":253}],227:[function(i,U,V){U.exports=function(w){typeof w=="string"&&(w=[w]);for(var f=[].slice.call(arguments,1),M=[],T=0;T<w.length-1;T++)M.push(w[T],f[T]||"");return M.push(w[T]),M.join("")}},{}],228:[function(i,U,V){(function(w){(function(){var f=i("is-browser"),M;typeof w.matchMedia=="function"?M=!w.matchMedia("(hover: none)").matches:M=f,U.exports=M}).call(this)}).call(this,typeof Je<"u"?Je:typeof self<"u"?self:typeof window<"u"?window:{})},{"is-browser":232}],229:[function(i,U,V){var w=i("is-browser");function f(){var M=!1;try{var T=Object.defineProperty({},"passive",{get:function(){M=!0}});window.addEventListener("test",null,T),window.removeEventListener("test",null,T)}catch{M=!1}return M}U.exports=w&&f()},{"is-browser":232}],230:[function(i,U,V){V.read=function(w,f,M,T,e){var a,n,r=e*8-T-1,t=(1<<r)-1,h=t>>1,s=-7,o=M?e-1:0,y=M?-1:1,d=w[f+o];for(o+=y,a=d&(1<<-s)-1,d>>=-s,s+=r;s>0;a=a*256+w[f+o],o+=y,s-=8);for(n=a&(1<<-s)-1,a>>=-s,s+=T;s>0;n=n*256+w[f+o],o+=y,s-=8);if(a===0)a=1-h;else{if(a===t)return n?NaN:(d?-1:1)*(1/0);n=n+Math.pow(2,T),a=a-h}return(d?-1:1)*n*Math.pow(2,a-T)},V.write=function(w,f,M,T,e,a){var n,r,t,h=a*8-e-1,s=(1<<h)-1,o=s>>1,y=e===23?Math.pow(2,-24)-Math.pow(2,-77):0,d=T?0:a-1,p=T?1:-1,c=f<0||f===0&&1/f<0?1:0;for(f=Math.abs(f),isNaN(f)||f===1/0?(r=isNaN(f)?1:0,n=s):(n=Math.floor(Math.log(f)/Math.LN2),f*(t=Math.pow(2,-n))<1&&(n--,t*=2),n+o>=1?f+=y/t:f+=y*Math.pow(2,1-o),f*t>=2&&(n++,t/=2),n+o>=s?(r=0,n=s):n+o>=1?(r=(f*t-1)*Math.pow(2,e),n=n+o):(r=f*Math.pow(2,o-1)*Math.pow(2,e),n=0));e>=8;w[M+d]=r&255,d+=p,r/=256,e-=8);for(n=n<<e|r,h+=e;h>0;w[M+d]=n&255,d+=p,n/=256,h-=8);w[M+d-p]|=c*128}},{}],231:[function(i,U,V){typeof Object.create=="function"?U.exports=function(f,M){M&&(f.super_=M,f.prototype=Object.create(M.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}))}:U.exports=function(f,M){if(M){f.super_=M;var T=function(){};T.prototype=M.prototype,f.prototype=new T,f.prototype.constructor=f}}},{}],232:[function(i,U,V){U.exports=!0},{}],233:[function(i,U,V){U.exports=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},{}],234:[function(i,U,V){U.exports=M,U.exports.isMobile=M,U.exports.default=M;var w=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,f=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function M(T){T||(T={});var e=T.ua;if(!e&&typeof navigator<"u"&&(e=navigator.userAgent),e&&e.headers&&typeof e.headers["user-agent"]=="string"&&(e=e.headers["user-agent"]),typeof e!="string")return!1;var a=T.tablet?f.test(e):w.test(e);return!a&&T.tablet&&T.featureDetect&&navigator&&navigator.maxTouchPoints>1&&e.indexOf("Macintosh")!==-1&&e.indexOf("Safari")!==-1&&(a=!0),a}},{}],235:[function(i,U,V){U.exports=function(w){var f=typeof w;return w!==null&&(f==="object"||f==="function")}},{}],236:[function(i,U,V){var w=Object.prototype.toString;U.exports=function(f){var M;return w.call(f)==="[object Object]"&&(M=Object.getPrototypeOf(f),M===null||M===Object.getPrototypeOf({}))}},{}],237:[function(i,U,V){U.exports=function(w){for(var f=w.length,M,T=0;T<f;T++)if(M=w.charCodeAt(T),(M<9||M>13)&&M!==32&&M!==133&&M!==160&&M!==5760&&M!==6158&&(M<8192||M>8205)&&M!==8232&&M!==8233&&M!==8239&&M!==8287&&M!==8288&&M!==12288&&M!==65279)return!1;return!0}},{}],238:[function(i,U,V){U.exports=function(f){return typeof f!="string"?!1:(f=f.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(f)&&/[\dz]$/i.test(f)&&f.length>4))}},{}],239:[function(i,U,V){(function(w,f){typeof V=="object"&&typeof U<"u"?U.exports=f():(w=w||self,w.mapboxgl=f())})(this,function(){var w,f,M;function T(e,a){if(!w)w=a;else if(!f)f=a;else{var n="var sharedChunk = {}; ("+w+")(sharedChunk); ("+f+")(sharedChunk);",r={};w(r),M=a(r),M.workerUrl=window.URL.createObjectURL(new Blob([n],{type:"text/javascript"}))}}return T(["exports"],function(e){function a(L,P){return P={exports:{}},L(P,P.exports),P.exports}var n="1.10.1",r=t;function t(L,P,N,$){this.cx=3*L,this.bx=3*(N-L)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*P,this.by=3*($-P)-this.cy,this.ay=1-this.cy-this.by,this.p1x=L,this.p1y=$,this.p2x=N,this.p2y=$}t.prototype.sampleCurveX=function(L){return((this.ax*L+this.bx)*L+this.cx)*L},t.prototype.sampleCurveY=function(L){return((this.ay*L+this.by)*L+this.cy)*L},t.prototype.sampleCurveDerivativeX=function(L){return(3*this.ax*L+2*this.bx)*L+this.cx},t.prototype.solveCurveX=function(L,P){typeof P>"u"&&(P=1e-6);var N,$,he,xe,Te;for(he=L,Te=0;Te<8;Te++){if(xe=this.sampleCurveX(he)-L,Math.abs(xe)<P)return he;var Ne=this.sampleCurveDerivativeX(he);if(Math.abs(Ne)<1e-6)break;he=he-xe/Ne}if(N=0,$=1,he=L,he<N)return N;if(he>$)return $;for(;N<$;){if(xe=this.sampleCurveX(he),Math.abs(xe-L)<P)return he;L>xe?N=he:$=he,he=($-N)*.5+N}return he},t.prototype.solve=function(L,P){return this.sampleCurveY(this.solveCurveX(L,P))};var h=s;function s(L,P){this.x=L,this.y=P}s.prototype={clone:function(){return new s(this.x,this.y)},add:function(L){return this.clone()._add(L)},sub:function(L){return this.clone()._sub(L)},multByPoint:function(L){return this.clone()._multByPoint(L)},divByPoint:function(L){return this.clone()._divByPoint(L)},mult:function(L){return this.clone()._mult(L)},div:function(L){return this.clone()._div(L)},rotate:function(L){return this.clone()._rotate(L)},rotateAround:function(L,P){return this.clone()._rotateAround(L,P)},matMult:function(L){return this.clone()._matMult(L)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(L){return this.x===L.x&&this.y===L.y},dist:function(L){return Math.sqrt(this.distSqr(L))},distSqr:function(L){var P=L.x-this.x,N=L.y-this.y;return P*P+N*N},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(L){return Math.atan2(this.y-L.y,this.x-L.x)},angleWith:function(L){return this.angleWithSep(L.x,L.y)},angleWithSep:function(L,P){return Math.atan2(this.x*P-this.y*L,this.x*L+this.y*P)},_matMult:function(L){var P=L[0]*this.x+L[1]*this.y,N=L[2]*this.x+L[3]*this.y;return this.x=P,this.y=N,this},_add:function(L){return this.x+=L.x,this.y+=L.y,this},_sub:function(L){return this.x-=L.x,this.y-=L.y,this},_mult:function(L){return this.x*=L,this.y*=L,this},_div:function(L){return this.x/=L,this.y/=L,this},_multByPoint:function(L){return this.x*=L.x,this.y*=L.y,this},_divByPoint:function(L){return this.x/=L.x,this.y/=L.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var L=this.y;return this.y=this.x,this.x=-L,this},_rotate:function(L){var P=Math.cos(L),N=Math.sin(L),$=P*this.x-N*this.y,he=N*this.x+P*this.y;return this.x=$,this.y=he,this},_rotateAround:function(L,P){var N=Math.cos(L),$=Math.sin(L),he=P.x+N*(this.x-P.x)-$*(this.y-P.y),xe=P.y+$*(this.x-P.x)+N*(this.y-P.y);return this.x=he,this.y=xe,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},s.convert=function(L){return L instanceof s?L:Array.isArray(L)?new s(L[0],L[1]):L};function o(L,P){if(Array.isArray(L)){if(!Array.isArray(P)||L.length!==P.length)return!1;for(var N=0;N<L.length;N++)if(!o(L[N],P[N]))return!1;return!0}if(typeof L=="object"&&L!==null&&P!==null){if(typeof P!="object")return!1;var $=Object.keys(L);if($.length!==Object.keys(P).length)return!1;for(var he in L)if(!o(L[he],P[he]))return!1;return!0}return L===P}function y(L){if(L<=0)return 0;if(L>=1)return 1;var P=L*L,N=P*L;return 4*(L<.5?N:3*(L-P)+N-.75)}function d(L,P,N,$){var he=new r(L,P,N,$);return function(xe){return he.solve(xe)}}var p=d(.25,.1,.25,1);function c(L,P,N){return Math.min(N,Math.max(P,L))}function m(L,P,N){var $=N-P,he=((L-P)%$+$)%$+P;return he===P?N:he}function l(L,P,N){if(!L.length)return N(null,[]);var $=L.length,he=new Array(L.length),xe=null;L.forEach(function(Te,Ne){P(Te,function(nt,gt){nt&&(xe=nt),he[Ne]=gt,--$===0&&N(xe,he)})})}function x(L){var P=[];for(var N in L)P.push(L[N]);return P}function u(L,P){var N=[];for(var $ in L)$ in P||N.push($);return N}function A(L){for(var P=[],N=arguments.length-1;N-- >0;)P[N]=arguments[N+1];for(var $=0,he=P;$<he.length;$+=1){var xe=he[$];for(var Te in xe)L[Te]=xe[Te]}return L}function _(L,P){for(var N={},$=0;$<P.length;$++){var he=P[$];he in L&&(N[he]=L[he])}return N}var g=1;function b(){return g++}function v(){function L(P){return P?(P^Math.random()*16>>P/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,L)}return L()}function k(L){return L?/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(L):!1}function S(L,P){L.forEach(function(N){!P[N]||(P[N]=P[N].bind(P))})}function E(L,P){return L.indexOf(P,L.length-P.length)!==-1}function C(L,P,N){var $={};for(var he in L)$[he]=P.call(N||this,L[he],he,L);return $}function F(L,P,N){var $={};for(var he in L)P.call(N||this,L[he],he,L)&&($[he]=L[he]);return $}function I(L){return Array.isArray(L)?L.map(I):typeof L=="object"&&L?C(L,I):L}function D(L,P){for(var N=0;N<L.length;N++)if(P.indexOf(L[N])>=0)return!0;return!1}var R={};function O(L){R[L]||(typeof console<"u"&&console.warn(L),R[L]=!0)}function z(L,P,N){return(N.y-L.y)*(P.x-L.x)>(P.y-L.y)*(N.x-L.x)}function B(L){for(var P=0,N=0,$=L.length,he=$-1,xe=void 0,Te=void 0;N<$;he=N++)xe=L[N],Te=L[he],P+=(Te.x-xe.x)*(xe.y+Te.y);return P}function G(L){var P=L[0],N=L[1],$=L[2];return N+=90,N*=Math.PI/180,$*=Math.PI/180,{x:P*Math.cos(N)*Math.sin($),y:P*Math.sin(N)*Math.sin($),z:P*Math.cos($)}}function Q(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function X(L){var P=/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,N={};if(L.replace(P,function(he,xe,Te,Ne){var nt=Te||Ne;return N[xe]=nt?nt.toLowerCase():!0,""}),N["max-age"]){var $=parseInt(N["max-age"],10);isNaN($)?delete N["max-age"]:N["max-age"]=$}return N}var j=null;function re(L){if(j==null){var P=L.navigator?L.navigator.userAgent:null;j=!!L.safari||!!(P&&(/\b(iPad|iPhone|iPod)\b/.test(P)||!!P.match("Safari")&&!P.match("Chrome")))}return j}function ue(L){try{var P=self[L];return P.setItem("_mapbox_test_",1),P.removeItem("_mapbox_test_"),!0}catch{return!1}}function K(L){return self.btoa(encodeURIComponent(L).replace(/%([0-9A-F]{2})/g,function(P,N){return String.fromCharCode(Number("0x"+N))}))}function te(L){return decodeURIComponent(self.atob(L).split("").map(function(P){return"%"+("00"+P.charCodeAt(0).toString(16)).slice(-2)}).join(""))}var Y=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),H=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,ee=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,ne,Z,q={now:Y,frame:function(P){var N=H(P);return{cancel:function(){return ee(N)}}},getImageData:function(P,N){N===void 0&&(N=0);var $=self.document.createElement("canvas"),he=$.getContext("2d");if(!he)throw new Error("failed to create canvas 2d context");return $.width=P.width,$.height=P.height,he.drawImage(P,0,0,P.width,P.height),he.getImageData(-N,-N,P.width+2*N,P.height+2*N)},resolveURL:function(P){return ne||(ne=self.document.createElement("a")),ne.href=P,ne.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio},get prefersReducedMotion(){return self.matchMedia?(Z==null&&(Z=self.matchMedia("(prefers-reduced-motion: reduce)")),Z.matches):!1}},ie={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},se={supported:!1,testSupport:de},ae,oe=!1,be,ce=!1;self.document&&(be=self.document.createElement("img"),be.onload=function(){ae&&ye(ae),ae=null,ce=!0},be.onerror=function(){oe=!0,ae=null},be.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");function de(L){oe||!be||(ce?ye(L):ae=L)}function ye(L){var P=L.createTexture();L.bindTexture(L.TEXTURE_2D,P);try{if(L.texImage2D(L.TEXTURE_2D,0,L.RGBA,L.RGBA,L.UNSIGNED_BYTE,be),L.isContextLost())return;se.supported=!0}catch{}L.deleteTexture(P),oe=!0}var ge="01";function me(){for(var L="1",P="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",N="",$=0;$<10;$++)N+=P[Math.floor(Math.random()*62)];var he=12*60*60*1e3,xe=[L,ge,N].join(""),Te=Date.now()+he;return{token:xe,tokenExpiresAt:Te}}var Se=function(P,N){this._transformRequestFn=P,this._customAccessToken=N,this._createSkuToken()};Se.prototype._createSkuToken=function(){var P=me();this._skuToken=P.token,this._skuTokenExpiresAt=P.tokenExpiresAt},Se.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},Se.prototype.transformRequest=function(P,N){return this._transformRequestFn?this._transformRequestFn(P,N)||{url:P}:{url:P}},Se.prototype.normalizeStyleURL=function(P,N){if(!Le(P))return P;var $=Fe(P);return $.path="/styles/v1"+$.path,this._makeAPIURL($,this._customAccessToken||N)},Se.prototype.normalizeGlyphsURL=function(P,N){if(!Le(P))return P;var $=Fe(P);return $.path="/fonts/v1"+$.path,this._makeAPIURL($,this._customAccessToken||N)},Se.prototype.normalizeSourceURL=function(P,N){if(!Le(P))return P;var $=Fe(P);return $.path="/v4/"+$.authority+".json",$.params.push("secure"),this._makeAPIURL($,this._customAccessToken||N)},Se.prototype.normalizeSpriteURL=function(P,N,$,he){var xe=Fe(P);return Le(P)?(xe.path="/styles/v1"+xe.path+"/sprite"+N+$,this._makeAPIURL(xe,this._customAccessToken||he)):(xe.path+=""+N+$,Re(xe))},Se.prototype.normalizeTileURL=function(P,N){if(this._isSkuTokenExpired()&&this._createSkuToken(),P&&!Le(P))return P;var $=Fe(P),he=/(\.(png|jpg)\d*)(?=$)/,xe=/^.+\/v4\//,Te=q.devicePixelRatio>=2||N===512?"@2x":"",Ne=se.supported?".webp":"$1";$.path=$.path.replace(he,""+Te+Ne),$.path=$.path.replace(xe,"/"),$.path="/v4"+$.path;var nt=this._customAccessToken||Ke($.params)||ie.ACCESS_TOKEN;return ie.REQUIRE_ACCESS_TOKEN&&nt&&this._skuToken&&$.params.push("sku="+this._skuToken),this._makeAPIURL($,nt)},Se.prototype.canonicalizeTileURL=function(P,N){var $="/v4/",he=/\.[\w]+$/,xe=Fe(P);if(!xe.path.match(/(^\/v4\/)/)||!xe.path.match(he))return P;var Te="mapbox://tiles/";Te+=xe.path.replace($,"");var Ne=xe.params;return N&&(Ne=Ne.filter(function(nt){return!nt.match(/^access_token=/)})),Ne.length&&(Te+="?"+Ne.join("&")),Te},Se.prototype.canonicalizeTileset=function(P,N){for(var $=N?Le(N):!1,he=[],xe=0,Te=P.tiles||[];xe<Te.length;xe+=1){var Ne=Te[xe];we(Ne)?he.push(this.canonicalizeTileURL(Ne,$)):he.push(Ne)}return he},Se.prototype._makeAPIURL=function(P,N){var $="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",he=Fe(ie.API_URL);if(P.protocol=he.protocol,P.authority=he.authority,he.path!=="/"&&(P.path=""+he.path+P.path),!ie.REQUIRE_ACCESS_TOKEN)return Re(P);if(N=N||ie.ACCESS_TOKEN,!N)throw new Error("An API access token is required to use Mapbox GL. "+$);if(N[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+$);return P.params=P.params.filter(function(xe){return xe.indexOf("access_token")===-1}),P.params.push("access_token="+N),Re(P)};function Le(L){return L.indexOf("mapbox:")===0}var Oe=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function we(L){return Oe.test(L)}function Ce(L){return L.indexOf("sku=")>0&&we(L)}function Ke(L){for(var P=0,N=L;P<N.length;P+=1){var $=N[P],he=$.match(/^access_token=(.*)$/);if(he)return he[1]}return null}var Ye=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Fe(L){var P=L.match(Ye);if(!P)throw new Error("Unable to parse URL object");return{protocol:P[1],authority:P[2],path:P[3]||"/",params:P[4]?P[4].split("&"):[]}}function Re(L){var P=L.params.length?"?"+L.params.join("&"):"";return L.protocol+"://"+L.authority+L.path+P}var je="mapbox.eventData";function xt(L){if(!L)return null;var P=L.split(".");if(!P||P.length!==3)return null;try{var N=JSON.parse(te(P[1]));return N}catch{return null}}var Nt=function(P){this.type=P,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};Nt.prototype.getStorageKey=function(P){var N=xt(ie.ACCESS_TOKEN),$="";return N&&N.u?$=K(N.u):$=ie.ACCESS_TOKEN||"",P?je+"."+P+":"+$:je+":"+$},Nt.prototype.fetchEventData=function(){var P=ue("localStorage"),N=this.getStorageKey(),$=this.getStorageKey("uuid");if(P)try{var he=self.localStorage.getItem(N);he&&(this.eventData=JSON.parse(he));var xe=self.localStorage.getItem($);xe&&(this.anonId=xe)}catch{O("Unable to read from LocalStorage")}},Nt.prototype.saveEventData=function(){var P=ue("localStorage"),N=this.getStorageKey(),$=this.getStorageKey("uuid");if(P)try{self.localStorage.setItem($,this.anonId),Object.keys(this.eventData).length>=1&&self.localStorage.setItem(N,JSON.stringify(this.eventData))}catch{O("Unable to write to LocalStorage")}},Nt.prototype.processRequests=function(P){},Nt.prototype.postEvent=function(P,N,$,he){var xe=this;if(!!ie.EVENTS_URL){var Te=Fe(ie.EVENTS_URL);Te.params.push("access_token="+(he||ie.ACCESS_TOKEN||""));var Ne={event:this.type,created:new Date(P).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:n,skuId:ge,userId:this.anonId},nt=N?A(Ne,N):Ne,gt={url:Re(Te),headers:{"Content-Type":"text/plain"},body:JSON.stringify([nt])};this.pendingRequest=kt(gt,function(bt){xe.pendingRequest=null,$(bt),xe.saveEventData(),xe.processRequests(he)})}},Nt.prototype.queueRequest=function(P,N){this.queue.push(P),this.processRequests(N)};var tr=function(L){function P(){L.call(this,"map.load"),this.success={},this.skuToken=""}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype.postMapLoadEvent=function($,he,xe,Te){this.skuToken=xe,(ie.EVENTS_URL&&Te||ie.ACCESS_TOKEN&&Array.isArray($)&&$.some(function(Ne){return Le(Ne)||we(Ne)}))&&this.queueRequest({id:he,timestamp:Date.now()},Te)},P.prototype.processRequests=function($){var he=this;if(!(this.pendingRequest||this.queue.length===0)){var xe=this.queue.shift(),Te=xe.id,Ne=xe.timestamp;Te&&this.success[Te]||(this.anonId||this.fetchEventData(),k(this.anonId)||(this.anonId=v()),this.postEvent(Ne,{skuToken:this.skuToken},function(nt){nt||Te&&(he.success[Te]=!0)},$))}},P}(Nt),Ht=function(L){function P(N){L.call(this,"appUserTurnstile"),this._customAccessToken=N}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype.postTurnstileEvent=function($,he){ie.EVENTS_URL&&ie.ACCESS_TOKEN&&Array.isArray($)&&$.some(function(xe){return Le(xe)||we(xe)})&&this.queueRequest(Date.now(),he)},P.prototype.processRequests=function($){var he=this;if(!(this.pendingRequest||this.queue.length===0)){(!this.anonId||!this.eventData.lastSuccess||!this.eventData.tokenU)&&this.fetchEventData();var xe=xt(ie.ACCESS_TOKEN),Te=xe?xe.u:ie.ACCESS_TOKEN,Ne=Te!==this.eventData.tokenU;k(this.anonId)||(this.anonId=v(),Ne=!0);var nt=this.queue.shift();if(this.eventData.lastSuccess){var gt=new Date(this.eventData.lastSuccess),bt=new Date(nt),Gt=(nt-this.eventData.lastSuccess)/(24*60*60*1e3);Ne=Ne||Gt>=1||Gt<-1||gt.getDate()!==bt.getDate()}else Ne=!0;if(!Ne)return this.processRequests();this.postEvent(nt,{"enabled.telemetry":!1},function(lr){lr||(he.eventData.lastSuccess=nt,he.eventData.tokenU=Te)},$)}},P}(Nt),Pt=new Ht,$t=Pt.postTurnstileEvent.bind(Pt),Ut=new tr,Lt=Ut.postMapLoadEvent.bind(Ut),We="mapbox-tiles",ot=500,Ge=50,Me=1e3*60*7,Ve;function Qe(){self.caches&&!Ve&&(Ve=self.caches.open(We))}var tt;function St(L,P){if(tt===void 0)try{new Response(new ReadableStream),tt=!0}catch{tt=!1}tt?P(L.body):L.blob().then(P)}function wt(L,P,N){if(Qe(),!!Ve){var $={status:P.status,statusText:P.statusText,headers:new self.Headers};P.headers.forEach(function(Te,Ne){return $.headers.set(Ne,Te)});var he=X(P.headers.get("Cache-Control")||"");if(!he["no-store"]){he["max-age"]&&$.headers.set("Expires",new Date(N+he["max-age"]*1e3).toUTCString());var xe=new Date($.headers.get("Expires")).getTime()-N;xe<Me||St(P,function(Te){var Ne=new self.Response(Te,$);Qe(),Ve&&Ve.then(function(nt){return nt.put(Ct(L.url),Ne)}).catch(function(nt){return O(nt.message)})})}}}function Ct(L){var P=L.indexOf("?");return P<0?L:L.slice(0,P)}function jt(L,P){if(Qe(),!Ve)return P(null);var N=Ct(L.url);Ve.then(function($){$.match(N).then(function(he){var xe=Bt(he);$.delete(N),xe&&$.put(N,he.clone()),P(null,he,xe)}).catch(P)}).catch(P)}function Bt(L){if(!L)return!1;var P=new Date(L.headers.get("Expires")||0),N=X(L.headers.get("Cache-Control")||"");return P>Date.now()&&!N["no-cache"]}var Wt=1/0;function Qt(L){Wt++,Wt>Ge&&(L.getActor().send("enforceCacheSizeLimit",ot),Wt=0)}function Zt(L){Qe(),Ve&&Ve.then(function(P){P.keys().then(function(N){for(var $=0;$<N.length-L;$++)P.delete(N[$])})})}function cr(L){var P=self.caches.delete(We);L&&P.catch(L).then(function(){return L()})}function Xr(L,P){ot=L,Ge=P}var vn;function en(){return vn==null&&(vn=self.OffscreenCanvas&&new self.OffscreenCanvas(1,1).getContext("2d")&&typeof self.createImageBitmap=="function"),vn}var ut={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(ut);var ar=function(L){function P(N,$,he){$===401&&we(he)&&(N+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),L.call(this,N),this.status=$,this.url=he,this.name=this.constructor.name,this.message=N}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},P}(Error),rr=Q()?function(){return self.worker&&self.worker.referrer}:function(){return(self.location.protocol==="blob:"?self.parent:self).location.href},Kt=function(L){return/^file:/.test(L)||/^file:/.test(rr())&&!/^\w+:/.test(L)};function Er(L,P){var N=new self.AbortController,$=new self.Request(L.url,{method:L.method||"GET",body:L.body,credentials:L.credentials,headers:L.headers,referrer:rr(),signal:N.signal}),he=!1,xe=!1,Te=Ce($.url);L.type==="json"&&$.headers.set("Accept","application/json");var Ne=function(gt,bt,Gt){if(!xe){if(gt&&gt.message!=="SecurityError"&&O(gt),bt&&Gt)return nt(bt);var lr=Date.now();self.fetch($).then(function(ir){if(ir.ok){var wr=Te?ir.clone():null;return nt(ir,wr,lr)}else return P(new ar(ir.statusText,ir.status,L.url))}).catch(function(ir){ir.code!==20&&P(new Error(ir.message))})}},nt=function(gt,bt,Gt){(L.type==="arrayBuffer"?gt.arrayBuffer():L.type==="json"?gt.json():gt.text()).then(function(lr){xe||(bt&&Gt&&wt($,bt,Gt),he=!0,P(null,lr,gt.headers.get("Cache-Control"),gt.headers.get("Expires")))}).catch(function(lr){xe||P(new Error(lr.message))})};return Te?jt($,Ne):Ne(null,null),{cancel:function(){xe=!0,he||N.abort()}}}function st(L,P){var N=new self.XMLHttpRequest;N.open(L.method||"GET",L.url,!0),L.type==="arrayBuffer"&&(N.responseType="arraybuffer");for(var $ in L.headers)N.setRequestHeader($,L.headers[$]);return L.type==="json"&&(N.responseType="text",N.setRequestHeader("Accept","application/json")),N.withCredentials=L.credentials==="include",N.onerror=function(){P(new Error(N.statusText))},N.onload=function(){if((N.status>=200&&N.status<300||N.status===0)&&N.response!==null){var he=N.response;if(L.type==="json")try{he=JSON.parse(N.response)}catch(xe){return P(xe)}P(null,he,N.getResponseHeader("Cache-Control"),N.getResponseHeader("Expires"))}else P(new ar(N.statusText,N.status,L.url))},N.send(L.body),{cancel:function(){return N.abort()}}}var et=function(L,P){if(!Kt(L.url)){if(self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty("signal"))return Er(L,P);if(Q()&&self.worker&&self.worker.actor){var N=!0;return self.worker.actor.send("getResource",L,P,void 0,N)}}return st(L,P)},ht=function(L,P){return et(A(L,{type:"json"}),P)},vt=function(L,P){return et(A(L,{type:"arrayBuffer"}),P)},kt=function(L,P){return et(A(L,{method:"POST"}),P)};function Vt(L){var P=self.document.createElement("a");return P.href=L,P.protocol===self.document.location.protocol&&P.host===self.document.location.host}var Pe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function ke(L,P,N,$){var he=new self.Image,xe=self.URL;he.onload=function(){P(null,he),xe.revokeObjectURL(he.src)},he.onerror=function(){return P(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var Te=new self.Blob([new Uint8Array(L)],{type:"image/png"});he.cacheControl=N,he.expires=$,he.src=L.byteLength?xe.createObjectURL(Te):Pe}function lt(L,P){var N=new self.Blob([new Uint8Array(L)],{type:"image/png"});self.createImageBitmap(N).then(function($){P(null,$)}).catch(function($){P(new Error("Could not load image because of "+$.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}var ft,yt,Rt=function(){ft=[],yt=0};Rt();var _t=function(L,P){if(se.supported&&(L.headers||(L.headers={}),L.headers.accept="image/webp,*/*"),yt>=ie.MAX_PARALLEL_IMAGE_REQUESTS){var N={requestParameters:L,callback:P,cancelled:!1,cancel:function(){this.cancelled=!0}};return ft.push(N),N}yt++;var $=!1,he=function(){if(!$)for($=!0,yt--;ft.length&&yt<ie.MAX_PARALLEL_IMAGE_REQUESTS;){var Te=ft.shift(),Ne=Te.requestParameters,nt=Te.callback,gt=Te.cancelled;gt||(Te.cancel=_t(Ne,nt).cancel)}},xe=vt(L,function(Te,Ne,nt,gt){he(),Te?P(Te):Ne&&(en()?lt(Ne,P):ke(Ne,P,nt,gt))});return{cancel:function(){xe.cancel(),he()}}},Dt=function(L,P){var N=self.document.createElement("video");N.muted=!0,N.onloadstart=function(){P(null,N)};for(var $=0;$<L.length;$++){var he=self.document.createElement("source");Vt(L[$])||(N.crossOrigin="Anonymous"),he.src=L[$],N.appendChild(he)}return{cancel:function(){}}};function Jt(L,P,N){var $=N[L]&&N[L].indexOf(P)!==-1;$||(N[L]=N[L]||[],N[L].push(P))}function fr(L,P,N){if(N&&N[L]){var $=N[L].indexOf(P);$!==-1&&N[L].splice($,1)}}var Rr=function(P,N){N===void 0&&(N={}),A(this,N),this.type=P},Sr=function(L){function P(N,$){$===void 0&&($={}),L.call(this,"error",A({error:N},$))}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P}(Rr),Pr=function(){};Pr.prototype.on=function(P,N){return this._listeners=this._listeners||{},Jt(P,N,this._listeners),this},Pr.prototype.off=function(P,N){return fr(P,N,this._listeners),fr(P,N,this._oneTimeListeners),this},Pr.prototype.once=function(P,N){return this._oneTimeListeners=this._oneTimeListeners||{},Jt(P,N,this._oneTimeListeners),this},Pr.prototype.fire=function(P,N){typeof P=="string"&&(P=new Rr(P,N||{}));var $=P.type;if(this.listens($)){P.target=this;for(var he=this._listeners&&this._listeners[$]?this._listeners[$].slice():[],xe=0,Te=he;xe<Te.length;xe+=1){var Ne=Te[xe];Ne.call(this,P)}for(var nt=this._oneTimeListeners&&this._oneTimeListeners[$]?this._oneTimeListeners[$].slice():[],gt=0,bt=nt;gt<bt.length;gt+=1){var Gt=bt[gt];fr($,Gt,this._oneTimeListeners),Gt.call(this,P)}var lr=this._eventedParent;lr&&(A(P,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),lr.fire(P))}else P instanceof Sr&&console.error(P.error);return this},Pr.prototype.listens=function(P){return this._listeners&&this._listeners[P]&&this._listeners[P].length>0||this._oneTimeListeners&&this._oneTimeListeners[P]&&this._oneTimeListeners[P].length>0||this._eventedParent&&this._eventedParent.listens(P)},Pr.prototype.setEventedParent=function(P,N){return this._eventedParent=P,this._eventedParentData=N,this};var Jr=8,ur={version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},_r={"*":{type:"source"}},Br=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],Yr={type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},"*":{type:"*"}},Dr={type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},it={type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},zt={type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},qt={type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},hr={type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},Ur={id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},Gr=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],Ir={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Cr={"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Kr={"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Cn={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},yn={"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Yn={"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},In={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Jn={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Zn={type:"array",value:"*"},ba={type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},Pa={type:"enum",values:{Point:{},LineString:{},Polygon:{}}},xi={type:"array",minimum:0,maximum:24,value:["number","color"],length:2},Ka={type:"array",value:"*",minimum:1},ti={type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},$a={anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},kr=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],bn={"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},gn={"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},Ln={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},qn={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},da={"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},oa={"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Bn={"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},$n={"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Xa={duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},gi={"*":{type:"string"}},Xt={$version:Jr,$root:ur,sources:_r,source:Br,source_vector:Yr,source_raster:Dr,source_raster_dem:it,source_geojson:zt,source_video:qt,source_image:hr,layer:Ur,layout:Gr,layout_background:Ir,layout_fill:Cr,layout_circle:Kr,layout_heatmap:Cn,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:yn,layout_symbol:Yn,layout_raster:In,layout_hillshade:Jn,filter:Zn,filter_operator:ba,geometry_type:Pa,function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:xi,expression:Ka,expression_name:ti,light:$a,paint:kr,paint_fill:bn,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:gn,paint_circle:Ln,paint_heatmap:qn,paint_symbol:da,paint_raster:oa,paint_hillshade:Bn,paint_background:$n,transition:Xa,"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:gi},mr=function(P,N,$,he){this.message=(P?P+": ":"")+$,he&&(this.identifier=he),N!=null&&N.__line__&&(this.line=N.__line__)};function un(L){var P=L.key,N=L.value;return N?[new mr(P,N,"constants have been deprecated as of v8")]:[]}function xn(L){for(var P=[],N=arguments.length-1;N-- >0;)P[N]=arguments[N+1];for(var $=0,he=P;$<he.length;$+=1){var xe=he[$];for(var Te in xe)L[Te]=xe[Te]}return L}function sn(L){return L instanceof Number||L instanceof String||L instanceof Boolean?L.valueOf():L}function kn(L){if(Array.isArray(L))return L.map(kn);if(L instanceof Object&&!(L instanceof Number||L instanceof String||L instanceof Boolean)){var P={};for(var N in L)P[N]=kn(L[N]);return P}return sn(L)}var Mn=function(L){function P(N,$){L.call(this,$),this.message=$,this.key=N}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P}(Error),dn=function(P,N){N===void 0&&(N=[]),this.parent=P,this.bindings={};for(var $=0,he=N;$<he.length;$+=1){var xe=he[$],Te=xe[0],Ne=xe[1];this.bindings[Te]=Ne}};dn.prototype.concat=function(P){return new dn(this,P)},dn.prototype.get=function(P){if(this.bindings[P])return this.bindings[P];if(this.parent)return this.parent.get(P);throw new Error(P+" not found in scope.")},dn.prototype.has=function(P){return this.bindings[P]?!0:this.parent?this.parent.has(P):!1};var Tr={kind:"null"},Ar={kind:"number"},Vr={kind:"string"},_n={kind:"boolean"},Gn={kind:"color"},sa={kind:"object"},En={kind:"value"},ea={kind:"error"},fa={kind:"collator"},wa={kind:"formatted"},Aa={kind:"resolvedImage"};function va(L,P){return{kind:"array",itemType:L,N:P}}function La(L){if(L.kind==="array"){var P=La(L.itemType);return typeof L.N=="number"?"array<"+P+", "+L.N+">":L.itemType.kind==="value"?"array":"array<"+P+">"}else return L.kind}var So=[Tr,Ar,Vr,_n,Gn,wa,sa,va(En),Aa];function Jo(L,P){if(P.kind==="error")return null;if(L.kind==="array"){if(P.kind==="array"&&(P.N===0&&P.itemType.kind==="value"||!Jo(L.itemType,P.itemType))&&(typeof L.N!="number"||L.N===P.N))return null}else{if(L.kind===P.kind)return null;if(L.kind==="value")for(var N=0,$=So;N<$.length;N+=1){var he=$[N];if(!Jo(he,P))return null}}return"Expected "+La(L)+" but found "+La(P)+" instead."}function vs(L,P){return P.some(function(N){return N.kind===L.kind})}function Cl(L,P){return P.some(function(N){return N==="null"?L===null:N==="array"?Array.isArray(L):N==="object"?L&&!Array.isArray(L)&&typeof L=="object":N===typeof L})}var Ul=a(function(L,P){var N={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function $(gt){return gt=Math.round(gt),gt<0?0:gt>255?255:gt}function he(gt){return gt<0?0:gt>1?1:gt}function xe(gt){return gt[gt.length-1]==="%"?$(parseFloat(gt)/100*255):$(parseInt(gt))}function Te(gt){return gt[gt.length-1]==="%"?he(parseFloat(gt)/100):he(parseFloat(gt))}function Ne(gt,bt,Gt){return Gt<0?Gt+=1:Gt>1&&(Gt-=1),Gt*6<1?gt+(bt-gt)*Gt*6:Gt*2<1?bt:Gt*3<2?gt+(bt-gt)*(2/3-Gt)*6:gt}function nt(gt){var bt=gt.replace(/ /g,"").toLowerCase();if(bt in N)return N[bt].slice();if(bt[0]==="#"){if(bt.length===4){var Gt=parseInt(bt.substr(1),16);return Gt>=0&&Gt<=4095?[(Gt&3840)>>4|(Gt&3840)>>8,Gt&240|(Gt&240)>>4,Gt&15|(Gt&15)<<4,1]:null}else if(bt.length===7){var Gt=parseInt(bt.substr(1),16);return Gt>=0&&Gt<=16777215?[(Gt&16711680)>>16,(Gt&65280)>>8,Gt&255,1]:null}return null}var lr=bt.indexOf("("),ir=bt.indexOf(")");if(lr!==-1&&ir+1===bt.length){var wr=bt.substr(0,lr),Hr=bt.substr(lr+1,ir-(lr+1)).split(","),cn=1;switch(wr){case"rgba":if(Hr.length!==4)return null;cn=Te(Hr.pop());case"rgb":return Hr.length!==3?null:[xe(Hr[0]),xe(Hr[1]),xe(Hr[2]),cn];case"hsla":if(Hr.length!==4)return null;cn=Te(Hr.pop());case"hsl":if(Hr.length!==3)return null;var an=(parseFloat(Hr[0])%360+360)%360/360,Rn=Te(Hr[1]),An=Te(Hr[2]),Dn=An<=.5?An*(Rn+1):An+Rn-An*Rn,Un=An*2-Dn;return[$(Ne(Un,Dn,an+1/3)*255),$(Ne(Un,Dn,an)*255),$(Ne(Un,Dn,an-1/3)*255),cn];default:return null}}return null}try{P.parseCSSColor=nt}catch{}}),_u=Ul.parseCSSColor,_i=function(P,N,$,he){he===void 0&&(he=1),this.r=P,this.g=N,this.b=$,this.a=he};_i.parse=function(P){if(!!P){if(P instanceof _i)return P;if(typeof P=="string"){var N=_u(P);if(!!N)return new _i(N[0]/255*N[3],N[1]/255*N[3],N[2]/255*N[3],N[3])}}},_i.prototype.toString=function(){var P=this.toArray(),N=P[0],$=P[1],he=P[2],xe=P[3];return"rgba("+Math.round(N)+","+Math.round($)+","+Math.round(he)+","+xe+")"},_i.prototype.toArray=function(){var P=this,N=P.r,$=P.g,he=P.b,xe=P.a;return xe===0?[0,0,0,0]:[N*255/xe,$*255/xe,he*255/xe,xe]},_i.black=new _i(0,0,0,1),_i.white=new _i(1,1,1,1),_i.transparent=new _i(0,0,0,0),_i.red=new _i(1,0,0,1);var hl=function(P,N,$){P?this.sensitivity=N?"variant":"case":this.sensitivity=N?"accent":"base",this.locale=$,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};hl.prototype.compare=function(P,N){return this.collator.compare(P,N)},hl.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var el=function(P,N,$,he,xe){this.text=P,this.image=N,this.scale=$,this.fontStack=he,this.textColor=xe},qi=function(P){this.sections=P};qi.fromString=function(P){return new qi([new el(P,null,null,null,null)])},qi.prototype.isEmpty=function(){return this.sections.length===0?!0:!this.sections.some(function(P){return P.text.length!==0||P.image&&P.image.name.length!==0})},qi.factory=function(P){return P instanceof qi?P:qi.fromString(P)},qi.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(P){return P.text}).join("")},qi.prototype.serialize=function(){for(var P=["format"],N=0,$=this.sections;N<$.length;N+=1){var he=$[N];if(he.image){P.push(["image",he.image.name]);continue}P.push(he.text);var xe={};he.fontStack&&(xe["text-font"]=["literal",he.fontStack.split(",")]),he.scale&&(xe["font-scale"]=he.scale),he.textColor&&(xe["text-color"]=["rgba"].concat(he.textColor.toArray())),P.push(xe)}return P};var No=function(P){this.name=P.name,this.available=P.available};No.prototype.toString=function(){return this.name},No.fromString=function(P){return P?new No({name:P,available:!1}):null},No.prototype.serialize=function(){return["image",this.name]};function Vl(L,P,N,$){if(!(typeof L=="number"&&L>=0&&L<=255&&typeof P=="number"&&P>=0&&P<=255&&typeof N=="number"&&N>=0&&N<=255)){var he=typeof $=="number"?[L,P,N,$]:[L,P,N];return"Invalid rgba value ["+he.join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}return typeof $>"u"||typeof $=="number"&&$>=0&&$<=1?null:"Invalid rgba value ["+[L,P,N,$].join(", ")+"]: 'a' must be between 0 and 1."}function Is(L){if(L===null)return!0;if(typeof L=="string")return!0;if(typeof L=="boolean")return!0;if(typeof L=="number")return!0;if(L instanceof _i)return!0;if(L instanceof hl)return!0;if(L instanceof qi)return!0;if(L instanceof No)return!0;if(Array.isArray(L)){for(var P=0,N=L;P<N.length;P+=1){var $=N[P];if(!Is($))return!1}return!0}else if(typeof L=="object"){for(var he in L)if(!Is(L[he]))return!1;return!0}else return!1}function Gi(L){if(L===null)return Tr;if(typeof L=="string")return Vr;if(typeof L=="boolean")return _n;if(typeof L=="number")return Ar;if(L instanceof _i)return Gn;if(L instanceof hl)return fa;if(L instanceof qi)return wa;if(L instanceof No)return Aa;if(Array.isArray(L)){for(var P=L.length,N,$=0,he=L;$<he.length;$+=1){var xe=he[$],Te=Gi(xe);if(!N)N=Te;else{if(N===Te)continue;N=En;break}}return va(N||En,P)}else return sa}function kl(L){var P=typeof L;return L===null?"":P==="string"||P==="number"||P==="boolean"?String(L):L instanceof _i||L instanceof qi||L instanceof No?L.toString():JSON.stringify(L)}var lo=function(P,N){this.type=P,this.value=N};lo.parse=function(P,N){if(P.length!==2)return N.error("'literal' expression requires exactly one argument, but found "+(P.length-1)+" instead.");if(!Is(P[1]))return N.error("invalid value");var $=P[1],he=Gi($),xe=N.expectedType;return he.kind==="array"&&he.N===0&&xe&&xe.kind==="array"&&(typeof xe.N!="number"||xe.N===0)&&(he=xe),new lo(he,$)},lo.prototype.evaluate=function(){return this.value},lo.prototype.eachChild=function(){},lo.prototype.outputDefined=function(){return!0},lo.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof _i?["rgba"].concat(this.value.toArray()):this.value instanceof qi?this.value.serialize():this.value};var Zi=function(P){this.name="ExpressionEvaluationError",this.message=P};Zi.prototype.toJSON=function(){return this.message};var yo={string:Vr,number:Ar,boolean:_n,object:sa},uo=function(P,N){this.type=P,this.args=N};uo.parse=function(P,N){if(P.length<2)return N.error("Expected at least one argument.");var $=1,he,xe=P[0];if(xe==="array"){var Te;if(P.length>2){var Ne=P[1];if(typeof Ne!="string"||!(Ne in yo)||Ne==="object")return N.error('The item type argument of "array" must be one of string, number, boolean',1);Te=yo[Ne],$++}else Te=En;var nt;if(P.length>3){if(P[2]!==null&&(typeof P[2]!="number"||P[2]<0||P[2]!==Math.floor(P[2])))return N.error('The length argument to "array" must be a positive integer literal',2);nt=P[2],$++}he=va(Te,nt)}else he=yo[xe];for(var gt=[];$<P.length;$++){var bt=N.parse(P[$],$,En);if(!bt)return null;gt.push(bt)}return new uo(he,gt)},uo.prototype.evaluate=function(P){for(var N=0;N<this.args.length;N++){var $=this.args[N].evaluate(P),he=Jo(this.type,Gi($));if(he){if(N===this.args.length-1)throw new Zi("Expected value to be of type "+La(this.type)+", but found "+La(Gi($))+" instead.")}else return $}return null},uo.prototype.eachChild=function(P){this.args.forEach(P)},uo.prototype.outputDefined=function(){return this.args.every(function(P){return P.outputDefined()})},uo.prototype.serialize=function(){var P=this.type,N=[P.kind];if(P.kind==="array"){var $=P.itemType;if($.kind==="string"||$.kind==="number"||$.kind==="boolean"){N.push($.kind);var he=P.N;(typeof he=="number"||this.args.length>1)&&N.push(he)}}return N.concat(this.args.map(function(xe){return xe.serialize()}))};var _s=function(P){this.type=wa,this.sections=P};_s.parse=function(P,N){if(P.length<2)return N.error("Expected at least one argument.");var $=P[1];if(!Array.isArray($)&&typeof $=="object")return N.error("First argument must be an image or text section.");for(var he=[],xe=!1,Te=1;Te<=P.length-1;++Te){var Ne=P[Te];if(xe&&typeof Ne=="object"&&!Array.isArray(Ne)){xe=!1;var nt=null;if(Ne["font-scale"]&&(nt=N.parse(Ne["font-scale"],1,Ar),!nt))return null;var gt=null;if(Ne["text-font"]&&(gt=N.parse(Ne["text-font"],1,va(Vr)),!gt))return null;var bt=null;if(Ne["text-color"]&&(bt=N.parse(Ne["text-color"],1,Gn),!bt))return null;var Gt=he[he.length-1];Gt.scale=nt,Gt.font=gt,Gt.textColor=bt}else{var lr=N.parse(P[Te],1,En);if(!lr)return null;var ir=lr.type.kind;if(ir!=="string"&&ir!=="value"&&ir!=="null"&&ir!=="resolvedImage")return N.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");xe=!0,he.push({content:lr,scale:null,font:null,textColor:null})}}return new _s(he)},_s.prototype.evaluate=function(P){var N=function($){var he=$.content.evaluate(P);return Gi(he)===Aa?new el("",he,null,null,null):new el(kl(he),null,$.scale?$.scale.evaluate(P):null,$.font?$.font.evaluate(P).join(","):null,$.textColor?$.textColor.evaluate(P):null)};return new qi(this.sections.map(N))},_s.prototype.eachChild=function(P){for(var N=0,$=this.sections;N<$.length;N+=1){var he=$[N];P(he.content),he.scale&&P(he.scale),he.font&&P(he.font),he.textColor&&P(he.textColor)}},_s.prototype.outputDefined=function(){return!1},_s.prototype.serialize=function(){for(var P=["format"],N=0,$=this.sections;N<$.length;N+=1){var he=$[N];P.push(he.content.serialize());var xe={};he.scale&&(xe["font-scale"]=he.scale.serialize()),he.font&&(xe["text-font"]=he.font.serialize()),he.textColor&&(xe["text-color"]=he.textColor.serialize()),P.push(xe)}return P};var vl=function(P){this.type=Aa,this.input=P};vl.parse=function(P,N){if(P.length!==2)return N.error("Expected two arguments.");var $=N.parse(P[1],1,Vr);return $?new vl($):N.error("No image name provided.")},vl.prototype.evaluate=function(P){var N=this.input.evaluate(P),$=No.fromString(N);return $&&P.availableImages&&($.available=P.availableImages.indexOf(N)>-1),$},vl.prototype.eachChild=function(P){P(this.input)},vl.prototype.outputDefined=function(){return!1},vl.prototype.serialize=function(){return["image",this.input.serialize()]};var Bu={"to-boolean":_n,"to-color":Gn,"to-number":Ar,"to-string":Vr},ps=function(P,N){this.type=P,this.args=N};ps.parse=function(P,N){if(P.length<2)return N.error("Expected at least one argument.");var $=P[0];if(($==="to-boolean"||$==="to-string")&&P.length!==2)return N.error("Expected one argument.");for(var he=Bu[$],xe=[],Te=1;Te<P.length;Te++){var Ne=N.parse(P[Te],Te,En);if(!Ne)return null;xe.push(Ne)}return new ps(he,xe)},ps.prototype.evaluate=function(P){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(P));if(this.type.kind==="color"){for(var N,$,he=0,xe=this.args;he<xe.length;he+=1){var Te=xe[he];if(N=Te.evaluate(P),$=null,N instanceof _i)return N;if(typeof N=="string"){var Ne=P.parseColor(N);if(Ne)return Ne}else if(Array.isArray(N)&&(N.length<3||N.length>4?$="Invalid rbga value "+JSON.stringify(N)+": expected an array containing either three or four numeric values.":$=Vl(N[0],N[1],N[2],N[3]),!$))return new _i(N[0]/255,N[1]/255,N[2]/255,N[3])}throw new Zi($||"Could not parse color from value '"+(typeof N=="string"?N:String(JSON.stringify(N)))+"'")}else if(this.type.kind==="number"){for(var nt=null,gt=0,bt=this.args;gt<bt.length;gt+=1){var Gt=bt[gt];if(nt=Gt.evaluate(P),nt===null)return 0;var lr=Number(nt);if(!isNaN(lr))return lr}throw new Zi("Could not convert "+JSON.stringify(nt)+" to number.")}else return this.type.kind==="formatted"?qi.fromString(kl(this.args[0].evaluate(P))):this.type.kind==="resolvedImage"?No.fromString(kl(this.args[0].evaluate(P))):kl(this.args[0].evaluate(P))},ps.prototype.eachChild=function(P){this.args.forEach(P)},ps.prototype.outputDefined=function(){return this.args.every(function(P){return P.outputDefined()})},ps.prototype.serialize=function(){if(this.type.kind==="formatted")return new _s([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new vl(this.args[0]).serialize();var P=["to-"+this.type.kind];return this.eachChild(function(N){P.push(N.serialize())}),P};var Uu=["Unknown","Point","LineString","Polygon"],tl=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};tl.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},tl.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?Uu[this.feature.type]:this.feature.type:null},tl.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},tl.prototype.canonicalID=function(){return this.canonical},tl.prototype.properties=function(){return this.feature&&this.feature.properties||{}},tl.prototype.parseColor=function(P){var N=this._parseColorCache[P];return N||(N=this._parseColorCache[P]=_i.parse(P)),N};var Bo=function(P,N,$,he){this.name=P,this.type=N,this._evaluate=$,this.args=he};Bo.prototype.evaluate=function(P){return this._evaluate(P,this.args)},Bo.prototype.eachChild=function(P){this.args.forEach(P)},Bo.prototype.outputDefined=function(){return!1},Bo.prototype.serialize=function(){return[this.name].concat(this.args.map(function(P){return P.serialize()}))},Bo.parse=function(P,N){var $,he=P[0],xe=Bo.definitions[he];if(!xe)return N.error('Unknown expression "'+he+'". If you wanted a literal array, use ["literal", [...]].',0);for(var Te=Array.isArray(xe)?xe[0]:xe.type,Ne=Array.isArray(xe)?[[xe[1],xe[2]]]:xe.overloads,nt=Ne.filter(function(za){var Na=za[0];return!Array.isArray(Na)||Na.length===P.length-1}),gt=null,bt=0,Gt=nt;bt<Gt.length;bt+=1){var lr=Gt[bt],ir=lr[0],wr=lr[1];gt=new Uo(N.registry,N.path,null,N.scope);for(var Hr=[],cn=!1,an=1;an<P.length;an++){var Rn=P[an],An=Array.isArray(ir)?ir[an-1]:ir.type,Dn=gt.parse(Rn,1+Hr.length,An);if(!Dn){cn=!0;break}Hr.push(Dn)}if(!cn){if(Array.isArray(ir)&&ir.length!==Hr.length){gt.error("Expected "+ir.length+" arguments, but found "+Hr.length+" instead.");continue}for(var Un=0;Un<Hr.length;Un++){var Kn=Array.isArray(ir)?ir[Un]:ir.type,ha=Hr[Un];gt.concat(Un+1).checkSubtype(Kn,ha.type)}if(gt.errors.length===0)return new Bo(he,Te,wr,Hr)}}if(nt.length===1)($=N.errors).push.apply($,gt.errors);else{for(var ua=nt.length?nt:Ne,Ba=ua.map(function(za){var Na=za[0];return uf(Na)}).join(" | "),Ca=[],Da=1;Da<P.length;Da++){var li=N.parse(P[Da],1+Ca.length);if(!li)return null;Ca.push(La(li.type))}N.error("Expected arguments of type "+Ba+", but found ("+Ca.join(", ")+") instead.")}return null},Bo.register=function(P,N){Bo.definitions=N;for(var $ in N)P[$]=Bo};function uf(L){return Array.isArray(L)?"("+L.map(La).join(", ")+")":"("+La(L.type)+"...)"}var rl=function(P,N,$){this.type=fa,this.locale=$,this.caseSensitive=P,this.diacriticSensitive=N};rl.parse=function(P,N){if(P.length!==2)return N.error("Expected one argument.");var $=P[1];if(typeof $!="object"||Array.isArray($))return N.error("Collator options argument must be an object.");var he=N.parse($["case-sensitive"]===void 0?!1:$["case-sensitive"],1,_n);if(!he)return null;var xe=N.parse($["diacritic-sensitive"]===void 0?!1:$["diacritic-sensitive"],1,_n);if(!xe)return null;var Te=null;return $.locale&&(Te=N.parse($.locale,1,Vr),!Te)?null:new rl(he,xe,Te)},rl.prototype.evaluate=function(P){return new hl(this.caseSensitive.evaluate(P),this.diacriticSensitive.evaluate(P),this.locale?this.locale.evaluate(P):null)},rl.prototype.eachChild=function(P){P(this.caseSensitive),P(this.diacriticSensitive),this.locale&&P(this.locale)},rl.prototype.outputDefined=function(){return!1},rl.prototype.serialize=function(){var P={};return P["case-sensitive"]=this.caseSensitive.serialize(),P["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(P.locale=this.locale.serialize()),["collator",P]};var Hs=8192;function ou(L,P){L[0]=Math.min(L[0],P[0]),L[1]=Math.min(L[1],P[1]),L[2]=Math.max(L[2],P[0]),L[3]=Math.max(L[3],P[1])}function ff(L){return(180+L)/360}function cf(L){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+L*Math.PI/360)))/360}function pl(L,P){return!(L[0]<=P[0]||L[2]>=P[2]||L[1]<=P[1]||L[3]>=P[3])}function su(L,P){var N=ff(L[0]),$=cf(L[1]),he=Math.pow(2,P.z);return[Math.round(N*he*Hs),Math.round($*he*Hs)]}function Gs(L,P,N){var $=L[0]-P[0],he=L[1]-P[1],xe=L[0]-N[0],Te=L[1]-N[1];return $*Te-xe*he===0&&$*xe<=0&&he*Te<=0}function Tu(L,P,N){return P[1]>L[1]!=N[1]>L[1]&&L[0]<(N[0]-P[0])*(L[1]-P[1])/(N[1]-P[1])+P[0]}function Ll(L,P){for(var N=!1,$=0,he=P.length;$<he;$++)for(var xe=P[$],Te=0,Ne=xe.length;Te<Ne-1;Te++){if(Gs(L,xe[Te],xe[Te+1]))return!1;Tu(L,xe[Te],xe[Te+1])&&(N=!N)}return N}function Au(L,P){for(var N=0;N<P.length;N++)if(Ll(L,P[N]))return!0;return!1}function Vu(L,P){return L[0]*P[1]-L[1]*P[0]}function lu(L,P,N,$){var he=L[0]-N[0],xe=L[1]-N[1],Te=P[0]-N[0],Ne=P[1]-N[1],nt=$[0]-N[0],gt=$[1]-N[1],bt=he*gt-nt*xe,Gt=Te*gt-nt*Ne;return bt>0&&Gt<0||bt<0&&Gt>0}function hf(L,P,N,$){var he=[P[0]-L[0],P[1]-L[1]],xe=[$[0]-N[0],$[1]-N[1]];return Vu(xe,he)===0?!1:!!(lu(L,P,N,$)&&lu(N,$,L,P))}function dl(L,P,N){for(var $=0,he=N;$<he.length;$+=1)for(var xe=he[$],Te=0;Te<xe.length-1;++Te)if(hf(L,P,xe[Te],xe[Te+1]))return!0;return!1}function Mu(L,P){for(var N=0;N<L.length;++N)if(!Ll(L[N],P))return!1;for(var $=0;$<L.length-1;++$)if(dl(L[$],L[$+1],P))return!1;return!0}function uu(L,P){for(var N=0;N<P.length;N++)if(Mu(L,P[N]))return!0;return!1}function Fs(L,P,N){for(var $=[],he=0;he<L.length;he++){for(var xe=[],Te=0;Te<L[he].length;Te++){var Ne=su(L[he][Te],N);ou(P,Ne),xe.push(Ne)}$.push(xe)}return $}function Hl(L,P,N){for(var $=[],he=0;he<L.length;he++){var xe=Fs(L[he],P,N);$.push(xe)}return $}function Su(L,P,N,$){if(L[0]<N[0]||L[0]>N[2]){var he=$*.5,xe=L[0]-N[0]>he?-$:N[0]-L[0]>he?$:0;xe===0&&(xe=L[0]-N[2]>he?-$:N[2]-L[0]>he?$:0),L[0]+=xe}ou(P,L)}function Hu(L){L[0]=L[1]=1/0,L[2]=L[3]=-1/0}function Gu(L,P,N,$){for(var he=Math.pow(2,$.z)*Hs,xe=[$.x*Hs,$.y*Hs],Te=[],Ne=0,nt=L;Ne<nt.length;Ne+=1)for(var gt=nt[Ne],bt=0,Gt=gt;bt<Gt.length;bt+=1){var lr=Gt[bt],ir=[lr.x+xe[0],lr.y+xe[1]];Su(ir,P,N,he),Te.push(ir)}return Te}function fu(L,P,N,$){for(var he=Math.pow(2,$.z)*Hs,xe=[$.x*Hs,$.y*Hs],Te=[],Ne=0,nt=L;Ne<nt.length;Ne+=1){for(var gt=nt[Ne],bt=[],Gt=0,lr=gt;Gt<lr.length;Gt+=1){var ir=lr[Gt],wr=[ir.x+xe[0],ir.y+xe[1]];ou(P,wr),bt.push(wr)}Te.push(bt)}if(P[2]-P[0]<=he/2){Hu(P);for(var Hr=0,cn=Te;Hr<cn.length;Hr+=1)for(var an=cn[Hr],Rn=0,An=an;Rn<An.length;Rn+=1){var Dn=An[Rn];Su(Dn,P,N,he)}}return Te}function vf(L,P){var N=[1/0,1/0,-1/0,-1/0],$=[1/0,1/0,-1/0,-1/0],he=L.canonicalID();if(P.type==="Polygon"){var xe=Fs(P.coordinates,$,he),Te=Gu(L.geometry(),N,$,he);if(!pl(N,$))return!1;for(var Ne=0,nt=Te;Ne<nt.length;Ne+=1){var gt=nt[Ne];if(!Ll(gt,xe))return!1}}if(P.type==="MultiPolygon"){var bt=Hl(P.coordinates,$,he),Gt=Gu(L.geometry(),N,$,he);if(!pl(N,$))return!1;for(var lr=0,ir=Gt;lr<ir.length;lr+=1){var wr=ir[lr];if(!Au(wr,bt))return!1}}return!0}function Yu(L,P){var N=[1/0,1/0,-1/0,-1/0],$=[1/0,1/0,-1/0,-1/0],he=L.canonicalID();if(P.type==="Polygon"){var xe=Fs(P.coordinates,$,he),Te=fu(L.geometry(),N,$,he);if(!pl(N,$))return!1;for(var Ne=0,nt=Te;Ne<nt.length;Ne+=1){var gt=nt[Ne];if(!Mu(gt,xe))return!1}}if(P.type==="MultiPolygon"){var bt=Hl(P.coordinates,$,he),Gt=fu(L.geometry(),N,$,he);if(!pl(N,$))return!1;for(var lr=0,ir=Gt;lr<ir.length;lr+=1){var wr=ir[lr];if(!uu(wr,bt))return!1}}return!0}var ds=function(P,N){this.type=_n,this.geojson=P,this.geometries=N};ds.parse=function(P,N){if(P.length!==2)return N.error("'within' expression requires exactly one argument, but found "+(P.length-1)+" instead.");if(Is(P[1])){var $=P[1];if($.type==="FeatureCollection")for(var he=0;he<$.features.length;++he){var xe=$.features[he].geometry.type;if(xe==="Polygon"||xe==="MultiPolygon")return new ds($,$.features[he].geometry)}else if($.type==="Feature"){var Te=$.geometry.type;if(Te==="Polygon"||Te==="MultiPolygon")return new ds($,$.geometry)}else if($.type==="Polygon"||$.type==="MultiPolygon")return new ds($,$)}return N.error("'within' expression requires valid geojson object that contains polygon geometry type.")},ds.prototype.evaluate=function(P){if(P.geometry()!=null&&P.canonicalID()!=null){if(P.geometryType()==="Point")return vf(P,this.geometries);if(P.geometryType()==="LineString")return Yu(P,this.geometries)}return!1},ds.prototype.eachChild=function(){},ds.prototype.outputDefined=function(){return!0},ds.prototype.serialize=function(){return["within",this.geojson]};function Pl(L){if(L instanceof Bo){if(L.name==="get"&&L.args.length===1)return!1;if(L.name==="feature-state")return!1;if(L.name==="has"&&L.args.length===1)return!1;if(L.name==="properties"||L.name==="geometry-type"||L.name==="id")return!1;if(/^filter-/.test(L.name))return!1}if(L instanceof ds)return!1;var P=!0;return L.eachChild(function(N){P&&!Pl(N)&&(P=!1)}),P}function Dl(L){if(L instanceof Bo&&L.name==="feature-state")return!1;var P=!0;return L.eachChild(function(N){P&&!Dl(N)&&(P=!1)}),P}function Eu(L,P){if(L instanceof Bo&&P.indexOf(L.name)>=0)return!1;var N=!0;return L.eachChild(function($){N&&!Eu($,P)&&(N=!1)}),N}var zs=function(P,N){this.type=N.type,this.name=P,this.boundExpression=N};zs.parse=function(P,N){if(P.length!==2||typeof P[1]!="string")return N.error("'var' expression requires exactly one string literal argument.");var $=P[1];return N.scope.has($)?new zs($,N.scope.get($)):N.error('Unknown variable "'+$+'". Make sure "'+$+'" has been bound in an enclosing "let" expression before using it.',1)},zs.prototype.evaluate=function(P){return this.boundExpression.evaluate(P)},zs.prototype.eachChild=function(){},zs.prototype.outputDefined=function(){return!1},zs.prototype.serialize=function(){return["var",this.name]};var Uo=function(P,N,$,he,xe){N===void 0&&(N=[]),he===void 0&&(he=new dn),xe===void 0&&(xe=[]),this.registry=P,this.path=N,this.key=N.map(function(Te){return"["+Te+"]"}).join(""),this.scope=he,this.errors=xe,this.expectedType=$};Uo.prototype.parse=function(P,N,$,he,xe){return xe===void 0&&(xe={}),N?this.concat(N,$,he)._parse(P,xe):this._parse(P,xe)},Uo.prototype._parse=function(P,N){(P===null||typeof P=="string"||typeof P=="boolean"||typeof P=="number")&&(P=["literal",P]);function $(bt,Gt,lr){return lr==="assert"?new uo(Gt,[bt]):lr==="coerce"?new ps(Gt,[bt]):bt}if(Array.isArray(P)){if(P.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var he=P[0];if(typeof he!="string")return this.error("Expression name must be a string, but found "+typeof he+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var xe=this.registry[he];if(xe){var Te=xe.parse(P,this);if(!Te)return null;if(this.expectedType){var Ne=this.expectedType,nt=Te.type;if((Ne.kind==="string"||Ne.kind==="number"||Ne.kind==="boolean"||Ne.kind==="object"||Ne.kind==="array")&&nt.kind==="value")Te=$(Te,Ne,N.typeAnnotation||"assert");else if((Ne.kind==="color"||Ne.kind==="formatted"||Ne.kind==="resolvedImage")&&(nt.kind==="value"||nt.kind==="string"))Te=$(Te,Ne,N.typeAnnotation||"coerce");else if(this.checkSubtype(Ne,nt))return null}if(!(Te instanceof lo)&&Te.type.kind!=="resolvedImage"&&cu(Te)){var gt=new tl;try{Te=new lo(Te.type,Te.evaluate(gt))}catch(bt){return this.error(bt.message),null}}return Te}return this.error('Unknown expression "'+he+'". If you wanted a literal array, use ["literal", [...]].',0)}else return typeof P>"u"?this.error("'undefined' value invalid. Use null instead."):typeof P=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof P+" instead.")},Uo.prototype.concat=function(P,N,$){var he=typeof P=="number"?this.path.concat(P):this.path,xe=$?this.scope.concat($):this.scope;return new Uo(this.registry,he,N||null,xe,this.errors)},Uo.prototype.error=function(P){for(var N=[],$=arguments.length-1;$-- >0;)N[$]=arguments[$+1];var he=""+this.key+N.map(function(xe){return"["+xe+"]"}).join("");this.errors.push(new Mn(he,P))},Uo.prototype.checkSubtype=function(P,N){var $=Jo(P,N);return $&&this.error($),$};function cu(L){if(L instanceof zs)return cu(L.boundExpression);if(L instanceof Bo&&L.name==="error")return!1;if(L instanceof rl)return!1;if(L instanceof ds)return!1;var P=L instanceof ps||L instanceof uo,N=!0;return L.eachChild(function($){P?N=N&&cu($):N=N&&$ instanceof lo}),N?Pl(L)&&Eu(L,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"]):!1}function Ys(L,P){for(var N=L.length-1,$=0,he=N,xe=0,Te,Ne;$<=he;)if(xe=Math.floor(($+he)/2),Te=L[xe],Ne=L[xe+1],Te<=P){if(xe===N||P<Ne)return xe;$=xe+1}else if(Te>P)he=xe-1;else throw new Zi("Input is not a number.");return 0}var Ws=function(P,N,$){this.type=P,this.input=N,this.labels=[],this.outputs=[];for(var he=0,xe=$;he<xe.length;he+=1){var Te=xe[he],Ne=Te[0],nt=Te[1];this.labels.push(Ne),this.outputs.push(nt)}};Ws.parse=function(P,N){if(P.length-1<4)return N.error("Expected at least 4 arguments, but found only "+(P.length-1)+".");if((P.length-1)%2!==0)return N.error("Expected an even number of arguments.");var $=N.parse(P[1],1,Ar);if(!$)return null;var he=[],xe=null;N.expectedType&&N.expectedType.kind!=="value"&&(xe=N.expectedType);for(var Te=1;Te<P.length;Te+=2){var Ne=Te===1?-1/0:P[Te],nt=P[Te+1],gt=Te,bt=Te+1;if(typeof Ne!="number")return N.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',gt);if(he.length&&he[he.length-1][0]>=Ne)return N.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',gt);var Gt=N.parse(nt,bt,xe);if(!Gt)return null;xe=xe||Gt.type,he.push([Ne,Gt])}return new Ws(xe,$,he)},Ws.prototype.evaluate=function(P){var N=this.labels,$=this.outputs;if(N.length===1)return $[0].evaluate(P);var he=this.input.evaluate(P);if(he<=N[0])return $[0].evaluate(P);var xe=N.length;if(he>=N[xe-1])return $[xe-1].evaluate(P);var Te=Ys(N,he);return $[Te].evaluate(P)},Ws.prototype.eachChild=function(P){P(this.input);for(var N=0,$=this.outputs;N<$.length;N+=1){var he=$[N];P(he)}},Ws.prototype.outputDefined=function(){return this.outputs.every(function(P){return P.outputDefined()})},Ws.prototype.serialize=function(){for(var P=["step",this.input.serialize()],N=0;N<this.labels.length;N++)N>0&&P.push(this.labels[N]),P.push(this.outputs[N].serialize());return P};function bo(L,P,N){return L*(1-N)+P*N}function Gl(L,P,N){return new _i(bo(L.r,P.r,N),bo(L.g,P.g,N),bo(L.b,P.b,N),bo(L.a,P.a,N))}function Yl(L,P,N){return L.map(function($,he){return bo($,P[he],N)})}var yl=Object.freeze({__proto__:null,number:bo,color:Gl,array:Yl}),Os=.95047,Wl=1,Rl=1.08883,hu=4/29,jl=6/29,ml=3*jl*jl,pf=jl*jl*jl,Ts=Math.PI/180,Lf=180/Math.PI;function Cu(L){return L>pf?Math.pow(L,1/3):L/ml+hu}function Il(L){return L>jl?L*L*L:ml*(L-hu)}function Xl(L){return 255*(L<=.0031308?12.92*L:1.055*Math.pow(L,1/2.4)-.055)}function xl(L){return L/=255,L<=.04045?L/12.92:Math.pow((L+.055)/1.055,2.4)}function Zl(L){var P=xl(L.r),N=xl(L.g),$=xl(L.b),he=Cu((.4124564*P+.3575761*N+.1804375*$)/Os),xe=Cu((.2126729*P+.7151522*N+.072175*$)/Wl),Te=Cu((.0193339*P+.119192*N+.9503041*$)/Rl);return{l:116*xe-16,a:500*(he-xe),b:200*(xe-Te),alpha:L.a}}function Wu(L){var P=(L.l+16)/116,N=isNaN(L.a)?P:P+L.a/500,$=isNaN(L.b)?P:P-L.b/200;return P=Wl*Il(P),N=Os*Il(N),$=Rl*Il($),new _i(Xl(3.2404542*N-1.5371385*P-.4985314*$),Xl(-.969266*N+1.8760108*P+.041556*$),Xl(.0556434*N-.2040259*P+1.0572252*$),L.alpha)}function ju(L,P,N){return{l:bo(L.l,P.l,N),a:bo(L.a,P.a,N),b:bo(L.b,P.b,N),alpha:bo(L.alpha,P.alpha,N)}}function Pf(L){var P=Zl(L),N=P.l,$=P.a,he=P.b,xe=Math.atan2(he,$)*Lf;return{h:xe<0?xe+360:xe,c:Math.sqrt($*$+he*he),l:N,alpha:L.a}}function Yi(L){var P=L.h*Ts,N=L.c,$=L.l;return Wu({l:$,a:Math.cos(P)*N,b:Math.sin(P)*N,alpha:L.alpha})}function Fl(L,P,N){var $=P-L;return L+N*($>180||$<-180?$-360*Math.round($/360):$)}function bl(L,P,N){return{h:Fl(L.h,P.h,N),c:bo(L.c,P.c,N),l:bo(L.l,P.l,N),alpha:bo(L.alpha,P.alpha,N)}}var gs={forward:Zl,reverse:Wu,interpolate:ju},As={forward:Pf,reverse:Yi,interpolate:bl},Kl=Object.freeze({__proto__:null,lab:gs,hcl:As}),wo=function(P,N,$,he,xe){this.type=P,this.operator=N,this.interpolation=$,this.input=he,this.labels=[],this.outputs=[];for(var Te=0,Ne=xe;Te<Ne.length;Te+=1){var nt=Ne[Te],gt=nt[0],bt=nt[1];this.labels.push(gt),this.outputs.push(bt)}};wo.interpolationFactor=function(P,N,$,he){var xe=0;if(P.name==="exponential")xe=Xu(N,P.base,$,he);else if(P.name==="linear")xe=Xu(N,1,$,he);else if(P.name==="cubic-bezier"){var Te=P.controlPoints,Ne=new r(Te[0],Te[1],Te[2],Te[3]);xe=Ne.solve(Xu(N,1,$,he))}return xe},wo.parse=function(P,N){var $=P[0],he=P[1],xe=P[2],Te=P.slice(3);if(!Array.isArray(he)||he.length===0)return N.error("Expected an interpolation type expression.",1);if(he[0]==="linear")he={name:"linear"};else if(he[0]==="exponential"){var Ne=he[1];if(typeof Ne!="number")return N.error("Exponential interpolation requires a numeric base.",1,1);he={name:"exponential",base:Ne}}else if(he[0]==="cubic-bezier"){var nt=he.slice(1);if(nt.length!==4||nt.some(function(an){return typeof an!="number"||an<0||an>1}))return N.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);he={name:"cubic-bezier",controlPoints:nt}}else return N.error("Unknown interpolation type "+String(he[0]),1,0);if(P.length-1<4)return N.error("Expected at least 4 arguments, but found only "+(P.length-1)+".");if((P.length-1)%2!==0)return N.error("Expected an even number of arguments.");if(xe=N.parse(xe,2,Ar),!xe)return null;var gt=[],bt=null;$==="interpolate-hcl"||$==="interpolate-lab"?bt=Gn:N.expectedType&&N.expectedType.kind!=="value"&&(bt=N.expectedType);for(var Gt=0;Gt<Te.length;Gt+=2){var lr=Te[Gt],ir=Te[Gt+1],wr=Gt+3,Hr=Gt+4;if(typeof lr!="number")return N.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',wr);if(gt.length&&gt[gt.length-1][0]>=lr)return N.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',wr);var cn=N.parse(ir,Hr,bt);if(!cn)return null;bt=bt||cn.type,gt.push([lr,cn])}return bt.kind!=="number"&&bt.kind!=="color"&&!(bt.kind==="array"&&bt.itemType.kind==="number"&&typeof bt.N=="number")?N.error("Type "+La(bt)+" is not interpolatable."):new wo(bt,$,he,xe,gt)},wo.prototype.evaluate=function(P){var N=this.labels,$=this.outputs;if(N.length===1)return $[0].evaluate(P);var he=this.input.evaluate(P);if(he<=N[0])return $[0].evaluate(P);var xe=N.length;if(he>=N[xe-1])return $[xe-1].evaluate(P);var Te=Ys(N,he),Ne=N[Te],nt=N[Te+1],gt=wo.interpolationFactor(this.interpolation,he,Ne,nt),bt=$[Te].evaluate(P),Gt=$[Te+1].evaluate(P);return this.operator==="interpolate"?yl[this.type.kind.toLowerCase()](bt,Gt,gt):this.operator==="interpolate-hcl"?As.reverse(As.interpolate(As.forward(bt),As.forward(Gt),gt)):gs.reverse(gs.interpolate(gs.forward(bt),gs.forward(Gt),gt))},wo.prototype.eachChild=function(P){P(this.input);for(var N=0,$=this.outputs;N<$.length;N+=1){var he=$[N];P(he)}},wo.prototype.outputDefined=function(){return this.outputs.every(function(P){return P.outputDefined()})},wo.prototype.serialize=function(){var P;this.interpolation.name==="linear"?P=["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?P=["linear"]:P=["exponential",this.interpolation.base]:P=["cubic-bezier"].concat(this.interpolation.controlPoints);for(var N=[this.operator,P,this.input.serialize()],$=0;$<this.labels.length;$++)N.push(this.labels[$],this.outputs[$].serialize());return N};function Xu(L,P,N,$){var he=$-N,xe=L-N;return he===0?0:P===1?xe/he:(Math.pow(P,xe)-1)/(Math.pow(P,he)-1)}var Ms=function(P,N){this.type=P,this.args=N};Ms.parse=function(P,N){if(P.length<2)return N.error("Expectected at least one argument.");var $=null,he=N.expectedType;he&&he.kind!=="value"&&($=he);for(var xe=[],Te=0,Ne=P.slice(1);Te<Ne.length;Te+=1){var nt=Ne[Te],gt=N.parse(nt,1+xe.length,$,void 0,{typeAnnotation:"omit"});if(!gt)return null;$=$||gt.type,xe.push(gt)}var bt=he&&xe.some(function(Gt){return Jo(he,Gt.type)});return bt?new Ms(En,xe):new Ms($,xe)},Ms.prototype.evaluate=function(P){for(var N=null,$=0,he,xe=0,Te=this.args;xe<Te.length;xe+=1){var Ne=Te[xe];if($++,N=Ne.evaluate(P),N&&N instanceof No&&!N.available&&(he||(he=N.name),N=null,$===this.args.length&&(N=he)),N!==null)break}return N},Ms.prototype.eachChild=function(P){this.args.forEach(P)},Ms.prototype.outputDefined=function(){return this.args.every(function(P){return P.outputDefined()})},Ms.prototype.serialize=function(){var P=["coalesce"];return this.eachChild(function(N){P.push(N.serialize())}),P};var nl=function(P,N){this.type=N.type,this.bindings=[].concat(P),this.result=N};nl.prototype.evaluate=function(P){return this.result.evaluate(P)},nl.prototype.eachChild=function(P){for(var N=0,$=this.bindings;N<$.length;N+=1){var he=$[N];P(he[1])}P(this.result)},nl.parse=function(P,N){if(P.length<4)return N.error("Expected at least 3 arguments, but found "+(P.length-1)+" instead.");for(var $=[],he=1;he<P.length-1;he+=2){var xe=P[he];if(typeof xe!="string")return N.error("Expected string, but found "+typeof xe+" instead.",he);if(/[^a-zA-Z0-9_]/.test(xe))return N.error("Variable names must contain only alphanumeric characters or '_'.",he);var Te=N.parse(P[he+1],he+1);if(!Te)return null;$.push([xe,Te])}var Ne=N.parse(P[P.length-1],P.length-1,N.expectedType,$);return Ne?new nl($,Ne):null},nl.prototype.outputDefined=function(){return this.result.outputDefined()},nl.prototype.serialize=function(){for(var P=["let"],N=0,$=this.bindings;N<$.length;N+=1){var he=$[N],xe=he[0],Te=he[1];P.push(xe,Te.serialize())}return P.push(this.result.serialize()),P};var al=function(P,N,$){this.type=P,this.index=N,this.input=$};al.parse=function(P,N){if(P.length!==3)return N.error("Expected 2 arguments, but found "+(P.length-1)+" instead.");var $=N.parse(P[1],1,Ar),he=N.parse(P[2],2,va(N.expectedType||En));if(!$||!he)return null;var xe=he.type;return new al(xe.itemType,$,he)},al.prototype.evaluate=function(P){var N=this.index.evaluate(P),$=this.input.evaluate(P);if(N<0)throw new Zi("Array index out of bounds: "+N+" < 0.");if(N>=$.length)throw new Zi("Array index out of bounds: "+N+" > "+($.length-1)+".");if(N!==Math.floor(N))throw new Zi("Array index must be an integer, but found "+N+" instead.");return $[N]},al.prototype.eachChild=function(P){P(this.index),P(this.input)},al.prototype.outputDefined=function(){return!1},al.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var js=function(P,N){this.type=_n,this.needle=P,this.haystack=N};js.parse=function(P,N){if(P.length!==3)return N.error("Expected 2 arguments, but found "+(P.length-1)+" instead.");var $=N.parse(P[1],1,En),he=N.parse(P[2],2,En);return!$||!he?null:vs($.type,[_n,Vr,Ar,Tr,En])?new js($,he):N.error("Expected first argument to be of type boolean, string, number or null, but found "+La($.type)+" instead")},js.prototype.evaluate=function(P){var N=this.needle.evaluate(P),$=this.haystack.evaluate(P);if(!$)return!1;if(!Cl(N,["boolean","string","number","null"]))throw new Zi("Expected first argument to be of type boolean, string, number or null, but found "+La(Gi(N))+" instead.");if(!Cl($,["string","array"]))throw new Zi("Expected second argument to be of type array or string, but found "+La(Gi($))+" instead.");return $.indexOf(N)>=0},js.prototype.eachChild=function(P){P(this.needle),P(this.haystack)},js.prototype.outputDefined=function(){return!0},js.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var Ss=function(P,N,$){this.type=Ar,this.needle=P,this.haystack=N,this.fromIndex=$};Ss.parse=function(P,N){if(P.length<=2||P.length>=5)return N.error("Expected 3 or 4 arguments, but found "+(P.length-1)+" instead.");var $=N.parse(P[1],1,En),he=N.parse(P[2],2,En);if(!$||!he)return null;if(!vs($.type,[_n,Vr,Ar,Tr,En]))return N.error("Expected first argument to be of type boolean, string, number or null, but found "+La($.type)+" instead");if(P.length===4){var xe=N.parse(P[3],3,Ar);return xe?new Ss($,he,xe):null}else return new Ss($,he)},Ss.prototype.evaluate=function(P){var N=this.needle.evaluate(P),$=this.haystack.evaluate(P);if(!Cl(N,["boolean","string","number","null"]))throw new Zi("Expected first argument to be of type boolean, string, number or null, but found "+La(Gi(N))+" instead.");if(!Cl($,["string","array"]))throw new Zi("Expected second argument to be of type array or string, but found "+La(Gi($))+" instead.");if(this.fromIndex){var he=this.fromIndex.evaluate(P);return $.indexOf(N,he)}return $.indexOf(N)},Ss.prototype.eachChild=function(P){P(this.needle),P(this.haystack),this.fromIndex&&P(this.fromIndex)},Ss.prototype.outputDefined=function(){return!1},Ss.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var P=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),P]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var eo=function(P,N,$,he,xe,Te){this.inputType=P,this.type=N,this.input=$,this.cases=he,this.outputs=xe,this.otherwise=Te};eo.parse=function(P,N){if(P.length<5)return N.error("Expected at least 4 arguments, but found only "+(P.length-1)+".");if(P.length%2!==1)return N.error("Expected an even number of arguments.");var $,he;N.expectedType&&N.expectedType.kind!=="value"&&(he=N.expectedType);for(var xe={},Te=[],Ne=2;Ne<P.length-1;Ne+=2){var nt=P[Ne],gt=P[Ne+1];Array.isArray(nt)||(nt=[nt]);var bt=N.concat(Ne);if(nt.length===0)return bt.error("Expected at least one branch label.");for(var Gt=0,lr=nt;Gt<lr.length;Gt+=1){var ir=lr[Gt];if(typeof ir!="number"&&typeof ir!="string")return bt.error("Branch labels must be numbers or strings.");if(typeof ir=="number"&&Math.abs(ir)>Number.MAX_SAFE_INTEGER)return bt.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof ir=="number"&&Math.floor(ir)!==ir)return bt.error("Numeric branch labels must be integer values.");if(!$)$=Gi(ir);else if(bt.checkSubtype($,Gi(ir)))return null;if(typeof xe[String(ir)]<"u")return bt.error("Branch labels must be unique.");xe[String(ir)]=Te.length}var wr=N.parse(gt,Ne,he);if(!wr)return null;he=he||wr.type,Te.push(wr)}var Hr=N.parse(P[1],1,En);if(!Hr)return null;var cn=N.parse(P[P.length-1],P.length-1,he);return!cn||Hr.type.kind!=="value"&&N.concat(1).checkSubtype($,Hr.type)?null:new eo($,he,Hr,xe,Te,cn)},eo.prototype.evaluate=function(P){var N=this.input.evaluate(P),$=Gi(N)===this.inputType&&this.outputs[this.cases[N]]||this.otherwise;return $.evaluate(P)},eo.prototype.eachChild=function(P){P(this.input),this.outputs.forEach(P),P(this.otherwise)},eo.prototype.outputDefined=function(){return this.outputs.every(function(P){return P.outputDefined()})&&this.otherwise.outputDefined()},eo.prototype.serialize=function(){for(var P=this,N=["match",this.input.serialize()],$=Object.keys(this.cases).sort(),he=[],xe={},Te=0,Ne=$;Te<Ne.length;Te+=1){var nt=Ne[Te],gt=xe[this.cases[nt]];gt===void 0?(xe[this.cases[nt]]=he.length,he.push([this.cases[nt],[nt]])):he[gt][1].push(nt)}for(var bt=function(Hr){return P.inputType.kind==="number"?Number(Hr):Hr},Gt=0,lr=he;Gt<lr.length;Gt+=1){var ir=lr[Gt],gt=ir[0],wr=ir[1];wr.length===1?N.push(bt(wr[0])):N.push(wr.map(bt)),N.push(this.outputs[outputIndex$1].serialize())}return N.push(this.otherwise.serialize()),N};var Vo=function(P,N,$){this.type=P,this.branches=N,this.otherwise=$};Vo.parse=function(P,N){if(P.length<4)return N.error("Expected at least 3 arguments, but found only "+(P.length-1)+".");if(P.length%2!==0)return N.error("Expected an odd number of arguments.");var $;N.expectedType&&N.expectedType.kind!=="value"&&($=N.expectedType);for(var he=[],xe=1;xe<P.length-1;xe+=2){var Te=N.parse(P[xe],xe,_n);if(!Te)return null;var Ne=N.parse(P[xe+1],xe+1,$);if(!Ne)return null;he.push([Te,Ne]),$=$||Ne.type}var nt=N.parse(P[P.length-1],P.length-1,$);return nt?new Vo($,he,nt):null},Vo.prototype.evaluate=function(P){for(var N=0,$=this.branches;N<$.length;N+=1){var he=$[N],xe=he[0],Te=he[1];if(xe.evaluate(P))return Te.evaluate(P)}return this.otherwise.evaluate(P)},Vo.prototype.eachChild=function(P){for(var N=0,$=this.branches;N<$.length;N+=1){var he=$[N],xe=he[0],Te=he[1];P(xe),P(Te)}P(this.otherwise)},Vo.prototype.outputDefined=function(){return this.branches.every(function(P){P[0];var N=P[1];return N.outputDefined()})&&this.otherwise.outputDefined()},Vo.prototype.serialize=function(){var P=["case"];return this.eachChild(function(N){P.push(N.serialize())}),P};var Es=function(P,N,$,he){this.type=P,this.input=N,this.beginIndex=$,this.endIndex=he};Es.parse=function(P,N){if(P.length<=2||P.length>=5)return N.error("Expected 3 or 4 arguments, but found "+(P.length-1)+" instead.");var $=N.parse(P[1],1,En),he=N.parse(P[2],2,Ar);if(!$||!he)return null;if(!vs($.type,[va(En),Vr,En]))return N.error("Expected first argument to be of type array or string, but found "+La($.type)+" instead");if(P.length===4){var xe=N.parse(P[3],3,Ar);return xe?new Es($.type,$,he,xe):null}else return new Es($.type,$,he)},Es.prototype.evaluate=function(P){var N=this.input.evaluate(P),$=this.beginIndex.evaluate(P);if(!Cl(N,["string","array"]))throw new Zi("Expected first argument to be of type array or string, but found "+La(Gi(N))+" instead.");if(this.endIndex){var he=this.endIndex.evaluate(P);return N.slice($,he)}return N.slice($)},Es.prototype.eachChild=function(P){P(this.input),P(this.beginIndex),this.endIndex&&P(this.endIndex)},Es.prototype.outputDefined=function(){return!1},Es.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var P=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),P]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};function Zu(L,P){return L==="=="||L==="!="?P.kind==="boolean"||P.kind==="string"||P.kind==="number"||P.kind==="null"||P.kind==="value":P.kind==="string"||P.kind==="number"||P.kind==="value"}function vu(L,P,N){return P===N}function Ku(L,P,N){return P!==N}function Tt(L,P,N){return P<N}function Yt(L,P,N){return P>N}function yr(L,P,N){return P<=N}function vr(L,P,N){return P>=N}function Nr(L,P,N,$){return $.compare(P,N)===0}function ln(L,P,N,$){return!Nr(L,P,N,$)}function wn(L,P,N,$){return $.compare(P,N)<0}function Pn(L,P,N,$){return $.compare(P,N)>0}function zn(L,P,N,$){return $.compare(P,N)<=0}function Wn(L,P,N,$){return $.compare(P,N)>=0}function Tn(L,P,N){var $=L!=="=="&&L!=="!=";return function(){function he(xe,Te,Ne){this.type=_n,this.lhs=xe,this.rhs=Te,this.collator=Ne,this.hasUntypedArgument=xe.type.kind==="value"||Te.type.kind==="value"}return he.parse=function(Te,Ne){if(Te.length!==3&&Te.length!==4)return Ne.error("Expected two or three arguments.");var nt=Te[0],gt=Ne.parse(Te[1],1,En);if(!gt)return null;if(!Zu(nt,gt.type))return Ne.concat(1).error('"'+nt+`" comparisons are not supported for type '`+La(gt.type)+"'.");var bt=Ne.parse(Te[2],2,En);if(!bt)return null;if(!Zu(nt,bt.type))return Ne.concat(2).error('"'+nt+`" comparisons are not supported for type '`+La(bt.type)+"'.");if(gt.type.kind!==bt.type.kind&&gt.type.kind!=="value"&&bt.type.kind!=="value")return Ne.error("Cannot compare types '"+La(gt.type)+"' and '"+La(bt.type)+"'.");$&&(gt.type.kind==="value"&&bt.type.kind!=="value"?gt=new uo(bt.type,[gt]):gt.type.kind!=="value"&&bt.type.kind==="value"&&(bt=new uo(gt.type,[bt])));var Gt=null;if(Te.length===4){if(gt.type.kind!=="string"&&bt.type.kind!=="string"&&gt.type.kind!=="value"&&bt.type.kind!=="value")return Ne.error("Cannot use collator to compare non-string types.");if(Gt=Ne.parse(Te[3],3,fa),!Gt)return null}return new he(gt,bt,Gt)},he.prototype.evaluate=function(Te){var Ne=this.lhs.evaluate(Te),nt=this.rhs.evaluate(Te);if($&&this.hasUntypedArgument){var gt=Gi(Ne),bt=Gi(nt);if(gt.kind!==bt.kind||!(gt.kind==="string"||gt.kind==="number"))throw new Zi('Expected arguments for "'+L+'" to be (string, string) or (number, number), but found ('+gt.kind+", "+bt.kind+") instead.")}if(this.collator&&!$&&this.hasUntypedArgument){var Gt=Gi(Ne),lr=Gi(nt);if(Gt.kind!=="string"||lr.kind!=="string")return P(Te,Ne,nt)}return this.collator?N(Te,Ne,nt,this.collator.evaluate(Te)):P(Te,Ne,nt)},he.prototype.eachChild=function(Te){Te(this.lhs),Te(this.rhs),this.collator&&Te(this.collator)},he.prototype.outputDefined=function(){return!0},he.prototype.serialize=function(){var Te=[L];return this.eachChild(function(Ne){Te.push(Ne.serialize())}),Te},he}()}var Vn=Tn("==",vu,Nr),On=Tn("!=",Ku,ln),Xn=Tn("<",Tt,wn),aa=Tn(">",Yt,Pn),Ha=Tn("<=",yr,zn),Ia=Tn(">=",vr,Wn),Ga=function(P,N,$,he,xe){this.type=Vr,this.number=P,this.locale=N,this.currency=$,this.minFractionDigits=he,this.maxFractionDigits=xe};Ga.parse=function(P,N){if(P.length!==3)return N.error("Expected two arguments.");var $=N.parse(P[1],1,Ar);if(!$)return null;var he=P[2];if(typeof he!="object"||Array.isArray(he))return N.error("NumberFormat options argument must be an object.");var xe=null;if(he.locale&&(xe=N.parse(he.locale,1,Vr),!xe))return null;var Te=null;if(he.currency&&(Te=N.parse(he.currency,1,Vr),!Te))return null;var Ne=null;if(he["min-fraction-digits"]&&(Ne=N.parse(he["min-fraction-digits"],1,Ar),!Ne))return null;var nt=null;return he["max-fraction-digits"]&&(nt=N.parse(he["max-fraction-digits"],1,Ar),!nt)?null:new Ga($,xe,Te,Ne,nt)},Ga.prototype.evaluate=function(P){return new Intl.NumberFormat(this.locale?this.locale.evaluate(P):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(P):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(P):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(P):void 0}).format(this.number.evaluate(P))},Ga.prototype.eachChild=function(P){P(this.number),this.locale&&P(this.locale),this.currency&&P(this.currency),this.minFractionDigits&&P(this.minFractionDigits),this.maxFractionDigits&&P(this.maxFractionDigits)},Ga.prototype.outputDefined=function(){return!1},Ga.prototype.serialize=function(){var P={};return this.locale&&(P.locale=this.locale.serialize()),this.currency&&(P.currency=this.currency.serialize()),this.minFractionDigits&&(P["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(P["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),P]};var Ya=function(P){this.type=Ar,this.input=P};Ya.parse=function(P,N){if(P.length!==2)return N.error("Expected 1 argument, but found "+(P.length-1)+" instead.");var $=N.parse(P[1],1);return $?$.type.kind!=="array"&&$.type.kind!=="string"&&$.type.kind!=="value"?N.error("Expected argument of type string or array, but found "+La($.type)+" instead."):new Ya($):null},Ya.prototype.evaluate=function(P){var N=this.input.evaluate(P);if(typeof N=="string")return N.length;if(Array.isArray(N))return N.length;throw new Zi("Expected value to be of type string or array, but found "+La(Gi(N))+" instead.")},Ya.prototype.eachChild=function(P){P(this.input)},Ya.prototype.outputDefined=function(){return!1},Ya.prototype.serialize=function(){var P=["length"];return this.eachChild(function(N){P.push(N.serialize())}),P};var ra={"==":Vn,"!=":On,">":aa,"<":Xn,">=":Ia,"<=":Ha,array:uo,at:al,boolean:uo,case:Vo,coalesce:Ms,collator:rl,format:_s,image:vl,in:js,"index-of":Ss,interpolate:wo,"interpolate-hcl":wo,"interpolate-lab":wo,length:Ya,let:nl,literal:lo,match:eo,number:uo,"number-format":Ga,object:uo,slice:Es,step:Ws,string:uo,"to-boolean":ps,"to-color":ps,"to-number":ps,"to-string":ps,var:zs,within:ds};function ma(L,P){var N=P[0],$=P[1],he=P[2],xe=P[3];N=N.evaluate(L),$=$.evaluate(L),he=he.evaluate(L);var Te=xe?xe.evaluate(L):1,Ne=Vl(N,$,he,Te);if(Ne)throw new Zi(Ne);return new _i(N/255*Te,$/255*Te,he/255*Te,Te)}function Ja(L,P){return L in P}function ai(L,P){var N=P[L];return typeof N>"u"?null:N}function Mi(L,P,N,$){for(;N<=$;){var he=N+$>>1;if(P[he]===L)return!0;P[he]>L?$=he-1:N=he+1}return!1}function Si(L){return{type:L}}Bo.register(ra,{error:[ea,[Vr],function(L,P){var N=P[0];throw new Zi(N.evaluate(L))}],typeof:[Vr,[En],function(L,P){var N=P[0];return La(Gi(N.evaluate(L)))}],"to-rgba":[va(Ar,4),[Gn],function(L,P){var N=P[0];return N.evaluate(L).toArray()}],rgb:[Gn,[Ar,Ar,Ar],ma],rgba:[Gn,[Ar,Ar,Ar,Ar],ma],has:{type:_n,overloads:[[[Vr],function(L,P){var N=P[0];return Ja(N.evaluate(L),L.properties())}],[[Vr,sa],function(L,P){var N=P[0],$=P[1];return Ja(N.evaluate(L),$.evaluate(L))}]]},get:{type:En,overloads:[[[Vr],function(L,P){var N=P[0];return ai(N.evaluate(L),L.properties())}],[[Vr,sa],function(L,P){var N=P[0],$=P[1];return ai(N.evaluate(L),$.evaluate(L))}]]},"feature-state":[En,[Vr],function(L,P){var N=P[0];return ai(N.evaluate(L),L.featureState||{})}],properties:[sa,[],function(L){return L.properties()}],"geometry-type":[Vr,[],function(L){return L.geometryType()}],id:[En,[],function(L){return L.id()}],zoom:[Ar,[],function(L){return L.globals.zoom}],"heatmap-density":[Ar,[],function(L){return L.globals.heatmapDensity||0}],"line-progress":[Ar,[],function(L){return L.globals.lineProgress||0}],accumulated:[En,[],function(L){return L.globals.accumulated===void 0?null:L.globals.accumulated}],"+":[Ar,Si(Ar),function(L,P){for(var N=0,$=0,he=P;$<he.length;$+=1){var xe=he[$];N+=xe.evaluate(L)}return N}],"*":[Ar,Si(Ar),function(L,P){for(var N=1,$=0,he=P;$<he.length;$+=1){var xe=he[$];N*=xe.evaluate(L)}return N}],"-":{type:Ar,overloads:[[[Ar,Ar],function(L,P){var N=P[0],$=P[1];return N.evaluate(L)-$.evaluate(L)}],[[Ar],function(L,P){var N=P[0];return-N.evaluate(L)}]]},"/":[Ar,[Ar,Ar],function(L,P){var N=P[0],$=P[1];return N.evaluate(L)/$.evaluate(L)}],"%":[Ar,[Ar,Ar],function(L,P){var N=P[0],$=P[1];return N.evaluate(L)%$.evaluate(L)}],ln2:[Ar,[],function(){return Math.LN2}],pi:[Ar,[],function(){return Math.PI}],e:[Ar,[],function(){return Math.E}],"^":[Ar,[Ar,Ar],function(L,P){var N=P[0],$=P[1];return Math.pow(N.evaluate(L),$.evaluate(L))}],sqrt:[Ar,[Ar],function(L,P){var N=P[0];return Math.sqrt(N.evaluate(L))}],log10:[Ar,[Ar],function(L,P){var N=P[0];return Math.log(N.evaluate(L))/Math.LN10}],ln:[Ar,[Ar],function(L,P){var N=P[0];return Math.log(N.evaluate(L))}],log2:[Ar,[Ar],function(L,P){var N=P[0];return Math.log(N.evaluate(L))/Math.LN2}],sin:[Ar,[Ar],function(L,P){var N=P[0];return Math.sin(N.evaluate(L))}],cos:[Ar,[Ar],function(L,P){var N=P[0];return Math.cos(N.evaluate(L))}],tan:[Ar,[Ar],function(L,P){var N=P[0];return Math.tan(N.evaluate(L))}],asin:[Ar,[Ar],function(L,P){var N=P[0];return Math.asin(N.evaluate(L))}],acos:[Ar,[Ar],function(L,P){var N=P[0];return Math.acos(N.evaluate(L))}],atan:[Ar,[Ar],function(L,P){var N=P[0];return Math.atan(N.evaluate(L))}],min:[Ar,Si(Ar),function(L,P){return Math.min.apply(Math,P.map(function(N){return N.evaluate(L)}))}],max:[Ar,Si(Ar),function(L,P){return Math.max.apply(Math,P.map(function(N){return N.evaluate(L)}))}],abs:[Ar,[Ar],function(L,P){var N=P[0];return Math.abs(N.evaluate(L))}],round:[Ar,[Ar],function(L,P){var N=P[0],$=N.evaluate(L);return $<0?-Math.round(-$):Math.round($)}],floor:[Ar,[Ar],function(L,P){var N=P[0];return Math.floor(N.evaluate(L))}],ceil:[Ar,[Ar],function(L,P){var N=P[0];return Math.ceil(N.evaluate(L))}],"filter-==":[_n,[Vr,En],function(L,P){var N=P[0],$=P[1];return L.properties()[N.value]===$.value}],"filter-id-==":[_n,[En],function(L,P){var N=P[0];return L.id()===N.value}],"filter-type-==":[_n,[Vr],function(L,P){var N=P[0];return L.geometryType()===N.value}],"filter-<":[_n,[Vr,En],function(L,P){var N=P[0],$=P[1],he=L.properties()[N.value],xe=$.value;return typeof he==typeof xe&&he<xe}],"filter-id-<":[_n,[En],function(L,P){var N=P[0],$=L.id(),he=N.value;return typeof $==typeof he&&$<he}],"filter->":[_n,[Vr,En],function(L,P){var N=P[0],$=P[1],he=L.properties()[N.value],xe=$.value;return typeof he==typeof xe&&he>xe}],"filter-id->":[_n,[En],function(L,P){var N=P[0],$=L.id(),he=N.value;return typeof $==typeof he&&$>he}],"filter-<=":[_n,[Vr,En],function(L,P){var N=P[0],$=P[1],he=L.properties()[N.value],xe=$.value;return typeof he==typeof xe&&he<=xe}],"filter-id-<=":[_n,[En],function(L,P){var N=P[0],$=L.id(),he=N.value;return typeof $==typeof he&&$<=he}],"filter->=":[_n,[Vr,En],function(L,P){var N=P[0],$=P[1],he=L.properties()[N.value],xe=$.value;return typeof he==typeof xe&&he>=xe}],"filter-id->=":[_n,[En],function(L,P){var N=P[0],$=L.id(),he=N.value;return typeof $==typeof he&&$>=he}],"filter-has":[_n,[En],function(L,P){var N=P[0];return N.value in L.properties()}],"filter-has-id":[_n,[],function(L){return L.id()!==null&&L.id()!==void 0}],"filter-type-in":[_n,[va(Vr)],function(L,P){var N=P[0];return N.value.indexOf(L.geometryType())>=0}],"filter-id-in":[_n,[va(En)],function(L,P){var N=P[0];return N.value.indexOf(L.id())>=0}],"filter-in-small":[_n,[Vr,va(En)],function(L,P){var N=P[0],$=P[1];return $.value.indexOf(L.properties()[N.value])>=0}],"filter-in-large":[_n,[Vr,va(En)],function(L,P){var N=P[0],$=P[1];return Mi(L.properties()[N.value],$.value,0,$.value.length-1)}],all:{type:_n,overloads:[[[_n,_n],function(L,P){var N=P[0],$=P[1];return N.evaluate(L)&&$.evaluate(L)}],[Si(_n),function(L,P){for(var N=0,$=P;N<$.length;N+=1){var he=$[N];if(!he.evaluate(L))return!1}return!0}]]},any:{type:_n,overloads:[[[_n,_n],function(L,P){var N=P[0],$=P[1];return N.evaluate(L)||$.evaluate(L)}],[Si(_n),function(L,P){for(var N=0,$=P;N<$.length;N+=1){var he=$[N];if(he.evaluate(L))return!0}return!1}]]},"!":[_n,[_n],function(L,P){var N=P[0];return!N.evaluate(L)}],"is-supported-script":[_n,[Vr],function(L,P){var N=P[0],$=L.globals&&L.globals.isSupportedScript;return $?$(N.evaluate(L)):!0}],upcase:[Vr,[Vr],function(L,P){var N=P[0];return N.evaluate(L).toUpperCase()}],downcase:[Vr,[Vr],function(L,P){var N=P[0];return N.evaluate(L).toLowerCase()}],concat:[Vr,Si(En),function(L,P){return P.map(function(N){return kl(N.evaluate(L))}).join("")}],"resolved-locale":[Vr,[fa],function(L,P){var N=P[0];return N.evaluate(L).resolvedLocale()}]});function Ci(L){return{result:"success",value:L}}function Fi(L){return{result:"error",value:L}}function pi(L){return L["property-type"]==="data-driven"||L["property-type"]==="cross-faded-data-driven"}function Lo(L){return!!L.expression&&L.expression.parameters.indexOf("zoom")>-1}function ho(L){return!!L.expression&&L.expression.interpolated}function ni(L){return L instanceof Number?"number":L instanceof String?"string":L instanceof Boolean?"boolean":Array.isArray(L)?"array":L===null?"null":typeof L}function xa(L){return typeof L=="object"&&L!==null&&!Array.isArray(L)}function ki(L){return L}function _o(L,P){var N=P.type==="color",$=L.stops&&typeof L.stops[0][0]=="object",he=$||L.property!==void 0,xe=$||!he,Te=L.type||(ho(P)?"exponential":"interval");if(N&&(L=xn({},L),L.stops&&(L.stops=L.stops.map(function(ua){return[ua[0],_i.parse(ua[1])]})),L.default?L.default=_i.parse(L.default):L.default=_i.parse(P.default)),L.colorSpace&&L.colorSpace!=="rgb"&&!Kl[L.colorSpace])throw new Error("Unknown color space: "+L.colorSpace);var Ne,nt,gt;if(Te==="exponential")Ne=Qo;else if(Te==="interval")Ne=Xs;else if(Te==="categorical"){Ne=Cs,nt=Object.create(null);for(var bt=0,Gt=L.stops;bt<Gt.length;bt+=1){var lr=Gt[bt];nt[lr[0]]=lr[1]}gt=typeof L.stops[0][0]}else if(Te==="identity")Ne=wl;else throw new Error('Unknown function type "'+Te+'"');if($){for(var ir={},wr=[],Hr=0;Hr<L.stops.length;Hr++){var cn=L.stops[Hr],an=cn[0].zoom;ir[an]===void 0&&(ir[an]={zoom:an,type:L.type,property:L.property,default:L.default,stops:[]},wr.push(an)),ir[an].stops.push([cn[0].value,cn[1]])}for(var Rn=[],An=0,Dn=wr;An<Dn.length;An+=1){var Un=Dn[An];Rn.push([ir[Un].zoom,_o(ir[Un],P)])}var Kn={name:"linear"};return{kind:"composite",interpolationType:Kn,interpolationFactor:wo.interpolationFactor.bind(void 0,Kn),zoomStops:Rn.map(function(ua){return ua[0]}),evaluate:function(Ba,Ca){var Da=Ba.zoom;return Qo({stops:Rn,base:L.base},P,Da).evaluate(Da,Ca)}}}else if(xe){var ha=Te==="exponential"?{name:"exponential",base:L.base!==void 0?L.base:1}:null;return{kind:"camera",interpolationType:ha,interpolationFactor:wo.interpolationFactor.bind(void 0,ha),zoomStops:L.stops.map(function(ua){return ua[0]}),evaluate:function(ua){var Ba=ua.zoom;return Ne(L,P,Ba,nt,gt)}}}else return{kind:"source",evaluate:function(Ba,Ca){var Da=Ca&&Ca.properties?Ca.properties[L.property]:void 0;return Da===void 0?Eo(L.default,P.default):Ne(L,P,Da,nt,gt)}}}function Eo(L,P,N){if(L!==void 0)return L;if(P!==void 0)return P;if(N!==void 0)return N}function Cs(L,P,N,$,he){var xe=typeof N===he?$[N]:void 0;return Eo(xe,L.default,P.default)}function Xs(L,P,N){if(ni(N)!=="number")return Eo(L.default,P.default);var $=L.stops.length;if($===1||N<=L.stops[0][0])return L.stops[0][1];if(N>=L.stops[$-1][0])return L.stops[$-1][1];var he=Ys(L.stops.map(function(xe){return xe[0]}),N);return L.stops[he][1]}function Qo(L,P,N){var $=L.base!==void 0?L.base:1;if(ni(N)!=="number")return Eo(L.default,P.default);var he=L.stops.length;if(he===1||N<=L.stops[0][0])return L.stops[0][1];if(N>=L.stops[he-1][0])return L.stops[he-1][1];var xe=Ys(L.stops.map(function(Gt){return Gt[0]}),N),Te=Ns(N,$,L.stops[xe][0],L.stops[xe+1][0]),Ne=L.stops[xe][1],nt=L.stops[xe+1][1],gt=yl[P.type]||ki;if(L.colorSpace&&L.colorSpace!=="rgb"){var bt=Kl[L.colorSpace];gt=function(Gt,lr){return bt.reverse(bt.interpolate(bt.forward(Gt),bt.forward(lr),Te))}}return typeof Ne.evaluate=="function"?{evaluate:function(){for(var lr=[],ir=arguments.length;ir--;)lr[ir]=arguments[ir];var wr=Ne.evaluate.apply(void 0,lr),Hr=nt.evaluate.apply(void 0,lr);if(!(wr===void 0||Hr===void 0))return gt(wr,Hr,Te)}}:gt(Ne,nt,Te)}function wl(L,P,N){return P.type==="color"?N=_i.parse(N):P.type==="formatted"?N=qi.fromString(N.toString()):P.type==="resolvedImage"?N=No.fromString(N.toString()):ni(N)!==P.type&&(P.type!=="enum"||!P.values[N])&&(N=void 0),Eo(N,L.default,P.default)}function Ns(L,P,N,$){var he=$-N,xe=L-N;return he===0?0:P===1?xe/he:(Math.pow(P,xe)-1)/(Math.pow(P,he)-1)}var ks=function(P,N){this.expression=P,this._warningHistory={},this._evaluator=new tl,this._defaultValue=N?gf(N):null,this._enumValues=N&&N.type==="enum"?N.values:null};ks.prototype.evaluateWithoutErrorHandling=function(P,N,$,he,xe,Te){return this._evaluator.globals=P,this._evaluator.feature=N,this._evaluator.featureState=$,this._evaluator.canonical=he,this._evaluator.availableImages=xe||null,this._evaluator.formattedSection=Te,this.expression.evaluate(this._evaluator)},ks.prototype.evaluate=function(P,N,$,he,xe,Te){this._evaluator.globals=P,this._evaluator.feature=N||null,this._evaluator.featureState=$||null,this._evaluator.canonical=he,this._evaluator.availableImages=xe||null,this._evaluator.formattedSection=Te||null;try{var Ne=this.expression.evaluate(this._evaluator);if(Ne==null||typeof Ne=="number"&&Ne!==Ne)return this._defaultValue;if(this._enumValues&&!(Ne in this._enumValues))throw new Zi("Expected value to be one of "+Object.keys(this._enumValues).map(function(nt){return JSON.stringify(nt)}).join(", ")+", but found "+JSON.stringify(Ne)+" instead.");return Ne}catch(nt){return this._warningHistory[nt.message]||(this._warningHistory[nt.message]=!0,typeof console<"u"&&console.warn(nt.message)),this._defaultValue}};function Po(L){return Array.isArray(L)&&L.length>0&&typeof L[0]=="string"&&L[0]in ra}function pu(L,P){var N=new Uo(ra,[],P?Qu(P):void 0),$=N.parse(L,void 0,void 0,void 0,P&&P.type==="string"?{typeAnnotation:"coerce"}:void 0);return $?Ci(new ks($,P)):Fi(N.errors)}var ku=function(P,N){this.kind=P,this._styleExpression=N,this.isStateDependent=P!=="constant"&&!Dl(N.expression)};ku.prototype.evaluateWithoutErrorHandling=function(P,N,$,he,xe,Te){return this._styleExpression.evaluateWithoutErrorHandling(P,N,$,he,xe,Te)},ku.prototype.evaluate=function(P,N,$,he,xe,Te){return this._styleExpression.evaluate(P,N,$,he,xe,Te)};var Ls=function(P,N,$,he){this.kind=P,this.zoomStops=$,this._styleExpression=N,this.isStateDependent=P!=="camera"&&!Dl(N.expression),this.interpolationType=he};Ls.prototype.evaluateWithoutErrorHandling=function(P,N,$,he,xe,Te){return this._styleExpression.evaluateWithoutErrorHandling(P,N,$,he,xe,Te)},Ls.prototype.evaluate=function(P,N,$,he,xe,Te){return this._styleExpression.evaluate(P,N,$,he,xe,Te)},Ls.prototype.interpolationFactor=function(P,N,$){return this.interpolationType?wo.interpolationFactor(this.interpolationType,P,N,$):0};function Ju(L,P){if(L=pu(L,P),L.result==="error")return L;var N=L.value.expression,$=Pl(N);if(!$&&!pi(P))return Fi([new Mn("","data expressions not supported")]);var he=Eu(N,["zoom"]);if(!he&&!Lo(P))return Fi([new Mn("","zoom expressions not supported")]);var xe=df(N);if(!xe&&!he)return Fi([new Mn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(xe instanceof Mn)return Fi([xe]);if(xe instanceof wo&&!ho(P))return Fi([new Mn("",'"interpolate" expressions cannot be used with this property')]);if(!xe)return Ci($?new ku("constant",L.value):new ku("source",L.value));var Te=xe instanceof wo?xe.interpolation:void 0;return Ci($?new Ls("camera",L.value,xe.labels,Te):new Ls("composite",L.value,xe.labels,Te))}var du=function(P,N){this._parameters=P,this._specification=N,xn(this,_o(this._parameters,this._specification))};du.deserialize=function(P){return new du(P._parameters,P._specification)},du.serialize=function(P){return{_parameters:P._parameters,_specification:P._specification}};function uc(L,P){if(xa(L))return new du(L,P);if(Po(L)){var N=Ju(L,P);if(N.result==="error")throw new Error(N.value.map(function(he){return he.key+": "+he.message}).join(", "));return N.value}else{var $=L;return typeof L=="string"&&P.type==="color"&&($=_i.parse(L)),{kind:"constant",evaluate:function(){return $}}}}function df(L){var P=null;if(L instanceof nl)P=df(L.result);else if(L instanceof Ms)for(var N=0,$=L.args;N<$.length;N+=1){var he=$[N];if(P=df(he),P)break}else(L instanceof Ws||L instanceof wo)&&L.input instanceof Bo&&L.input.name==="zoom"&&(P=L);return P instanceof Mn||L.eachChild(function(xe){var Te=df(xe);Te instanceof Mn?P=Te:!P&&Te?P=new Mn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):P&&Te&&P!==Te&&(P=new Mn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),P}function Qu(L){var P={color:Gn,string:Vr,number:Ar,enum:Vr,boolean:_n,formatted:wa,resolvedImage:Aa};return L.type==="array"?va(P[L.value]||En,L.length):P[L.type]}function gf(L){return L.type==="color"&&xa(L.default)?new _i(0,0,0,0):L.type==="color"?_i.parse(L.default)||null:L.default===void 0?null:L.default}function Zs(L){var P=L.key,N=L.value,$=L.valueSpec||{},he=L.objectElementValidators||{},xe=L.style,Te=L.styleSpec,Ne=[],nt=ni(N);if(nt!=="object")return[new mr(P,N,"object expected, "+nt+" found")];for(var gt in N){var bt=gt.split(".")[0],Gt=$[bt]||$["*"],lr=void 0;if(he[bt])lr=he[bt];else if($[bt])lr=wi;else if(he["*"])lr=he["*"];else if($["*"])lr=wi;else{Ne.push(new mr(P,N[gt],'unknown property "'+gt+'"'));continue}Ne=Ne.concat(lr({key:(P&&P+".")+gt,value:N[gt],valueSpec:Gt,style:xe,styleSpec:Te,object:N,objectKey:gt},N))}for(var ir in $)he[ir]||$[ir].required&&$[ir].default===void 0&&N[ir]===void 0&&Ne.push(new mr(P,N,'missing required property "'+ir+'"'));return Ne}function Df(L){var P=L.value,N=L.valueSpec,$=L.style,he=L.styleSpec,xe=L.key,Te=L.arrayElementValidator||wi;if(ni(P)!=="array")return[new mr(xe,P,"array expected, "+ni(P)+" found")];if(N.length&&P.length!==N.length)return[new mr(xe,P,"array length "+N.length+" expected, length "+P.length+" found")];if(N["min-length"]&&P.length<N["min-length"])return[new mr(xe,P,"array length at least "+N["min-length"]+" expected, length "+P.length+" found")];var Ne={type:N.value,values:N.values};he.$version<7&&(Ne.function=N.function),ni(N.value)==="object"&&(Ne=N.value);for(var nt=[],gt=0;gt<P.length;gt++)nt=nt.concat(Te({array:P,arrayIndex:gt,value:P[gt],valueSpec:Ne,style:$,styleSpec:he,key:xe+"["+gt+"]"}));return nt}function yf(L){var P=L.key,N=L.value,$=L.valueSpec,he=ni(N);return he==="number"&&N!==N&&(he="NaN"),he!=="number"?[new mr(P,N,"number expected, "+he+" found")]:"minimum"in $&&N<$.minimum?[new mr(P,N,N+" is less than the minimum value "+$.minimum)]:"maximum"in $&&N>$.maximum?[new mr(P,N,N+" is greater than the maximum value "+$.maximum)]:[]}function mf(L){var P=L.valueSpec,N=sn(L.value.type),$,he={},xe,Te,Ne=N!=="categorical"&&L.value.property===void 0,nt=!Ne,gt=ni(L.value.stops)==="array"&&ni(L.value.stops[0])==="array"&&ni(L.value.stops[0][0])==="object",bt=Zs({key:L.key,value:L.value,valueSpec:L.styleSpec.function,style:L.style,styleSpec:L.styleSpec,objectElementValidators:{stops:Gt,default:wr}});return N==="identity"&&Ne&&bt.push(new mr(L.key,L.value,'missing required property "property"')),N!=="identity"&&!L.value.stops&&bt.push(new mr(L.key,L.value,'missing required property "stops"')),N==="exponential"&&L.valueSpec.expression&&!ho(L.valueSpec)&&bt.push(new mr(L.key,L.value,"exponential functions not supported")),L.styleSpec.$version>=8&&(nt&&!pi(L.valueSpec)?bt.push(new mr(L.key,L.value,"property functions not supported")):Ne&&!Lo(L.valueSpec)&&bt.push(new mr(L.key,L.value,"zoom functions not supported"))),(N==="categorical"||gt)&&L.value.property===void 0&&bt.push(new mr(L.key,L.value,'"property" property is required')),bt;function Gt(Hr){if(N==="identity")return[new mr(Hr.key,Hr.value,'identity function may not have a "stops" property')];var cn=[],an=Hr.value;return cn=cn.concat(Df({key:Hr.key,value:an,valueSpec:Hr.valueSpec,style:Hr.style,styleSpec:Hr.styleSpec,arrayElementValidator:lr})),ni(an)==="array"&&an.length===0&&cn.push(new mr(Hr.key,an,"array must have at least one stop")),cn}function lr(Hr){var cn=[],an=Hr.value,Rn=Hr.key;if(ni(an)!=="array")return[new mr(Rn,an,"array expected, "+ni(an)+" found")];if(an.length!==2)return[new mr(Rn,an,"array length 2 expected, length "+an.length+" found")];if(gt){if(ni(an[0])!=="object")return[new mr(Rn,an,"object expected, "+ni(an[0])+" found")];if(an[0].zoom===void 0)return[new mr(Rn,an,"object stop key must have zoom")];if(an[0].value===void 0)return[new mr(Rn,an,"object stop key must have value")];if(Te&&Te>sn(an[0].zoom))return[new mr(Rn,an[0].zoom,"stop zoom values must appear in ascending order")];sn(an[0].zoom)!==Te&&(Te=sn(an[0].zoom),xe=void 0,he={}),cn=cn.concat(Zs({key:Rn+"[0]",value:an[0],valueSpec:{zoom:{}},style:Hr.style,styleSpec:Hr.styleSpec,objectElementValidators:{zoom:yf,value:ir}}))}else cn=cn.concat(ir({key:Rn+"[0]",value:an[0],valueSpec:{},style:Hr.style,styleSpec:Hr.styleSpec},an));return Po(kn(an[1]))?cn.concat([new mr(Rn+"[1]",an[1],"expressions are not allowed in function stops.")]):cn.concat(wi({key:Rn+"[1]",value:an[1],valueSpec:P,style:Hr.style,styleSpec:Hr.styleSpec}))}function ir(Hr,cn){var an=ni(Hr.value),Rn=sn(Hr.value),An=Hr.value!==null?Hr.value:cn;if(!$)$=an;else if(an!==$)return[new mr(Hr.key,An,an+" stop domain type must match previous stop domain type "+$)];if(an!=="number"&&an!=="string"&&an!=="boolean")return[new mr(Hr.key,An,"stop domain value must be a number, string, or boolean")];if(an!=="number"&&N!=="categorical"){var Dn="number expected, "+an+" found";return pi(P)&&N===void 0&&(Dn+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new mr(Hr.key,An,Dn)]}return N==="categorical"&&an==="number"&&(!isFinite(Rn)||Math.floor(Rn)!==Rn)?[new mr(Hr.key,An,"integer expected, found "+Rn)]:N!=="categorical"&&an==="number"&&xe!==void 0&&Rn<xe?[new mr(Hr.key,An,"stop domain values must appear in ascending order")]:(xe=Rn,N==="categorical"&&Rn in he?[new mr(Hr.key,An,"stop domain values must be unique")]:(he[Rn]=!0,[]))}function wr(Hr){return wi({key:Hr.key,value:Hr.value,valueSpec:P,style:Hr.style,styleSpec:Hr.styleSpec})}}function $o(L){var P=(L.expressionContext==="property"?Ju:pu)(kn(L.value),L.valueSpec);if(P.result==="error")return P.value.map(function($){return new mr(""+L.key+$.key,L.value,$.message)});var N=P.value.expression||P.value._styleExpression.expression;if(L.expressionContext==="property"&&L.propertyKey==="text-font"&&!N.outputDefined())return[new mr(L.key,L.value,'Invalid data expression for "'+L.propertyKey+'". Output values must be contained as literals within the expression.')];if(L.expressionContext==="property"&&L.propertyType==="layout"&&!Dl(N))return[new mr(L.key,L.value,'"feature-state" data expressions are not supported with layout properties.')];if(L.expressionContext==="filter"&&!Dl(N))return[new mr(L.key,L.value,'"feature-state" data expressions are not supported with filters.')];if(L.expressionContext&&L.expressionContext.indexOf("cluster")===0){if(!Eu(N,["zoom","feature-state"]))return[new mr(L.key,L.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(L.expressionContext==="cluster-initial"&&!Pl(N))return[new mr(L.key,L.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function xf(L){var P=L.value,N=L.key,$=ni(P);return $!=="boolean"?[new mr(N,P,"boolean expected, "+$+" found")]:[]}function Yf(L){var P=L.key,N=L.value,$=ni(N);return $!=="string"?[new mr(P,N,"color expected, "+$+" found")]:_u(N)===null?[new mr(P,N,'color expected, "'+N+'" found')]:[]}function Bs(L){var P=L.key,N=L.value,$=L.valueSpec,he=[];return Array.isArray($.values)?$.values.indexOf(sn(N))===-1&&he.push(new mr(P,N,"expected one of ["+$.values.join(", ")+"], "+JSON.stringify(N)+" found")):Object.keys($.values).indexOf(sn(N))===-1&&he.push(new mr(P,N,"expected one of ["+Object.keys($.values).join(", ")+"], "+JSON.stringify(N)+" found")),he}function $u(L){if(L===!0||L===!1)return!0;if(!Array.isArray(L)||L.length===0)return!1;switch(L[0]){case"has":return L.length>=2&&L[1]!=="$id"&&L[1]!=="$type";case"in":return L.length>=3&&(typeof L[1]!="string"||Array.isArray(L[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return L.length!==3||Array.isArray(L[1])||Array.isArray(L[2]);case"any":case"all":for(var P=0,N=L.slice(1);P<N.length;P+=1){var $=N[P];if(!$u($)&&typeof $!="boolean")return!1}return!0;default:return!0}}var qu={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function bf(L){if(L==null)return{filter:function(){return!0},needGeometry:!1};$u(L)||(L=at(L));var P=pu(L,qu);if(P.result==="error")throw new Error(P.value.map(function($){return $.key+": "+$.message}).join(", "));var N=Ze(L);return{filter:function($,he,xe){return P.value.evaluate($,he,{},xe)},needGeometry:N}}function ze(L,P){return L<P?-1:L>P?1:0}function Ze(L){if(!Array.isArray(L))return!1;if(L[0]==="within")return!0;for(var P=1;P<L.length;P++)if(Ze(L[P]))return!0;return!1}function at(L){if(!L)return!0;var P=L[0];if(L.length<=1)return P!=="any";var N=P==="=="?ct(L[1],L[2],"=="):P==="!="?gr(ct(L[1],L[2],"==")):P==="<"||P===">"||P==="<="||P===">="?ct(L[1],L[2],P):P==="any"?Et(L.slice(1)):P==="all"?["all"].concat(L.slice(1).map(at)):P==="none"?["all"].concat(L.slice(1).map(at).map(gr)):P==="in"?At(L[1],L.slice(2)):P==="!in"?gr(At(L[1],L.slice(2))):P==="has"?It(L[1]):P==="!has"?gr(It(L[1])):P==="within"?L:!0;return N}function ct(L,P,N){switch(L){case"$type":return["filter-type-"+N,P];case"$id":return["filter-id-"+N,P];default:return["filter-"+N,L,P]}}function Et(L){return["any"].concat(L.map(at))}function At(L,P){if(P.length===0)return!1;switch(L){case"$type":return["filter-type-in",["literal",P]];case"$id":return["filter-id-in",["literal",P]];default:return P.length>200&&!P.some(function(N){return typeof N!=typeof P[0]})?["filter-in-large",L,["literal",P.sort(ze)]]:["filter-in-small",L,["literal",P]]}}function It(L){switch(L){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",L]}}function gr(L){return["!",L]}function br(L){return $u(kn(L.value))?$o(xn({},L,{expressionContext:"filter",valueSpec:{value:"boolean"}})):pr(L)}function pr(L){var P=L.value,N=L.key;if(ni(P)!=="array")return[new mr(N,P,"array expected, "+ni(P)+" found")];var $=L.styleSpec,he,xe=[];if(P.length<1)return[new mr(N,P,"filter array must have at least 1 element")];switch(xe=xe.concat(Bs({key:N+"[0]",value:P[0],valueSpec:$.filter_operator,style:L.style,styleSpec:L.styleSpec})),sn(P[0])){case"<":case"<=":case">":case">=":P.length>=2&&sn(P[1])==="$type"&&xe.push(new mr(N,P,'"$type" cannot be use with operator "'+P[0]+'"'));case"==":case"!=":P.length!==3&&xe.push(new mr(N,P,'filter array for operator "'+P[0]+'" must have 3 elements'));case"in":case"!in":P.length>=2&&(he=ni(P[1]),he!=="string"&&xe.push(new mr(N+"[1]",P[1],"string expected, "+he+" found")));for(var Te=2;Te<P.length;Te++)he=ni(P[Te]),sn(P[1])==="$type"?xe=xe.concat(Bs({key:N+"["+Te+"]",value:P[Te],valueSpec:$.geometry_type,style:L.style,styleSpec:L.styleSpec})):he!=="string"&&he!=="number"&&he!=="boolean"&&xe.push(new mr(N+"["+Te+"]",P[Te],"string, number, or boolean expected, "+he+" found"));break;case"any":case"all":case"none":for(var Ne=1;Ne<P.length;Ne++)xe=xe.concat(pr({key:N+"["+Ne+"]",value:P[Ne],style:L.style,styleSpec:L.styleSpec}));break;case"has":case"!has":he=ni(P[1]),P.length!==2?xe.push(new mr(N,P,'filter array for "'+P[0]+'" operator must have 2 elements')):he!=="string"&&xe.push(new mr(N+"[1]",P[1],"string expected, "+he+" found"));break;case"within":he=ni(P[1]),P.length!==2?xe.push(new mr(N,P,'filter array for "'+P[0]+'" operator must have 2 elements')):he!=="object"&&xe.push(new mr(N+"[1]",P[1],"object expected, "+he+" found"));break}return xe}function Mr(L,P){var N=L.key,$=L.style,he=L.styleSpec,xe=L.value,Te=L.objectKey,Ne=he[P+"_"+L.layerType];if(!Ne)return[];var nt=Te.match(/^(.*)-transition$/);if(P==="paint"&&nt&&Ne[nt[1]]&&Ne[nt[1]].transition)return wi({key:N,value:xe,valueSpec:he.transition,style:$,styleSpec:he});var gt=L.valueSpec||Ne[Te];if(!gt)return[new mr(N,xe,'unknown property "'+Te+'"')];var bt;if(ni(xe)==="string"&&pi(gt)&&!gt.tokens&&(bt=/^{([^}]+)}$/.exec(xe)))return[new mr(N,xe,'"'+Te+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(bt[1])+" }`.")];var Gt=[];return L.layerType==="symbol"&&(Te==="text-field"&&$&&!$.glyphs&&Gt.push(new mr(N,xe,'use of "text-field" requires a style "glyphs" property')),Te==="text-font"&&xa(kn(xe))&&sn(xe.type)==="identity"&&Gt.push(new mr(N,xe,'"text-font" does not support identity functions'))),Gt.concat(wi({key:L.key,value:xe,valueSpec:gt,style:$,styleSpec:he,expressionContext:"property",propertyType:P,propertyKey:Te}))}function Or(L){return Mr(L,"paint")}function $r(L){return Mr(L,"layout")}function on(L){var P=[],N=L.value,$=L.key,he=L.style,xe=L.styleSpec;!N.type&&!N.ref&&P.push(new mr($,N,'either "type" or "ref" is required'));var Te=sn(N.type),Ne=sn(N.ref);if(N.id)for(var nt=sn(N.id),gt=0;gt<L.arrayIndex;gt++){var bt=he.layers[gt];sn(bt.id)===nt&&P.push(new mr($,N.id,'duplicate layer id "'+N.id+'", previously used at line '+bt.id.__line__))}if("ref"in N){["type","source","source-layer","filter","layout"].forEach(function(wr){wr in N&&P.push(new mr($,N[wr],'"'+wr+'" is prohibited for ref layers'))});var Gt;he.layers.forEach(function(wr){sn(wr.id)===Ne&&(Gt=wr)}),Gt?Gt.ref?P.push(new mr($,N.ref,"ref cannot reference another ref layer")):Te=sn(Gt.type):P.push(new mr($,N.ref,'ref layer "'+Ne+'" not found'))}else if(Te!=="background")if(!N.source)P.push(new mr($,N,'missing required property "source"'));else{var lr=he.sources&&he.sources[N.source],ir=lr&&sn(lr.type);lr?ir==="vector"&&Te==="raster"?P.push(new mr($,N.source,'layer "'+N.id+'" requires a raster source')):ir==="raster"&&Te!=="raster"?P.push(new mr($,N.source,'layer "'+N.id+'" requires a vector source')):ir==="vector"&&!N["source-layer"]?P.push(new mr($,N,'layer "'+N.id+'" must specify a "source-layer"')):ir==="raster-dem"&&Te!=="hillshade"?P.push(new mr($,N.source,"raster-dem source can only be used with layer type 'hillshade'.")):Te==="line"&&N.paint&&N.paint["line-gradient"]&&(ir!=="geojson"||!lr.lineMetrics)&&P.push(new mr($,N,'layer "'+N.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):P.push(new mr($,N.source,'source "'+N.source+'" not found'))}return P=P.concat(Zs({key:$,value:N,valueSpec:xe.layer,style:L.style,styleSpec:L.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return wi({key:$+".type",value:N.type,valueSpec:xe.layer.type,style:L.style,styleSpec:L.styleSpec,object:N,objectKey:"type"})},filter:br,layout:function(Hr){return Zs({layer:N,key:Hr.key,value:Hr.value,style:Hr.style,styleSpec:Hr.styleSpec,objectElementValidators:{"*":function(an){return $r(xn({layerType:Te},an))}}})},paint:function(Hr){return Zs({layer:N,key:Hr.key,value:Hr.value,style:Hr.style,styleSpec:Hr.styleSpec,objectElementValidators:{"*":function(an){return Or(xn({layerType:Te},an))}}})}}})),P}function Sn(L){var P=L.value,N=L.key,$=ni(P);return $!=="string"?[new mr(N,P,"string expected, "+$+" found")]:[]}var Nn={promoteId:_a};function Qn(L){var P=L.value,N=L.key,$=L.styleSpec,he=L.style;if(!P.type)return[new mr(N,P,'"type" is required')];var xe=sn(P.type),Te;switch(xe){case"vector":case"raster":case"raster-dem":return Te=Zs({key:N,value:P,valueSpec:$["source_"+xe.replace("-","_")],style:L.style,styleSpec:$,objectElementValidators:Nn}),Te;case"geojson":if(Te=Zs({key:N,value:P,valueSpec:$.source_geojson,style:he,styleSpec:$,objectElementValidators:Nn}),P.cluster)for(var Ne in P.clusterProperties){var nt=P.clusterProperties[Ne],gt=nt[0],bt=nt[1],Gt=typeof gt=="string"?[gt,["accumulated"],["get",Ne]]:gt;Te.push.apply(Te,$o({key:N+"."+Ne+".map",value:bt,expressionContext:"cluster-map"})),Te.push.apply(Te,$o({key:N+"."+Ne+".reduce",value:Gt,expressionContext:"cluster-reduce"}))}return Te;case"video":return Zs({key:N,value:P,valueSpec:$.source_video,style:he,styleSpec:$});case"image":return Zs({key:N,value:P,valueSpec:$.source_image,style:he,styleSpec:$});case"canvas":return[new mr(N,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Bs({key:N+".type",value:P.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:he,styleSpec:$})}}function _a(L){var P=L.key,N=L.value;if(ni(N)==="string")return Sn({key:P,value:N});var $=[];for(var he in N)$.push.apply($,Sn({key:P+"."+he,value:N[he]}));return $}function Ma(L){var P=L.value,N=L.styleSpec,$=N.light,he=L.style,xe=[],Te=ni(P);if(P===void 0)return xe;if(Te!=="object")return xe=xe.concat([new mr("light",P,"object expected, "+Te+" found")]),xe;for(var Ne in P){var nt=Ne.match(/^(.*)-transition$/);nt&&$[nt[1]]&&$[nt[1]].transition?xe=xe.concat(wi({key:Ne,value:P[Ne],valueSpec:N.transition,style:he,styleSpec:N})):$[Ne]?xe=xe.concat(wi({key:Ne,value:P[Ne],valueSpec:$[Ne],style:he,styleSpec:N})):xe=xe.concat([new mr(Ne,P[Ne],'unknown property "'+Ne+'"')])}return xe}function ri(L){return Sn(L).length===0?[]:$o(L)}function Qa(L){return Sn(L).length===0?[]:$o(L)}var si={"*":function(){return[]},array:Df,boolean:xf,number:yf,color:Yf,constants:un,enum:Bs,filter:br,function:mf,layer:on,object:Zs,source:Qn,light:Ma,string:Sn,formatted:ri,resolvedImage:Qa};function wi(L){var P=L.value,N=L.valueSpec,$=L.styleSpec;if(N.expression&&xa(sn(P)))return mf(L);if(N.expression&&Po(kn(P)))return $o(L);if(N.type&&si[N.type])return si[N.type](L);var he=Zs(xn({},L,{valueSpec:N.type?$[N.type]:N}));return he}function mo(L){var P=L.value,N=L.key,$=Sn(L);return $.length||(P.indexOf("{fontstack}")===-1&&$.push(new mr(N,P,'"glyphs" url must include a "{fontstack}" token')),P.indexOf("{range}")===-1&&$.push(new mr(N,P,'"glyphs" url must include a "{range}" token'))),$}function fi(L,P){P===void 0&&(P=Xt);var N=[];return N=N.concat(wi({key:"",value:L,valueSpec:P.$root,styleSpec:P,style:L,objectElementValidators:{glyphs:mo,"*":function(){return[]}}})),L.constants&&(N=N.concat(un({key:"constants",value:L.constants,style:L,styleSpec:P}))),to(N)}fi.source=To(Qn),fi.light=To(Ma),fi.layer=To(on),fi.filter=To(br),fi.paintProperty=To(Or),fi.layoutProperty=To($r);function to(L){return[].concat(L).sort(function(P,N){return P.line-N.line})}function To(L){return function(){for(var P=[],N=arguments.length;N--;)P[N]=arguments[N];return to(L.apply(this,P))}}var Io=fi,Li=Io.light,zi=Io.paintProperty,Ps=Io.layoutProperty;function Co(L,P){var N=!1;if(P&&P.length)for(var $=0,he=P;$<he.length;$+=1){var xe=he[$];L.fire(new Sr(new Error(xe.message))),N=!0}return N}var Yo=le,ls=3;function le(L,P,N){var $=this.cells=[];if(L instanceof ArrayBuffer){this.arrayBuffer=L;var he=new Int32Array(this.arrayBuffer);L=he[0],P=he[1],N=he[2],this.d=P+2*N;for(var xe=0;xe<this.d*this.d;xe++){var Te=he[ls+xe],Ne=he[ls+xe+1];$.push(Te===Ne?null:he.subarray(Te,Ne))}var nt=he[ls+$.length],gt=he[ls+$.length+1];this.keys=he.subarray(nt,gt),this.bboxes=he.subarray(gt),this.insert=this._insertReadonly}else{this.d=P+2*N;for(var bt=0;bt<this.d*this.d;bt++)$.push([]);this.keys=[],this.bboxes=[]}this.n=P,this.extent=L,this.padding=N,this.scale=P/L,this.uid=0;var Gt=N/P*L;this.min=-Gt,this.max=L+Gt}le.prototype.insert=function(L,P,N,$,he){this._forEachCell(P,N,$,he,this._insertCell,this.uid++),this.keys.push(L),this.bboxes.push(P),this.bboxes.push(N),this.bboxes.push($),this.bboxes.push(he)},le.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},le.prototype._insertCell=function(L,P,N,$,he,xe){this.cells[he].push(xe)},le.prototype.query=function(L,P,N,$,he){var xe=this.min,Te=this.max;if(L<=xe&&P<=xe&&Te<=N&&Te<=$&&!he)return Array.prototype.slice.call(this.keys);var Ne=[],nt={};return this._forEachCell(L,P,N,$,this._queryCell,Ne,nt,he),Ne},le.prototype._queryCell=function(L,P,N,$,he,xe,Te,Ne){var nt=this.cells[he];if(nt!==null)for(var gt=this.keys,bt=this.bboxes,Gt=0;Gt<nt.length;Gt++){var lr=nt[Gt];if(Te[lr]===void 0){var ir=lr*4;(Ne?Ne(bt[ir+0],bt[ir+1],bt[ir+2],bt[ir+3]):L<=bt[ir+2]&&P<=bt[ir+3]&&N>=bt[ir+0]&&$>=bt[ir+1])?(Te[lr]=!0,xe.push(gt[lr])):Te[lr]=!1}}},le.prototype._forEachCell=function(L,P,N,$,he,xe,Te,Ne){for(var nt=this._convertToCellCoord(L),gt=this._convertToCellCoord(P),bt=this._convertToCellCoord(N),Gt=this._convertToCellCoord($),lr=nt;lr<=bt;lr++)for(var ir=gt;ir<=Gt;ir++){var wr=this.d*ir+lr;if(!(Ne&&!Ne(this._convertFromCellCoord(lr),this._convertFromCellCoord(ir),this._convertFromCellCoord(lr+1),this._convertFromCellCoord(ir+1)))&&he.call(this,L,P,N,$,wr,xe,Te,Ne))return}},le.prototype._convertFromCellCoord=function(L){return(L-this.padding)/this.scale},le.prototype._convertToCellCoord=function(L){return Math.max(0,Math.min(this.d-1,Math.floor(L*this.scale)+this.padding))},le.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var L=this.cells,P=ls+this.cells.length+1+1,N=0,$=0;$<this.cells.length;$++)N+=this.cells[$].length;var he=new Int32Array(P+N+this.keys.length+this.bboxes.length);he[0]=this.extent,he[1]=this.n,he[2]=this.padding;for(var xe=P,Te=0;Te<L.length;Te++){var Ne=L[Te];he[ls+Te]=xe,he.set(Ne,xe),xe+=Ne.length}return he[ls+L.length]=xe,he.set(this.keys,xe),xe+=this.keys.length,he[ls+L.length+1]=xe,he.set(this.bboxes,xe),xe+=this.bboxes.length,he.buffer};var _e=self.ImageData,De=self.ImageBitmap,Ue={};function Be(L,P,N){N===void 0&&(N={}),Object.defineProperty(P,"_classRegistryKey",{value:L,writeable:!1}),Ue[L]={klass:P,omit:N.omit||[],shallow:N.shallow||[]}}Be("Object",Object),Yo.serialize=function(P,N){var $=P.toArrayBuffer();return N&&N.push($),{buffer:$}},Yo.deserialize=function(P){return new Yo(P.buffer)},Be("Grid",Yo),Be("Color",_i),Be("Error",Error),Be("ResolvedImage",No),Be("StylePropertyFunction",du),Be("StyleExpression",ks,{omit:["_evaluator"]}),Be("ZoomDependentExpression",Ls),Be("ZoomConstantExpression",ku),Be("CompoundExpression",Bo,{omit:["_evaluate"]});for(var qe in ra)ra[qe]._classRegistryKey||Be("Expression_"+qe,ra[qe]);function Mt(L){return L&&typeof ArrayBuffer<"u"&&(L instanceof ArrayBuffer||L.constructor&&L.constructor.name==="ArrayBuffer")}function mt(L){return De&&L instanceof De}function Ot(L,P){if(L==null||typeof L=="boolean"||typeof L=="number"||typeof L=="string"||L instanceof Boolean||L instanceof Number||L instanceof String||L instanceof Date||L instanceof RegExp)return L;if(Mt(L)||mt(L))return P&&P.push(L),L;if(ArrayBuffer.isView(L)){var N=L;return P&&P.push(N.buffer),N}if(L instanceof _e)return P&&P.push(L.data.buffer),L;if(Array.isArray(L)){for(var $=[],he=0,xe=L;he<xe.length;he+=1){var Te=xe[he];$.push(Ot(Te,P))}return $}if(typeof L=="object"){var Ne=L.constructor,nt=Ne._classRegistryKey;if(!nt)throw new Error("can't serialize object of unregistered class");var gt=Ne.serialize?Ne.serialize(L,P):{};if(!Ne.serialize){for(var bt in L)if(!!L.hasOwnProperty(bt)&&!(Ue[nt].omit.indexOf(bt)>=0)){var Gt=L[bt];gt[bt]=Ue[nt].shallow.indexOf(bt)>=0?Gt:Ot(Gt,P)}L instanceof Error&&(gt.message=L.message)}if(gt.$name)throw new Error("$name property is reserved for worker serialization logic.");return nt!=="Object"&&(gt.$name=nt),gt}throw new Error("can't serialize object of type "+typeof L)}function er(L){if(L==null||typeof L=="boolean"||typeof L=="number"||typeof L=="string"||L instanceof Boolean||L instanceof Number||L instanceof String||L instanceof Date||L instanceof RegExp||Mt(L)||mt(L)||ArrayBuffer.isView(L)||L instanceof _e)return L;if(Array.isArray(L))return L.map(er);if(typeof L=="object"){var P=L.$name||"Object",N=Ue[P],$=N.klass;if(!$)throw new Error("can't deserialize unregistered class "+P);if($.deserialize)return $.deserialize(L);for(var he=Object.create($.prototype),xe=0,Te=Object.keys(L);xe<Te.length;xe+=1){var Ne=Te[xe];if(Ne!=="$name"){var nt=L[Ne];he[Ne]=Ue[P].shallow.indexOf(Ne)>=0?nt:er(nt)}}return he}throw new Error("can't deserialize object of type "+typeof L)}var or=function(){this.first=!0};or.prototype.update=function(P,N){var $=Math.floor(P);return this.first?(this.first=!1,this.lastIntegerZoom=$,this.lastIntegerZoomTime=0,this.lastZoom=P,this.lastFloorZoom=$,!0):(this.lastFloorZoom>$?(this.lastIntegerZoom=$+1,this.lastIntegerZoomTime=N):this.lastFloorZoom<$&&(this.lastIntegerZoom=$,this.lastIntegerZoomTime=N),P!==this.lastZoom?(this.lastZoom=P,this.lastFloorZoom=$,!0):!1)};var sr={"Latin-1 Supplement":function(L){return L>=128&&L<=255},Arabic:function(L){return L>=1536&&L<=1791},"Arabic Supplement":function(L){return L>=1872&&L<=1919},"Arabic Extended-A":function(L){return L>=2208&&L<=2303},"Hangul Jamo":function(L){return L>=4352&&L<=4607},"Unified Canadian Aboriginal Syllabics":function(L){return L>=5120&&L<=5759},Khmer:function(L){return L>=6016&&L<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(L){return L>=6320&&L<=6399},"General Punctuation":function(L){return L>=8192&&L<=8303},"Letterlike Symbols":function(L){return L>=8448&&L<=8527},"Number Forms":function(L){return L>=8528&&L<=8591},"Miscellaneous Technical":function(L){return L>=8960&&L<=9215},"Control Pictures":function(L){return L>=9216&&L<=9279},"Optical Character Recognition":function(L){return L>=9280&&L<=9311},"Enclosed Alphanumerics":function(L){return L>=9312&&L<=9471},"Geometric Shapes":function(L){return L>=9632&&L<=9727},"Miscellaneous Symbols":function(L){return L>=9728&&L<=9983},"Miscellaneous Symbols and Arrows":function(L){return L>=11008&&L<=11263},"CJK Radicals Supplement":function(L){return L>=11904&&L<=12031},"Kangxi Radicals":function(L){return L>=12032&&L<=12255},"Ideographic Description Characters":function(L){return L>=12272&&L<=12287},"CJK Symbols and Punctuation":function(L){return L>=12288&&L<=12351},Hiragana:function(L){return L>=12352&&L<=12447},Katakana:function(L){return L>=12448&&L<=12543},Bopomofo:function(L){return L>=12544&&L<=12591},"Hangul Compatibility Jamo":function(L){return L>=12592&&L<=12687},Kanbun:function(L){return L>=12688&&L<=12703},"Bopomofo Extended":function(L){return L>=12704&&L<=12735},"CJK Strokes":function(L){return L>=12736&&L<=12783},"Katakana Phonetic Extensions":function(L){return L>=12784&&L<=12799},"Enclosed CJK Letters and Months":function(L){return L>=12800&&L<=13055},"CJK Compatibility":function(L){return L>=13056&&L<=13311},"CJK Unified Ideographs Extension A":function(L){return L>=13312&&L<=19903},"Yijing Hexagram Symbols":function(L){return L>=19904&&L<=19967},"CJK Unified Ideographs":function(L){return L>=19968&&L<=40959},"Yi Syllables":function(L){return L>=40960&&L<=42127},"Yi Radicals":function(L){return L>=42128&&L<=42191},"Hangul Jamo Extended-A":function(L){return L>=43360&&L<=43391},"Hangul Syllables":function(L){return L>=44032&&L<=55215},"Hangul Jamo Extended-B":function(L){return L>=55216&&L<=55295},"Private Use Area":function(L){return L>=57344&&L<=63743},"CJK Compatibility Ideographs":function(L){return L>=63744&&L<=64255},"Arabic Presentation Forms-A":function(L){return L>=64336&&L<=65023},"Vertical Forms":function(L){return L>=65040&&L<=65055},"CJK Compatibility Forms":function(L){return L>=65072&&L<=65103},"Small Form Variants":function(L){return L>=65104&&L<=65135},"Arabic Presentation Forms-B":function(L){return L>=65136&&L<=65279},"Halfwidth and Fullwidth Forms":function(L){return L>=65280&&L<=65519}};function Lr(L){for(var P=0,N=L;P<N.length;P+=1){var $=N[P];if(Wr($.charCodeAt(0)))return!0}return!1}function nn(L){for(var P=0,N=L;P<N.length;P+=1){var $=N[P];if(!pn($.charCodeAt(0)))return!1}return!0}function pn(L){return!(sr.Arabic(L)||sr["Arabic Supplement"](L)||sr["Arabic Extended-A"](L)||sr["Arabic Presentation Forms-A"](L)||sr["Arabic Presentation Forms-B"](L))}function zr(L){return L<11904?!1:!!(sr["Bopomofo Extended"](L)||sr.Bopomofo(L)||sr["CJK Compatibility Forms"](L)||sr["CJK Compatibility Ideographs"](L)||sr["CJK Compatibility"](L)||sr["CJK Radicals Supplement"](L)||sr["CJK Strokes"](L)||sr["CJK Symbols and Punctuation"](L)||sr["CJK Unified Ideographs Extension A"](L)||sr["CJK Unified Ideographs"](L)||sr["Enclosed CJK Letters and Months"](L)||sr["Halfwidth and Fullwidth Forms"](L)||sr.Hiragana(L)||sr["Ideographic Description Characters"](L)||sr["Kangxi Radicals"](L)||sr["Katakana Phonetic Extensions"](L)||sr.Katakana(L)||sr["Vertical Forms"](L)||sr["Yi Radicals"](L)||sr["Yi Syllables"](L))}function Wr(L){return L===746||L===747?!0:L<4352?!1:!!(sr["Bopomofo Extended"](L)||sr.Bopomofo(L)||sr["CJK Compatibility Forms"](L)&&!(L>=65097&&L<=65103)||sr["CJK Compatibility Ideographs"](L)||sr["CJK Compatibility"](L)||sr["CJK Radicals Supplement"](L)||sr["CJK Strokes"](L)||sr["CJK Symbols and Punctuation"](L)&&!(L>=12296&&L<=12305)&&!(L>=12308&&L<=12319)&&L!==12336||sr["CJK Unified Ideographs Extension A"](L)||sr["CJK Unified Ideographs"](L)||sr["Enclosed CJK Letters and Months"](L)||sr["Hangul Compatibility Jamo"](L)||sr["Hangul Jamo Extended-A"](L)||sr["Hangul Jamo Extended-B"](L)||sr["Hangul Jamo"](L)||sr["Hangul Syllables"](L)||sr.Hiragana(L)||sr["Ideographic Description Characters"](L)||sr.Kanbun(L)||sr["Kangxi Radicals"](L)||sr["Katakana Phonetic Extensions"](L)||sr.Katakana(L)&&L!==12540||sr["Halfwidth and Fullwidth Forms"](L)&&L!==65288&&L!==65289&&L!==65293&&!(L>=65306&&L<=65310)&&L!==65339&&L!==65341&&L!==65343&&!(L>=65371&&L<=65503)&&L!==65507&&!(L>=65512&&L<=65519)||sr["Small Form Variants"](L)&&!(L>=65112&&L<=65118)&&!(L>=65123&&L<=65126)||sr["Unified Canadian Aboriginal Syllabics"](L)||sr["Unified Canadian Aboriginal Syllabics Extended"](L)||sr["Vertical Forms"](L)||sr["Yijing Hexagram Symbols"](L)||sr["Yi Syllables"](L)||sr["Yi Radicals"](L))}function qr(L){return!!(sr["Latin-1 Supplement"](L)&&(L===167||L===169||L===174||L===177||L===188||L===189||L===190||L===215||L===247)||sr["General Punctuation"](L)&&(L===8214||L===8224||L===8225||L===8240||L===8241||L===8251||L===8252||L===8258||L===8263||L===8264||L===8265||L===8273)||sr["Letterlike Symbols"](L)||sr["Number Forms"](L)||sr["Miscellaneous Technical"](L)&&(L>=8960&&L<=8967||L>=8972&&L<=8991||L>=8996&&L<=9e3||L===9003||L>=9085&&L<=9114||L>=9150&&L<=9165||L===9167||L>=9169&&L<=9179||L>=9186&&L<=9215)||sr["Control Pictures"](L)&&L!==9251||sr["Optical Character Recognition"](L)||sr["Enclosed Alphanumerics"](L)||sr["Geometric Shapes"](L)||sr["Miscellaneous Symbols"](L)&&!(L>=9754&&L<=9759)||sr["Miscellaneous Symbols and Arrows"](L)&&(L>=11026&&L<=11055||L>=11088&&L<=11097||L>=11192&&L<=11243)||sr["CJK Symbols and Punctuation"](L)||sr.Katakana(L)||sr["Private Use Area"](L)||sr["CJK Compatibility Forms"](L)||sr["Small Form Variants"](L)||sr["Halfwidth and Fullwidth Forms"](L)||L===8734||L===8756||L===8757||L>=9984&&L<=10087||L>=10102&&L<=10131||L===65532||L===65533)}function fn(L){return!(Wr(L)||qr(L))}function hn(L){return sr.Arabic(L)||sr["Arabic Supplement"](L)||sr["Arabic Extended-A"](L)||sr["Arabic Presentation Forms-A"](L)||sr["Arabic Presentation Forms-B"](L)}function tn(L){return L>=1424&&L<=2303||sr["Arabic Presentation Forms-A"](L)||sr["Arabic Presentation Forms-B"](L)}function jn(L,P){return!(!P&&tn(L)||L>=2304&&L<=3583||L>=3840&&L<=4255||sr.Khmer(L))}function la(L){for(var P=0,N=L;P<N.length;P+=1){var $=N[P];if(tn($.charCodeAt(0)))return!0}return!1}function Ea(L,P){for(var N=0,$=L;N<$.length;N+=1){var he=$[N];if(!jn(he.charCodeAt(0),P))return!1}return!0}var ca={unavailable:"unavailable",deferred:"deferred",loading:"loading",loaded:"loaded",error:"error"},Ra=null,pa=ca.unavailable,ja=null,Oa=function(L){L&&typeof L=="string"&&L.indexOf("NetworkError")>-1&&(pa=ca.error),Ra&&Ra(L)};function ii(){Ei.fire(new Rr("pluginStateChange",{pluginStatus:pa,pluginURL:ja}))}var Ei=new Pr,Ao=function(){return pa},ji=function(L){return L({pluginStatus:pa,pluginURL:ja}),Ei.on("pluginStateChange",L),L},ga=function(L,P,N){if(N===void 0&&(N=!1),pa===ca.deferred||pa===ca.loading||pa===ca.loaded)throw new Error("setRTLTextPlugin cannot be called multiple times.");ja=q.resolveURL(L),pa=ca.deferred,Ra=P,ii(),N||hi()},hi=function(){if(pa!==ca.deferred||!ja)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");pa=ca.loading,ii(),ja&&vt({url:ja},function(L){L?Oa(L):(pa=ca.loaded,ii())})},qa={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return pa===ca.loaded||qa.applyArabicShaping!=null},isLoading:function(){return pa===ca.loading},setState:function(P){pa=P.pluginStatus,ja=P.pluginURL},isParsed:function(){return qa.applyArabicShaping!=null&&qa.processBidirectionalText!=null&&qa.processStyledBidirectionalText!=null},getPluginURL:function(){return ja}},Oi=function(){!qa.isLoading()&&!qa.isLoaded()&&Ao()==="deferred"&&hi()},di=function(P,N){this.zoom=P,N?(this.now=N.now,this.fadeDuration=N.fadeDuration,this.zoomHistory=N.zoomHistory,this.transition=N.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new or,this.transition={})};di.prototype.isSupportedScript=function(P){return Ea(P,qa.isLoaded())},di.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},di.prototype.getCrossfadeParameters=function(){var P=this.zoom,N=P-Math.floor(P),$=this.crossFadingFactor();return P>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:N+(1-N)*$}:{fromScale:.5,toScale:1,t:1-(1-$)*N}};var xo=function(P,N){this.property=P,this.value=N,this.expression=uc(N===void 0?P.specification.default:N,P.specification)};xo.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},xo.prototype.possiblyEvaluate=function(P,N,$){return this.property.possiblyEvaluate(this,P,N,$)};var fo=function(P){this.property=P,this.value=new xo(P,void 0)};fo.prototype.transitioned=function(P,N){return new us(this.property,this.value,N,A({},P.transition,this.transition),P.now)},fo.prototype.untransitioned=function(){return new us(this.property,this.value,null,{},0)};var ko=function(P){this._properties=P,this._values=Object.create(P.defaultTransitionablePropertyValues)};ko.prototype.getValue=function(P){return I(this._values[P].value.value)},ko.prototype.setValue=function(P,N){this._values.hasOwnProperty(P)||(this._values[P]=new fo(this._values[P].property)),this._values[P].value=new xo(this._values[P].property,N===null?void 0:I(N))},ko.prototype.getTransition=function(P){return I(this._values[P].transition)},ko.prototype.setTransition=function(P,N){this._values.hasOwnProperty(P)||(this._values[P]=new fo(this._values[P].property)),this._values[P].transition=I(N)||void 0},ko.prototype.serialize=function(){for(var P={},N=0,$=Object.keys(this._values);N<$.length;N+=1){var he=$[N],xe=this.getValue(he);xe!==void 0&&(P[he]=xe);var Te=this.getTransition(he);Te!==void 0&&(P[he+"-transition"]=Te)}return P},ko.prototype.transitioned=function(P,N){for(var $=new qo(this._properties),he=0,xe=Object.keys(this._values);he<xe.length;he+=1){var Te=xe[he];$._values[Te]=this._values[Te].transitioned(P,N._values[Te])}return $},ko.prototype.untransitioned=function(){for(var P=new qo(this._properties),N=0,$=Object.keys(this._values);N<$.length;N+=1){var he=$[N];P._values[he]=this._values[he].untransitioned()}return P};var us=function(P,N,$,he,xe){this.property=P,this.value=N,this.begin=xe+he.delay||0,this.end=this.begin+he.duration||0,P.specification.transition&&(he.delay||he.duration)&&(this.prior=$)};us.prototype.possiblyEvaluate=function(P,N,$){var he=P.now||0,xe=this.value.possiblyEvaluate(P,N,$),Te=this.prior;if(Te){if(he>this.end)return this.prior=null,xe;if(this.value.isDataDriven())return this.prior=null,xe;if(he<this.begin)return Te.possiblyEvaluate(P,N,$);var Ne=(he-this.begin)/(this.end-this.begin);return this.property.interpolate(Te.possiblyEvaluate(P,N,$),xe,y(Ne))}else return xe};var qo=function(P){this._properties=P,this._values=Object.create(P.defaultTransitioningPropertyValues)};qo.prototype.possiblyEvaluate=function(P,N,$){for(var he=new Qi(this._properties),xe=0,Te=Object.keys(this._values);xe<Te.length;xe+=1){var Ne=Te[xe];he._values[Ne]=this._values[Ne].possiblyEvaluate(P,N,$)}return he},qo.prototype.hasTransition=function(){for(var P=0,N=Object.keys(this._values);P<N.length;P+=1){var $=N[P];if(this._values[$].prior)return!0}return!1};var fs=function(P){this._properties=P,this._values=Object.create(P.defaultPropertyValues)};fs.prototype.getValue=function(P){return I(this._values[P].value)},fs.prototype.setValue=function(P,N){this._values[P]=new xo(this._values[P].property,N===null?void 0:I(N))},fs.prototype.serialize=function(){for(var P={},N=0,$=Object.keys(this._values);N<$.length;N+=1){var he=$[N],xe=this.getValue(he);xe!==void 0&&(P[he]=xe)}return P},fs.prototype.possiblyEvaluate=function(P,N,$){for(var he=new Qi(this._properties),xe=0,Te=Object.keys(this._values);xe<Te.length;xe+=1){var Ne=Te[xe];he._values[Ne]=this._values[Ne].possiblyEvaluate(P,N,$)}return he};var ro=function(P,N,$){this.property=P,this.value=N,this.parameters=$};ro.prototype.isConstant=function(){return this.value.kind==="constant"},ro.prototype.constantOr=function(P){return this.value.kind==="constant"?this.value.value:P},ro.prototype.evaluate=function(P,N,$,he){return this.property.evaluate(this.value,this.parameters,P,N,$,he)};var Qi=function(P){this._properties=P,this._values=Object.create(P.defaultPossiblyEvaluatedValues)};Qi.prototype.get=function(P){return this._values[P]};var Ua=function(P){this.specification=P};Ua.prototype.possiblyEvaluate=function(P,N){return P.expression.evaluate(N)},Ua.prototype.interpolate=function(P,N,$){var he=yl[this.specification.type];return he?he(P,N,$):P};var ei=function(P,N){this.specification=P,this.overrides=N};ei.prototype.possiblyEvaluate=function(P,N,$,he){return P.expression.kind==="constant"||P.expression.kind==="camera"?new ro(this,{kind:"constant",value:P.expression.evaluate(N,null,{},$,he)},N):new ro(this,P.expression,N)},ei.prototype.interpolate=function(P,N,$){if(P.value.kind!=="constant"||N.value.kind!=="constant")return P;if(P.value.value===void 0||N.value.value===void 0)return new ro(this,{kind:"constant",value:void 0},P.parameters);var he=yl[this.specification.type];return he?new ro(this,{kind:"constant",value:he(P.value.value,N.value.value,$)},P.parameters):P},ei.prototype.evaluate=function(P,N,$,he,xe,Te){return P.kind==="constant"?P.value:P.evaluate(N,$,he,xe,Te)};var Do=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype.possiblyEvaluate=function($,he,xe,Te){if($.value===void 0)return new ro(this,{kind:"constant",value:void 0},he);if($.expression.kind==="constant"){var Ne=$.expression.evaluate(he,null,{},xe,Te),nt=$.property.specification.type==="resolvedImage",gt=nt&&typeof Ne!="string"?Ne.name:Ne,bt=this._calculate(gt,gt,gt,he);return new ro(this,{kind:"constant",value:bt},he)}else if($.expression.kind==="camera"){var Gt=this._calculate($.expression.evaluate({zoom:he.zoom-1}),$.expression.evaluate({zoom:he.zoom}),$.expression.evaluate({zoom:he.zoom+1}),he);return new ro(this,{kind:"constant",value:Gt},he)}else return new ro(this,$.expression,he)},P.prototype.evaluate=function($,he,xe,Te,Ne,nt){if($.kind==="source"){var gt=$.evaluate(he,xe,Te,Ne,nt);return this._calculate(gt,gt,gt,he)}else return $.kind==="composite"?this._calculate($.evaluate({zoom:Math.floor(he.zoom)-1},xe,Te),$.evaluate({zoom:Math.floor(he.zoom)},xe,Te),$.evaluate({zoom:Math.floor(he.zoom)+1},xe,Te),he):$.value},P.prototype._calculate=function($,he,xe,Te){var Ne=Te.zoom;return Ne>Te.zoomHistory.lastIntegerZoom?{from:$,to:he}:{from:xe,to:he}},P.prototype.interpolate=function($){return $},P}(ei),vo=function(P){this.specification=P};vo.prototype.possiblyEvaluate=function(P,N,$,he){if(P.value!==void 0)if(P.expression.kind==="constant"){var xe=P.expression.evaluate(N,null,{},$,he);return this._calculate(xe,xe,xe,N)}else return this._calculate(P.expression.evaluate(new di(Math.floor(N.zoom-1),N)),P.expression.evaluate(new di(Math.floor(N.zoom),N)),P.expression.evaluate(new di(Math.floor(N.zoom+1),N)),N)},vo.prototype._calculate=function(P,N,$,he){var xe=he.zoom;return xe>he.zoomHistory.lastIntegerZoom?{from:P,to:N}:{from:$,to:N}},vo.prototype.interpolate=function(P){return P};var Wo=function(P){this.specification=P};Wo.prototype.possiblyEvaluate=function(P,N,$,he){return!!P.expression.evaluate(N,null,{},$,he)},Wo.prototype.interpolate=function(){return!1};var io=function(P){this.properties=P,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(var N in P){var $=P[N];$.specification.overridable&&this.overridableProperties.push(N);var he=this.defaultPropertyValues[N]=new xo($,void 0),xe=this.defaultTransitionablePropertyValues[N]=new fo($);this.defaultTransitioningPropertyValues[N]=xe.untransitioned(),this.defaultPossiblyEvaluatedValues[N]=he.possiblyEvaluate({})}};Be("DataDrivenProperty",ei),Be("DataConstantProperty",Ua),Be("CrossFadedDataDrivenProperty",Do),Be("CrossFadedProperty",vo),Be("ColorRampProperty",Wo);var cs="-transition",Us=function(L){function P(N,$){if(L.call(this),this.id=N.id,this.type=N.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},N.type!=="custom"&&(N=N,this.metadata=N.metadata,this.minzoom=N.minzoom,this.maxzoom=N.maxzoom,N.type!=="background"&&(this.source=N.source,this.sourceLayer=N["source-layer"],this.filter=N.filter),$.layout&&(this._unevaluatedLayout=new fs($.layout)),$.paint)){this._transitionablePaint=new ko($.paint);for(var he in N.paint)this.setPaintProperty(he,N.paint[he],{validate:!1});for(var xe in N.layout)this.setLayoutProperty(xe,N.layout[xe],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Qi($.paint)}}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},P.prototype.getLayoutProperty=function($){return $==="visibility"?this.visibility:this._unevaluatedLayout.getValue($)},P.prototype.setLayoutProperty=function($,he,xe){if(xe===void 0&&(xe={}),he!=null){var Te="layers."+this.id+".layout."+$;if(this._validate(Ps,Te,$,he,xe))return}if($==="visibility"){this.visibility=he;return}this._unevaluatedLayout.setValue($,he)},P.prototype.getPaintProperty=function($){return E($,cs)?this._transitionablePaint.getTransition($.slice(0,-cs.length)):this._transitionablePaint.getValue($)},P.prototype.setPaintProperty=function($,he,xe){if(xe===void 0&&(xe={}),he!=null){var Te="layers."+this.id+".paint."+$;if(this._validate(zi,Te,$,he,xe))return!1}if(E($,cs))return this._transitionablePaint.setTransition($.slice(0,-cs.length),he||void 0),!1;var Ne=this._transitionablePaint._values[$],nt=Ne.property.specification["property-type"]==="cross-faded-data-driven",gt=Ne.value.isDataDriven(),bt=Ne.value;this._transitionablePaint.setValue($,he),this._handleSpecialPaintPropertyUpdate($);var Gt=this._transitionablePaint._values[$].value,lr=Gt.isDataDriven();return lr||gt||nt||this._handleOverridablePaintPropertyUpdate($,bt,Gt)},P.prototype._handleSpecialPaintPropertyUpdate=function($){},P.prototype._handleOverridablePaintPropertyUpdate=function($,he,xe){return!1},P.prototype.isHidden=function($){return this.minzoom&&$<this.minzoom||this.maxzoom&&$>=this.maxzoom?!0:this.visibility==="none"},P.prototype.updateTransitions=function($){this._transitioningPaint=this._transitionablePaint.transitioned($,this._transitioningPaint)},P.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},P.prototype.recalculate=function($,he){$.getCrossfadeParameters&&(this._crossfadeParameters=$.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate($,void 0,he)),this.paint=this._transitioningPaint.possiblyEvaluate($,void 0,he)},P.prototype.serialize=function(){var $={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&($.layout=$.layout||{},$.layout.visibility=this.visibility),F($,function(he,xe){return he!==void 0&&!(xe==="layout"&&!Object.keys(he).length)&&!(xe==="paint"&&!Object.keys(he).length)})},P.prototype._validate=function($,he,xe,Te,Ne){return Ne===void 0&&(Ne={}),Ne&&Ne.validate===!1?!1:Co(this,$.call(Io,{key:he,layerType:this.type,objectKey:xe,value:Te,styleSpec:Xt,style:{glyphs:!0,sprite:!0}}))},P.prototype.is3D=function(){return!1},P.prototype.isTileClipped=function(){return!1},P.prototype.hasOffscreenPass=function(){return!1},P.prototype.resize=function(){},P.prototype.isStateDependent=function(){for(var $ in this.paint._values){var he=this.paint.get($);if(!(!(he instanceof ro)||!pi(he.property.specification))&&(he.value.kind==="source"||he.value.kind==="composite")&&he.value.isStateDependent)return!0}return!1},P}(Pr),gu={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},oo=function(P,N){this._structArray=P,this._pos1=N*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Wf=128,Jl=5,Ki=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};Ki.serialize=function(P,N){return P._trim(),N&&(P.isTransferred=!0,N.push(P.arrayBuffer)),{length:P.length,arrayBuffer:P.arrayBuffer}},Ki.deserialize=function(P){var N=Object.create(this.prototype);return N.arrayBuffer=P.arrayBuffer,N.length=P.length,N.capacity=P.arrayBuffer.byteLength/N.bytesPerElement,N._refreshViews(),N},Ki.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Ki.prototype.clear=function(){this.length=0},Ki.prototype.resize=function(P){this.reserve(P),this.length=P},Ki.prototype.reserve=function(P){if(P>this.capacity){this.capacity=Math.max(P,Math.floor(this.capacity*Jl),Wf),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var N=this.uint8;this._refreshViews(),N&&this.uint8.set(N)}},Ki.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};function jo(L,P){P===void 0&&(P=1);var N=0,$=0,he=L.map(function(Te){var Ne=ip(Te.type),nt=N=Sc(N,Math.max(P,Ne)),gt=Te.components||1;return $=Math.max($,Ne),N+=Ne*gt,{name:Te.name,type:Te.type,components:gt,offset:nt}}),xe=Sc(N,Math.max($,P));return{members:he,size:xe,alignment:P}}function ip(L){return gu[L].BYTES_PER_ELEMENT}function Sc(L,P){return Math.ceil(L/P)*P}var fc=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},P.prototype.emplaceBack=function($,he){var xe=this.length;return this.resize(xe+1),this.emplace(xe,$,he)},P.prototype.emplace=function($,he,xe){var Te=$*2;return this.int16[Te+0]=he,this.int16[Te+1]=xe,$},P}(Ki);fc.prototype.bytesPerElement=4,Be("StructArrayLayout2i4",fc);var wf=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},P.prototype.emplaceBack=function($,he,xe,Te){var Ne=this.length;return this.resize(Ne+1),this.emplace(Ne,$,he,xe,Te)},P.prototype.emplace=function($,he,xe,Te,Ne){var nt=$*4;return this.int16[nt+0]=he,this.int16[nt+1]=xe,this.int16[nt+2]=Te,this.int16[nt+3]=Ne,$},P}(Ki);wf.prototype.bytesPerElement=8,Be("StructArrayLayout4i8",wf);var jf=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},P.prototype.emplaceBack=function($,he,xe,Te,Ne,nt){var gt=this.length;return this.resize(gt+1),this.emplace(gt,$,he,xe,Te,Ne,nt)},P.prototype.emplace=function($,he,xe,Te,Ne,nt,gt){var bt=$*6;return this.int16[bt+0]=he,this.int16[bt+1]=xe,this.int16[bt+2]=Te,this.int16[bt+3]=Ne,this.int16[bt+4]=nt,this.int16[bt+5]=gt,$},P}(Ki);jf.prototype.bytesPerElement=12,Be("StructArrayLayout2i4i12",jf);var Ec=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},P.prototype.emplaceBack=function($,he,xe,Te,Ne,nt){var gt=this.length;return this.resize(gt+1),this.emplace(gt,$,he,xe,Te,Ne,nt)},P.prototype.emplace=function($,he,xe,Te,Ne,nt,gt){var bt=$*4,Gt=$*8;return this.int16[bt+0]=he,this.int16[bt+1]=xe,this.uint8[Gt+4]=Te,this.uint8[Gt+5]=Ne,this.uint8[Gt+6]=nt,this.uint8[Gt+7]=gt,$},P}(Ki);Ec.prototype.bytesPerElement=8,Be("StructArrayLayout2i4ub8",Ec);var il=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},P.prototype.emplaceBack=function($,he,xe,Te,Ne,nt,gt,bt,Gt,lr){var ir=this.length;return this.resize(ir+1),this.emplace(ir,$,he,xe,Te,Ne,nt,gt,bt,Gt,lr)},P.prototype.emplace=function($,he,xe,Te,Ne,nt,gt,bt,Gt,lr,ir){var wr=$*9,Hr=$*18;return this.uint16[wr+0]=he,this.uint16[wr+1]=xe,this.uint16[wr+2]=Te,this.uint16[wr+3]=Ne,this.uint16[wr+4]=nt,this.uint16[wr+5]=gt,this.uint16[wr+6]=bt,this.uint16[wr+7]=Gt,this.uint8[Hr+16]=lr,this.uint8[Hr+17]=ir,$},P}(Ki);il.prototype.bytesPerElement=18,Be("StructArrayLayout8ui2ub18",il);var _f=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},P.prototype.emplaceBack=function($,he,xe,Te,Ne,nt,gt,bt,Gt,lr,ir,wr){var Hr=this.length;return this.resize(Hr+1),this.emplace(Hr,$,he,xe,Te,Ne,nt,gt,bt,Gt,lr,ir,wr)},P.prototype.emplace=function($,he,xe,Te,Ne,nt,gt,bt,Gt,lr,ir,wr,Hr){var cn=$*12;return this.int16[cn+0]=he,this.int16[cn+1]=xe,this.int16[cn+2]=Te,this.int16[cn+3]=Ne,this.uint16[cn+4]=nt,this.uint16[cn+5]=gt,this.uint16[cn+6]=bt,this.uint16[cn+7]=Gt,this.int16[cn+8]=lr,this.int16[cn+9]=ir,this.int16[cn+10]=wr,this.int16[cn+11]=Hr,$},P}(Ki);_f.prototype.bytesPerElement=24,Be("StructArrayLayout4i4ui4i24",_f);var gh=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},P.prototype.emplaceBack=function($,he,xe){var Te=this.length;return this.resize(Te+1),this.emplace(Te,$,he,xe)},P.prototype.emplace=function($,he,xe,Te){var Ne=$*3;return this.float32[Ne+0]=he,this.float32[Ne+1]=xe,this.float32[Ne+2]=Te,$},P}(Ki);gh.prototype.bytesPerElement=12,Be("StructArrayLayout3f12",gh);var yh=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},P.prototype.emplaceBack=function($){var he=this.length;return this.resize(he+1),this.emplace(he,$)},P.prototype.emplace=function($,he){var xe=$*1;return this.uint32[xe+0]=he,$},P}(Ki);yh.prototype.bytesPerElement=4,Be("StructArrayLayout1ul4",yh);var cc=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},P.prototype.emplaceBack=function($,he,xe,Te,Ne,nt,gt,bt,Gt){var lr=this.length;return this.resize(lr+1),this.emplace(lr,$,he,xe,Te,Ne,nt,gt,bt,Gt)},P.prototype.emplace=function($,he,xe,Te,Ne,nt,gt,bt,Gt,lr){var ir=$*10,wr=$*5;return this.int16[ir+0]=he,this.int16[ir+1]=xe,this.int16[ir+2]=Te,this.int16[ir+3]=Ne,this.int16[ir+4]=nt,this.int16[ir+5]=gt,this.uint32[wr+3]=bt,this.uint16[ir+8]=Gt,this.uint16[ir+9]=lr,$},P}(Ki);cc.prototype.bytesPerElement=20,Be("StructArrayLayout6i1ul2ui20",cc);var Cc=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},P.prototype.emplaceBack=function($,he,xe,Te,Ne,nt){var gt=this.length;return this.resize(gt+1),this.emplace(gt,$,he,xe,Te,Ne,nt)},P.prototype.emplace=function($,he,xe,Te,Ne,nt,gt){var bt=$*6;return this.int16[bt+0]=he,this.int16[bt+1]=xe,this.int16[bt+2]=Te,this.int16[bt+3]=Ne,this.int16[bt+4]=nt,this.int16[bt+5]=gt,$},P}(Ki);Cc.prototype.bytesPerElement=12,Be("StructArrayLayout2i2i2i12",Cc);var ef=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},P.prototype.emplaceBack=function($,he,xe,Te,Ne){var nt=this.length;return this.resize(nt+1),this.emplace(nt,$,he,xe,Te,Ne)},P.prototype.emplace=function($,he,xe,Te,Ne,nt){var gt=$*4,bt=$*8;return this.float32[gt+0]=he,this.float32[gt+1]=xe,this.float32[gt+2]=Te,this.int16[bt+6]=Ne,this.int16[bt+7]=nt,$},P}(Ki);ef.prototype.bytesPerElement=16,Be("StructArrayLayout2f1f2i16",ef);var _l=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},P.prototype.emplaceBack=function($,he,xe,Te){var Ne=this.length;return this.resize(Ne+1),this.emplace(Ne,$,he,xe,Te)},P.prototype.emplace=function($,he,xe,Te,Ne){var nt=$*12,gt=$*3;return this.uint8[nt+0]=he,this.uint8[nt+1]=xe,this.float32[gt+1]=Te,this.float32[gt+2]=Ne,$},P}(Ki);_l.prototype.bytesPerElement=12,Be("StructArrayLayout2ub2f12",_l);var tf=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},P.prototype.emplaceBack=function($,he,xe){var Te=this.length;return this.resize(Te+1),this.emplace(Te,$,he,xe)},P.prototype.emplace=function($,he,xe,Te){var Ne=$*3;return this.uint16[Ne+0]=he,this.uint16[Ne+1]=xe,this.uint16[Ne+2]=Te,$},P}(Ki);tf.prototype.bytesPerElement=6,Be("StructArrayLayout3ui6",tf);var hc=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},P.prototype.emplaceBack=function($,he,xe,Te,Ne,nt,gt,bt,Gt,lr,ir,wr,Hr,cn,an,Rn,An){var Dn=this.length;return this.resize(Dn+1),this.emplace(Dn,$,he,xe,Te,Ne,nt,gt,bt,Gt,lr,ir,wr,Hr,cn,an,Rn,An)},P.prototype.emplace=function($,he,xe,Te,Ne,nt,gt,bt,Gt,lr,ir,wr,Hr,cn,an,Rn,An,Dn){var Un=$*24,Kn=$*12,ha=$*48;return this.int16[Un+0]=he,this.int16[Un+1]=xe,this.uint16[Un+2]=Te,this.uint16[Un+3]=Ne,this.uint32[Kn+2]=nt,this.uint32[Kn+3]=gt,this.uint32[Kn+4]=bt,this.uint16[Un+10]=Gt,this.uint16[Un+11]=lr,this.uint16[Un+12]=ir,this.float32[Kn+7]=wr,this.float32[Kn+8]=Hr,this.uint8[ha+36]=cn,this.uint8[ha+37]=an,this.uint8[ha+38]=Rn,this.uint32[Kn+10]=An,this.int16[Un+22]=Dn,$},P}(Ki);hc.prototype.bytesPerElement=48,Be("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",hc);var kc=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},P.prototype.emplaceBack=function($,he,xe,Te,Ne,nt,gt,bt,Gt,lr,ir,wr,Hr,cn,an,Rn,An,Dn,Un,Kn,ha,ua,Ba,Ca,Da,li,za,Na){var mi=this.length;return this.resize(mi+1),this.emplace(mi,$,he,xe,Te,Ne,nt,gt,bt,Gt,lr,ir,wr,Hr,cn,an,Rn,An,Dn,Un,Kn,ha,ua,Ba,Ca,Da,li,za,Na)},P.prototype.emplace=function($,he,xe,Te,Ne,nt,gt,bt,Gt,lr,ir,wr,Hr,cn,an,Rn,An,Dn,Un,Kn,ha,ua,Ba,Ca,Da,li,za,Na,mi){var oi=$*34,Ni=$*17;return this.int16[oi+0]=he,this.int16[oi+1]=xe,this.int16[oi+2]=Te,this.int16[oi+3]=Ne,this.int16[oi+4]=nt,this.int16[oi+5]=gt,this.int16[oi+6]=bt,this.int16[oi+7]=Gt,this.uint16[oi+8]=lr,this.uint16[oi+9]=ir,this.uint16[oi+10]=wr,this.uint16[oi+11]=Hr,this.uint16[oi+12]=cn,this.uint16[oi+13]=an,this.uint16[oi+14]=Rn,this.uint16[oi+15]=An,this.uint16[oi+16]=Dn,this.uint16[oi+17]=Un,this.uint16[oi+18]=Kn,this.uint16[oi+19]=ha,this.uint16[oi+20]=ua,this.uint16[oi+21]=Ba,this.uint16[oi+22]=Ca,this.uint32[Ni+12]=Da,this.float32[Ni+13]=li,this.float32[Ni+14]=za,this.float32[Ni+15]=Na,this.float32[Ni+16]=mi,$},P}(Ki);kc.prototype.bytesPerElement=68,Be("StructArrayLayout8i15ui1ul4f68",kc);var Xf=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},P.prototype.emplaceBack=function($){var he=this.length;return this.resize(he+1),this.emplace(he,$)},P.prototype.emplace=function($,he){var xe=$*1;return this.float32[xe+0]=he,$},P}(Ki);Xf.prototype.bytesPerElement=4,Be("StructArrayLayout1f4",Xf);var mh=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},P.prototype.emplaceBack=function($,he,xe){var Te=this.length;return this.resize(Te+1),this.emplace(Te,$,he,xe)},P.prototype.emplace=function($,he,xe,Te){var Ne=$*3;return this.int16[Ne+0]=he,this.int16[Ne+1]=xe,this.int16[Ne+2]=Te,$},P}(Ki);mh.prototype.bytesPerElement=6,Be("StructArrayLayout3i6",mh);var Tf=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},P.prototype.emplaceBack=function($,he,xe){var Te=this.length;return this.resize(Te+1),this.emplace(Te,$,he,xe)},P.prototype.emplace=function($,he,xe,Te){var Ne=$*2,nt=$*4;return this.uint32[Ne+0]=he,this.uint16[nt+2]=xe,this.uint16[nt+3]=Te,$},P}(Ki);Tf.prototype.bytesPerElement=8,Be("StructArrayLayout1ul2ui8",Tf);var vc=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},P.prototype.emplaceBack=function($,he){var xe=this.length;return this.resize(xe+1),this.emplace(xe,$,he)},P.prototype.emplace=function($,he,xe){var Te=$*2;return this.uint16[Te+0]=he,this.uint16[Te+1]=xe,$},P}(Ki);vc.prototype.bytesPerElement=4,Be("StructArrayLayout2ui4",vc);var Zf=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},P.prototype.emplaceBack=function($){var he=this.length;return this.resize(he+1),this.emplace(he,$)},P.prototype.emplace=function($,he){var xe=$*1;return this.uint16[xe+0]=he,$},P}(Ki);Zf.prototype.bytesPerElement=2,Be("StructArrayLayout1ui2",Zf);var Af=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},P.prototype.emplaceBack=function($,he){var xe=this.length;return this.resize(xe+1),this.emplace(xe,$,he)},P.prototype.emplace=function($,he,xe){var Te=$*2;return this.float32[Te+0]=he,this.float32[Te+1]=xe,$},P}(Ki);Af.prototype.bytesPerElement=8,Be("StructArrayLayout2f8",Af);var xh=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},P.prototype.emplaceBack=function($,he,xe,Te){var Ne=this.length;return this.resize(Ne+1),this.emplace(Ne,$,he,xe,Te)},P.prototype.emplace=function($,he,xe,Te,Ne){var nt=$*4;return this.float32[nt+0]=he,this.float32[nt+1]=xe,this.float32[nt+2]=Te,this.float32[nt+3]=Ne,$},P}(Ki);xh.prototype.bytesPerElement=16,Be("StructArrayLayout4f16",xh);var ov=function(L){function P(){L.apply(this,arguments)}L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P;var N={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return N.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},N.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},N.x1.get=function(){return this._structArray.int16[this._pos2+2]},N.y1.get=function(){return this._structArray.int16[this._pos2+3]},N.x2.get=function(){return this._structArray.int16[this._pos2+4]},N.y2.get=function(){return this._structArray.int16[this._pos2+5]},N.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},N.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},N.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},N.anchorPoint.get=function(){return new h(this.anchorPointX,this.anchorPointY)},Object.defineProperties(P.prototype,N),P}(oo);ov.prototype.size=20;var Mf=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype.get=function($){return new ov(this,$)},P}(cc);Be("CollisionBoxArray",Mf);var bh=function(L){function P(){L.apply(this,arguments)}L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P;var N={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return N.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},N.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},N.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},N.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},N.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},N.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},N.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},N.segment.get=function(){return this._structArray.uint16[this._pos2+10]},N.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},N.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},N.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},N.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},N.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},N.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},N.placedOrientation.set=function($){this._structArray.uint8[this._pos1+37]=$},N.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},N.hidden.set=function($){this._structArray.uint8[this._pos1+38]=$},N.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},N.crossTileID.set=function($){this._structArray.uint32[this._pos4+10]=$},N.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(P.prototype,N),P}(oo);bh.prototype.size=48;var Kf=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype.get=function($){return new bh(this,$)},P}(hc);Be("PlacedSymbolArray",Kf);var sv=function(L){function P(){L.apply(this,arguments)}L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P;var N={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return N.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},N.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},N.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},N.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},N.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},N.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},N.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},N.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},N.key.get=function(){return this._structArray.uint16[this._pos2+8]},N.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},N.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},N.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},N.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},N.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},N.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},N.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},N.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},N.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},N.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},N.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},N.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},N.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},N.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},N.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},N.crossTileID.set=function($){this._structArray.uint32[this._pos4+12]=$},N.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},N.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},N.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},N.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(P.prototype,N),P}(oo);sv.prototype.size=68;var lv=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype.get=function($){return new sv(this,$)},P}(kc);Be("SymbolInstanceArray",lv);var yu=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype.getoffsetX=function($){return this.float32[$*1+0]},P}(Xf);Be("GlyphOffsetArray",yu);var uv=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype.getx=function($){return this.int16[$*3+0]},P.prototype.gety=function($){return this.int16[$*3+1]},P.prototype.gettileUnitDistanceFromAnchor=function($){return this.int16[$*3+2]},P}(mh);Be("SymbolLineVertexArray",uv);var fv=function(L){function P(){L.apply(this,arguments)}L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P;var N={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return N.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},N.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},N.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(P.prototype,N),P}(oo);fv.prototype.size=8;var wh=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype.get=function($){return new fv(this,$)},P}(Tf);Be("FeatureIndexArray",wh);var cv=jo([{name:"a_pos",components:2,type:"Int16"}],4),fe=cv.members,W=function(P){P===void 0&&(P=[]),this.segments=P};W.prototype.prepareSegment=function(P,N,$,he){var xe=this.segments[this.segments.length-1];return P>W.MAX_VERTEX_ARRAY_LENGTH&&O("Max vertices per segment is "+W.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+P),(!xe||xe.vertexLength+P>W.MAX_VERTEX_ARRAY_LENGTH||xe.sortKey!==he)&&(xe={vertexOffset:N.length,primitiveOffset:$.length,vertexLength:0,primitiveLength:0},he!==void 0&&(xe.sortKey=he),this.segments.push(xe)),xe},W.prototype.get=function(){return this.segments},W.prototype.destroy=function(){for(var P=0,N=this.segments;P<N.length;P+=1){var $=N[P];for(var he in $.vaos)$.vaos[he].destroy()}},W.simpleSegment=function(P,N,$,he){return new W([{vertexOffset:P,primitiveOffset:N,vertexLength:$,primitiveLength:he,vaos:{},sortKey:0}])},W.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Be("SegmentVector",W);function ve(L,P){return L=c(Math.floor(L),0,255),P=c(Math.floor(P),0,255),256*L+P}var J=jo([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint8"},{name:"a_pixel_ratio_to",components:1,type:"Uint8"}]),pe=a(function(L){function P(N,$){var he,xe,Te,Ne,nt,gt,bt,Gt;for(he=N.length&3,xe=N.length-he,Te=$,nt=3432918353,gt=461845907,Gt=0;Gt<xe;)bt=N.charCodeAt(Gt)&255|(N.charCodeAt(++Gt)&255)<<8|(N.charCodeAt(++Gt)&255)<<16|(N.charCodeAt(++Gt)&255)<<24,++Gt,bt=(bt&65535)*nt+(((bt>>>16)*nt&65535)<<16)&4294967295,bt=bt<<15|bt>>>17,bt=(bt&65535)*gt+(((bt>>>16)*gt&65535)<<16)&4294967295,Te^=bt,Te=Te<<13|Te>>>19,Ne=(Te&65535)*5+(((Te>>>16)*5&65535)<<16)&4294967295,Te=(Ne&65535)+27492+(((Ne>>>16)+58964&65535)<<16);switch(bt=0,he){case 3:bt^=(N.charCodeAt(Gt+2)&255)<<16;case 2:bt^=(N.charCodeAt(Gt+1)&255)<<8;case 1:bt^=N.charCodeAt(Gt)&255,bt=(bt&65535)*nt+(((bt>>>16)*nt&65535)<<16)&4294967295,bt=bt<<15|bt>>>17,bt=(bt&65535)*gt+(((bt>>>16)*gt&65535)<<16)&4294967295,Te^=bt}return Te^=N.length,Te^=Te>>>16,Te=(Te&65535)*2246822507+(((Te>>>16)*2246822507&65535)<<16)&4294967295,Te^=Te>>>13,Te=(Te&65535)*3266489909+(((Te>>>16)*3266489909&65535)<<16)&4294967295,Te^=Te>>>16,Te>>>0}L.exports=P}),Ee=a(function(L){function P(N,$){for(var he=N.length,xe=$^he,Te=0,Ne;he>=4;)Ne=N.charCodeAt(Te)&255|(N.charCodeAt(++Te)&255)<<8|(N.charCodeAt(++Te)&255)<<16|(N.charCodeAt(++Te)&255)<<24,Ne=(Ne&65535)*1540483477+(((Ne>>>16)*1540483477&65535)<<16),Ne^=Ne>>>24,Ne=(Ne&65535)*1540483477+(((Ne>>>16)*1540483477&65535)<<16),xe=(xe&65535)*1540483477+(((xe>>>16)*1540483477&65535)<<16)^Ne,he-=4,++Te;switch(he){case 3:xe^=(N.charCodeAt(Te+2)&255)<<16;case 2:xe^=(N.charCodeAt(Te+1)&255)<<8;case 1:xe^=N.charCodeAt(Te)&255,xe=(xe&65535)*1540483477+(((xe>>>16)*1540483477&65535)<<16)}return xe^=xe>>>13,xe=(xe&65535)*1540483477+(((xe>>>16)*1540483477&65535)<<16),xe^=xe>>>15,xe>>>0}L.exports=P}),Ie=pe,$e=pe,dt=Ee;Ie.murmur3=$e,Ie.murmur2=dt;var Ft=function(){this.ids=[],this.positions=[],this.indexed=!1};Ft.prototype.add=function(P,N,$,he){this.ids.push(dr(P)),this.positions.push(N,$,he)},Ft.prototype.getPositions=function(P){for(var N=dr(P),$=0,he=this.ids.length-1;$<he;){var xe=$+he>>1;this.ids[xe]>=N?he=xe:$=xe+1}for(var Te=[];this.ids[$]===N;){var Ne=this.positions[3*$],nt=this.positions[3*$+1],gt=this.positions[3*$+2];Te.push({index:Ne,start:nt,end:gt}),$++}return Te},Ft.serialize=function(P,N){var $=new Float64Array(P.ids),he=new Uint32Array(P.positions);return xr($,he,0,$.length-1),N&&N.push($.buffer,he.buffer),{ids:$,positions:he}},Ft.deserialize=function(P){var N=new Ft;return N.ids=P.ids,N.positions=P.positions,N.indexed=!0,N};var nr=Math.pow(2,53)-1;function dr(L){var P=+L;return!isNaN(P)&&P<=nr?P:Ie(String(L))}function xr(L,P,N,$){for(;N<$;){for(var he=L[N+$>>1],xe=N-1,Te=$+1;;){do xe++;while(L[xe]<he);do Te--;while(L[Te]>he);if(xe>=Te)break;Fr(L,xe,Te),Fr(P,3*xe,3*Te),Fr(P,3*xe+1,3*Te+1),Fr(P,3*xe+2,3*Te+2)}Te-N<$-Te?(xr(L,P,N,Te),N=Te+1):(xr(L,P,Te+1,$),$=Te)}}function Fr(L,P,N){var $=L[P];L[P]=L[N],L[N]=$}Be("FeaturePositionMap",Ft);var Zr=function(P,N){this.gl=P.gl,this.location=N},Qr=function(L){function P(N,$){L.call(this,N,$),this.current=0}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype.set=function($){this.current!==$&&(this.current=$,this.gl.uniform1i(this.location,$))},P}(Zr),jr=function(L){function P(N,$){L.call(this,N,$),this.current=0}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype.set=function($){this.current!==$&&(this.current=$,this.gl.uniform1f(this.location,$))},P}(Zr),rn=function(L){function P(N,$){L.call(this,N,$),this.current=[0,0]}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype.set=function($){($[0]!==this.current[0]||$[1]!==this.current[1])&&(this.current=$,this.gl.uniform2f(this.location,$[0],$[1]))},P}(Zr),mn=function(L){function P(N,$){L.call(this,N,$),this.current=[0,0,0]}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype.set=function($){($[0]!==this.current[0]||$[1]!==this.current[1]||$[2]!==this.current[2])&&(this.current=$,this.gl.uniform3f(this.location,$[0],$[1],$[2]))},P}(Zr),Fn=function(L){function P(N,$){L.call(this,N,$),this.current=[0,0,0,0]}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype.set=function($){($[0]!==this.current[0]||$[1]!==this.current[1]||$[2]!==this.current[2]||$[3]!==this.current[3])&&(this.current=$,this.gl.uniform4f(this.location,$[0],$[1],$[2],$[3]))},P}(Zr),Hn=function(L){function P(N,$){L.call(this,N,$),this.current=_i.transparent}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype.set=function($){($.r!==this.current.r||$.g!==this.current.g||$.b!==this.current.b||$.a!==this.current.a)&&(this.current=$,this.gl.uniform4f(this.location,$.r,$.g,$.b,$.a))},P}(Zr),ta=new Float32Array(16),ia=function(L){function P(N,$){L.call(this,N,$),this.current=ta}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype.set=function($){if($[12]!==this.current[12]||$[0]!==this.current[0]){this.current=$,this.gl.uniformMatrix4fv(this.location,!1,$);return}for(var he=1;he<16;he++)if($[he]!==this.current[he]){this.current=$,this.gl.uniformMatrix4fv(this.location,!1,$);break}},P}(Zr);function na(L){return[ve(255*L.r,255*L.g),ve(255*L.b,255*L.a)]}var ya=function(P,N,$){this.value=P,this.uniformNames=N.map(function(he){return"u_"+he}),this.type=$};ya.prototype.setUniform=function(P,N,$){P.set($.constantOr(this.value))},ya.prototype.getBinding=function(P,N,$){return this.type==="color"?new Hn(P,N):new jr(P,N)};var Sa=function(P,N){this.uniformNames=N.map(function($){return"u_"+$}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Sa.prototype.setConstantPatternPositions=function(P,N){this.pixelRatioFrom=N.pixelRatio,this.pixelRatioTo=P.pixelRatio,this.patternFrom=N.tlbr,this.patternTo=P.tlbr},Sa.prototype.setUniform=function(P,N,$,he){var xe=he==="u_pattern_to"?this.patternTo:he==="u_pattern_from"?this.patternFrom:he==="u_pixel_ratio_to"?this.pixelRatioTo:he==="u_pixel_ratio_from"?this.pixelRatioFrom:null;xe&&P.set(xe)},Sa.prototype.getBinding=function(P,N,$){return $.substr(0,9)==="u_pattern"?new Fn(P,N):new jr(P,N)};var Ta=function(P,N,$,he){this.expression=P,this.type=$,this.maxValue=0,this.paintVertexAttributes=N.map(function(xe){return{name:"a_"+xe,type:"Float32",components:$==="color"?2:1,offset:0}}),this.paintVertexArray=new he};Ta.prototype.populatePaintArray=function(P,N,$,he,xe){var Te=this.paintVertexArray.length,Ne=this.expression.evaluate(new di(0),N,{},he,[],xe);this.paintVertexArray.resize(P),this._setPaintValue(Te,P,Ne)},Ta.prototype.updatePaintArray=function(P,N,$,he){var xe=this.expression.evaluate({zoom:0},$,he);this._setPaintValue(P,N,xe)},Ta.prototype._setPaintValue=function(P,N,$){if(this.type==="color")for(var he=na($),xe=P;xe<N;xe++)this.paintVertexArray.emplace(xe,he[0],he[1]);else{for(var Te=P;Te<N;Te++)this.paintVertexArray.emplace(Te,$);this.maxValue=Math.max(this.maxValue,Math.abs($))}},Ta.prototype.upload=function(P){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=P.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Ta.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var ka=function(P,N,$,he,xe,Te){this.expression=P,this.uniformNames=N.map(function(Ne){return"u_"+Ne+"_t"}),this.type=$,this.useIntegerZoom=he,this.zoom=xe,this.maxValue=0,this.paintVertexAttributes=N.map(function(Ne){return{name:"a_"+Ne,type:"Float32",components:$==="color"?4:2,offset:0}}),this.paintVertexArray=new Te};ka.prototype.populatePaintArray=function(P,N,$,he,xe){var Te=this.expression.evaluate(new di(this.zoom),N,{},he,[],xe),Ne=this.expression.evaluate(new di(this.zoom+1),N,{},he,[],xe),nt=this.paintVertexArray.length;this.paintVertexArray.resize(P),this._setPaintValue(nt,P,Te,Ne)},ka.prototype.updatePaintArray=function(P,N,$,he){var xe=this.expression.evaluate({zoom:this.zoom},$,he),Te=this.expression.evaluate({zoom:this.zoom+1},$,he);this._setPaintValue(P,N,xe,Te)},ka.prototype._setPaintValue=function(P,N,$,he){if(this.type==="color")for(var xe=na($),Te=na(he),Ne=P;Ne<N;Ne++)this.paintVertexArray.emplace(Ne,xe[0],xe[1],Te[0],Te[1]);else{for(var nt=P;nt<N;nt++)this.paintVertexArray.emplace(nt,$,he);this.maxValue=Math.max(this.maxValue,Math.abs($),Math.abs(he))}},ka.prototype.upload=function(P){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=P.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},ka.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},ka.prototype.setUniform=function(P,N){var $=this.useIntegerZoom?Math.floor(N.zoom):N.zoom,he=c(this.expression.interpolationFactor($,this.zoom,this.zoom+1),0,1);P.set(he)},ka.prototype.getBinding=function(P,N,$){return new jr(P,N)};var Fa=function(P,N,$,he,xe,Te){this.expression=P,this.type=N,this.useIntegerZoom=$,this.zoom=he,this.layerId=Te,this.zoomInPaintVertexArray=new xe,this.zoomOutPaintVertexArray=new xe};Fa.prototype.populatePaintArray=function(P,N,$){var he=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(P),this.zoomOutPaintVertexArray.resize(P),this._setPaintValues(he,P,N.patterns&&N.patterns[this.layerId],$)},Fa.prototype.updatePaintArray=function(P,N,$,he,xe){this._setPaintValues(P,N,$.patterns&&$.patterns[this.layerId],xe)},Fa.prototype._setPaintValues=function(P,N,$,he){if(!(!he||!$)){var xe=$.min,Te=$.mid,Ne=$.max,nt=he[xe],gt=he[Te],bt=he[Ne];if(!(!nt||!gt||!bt))for(var Gt=P;Gt<N;Gt++)this.zoomInPaintVertexArray.emplace(Gt,gt.tl[0],gt.tl[1],gt.br[0],gt.br[1],nt.tl[0],nt.tl[1],nt.br[0],nt.br[1],gt.pixelRatio,nt.pixelRatio),this.zoomOutPaintVertexArray.emplace(Gt,gt.tl[0],gt.tl[1],gt.br[0],gt.br[1],bt.tl[0],bt.tl[1],bt.br[0],bt.br[1],gt.pixelRatio,bt.pixelRatio)}},Fa.prototype.upload=function(P){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=P.createVertexBuffer(this.zoomInPaintVertexArray,J.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=P.createVertexBuffer(this.zoomOutPaintVertexArray,J.members,this.expression.isStateDependent))},Fa.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Za=function(P,N,$,he){this.binders={},this.layoutAttributes=he,this._buffers=[];var xe=[];for(var Te in P.paint._values)if(!!$(Te)){var Ne=P.paint.get(Te);if(!(!(Ne instanceof ro)||!pi(Ne.property.specification))){var nt=Vi(Te,P.type),gt=Ne.value,bt=Ne.property.specification.type,Gt=Ne.property.useIntegerZoom,lr=Ne.property.specification["property-type"],ir=lr==="cross-faded"||lr==="cross-faded-data-driven";if(gt.kind==="constant")this.binders[Te]=ir?new Sa(gt.value,nt):new ya(gt.value,nt,bt),xe.push("/u_"+Te);else if(gt.kind==="source"||ir){var wr=Ti(Te,bt,"source");this.binders[Te]=ir?new Fa(gt,bt,Gt,N,wr,P.id):new Ta(gt,nt,bt,wr),xe.push("/a_"+Te)}else{var Hr=Ti(Te,bt,"composite");this.binders[Te]=new ka(gt,nt,bt,Gt,N,Hr),xe.push("/z_"+Te)}}}this.cacheKey=xe.sort().join("")};Za.prototype.getMaxValue=function(P){var N=this.binders[P];return N instanceof Ta||N instanceof ka?N.maxValue:0},Za.prototype.populatePaintArrays=function(P,N,$,he,xe){for(var Te in this.binders){var Ne=this.binders[Te];(Ne instanceof Ta||Ne instanceof ka||Ne instanceof Fa)&&Ne.populatePaintArray(P,N,$,he,xe)}},Za.prototype.setConstantPatternPositions=function(P,N){for(var $ in this.binders){var he=this.binders[$];he instanceof Sa&&he.setConstantPatternPositions(P,N)}},Za.prototype.updatePaintArrays=function(P,N,$,he,xe){var Te=!1;for(var Ne in P)for(var nt=N.getPositions(Ne),gt=0,bt=nt;gt<bt.length;gt+=1){var Gt=bt[gt],lr=$.feature(Gt.index);for(var ir in this.binders){var wr=this.binders[ir];if((wr instanceof Ta||wr instanceof ka||wr instanceof Fa)&&wr.expression.isStateDependent===!0){var Hr=he.paint.get(ir);wr.expression=Hr.value,wr.updatePaintArray(Gt.start,Gt.end,lr,P[Ne],xe),Te=!0}}}return Te},Za.prototype.defines=function(){var P=[];for(var N in this.binders){var $=this.binders[N];($ instanceof ya||$ instanceof Sa)&&P.push.apply(P,$.uniformNames.map(function(he){return"#define HAS_UNIFORM_"+he}))}return P},Za.prototype.getPaintVertexBuffers=function(){return this._buffers},Za.prototype.getUniforms=function(P,N){var $=[];for(var he in this.binders){var xe=this.binders[he];if(xe instanceof ya||xe instanceof Sa||xe instanceof ka)for(var Te=0,Ne=xe.uniformNames;Te<Ne.length;Te+=1){var nt=Ne[Te];if(N[nt]){var gt=xe.getBinding(P,N[nt],nt);$.push({name:nt,property:he,binding:gt})}}}return $},Za.prototype.setUniforms=function(P,N,$,he){for(var xe=0,Te=N;xe<Te.length;xe+=1){var Ne=Te[xe],nt=Ne.name,gt=Ne.property,bt=Ne.binding;this.binders[gt].setUniform(bt,he,$.get(gt),nt)}},Za.prototype.updatePaintBuffers=function(P){this._buffers=[];for(var N in this.binders){var $=this.binders[N];if(P&&$ instanceof Fa){var he=P.fromScale===2?$.zoomInPaintVertexBuffer:$.zoomOutPaintVertexBuffer;he&&this._buffers.push(he)}else($ instanceof Ta||$ instanceof ka)&&$.paintVertexBuffer&&this._buffers.push($.paintVertexBuffer)}},Za.prototype.upload=function(P){for(var N in this.binders){var $=this.binders[N];($ instanceof Ta||$ instanceof ka||$ instanceof Fa)&&$.upload(P)}this.updatePaintBuffers()},Za.prototype.destroy=function(){for(var P in this.binders){var N=this.binders[P];(N instanceof Ta||N instanceof ka||N instanceof Fa)&&N.destroy()}};var ci=function(P,N,$,he){he===void 0&&(he=function(){return!0}),this.programConfigurations={};for(var xe=0,Te=N;xe<Te.length;xe+=1){var Ne=Te[xe];this.programConfigurations[Ne.id]=new Za(Ne,$,he,P)}this.needsUpload=!1,this._featureMap=new Ft,this._bufferOffset=0};ci.prototype.populatePaintArrays=function(P,N,$,he,xe,Te){for(var Ne in this.programConfigurations)this.programConfigurations[Ne].populatePaintArrays(P,N,he,xe,Te);N.id!==void 0&&this._featureMap.add(N.id,$,this._bufferOffset,P),this._bufferOffset=P,this.needsUpload=!0},ci.prototype.updatePaintArrays=function(P,N,$,he){for(var xe=0,Te=$;xe<Te.length;xe+=1){var Ne=Te[xe];this.needsUpload=this.programConfigurations[Ne.id].updatePaintArrays(P,this._featureMap,N,Ne,he)||this.needsUpload}},ci.prototype.get=function(P){return this.programConfigurations[P]},ci.prototype.upload=function(P){if(!!this.needsUpload){for(var N in this.programConfigurations)this.programConfigurations[N].upload(P);this.needsUpload=!1}},ci.prototype.destroy=function(){for(var P in this.programConfigurations)this.programConfigurations[P].destroy()};function Vi(L,P){var N={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]};return N[L]||[L.replace(P+"-","").replace(/-/g,"_")]}function yi(L){var P={"line-pattern":{source:il,composite:il},"fill-pattern":{source:il,composite:il},"fill-extrusion-pattern":{source:il,composite:il}};return P[L]}function Ti(L,P,N){var $={color:{source:Af,composite:xh},number:{source:Xf,composite:Af}},he=yi(L);return he&&he[N]||$[P][N]}Be("ConstantBinder",ya),Be("CrossFadedConstantBinder",Sa),Be("SourceExpressionBinder",Ta),Be("CrossFadedCompositeBinder",Fa),Be("CompositeExpressionBinder",ka),Be("ProgramConfiguration",Za,{omit:["_buffers"]}),Be("ProgramConfigurationSet",ci);var Wa=8192;function Hi(L){return{min:-1*Math.pow(2,L-1),max:Math.pow(2,L-1)-1}}var Xi=Hi(15);function $i(L){for(var P=Wa/L.extent,N=L.loadGeometry(),$=0;$<N.length;$++)for(var he=N[$],xe=0;xe<he.length;xe++){var Te=he[xe];Te.x=Math.round(Te.x*P),Te.y=Math.round(Te.y*P),(Te.x<Xi.min||Te.x>Xi.max||Te.y<Xi.min||Te.y>Xi.max)&&(O("Geometry exceeds allowed extent, reduce your vector tile buffer size"),Te.x=c(Te.x,Xi.min,Xi.max),Te.y=c(Te.y,Xi.min,Xi.max))}return N}function Pi(L,P,N,$,he){L.emplaceBack(P*2+($+1)/2,N*2+(he+1)/2)}var so=function(P){this.zoom=P.zoom,this.overscaling=P.overscaling,this.layers=P.layers,this.layerIds=this.layers.map(function(N){return N.id}),this.index=P.index,this.hasPattern=!1,this.layoutVertexArray=new fc,this.indexArray=new tf,this.segments=new W,this.programConfigurations=new ci(fe,P.layers,P.zoom),this.stateDependentLayerIds=this.layers.filter(function(N){return N.isStateDependent()}).map(function(N){return N.id})};so.prototype.populate=function(P,N,$){var he=this.layers[0],xe=[],Te=null;he.type==="circle"&&(Te=he.layout.get("circle-sort-key"));for(var Ne=0,nt=P;Ne<nt.length;Ne+=1){var gt=nt[Ne],bt=gt.feature,Gt=gt.id,lr=gt.index,ir=gt.sourceLayerIndex,wr=this.layers[0]._featureFilter.needGeometry,Hr={type:bt.type,id:Gt,properties:bt.properties,geometry:wr?$i(bt):[]};if(!!this.layers[0]._featureFilter.filter(new di(this.zoom),Hr,$)){wr||(Hr.geometry=$i(bt));var cn=Te?Te.evaluate(Hr,{},$):void 0,an={id:Gt,properties:bt.properties,type:bt.type,sourceLayerIndex:ir,index:lr,geometry:Hr.geometry,patterns:{},sortKey:cn};xe.push(an)}}Te&&xe.sort(function(Ca,Da){return Ca.sortKey-Da.sortKey});for(var Rn=0,An=xe;Rn<An.length;Rn+=1){var Dn=An[Rn],Un=Dn,Kn=Un.geometry,ha=Un.index,ua=Un.sourceLayerIndex,Ba=P[ha].feature;this.addFeature(Dn,Kn,ha,$),N.featureIndex.insert(Ba,Kn,ha,ua,this.index)}},so.prototype.update=function(P,N,$){!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(P,N,this.stateDependentLayers,$)},so.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},so.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},so.prototype.upload=function(P){this.uploaded||(this.layoutVertexBuffer=P.createVertexBuffer(this.layoutVertexArray,fe),this.indexBuffer=P.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(P),this.uploaded=!0},so.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},so.prototype.addFeature=function(P,N,$,he){for(var xe=0,Te=N;xe<Te.length;xe+=1)for(var Ne=Te[xe],nt=0,gt=Ne;nt<gt.length;nt+=1){var bt=gt[nt],Gt=bt.x,lr=bt.y;if(!(Gt<0||Gt>=Wa||lr<0||lr>=Wa)){var ir=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,P.sortKey),wr=ir.vertexLength;Pi(this.layoutVertexArray,Gt,lr,-1,-1),Pi(this.layoutVertexArray,Gt,lr,1,-1),Pi(this.layoutVertexArray,Gt,lr,1,1),Pi(this.layoutVertexArray,Gt,lr,-1,1),this.indexArray.emplaceBack(wr,wr+1,wr+2),this.indexArray.emplaceBack(wr,wr+3,wr+2),ir.vertexLength+=4,ir.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,P,$,{},he)},Be("CircleBucket",so,{omit:["layers"]});function vi(L,P){for(var N=0;N<L.length;N++)if(ol(P,L[N]))return!0;for(var $=0;$<P.length;$++)if(ol(L,P[$]))return!0;return!!$l(L,P)}function Ri(L,P,N){return!!(ol(L,P)||Pu(P,L,N))}function Fo(L,P){if(L.length===1)return Du(P,L[0]);for(var N=0;N<P.length;N++)for(var $=P[N],he=0;he<$.length;he++)if(ol(L,$[he]))return!0;for(var xe=0;xe<L.length;xe++)if(Du(P,L[xe]))return!0;for(var Te=0;Te<P.length;Te++)if($l(L,P[Te]))return!0;return!1}function es(L,P,N){for(var $=0;$<P.length;$++){var he=P[$];if(L.length>=3){for(var xe=0;xe<he.length;xe++)if(ol(L,he[xe]))return!0}if(Ql(L,he,N))return!0}return!1}function Ql(L,P,N){if(L.length>1){if($l(L,P))return!0;for(var $=0;$<P.length;$++)if(Pu(P[$],L,N))return!0}for(var he=0;he<L.length;he++)if(Pu(L[he],P,N))return!0;return!1}function $l(L,P){if(L.length===0||P.length===0)return!1;for(var N=0;N<L.length-1;N++)for(var $=L[N],he=L[N+1],xe=0;xe<P.length-1;xe++){var Te=P[xe],Ne=P[xe+1];if(Lu($,he,Te,Ne))return!0}return!1}function Lu(L,P,N,$){return z(L,N,$)!==z(P,N,$)&&z(L,P,N)!==z(L,P,$)}function Pu(L,P,N){var $=N*N;if(P.length===1)return L.distSqr(P[0])<$;for(var he=1;he<P.length;he++){var xe=P[he-1],Te=P[he];if(rf(L,xe,Te)<$)return!0}return!1}function rf(L,P,N){var $=P.distSqr(N);if($===0)return L.distSqr(P);var he=((L.x-P.x)*(N.x-P.x)+(L.y-P.y)*(N.y-P.y))/$;return he<0?L.distSqr(P):he>1?L.distSqr(N):L.distSqr(N.sub(P)._mult(he)._add(P))}function Du(L,P){for(var N=!1,$,he,xe,Te=0;Te<L.length;Te++){$=L[Te];for(var Ne=0,nt=$.length-1;Ne<$.length;nt=Ne++)he=$[Ne],xe=$[nt],he.y>P.y!=xe.y>P.y&&P.x<(xe.x-he.x)*(P.y-he.y)/(xe.y-he.y)+he.x&&(N=!N)}return N}function ol(L,P){for(var N=!1,$=0,he=L.length-1;$<L.length;he=$++){var xe=L[$],Te=L[he];xe.y>P.y!=Te.y>P.y&&P.x<(Te.x-xe.x)*(P.y-xe.y)/(Te.y-xe.y)+xe.x&&(N=!N)}return N}function Sf(L,P,N,$,he){for(var xe=0,Te=L;xe<Te.length;xe+=1){var Ne=Te[xe];if(P<=Ne.x&&N<=Ne.y&&$>=Ne.x&&he>=Ne.y)return!0}var nt=[new h(P,N),new h(P,he),new h($,he),new h($,N)];if(L.length>2)for(var gt=0,bt=nt;gt<bt.length;gt+=1){var Gt=bt[gt];if(ol(L,Gt))return!0}for(var lr=0;lr<L.length-1;lr++){var ir=L[lr],wr=L[lr+1];if(Vs(ir,wr,nt))return!0}return!1}function Vs(L,P,N){var $=N[0],he=N[2];if(L.x<$.x&&P.x<$.x||L.x>he.x&&P.x>he.x||L.y<$.y&&P.y<$.y||L.y>he.y&&P.y>he.y)return!1;var xe=z(L,P,N[0]);return xe!==z(L,P,N[1])||xe!==z(L,P,N[2])||xe!==z(L,P,N[3])}function zl(L,P,N){var $=P.paint.get(L).value;return $.kind==="constant"?$.value:N.programConfigurations.get(P.id).getMaxValue(L)}function Ru(L){return Math.sqrt(L[0]*L[0]+L[1]*L[1])}function mu(L,P,N,$,he){if(!P[0]&&!P[1])return L;var xe=h.convert(P)._mult(he);N==="viewport"&&xe._rotate(-$);for(var Te=[],Ne=0;Ne<L.length;Ne++){var nt=L[Ne];Te.push(nt.sub(xe))}return Te}var Iu=new io({"circle-sort-key":new ei(Xt.layout_circle["circle-sort-key"])}),Lc=new io({"circle-radius":new ei(Xt.paint_circle["circle-radius"]),"circle-color":new ei(Xt.paint_circle["circle-color"]),"circle-blur":new ei(Xt.paint_circle["circle-blur"]),"circle-opacity":new ei(Xt.paint_circle["circle-opacity"]),"circle-translate":new Ua(Xt.paint_circle["circle-translate"]),"circle-translate-anchor":new Ua(Xt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Ua(Xt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Ua(Xt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ei(Xt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ei(Xt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ei(Xt.paint_circle["circle-stroke-opacity"])}),Rf={paint:Lc,layout:Iu},Ds=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var L=arguments,P=0,N=arguments.length;N--;)P+=L[N]*L[N];return Math.sqrt(P)});function pc(){var L=new Ds(4);return Ds!=Float32Array&&(L[1]=0,L[2]=0),L[0]=1,L[3]=1,L}function Ks(L,P,N){var $=P[0],he=P[1],xe=P[2],Te=P[3],Ne=Math.sin(N),nt=Math.cos(N);return L[0]=$*nt+xe*Ne,L[1]=he*nt+Te*Ne,L[2]=$*-Ne+xe*nt,L[3]=he*-Ne+Te*nt,L}function dc(){var L=new Ds(9);return Ds!=Float32Array&&(L[1]=0,L[2]=0,L[3]=0,L[5]=0,L[6]=0,L[7]=0),L[0]=1,L[4]=1,L[8]=1,L}function Pc(L,P){var N=Math.sin(P),$=Math.cos(P);return L[0]=$,L[1]=N,L[2]=0,L[3]=-N,L[4]=$,L[5]=0,L[6]=0,L[7]=0,L[8]=1,L}function Dc(){var L=new Ds(16);return Ds!=Float32Array&&(L[1]=0,L[2]=0,L[3]=0,L[4]=0,L[6]=0,L[7]=0,L[8]=0,L[9]=0,L[11]=0,L[12]=0,L[13]=0,L[14]=0),L[0]=1,L[5]=1,L[10]=1,L[15]=1,L}function hv(L){var P=new Ds(16);return P[0]=L[0],P[1]=L[1],P[2]=L[2],P[3]=L[3],P[4]=L[4],P[5]=L[5],P[6]=L[6],P[7]=L[7],P[8]=L[8],P[9]=L[9],P[10]=L[10],P[11]=L[11],P[12]=L[12],P[13]=L[13],P[14]=L[14],P[15]=L[15],P}function Rc(L){return L[0]=1,L[1]=0,L[2]=0,L[3]=0,L[4]=0,L[5]=1,L[6]=0,L[7]=0,L[8]=0,L[9]=0,L[10]=1,L[11]=0,L[12]=0,L[13]=0,L[14]=0,L[15]=1,L}function Jf(L,P){var N=P[0],$=P[1],he=P[2],xe=P[3],Te=P[4],Ne=P[5],nt=P[6],gt=P[7],bt=P[8],Gt=P[9],lr=P[10],ir=P[11],wr=P[12],Hr=P[13],cn=P[14],an=P[15],Rn=N*Ne-$*Te,An=N*nt-he*Te,Dn=N*gt-xe*Te,Un=$*nt-he*Ne,Kn=$*gt-xe*Ne,ha=he*gt-xe*nt,ua=bt*Hr-Gt*wr,Ba=bt*cn-lr*wr,Ca=bt*an-ir*wr,Da=Gt*cn-lr*Hr,li=Gt*an-ir*Hr,za=lr*an-ir*cn,Na=Rn*za-An*li+Dn*Da+Un*Ca-Kn*Ba+ha*ua;return Na?(Na=1/Na,L[0]=(Ne*za-nt*li+gt*Da)*Na,L[1]=(he*li-$*za-xe*Da)*Na,L[2]=(Hr*ha-cn*Kn+an*Un)*Na,L[3]=(lr*Kn-Gt*ha-ir*Un)*Na,L[4]=(nt*Ca-Te*za-gt*Ba)*Na,L[5]=(N*za-he*Ca+xe*Ba)*Na,L[6]=(cn*Dn-wr*ha-an*An)*Na,L[7]=(bt*ha-lr*Dn+ir*An)*Na,L[8]=(Te*li-Ne*Ca+gt*ua)*Na,L[9]=($*Ca-N*li-xe*ua)*Na,L[10]=(wr*Kn-Hr*Dn+an*Rn)*Na,L[11]=(Gt*Dn-bt*Kn-ir*Rn)*Na,L[12]=(Ne*Ba-Te*Da-nt*ua)*Na,L[13]=(N*Da-$*Ba+he*ua)*Na,L[14]=(Hr*An-wr*Un-cn*Rn)*Na,L[15]=(bt*Un-Gt*An+lr*Rn)*Na,L):null}function Qf(L,P,N){var $=P[0],he=P[1],xe=P[2],Te=P[3],Ne=P[4],nt=P[5],gt=P[6],bt=P[7],Gt=P[8],lr=P[9],ir=P[10],wr=P[11],Hr=P[12],cn=P[13],an=P[14],Rn=P[15],An=N[0],Dn=N[1],Un=N[2],Kn=N[3];return L[0]=An*$+Dn*Ne+Un*Gt+Kn*Hr,L[1]=An*he+Dn*nt+Un*lr+Kn*cn,L[2]=An*xe+Dn*gt+Un*ir+Kn*an,L[3]=An*Te+Dn*bt+Un*wr+Kn*Rn,An=N[4],Dn=N[5],Un=N[6],Kn=N[7],L[4]=An*$+Dn*Ne+Un*Gt+Kn*Hr,L[5]=An*he+Dn*nt+Un*lr+Kn*cn,L[6]=An*xe+Dn*gt+Un*ir+Kn*an,L[7]=An*Te+Dn*bt+Un*wr+Kn*Rn,An=N[8],Dn=N[9],Un=N[10],Kn=N[11],L[8]=An*$+Dn*Ne+Un*Gt+Kn*Hr,L[9]=An*he+Dn*nt+Un*lr+Kn*cn,L[10]=An*xe+Dn*gt+Un*ir+Kn*an,L[11]=An*Te+Dn*bt+Un*wr+Kn*Rn,An=N[12],Dn=N[13],Un=N[14],Kn=N[15],L[12]=An*$+Dn*Ne+Un*Gt+Kn*Hr,L[13]=An*he+Dn*nt+Un*lr+Kn*cn,L[14]=An*xe+Dn*gt+Un*ir+Kn*an,L[15]=An*Te+Dn*bt+Un*wr+Kn*Rn,L}function Ho(L,P,N){var $=N[0],he=N[1],xe=N[2],Te,Ne,nt,gt,bt,Gt,lr,ir,wr,Hr,cn,an;return P===L?(L[12]=P[0]*$+P[4]*he+P[8]*xe+P[12],L[13]=P[1]*$+P[5]*he+P[9]*xe+P[13],L[14]=P[2]*$+P[6]*he+P[10]*xe+P[14],L[15]=P[3]*$+P[7]*he+P[11]*xe+P[15]):(Te=P[0],Ne=P[1],nt=P[2],gt=P[3],bt=P[4],Gt=P[5],lr=P[6],ir=P[7],wr=P[8],Hr=P[9],cn=P[10],an=P[11],L[0]=Te,L[1]=Ne,L[2]=nt,L[3]=gt,L[4]=bt,L[5]=Gt,L[6]=lr,L[7]=ir,L[8]=wr,L[9]=Hr,L[10]=cn,L[11]=an,L[12]=Te*$+bt*he+wr*xe+P[12],L[13]=Ne*$+Gt*he+Hr*xe+P[13],L[14]=nt*$+lr*he+cn*xe+P[14],L[15]=gt*$+ir*he+an*xe+P[15]),L}function Tl(L,P,N){var $=N[0],he=N[1],xe=N[2];return L[0]=P[0]*$,L[1]=P[1]*$,L[2]=P[2]*$,L[3]=P[3]*$,L[4]=P[4]*he,L[5]=P[5]*he,L[6]=P[6]*he,L[7]=P[7]*he,L[8]=P[8]*xe,L[9]=P[9]*xe,L[10]=P[10]*xe,L[11]=P[11]*xe,L[12]=P[12],L[13]=P[13],L[14]=P[14],L[15]=P[15],L}function Al(L,P,N){var $=Math.sin(N),he=Math.cos(N),xe=P[4],Te=P[5],Ne=P[6],nt=P[7],gt=P[8],bt=P[9],Gt=P[10],lr=P[11];return P!==L&&(L[0]=P[0],L[1]=P[1],L[2]=P[2],L[3]=P[3],L[12]=P[12],L[13]=P[13],L[14]=P[14],L[15]=P[15]),L[4]=xe*he+gt*$,L[5]=Te*he+bt*$,L[6]=Ne*he+Gt*$,L[7]=nt*he+lr*$,L[8]=gt*he-xe*$,L[9]=bt*he-Te*$,L[10]=Gt*he-Ne*$,L[11]=lr*he-nt*$,L}function Ic(L,P,N){var $=Math.sin(N),he=Math.cos(N),xe=P[0],Te=P[1],Ne=P[2],nt=P[3],gt=P[4],bt=P[5],Gt=P[6],lr=P[7];return P!==L&&(L[8]=P[8],L[9]=P[9],L[10]=P[10],L[11]=P[11],L[12]=P[12],L[13]=P[13],L[14]=P[14],L[15]=P[15]),L[0]=xe*he+gt*$,L[1]=Te*he+bt*$,L[2]=Ne*he+Gt*$,L[3]=nt*he+lr*$,L[4]=gt*he-xe*$,L[5]=bt*he-Te*$,L[6]=Gt*he-Ne*$,L[7]=lr*he-nt*$,L}function _h(L,P,N,$,he){var xe=1/Math.tan(P/2),Te;return L[0]=xe/N,L[1]=0,L[2]=0,L[3]=0,L[4]=0,L[5]=xe,L[6]=0,L[7]=0,L[8]=0,L[9]=0,L[11]=-1,L[12]=0,L[13]=0,L[15]=0,he!=null&&he!==1/0?(Te=1/($-he),L[10]=(he+$)*Te,L[14]=2*he*$*Te):(L[10]=-1,L[14]=-2*$),L}function op(L,P,N,$,he,xe,Te){var Ne=1/(P-N),nt=1/($-he),gt=1/(xe-Te);return L[0]=-2*Ne,L[1]=0,L[2]=0,L[3]=0,L[4]=0,L[5]=-2*nt,L[6]=0,L[7]=0,L[8]=0,L[9]=0,L[10]=2*gt,L[11]=0,L[12]=(P+N)*Ne,L[13]=(he+$)*nt,L[14]=(Te+xe)*gt,L[15]=1,L}var sp=Qf;function gc(){var L=new Ds(3);return Ds!=Float32Array&&(L[0]=0,L[1]=0,L[2]=0),L}function lp(L){var P=new Ds(3);return P[0]=L[0],P[1]=L[1],P[2]=L[2],P}function Fc(L,P,N){return L[0]=P[0]+N[0],L[1]=P[1]+N[1],L[2]=P[2]+N[2],L}function up(L,P,N){return L[0]=P[0]-N[0],L[1]=P[1]-N[1],L[2]=P[2]-N[2],L}function fp(L,P,N){return L[0]=P[0]*N,L[1]=P[1]*N,L[2]=P[2]*N,L}function Th(L,P){var N=P[0],$=P[1],he=P[2],xe=N*N+$*$+he*he;return xe>0&&(xe=1/Math.sqrt(xe)),L[0]=P[0]*xe,L[1]=P[1]*xe,L[2]=P[2]*xe,L}function pg(L,P){return L[0]*P[0]+L[1]*P[1]+L[2]*P[2]}function dg(L,P,N){var $=P[0],he=P[1],xe=P[2],Te=N[0],Ne=N[1],nt=N[2];return L[0]=he*nt-xe*Ne,L[1]=xe*Te-$*nt,L[2]=$*Ne-he*Te,L}function gg(L,P,N){var $=P[0],he=P[1],xe=P[2];return L[0]=$*N[0]+he*N[3]+xe*N[6],L[1]=$*N[1]+he*N[4]+xe*N[7],L[2]=$*N[2]+he*N[5]+xe*N[8],L}var yg=up;(function(){var L=gc();return function(P,N,$,he,xe,Te){var Ne,nt;for(N||(N=3),$||($=0),he?nt=Math.min(he*N+$,P.length):nt=P.length,Ne=$;Ne<nt;Ne+=N)L[0]=P[Ne],L[1]=P[Ne+1],L[2]=P[Ne+2],xe(L,L,Te),P[Ne]=L[0],P[Ne+1]=L[1],P[Ne+2]=L[2];return P}})();function mg(){var L=new Ds(4);return Ds!=Float32Array&&(L[0]=0,L[1]=0,L[2]=0,L[3]=0),L}function xg(L,P,N){return L[0]=P[0]*N,L[1]=P[1]*N,L[2]=P[2]*N,L[3]=P[3]*N,L}function bg(L,P){return L[0]*P[0]+L[1]*P[1]+L[2]*P[2]+L[3]*P[3]}function vv(L,P,N){var $=P[0],he=P[1],xe=P[2],Te=P[3];return L[0]=N[0]*$+N[4]*he+N[8]*xe+N[12]*Te,L[1]=N[1]*$+N[5]*he+N[9]*xe+N[13]*Te,L[2]=N[2]*$+N[6]*he+N[10]*xe+N[14]*Te,L[3]=N[3]*$+N[7]*he+N[11]*xe+N[15]*Te,L}(function(){var L=mg();return function(P,N,$,he,xe,Te){var Ne,nt;for(N||(N=4),$||($=0),he?nt=Math.min(he*N+$,P.length):nt=P.length,Ne=$;Ne<nt;Ne+=N)L[0]=P[Ne],L[1]=P[Ne+1],L[2]=P[Ne+2],L[3]=P[Ne+3],xe(L,L,Te),P[Ne]=L[0],P[Ne+1]=L[1],P[Ne+2]=L[2],P[Ne+3]=L[3];return P}})();function wg(){var L=new Ds(2);return Ds!=Float32Array&&(L[0]=0,L[1]=0),L}function _g(L){var P=L[0],N=L[1];return P*P+N*N}var Tg=_g;(function(){var L=wg();return function(P,N,$,he,xe,Te){var Ne,nt;for(N||(N=2),$||($=0),he?nt=Math.min(he*N+$,P.length):nt=P.length,Ne=$;Ne<nt;Ne+=N)L[0]=P[Ne],L[1]=P[Ne+1],xe(L,L,Te),P[Ne]=L[0],P[Ne+1]=L[1];return P}})();var Ag=function(L){function P(N){L.call(this,N,Rf)}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype.createBucket=function($){return new so($)},P.prototype.queryRadius=function($){var he=$;return zl("circle-radius",this,he)+zl("circle-stroke-width",this,he)+Ru(this.paint.get("circle-translate"))},P.prototype.queryIntersectsFeature=function($,he,xe,Te,Ne,nt,gt,bt){for(var Gt=mu($,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),nt.angle,gt),lr=this.paint.get("circle-radius").evaluate(he,xe),ir=this.paint.get("circle-stroke-width").evaluate(he,xe),wr=lr+ir,Hr=this.paint.get("circle-pitch-alignment")==="map",cn=Hr?Gt:Mg(Gt,bt),an=Hr?wr*gt:wr,Rn=0,An=Te;Rn<An.length;Rn+=1)for(var Dn=An[Rn],Un=0,Kn=Dn;Un<Kn.length;Un+=1){var ha=Kn[Un],ua=Hr?ha:ud(ha,bt),Ba=an,Ca=vv([],[ha.x,ha.y,0,1],bt);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Ba*=Ca[3]/nt.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Ba*=nt.cameraToCenterDistance/Ca[3]),Ri(cn,ua,Ba))return!0}return!1},P}(Us);function ud(L,P){var N=vv([],[L.x,L.y,0,1],P);return new h(N[0]/N[3],N[1]/N[3])}function Mg(L,P){return L.map(function(N){return ud(N,P)})}var fd=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P}(so);Be("HeatmapBucket",fd,{omit:["layers"]});function cp(L,P,N,$){var he=P.width,xe=P.height;if(!$)$=new Uint8Array(he*xe*N);else if($ instanceof Uint8ClampedArray)$=new Uint8Array($.buffer);else if($.length!==he*xe*N)throw new RangeError("mismatched image size");return L.width=he,L.height=xe,L.data=$,L}function cd(L,P,N){var $=P.width,he=P.height;if(!($===L.width&&he===L.height)){var xe=cp({},{width:$,height:he},N);hp(L,xe,{x:0,y:0},{x:0,y:0},{width:Math.min(L.width,$),height:Math.min(L.height,he)},N),L.width=$,L.height=he,L.data=xe.data}}function hp(L,P,N,$,he,xe){if(he.width===0||he.height===0)return P;if(he.width>L.width||he.height>L.height||N.x>L.width-he.width||N.y>L.height-he.height)throw new RangeError("out of range source coordinates for image copy");if(he.width>P.width||he.height>P.height||$.x>P.width-he.width||$.y>P.height-he.height)throw new RangeError("out of range destination coordinates for image copy");for(var Te=L.data,Ne=P.data,nt=0;nt<he.height;nt++)for(var gt=((N.y+nt)*L.width+N.x)*xe,bt=(($.y+nt)*P.width+$.x)*xe,Gt=0;Gt<he.width*xe;Gt++)Ne[bt+Gt]=Te[gt+Gt];return P}var yc=function(P,N){cp(this,P,1,N)};yc.prototype.resize=function(P){cd(this,P,1)},yc.prototype.clone=function(){return new yc({width:this.width,height:this.height},new Uint8Array(this.data))},yc.copy=function(P,N,$,he,xe){hp(P,N,$,he,xe,1)};var Ml=function(P,N){cp(this,P,4,N)};Ml.prototype.resize=function(P){cd(this,P,4)},Ml.prototype.replace=function(P,N){N?this.data.set(P):P instanceof Uint8ClampedArray?this.data=new Uint8Array(P.buffer):this.data=P},Ml.prototype.clone=function(){return new Ml({width:this.width,height:this.height},new Uint8Array(this.data))},Ml.copy=function(P,N,$,he,xe){hp(P,N,$,he,xe,4)},Be("AlphaImage",yc),Be("RGBAImage",Ml);var Sg=new io({"heatmap-radius":new ei(Xt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ei(Xt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Ua(Xt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Wo(Xt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Ua(Xt.paint_heatmap["heatmap-opacity"])}),Eg={paint:Sg};function hd(L,P){for(var N=new Uint8Array(1024),$={},he=0,xe=0;he<256;he++,xe+=4){$[P]=he/255;var Te=L.evaluate($);N[xe+0]=Math.floor(Te.r*255/Te.a),N[xe+1]=Math.floor(Te.g*255/Te.a),N[xe+2]=Math.floor(Te.b*255/Te.a),N[xe+3]=Math.floor(Te.a*255)}return new Ml({width:256,height:1},N)}var Cg=function(L){function P(N){L.call(this,N,Eg),this._updateColorRamp()}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype.createBucket=function($){return new fd($)},P.prototype._handleSpecialPaintPropertyUpdate=function($){$==="heatmap-color"&&this._updateColorRamp()},P.prototype._updateColorRamp=function(){var $=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=hd($,"heatmapDensity"),this.colorRampTexture=null},P.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},P.prototype.queryRadius=function(){return 0},P.prototype.queryIntersectsFeature=function(){return!1},P.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},P}(Us),kg=new io({"hillshade-illumination-direction":new Ua(Xt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Ua(Xt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Ua(Xt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Ua(Xt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Ua(Xt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Ua(Xt.paint_hillshade["hillshade-accent-color"])}),Lg={paint:kg},Pg=function(L){function P(N){L.call(this,N,Lg)}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},P}(Us),Dg=jo([{name:"a_pos",components:2,type:"Int16"}],4),vd=Dg.members,vp=pv,Rg=pv;function pv(L,P,N){N=N||2;var $=P&&P.length,he=$?P[0]*N:L.length,xe=pd(L,0,he,N,!0),Te=[];if(!xe||xe.next===xe.prev)return Te;var Ne,nt,gt,bt,Gt,lr,ir;if($&&(xe=Ng(L,P,xe,N)),L.length>80*N){Ne=gt=L[0],nt=bt=L[1];for(var wr=N;wr<he;wr+=N)Gt=L[wr],lr=L[wr+1],Gt<Ne&&(Ne=Gt),lr<nt&&(nt=lr),Gt>gt&&(gt=Gt),lr>bt&&(bt=lr);ir=Math.max(gt-Ne,bt-nt),ir=ir!==0?1/ir:0}return Ah(xe,Te,N,Ne,nt,ir),Te}function pd(L,P,N,$,he){var xe,Te;if(he===gp(L,P,N,$)>0)for(xe=P;xe<N;xe+=$)Te=yd(xe,L[xe],L[xe+1],Te);else for(xe=N-$;xe>=P;xe-=$)Te=yd(xe,L[xe],L[xe+1],Te);return Te&&dv(Te,Te.next)&&(Sh(Te),Te=Te.next),Te}function $f(L,P){if(!L)return L;P||(P=L);var N=L,$;do if($=!1,!N.steiner&&(dv(N,N.next)||ts(N.prev,N,N.next)===0)){if(Sh(N),N=P=N.prev,N===N.next)break;$=!0}else N=N.next;while($||N!==P);return P}function Ah(L,P,N,$,he,xe,Te){if(!!L){!Te&&xe&&Gg(L,$,he,xe);for(var Ne=L,nt,gt;L.prev!==L.next;){if(nt=L.prev,gt=L.next,xe?Fg(L,$,he,xe):Ig(L)){P.push(nt.i/N),P.push(L.i/N),P.push(gt.i/N),Sh(L),L=gt.next,Ne=gt.next;continue}if(L=gt,L===Ne){Te?Te===1?(L=zg($f(L),P,N),Ah(L,P,N,$,he,xe,2)):Te===2&&Og(L,P,N,$,he,xe):Ah($f(L),P,N,$,he,xe,1);break}}}}function Ig(L){var P=L.prev,N=L,$=L.next;if(ts(P,N,$)>=0)return!1;for(var he=L.next.next;he!==L.prev;){if(zc(P.x,P.y,N.x,N.y,$.x,$.y,he.x,he.y)&&ts(he.prev,he,he.next)>=0)return!1;he=he.next}return!0}function Fg(L,P,N,$){var he=L.prev,xe=L,Te=L.next;if(ts(he,xe,Te)>=0)return!1;for(var Ne=he.x<xe.x?he.x<Te.x?he.x:Te.x:xe.x<Te.x?xe.x:Te.x,nt=he.y<xe.y?he.y<Te.y?he.y:Te.y:xe.y<Te.y?xe.y:Te.y,gt=he.x>xe.x?he.x>Te.x?he.x:Te.x:xe.x>Te.x?xe.x:Te.x,bt=he.y>xe.y?he.y>Te.y?he.y:Te.y:xe.y>Te.y?xe.y:Te.y,Gt=pp(Ne,nt,P,N,$),lr=pp(gt,bt,P,N,$),ir=L.prevZ,wr=L.nextZ;ir&&ir.z>=Gt&&wr&&wr.z<=lr;){if(ir!==L.prev&&ir!==L.next&&zc(he.x,he.y,xe.x,xe.y,Te.x,Te.y,ir.x,ir.y)&&ts(ir.prev,ir,ir.next)>=0||(ir=ir.prevZ,wr!==L.prev&&wr!==L.next&&zc(he.x,he.y,xe.x,xe.y,Te.x,Te.y,wr.x,wr.y)&&ts(wr.prev,wr,wr.next)>=0))return!1;wr=wr.nextZ}for(;ir&&ir.z>=Gt;){if(ir!==L.prev&&ir!==L.next&&zc(he.x,he.y,xe.x,xe.y,Te.x,Te.y,ir.x,ir.y)&&ts(ir.prev,ir,ir.next)>=0)return!1;ir=ir.prevZ}for(;wr&&wr.z<=lr;){if(wr!==L.prev&&wr!==L.next&&zc(he.x,he.y,xe.x,xe.y,Te.x,Te.y,wr.x,wr.y)&&ts(wr.prev,wr,wr.next)>=0)return!1;wr=wr.nextZ}return!0}function zg(L,P,N){var $=L;do{var he=$.prev,xe=$.next.next;!dv(he,xe)&&dd(he,$,$.next,xe)&&Mh(he,xe)&&Mh(xe,he)&&(P.push(he.i/N),P.push($.i/N),P.push(xe.i/N),Sh($),Sh($.next),$=L=xe),$=$.next}while($!==L);return $f($)}function Og(L,P,N,$,he,xe){var Te=L;do{for(var Ne=Te.next.next;Ne!==Te.prev;){if(Te.i!==Ne.i&&jg(Te,Ne)){var nt=gd(Te,Ne);Te=$f(Te,Te.next),nt=$f(nt,nt.next),Ah(Te,P,N,$,he,xe),Ah(nt,P,N,$,he,xe);return}Ne=Ne.next}Te=Te.next}while(Te!==L)}function Ng(L,P,N,$){var he=[],xe,Te,Ne,nt,gt;for(xe=0,Te=P.length;xe<Te;xe++)Ne=P[xe]*$,nt=xe<Te-1?P[xe+1]*$:L.length,gt=pd(L,Ne,nt,$,!1),gt===gt.next&&(gt.steiner=!0),he.push(Wg(gt));for(he.sort(Bg),xe=0;xe<he.length;xe++)Ug(he[xe],N),N=$f(N,N.next);return N}function Bg(L,P){return L.x-P.x}function Ug(L,P){if(P=Vg(L,P),P){var N=gd(P,L);$f(P,P.next),$f(N,N.next)}}function Vg(L,P){var N=P,$=L.x,he=L.y,xe=-1/0,Te;do{if(he<=N.y&&he>=N.next.y&&N.next.y!==N.y){var Ne=N.x+(he-N.y)*(N.next.x-N.x)/(N.next.y-N.y);if(Ne<=$&&Ne>xe){if(xe=Ne,Ne===$){if(he===N.y)return N;if(he===N.next.y)return N.next}Te=N.x<N.next.x?N:N.next}}N=N.next}while(N!==P);if(!Te)return null;if($===xe)return Te;var nt=Te,gt=Te.x,bt=Te.y,Gt=1/0,lr;N=Te;do $>=N.x&&N.x>=gt&&$!==N.x&&zc(he<bt?$:xe,he,gt,bt,he<bt?xe:$,he,N.x,N.y)&&(lr=Math.abs(he-N.y)/($-N.x),Mh(N,L)&&(lr<Gt||lr===Gt&&(N.x>Te.x||N.x===Te.x&&Hg(Te,N)))&&(Te=N,Gt=lr)),N=N.next;while(N!==nt);return Te}function Hg(L,P){return ts(L.prev,L,P.prev)<0&&ts(P.next,L,L.next)<0}function Gg(L,P,N,$){var he=L;do he.z===null&&(he.z=pp(he.x,he.y,P,N,$)),he.prevZ=he.prev,he.nextZ=he.next,he=he.next;while(he!==L);he.prevZ.nextZ=null,he.prevZ=null,Yg(he)}function Yg(L){var P,N,$,he,xe,Te,Ne,nt,gt=1;do{for(N=L,L=null,xe=null,Te=0;N;){for(Te++,$=N,Ne=0,P=0;P<gt&&(Ne++,$=$.nextZ,!!$);P++);for(nt=gt;Ne>0||nt>0&&$;)Ne!==0&&(nt===0||!$||N.z<=$.z)?(he=N,N=N.nextZ,Ne--):(he=$,$=$.nextZ,nt--),xe?xe.nextZ=he:L=he,he.prevZ=xe,xe=he;N=$}xe.nextZ=null,gt*=2}while(Te>1);return L}function pp(L,P,N,$,he){return L=32767*(L-N)*he,P=32767*(P-$)*he,L=(L|L<<8)&16711935,L=(L|L<<4)&252645135,L=(L|L<<2)&858993459,L=(L|L<<1)&1431655765,P=(P|P<<8)&16711935,P=(P|P<<4)&252645135,P=(P|P<<2)&858993459,P=(P|P<<1)&1431655765,L|P<<1}function Wg(L){var P=L,N=L;do(P.x<N.x||P.x===N.x&&P.y<N.y)&&(N=P),P=P.next;while(P!==L);return N}function zc(L,P,N,$,he,xe,Te,Ne){return(he-Te)*(P-Ne)-(L-Te)*(xe-Ne)>=0&&(L-Te)*($-Ne)-(N-Te)*(P-Ne)>=0&&(N-Te)*(xe-Ne)-(he-Te)*($-Ne)>=0}function jg(L,P){return L.next.i!==P.i&&L.prev.i!==P.i&&!Xg(L,P)&&(Mh(L,P)&&Mh(P,L)&&Zg(L,P)&&(ts(L.prev,L,P.prev)||ts(L,P.prev,P))||dv(L,P)&&ts(L.prev,L,L.next)>0&&ts(P.prev,P,P.next)>0)}function ts(L,P,N){return(P.y-L.y)*(N.x-P.x)-(P.x-L.x)*(N.y-P.y)}function dv(L,P){return L.x===P.x&&L.y===P.y}function dd(L,P,N,$){var he=yv(ts(L,P,N)),xe=yv(ts(L,P,$)),Te=yv(ts(N,$,L)),Ne=yv(ts(N,$,P));return!!(he!==xe&&Te!==Ne||he===0&&gv(L,N,P)||xe===0&&gv(L,$,P)||Te===0&&gv(N,L,$)||Ne===0&&gv(N,P,$))}function gv(L,P,N){return P.x<=Math.max(L.x,N.x)&&P.x>=Math.min(L.x,N.x)&&P.y<=Math.max(L.y,N.y)&&P.y>=Math.min(L.y,N.y)}function yv(L){return L>0?1:L<0?-1:0}function Xg(L,P){var N=L;do{if(N.i!==L.i&&N.next.i!==L.i&&N.i!==P.i&&N.next.i!==P.i&&dd(N,N.next,L,P))return!0;N=N.next}while(N!==L);return!1}function Mh(L,P){return ts(L.prev,L,L.next)<0?ts(L,P,L.next)>=0&&ts(L,L.prev,P)>=0:ts(L,P,L.prev)<0||ts(L,L.next,P)<0}function Zg(L,P){var N=L,$=!1,he=(L.x+P.x)/2,xe=(L.y+P.y)/2;do N.y>xe!=N.next.y>xe&&N.next.y!==N.y&&he<(N.next.x-N.x)*(xe-N.y)/(N.next.y-N.y)+N.x&&($=!$),N=N.next;while(N!==L);return $}function gd(L,P){var N=new dp(L.i,L.x,L.y),$=new dp(P.i,P.x,P.y),he=L.next,xe=P.prev;return L.next=P,P.prev=L,N.next=he,he.prev=N,$.next=N,N.prev=$,xe.next=$,$.prev=xe,$}function yd(L,P,N,$){var he=new dp(L,P,N);return $?(he.next=$.next,he.prev=$,$.next.prev=he,$.next=he):(he.prev=he,he.next=he),he}function Sh(L){L.next.prev=L.prev,L.prev.next=L.next,L.prevZ&&(L.prevZ.nextZ=L.nextZ),L.nextZ&&(L.nextZ.prevZ=L.prevZ)}function dp(L,P,N){this.i=L,this.x=P,this.y=N,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}pv.deviation=function(L,P,N,$){var he=P&&P.length,xe=he?P[0]*N:L.length,Te=Math.abs(gp(L,0,xe,N));if(he)for(var Ne=0,nt=P.length;Ne<nt;Ne++){var gt=P[Ne]*N,bt=Ne<nt-1?P[Ne+1]*N:L.length;Te-=Math.abs(gp(L,gt,bt,N))}var Gt=0;for(Ne=0;Ne<$.length;Ne+=3){var lr=$[Ne]*N,ir=$[Ne+1]*N,wr=$[Ne+2]*N;Gt+=Math.abs((L[lr]-L[wr])*(L[ir+1]-L[lr+1])-(L[lr]-L[ir])*(L[wr+1]-L[lr+1]))}return Te===0&&Gt===0?0:Math.abs((Gt-Te)/Te)};function gp(L,P,N,$){for(var he=0,xe=P,Te=N-$;xe<N;xe+=$)he+=(L[Te]-L[xe])*(L[xe+1]+L[Te+1]),Te=xe;return he}pv.flatten=function(L){for(var P=L[0][0].length,N={vertices:[],holes:[],dimensions:P},$=0,he=0;he<L.length;he++){for(var xe=0;xe<L[he].length;xe++)for(var Te=0;Te<P;Te++)N.vertices.push(L[he][xe][Te]);he>0&&($+=L[he-1].length,N.holes.push($))}return N},vp.default=Rg;function Kg(L,P,N,$,he){md(L,P,N||0,$||L.length-1,he||Jg)}function md(L,P,N,$,he){for(;$>N;){if($-N>600){var xe=$-N+1,Te=P-N+1,Ne=Math.log(xe),nt=.5*Math.exp(2*Ne/3),gt=.5*Math.sqrt(Ne*nt*(xe-nt)/xe)*(Te-xe/2<0?-1:1),bt=Math.max(N,Math.floor(P-Te*nt/xe+gt)),Gt=Math.min($,Math.floor(P+(xe-Te)*nt/xe+gt));md(L,P,bt,Gt,he)}var lr=L[P],ir=N,wr=$;for(Eh(L,N,P),he(L[$],lr)>0&&Eh(L,N,$);ir<wr;){for(Eh(L,ir,wr),ir++,wr--;he(L[ir],lr)<0;)ir++;for(;he(L[wr],lr)>0;)wr--}he(L[N],lr)===0?Eh(L,N,wr):(wr++,Eh(L,wr,$)),wr<=P&&(N=wr+1),P<=wr&&($=wr-1)}}function Eh(L,P,N){var $=L[P];L[P]=L[N],L[N]=$}function Jg(L,P){return L<P?-1:L>P?1:0}function yp(L,P){var N=L.length;if(N<=1)return[L];for(var $=[],he,xe,Te=0;Te<N;Te++){var Ne=B(L[Te]);Ne!==0&&(L[Te].area=Math.abs(Ne),xe===void 0&&(xe=Ne<0),xe===Ne<0?(he&&$.push(he),he=[L[Te]]):he.push(L[Te]))}if(he&&$.push(he),P>1)for(var nt=0;nt<$.length;nt++)$[nt].length<=P||(Kg($[nt],P,1,$[nt].length-1,Qg),$[nt]=$[nt].slice(0,P));return $}function Qg(L,P){return P.area-L.area}function mp(L,P,N){for(var $=N.patternDependencies,he=!1,xe=0,Te=P;xe<Te.length;xe+=1){var Ne=Te[xe],nt=Ne.paint.get(L+"-pattern");nt.isConstant()||(he=!0);var gt=nt.constantOr(null);gt&&(he=!0,$[gt.to]=!0,$[gt.from]=!0)}return he}function xp(L,P,N,$,he){for(var xe=he.patternDependencies,Te=0,Ne=P;Te<Ne.length;Te+=1){var nt=Ne[Te],gt=nt.paint.get(L+"-pattern"),bt=gt.value;if(bt.kind!=="constant"){var Gt=bt.evaluate({zoom:$-1},N,{},he.availableImages),lr=bt.evaluate({zoom:$},N,{},he.availableImages),ir=bt.evaluate({zoom:$+1},N,{},he.availableImages);Gt=Gt&&Gt.name?Gt.name:Gt,lr=lr&&lr.name?lr.name:lr,ir=ir&&ir.name?ir.name:ir,xe[Gt]=!0,xe[lr]=!0,xe[ir]=!0,N.patterns[nt.id]={min:Gt,mid:lr,max:ir}}}return N}var $g=500,nf=function(P){this.zoom=P.zoom,this.overscaling=P.overscaling,this.layers=P.layers,this.layerIds=this.layers.map(function(N){return N.id}),this.index=P.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new fc,this.indexArray=new tf,this.indexArray2=new vc,this.programConfigurations=new ci(vd,P.layers,P.zoom),this.segments=new W,this.segments2=new W,this.stateDependentLayerIds=this.layers.filter(function(N){return N.isStateDependent()}).map(function(N){return N.id})};nf.prototype.populate=function(P,N,$){this.hasPattern=mp("fill",this.layers,N);for(var he=this.layers[0].layout.get("fill-sort-key"),xe=[],Te=0,Ne=P;Te<Ne.length;Te+=1){var nt=Ne[Te],gt=nt.feature,bt=nt.id,Gt=nt.index,lr=nt.sourceLayerIndex,ir=this.layers[0]._featureFilter.needGeometry,wr={type:gt.type,id:bt,properties:gt.properties,geometry:ir?$i(gt):[]};if(!!this.layers[0]._featureFilter.filter(new di(this.zoom),wr,$)){ir||(wr.geometry=$i(gt));var Hr=he?he.evaluate(wr,{},$,N.availableImages):void 0,cn={id:bt,properties:gt.properties,type:gt.type,sourceLayerIndex:lr,index:Gt,geometry:wr.geometry,patterns:{},sortKey:Hr};xe.push(cn)}}he&&xe.sort(function(Ca,Da){return Ca.sortKey-Da.sortKey});for(var an=0,Rn=xe;an<Rn.length;an+=1){var An=Rn[an],Dn=An,Un=Dn.geometry,Kn=Dn.index,ha=Dn.sourceLayerIndex;if(this.hasPattern){var ua=xp("fill",this.layers,An,this.zoom,N);this.patternFeatures.push(ua)}else this.addFeature(An,Un,Kn,$,{});var Ba=P[Kn].feature;N.featureIndex.insert(Ba,Un,Kn,ha,this.index)}},nf.prototype.update=function(P,N,$){!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(P,N,this.stateDependentLayers,$)},nf.prototype.addFeatures=function(P,N,$){for(var he=0,xe=this.patternFeatures;he<xe.length;he+=1){var Te=xe[he];this.addFeature(Te,Te.geometry,Te.index,N,$)}},nf.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},nf.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},nf.prototype.upload=function(P){this.uploaded||(this.layoutVertexBuffer=P.createVertexBuffer(this.layoutVertexArray,vd),this.indexBuffer=P.createIndexBuffer(this.indexArray),this.indexBuffer2=P.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(P),this.uploaded=!0},nf.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},nf.prototype.addFeature=function(P,N,$,he,xe){for(var Te=0,Ne=yp(N,$g);Te<Ne.length;Te+=1){for(var nt=Ne[Te],gt=0,bt=0,Gt=nt;bt<Gt.length;bt+=1){var lr=Gt[bt];gt+=lr.length}for(var ir=this.segments.prepareSegment(gt,this.layoutVertexArray,this.indexArray),wr=ir.vertexLength,Hr=[],cn=[],an=0,Rn=nt;an<Rn.length;an+=1){var An=Rn[an];if(An.length!==0){An!==nt[0]&&cn.push(Hr.length/2);var Dn=this.segments2.prepareSegment(An.length,this.layoutVertexArray,this.indexArray2),Un=Dn.vertexLength;this.layoutVertexArray.emplaceBack(An[0].x,An[0].y),this.indexArray2.emplaceBack(Un+An.length-1,Un),Hr.push(An[0].x),Hr.push(An[0].y);for(var Kn=1;Kn<An.length;Kn++)this.layoutVertexArray.emplaceBack(An[Kn].x,An[Kn].y),this.indexArray2.emplaceBack(Un+Kn-1,Un+Kn),Hr.push(An[Kn].x),Hr.push(An[Kn].y);Dn.vertexLength+=An.length,Dn.primitiveLength+=An.length}}for(var ha=vp(Hr,cn),ua=0;ua<ha.length;ua+=3)this.indexArray.emplaceBack(wr+ha[ua],wr+ha[ua+1],wr+ha[ua+2]);ir.vertexLength+=gt,ir.primitiveLength+=ha.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,P,$,xe,he)},Be("FillBucket",nf,{omit:["layers","patternFeatures"]});var qg=new io({"fill-sort-key":new ei(Xt.layout_fill["fill-sort-key"])}),ey=new io({"fill-antialias":new Ua(Xt.paint_fill["fill-antialias"]),"fill-opacity":new ei(Xt.paint_fill["fill-opacity"]),"fill-color":new ei(Xt.paint_fill["fill-color"]),"fill-outline-color":new ei(Xt.paint_fill["fill-outline-color"]),"fill-translate":new Ua(Xt.paint_fill["fill-translate"]),"fill-translate-anchor":new Ua(Xt.paint_fill["fill-translate-anchor"]),"fill-pattern":new Do(Xt.paint_fill["fill-pattern"])}),ty={paint:ey,layout:qg},ry=function(L){function P(N){L.call(this,N,ty)}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype.recalculate=function($,he){L.prototype.recalculate.call(this,$,he);var xe=this.paint._values["fill-outline-color"];xe.value.kind==="constant"&&xe.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},P.prototype.createBucket=function($){return new nf($)},P.prototype.queryRadius=function(){return Ru(this.paint.get("fill-translate"))},P.prototype.queryIntersectsFeature=function($,he,xe,Te,Ne,nt,gt){var bt=mu($,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),nt.angle,gt);return Fo(bt,Te)},P.prototype.isTileClipped=function(){return!0},P}(Us),ny=jo([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),xd=ny.members,bd=Oc;function Oc(L,P,N,$,he){this.properties={},this.extent=N,this.type=0,this._pbf=L,this._geometry=-1,this._keys=$,this._values=he,L.readFields(ay,this,P)}function ay(L,P,N){L==1?P.id=N.readVarint():L==2?iy(N,P):L==3?P.type=N.readVarint():L==4&&(P._geometry=N.pos)}function iy(L,P){for(var N=L.readVarint()+L.pos;L.pos<N;){var $=P._keys[L.readVarint()],he=P._values[L.readVarint()];P.properties[$]=he}}Oc.types=["Unknown","Point","LineString","Polygon"],Oc.prototype.loadGeometry=function(){var L=this._pbf;L.pos=this._geometry;for(var P=L.readVarint()+L.pos,N=1,$=0,he=0,xe=0,Te=[],Ne;L.pos<P;){if($<=0){var nt=L.readVarint();N=nt&7,$=nt>>3}if($--,N===1||N===2)he+=L.readSVarint(),xe+=L.readSVarint(),N===1&&(Ne&&Te.push(Ne),Ne=[]),Ne.push(new h(he,xe));else if(N===7)Ne&&Ne.push(Ne[0].clone());else throw new Error("unknown command "+N)}return Ne&&Te.push(Ne),Te},Oc.prototype.bbox=function(){var L=this._pbf;L.pos=this._geometry;for(var P=L.readVarint()+L.pos,N=1,$=0,he=0,xe=0,Te=1/0,Ne=-1/0,nt=1/0,gt=-1/0;L.pos<P;){if($<=0){var bt=L.readVarint();N=bt&7,$=bt>>3}if($--,N===1||N===2)he+=L.readSVarint(),xe+=L.readSVarint(),he<Te&&(Te=he),he>Ne&&(Ne=he),xe<nt&&(nt=xe),xe>gt&&(gt=xe);else if(N!==7)throw new Error("unknown command "+N)}return[Te,nt,Ne,gt]},Oc.prototype.toGeoJSON=function(L,P,N){var $=this.extent*Math.pow(2,N),he=this.extent*L,xe=this.extent*P,Te=this.loadGeometry(),Ne=Oc.types[this.type],nt,gt;function bt(ir){for(var wr=0;wr<ir.length;wr++){var Hr=ir[wr],cn=180-(Hr.y+xe)*360/$;ir[wr]=[(Hr.x+he)*360/$-180,360/Math.PI*Math.atan(Math.exp(cn*Math.PI/180))-90]}}switch(this.type){case 1:var Gt=[];for(nt=0;nt<Te.length;nt++)Gt[nt]=Te[nt][0];Te=Gt,bt(Te);break;case 2:for(nt=0;nt<Te.length;nt++)bt(Te[nt]);break;case 3:for(Te=oy(Te),nt=0;nt<Te.length;nt++)for(gt=0;gt<Te[nt].length;gt++)bt(Te[nt][gt]);break}Te.length===1?Te=Te[0]:Ne="Multi"+Ne;var lr={type:"Feature",geometry:{type:Ne,coordinates:Te},properties:this.properties};return"id"in this&&(lr.id=this.id),lr};function oy(L){var P=L.length;if(P<=1)return[L];for(var N=[],$,he,xe=0;xe<P;xe++){var Te=sy(L[xe]);Te!==0&&(he===void 0&&(he=Te<0),he===Te<0?($&&N.push($),$=[L[xe]]):$.push(L[xe]))}return $&&N.push($),N}function sy(L){for(var P=0,N=0,$=L.length,he=$-1,xe,Te;N<$;he=N++)xe=L[N],Te=L[he],P+=(Te.x-xe.x)*(xe.y+Te.y);return P}var wd=_d;function _d(L,P){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=L,this._keys=[],this._values=[],this._features=[],L.readFields(ly,this,P),this.length=this._features.length}function ly(L,P,N){L===15?P.version=N.readVarint():L===1?P.name=N.readString():L===5?P.extent=N.readVarint():L===2?P._features.push(N.pos):L===3?P._keys.push(N.readString()):L===4&&P._values.push(uy(N))}function uy(L){for(var P=null,N=L.readVarint()+L.pos;L.pos<N;){var $=L.readVarint()>>3;P=$===1?L.readString():$===2?L.readFloat():$===3?L.readDouble():$===4?L.readVarint64():$===5?L.readVarint():$===6?L.readSVarint():$===7?L.readBoolean():null}return P}_d.prototype.feature=function(L){if(L<0||L>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[L];var P=this._pbf.readVarint()+this._pbf.pos;return new bd(this._pbf,P,this.extent,this._keys,this._values)};var fy=cy;function cy(L,P){this.layers=L.readFields(hy,{},P)}function hy(L,P,N){if(L===3){var $=new wd(N,N.readVarint()+N.pos);$.length&&(P[$.name]=$)}}var vy=fy,py=bd,dy=wd,Nc={VectorTile:vy,VectorTileFeature:py,VectorTileLayer:dy},gy=Nc.VectorTileFeature.types,yy=500,bp=Math.pow(2,13);function Ch(L,P,N,$,he,xe,Te,Ne){L.emplaceBack(P,N,Math.floor($*bp)*2+Te,he*bp*2,xe*bp*2,Math.round(Ne))}var af=function(P){this.zoom=P.zoom,this.overscaling=P.overscaling,this.layers=P.layers,this.layerIds=this.layers.map(function(N){return N.id}),this.index=P.index,this.hasPattern=!1,this.layoutVertexArray=new jf,this.indexArray=new tf,this.programConfigurations=new ci(xd,P.layers,P.zoom),this.segments=new W,this.stateDependentLayerIds=this.layers.filter(function(N){return N.isStateDependent()}).map(function(N){return N.id})};af.prototype.populate=function(P,N,$){this.features=[],this.hasPattern=mp("fill-extrusion",this.layers,N);for(var he=0,xe=P;he<xe.length;he+=1){var Te=xe[he],Ne=Te.feature,nt=Te.id,gt=Te.index,bt=Te.sourceLayerIndex,Gt=this.layers[0]._featureFilter.needGeometry,lr={type:Ne.type,id:nt,properties:Ne.properties,geometry:Gt?$i(Ne):[]};if(!!this.layers[0]._featureFilter.filter(new di(this.zoom),lr,$)){var ir={id:nt,sourceLayerIndex:bt,index:gt,geometry:Gt?lr.geometry:$i(Ne),properties:Ne.properties,type:Ne.type,patterns:{}};typeof Ne.id<"u"&&(ir.id=Ne.id),this.hasPattern?this.features.push(xp("fill-extrusion",this.layers,ir,this.zoom,N)):this.addFeature(ir,ir.geometry,gt,$,{}),N.featureIndex.insert(Ne,ir.geometry,gt,bt,this.index,!0)}}},af.prototype.addFeatures=function(P,N,$){for(var he=0,xe=this.features;he<xe.length;he+=1){var Te=xe[he],Ne=Te.geometry;this.addFeature(Te,Ne,Te.index,N,$)}},af.prototype.update=function(P,N,$){!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(P,N,this.stateDependentLayers,$)},af.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},af.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},af.prototype.upload=function(P){this.uploaded||(this.layoutVertexBuffer=P.createVertexBuffer(this.layoutVertexArray,xd),this.indexBuffer=P.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(P),this.uploaded=!0},af.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},af.prototype.addFeature=function(P,N,$,he,xe){for(var Te=0,Ne=yp(N,yy);Te<Ne.length;Te+=1){for(var nt=Ne[Te],gt=0,bt=0,Gt=nt;bt<Gt.length;bt+=1){var lr=Gt[bt];gt+=lr.length}for(var ir=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),wr=0,Hr=nt;wr<Hr.length;wr+=1){var cn=Hr[wr];if(cn.length!==0&&!xy(cn))for(var an=0,Rn=0;Rn<cn.length;Rn++){var An=cn[Rn];if(Rn>=1){var Dn=cn[Rn-1];if(!my(An,Dn)){ir.vertexLength+4>W.MAX_VERTEX_ARRAY_LENGTH&&(ir=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var Un=An.sub(Dn)._perp()._unit(),Kn=Dn.dist(An);an+Kn>32768&&(an=0),Ch(this.layoutVertexArray,An.x,An.y,Un.x,Un.y,0,0,an),Ch(this.layoutVertexArray,An.x,An.y,Un.x,Un.y,0,1,an),an+=Kn,Ch(this.layoutVertexArray,Dn.x,Dn.y,Un.x,Un.y,0,0,an),Ch(this.layoutVertexArray,Dn.x,Dn.y,Un.x,Un.y,0,1,an);var ha=ir.vertexLength;this.indexArray.emplaceBack(ha,ha+2,ha+1),this.indexArray.emplaceBack(ha+1,ha+2,ha+3),ir.vertexLength+=4,ir.primitiveLength+=2}}}}if(ir.vertexLength+gt>W.MAX_VERTEX_ARRAY_LENGTH&&(ir=this.segments.prepareSegment(gt,this.layoutVertexArray,this.indexArray)),gy[P.type]==="Polygon"){for(var ua=[],Ba=[],Ca=ir.vertexLength,Da=0,li=nt;Da<li.length;Da+=1){var za=li[Da];if(za.length!==0){za!==nt[0]&&Ba.push(ua.length/2);for(var Na=0;Na<za.length;Na++){var mi=za[Na];Ch(this.layoutVertexArray,mi.x,mi.y,0,0,1,1,0),ua.push(mi.x),ua.push(mi.y)}}}for(var oi=vp(ua,Ba),Ni=0;Ni<oi.length;Ni+=3)this.indexArray.emplaceBack(Ca+oi[Ni],Ca+oi[Ni+2],Ca+oi[Ni+1]);ir.primitiveLength+=oi.length/3,ir.vertexLength+=gt}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,P,$,xe,he)},Be("FillExtrusionBucket",af,{omit:["layers","features"]});function my(L,P){return L.x===P.x&&(L.x<0||L.x>Wa)||L.y===P.y&&(L.y<0||L.y>Wa)}function xy(L){return L.every(function(P){return P.x<0})||L.every(function(P){return P.x>Wa})||L.every(function(P){return P.y<0})||L.every(function(P){return P.y>Wa})}var by=new io({"fill-extrusion-opacity":new Ua(Xt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ei(Xt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Ua(Xt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Ua(Xt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Do(Xt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ei(Xt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ei(Xt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Ua(Xt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])}),wy={paint:by},_y=function(L){function P(N){L.call(this,N,wy)}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype.createBucket=function($){return new af($)},P.prototype.queryRadius=function(){return Ru(this.paint.get("fill-extrusion-translate"))},P.prototype.is3D=function(){return!0},P.prototype.queryIntersectsFeature=function($,he,xe,Te,Ne,nt,gt,bt){var Gt=mu($,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),nt.angle,gt),lr=this.paint.get("fill-extrusion-height").evaluate(he,xe),ir=this.paint.get("fill-extrusion-base").evaluate(he,xe),wr=My(Gt,bt,nt,0),Hr=Ay(Te,ir,lr,bt),cn=Hr[0],an=Hr[1];return Ty(cn,an,wr)},P}(Us);function kh(L,P){return L.x*P.x+L.y*P.y}function Td(L,P){if(L.length===1){for(var N=0,$=P[N++],he;!he||$.equals(he);)if(he=P[N++],!he)return 1/0;for(;N<P.length;N++){var xe=P[N],Te=L[0],Ne=he.sub($),nt=xe.sub($),gt=Te.sub($),bt=kh(Ne,Ne),Gt=kh(Ne,nt),lr=kh(nt,nt),ir=kh(gt,Ne),wr=kh(gt,nt),Hr=bt*lr-Gt*Gt,cn=(lr*ir-Gt*wr)/Hr,an=(bt*wr-Gt*ir)/Hr,Rn=1-cn-an,An=$.z*Rn+he.z*cn+xe.z*an;if(isFinite(An))return An}return 1/0}else{for(var Dn=1/0,Un=0,Kn=P;Un<Kn.length;Un+=1){var ha=Kn[Un];Dn=Math.min(Dn,ha.z)}return Dn}}function Ty(L,P,N){var $=1/0;Fo(N,P)&&($=Td(N,P[0]));for(var he=0;he<P.length;he++)for(var xe=P[he],Te=L[he],Ne=0;Ne<xe.length-1;Ne++){var nt=xe[Ne],gt=xe[Ne+1],bt=Te[Ne],Gt=Te[Ne+1],lr=[nt,gt,Gt,bt,nt];vi(N,lr)&&($=Math.min($,Td(N,lr)))}return $===1/0?!1:$}function Ay(L,P,N,$){for(var he=[],xe=[],Te=$[8]*P,Ne=$[9]*P,nt=$[10]*P,gt=$[11]*P,bt=$[8]*N,Gt=$[9]*N,lr=$[10]*N,ir=$[11]*N,wr=0,Hr=L;wr<Hr.length;wr+=1){for(var cn=Hr[wr],an=[],Rn=[],An=0,Dn=cn;An<Dn.length;An+=1){var Un=Dn[An],Kn=Un.x,ha=Un.y,ua=$[0]*Kn+$[4]*ha+$[12],Ba=$[1]*Kn+$[5]*ha+$[13],Ca=$[2]*Kn+$[6]*ha+$[14],Da=$[3]*Kn+$[7]*ha+$[15],li=ua+Te,za=Ba+Ne,Na=Ca+nt,mi=Da+gt,oi=ua+bt,Ni=Ba+Gt,ao=Ca+lr,Bi=Da+ir,Ui=new h(li/mi,za/mi);Ui.z=Na/mi,an.push(Ui);var Ii=new h(oi/Bi,Ni/Bi);Ii.z=ao/Bi,Rn.push(Ii)}he.push(an),xe.push(Rn)}return[he,xe]}function My(L,P,N,$){for(var he=[],xe=0,Te=L;xe<Te.length;xe+=1){var Ne=Te[xe],nt=[Ne.x,Ne.y,$,1];vv(nt,nt,P),he.push(new h(nt[0]/nt[3],nt[1]/nt[3]))}return he}var Sy=jo([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),Ad=Sy.members,Ey=Nc.VectorTileFeature.types,Md=63,Cy=Math.cos(75/2*(Math.PI/180)),ky=15,Ly=20,Py=15,Sd=1/2,Ed=Math.pow(2,Py-1)/Sd,Sl=function(P){this.zoom=P.zoom,this.overscaling=P.overscaling,this.layers=P.layers,this.layerIds=this.layers.map(function(N){return N.id}),this.index=P.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Ec,this.indexArray=new tf,this.programConfigurations=new ci(Ad,P.layers,P.zoom),this.segments=new W,this.stateDependentLayerIds=this.layers.filter(function(N){return N.isStateDependent()}).map(function(N){return N.id})};Sl.prototype.populate=function(P,N,$){this.hasPattern=mp("line",this.layers,N);for(var he=this.layers[0].layout.get("line-sort-key"),xe=[],Te=0,Ne=P;Te<Ne.length;Te+=1){var nt=Ne[Te],gt=nt.feature,bt=nt.id,Gt=nt.index,lr=nt.sourceLayerIndex,ir=this.layers[0]._featureFilter.needGeometry,wr={type:gt.type,id:bt,properties:gt.properties,geometry:ir?$i(gt):[]};if(!!this.layers[0]._featureFilter.filter(new di(this.zoom),wr,$)){ir||(wr.geometry=$i(gt));var Hr=he?he.evaluate(wr,{},$):void 0,cn={id:bt,properties:gt.properties,type:gt.type,sourceLayerIndex:lr,index:Gt,geometry:wr.geometry,patterns:{},sortKey:Hr};xe.push(cn)}}he&&xe.sort(function(Ca,Da){return Ca.sortKey-Da.sortKey});for(var an=0,Rn=xe;an<Rn.length;an+=1){var An=Rn[an],Dn=An,Un=Dn.geometry,Kn=Dn.index,ha=Dn.sourceLayerIndex;if(this.hasPattern){var ua=xp("line",this.layers,An,this.zoom,N);this.patternFeatures.push(ua)}else this.addFeature(An,Un,Kn,$,{});var Ba=P[Kn].feature;N.featureIndex.insert(Ba,Un,Kn,ha,this.index)}},Sl.prototype.update=function(P,N,$){!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(P,N,this.stateDependentLayers,$)},Sl.prototype.addFeatures=function(P,N,$){for(var he=0,xe=this.patternFeatures;he<xe.length;he+=1){var Te=xe[he];this.addFeature(Te,Te.geometry,Te.index,N,$)}},Sl.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Sl.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Sl.prototype.upload=function(P){this.uploaded||(this.layoutVertexBuffer=P.createVertexBuffer(this.layoutVertexArray,Ad),this.indexBuffer=P.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(P),this.uploaded=!0},Sl.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Sl.prototype.addFeature=function(P,N,$,he,xe){for(var Te=this.layers[0].layout,Ne=Te.get("line-join").evaluate(P,{}),nt=Te.get("line-cap"),gt=Te.get("line-miter-limit"),bt=Te.get("line-round-limit"),Gt=0,lr=N;Gt<lr.length;Gt+=1){var ir=lr[Gt];this.addLine(ir,P,Ne,nt,gt,bt)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,P,$,xe,he)},Sl.prototype.addLine=function(P,N,$,he,xe,Te){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,!!N.properties&&N.properties.hasOwnProperty("mapbox_clip_start")&&N.properties.hasOwnProperty("mapbox_clip_end")){this.clipStart=+N.properties.mapbox_clip_start,this.clipEnd=+N.properties.mapbox_clip_end;for(var Ne=0;Ne<P.length-1;Ne++)this.totalDistance+=P[Ne].dist(P[Ne+1]);this.updateScaledDistance()}for(var nt=Ey[N.type]==="Polygon",gt=P.length;gt>=2&&P[gt-1].equals(P[gt-2]);)gt--;for(var bt=0;bt<gt-1&&P[bt].equals(P[bt+1]);)bt++;if(!(gt<(nt?3:2))){$==="bevel"&&(xe=1.05);var Gt=this.overscaling<=16?ky*Wa/(512*this.overscaling):0,lr=this.segments.prepareSegment(gt*10,this.layoutVertexArray,this.indexArray),ir,wr=void 0,Hr=void 0,cn=void 0,an=void 0;this.e1=this.e2=-1,nt&&(ir=P[gt-2],an=P[bt].sub(ir)._unit()._perp());for(var Rn=bt;Rn<gt;Rn++)if(Hr=Rn===gt-1?nt?P[bt+1]:void 0:P[Rn+1],!(Hr&&P[Rn].equals(Hr))){an&&(cn=an),ir&&(wr=ir),ir=P[Rn],an=Hr?Hr.sub(ir)._unit()._perp():cn,cn=cn||an;var An=cn.add(an);(An.x!==0||An.y!==0)&&An._unit();var Dn=cn.x*an.x+cn.y*an.y,Un=An.x*an.x+An.y*an.y,Kn=Un!==0?1/Un:1/0,ha=2*Math.sqrt(2-2*Un),ua=Un<Cy&&wr&&Hr,Ba=cn.x*an.y-cn.y*an.x>0;if(ua&&Rn>bt){var Ca=ir.dist(wr);if(Ca>2*Gt){var Da=ir.sub(ir.sub(wr)._mult(Gt/Ca)._round());this.updateDistance(wr,Da),this.addCurrentVertex(Da,cn,0,0,lr),wr=Da}}var li=wr&&Hr,za=li?$:nt?"butt":he;if(li&&za==="round"&&(Kn<Te?za="miter":Kn<=2&&(za="fakeround")),za==="miter"&&Kn>xe&&(za="bevel"),za==="bevel"&&(Kn>2&&(za="flipbevel"),Kn<xe&&(za="miter")),wr&&this.updateDistance(wr,ir),za==="miter")An._mult(Kn),this.addCurrentVertex(ir,An,0,0,lr);else if(za==="flipbevel"){if(Kn>100)An=an.mult(-1);else{var Na=Kn*cn.add(an).mag()/cn.sub(an).mag();An._perp()._mult(Na*(Ba?-1:1))}this.addCurrentVertex(ir,An,0,0,lr),this.addCurrentVertex(ir,An.mult(-1),0,0,lr)}else if(za==="bevel"||za==="fakeround"){var mi=-Math.sqrt(Kn*Kn-1),oi=Ba?mi:0,Ni=Ba?0:mi;if(wr&&this.addCurrentVertex(ir,cn,oi,Ni,lr),za==="fakeround")for(var ao=Math.round(ha*180/Math.PI/Ly),Bi=1;Bi<ao;Bi++){var Ui=Bi/ao;if(Ui!==.5){var Ii=Ui-.5,co=1.0904+Dn*(-3.2452+Dn*(3.55645-Dn*1.43519)),go=.848013+Dn*(-1.06021+Dn*.215638);Ui=Ui+Ui*Ii*(Ui-1)*(co*Ii*Ii+go)}var zo=an.sub(cn)._mult(Ui)._add(cn)._unit()._mult(Ba?-1:1);this.addHalfVertex(ir,zo.x,zo.y,!1,Ba,0,lr)}Hr&&this.addCurrentVertex(ir,an,-oi,-Ni,lr)}else if(za==="butt")this.addCurrentVertex(ir,An,0,0,lr);else if(za==="square"){var Go=wr?1:-1;this.addCurrentVertex(ir,An,Go,Go,lr)}else za==="round"&&(wr&&(this.addCurrentVertex(ir,cn,0,0,lr),this.addCurrentVertex(ir,cn,1,1,lr,!0)),Hr&&(this.addCurrentVertex(ir,an,-1,-1,lr,!0),this.addCurrentVertex(ir,an,0,0,lr)));if(ua&&Rn<gt-1){var ms=ir.dist(Hr);if(ms>2*Gt){var as=ir.add(Hr.sub(ir)._mult(Gt/ms)._round());this.updateDistance(ir,as),this.addCurrentVertex(as,an,0,0,lr),ir=as}}}}},Sl.prototype.addCurrentVertex=function(P,N,$,he,xe,Te){Te===void 0&&(Te=!1);var Ne=N.x+N.y*$,nt=N.y-N.x*$,gt=-N.x+N.y*he,bt=-N.y-N.x*he;this.addHalfVertex(P,Ne,nt,Te,!1,$,xe),this.addHalfVertex(P,gt,bt,Te,!0,-he,xe),this.distance>Ed/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(P,N,$,he,xe,Te))},Sl.prototype.addHalfVertex=function(P,N,$,he,xe,Te,Ne){var nt=P.x,gt=P.y,bt=this.scaledDistance*Sd;this.layoutVertexArray.emplaceBack((nt<<1)+(he?1:0),(gt<<1)+(xe?1:0),Math.round(Md*N)+128,Math.round(Md*$)+128,(Te===0?0:Te<0?-1:1)+1|(bt&63)<<2,bt>>6);var Gt=Ne.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Gt),Ne.primitiveLength++),xe?this.e2=Gt:this.e1=Gt},Sl.prototype.updateScaledDistance=function(){this.scaledDistance=this.totalDistance>0?(this.clipStart+(this.clipEnd-this.clipStart)*this.distance/this.totalDistance)*(Ed-1):this.distance},Sl.prototype.updateDistance=function(P,N){this.distance+=P.dist(N),this.updateScaledDistance()},Be("LineBucket",Sl,{omit:["layers","patternFeatures"]});var Dy=new io({"line-cap":new Ua(Xt.layout_line["line-cap"]),"line-join":new ei(Xt.layout_line["line-join"]),"line-miter-limit":new Ua(Xt.layout_line["line-miter-limit"]),"line-round-limit":new Ua(Xt.layout_line["line-round-limit"]),"line-sort-key":new ei(Xt.layout_line["line-sort-key"])}),Ry=new io({"line-opacity":new ei(Xt.paint_line["line-opacity"]),"line-color":new ei(Xt.paint_line["line-color"]),"line-translate":new Ua(Xt.paint_line["line-translate"]),"line-translate-anchor":new Ua(Xt.paint_line["line-translate-anchor"]),"line-width":new ei(Xt.paint_line["line-width"]),"line-gap-width":new ei(Xt.paint_line["line-gap-width"]),"line-offset":new ei(Xt.paint_line["line-offset"]),"line-blur":new ei(Xt.paint_line["line-blur"]),"line-dasharray":new vo(Xt.paint_line["line-dasharray"]),"line-pattern":new Do(Xt.paint_line["line-pattern"]),"line-gradient":new Wo(Xt.paint_line["line-gradient"])}),Cd={paint:Ry,layout:Dy},Iy=function(L){function P(){L.apply(this,arguments)}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype.possiblyEvaluate=function($,he){return he=new di(Math.floor(he.zoom),{now:he.now,fadeDuration:he.fadeDuration,zoomHistory:he.zoomHistory,transition:he.transition}),L.prototype.possiblyEvaluate.call(this,$,he)},P.prototype.evaluate=function($,he,xe,Te){return he=A({},he,{zoom:Math.floor(he.zoom)}),L.prototype.evaluate.call(this,$,he,xe,Te)},P}(ei),kd=new Iy(Cd.paint.properties["line-width"].specification);kd.useIntegerZoom=!0;var Fy=function(L){function P(N){L.call(this,N,Cd)}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype._handleSpecialPaintPropertyUpdate=function($){$==="line-gradient"&&this._updateGradient()},P.prototype._updateGradient=function(){var $=this._transitionablePaint._values["line-gradient"].value.expression;this.gradient=hd($,"lineProgress"),this.gradientTexture=null},P.prototype.recalculate=function($,he){L.prototype.recalculate.call(this,$,he),this.paint._values["line-floorwidth"]=kd.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,$)},P.prototype.createBucket=function($){return new Sl($)},P.prototype.queryRadius=function($){var he=$,xe=Ld(zl("line-width",this,he),zl("line-gap-width",this,he)),Te=zl("line-offset",this,he);return xe/2+Math.abs(Te)+Ru(this.paint.get("line-translate"))},P.prototype.queryIntersectsFeature=function($,he,xe,Te,Ne,nt,gt){var bt=mu($,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),nt.angle,gt),Gt=gt/2*Ld(this.paint.get("line-width").evaluate(he,xe),this.paint.get("line-gap-width").evaluate(he,xe)),lr=this.paint.get("line-offset").evaluate(he,xe);return lr&&(Te=zy(Te,lr*gt)),es(bt,Te,Gt)},P.prototype.isTileClipped=function(){return!0},P}(Us);function Ld(L,P){return P>0?P+2*L:L}function zy(L,P){for(var N=[],$=new h(0,0),he=0;he<L.length;he++){for(var xe=L[he],Te=[],Ne=0;Ne<xe.length;Ne++){var nt=xe[Ne-1],gt=xe[Ne],bt=xe[Ne+1],Gt=Ne===0?$:gt.sub(nt)._unit()._perp(),lr=Ne===xe.length-1?$:bt.sub(gt)._unit()._perp(),ir=Gt._add(lr)._unit(),wr=ir.x*lr.x+ir.y*lr.y;ir._mult(1/wr),Te.push(ir._mult(P)._add(gt))}N.push(Te)}return N}var wp=jo([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Oy=jo([{name:"a_projected_pos",components:3,type:"Float32"}],4);jo([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);var Ny=jo([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);jo([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);var Pd=jo([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),By=jo([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);jo([{name:"triangle",components:3,type:"Uint16"}]),jo([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),jo([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),jo([{type:"Float32",name:"offsetX"}]),jo([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);function Uy(L,P,N){var $=P.layout.get("text-transform").evaluate(N,{});return $==="uppercase"?L=L.toLocaleUpperCase():$==="lowercase"&&(L=L.toLocaleLowerCase()),qa.applyArabicShaping&&(L=qa.applyArabicShaping(L)),L}function Vy(L,P,N){return L.sections.forEach(function($){$.text=Uy($.text,P,N)}),L}function Hy(L){var P={},N={},$=[],he=0;function xe(an){$.push(L[an]),he++}function Te(an,Rn,An){var Dn=N[an];return delete N[an],N[Rn]=Dn,$[Dn].geometry[0].pop(),$[Dn].geometry[0]=$[Dn].geometry[0].concat(An[0]),Dn}function Ne(an,Rn,An){var Dn=P[Rn];return delete P[Rn],P[an]=Dn,$[Dn].geometry[0].shift(),$[Dn].geometry[0]=An[0].concat($[Dn].geometry[0]),Dn}function nt(an,Rn,An){var Dn=An?Rn[0][Rn[0].length-1]:Rn[0][0];return an+":"+Dn.x+":"+Dn.y}for(var gt=0;gt<L.length;gt++){var bt=L[gt],Gt=bt.geometry,lr=bt.text?bt.text.toString():null;if(!lr){xe(gt);continue}var ir=nt(lr,Gt),wr=nt(lr,Gt,!0);if(ir in N&&wr in P&&N[ir]!==P[wr]){var Hr=Ne(ir,wr,Gt),cn=Te(ir,wr,$[Hr].geometry);delete P[ir],delete N[wr],N[nt(lr,$[cn].geometry,!0)]=cn,$[Hr].geometry=null}else ir in N?Te(ir,wr,Gt):wr in P?Ne(ir,wr,Gt):(xe(gt),P[ir]=he-1,N[wr]=he-1)}return $.filter(function(an){return an.geometry})}var Lh={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};function Gy(L){for(var P="",N=0;N<L.length;N++){var $=L.charCodeAt(N+1)||null,he=L.charCodeAt(N-1)||null,xe=(!$||!fn($)||Lh[L[N+1]])&&(!he||!fn(he)||Lh[L[N-1]]);xe&&Lh[L[N]]?P+=Lh[L[N]]:P+=L[N]}return P}var Rs=24,Yy=function(L,P,N,$,he){var xe,Te,Ne=he*8-$-1,nt=(1<<Ne)-1,gt=nt>>1,bt=-7,Gt=N?he-1:0,lr=N?-1:1,ir=L[P+Gt];for(Gt+=lr,xe=ir&(1<<-bt)-1,ir>>=-bt,bt+=Ne;bt>0;xe=xe*256+L[P+Gt],Gt+=lr,bt-=8);for(Te=xe&(1<<-bt)-1,xe>>=-bt,bt+=$;bt>0;Te=Te*256+L[P+Gt],Gt+=lr,bt-=8);if(xe===0)xe=1-gt;else{if(xe===nt)return Te?NaN:(ir?-1:1)*(1/0);Te=Te+Math.pow(2,$),xe=xe-gt}return(ir?-1:1)*Te*Math.pow(2,xe-$)},Wy=function(L,P,N,$,he,xe){var Te,Ne,nt,gt=xe*8-he-1,bt=(1<<gt)-1,Gt=bt>>1,lr=he===23?Math.pow(2,-24)-Math.pow(2,-77):0,ir=$?0:xe-1,wr=$?1:-1,Hr=P<0||P===0&&1/P<0?1:0;for(P=Math.abs(P),isNaN(P)||P===1/0?(Ne=isNaN(P)?1:0,Te=bt):(Te=Math.floor(Math.log(P)/Math.LN2),P*(nt=Math.pow(2,-Te))<1&&(Te--,nt*=2),Te+Gt>=1?P+=lr/nt:P+=lr*Math.pow(2,1-Gt),P*nt>=2&&(Te++,nt/=2),Te+Gt>=bt?(Ne=0,Te=bt):Te+Gt>=1?(Ne=(P*nt-1)*Math.pow(2,he),Te=Te+Gt):(Ne=P*Math.pow(2,Gt-1)*Math.pow(2,he),Te=0));he>=8;L[N+ir]=Ne&255,ir+=wr,Ne/=256,he-=8);for(Te=Te<<he|Ne,gt+=he;gt>0;L[N+ir]=Te&255,ir+=wr,Te/=256,gt-=8);L[N+ir-wr]|=Hr*128},mv={read:Yy,write:Wy},xv=po;function po(L){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(L)?L:new Uint8Array(L||0),this.pos=0,this.type=0,this.length=this.buf.length}po.Varint=0,po.Fixed64=1,po.Bytes=2,po.Fixed32=5;var _p=(1<<16)*(1<<16),Dd=1/_p,jy=12,Rd=typeof TextDecoder>"u"?null:new TextDecoder("utf8");po.prototype={destroy:function(){this.buf=null},readFields:function(L,P,N){for(N=N||this.length;this.pos<N;){var $=this.readVarint(),he=$>>3,xe=this.pos;this.type=$&7,L(he,P,this),this.pos===xe&&this.skip($)}return P},readMessage:function(L,P){return this.readFields(L,P,this.readVarint()+this.pos)},readFixed32:function(){var L=bv(this.buf,this.pos);return this.pos+=4,L},readSFixed32:function(){var L=Fd(this.buf,this.pos);return this.pos+=4,L},readFixed64:function(){var L=bv(this.buf,this.pos)+bv(this.buf,this.pos+4)*_p;return this.pos+=8,L},readSFixed64:function(){var L=bv(this.buf,this.pos)+Fd(this.buf,this.pos+4)*_p;return this.pos+=8,L},readFloat:function(){var L=mv.read(this.buf,this.pos,!0,23,4);return this.pos+=4,L},readDouble:function(){var L=mv.read(this.buf,this.pos,!0,52,8);return this.pos+=8,L},readVarint:function(L){var P=this.buf,N,$;return $=P[this.pos++],N=$&127,$<128||($=P[this.pos++],N|=($&127)<<7,$<128)||($=P[this.pos++],N|=($&127)<<14,$<128)||($=P[this.pos++],N|=($&127)<<21,$<128)?N:($=P[this.pos],N|=($&15)<<28,Xy(N,L,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var L=this.readVarint();return L%2===1?(L+1)/-2:L/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var L=this.readVarint()+this.pos,P=this.pos;return this.pos=L,L-P>=jy&&Rd?sm(this.buf,P,L):om(this.buf,P,L)},readBytes:function(){var L=this.readVarint()+this.pos,P=this.buf.subarray(this.pos,L);return this.pos=L,P},readPackedVarint:function(L,P){if(this.type!==po.Bytes)return L.push(this.readVarint(P));var N=If(this);for(L=L||[];this.pos<N;)L.push(this.readVarint(P));return L},readPackedSVarint:function(L){if(this.type!==po.Bytes)return L.push(this.readSVarint());var P=If(this);for(L=L||[];this.pos<P;)L.push(this.readSVarint());return L},readPackedBoolean:function(L){if(this.type!==po.Bytes)return L.push(this.readBoolean());var P=If(this);for(L=L||[];this.pos<P;)L.push(this.readBoolean());return L},readPackedFloat:function(L){if(this.type!==po.Bytes)return L.push(this.readFloat());var P=If(this);for(L=L||[];this.pos<P;)L.push(this.readFloat());return L},readPackedDouble:function(L){if(this.type!==po.Bytes)return L.push(this.readDouble());var P=If(this);for(L=L||[];this.pos<P;)L.push(this.readDouble());return L},readPackedFixed32:function(L){if(this.type!==po.Bytes)return L.push(this.readFixed32());var P=If(this);for(L=L||[];this.pos<P;)L.push(this.readFixed32());return L},readPackedSFixed32:function(L){if(this.type!==po.Bytes)return L.push(this.readSFixed32());var P=If(this);for(L=L||[];this.pos<P;)L.push(this.readSFixed32());return L},readPackedFixed64:function(L){if(this.type!==po.Bytes)return L.push(this.readFixed64());var P=If(this);for(L=L||[];this.pos<P;)L.push(this.readFixed64());return L},readPackedSFixed64:function(L){if(this.type!==po.Bytes)return L.push(this.readSFixed64());var P=If(this);for(L=L||[];this.pos<P;)L.push(this.readSFixed64());return L},skip:function(L){var P=L&7;if(P===po.Varint)for(;this.buf[this.pos++]>127;);else if(P===po.Bytes)this.pos=this.readVarint()+this.pos;else if(P===po.Fixed32)this.pos+=4;else if(P===po.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+P)},writeTag:function(L,P){this.writeVarint(L<<3|P)},realloc:function(L){for(var P=this.length||16;P<this.pos+L;)P*=2;if(P!==this.length){var N=new Uint8Array(P);N.set(this.buf),this.buf=N,this.length=P}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(L){this.realloc(4),Uc(this.buf,L,this.pos),this.pos+=4},writeSFixed32:function(L){this.realloc(4),Uc(this.buf,L,this.pos),this.pos+=4},writeFixed64:function(L){this.realloc(8),Uc(this.buf,L&-1,this.pos),Uc(this.buf,Math.floor(L*Dd),this.pos+4),this.pos+=8},writeSFixed64:function(L){this.realloc(8),Uc(this.buf,L&-1,this.pos),Uc(this.buf,Math.floor(L*Dd),this.pos+4),this.pos+=8},writeVarint:function(L){if(L=+L||0,L>268435455||L<0){Zy(L,this);return}this.realloc(4),this.buf[this.pos++]=L&127|(L>127?128:0),!(L<=127)&&(this.buf[this.pos++]=(L>>>=7)&127|(L>127?128:0),!(L<=127)&&(this.buf[this.pos++]=(L>>>=7)&127|(L>127?128:0),!(L<=127)&&(this.buf[this.pos++]=L>>>7&127)))},writeSVarint:function(L){this.writeVarint(L<0?-L*2-1:L*2)},writeBoolean:function(L){this.writeVarint(Boolean(L))},writeString:function(L){L=String(L),this.realloc(L.length*4),this.pos++;var P=this.pos;this.pos=lm(this.buf,L,this.pos);var N=this.pos-P;N>=128&&Id(P,N,this),this.pos=P-1,this.writeVarint(N),this.pos+=N},writeFloat:function(L){this.realloc(4),mv.write(this.buf,L,this.pos,!0,23,4),this.pos+=4},writeDouble:function(L){this.realloc(8),mv.write(this.buf,L,this.pos,!0,52,8),this.pos+=8},writeBytes:function(L){var P=L.length;this.writeVarint(P),this.realloc(P);for(var N=0;N<P;N++)this.buf[this.pos++]=L[N]},writeRawMessage:function(L,P){this.pos++;var N=this.pos;L(P,this);var $=this.pos-N;$>=128&&Id(N,$,this),this.pos=N-1,this.writeVarint($),this.pos+=$},writeMessage:function(L,P,N){this.writeTag(L,po.Bytes),this.writeRawMessage(P,N)},writePackedVarint:function(L,P){P.length&&this.writeMessage(L,Qy,P)},writePackedSVarint:function(L,P){P.length&&this.writeMessage(L,$y,P)},writePackedBoolean:function(L,P){P.length&&this.writeMessage(L,tm,P)},writePackedFloat:function(L,P){P.length&&this.writeMessage(L,qy,P)},writePackedDouble:function(L,P){P.length&&this.writeMessage(L,em,P)},writePackedFixed32:function(L,P){P.length&&this.writeMessage(L,rm,P)},writePackedSFixed32:function(L,P){P.length&&this.writeMessage(L,nm,P)},writePackedFixed64:function(L,P){P.length&&this.writeMessage(L,am,P)},writePackedSFixed64:function(L,P){P.length&&this.writeMessage(L,im,P)},writeBytesField:function(L,P){this.writeTag(L,po.Bytes),this.writeBytes(P)},writeFixed32Field:function(L,P){this.writeTag(L,po.Fixed32),this.writeFixed32(P)},writeSFixed32Field:function(L,P){this.writeTag(L,po.Fixed32),this.writeSFixed32(P)},writeFixed64Field:function(L,P){this.writeTag(L,po.Fixed64),this.writeFixed64(P)},writeSFixed64Field:function(L,P){this.writeTag(L,po.Fixed64),this.writeSFixed64(P)},writeVarintField:function(L,P){this.writeTag(L,po.Varint),this.writeVarint(P)},writeSVarintField:function(L,P){this.writeTag(L,po.Varint),this.writeSVarint(P)},writeStringField:function(L,P){this.writeTag(L,po.Bytes),this.writeString(P)},writeFloatField:function(L,P){this.writeTag(L,po.Fixed32),this.writeFloat(P)},writeDoubleField:function(L,P){this.writeTag(L,po.Fixed64),this.writeDouble(P)},writeBooleanField:function(L,P){this.writeVarintField(L,Boolean(P))}};function Xy(L,P,N){var $=N.buf,he,xe;if(xe=$[N.pos++],he=(xe&112)>>4,xe<128||(xe=$[N.pos++],he|=(xe&127)<<3,xe<128)||(xe=$[N.pos++],he|=(xe&127)<<10,xe<128)||(xe=$[N.pos++],he|=(xe&127)<<17,xe<128)||(xe=$[N.pos++],he|=(xe&127)<<24,xe<128)||(xe=$[N.pos++],he|=(xe&1)<<31,xe<128))return Bc(L,he,P);throw new Error("Expected varint not more than 10 bytes")}function If(L){return L.type===po.Bytes?L.readVarint()+L.pos:L.pos+1}function Bc(L,P,N){return N?P*4294967296+(L>>>0):(P>>>0)*4294967296+(L>>>0)}function Zy(L,P){var N,$;if(L>=0?(N=L%4294967296|0,$=L/4294967296|0):(N=~(-L%4294967296),$=~(-L/4294967296),N^4294967295?N=N+1|0:(N=0,$=$+1|0)),L>=18446744073709552e3||L<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");P.realloc(10),Ky(N,$,P),Jy($,P)}function Ky(L,P,N){N.buf[N.pos++]=L&127|128,L>>>=7,N.buf[N.pos++]=L&127|128,L>>>=7,N.buf[N.pos++]=L&127|128,L>>>=7,N.buf[N.pos++]=L&127|128,L>>>=7,N.buf[N.pos]=L&127}function Jy(L,P){var N=(L&7)<<4;P.buf[P.pos++]|=N|((L>>>=3)?128:0),L&&(P.buf[P.pos++]=L&127|((L>>>=7)?128:0),L&&(P.buf[P.pos++]=L&127|((L>>>=7)?128:0),L&&(P.buf[P.pos++]=L&127|((L>>>=7)?128:0),L&&(P.buf[P.pos++]=L&127|((L>>>=7)?128:0),L&&(P.buf[P.pos++]=L&127)))))}function Id(L,P,N){var $=P<=16383?1:P<=2097151?2:P<=268435455?3:Math.floor(Math.log(P)/(Math.LN2*7));N.realloc($);for(var he=N.pos-1;he>=L;he--)N.buf[he+$]=N.buf[he]}function Qy(L,P){for(var N=0;N<L.length;N++)P.writeVarint(L[N])}function $y(L,P){for(var N=0;N<L.length;N++)P.writeSVarint(L[N])}function qy(L,P){for(var N=0;N<L.length;N++)P.writeFloat(L[N])}function em(L,P){for(var N=0;N<L.length;N++)P.writeDouble(L[N])}function tm(L,P){for(var N=0;N<L.length;N++)P.writeBoolean(L[N])}function rm(L,P){for(var N=0;N<L.length;N++)P.writeFixed32(L[N])}function nm(L,P){for(var N=0;N<L.length;N++)P.writeSFixed32(L[N])}function am(L,P){for(var N=0;N<L.length;N++)P.writeFixed64(L[N])}function im(L,P){for(var N=0;N<L.length;N++)P.writeSFixed64(L[N])}function bv(L,P){return(L[P]|L[P+1]<<8|L[P+2]<<16)+L[P+3]*16777216}function Uc(L,P,N){L[N]=P,L[N+1]=P>>>8,L[N+2]=P>>>16,L[N+3]=P>>>24}function Fd(L,P){return(L[P]|L[P+1]<<8|L[P+2]<<16)+(L[P+3]<<24)}function om(L,P,N){for(var $="",he=P;he<N;){var xe=L[he],Te=null,Ne=xe>239?4:xe>223?3:xe>191?2:1;if(he+Ne>N)break;var nt,gt,bt;Ne===1?xe<128&&(Te=xe):Ne===2?(nt=L[he+1],(nt&192)===128&&(Te=(xe&31)<<6|nt&63,Te<=127&&(Te=null))):Ne===3?(nt=L[he+1],gt=L[he+2],(nt&192)===128&&(gt&192)===128&&(Te=(xe&15)<<12|(nt&63)<<6|gt&63,(Te<=2047||Te>=55296&&Te<=57343)&&(Te=null))):Ne===4&&(nt=L[he+1],gt=L[he+2],bt=L[he+3],(nt&192)===128&&(gt&192)===128&&(bt&192)===128&&(Te=(xe&15)<<18|(nt&63)<<12|(gt&63)<<6|bt&63,(Te<=65535||Te>=1114112)&&(Te=null))),Te===null?(Te=65533,Ne=1):Te>65535&&(Te-=65536,$+=String.fromCharCode(Te>>>10&1023|55296),Te=56320|Te&1023),$+=String.fromCharCode(Te),he+=Ne}return $}function sm(L,P,N){return Rd.decode(L.subarray(P,N))}function lm(L,P,N){for(var $=0,he,xe;$<P.length;$++){if(he=P.charCodeAt($),he>55295&&he<57344)if(xe)if(he<56320){L[N++]=239,L[N++]=191,L[N++]=189,xe=he;continue}else he=xe-55296<<10|he-56320|65536,xe=null;else{he>56319||$+1===P.length?(L[N++]=239,L[N++]=191,L[N++]=189):xe=he;continue}else xe&&(L[N++]=239,L[N++]=191,L[N++]=189,xe=null);he<128?L[N++]=he:(he<2048?L[N++]=he>>6|192:(he<65536?L[N++]=he>>12|224:(L[N++]=he>>18|240,L[N++]=he>>12&63|128),L[N++]=he>>6&63|128),L[N++]=he&63|128)}return N}var Tp=3;function um(L,P,N){L===1&&N.readMessage(fm,P)}function fm(L,P,N){if(L===3){var $=N.readMessage(cm,{}),he=$.id,xe=$.bitmap,Te=$.width,Ne=$.height,nt=$.left,gt=$.top,bt=$.advance;P.push({id:he,bitmap:new yc({width:Te+2*Tp,height:Ne+2*Tp},xe),metrics:{width:Te,height:Ne,left:nt,top:gt,advance:bt}})}}function cm(L,P,N){L===1?P.id=N.readVarint():L===2?P.bitmap=N.readBytes():L===3?P.width=N.readVarint():L===4?P.height=N.readVarint():L===5?P.left=N.readSVarint():L===6?P.top=N.readSVarint():L===7&&(P.advance=N.readVarint())}function hm(L){return new xv(L).readFields(um,[])}var zd=Tp;function Od(L){for(var P=0,N=0,$=0,he=L;$<he.length;$+=1){var xe=he[$];P+=xe.w*xe.h,N=Math.max(N,xe.w)}L.sort(function(cn,an){return an.h-cn.h});for(var Te=Math.max(Math.ceil(Math.sqrt(P/.95)),N),Ne=[{x:0,y:0,w:Te,h:1/0}],nt=0,gt=0,bt=0,Gt=L;bt<Gt.length;bt+=1)for(var lr=Gt[bt],ir=Ne.length-1;ir>=0;ir--){var wr=Ne[ir];if(!(lr.w>wr.w||lr.h>wr.h)){if(lr.x=wr.x,lr.y=wr.y,gt=Math.max(gt,lr.y+lr.h),nt=Math.max(nt,lr.x+lr.w),lr.w===wr.w&&lr.h===wr.h){var Hr=Ne.pop();ir<Ne.length&&(Ne[ir]=Hr)}else lr.h===wr.h?(wr.x+=lr.w,wr.w-=lr.w):lr.w===wr.w?(wr.y+=lr.h,wr.h-=lr.h):(Ne.push({x:wr.x+lr.w,y:wr.y,w:wr.w-lr.w,h:lr.h}),wr.y+=lr.h,wr.h-=lr.h);break}}return{w:nt,h:gt,fill:P/(nt*gt)||0}}var Ol=1,wv=function(P,N){var $=N.pixelRatio,he=N.version,xe=N.stretchX,Te=N.stretchY,Ne=N.content;this.paddedRect=P,this.pixelRatio=$,this.stretchX=xe,this.stretchY=Te,this.content=Ne,this.version=he},Ph={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};Ph.tl.get=function(){return[this.paddedRect.x+Ol,this.paddedRect.y+Ol]},Ph.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-Ol,this.paddedRect.y+this.paddedRect.h-Ol]},Ph.tlbr.get=function(){return this.tl.concat(this.br)},Ph.displaySize.get=function(){return[(this.paddedRect.w-Ol*2)/this.pixelRatio,(this.paddedRect.h-Ol*2)/this.pixelRatio]},Object.defineProperties(wv.prototype,Ph);var Dh=function(P,N){var $={},he={};this.haveRenderCallbacks=[];var xe=[];this.addImages(P,$,xe),this.addImages(N,he,xe);var Te=Od(xe),Ne=Te.w,nt=Te.h,gt=new Ml({width:Ne||1,height:nt||1});for(var bt in P){var Gt=P[bt],lr=$[bt].paddedRect;Ml.copy(Gt.data,gt,{x:0,y:0},{x:lr.x+Ol,y:lr.y+Ol},Gt.data)}for(var ir in N){var wr=N[ir],Hr=he[ir].paddedRect,cn=Hr.x+Ol,an=Hr.y+Ol,Rn=wr.data.width,An=wr.data.height;Ml.copy(wr.data,gt,{x:0,y:0},{x:cn,y:an},wr.data),Ml.copy(wr.data,gt,{x:0,y:An-1},{x:cn,y:an-1},{width:Rn,height:1}),Ml.copy(wr.data,gt,{x:0,y:0},{x:cn,y:an+An},{width:Rn,height:1}),Ml.copy(wr.data,gt,{x:Rn-1,y:0},{x:cn-1,y:an},{width:1,height:An}),Ml.copy(wr.data,gt,{x:0,y:0},{x:cn+Rn,y:an},{width:1,height:An})}this.image=gt,this.iconPositions=$,this.patternPositions=he};Dh.prototype.addImages=function(P,N,$){for(var he in P){var xe=P[he],Te={x:0,y:0,w:xe.data.width+2*Ol,h:xe.data.height+2*Ol};$.push(Te),N[he]=new wv(Te,xe),xe.hasRenderCallback&&this.haveRenderCallbacks.push(he)}},Dh.prototype.patchUpdatedImages=function(P,N){P.dispatchRenderCallbacks(this.haveRenderCallbacks);for(var $ in P.updatedImages)this.patchUpdatedImage(this.iconPositions[$],P.getImage($),N),this.patchUpdatedImage(this.patternPositions[$],P.getImage($),N)},Dh.prototype.patchUpdatedImage=function(P,N,$){if(!(!P||!N)&&P.version!==N.version){P.version=N.version;var he=P.tl,xe=he[0],Te=he[1];$.update(N.data,void 0,{x:xe,y:Te})}},Be("ImagePosition",wv),Be("ImageAtlas",Dh);var ql={horizontal:1,vertical:2,horizontalOnly:3},Rh=-17;function vm(L){for(var P=0,N=L;P<N.length;P+=1){var $=N[P];if($.positionedGlyphs.length!==0)return!1}return!0}var Nd=57344,Bd=63743,Vc=function(){this.scale=1,this.fontStack="",this.imageName=null};Vc.forText=function(P,N){var $=new Vc;return $.scale=P||1,$.fontStack=N,$},Vc.forImage=function(P){var N=new Vc;return N.imageName=P,N};var Js=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};Js.fromFeature=function(P,N){for(var $=new Js,he=0;he<P.sections.length;he++){var xe=P.sections[he];xe.image?$.addImageSection(xe):$.addTextSection(xe,N)}return $},Js.prototype.length=function(){return this.text.length},Js.prototype.getSection=function(P){return this.sections[this.sectionIndex[P]]},Js.prototype.getSectionIndex=function(P){return this.sectionIndex[P]},Js.prototype.getCharCode=function(P){return this.text.charCodeAt(P)},Js.prototype.verticalizePunctuation=function(){this.text=Gy(this.text)},Js.prototype.trim=function(){for(var P=0,N=0;N<this.text.length&&Ef[this.text.charCodeAt(N)];N++)P++;for(var $=this.text.length,he=this.text.length-1;he>=0&&he>=P&&Ef[this.text.charCodeAt(he)];he--)$--;this.text=this.text.substring(P,$),this.sectionIndex=this.sectionIndex.slice(P,$)},Js.prototype.substring=function(P,N){var $=new Js;return $.text=this.text.substring(P,N),$.sectionIndex=this.sectionIndex.slice(P,N),$.sections=this.sections,$},Js.prototype.toString=function(){return this.text},Js.prototype.getMaxScale=function(){var P=this;return this.sectionIndex.reduce(function(N,$){return Math.max(N,P.sections[$].scale)},0)},Js.prototype.addTextSection=function(P,N){this.text+=P.text,this.sections.push(Vc.forText(P.scale,P.fontStack||N));for(var $=this.sections.length-1,he=0;he<P.text.length;++he)this.sectionIndex.push($)},Js.prototype.addImageSection=function(P){var N=P.image?P.image.name:"";if(N.length===0){O("Can't add FormattedSection with an empty image.");return}var $=this.getNextImageSectionCharCode();if(!$){O("Reached maximum number of images "+(Bd-Nd+2));return}this.text+=String.fromCharCode($),this.sections.push(Vc.forImage(N)),this.sectionIndex.push(this.sections.length-1)},Js.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=Bd?null:++this.imageSectionID:(this.imageSectionID=Nd,this.imageSectionID)};function pm(L,P){for(var N=[],$=L.text,he=0,xe=0,Te=P;xe<Te.length;xe+=1){var Ne=Te[xe];N.push(L.substring(he,Ne)),he=Ne}return he<$.length&&N.push(L.substring(he,$.length)),N}function _v(L,P,N,$,he,xe,Te,Ne,nt,gt,bt,Gt,lr,ir,wr,Hr){var cn=Js.fromFeature(L,he);Gt===ql.vertical&&cn.verticalizePunctuation();var an,Rn=qa.processBidirectionalText,An=qa.processStyledBidirectionalText;if(Rn&&cn.sections.length===1){an=[];for(var Dn=Rn(cn.toString(),Ap(cn,gt,xe,P,$,ir,wr)),Un=0,Kn=Dn;Un<Kn.length;Un+=1){var ha=Kn[Un],ua=new Js;ua.text=ha,ua.sections=cn.sections;for(var Ba=0;Ba<ha.length;Ba++)ua.sectionIndex.push(0);an.push(ua)}}else if(An){an=[];for(var Ca=An(cn.text,cn.sectionIndex,Ap(cn,gt,xe,P,$,ir,wr)),Da=0,li=Ca;Da<li.length;Da+=1){var za=li[Da],Na=new Js;Na.text=za[0],Na.sectionIndex=za[1],Na.sections=cn.sections,an.push(Na)}}else an=pm(cn,Ap(cn,gt,xe,P,$,ir,wr));var mi=[],oi={positionedLines:mi,text:cn.toString(),top:bt[1],bottom:bt[1],left:bt[0],right:bt[0],writingMode:Gt,iconsInText:!1,verticalizable:!1};return ym(oi,P,N,$,an,Te,Ne,nt,Gt,gt,lr,Hr),vm(mi)?!1:oi}var Ef={};Ef[9]=!0,Ef[10]=!0,Ef[11]=!0,Ef[12]=!0,Ef[13]=!0,Ef[32]=!0;var Nl={};Nl[10]=!0,Nl[32]=!0,Nl[38]=!0,Nl[40]=!0,Nl[41]=!0,Nl[43]=!0,Nl[45]=!0,Nl[47]=!0,Nl[173]=!0,Nl[183]=!0,Nl[8203]=!0,Nl[8208]=!0,Nl[8211]=!0,Nl[8231]=!0;function Ud(L,P,N,$,he,xe){if(P.imageName){var nt=$[P.imageName];return nt?nt.displaySize[0]*P.scale*Rs/xe+he:0}else{var Te=N[P.fontStack],Ne=Te&&Te[L];return Ne?Ne.metrics.advance*P.scale+he:0}}function dm(L,P,N,$,he,xe){for(var Te=0,Ne=0;Ne<L.length();Ne++){var nt=L.getSection(Ne);Te+=Ud(L.getCharCode(Ne),nt,$,he,P,xe)}var gt=Math.max(1,Math.ceil(Te/N));return Te/gt}function Vd(L,P,N,$){var he=Math.pow(L-P,2);return $?L<P?he/2:he*2:he+Math.abs(N)*N}function gm(L,P,N){var $=0;return L===10&&($-=1e4),N&&($+=150),(L===40||L===65288)&&($+=50),(P===41||P===65289)&&($+=50),$}function Hd(L,P,N,$,he,xe){for(var Te=null,Ne=Vd(P,N,he,xe),nt=0,gt=$;nt<gt.length;nt+=1){var bt=gt[nt],Gt=P-bt.x,lr=Vd(Gt,N,he,xe)+bt.badness;lr<=Ne&&(Te=bt,Ne=lr)}return{index:L,x:P,priorBreak:Te,badness:Ne}}function Gd(L){return L?Gd(L.priorBreak).concat(L.index):[]}function Ap(L,P,N,$,he,xe,Te){if(xe!=="point")return[];if(!L)return[];for(var Ne=[],nt=dm(L,P,N,$,he,Te),gt=L.text.indexOf("\u200B")>=0,bt=0,Gt=0;Gt<L.length();Gt++){var lr=L.getSection(Gt),ir=L.getCharCode(Gt);if(Ef[ir]||(bt+=Ud(ir,lr,$,he,P,Te)),Gt<L.length()-1){var wr=zr(ir);(Nl[ir]||wr||lr.imageName)&&Ne.push(Hd(Gt+1,bt,nt,Ne,gm(ir,L.getCharCode(Gt+1),wr&&gt),!1))}}return Gd(Hd(L.length(),bt,nt,Ne,0,!0))}function Mp(L){var P=.5,N=.5;switch(L){case"right":case"top-right":case"bottom-right":P=1;break;case"left":case"top-left":case"bottom-left":P=0;break}switch(L){case"bottom":case"bottom-right":case"bottom-left":N=1;break;case"top":case"top-right":case"top-left":N=0;break}return{horizontalAlign:P,verticalAlign:N}}function ym(L,P,N,$,he,xe,Te,Ne,nt,gt,bt,Gt){for(var lr=0,ir=Rh,wr=0,Hr=0,cn=Ne==="right"?1:Ne==="left"?0:.5,an=0,Rn=0,An=he;Rn<An.length;Rn+=1){var Dn=An[Rn];Dn.trim();var Un=Dn.getMaxScale(),Kn=(Un-1)*Rs,ha={positionedGlyphs:[],lineOffset:0};L.positionedLines[an]=ha;var ua=ha.positionedGlyphs,Ba=0;if(!Dn.length()){ir+=xe,++an;continue}for(var Ca=0;Ca<Dn.length();Ca++){var Da=Dn.getSection(Ca),li=Dn.getSectionIndex(Ca),za=Dn.getCharCode(Ca),Na=0,mi=null,oi=null,Ni=null,ao=Rs,Bi=!(nt===ql.horizontal||!bt&&!Wr(za)||bt&&(Ef[za]||hn(za)));if(Da.imageName){var zo=$[Da.imageName];if(!zo)continue;Ni=Da.imageName,L.iconsInText=L.iconsInText||!0,oi=zo.paddedRect;var Go=zo.displaySize;Da.scale=Da.scale*Rs/Gt,mi={width:Go[0],height:Go[1],left:Ol,top:-zd,advance:Bi?Go[1]:Go[0]};var ms=Rs-Go[1]*Da.scale;Na=Kn+ms,ao=mi.advance;var as=Bi?Go[0]*Da.scale-Rs*Un:Go[1]*Da.scale-Rs*Un;as>0&&as>Ba&&(Ba=as)}else{var Ui=N[Da.fontStack],Ii=Ui&&Ui[za];if(Ii&&Ii.rect)oi=Ii.rect,mi=Ii.metrics;else{var co=P[Da.fontStack],go=co&&co[za];if(!go)continue;mi=go.metrics}Na=(Un-Da.scale)*Rs}Bi?(L.verticalizable=!0,ua.push({glyph:za,imageName:Ni,x:lr,y:ir+Na,vertical:Bi,scale:Da.scale,fontStack:Da.fontStack,sectionIndex:li,metrics:mi,rect:oi}),lr+=ao*Da.scale+gt):(ua.push({glyph:za,imageName:Ni,x:lr,y:ir+Na,vertical:Bi,scale:Da.scale,fontStack:Da.fontStack,sectionIndex:li,metrics:mi,rect:oi}),lr+=mi.advance*Da.scale+gt)}if(ua.length!==0){var Qs=lr-gt;wr=Math.max(Qs,wr),mm(ua,0,ua.length-1,cn,Ba)}lr=0;var $s=xe*Un+Ba;ha.lineOffset=Math.max(Ba,Kn),ir+=$s,Hr=Math.max($s,Hr),++an}var xs=ir-Rh,sl=Mp(Te),ll=sl.horizontalAlign,hs=sl.verticalAlign;xm(L.positionedLines,cn,ll,hs,wr,Hr,xe,xs,he.length),L.top+=-hs*xs,L.bottom=L.top+xs,L.left+=-ll*wr,L.right=L.left+wr}function mm(L,P,N,$,he){if(!(!$&&!he))for(var xe=L[N],Te=xe.metrics.advance*xe.scale,Ne=(L[N].x+Te)*$,nt=P;nt<=N;nt++)L[nt].x-=Ne,L[nt].y+=he}function xm(L,P,N,$,he,xe,Te,Ne,nt){var gt=(P-N)*he,bt=0;xe!==Te?bt=-Ne*$-Rh:bt=(-$*nt+.5)*Te;for(var Gt=0,lr=L;Gt<lr.length;Gt+=1)for(var ir=lr[Gt],wr=0,Hr=ir.positionedGlyphs;wr<Hr.length;wr+=1){var cn=Hr[wr];cn.x+=gt,cn.y+=bt}}function bm(L,P,N){var $=Mp(N),he=$.horizontalAlign,xe=$.verticalAlign,Te=P[0],Ne=P[1],nt=Te-L.displaySize[0]*he,gt=nt+L.displaySize[0],bt=Ne-L.displaySize[1]*xe,Gt=bt+L.displaySize[1];return{image:L,top:bt,bottom:Gt,left:nt,right:gt}}function Yd(L,P,N,$,he,xe){var Te=L.image,Ne;if(Te.content){var nt=Te.content,gt=Te.pixelRatio||1;Ne=[nt[0]/gt,nt[1]/gt,Te.displaySize[0]-nt[2]/gt,Te.displaySize[1]-nt[3]/gt]}var bt=P.left*xe,Gt=P.right*xe,lr,ir,wr,Hr;N==="width"||N==="both"?(Hr=he[0]+bt-$[3],ir=he[0]+Gt+$[1]):(Hr=he[0]+(bt+Gt-Te.displaySize[0])/2,ir=Hr+Te.displaySize[0]);var cn=P.top*xe,an=P.bottom*xe;return N==="height"||N==="both"?(lr=he[1]+cn-$[0],wr=he[1]+an+$[2]):(lr=he[1]+(cn+an-Te.displaySize[1])/2,wr=lr+Te.displaySize[1]),{image:Te,top:lr,right:ir,bottom:wr,left:Hr,collisionPadding:Ne}}var Hc=function(L){function P(N,$,he,xe){L.call(this,N,$),this.angle=he,xe!==void 0&&(this.segment=xe)}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype.clone=function(){return new P(this.x,this.y,this.angle,this.segment)},P}(h);Be("Anchor",Hc);var of=128;function Sp(L,P){var N=P.expression;if(N.kind==="constant"){var $=N.evaluate(new di(L+1));return{kind:"constant",layoutSize:$}}else{if(N.kind==="source")return{kind:"source"};for(var he=N.zoomStops,xe=N.interpolationType,Te=0;Te<he.length&&he[Te]<=L;)Te++;Te=Math.max(0,Te-1);for(var Ne=Te;Ne<he.length&&he[Ne]<L+1;)Ne++;Ne=Math.min(he.length-1,Ne);var nt=he[Te],gt=he[Ne];if(N.kind==="composite")return{kind:"composite",minZoom:nt,maxZoom:gt,interpolationType:xe};var bt=N.evaluate(new di(nt)),Gt=N.evaluate(new di(gt));return{kind:"camera",minZoom:nt,maxZoom:gt,minSize:bt,maxSize:Gt,interpolationType:xe}}}function Wd(L,P,N){var $=P.uSize,he=P.uSizeT,xe=N.lowerSize,Te=N.upperSize;return L.kind==="source"?xe/of:L.kind==="composite"?bo(xe/of,Te/of,he):$}function jd(L,P){var N=0,$=0;if(L.kind==="constant")$=L.layoutSize;else if(L.kind!=="source"){var he=L.interpolationType,xe=L.minZoom,Te=L.maxZoom,Ne=he?c(wo.interpolationFactor(he,P,xe,Te),0,1):0;L.kind==="camera"?$=bo(L.minSize,L.maxSize,Ne):N=Ne}return{uSizeT:N,uSize:$}}var wm=Object.freeze({__proto__:null,getSizeData:Sp,evaluateSizeForFeature:Wd,evaluateSizeForZoom:jd,SIZE_PACK_FACTOR:of});function Xd(L,P,N,$,he){if(P.segment===void 0)return!0;for(var xe=P,Te=P.segment+1,Ne=0;Ne>-N/2;){if(Te--,Te<0)return!1;Ne-=L[Te].dist(xe),xe=L[Te]}Ne+=L[Te].dist(L[Te+1]),Te++;for(var nt=[],gt=0;Ne<N/2;){var bt=L[Te-1],Gt=L[Te],lr=L[Te+1];if(!lr)return!1;var ir=bt.angleTo(Gt)-Gt.angleTo(lr);for(ir=Math.abs((ir+3*Math.PI)%(Math.PI*2)-Math.PI),nt.push({distance:Ne,angleDelta:ir}),gt+=ir;Ne-nt[0].distance>$;)gt-=nt.shift().angleDelta;if(gt>he)return!1;Te++,Ne+=Gt.dist(lr)}return!0}function Zd(L){for(var P=0,N=0;N<L.length-1;N++)P+=L[N].dist(L[N+1]);return P}function Kd(L,P,N){return L?3/5*P*N:0}function Jd(L,P){return Math.max(L?L.right-L.left:0,P?P.right-P.left:0)}function _m(L,P,N,$,he,xe){for(var Te=Kd(N,he,xe),Ne=Jd(N,$)*xe,nt=0,gt=Zd(L)/2,bt=0;bt<L.length-1;bt++){var Gt=L[bt],lr=L[bt+1],ir=Gt.dist(lr);if(nt+ir>gt){var wr=(gt-nt)/ir,Hr=bo(Gt.x,lr.x,wr),cn=bo(Gt.y,lr.y,wr),an=new Hc(Hr,cn,lr.angleTo(Gt),bt);return an._round(),!Te||Xd(L,an,Ne,Te,P)?an:void 0}nt+=ir}}function Tm(L,P,N,$,he,xe,Te,Ne,nt){var gt=Kd($,xe,Te),bt=Jd($,he),Gt=bt*Te,lr=L[0].x===0||L[0].x===nt||L[0].y===0||L[0].y===nt;P-Gt<P/4&&(P=Gt+P/4);var ir=xe*2,wr=lr?P/2*Ne%P:(bt/2+ir)*Te*Ne%P;return Qd(L,wr,P,gt,N,Gt,lr,!1,nt)}function Qd(L,P,N,$,he,xe,Te,Ne,nt){for(var gt=xe/2,bt=Zd(L),Gt=0,lr=P-N,ir=[],wr=0;wr<L.length-1;wr++){for(var Hr=L[wr],cn=L[wr+1],an=Hr.dist(cn),Rn=cn.angleTo(Hr);lr+N<Gt+an;){lr+=N;var An=(lr-Gt)/an,Dn=bo(Hr.x,cn.x,An),Un=bo(Hr.y,cn.y,An);if(Dn>=0&&Dn<nt&&Un>=0&&Un<nt&&lr-gt>=0&&lr+gt<=bt){var Kn=new Hc(Dn,Un,Rn,wr);Kn._round(),(!$||Xd(L,Kn,xe,$,he))&&ir.push(Kn)}}Gt+=an}return!Ne&&!ir.length&&!Te&&(ir=Qd(L,Gt/2,N,$,he,xe,Te,!0,nt)),ir}function $d(L,P,N,$,he){for(var xe=[],Te=0;Te<L.length;Te++)for(var Ne=L[Te],nt=void 0,gt=0;gt<Ne.length-1;gt++){var bt=Ne[gt],Gt=Ne[gt+1];bt.x<P&&Gt.x<P||(bt.x<P?bt=new h(P,bt.y+(Gt.y-bt.y)*((P-bt.x)/(Gt.x-bt.x)))._round():Gt.x<P&&(Gt=new h(P,bt.y+(Gt.y-bt.y)*((P-bt.x)/(Gt.x-bt.x)))._round()),!(bt.y<N&&Gt.y<N)&&(bt.y<N?bt=new h(bt.x+(Gt.x-bt.x)*((N-bt.y)/(Gt.y-bt.y)),N)._round():Gt.y<N&&(Gt=new h(bt.x+(Gt.x-bt.x)*((N-bt.y)/(Gt.y-bt.y)),N)._round()),!(bt.x>=$&&Gt.x>=$)&&(bt.x>=$?bt=new h($,bt.y+(Gt.y-bt.y)*(($-bt.x)/(Gt.x-bt.x)))._round():Gt.x>=$&&(Gt=new h($,bt.y+(Gt.y-bt.y)*(($-bt.x)/(Gt.x-bt.x)))._round()),!(bt.y>=he&&Gt.y>=he)&&(bt.y>=he?bt=new h(bt.x+(Gt.x-bt.x)*((he-bt.y)/(Gt.y-bt.y)),he)._round():Gt.y>=he&&(Gt=new h(bt.x+(Gt.x-bt.x)*((he-bt.y)/(Gt.y-bt.y)),he)._round()),(!nt||!bt.equals(nt[nt.length-1]))&&(nt=[bt],xe.push(nt)),nt.push(Gt)))))}return xe}var Gc=Ol;function qd(L,P,N,$){var he=[],xe=L.image,Te=xe.pixelRatio,Ne=xe.paddedRect.w-2*Gc,nt=xe.paddedRect.h-2*Gc,gt=L.right-L.left,bt=L.bottom-L.top,Gt=xe.stretchX||[[0,Ne]],lr=xe.stretchY||[[0,nt]],ir=function(Ui,Ii){return Ui+Ii[1]-Ii[0]},wr=Gt.reduce(ir,0),Hr=lr.reduce(ir,0),cn=Ne-wr,an=nt-Hr,Rn=0,An=wr,Dn=0,Un=Hr,Kn=0,ha=cn,ua=0,Ba=an;if(xe.content&&$){var Ca=xe.content;Rn=Tv(Gt,0,Ca[0]),Dn=Tv(lr,0,Ca[1]),An=Tv(Gt,Ca[0],Ca[2]),Un=Tv(lr,Ca[1],Ca[3]),Kn=Ca[0]-Rn,ua=Ca[1]-Dn,ha=Ca[2]-Ca[0]-An,Ba=Ca[3]-Ca[1]-Un}var Da=function(Ui,Ii,co,go){var zo=Av(Ui.stretch-Rn,An,gt,L.left),Go=Mv(Ui.fixed-Kn,ha,Ui.stretch,wr),ms=Av(Ii.stretch-Dn,Un,bt,L.top),as=Mv(Ii.fixed-ua,Ba,Ii.stretch,Hr),Qs=Av(co.stretch-Rn,An,gt,L.left),$s=Mv(co.fixed-Kn,ha,co.stretch,wr),xs=Av(go.stretch-Dn,Un,bt,L.top),sl=Mv(go.fixed-ua,Ba,go.stretch,Hr),ll=new h(zo,ms),hs=new h(Qs,ms),ul=new h(Qs,xs),eu=new h(zo,xs),Of=new h(Go/Te,as/Te),tc=new h($s/Te,sl/Te),rc=P*Math.PI/180;if(rc){var nc=Math.sin(rc),Qc=Math.cos(rc),Fu=[Qc,-nc,nc,Qc];ll._matMult(Fu),hs._matMult(Fu),eu._matMult(Fu),ul._matMult(Fu)}var Pv=Ui.stretch+Ui.fixed,Ip=co.stretch+co.fixed,Dv=Ii.stretch+Ii.fixed,Fp=go.stretch+go.fixed,xu={x:xe.paddedRect.x+Gc+Pv,y:xe.paddedRect.y+Gc+Dv,w:Ip-Pv,h:Fp-Dv},$c=ha/Te/gt,Rv=Ba/Te/bt;return{tl:ll,tr:hs,bl:eu,br:ul,tex:xu,writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Of,pixelOffsetBR:tc,minFontScaleX:$c,minFontScaleY:Rv,isSDF:N}};if(!$||!xe.stretchX&&!xe.stretchY)he.push(Da({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:Ne+1},{fixed:0,stretch:nt+1}));else for(var li=e0(Gt,cn,wr),za=e0(lr,an,Hr),Na=0;Na<li.length-1;Na++)for(var mi=li[Na],oi=li[Na+1],Ni=0;Ni<za.length-1;Ni++){var ao=za[Ni],Bi=za[Ni+1];he.push(Da(mi,ao,oi,Bi))}return he}function Tv(L,P,N){for(var $=0,he=0,xe=L;he<xe.length;he+=1){var Te=xe[he];$+=Math.max(P,Math.min(N,Te[1]))-Math.max(P,Math.min(N,Te[0]))}return $}function e0(L,P,N){for(var $=[{fixed:-Gc,stretch:0}],he=0,xe=L;he<xe.length;he+=1){var Te=xe[he],Ne=Te[0],nt=Te[1],gt=$[$.length-1];$.push({fixed:Ne-gt.stretch,stretch:gt.stretch}),$.push({fixed:Ne-gt.stretch,stretch:gt.stretch+(nt-Ne)})}return $.push({fixed:P+Gc,stretch:N}),$}function Av(L,P,N,$){return L/P*N+$}function Mv(L,P,N,$){return L-P*N/$}function Am(L,P,N,$,he,xe,Te,Ne){for(var nt=$.layout.get("text-rotate").evaluate(xe,{})*Math.PI/180,gt=[],bt=0,Gt=P.positionedLines;bt<Gt.length;bt+=1)for(var lr=Gt[bt],ir=0,wr=lr.positionedGlyphs;ir<wr.length;ir+=1){var Hr=wr[ir];if(!!Hr.rect){var cn=Hr.rect||{},an=1,Rn=zd+an,An=!0,Dn=1,Un=0,Kn=(he||Ne)&&Hr.vertical,ha=Hr.metrics.advance*Hr.scale/2;if(Ne&&P.verticalizable){var ua=(Hr.scale-1)*Rs,Ba=(Rs-Hr.metrics.width*Hr.scale)/2;Un=lr.lineOffset/2-(Hr.imageName?-Ba:ua)}if(Hr.imageName){var Ca=Te[Hr.imageName];An=Ca.sdf,Dn=Ca.pixelRatio,Rn=Ol/Dn}var Da=he?[Hr.x+ha,Hr.y]:[0,0],li=he?[0,0]:[Hr.x+ha+N[0],Hr.y+N[1]-Un],za=[0,0];Kn&&(za=li,li=[0,0]);var Na=(Hr.metrics.left-Rn)*Hr.scale-ha+li[0],mi=(-Hr.metrics.top-Rn)*Hr.scale+li[1],oi=Na+cn.w*Hr.scale/Dn,Ni=mi+cn.h*Hr.scale/Dn,ao=new h(Na,mi),Bi=new h(oi,mi),Ui=new h(Na,Ni),Ii=new h(oi,Ni);if(Kn){var co=new h(-ha,ha-Rh),go=-Math.PI/2,zo=Rs/2-ha,Go=Hr.imageName?zo:0,ms=new h(5-Rh-zo,-Go),as=new(Function.prototype.bind.apply(h,[null].concat(za)));ao._rotateAround(go,co)._add(ms)._add(as),Bi._rotateAround(go,co)._add(ms)._add(as),Ui._rotateAround(go,co)._add(ms)._add(as),Ii._rotateAround(go,co)._add(ms)._add(as)}if(nt){var Qs=Math.sin(nt),$s=Math.cos(nt),xs=[$s,-Qs,Qs,$s];ao._matMult(xs),Bi._matMult(xs),Ui._matMult(xs),Ii._matMult(xs)}var sl=new h(0,0),ll=new h(0,0),hs=0,ul=0;gt.push({tl:ao,tr:Bi,bl:Ui,br:Ii,tex:cn,writingMode:P.writingMode,glyphOffset:Da,sectionIndex:Hr.sectionIndex,isSDF:An,pixelOffsetTL:sl,pixelOffsetBR:ll,minFontScaleX:hs,minFontScaleY:ul})}}return gt}var Sv=function(P,N,$,he,xe,Te,Ne,nt,gt,bt){if(this.boxStartIndex=P.length,gt){var Gt=Te.top,lr=Te.bottom,ir=Te.collisionPadding;ir&&(Gt-=ir[1],lr+=ir[3]);var wr=lr-Gt;wr>0&&(wr=Math.max(10,wr),this.circleDiameter=wr)}else{var Hr=Te.top*Ne-nt,cn=Te.bottom*Ne+nt,an=Te.left*Ne-nt,Rn=Te.right*Ne+nt,An=Te.collisionPadding;if(An&&(an-=An[0]*Ne,Hr-=An[1]*Ne,Rn+=An[2]*Ne,cn+=An[3]*Ne),bt){var Dn=new h(an,Hr),Un=new h(Rn,Hr),Kn=new h(an,cn),ha=new h(Rn,cn),ua=bt*Math.PI/180;Dn._rotate(ua),Un._rotate(ua),Kn._rotate(ua),ha._rotate(ua),an=Math.min(Dn.x,Un.x,Kn.x,ha.x),Rn=Math.max(Dn.x,Un.x,Kn.x,ha.x),Hr=Math.min(Dn.y,Un.y,Kn.y,ha.y),cn=Math.max(Dn.y,Un.y,Kn.y,ha.y)}P.emplaceBack(N.x,N.y,an,Hr,Rn,cn,$,he,xe)}this.boxEndIndex=P.length},Yc=function(P,N){if(P===void 0&&(P=[]),N===void 0&&(N=Mm),this.data=P,this.length=this.data.length,this.compare=N,this.length>0)for(var $=(this.length>>1)-1;$>=0;$--)this._down($)};Yc.prototype.push=function(P){this.data.push(P),this.length++,this._up(this.length-1)},Yc.prototype.pop=function(){if(this.length!==0){var P=this.data[0],N=this.data.pop();return this.length--,this.length>0&&(this.data[0]=N,this._down(0)),P}},Yc.prototype.peek=function(){return this.data[0]},Yc.prototype._up=function(P){for(var N=this,$=N.data,he=N.compare,xe=$[P];P>0;){var Te=P-1>>1,Ne=$[Te];if(he(xe,Ne)>=0)break;$[P]=Ne,P=Te}$[P]=xe},Yc.prototype._down=function(P){for(var N=this,$=N.data,he=N.compare,xe=this.length>>1,Te=$[P];P<xe;){var Ne=(P<<1)+1,nt=$[Ne],gt=Ne+1;if(gt<this.length&&he($[gt],nt)<0&&(Ne=gt,nt=$[gt]),he(nt,Te)>=0)break;$[P]=nt,P=Ne}$[P]=Te};function Mm(L,P){return L<P?-1:L>P?1:0}function Sm(L,P,N){P===void 0&&(P=1),N===void 0&&(N=!1);for(var $=1/0,he=1/0,xe=-1/0,Te=-1/0,Ne=L[0],nt=0;nt<Ne.length;nt++){var gt=Ne[nt];(!nt||gt.x<$)&&($=gt.x),(!nt||gt.y<he)&&(he=gt.y),(!nt||gt.x>xe)&&(xe=gt.x),(!nt||gt.y>Te)&&(Te=gt.y)}var bt=xe-$,Gt=Te-he,lr=Math.min(bt,Gt),ir=lr/2,wr=new Yc([],Em);if(lr===0)return new h($,he);for(var Hr=$;Hr<xe;Hr+=lr)for(var cn=he;cn<Te;cn+=lr)wr.push(new Wc(Hr+ir,cn+ir,ir,L));for(var an=km(L),Rn=wr.length;wr.length;){var An=wr.pop();(An.d>an.d||!an.d)&&(an=An,N&&console.log("found best %d after %d probes",Math.round(1e4*An.d)/1e4,Rn)),!(An.max-an.d<=P)&&(ir=An.h/2,wr.push(new Wc(An.p.x-ir,An.p.y-ir,ir,L)),wr.push(new Wc(An.p.x+ir,An.p.y-ir,ir,L)),wr.push(new Wc(An.p.x-ir,An.p.y+ir,ir,L)),wr.push(new Wc(An.p.x+ir,An.p.y+ir,ir,L)),Rn+=4)}return N&&(console.log("num probes: "+Rn),console.log("best distance: "+an.d)),an.p}function Em(L,P){return P.max-L.max}function Wc(L,P,N,$){this.p=new h(L,P),this.h=N,this.d=Cm(this.p,$),this.max=this.d+this.h*Math.SQRT2}function Cm(L,P){for(var N=!1,$=1/0,he=0;he<P.length;he++)for(var xe=P[he],Te=0,Ne=xe.length,nt=Ne-1;Te<Ne;nt=Te++){var gt=xe[Te],bt=xe[nt];gt.y>L.y!=bt.y>L.y&&L.x<(bt.x-gt.x)*(L.y-gt.y)/(bt.y-gt.y)+gt.x&&(N=!N),$=Math.min($,rf(L,gt,bt))}return(N?1:-1)*Math.sqrt($)}function km(L){for(var P=0,N=0,$=0,he=L[0],xe=0,Te=he.length,Ne=Te-1;xe<Te;Ne=xe++){var nt=he[xe],gt=he[Ne],bt=nt.x*gt.y-gt.x*nt.y;N+=(nt.x+gt.x)*bt,$+=(nt.y+gt.y)*bt,P+=bt*3}return new Wc(N/P,$/P,0,L)}var jc=7,Ep=Number.POSITIVE_INFINITY;function t0(L,P){function N(he,xe){var Te=0,Ne=0;xe<0&&(xe=0);var nt=xe/Math.sqrt(2);switch(he){case"top-right":case"top-left":Ne=nt-jc;break;case"bottom-right":case"bottom-left":Ne=-nt+jc;break;case"bottom":Ne=-xe+jc;break;case"top":Ne=xe-jc;break}switch(he){case"top-right":case"bottom-right":Te=-nt;break;case"top-left":case"bottom-left":Te=nt;break;case"left":Te=xe;break;case"right":Te=-xe;break}return[Te,Ne]}function $(he,xe,Te){var Ne=0,nt=0;switch(xe=Math.abs(xe),Te=Math.abs(Te),he){case"top-right":case"top-left":case"top":nt=Te-jc;break;case"bottom-right":case"bottom-left":case"bottom":nt=-Te+jc;break}switch(he){case"top-right":case"bottom-right":case"right":Ne=-xe;break;case"top-left":case"bottom-left":case"left":Ne=xe;break}return[Ne,nt]}return P[1]!==Ep?$(L,P[0],P[1]):N(L,P[0])}function Lm(L,P,N,$,he,xe,Te){L.createArrays();var Ne=512*L.overscaling;L.tilePixelRatio=Wa/Ne,L.compareText={},L.iconsNeedLinear=!1;var nt=L.layers[0].layout,gt=L.layers[0]._unevaluatedLayout._values,bt={};if(L.textSizeData.kind==="composite"){var Gt=L.textSizeData,lr=Gt.minZoom,ir=Gt.maxZoom;bt.compositeTextSizes=[gt["text-size"].possiblyEvaluate(new di(lr),Te),gt["text-size"].possiblyEvaluate(new di(ir),Te)]}if(L.iconSizeData.kind==="composite"){var wr=L.iconSizeData,Hr=wr.minZoom,cn=wr.maxZoom;bt.compositeIconSizes=[gt["icon-size"].possiblyEvaluate(new di(Hr),Te),gt["icon-size"].possiblyEvaluate(new di(cn),Te)]}bt.layoutTextSize=gt["text-size"].possiblyEvaluate(new di(L.zoom+1),Te),bt.layoutIconSize=gt["icon-size"].possiblyEvaluate(new di(L.zoom+1),Te),bt.textMaxSize=gt["text-size"].possiblyEvaluate(new di(18));for(var an=nt.get("text-line-height")*Rs,Rn=nt.get("text-rotation-alignment")==="map"&&nt.get("symbol-placement")!=="point",An=nt.get("text-keep-upright"),Dn=nt.get("text-size"),Un=function(){var ua=ha[Kn],Ba=nt.get("text-font").evaluate(ua,{},Te).join(","),Ca=Dn.evaluate(ua,{},Te),Da=bt.layoutTextSize.evaluate(ua,{},Te),li=bt.layoutIconSize.evaluate(ua,{},Te),za={horizontal:{},vertical:void 0},Na=ua.text,mi=[0,0];if(Na){var oi=Na.toString(),Ni=nt.get("text-letter-spacing").evaluate(ua,{},Te)*Rs,ao=nn(oi)?Ni:0,Bi=nt.get("text-anchor").evaluate(ua,{},Te),Ui=nt.get("text-variable-anchor");if(!Ui){var Ii=nt.get("text-radial-offset").evaluate(ua,{},Te);Ii?mi=t0(Bi,[Ii*Rs,Ep]):mi=nt.get("text-offset").evaluate(ua,{},Te).map(function(Of){return Of*Rs})}var co=Rn?"center":nt.get("text-justify").evaluate(ua,{},Te),go=nt.get("symbol-placement"),zo=go==="point"?nt.get("text-max-width").evaluate(ua,{},Te)*Rs:0,Go=function(){L.allowVerticalPlacement&&Lr(oi)&&(za.vertical=_v(Na,P,N,he,Ba,zo,an,Bi,"left",ao,mi,ql.vertical,!0,go,Da,Ca))};if(!Rn&&Ui){for(var ms=co==="auto"?Ui.map(function(Of){return Cp(Of)}):[co],as=!1,Qs=0;Qs<ms.length;Qs++){var $s=ms[Qs];if(!za.horizontal[$s])if(as)za.horizontal[$s]=za.horizontal[0];else{var xs=_v(Na,P,N,he,Ba,zo,an,"center",$s,ao,mi,ql.horizontal,!1,go,Da,Ca);xs&&(za.horizontal[$s]=xs,as=xs.positionedLines.length===1)}}Go()}else{co==="auto"&&(co=Cp(Bi));var sl=_v(Na,P,N,he,Ba,zo,an,Bi,co,ao,mi,ql.horizontal,!1,go,Da,Ca);sl&&(za.horizontal[co]=sl),Go(),Lr(oi)&&Rn&&An&&(za.vertical=_v(Na,P,N,he,Ba,zo,an,Bi,co,ao,mi,ql.vertical,!1,go,Da,Ca))}}var ll=void 0,hs=!1;if(ua.icon&&ua.icon.name){var ul=$[ua.icon.name];ul&&(ll=bm(he[ua.icon.name],nt.get("icon-offset").evaluate(ua,{},Te),nt.get("icon-anchor").evaluate(ua,{},Te)),hs=ul.sdf,L.sdfIcons===void 0?L.sdfIcons=ul.sdf:L.sdfIcons!==ul.sdf&&O("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ul.pixelRatio!==L.pixelRatio||nt.get("icon-rotate").constantOr(1)!==0)&&(L.iconsNeedLinear=!0))}var eu=n0(za.horizontal)||za.vertical;L.iconsInText=eu?eu.iconsInText:!1,(eu||ll)&&Pm(L,ua,za,ll,$,bt,Da,li,mi,hs,Te)},Kn=0,ha=L.features;Kn<ha.length;Kn+=1)Un();xe&&L.generateCollisionDebugBuffers()}function Cp(L){switch(L){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Pm(L,P,N,$,he,xe,Te,Ne,nt,gt,bt){var Gt=xe.textMaxSize.evaluate(P,{});Gt===void 0&&(Gt=Te);var lr=L.layers[0].layout,ir=lr.get("icon-offset").evaluate(P,{},bt),wr=n0(N.horizontal),Hr=24,cn=Te/Hr,an=L.tilePixelRatio*cn,Rn=L.tilePixelRatio*Gt/Hr,An=L.tilePixelRatio*Ne,Dn=L.tilePixelRatio*lr.get("symbol-spacing"),Un=lr.get("text-padding")*L.tilePixelRatio,Kn=lr.get("icon-padding")*L.tilePixelRatio,ha=lr.get("text-max-angle")/180*Math.PI,ua=lr.get("text-rotation-alignment")==="map"&&lr.get("symbol-placement")!=="point",Ba=lr.get("icon-rotation-alignment")==="map"&&lr.get("symbol-placement")!=="point",Ca=lr.get("symbol-placement"),Da=Dn/2,li=lr.get("icon-text-fit"),za;$&&li!=="none"&&(L.allowVerticalPlacement&&N.vertical&&(za=Yd($,N.vertical,li,lr.get("icon-text-fit-padding"),ir,cn)),wr&&($=Yd($,wr,li,lr.get("icon-text-fit-padding"),ir,cn)));var Na=function(Qc,Fu){Fu.x<0||Fu.x>=Wa||Fu.y<0||Fu.y>=Wa||Dm(L,Fu,Qc,N,$,he,za,L.layers[0],L.collisionBoxArray,P.index,P.sourceLayerIndex,L.index,an,Un,ua,nt,An,Kn,Ba,ir,P,xe,gt,bt,Te)};if(Ca==="line")for(var mi=0,oi=$d(P.geometry,0,0,Wa,Wa);mi<oi.length;mi+=1)for(var Ni=oi[mi],ao=Tm(Ni,Dn,ha,N.vertical||wr,$,Hr,Rn,L.overscaling,Wa),Bi=0,Ui=ao;Bi<Ui.length;Bi+=1){var Ii=Ui[Bi],co=wr;(!co||!Rm(L,co.text,Da,Ii))&&Na(Ni,Ii)}else if(Ca==="line-center")for(var go=0,zo=P.geometry;go<zo.length;go+=1){var Go=zo[go];if(Go.length>1){var ms=_m(Go,ha,N.vertical||wr,$,Hr,Rn);ms&&Na(Go,ms)}}else if(P.type==="Polygon")for(var as=0,Qs=yp(P.geometry,0);as<Qs.length;as+=1){var $s=Qs[as],xs=Sm($s,16);Na($s[0],new Hc(xs.x,xs.y,0))}else if(P.type==="LineString")for(var sl=0,ll=P.geometry;sl<ll.length;sl+=1){var hs=ll[sl];Na(hs,new Hc(hs[0].x,hs[0].y,0))}else if(P.type==="Point")for(var ul=0,eu=P.geometry;ul<eu.length;ul+=1)for(var Of=eu[ul],tc=0,rc=Of;tc<rc.length;tc+=1){var nc=rc[tc];Na([nc],new Hc(nc.x,nc.y,0))}}var Ih=255,qf=Ih*of;function r0(L,P,N,$,he,xe,Te,Ne,nt,gt,bt,Gt,lr,ir,wr){var Hr=Am(P,N,Ne,he,xe,Te,$,L.allowVerticalPlacement),cn=L.textSizeData,an=null;cn.kind==="source"?(an=[of*he.layout.get("text-size").evaluate(Te,{})],an[0]>qf&&O(L.layerIds[0]+': Value for "text-size" is >= '+Ih+'. Reduce your "text-size".')):cn.kind==="composite"&&(an=[of*ir.compositeTextSizes[0].evaluate(Te,{},wr),of*ir.compositeTextSizes[1].evaluate(Te,{},wr)],(an[0]>qf||an[1]>qf)&&O(L.layerIds[0]+': Value for "text-size" is >= '+Ih+'. Reduce your "text-size".')),L.addSymbols(L.text,Hr,an,Ne,xe,Te,gt,P,nt.lineStartIndex,nt.lineLength,lr,wr);for(var Rn=0,An=bt;Rn<An.length;Rn+=1){var Dn=An[Rn];Gt[Dn]=L.text.placedSymbolArray.length-1}return Hr.length*4}function n0(L){for(var P in L)return L[P];return null}function Dm(L,P,N,$,he,xe,Te,Ne,nt,gt,bt,Gt,lr,ir,wr,Hr,cn,an,Rn,An,Dn,Un,Kn,ha,ua){var Ba,Ca=L.addToLineVertexArray(P,N),Da,li,za,Na,mi=0,oi=0,Ni=0,ao=0,Bi=-1,Ui=-1,Ii={},co=Ie(""),go=0,zo=0;if(Ne._unevaluatedLayout.getValue("text-radial-offset")===void 0?(Ba=Ne.layout.get("text-offset").evaluate(Dn,{},ha).map(function(Oh){return Oh*Rs}),go=Ba[0],zo=Ba[1]):(go=Ne.layout.get("text-radial-offset").evaluate(Dn,{},ha)*Rs,zo=Ep),L.allowVerticalPlacement&&$.vertical){var Go=Ne.layout.get("text-rotate").evaluate(Dn,{},ha),ms=Go+90,as=$.vertical;za=new Sv(nt,P,gt,bt,Gt,as,lr,ir,wr,ms),Te&&(Na=new Sv(nt,P,gt,bt,Gt,Te,cn,an,wr,ms))}if(he){var Qs=Ne.layout.get("icon-rotate").evaluate(Dn,{}),$s=Ne.layout.get("icon-text-fit")!=="none",xs=qd(he,Qs,Kn,$s),sl=Te?qd(Te,Qs,Kn,$s):void 0;li=new Sv(nt,P,gt,bt,Gt,he,cn,an,!1,Qs),mi=xs.length*4;var ll=L.iconSizeData,hs=null;ll.kind==="source"?(hs=[of*Ne.layout.get("icon-size").evaluate(Dn,{})],hs[0]>qf&&O(L.layerIds[0]+': Value for "icon-size" is >= '+Ih+'. Reduce your "icon-size".')):ll.kind==="composite"&&(hs=[of*Un.compositeIconSizes[0].evaluate(Dn,{},ha),of*Un.compositeIconSizes[1].evaluate(Dn,{},ha)],(hs[0]>qf||hs[1]>qf)&&O(L.layerIds[0]+': Value for "icon-size" is >= '+Ih+'. Reduce your "icon-size".')),L.addSymbols(L.icon,xs,hs,An,Rn,Dn,!1,P,Ca.lineStartIndex,Ca.lineLength,-1,ha),Bi=L.icon.placedSymbolArray.length-1,sl&&(oi=sl.length*4,L.addSymbols(L.icon,sl,hs,An,Rn,Dn,ql.vertical,P,Ca.lineStartIndex,Ca.lineLength,-1,ha),Ui=L.icon.placedSymbolArray.length-1)}for(var ul in $.horizontal){var eu=$.horizontal[ul];if(!Da){co=Ie(eu.text);var Of=Ne.layout.get("text-rotate").evaluate(Dn,{},ha);Da=new Sv(nt,P,gt,bt,Gt,eu,lr,ir,wr,Of)}var tc=eu.positionedLines.length===1;if(Ni+=r0(L,P,eu,xe,Ne,wr,Dn,Hr,Ca,$.vertical?ql.horizontal:ql.horizontalOnly,tc?Object.keys($.horizontal):[ul],Ii,Bi,Un,ha),tc)break}$.vertical&&(ao+=r0(L,P,$.vertical,xe,Ne,wr,Dn,Hr,Ca,ql.vertical,["vertical"],Ii,Ui,Un,ha));var rc=Da?Da.boxStartIndex:L.collisionBoxArray.length,nc=Da?Da.boxEndIndex:L.collisionBoxArray.length,Qc=za?za.boxStartIndex:L.collisionBoxArray.length,Fu=za?za.boxEndIndex:L.collisionBoxArray.length,Pv=li?li.boxStartIndex:L.collisionBoxArray.length,Ip=li?li.boxEndIndex:L.collisionBoxArray.length,Dv=Na?Na.boxStartIndex:L.collisionBoxArray.length,Fp=Na?Na.boxEndIndex:L.collisionBoxArray.length,xu=-1,$c=function(Oh,x0){return Oh&&Oh.circleDiameter?Math.max(Oh.circleDiameter,x0):x0};xu=$c(Da,xu),xu=$c(za,xu),xu=$c(li,xu),xu=$c(Na,xu);var Rv=xu>-1?1:0;Rv&&(xu*=ua/Rs),L.glyphOffsetArray.length>=no.MAX_GLYPHS&&O("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Dn.sortKey!==void 0&&L.addToSortKeyRanges(L.symbolInstances.length,Dn.sortKey),L.symbolInstances.emplaceBack(P.x,P.y,Ii.right>=0?Ii.right:-1,Ii.center>=0?Ii.center:-1,Ii.left>=0?Ii.left:-1,Ii.vertical||-1,Bi,Ui,co,rc,nc,Qc,Fu,Pv,Ip,Dv,Fp,gt,Ni,ao,mi,oi,Rv,0,lr,go,zo,xu)}function Rm(L,P,N,$){var he=L.compareText;if(!(P in he))he[P]=[];else for(var xe=he[P],Te=xe.length-1;Te>=0;Te--)if($.dist(xe[Te])<N)return!0;return he[P].push($),!1}var Im=Nc.VectorTileFeature.types,Fm=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Ev(L,P,N,$,he,xe,Te,Ne,nt,gt,bt,Gt,lr){var ir=Ne?Math.min(qf,Math.round(Ne[0])):0,wr=Ne?Math.min(qf,Math.round(Ne[1])):0;L.emplaceBack(P,N,Math.round($*32),Math.round(he*32),xe,Te,(ir<<1)+(nt?1:0),wr,gt*16,bt*16,Gt*256,lr*256)}function kp(L,P,N){L.emplaceBack(P.x,P.y,N),L.emplaceBack(P.x,P.y,N),L.emplaceBack(P.x,P.y,N),L.emplaceBack(P.x,P.y,N)}function zm(L){for(var P=0,N=L.sections;P<N.length;P+=1){var $=N[P];if(la($.text))return!0}return!1}var Xc=function(P){this.layoutVertexArray=new _f,this.indexArray=new tf,this.programConfigurations=P,this.segments=new W,this.dynamicLayoutVertexArray=new gh,this.opacityVertexArray=new yh,this.placedSymbolArray=new Kf};Xc.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},Xc.prototype.upload=function(P,N,$,he){this.isEmpty()||($&&(this.layoutVertexBuffer=P.createVertexBuffer(this.layoutVertexArray,wp.members),this.indexBuffer=P.createIndexBuffer(this.indexArray,N),this.dynamicLayoutVertexBuffer=P.createVertexBuffer(this.dynamicLayoutVertexArray,Oy.members,!0),this.opacityVertexBuffer=P.createVertexBuffer(this.opacityVertexArray,Fm,!0),this.opacityVertexBuffer.itemSize=1),($||he)&&this.programConfigurations.upload(P))},Xc.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},Be("SymbolBuffers",Xc);var Fh=function(P,N,$){this.layoutVertexArray=new P,this.layoutAttributes=N,this.indexArray=new $,this.segments=new W,this.collisionVertexArray=new _l};Fh.prototype.upload=function(P){this.layoutVertexBuffer=P.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=P.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=P.createVertexBuffer(this.collisionVertexArray,Ny.members,!0)},Fh.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},Be("CollisionBuffers",Fh);var no=function(P){this.collisionBoxArray=P.collisionBoxArray,this.zoom=P.zoom,this.overscaling=P.overscaling,this.layers=P.layers,this.layerIds=this.layers.map(function(nt){return nt.id}),this.index=P.index,this.pixelRatio=P.pixelRatio,this.sourceLayerIndex=P.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Rc([]),this.placementViewportMatrix=Rc([]);var N=this.layers[0],$=N._unevaluatedLayout._values;this.textSizeData=Sp(this.zoom,$["text-size"]),this.iconSizeData=Sp(this.zoom,$["icon-size"]);var he=this.layers[0].layout,xe=he.get("symbol-sort-key"),Te=he.get("symbol-z-order");this.sortFeaturesByKey=Te!=="viewport-y"&&xe.constantOr(1)!==void 0;var Ne=Te==="viewport-y"||Te==="auto"&&!this.sortFeaturesByKey;this.sortFeaturesByY=Ne&&(he.get("text-allow-overlap")||he.get("icon-allow-overlap")||he.get("text-ignore-placement")||he.get("icon-ignore-placement")),he.get("symbol-placement")==="point"&&(this.writingModes=he.get("text-writing-mode").map(function(nt){return ql[nt]})),this.stateDependentLayerIds=this.layers.filter(function(nt){return nt.isStateDependent()}).map(function(nt){return nt.id}),this.sourceID=P.sourceID};no.prototype.createArrays=function(){this.text=new Xc(new ci(wp.members,this.layers,this.zoom,function(P){return/^text/.test(P)})),this.icon=new Xc(new ci(wp.members,this.layers,this.zoom,function(P){return/^icon/.test(P)})),this.glyphOffsetArray=new yu,this.lineVertexArray=new uv,this.symbolInstances=new lv},no.prototype.calculateGlyphDependencies=function(P,N,$,he,xe){for(var Te=0;Te<P.length;Te++)if(N[P.charCodeAt(Te)]=!0,($||he)&&xe){var Ne=Lh[P.charAt(Te)];Ne&&(N[Ne.charCodeAt(0)]=!0)}},no.prototype.populate=function(P,N,$){var he=this.layers[0],xe=he.layout,Te=xe.get("text-font"),Ne=xe.get("text-field"),nt=xe.get("icon-image"),gt=(Ne.value.kind!=="constant"||Ne.value.value instanceof qi&&!Ne.value.value.isEmpty()||Ne.value.value.toString().length>0)&&(Te.value.kind!=="constant"||Te.value.value.length>0),bt=nt.value.kind!=="constant"||!!nt.value.value||Object.keys(nt.parameters).length>0,Gt=xe.get("symbol-sort-key");if(this.features=[],!(!gt&&!bt)){for(var lr=N.iconDependencies,ir=N.glyphDependencies,wr=N.availableImages,Hr=new di(this.zoom),cn=0,an=P;cn<an.length;cn+=1){var Rn=an[cn],An=Rn.feature,Dn=Rn.id,Un=Rn.index,Kn=Rn.sourceLayerIndex,ha=he._featureFilter.needGeometry,ua={type:An.type,id:Dn,properties:An.properties,geometry:ha?$i(An):[]};if(!!he._featureFilter.filter(Hr,ua,$)){ha||(ua.geometry=$i(An));var Ba=void 0;if(gt){var Ca=he.getValueAndResolveTokens("text-field",ua,$,wr),Da=qi.factory(Ca);zm(Da)&&(this.hasRTLText=!0),(!this.hasRTLText||Ao()==="unavailable"||this.hasRTLText&&qa.isParsed())&&(Ba=Vy(Da,he,ua))}var li=void 0;if(bt){var za=he.getValueAndResolveTokens("icon-image",ua,$,wr);za instanceof No?li=za:li=No.fromString(za)}if(!(!Ba&&!li)){var Na=this.sortFeaturesByKey?Gt.evaluate(ua,{},$):void 0,mi={id:Dn,text:Ba,icon:li,index:Un,sourceLayerIndex:Kn,geometry:$i(An),properties:An.properties,type:Im[An.type],sortKey:Na};if(this.features.push(mi),li&&(lr[li.name]=!0),Ba){var oi=Te.evaluate(ua,{},$).join(","),Ni=xe.get("text-rotation-alignment")==="map"&&xe.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(ql.vertical)>=0;for(var ao=0,Bi=Ba.sections;ao<Bi.length;ao+=1){var Ui=Bi[ao];if(Ui.image)lr[Ui.image.name]=!0;else{var Ii=Lr(Ba.toString()),co=Ui.fontStack||oi,go=ir[co]=ir[co]||{};this.calculateGlyphDependencies(Ui.text,go,Ni,this.allowVerticalPlacement,Ii)}}}}}}xe.get("symbol-placement")==="line"&&(this.features=Hy(this.features)),this.sortFeaturesByKey&&this.features.sort(function(zo,Go){return zo.sortKey-Go.sortKey})}},no.prototype.update=function(P,N,$){!this.stateDependentLayers.length||(this.text.programConfigurations.updatePaintArrays(P,N,this.layers,$),this.icon.programConfigurations.updatePaintArrays(P,N,this.layers,$))},no.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},no.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},no.prototype.upload=function(P){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(P),this.iconCollisionBox.upload(P)),this.text.upload(P,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(P,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},no.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},no.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},no.prototype.addToLineVertexArray=function(P,N){var $=this.lineVertexArray.length;if(P.segment!==void 0){for(var he=P.dist(N[P.segment+1]),xe=P.dist(N[P.segment]),Te={},Ne=P.segment+1;Ne<N.length;Ne++)Te[Ne]={x:N[Ne].x,y:N[Ne].y,tileUnitDistanceFromAnchor:he},Ne<N.length-1&&(he+=N[Ne+1].dist(N[Ne]));for(var nt=P.segment||0;nt>=0;nt--)Te[nt]={x:N[nt].x,y:N[nt].y,tileUnitDistanceFromAnchor:xe},nt>0&&(xe+=N[nt-1].dist(N[nt]));for(var gt=0;gt<N.length;gt++){var bt=Te[gt];this.lineVertexArray.emplaceBack(bt.x,bt.y,bt.tileUnitDistanceFromAnchor)}}return{lineStartIndex:$,lineLength:this.lineVertexArray.length-$}},no.prototype.addSymbols=function(P,N,$,he,xe,Te,Ne,nt,gt,bt,Gt,lr){for(var ir=P.indexArray,wr=P.layoutVertexArray,Hr=P.segments.prepareSegment(4*N.length,wr,ir,Te.sortKey),cn=this.glyphOffsetArray.length,an=Hr.vertexLength,Rn=this.allowVerticalPlacement&&Ne===ql.vertical?Math.PI/2:0,An=Te.text&&Te.text.sections,Dn=0;Dn<N.length;Dn++){var Un=N[Dn],Kn=Un.tl,ha=Un.tr,ua=Un.bl,Ba=Un.br,Ca=Un.tex,Da=Un.pixelOffsetTL,li=Un.pixelOffsetBR,za=Un.minFontScaleX,Na=Un.minFontScaleY,mi=Un.glyphOffset,oi=Un.isSDF,Ni=Un.sectionIndex,ao=Hr.vertexLength,Bi=mi[1];Ev(wr,nt.x,nt.y,Kn.x,Bi+Kn.y,Ca.x,Ca.y,$,oi,Da.x,Da.y,za,Na),Ev(wr,nt.x,nt.y,ha.x,Bi+ha.y,Ca.x+Ca.w,Ca.y,$,oi,li.x,Da.y,za,Na),Ev(wr,nt.x,nt.y,ua.x,Bi+ua.y,Ca.x,Ca.y+Ca.h,$,oi,Da.x,li.y,za,Na),Ev(wr,nt.x,nt.y,Ba.x,Bi+Ba.y,Ca.x+Ca.w,Ca.y+Ca.h,$,oi,li.x,li.y,za,Na),kp(P.dynamicLayoutVertexArray,nt,Rn),ir.emplaceBack(ao,ao+1,ao+2),ir.emplaceBack(ao+1,ao+2,ao+3),Hr.vertexLength+=4,Hr.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(mi[0]),(Dn===N.length-1||Ni!==N[Dn+1].sectionIndex)&&P.programConfigurations.populatePaintArrays(wr.length,Te,Te.index,{},lr,An&&An[Ni])}P.placedSymbolArray.emplaceBack(nt.x,nt.y,cn,this.glyphOffsetArray.length-cn,an,gt,bt,nt.segment,$?$[0]:0,$?$[1]:0,he[0],he[1],Ne,0,!1,0,Gt)},no.prototype._addCollisionDebugVertex=function(P,N,$,he,xe,Te){return N.emplaceBack(0,0),P.emplaceBack($.x,$.y,he,xe,Math.round(Te.x),Math.round(Te.y))},no.prototype.addCollisionDebugVertices=function(P,N,$,he,xe,Te,Ne){var nt=xe.segments.prepareSegment(4,xe.layoutVertexArray,xe.indexArray),gt=nt.vertexLength,bt=xe.layoutVertexArray,Gt=xe.collisionVertexArray,lr=Ne.anchorX,ir=Ne.anchorY;this._addCollisionDebugVertex(bt,Gt,Te,lr,ir,new h(P,N)),this._addCollisionDebugVertex(bt,Gt,Te,lr,ir,new h($,N)),this._addCollisionDebugVertex(bt,Gt,Te,lr,ir,new h($,he)),this._addCollisionDebugVertex(bt,Gt,Te,lr,ir,new h(P,he)),nt.vertexLength+=4;var wr=xe.indexArray;wr.emplaceBack(gt,gt+1),wr.emplaceBack(gt+1,gt+2),wr.emplaceBack(gt+2,gt+3),wr.emplaceBack(gt+3,gt),nt.primitiveLength+=4},no.prototype.addDebugCollisionBoxes=function(P,N,$,he){for(var xe=P;xe<N;xe++){var Te=this.collisionBoxArray.get(xe),Ne=Te.x1,nt=Te.y1,gt=Te.x2,bt=Te.y2;this.addCollisionDebugVertices(Ne,nt,gt,bt,he?this.textCollisionBox:this.iconCollisionBox,Te.anchorPoint,$)}},no.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Fh(Cc,Pd.members,vc),this.iconCollisionBox=new Fh(Cc,Pd.members,vc);for(var P=0;P<this.symbolInstances.length;P++){var N=this.symbolInstances.get(P);this.addDebugCollisionBoxes(N.textBoxStartIndex,N.textBoxEndIndex,N,!0),this.addDebugCollisionBoxes(N.verticalTextBoxStartIndex,N.verticalTextBoxEndIndex,N,!0),this.addDebugCollisionBoxes(N.iconBoxStartIndex,N.iconBoxEndIndex,N,!1),this.addDebugCollisionBoxes(N.verticalIconBoxStartIndex,N.verticalIconBoxEndIndex,N,!1)}},no.prototype._deserializeCollisionBoxesForSymbol=function(P,N,$,he,xe,Te,Ne,nt,gt){for(var bt={},Gt=N;Gt<$;Gt++){var lr=P.get(Gt);bt.textBox={x1:lr.x1,y1:lr.y1,x2:lr.x2,y2:lr.y2,anchorPointX:lr.anchorPointX,anchorPointY:lr.anchorPointY},bt.textFeatureIndex=lr.featureIndex;break}for(var ir=he;ir<xe;ir++){var wr=P.get(ir);bt.verticalTextBox={x1:wr.x1,y1:wr.y1,x2:wr.x2,y2:wr.y2,anchorPointX:wr.anchorPointX,anchorPointY:wr.anchorPointY},bt.verticalTextFeatureIndex=wr.featureIndex;break}for(var Hr=Te;Hr<Ne;Hr++){var cn=P.get(Hr);bt.iconBox={x1:cn.x1,y1:cn.y1,x2:cn.x2,y2:cn.y2,anchorPointX:cn.anchorPointX,anchorPointY:cn.anchorPointY},bt.iconFeatureIndex=cn.featureIndex;break}for(var an=nt;an<gt;an++){var Rn=P.get(an);bt.verticalIconBox={x1:Rn.x1,y1:Rn.y1,x2:Rn.x2,y2:Rn.y2,anchorPointX:Rn.anchorPointX,anchorPointY:Rn.anchorPointY},bt.verticalIconFeatureIndex=Rn.featureIndex;break}return bt},no.prototype.deserializeCollisionBoxes=function(P){this.collisionArrays=[];for(var N=0;N<this.symbolInstances.length;N++){var $=this.symbolInstances.get(N);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(P,$.textBoxStartIndex,$.textBoxEndIndex,$.verticalTextBoxStartIndex,$.verticalTextBoxEndIndex,$.iconBoxStartIndex,$.iconBoxEndIndex,$.verticalIconBoxStartIndex,$.verticalIconBoxEndIndex))}},no.prototype.hasTextData=function(){return this.text.segments.get().length>0},no.prototype.hasIconData=function(){return this.icon.segments.get().length>0},no.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},no.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},no.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},no.prototype.addIndicesForPlacedSymbol=function(P,N){for(var $=P.placedSymbolArray.get(N),he=$.vertexStartIndex+$.numGlyphs*4,xe=$.vertexStartIndex;xe<he;xe+=4)P.indexArray.emplaceBack(xe,xe+1,xe+2),P.indexArray.emplaceBack(xe+1,xe+2,xe+3)},no.prototype.getSortedSymbolIndexes=function(P){if(this.sortedAngle===P&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var N=Math.sin(P),$=Math.cos(P),he=[],xe=[],Te=[],Ne=0;Ne<this.symbolInstances.length;++Ne){Te.push(Ne);var nt=this.symbolInstances.get(Ne);he.push(Math.round(N*nt.anchorX+$*nt.anchorY)|0),xe.push(nt.featureIndex)}return Te.sort(function(gt,bt){return he[gt]-he[bt]||xe[bt]-xe[gt]}),Te},no.prototype.addToSortKeyRanges=function(P,N){var $=this.sortKeyRanges[this.sortKeyRanges.length-1];$&&$.sortKey===N?$.symbolInstanceEnd=P+1:this.sortKeyRanges.push({sortKey:N,symbolInstanceStart:P,symbolInstanceEnd:P+1})},no.prototype.sortFeatures=function(P){var N=this;if(!!this.sortFeaturesByY&&this.sortedAngle!==P&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(P),this.sortedAngle=P,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var $=0,he=this.symbolInstanceIndexes;$<he.length;$+=1){var xe=he[$],Te=this.symbolInstances.get(xe);this.featureSortOrder.push(Te.featureIndex),[Te.rightJustifiedTextSymbolIndex,Te.centerJustifiedTextSymbolIndex,Te.leftJustifiedTextSymbolIndex].forEach(function(Ne,nt,gt){Ne>=0&&gt.indexOf(Ne)===nt&&N.addIndicesForPlacedSymbol(N.text,Ne)}),Te.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,Te.verticalPlacedTextSymbolIndex),Te.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Te.placedIconSymbolIndex),Te.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Te.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},Be("SymbolBucket",no,{omit:["layers","collisionBoxArray","features","compareText"]}),no.MAX_GLYPHS=65535,no.addDynamicAttributes=kp;function Om(L,P){return P.replace(/{([^{}]+)}/g,function(N,$){return $ in L?String(L[$]):""})}var Nm=new io({"symbol-placement":new Ua(Xt.layout_symbol["symbol-placement"]),"symbol-spacing":new Ua(Xt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Ua(Xt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ei(Xt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Ua(Xt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Ua(Xt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Ua(Xt.layout_symbol["icon-ignore-placement"]),"icon-optional":new Ua(Xt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Ua(Xt.layout_symbol["icon-rotation-alignment"]),"icon-size":new ei(Xt.layout_symbol["icon-size"]),"icon-text-fit":new Ua(Xt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Ua(Xt.layout_symbol["icon-text-fit-padding"]),"icon-image":new ei(Xt.layout_symbol["icon-image"]),"icon-rotate":new ei(Xt.layout_symbol["icon-rotate"]),"icon-padding":new Ua(Xt.layout_symbol["icon-padding"]),"icon-keep-upright":new Ua(Xt.layout_symbol["icon-keep-upright"]),"icon-offset":new ei(Xt.layout_symbol["icon-offset"]),"icon-anchor":new ei(Xt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Ua(Xt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Ua(Xt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Ua(Xt.layout_symbol["text-rotation-alignment"]),"text-field":new ei(Xt.layout_symbol["text-field"]),"text-font":new ei(Xt.layout_symbol["text-font"]),"text-size":new ei(Xt.layout_symbol["text-size"]),"text-max-width":new ei(Xt.layout_symbol["text-max-width"]),"text-line-height":new Ua(Xt.layout_symbol["text-line-height"]),"text-letter-spacing":new ei(Xt.layout_symbol["text-letter-spacing"]),"text-justify":new ei(Xt.layout_symbol["text-justify"]),"text-radial-offset":new ei(Xt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Ua(Xt.layout_symbol["text-variable-anchor"]),"text-anchor":new ei(Xt.layout_symbol["text-anchor"]),"text-max-angle":new Ua(Xt.layout_symbol["text-max-angle"]),"text-writing-mode":new Ua(Xt.layout_symbol["text-writing-mode"]),"text-rotate":new ei(Xt.layout_symbol["text-rotate"]),"text-padding":new Ua(Xt.layout_symbol["text-padding"]),"text-keep-upright":new Ua(Xt.layout_symbol["text-keep-upright"]),"text-transform":new ei(Xt.layout_symbol["text-transform"]),"text-offset":new ei(Xt.layout_symbol["text-offset"]),"text-allow-overlap":new Ua(Xt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Ua(Xt.layout_symbol["text-ignore-placement"]),"text-optional":new Ua(Xt.layout_symbol["text-optional"])}),Bm=new io({"icon-opacity":new ei(Xt.paint_symbol["icon-opacity"]),"icon-color":new ei(Xt.paint_symbol["icon-color"]),"icon-halo-color":new ei(Xt.paint_symbol["icon-halo-color"]),"icon-halo-width":new ei(Xt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ei(Xt.paint_symbol["icon-halo-blur"]),"icon-translate":new Ua(Xt.paint_symbol["icon-translate"]),"icon-translate-anchor":new Ua(Xt.paint_symbol["icon-translate-anchor"]),"text-opacity":new ei(Xt.paint_symbol["text-opacity"]),"text-color":new ei(Xt.paint_symbol["text-color"],{runtimeType:Gn,getOverride:function(L){return L.textColor},hasOverride:function(L){return!!L.textColor}}),"text-halo-color":new ei(Xt.paint_symbol["text-halo-color"]),"text-halo-width":new ei(Xt.paint_symbol["text-halo-width"]),"text-halo-blur":new ei(Xt.paint_symbol["text-halo-blur"]),"text-translate":new Ua(Xt.paint_symbol["text-translate"]),"text-translate-anchor":new Ua(Xt.paint_symbol["text-translate-anchor"])}),Lp={paint:Bm,layout:Nm},Zc=function(P){this.type=P.property.overrides?P.property.overrides.runtimeType:Tr,this.defaultValue=P};Zc.prototype.evaluate=function(P){if(P.formattedSection){var N=this.defaultValue.property.overrides;if(N&&N.hasOverride(P.formattedSection))return N.getOverride(P.formattedSection)}return P.feature&&P.featureState?this.defaultValue.evaluate(P.feature,P.featureState):this.defaultValue.property.specification.default},Zc.prototype.eachChild=function(P){if(!this.defaultValue.isConstant()){var N=this.defaultValue.value;P(N._styleExpression.expression)}},Zc.prototype.outputDefined=function(){return!1},Zc.prototype.serialize=function(){return null},Be("FormatSectionOverride",Zc,{omit:["defaultValue"]});var Um=function(L){function P(N){L.call(this,N,Lp)}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype.recalculate=function($,he){if(L.prototype.recalculate.call(this,$,he),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var xe=this.layout.get("text-writing-mode");if(xe){for(var Te=[],Ne=0,nt=xe;Ne<nt.length;Ne+=1){var gt=nt[Ne];Te.indexOf(gt)<0&&Te.push(gt)}this.layout._values["text-writing-mode"]=Te}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},P.prototype.getValueAndResolveTokens=function($,he,xe,Te){var Ne=this.layout.get($).evaluate(he,{},xe,Te),nt=this._unevaluatedLayout._values[$];return!nt.isDataDriven()&&!Po(nt.value)&&Ne?Om(he.properties,Ne):Ne},P.prototype.createBucket=function($){return new no($)},P.prototype.queryRadius=function(){return 0},P.prototype.queryIntersectsFeature=function(){return!1},P.prototype._setPaintOverrides=function(){for(var $=0,he=Lp.paint.overridableProperties;$<he.length;$+=1){var xe=he[$];if(!!P.hasPaintOverride(this.layout,xe)){var Te=this.paint.get(xe),Ne=new Zc(Te),nt=new ks(Ne,Te.property.specification),gt=null;Te.value.kind==="constant"||Te.value.kind==="source"?gt=new ku("source",nt):gt=new Ls("composite",nt,Te.value.zoomStops,Te.value._interpolationType),this.paint._values[xe]=new ro(Te.property,gt,Te.parameters)}}},P.prototype._handleOverridablePaintPropertyUpdate=function($,he,xe){return!this.layout||he.isDataDriven()||xe.isDataDriven()?!1:P.hasPaintOverride(this.layout,$)},P.hasPaintOverride=function($,he){var xe=$.get("text-field"),Te=Lp.paint.properties[he],Ne=!1,nt=function(Gt){for(var lr=0,ir=Gt;lr<ir.length;lr+=1){var wr=ir[lr];if(Te.overrides&&Te.overrides.hasOverride(wr)){Ne=!0;return}}};if(xe.value.kind==="constant"&&xe.value.value instanceof qi)nt(xe.value.value.sections);else if(xe.value.kind==="source"){var gt=function(Gt){if(!Ne)if(Gt instanceof lo&&Gi(Gt.value)===wa){var lr=Gt.value;nt(lr.sections)}else Gt instanceof _s?nt(Gt.sections):Gt.eachChild(gt)},bt=xe.value;bt._styleExpression&&gt(bt._styleExpression.expression)}return Ne},P}(Us),Vm=new io({"background-color":new Ua(Xt.paint_background["background-color"]),"background-pattern":new vo(Xt.paint_background["background-pattern"]),"background-opacity":new Ua(Xt.paint_background["background-opacity"])}),Hm={paint:Vm},Gm=function(L){function P(N){L.call(this,N,Hm)}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P}(Us),Ym=new io({"raster-opacity":new Ua(Xt.paint_raster["raster-opacity"]),"raster-hue-rotate":new Ua(Xt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Ua(Xt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Ua(Xt.paint_raster["raster-brightness-max"]),"raster-saturation":new Ua(Xt.paint_raster["raster-saturation"]),"raster-contrast":new Ua(Xt.paint_raster["raster-contrast"]),"raster-resampling":new Ua(Xt.paint_raster["raster-resampling"]),"raster-fade-duration":new Ua(Xt.paint_raster["raster-fade-duration"])}),Wm={paint:Ym},jm=function(L){function P(N){L.call(this,N,Wm)}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P}(Us);function Xm(L){var P=[],N=L.id;return N===void 0&&P.push({message:"layers."+N+': missing required property "id"'}),L.render===void 0&&P.push({message:"layers."+N+': missing required method "render"'}),L.renderingMode&&L.renderingMode!=="2d"&&L.renderingMode!=="3d"&&P.push({message:"layers."+N+': property "renderingMode" must be either "2d" or "3d"'}),P}var Zm=function(L){function P(N){L.call(this,N,{}),this.implementation=N}return L&&(P.__proto__=L),P.prototype=Object.create(L&&L.prototype),P.prototype.constructor=P,P.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},P.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},P.prototype.recalculate=function(){},P.prototype.updateTransitions=function(){},P.prototype.hasTransition=function(){},P.prototype.serialize=function(){},P.prototype.onAdd=function($){this.implementation.onAdd&&this.implementation.onAdd($,$.painter.context.gl)},P.prototype.onRemove=function($){this.implementation.onRemove&&this.implementation.onRemove($,$.painter.context.gl)},P}(Us),Km={circle:Ag,heatmap:Cg,hillshade:Pg,fill:ry,"fill-extrusion":_y,line:Fy,symbol:Um,background:Gm,raster:jm};function Jm(L){return L.type==="custom"?new Zm(L):new Km[L.type](L)}var a0=self.HTMLImageElement,i0=self.HTMLCanvasElement,o0=self.HTMLVideoElement,s0=self.ImageData,Cv=self.ImageBitmap,mc=function(P,N,$,he){this.context=P,this.format=$,this.texture=P.gl.createTexture(),this.update(N,he)};mc.prototype.update=function(P,N,$){var he=P.width,xe=P.height,Te=(!this.size||this.size[0]!==he||this.size[1]!==xe)&&!$,Ne=this,nt=Ne.context,gt=nt.gl;if(this.useMipmap=Boolean(N&&N.useMipmap),gt.bindTexture(gt.TEXTURE_2D,this.texture),nt.pixelStoreUnpackFlipY.set(!1),nt.pixelStoreUnpack.set(1),nt.pixelStoreUnpackPremultiplyAlpha.set(this.format===gt.RGBA&&(!N||N.premultiply!==!1)),Te)this.size=[he,xe],P instanceof a0||P instanceof i0||P instanceof o0||P instanceof s0||Cv&&P instanceof Cv?gt.texImage2D(gt.TEXTURE_2D,0,this.format,this.format,gt.UNSIGNED_BYTE,P):gt.texImage2D(gt.TEXTURE_2D,0,this.format,he,xe,0,this.format,gt.UNSIGNED_BYTE,P.data);else{var bt=$||{x:0,y:0},Gt=bt.x,lr=bt.y;P instanceof a0||P instanceof i0||P instanceof o0||P instanceof s0||Cv&&P instanceof Cv?gt.texSubImage2D(gt.TEXTURE_2D,0,Gt,lr,gt.RGBA,gt.UNSIGNED_BYTE,P):gt.texSubImage2D(gt.TEXTURE_2D,0,Gt,lr,he,xe,gt.RGBA,gt.UNSIGNED_BYTE,P.data)}this.useMipmap&&this.isSizePowerOfTwo()&&gt.generateMipmap(gt.TEXTURE_2D)},mc.prototype.bind=function(P,N,$){var he=this,xe=he.context,Te=xe.gl;Te.bindTexture(Te.TEXTURE_2D,this.texture),$===Te.LINEAR_MIPMAP_NEAREST&&!this.isSizePowerOfTwo()&&($=Te.LINEAR),P!==this.filter&&(Te.texParameteri(Te.TEXTURE_2D,Te.TEXTURE_MAG_FILTER,P),Te.texParameteri(Te.TEXTURE_2D,Te.TEXTURE_MIN_FILTER,$||P),this.filter=P),N!==this.wrap&&(Te.texParameteri(Te.TEXTURE_2D,Te.TEXTURE_WRAP_S,N),Te.texParameteri(Te.TEXTURE_2D,Te.TEXTURE_WRAP_T,N),this.wrap=N)},mc.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1===0},mc.prototype.destroy=function(){var P=this.context,N=P.gl;N.deleteTexture(this.texture),this.texture=null};var Pp=function(P){var N=this;this._callback=P,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){N._triggered=!1,N._callback()})};Pp.prototype.trigger=function(){var P=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){P._triggered=!1,P._callback()},0))},Pp.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Kc=function(P,N,$){this.target=P,this.parent=N,this.mapId=$,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},S(["receive","process"],this),this.invoker=new Pp(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=Q()?P:self};Kc.prototype.send=function(P,N,$,he,xe){var Te=this;xe===void 0&&(xe=!1);var Ne=Math.round(Math.random()*1e18).toString(36).substring(0,10);$&&(this.callbacks[Ne]=$);var nt=re(this.globalScope)?void 0:[];return this.target.postMessage({id:Ne,type:P,hasCallback:!!$,targetMapId:he,mustQueue:xe,sourceMapId:this.mapId,data:Ot(N,nt)},nt),{cancel:function(){$&&delete Te.callbacks[Ne],Te.target.postMessage({id:Ne,type:"<cancel>",targetMapId:he,sourceMapId:Te.mapId})}}},Kc.prototype.receive=function(P){var N=P.data,$=N.id;if(!!$&&!(N.targetMapId&&this.mapId!==N.targetMapId))if(N.type==="<cancel>"){delete this.tasks[$];var he=this.cancelCallbacks[$];delete this.cancelCallbacks[$],he&&he()}else Q()||N.mustQueue?(this.tasks[$]=N,this.taskQueue.push($),this.invoker.trigger()):this.processTask($,N)},Kc.prototype.process=function(){if(!!this.taskQueue.length){var P=this.taskQueue.shift(),N=this.tasks[P];delete this.tasks[P],this.taskQueue.length&&this.invoker.trigger(),N&&this.processTask(P,N)}},Kc.prototype.processTask=function(P,N){var $=this;if(N.type==="<response>"){var he=this.callbacks[P];delete this.callbacks[P],he&&(N.error?he(er(N.error)):he(null,er(N.data)))}else{var xe=!1,Te=re(this.globalScope)?void 0:[],Ne=N.hasCallback?function(lr,ir){xe=!0,delete $.cancelCallbacks[P],$.target.postMessage({id:P,type:"<response>",sourceMapId:$.mapId,error:lr?Ot(lr):null,data:Ot(ir,Te)},Te)}:function(lr){xe=!0},nt=null,gt=er(N.data);if(this.parent[N.type])nt=this.parent[N.type](N.sourceMapId,gt,Ne);else if(this.parent.getWorkerSource){var bt=N.type.split("."),Gt=this.parent.getWorkerSource(N.sourceMapId,bt[0],gt.source);nt=Gt[bt[1]](gt,Ne)}else Ne(new Error("Could not find function "+N.type));!xe&&nt&&nt.cancel&&(this.cancelCallbacks[P]=nt.cancel)}},Kc.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};function Qm(L,P,N){P=Math.pow(2,N)-P-1;var $=l0(L*256,P*256,N),he=l0((L+1)*256,(P+1)*256,N);return $[0]+","+$[1]+","+he[0]+","+he[1]}function l0(L,P,N){var $=2*Math.PI*6378137/256/Math.pow(2,N),he=L*$-2*Math.PI*6378137/2,xe=P*$-2*Math.PI*6378137/2;return[he,xe]}var rs=function(P,N){P&&(N?this.setSouthWest(P).setNorthEast(N):P.length===4?this.setSouthWest([P[0],P[1]]).setNorthEast([P[2],P[3]]):this.setSouthWest(P[0]).setNorthEast(P[1]))};rs.prototype.setNorthEast=function(P){return this._ne=P instanceof Mo?new Mo(P.lng,P.lat):Mo.convert(P),this},rs.prototype.setSouthWest=function(P){return this._sw=P instanceof Mo?new Mo(P.lng,P.lat):Mo.convert(P),this},rs.prototype.extend=function(P){var N=this._sw,$=this._ne,he,xe;if(P instanceof Mo)he=P,xe=P;else if(P instanceof rs){if(he=P._sw,xe=P._ne,!he||!xe)return this}else{if(Array.isArray(P))if(P.length===4||P.every(Array.isArray)){var Te=P;return this.extend(rs.convert(Te))}else{var Ne=P;return this.extend(Mo.convert(Ne))}return this}return!N&&!$?(this._sw=new Mo(he.lng,he.lat),this._ne=new Mo(xe.lng,xe.lat)):(N.lng=Math.min(he.lng,N.lng),N.lat=Math.min(he.lat,N.lat),$.lng=Math.max(xe.lng,$.lng),$.lat=Math.max(xe.lat,$.lat)),this},rs.prototype.getCenter=function(){return new Mo((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},rs.prototype.getSouthWest=function(){return this._sw},rs.prototype.getNorthEast=function(){return this._ne},rs.prototype.getNorthWest=function(){return new Mo(this.getWest(),this.getNorth())},rs.prototype.getSouthEast=function(){return new Mo(this.getEast(),this.getSouth())},rs.prototype.getWest=function(){return this._sw.lng},rs.prototype.getSouth=function(){return this._sw.lat},rs.prototype.getEast=function(){return this._ne.lng},rs.prototype.getNorth=function(){return this._ne.lat},rs.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},rs.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},rs.prototype.isEmpty=function(){return!(this._sw&&this._ne)},rs.prototype.contains=function(P){var N=Mo.convert(P),$=N.lng,he=N.lat,xe=this._sw.lat<=he&&he<=this._ne.lat,Te=this._sw.lng<=$&&$<=this._ne.lng;return this._sw.lng>this._ne.lng&&(Te=this._sw.lng>=$&&$>=this._ne.lng),xe&&Te},rs.convert=function(P){return!P||P instanceof rs?P:new rs(P)};var u0=63710088e-1,Mo=function(P,N){if(isNaN(P)||isNaN(N))throw new Error("Invalid LngLat object: ("+P+", "+N+")");if(this.lng=+P,this.lat=+N,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Mo.prototype.wrap=function(){return new Mo(m(this.lng,-180,180),this.lat)},Mo.prototype.toArray=function(){return[this.lng,this.lat]},Mo.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Mo.prototype.distanceTo=function(P){var N=Math.PI/180,$=this.lat*N,he=P.lat*N,xe=Math.sin($)*Math.sin(he)+Math.cos($)*Math.cos(he)*Math.cos((P.lng-this.lng)*N),Te=u0*Math.acos(Math.min(xe,1));return Te},Mo.prototype.toBounds=function(P){P===void 0&&(P=0);var N=40075017,$=360*P/N,he=$/Math.cos(Math.PI/180*this.lat);return new rs(new Mo(this.lng-he,this.lat-$),new Mo(this.lng+he,this.lat+$))},Mo.convert=function(P){if(P instanceof Mo)return P;if(Array.isArray(P)&&(P.length===2||P.length===3))return new Mo(Number(P[0]),Number(P[1]));if(!Array.isArray(P)&&typeof P=="object"&&P!==null)return new Mo(Number("lng"in P?P.lng:P.lon),Number(P.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var f0=2*Math.PI*u0;function c0(L){return f0*Math.cos(L*Math.PI/180)}function h0(L){return(180+L)/360}function v0(L){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+L*Math.PI/360)))/360}function p0(L,P){return L/c0(P)}function $m(L){return L*360-180}function Dp(L){var P=180-L*360;return 360/Math.PI*Math.atan(Math.exp(P*Math.PI/180))-90}function qm(L,P){return L*c0(Dp(P))}function e1(L){return 1/Math.cos(L*Math.PI/180)}var xc=function(P,N,$){$===void 0&&($=0),this.x=+P,this.y=+N,this.z=+$};xc.fromLngLat=function(P,N){N===void 0&&(N=0);var $=Mo.convert(P);return new xc(h0($.lng),v0($.lat),p0(N,$.lat))},xc.prototype.toLngLat=function(){return new Mo($m(this.x),Dp(this.y))},xc.prototype.toAltitude=function(){return qm(this.z,this.y)},xc.prototype.meterInMercatorCoordinateUnits=function(){return 1/f0*e1(Dp(this.y))};var bc=function(P,N,$){this.z=P,this.x=N,this.y=$,this.key=zh(0,P,P,N,$)};bc.prototype.equals=function(P){return this.z===P.z&&this.x===P.x&&this.y===P.y},bc.prototype.url=function(P,N){var $=Qm(this.x,this.y,this.z),he=t1(this.z,this.x,this.y);return P[(this.x+this.y)%P.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(N==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",he).replace("{bbox-epsg-3857}",$)},bc.prototype.getTilePoint=function(P){var N=Math.pow(2,this.z);return new h((P.x*N-this.x)*Wa,(P.y*N-this.y)*Wa)},bc.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var d0=function(P,N){this.wrap=P,this.canonical=N,this.key=zh(P,N.z,N.z,N.x,N.y)},ns=function(P,N,$,he,xe){this.overscaledZ=P,this.wrap=N,this.canonical=new bc($,+he,+xe),this.key=zh(N,P,$,he,xe)};ns.prototype.equals=function(P){return this.overscaledZ===P.overscaledZ&&this.wrap===P.wrap&&this.canonical.equals(P.canonical)},ns.prototype.scaledTo=function(P){var N=this.canonical.z-P;return P>this.canonical.z?new ns(P,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new ns(P,this.wrap,P,this.canonical.x>>N,this.canonical.y>>N)},ns.prototype.calculateScaledKey=function(P,N){var $=this.canonical.z-P;return P>this.canonical.z?zh(this.wrap*+N,P,this.canonical.z,this.canonical.x,this.canonical.y):zh(this.wrap*+N,P,P,this.canonical.x>>$,this.canonical.y>>$)},ns.prototype.isChildOf=function(P){if(P.wrap!==this.wrap)return!1;var N=this.canonical.z-P.canonical.z;return P.overscaledZ===0||P.overscaledZ<this.overscaledZ&&P.canonical.x===this.canonical.x>>N&&P.canonical.y===this.canonical.y>>N},ns.prototype.children=function(P){if(this.overscaledZ>=P)return[new ns(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var N=this.canonical.z+1,$=this.canonical.x*2,he=this.canonical.y*2;return[new ns(N,this.wrap,N,$,he),new ns(N,this.wrap,N,$+1,he),new ns(N,this.wrap,N,$,he+1),new ns(N,this.wrap,N,$+1,he+1)]},ns.prototype.isLessThan=function(P){return this.wrap<P.wrap?!0:this.wrap>P.wrap?!1:this.overscaledZ<P.overscaledZ?!0:this.overscaledZ>P.overscaledZ?!1:this.canonical.x<P.canonical.x?!0:this.canonical.x>P.canonical.x?!1:this.canonical.y<P.canonical.y},ns.prototype.wrapped=function(){return new ns(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},ns.prototype.unwrapTo=function(P){return new ns(this.overscaledZ,P,this.canonical.z,this.canonical.x,this.canonical.y)},ns.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},ns.prototype.toUnwrapped=function(){return new d0(this.wrap,this.canonical)},ns.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},ns.prototype.getTilePoint=function(P){return this.canonical.getTilePoint(new xc(P.x-this.wrap,P.y))};function zh(L,P,N,$,he){L*=2,L<0&&(L=L*-1-1);var xe=1<<N;return(xe*xe*L+xe*he+$).toString(36)+N.toString(36)+P.toString(36)}function t1(L,P,N){for(var $="",he,xe=L;xe>0;xe--)he=1<<xe-1,$+=(P&he?1:0)+(N&he?2:0);return $}Be("CanonicalTileID",bc),Be("OverscaledTileID",ns,{omit:["posMatrix"]});var Ff=function(P,N,$){if(this.uid=P,N.height!==N.width)throw new RangeError("DEM tiles must be square");if($&&$!=="mapbox"&&$!=="terrarium")return O('"'+$+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=N.height;var he=this.dim=N.height-2;this.data=new Uint32Array(N.data.buffer),this.encoding=$||"mapbox";for(var xe=0;xe<he;xe++)this.data[this._idx(-1,xe)]=this.data[this._idx(0,xe)],this.data[this._idx(he,xe)]=this.data[this._idx(he-1,xe)],this.data[this._idx(xe,-1)]=this.data[this._idx(xe,0)],this.data[this._idx(xe,he)]=this.data[this._idx(xe,he-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(he,-1)]=this.data[this._idx(he-1,0)],this.data[this._idx(-1,he)]=this.data[this._idx(0,he-1)],this.data[this._idx(he,he)]=this.data[this._idx(he-1,he-1)]};Ff.prototype.get=function(P,N){var $=new Uint8Array(this.data.buffer),he=this._idx(P,N)*4,xe=this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox;return xe($[he],$[he+1],$[he+2])},Ff.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},Ff.prototype._idx=function(P,N){if(P<-1||P>=this.dim+1||N<-1||N>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(N+1)*this.stride+(P+1)},Ff.prototype._unpackMapbox=function(P,N,$){return(P*256*256+N*256+$)/10-1e4},Ff.prototype._unpackTerrarium=function(P,N,$){return P*256+N+$/256-32768},Ff.prototype.getPixels=function(){return new Ml({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},Ff.prototype.backfillBorder=function(P,N,$){if(this.dim!==P.dim)throw new Error("dem dimension mismatch");var he=N*this.dim,xe=N*this.dim+this.dim,Te=$*this.dim,Ne=$*this.dim+this.dim;switch(N){case-1:he=xe-1;break;case 1:xe=he+1;break}switch($){case-1:Te=Ne-1;break;case 1:Ne=Te+1;break}for(var nt=-N*this.dim,gt=-$*this.dim,bt=Te;bt<Ne;bt++)for(var Gt=he;Gt<xe;Gt++)this.data[this._idx(Gt,bt)]=P.data[this._idx(Gt+nt,bt+gt)]},Be("DEMData",Ff);function r1(L,P){var N={};if(!P)return N;for(var $=function(){var Te=xe[he],Ne=Te.layerIds.map(function(Gt){return P.getLayer(Gt)}).filter(Boolean);if(Ne.length!==0){Te.layers=Ne,Te.stateDependentLayerIds&&(Te.stateDependentLayers=Te.stateDependentLayerIds.map(function(Gt){return Ne.filter(function(lr){return lr.id===Gt})[0]}));for(var nt=0,gt=Ne;nt<gt.length;nt+=1){var bt=gt[nt];N[bt.id]=Te}}},he=0,xe=L;he<xe.length;he+=1)$();return N}var kv=function(P){this._stringToNumber={},this._numberToString=[];for(var N=0;N<P.length;N++){var $=P[N];this._stringToNumber[$]=N,this._numberToString[N]=$}};kv.prototype.encode=function(P){return this._stringToNumber[P]},kv.prototype.decode=function(P){return this._numberToString[P]};var Lv=function(P,N,$,he,xe){this.type="Feature",this._vectorTileFeature=P,P._z=N,P._x=$,P._y=he,this.properties=P.properties,this.id=xe},Rp={geometry:{configurable:!0}};Rp.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Rp.geometry.set=function(L){this._geometry=L},Lv.prototype.toJSON=function(){var P={geometry:this.geometry};for(var N in this)N==="_geometry"||N==="_vectorTileFeature"||(P[N]=this[N]);return P},Object.defineProperties(Lv.prototype,Rp);var Jc=function(){this.state={},this.stateChanges={},this.deletedStates={}};Jc.prototype.updateState=function(P,N,$){var he=String(N);if(this.stateChanges[P]=this.stateChanges[P]||{},this.stateChanges[P][he]=this.stateChanges[P][he]||{},A(this.stateChanges[P][he],$),this.deletedStates[P]===null){this.deletedStates[P]={};for(var xe in this.state[P])xe!==he&&(this.deletedStates[P][xe]=null)}else{var Te=this.deletedStates[P]&&this.deletedStates[P][he]===null;if(Te){this.deletedStates[P][he]={};for(var Ne in this.state[P][he])$[Ne]||(this.deletedStates[P][he][Ne]=null)}else for(var nt in $){var gt=this.deletedStates[P]&&this.deletedStates[P][he]&&this.deletedStates[P][he][nt]===null;gt&&delete this.deletedStates[P][he][nt]}}},Jc.prototype.removeFeatureState=function(P,N,$){var he=this.deletedStates[P]===null;if(!he){var xe=String(N);if(this.deletedStates[P]=this.deletedStates[P]||{},$&&N!==void 0)this.deletedStates[P][xe]!==null&&(this.deletedStates[P][xe]=this.deletedStates[P][xe]||{},this.deletedStates[P][xe][$]=null);else if(N!==void 0){var Te=this.stateChanges[P]&&this.stateChanges[P][xe];if(Te){this.deletedStates[P][xe]={};for($ in this.stateChanges[P][xe])this.deletedStates[P][xe][$]=null}else this.deletedStates[P][xe]=null}else this.deletedStates[P]=null}},Jc.prototype.getState=function(P,N){var $=String(N),he=this.state[P]||{},xe=this.stateChanges[P]||{},Te=A({},he[$],xe[$]);if(this.deletedStates[P]===null)return{};if(this.deletedStates[P]){var Ne=this.deletedStates[P][N];if(Ne===null)return{};for(var nt in Ne)delete Te[nt]}return Te},Jc.prototype.initializeTileState=function(P,N){P.setFeatureState(this.state,N)},Jc.prototype.coalesceChanges=function(P,N){var $={};for(var he in this.stateChanges){this.state[he]=this.state[he]||{};var xe={};for(var Te in this.stateChanges[he])this.state[he][Te]||(this.state[he][Te]={}),A(this.state[he][Te],this.stateChanges[he][Te]),xe[Te]=this.state[he][Te];$[he]=xe}for(var Ne in this.deletedStates){this.state[Ne]=this.state[Ne]||{};var nt={};if(this.deletedStates[Ne]===null)for(var gt in this.state[Ne])nt[gt]={},this.state[Ne][gt]={};else for(var bt in this.deletedStates[Ne]){var Gt=this.deletedStates[Ne][bt]===null;if(Gt)this.state[Ne][bt]={};else for(var lr=0,ir=Object.keys(this.deletedStates[Ne][bt]);lr<ir.length;lr+=1){var wr=ir[lr];delete this.state[Ne][bt][wr]}nt[bt]=this.state[Ne][bt]}$[Ne]=$[Ne]||{},A($[Ne],nt)}if(this.stateChanges={},this.deletedStates={},Object.keys($).length!==0)for(var Hr in P){var cn=P[Hr];cn.setFeatureState($,N)}};var zf=function(P,N){this.tileID=P,this.x=P.canonical.x,this.y=P.canonical.y,this.z=P.canonical.z,this.grid=new Yo(Wa,16,0),this.grid3D=new Yo(Wa,16,0),this.featureIndexArray=new wh,this.promoteId=N};zf.prototype.insert=function(P,N,$,he,xe,Te){var Ne=this.featureIndexArray.length;this.featureIndexArray.emplaceBack($,he,xe);for(var nt=Te?this.grid3D:this.grid,gt=0;gt<N.length;gt++){for(var bt=N[gt],Gt=[1/0,1/0,-1/0,-1/0],lr=0;lr<bt.length;lr++){var ir=bt[lr];Gt[0]=Math.min(Gt[0],ir.x),Gt[1]=Math.min(Gt[1],ir.y),Gt[2]=Math.max(Gt[2],ir.x),Gt[3]=Math.max(Gt[3],ir.y)}Gt[0]<Wa&&Gt[1]<Wa&&Gt[2]>=0&&Gt[3]>=0&&nt.insert(Ne,Gt[0],Gt[1],Gt[2],Gt[3])}},zf.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Nc.VectorTile(new xv(this.rawTileData)).layers,this.sourceLayerCoder=new kv(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},zf.prototype.query=function(P,N,$,he){var xe=this;this.loadVTLayers();for(var Te=P.params||{},Ne=Wa/P.tileSize/P.scale,nt=bf(Te.filter),gt=P.queryGeometry,bt=P.queryPadding*Ne,Gt=y0(gt),lr=this.grid.query(Gt.minX-bt,Gt.minY-bt,Gt.maxX+bt,Gt.maxY+bt),ir=y0(P.cameraQueryGeometry),wr=this.grid3D.query(ir.minX-bt,ir.minY-bt,ir.maxX+bt,ir.maxY+bt,function(Kn,ha,ua,Ba){return Sf(P.cameraQueryGeometry,Kn-bt,ha-bt,ua+bt,Ba+bt)}),Hr=0,cn=wr;Hr<cn.length;Hr+=1){var an=cn[Hr];lr.push(an)}lr.sort(n1);for(var Rn={},An,Dn=function(Kn){var ha=lr[Kn];if(ha!==An){An=ha;var ua=xe.featureIndexArray.get(ha),Ba=null;xe.loadMatchingFeature(Rn,ua.bucketIndex,ua.sourceLayerIndex,ua.featureIndex,nt,Te.layers,Te.availableImages,N,$,he,function(Ca,Da,li){return Ba||(Ba=$i(Ca)),Da.queryIntersectsFeature(gt,Ca,li,Ba,xe.z,P.transform,Ne,P.pixelPosMatrix)})}},Un=0;Un<lr.length;Un++)Dn(Un);return Rn},zf.prototype.loadMatchingFeature=function(P,N,$,he,xe,Te,Ne,nt,gt,bt,Gt){var lr=this.bucketLayerIDs[N];if(!(Te&&!D(Te,lr))){var ir=this.sourceLayerCoder.decode($),wr=this.vtLayers[ir],Hr=wr.feature(he);if(!!xe.filter(new di(this.tileID.overscaledZ),Hr))for(var cn=this.getId(Hr,ir),an=0;an<lr.length;an++){var Rn=lr[an];if(!(Te&&Te.indexOf(Rn)<0)){var An=nt[Rn];if(!!An){var Dn={};cn!==void 0&&bt&&(Dn=bt.getState(An.sourceLayer||"_geojsonTileLayer",cn));var Un=gt[Rn];Un.paint=g0(Un.paint,An.paint,Hr,Dn,Ne),Un.layout=g0(Un.layout,An.layout,Hr,Dn,Ne);var Kn=!Gt||Gt(Hr,An,Dn);if(!!Kn){var ha=new Lv(Hr,this.z,this.x,this.y,cn);ha.layer=Un;var ua=P[Rn];ua===void 0&&(ua=P[Rn]=[]),ua.push({featureIndex:he,feature:ha,intersectionZ:Kn})}}}}}},zf.prototype.lookupSymbolFeatures=function(P,N,$,he,xe,Te,Ne,nt){var gt={};this.loadVTLayers();for(var bt=bf(xe),Gt=0,lr=P;Gt<lr.length;Gt+=1){var ir=lr[Gt];this.loadMatchingFeature(gt,$,he,ir,bt,Te,Ne,nt,N)}return gt},zf.prototype.hasLayer=function(P){for(var N=0,$=this.bucketLayerIDs;N<$.length;N+=1)for(var he=$[N],xe=0,Te=he;xe<Te.length;xe+=1){var Ne=Te[xe];if(P===Ne)return!0}return!1},zf.prototype.getId=function(P,N){var $=P.id;if(this.promoteId){var he=typeof this.promoteId=="string"?this.promoteId:this.promoteId[N];$=P.properties[he],typeof $=="boolean"&&($=Number($))}return $},Be("FeatureIndex",zf,{omit:["rawTileData","sourceLayerCoder"]});function g0(L,P,N,$,he){return C(L,function(xe,Te){var Ne=P instanceof Qi?P.get(Te):null;return Ne&&Ne.evaluate?Ne.evaluate(N,$,he):Ne})}function y0(L){for(var P=1/0,N=1/0,$=-1/0,he=-1/0,xe=0,Te=L;xe<Te.length;xe+=1){var Ne=Te[xe];P=Math.min(P,Ne.x),N=Math.min(N,Ne.y),$=Math.max($,Ne.x),he=Math.max(he,Ne.y)}return{minX:P,minY:N,maxX:$,maxY:he}}function n1(L,P){return P-L}var a1=3e4,ys=function(P,N){this.tileID=P,this.uid=b(),this.uses=0,this.tileSize=N,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};ys.prototype.registerFadeDuration=function(P){var N=P+this.timeAdded;N<q.now()||this.fadeEndTime&&N<this.fadeEndTime||(this.fadeEndTime=N)},ys.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},ys.prototype.loadVectorData=function(P,N,$){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",!P){this.collisionBoxArray=new Mf;return}P.featureIndex&&(this.latestFeatureIndex=P.featureIndex,P.rawTileData?(this.latestRawTileData=P.rawTileData,this.latestFeatureIndex.rawTileData=P.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=P.collisionBoxArray,this.buckets=r1(P.buckets,N.style),this.hasSymbolBuckets=!1;for(var he in this.buckets){var xe=this.buckets[he];if(xe instanceof no)if(this.hasSymbolBuckets=!0,$)xe.justReloaded=!0;else break}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var Te in this.buckets){var Ne=this.buckets[Te];if(Ne instanceof no&&Ne.hasRTLText){this.hasRTLText=!0,Oi();break}}this.queryPadding=0;for(var nt in this.buckets){var gt=this.buckets[nt];this.queryPadding=Math.max(this.queryPadding,N.style.getLayer(nt).queryRadius(gt))}P.imageAtlas&&(this.imageAtlas=P.imageAtlas),P.glyphAtlasImage&&(this.glyphAtlasImage=P.glyphAtlasImage)},ys.prototype.unloadVectorData=function(){for(var P in this.buckets)this.buckets[P].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},ys.prototype.getBucket=function(P){return this.buckets[P.id]},ys.prototype.upload=function(P){for(var N in this.buckets){var $=this.buckets[N];$.uploadPending()&&$.upload(P)}var he=P.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new mc(P,this.imageAtlas.image,he.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new mc(P,this.glyphAtlasImage,he.ALPHA),this.glyphAtlasImage=null)},ys.prototype.prepare=function(P){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(P,this.imageAtlasTexture)},ys.prototype.queryRenderedFeatures=function(P,N,$,he,xe,Te,Ne,nt,gt,bt){return!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData?{}:this.latestFeatureIndex.query({queryGeometry:he,cameraQueryGeometry:xe,scale:Te,tileSize:this.tileSize,pixelPosMatrix:bt,transform:nt,params:Ne,queryPadding:this.queryPadding*gt},P,N,$)},ys.prototype.querySourceFeatures=function(P,N){var $=this.latestFeatureIndex;if(!(!$||!$.rawTileData)){var he=$.loadVTLayers(),xe=N?N.sourceLayer:"",Te=he._geojsonTileLayer||he[xe];if(!!Te)for(var Ne=bf(N&&N.filter),nt=this.tileID.canonical,gt=nt.z,bt=nt.x,Gt=nt.y,lr={z:gt,x:bt,y:Gt},ir=0;ir<Te.length;ir++){var wr=Te.feature(ir);if(Ne.filter(new di(this.tileID.overscaledZ),wr)){var Hr=$.getId(wr,xe),cn=new Lv(wr,gt,bt,Gt,Hr);cn.tile=lr,P.push(cn)}}}},ys.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},ys.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},ys.prototype.setExpiryData=function(P){var N=this.expirationTime;if(P.cacheControl){var $=X(P.cacheControl);$["max-age"]&&(this.expirationTime=Date.now()+$["max-age"]*1e3)}else P.expires&&(this.expirationTime=new Date(P.expires).getTime());if(this.expirationTime){var he=Date.now(),xe=!1;if(this.expirationTime>he)xe=!1;else if(!N)xe=!0;else if(this.expirationTime<N)xe=!0;else{var Te=this.expirationTime-N;Te?this.expirationTime=he+Math.max(Te,a1):xe=!0}xe?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},ys.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},ys.prototype.setFeatureState=function(P,N){if(!(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(P).length===0)){var $=this.latestFeatureIndex.loadVTLayers();for(var he in this.buckets)if(!!N.style.hasLayer(he)){var xe=this.buckets[he],Te=xe.layers[0].sourceLayer||"_geojsonTileLayer",Ne=$[Te],nt=P[Te];if(!(!Ne||!nt||Object.keys(nt).length===0)){xe.update(nt,Ne,this.imageAtlas&&this.imageAtlas.patternPositions||{});var gt=N&&N.style&&N.style.getLayer(he);gt&&(this.queryPadding=Math.max(this.queryPadding,gt.queryRadius(xe)))}}}},ys.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},ys.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<q.now()},ys.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},ys.prototype.setHoldDuration=function(P){this.symbolFadeHoldUntil=q.now()+P},ys.prototype.setDependencies=function(P,N){for(var $={},he=0,xe=N;he<xe.length;he+=1){var Te=xe[he];$[Te]=!0}this.dependencies[P]=$},ys.prototype.hasDependency=function(P,N){for(var $=0,he=P;$<he.length;$+=1){var xe=he[$],Te=this.dependencies[xe];if(Te)for(var Ne=0,nt=N;Ne<nt.length;Ne+=1){var gt=nt[Ne];if(Te[gt])return!0}}return!1};var i1=["type","source","source-layer","minzoom","maxzoom","filter","layout"],ec=self.performance,m0=function(P){this._marks={start:[P.url,"start"].join("#"),end:[P.url,"end"].join("#"),measure:P.url.toString()},ec.mark(this._marks.start)};m0.prototype.finish=function(){ec.mark(this._marks.end);var P=ec.getEntriesByName(this._marks.measure);return P.length===0&&(ec.measure(this._marks.measure,this._marks.start,this._marks.end),P=ec.getEntriesByName(this._marks.measure),ec.clearMarks(this._marks.start),ec.clearMarks(this._marks.end),ec.clearMeasures(this._marks.measure)),P},e.Actor=Kc,e.AlphaImage=yc,e.CanonicalTileID=bc,e.CollisionBoxArray=Mf,e.Color=_i,e.DEMData=Ff,e.DataConstantProperty=Ua,e.DictionaryCoder=kv,e.EXTENT=Wa,e.ErrorEvent=Sr,e.EvaluationParameters=di,e.Event=Rr,e.Evented=Pr,e.FeatureIndex=zf,e.FillBucket=nf,e.FillExtrusionBucket=af,e.ImageAtlas=Dh,e.ImagePosition=wv,e.LineBucket=Sl,e.LngLat=Mo,e.LngLatBounds=rs,e.MercatorCoordinate=xc,e.ONE_EM=Rs,e.OverscaledTileID=ns,e.Point=h,e.Point$1=h,e.Properties=io,e.Protobuf=xv,e.RGBAImage=Ml,e.RequestManager=Se,e.RequestPerformance=m0,e.ResourceType=ut,e.SegmentVector=W,e.SourceFeatureState=Jc,e.StructArrayLayout1ui2=Zf,e.StructArrayLayout2f1f2i16=ef,e.StructArrayLayout2i4=fc,e.StructArrayLayout3ui6=tf,e.StructArrayLayout4i8=wf,e.SymbolBucket=no,e.Texture=mc,e.Tile=ys,e.Transitionable=ko,e.Uniform1f=jr,e.Uniform1i=Qr,e.Uniform2f=rn,e.Uniform3f=mn,e.Uniform4f=Fn,e.UniformColor=Hn,e.UniformMatrix4f=ia,e.UnwrappedTileID=d0,e.ValidationError=mr,e.WritingMode=ql,e.ZoomHistory=or,e.add=Fc,e.addDynamicAttributes=kp,e.asyncAll=l,e.bezier=d,e.bindAll=S,e.browser=q,e.cacheEntryPossiblyAdded=Qt,e.clamp=c,e.clearTileCache=cr,e.clipLine=$d,e.clone=hv,e.clone$1=I,e.clone$2=lp,e.collisionCircleLayout=By,e.config=ie,e.create=Dc,e.create$1=dc,e.create$2=pc,e.createCommonjsModule=a,e.createExpression=pu,e.createLayout=jo,e.createStyleLayer=Jm,e.cross=dg,e.deepEqual=o,e.dot=pg,e.dot$1=bg,e.ease=p,e.emitValidationErrors=Co,e.endsWith=E,e.enforceCacheSizeLimit=Zt,e.evaluateSizeForFeature=Wd,e.evaluateSizeForZoom=jd,e.evaluateVariableOffset=t0,e.evented=Ei,e.extend=A,e.featureFilter=bf,e.filterObject=F,e.fromRotation=Pc,e.getAnchorAlignment=Mp,e.getAnchorJustification=Cp,e.getArrayBuffer=vt,e.getImage=_t,e.getJSON=ht,e.getRTLTextPluginStatus=Ao,e.getReferrer=rr,e.getVideo=Dt,e.identity=Rc,e.invert=Jf,e.isChar=sr,e.isMapboxURL=Le,e.keysDifference=u,e.makeRequest=et,e.mapObject=C,e.mercatorXfromLng=h0,e.mercatorYfromLat=v0,e.mercatorZfromAltitude=p0,e.mul=sp,e.multiply=Qf,e.mvt=Nc,e.normalize=Th,e.number=bo,e.offscreenCanvasSupported=en,e.ortho=op,e.parseGlyphPBF=hm,e.pbf=xv,e.performSymbolLayout=Lm,e.perspective=_h,e.pick=_,e.plugin=qa,e.polygonIntersectsPolygon=vi,e.postMapLoadEvent=Lt,e.postTurnstileEvent=$t,e.potpack=Od,e.refProperties=i1,e.register=Be,e.registerForPluginStateChange=ji,e.rotate=Ks,e.rotateX=Al,e.rotateZ=Ic,e.scale=Tl,e.scale$1=xg,e.scale$2=fp,e.setCacheLimits=Xr,e.setRTLTextPlugin=ga,e.sphericalToCartesian=G,e.sqrLen=Tg,e.styleSpec=Xt,e.sub=yg,e.symbolSize=wm,e.transformMat3=gg,e.transformMat4=vv,e.translate=Ho,e.triggerPluginCompletionEvent=Oa,e.uniqueId=b,e.validateCustomStyleLayer=Xm,e.validateLight=Li,e.validateStyle=Io,e.values=x,e.vectorTile=Nc,e.version=n,e.warnOnce=O,e.webpSupported=se,e.window=self,e.wrap=m}),T(["./shared"],function(e){function a(st){var et=typeof st;if(et==="number"||et==="boolean"||et==="string"||st===void 0||st===null)return JSON.stringify(st);if(Array.isArray(st)){for(var ht="[",vt=0,kt=st;vt<kt.length;vt+=1){var Vt=kt[vt];ht+=a(Vt)+","}return ht+"]"}for(var Pe=Object.keys(st).sort(),ke="{",lt=0;lt<Pe.length;lt++)ke+=JSON.stringify(Pe[lt])+":"+a(st[Pe[lt]])+",";return ke+"}"}function n(st){for(var et="",ht=0,vt=e.refProperties;ht<vt.length;ht+=1){var kt=vt[ht];et+="/"+a(st[kt])}return et}function r(st,et){for(var ht={},vt=0;vt<st.length;vt++){var kt=et&&et[st[vt].id]||n(st[vt]);et&&(et[st[vt].id]=kt);var Vt=ht[kt];Vt||(Vt=ht[kt]=[]),Vt.push(st[vt])}var Pe=[];for(var ke in ht)Pe.push(ht[ke]);return Pe}var t=function(et){this.keyCache={},et&&this.replace(et)};t.prototype.replace=function(et){this._layerConfigs={},this._layers={},this.update(et,[])},t.prototype.update=function(et,ht){for(var vt=this,kt=0,Vt=et;kt<Vt.length;kt+=1){var Pe=Vt[kt];this._layerConfigs[Pe.id]=Pe;var ke=this._layers[Pe.id]=e.createStyleLayer(Pe);ke._featureFilter=e.featureFilter(ke.filter),this.keyCache[Pe.id]&&delete this.keyCache[Pe.id]}for(var lt=0,ft=ht;lt<ft.length;lt+=1){var yt=ft[lt];delete this.keyCache[yt],delete this._layerConfigs[yt],delete this._layers[yt]}this.familiesBySource={};for(var Rt=r(e.values(this._layerConfigs),this.keyCache),_t=0,Dt=Rt;_t<Dt.length;_t+=1){var Jt=Dt[_t],fr=Jt.map(function(_r){return vt._layers[_r.id]}),Rr=fr[0];if(Rr.visibility!=="none"){var Sr=Rr.source||"",Pr=this.familiesBySource[Sr];Pr||(Pr=this.familiesBySource[Sr]={});var Jr=Rr.sourceLayer||"_geojsonTileLayer",ur=Pr[Jr];ur||(ur=Pr[Jr]=[]),ur.push(fr)}}};var h=1,s=function(et){var ht={},vt=[];for(var kt in et){var Vt=et[kt],Pe=ht[kt]={};for(var ke in Vt){var lt=Vt[+ke];if(!(!lt||lt.bitmap.width===0||lt.bitmap.height===0)){var ft={x:0,y:0,w:lt.bitmap.width+2*h,h:lt.bitmap.height+2*h};vt.push(ft),Pe[ke]={rect:ft,metrics:lt.metrics}}}}var yt=e.potpack(vt),Rt=yt.w,_t=yt.h,Dt=new e.AlphaImage({width:Rt||1,height:_t||1});for(var Jt in et){var fr=et[Jt];for(var Rr in fr){var Sr=fr[+Rr];if(!(!Sr||Sr.bitmap.width===0||Sr.bitmap.height===0)){var Pr=ht[Jt][Rr].rect;e.AlphaImage.copy(Sr.bitmap,Dt,{x:0,y:0},{x:Pr.x+h,y:Pr.y+h},Sr.bitmap)}}}this.image=Dt,this.positions=ht};e.register("GlyphAtlas",s);var o=function(et){this.tileID=new e.OverscaledTileID(et.tileID.overscaledZ,et.tileID.wrap,et.tileID.canonical.z,et.tileID.canonical.x,et.tileID.canonical.y),this.uid=et.uid,this.zoom=et.zoom,this.pixelRatio=et.pixelRatio,this.tileSize=et.tileSize,this.source=et.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=et.showCollisionBoxes,this.collectResourceTiming=!!et.collectResourceTiming,this.returnDependencies=!!et.returnDependencies,this.promoteId=et.promoteId};o.prototype.parse=function(et,ht,vt,kt,Vt){var Pe=this;this.status="parsing",this.data=et,this.collisionBoxArray=new e.CollisionBoxArray;var ke=new e.DictionaryCoder(Object.keys(et.layers).sort()),lt=new e.FeatureIndex(this.tileID,this.promoteId);lt.bucketLayerIDs=[];var ft={},yt={featureIndex:lt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:vt},Rt=ht.familiesBySource[this.source];for(var _t in Rt){var Dt=et.layers[_t];if(!!Dt){Dt.version===1&&e.warnOnce('Vector tile source "'+this.source+'" layer "'+_t+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var Jt=ke.encode(_t),fr=[],Rr=0;Rr<Dt.length;Rr++){var Sr=Dt.feature(Rr),Pr=lt.getId(Sr,_t);fr.push({feature:Sr,id:Pr,index:Rr,sourceLayerIndex:Jt})}for(var Jr=0,ur=Rt[_t];Jr<ur.length;Jr+=1){var _r=ur[Jr],Br=_r[0];if(!(Br.minzoom&&this.zoom<Math.floor(Br.minzoom))&&!(Br.maxzoom&&this.zoom>=Br.maxzoom)&&Br.visibility!=="none"){y(_r,this.zoom,vt);var Yr=ft[Br.id]=Br.createBucket({index:lt.bucketLayerIDs.length,layers:_r,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Jt,sourceID:this.source});Yr.populate(fr,yt,this.tileID.canonical),lt.bucketLayerIDs.push(_r.map(function(Cr){return Cr.id}))}}}}var Dr,it,zt,qt,hr=e.mapObject(yt.glyphDependencies,function(Cr){return Object.keys(Cr).map(Number)});Object.keys(hr).length?kt.send("getGlyphs",{uid:this.uid,stacks:hr},function(Cr,Kr){Dr||(Dr=Cr,it=Kr,Ir.call(Pe))}):it={};var Ur=Object.keys(yt.iconDependencies);Ur.length?kt.send("getImages",{icons:Ur,source:this.source,tileID:this.tileID,type:"icons"},function(Cr,Kr){Dr||(Dr=Cr,zt=Kr,Ir.call(Pe))}):zt={};var Gr=Object.keys(yt.patternDependencies);Gr.length?kt.send("getImages",{icons:Gr,source:this.source,tileID:this.tileID,type:"patterns"},function(Cr,Kr){Dr||(Dr=Cr,qt=Kr,Ir.call(Pe))}):qt={},Ir.call(this);function Ir(){if(Dr)return Vt(Dr);if(it&&zt&&qt){var Cr=new s(it),Kr=new e.ImageAtlas(zt,qt);for(var Cn in ft){var yn=ft[Cn];yn instanceof e.SymbolBucket?(y(yn.layers,this.zoom,vt),e.performSymbolLayout(yn,it,Cr.positions,zt,Kr.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):yn.hasPattern&&(yn instanceof e.LineBucket||yn instanceof e.FillBucket||yn instanceof e.FillExtrusionBucket)&&(y(yn.layers,this.zoom,vt),yn.addFeatures(yt,this.tileID.canonical,Kr.patternPositions))}this.status="done",Vt(null,{buckets:e.values(ft).filter(function(Yn){return!Yn.isEmpty()}),featureIndex:lt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Cr.image,imageAtlas:Kr,glyphMap:this.returnDependencies?it:null,iconMap:this.returnDependencies?zt:null,glyphPositions:this.returnDependencies?Cr.positions:null})}}};function y(st,et,ht){for(var vt=new e.EvaluationParameters(et),kt=0,Vt=st;kt<Vt.length;kt+=1){var Pe=Vt[kt];Pe.recalculate(vt,ht)}}function d(st,et){var ht=e.getArrayBuffer(st.request,function(vt,kt,Vt,Pe){vt?et(vt):kt&&et(null,{vectorTile:new e.vectorTile.VectorTile(new e.pbf(kt)),rawData:kt,cacheControl:Vt,expires:Pe})});return function(){ht.cancel(),et()}}var p=function(et,ht,vt,kt){this.actor=et,this.layerIndex=ht,this.availableImages=vt,this.loadVectorData=kt||d,this.loading={},this.loaded={}};p.prototype.loadTile=function(et,ht){var vt=this,kt=et.uid;this.loading||(this.loading={});var Vt=et&&et.request&&et.request.collectResourceTiming?new e.RequestPerformance(et.request):!1,Pe=this.loading[kt]=new o(et);Pe.abort=this.loadVectorData(et,function(ke,lt){if(delete vt.loading[kt],ke||!lt)return Pe.status="done",vt.loaded[kt]=Pe,ht(ke);var ft=lt.rawData,yt={};lt.expires&&(yt.expires=lt.expires),lt.cacheControl&&(yt.cacheControl=lt.cacheControl);var Rt={};if(Vt){var _t=Vt.finish();_t&&(Rt.resourceTiming=JSON.parse(JSON.stringify(_t)))}Pe.vectorTile=lt.vectorTile,Pe.parse(lt.vectorTile,vt.layerIndex,vt.availableImages,vt.actor,function(Dt,Jt){if(Dt||!Jt)return ht(Dt);ht(null,e.extend({rawTileData:ft.slice(0)},Jt,yt,Rt))}),vt.loaded=vt.loaded||{},vt.loaded[kt]=Pe})},p.prototype.reloadTile=function(et,ht){var vt=this,kt=this.loaded,Vt=et.uid,Pe=this;if(kt&&kt[Vt]){var ke=kt[Vt];ke.showCollisionBoxes=et.showCollisionBoxes;var lt=function(ft,yt){var Rt=ke.reloadCallback;Rt&&(delete ke.reloadCallback,ke.parse(ke.vectorTile,Pe.layerIndex,vt.availableImages,Pe.actor,Rt)),ht(ft,yt)};ke.status==="parsing"?ke.reloadCallback=lt:ke.status==="done"&&(ke.vectorTile?ke.parse(ke.vectorTile,this.layerIndex,this.availableImages,this.actor,lt):lt())}},p.prototype.abortTile=function(et,ht){var vt=this.loading,kt=et.uid;vt&&vt[kt]&&vt[kt].abort&&(vt[kt].abort(),delete vt[kt]),ht()},p.prototype.removeTile=function(et,ht){var vt=this.loaded,kt=et.uid;vt&&vt[kt]&&delete vt[kt],ht()};var c=e.window.ImageBitmap,m=function(){this.loaded={}};m.prototype.loadTile=function(et,ht){var vt=et.uid,kt=et.encoding,Vt=et.rawImageData,Pe=c&&Vt instanceof c?this.getImageData(Vt):Vt,ke=new e.DEMData(vt,Pe,kt);this.loaded=this.loaded||{},this.loaded[vt]=ke,ht(null,ke)},m.prototype.getImageData=function(et){(!this.offscreenCanvas||!this.offscreenCanvasContext)&&(this.offscreenCanvas=new OffscreenCanvas(et.width,et.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=et.width,this.offscreenCanvas.height=et.height,this.offscreenCanvasContext.drawImage(et,0,0,et.width,et.height);var ht=this.offscreenCanvasContext.getImageData(-1,-1,et.width+2,et.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new e.RGBAImage({width:ht.width,height:ht.height},ht.data)},m.prototype.removeTile=function(et){var ht=this.loaded,vt=et.uid;ht&&ht[vt]&&delete ht[vt]};var l=x;function x(st,et){var ht=st&&st.type,vt;if(ht==="FeatureCollection")for(vt=0;vt<st.features.length;vt++)x(st.features[vt],et);else if(ht==="GeometryCollection")for(vt=0;vt<st.geometries.length;vt++)x(st.geometries[vt],et);else if(ht==="Feature")x(st.geometry,et);else if(ht==="Polygon")u(st.coordinates,et);else if(ht==="MultiPolygon")for(vt=0;vt<st.coordinates.length;vt++)u(st.coordinates[vt],et);return st}function u(st,et){if(st.length!==0){A(st[0],et);for(var ht=1;ht<st.length;ht++)A(st[ht],!et)}}function A(st,et){for(var ht=0,vt=0,kt=st.length,Vt=kt-1;vt<kt;Vt=vt++)ht+=(st[vt][0]-st[Vt][0])*(st[Vt][1]+st[vt][1]);ht>=0!=!!et&&st.reverse()}var _=e.vectorTile.VectorTileFeature.prototype.toGeoJSON,g=function(et){this._feature=et,this.extent=e.EXTENT,this.type=et.type,this.properties=et.tags,"id"in et&&!isNaN(et.id)&&(this.id=parseInt(et.id,10))};g.prototype.loadGeometry=function(){if(this._feature.type===1){for(var et=[],ht=0,vt=this._feature.geometry;ht<vt.length;ht+=1){var kt=vt[ht];et.push([new e.Point$1(kt[0],kt[1])])}return et}else{for(var Vt=[],Pe=0,ke=this._feature.geometry;Pe<ke.length;Pe+=1){for(var lt=ke[Pe],ft=[],yt=0,Rt=lt;yt<Rt.length;yt+=1){var _t=Rt[yt];ft.push(new e.Point$1(_t[0],_t[1]))}Vt.push(ft)}return Vt}},g.prototype.toGeoJSON=function(et,ht,vt){return _.call(this,et,ht,vt)};var b=function(et){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=e.EXTENT,this.length=et.length,this._features=et};b.prototype.feature=function(et){return new g(this._features[et])};var v=e.vectorTile.VectorTileFeature,k=S;function S(st,et){this.options=et||{},this.features=st,this.length=st.length}S.prototype.feature=function(st){return new E(this.features[st],this.options.extent)};function E(st,et){this.id=typeof st.id=="number"?st.id:void 0,this.type=st.type,this.rawGeometry=st.type===1?[st.geometry]:st.geometry,this.properties=st.tags,this.extent=et||4096}E.prototype.loadGeometry=function(){var st=this.rawGeometry;this.geometry=[];for(var et=0;et<st.length;et++){for(var ht=st[et],vt=[],kt=0;kt<ht.length;kt++)vt.push(new e.Point$1(ht[kt][0],ht[kt][1]));this.geometry.push(vt)}return this.geometry},E.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var st=this.geometry,et=1/0,ht=-1/0,vt=1/0,kt=-1/0,Vt=0;Vt<st.length;Vt++)for(var Pe=st[Vt],ke=0;ke<Pe.length;ke++){var lt=Pe[ke];et=Math.min(et,lt.x),ht=Math.max(ht,lt.x),vt=Math.min(vt,lt.y),kt=Math.max(kt,lt.y)}return[et,vt,ht,kt]},E.prototype.toGeoJSON=v.prototype.toGeoJSON;var C=R,F=R,I=O,D=k;function R(st){var et=new e.pbf;return z(st,et),et.finish()}function O(st,et){et=et||{};var ht={};for(var vt in st)ht[vt]=new k(st[vt].features,et),ht[vt].name=vt,ht[vt].version=et.version,ht[vt].extent=et.extent;return R({layers:ht})}function z(st,et){for(var ht in st.layers)et.writeMessage(3,B,st.layers[ht])}function B(st,et){et.writeVarintField(15,st.version||1),et.writeStringField(1,st.name||""),et.writeVarintField(5,st.extent||4096);var ht,vt={keys:[],values:[],keycache:{},valuecache:{}};for(ht=0;ht<st.length;ht++)vt.feature=st.feature(ht),et.writeMessage(2,G,vt);var kt=vt.keys;for(ht=0;ht<kt.length;ht++)et.writeStringField(3,kt[ht]);var Vt=vt.values;for(ht=0;ht<Vt.length;ht++)et.writeMessage(4,ue,Vt[ht])}function G(st,et){var ht=st.feature;ht.id!==void 0&&et.writeVarintField(1,ht.id),et.writeMessage(2,Q,st),et.writeVarintField(3,ht.type),et.writeMessage(4,re,ht)}function Q(st,et){var ht=st.feature,vt=st.keys,kt=st.values,Vt=st.keycache,Pe=st.valuecache;for(var ke in ht.properties){var lt=Vt[ke];typeof lt>"u"&&(vt.push(ke),lt=vt.length-1,Vt[ke]=lt),et.writeVarint(lt);var ft=ht.properties[ke],yt=typeof ft;yt!=="string"&&yt!=="boolean"&&yt!=="number"&&(ft=JSON.stringify(ft));var Rt=yt+":"+ft,_t=Pe[Rt];typeof _t>"u"&&(kt.push(ft),_t=kt.length-1,Pe[Rt]=_t),et.writeVarint(_t)}}function X(st,et){return(et<<3)+(st&7)}function j(st){return st<<1^st>>31}function re(st,et){for(var ht=st.loadGeometry(),vt=st.type,kt=0,Vt=0,Pe=ht.length,ke=0;ke<Pe;ke++){var lt=ht[ke],ft=1;vt===1&&(ft=lt.length),et.writeVarint(X(1,ft));for(var yt=vt===3?lt.length-1:lt.length,Rt=0;Rt<yt;Rt++){Rt===1&&vt!==1&&et.writeVarint(X(2,yt-1));var _t=lt[Rt].x-kt,Dt=lt[Rt].y-Vt;et.writeVarint(j(_t)),et.writeVarint(j(Dt)),kt+=_t,Vt+=Dt}vt===3&&et.writeVarint(X(7,1))}}function ue(st,et){var ht=typeof st;ht==="string"?et.writeStringField(1,st):ht==="boolean"?et.writeBooleanField(7,st):ht==="number"&&(st%1!==0?et.writeDoubleField(3,st):st<0?et.writeSVarintField(6,st):et.writeVarintField(5,st))}C.fromVectorTileJs=F,C.fromGeojsonVt=I,C.GeoJSONWrapper=D;function K(st,et,ht,vt,kt,Vt){if(!(kt-vt<=ht)){var Pe=vt+kt>>1;te(st,et,Pe,vt,kt,Vt%2),K(st,et,ht,vt,Pe-1,Vt+1),K(st,et,ht,Pe+1,kt,Vt+1)}}function te(st,et,ht,vt,kt,Vt){for(;kt>vt;){if(kt-vt>600){var Pe=kt-vt+1,ke=ht-vt+1,lt=Math.log(Pe),ft=.5*Math.exp(2*lt/3),yt=.5*Math.sqrt(lt*ft*(Pe-ft)/Pe)*(ke-Pe/2<0?-1:1),Rt=Math.max(vt,Math.floor(ht-ke*ft/Pe+yt)),_t=Math.min(kt,Math.floor(ht+(Pe-ke)*ft/Pe+yt));te(st,et,ht,Rt,_t,Vt)}var Dt=et[2*ht+Vt],Jt=vt,fr=kt;for(Y(st,et,vt,ht),et[2*kt+Vt]>Dt&&Y(st,et,vt,kt);Jt<fr;){for(Y(st,et,Jt,fr),Jt++,fr--;et[2*Jt+Vt]<Dt;)Jt++;for(;et[2*fr+Vt]>Dt;)fr--}et[2*vt+Vt]===Dt?Y(st,et,vt,fr):(fr++,Y(st,et,fr,kt)),fr<=ht&&(vt=fr+1),ht<=fr&&(kt=fr-1)}}function Y(st,et,ht,vt){H(st,ht,vt),H(et,2*ht,2*vt),H(et,2*ht+1,2*vt+1)}function H(st,et,ht){var vt=st[et];st[et]=st[ht],st[ht]=vt}function ee(st,et,ht,vt,kt,Vt,Pe){for(var ke=[0,st.length-1,0],lt=[],ft,yt;ke.length;){var Rt=ke.pop(),_t=ke.pop(),Dt=ke.pop();if(_t-Dt<=Pe){for(var Jt=Dt;Jt<=_t;Jt++)ft=et[2*Jt],yt=et[2*Jt+1],ft>=ht&&ft<=kt&&yt>=vt&&yt<=Vt&&lt.push(st[Jt]);continue}var fr=Math.floor((Dt+_t)/2);ft=et[2*fr],yt=et[2*fr+1],ft>=ht&&ft<=kt&&yt>=vt&&yt<=Vt&&lt.push(st[fr]);var Rr=(Rt+1)%2;(Rt===0?ht<=ft:vt<=yt)&&(ke.push(Dt),ke.push(fr-1),ke.push(Rr)),(Rt===0?kt>=ft:Vt>=yt)&&(ke.push(fr+1),ke.push(_t),ke.push(Rr))}return lt}function ne(st,et,ht,vt,kt,Vt){for(var Pe=[0,st.length-1,0],ke=[],lt=kt*kt;Pe.length;){var ft=Pe.pop(),yt=Pe.pop(),Rt=Pe.pop();if(yt-Rt<=Vt){for(var _t=Rt;_t<=yt;_t++)Z(et[2*_t],et[2*_t+1],ht,vt)<=lt&&ke.push(st[_t]);continue}var Dt=Math.floor((Rt+yt)/2),Jt=et[2*Dt],fr=et[2*Dt+1];Z(Jt,fr,ht,vt)<=lt&&ke.push(st[Dt]);var Rr=(ft+1)%2;(ft===0?ht-kt<=Jt:vt-kt<=fr)&&(Pe.push(Rt),Pe.push(Dt-1),Pe.push(Rr)),(ft===0?ht+kt>=Jt:vt+kt>=fr)&&(Pe.push(Dt+1),Pe.push(yt),Pe.push(Rr))}return ke}function Z(st,et,ht,vt){var kt=st-ht,Vt=et-vt;return kt*kt+Vt*Vt}var q=function(st){return st[0]},ie=function(st){return st[1]},se=function(et,ht,vt,kt,Vt){ht===void 0&&(ht=q),vt===void 0&&(vt=ie),kt===void 0&&(kt=64),Vt===void 0&&(Vt=Float64Array),this.nodeSize=kt,this.points=et;for(var Pe=et.length<65536?Uint16Array:Uint32Array,ke=this.ids=new Pe(et.length),lt=this.coords=new Vt(et.length*2),ft=0;ft<et.length;ft++)ke[ft]=ft,lt[2*ft]=ht(et[ft]),lt[2*ft+1]=vt(et[ft]);K(ke,lt,kt,0,ke.length-1,0)};se.prototype.range=function(et,ht,vt,kt){return ee(this.ids,this.coords,et,ht,vt,kt,this.nodeSize)},se.prototype.within=function(et,ht,vt){return ne(this.ids,this.coords,et,ht,vt,this.nodeSize)};var ae={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(st){return st}},oe=function(et){this.options=Oe(Object.create(ae),et),this.trees=new Array(this.options.maxZoom+1)};oe.prototype.load=function(et){var ht=this.options,vt=ht.log,kt=ht.minZoom,Vt=ht.maxZoom,Pe=ht.nodeSize;vt&&console.time("total time");var ke="prepare "+et.length+" points";vt&&console.time(ke),this.points=et;for(var lt=[],ft=0;ft<et.length;ft++)!et[ft].geometry||lt.push(ce(et[ft],ft));this.trees[Vt+1]=new se(lt,we,Ce,Pe,Float32Array),vt&&console.timeEnd(ke);for(var yt=Vt;yt>=kt;yt--){var Rt=+Date.now();lt=this._cluster(lt,yt),this.trees[yt]=new se(lt,we,Ce,Pe,Float32Array),vt&&console.log("z%d: %d clusters in %dms",yt,lt.length,+Date.now()-Rt)}return vt&&console.timeEnd("total time"),this},oe.prototype.getClusters=function(et,ht){var vt=((et[0]+180)%360+360)%360-180,kt=Math.max(-90,Math.min(90,et[1])),Vt=et[2]===180?180:((et[2]+180)%360+360)%360-180,Pe=Math.max(-90,Math.min(90,et[3]));if(et[2]-et[0]>=360)vt=-180,Vt=180;else if(vt>Vt){var ke=this.getClusters([vt,kt,180,Pe],ht),lt=this.getClusters([-180,kt,Vt,Pe],ht);return ke.concat(lt)}for(var ft=this.trees[this._limitZoom(ht)],yt=ft.range(ge(vt),me(Pe),ge(Vt),me(kt)),Rt=[],_t=0,Dt=yt;_t<Dt.length;_t+=1){var Jt=Dt[_t],fr=ft.points[Jt];Rt.push(fr.numPoints?de(fr):this.points[fr.index])}return Rt},oe.prototype.getChildren=function(et){var ht=this._getOriginId(et),vt=this._getOriginZoom(et),kt="No cluster with the specified id.",Vt=this.trees[vt];if(!Vt)throw new Error(kt);var Pe=Vt.points[ht];if(!Pe)throw new Error(kt);for(var ke=this.options.radius/(this.options.extent*Math.pow(2,vt-1)),lt=Vt.within(Pe.x,Pe.y,ke),ft=[],yt=0,Rt=lt;yt<Rt.length;yt+=1){var _t=Rt[yt],Dt=Vt.points[_t];Dt.parentId===et&&ft.push(Dt.numPoints?de(Dt):this.points[Dt.index])}if(ft.length===0)throw new Error(kt);return ft},oe.prototype.getLeaves=function(et,ht,vt){ht=ht||10,vt=vt||0;var kt=[];return this._appendLeaves(kt,et,ht,vt,0),kt},oe.prototype.getTile=function(et,ht,vt){var kt=this.trees[this._limitZoom(et)],Vt=Math.pow(2,et),Pe=this.options,ke=Pe.extent,lt=Pe.radius,ft=lt/ke,yt=(vt-ft)/Vt,Rt=(vt+1+ft)/Vt,_t={features:[]};return this._addTileFeatures(kt.range((ht-ft)/Vt,yt,(ht+1+ft)/Vt,Rt),kt.points,ht,vt,Vt,_t),ht===0&&this._addTileFeatures(kt.range(1-ft/Vt,yt,1,Rt),kt.points,Vt,vt,Vt,_t),ht===Vt-1&&this._addTileFeatures(kt.range(0,yt,ft/Vt,Rt),kt.points,-1,vt,Vt,_t),_t.features.length?_t:null},oe.prototype.getClusterExpansionZoom=function(et){for(var ht=this._getOriginZoom(et)-1;ht<=this.options.maxZoom;){var vt=this.getChildren(et);if(ht++,vt.length!==1)break;et=vt[0].properties.cluster_id}return ht},oe.prototype._appendLeaves=function(et,ht,vt,kt,Vt){for(var Pe=this.getChildren(ht),ke=0,lt=Pe;ke<lt.length;ke+=1){var ft=lt[ke],yt=ft.properties;if(yt&&yt.cluster?Vt+yt.point_count<=kt?Vt+=yt.point_count:Vt=this._appendLeaves(et,yt.cluster_id,vt,kt,Vt):Vt<kt?Vt++:et.push(ft),et.length===vt)break}return Vt},oe.prototype._addTileFeatures=function(et,ht,vt,kt,Vt,Pe){for(var ke=0,lt=et;ke<lt.length;ke+=1){var ft=lt[ke],yt=ht[ft],Rt=yt.numPoints,_t={type:1,geometry:[[Math.round(this.options.extent*(yt.x*Vt-vt)),Math.round(this.options.extent*(yt.y*Vt-kt))]],tags:Rt?ye(yt):this.points[yt.index].properties},Dt=void 0;Rt?Dt=yt.id:this.options.generateId?Dt=yt.index:this.points[yt.index].id&&(Dt=this.points[yt.index].id),Dt!==void 0&&(_t.id=Dt),Pe.features.push(_t)}},oe.prototype._limitZoom=function(et){return Math.max(this.options.minZoom,Math.min(et,this.options.maxZoom+1))},oe.prototype._cluster=function(et,ht){for(var vt=[],kt=this.options,Vt=kt.radius,Pe=kt.extent,ke=kt.reduce,lt=Vt/(Pe*Math.pow(2,ht)),ft=0;ft<et.length;ft++){var yt=et[ft];if(!(yt.zoom<=ht)){yt.zoom=ht;for(var Rt=this.trees[ht+1],_t=Rt.within(yt.x,yt.y,lt),Dt=yt.numPoints||1,Jt=yt.x*Dt,fr=yt.y*Dt,Rr=ke&&Dt>1?this._map(yt,!0):null,Sr=(ft<<5)+(ht+1)+this.points.length,Pr=0,Jr=_t;Pr<Jr.length;Pr+=1){var ur=Jr[Pr],_r=Rt.points[ur];if(!(_r.zoom<=ht)){_r.zoom=ht;var Br=_r.numPoints||1;Jt+=_r.x*Br,fr+=_r.y*Br,Dt+=Br,_r.parentId=Sr,ke&&(Rr||(Rr=this._map(yt,!0)),ke(Rr,this._map(_r)))}}Dt===1?vt.push(yt):(yt.parentId=Sr,vt.push(be(Jt/Dt,fr/Dt,Sr,Dt,Rr)))}}return vt},oe.prototype._getOriginId=function(et){return et-this.points.length>>5},oe.prototype._getOriginZoom=function(et){return(et-this.points.length)%32},oe.prototype._map=function(et,ht){if(et.numPoints)return ht?Oe({},et.properties):et.properties;var vt=this.points[et.index].properties,kt=this.options.map(vt);return ht&&kt===vt?Oe({},kt):kt};function be(st,et,ht,vt,kt){return{x:st,y:et,zoom:1/0,id:ht,parentId:-1,numPoints:vt,properties:kt}}function ce(st,et){var ht=st.geometry.coordinates,vt=ht[0],kt=ht[1];return{x:ge(vt),y:me(kt),zoom:1/0,index:et,parentId:-1}}function de(st){return{type:"Feature",id:st.id,properties:ye(st),geometry:{type:"Point",coordinates:[Se(st.x),Le(st.y)]}}}function ye(st){var et=st.numPoints,ht=et>=1e4?Math.round(et/1e3)+"k":et>=1e3?Math.round(et/100)/10+"k":et;return Oe(Oe({},st.properties),{cluster:!0,cluster_id:st.id,point_count:et,point_count_abbreviated:ht})}function ge(st){return st/360+.5}function me(st){var et=Math.sin(st*Math.PI/180),ht=.5-.25*Math.log((1+et)/(1-et))/Math.PI;return ht<0?0:ht>1?1:ht}function Se(st){return(st-.5)*360}function Le(st){var et=(180-st*360)*Math.PI/180;return 360*Math.atan(Math.exp(et))/Math.PI-90}function Oe(st,et){for(var ht in et)st[ht]=et[ht];return st}function we(st){return st.x}function Ce(st){return st.y}function Ke(st,et,ht,vt){for(var kt=vt,Vt=ht-et>>1,Pe=ht-et,ke,lt=st[et],ft=st[et+1],yt=st[ht],Rt=st[ht+1],_t=et+3;_t<ht;_t+=3){var Dt=Ye(st[_t],st[_t+1],lt,ft,yt,Rt);if(Dt>kt)ke=_t,kt=Dt;else if(Dt===kt){var Jt=Math.abs(_t-Vt);Jt<Pe&&(ke=_t,Pe=Jt)}}kt>vt&&(ke-et>3&&Ke(st,et,ke,vt),st[ke+2]=kt,ht-ke>3&&Ke(st,ke,ht,vt))}function Ye(st,et,ht,vt,kt,Vt){var Pe=kt-ht,ke=Vt-vt;if(Pe!==0||ke!==0){var lt=((st-ht)*Pe+(et-vt)*ke)/(Pe*Pe+ke*ke);lt>1?(ht=kt,vt=Vt):lt>0&&(ht+=Pe*lt,vt+=ke*lt)}return Pe=st-ht,ke=et-vt,Pe*Pe+ke*ke}function Fe(st,et,ht,vt){var kt={id:typeof st>"u"?null:st,type:et,geometry:ht,tags:vt,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return Re(kt),kt}function Re(st){var et=st.geometry,ht=st.type;if(ht==="Point"||ht==="MultiPoint"||ht==="LineString")je(st,et);else if(ht==="Polygon"||ht==="MultiLineString")for(var vt=0;vt<et.length;vt++)je(st,et[vt]);else if(ht==="MultiPolygon")for(vt=0;vt<et.length;vt++)for(var kt=0;kt<et[vt].length;kt++)je(st,et[vt][kt])}function je(st,et){for(var ht=0;ht<et.length;ht+=3)st.minX=Math.min(st.minX,et[ht]),st.minY=Math.min(st.minY,et[ht+1]),st.maxX=Math.max(st.maxX,et[ht]),st.maxY=Math.max(st.maxY,et[ht+1])}function xt(st,et){var ht=[];if(st.type==="FeatureCollection")for(var vt=0;vt<st.features.length;vt++)Nt(ht,st.features[vt],et,vt);else st.type==="Feature"?Nt(ht,st,et):Nt(ht,{geometry:st},et);return ht}function Nt(st,et,ht,vt){if(!!et.geometry){var kt=et.geometry.coordinates,Vt=et.geometry.type,Pe=Math.pow(ht.tolerance/((1<<ht.maxZoom)*ht.extent),2),ke=[],lt=et.id;if(ht.promoteId?lt=et.properties[ht.promoteId]:ht.generateId&&(lt=vt||0),Vt==="Point")tr(kt,ke);else if(Vt==="MultiPoint")for(var ft=0;ft<kt.length;ft++)tr(kt[ft],ke);else if(Vt==="LineString")Ht(kt,ke,Pe,!1);else if(Vt==="MultiLineString")if(ht.lineMetrics){for(ft=0;ft<kt.length;ft++)ke=[],Ht(kt[ft],ke,Pe,!1),st.push(Fe(lt,"LineString",ke,et.properties));return}else Pt(kt,ke,Pe,!1);else if(Vt==="Polygon")Pt(kt,ke,Pe,!0);else if(Vt==="MultiPolygon")for(ft=0;ft<kt.length;ft++){var yt=[];Pt(kt[ft],yt,Pe,!0),ke.push(yt)}else if(Vt==="GeometryCollection"){for(ft=0;ft<et.geometry.geometries.length;ft++)Nt(st,{id:lt,geometry:et.geometry.geometries[ft],properties:et.properties},ht,vt);return}else throw new Error("Input data is not a valid GeoJSON object.");st.push(Fe(lt,Vt,ke,et.properties))}}function tr(st,et){et.push($t(st[0])),et.push(Ut(st[1])),et.push(0)}function Ht(st,et,ht,vt){for(var kt,Vt,Pe=0,ke=0;ke<st.length;ke++){var lt=$t(st[ke][0]),ft=Ut(st[ke][1]);et.push(lt),et.push(ft),et.push(0),ke>0&&(vt?Pe+=(kt*ft-lt*Vt)/2:Pe+=Math.sqrt(Math.pow(lt-kt,2)+Math.pow(ft-Vt,2))),kt=lt,Vt=ft}var yt=et.length-3;et[2]=1,Ke(et,0,yt,ht),et[yt+2]=1,et.size=Math.abs(Pe),et.start=0,et.end=et.size}function Pt(st,et,ht,vt){for(var kt=0;kt<st.length;kt++){var Vt=[];Ht(st[kt],Vt,ht,vt),et.push(Vt)}}function $t(st){return st/360+.5}function Ut(st){var et=Math.sin(st*Math.PI/180),ht=.5-.25*Math.log((1+et)/(1-et))/Math.PI;return ht<0?0:ht>1?1:ht}function Lt(st,et,ht,vt,kt,Vt,Pe,ke){if(ht/=et,vt/=et,Vt>=ht&&Pe<vt)return st;if(Pe<ht||Vt>=vt)return null;for(var lt=[],ft=0;ft<st.length;ft++){var yt=st[ft],Rt=yt.geometry,_t=yt.type,Dt=kt===0?yt.minX:yt.minY,Jt=kt===0?yt.maxX:yt.maxY;if(Dt>=ht&&Jt<vt){lt.push(yt);continue}else if(Jt<ht||Dt>=vt)continue;var fr=[];if(_t==="Point"||_t==="MultiPoint")We(Rt,fr,ht,vt,kt);else if(_t==="LineString")ot(Rt,fr,ht,vt,kt,!1,ke.lineMetrics);else if(_t==="MultiLineString")Me(Rt,fr,ht,vt,kt,!1);else if(_t==="Polygon")Me(Rt,fr,ht,vt,kt,!0);else if(_t==="MultiPolygon")for(var Rr=0;Rr<Rt.length;Rr++){var Sr=[];Me(Rt[Rr],Sr,ht,vt,kt,!0),Sr.length&&fr.push(Sr)}if(fr.length){if(ke.lineMetrics&&_t==="LineString"){for(Rr=0;Rr<fr.length;Rr++)lt.push(Fe(yt.id,_t,fr[Rr],yt.tags));continue}(_t==="LineString"||_t==="MultiLineString")&&(fr.length===1?(_t="LineString",fr=fr[0]):_t="MultiLineString"),(_t==="Point"||_t==="MultiPoint")&&(_t=fr.length===3?"Point":"MultiPoint"),lt.push(Fe(yt.id,_t,fr,yt.tags))}}return lt.length?lt:null}function We(st,et,ht,vt,kt){for(var Vt=0;Vt<st.length;Vt+=3){var Pe=st[Vt+kt];Pe>=ht&&Pe<=vt&&(et.push(st[Vt]),et.push(st[Vt+1]),et.push(st[Vt+2]))}}function ot(st,et,ht,vt,kt,Vt,Pe){for(var ke=Ge(st),lt=kt===0?Qe:tt,ft=st.start,yt,Rt,_t=0;_t<st.length-3;_t+=3){var Dt=st[_t],Jt=st[_t+1],fr=st[_t+2],Rr=st[_t+3],Sr=st[_t+4],Pr=kt===0?Dt:Jt,Jr=kt===0?Rr:Sr,ur=!1;Pe&&(yt=Math.sqrt(Math.pow(Dt-Rr,2)+Math.pow(Jt-Sr,2))),Pr<ht?Jr>ht&&(Rt=lt(ke,Dt,Jt,Rr,Sr,ht),Pe&&(ke.start=ft+yt*Rt)):Pr>vt?Jr<vt&&(Rt=lt(ke,Dt,Jt,Rr,Sr,vt),Pe&&(ke.start=ft+yt*Rt)):Ve(ke,Dt,Jt,fr),Jr<ht&&Pr>=ht&&(Rt=lt(ke,Dt,Jt,Rr,Sr,ht),ur=!0),Jr>vt&&Pr<=vt&&(Rt=lt(ke,Dt,Jt,Rr,Sr,vt),ur=!0),!Vt&&ur&&(Pe&&(ke.end=ft+yt*Rt),et.push(ke),ke=Ge(st)),Pe&&(ft+=yt)}var _r=st.length-3;Dt=st[_r],Jt=st[_r+1],fr=st[_r+2],Pr=kt===0?Dt:Jt,Pr>=ht&&Pr<=vt&&Ve(ke,Dt,Jt,fr),_r=ke.length-3,Vt&&_r>=3&&(ke[_r]!==ke[0]||ke[_r+1]!==ke[1])&&Ve(ke,ke[0],ke[1],ke[2]),ke.length&&et.push(ke)}function Ge(st){var et=[];return et.size=st.size,et.start=st.start,et.end=st.end,et}function Me(st,et,ht,vt,kt,Vt){for(var Pe=0;Pe<st.length;Pe++)ot(st[Pe],et,ht,vt,kt,Vt,!1)}function Ve(st,et,ht,vt){st.push(et),st.push(ht),st.push(vt)}function Qe(st,et,ht,vt,kt,Vt){var Pe=(Vt-et)/(vt-et);return st.push(Vt),st.push(ht+(kt-ht)*Pe),st.push(1),Pe}function tt(st,et,ht,vt,kt,Vt){var Pe=(Vt-ht)/(kt-ht);return st.push(et+(vt-et)*Pe),st.push(Vt),st.push(1),Pe}function St(st,et){var ht=et.buffer/et.extent,vt=st,kt=Lt(st,1,-1-ht,ht,0,-1,2,et),Vt=Lt(st,1,1-ht,2+ht,0,-1,2,et);return(kt||Vt)&&(vt=Lt(st,1,-ht,1+ht,0,-1,2,et)||[],kt&&(vt=wt(kt,1).concat(vt)),Vt&&(vt=vt.concat(wt(Vt,-1)))),vt}function wt(st,et){for(var ht=[],vt=0;vt<st.length;vt++){var kt=st[vt],Vt=kt.type,Pe;if(Vt==="Point"||Vt==="MultiPoint"||Vt==="LineString")Pe=Ct(kt.geometry,et);else if(Vt==="MultiLineString"||Vt==="Polygon"){Pe=[];for(var ke=0;ke<kt.geometry.length;ke++)Pe.push(Ct(kt.geometry[ke],et))}else if(Vt==="MultiPolygon")for(Pe=[],ke=0;ke<kt.geometry.length;ke++){for(var lt=[],ft=0;ft<kt.geometry[ke].length;ft++)lt.push(Ct(kt.geometry[ke][ft],et));Pe.push(lt)}ht.push(Fe(kt.id,Vt,Pe,kt.tags))}return ht}function Ct(st,et){var ht=[];ht.size=st.size,st.start!==void 0&&(ht.start=st.start,ht.end=st.end);for(var vt=0;vt<st.length;vt+=3)ht.push(st[vt]+et,st[vt+1],st[vt+2]);return ht}function jt(st,et){if(st.transformed)return st;var ht=1<<st.z,vt=st.x,kt=st.y,Vt,Pe,ke;for(Vt=0;Vt<st.features.length;Vt++){var lt=st.features[Vt],ft=lt.geometry,yt=lt.type;if(lt.geometry=[],yt===1)for(Pe=0;Pe<ft.length;Pe+=2)lt.geometry.push(Bt(ft[Pe],ft[Pe+1],et,ht,vt,kt));else for(Pe=0;Pe<ft.length;Pe++){var Rt=[];for(ke=0;ke<ft[Pe].length;ke+=2)Rt.push(Bt(ft[Pe][ke],ft[Pe][ke+1],et,ht,vt,kt));lt.geometry.push(Rt)}}return st.transformed=!0,st}function Bt(st,et,ht,vt,kt,Vt){return[Math.round(ht*(st*vt-kt)),Math.round(ht*(et*vt-Vt))]}function Wt(st,et,ht,vt,kt){for(var Vt=et===kt.maxZoom?0:kt.tolerance/((1<<et)*kt.extent),Pe={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:ht,y:vt,z:et,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},ke=0;ke<st.length;ke++){Pe.numFeatures++,Qt(Pe,st[ke],Vt,kt);var lt=st[ke].minX,ft=st[ke].minY,yt=st[ke].maxX,Rt=st[ke].maxY;lt<Pe.minX&&(Pe.minX=lt),ft<Pe.minY&&(Pe.minY=ft),yt>Pe.maxX&&(Pe.maxX=yt),Rt>Pe.maxY&&(Pe.maxY=Rt)}return Pe}function Qt(st,et,ht,vt){var kt=et.geometry,Vt=et.type,Pe=[];if(Vt==="Point"||Vt==="MultiPoint")for(var ke=0;ke<kt.length;ke+=3)Pe.push(kt[ke]),Pe.push(kt[ke+1]),st.numPoints++,st.numSimplified++;else if(Vt==="LineString")Zt(Pe,kt,st,ht,!1,!1);else if(Vt==="MultiLineString"||Vt==="Polygon")for(ke=0;ke<kt.length;ke++)Zt(Pe,kt[ke],st,ht,Vt==="Polygon",ke===0);else if(Vt==="MultiPolygon")for(var lt=0;lt<kt.length;lt++){var ft=kt[lt];for(ke=0;ke<ft.length;ke++)Zt(Pe,ft[ke],st,ht,!0,ke===0)}if(Pe.length){var yt=et.tags||null;if(Vt==="LineString"&&vt.lineMetrics){yt={};for(var Rt in et.tags)yt[Rt]=et.tags[Rt];yt.mapbox_clip_start=kt.start/kt.size,yt.mapbox_clip_end=kt.end/kt.size}var _t={geometry:Pe,type:Vt==="Polygon"||Vt==="MultiPolygon"?3:Vt==="LineString"||Vt==="MultiLineString"?2:1,tags:yt};et.id!==null&&(_t.id=et.id),st.features.push(_t)}}function Zt(st,et,ht,vt,kt,Vt){var Pe=vt*vt;if(vt>0&&et.size<(kt?Pe:vt)){ht.numPoints+=et.length/3;return}for(var ke=[],lt=0;lt<et.length;lt+=3)(vt===0||et[lt+2]>Pe)&&(ht.numSimplified++,ke.push(et[lt]),ke.push(et[lt+1])),ht.numPoints++;kt&&cr(ke,Vt),st.push(ke)}function cr(st,et){for(var ht=0,vt=0,kt=st.length,Vt=kt-2;vt<kt;Vt=vt,vt+=2)ht+=(st[vt]-st[Vt])*(st[vt+1]+st[Vt+1]);if(ht>0===et)for(vt=0,kt=st.length;vt<kt/2;vt+=2){var Pe=st[vt],ke=st[vt+1];st[vt]=st[kt-2-vt],st[vt+1]=st[kt-1-vt],st[kt-2-vt]=Pe,st[kt-1-vt]=ke}}function Xr(st,et){return new vn(st,et)}function vn(st,et){et=this.options=ut(Object.create(this.options),et);var ht=et.debug;if(ht&&console.time("preprocess data"),et.maxZoom<0||et.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(et.promoteId&&et.generateId)throw new Error("promoteId and generateId cannot be used together.");var vt=xt(st,et);this.tiles={},this.tileCoords=[],ht&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",et.indexMaxZoom,et.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),vt=St(vt,et),vt.length&&this.splitTile(vt,0,0,0),ht&&(vt.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}vn.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},vn.prototype.splitTile=function(st,et,ht,vt,kt,Vt,Pe){for(var ke=[st,et,ht,vt],lt=this.options,ft=lt.debug;ke.length;){vt=ke.pop(),ht=ke.pop(),et=ke.pop(),st=ke.pop();var yt=1<<et,Rt=en(et,ht,vt),_t=this.tiles[Rt];if(!_t&&(ft>1&&console.time("creation"),_t=this.tiles[Rt]=Wt(st,et,ht,vt,lt),this.tileCoords.push({z:et,x:ht,y:vt}),ft)){ft>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",et,ht,vt,_t.numFeatures,_t.numPoints,_t.numSimplified),console.timeEnd("creation"));var Dt="z"+et;this.stats[Dt]=(this.stats[Dt]||0)+1,this.total++}if(_t.source=st,kt){if(et===lt.maxZoom||et===kt)continue;var Jt=1<<kt-et;if(ht!==Math.floor(Vt/Jt)||vt!==Math.floor(Pe/Jt))continue}else if(et===lt.indexMaxZoom||_t.numPoints<=lt.indexMaxPoints)continue;if(_t.source=null,st.length!==0){ft>1&&console.time("clipping");var fr=.5*lt.buffer/lt.extent,Rr=.5-fr,Sr=.5+fr,Pr=1+fr,Jr,ur,_r,Br,Yr,Dr;Jr=ur=_r=Br=null,Yr=Lt(st,yt,ht-fr,ht+Sr,0,_t.minX,_t.maxX,lt),Dr=Lt(st,yt,ht+Rr,ht+Pr,0,_t.minX,_t.maxX,lt),st=null,Yr&&(Jr=Lt(Yr,yt,vt-fr,vt+Sr,1,_t.minY,_t.maxY,lt),ur=Lt(Yr,yt,vt+Rr,vt+Pr,1,_t.minY,_t.maxY,lt),Yr=null),Dr&&(_r=Lt(Dr,yt,vt-fr,vt+Sr,1,_t.minY,_t.maxY,lt),Br=Lt(Dr,yt,vt+Rr,vt+Pr,1,_t.minY,_t.maxY,lt),Dr=null),ft>1&&console.timeEnd("clipping"),ke.push(Jr||[],et+1,ht*2,vt*2),ke.push(ur||[],et+1,ht*2,vt*2+1),ke.push(_r||[],et+1,ht*2+1,vt*2),ke.push(Br||[],et+1,ht*2+1,vt*2+1)}}},vn.prototype.getTile=function(st,et,ht){var vt=this.options,kt=vt.extent,Vt=vt.debug;if(st<0||st>24)return null;var Pe=1<<st;et=(et%Pe+Pe)%Pe;var ke=en(st,et,ht);if(this.tiles[ke])return jt(this.tiles[ke],kt);Vt>1&&console.log("drilling down to z%d-%d-%d",st,et,ht);for(var lt=st,ft=et,yt=ht,Rt;!Rt&&lt>0;)lt--,ft=Math.floor(ft/2),yt=Math.floor(yt/2),Rt=this.tiles[en(lt,ft,yt)];return!Rt||!Rt.source?null:(Vt>1&&console.log("found parent tile z%d-%d-%d",lt,ft,yt),Vt>1&&console.time("drilling down"),this.splitTile(Rt.source,lt,ft,yt,st,et,ht),Vt>1&&console.timeEnd("drilling down"),this.tiles[ke]?jt(this.tiles[ke],kt):null)};function en(st,et,ht){return((1<<st)*ht+et)*32+st}function ut(st,et){for(var ht in et)st[ht]=et[ht];return st}function ar(st,et){var ht=st.tileID.canonical;if(!this._geoJSONIndex)return et(null,null);var vt=this._geoJSONIndex.getTile(ht.z,ht.x,ht.y);if(!vt)return et(null,null);var kt=new b(vt.features),Vt=C(kt);(Vt.byteOffset!==0||Vt.byteLength!==Vt.buffer.byteLength)&&(Vt=new Uint8Array(Vt)),et(null,{vectorTile:kt,rawData:Vt.buffer})}var rr=function(st){function et(ht,vt,kt,Vt){st.call(this,ht,vt,kt,ar),Vt&&(this.loadGeoJSON=Vt)}return st&&(et.__proto__=st),et.prototype=Object.create(st&&st.prototype),et.prototype.constructor=et,et.prototype.loadData=function(vt,kt){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=kt,this._pendingLoadDataParams=vt,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},et.prototype._loadData=function(){var vt=this;if(!(!this._pendingCallback||!this._pendingLoadDataParams)){var kt=this._pendingCallback,Vt=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var Pe=Vt&&Vt.request&&Vt.request.collectResourceTiming?new e.RequestPerformance(Vt.request):!1;this.loadGeoJSON(Vt,function(ke,lt){if(ke||!lt)return kt(ke);if(typeof lt!="object")return kt(new Error("Input data given to '"+Vt.source+"' is not a valid GeoJSON object."));l(lt,!0);try{vt._geoJSONIndex=Vt.cluster?new oe(Kt(Vt)).load(lt.features):Xr(lt,Vt.geojsonVtOptions)}catch(Rt){return kt(Rt)}vt.loaded={};var ft={};if(Pe){var yt=Pe.finish();yt&&(ft.resourceTiming={},ft.resourceTiming[Vt.source]=JSON.parse(JSON.stringify(yt)))}kt(null,ft)})}},et.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},et.prototype.reloadTile=function(vt,kt){var Vt=this.loaded,Pe=vt.uid;return Vt&&Vt[Pe]?st.prototype.reloadTile.call(this,vt,kt):this.loadTile(vt,kt)},et.prototype.loadGeoJSON=function(vt,kt){if(vt.request)e.getJSON(vt.request,kt);else if(typeof vt.data=="string")try{return kt(null,JSON.parse(vt.data))}catch{return kt(new Error("Input data given to '"+vt.source+"' is not a valid GeoJSON object."))}else return kt(new Error("Input data given to '"+vt.source+"' is not a valid GeoJSON object."))},et.prototype.removeSource=function(vt,kt){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),kt()},et.prototype.getClusterExpansionZoom=function(vt,kt){try{kt(null,this._geoJSONIndex.getClusterExpansionZoom(vt.clusterId))}catch(Vt){kt(Vt)}},et.prototype.getClusterChildren=function(vt,kt){try{kt(null,this._geoJSONIndex.getChildren(vt.clusterId))}catch(Vt){kt(Vt)}},et.prototype.getClusterLeaves=function(vt,kt){try{kt(null,this._geoJSONIndex.getLeaves(vt.clusterId,vt.limit,vt.offset))}catch(Vt){kt(Vt)}},et}(p);function Kt(st){var et=st.superclusterOptions,ht=st.clusterProperties;if(!ht||!et)return et;for(var vt={},kt={},Vt={accumulated:null,zoom:0},Pe={properties:null},ke=Object.keys(ht),lt=0,ft=ke;lt<ft.length;lt+=1){var yt=ft[lt],Rt=ht[yt],_t=Rt[0],Dt=Rt[1],Jt=e.createExpression(Dt),fr=e.createExpression(typeof _t=="string"?[_t,["accumulated"],["get",yt]]:_t);vt[yt]=Jt.value,kt[yt]=fr.value}return et.map=function(Rr){Pe.properties=Rr;for(var Sr={},Pr=0,Jr=ke;Pr<Jr.length;Pr+=1){var ur=Jr[Pr];Sr[ur]=vt[ur].evaluate(Vt,Pe)}return Sr},et.reduce=function(Rr,Sr){Pe.properties=Sr;for(var Pr=0,Jr=ke;Pr<Jr.length;Pr+=1){var ur=Jr[Pr];Vt.accumulated=Rr[ur],Rr[ur]=kt[ur].evaluate(Vt,Pe)}},et}var Er=function(et){var ht=this;this.self=et,this.actor=new e.Actor(et,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:p,geojson:rr},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(vt,kt){if(ht.workerSourceTypes[vt])throw new Error('Worker source with name "'+vt+'" already registered.');ht.workerSourceTypes[vt]=kt},this.self.registerRTLTextPlugin=function(vt){if(e.plugin.isParsed())throw new Error("RTL text plugin already registered.");e.plugin.applyArabicShaping=vt.applyArabicShaping,e.plugin.processBidirectionalText=vt.processBidirectionalText,e.plugin.processStyledBidirectionalText=vt.processStyledBidirectionalText}};return Er.prototype.setReferrer=function(et,ht){this.referrer=ht},Er.prototype.setImages=function(et,ht,vt){this.availableImages[et]=ht;for(var kt in this.workerSources[et]){var Vt=this.workerSources[et][kt];for(var Pe in Vt)Vt[Pe].availableImages=ht}vt()},Er.prototype.setLayers=function(et,ht,vt){this.getLayerIndex(et).replace(ht),vt()},Er.prototype.updateLayers=function(et,ht,vt){this.getLayerIndex(et).update(ht.layers,ht.removedIds),vt()},Er.prototype.loadTile=function(et,ht,vt){this.getWorkerSource(et,ht.type,ht.source).loadTile(ht,vt)},Er.prototype.loadDEMTile=function(et,ht,vt){this.getDEMWorkerSource(et,ht.source).loadTile(ht,vt)},Er.prototype.reloadTile=function(et,ht,vt){this.getWorkerSource(et,ht.type,ht.source).reloadTile(ht,vt)},Er.prototype.abortTile=function(et,ht,vt){this.getWorkerSource(et,ht.type,ht.source).abortTile(ht,vt)},Er.prototype.removeTile=function(et,ht,vt){this.getWorkerSource(et,ht.type,ht.source).removeTile(ht,vt)},Er.prototype.removeDEMTile=function(et,ht){this.getDEMWorkerSource(et,ht.source).removeTile(ht)},Er.prototype.removeSource=function(et,ht,vt){if(!(!this.workerSources[et]||!this.workerSources[et][ht.type]||!this.workerSources[et][ht.type][ht.source])){var kt=this.workerSources[et][ht.type][ht.source];delete this.workerSources[et][ht.type][ht.source],kt.removeSource!==void 0?kt.removeSource(ht,vt):vt()}},Er.prototype.loadWorkerSource=function(et,ht,vt){try{this.self.importScripts(ht.url),vt()}catch(kt){vt(kt.toString())}},Er.prototype.syncRTLPluginState=function(et,ht,vt){try{e.plugin.setState(ht);var kt=e.plugin.getPluginURL();if(e.plugin.isLoaded()&&!e.plugin.isParsed()&&kt!=null){this.self.importScripts(kt);var Vt=e.plugin.isParsed(),Pe=Vt?void 0:new Error("RTL Text Plugin failed to import scripts from "+kt);vt(Pe,Vt)}}catch(ke){vt(ke.toString())}},Er.prototype.getAvailableImages=function(et){var ht=this.availableImages[et];return ht||(ht=[]),ht},Er.prototype.getLayerIndex=function(et){var ht=this.layerIndexes[et];return ht||(ht=this.layerIndexes[et]=new t),ht},Er.prototype.getWorkerSource=function(et,ht,vt){var kt=this;if(this.workerSources[et]||(this.workerSources[et]={}),this.workerSources[et][ht]||(this.workerSources[et][ht]={}),!this.workerSources[et][ht][vt]){var Vt={send:function(Pe,ke,lt){kt.actor.send(Pe,ke,lt,et)}};this.workerSources[et][ht][vt]=new this.workerSourceTypes[ht](Vt,this.getLayerIndex(et),this.getAvailableImages(et))}return this.workerSources[et][ht][vt]},Er.prototype.getDEMWorkerSource=function(et,ht){return this.demWorkerSources[et]||(this.demWorkerSources[et]={}),this.demWorkerSources[et][ht]||(this.demWorkerSources[et][ht]=new m),this.demWorkerSources[et][ht]},Er.prototype.enforceCacheSizeLimit=function(et,ht){e.enforceCacheSizeLimit(ht)},typeof WorkerGlobalScope<"u"&&typeof e.window<"u"&&e.window instanceof WorkerGlobalScope&&(e.window.worker=new Er(e.window)),Er}),T(["./shared"],function(e){var a=e.createCommonjsModule(function(fe){fe.exports?fe.exports=W:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=W,window.mapboxgl.notSupportedReason=ve);function W(jr){return!ve(jr)}function ve(jr){if(!J())return"not a browser";if(!pe())return"insufficent Array support";if(!Ee())return"insufficient Function support";if(!Ie())return"insufficient Object support";if(!$e())return"insufficient JSON support";if(!dt())return"insufficient worker support";if(!Ft())return"insufficient Uint8ClampedArray support";if(!nr())return"insufficient ArrayBuffer support";if(!dr())return"insufficient Canvas/getImageData support";if(!Fr(jr&&jr.failIfMajorPerformanceCaveat))return"insufficient WebGL support"}function J(){return typeof window<"u"&&typeof document<"u"}function pe(){return Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray}function Ee(){return Function.prototype&&Function.prototype.bind}function Ie(){return Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions}function $e(){return"JSON"in window&&"parse"in JSON&&"stringify"in JSON}function dt(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var jr=new Blob([""],{type:"text/javascript"}),rn=URL.createObjectURL(jr),mn,Fn;try{Fn=new Worker(rn),mn=!0}catch{mn=!1}return Fn&&Fn.terminate(),URL.revokeObjectURL(rn),mn}function Ft(){return"Uint8ClampedArray"in window}function nr(){return ArrayBuffer.isView}function dr(){var jr=document.createElement("canvas");jr.width=jr.height=1;var rn=jr.getContext("2d");if(!rn)return!1;var mn=rn.getImageData(0,0,1,1);return mn&&mn.width===jr.width}var xr={};function Fr(jr){return xr[jr]===void 0&&(xr[jr]=Qr(jr)),xr[jr]}W.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};function Zr(jr){var rn=document.createElement("canvas"),mn=Object.create(W.webGLContextAttributes);return mn.failIfMajorPerformanceCaveat=jr,rn.probablySupportsContext?rn.probablySupportsContext("webgl",mn)||rn.probablySupportsContext("experimental-webgl",mn):rn.supportsContext?rn.supportsContext("webgl",mn)||rn.supportsContext("experimental-webgl",mn):rn.getContext("webgl",mn)||rn.getContext("experimental-webgl",mn)}function Qr(jr){var rn=Zr(jr);if(!rn)return!1;var mn=rn.createShader(rn.VERTEX_SHADER);return!mn||rn.isContextLost()?!1:(rn.shaderSource(mn,"void main() {}"),rn.compileShader(mn),rn.getShaderParameter(mn,rn.COMPILE_STATUS)===!0)}}),n={};n.create=function(fe,W,ve){var J=e.window.document.createElement(fe);return W!==void 0&&(J.className=W),ve&&ve.appendChild(J),J},n.createNS=function(fe,W){var ve=e.window.document.createElementNS(fe,W);return ve};var r=e.window.document.documentElement.style;function t(fe){if(!r)return fe[0];for(var W=0;W<fe.length;W++)if(fe[W]in r)return fe[W];return fe[0]}var h=t(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),s;n.disableDrag=function(){r&&h&&(s=r[h],r[h]="none")},n.enableDrag=function(){r&&h&&(r[h]=s)};var o=t(["transform","WebkitTransform"]);n.setTransform=function(fe,W){fe.style[o]=W};var y=!1;try{var d=Object.defineProperty({},"passive",{get:function(){y=!0}});e.window.addEventListener("test",d,d),e.window.removeEventListener("test",d,d)}catch{y=!1}n.addEventListener=function(fe,W,ve,J){J===void 0&&(J={}),"passive"in J&&y?fe.addEventListener(W,ve,J):fe.addEventListener(W,ve,J.capture)},n.removeEventListener=function(fe,W,ve,J){J===void 0&&(J={}),"passive"in J&&y?fe.removeEventListener(W,ve,J):fe.removeEventListener(W,ve,J.capture)};var p=function(fe){fe.preventDefault(),fe.stopPropagation(),e.window.removeEventListener("click",p,!0)};n.suppressClick=function(){e.window.addEventListener("click",p,!0),e.window.setTimeout(function(){e.window.removeEventListener("click",p,!0)},0)},n.mousePos=function(fe,W){var ve=fe.getBoundingClientRect();return new e.Point(W.clientX-ve.left-fe.clientLeft,W.clientY-ve.top-fe.clientTop)},n.touchPos=function(fe,W){for(var ve=fe.getBoundingClientRect(),J=[],pe=0;pe<W.length;pe++)J.push(new e.Point(W[pe].clientX-ve.left-fe.clientLeft,W[pe].clientY-ve.top-fe.clientTop));return J},n.mouseButton=function(fe){return typeof e.window.InstallTrigger<"u"&&fe.button===2&&fe.ctrlKey&&e.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:fe.button},n.remove=function(fe){fe.parentNode&&fe.parentNode.removeChild(fe)};function c(fe,W,ve){var J,pe,Ee,Ie=e.browser.devicePixelRatio>1?"@2x":"",$e=e.getJSON(W.transformRequest(W.normalizeSpriteURL(fe,Ie,".json"),e.ResourceType.SpriteJSON),function(nr,dr){$e=null,Ee||(Ee=nr,J=dr,Ft())}),dt=e.getImage(W.transformRequest(W.normalizeSpriteURL(fe,Ie,".png"),e.ResourceType.SpriteImage),function(nr,dr){dt=null,Ee||(Ee=nr,pe=dr,Ft())});function Ft(){if(Ee)ve(Ee);else if(J&&pe){var nr=e.browser.getImageData(pe),dr={};for(var xr in J){var Fr=J[xr],Zr=Fr.width,Qr=Fr.height,jr=Fr.x,rn=Fr.y,mn=Fr.sdf,Fn=Fr.pixelRatio,Hn=Fr.stretchX,ta=Fr.stretchY,ia=Fr.content,na=new e.RGBAImage({width:Zr,height:Qr});e.RGBAImage.copy(nr,na,{x:jr,y:rn},{x:0,y:0},{width:Zr,height:Qr}),dr[xr]={data:na,pixelRatio:Fn,sdf:mn,stretchX:Hn,stretchY:ta,content:ia}}ve(null,dr)}}return{cancel:function(){$e&&($e.cancel(),$e=null),dt&&(dt.cancel(),dt=null)}}}function m(fe){var W=fe.userImage;if(W&&W.render){var ve=W.render();if(ve)return fe.data.replace(new Uint8Array(W.data.buffer)),!0}return!1}var l=1,x=function(fe){function W(){fe.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new e.RGBAImage({width:1,height:1}),this.dirty=!0}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.isLoaded=function(){return this.loaded},W.prototype.setLoaded=function(J){if(this.loaded!==J&&(this.loaded=J,J)){for(var pe=0,Ee=this.requestors;pe<Ee.length;pe+=1){var Ie=Ee[pe],$e=Ie.ids,dt=Ie.callback;this._notify($e,dt)}this.requestors=[]}},W.prototype.getImage=function(J){return this.images[J]},W.prototype.addImage=function(J,pe){this._validate(J,pe)&&(this.images[J]=pe)},W.prototype._validate=function(J,pe){var Ee=!0;return this._validateStretch(pe.stretchX,pe.data&&pe.data.width)||(this.fire(new e.ErrorEvent(new Error('Image "'+J+'" has invalid "stretchX" value'))),Ee=!1),this._validateStretch(pe.stretchY,pe.data&&pe.data.height)||(this.fire(new e.ErrorEvent(new Error('Image "'+J+'" has invalid "stretchY" value'))),Ee=!1),this._validateContent(pe.content,pe)||(this.fire(new e.ErrorEvent(new Error('Image "'+J+'" has invalid "content" value'))),Ee=!1),Ee},W.prototype._validateStretch=function(J,pe){if(!J)return!0;for(var Ee=0,Ie=0,$e=J;Ie<$e.length;Ie+=1){var dt=$e[Ie];if(dt[0]<Ee||dt[1]<dt[0]||pe<dt[1])return!1;Ee=dt[1]}return!0},W.prototype._validateContent=function(J,pe){return J?!(J.length!==4||J[0]<0||pe.data.width<J[0]||J[1]<0||pe.data.height<J[1]||J[2]<0||pe.data.width<J[2]||J[3]<0||pe.data.height<J[3]||J[2]<J[0]||J[3]<J[1]):!0},W.prototype.updateImage=function(J,pe){var Ee=this.images[J];pe.version=Ee.version+1,this.images[J]=pe,this.updatedImages[J]=!0},W.prototype.removeImage=function(J){var pe=this.images[J];delete this.images[J],delete this.patterns[J],pe.userImage&&pe.userImage.onRemove&&pe.userImage.onRemove()},W.prototype.listImages=function(){return Object.keys(this.images)},W.prototype.getImages=function(J,pe){var Ee=!0;if(!this.isLoaded())for(var Ie=0,$e=J;Ie<$e.length;Ie+=1){var dt=$e[Ie];this.images[dt]||(Ee=!1)}this.isLoaded()||Ee?this._notify(J,pe):this.requestors.push({ids:J,callback:pe})},W.prototype._notify=function(J,pe){for(var Ee={},Ie=0,$e=J;Ie<$e.length;Ie+=1){var dt=$e[Ie];this.images[dt]||this.fire(new e.Event("styleimagemissing",{id:dt}));var Ft=this.images[dt];Ft?Ee[dt]={data:Ft.data.clone(),pixelRatio:Ft.pixelRatio,sdf:Ft.sdf,version:Ft.version,stretchX:Ft.stretchX,stretchY:Ft.stretchY,content:Ft.content,hasRenderCallback:Boolean(Ft.userImage&&Ft.userImage.render)}:e.warnOnce('Image "'+dt+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}pe(null,Ee)},W.prototype.getPixelSize=function(){var J=this.atlasImage,pe=J.width,Ee=J.height;return{width:pe,height:Ee}},W.prototype.getPattern=function(J){var pe=this.patterns[J],Ee=this.getImage(J);if(!Ee)return null;if(pe&&pe.position.version===Ee.version)return pe.position;if(pe)pe.position.version=Ee.version;else{var Ie=Ee.data.width+l*2,$e=Ee.data.height+l*2,dt={w:Ie,h:$e,x:0,y:0},Ft=new e.ImagePosition(dt,Ee);this.patterns[J]={bin:dt,position:Ft}}return this._updatePatternAtlas(),this.patterns[J].position},W.prototype.bind=function(J){var pe=J.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new e.Texture(J,this.atlasImage,pe.RGBA),this.atlasTexture.bind(pe.LINEAR,pe.CLAMP_TO_EDGE)},W.prototype._updatePatternAtlas=function(){var J=[];for(var pe in this.patterns)J.push(this.patterns[pe].bin);var Ee=e.potpack(J),Ie=Ee.w,$e=Ee.h,dt=this.atlasImage;dt.resize({width:Ie||1,height:$e||1});for(var Ft in this.patterns){var nr=this.patterns[Ft],dr=nr.bin,xr=dr.x+l,Fr=dr.y+l,Zr=this.images[Ft].data,Qr=Zr.width,jr=Zr.height;e.RGBAImage.copy(Zr,dt,{x:0,y:0},{x:xr,y:Fr},{width:Qr,height:jr}),e.RGBAImage.copy(Zr,dt,{x:0,y:jr-1},{x:xr,y:Fr-1},{width:Qr,height:1}),e.RGBAImage.copy(Zr,dt,{x:0,y:0},{x:xr,y:Fr+jr},{width:Qr,height:1}),e.RGBAImage.copy(Zr,dt,{x:Qr-1,y:0},{x:xr-1,y:Fr},{width:1,height:jr}),e.RGBAImage.copy(Zr,dt,{x:0,y:0},{x:xr+Qr,y:Fr},{width:1,height:jr})}this.dirty=!0},W.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},W.prototype.dispatchRenderCallbacks=function(J){for(var pe=0,Ee=J;pe<Ee.length;pe+=1){var Ie=Ee[pe];if(!this.callbackDispatchedThisFrame[Ie]){this.callbackDispatchedThisFrame[Ie]=!0;var $e=this.images[Ie],dt=m($e);dt&&this.updateImage(Ie,$e)}}},W}(e.Evented);function u(fe,W,ve,J,pe){var Ee=W*256,Ie=Ee+255,$e=J.transformRequest(J.normalizeGlyphsURL(ve).replace("{fontstack}",fe).replace("{range}",Ee+"-"+Ie),e.ResourceType.Glyphs);e.getArrayBuffer($e,function(dt,Ft){if(dt)pe(dt);else if(Ft){for(var nr={},dr=0,xr=e.parseGlyphPBF(Ft);dr<xr.length;dr+=1){var Fr=xr[dr];nr[Fr.id]=Fr}pe(null,nr)}})}var A=b,_=b,g=1e20;function b(fe,W,ve,J,pe,Ee){this.fontSize=fe||24,this.buffer=W===void 0?3:W,this.cutoff=J||.25,this.fontFamily=pe||"sans-serif",this.fontWeight=Ee||"normal",this.radius=ve||8;var Ie=this.size=this.fontSize+this.buffer*2;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=Ie,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(Ie*Ie),this.gridInner=new Float64Array(Ie*Ie),this.f=new Float64Array(Ie),this.d=new Float64Array(Ie),this.z=new Float64Array(Ie+1),this.v=new Int16Array(Ie),this.middle=Math.round(Ie/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}b.prototype.draw=function(fe){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(fe,this.buffer,this.middle);for(var W=this.ctx.getImageData(0,0,this.size,this.size),ve=new Uint8ClampedArray(this.size*this.size),J=0;J<this.size*this.size;J++){var pe=W.data[J*4+3]/255;this.gridOuter[J]=pe===1?0:pe===0?g:Math.pow(Math.max(0,.5-pe),2),this.gridInner[J]=pe===1?g:pe===0?0:Math.pow(Math.max(0,pe-.5),2)}for(v(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),v(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),J=0;J<this.size*this.size;J++){var Ee=this.gridOuter[J]-this.gridInner[J];ve[J]=Math.max(0,Math.min(255,Math.round(255-255*(Ee/this.radius+this.cutoff))))}return ve};function v(fe,W,ve,J,pe,Ee,Ie){for(var $e=0;$e<W;$e++){for(var dt=0;dt<ve;dt++)J[dt]=fe[dt*W+$e];for(k(J,pe,Ee,Ie,ve),dt=0;dt<ve;dt++)fe[dt*W+$e]=pe[dt]}for(dt=0;dt<ve;dt++){for($e=0;$e<W;$e++)J[$e]=fe[dt*W+$e];for(k(J,pe,Ee,Ie,W),$e=0;$e<W;$e++)fe[dt*W+$e]=Math.sqrt(pe[$e])}}function k(fe,W,ve,J,pe){ve[0]=0,J[0]=-g,J[1]=+g;for(var Ee=1,Ie=0;Ee<pe;Ee++){for(var $e=(fe[Ee]+Ee*Ee-(fe[ve[Ie]]+ve[Ie]*ve[Ie]))/(2*Ee-2*ve[Ie]);$e<=J[Ie];)Ie--,$e=(fe[Ee]+Ee*Ee-(fe[ve[Ie]]+ve[Ie]*ve[Ie]))/(2*Ee-2*ve[Ie]);Ie++,ve[Ie]=Ee,J[Ie]=$e,J[Ie+1]=+g}for(Ee=0,Ie=0;Ee<pe;Ee++){for(;J[Ie+1]<Ee;)Ie++;W[Ee]=(Ee-ve[Ie])*(Ee-ve[Ie])+fe[ve[Ie]]}}A.default=_;var S=function(W,ve){this.requestManager=W,this.localIdeographFontFamily=ve,this.entries={}};S.prototype.setURL=function(W){this.url=W},S.prototype.getGlyphs=function(W,ve){var J=this,pe=[];for(var Ee in W)for(var Ie=0,$e=W[Ee];Ie<$e.length;Ie+=1){var dt=$e[Ie];pe.push({stack:Ee,id:dt})}e.asyncAll(pe,function(Ft,nr){var dr=Ft.stack,xr=Ft.id,Fr=J.entries[dr];Fr||(Fr=J.entries[dr]={glyphs:{},requests:{},ranges:{}});var Zr=Fr.glyphs[xr];if(Zr!==void 0){nr(null,{stack:dr,id:xr,glyph:Zr});return}if(Zr=J._tinySDF(Fr,dr,xr),Zr){Fr.glyphs[xr]=Zr,nr(null,{stack:dr,id:xr,glyph:Zr});return}var Qr=Math.floor(xr/256);if(Qr*256>65535){nr(new Error("glyphs > 65535 not supported"));return}if(Fr.ranges[Qr]){nr(null,{stack:dr,id:xr,glyph:Zr});return}var jr=Fr.requests[Qr];jr||(jr=Fr.requests[Qr]=[],S.loadGlyphRange(dr,Qr,J.url,J.requestManager,function(rn,mn){if(mn){for(var Fn in mn)J._doesCharSupportLocalGlyph(+Fn)||(Fr.glyphs[+Fn]=mn[+Fn]);Fr.ranges[Qr]=!0}for(var Hn=0,ta=jr;Hn<ta.length;Hn+=1){var ia=ta[Hn];ia(rn,mn)}delete Fr.requests[Qr]})),jr.push(function(rn,mn){rn?nr(rn):mn&&nr(null,{stack:dr,id:xr,glyph:mn[xr]||null})})},function(Ft,nr){if(Ft)ve(Ft);else if(nr){for(var dr={},xr=0,Fr=nr;xr<Fr.length;xr+=1){var Zr=Fr[xr],Qr=Zr.stack,jr=Zr.id,rn=Zr.glyph;(dr[Qr]||(dr[Qr]={}))[jr]=rn&&{id:rn.id,bitmap:rn.bitmap.clone(),metrics:rn.metrics}}ve(null,dr)}})},S.prototype._doesCharSupportLocalGlyph=function(W){return!!this.localIdeographFontFamily&&(e.isChar["CJK Unified Ideographs"](W)||e.isChar["Hangul Syllables"](W)||e.isChar.Hiragana(W)||e.isChar.Katakana(W))},S.prototype._tinySDF=function(W,ve,J){var pe=this.localIdeographFontFamily;if(!!pe&&!!this._doesCharSupportLocalGlyph(J)){var Ee=W.tinySDF;if(!Ee){var Ie="400";/bold/i.test(ve)?Ie="900":/medium/i.test(ve)?Ie="500":/light/i.test(ve)&&(Ie="200"),Ee=W.tinySDF=new S.TinySDF(24,3,8,.25,pe,Ie)}return{id:J,bitmap:new e.AlphaImage({width:30,height:30},Ee.draw(String.fromCharCode(J))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},S.loadGlyphRange=u,S.TinySDF=A;var E=function(){this.specification=e.styleSpec.light.position};E.prototype.possiblyEvaluate=function(W,ve){return e.sphericalToCartesian(W.expression.evaluate(ve))},E.prototype.interpolate=function(W,ve,J){return{x:e.number(W.x,ve.x,J),y:e.number(W.y,ve.y,J),z:e.number(W.z,ve.z,J)}};var C=new e.Properties({anchor:new e.DataConstantProperty(e.styleSpec.light.anchor),position:new E,color:new e.DataConstantProperty(e.styleSpec.light.color),intensity:new e.DataConstantProperty(e.styleSpec.light.intensity)}),F="-transition",I=function(fe){function W(ve){fe.call(this),this._transitionable=new e.Transitionable(C),this.setLight(ve),this._transitioning=this._transitionable.untransitioned()}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.getLight=function(){return this._transitionable.serialize()},W.prototype.setLight=function(J,pe){if(pe===void 0&&(pe={}),!this._validate(e.validateLight,J,pe))for(var Ee in J){var Ie=J[Ee];e.endsWith(Ee,F)?this._transitionable.setTransition(Ee.slice(0,-F.length),Ie):this._transitionable.setValue(Ee,Ie)}},W.prototype.updateTransitions=function(J){this._transitioning=this._transitionable.transitioned(J,this._transitioning)},W.prototype.hasTransition=function(){return this._transitioning.hasTransition()},W.prototype.recalculate=function(J){this.properties=this._transitioning.possiblyEvaluate(J)},W.prototype._validate=function(J,pe,Ee){return Ee&&Ee.validate===!1?!1:e.emitValidationErrors(this,J.call(e.validateStyle,e.extend({value:pe,style:{glyphs:!0,sprite:!0},styleSpec:e.styleSpec})))},W}(e.Evented),D=function(W,ve){this.width=W,this.height=ve,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};D.prototype.getDash=function(W,ve){var J=W.join(",")+String(ve);return this.dashEntry[J]||(this.dashEntry[J]=this.addDash(W,ve)),this.dashEntry[J]},D.prototype.getDashRanges=function(W,ve,J){var pe=W.length%2===1,Ee=[],Ie=pe?-W[W.length-1]*J:0,$e=W[0]*J,dt=!0;Ee.push({left:Ie,right:$e,isDash:dt,zeroLength:W[0]===0});for(var Ft=W[0],nr=1;nr<W.length;nr++){dt=!dt;var dr=W[nr];Ie=Ft*J,Ft+=dr,$e=Ft*J,Ee.push({left:Ie,right:$e,isDash:dt,zeroLength:dr===0})}return Ee},D.prototype.addRoundDash=function(W,ve,J){for(var pe=ve/2,Ee=-J;Ee<=J;Ee++)for(var Ie=this.nextRow+J+Ee,$e=this.width*Ie,dt=0,Ft=W[dt],nr=0;nr<this.width;nr++){nr/Ft.right>1&&(Ft=W[++dt]);var dr=Math.abs(nr-Ft.left),xr=Math.abs(nr-Ft.right),Fr=Math.min(dr,xr),Zr=void 0,Qr=Ee/J*(pe+1);if(Ft.isDash){var jr=pe-Math.abs(Qr);Zr=Math.sqrt(Fr*Fr+jr*jr)}else Zr=pe-Math.sqrt(Fr*Fr+Qr*Qr);this.data[$e+nr]=Math.max(0,Math.min(255,Zr+128))}},D.prototype.addRegularDash=function(W){for(var ve=W.length-1;ve>=0;--ve){var J=W[ve],pe=W[ve+1];J.zeroLength?W.splice(ve,1):pe&&pe.isDash===J.isDash&&(pe.left=J.left,W.splice(ve,1))}var Ee=W[0],Ie=W[W.length-1];Ee.isDash===Ie.isDash&&(Ee.left=Ie.left-this.width,Ie.right=Ee.right+this.width);for(var $e=this.width*this.nextRow,dt=0,Ft=W[dt],nr=0;nr<this.width;nr++){nr/Ft.right>1&&(Ft=W[++dt]);var dr=Math.abs(nr-Ft.left),xr=Math.abs(nr-Ft.right),Fr=Math.min(dr,xr),Zr=Ft.isDash?Fr:-Fr;this.data[$e+nr]=Math.max(0,Math.min(255,Zr+128))}},D.prototype.addDash=function(W,ve){var J=ve?7:0,pe=2*J+1;if(this.nextRow+pe>this.height)return e.warnOnce("LineAtlas out of space"),null;for(var Ee=0,Ie=0;Ie<W.length;Ie++)Ee+=W[Ie];if(Ee!==0){var $e=this.width/Ee,dt=this.getDashRanges(W,this.width,$e);ve?this.addRoundDash(dt,$e,J):this.addRegularDash(dt)}var Ft={y:(this.nextRow+J+.5)/this.height,height:2*J/this.height,width:Ee};return this.nextRow+=pe,this.dirty=!0,Ft},D.prototype.bind=function(W){var ve=W.gl;this.texture?(ve.bindTexture(ve.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,ve.texSubImage2D(ve.TEXTURE_2D,0,0,0,this.width,this.height,ve.ALPHA,ve.UNSIGNED_BYTE,this.data))):(this.texture=ve.createTexture(),ve.bindTexture(ve.TEXTURE_2D,this.texture),ve.texParameteri(ve.TEXTURE_2D,ve.TEXTURE_WRAP_S,ve.REPEAT),ve.texParameteri(ve.TEXTURE_2D,ve.TEXTURE_WRAP_T,ve.REPEAT),ve.texParameteri(ve.TEXTURE_2D,ve.TEXTURE_MIN_FILTER,ve.LINEAR),ve.texParameteri(ve.TEXTURE_2D,ve.TEXTURE_MAG_FILTER,ve.LINEAR),ve.texImage2D(ve.TEXTURE_2D,0,ve.ALPHA,this.width,this.height,0,ve.ALPHA,ve.UNSIGNED_BYTE,this.data))};var R=function fe(W,ve){this.workerPool=W,this.actors=[],this.currentActor=0,this.id=e.uniqueId();for(var J=this.workerPool.acquire(this.id),pe=0;pe<J.length;pe++){var Ee=J[pe],Ie=new fe.Actor(Ee,ve,this.id);Ie.name="Worker "+pe,this.actors.push(Ie)}};R.prototype.broadcast=function(W,ve,J){J=J||function(){},e.asyncAll(this.actors,function(pe,Ee){pe.send(W,ve,Ee)},J)},R.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},R.prototype.remove=function(){this.actors.forEach(function(W){W.remove()}),this.actors=[],this.workerPool.release(this.id)},R.Actor=e.Actor;function O(fe,W,ve){var J=function(pe,Ee){if(pe)return ve(pe);if(Ee){var Ie=e.pick(e.extend(Ee,fe),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);Ee.vector_layers&&(Ie.vectorLayers=Ee.vector_layers,Ie.vectorLayerIds=Ie.vectorLayers.map(function($e){return $e.id})),Ie.tiles=W.canonicalizeTileset(Ie,fe.url),ve(null,Ie)}};return fe.url?e.getJSON(W.transformRequest(W.normalizeSourceURL(fe.url),e.ResourceType.Source),J):e.browser.frame(function(){return J(null,fe)})}var z=function(W,ve,J){this.bounds=e.LngLatBounds.convert(this.validateBounds(W)),this.minzoom=ve||0,this.maxzoom=J||24};z.prototype.validateBounds=function(W){return!Array.isArray(W)||W.length!==4?[-180,-90,180,90]:[Math.max(-180,W[0]),Math.max(-90,W[1]),Math.min(180,W[2]),Math.min(90,W[3])]},z.prototype.contains=function(W){var ve=Math.pow(2,W.z),J={minX:Math.floor(e.mercatorXfromLng(this.bounds.getWest())*ve),minY:Math.floor(e.mercatorYfromLat(this.bounds.getNorth())*ve),maxX:Math.ceil(e.mercatorXfromLng(this.bounds.getEast())*ve),maxY:Math.ceil(e.mercatorYfromLat(this.bounds.getSouth())*ve)},pe=W.x>=J.minX&&W.x<J.maxX&&W.y>=J.minY&&W.y<J.maxY;return pe};var B=function(fe){function W(ve,J,pe,Ee){if(fe.call(this),this.id=ve,this.dispatcher=pe,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,e.extend(this,e.pick(J,["url","scheme","tileSize","promoteId"])),this._options=e.extend({type:"vector"},J),this._collectResourceTiming=J.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(Ee)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.load=function(){var J=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=O(this._options,this.map._requestManager,function(pe,Ee){J._tileJSONRequest=null,J._loaded=!0,pe?J.fire(new e.ErrorEvent(pe)):Ee&&(e.extend(J,Ee),Ee.bounds&&(J.tileBounds=new z(Ee.bounds,J.minzoom,J.maxzoom)),e.postTurnstileEvent(Ee.tiles,J.map._requestManager._customAccessToken),e.postMapLoadEvent(Ee.tiles,J.map._getMapId(),J.map._requestManager._skuToken,J.map._requestManager._customAccessToken),J.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),J.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))})},W.prototype.loaded=function(){return this._loaded},W.prototype.hasTile=function(J){return!this.tileBounds||this.tileBounds.contains(J.canonical)},W.prototype.onAdd=function(J){this.map=J,this.load()},W.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},W.prototype.serialize=function(){return e.extend({},this._options)},W.prototype.loadTile=function(J,pe){var Ee=this.map._requestManager.normalizeTileURL(J.tileID.canonical.url(this.tiles,this.scheme)),Ie={request:this.map._requestManager.transformRequest(Ee,e.ResourceType.Tile),uid:J.uid,tileID:J.tileID,zoom:J.tileID.overscaledZ,tileSize:this.tileSize*J.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:e.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};Ie.request.collectResourceTiming=this._collectResourceTiming,!J.actor||J.state==="expired"?(J.actor=this.dispatcher.getActor(),J.request=J.actor.send("loadTile",Ie,$e.bind(this))):J.state==="loading"?J.reloadCallback=pe:J.request=J.actor.send("reloadTile",Ie,$e.bind(this));function $e(dt,Ft){if(delete J.request,J.aborted)return pe(null);if(dt&&dt.status!==404)return pe(dt);Ft&&Ft.resourceTiming&&(J.resourceTiming=Ft.resourceTiming),this.map._refreshExpiredTiles&&Ft&&J.setExpiryData(Ft),J.loadVectorData(Ft,this.map.painter),e.cacheEntryPossiblyAdded(this.dispatcher),pe(null),J.reloadCallback&&(this.loadTile(J,J.reloadCallback),J.reloadCallback=null)}},W.prototype.abortTile=function(J){J.request&&(J.request.cancel(),delete J.request),J.actor&&J.actor.send("abortTile",{uid:J.uid,type:this.type,source:this.id},void 0)},W.prototype.unloadTile=function(J){J.unloadVectorData(),J.actor&&J.actor.send("removeTile",{uid:J.uid,type:this.type,source:this.id},void 0)},W.prototype.hasTransition=function(){return!1},W}(e.Evented),G=function(fe){function W(ve,J,pe,Ee){fe.call(this),this.id=ve,this.dispatcher=pe,this.setEventedParent(Ee),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=e.extend({type:"raster"},J),e.extend(this,e.pick(J,["url","scheme","tileSize"]))}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.load=function(){var J=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=O(this._options,this.map._requestManager,function(pe,Ee){J._tileJSONRequest=null,J._loaded=!0,pe?J.fire(new e.ErrorEvent(pe)):Ee&&(e.extend(J,Ee),Ee.bounds&&(J.tileBounds=new z(Ee.bounds,J.minzoom,J.maxzoom)),e.postTurnstileEvent(Ee.tiles),e.postMapLoadEvent(Ee.tiles,J.map._getMapId(),J.map._requestManager._skuToken),J.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),J.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))})},W.prototype.loaded=function(){return this._loaded},W.prototype.onAdd=function(J){this.map=J,this.load()},W.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},W.prototype.serialize=function(){return e.extend({},this._options)},W.prototype.hasTile=function(J){return!this.tileBounds||this.tileBounds.contains(J.canonical)},W.prototype.loadTile=function(J,pe){var Ee=this,Ie=this.map._requestManager.normalizeTileURL(J.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);J.request=e.getImage(this.map._requestManager.transformRequest(Ie,e.ResourceType.Tile),function($e,dt){if(delete J.request,J.aborted)J.state="unloaded",pe(null);else if($e)J.state="errored",pe($e);else if(dt){Ee.map._refreshExpiredTiles&&J.setExpiryData(dt),delete dt.cacheControl,delete dt.expires;var Ft=Ee.map.painter.context,nr=Ft.gl;J.texture=Ee.map.painter.getTileTexture(dt.width),J.texture?J.texture.update(dt,{useMipmap:!0}):(J.texture=new e.Texture(Ft,dt,nr.RGBA,{useMipmap:!0}),J.texture.bind(nr.LINEAR,nr.CLAMP_TO_EDGE,nr.LINEAR_MIPMAP_NEAREST),Ft.extTextureFilterAnisotropic&&nr.texParameterf(nr.TEXTURE_2D,Ft.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Ft.extTextureFilterAnisotropicMax)),J.state="loaded",e.cacheEntryPossiblyAdded(Ee.dispatcher),pe(null)}})},W.prototype.abortTile=function(J,pe){J.request&&(J.request.cancel(),delete J.request),pe()},W.prototype.unloadTile=function(J,pe){J.texture&&this.map.painter.saveTileTexture(J.texture),pe()},W.prototype.hasTransition=function(){return!1},W}(e.Evented),Q=function(fe){function W(ve,J,pe,Ee){fe.call(this,ve,J,pe,Ee),this.type="raster-dem",this.maxzoom=22,this._options=e.extend({type:"raster-dem"},J),this.encoding=J.encoding||"mapbox"}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},W.prototype.loadTile=function(J,pe){var Ee=this.map._requestManager.normalizeTileURL(J.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);J.request=e.getImage(this.map._requestManager.transformRequest(Ee,e.ResourceType.Tile),Ie.bind(this)),J.neighboringTiles=this._getNeighboringTiles(J.tileID);function Ie(dt,Ft){if(delete J.request,J.aborted)J.state="unloaded",pe(null);else if(dt)J.state="errored",pe(dt);else if(Ft){this.map._refreshExpiredTiles&&J.setExpiryData(Ft),delete Ft.cacheControl,delete Ft.expires;var nr=e.window.ImageBitmap&&Ft instanceof e.window.ImageBitmap&&e.offscreenCanvasSupported(),dr=nr?Ft:e.browser.getImageData(Ft,1),xr={uid:J.uid,coord:J.tileID,source:this.id,rawImageData:dr,encoding:this.encoding};(!J.actor||J.state==="expired")&&(J.actor=this.dispatcher.getActor(),J.actor.send("loadDEMTile",xr,$e.bind(this)))}}function $e(dt,Ft){dt&&(J.state="errored",pe(dt)),Ft&&(J.dem=Ft,J.needsHillshadePrepare=!0,J.state="loaded",pe(null))}},W.prototype._getNeighboringTiles=function(J){var pe=J.canonical,Ee=Math.pow(2,pe.z),Ie=(pe.x-1+Ee)%Ee,$e=pe.x===0?J.wrap-1:J.wrap,dt=(pe.x+1+Ee)%Ee,Ft=pe.x+1===Ee?J.wrap+1:J.wrap,nr={};return nr[new e.OverscaledTileID(J.overscaledZ,$e,pe.z,Ie,pe.y).key]={backfilled:!1},nr[new e.OverscaledTileID(J.overscaledZ,Ft,pe.z,dt,pe.y).key]={backfilled:!1},pe.y>0&&(nr[new e.OverscaledTileID(J.overscaledZ,$e,pe.z,Ie,pe.y-1).key]={backfilled:!1},nr[new e.OverscaledTileID(J.overscaledZ,J.wrap,pe.z,pe.x,pe.y-1).key]={backfilled:!1},nr[new e.OverscaledTileID(J.overscaledZ,Ft,pe.z,dt,pe.y-1).key]={backfilled:!1}),pe.y+1<Ee&&(nr[new e.OverscaledTileID(J.overscaledZ,$e,pe.z,Ie,pe.y+1).key]={backfilled:!1},nr[new e.OverscaledTileID(J.overscaledZ,J.wrap,pe.z,pe.x,pe.y+1).key]={backfilled:!1},nr[new e.OverscaledTileID(J.overscaledZ,Ft,pe.z,dt,pe.y+1).key]={backfilled:!1}),nr},W.prototype.unloadTile=function(J){J.demTexture&&this.map.painter.saveTileTexture(J.demTexture),J.fbo&&(J.fbo.destroy(),delete J.fbo),J.dem&&delete J.dem,delete J.neighboringTiles,J.state="unloaded",J.actor&&J.actor.send("removeDEMTile",{uid:J.uid,source:this.id})},W}(G),X=function(fe){function W(ve,J,pe,Ee){fe.call(this),this.id=ve,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=pe.getActor(),this.setEventedParent(Ee),this._data=J.data,this._options=e.extend({},J),this._collectResourceTiming=J.collectResourceTiming,this._resourceTiming=[],J.maxzoom!==void 0&&(this.maxzoom=J.maxzoom),J.type&&(this.type=J.type),J.attribution&&(this.attribution=J.attribution),this.promoteId=J.promoteId;var Ie=e.EXTENT/this.tileSize;this.workerOptions=e.extend({source:this.id,cluster:J.cluster||!1,geojsonVtOptions:{buffer:(J.buffer!==void 0?J.buffer:128)*Ie,tolerance:(J.tolerance!==void 0?J.tolerance:.375)*Ie,extent:e.EXTENT,maxZoom:this.maxzoom,lineMetrics:J.lineMetrics||!1,generateId:J.generateId||!1},superclusterOptions:{maxZoom:J.clusterMaxZoom!==void 0?Math.min(J.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:e.EXTENT,radius:(J.clusterRadius||50)*Ie,log:!1,generateId:J.generateId||!1},clusterProperties:J.clusterProperties},J.workerOptions)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.load=function(){var J=this;this.fire(new e.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(pe){if(pe){J.fire(new e.ErrorEvent(pe));return}var Ee={dataType:"source",sourceDataType:"metadata"};J._collectResourceTiming&&J._resourceTiming&&J._resourceTiming.length>0&&(Ee.resourceTiming=J._resourceTiming,J._resourceTiming=[]),J.fire(new e.Event("data",Ee))})},W.prototype.onAdd=function(J){this.map=J,this.load()},W.prototype.setData=function(J){var pe=this;return this._data=J,this.fire(new e.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(Ee){if(Ee){pe.fire(new e.ErrorEvent(Ee));return}var Ie={dataType:"source",sourceDataType:"content"};pe._collectResourceTiming&&pe._resourceTiming&&pe._resourceTiming.length>0&&(Ie.resourceTiming=pe._resourceTiming,pe._resourceTiming=[]),pe.fire(new e.Event("data",Ie))}),this},W.prototype.getClusterExpansionZoom=function(J,pe){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:J,source:this.id},pe),this},W.prototype.getClusterChildren=function(J,pe){return this.actor.send("geojson.getClusterChildren",{clusterId:J,source:this.id},pe),this},W.prototype.getClusterLeaves=function(J,pe,Ee,Ie){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:J,limit:pe,offset:Ee},Ie),this},W.prototype._updateWorkerData=function(J){var pe=this;this._loaded=!1;var Ee=e.extend({},this.workerOptions),Ie=this._data;typeof Ie=="string"?(Ee.request=this.map._requestManager.transformRequest(e.browser.resolveURL(Ie),e.ResourceType.Source),Ee.request.collectResourceTiming=this._collectResourceTiming):Ee.data=JSON.stringify(Ie),this.actor.send(this.type+".loadData",Ee,function($e,dt){pe._removed||dt&&dt.abandoned||(pe._loaded=!0,dt&&dt.resourceTiming&&dt.resourceTiming[pe.id]&&(pe._resourceTiming=dt.resourceTiming[pe.id].slice(0)),pe.actor.send(pe.type+".coalesce",{source:Ee.source},null),J($e))})},W.prototype.loaded=function(){return this._loaded},W.prototype.loadTile=function(J,pe){var Ee=this,Ie=J.actor?"reloadTile":"loadTile";J.actor=this.actor;var $e={type:this.type,uid:J.uid,tileID:J.tileID,zoom:J.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:e.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};J.request=this.actor.send(Ie,$e,function(dt,Ft){return delete J.request,J.unloadVectorData(),J.aborted?pe(null):dt?pe(dt):(J.loadVectorData(Ft,Ee.map.painter,Ie==="reloadTile"),pe(null))})},W.prototype.abortTile=function(J){J.request&&(J.request.cancel(),delete J.request),J.aborted=!0},W.prototype.unloadTile=function(J){J.unloadVectorData(),this.actor.send("removeTile",{uid:J.uid,type:this.type,source:this.id})},W.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},W.prototype.serialize=function(){return e.extend({},this._options,{type:this.type,data:this._data})},W.prototype.hasTransition=function(){return!1},W}(e.Evented),j=e.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),re=function(fe){function W(ve,J,pe,Ee){fe.call(this),this.id=ve,this.dispatcher=pe,this.coordinates=J.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(Ee),this.options=J}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.load=function(J,pe){var Ee=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this.url=this.options.url,e.getImage(this.map._requestManager.transformRequest(this.url,e.ResourceType.Image),function(Ie,$e){Ee._loaded=!0,Ie?Ee.fire(new e.ErrorEvent(Ie)):$e&&(Ee.image=$e,J&&(Ee.coordinates=J),pe&&pe(),Ee._finishLoading())})},W.prototype.loaded=function(){return this._loaded},W.prototype.updateImage=function(J){var pe=this;return!this.image||!J.url?this:(this.options.url=J.url,this.load(J.coordinates,function(){pe.texture=null}),this)},W.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})))},W.prototype.onAdd=function(J){this.map=J,this.load()},W.prototype.setCoordinates=function(J){var pe=this;this.coordinates=J;var Ee=J.map(e.MercatorCoordinate.fromLngLat);this.tileID=ue(Ee),this.minzoom=this.maxzoom=this.tileID.z;var Ie=Ee.map(function($e){return pe.tileID.getTilePoint($e)._round()});return this._boundsArray=new e.StructArrayLayout4i8,this._boundsArray.emplaceBack(Ie[0].x,Ie[0].y,0,0),this._boundsArray.emplaceBack(Ie[1].x,Ie[1].y,e.EXTENT,0),this._boundsArray.emplaceBack(Ie[3].x,Ie[3].y,0,e.EXTENT),this._boundsArray.emplaceBack(Ie[2].x,Ie[2].y,e.EXTENT,e.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})),this},W.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||!this.image)){var J=this.map.painter.context,pe=J.gl;this.boundsBuffer||(this.boundsBuffer=J.createVertexBuffer(this._boundsArray,j.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new e.Texture(J,this.image,pe.RGBA),this.texture.bind(pe.LINEAR,pe.CLAMP_TO_EDGE));for(var Ee in this.tiles){var Ie=this.tiles[Ee];Ie.state!=="loaded"&&(Ie.state="loaded",Ie.texture=this.texture)}}},W.prototype.loadTile=function(J,pe){this.tileID&&this.tileID.equals(J.tileID.canonical)?(this.tiles[String(J.tileID.wrap)]=J,J.buckets={},pe(null)):(J.state="errored",pe(null))},W.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},W.prototype.hasTransition=function(){return!1},W}(e.Evented);function ue(fe){for(var W=1/0,ve=1/0,J=-1/0,pe=-1/0,Ee=0,Ie=fe;Ee<Ie.length;Ee+=1){var $e=Ie[Ee];W=Math.min(W,$e.x),ve=Math.min(ve,$e.y),J=Math.max(J,$e.x),pe=Math.max(pe,$e.y)}var dt=J-W,Ft=pe-ve,nr=Math.max(dt,Ft),dr=Math.max(0,Math.floor(-Math.log(nr)/Math.LN2)),xr=Math.pow(2,dr);return new e.CanonicalTileID(dr,Math.floor((W+J)/2*xr),Math.floor((ve+pe)/2*xr))}var K=function(fe){function W(ve,J,pe,Ee){fe.call(this,ve,J,pe,Ee),this.roundZoom=!0,this.type="video",this.options=J}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.load=function(){var J=this;this._loaded=!1;var pe=this.options;this.urls=[];for(var Ee=0,Ie=pe.urls;Ee<Ie.length;Ee+=1){var $e=Ie[Ee];this.urls.push(this.map._requestManager.transformRequest($e,e.ResourceType.Source).url)}e.getVideo(this.urls,function(dt,Ft){J._loaded=!0,dt?J.fire(new e.ErrorEvent(dt)):Ft&&(J.video=Ft,J.video.loop=!0,J.video.addEventListener("playing",function(){J.map.triggerRepaint()}),J.map&&J.video.play(),J._finishLoading())})},W.prototype.pause=function(){this.video&&this.video.pause()},W.prototype.play=function(){this.video&&this.video.play()},W.prototype.seek=function(J){if(this.video){var pe=this.video.seekable;J<pe.start(0)||J>pe.end(0)?this.fire(new e.ErrorEvent(new e.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+pe.start(0)+" and "+pe.end(0)+"-second mark."))):this.video.currentTime=J}},W.prototype.getVideo=function(){return this.video},W.prototype.onAdd=function(J){this.map||(this.map=J,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},W.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var J=this.map.painter.context,pe=J.gl;this.boundsBuffer||(this.boundsBuffer=J.createVertexBuffer(this._boundsArray,j.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(pe.LINEAR,pe.CLAMP_TO_EDGE),pe.texSubImage2D(pe.TEXTURE_2D,0,0,0,pe.RGBA,pe.UNSIGNED_BYTE,this.video)):(this.texture=new e.Texture(J,this.video,pe.RGBA),this.texture.bind(pe.LINEAR,pe.CLAMP_TO_EDGE));for(var Ee in this.tiles){var Ie=this.tiles[Ee];Ie.state!=="loaded"&&(Ie.state="loaded",Ie.texture=this.texture)}}},W.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},W.prototype.hasTransition=function(){return this.video&&!this.video.paused},W}(re),te=function(fe){function W(ve,J,pe,Ee){fe.call(this,ve,J,pe,Ee),J.coordinates?(!Array.isArray(J.coordinates)||J.coordinates.length!==4||J.coordinates.some(function(Ie){return!Array.isArray(Ie)||Ie.length!==2||Ie.some(function($e){return typeof $e!="number"})}))&&this.fire(new e.ErrorEvent(new e.ValidationError("sources."+ve,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new e.ErrorEvent(new e.ValidationError("sources."+ve,null,'missing required property "coordinates"'))),J.animate&&typeof J.animate!="boolean"&&this.fire(new e.ErrorEvent(new e.ValidationError("sources."+ve,null,'optional "animate" property must be a boolean value'))),J.canvas?typeof J.canvas!="string"&&!(J.canvas instanceof e.window.HTMLCanvasElement)&&this.fire(new e.ErrorEvent(new e.ValidationError("sources."+ve,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new e.ErrorEvent(new e.ValidationError("sources."+ve,null,'missing required property "canvas"'))),this.options=J,this.animate=J.animate!==void 0?J.animate:!0}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.load=function(){if(this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof e.window.HTMLCanvasElement?this.options.canvas:e.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()){this.fire(new e.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero.")));return}this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading()},W.prototype.getCanvas=function(){return this.canvas},W.prototype.onAdd=function(J){this.map=J,this.load(),this.canvas&&this.animate&&this.play()},W.prototype.onRemove=function(){this.pause()},W.prototype.prepare=function(){var J=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,J=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,J=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var pe=this.map.painter.context,Ee=pe.gl;this.boundsBuffer||(this.boundsBuffer=pe.createVertexBuffer(this._boundsArray,j.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(J||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new e.Texture(pe,this.canvas,Ee.RGBA,{premultiply:!0});for(var Ie in this.tiles){var $e=this.tiles[Ie];$e.state!=="loaded"&&($e.state="loaded",$e.texture=this.texture)}}},W.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},W.prototype.hasTransition=function(){return this._playing},W.prototype._hasInvalidDimensions=function(){for(var J=0,pe=[this.canvas.width,this.canvas.height];J<pe.length;J+=1){var Ee=pe[J];if(isNaN(Ee)||Ee<=0)return!0}return!1},W}(re),Y={vector:B,raster:G,"raster-dem":Q,geojson:X,video:K,image:re,canvas:te},H=function(fe,W,ve,J){var pe=new Y[W.type](fe,W,ve,J);if(pe.id!==fe)throw new Error("Expected Source id to be "+fe+" instead of "+pe.id);return e.bindAll(["load","abort","unload","serialize","prepare"],pe),pe},ee=function(fe){return Y[fe]},ne=function(fe,W){Y[fe]=W};function Z(fe,W){var ve=e.identity([]);return e.translate(ve,ve,[1,1,0]),e.scale(ve,ve,[fe.width*.5,fe.height*.5,1]),e.multiply(ve,ve,fe.calculatePosMatrix(W.toUnwrapped()))}function q(fe,W,ve){if(fe)for(var J=0,pe=fe;J<pe.length;J+=1){var Ee=pe[J],Ie=W[Ee];if(Ie&&Ie.source===ve&&Ie.type==="fill-extrusion")return!0}else for(var $e in W){var dt=W[$e];if(dt.source===ve&&dt.type==="fill-extrusion")return!0}return!1}function ie(fe,W,ve,J,pe,Ee){var Ie=q(pe&&pe.layers,W,fe.id),$e=Ee.maxPitchScaleFactor(),dt=fe.tilesIn(J,$e,Ie);dt.sort(oe);for(var Ft=[],nr=0,dr=dt;nr<dr.length;nr+=1){var xr=dr[nr];Ft.push({wrappedTileID:xr.tileID.wrapped().key,queryResults:xr.tile.queryRenderedFeatures(W,ve,fe._state,xr.queryGeometry,xr.cameraQueryGeometry,xr.scale,pe,Ee,$e,Z(fe.transform,xr.tileID))})}var Fr=be(Ft);for(var Zr in Fr)Fr[Zr].forEach(function(Qr){var jr=Qr.feature,rn=fe.getFeatureState(jr.layer["source-layer"],jr.id);jr.source=jr.layer.source,jr.layer["source-layer"]&&(jr.sourceLayer=jr.layer["source-layer"]),jr.state=rn});return Fr}function se(fe,W,ve,J,pe,Ee,Ie){for(var $e={},dt=Ee.queryRenderedSymbols(J),Ft=[],nr=0,dr=Object.keys(dt).map(Number);nr<dr.length;nr+=1){var xr=dr[nr];Ft.push(Ie[xr])}Ft.sort(oe);for(var Fr=function(){var mn=Qr[Zr],Fn=mn.featureIndex.lookupSymbolFeatures(dt[mn.bucketInstanceId],W,mn.bucketIndex,mn.sourceLayerIndex,pe.filter,pe.layers,pe.availableImages,fe);for(var Hn in Fn){var ta=$e[Hn]=$e[Hn]||[],ia=Fn[Hn];ia.sort(function(Ta,ka){var Fa=mn.featureSortOrder;if(Fa){var Za=Fa.indexOf(Ta.featureIndex),ci=Fa.indexOf(ka.featureIndex);return ci-Za}else return ka.featureIndex-Ta.featureIndex});for(var na=0,ya=ia;na<ya.length;na+=1){var Sa=ya[na];ta.push(Sa)}}},Zr=0,Qr=Ft;Zr<Qr.length;Zr+=1)Fr();var jr=function(mn){$e[mn].forEach(function(Fn){var Hn=Fn.feature,ta=fe[mn],ia=ve[ta.source],na=ia.getFeatureState(Hn.layer["source-layer"],Hn.id);Hn.source=Hn.layer.source,Hn.layer["source-layer"]&&(Hn.sourceLayer=Hn.layer["source-layer"]),Hn.state=na})};for(var rn in $e)jr(rn);return $e}function ae(fe,W){for(var ve=fe.getRenderableIds().map(function(dt){return fe.getTileByID(dt)}),J=[],pe={},Ee=0;Ee<ve.length;Ee++){var Ie=ve[Ee],$e=Ie.tileID.canonical.key;pe[$e]||(pe[$e]=!0,Ie.querySourceFeatures(J,W))}return J}function oe(fe,W){var ve=fe.tileID,J=W.tileID;return ve.overscaledZ-J.overscaledZ||ve.canonical.y-J.canonical.y||ve.wrap-J.wrap||ve.canonical.x-J.canonical.x}function be(fe){for(var W={},ve={},J=0,pe=fe;J<pe.length;J+=1){var Ee=pe[J],Ie=Ee.queryResults,$e=Ee.wrappedTileID,dt=ve[$e]=ve[$e]||{};for(var Ft in Ie)for(var nr=Ie[Ft],dr=dt[Ft]=dt[Ft]||{},xr=W[Ft]=W[Ft]||[],Fr=0,Zr=nr;Fr<Zr.length;Fr+=1){var Qr=Zr[Fr];dr[Qr.featureIndex]||(dr[Qr.featureIndex]=!0,xr.push(Qr))}}return W}var ce=function(W,ve){this.max=W,this.onRemove=ve,this.reset()};ce.prototype.reset=function(){for(var W in this.data)for(var ve=0,J=this.data[W];ve<J.length;ve+=1){var pe=J[ve];pe.timeout&&clearTimeout(pe.timeout),this.onRemove(pe.value)}return this.data={},this.order=[],this},ce.prototype.add=function(W,ve,J){var pe=this,Ee=W.wrapped().key;this.data[Ee]===void 0&&(this.data[Ee]=[]);var Ie={value:ve,timeout:void 0};if(J!==void 0&&(Ie.timeout=setTimeout(function(){pe.remove(W,Ie)},J)),this.data[Ee].push(Ie),this.order.push(Ee),this.order.length>this.max){var $e=this._getAndRemoveByKey(this.order[0]);$e&&this.onRemove($e)}return this},ce.prototype.has=function(W){return W.wrapped().key in this.data},ce.prototype.getAndRemove=function(W){return this.has(W)?this._getAndRemoveByKey(W.wrapped().key):null},ce.prototype._getAndRemoveByKey=function(W){var ve=this.data[W].shift();return ve.timeout&&clearTimeout(ve.timeout),this.data[W].length===0&&delete this.data[W],this.order.splice(this.order.indexOf(W),1),ve.value},ce.prototype.getByKey=function(W){var ve=this.data[W];return ve?ve[0].value:null},ce.prototype.get=function(W){if(!this.has(W))return null;var ve=this.data[W.wrapped().key][0];return ve.value},ce.prototype.remove=function(W,ve){if(!this.has(W))return this;var J=W.wrapped().key,pe=ve===void 0?0:this.data[J].indexOf(ve),Ee=this.data[J][pe];return this.data[J].splice(pe,1),Ee.timeout&&clearTimeout(Ee.timeout),this.data[J].length===0&&delete this.data[J],this.onRemove(Ee.value),this.order.splice(this.order.indexOf(J),1),this},ce.prototype.setMaxSize=function(W){for(this.max=W;this.order.length>this.max;){var ve=this._getAndRemoveByKey(this.order[0]);ve&&this.onRemove(ve)}return this},ce.prototype.filter=function(W){var ve=[];for(var J in this.data)for(var pe=0,Ee=this.data[J];pe<Ee.length;pe+=1){var Ie=Ee[pe];W(Ie.value)||ve.push(Ie)}for(var $e=0,dt=ve;$e<dt.length;$e+=1){var Ft=dt[$e];this.remove(Ft.value.tileID,Ft)}};var de=function(W,ve,J){this.context=W;var pe=W.gl;this.buffer=pe.createBuffer(),this.dynamicDraw=Boolean(J),this.context.unbindVAO(),W.bindElementBuffer.set(this.buffer),pe.bufferData(pe.ELEMENT_ARRAY_BUFFER,ve.arrayBuffer,this.dynamicDraw?pe.DYNAMIC_DRAW:pe.STATIC_DRAW),this.dynamicDraw||delete ve.arrayBuffer};de.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},de.prototype.updateData=function(W){var ve=this.context.gl;this.context.unbindVAO(),this.bind(),ve.bufferSubData(ve.ELEMENT_ARRAY_BUFFER,0,W.arrayBuffer)},de.prototype.destroy=function(){var W=this.context.gl;this.buffer&&(W.deleteBuffer(this.buffer),delete this.buffer)};var ye={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},ge=function(W,ve,J,pe){this.length=ve.length,this.attributes=J,this.itemSize=ve.bytesPerElement,this.dynamicDraw=pe,this.context=W;var Ee=W.gl;this.buffer=Ee.createBuffer(),W.bindVertexBuffer.set(this.buffer),Ee.bufferData(Ee.ARRAY_BUFFER,ve.arrayBuffer,this.dynamicDraw?Ee.DYNAMIC_DRAW:Ee.STATIC_DRAW),this.dynamicDraw||delete ve.arrayBuffer};ge.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},ge.prototype.updateData=function(W){var ve=this.context.gl;this.bind(),ve.bufferSubData(ve.ARRAY_BUFFER,0,W.arrayBuffer)},ge.prototype.enableAttributes=function(W,ve){for(var J=0;J<this.attributes.length;J++){var pe=this.attributes[J],Ee=ve.attributes[pe.name];Ee!==void 0&&W.enableVertexAttribArray(Ee)}},ge.prototype.setVertexAttribPointers=function(W,ve,J){for(var pe=0;pe<this.attributes.length;pe++){var Ee=this.attributes[pe],Ie=ve.attributes[Ee.name];Ie!==void 0&&W.vertexAttribPointer(Ie,Ee.components,W[ye[Ee.type]],!1,this.itemSize,Ee.offset+this.itemSize*(J||0))}},ge.prototype.destroy=function(){var W=this.context.gl;this.buffer&&(W.deleteBuffer(this.buffer),delete this.buffer)};var me=function(W){this.gl=W.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};me.prototype.get=function(){return this.current},me.prototype.set=function(W){},me.prototype.getDefault=function(){return this.default},me.prototype.setDefault=function(){this.set(this.default)};var Se=function(fe){function W(){fe.apply(this,arguments)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return e.Color.transparent},W.prototype.set=function(J){var pe=this.current;J.r===pe.r&&J.g===pe.g&&J.b===pe.b&&J.a===pe.a&&!this.dirty||(this.gl.clearColor(J.r,J.g,J.b,J.a),this.current=J,this.dirty=!1)},W}(me),Le=function(fe){function W(){fe.apply(this,arguments)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return 1},W.prototype.set=function(J){J===this.current&&!this.dirty||(this.gl.clearDepth(J),this.current=J,this.dirty=!1)},W}(me),Oe=function(fe){function W(){fe.apply(this,arguments)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return 0},W.prototype.set=function(J){J===this.current&&!this.dirty||(this.gl.clearStencil(J),this.current=J,this.dirty=!1)},W}(me),we=function(fe){function W(){fe.apply(this,arguments)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return[!0,!0,!0,!0]},W.prototype.set=function(J){var pe=this.current;J[0]===pe[0]&&J[1]===pe[1]&&J[2]===pe[2]&&J[3]===pe[3]&&!this.dirty||(this.gl.colorMask(J[0],J[1],J[2],J[3]),this.current=J,this.dirty=!1)},W}(me),Ce=function(fe){function W(){fe.apply(this,arguments)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return!0},W.prototype.set=function(J){J===this.current&&!this.dirty||(this.gl.depthMask(J),this.current=J,this.dirty=!1)},W}(me),Ke=function(fe){function W(){fe.apply(this,arguments)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return 255},W.prototype.set=function(J){J===this.current&&!this.dirty||(this.gl.stencilMask(J),this.current=J,this.dirty=!1)},W}(me),Ye=function(fe){function W(){fe.apply(this,arguments)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},W.prototype.set=function(J){var pe=this.current;J.func===pe.func&&J.ref===pe.ref&&J.mask===pe.mask&&!this.dirty||(this.gl.stencilFunc(J.func,J.ref,J.mask),this.current=J,this.dirty=!1)},W}(me),Fe=function(fe){function W(){fe.apply(this,arguments)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){var J=this.gl;return[J.KEEP,J.KEEP,J.KEEP]},W.prototype.set=function(J){var pe=this.current;J[0]===pe[0]&&J[1]===pe[1]&&J[2]===pe[2]&&!this.dirty||(this.gl.stencilOp(J[0],J[1],J[2]),this.current=J,this.dirty=!1)},W}(me),Re=function(fe){function W(){fe.apply(this,arguments)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return!1},W.prototype.set=function(J){if(!(J===this.current&&!this.dirty)){var pe=this.gl;J?pe.enable(pe.STENCIL_TEST):pe.disable(pe.STENCIL_TEST),this.current=J,this.dirty=!1}},W}(me),je=function(fe){function W(){fe.apply(this,arguments)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return[0,1]},W.prototype.set=function(J){var pe=this.current;J[0]===pe[0]&&J[1]===pe[1]&&!this.dirty||(this.gl.depthRange(J[0],J[1]),this.current=J,this.dirty=!1)},W}(me),xt=function(fe){function W(){fe.apply(this,arguments)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return!1},W.prototype.set=function(J){if(!(J===this.current&&!this.dirty)){var pe=this.gl;J?pe.enable(pe.DEPTH_TEST):pe.disable(pe.DEPTH_TEST),this.current=J,this.dirty=!1}},W}(me),Nt=function(fe){function W(){fe.apply(this,arguments)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return this.gl.LESS},W.prototype.set=function(J){J===this.current&&!this.dirty||(this.gl.depthFunc(J),this.current=J,this.dirty=!1)},W}(me),tr=function(fe){function W(){fe.apply(this,arguments)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return!1},W.prototype.set=function(J){if(!(J===this.current&&!this.dirty)){var pe=this.gl;J?pe.enable(pe.BLEND):pe.disable(pe.BLEND),this.current=J,this.dirty=!1}},W}(me),Ht=function(fe){function W(){fe.apply(this,arguments)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){var J=this.gl;return[J.ONE,J.ZERO]},W.prototype.set=function(J){var pe=this.current;J[0]===pe[0]&&J[1]===pe[1]&&!this.dirty||(this.gl.blendFunc(J[0],J[1]),this.current=J,this.dirty=!1)},W}(me),Pt=function(fe){function W(){fe.apply(this,arguments)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return e.Color.transparent},W.prototype.set=function(J){var pe=this.current;J.r===pe.r&&J.g===pe.g&&J.b===pe.b&&J.a===pe.a&&!this.dirty||(this.gl.blendColor(J.r,J.g,J.b,J.a),this.current=J,this.dirty=!1)},W}(me),$t=function(fe){function W(){fe.apply(this,arguments)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return this.gl.FUNC_ADD},W.prototype.set=function(J){J===this.current&&!this.dirty||(this.gl.blendEquation(J),this.current=J,this.dirty=!1)},W}(me),Ut=function(fe){function W(){fe.apply(this,arguments)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return!1},W.prototype.set=function(J){if(!(J===this.current&&!this.dirty)){var pe=this.gl;J?pe.enable(pe.CULL_FACE):pe.disable(pe.CULL_FACE),this.current=J,this.dirty=!1}},W}(me),Lt=function(fe){function W(){fe.apply(this,arguments)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return this.gl.BACK},W.prototype.set=function(J){J===this.current&&!this.dirty||(this.gl.cullFace(J),this.current=J,this.dirty=!1)},W}(me),We=function(fe){function W(){fe.apply(this,arguments)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return this.gl.CCW},W.prototype.set=function(J){J===this.current&&!this.dirty||(this.gl.frontFace(J),this.current=J,this.dirty=!1)},W}(me),ot=function(fe){function W(){fe.apply(this,arguments)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return null},W.prototype.set=function(J){J===this.current&&!this.dirty||(this.gl.useProgram(J),this.current=J,this.dirty=!1)},W}(me),Ge=function(fe){function W(){fe.apply(this,arguments)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return this.gl.TEXTURE0},W.prototype.set=function(J){J===this.current&&!this.dirty||(this.gl.activeTexture(J),this.current=J,this.dirty=!1)},W}(me),Me=function(fe){function W(){fe.apply(this,arguments)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){var J=this.gl;return[0,0,J.drawingBufferWidth,J.drawingBufferHeight]},W.prototype.set=function(J){var pe=this.current;J[0]===pe[0]&&J[1]===pe[1]&&J[2]===pe[2]&&J[3]===pe[3]&&!this.dirty||(this.gl.viewport(J[0],J[1],J[2],J[3]),this.current=J,this.dirty=!1)},W}(me),Ve=function(fe){function W(){fe.apply(this,arguments)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return null},W.prototype.set=function(J){if(!(J===this.current&&!this.dirty)){var pe=this.gl;pe.bindFramebuffer(pe.FRAMEBUFFER,J),this.current=J,this.dirty=!1}},W}(me),Qe=function(fe){function W(){fe.apply(this,arguments)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return null},W.prototype.set=function(J){if(!(J===this.current&&!this.dirty)){var pe=this.gl;pe.bindRenderbuffer(pe.RENDERBUFFER,J),this.current=J,this.dirty=!1}},W}(me),tt=function(fe){function W(){fe.apply(this,arguments)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return null},W.prototype.set=function(J){if(!(J===this.current&&!this.dirty)){var pe=this.gl;pe.bindTexture(pe.TEXTURE_2D,J),this.current=J,this.dirty=!1}},W}(me),St=function(fe){function W(){fe.apply(this,arguments)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return null},W.prototype.set=function(J){if(!(J===this.current&&!this.dirty)){var pe=this.gl;pe.bindBuffer(pe.ARRAY_BUFFER,J),this.current=J,this.dirty=!1}},W}(me),wt=function(fe){function W(){fe.apply(this,arguments)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return null},W.prototype.set=function(J){var pe=this.gl;pe.bindBuffer(pe.ELEMENT_ARRAY_BUFFER,J),this.current=J,this.dirty=!1},W}(me),Ct=function(fe){function W(ve){fe.call(this,ve),this.vao=ve.extVertexArrayObject}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return null},W.prototype.set=function(J){!this.vao||J===this.current&&!this.dirty||(this.vao.bindVertexArrayOES(J),this.current=J,this.dirty=!1)},W}(me),jt=function(fe){function W(){fe.apply(this,arguments)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return 4},W.prototype.set=function(J){if(!(J===this.current&&!this.dirty)){var pe=this.gl;pe.pixelStorei(pe.UNPACK_ALIGNMENT,J),this.current=J,this.dirty=!1}},W}(me),Bt=function(fe){function W(){fe.apply(this,arguments)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return!1},W.prototype.set=function(J){if(!(J===this.current&&!this.dirty)){var pe=this.gl;pe.pixelStorei(pe.UNPACK_PREMULTIPLY_ALPHA_WEBGL,J),this.current=J,this.dirty=!1}},W}(me),Wt=function(fe){function W(){fe.apply(this,arguments)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return!1},W.prototype.set=function(J){if(!(J===this.current&&!this.dirty)){var pe=this.gl;pe.pixelStorei(pe.UNPACK_FLIP_Y_WEBGL,J),this.current=J,this.dirty=!1}},W}(me),Qt=function(fe){function W(ve,J){fe.call(this,ve),this.context=ve,this.parent=J}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.getDefault=function(){return null},W}(me),Zt=function(fe){function W(){fe.apply(this,arguments)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.setDirty=function(){this.dirty=!0},W.prototype.set=function(J){if(!(J===this.current&&!this.dirty)){this.context.bindFramebuffer.set(this.parent);var pe=this.gl;pe.framebufferTexture2D(pe.FRAMEBUFFER,pe.COLOR_ATTACHMENT0,pe.TEXTURE_2D,J,0),this.current=J,this.dirty=!1}},W}(Qt),cr=function(fe){function W(){fe.apply(this,arguments)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.set=function(J){if(!(J===this.current&&!this.dirty)){this.context.bindFramebuffer.set(this.parent);var pe=this.gl;pe.framebufferRenderbuffer(pe.FRAMEBUFFER,pe.DEPTH_ATTACHMENT,pe.RENDERBUFFER,J),this.current=J,this.dirty=!1}},W}(Qt),Xr=function(W,ve,J,pe){this.context=W,this.width=ve,this.height=J;var Ee=W.gl,Ie=this.framebuffer=Ee.createFramebuffer();this.colorAttachment=new Zt(W,Ie),pe&&(this.depthAttachment=new cr(W,Ie))};Xr.prototype.destroy=function(){var W=this.context.gl,ve=this.colorAttachment.get();if(ve&&W.deleteTexture(ve),this.depthAttachment){var J=this.depthAttachment.get();J&&W.deleteRenderbuffer(J)}W.deleteFramebuffer(this.framebuffer)};var vn=519,en=function(W,ve,J){this.func=W,this.mask=ve,this.range=J};en.ReadOnly=!1,en.ReadWrite=!0,en.disabled=new en(vn,en.ReadOnly,[0,1]);var ut=519,ar=7680,rr=function(W,ve,J,pe,Ee,Ie){this.test=W,this.ref=ve,this.mask=J,this.fail=pe,this.depthFail=Ee,this.pass=Ie};rr.disabled=new rr({func:ut,mask:0},0,0,ar,ar,ar);var Kt=0,Er=1,st=771,et=function(W,ve,J){this.blendFunction=W,this.blendColor=ve,this.mask=J};et.Replace=[Er,Kt],et.disabled=new et(et.Replace,e.Color.transparent,[!1,!1,!1,!1]),et.unblended=new et(et.Replace,e.Color.transparent,[!0,!0,!0,!0]),et.alphaBlended=new et([Er,st],e.Color.transparent,[!0,!0,!0,!0]);var ht=1029,vt=2305,kt=function(W,ve,J){this.enable=W,this.mode=ve,this.frontFace=J};kt.disabled=new kt(!1,ht,vt),kt.backCCW=new kt(!0,ht,vt);var Vt=function(W){this.gl=W,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Se(this),this.clearDepth=new Le(this),this.clearStencil=new Oe(this),this.colorMask=new we(this),this.depthMask=new Ce(this),this.stencilMask=new Ke(this),this.stencilFunc=new Ye(this),this.stencilOp=new Fe(this),this.stencilTest=new Re(this),this.depthRange=new je(this),this.depthTest=new xt(this),this.depthFunc=new Nt(this),this.blend=new tr(this),this.blendFunc=new Ht(this),this.blendColor=new Pt(this),this.blendEquation=new $t(this),this.cullFace=new Ut(this),this.cullFaceSide=new Lt(this),this.frontFace=new We(this),this.program=new ot(this),this.activeTexture=new Ge(this),this.viewport=new Me(this),this.bindFramebuffer=new Ve(this),this.bindRenderbuffer=new Qe(this),this.bindTexture=new tt(this),this.bindVertexBuffer=new St(this),this.bindElementBuffer=new wt(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Ct(this),this.pixelStoreUnpack=new jt(this),this.pixelStoreUnpackPremultiplyAlpha=new Bt(this),this.pixelStoreUnpackFlipY=new Wt(this),this.extTextureFilterAnisotropic=W.getExtension("EXT_texture_filter_anisotropic")||W.getExtension("MOZ_EXT_texture_filter_anisotropic")||W.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=W.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=W.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(W.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=W.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=W.getExtension("EXT_disjoint_timer_query")};Vt.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},Vt.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},Vt.prototype.createIndexBuffer=function(W,ve){return new de(this,W,ve)},Vt.prototype.createVertexBuffer=function(W,ve,J){return new ge(this,W,ve,J)},Vt.prototype.createRenderbuffer=function(W,ve,J){var pe=this.gl,Ee=pe.createRenderbuffer();return this.bindRenderbuffer.set(Ee),pe.renderbufferStorage(pe.RENDERBUFFER,W,ve,J),this.bindRenderbuffer.set(null),Ee},Vt.prototype.createFramebuffer=function(W,ve,J){return new Xr(this,W,ve,J)},Vt.prototype.clear=function(W){var ve=W.color,J=W.depth,pe=this.gl,Ee=0;ve&&(Ee|=pe.COLOR_BUFFER_BIT,this.clearColor.set(ve),this.colorMask.set([!0,!0,!0,!0])),typeof J<"u"&&(Ee|=pe.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(J),this.depthMask.set(!0)),pe.clear(Ee)},Vt.prototype.setCullFace=function(W){W.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(W.mode),this.frontFace.set(W.frontFace))},Vt.prototype.setDepthMode=function(W){W.func===this.gl.ALWAYS&&!W.mask?this.depthTest.set(!1):(this.depthTest.set(!0),this.depthFunc.set(W.func),this.depthMask.set(W.mask),this.depthRange.set(W.range))},Vt.prototype.setStencilMode=function(W){W.test.func===this.gl.ALWAYS&&!W.mask?this.stencilTest.set(!1):(this.stencilTest.set(!0),this.stencilMask.set(W.mask),this.stencilOp.set([W.fail,W.depthFail,W.pass]),this.stencilFunc.set({func:W.test.func,ref:W.ref,mask:W.test.mask}))},Vt.prototype.setColorMode=function(W){e.deepEqual(W.blendFunction,et.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(W.blendFunction),this.blendColor.set(W.blendColor)),this.colorMask.set(W.mask)},Vt.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var Pe=function(fe){function W(ve,J,pe){var Ee=this;fe.call(this),this.id=ve,this.dispatcher=pe,this.on("data",function(Ie){Ie.dataType==="source"&&Ie.sourceDataType==="metadata"&&(Ee._sourceLoaded=!0),Ee._sourceLoaded&&!Ee._paused&&Ie.dataType==="source"&&Ie.sourceDataType==="content"&&(Ee.reload(),Ee.transform&&Ee.update(Ee.transform))}),this.on("error",function(){Ee._sourceErrored=!0}),this._source=H(ve,J,pe,this),this._tiles={},this._cache=new ce(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new e.SourceFeatureState}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.onAdd=function(J){this.map=J,this._maxTileCacheSize=J?J._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(J)},W.prototype.onRemove=function(J){this._source&&this._source.onRemove&&this._source.onRemove(J)},W.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var J in this._tiles){var pe=this._tiles[J];if(pe.state!=="loaded"&&pe.state!=="errored")return!1}return!0},W.prototype.getSource=function(){return this._source},W.prototype.pause=function(){this._paused=!0},W.prototype.resume=function(){if(!!this._paused){var J=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,J&&this.reload(),this.transform&&this.update(this.transform)}},W.prototype._loadTile=function(J,pe){return this._source.loadTile(J,pe)},W.prototype._unloadTile=function(J){if(this._source.unloadTile)return this._source.unloadTile(J,function(){})},W.prototype._abortTile=function(J){if(this._source.abortTile)return this._source.abortTile(J,function(){})},W.prototype.serialize=function(){return this._source.serialize()},W.prototype.prepare=function(J){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(var pe in this._tiles){var Ee=this._tiles[pe];Ee.upload(J),Ee.prepare(this.map.style.imageManager)}},W.prototype.getIds=function(){return e.values(this._tiles).map(function(J){return J.tileID}).sort(ke).map(function(J){return J.key})},W.prototype.getRenderableIds=function(J){var pe=this,Ee=[];for(var Ie in this._tiles)this._isIdRenderable(Ie,J)&&Ee.push(this._tiles[Ie]);return J?Ee.sort(function($e,dt){var Ft=$e.tileID,nr=dt.tileID,dr=new e.Point(Ft.canonical.x,Ft.canonical.y)._rotate(pe.transform.angle),xr=new e.Point(nr.canonical.x,nr.canonical.y)._rotate(pe.transform.angle);return Ft.overscaledZ-nr.overscaledZ||xr.y-dr.y||xr.x-dr.x}).map(function($e){return $e.tileID.key}):Ee.map(function($e){return $e.tileID}).sort(ke).map(function($e){return $e.key})},W.prototype.hasRenderableParent=function(J){var pe=this.findLoadedParent(J,0);return pe?this._isIdRenderable(pe.tileID.key):!1},W.prototype._isIdRenderable=function(J,pe){return this._tiles[J]&&this._tiles[J].hasData()&&!this._coveredTiles[J]&&(pe||!this._tiles[J].holdingForFade())},W.prototype.reload=function(){if(this._paused){this._shouldReloadOnResume=!0;return}this._cache.reset();for(var J in this._tiles)this._tiles[J].state!=="errored"&&this._reloadTile(J,"reloading")},W.prototype._reloadTile=function(J,pe){var Ee=this._tiles[J];!Ee||(Ee.state!=="loading"&&(Ee.state=pe),this._loadTile(Ee,this._tileLoaded.bind(this,Ee,J,pe)))},W.prototype._tileLoaded=function(J,pe,Ee,Ie){if(Ie){J.state="errored",Ie.status!==404?this._source.fire(new e.ErrorEvent(Ie,{tile:J})):this.update(this.transform);return}J.timeAdded=e.browser.now(),Ee==="expired"&&(J.refreshedUponExpiration=!0),this._setTileReloadTimer(pe,J),this.getSource().type==="raster-dem"&&J.dem&&this._backfillDEM(J),this._state.initializeTileState(J,this.map?this.map.painter:null),this._source.fire(new e.Event("data",{dataType:"source",tile:J,coord:J.tileID}))},W.prototype._backfillDEM=function(J){for(var pe=this.getRenderableIds(),Ee=0;Ee<pe.length;Ee++){var Ie=pe[Ee];if(J.neighboringTiles&&J.neighboringTiles[Ie]){var $e=this.getTileByID(Ie);dt(J,$e),dt($e,J)}}function dt(Ft,nr){Ft.needsHillshadePrepare=!0;var dr=nr.tileID.canonical.x-Ft.tileID.canonical.x,xr=nr.tileID.canonical.y-Ft.tileID.canonical.y,Fr=Math.pow(2,Ft.tileID.canonical.z),Zr=nr.tileID.key;dr===0&&xr===0||Math.abs(xr)>1||(Math.abs(dr)>1&&(Math.abs(dr+Fr)===1?dr+=Fr:Math.abs(dr-Fr)===1&&(dr-=Fr)),!(!nr.dem||!Ft.dem)&&(Ft.dem.backfillBorder(nr.dem,dr,xr),Ft.neighboringTiles&&Ft.neighboringTiles[Zr]&&(Ft.neighboringTiles[Zr].backfilled=!0)))}},W.prototype.getTile=function(J){return this.getTileByID(J.key)},W.prototype.getTileByID=function(J){return this._tiles[J]},W.prototype._retainLoadedChildren=function(J,pe,Ee,Ie){for(var $e in this._tiles){var dt=this._tiles[$e];if(!(Ie[$e]||!dt.hasData()||dt.tileID.overscaledZ<=pe||dt.tileID.overscaledZ>Ee)){for(var Ft=dt.tileID;dt&&dt.tileID.overscaledZ>pe+1;){var nr=dt.tileID.scaledTo(dt.tileID.overscaledZ-1);dt=this._tiles[nr.key],dt&&dt.hasData()&&(Ft=nr)}for(var dr=Ft;dr.overscaledZ>pe;)if(dr=dr.scaledTo(dr.overscaledZ-1),J[dr.key]){Ie[Ft.key]=Ft;break}}}},W.prototype.findLoadedParent=function(J,pe){if(J.key in this._loadedParentTiles){var Ee=this._loadedParentTiles[J.key];return Ee&&Ee.tileID.overscaledZ>=pe?Ee:null}for(var Ie=J.overscaledZ-1;Ie>=pe;Ie--){var $e=J.scaledTo(Ie),dt=this._getLoadedTile($e);if(dt)return dt}},W.prototype._getLoadedTile=function(J){var pe=this._tiles[J.key];if(pe&&pe.hasData())return pe;var Ee=this._cache.getByKey(J.wrapped().key);return Ee},W.prototype.updateCacheSize=function(J){var pe=Math.ceil(J.width/this._source.tileSize)+1,Ee=Math.ceil(J.height/this._source.tileSize)+1,Ie=pe*Ee,$e=5,dt=Math.floor(Ie*$e),Ft=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,dt):dt;this._cache.setMaxSize(Ft)},W.prototype.handleWrapJump=function(J){var pe=this._prevLng===void 0?J:this._prevLng,Ee=J-pe,Ie=Ee/360,$e=Math.round(Ie);if(this._prevLng=J,$e){var dt={};for(var Ft in this._tiles){var nr=this._tiles[Ft];nr.tileID=nr.tileID.unwrapTo(nr.tileID.wrap+$e),dt[nr.tileID.key]=nr}this._tiles=dt;for(var dr in this._timers)clearTimeout(this._timers[dr]),delete this._timers[dr];for(var xr in this._tiles){var Fr=this._tiles[xr];this._setTileReloadTimer(xr,Fr)}}},W.prototype.update=function(J){var pe=this;if(this.transform=J,!(!this._sourceLoaded||this._paused)){this.updateCacheSize(J),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={};var Ee;this.used?this._source.tileID?Ee=J.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Ta){return new e.OverscaledTileID(Ta.canonical.z,Ta.wrap,Ta.canonical.z,Ta.canonical.x,Ta.canonical.y)}):(Ee=J.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(Ee=Ee.filter(function(Ta){return pe._source.hasTile(Ta)}))):Ee=[];var Ie=J.coveringZoomLevel(this._source),$e=Math.max(Ie-W.maxOverzooming,this._source.minzoom),dt=Math.max(Ie+W.maxUnderzooming,this._source.minzoom),Ft=this._updateRetainedTiles(Ee,Ie);if(lt(this._source.type)){for(var nr={},dr={},xr=Object.keys(Ft),Fr=0,Zr=xr;Fr<Zr.length;Fr+=1){var Qr=Zr[Fr],jr=Ft[Qr],rn=this._tiles[Qr];if(!(!rn||rn.fadeEndTime&&rn.fadeEndTime<=e.browser.now())){var mn=this.findLoadedParent(jr,$e);mn&&(this._addTile(mn.tileID),nr[mn.tileID.key]=mn.tileID),dr[Qr]=jr}}this._retainLoadedChildren(dr,Ie,dt,Ft);for(var Fn in nr)Ft[Fn]||(this._coveredTiles[Fn]=!0,Ft[Fn]=nr[Fn])}for(var Hn in Ft)this._tiles[Hn].clearFadeHold();for(var ta=e.keysDifference(this._tiles,Ft),ia=0,na=ta;ia<na.length;ia+=1){var ya=na[ia],Sa=this._tiles[ya];Sa.hasSymbolBuckets&&!Sa.holdingForFade()?Sa.setHoldDuration(this.map._fadeDuration):(!Sa.hasSymbolBuckets||Sa.symbolFadeFinished())&&this._removeTile(ya)}this._updateLoadedParentTileCache()}},W.prototype.releaseSymbolFadeTiles=function(){for(var J in this._tiles)this._tiles[J].holdingForFade()&&this._removeTile(J)},W.prototype._updateRetainedTiles=function(J,pe){for(var Ee={},Ie={},$e=Math.max(pe-W.maxOverzooming,this._source.minzoom),dt=Math.max(pe+W.maxUnderzooming,this._source.minzoom),Ft={},nr=0,dr=J;nr<dr.length;nr+=1){var xr=dr[nr],Fr=this._addTile(xr);Ee[xr.key]=xr,!Fr.hasData()&&pe<this._source.maxzoom&&(Ft[xr.key]=xr)}this._retainLoadedChildren(Ft,pe,dt,Ee);for(var Zr=0,Qr=J;Zr<Qr.length;Zr+=1){var jr=Qr[Zr],rn=this._tiles[jr.key];if(!rn.hasData()){if(pe+1>this._source.maxzoom){var mn=jr.children(this._source.maxzoom)[0],Fn=this.getTile(mn);if(!!Fn&&Fn.hasData()){Ee[mn.key]=mn;continue}}else{var Hn=jr.children(this._source.maxzoom);if(Ee[Hn[0].key]&&Ee[Hn[1].key]&&Ee[Hn[2].key]&&Ee[Hn[3].key])continue}for(var ta=rn.wasRequested(),ia=jr.overscaledZ-1;ia>=$e;--ia){var na=jr.scaledTo(ia);if(Ie[na.key]||(Ie[na.key]=!0,rn=this.getTile(na),!rn&&ta&&(rn=this._addTile(na)),rn&&(Ee[na.key]=na,ta=rn.wasRequested(),rn.hasData())))break}}}return Ee},W.prototype._updateLoadedParentTileCache=function(){this._loadedParentTiles={};for(var J in this._tiles){for(var pe=[],Ee=void 0,Ie=this._tiles[J].tileID;Ie.overscaledZ>0;){if(Ie.key in this._loadedParentTiles){Ee=this._loadedParentTiles[Ie.key];break}pe.push(Ie.key);var $e=Ie.scaledTo(Ie.overscaledZ-1);if(Ee=this._getLoadedTile($e),Ee)break;Ie=$e}for(var dt=0,Ft=pe;dt<Ft.length;dt+=1){var nr=Ft[dt];this._loadedParentTiles[nr]=Ee}}},W.prototype._addTile=function(J){var pe=this._tiles[J.key];if(pe)return pe;pe=this._cache.getAndRemove(J),pe&&(this._setTileReloadTimer(J.key,pe),pe.tileID=J,this._state.initializeTileState(pe,this.map?this.map.painter:null),this._cacheTimers[J.key]&&(clearTimeout(this._cacheTimers[J.key]),delete this._cacheTimers[J.key],this._setTileReloadTimer(J.key,pe)));var Ee=Boolean(pe);return Ee||(pe=new e.Tile(J,this._source.tileSize*J.overscaleFactor()),this._loadTile(pe,this._tileLoaded.bind(this,pe,J.key,pe.state))),pe?(pe.uses++,this._tiles[J.key]=pe,Ee||this._source.fire(new e.Event("dataloading",{tile:pe,coord:pe.tileID,dataType:"source"})),pe):null},W.prototype._setTileReloadTimer=function(J,pe){var Ee=this;J in this._timers&&(clearTimeout(this._timers[J]),delete this._timers[J]);var Ie=pe.getExpiryTimeout();Ie&&(this._timers[J]=setTimeout(function(){Ee._reloadTile(J,"expired"),delete Ee._timers[J]},Ie))},W.prototype._removeTile=function(J){var pe=this._tiles[J];!pe||(pe.uses--,delete this._tiles[J],this._timers[J]&&(clearTimeout(this._timers[J]),delete this._timers[J]),!(pe.uses>0)&&(pe.hasData()&&pe.state!=="reloading"?this._cache.add(pe.tileID,pe,pe.getExpiryTimeout()):(pe.aborted=!0,this._abortTile(pe),this._unloadTile(pe))))},W.prototype.clearTiles=function(){this._shouldReloadOnResume=!1,this._paused=!1;for(var J in this._tiles)this._removeTile(J);this._cache.reset()},W.prototype.tilesIn=function(J,pe,Ee){var Ie=this,$e=[],dt=this.transform;if(!dt)return $e;for(var Ft=Ee?dt.getCameraQueryGeometry(J):J,nr=J.map(function(ia){return dt.pointCoordinate(ia)}),dr=Ft.map(function(ia){return dt.pointCoordinate(ia)}),xr=this.getIds(),Fr=1/0,Zr=1/0,Qr=-1/0,jr=-1/0,rn=0,mn=dr;rn<mn.length;rn+=1){var Fn=mn[rn];Fr=Math.min(Fr,Fn.x),Zr=Math.min(Zr,Fn.y),Qr=Math.max(Qr,Fn.x),jr=Math.max(jr,Fn.y)}for(var Hn=function(ia){var na=Ie._tiles[xr[ia]];if(!na.holdingForFade()){var ya=na.tileID,Sa=Math.pow(2,dt.zoom-na.tileID.overscaledZ),Ta=pe*na.queryPadding*e.EXTENT/na.tileSize/Sa,ka=[ya.getTilePoint(new e.MercatorCoordinate(Fr,Zr)),ya.getTilePoint(new e.MercatorCoordinate(Qr,jr))];if(ka[0].x-Ta<e.EXTENT&&ka[0].y-Ta<e.EXTENT&&ka[1].x+Ta>=0&&ka[1].y+Ta>=0){var Fa=nr.map(function(ci){return ya.getTilePoint(ci)}),Za=dr.map(function(ci){return ya.getTilePoint(ci)});$e.push({tile:na,tileID:ya,queryGeometry:Fa,cameraQueryGeometry:Za,scale:Sa})}}},ta=0;ta<xr.length;ta++)Hn(ta);return $e},W.prototype.getVisibleCoordinates=function(J){for(var pe=this,Ee=this.getRenderableIds(J).map(function(Ft){return pe._tiles[Ft].tileID}),Ie=0,$e=Ee;Ie<$e.length;Ie+=1){var dt=$e[Ie];dt.posMatrix=this.transform.calculatePosMatrix(dt.toUnwrapped())}return Ee},W.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(lt(this._source.type))for(var J in this._tiles){var pe=this._tiles[J];if(pe.fadeEndTime!==void 0&&pe.fadeEndTime>=e.browser.now())return!0}return!1},W.prototype.setFeatureState=function(J,pe,Ee){J=J||"_geojsonTileLayer",this._state.updateState(J,pe,Ee)},W.prototype.removeFeatureState=function(J,pe,Ee){J=J||"_geojsonTileLayer",this._state.removeFeatureState(J,pe,Ee)},W.prototype.getFeatureState=function(J,pe){return J=J||"_geojsonTileLayer",this._state.getState(J,pe)},W.prototype.setDependencies=function(J,pe,Ee){var Ie=this._tiles[J];Ie&&Ie.setDependencies(pe,Ee)},W.prototype.reloadTilesForDependencies=function(J,pe){for(var Ee in this._tiles){var Ie=this._tiles[Ee];Ie.hasDependency(J,pe)&&this._reloadTile(Ee,"reloading")}this._cache.filter(function($e){return!$e.hasDependency(J,pe)})},W}(e.Evented);Pe.maxOverzooming=10,Pe.maxUnderzooming=3;function ke(fe,W){var ve=Math.abs(fe.wrap*2)-+(fe.wrap<0),J=Math.abs(W.wrap*2)-+(W.wrap<0);return fe.overscaledZ-W.overscaledZ||J-ve||W.canonical.y-fe.canonical.y||W.canonical.x-fe.canonical.x}function lt(fe){return fe==="raster"||fe==="image"||fe==="video"}function ft(){return new e.window.Worker(cv.workerUrl)}var yt="mapboxgl_preloaded_worker_pool",Rt=function(){this.active={}};Rt.prototype.acquire=function(W){if(!this.workers)for(this.workers=[];this.workers.length<Rt.workerCount;)this.workers.push(new ft);return this.active[W]=!0,this.workers.slice()},Rt.prototype.release=function(W){delete this.active[W],this.numActive()===0&&(this.workers.forEach(function(ve){ve.terminate()}),this.workers=null)},Rt.prototype.isPreloaded=function(){return!!this.active[yt]},Rt.prototype.numActive=function(){return Object.keys(this.active).length};var _t=Math.floor(e.browser.hardwareConcurrency/2);Rt.workerCount=Math.max(Math.min(_t,6),1);var Dt;function Jt(){return Dt||(Dt=new Rt),Dt}function fr(){var fe=Jt();fe.acquire(yt)}function Rr(){var fe=Dt;fe&&(fe.isPreloaded()&&fe.numActive()===1?(fe.release(yt),Dt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))}function Sr(fe,W){var ve={};for(var J in fe)J!=="ref"&&(ve[J]=fe[J]);return e.refProperties.forEach(function(pe){pe in W&&(ve[pe]=W[pe])}),ve}function Pr(fe){fe=fe.slice();for(var W=Object.create(null),ve=0;ve<fe.length;ve++)W[fe[ve].id]=fe[ve];for(var J=0;J<fe.length;J++)"ref"in fe[J]&&(fe[J]=Sr(fe[J],W[fe[J].ref]));return fe}function Jr(){var fe={},W=e.styleSpec.$version;for(var ve in e.styleSpec.$root){var J=e.styleSpec.$root[ve];if(J.required){var pe=null;ve==="version"?pe=W:J.type==="array"?pe=[]:pe={},pe!=null&&(fe[ve]=pe)}}return fe}var ur={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function _r(fe,W,ve){ve.push({command:ur.addSource,args:[fe,W[fe]]})}function Br(fe,W,ve){W.push({command:ur.removeSource,args:[fe]}),ve[fe]=!0}function Yr(fe,W,ve,J){Br(fe,ve,J),_r(fe,W,ve)}function Dr(fe,W,ve){var J;for(J in fe[ve])if(!!fe[ve].hasOwnProperty(J)&&J!=="data"&&!e.deepEqual(fe[ve][J],W[ve][J]))return!1;for(J in W[ve])if(!!W[ve].hasOwnProperty(J)&&J!=="data"&&!e.deepEqual(fe[ve][J],W[ve][J]))return!1;return!0}function it(fe,W,ve,J){fe=fe||{},W=W||{};var pe;for(pe in fe)!fe.hasOwnProperty(pe)||W.hasOwnProperty(pe)||Br(pe,ve,J);for(pe in W)!W.hasOwnProperty(pe)||(fe.hasOwnProperty(pe)?e.deepEqual(fe[pe],W[pe])||(fe[pe].type==="geojson"&&W[pe].type==="geojson"&&Dr(fe,W,pe)?ve.push({command:ur.setGeoJSONSourceData,args:[pe,W[pe].data]}):Yr(pe,W,ve,J)):_r(pe,W,ve))}function zt(fe,W,ve,J,pe,Ee){fe=fe||{},W=W||{};var Ie;for(Ie in fe)!fe.hasOwnProperty(Ie)||e.deepEqual(fe[Ie],W[Ie])||ve.push({command:Ee,args:[J,Ie,W[Ie],pe]});for(Ie in W)!W.hasOwnProperty(Ie)||fe.hasOwnProperty(Ie)||e.deepEqual(fe[Ie],W[Ie])||ve.push({command:Ee,args:[J,Ie,W[Ie],pe]})}function qt(fe){return fe.id}function hr(fe,W){return fe[W.id]=W,fe}function Ur(fe,W,ve){fe=fe||[],W=W||[];var J=fe.map(qt),pe=W.map(qt),Ee=fe.reduce(hr,{}),Ie=W.reduce(hr,{}),$e=J.slice(),dt=Object.create(null),Ft,nr,dr,xr,Fr,Zr,Qr;for(Ft=0,nr=0;Ft<J.length;Ft++)dr=J[Ft],Ie.hasOwnProperty(dr)?nr++:(ve.push({command:ur.removeLayer,args:[dr]}),$e.splice($e.indexOf(dr,nr),1));for(Ft=0,nr=0;Ft<pe.length;Ft++)dr=pe[pe.length-1-Ft],$e[$e.length-1-Ft]!==dr&&(Ee.hasOwnProperty(dr)?(ve.push({command:ur.removeLayer,args:[dr]}),$e.splice($e.lastIndexOf(dr,$e.length-nr),1)):nr++,Zr=$e[$e.length-Ft],ve.push({command:ur.addLayer,args:[Ie[dr],Zr]}),$e.splice($e.length-Ft,0,dr),dt[dr]=!0);for(Ft=0;Ft<pe.length;Ft++)if(dr=pe[Ft],xr=Ee[dr],Fr=Ie[dr],!(dt[dr]||e.deepEqual(xr,Fr))){if(!e.deepEqual(xr.source,Fr.source)||!e.deepEqual(xr["source-layer"],Fr["source-layer"])||!e.deepEqual(xr.type,Fr.type)){ve.push({command:ur.removeLayer,args:[dr]}),Zr=$e[$e.lastIndexOf(dr)+1],ve.push({command:ur.addLayer,args:[Fr,Zr]});continue}zt(xr.layout,Fr.layout,ve,dr,null,ur.setLayoutProperty),zt(xr.paint,Fr.paint,ve,dr,null,ur.setPaintProperty),e.deepEqual(xr.filter,Fr.filter)||ve.push({command:ur.setFilter,args:[dr,Fr.filter]}),(!e.deepEqual(xr.minzoom,Fr.minzoom)||!e.deepEqual(xr.maxzoom,Fr.maxzoom))&&ve.push({command:ur.setLayerZoomRange,args:[dr,Fr.minzoom,Fr.maxzoom]});for(Qr in xr)!xr.hasOwnProperty(Qr)||Qr==="layout"||Qr==="paint"||Qr==="filter"||Qr==="metadata"||Qr==="minzoom"||Qr==="maxzoom"||(Qr.indexOf("paint.")===0?zt(xr[Qr],Fr[Qr],ve,dr,Qr.slice(6),ur.setPaintProperty):e.deepEqual(xr[Qr],Fr[Qr])||ve.push({command:ur.setLayerProperty,args:[dr,Qr,Fr[Qr]]}));for(Qr in Fr)!Fr.hasOwnProperty(Qr)||xr.hasOwnProperty(Qr)||Qr==="layout"||Qr==="paint"||Qr==="filter"||Qr==="metadata"||Qr==="minzoom"||Qr==="maxzoom"||(Qr.indexOf("paint.")===0?zt(xr[Qr],Fr[Qr],ve,dr,Qr.slice(6),ur.setPaintProperty):e.deepEqual(xr[Qr],Fr[Qr])||ve.push({command:ur.setLayerProperty,args:[dr,Qr,Fr[Qr]]}))}}function Gr(fe,W){if(!fe)return[{command:ur.setStyle,args:[W]}];var ve=[];try{if(!e.deepEqual(fe.version,W.version))return[{command:ur.setStyle,args:[W]}];e.deepEqual(fe.center,W.center)||ve.push({command:ur.setCenter,args:[W.center]}),e.deepEqual(fe.zoom,W.zoom)||ve.push({command:ur.setZoom,args:[W.zoom]}),e.deepEqual(fe.bearing,W.bearing)||ve.push({command:ur.setBearing,args:[W.bearing]}),e.deepEqual(fe.pitch,W.pitch)||ve.push({command:ur.setPitch,args:[W.pitch]}),e.deepEqual(fe.sprite,W.sprite)||ve.push({command:ur.setSprite,args:[W.sprite]}),e.deepEqual(fe.glyphs,W.glyphs)||ve.push({command:ur.setGlyphs,args:[W.glyphs]}),e.deepEqual(fe.transition,W.transition)||ve.push({command:ur.setTransition,args:[W.transition]}),e.deepEqual(fe.light,W.light)||ve.push({command:ur.setLight,args:[W.light]});var J={},pe=[];it(fe.sources,W.sources,pe,J);var Ee=[];fe.layers&&fe.layers.forEach(function(Ie){J[Ie.source]?ve.push({command:ur.removeLayer,args:[Ie.id]}):Ee.push(Ie)}),ve=ve.concat(pe),Ur(Ee,W.layers,ve)}catch(Ie){console.warn("Unable to compute style diff:",Ie),ve=[{command:ur.setStyle,args:[W]}]}return ve}var Ir=function(W,ve){this.reset(W,ve)};Ir.prototype.reset=function(W,ve){this.points=W||[],this._distances=[0];for(var J=1;J<this.points.length;J++)this._distances[J]=this._distances[J-1]+this.points[J].dist(this.points[J-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(ve||0,this.length*.5),this.paddedLength=this.length-this.padding*2},Ir.prototype.lerp=function(W){if(this.points.length===1)return this.points[0];W=e.clamp(W,0,1);for(var ve=1,J=this._distances[ve],pe=W*this.paddedLength+this.padding;J<pe&&ve<this._distances.length;)J=this._distances[++ve];var Ee=ve-1,Ie=this._distances[Ee],$e=J-Ie,dt=$e>0?(pe-Ie)/$e:0;return this.points[Ee].mult(1-dt).add(this.points[ve].mult(dt))};var Cr=function(W,ve,J){var pe=this.boxCells=[],Ee=this.circleCells=[];this.xCellCount=Math.ceil(W/J),this.yCellCount=Math.ceil(ve/J);for(var Ie=0;Ie<this.xCellCount*this.yCellCount;Ie++)pe.push([]),Ee.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=W,this.height=ve,this.xScale=this.xCellCount/W,this.yScale=this.yCellCount/ve,this.boxUid=0,this.circleUid=0};Cr.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},Cr.prototype.insert=function(W,ve,J,pe,Ee){this._forEachCell(ve,J,pe,Ee,this._insertBoxCell,this.boxUid++),this.boxKeys.push(W),this.bboxes.push(ve),this.bboxes.push(J),this.bboxes.push(pe),this.bboxes.push(Ee)},Cr.prototype.insertCircle=function(W,ve,J,pe){this._forEachCell(ve-pe,J-pe,ve+pe,J+pe,this._insertCircleCell,this.circleUid++),this.circleKeys.push(W),this.circles.push(ve),this.circles.push(J),this.circles.push(pe)},Cr.prototype._insertBoxCell=function(W,ve,J,pe,Ee,Ie){this.boxCells[Ee].push(Ie)},Cr.prototype._insertCircleCell=function(W,ve,J,pe,Ee,Ie){this.circleCells[Ee].push(Ie)},Cr.prototype._query=function(W,ve,J,pe,Ee,Ie){if(J<0||W>this.width||pe<0||ve>this.height)return Ee?!1:[];var $e=[];if(W<=0&&ve<=0&&this.width<=J&&this.height<=pe){if(Ee)return!0;for(var dt=0;dt<this.boxKeys.length;dt++)$e.push({key:this.boxKeys[dt],x1:this.bboxes[dt*4],y1:this.bboxes[dt*4+1],x2:this.bboxes[dt*4+2],y2:this.bboxes[dt*4+3]});for(var Ft=0;Ft<this.circleKeys.length;Ft++){var nr=this.circles[Ft*3],dr=this.circles[Ft*3+1],xr=this.circles[Ft*3+2];$e.push({key:this.circleKeys[Ft],x1:nr-xr,y1:dr-xr,x2:nr+xr,y2:dr+xr})}return Ie?$e.filter(Ie):$e}else{var Fr={hitTest:Ee,seenUids:{box:{},circle:{}}};return this._forEachCell(W,ve,J,pe,this._queryCell,$e,Fr,Ie),Ee?$e.length>0:$e}},Cr.prototype._queryCircle=function(W,ve,J,pe,Ee){var Ie=W-J,$e=W+J,dt=ve-J,Ft=ve+J;if($e<0||Ie>this.width||Ft<0||dt>this.height)return pe?!1:[];var nr=[],dr={hitTest:pe,circle:{x:W,y:ve,radius:J},seenUids:{box:{},circle:{}}};return this._forEachCell(Ie,dt,$e,Ft,this._queryCellCircle,nr,dr,Ee),pe?nr.length>0:nr},Cr.prototype.query=function(W,ve,J,pe,Ee){return this._query(W,ve,J,pe,!1,Ee)},Cr.prototype.hitTest=function(W,ve,J,pe,Ee){return this._query(W,ve,J,pe,!0,Ee)},Cr.prototype.hitTestCircle=function(W,ve,J,pe){return this._queryCircle(W,ve,J,!0,pe)},Cr.prototype._queryCell=function(W,ve,J,pe,Ee,Ie,$e,dt){var Ft=$e.seenUids,nr=this.boxCells[Ee];if(nr!==null)for(var dr=this.bboxes,xr=0,Fr=nr;xr<Fr.length;xr+=1){var Zr=Fr[xr];if(!Ft.box[Zr]){Ft.box[Zr]=!0;var Qr=Zr*4;if(W<=dr[Qr+2]&&ve<=dr[Qr+3]&&J>=dr[Qr+0]&&pe>=dr[Qr+1]&&(!dt||dt(this.boxKeys[Zr]))){if($e.hitTest)return Ie.push(!0),!0;Ie.push({key:this.boxKeys[Zr],x1:dr[Qr],y1:dr[Qr+1],x2:dr[Qr+2],y2:dr[Qr+3]})}}}var jr=this.circleCells[Ee];if(jr!==null)for(var rn=this.circles,mn=0,Fn=jr;mn<Fn.length;mn+=1){var Hn=Fn[mn];if(!Ft.circle[Hn]){Ft.circle[Hn]=!0;var ta=Hn*3;if(this._circleAndRectCollide(rn[ta],rn[ta+1],rn[ta+2],W,ve,J,pe)&&(!dt||dt(this.circleKeys[Hn]))){if($e.hitTest)return Ie.push(!0),!0;var ia=rn[ta],na=rn[ta+1],ya=rn[ta+2];Ie.push({key:this.circleKeys[Hn],x1:ia-ya,y1:na-ya,x2:ia+ya,y2:na+ya})}}}},Cr.prototype._queryCellCircle=function(W,ve,J,pe,Ee,Ie,$e,dt){var Ft=$e.circle,nr=$e.seenUids,dr=this.boxCells[Ee];if(dr!==null)for(var xr=this.bboxes,Fr=0,Zr=dr;Fr<Zr.length;Fr+=1){var Qr=Zr[Fr];if(!nr.box[Qr]){nr.box[Qr]=!0;var jr=Qr*4;if(this._circleAndRectCollide(Ft.x,Ft.y,Ft.radius,xr[jr+0],xr[jr+1],xr[jr+2],xr[jr+3])&&(!dt||dt(this.boxKeys[Qr])))return Ie.push(!0),!0}}var rn=this.circleCells[Ee];if(rn!==null)for(var mn=this.circles,Fn=0,Hn=rn;Fn<Hn.length;Fn+=1){var ta=Hn[Fn];if(!nr.circle[ta]){nr.circle[ta]=!0;var ia=ta*3;if(this._circlesCollide(mn[ia],mn[ia+1],mn[ia+2],Ft.x,Ft.y,Ft.radius)&&(!dt||dt(this.circleKeys[ta])))return Ie.push(!0),!0}}},Cr.prototype._forEachCell=function(W,ve,J,pe,Ee,Ie,$e,dt){for(var Ft=this._convertToXCellCoord(W),nr=this._convertToYCellCoord(ve),dr=this._convertToXCellCoord(J),xr=this._convertToYCellCoord(pe),Fr=Ft;Fr<=dr;Fr++)for(var Zr=nr;Zr<=xr;Zr++){var Qr=this.xCellCount*Zr+Fr;if(Ee.call(this,W,ve,J,pe,Qr,Ie,$e,dt))return}},Cr.prototype._convertToXCellCoord=function(W){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(W*this.xScale)))},Cr.prototype._convertToYCellCoord=function(W){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(W*this.yScale)))},Cr.prototype._circlesCollide=function(W,ve,J,pe,Ee,Ie){var $e=pe-W,dt=Ee-ve,Ft=J+Ie;return Ft*Ft>$e*$e+dt*dt},Cr.prototype._circleAndRectCollide=function(W,ve,J,pe,Ee,Ie,$e){var dt=(Ie-pe)/2,Ft=Math.abs(W-(pe+dt));if(Ft>dt+J)return!1;var nr=($e-Ee)/2,dr=Math.abs(ve-(Ee+nr));if(dr>nr+J)return!1;if(Ft<=dt||dr<=nr)return!0;var xr=Ft-dt,Fr=dr-nr;return xr*xr+Fr*Fr<=J*J};function Kr(fe,W,ve,J,pe){var Ee=e.create();return W?(e.scale(Ee,Ee,[1/pe,1/pe,1]),ve||e.rotateZ(Ee,Ee,J.angle)):e.multiply(Ee,J.labelPlaneMatrix,fe),Ee}function Cn(fe,W,ve,J,pe){if(W){var Ee=e.clone(fe);return e.scale(Ee,Ee,[pe,pe,1]),ve||e.rotateZ(Ee,Ee,-J.angle),Ee}else return J.glCoordMatrix}function yn(fe,W){var ve=[fe.x,fe.y,0,1];kr(ve,ve,W);var J=ve[3];return{point:new e.Point(ve[0]/J,ve[1]/J),signedDistanceFromCamera:J}}function Yn(fe,W){return .5+.5*(fe/W)}function In(fe,W){var ve=fe[0]/fe[3],J=fe[1]/fe[3],pe=ve>=-W[0]&&ve<=W[0]&&J>=-W[1]&&J<=W[1];return pe}function Jn(fe,W,ve,J,pe,Ee,Ie,$e){var dt=J?fe.textSizeData:fe.iconSizeData,Ft=e.evaluateSizeForZoom(dt,ve.transform.zoom),nr=[256/ve.width*2+1,256/ve.height*2+1],dr=J?fe.text.dynamicLayoutVertexArray:fe.icon.dynamicLayoutVertexArray;dr.clear();for(var xr=fe.lineVertexArray,Fr=J?fe.text.placedSymbolArray:fe.icon.placedSymbolArray,Zr=ve.transform.width/ve.transform.height,Qr=!1,jr=0;jr<Fr.length;jr++){var rn=Fr.get(jr);if(rn.hidden||rn.writingMode===e.WritingMode.vertical&&!Qr){$a(rn.numGlyphs,dr);continue}Qr=!1;var mn=[rn.anchorX,rn.anchorY,0,1];if(e.transformMat4(mn,mn,W),!In(mn,nr)){$a(rn.numGlyphs,dr);continue}var Fn=mn[3],Hn=Yn(ve.transform.cameraToCenterDistance,Fn),ta=e.evaluateSizeForFeature(dt,Ft,rn),ia=Ie?ta/Hn:ta*Hn,na=new e.Point(rn.anchorX,rn.anchorY),ya=yn(na,pe).point,Sa={},Ta=Pa(rn,ia,!1,$e,W,pe,Ee,fe.glyphOffsetArray,xr,dr,ya,na,Sa,Zr);Qr=Ta.useVertical,(Ta.notEnoughRoom||Qr||Ta.needsFlipping&&Pa(rn,ia,!0,$e,W,pe,Ee,fe.glyphOffsetArray,xr,dr,ya,na,Sa,Zr).notEnoughRoom)&&$a(rn.numGlyphs,dr)}J?fe.text.dynamicLayoutVertexBuffer.updateData(dr):fe.icon.dynamicLayoutVertexBuffer.updateData(dr)}function Zn(fe,W,ve,J,pe,Ee,Ie,$e,dt,Ft,nr){var dr=$e.glyphStartIndex+$e.numGlyphs,xr=$e.lineStartIndex,Fr=$e.lineStartIndex+$e.lineLength,Zr=W.getoffsetX($e.glyphStartIndex),Qr=W.getoffsetX(dr-1),jr=Ka(fe*Zr,ve,J,pe,Ee,Ie,$e.segment,xr,Fr,dt,Ft,nr);if(!jr)return null;var rn=Ka(fe*Qr,ve,J,pe,Ee,Ie,$e.segment,xr,Fr,dt,Ft,nr);return rn?{first:jr,last:rn}:null}function ba(fe,W,ve,J){if(fe===e.WritingMode.horizontal){var pe=Math.abs(ve.y-W.y),Ee=Math.abs(ve.x-W.x)*J;if(pe>Ee)return{useVertical:!0}}return(fe===e.WritingMode.vertical?W.y<ve.y:W.x>ve.x)?{needsFlipping:!0}:null}function Pa(fe,W,ve,J,pe,Ee,Ie,$e,dt,Ft,nr,dr,xr,Fr){var Zr=W/24,Qr=fe.lineOffsetX*Zr,jr=fe.lineOffsetY*Zr,rn;if(fe.numGlyphs>1){var mn=fe.glyphStartIndex+fe.numGlyphs,Fn=fe.lineStartIndex,Hn=fe.lineStartIndex+fe.lineLength,ta=Zn(Zr,$e,Qr,jr,ve,nr,dr,fe,dt,Ee,xr);if(!ta)return{notEnoughRoom:!0};var ia=yn(ta.first.point,Ie).point,na=yn(ta.last.point,Ie).point;if(J&&!ve){var ya=ba(fe.writingMode,ia,na,Fr);if(ya)return ya}rn=[ta.first];for(var Sa=fe.glyphStartIndex+1;Sa<mn-1;Sa++)rn.push(Ka(Zr*$e.getoffsetX(Sa),Qr,jr,ve,nr,dr,fe.segment,Fn,Hn,dt,Ee,xr));rn.push(ta.last)}else{if(J&&!ve){var Ta=yn(dr,pe).point,ka=fe.lineStartIndex+fe.segment+1,Fa=new e.Point(dt.getx(ka),dt.gety(ka)),Za=yn(Fa,pe),ci=Za.signedDistanceFromCamera>0?Za.point:xi(dr,Fa,Ta,1,pe),Vi=ba(fe.writingMode,Ta,ci,Fr);if(Vi)return Vi}var yi=Ka(Zr*$e.getoffsetX(fe.glyphStartIndex),Qr,jr,ve,nr,dr,fe.segment,fe.lineStartIndex,fe.lineStartIndex+fe.lineLength,dt,Ee,xr);if(!yi)return{notEnoughRoom:!0};rn=[yi]}for(var Ti=0,Wa=rn;Ti<Wa.length;Ti+=1){var Hi=Wa[Ti];e.addDynamicAttributes(Ft,Hi.point,Hi.angle)}return{}}function xi(fe,W,ve,J,pe){var Ee=yn(fe.add(fe.sub(W)._unit()),pe).point,Ie=ve.sub(Ee);return ve.add(Ie._mult(J/Ie.mag()))}function Ka(fe,W,ve,J,pe,Ee,Ie,$e,dt,Ft,nr,dr){var xr=J?fe-W:fe+W,Fr=xr>0?1:-1,Zr=0;J&&(Fr*=-1,Zr=Math.PI),Fr<0&&(Zr+=Math.PI);for(var Qr=Fr>0?$e+Ie:$e+Ie+1,jr=pe,rn=pe,mn=0,Fn=0,Hn=Math.abs(xr),ta=[];mn+Fn<=Hn;){if(Qr+=Fr,Qr<$e||Qr>=dt)return null;if(rn=jr,ta.push(jr),jr=dr[Qr],jr===void 0){var ia=new e.Point(Ft.getx(Qr),Ft.gety(Qr)),na=yn(ia,nr);if(na.signedDistanceFromCamera>0)jr=dr[Qr]=na.point;else{var ya=Qr-Fr,Sa=mn===0?Ee:new e.Point(Ft.getx(ya),Ft.gety(ya));jr=xi(Sa,ia,rn,Hn-mn+1,nr)}}mn+=Fn,Fn=rn.dist(jr)}var Ta=(Hn-mn)/Fn,ka=jr.sub(rn),Fa=ka.mult(Ta)._add(rn);Fa._add(ka._unit()._perp()._mult(ve*Fr));var Za=Zr+Math.atan2(jr.y-rn.y,jr.x-rn.x);return ta.push(Fa),{point:Fa,angle:Za,path:ta}}var ti=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function $a(fe,W){for(var ve=0;ve<fe;ve++){var J=W.length;W.resize(J+4),W.float32.set(ti,J*3)}}function kr(fe,W,ve){var J=W[0],pe=W[1];return fe[0]=ve[0]*J+ve[4]*pe+ve[12],fe[1]=ve[1]*J+ve[5]*pe+ve[13],fe[3]=ve[3]*J+ve[7]*pe+ve[15],fe}var bn=100,gn=function(W,ve,J){ve===void 0&&(ve=new Cr(W.width+2*bn,W.height+2*bn,25)),J===void 0&&(J=new Cr(W.width+2*bn,W.height+2*bn,25)),this.transform=W,this.grid=ve,this.ignoredGrid=J,this.pitchfactor=Math.cos(W._pitch)*W.cameraToCenterDistance,this.screenRightBoundary=W.width+bn,this.screenBottomBoundary=W.height+bn,this.gridRightBoundary=W.width+2*bn,this.gridBottomBoundary=W.height+2*bn};gn.prototype.placeCollisionBox=function(W,ve,J,pe,Ee){var Ie=this.projectAndGetPerspectiveRatio(pe,W.anchorPointX,W.anchorPointY),$e=J*Ie.perspectiveRatio,dt=W.x1*$e+Ie.point.x,Ft=W.y1*$e+Ie.point.y,nr=W.x2*$e+Ie.point.x,dr=W.y2*$e+Ie.point.y;return!this.isInsideGrid(dt,Ft,nr,dr)||!ve&&this.grid.hitTest(dt,Ft,nr,dr,Ee)?{box:[],offscreen:!1}:{box:[dt,Ft,nr,dr],offscreen:this.isOffscreen(dt,Ft,nr,dr)}},gn.prototype.placeCollisionCircles=function(W,ve,J,pe,Ee,Ie,$e,dt,Ft,nr,dr,xr,Fr){var Zr=[],Qr=new e.Point(ve.anchorX,ve.anchorY),jr=yn(Qr,Ie),rn=Yn(this.transform.cameraToCenterDistance,jr.signedDistanceFromCamera),mn=nr?Ee/rn:Ee*rn,Fn=mn/e.ONE_EM,Hn=yn(Qr,$e).point,ta={},ia=ve.lineOffsetX*Fn,na=ve.lineOffsetY*Fn,ya=Zn(Fn,pe,ia,na,!1,Hn,Qr,ve,J,$e,ta),Sa=!1,Ta=!1,ka=!0;if(ya){for(var Fa=xr*.5*rn+Fr,Za=new e.Point(-bn,-bn),ci=new e.Point(this.screenRightBoundary,this.screenBottomBoundary),Vi=new Ir,yi=ya.first,Ti=ya.last,Wa=[],Hi=yi.path.length-1;Hi>=1;Hi--)Wa.push(yi.path[Hi]);for(var Xi=1;Xi<Ti.path.length;Xi++)Wa.push(Ti.path[Xi]);var $i=Fa*2.5;if(dt){var Pi=Wa.map(function(Iu){return yn(Iu,dt)});Pi.some(function(Iu){return Iu.signedDistanceFromCamera<=0})?Wa=[]:Wa=Pi.map(function(Iu){return Iu.point})}var so=[];if(Wa.length>0){for(var vi=Wa[0].clone(),Ri=Wa[0].clone(),Fo=1;Fo<Wa.length;Fo++)vi.x=Math.min(vi.x,Wa[Fo].x),vi.y=Math.min(vi.y,Wa[Fo].y),Ri.x=Math.max(Ri.x,Wa[Fo].x),Ri.y=Math.max(Ri.y,Wa[Fo].y);vi.x>=Za.x&&Ri.x<=ci.x&&vi.y>=Za.y&&Ri.y<=ci.y?so=[Wa]:Ri.x<Za.x||vi.x>ci.x||Ri.y<Za.y||vi.y>ci.y?so=[]:so=e.clipLine([Wa],Za.x,Za.y,ci.x,ci.y)}for(var es=0,Ql=so;es<Ql.length;es+=1){var $l=Ql[es];Vi.reset($l,Fa*.25);var Lu=0;Vi.length<=.5*Fa?Lu=1:Lu=Math.ceil(Vi.paddedLength/$i)+1;for(var Pu=0;Pu<Lu;Pu++){var rf=Pu/Math.max(Lu-1,1),Du=Vi.lerp(rf),ol=Du.x+bn,Sf=Du.y+bn;Zr.push(ol,Sf,Fa,0);var Vs=ol-Fa,zl=Sf-Fa,Ru=ol+Fa,mu=Sf+Fa;if(ka=ka&&this.isOffscreen(Vs,zl,Ru,mu),Ta=Ta||this.isInsideGrid(Vs,zl,Ru,mu),!W&&this.grid.hitTestCircle(ol,Sf,Fa,dr)&&(Sa=!0,!Ft))return{circles:[],offscreen:!1,collisionDetected:Sa}}}}return{circles:!Ft&&Sa||!Ta?[]:Zr,offscreen:ka,collisionDetected:Sa}},gn.prototype.queryRenderedSymbols=function(W){if(W.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var ve=[],J=1/0,pe=1/0,Ee=-1/0,Ie=-1/0,$e=0,dt=W;$e<dt.length;$e+=1){var Ft=dt[$e],nr=new e.Point(Ft.x+bn,Ft.y+bn);J=Math.min(J,nr.x),pe=Math.min(pe,nr.y),Ee=Math.max(Ee,nr.x),Ie=Math.max(Ie,nr.y),ve.push(nr)}for(var dr=this.grid.query(J,pe,Ee,Ie).concat(this.ignoredGrid.query(J,pe,Ee,Ie)),xr={},Fr={},Zr=0,Qr=dr;Zr<Qr.length;Zr+=1){var jr=Qr[Zr],rn=jr.key;if(xr[rn.bucketInstanceId]===void 0&&(xr[rn.bucketInstanceId]={}),!xr[rn.bucketInstanceId][rn.featureIndex]){var mn=[new e.Point(jr.x1,jr.y1),new e.Point(jr.x2,jr.y1),new e.Point(jr.x2,jr.y2),new e.Point(jr.x1,jr.y2)];!e.polygonIntersectsPolygon(ve,mn)||(xr[rn.bucketInstanceId][rn.featureIndex]=!0,Fr[rn.bucketInstanceId]===void 0&&(Fr[rn.bucketInstanceId]=[]),Fr[rn.bucketInstanceId].push(rn.featureIndex))}}return Fr},gn.prototype.insertCollisionBox=function(W,ve,J,pe,Ee){var Ie=ve?this.ignoredGrid:this.grid,$e={bucketInstanceId:J,featureIndex:pe,collisionGroupID:Ee};Ie.insert($e,W[0],W[1],W[2],W[3])},gn.prototype.insertCollisionCircles=function(W,ve,J,pe,Ee){for(var Ie=ve?this.ignoredGrid:this.grid,$e={bucketInstanceId:J,featureIndex:pe,collisionGroupID:Ee},dt=0;dt<W.length;dt+=4)Ie.insertCircle($e,W[dt],W[dt+1],W[dt+2])},gn.prototype.projectAndGetPerspectiveRatio=function(W,ve,J){var pe=[ve,J,0,1];kr(pe,pe,W);var Ee=new e.Point((pe[0]/pe[3]+1)/2*this.transform.width+bn,(-pe[1]/pe[3]+1)/2*this.transform.height+bn);return{point:Ee,perspectiveRatio:.5+.5*(this.transform.cameraToCenterDistance/pe[3])}},gn.prototype.isOffscreen=function(W,ve,J,pe){return J<bn||W>=this.screenRightBoundary||pe<bn||ve>this.screenBottomBoundary},gn.prototype.isInsideGrid=function(W,ve,J,pe){return J>=0&&W<this.gridRightBoundary&&pe>=0&&ve<this.gridBottomBoundary},gn.prototype.getViewportMatrix=function(){var W=e.identity([]);return e.translate(W,W,[-bn,-bn,0]),W};function Ln(fe,W,ve){return W*(e.EXTENT/(fe.tileSize*Math.pow(2,ve-fe.tileID.overscaledZ)))}var qn=function(W,ve,J,pe){W?this.opacity=Math.max(0,Math.min(1,W.opacity+(W.placed?ve:-ve))):this.opacity=pe&&J?1:0,this.placed=J};qn.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var da=function(W,ve,J,pe,Ee){this.text=new qn(W?W.text:null,ve,J,Ee),this.icon=new qn(W?W.icon:null,ve,pe,Ee)};da.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var oa=function(W,ve,J){this.text=W,this.icon=ve,this.skipFade=J},Bn=function(){this.invProjMatrix=e.create(),this.viewportMatrix=e.create(),this.circles=[]},$n=function(W,ve,J,pe,Ee){this.bucketInstanceId=W,this.featureIndex=ve,this.sourceLayerIndex=J,this.bucketIndex=pe,this.tileID=Ee},Xa=function(W){this.crossSourceCollisions=W,this.maxGroupID=0,this.collisionGroups={}};Xa.prototype.get=function(W){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[W]){var ve=++this.maxGroupID;this.collisionGroups[W]={ID:ve,predicate:function(J){return J.collisionGroupID===ve}}}return this.collisionGroups[W]};function gi(fe,W,ve,J,pe){var Ee=e.getAnchorAlignment(fe),Ie=Ee.horizontalAlign,$e=Ee.verticalAlign,dt=-(Ie-.5)*W,Ft=-($e-.5)*ve,nr=e.evaluateVariableOffset(fe,J);return new e.Point(dt+nr[0]*pe,Ft+nr[1]*pe)}function Xt(fe,W,ve,J,pe,Ee){var Ie=fe.x1,$e=fe.x2,dt=fe.y1,Ft=fe.y2,nr=fe.anchorPointX,dr=fe.anchorPointY,xr=new e.Point(W,ve);return J&&xr._rotate(pe?Ee:-Ee),{x1:Ie+xr.x,y1:dt+xr.y,x2:$e+xr.x,y2:Ft+xr.y,anchorPointX:nr,anchorPointY:dr}}var mr=function(W,ve,J,pe){this.transform=W.clone(),this.collisionIndex=new gn(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=ve,this.retainedQueryData={},this.collisionGroups=new Xa(J),this.collisionCircleArrays={},this.prevPlacement=pe,pe&&(pe.prevPlacement=void 0),this.placedOrientations={}};mr.prototype.getBucketParts=function(W,ve,J,pe){var Ee=J.getBucket(ve),Ie=J.latestFeatureIndex;if(!(!Ee||!Ie||ve.id!==Ee.layerIds[0])){var $e=J.collisionBoxArray,dt=Ee.layers[0].layout,Ft=Math.pow(2,this.transform.zoom-J.tileID.overscaledZ),nr=J.tileSize/e.EXTENT,dr=this.transform.calculatePosMatrix(J.tileID.toUnwrapped()),xr=dt.get("text-pitch-alignment")==="map",Fr=dt.get("text-rotation-alignment")==="map",Zr=Ln(J,1,this.transform.zoom),Qr=Kr(dr,xr,Fr,this.transform,Zr),jr=null;if(xr){var rn=Cn(dr,xr,Fr,this.transform,Zr);jr=e.multiply([],this.transform.labelPlaneMatrix,rn)}this.retainedQueryData[Ee.bucketInstanceId]=new $n(Ee.bucketInstanceId,Ie,Ee.sourceLayerIndex,Ee.index,J.tileID);var mn={bucket:Ee,layout:dt,posMatrix:dr,textLabelPlaneMatrix:Qr,labelToScreenMatrix:jr,scale:Ft,textPixelRatio:nr,holdingForFade:J.holdingForFade(),collisionBoxArray:$e,partiallyEvaluatedTextSize:e.evaluateSizeForZoom(Ee.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(Ee.sourceID)};if(pe)for(var Fn=0,Hn=Ee.sortKeyRanges;Fn<Hn.length;Fn+=1){var ta=Hn[Fn],ia=ta.sortKey,na=ta.symbolInstanceStart,ya=ta.symbolInstanceEnd;W.push({sortKey:ia,symbolInstanceStart:na,symbolInstanceEnd:ya,parameters:mn})}else W.push({symbolInstanceStart:0,symbolInstanceEnd:Ee.symbolInstances.length,parameters:mn})}},mr.prototype.attemptAnchorPlacement=function(W,ve,J,pe,Ee,Ie,$e,dt,Ft,nr,dr,xr,Fr,Zr,Qr){var jr=[xr.textOffset0,xr.textOffset1],rn=gi(W,J,pe,jr,Ee),mn=this.collisionIndex.placeCollisionBox(Xt(ve,rn.x,rn.y,Ie,$e,this.transform.angle),dr,dt,Ft,nr.predicate);if(Qr){var Fn=this.collisionIndex.placeCollisionBox(Xt(Qr,rn.x,rn.y,Ie,$e,this.transform.angle),dr,dt,Ft,nr.predicate);if(Fn.box.length===0)return}if(mn.box.length>0){var Hn;return this.prevPlacement&&this.prevPlacement.variableOffsets[xr.crossTileID]&&this.prevPlacement.placements[xr.crossTileID]&&this.prevPlacement.placements[xr.crossTileID].text&&(Hn=this.prevPlacement.variableOffsets[xr.crossTileID].anchor),this.variableOffsets[xr.crossTileID]={textOffset:jr,width:J,height:pe,anchor:W,textBoxScale:Ee,prevAnchor:Hn},this.markUsedJustification(Fr,W,xr,Zr),Fr.allowVerticalPlacement&&(this.markUsedOrientation(Fr,Zr,xr),this.placedOrientations[xr.crossTileID]=Zr),{shift:rn,placedGlyphBoxes:mn}}},mr.prototype.placeLayerBucketPart=function(W,ve,J){var pe=this,Ee=W.parameters,Ie=Ee.bucket,$e=Ee.layout,dt=Ee.posMatrix,Ft=Ee.textLabelPlaneMatrix,nr=Ee.labelToScreenMatrix,dr=Ee.textPixelRatio,xr=Ee.holdingForFade,Fr=Ee.collisionBoxArray,Zr=Ee.partiallyEvaluatedTextSize,Qr=Ee.collisionGroup,jr=$e.get("text-optional"),rn=$e.get("icon-optional"),mn=$e.get("text-allow-overlap"),Fn=$e.get("icon-allow-overlap"),Hn=$e.get("text-rotation-alignment")==="map",ta=$e.get("text-pitch-alignment")==="map",ia=$e.get("icon-text-fit")!=="none",na=$e.get("symbol-z-order")==="viewport-y",ya=mn&&(Fn||!Ie.hasIconData()||rn),Sa=Fn&&(mn||!Ie.hasTextData()||jr);!Ie.collisionArrays&&Fr&&Ie.deserializeCollisionBoxes(Fr);var Ta=function(yi,Ti){if(!ve[yi.crossTileID]){if(xr){pe.placements[yi.crossTileID]=new oa(!1,!1,!1);return}var Wa=!1,Hi=!1,Xi=!0,$i=null,Pi={box:null,offscreen:null},so={box:null,offscreen:null},vi=null,Ri=null,Fo=null,es=0,Ql=0,$l=0;Ti.textFeatureIndex?es=Ti.textFeatureIndex:yi.useRuntimeCollisionCircles&&(es=yi.featureIndex),Ti.verticalTextFeatureIndex&&(Ql=Ti.verticalTextFeatureIndex);var Lu=Ti.textBox;if(Lu){var Pu=function(Ho){var Tl=e.WritingMode.horizontal;if(Ie.allowVerticalPlacement&&!Ho&&pe.prevPlacement){var Al=pe.prevPlacement.placedOrientations[yi.crossTileID];Al&&(pe.placedOrientations[yi.crossTileID]=Al,Tl=Al,pe.markUsedOrientation(Ie,Tl,yi))}return Tl},rf=function(Ho,Tl){if(Ie.allowVerticalPlacement&&yi.numVerticalGlyphVertices>0&&Ti.verticalTextBox)for(var Al=0,Ic=Ie.writingModes;Al<Ic.length;Al+=1){var _h=Ic[Al];if(_h===e.WritingMode.vertical?(Pi=Tl(),so=Pi):Pi=Ho(),Pi&&Pi.box&&Pi.box.length)break}else Pi=Ho()};if($e.get("text-variable-anchor")){var Vs=$e.get("text-variable-anchor");if(pe.prevPlacement&&pe.prevPlacement.variableOffsets[yi.crossTileID]){var zl=pe.prevPlacement.variableOffsets[yi.crossTileID];Vs.indexOf(zl.anchor)>0&&(Vs=Vs.filter(function(Ho){return Ho!==zl.anchor}),Vs.unshift(zl.anchor))}var Ru=function(Ho,Tl,Al){for(var Ic=Ho.x2-Ho.x1,_h=Ho.y2-Ho.y1,op=yi.textBoxScale,sp=ia&&!Fn?Tl:null,gc={box:[],offscreen:!1},lp=mn?Vs.length*2:Vs.length,Fc=0;Fc<lp;++Fc){var up=Vs[Fc%Vs.length],fp=Fc>=Vs.length,Th=pe.attemptAnchorPlacement(up,Ho,Ic,_h,op,Hn,ta,dr,dt,Qr,fp,yi,Ie,Al,sp);if(Th&&(gc=Th.placedGlyphBoxes,gc&&gc.box&&gc.box.length)){Wa=!0,$i=Th.shift;break}}return gc},mu=function(){return Ru(Lu,Ti.iconBox,e.WritingMode.horizontal)},Iu=function(){var Ho=Ti.verticalTextBox,Tl=Pi&&Pi.box&&Pi.box.length;return Ie.allowVerticalPlacement&&!Tl&&yi.numVerticalGlyphVertices>0&&Ho?Ru(Ho,Ti.verticalIconBox,e.WritingMode.vertical):{box:null,offscreen:null}};rf(mu,Iu),Pi&&(Wa=Pi.box,Xi=Pi.offscreen);var Lc=Pu(Pi&&Pi.box);if(!Wa&&pe.prevPlacement){var Rf=pe.prevPlacement.variableOffsets[yi.crossTileID];Rf&&(pe.variableOffsets[yi.crossTileID]=Rf,pe.markUsedJustification(Ie,Rf.anchor,yi,Lc))}}else{var Du=function(Ho,Tl){var Al=pe.collisionIndex.placeCollisionBox(Ho,mn,dr,dt,Qr.predicate);return Al&&Al.box&&Al.box.length&&(pe.markUsedOrientation(Ie,Tl,yi),pe.placedOrientations[yi.crossTileID]=Tl),Al},ol=function(){return Du(Lu,e.WritingMode.horizontal)},Sf=function(){var Ho=Ti.verticalTextBox;return Ie.allowVerticalPlacement&&yi.numVerticalGlyphVertices>0&&Ho?Du(Ho,e.WritingMode.vertical):{box:null,offscreen:null}};rf(ol,Sf),Pu(Pi&&Pi.box&&Pi.box.length)}}if(vi=Pi,Wa=vi&&vi.box&&vi.box.length>0,Xi=vi&&vi.offscreen,yi.useRuntimeCollisionCircles){var Ds=Ie.text.placedSymbolArray.get(yi.centerJustifiedTextSymbolIndex),pc=e.evaluateSizeForFeature(Ie.textSizeData,Zr,Ds),Ks=$e.get("text-padding"),dc=yi.collisionCircleDiameter;Ri=pe.collisionIndex.placeCollisionCircles(mn,Ds,Ie.lineVertexArray,Ie.glyphOffsetArray,pc,dt,Ft,nr,J,ta,Qr.predicate,dc,Ks),Wa=mn||Ri.circles.length>0&&!Ri.collisionDetected,Xi=Xi&&Ri.offscreen}if(Ti.iconFeatureIndex&&($l=Ti.iconFeatureIndex),Ti.iconBox){var Pc=function(Ho){var Tl=ia&&$i?Xt(Ho,$i.x,$i.y,Hn,ta,pe.transform.angle):Ho;return pe.collisionIndex.placeCollisionBox(Tl,Fn,dr,dt,Qr.predicate)};so&&so.box&&so.box.length&&Ti.verticalIconBox?(Fo=Pc(Ti.verticalIconBox),Hi=Fo.box.length>0):(Fo=Pc(Ti.iconBox),Hi=Fo.box.length>0),Xi=Xi&&Fo.offscreen}var Dc=jr||yi.numHorizontalGlyphVertices===0&&yi.numVerticalGlyphVertices===0,hv=rn||yi.numIconVertices===0;if(!Dc&&!hv?Hi=Wa=Hi&&Wa:hv?Dc||(Hi=Hi&&Wa):Wa=Hi&&Wa,Wa&&vi&&vi.box&&(so&&so.box&&Ql?pe.collisionIndex.insertCollisionBox(vi.box,$e.get("text-ignore-placement"),Ie.bucketInstanceId,Ql,Qr.ID):pe.collisionIndex.insertCollisionBox(vi.box,$e.get("text-ignore-placement"),Ie.bucketInstanceId,es,Qr.ID)),Hi&&Fo&&pe.collisionIndex.insertCollisionBox(Fo.box,$e.get("icon-ignore-placement"),Ie.bucketInstanceId,$l,Qr.ID),Ri&&(Wa&&pe.collisionIndex.insertCollisionCircles(Ri.circles,$e.get("text-ignore-placement"),Ie.bucketInstanceId,es,Qr.ID),J)){var Rc=Ie.bucketInstanceId,Jf=pe.collisionCircleArrays[Rc];Jf===void 0&&(Jf=pe.collisionCircleArrays[Rc]=new Bn);for(var Qf=0;Qf<Ri.circles.length;Qf+=4)Jf.circles.push(Ri.circles[Qf+0]),Jf.circles.push(Ri.circles[Qf+1]),Jf.circles.push(Ri.circles[Qf+2]),Jf.circles.push(Ri.collisionDetected?1:0)}pe.placements[yi.crossTileID]=new oa(Wa||ya,Hi||Sa,Xi||Ie.justReloaded),ve[yi.crossTileID]=!0}};if(na)for(var ka=Ie.getSortedSymbolIndexes(this.transform.angle),Fa=ka.length-1;Fa>=0;--Fa){var Za=ka[Fa];Ta(Ie.symbolInstances.get(Za),Ie.collisionArrays[Za])}else for(var ci=W.symbolInstanceStart;ci<W.symbolInstanceEnd;ci++)Ta(Ie.symbolInstances.get(ci),Ie.collisionArrays[ci]);if(J&&Ie.bucketInstanceId in this.collisionCircleArrays){var Vi=this.collisionCircleArrays[Ie.bucketInstanceId];e.invert(Vi.invProjMatrix,dt),Vi.viewportMatrix=this.collisionIndex.getViewportMatrix()}Ie.justReloaded=!1},mr.prototype.markUsedJustification=function(W,ve,J,pe){var Ee={left:J.leftJustifiedTextSymbolIndex,center:J.centerJustifiedTextSymbolIndex,right:J.rightJustifiedTextSymbolIndex},Ie;pe===e.WritingMode.vertical?Ie=J.verticalPlacedTextSymbolIndex:Ie=Ee[e.getAnchorJustification(ve)];for(var $e=[J.leftJustifiedTextSymbolIndex,J.centerJustifiedTextSymbolIndex,J.rightJustifiedTextSymbolIndex,J.verticalPlacedTextSymbolIndex],dt=0,Ft=$e;dt<Ft.length;dt+=1){var nr=Ft[dt];nr>=0&&(Ie>=0&&nr!==Ie?W.text.placedSymbolArray.get(nr).crossTileID=0:W.text.placedSymbolArray.get(nr).crossTileID=J.crossTileID)}},mr.prototype.markUsedOrientation=function(W,ve,J){for(var pe=ve===e.WritingMode.horizontal||ve===e.WritingMode.horizontalOnly?ve:0,Ee=ve===e.WritingMode.vertical?ve:0,Ie=[J.leftJustifiedTextSymbolIndex,J.centerJustifiedTextSymbolIndex,J.rightJustifiedTextSymbolIndex],$e=0,dt=Ie;$e<dt.length;$e+=1){var Ft=dt[$e];W.text.placedSymbolArray.get(Ft).placedOrientation=pe}J.verticalPlacedTextSymbolIndex&&(W.text.placedSymbolArray.get(J.verticalPlacedTextSymbolIndex).placedOrientation=Ee)},mr.prototype.commit=function(W){this.commitTime=W,this.zoomAtLastRecencyCheck=this.transform.zoom;var ve=this.prevPlacement,J=!1;this.prevZoomAdjustment=ve?ve.zoomAdjustment(this.transform.zoom):0;var pe=ve?ve.symbolFadeChange(W):1,Ee=ve?ve.opacities:{},Ie=ve?ve.variableOffsets:{},$e=ve?ve.placedOrientations:{};for(var dt in this.placements){var Ft=this.placements[dt],nr=Ee[dt];nr?(this.opacities[dt]=new da(nr,pe,Ft.text,Ft.icon),J=J||Ft.text!==nr.text.placed||Ft.icon!==nr.icon.placed):(this.opacities[dt]=new da(null,pe,Ft.text,Ft.icon,Ft.skipFade),J=J||Ft.text||Ft.icon)}for(var dr in Ee){var xr=Ee[dr];if(!this.opacities[dr]){var Fr=new da(xr,pe,!1,!1);Fr.isHidden()||(this.opacities[dr]=Fr,J=J||xr.text.placed||xr.icon.placed)}}for(var Zr in Ie)!this.variableOffsets[Zr]&&this.opacities[Zr]&&!this.opacities[Zr].isHidden()&&(this.variableOffsets[Zr]=Ie[Zr]);for(var Qr in $e)!this.placedOrientations[Qr]&&this.opacities[Qr]&&!this.opacities[Qr].isHidden()&&(this.placedOrientations[Qr]=$e[Qr]);J?this.lastPlacementChangeTime=W:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=ve?ve.lastPlacementChangeTime:W)},mr.prototype.updateLayerOpacities=function(W,ve){for(var J={},pe=0,Ee=ve;pe<Ee.length;pe+=1){var Ie=Ee[pe],$e=Ie.getBucket(W);$e&&Ie.latestFeatureIndex&&W.id===$e.layerIds[0]&&this.updateBucketOpacities($e,J,Ie.collisionBoxArray)}},mr.prototype.updateBucketOpacities=function(W,ve,J){var pe=this;W.hasTextData()&&W.text.opacityVertexArray.clear(),W.hasIconData()&&W.icon.opacityVertexArray.clear(),W.hasIconCollisionBoxData()&&W.iconCollisionBox.collisionVertexArray.clear(),W.hasTextCollisionBoxData()&&W.textCollisionBox.collisionVertexArray.clear();var Ee=W.layers[0].layout,Ie=new da(null,0,!1,!1,!0),$e=Ee.get("text-allow-overlap"),dt=Ee.get("icon-allow-overlap"),Ft=Ee.get("text-variable-anchor"),nr=Ee.get("text-rotation-alignment")==="map",dr=Ee.get("text-pitch-alignment")==="map",xr=Ee.get("icon-text-fit")!=="none",Fr=new da(null,0,$e&&(dt||!W.hasIconData()||Ee.get("icon-optional")),dt&&($e||!W.hasTextData()||Ee.get("text-optional")),!0);!W.collisionArrays&&J&&(W.hasIconCollisionBoxData()||W.hasTextCollisionBoxData())&&W.deserializeCollisionBoxes(J);for(var Zr=function(mn,Fn,Hn){for(var ta=0;ta<Fn/4;ta++)mn.opacityVertexArray.emplaceBack(Hn)},Qr=function(mn){var Fn=W.symbolInstances.get(mn),Hn=Fn.numHorizontalGlyphVertices,ta=Fn.numVerticalGlyphVertices,ia=Fn.crossTileID,na=ve[ia],ya=pe.opacities[ia];na?ya=Ie:ya||(ya=Fr,pe.opacities[ia]=ya),ve[ia]=!0;var Sa=Hn>0||ta>0,Ta=Fn.numIconVertices>0,ka=pe.placedOrientations[Fn.crossTileID],Fa=ka===e.WritingMode.vertical,Za=ka===e.WritingMode.horizontal||ka===e.WritingMode.horizontalOnly;if(Sa){var ci=Vr(ya.text),Vi=Fa?_n:ci;Zr(W.text,Hn,Vi);var yi=Za?_n:ci;Zr(W.text,ta,yi);var Ti=ya.text.isHidden();[Fn.rightJustifiedTextSymbolIndex,Fn.centerJustifiedTextSymbolIndex,Fn.leftJustifiedTextSymbolIndex].forEach(function($l){$l>=0&&(W.text.placedSymbolArray.get($l).hidden=Ti||Fa?1:0)}),Fn.verticalPlacedTextSymbolIndex>=0&&(W.text.placedSymbolArray.get(Fn.verticalPlacedTextSymbolIndex).hidden=Ti||Za?1:0);var Wa=pe.variableOffsets[Fn.crossTileID];Wa&&pe.markUsedJustification(W,Wa.anchor,Fn,ka);var Hi=pe.placedOrientations[Fn.crossTileID];Hi&&(pe.markUsedJustification(W,"left",Fn,Hi),pe.markUsedOrientation(W,Hi,Fn))}if(Ta){var Xi=Vr(ya.icon),$i=!(xr&&Fn.verticalPlacedIconSymbolIndex&&Fa);if(Fn.placedIconSymbolIndex>=0){var Pi=$i?Xi:_n;Zr(W.icon,Fn.numIconVertices,Pi),W.icon.placedSymbolArray.get(Fn.placedIconSymbolIndex).hidden=ya.icon.isHidden()}if(Fn.verticalPlacedIconSymbolIndex>=0){var so=$i?_n:Xi;Zr(W.icon,Fn.numVerticalIconVertices,so),W.icon.placedSymbolArray.get(Fn.verticalPlacedIconSymbolIndex).hidden=ya.icon.isHidden()}}if(W.hasIconCollisionBoxData()||W.hasTextCollisionBoxData()){var vi=W.collisionArrays[mn];if(vi){var Ri=new e.Point(0,0);if(vi.textBox||vi.verticalTextBox){var Fo=!0;if(Ft){var es=pe.variableOffsets[ia];es?(Ri=gi(es.anchor,es.width,es.height,es.textOffset,es.textBoxScale),nr&&Ri._rotate(dr?pe.transform.angle:-pe.transform.angle)):Fo=!1}vi.textBox&&un(W.textCollisionBox.collisionVertexArray,ya.text.placed,!Fo||Fa,Ri.x,Ri.y),vi.verticalTextBox&&un(W.textCollisionBox.collisionVertexArray,ya.text.placed,!Fo||Za,Ri.x,Ri.y)}var Ql=Boolean(!Za&&vi.verticalIconBox);vi.iconBox&&un(W.iconCollisionBox.collisionVertexArray,ya.icon.placed,Ql,xr?Ri.x:0,xr?Ri.y:0),vi.verticalIconBox&&un(W.iconCollisionBox.collisionVertexArray,ya.icon.placed,!Ql,xr?Ri.x:0,xr?Ri.y:0)}}},jr=0;jr<W.symbolInstances.length;jr++)Qr(jr);if(W.sortFeatures(this.transform.angle),this.retainedQueryData[W.bucketInstanceId]&&(this.retainedQueryData[W.bucketInstanceId].featureSortOrder=W.featureSortOrder),W.hasTextData()&&W.text.opacityVertexBuffer&&W.text.opacityVertexBuffer.updateData(W.text.opacityVertexArray),W.hasIconData()&&W.icon.opacityVertexBuffer&&W.icon.opacityVertexBuffer.updateData(W.icon.opacityVertexArray),W.hasIconCollisionBoxData()&&W.iconCollisionBox.collisionVertexBuffer&&W.iconCollisionBox.collisionVertexBuffer.updateData(W.iconCollisionBox.collisionVertexArray),W.hasTextCollisionBoxData()&&W.textCollisionBox.collisionVertexBuffer&&W.textCollisionBox.collisionVertexBuffer.updateData(W.textCollisionBox.collisionVertexArray),W.bucketInstanceId in this.collisionCircleArrays){var rn=this.collisionCircleArrays[W.bucketInstanceId];W.placementInvProjMatrix=rn.invProjMatrix,W.placementViewportMatrix=rn.viewportMatrix,W.collisionCircleArray=rn.circles,delete this.collisionCircleArrays[W.bucketInstanceId]}},mr.prototype.symbolFadeChange=function(W){return this.fadeDuration===0?1:(W-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},mr.prototype.zoomAdjustment=function(W){return Math.max(0,(this.transform.zoom-W)/1.5)},mr.prototype.hasTransitions=function(W){return this.stale||W-this.lastPlacementChangeTime<this.fadeDuration},mr.prototype.stillRecent=function(W,ve){var J=this.zoomAtLastRecencyCheck===ve?1-this.zoomAdjustment(ve):1;return this.zoomAtLastRecencyCheck=ve,this.commitTime+this.fadeDuration*J>W},mr.prototype.setStale=function(){this.stale=!0};function un(fe,W,ve,J,pe){fe.emplaceBack(W?1:0,ve?1:0,J||0,pe||0),fe.emplaceBack(W?1:0,ve?1:0,J||0,pe||0),fe.emplaceBack(W?1:0,ve?1:0,J||0,pe||0),fe.emplaceBack(W?1:0,ve?1:0,J||0,pe||0)}var xn=Math.pow(2,25),sn=Math.pow(2,24),kn=Math.pow(2,17),Mn=Math.pow(2,16),dn=Math.pow(2,9),Tr=Math.pow(2,8),Ar=Math.pow(2,1);function Vr(fe){if(fe.opacity===0&&!fe.placed)return 0;if(fe.opacity===1&&fe.placed)return 4294967295;var W=fe.placed?1:0,ve=Math.floor(fe.opacity*127);return ve*xn+W*sn+ve*kn+W*Mn+ve*dn+W*Tr+ve*Ar+W}var _n=0,Gn=function(W){this._sortAcrossTiles=W.layout.get("symbol-z-order")!=="viewport-y"&&W.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Gn.prototype.continuePlacement=function(W,ve,J,pe,Ee){for(var Ie=this._bucketParts;this._currentTileIndex<W.length;){var $e=W[this._currentTileIndex];if(ve.getBucketParts(Ie,pe,$e,this._sortAcrossTiles),this._currentTileIndex++,Ee())return!0}for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,Ie.sort(function(Ft,nr){return Ft.sortKey-nr.sortKey}));this._currentPartIndex<Ie.length;){var dt=Ie[this._currentPartIndex];if(ve.placeLayerBucketPart(dt,this._seenCrossTileIDs,J),this._currentPartIndex++,Ee())return!0}return!1};var sa=function(W,ve,J,pe,Ee,Ie,$e){this.placement=new mr(W,Ee,Ie,$e),this._currentPlacementIndex=ve.length-1,this._forceFullPlacement=J,this._showCollisionBoxes=pe,this._done=!1};sa.prototype.isDone=function(){return this._done},sa.prototype.continuePlacement=function(W,ve,J){for(var pe=this,Ee=e.browser.now(),Ie=function(){var dr=e.browser.now()-Ee;return pe._forceFullPlacement?!1:dr>2};this._currentPlacementIndex>=0;){var $e=W[this._currentPlacementIndex],dt=ve[$e],Ft=this.placement.collisionIndex.transform.zoom;if(dt.type==="symbol"&&(!dt.minzoom||dt.minzoom<=Ft)&&(!dt.maxzoom||dt.maxzoom>Ft)){this._inProgressLayer||(this._inProgressLayer=new Gn(dt));var nr=this._inProgressLayer.continuePlacement(J[dt.source],this.placement,this._showCollisionBoxes,dt,Ie);if(nr)return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},sa.prototype.commit=function(W){return this.placement.commit(W),this.placement};var En=512/e.EXTENT/2,ea=function(W,ve,J){this.tileID=W,this.indexedSymbolInstances={},this.bucketInstanceId=J;for(var pe=0;pe<ve.length;pe++){var Ee=ve.get(pe),Ie=Ee.key;this.indexedSymbolInstances[Ie]||(this.indexedSymbolInstances[Ie]=[]),this.indexedSymbolInstances[Ie].push({crossTileID:Ee.crossTileID,coord:this.getScaledCoordinates(Ee,W)})}};ea.prototype.getScaledCoordinates=function(W,ve){var J=ve.canonical.z-this.tileID.canonical.z,pe=En/Math.pow(2,J);return{x:Math.floor((ve.canonical.x*e.EXTENT+W.anchorX)*pe),y:Math.floor((ve.canonical.y*e.EXTENT+W.anchorY)*pe)}},ea.prototype.findMatches=function(W,ve,J){for(var pe=this.tileID.canonical.z<ve.canonical.z?1:Math.pow(2,this.tileID.canonical.z-ve.canonical.z),Ee=0;Ee<W.length;Ee++){var Ie=W.get(Ee);if(!Ie.crossTileID){var $e=this.indexedSymbolInstances[Ie.key];if(!!$e)for(var dt=this.getScaledCoordinates(Ie,ve),Ft=0,nr=$e;Ft<nr.length;Ft+=1){var dr=nr[Ft];if(Math.abs(dr.coord.x-dt.x)<=pe&&Math.abs(dr.coord.y-dt.y)<=pe&&!J[dr.crossTileID]){J[dr.crossTileID]=!0,Ie.crossTileID=dr.crossTileID;break}}}}};var fa=function(){this.maxCrossTileID=0};fa.prototype.generate=function(){return++this.maxCrossTileID};var wa=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};wa.prototype.handleWrapJump=function(W){var ve=Math.round((W-this.lng)/360);if(ve!==0)for(var J in this.indexes){var pe=this.indexes[J],Ee={};for(var Ie in pe){var $e=pe[Ie];$e.tileID=$e.tileID.unwrapTo($e.tileID.wrap+ve),Ee[$e.tileID.key]=$e}this.indexes[J]=Ee}this.lng=W},wa.prototype.addBucket=function(W,ve,J){if(this.indexes[W.overscaledZ]&&this.indexes[W.overscaledZ][W.key]){if(this.indexes[W.overscaledZ][W.key].bucketInstanceId===ve.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(W.overscaledZ,this.indexes[W.overscaledZ][W.key])}for(var pe=0;pe<ve.symbolInstances.length;pe++){var Ee=ve.symbolInstances.get(pe);Ee.crossTileID=0}this.usedCrossTileIDs[W.overscaledZ]||(this.usedCrossTileIDs[W.overscaledZ]={});var Ie=this.usedCrossTileIDs[W.overscaledZ];for(var $e in this.indexes){var dt=this.indexes[$e];if(Number($e)>W.overscaledZ)for(var Ft in dt){var nr=dt[Ft];nr.tileID.isChildOf(W)&&nr.findMatches(ve.symbolInstances,W,Ie)}else{var dr=W.scaledTo(Number($e)),xr=dt[dr.key];xr&&xr.findMatches(ve.symbolInstances,W,Ie)}}for(var Fr=0;Fr<ve.symbolInstances.length;Fr++){var Zr=ve.symbolInstances.get(Fr);Zr.crossTileID||(Zr.crossTileID=J.generate(),Ie[Zr.crossTileID]=!0)}return this.indexes[W.overscaledZ]===void 0&&(this.indexes[W.overscaledZ]={}),this.indexes[W.overscaledZ][W.key]=new ea(W,ve.symbolInstances,ve.bucketInstanceId),!0},wa.prototype.removeBucketCrossTileIDs=function(W,ve){for(var J in ve.indexedSymbolInstances)for(var pe=0,Ee=ve.indexedSymbolInstances[J];pe<Ee.length;pe+=1){var Ie=Ee[pe];delete this.usedCrossTileIDs[W][Ie.crossTileID]}},wa.prototype.removeStaleBuckets=function(W){var ve=!1;for(var J in this.indexes){var pe=this.indexes[J];for(var Ee in pe)W[pe[Ee].bucketInstanceId]||(this.removeBucketCrossTileIDs(J,pe[Ee]),delete pe[Ee],ve=!0)}return ve};var Aa=function(){this.layerIndexes={},this.crossTileIDs=new fa,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Aa.prototype.addLayer=function(W,ve,J){var pe=this.layerIndexes[W.id];pe===void 0&&(pe=this.layerIndexes[W.id]=new wa);var Ee=!1,Ie={};pe.handleWrapJump(J);for(var $e=0,dt=ve;$e<dt.length;$e+=1){var Ft=dt[$e],nr=Ft.getBucket(W);!nr||W.id!==nr.layerIds[0]||(nr.bucketInstanceId||(nr.bucketInstanceId=++this.maxBucketInstanceId),pe.addBucket(Ft.tileID,nr,this.crossTileIDs)&&(Ee=!0),Ie[nr.bucketInstanceId]=!0)}return pe.removeStaleBuckets(Ie)&&(Ee=!0),Ee},Aa.prototype.pruneUnusedLayers=function(W){var ve={};W.forEach(function(pe){ve[pe]=!0});for(var J in this.layerIndexes)ve[J]||delete this.layerIndexes[J]};var va=function(fe,W){return e.emitValidationErrors(fe,W&&W.filter(function(ve){return ve.identifier!=="source.canvas"}))},La=e.pick(ur,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),So=e.pick(ur,["setCenter","setZoom","setBearing","setPitch"]),Jo=Jr(),vs=function(fe){function W(ve,J){var pe=this;J===void 0&&(J={}),fe.call(this),this.map=ve,this.dispatcher=new R(Jt(),this),this.imageManager=new x,this.imageManager.setEventedParent(this),this.glyphManager=new S(ve._requestManager,J.localIdeographFontFamily),this.lineAtlas=new D(256,512),this.crossTileSymbolIndex=new Aa,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new e.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",e.getReferrer());var Ee=this;this._rtlTextPluginCallback=W.registerForPluginStateChange(function(Ie){var $e={pluginStatus:Ie.pluginStatus,pluginURL:Ie.pluginURL};Ee.dispatcher.broadcast("syncRTLPluginState",$e,function(dt,Ft){if(e.triggerPluginCompletionEvent(dt),Ft){var nr=Ft.every(function(xr){return xr});if(nr)for(var dr in Ee.sourceCaches)Ee.sourceCaches[dr].reload()}})}),this.on("data",function(Ie){if(!(Ie.dataType!=="source"||Ie.sourceDataType!=="metadata")){var $e=pe.sourceCaches[Ie.sourceId];if(!!$e){var dt=$e.getSource();if(!(!dt||!dt.vectorLayerIds))for(var Ft in pe._layers){var nr=pe._layers[Ft];nr.source===dt.id&&pe._validateLayer(nr)}}}})}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.loadURL=function(J,pe){var Ee=this;pe===void 0&&(pe={}),this.fire(new e.Event("dataloading",{dataType:"style"}));var Ie=typeof pe.validate=="boolean"?pe.validate:!e.isMapboxURL(J);J=this.map._requestManager.normalizeStyleURL(J,pe.accessToken);var $e=this.map._requestManager.transformRequest(J,e.ResourceType.Style);this._request=e.getJSON($e,function(dt,Ft){Ee._request=null,dt?Ee.fire(new e.ErrorEvent(dt)):Ft&&Ee._load(Ft,Ie)})},W.prototype.loadJSON=function(J,pe){var Ee=this;pe===void 0&&(pe={}),this.fire(new e.Event("dataloading",{dataType:"style"})),this._request=e.browser.frame(function(){Ee._request=null,Ee._load(J,pe.validate!==!1)})},W.prototype.loadEmpty=function(){this.fire(new e.Event("dataloading",{dataType:"style"})),this._load(Jo,!1)},W.prototype._load=function(J,pe){if(!(pe&&va(this,e.validateStyle(J)))){this._loaded=!0,this.stylesheet=J;for(var Ee in J.sources)this.addSource(Ee,J.sources[Ee],{validate:!1});J.sprite?this._loadSprite(J.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(J.glyphs);var Ie=Pr(this.stylesheet.layers);this._order=Ie.map(function(nr){return nr.id}),this._layers={},this._serializedLayers={};for(var $e=0,dt=Ie;$e<dt.length;$e+=1){var Ft=dt[$e];Ft=e.createStyleLayer(Ft),Ft.setEventedParent(this,{layer:{id:Ft.id}}),this._layers[Ft.id]=Ft,this._serializedLayers[Ft.id]=Ft.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new I(this.stylesheet.light),this.fire(new e.Event("data",{dataType:"style"})),this.fire(new e.Event("style.load"))}},W.prototype._loadSprite=function(J){var pe=this;this._spriteRequest=c(J,this.map._requestManager,function(Ee,Ie){if(pe._spriteRequest=null,Ee)pe.fire(new e.ErrorEvent(Ee));else if(Ie)for(var $e in Ie)pe.imageManager.addImage($e,Ie[$e]);pe.imageManager.setLoaded(!0),pe._availableImages=pe.imageManager.listImages(),pe.dispatcher.broadcast("setImages",pe._availableImages),pe.fire(new e.Event("data",{dataType:"style"}))})},W.prototype._validateLayer=function(J){var pe=this.sourceCaches[J.source];if(!!pe){var Ee=J.sourceLayer;if(!!Ee){var Ie=pe.getSource();(Ie.type==="geojson"||Ie.vectorLayerIds&&Ie.vectorLayerIds.indexOf(Ee)===-1)&&this.fire(new e.ErrorEvent(new Error('Source layer "'+Ee+'" does not exist on source "'+Ie.id+'" as specified by style layer "'+J.id+'"')))}}},W.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var J in this.sourceCaches)if(!this.sourceCaches[J].loaded())return!1;return!!this.imageManager.isLoaded()},W.prototype._serializeLayers=function(J){for(var pe=[],Ee=0,Ie=J;Ee<Ie.length;Ee+=1){var $e=Ie[Ee],dt=this._layers[$e];dt.type!=="custom"&&pe.push(dt.serialize())}return pe},W.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var J in this.sourceCaches)if(this.sourceCaches[J].hasTransition())return!0;for(var pe in this._layers)if(this._layers[pe].hasTransition())return!0;return!1},W.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},W.prototype.update=function(J){if(!!this._loaded){var pe=this._changed;if(this._changed){var Ee=Object.keys(this._updatedLayers),Ie=Object.keys(this._removedLayers);(Ee.length||Ie.length)&&this._updateWorkerLayers(Ee,Ie);for(var $e in this._updatedSources){var dt=this._updatedSources[$e];dt==="reload"?this._reloadSource($e):dt==="clear"&&this._clearSource($e)}this._updateTilesForChangedImages();for(var Ft in this._updatedPaintProps)this._layers[Ft].updateTransitions(J);this.light.updateTransitions(J),this._resetUpdates()}for(var nr in this.sourceCaches)this.sourceCaches[nr].used=!1;for(var dr=0,xr=this._order;dr<xr.length;dr+=1){var Fr=xr[dr],Zr=this._layers[Fr];Zr.recalculate(J,this._availableImages),!Zr.isHidden(J.zoom)&&Zr.source&&(this.sourceCaches[Zr.source].used=!0)}this.light.recalculate(J),this.z=J.zoom,pe&&this.fire(new e.Event("data",{dataType:"style"}))}},W.prototype._updateTilesForChangedImages=function(){var J=Object.keys(this._changedImages);if(J.length){for(var pe in this.sourceCaches)this.sourceCaches[pe].reloadTilesForDependencies(["icons","patterns"],J);this._changedImages={}}},W.prototype._updateWorkerLayers=function(J,pe){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(J),removedIds:pe})},W.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},W.prototype.setState=function(J){var pe=this;if(this._checkLoaded(),va(this,e.validateStyle(J)))return!1;J=e.clone$1(J),J.layers=Pr(J.layers);var Ee=Gr(this.serialize(),J).filter(function($e){return!($e.command in So)});if(Ee.length===0)return!1;var Ie=Ee.filter(function($e){return!($e.command in La)});if(Ie.length>0)throw new Error("Unimplemented: "+Ie.map(function($e){return $e.command}).join(", ")+".");return Ee.forEach(function($e){$e.command!=="setTransition"&&pe[$e.command].apply(pe,$e.args)}),this.stylesheet=J,!0},W.prototype.addImage=function(J,pe){if(this.getImage(J))return this.fire(new e.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(J,pe),this._availableImages=this.imageManager.listImages(),this._changedImages[J]=!0,this._changed=!0,this.fire(new e.Event("data",{dataType:"style"}))},W.prototype.updateImage=function(J,pe){this.imageManager.updateImage(J,pe)},W.prototype.getImage=function(J){return this.imageManager.getImage(J)},W.prototype.removeImage=function(J){if(!this.getImage(J))return this.fire(new e.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(J),this._availableImages=this.imageManager.listImages(),this._changedImages[J]=!0,this._changed=!0,this.fire(new e.Event("data",{dataType:"style"}))},W.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},W.prototype.addSource=function(J,pe,Ee){var Ie=this;if(Ee===void 0&&(Ee={}),this._checkLoaded(),this.sourceCaches[J]!==void 0)throw new Error("There is already a source with this ID");if(!pe.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(pe).join(", ")+".");var $e=["vector","raster","geojson","video","image"],dt=$e.indexOf(pe.type)>=0;if(!(dt&&this._validate(e.validateStyle.source,"sources."+J,pe,null,Ee))){this.map&&this.map._collectResourceTiming&&(pe.collectResourceTiming=!0);var Ft=this.sourceCaches[J]=new Pe(J,pe,this.dispatcher);Ft.style=this,Ft.setEventedParent(this,function(){return{isSourceLoaded:Ie.loaded(),source:Ft.serialize(),sourceId:J}}),Ft.onAdd(this.map),this._changed=!0}},W.prototype.removeSource=function(J){if(this._checkLoaded(),this.sourceCaches[J]===void 0)throw new Error("There is no source with this ID");for(var pe in this._layers)if(this._layers[pe].source===J)return this.fire(new e.ErrorEvent(new Error('Source "'+J+'" cannot be removed while layer "'+pe+'" is using it.')));var Ee=this.sourceCaches[J];delete this.sourceCaches[J],delete this._updatedSources[J],Ee.fire(new e.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:J})),Ee.setEventedParent(null),Ee.clearTiles(),Ee.onRemove&&Ee.onRemove(this.map),this._changed=!0},W.prototype.setGeoJSONSourceData=function(J,pe){this._checkLoaded();var Ee=this.sourceCaches[J].getSource();Ee.setData(pe),this._changed=!0},W.prototype.getSource=function(J){return this.sourceCaches[J]&&this.sourceCaches[J].getSource()},W.prototype.addLayer=function(J,pe,Ee){Ee===void 0&&(Ee={}),this._checkLoaded();var Ie=J.id;if(this.getLayer(Ie)){this.fire(new e.ErrorEvent(new Error('Layer with id "'+Ie+'" already exists on this map')));return}var $e;if(J.type==="custom"){if(va(this,e.validateCustomStyleLayer(J)))return;$e=e.createStyleLayer(J)}else{if(typeof J.source=="object"&&(this.addSource(Ie,J.source),J=e.clone$1(J),J=e.extend(J,{source:Ie})),this._validate(e.validateStyle.layer,"layers."+Ie,J,{arrayIndex:-1},Ee))return;$e=e.createStyleLayer(J),this._validateLayer($e),$e.setEventedParent(this,{layer:{id:Ie}}),this._serializedLayers[$e.id]=$e.serialize()}var dt=pe?this._order.indexOf(pe):this._order.length;if(pe&&dt===-1){this.fire(new e.ErrorEvent(new Error('Layer with id "'+pe+'" does not exist on this map.')));return}if(this._order.splice(dt,0,Ie),this._layerOrderChanged=!0,this._layers[Ie]=$e,this._removedLayers[Ie]&&$e.source&&$e.type!=="custom"){var Ft=this._removedLayers[Ie];delete this._removedLayers[Ie],Ft.type!==$e.type?this._updatedSources[$e.source]="clear":(this._updatedSources[$e.source]="reload",this.sourceCaches[$e.source].pause())}this._updateLayer($e),$e.onAdd&&$e.onAdd(this.map)},W.prototype.moveLayer=function(J,pe){this._checkLoaded(),this._changed=!0;var Ee=this._layers[J];if(!Ee){this.fire(new e.ErrorEvent(new Error("The layer '"+J+"' does not exist in the map's style and cannot be moved.")));return}if(J!==pe){var Ie=this._order.indexOf(J);this._order.splice(Ie,1);var $e=pe?this._order.indexOf(pe):this._order.length;if(pe&&$e===-1){this.fire(new e.ErrorEvent(new Error('Layer with id "'+pe+'" does not exist on this map.')));return}this._order.splice($e,0,J),this._layerOrderChanged=!0}},W.prototype.removeLayer=function(J){this._checkLoaded();var pe=this._layers[J];if(!pe){this.fire(new e.ErrorEvent(new Error("The layer '"+J+"' does not exist in the map's style and cannot be removed.")));return}pe.setEventedParent(null);var Ee=this._order.indexOf(J);this._order.splice(Ee,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[J]=pe,delete this._layers[J],delete this._serializedLayers[J],delete this._updatedLayers[J],delete this._updatedPaintProps[J],pe.onRemove&&pe.onRemove(this.map)},W.prototype.getLayer=function(J){return this._layers[J]},W.prototype.hasLayer=function(J){return J in this._layers},W.prototype.setLayerZoomRange=function(J,pe,Ee){this._checkLoaded();var Ie=this.getLayer(J);if(!Ie){this.fire(new e.ErrorEvent(new Error("The layer '"+J+"' does not exist in the map's style and cannot have zoom extent.")));return}Ie.minzoom===pe&&Ie.maxzoom===Ee||(pe!=null&&(Ie.minzoom=pe),Ee!=null&&(Ie.maxzoom=Ee),this._updateLayer(Ie))},W.prototype.setFilter=function(J,pe,Ee){Ee===void 0&&(Ee={}),this._checkLoaded();var Ie=this.getLayer(J);if(!Ie){this.fire(new e.ErrorEvent(new Error("The layer '"+J+"' does not exist in the map's style and cannot be filtered.")));return}if(!e.deepEqual(Ie.filter,pe)){if(pe==null){Ie.filter=void 0,this._updateLayer(Ie);return}this._validate(e.validateStyle.filter,"layers."+Ie.id+".filter",pe,null,Ee)||(Ie.filter=e.clone$1(pe),this._updateLayer(Ie))}},W.prototype.getFilter=function(J){return e.clone$1(this.getLayer(J).filter)},W.prototype.setLayoutProperty=function(J,pe,Ee,Ie){Ie===void 0&&(Ie={}),this._checkLoaded();var $e=this.getLayer(J);if(!$e){this.fire(new e.ErrorEvent(new Error("The layer '"+J+"' does not exist in the map's style and cannot be styled.")));return}e.deepEqual($e.getLayoutProperty(pe),Ee)||($e.setLayoutProperty(pe,Ee,Ie),this._updateLayer($e))},W.prototype.getLayoutProperty=function(J,pe){var Ee=this.getLayer(J);if(!Ee){this.fire(new e.ErrorEvent(new Error("The layer '"+J+"' does not exist in the map's style.")));return}return Ee.getLayoutProperty(pe)},W.prototype.setPaintProperty=function(J,pe,Ee,Ie){Ie===void 0&&(Ie={}),this._checkLoaded();var $e=this.getLayer(J);if(!$e){this.fire(new e.ErrorEvent(new Error("The layer '"+J+"' does not exist in the map's style and cannot be styled.")));return}if(!e.deepEqual($e.getPaintProperty(pe),Ee)){var dt=$e.setPaintProperty(pe,Ee,Ie);dt&&this._updateLayer($e),this._changed=!0,this._updatedPaintProps[J]=!0}},W.prototype.getPaintProperty=function(J,pe){return this.getLayer(J).getPaintProperty(pe)},W.prototype.setFeatureState=function(J,pe){this._checkLoaded();var Ee=J.source,Ie=J.sourceLayer,$e=this.sourceCaches[Ee];if($e===void 0){this.fire(new e.ErrorEvent(new Error("The source '"+Ee+"' does not exist in the map's style.")));return}var dt=$e.getSource().type;if(dt==="geojson"&&Ie){this.fire(new e.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));return}if(dt==="vector"&&!Ie){this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));return}J.id===void 0&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),$e.setFeatureState(Ie,J.id,pe)},W.prototype.removeFeatureState=function(J,pe){this._checkLoaded();var Ee=J.source,Ie=this.sourceCaches[Ee];if(Ie===void 0){this.fire(new e.ErrorEvent(new Error("The source '"+Ee+"' does not exist in the map's style.")));return}var $e=Ie.getSource().type,dt=$e==="vector"?J.sourceLayer:void 0;if($e==="vector"&&!dt){this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));return}if(pe&&typeof J.id!="string"&&typeof J.id!="number"){this.fire(new e.ErrorEvent(new Error("A feature id is requred to remove its specific state property.")));return}Ie.removeFeatureState(dt,J.id,pe)},W.prototype.getFeatureState=function(J){this._checkLoaded();var pe=J.source,Ee=J.sourceLayer,Ie=this.sourceCaches[pe];if(Ie===void 0){this.fire(new e.ErrorEvent(new Error("The source '"+pe+"' does not exist in the map's style.")));return}var $e=Ie.getSource().type;if($e==="vector"&&!Ee){this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));return}return J.id===void 0&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),Ie.getFeatureState(Ee,J.id)},W.prototype.getTransition=function(){return e.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},W.prototype.serialize=function(){return e.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:e.mapObject(this.sourceCaches,function(J){return J.serialize()}),layers:this._serializeLayers(this._order)},function(J){return J!==void 0})},W.prototype._updateLayer=function(J){this._updatedLayers[J.id]=!0,J.source&&!this._updatedSources[J.source]&&this.sourceCaches[J.source].getSource().type!=="raster"&&(this._updatedSources[J.source]="reload",this.sourceCaches[J.source].pause()),this._changed=!0},W.prototype._flattenAndSortRenderedFeatures=function(J){for(var pe=this,Ee=function(Za){return pe._layers[Za].type==="fill-extrusion"},Ie={},$e=[],dt=this._order.length-1;dt>=0;dt--){var Ft=this._order[dt];if(Ee(Ft)){Ie[Ft]=dt;for(var nr=0,dr=J;nr<dr.length;nr+=1){var xr=dr[nr],Fr=xr[Ft];if(Fr)for(var Zr=0,Qr=Fr;Zr<Qr.length;Zr+=1){var jr=Qr[Zr];$e.push(jr)}}}}$e.sort(function(Za,ci){return ci.intersectionZ-Za.intersectionZ});for(var rn=[],mn=this._order.length-1;mn>=0;mn--){var Fn=this._order[mn];if(Ee(Fn))for(var Hn=$e.length-1;Hn>=0;Hn--){var ta=$e[Hn].feature;if(Ie[ta.layer.id]<mn)break;rn.push(ta),$e.pop()}else for(var ia=0,na=J;ia<na.length;ia+=1){var ya=na[ia],Sa=ya[Fn];if(Sa)for(var Ta=0,ka=Sa;Ta<ka.length;Ta+=1){var Fa=ka[Ta];rn.push(Fa.feature)}}}return rn},W.prototype.queryRenderedFeatures=function(J,pe,Ee){pe&&pe.filter&&this._validate(e.validateStyle.filter,"queryRenderedFeatures.filter",pe.filter,null,pe);var Ie={};if(pe&&pe.layers){if(!Array.isArray(pe.layers))return this.fire(new e.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var $e=0,dt=pe.layers;$e<dt.length;$e+=1){var Ft=dt[$e],nr=this._layers[Ft];if(!nr)return this.fire(new e.ErrorEvent(new Error("The layer '"+Ft+"' does not exist in the map's style and cannot be queried for features."))),[];Ie[nr.source]=!0}}var dr=[];pe.availableImages=this._availableImages;for(var xr in this.sourceCaches)pe.layers&&!Ie[xr]||dr.push(ie(this.sourceCaches[xr],this._layers,this._serializedLayers,J,pe,Ee));return this.placement&&dr.push(se(this._layers,this._serializedLayers,this.sourceCaches,J,pe,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(dr)},W.prototype.querySourceFeatures=function(J,pe){pe&&pe.filter&&this._validate(e.validateStyle.filter,"querySourceFeatures.filter",pe.filter,null,pe);var Ee=this.sourceCaches[J];return Ee?ae(Ee,pe):[]},W.prototype.addSourceType=function(J,pe,Ee){if(W.getSourceType(J))return Ee(new Error('A source type called "'+J+'" already exists.'));if(W.setSourceType(J,pe),!pe.workerSourceURL)return Ee(null,null);this.dispatcher.broadcast("loadWorkerSource",{name:J,url:pe.workerSourceURL},Ee)},W.prototype.getLight=function(){return this.light.getLight()},W.prototype.setLight=function(J,pe){pe===void 0&&(pe={}),this._checkLoaded();var Ee=this.light.getLight(),Ie=!1;for(var $e in J)if(!e.deepEqual(J[$e],Ee[$e])){Ie=!0;break}if(!!Ie){var dt={now:e.browser.now(),transition:e.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(J,pe),this.light.updateTransitions(dt)}},W.prototype._validate=function(J,pe,Ee,Ie,$e){return $e===void 0&&($e={}),$e&&$e.validate===!1?!1:va(this,J.call(e.validateStyle,e.extend({key:pe,style:this.serialize(),value:Ee,styleSpec:e.styleSpec},Ie)))},W.prototype._remove=function(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),e.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(var J in this._layers){var pe=this._layers[J];pe.setEventedParent(null)}for(var Ee in this.sourceCaches)this.sourceCaches[Ee].clearTiles(),this.sourceCaches[Ee].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},W.prototype._clearSource=function(J){this.sourceCaches[J].clearTiles()},W.prototype._reloadSource=function(J){this.sourceCaches[J].resume(),this.sourceCaches[J].reload()},W.prototype._updateSources=function(J){for(var pe in this.sourceCaches)this.sourceCaches[pe].update(J)},W.prototype._generateCollisionBoxes=function(){for(var J in this.sourceCaches)this._reloadSource(J)},W.prototype._updatePlacement=function(J,pe,Ee,Ie,$e){$e===void 0&&($e=!1);for(var dt=!1,Ft=!1,nr={},dr=0,xr=this._order;dr<xr.length;dr+=1){var Fr=xr[dr],Zr=this._layers[Fr];if(Zr.type==="symbol"){if(!nr[Zr.source]){var Qr=this.sourceCaches[Zr.source];nr[Zr.source]=Qr.getRenderableIds(!0).map(function(ia){return Qr.getTileByID(ia)}).sort(function(ia,na){return na.tileID.overscaledZ-ia.tileID.overscaledZ||(ia.tileID.isLessThan(na.tileID)?-1:1)})}var jr=this.crossTileSymbolIndex.addLayer(Zr,nr[Zr.source],J.center.lng);dt=dt||jr}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),$e=$e||this._layerOrderChanged||Ee===0,($e||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(e.browser.now(),J.zoom))&&(this.pauseablePlacement=new sa(J,this._order,$e,pe,Ee,Ie,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,nr),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(e.browser.now()),Ft=!0),dt&&this.pauseablePlacement.placement.setStale()),Ft||dt)for(var rn=0,mn=this._order;rn<mn.length;rn+=1){var Fn=mn[rn],Hn=this._layers[Fn];Hn.type==="symbol"&&this.placement.updateLayerOpacities(Hn,nr[Hn.source])}var ta=!this.pauseablePlacement.isDone()||this.placement.hasTransitions(e.browser.now());return ta},W.prototype._releaseSymbolFadeTiles=function(){for(var J in this.sourceCaches)this.sourceCaches[J].releaseSymbolFadeTiles()},W.prototype.getImages=function(J,pe,Ee){this.imageManager.getImages(pe.icons,Ee),this._updateTilesForChangedImages();var Ie=this.sourceCaches[pe.source];Ie&&Ie.setDependencies(pe.tileID.key,pe.type,pe.icons)},W.prototype.getGlyphs=function(J,pe,Ee){this.glyphManager.getGlyphs(pe.stacks,Ee)},W.prototype.getResource=function(J,pe,Ee){return e.makeRequest(pe,Ee)},W}(e.Evented);vs.getSourceType=ee,vs.setSourceType=ne,vs.registerForPluginStateChange=e.registerForPluginStateChange;var Cl=e.createLayout([{name:"a_pos",type:"Int16",components:2}]),Ul=`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,_u=`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`,_i=`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,hl="attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}",el=`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,qi="uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}",No=`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Vl=`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`,Is="void main() {gl_FragColor=vec4(1.0);}",Gi="attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}",kl=`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,lo=`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`,Zi=`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,yo="uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}",uo="varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}",_s="attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}",vl="varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}",Bu="attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}",ps="uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}",Uu="attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}",tl=`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Bo=`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`,uf=`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,rl=`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`,Hs=`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,ou=`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`,ff=`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,cf=`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`,pl=`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,su=`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`,Gs=`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Tu=`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`,Ll=`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Au="uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}",Vu=`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,lu="uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}",hf=`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,dl=`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`,Mu=`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,uu=`
#define MAX_LINE_DISTANCE 32767.0
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`,Fs=`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Hl=`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`,Su=`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Hu=`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`,Gu=`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,fu="uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}",vf=`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Yu=`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`,ds=`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Pl=`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`,Dl=`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Eu=`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`,zs=Yi(Ul,_u),Uo=Yi(_i,hl),cu=Yi(el,qi),Ys=Yi(No,Vl),Ws=Yi(Is,Gi),bo=Yi(kl,lo),Gl=Yi(Zi,yo),Yl=Yi(uo,_s),yl=Yi(vl,Bu),Os=Yi(ps,Uu),Wl=Yi(tl,Bo),Rl=Yi(uf,rl),hu=Yi(Hs,ou),jl=Yi(ff,cf),ml=Yi(pl,su),pf=Yi(Gs,Tu),Ts=Yi(Ll,Au),Lf=Yi(Vu,lu),Cu=Yi(hf,dl),Il=Yi(Mu,uu),Xl=Yi(Fs,Hl),xl=Yi(Su,Hu),Zl=Yi(Gu,fu),Wu=Yi(vf,Yu),ju=Yi(ds,Pl),Pf=Yi(Dl,Eu);function Yi(fe,W){var ve=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,J={};return fe=fe.replace(ve,function(pe,Ee,Ie,$e,dt){return J[dt]=!0,Ee==="define"?`
#ifndef HAS_UNIFORM_u_`+dt+`
varying `+Ie+" "+$e+" "+dt+`;
#else
uniform `+Ie+" "+$e+" u_"+dt+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+dt+`
    `+Ie+" "+$e+" "+dt+" = u_"+dt+`;
#endif
`}),W=W.replace(ve,function(pe,Ee,Ie,$e,dt){var Ft=$e==="float"?"vec2":"vec4",nr=dt.match(/color/)?"color":Ft;return J[dt]?Ee==="define"?`
#ifndef HAS_UNIFORM_u_`+dt+`
uniform lowp float u_`+dt+`_t;
attribute `+Ie+" "+Ft+" a_"+dt+`;
varying `+Ie+" "+$e+" "+dt+`;
#else
uniform `+Ie+" "+$e+" u_"+dt+`;
#endif
`:nr==="vec4"?`
#ifndef HAS_UNIFORM_u_`+dt+`
    `+dt+" = a_"+dt+`;
#else
    `+Ie+" "+$e+" "+dt+" = u_"+dt+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+dt+`
    `+dt+" = unpack_mix_"+nr+"(a_"+dt+", u_"+dt+`_t);
#else
    `+Ie+" "+$e+" "+dt+" = u_"+dt+`;
#endif
`:Ee==="define"?`
#ifndef HAS_UNIFORM_u_`+dt+`
uniform lowp float u_`+dt+`_t;
attribute `+Ie+" "+Ft+" a_"+dt+`;
#else
uniform `+Ie+" "+$e+" u_"+dt+`;
#endif
`:nr==="vec4"?`
#ifndef HAS_UNIFORM_u_`+dt+`
    `+Ie+" "+$e+" "+dt+" = a_"+dt+`;
#else
    `+Ie+" "+$e+" "+dt+" = u_"+dt+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+dt+`
    `+Ie+" "+$e+" "+dt+" = unpack_mix_"+nr+"(a_"+dt+", u_"+dt+`_t);
#else
    `+Ie+" "+$e+" "+dt+" = u_"+dt+`;
#endif
`}),{fragmentSource:fe,vertexSource:W}}var Fl=Object.freeze({__proto__:null,prelude:zs,background:Uo,backgroundPattern:cu,circle:Ys,clippingMask:Ws,heatmap:bo,heatmapTexture:Gl,collisionBox:Yl,collisionCircle:yl,debug:Os,fill:Wl,fillOutline:Rl,fillOutlinePattern:hu,fillPattern:jl,fillExtrusion:ml,fillExtrusionPattern:pf,hillshadePrepare:Ts,hillshade:Lf,line:Cu,lineGradient:Il,linePattern:Xl,lineSDF:xl,raster:Zl,symbolIcon:Wu,symbolSDF:ju,symbolTextAndIcon:Pf}),bl=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};bl.prototype.bind=function(W,ve,J,pe,Ee,Ie,$e,dt){this.context=W;for(var Ft=this.boundPaintVertexBuffers.length!==pe.length,nr=0;!Ft&&nr<pe.length;nr++)this.boundPaintVertexBuffers[nr]!==pe[nr]&&(Ft=!0);var dr=!this.vao||this.boundProgram!==ve||this.boundLayoutVertexBuffer!==J||Ft||this.boundIndexBuffer!==Ee||this.boundVertexOffset!==Ie||this.boundDynamicVertexBuffer!==$e||this.boundDynamicVertexBuffer2!==dt;!W.extVertexArrayObject||dr?this.freshBind(ve,J,pe,Ee,Ie,$e,dt):(W.bindVertexArrayOES.set(this.vao),$e&&$e.bind(),Ee&&Ee.dynamicDraw&&Ee.bind(),dt&&dt.bind())},bl.prototype.freshBind=function(W,ve,J,pe,Ee,Ie,$e){var dt,Ft=W.numAttributes,nr=this.context,dr=nr.gl;if(nr.extVertexArrayObject)this.vao&&this.destroy(),this.vao=nr.extVertexArrayObject.createVertexArrayOES(),nr.bindVertexArrayOES.set(this.vao),dt=0,this.boundProgram=W,this.boundLayoutVertexBuffer=ve,this.boundPaintVertexBuffers=J,this.boundIndexBuffer=pe,this.boundVertexOffset=Ee,this.boundDynamicVertexBuffer=Ie,this.boundDynamicVertexBuffer2=$e;else{dt=nr.currentNumAttributes||0;for(var xr=Ft;xr<dt;xr++)dr.disableVertexAttribArray(xr)}ve.enableAttributes(dr,W);for(var Fr=0,Zr=J;Fr<Zr.length;Fr+=1){var Qr=Zr[Fr];Qr.enableAttributes(dr,W)}Ie&&Ie.enableAttributes(dr,W),$e&&$e.enableAttributes(dr,W),ve.bind(),ve.setVertexAttribPointers(dr,W,Ee);for(var jr=0,rn=J;jr<rn.length;jr+=1){var mn=rn[jr];mn.bind(),mn.setVertexAttribPointers(dr,W,Ee)}Ie&&(Ie.bind(),Ie.setVertexAttribPointers(dr,W,Ee)),pe&&pe.bind(),$e&&($e.bind(),$e.setVertexAttribPointers(dr,W,Ee)),nr.currentNumAttributes=Ft},bl.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var gs=function(W,ve,J,pe,Ee){var Ie=W.gl;this.program=Ie.createProgram();var $e=J?J.defines():[];Ee&&$e.push("#define OVERDRAW_INSPECTOR;");var dt=$e.concat(zs.fragmentSource,ve.fragmentSource).join(`
`),Ft=$e.concat(zs.vertexSource,ve.vertexSource).join(`
`),nr=Ie.createShader(Ie.FRAGMENT_SHADER);if(Ie.isContextLost()){this.failedToCreate=!0;return}Ie.shaderSource(nr,dt),Ie.compileShader(nr),Ie.attachShader(this.program,nr);var dr=Ie.createShader(Ie.VERTEX_SHADER);if(Ie.isContextLost()){this.failedToCreate=!0;return}Ie.shaderSource(dr,Ft),Ie.compileShader(dr),Ie.attachShader(this.program,dr);for(var xr=J?J.layoutAttributes:[],Fr=0;Fr<xr.length;Fr++)Ie.bindAttribLocation(this.program,Fr,xr[Fr].name);Ie.linkProgram(this.program),Ie.deleteShader(dr),Ie.deleteShader(nr),this.numAttributes=Ie.getProgramParameter(this.program,Ie.ACTIVE_ATTRIBUTES),this.attributes={};for(var Zr={},Qr=0;Qr<this.numAttributes;Qr++){var jr=Ie.getActiveAttrib(this.program,Qr);jr&&(this.attributes[jr.name]=Ie.getAttribLocation(this.program,jr.name))}for(var rn=Ie.getProgramParameter(this.program,Ie.ACTIVE_UNIFORMS),mn=0;mn<rn;mn++){var Fn=Ie.getActiveUniform(this.program,mn);Fn&&(Zr[Fn.name]=Ie.getUniformLocation(this.program,Fn.name))}this.fixedUniforms=pe(W,Zr),this.binderUniforms=J?J.getUniforms(W,Zr):[]};gs.prototype.draw=function(W,ve,J,pe,Ee,Ie,$e,dt,Ft,nr,dr,xr,Fr,Zr,Qr,jr){var rn,mn=W.gl;if(!this.failedToCreate){W.program.set(this.program),W.setDepthMode(J),W.setStencilMode(pe),W.setColorMode(Ee),W.setCullFace(Ie);for(var Fn in this.fixedUniforms)this.fixedUniforms[Fn].set($e[Fn]);Zr&&Zr.setUniforms(W,this.binderUniforms,xr,{zoom:Fr});for(var Hn=(rn={},rn[mn.LINES]=2,rn[mn.TRIANGLES]=3,rn[mn.LINE_STRIP]=1,rn)[ve],ta=0,ia=dr.get();ta<ia.length;ta+=1){var na=ia[ta],ya=na.vaos||(na.vaos={}),Sa=ya[dt]||(ya[dt]=new bl);Sa.bind(W,this,Ft,Zr?Zr.getPaintVertexBuffers():[],nr,na.vertexOffset,Qr,jr),mn.drawElements(ve,na.primitiveLength*Hn,mn.UNSIGNED_SHORT,na.primitiveOffset*Hn*2)}}};function As(fe,W,ve){var J=1/Ln(ve,1,W.transform.tileZoom),pe=Math.pow(2,ve.tileID.overscaledZ),Ee=ve.tileSize*Math.pow(2,W.transform.tileZoom)/pe,Ie=Ee*(ve.tileID.canonical.x+ve.tileID.wrap*pe),$e=Ee*ve.tileID.canonical.y;return{u_image:0,u_texsize:ve.imageAtlasTexture.size,u_scale:[J,fe.fromScale,fe.toScale],u_fade:fe.t,u_pixel_coord_upper:[Ie>>16,$e>>16],u_pixel_coord_lower:[Ie&65535,$e&65535]}}function Kl(fe,W,ve,J){var pe=ve.imageManager.getPattern(fe.from.toString()),Ee=ve.imageManager.getPattern(fe.to.toString()),Ie=ve.imageManager.getPixelSize(),$e=Ie.width,dt=Ie.height,Ft=Math.pow(2,J.tileID.overscaledZ),nr=J.tileSize*Math.pow(2,ve.transform.tileZoom)/Ft,dr=nr*(J.tileID.canonical.x+J.tileID.wrap*Ft),xr=nr*J.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:pe.tl,u_pattern_br_a:pe.br,u_pattern_tl_b:Ee.tl,u_pattern_br_b:Ee.br,u_texsize:[$e,dt],u_mix:W.t,u_pattern_size_a:pe.displaySize,u_pattern_size_b:Ee.displaySize,u_scale_a:W.fromScale,u_scale_b:W.toScale,u_tile_units_to_pixels:1/Ln(J,1,ve.transform.tileZoom),u_pixel_coord_upper:[dr>>16,xr>>16],u_pixel_coord_lower:[dr&65535,xr&65535]}}var wo=function(fe,W){return{u_matrix:new e.UniformMatrix4f(fe,W.u_matrix),u_lightpos:new e.Uniform3f(fe,W.u_lightpos),u_lightintensity:new e.Uniform1f(fe,W.u_lightintensity),u_lightcolor:new e.Uniform3f(fe,W.u_lightcolor),u_vertical_gradient:new e.Uniform1f(fe,W.u_vertical_gradient),u_opacity:new e.Uniform1f(fe,W.u_opacity)}},Xu=function(fe,W){return{u_matrix:new e.UniformMatrix4f(fe,W.u_matrix),u_lightpos:new e.Uniform3f(fe,W.u_lightpos),u_lightintensity:new e.Uniform1f(fe,W.u_lightintensity),u_lightcolor:new e.Uniform3f(fe,W.u_lightcolor),u_vertical_gradient:new e.Uniform1f(fe,W.u_vertical_gradient),u_height_factor:new e.Uniform1f(fe,W.u_height_factor),u_image:new e.Uniform1i(fe,W.u_image),u_texsize:new e.Uniform2f(fe,W.u_texsize),u_pixel_coord_upper:new e.Uniform2f(fe,W.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(fe,W.u_pixel_coord_lower),u_scale:new e.Uniform3f(fe,W.u_scale),u_fade:new e.Uniform1f(fe,W.u_fade),u_opacity:new e.Uniform1f(fe,W.u_opacity)}},Ms=function(fe,W,ve,J){var pe=W.style.light,Ee=pe.properties.get("position"),Ie=[Ee.x,Ee.y,Ee.z],$e=e.create$1();pe.properties.get("anchor")==="viewport"&&e.fromRotation($e,-W.transform.angle),e.transformMat3(Ie,Ie,$e);var dt=pe.properties.get("color");return{u_matrix:fe,u_lightpos:Ie,u_lightintensity:pe.properties.get("intensity"),u_lightcolor:[dt.r,dt.g,dt.b],u_vertical_gradient:+ve,u_opacity:J}},nl=function(fe,W,ve,J,pe,Ee,Ie){return e.extend(Ms(fe,W,ve,J),As(Ee,W,Ie),{u_height_factor:-Math.pow(2,pe.overscaledZ)/Ie.tileSize/8})},al=function(fe,W){return{u_matrix:new e.UniformMatrix4f(fe,W.u_matrix)}},js=function(fe,W){return{u_matrix:new e.UniformMatrix4f(fe,W.u_matrix),u_image:new e.Uniform1i(fe,W.u_image),u_texsize:new e.Uniform2f(fe,W.u_texsize),u_pixel_coord_upper:new e.Uniform2f(fe,W.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(fe,W.u_pixel_coord_lower),u_scale:new e.Uniform3f(fe,W.u_scale),u_fade:new e.Uniform1f(fe,W.u_fade)}},Ss=function(fe,W){return{u_matrix:new e.UniformMatrix4f(fe,W.u_matrix),u_world:new e.Uniform2f(fe,W.u_world)}},eo=function(fe,W){return{u_matrix:new e.UniformMatrix4f(fe,W.u_matrix),u_world:new e.Uniform2f(fe,W.u_world),u_image:new e.Uniform1i(fe,W.u_image),u_texsize:new e.Uniform2f(fe,W.u_texsize),u_pixel_coord_upper:new e.Uniform2f(fe,W.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(fe,W.u_pixel_coord_lower),u_scale:new e.Uniform3f(fe,W.u_scale),u_fade:new e.Uniform1f(fe,W.u_fade)}},Vo=function(fe){return{u_matrix:fe}},Es=function(fe,W,ve,J){return e.extend(Vo(fe),As(ve,W,J))},Zu=function(fe,W){return{u_matrix:fe,u_world:W}},vu=function(fe,W,ve,J,pe){return e.extend(Es(fe,W,ve,J),{u_world:pe})},Ku=function(fe,W){return{u_camera_to_center_distance:new e.Uniform1f(fe,W.u_camera_to_center_distance),u_scale_with_map:new e.Uniform1i(fe,W.u_scale_with_map),u_pitch_with_map:new e.Uniform1i(fe,W.u_pitch_with_map),u_extrude_scale:new e.Uniform2f(fe,W.u_extrude_scale),u_device_pixel_ratio:new e.Uniform1f(fe,W.u_device_pixel_ratio),u_matrix:new e.UniformMatrix4f(fe,W.u_matrix)}},Tt=function(fe,W,ve,J){var pe=fe.transform,Ee,Ie;if(J.paint.get("circle-pitch-alignment")==="map"){var $e=Ln(ve,1,pe.zoom);Ee=!0,Ie=[$e,$e]}else Ee=!1,Ie=pe.pixelsToGLUnits;return{u_camera_to_center_distance:pe.cameraToCenterDistance,u_scale_with_map:+(J.paint.get("circle-pitch-scale")==="map"),u_matrix:fe.translatePosMatrix(W.posMatrix,ve,J.paint.get("circle-translate"),J.paint.get("circle-translate-anchor")),u_pitch_with_map:+Ee,u_device_pixel_ratio:e.browser.devicePixelRatio,u_extrude_scale:Ie}},Yt=function(fe,W){return{u_matrix:new e.UniformMatrix4f(fe,W.u_matrix),u_camera_to_center_distance:new e.Uniform1f(fe,W.u_camera_to_center_distance),u_pixels_to_tile_units:new e.Uniform1f(fe,W.u_pixels_to_tile_units),u_extrude_scale:new e.Uniform2f(fe,W.u_extrude_scale),u_overscale_factor:new e.Uniform1f(fe,W.u_overscale_factor)}},yr=function(fe,W){return{u_matrix:new e.UniformMatrix4f(fe,W.u_matrix),u_inv_matrix:new e.UniformMatrix4f(fe,W.u_inv_matrix),u_camera_to_center_distance:new e.Uniform1f(fe,W.u_camera_to_center_distance),u_viewport_size:new e.Uniform2f(fe,W.u_viewport_size)}},vr=function(fe,W,ve){var J=Ln(ve,1,W.zoom),pe=Math.pow(2,W.zoom-ve.tileID.overscaledZ),Ee=ve.tileID.overscaleFactor();return{u_matrix:fe,u_camera_to_center_distance:W.cameraToCenterDistance,u_pixels_to_tile_units:J,u_extrude_scale:[W.pixelsToGLUnits[0]/(J*pe),W.pixelsToGLUnits[1]/(J*pe)],u_overscale_factor:Ee}},Nr=function(fe,W,ve){return{u_matrix:fe,u_inv_matrix:W,u_camera_to_center_distance:ve.cameraToCenterDistance,u_viewport_size:[ve.width,ve.height]}},ln=function(fe,W){return{u_color:new e.UniformColor(fe,W.u_color),u_matrix:new e.UniformMatrix4f(fe,W.u_matrix),u_overlay:new e.Uniform1i(fe,W.u_overlay),u_overlay_scale:new e.Uniform1f(fe,W.u_overlay_scale)}},wn=function(fe,W,ve){return ve===void 0&&(ve=1),{u_matrix:fe,u_color:W,u_overlay:0,u_overlay_scale:ve}},Pn=function(fe,W){return{u_matrix:new e.UniformMatrix4f(fe,W.u_matrix)}},zn=function(fe){return{u_matrix:fe}},Wn=function(fe,W){return{u_extrude_scale:new e.Uniform1f(fe,W.u_extrude_scale),u_intensity:new e.Uniform1f(fe,W.u_intensity),u_matrix:new e.UniformMatrix4f(fe,W.u_matrix)}},Tn=function(fe,W){return{u_matrix:new e.UniformMatrix4f(fe,W.u_matrix),u_world:new e.Uniform2f(fe,W.u_world),u_image:new e.Uniform1i(fe,W.u_image),u_color_ramp:new e.Uniform1i(fe,W.u_color_ramp),u_opacity:new e.Uniform1f(fe,W.u_opacity)}},Vn=function(fe,W,ve,J){return{u_matrix:fe,u_extrude_scale:Ln(W,1,ve),u_intensity:J}},On=function(fe,W,ve,J){var pe=e.create();e.ortho(pe,0,fe.width,fe.height,0,0,1);var Ee=fe.context.gl;return{u_matrix:pe,u_world:[Ee.drawingBufferWidth,Ee.drawingBufferHeight],u_image:ve,u_color_ramp:J,u_opacity:W.paint.get("heatmap-opacity")}},Xn=function(fe,W){return{u_matrix:new e.UniformMatrix4f(fe,W.u_matrix),u_image:new e.Uniform1i(fe,W.u_image),u_latrange:new e.Uniform2f(fe,W.u_latrange),u_light:new e.Uniform2f(fe,W.u_light),u_shadow:new e.UniformColor(fe,W.u_shadow),u_highlight:new e.UniformColor(fe,W.u_highlight),u_accent:new e.UniformColor(fe,W.u_accent)}},aa=function(fe,W){return{u_matrix:new e.UniformMatrix4f(fe,W.u_matrix),u_image:new e.Uniform1i(fe,W.u_image),u_dimension:new e.Uniform2f(fe,W.u_dimension),u_zoom:new e.Uniform1f(fe,W.u_zoom),u_maxzoom:new e.Uniform1f(fe,W.u_maxzoom),u_unpack:new e.Uniform4f(fe,W.u_unpack)}},Ha=function(fe,W,ve){var J=ve.paint.get("hillshade-shadow-color"),pe=ve.paint.get("hillshade-highlight-color"),Ee=ve.paint.get("hillshade-accent-color"),Ie=ve.paint.get("hillshade-illumination-direction")*(Math.PI/180);ve.paint.get("hillshade-illumination-anchor")==="viewport"&&(Ie-=fe.transform.angle);var $e=!fe.options.moving;return{u_matrix:fe.transform.calculatePosMatrix(W.tileID.toUnwrapped(),$e),u_image:0,u_latrange:Ga(fe,W.tileID),u_light:[ve.paint.get("hillshade-exaggeration"),Ie],u_shadow:J,u_highlight:pe,u_accent:Ee}},Ia=function(fe,W,ve){var J=W.stride,pe=e.create();return e.ortho(pe,0,e.EXTENT,-e.EXTENT,0,0,1),e.translate(pe,pe,[0,-e.EXTENT,0]),{u_matrix:pe,u_image:1,u_dimension:[J,J],u_zoom:fe.overscaledZ,u_maxzoom:ve,u_unpack:W.getUnpackVector()}};function Ga(fe,W){var ve=Math.pow(2,W.canonical.z),J=W.canonical.y;return[new e.MercatorCoordinate(0,J/ve).toLngLat().lat,new e.MercatorCoordinate(0,(J+1)/ve).toLngLat().lat]}var Ya=function(fe,W){return{u_matrix:new e.UniformMatrix4f(fe,W.u_matrix),u_ratio:new e.Uniform1f(fe,W.u_ratio),u_device_pixel_ratio:new e.Uniform1f(fe,W.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(fe,W.u_units_to_pixels)}},ra=function(fe,W){return{u_matrix:new e.UniformMatrix4f(fe,W.u_matrix),u_ratio:new e.Uniform1f(fe,W.u_ratio),u_device_pixel_ratio:new e.Uniform1f(fe,W.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(fe,W.u_units_to_pixels),u_image:new e.Uniform1i(fe,W.u_image)}},ma=function(fe,W){return{u_matrix:new e.UniformMatrix4f(fe,W.u_matrix),u_texsize:new e.Uniform2f(fe,W.u_texsize),u_ratio:new e.Uniform1f(fe,W.u_ratio),u_device_pixel_ratio:new e.Uniform1f(fe,W.u_device_pixel_ratio),u_image:new e.Uniform1i(fe,W.u_image),u_units_to_pixels:new e.Uniform2f(fe,W.u_units_to_pixels),u_scale:new e.Uniform3f(fe,W.u_scale),u_fade:new e.Uniform1f(fe,W.u_fade)}},Ja=function(fe,W){return{u_matrix:new e.UniformMatrix4f(fe,W.u_matrix),u_ratio:new e.Uniform1f(fe,W.u_ratio),u_device_pixel_ratio:new e.Uniform1f(fe,W.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(fe,W.u_units_to_pixels),u_patternscale_a:new e.Uniform2f(fe,W.u_patternscale_a),u_patternscale_b:new e.Uniform2f(fe,W.u_patternscale_b),u_sdfgamma:new e.Uniform1f(fe,W.u_sdfgamma),u_image:new e.Uniform1i(fe,W.u_image),u_tex_y_a:new e.Uniform1f(fe,W.u_tex_y_a),u_tex_y_b:new e.Uniform1f(fe,W.u_tex_y_b),u_mix:new e.Uniform1f(fe,W.u_mix)}},ai=function(fe,W,ve){var J=fe.transform;return{u_matrix:pi(fe,W,ve),u_ratio:1/Ln(W,1,J.zoom),u_device_pixel_ratio:e.browser.devicePixelRatio,u_units_to_pixels:[1/J.pixelsToGLUnits[0],1/J.pixelsToGLUnits[1]]}},Mi=function(fe,W,ve){return e.extend(ai(fe,W,ve),{u_image:0})},Si=function(fe,W,ve,J){var pe=fe.transform,Ee=Fi(W,pe);return{u_matrix:pi(fe,W,ve),u_texsize:W.imageAtlasTexture.size,u_ratio:1/Ln(W,1,pe.zoom),u_device_pixel_ratio:e.browser.devicePixelRatio,u_image:0,u_scale:[Ee,J.fromScale,J.toScale],u_fade:J.t,u_units_to_pixels:[1/pe.pixelsToGLUnits[0],1/pe.pixelsToGLUnits[1]]}},Ci=function(fe,W,ve,J,pe){var Ee=fe.transform,Ie=fe.lineAtlas,$e=Fi(W,Ee),dt=ve.layout.get("line-cap")==="round",Ft=Ie.getDash(J.from,dt),nr=Ie.getDash(J.to,dt),dr=Ft.width*pe.fromScale,xr=nr.width*pe.toScale;return e.extend(ai(fe,W,ve),{u_patternscale_a:[$e/dr,-Ft.height/2],u_patternscale_b:[$e/xr,-nr.height/2],u_sdfgamma:Ie.width/(Math.min(dr,xr)*256*e.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:Ft.y,u_tex_y_b:nr.y,u_mix:pe.t})};function Fi(fe,W){return 1/Ln(fe,1,W.tileZoom)}function pi(fe,W,ve){return fe.translatePosMatrix(W.tileID.posMatrix,W,ve.paint.get("line-translate"),ve.paint.get("line-translate-anchor"))}var Lo=function(fe,W){return{u_matrix:new e.UniformMatrix4f(fe,W.u_matrix),u_tl_parent:new e.Uniform2f(fe,W.u_tl_parent),u_scale_parent:new e.Uniform1f(fe,W.u_scale_parent),u_buffer_scale:new e.Uniform1f(fe,W.u_buffer_scale),u_fade_t:new e.Uniform1f(fe,W.u_fade_t),u_opacity:new e.Uniform1f(fe,W.u_opacity),u_image0:new e.Uniform1i(fe,W.u_image0),u_image1:new e.Uniform1i(fe,W.u_image1),u_brightness_low:new e.Uniform1f(fe,W.u_brightness_low),u_brightness_high:new e.Uniform1f(fe,W.u_brightness_high),u_saturation_factor:new e.Uniform1f(fe,W.u_saturation_factor),u_contrast_factor:new e.Uniform1f(fe,W.u_contrast_factor),u_spin_weights:new e.Uniform3f(fe,W.u_spin_weights)}},ho=function(fe,W,ve,J,pe){return{u_matrix:fe,u_tl_parent:W,u_scale_parent:ve,u_buffer_scale:1,u_fade_t:J.mix,u_opacity:J.opacity*pe.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:pe.paint.get("raster-brightness-min"),u_brightness_high:pe.paint.get("raster-brightness-max"),u_saturation_factor:ki(pe.paint.get("raster-saturation")),u_contrast_factor:xa(pe.paint.get("raster-contrast")),u_spin_weights:ni(pe.paint.get("raster-hue-rotate"))}};function ni(fe){fe*=Math.PI/180;var W=Math.sin(fe),ve=Math.cos(fe);return[(2*ve+1)/3,(-Math.sqrt(3)*W-ve+1)/3,(Math.sqrt(3)*W-ve+1)/3]}function xa(fe){return fe>0?1/(1-fe):1+fe}function ki(fe){return fe>0?1-1/(1.001-fe):-fe}var _o=function(fe,W){return{u_is_size_zoom_constant:new e.Uniform1i(fe,W.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(fe,W.u_is_size_feature_constant),u_size_t:new e.Uniform1f(fe,W.u_size_t),u_size:new e.Uniform1f(fe,W.u_size),u_camera_to_center_distance:new e.Uniform1f(fe,W.u_camera_to_center_distance),u_pitch:new e.Uniform1f(fe,W.u_pitch),u_rotate_symbol:new e.Uniform1i(fe,W.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(fe,W.u_aspect_ratio),u_fade_change:new e.Uniform1f(fe,W.u_fade_change),u_matrix:new e.UniformMatrix4f(fe,W.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(fe,W.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(fe,W.u_coord_matrix),u_is_text:new e.Uniform1i(fe,W.u_is_text),u_pitch_with_map:new e.Uniform1i(fe,W.u_pitch_with_map),u_texsize:new e.Uniform2f(fe,W.u_texsize),u_texture:new e.Uniform1i(fe,W.u_texture)}},Eo=function(fe,W){return{u_is_size_zoom_constant:new e.Uniform1i(fe,W.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(fe,W.u_is_size_feature_constant),u_size_t:new e.Uniform1f(fe,W.u_size_t),u_size:new e.Uniform1f(fe,W.u_size),u_camera_to_center_distance:new e.Uniform1f(fe,W.u_camera_to_center_distance),u_pitch:new e.Uniform1f(fe,W.u_pitch),u_rotate_symbol:new e.Uniform1i(fe,W.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(fe,W.u_aspect_ratio),u_fade_change:new e.Uniform1f(fe,W.u_fade_change),u_matrix:new e.UniformMatrix4f(fe,W.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(fe,W.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(fe,W.u_coord_matrix),u_is_text:new e.Uniform1i(fe,W.u_is_text),u_pitch_with_map:new e.Uniform1i(fe,W.u_pitch_with_map),u_texsize:new e.Uniform2f(fe,W.u_texsize),u_texture:new e.Uniform1i(fe,W.u_texture),u_gamma_scale:new e.Uniform1f(fe,W.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(fe,W.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(fe,W.u_is_halo)}},Cs=function(fe,W){return{u_is_size_zoom_constant:new e.Uniform1i(fe,W.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(fe,W.u_is_size_feature_constant),u_size_t:new e.Uniform1f(fe,W.u_size_t),u_size:new e.Uniform1f(fe,W.u_size),u_camera_to_center_distance:new e.Uniform1f(fe,W.u_camera_to_center_distance),u_pitch:new e.Uniform1f(fe,W.u_pitch),u_rotate_symbol:new e.Uniform1i(fe,W.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(fe,W.u_aspect_ratio),u_fade_change:new e.Uniform1f(fe,W.u_fade_change),u_matrix:new e.UniformMatrix4f(fe,W.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(fe,W.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(fe,W.u_coord_matrix),u_is_text:new e.Uniform1i(fe,W.u_is_text),u_pitch_with_map:new e.Uniform1i(fe,W.u_pitch_with_map),u_texsize:new e.Uniform2f(fe,W.u_texsize),u_texsize_icon:new e.Uniform2f(fe,W.u_texsize_icon),u_texture:new e.Uniform1i(fe,W.u_texture),u_texture_icon:new e.Uniform1i(fe,W.u_texture_icon),u_gamma_scale:new e.Uniform1f(fe,W.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(fe,W.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(fe,W.u_is_halo)}},Xs=function(fe,W,ve,J,pe,Ee,Ie,$e,dt,Ft){var nr=pe.transform;return{u_is_size_zoom_constant:+(fe==="constant"||fe==="source"),u_is_size_feature_constant:+(fe==="constant"||fe==="camera"),u_size_t:W?W.uSizeT:0,u_size:W?W.uSize:0,u_camera_to_center_distance:nr.cameraToCenterDistance,u_pitch:nr.pitch/360*2*Math.PI,u_rotate_symbol:+ve,u_aspect_ratio:nr.width/nr.height,u_fade_change:pe.options.fadeDuration?pe.symbolFadeChange:1,u_matrix:Ee,u_label_plane_matrix:Ie,u_coord_matrix:$e,u_is_text:+dt,u_pitch_with_map:+J,u_texsize:Ft,u_texture:0}},Qo=function(fe,W,ve,J,pe,Ee,Ie,$e,dt,Ft,nr){var dr=pe.transform;return e.extend(Xs(fe,W,ve,J,pe,Ee,Ie,$e,dt,Ft),{u_gamma_scale:J?Math.cos(dr._pitch)*dr.cameraToCenterDistance:1,u_device_pixel_ratio:e.browser.devicePixelRatio,u_is_halo:+nr})},wl=function(fe,W,ve,J,pe,Ee,Ie,$e,dt,Ft){return e.extend(Qo(fe,W,ve,J,pe,Ee,Ie,$e,!0,dt,!0),{u_texsize_icon:Ft,u_texture_icon:1})},Ns=function(fe,W){return{u_matrix:new e.UniformMatrix4f(fe,W.u_matrix),u_opacity:new e.Uniform1f(fe,W.u_opacity),u_color:new e.UniformColor(fe,W.u_color)}},ks=function(fe,W){return{u_matrix:new e.UniformMatrix4f(fe,W.u_matrix),u_opacity:new e.Uniform1f(fe,W.u_opacity),u_image:new e.Uniform1i(fe,W.u_image),u_pattern_tl_a:new e.Uniform2f(fe,W.u_pattern_tl_a),u_pattern_br_a:new e.Uniform2f(fe,W.u_pattern_br_a),u_pattern_tl_b:new e.Uniform2f(fe,W.u_pattern_tl_b),u_pattern_br_b:new e.Uniform2f(fe,W.u_pattern_br_b),u_texsize:new e.Uniform2f(fe,W.u_texsize),u_mix:new e.Uniform1f(fe,W.u_mix),u_pattern_size_a:new e.Uniform2f(fe,W.u_pattern_size_a),u_pattern_size_b:new e.Uniform2f(fe,W.u_pattern_size_b),u_scale_a:new e.Uniform1f(fe,W.u_scale_a),u_scale_b:new e.Uniform1f(fe,W.u_scale_b),u_pixel_coord_upper:new e.Uniform2f(fe,W.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(fe,W.u_pixel_coord_lower),u_tile_units_to_pixels:new e.Uniform1f(fe,W.u_tile_units_to_pixels)}},Po=function(fe,W,ve){return{u_matrix:fe,u_opacity:W,u_color:ve}},pu=function(fe,W,ve,J,pe,Ee){return e.extend(Kl(J,Ee,ve,pe),{u_matrix:fe,u_opacity:W})},ku={fillExtrusion:wo,fillExtrusionPattern:Xu,fill:al,fillPattern:js,fillOutline:Ss,fillOutlinePattern:eo,circle:Ku,collisionBox:Yt,collisionCircle:yr,debug:ln,clippingMask:Pn,heatmap:Wn,heatmapTexture:Tn,hillshade:Xn,hillshadePrepare:aa,line:Ya,lineGradient:ra,linePattern:ma,lineSDF:Ja,raster:Lo,symbolIcon:_o,symbolSDF:Eo,symbolTextAndIcon:Cs,background:Ns,backgroundPattern:ks},Ls;function Ju(fe,W,ve,J,pe,Ee,Ie){for(var $e=fe.context,dt=$e.gl,Ft=fe.useProgram("collisionBox"),nr=[],dr=0,xr=0,Fr=0;Fr<J.length;Fr++){var Zr=J[Fr],Qr=W.getTile(Zr),jr=Qr.getBucket(ve);if(!!jr){var rn=Zr.posMatrix;(pe[0]!==0||pe[1]!==0)&&(rn=fe.translatePosMatrix(Zr.posMatrix,Qr,pe,Ee));var mn=Ie?jr.textCollisionBox:jr.iconCollisionBox,Fn=jr.collisionCircleArray;if(Fn.length>0){var Hn=e.create(),ta=rn;e.mul(Hn,jr.placementInvProjMatrix,fe.transform.glCoordMatrix),e.mul(Hn,Hn,jr.placementViewportMatrix),nr.push({circleArray:Fn,circleOffset:xr,transform:ta,invTransform:Hn}),dr+=Fn.length/4,xr=dr}!mn||Ft.draw($e,dt.LINES,en.disabled,rr.disabled,fe.colorModeForRenderPass(),kt.disabled,vr(rn,fe.transform,Qr),ve.id,mn.layoutVertexBuffer,mn.indexBuffer,mn.segments,null,fe.transform.zoom,null,null,mn.collisionVertexBuffer)}}if(!(!Ie||!nr.length)){var ia=fe.useProgram("collisionCircle"),na=new e.StructArrayLayout2f1f2i16;na.resize(dr*4),na._trim();for(var ya=0,Sa=0,Ta=nr;Sa<Ta.length;Sa+=1)for(var ka=Ta[Sa],Fa=0;Fa<ka.circleArray.length/4;Fa++){var Za=Fa*4,ci=ka.circleArray[Za+0],Vi=ka.circleArray[Za+1],yi=ka.circleArray[Za+2],Ti=ka.circleArray[Za+3];na.emplace(ya++,ci,Vi,yi,Ti,0),na.emplace(ya++,ci,Vi,yi,Ti,1),na.emplace(ya++,ci,Vi,yi,Ti,2),na.emplace(ya++,ci,Vi,yi,Ti,3)}(!Ls||Ls.length<dr*2)&&(Ls=du(dr));for(var Wa=$e.createIndexBuffer(Ls,!0),Hi=$e.createVertexBuffer(na,e.collisionCircleLayout.members,!0),Xi=0,$i=nr;Xi<$i.length;Xi+=1){var Pi=$i[Xi],so=Nr(Pi.transform,Pi.invTransform,fe.transform);ia.draw($e,dt.TRIANGLES,en.disabled,rr.disabled,fe.colorModeForRenderPass(),kt.disabled,so,ve.id,Hi,Wa,e.SegmentVector.simpleSegment(0,Pi.circleOffset*2,Pi.circleArray.length,Pi.circleArray.length/2),null,fe.transform.zoom,null,null,null)}Hi.destroy(),Wa.destroy()}}function du(fe){var W=fe*2,ve=new e.StructArrayLayout3ui6;ve.resize(W),ve._trim();for(var J=0;J<W;J++){var pe=J*6;ve.uint16[pe+0]=J*4+0,ve.uint16[pe+1]=J*4+1,ve.uint16[pe+2]=J*4+2,ve.uint16[pe+3]=J*4+2,ve.uint16[pe+4]=J*4+3,ve.uint16[pe+5]=J*4+0}return ve}var uc=e.identity(new Float32Array(16));function df(fe,W,ve,J,pe){if(fe.renderPass==="translucent"){var Ee=rr.disabled,Ie=fe.colorModeForRenderPass(),$e=ve.layout.get("text-variable-anchor");$e&&gf(J,fe,ve,W,ve.layout.get("text-rotation-alignment"),ve.layout.get("text-pitch-alignment"),pe),ve.paint.get("icon-opacity").constantOr(1)!==0&&yf(fe,W,ve,J,!1,ve.paint.get("icon-translate"),ve.paint.get("icon-translate-anchor"),ve.layout.get("icon-rotation-alignment"),ve.layout.get("icon-pitch-alignment"),ve.layout.get("icon-keep-upright"),Ee,Ie),ve.paint.get("text-opacity").constantOr(1)!==0&&yf(fe,W,ve,J,!0,ve.paint.get("text-translate"),ve.paint.get("text-translate-anchor"),ve.layout.get("text-rotation-alignment"),ve.layout.get("text-pitch-alignment"),ve.layout.get("text-keep-upright"),Ee,Ie),W.map.showCollisionBoxes&&(Ju(fe,W,ve,J,ve.paint.get("text-translate"),ve.paint.get("text-translate-anchor"),!0),Ju(fe,W,ve,J,ve.paint.get("icon-translate"),ve.paint.get("icon-translate-anchor"),!1))}}function Qu(fe,W,ve,J,pe,Ee){var Ie=e.getAnchorAlignment(fe),$e=Ie.horizontalAlign,dt=Ie.verticalAlign,Ft=-($e-.5)*W,nr=-(dt-.5)*ve,dr=e.evaluateVariableOffset(fe,J);return new e.Point((Ft/pe+dr[0])*Ee,(nr/pe+dr[1])*Ee)}function gf(fe,W,ve,J,pe,Ee,Ie){for(var $e=W.transform,dt=pe==="map",Ft=Ee==="map",nr=0,dr=fe;nr<dr.length;nr+=1){var xr=dr[nr],Fr=J.getTile(xr),Zr=Fr.getBucket(ve);if(!(!Zr||!Zr.text||!Zr.text.segments.get().length)){var Qr=Zr.textSizeData,jr=e.evaluateSizeForZoom(Qr,$e.zoom),rn=Ln(Fr,1,W.transform.zoom),mn=Kr(xr.posMatrix,Ft,dt,W.transform,rn),Fn=ve.layout.get("icon-text-fit")!=="none"&&Zr.hasIconData();if(jr){var Hn=Math.pow(2,$e.zoom-Fr.tileID.overscaledZ);Zs(Zr,dt,Ft,Ie,e.symbolSize,$e,mn,xr.posMatrix,Hn,jr,Fn)}}}}function Zs(fe,W,ve,J,pe,Ee,Ie,$e,dt,Ft,nr){var dr=fe.text.placedSymbolArray,xr=fe.text.dynamicLayoutVertexArray,Fr=fe.icon.dynamicLayoutVertexArray,Zr={};xr.clear();for(var Qr=0;Qr<dr.length;Qr++){var jr=dr.get(Qr),rn=fe.allowVerticalPlacement&&!jr.placedOrientation,mn=!jr.hidden&&jr.crossTileID&&!rn?J[jr.crossTileID]:null;if(!mn)$a(jr.numGlyphs,xr);else{var Fn=new e.Point(jr.anchorX,jr.anchorY),Hn=yn(Fn,ve?$e:Ie),ta=Yn(Ee.cameraToCenterDistance,Hn.signedDistanceFromCamera),ia=pe.evaluateSizeForFeature(fe.textSizeData,Ft,jr)*ta/e.ONE_EM;ve&&(ia*=fe.tilePixelRatio/dt);for(var na=mn.width,ya=mn.height,Sa=mn.anchor,Ta=mn.textOffset,ka=mn.textBoxScale,Fa=Qu(Sa,na,ya,Ta,ka,ia),Za=ve?yn(Fn.add(Fa),Ie).point:Hn.point.add(W?Fa.rotate(-Ee.angle):Fa),ci=fe.allowVerticalPlacement&&jr.placedOrientation===e.WritingMode.vertical?Math.PI/2:0,Vi=0;Vi<jr.numGlyphs;Vi++)e.addDynamicAttributes(xr,Za,ci);nr&&jr.associatedIconIndex>=0&&(Zr[jr.associatedIconIndex]={shiftedAnchor:Za,angle:ci})}}if(nr){Fr.clear();for(var yi=fe.icon.placedSymbolArray,Ti=0;Ti<yi.length;Ti++){var Wa=yi.get(Ti);if(Wa.hidden)$a(Wa.numGlyphs,Fr);else{var Hi=Zr[Ti];if(!Hi)$a(Wa.numGlyphs,Fr);else for(var Xi=0;Xi<Wa.numGlyphs;Xi++)e.addDynamicAttributes(Fr,Hi.shiftedAnchor,Hi.angle)}}fe.icon.dynamicLayoutVertexBuffer.updateData(Fr)}fe.text.dynamicLayoutVertexBuffer.updateData(xr)}function Df(fe,W,ve){return ve.iconsInText&&W?"symbolTextAndIcon":fe?"symbolSDF":"symbolIcon"}function yf(fe,W,ve,J,pe,Ee,Ie,$e,dt,Ft,nr,dr){for(var xr=fe.context,Fr=xr.gl,Zr=fe.transform,Qr=$e==="map",jr=dt==="map",rn=Qr&&ve.layout.get("symbol-placement")!=="point",mn=Qr&&!jr&&!rn,Fn=ve.layout.get("symbol-sort-key").constantOr(1)!==void 0,Hn=fe.depthModeForSublayer(0,en.ReadOnly),ta=ve.layout.get("text-variable-anchor"),ia=[],na=0,ya=J;na<ya.length;na+=1){var Sa=ya[na],Ta=W.getTile(Sa),ka=Ta.getBucket(ve);if(!!ka){var Fa=pe?ka.text:ka.icon;if(!(!Fa||!Fa.segments.get().length)){var Za=Fa.programConfigurations.get(ve.id),ci=pe||ka.sdfIcons,Vi=pe?ka.textSizeData:ka.iconSizeData,yi=jr||Zr.pitch!==0,Ti=fe.useProgram(Df(ci,pe,ka),Za),Wa=e.evaluateSizeForZoom(Vi,Zr.zoom),Hi=void 0,Xi=[0,0],$i=void 0,Pi=void 0,so=null,vi=void 0;if(pe){if($i=Ta.glyphAtlasTexture,Pi=Fr.LINEAR,Hi=Ta.glyphAtlasTexture.size,ka.iconsInText){Xi=Ta.imageAtlasTexture.size,so=Ta.imageAtlasTexture;var Ri=Vi.kind==="composite"||Vi.kind==="camera";vi=yi||fe.options.rotating||fe.options.zooming||Ri?Fr.LINEAR:Fr.NEAREST}}else{var Fo=ve.layout.get("icon-size").constantOr(0)!==1||ka.iconsNeedLinear;$i=Ta.imageAtlasTexture,Pi=ci||fe.options.rotating||fe.options.zooming||Fo||yi?Fr.LINEAR:Fr.NEAREST,Hi=Ta.imageAtlasTexture.size}var es=Ln(Ta,1,fe.transform.zoom),Ql=Kr(Sa.posMatrix,jr,Qr,fe.transform,es),$l=Cn(Sa.posMatrix,jr,Qr,fe.transform,es),Lu=ta&&ka.hasTextData(),Pu=ve.layout.get("icon-text-fit")!=="none"&&Lu&&ka.hasIconData();rn&&Jn(ka,Sa.posMatrix,fe,pe,Ql,$l,jr,Ft);var rf=fe.translatePosMatrix(Sa.posMatrix,Ta,Ee,Ie),Du=rn||pe&&ta||Pu?uc:Ql,ol=fe.translatePosMatrix($l,Ta,Ee,Ie,!0),Sf=ci&&ve.paint.get(pe?"text-halo-width":"icon-halo-width").constantOr(1)!==0,Vs=void 0;ci?ka.iconsInText?Vs=wl(Vi.kind,Wa,mn,jr,fe,rf,Du,ol,Hi,Xi):Vs=Qo(Vi.kind,Wa,mn,jr,fe,rf,Du,ol,pe,Hi,!0):Vs=Xs(Vi.kind,Wa,mn,jr,fe,rf,Du,ol,pe,Hi);var zl={program:Ti,buffers:Fa,uniformValues:Vs,atlasTexture:$i,atlasTextureIcon:so,atlasInterpolation:Pi,atlasInterpolationIcon:vi,isSDF:ci,hasHalo:Sf};if(Fn)for(var Ru=Fa.segments.get(),mu=0,Iu=Ru;mu<Iu.length;mu+=1){var Lc=Iu[mu];ia.push({segments:new e.SegmentVector([Lc]),sortKey:Lc.sortKey,state:zl})}else ia.push({segments:Fa.segments,sortKey:0,state:zl})}}}Fn&&ia.sort(function(Pc,Dc){return Pc.sortKey-Dc.sortKey});for(var Rf=0,Ds=ia;Rf<Ds.length;Rf+=1){var pc=Ds[Rf],Ks=pc.state;if(xr.activeTexture.set(Fr.TEXTURE0),Ks.atlasTexture.bind(Ks.atlasInterpolation,Fr.CLAMP_TO_EDGE),Ks.atlasTextureIcon&&(xr.activeTexture.set(Fr.TEXTURE1),Ks.atlasTextureIcon&&Ks.atlasTextureIcon.bind(Ks.atlasInterpolationIcon,Fr.CLAMP_TO_EDGE)),Ks.isSDF){var dc=Ks.uniformValues;Ks.hasHalo&&(dc.u_is_halo=1,mf(Ks.buffers,pc.segments,ve,fe,Ks.program,Hn,nr,dr,dc)),dc.u_is_halo=0}mf(Ks.buffers,pc.segments,ve,fe,Ks.program,Hn,nr,dr,Ks.uniformValues)}}function mf(fe,W,ve,J,pe,Ee,Ie,$e,dt){var Ft=J.context,nr=Ft.gl;pe.draw(Ft,nr.TRIANGLES,Ee,Ie,$e,kt.disabled,dt,ve.id,fe.layoutVertexBuffer,fe.indexBuffer,W,ve.paint,J.transform.zoom,fe.programConfigurations.get(ve.id),fe.dynamicLayoutVertexBuffer,fe.opacityVertexBuffer)}function $o(fe,W,ve,J){if(fe.renderPass==="translucent"){var pe=ve.paint.get("circle-opacity"),Ee=ve.paint.get("circle-stroke-width"),Ie=ve.paint.get("circle-stroke-opacity"),$e=ve.layout.get("circle-sort-key").constantOr(1)!==void 0;if(!(pe.constantOr(1)===0&&(Ee.constantOr(1)===0||Ie.constantOr(1)===0))){for(var dt=fe.context,Ft=dt.gl,nr=fe.depthModeForSublayer(0,en.ReadOnly),dr=rr.disabled,xr=fe.colorModeForRenderPass(),Fr=[],Zr=0;Zr<J.length;Zr++){var Qr=J[Zr],jr=W.getTile(Qr),rn=jr.getBucket(ve);if(!!rn){var mn=rn.programConfigurations.get(ve.id),Fn=fe.useProgram("circle",mn),Hn=rn.layoutVertexBuffer,ta=rn.indexBuffer,ia=Tt(fe,Qr,jr,ve),na={programConfiguration:mn,program:Fn,layoutVertexBuffer:Hn,indexBuffer:ta,uniformValues:ia};if($e)for(var ya=rn.segments.get(),Sa=0,Ta=ya;Sa<Ta.length;Sa+=1){var ka=Ta[Sa];Fr.push({segments:new e.SegmentVector([ka]),sortKey:ka.sortKey,state:na})}else Fr.push({segments:rn.segments,sortKey:0,state:na})}}$e&&Fr.sort(function(Pi,so){return Pi.sortKey-so.sortKey});for(var Fa=0,Za=Fr;Fa<Za.length;Fa+=1){var ci=Za[Fa],Vi=ci.state,yi=Vi.programConfiguration,Ti=Vi.program,Wa=Vi.layoutVertexBuffer,Hi=Vi.indexBuffer,Xi=Vi.uniformValues,$i=ci.segments;Ti.draw(dt,Ft.TRIANGLES,nr,dr,xr,kt.disabled,Xi,ve.id,Wa,Hi,$i,ve.paint,fe.transform.zoom,yi)}}}}function xf(fe,W,ve,J){if(ve.paint.get("heatmap-opacity")!==0)if(fe.renderPass==="offscreen"){var pe=fe.context,Ee=pe.gl,Ie=rr.disabled,$e=new et([Ee.ONE,Ee.ONE],e.Color.transparent,[!0,!0,!0,!0]);Yf(pe,fe,ve),pe.clear({color:e.Color.transparent});for(var dt=0;dt<J.length;dt++){var Ft=J[dt];if(!W.hasRenderableParent(Ft)){var nr=W.getTile(Ft),dr=nr.getBucket(ve);if(!!dr){var xr=dr.programConfigurations.get(ve.id),Fr=fe.useProgram("heatmap",xr),Zr=fe.transform,Qr=Zr.zoom;Fr.draw(pe,Ee.TRIANGLES,en.disabled,Ie,$e,kt.disabled,Vn(Ft.posMatrix,nr,Qr,ve.paint.get("heatmap-intensity")),ve.id,dr.layoutVertexBuffer,dr.indexBuffer,dr.segments,ve.paint,fe.transform.zoom,xr)}}}pe.viewport.set([0,0,fe.width,fe.height])}else fe.renderPass==="translucent"&&(fe.context.setColorMode(fe.colorModeForRenderPass()),$u(fe,ve))}function Yf(fe,W,ve){var J=fe.gl;fe.activeTexture.set(J.TEXTURE1),fe.viewport.set([0,0,W.width/4,W.height/4]);var pe=ve.heatmapFbo;if(pe)J.bindTexture(J.TEXTURE_2D,pe.colorAttachment.get()),fe.bindFramebuffer.set(pe.framebuffer);else{var Ee=J.createTexture();J.bindTexture(J.TEXTURE_2D,Ee),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_WRAP_S,J.CLAMP_TO_EDGE),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_WRAP_T,J.CLAMP_TO_EDGE),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_MIN_FILTER,J.LINEAR),J.texParameteri(J.TEXTURE_2D,J.TEXTURE_MAG_FILTER,J.LINEAR),pe=ve.heatmapFbo=fe.createFramebuffer(W.width/4,W.height/4,!1),Bs(fe,W,Ee,pe)}}function Bs(fe,W,ve,J){var pe=fe.gl,Ee=fe.extRenderToTextureHalfFloat?fe.extTextureHalfFloat.HALF_FLOAT_OES:pe.UNSIGNED_BYTE;pe.texImage2D(pe.TEXTURE_2D,0,pe.RGBA,W.width/4,W.height/4,0,pe.RGBA,Ee,null),J.colorAttachment.set(ve)}function $u(fe,W){var ve=fe.context,J=ve.gl,pe=W.heatmapFbo;if(!!pe){ve.activeTexture.set(J.TEXTURE0),J.bindTexture(J.TEXTURE_2D,pe.colorAttachment.get()),ve.activeTexture.set(J.TEXTURE1);var Ee=W.colorRampTexture;Ee||(Ee=W.colorRampTexture=new e.Texture(ve,W.colorRamp,J.RGBA)),Ee.bind(J.LINEAR,J.CLAMP_TO_EDGE),fe.useProgram("heatmapTexture").draw(ve,J.TRIANGLES,en.disabled,rr.disabled,fe.colorModeForRenderPass(),kt.disabled,On(fe,W,0,1),W.id,fe.viewportBuffer,fe.quadTriangleIndexBuffer,fe.viewportSegments,W.paint,fe.transform.zoom)}}function qu(fe,W,ve,J){if(fe.renderPass==="translucent"){var pe=ve.paint.get("line-opacity"),Ee=ve.paint.get("line-width");if(!(pe.constantOr(1)===0||Ee.constantOr(1)===0)){var Ie=fe.depthModeForSublayer(0,en.ReadOnly),$e=fe.colorModeForRenderPass(),dt=ve.paint.get("line-dasharray"),Ft=ve.paint.get("line-pattern"),nr=Ft.constantOr(1),dr=ve.paint.get("line-gradient"),xr=ve.getCrossfadeParameters(),Fr=nr?"linePattern":dt?"lineSDF":dr?"lineGradient":"line",Zr=fe.context,Qr=Zr.gl,jr=!0;if(dr){Zr.activeTexture.set(Qr.TEXTURE0);var rn=ve.gradientTexture;if(!ve.gradient)return;rn||(rn=ve.gradientTexture=new e.Texture(Zr,ve.gradient,Qr.RGBA)),rn.bind(Qr.LINEAR,Qr.CLAMP_TO_EDGE)}for(var mn=0,Fn=J;mn<Fn.length;mn+=1){var Hn=Fn[mn],ta=W.getTile(Hn);if(!(nr&&!ta.patternsLoaded())){var ia=ta.getBucket(ve);if(!!ia){var na=ia.programConfigurations.get(ve.id),ya=fe.context.program.get(),Sa=fe.useProgram(Fr,na),Ta=jr||Sa.program!==ya,ka=Ft.constantOr(null);if(ka&&ta.imageAtlas){var Fa=ta.imageAtlas,Za=Fa.patternPositions[ka.to.toString()],ci=Fa.patternPositions[ka.from.toString()];Za&&ci&&na.setConstantPatternPositions(Za,ci)}var Vi=nr?Si(fe,ta,ve,xr):dt?Ci(fe,ta,ve,dt,xr):dr?Mi(fe,ta,ve):ai(fe,ta,ve);nr?(Zr.activeTexture.set(Qr.TEXTURE0),ta.imageAtlasTexture.bind(Qr.LINEAR,Qr.CLAMP_TO_EDGE),na.updatePaintBuffers(xr)):dt&&(Ta||fe.lineAtlas.dirty)&&(Zr.activeTexture.set(Qr.TEXTURE0),fe.lineAtlas.bind(Zr)),Sa.draw(Zr,Qr.TRIANGLES,Ie,fe.stencilModeForClipping(Hn),$e,kt.disabled,Vi,ve.id,ia.layoutVertexBuffer,ia.indexBuffer,ia.segments,ve.paint,fe.transform.zoom,na),jr=!1}}}}}}function bf(fe,W,ve,J){var pe=ve.paint.get("fill-color"),Ee=ve.paint.get("fill-opacity");if(Ee.constantOr(1)!==0){var Ie=fe.colorModeForRenderPass(),$e=ve.paint.get("fill-pattern"),dt=fe.opaquePassEnabledForLayer()&&!$e.constantOr(1)&&pe.constantOr(e.Color.transparent).a===1&&Ee.constantOr(0)===1?"opaque":"translucent";if(fe.renderPass===dt){var Ft=fe.depthModeForSublayer(1,fe.renderPass==="opaque"?en.ReadWrite:en.ReadOnly);ze(fe,W,ve,J,Ft,Ie,!1)}if(fe.renderPass==="translucent"&&ve.paint.get("fill-antialias")){var nr=fe.depthModeForSublayer(ve.getPaintProperty("fill-outline-color")?2:0,en.ReadOnly);ze(fe,W,ve,J,nr,Ie,!0)}}}function ze(fe,W,ve,J,pe,Ee,Ie){var $e=fe.context.gl,dt=ve.paint.get("fill-pattern"),Ft=dt&&dt.constantOr(1),nr=ve.getCrossfadeParameters(),dr,xr,Fr,Zr,Qr;Ie?(xr=Ft&&!ve.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",dr=$e.LINES):(xr=Ft?"fillPattern":"fill",dr=$e.TRIANGLES);for(var jr=0,rn=J;jr<rn.length;jr+=1){var mn=rn[jr],Fn=W.getTile(mn);if(!(Ft&&!Fn.patternsLoaded())){var Hn=Fn.getBucket(ve);if(!!Hn){var ta=Hn.programConfigurations.get(ve.id),ia=fe.useProgram(xr,ta);Ft&&(fe.context.activeTexture.set($e.TEXTURE0),Fn.imageAtlasTexture.bind($e.LINEAR,$e.CLAMP_TO_EDGE),ta.updatePaintBuffers(nr));var na=dt.constantOr(null);if(na&&Fn.imageAtlas){var ya=Fn.imageAtlas,Sa=ya.patternPositions[na.to.toString()],Ta=ya.patternPositions[na.from.toString()];Sa&&Ta&&ta.setConstantPatternPositions(Sa,Ta)}var ka=fe.translatePosMatrix(mn.posMatrix,Fn,ve.paint.get("fill-translate"),ve.paint.get("fill-translate-anchor"));if(!Ie)Zr=Hn.indexBuffer,Qr=Hn.segments,Fr=Ft?Es(ka,fe,nr,Fn):Vo(ka);else{Zr=Hn.indexBuffer2,Qr=Hn.segments2;var Fa=[$e.drawingBufferWidth,$e.drawingBufferHeight];Fr=xr==="fillOutlinePattern"&&Ft?vu(ka,fe,nr,Fn,Fa):Zu(ka,Fa)}ia.draw(fe.context,dr,pe,fe.stencilModeForClipping(mn),Ee,kt.disabled,Fr,ve.id,Hn.layoutVertexBuffer,Zr,Qr,ve.paint,fe.transform.zoom,ta)}}}}function Ze(fe,W,ve,J){var pe=ve.paint.get("fill-extrusion-opacity");if(pe!==0&&fe.renderPass==="translucent"){var Ee=new en(fe.context.gl.LEQUAL,en.ReadWrite,fe.depthRangeFor3D);if(pe===1&&!ve.paint.get("fill-extrusion-pattern").constantOr(1)){var Ie=fe.colorModeForRenderPass();at(fe,W,ve,J,Ee,rr.disabled,Ie)}else at(fe,W,ve,J,Ee,rr.disabled,et.disabled),at(fe,W,ve,J,Ee,fe.stencilModeFor3D(),fe.colorModeForRenderPass())}}function at(fe,W,ve,J,pe,Ee,Ie){for(var $e=fe.context,dt=$e.gl,Ft=ve.paint.get("fill-extrusion-pattern"),nr=Ft.constantOr(1),dr=ve.getCrossfadeParameters(),xr=ve.paint.get("fill-extrusion-opacity"),Fr=0,Zr=J;Fr<Zr.length;Fr+=1){var Qr=Zr[Fr],jr=W.getTile(Qr),rn=jr.getBucket(ve);if(!!rn){var mn=rn.programConfigurations.get(ve.id),Fn=fe.useProgram(nr?"fillExtrusionPattern":"fillExtrusion",mn);nr&&(fe.context.activeTexture.set(dt.TEXTURE0),jr.imageAtlasTexture.bind(dt.LINEAR,dt.CLAMP_TO_EDGE),mn.updatePaintBuffers(dr));var Hn=Ft.constantOr(null);if(Hn&&jr.imageAtlas){var ta=jr.imageAtlas,ia=ta.patternPositions[Hn.to.toString()],na=ta.patternPositions[Hn.from.toString()];ia&&na&&mn.setConstantPatternPositions(ia,na)}var ya=fe.translatePosMatrix(Qr.posMatrix,jr,ve.paint.get("fill-extrusion-translate"),ve.paint.get("fill-extrusion-translate-anchor")),Sa=ve.paint.get("fill-extrusion-vertical-gradient"),Ta=nr?nl(ya,fe,Sa,xr,Qr,dr,jr):Ms(ya,fe,Sa,xr);Fn.draw($e,$e.gl.TRIANGLES,pe,Ee,Ie,kt.backCCW,Ta,ve.id,rn.layoutVertexBuffer,rn.indexBuffer,rn.segments,ve.paint,fe.transform.zoom,mn)}}}function ct(fe,W,ve,J){if(!(fe.renderPass!=="offscreen"&&fe.renderPass!=="translucent")){for(var pe=fe.context,Ee=W.getSource().maxzoom,Ie=fe.depthModeForSublayer(0,en.ReadOnly),$e=fe.colorModeForRenderPass(),dt=fe.renderPass==="translucent"?fe.stencilConfigForOverlap(J):[{},J],Ft=dt[0],nr=dt[1],dr=0,xr=nr;dr<xr.length;dr+=1){var Fr=xr[dr],Zr=W.getTile(Fr);Zr.needsHillshadePrepare&&fe.renderPass==="offscreen"?At(fe,Zr,ve,Ee,Ie,rr.disabled,$e):fe.renderPass==="translucent"&&Et(fe,Zr,ve,Ie,Ft[Fr.overscaledZ],$e)}pe.viewport.set([0,0,fe.width,fe.height])}}function Et(fe,W,ve,J,pe,Ee){var Ie=fe.context,$e=Ie.gl,dt=W.fbo;if(!!dt){var Ft=fe.useProgram("hillshade");Ie.activeTexture.set($e.TEXTURE0),$e.bindTexture($e.TEXTURE_2D,dt.colorAttachment.get());var nr=Ha(fe,W,ve);Ft.draw(Ie,$e.TRIANGLES,J,pe,Ee,kt.disabled,nr,ve.id,fe.rasterBoundsBuffer,fe.quadTriangleIndexBuffer,fe.rasterBoundsSegments)}}function At(fe,W,ve,J,pe,Ee,Ie){var $e=fe.context,dt=$e.gl,Ft=W.dem;if(Ft&&Ft.data){var nr=Ft.dim,dr=Ft.stride,xr=Ft.getPixels();if($e.activeTexture.set(dt.TEXTURE1),$e.pixelStoreUnpackPremultiplyAlpha.set(!1),W.demTexture=W.demTexture||fe.getTileTexture(dr),W.demTexture){var Fr=W.demTexture;Fr.update(xr,{premultiply:!1}),Fr.bind(dt.NEAREST,dt.CLAMP_TO_EDGE)}else W.demTexture=new e.Texture($e,xr,dt.RGBA,{premultiply:!1}),W.demTexture.bind(dt.NEAREST,dt.CLAMP_TO_EDGE);$e.activeTexture.set(dt.TEXTURE0);var Zr=W.fbo;if(!Zr){var Qr=new e.Texture($e,{width:nr,height:nr,data:null},dt.RGBA);Qr.bind(dt.LINEAR,dt.CLAMP_TO_EDGE),Zr=W.fbo=$e.createFramebuffer(nr,nr,!0),Zr.colorAttachment.set(Qr.texture)}$e.bindFramebuffer.set(Zr.framebuffer),$e.viewport.set([0,0,nr,nr]),fe.useProgram("hillshadePrepare").draw($e,dt.TRIANGLES,pe,Ee,Ie,kt.disabled,Ia(W.tileID,Ft,J),ve.id,fe.rasterBoundsBuffer,fe.quadTriangleIndexBuffer,fe.rasterBoundsSegments),W.needsHillshadePrepare=!1}}function It(fe,W,ve,J){if(fe.renderPass==="translucent"&&ve.paint.get("raster-opacity")!==0&&!!J.length)for(var pe=fe.context,Ee=pe.gl,Ie=W.getSource(),$e=fe.useProgram("raster"),dt=fe.colorModeForRenderPass(),Ft=Ie instanceof re?[{},J]:fe.stencilConfigForOverlap(J),nr=Ft[0],dr=Ft[1],xr=dr[dr.length-1].overscaledZ,Fr=!fe.options.moving,Zr=0,Qr=dr;Zr<Qr.length;Zr+=1){var jr=Qr[Zr],rn=fe.depthModeForSublayer(jr.overscaledZ-xr,ve.paint.get("raster-opacity")===1?en.ReadWrite:en.ReadOnly,Ee.LESS),mn=W.getTile(jr),Fn=fe.transform.calculatePosMatrix(jr.toUnwrapped(),Fr);mn.registerFadeDuration(ve.paint.get("raster-fade-duration"));var Hn=W.findLoadedParent(jr,0),ta=gr(mn,Hn,W,ve,fe.transform),ia=void 0,na=void 0,ya=ve.paint.get("raster-resampling")==="nearest"?Ee.NEAREST:Ee.LINEAR;pe.activeTexture.set(Ee.TEXTURE0),mn.texture.bind(ya,Ee.CLAMP_TO_EDGE,Ee.LINEAR_MIPMAP_NEAREST),pe.activeTexture.set(Ee.TEXTURE1),Hn?(Hn.texture.bind(ya,Ee.CLAMP_TO_EDGE,Ee.LINEAR_MIPMAP_NEAREST),ia=Math.pow(2,Hn.tileID.overscaledZ-mn.tileID.overscaledZ),na=[mn.tileID.canonical.x*ia%1,mn.tileID.canonical.y*ia%1]):mn.texture.bind(ya,Ee.CLAMP_TO_EDGE,Ee.LINEAR_MIPMAP_NEAREST);var Sa=ho(Fn,na||[0,0],ia||1,ta,ve);Ie instanceof re?$e.draw(pe,Ee.TRIANGLES,rn,rr.disabled,dt,kt.disabled,Sa,ve.id,Ie.boundsBuffer,fe.quadTriangleIndexBuffer,Ie.boundsSegments):$e.draw(pe,Ee.TRIANGLES,rn,nr[jr.overscaledZ],dt,kt.disabled,Sa,ve.id,fe.rasterBoundsBuffer,fe.quadTriangleIndexBuffer,fe.rasterBoundsSegments)}}function gr(fe,W,ve,J,pe){var Ee=J.paint.get("raster-fade-duration");if(Ee>0){var Ie=e.browser.now(),$e=(Ie-fe.timeAdded)/Ee,dt=W?(Ie-W.timeAdded)/Ee:-1,Ft=ve.getSource(),nr=pe.coveringZoomLevel({tileSize:Ft.tileSize,roundZoom:Ft.roundZoom}),dr=!W||Math.abs(W.tileID.overscaledZ-nr)>Math.abs(fe.tileID.overscaledZ-nr),xr=dr&&fe.refreshedUponExpiration?1:e.clamp(dr?$e:1-dt,0,1);return fe.refreshedUponExpiration&&$e>=1&&(fe.refreshedUponExpiration=!1),W?{opacity:1,mix:1-xr}:{opacity:xr,mix:0}}else return{opacity:1,mix:0}}function br(fe,W,ve){var J=ve.paint.get("background-color"),pe=ve.paint.get("background-opacity");if(pe!==0){var Ee=fe.context,Ie=Ee.gl,$e=fe.transform,dt=$e.tileSize,Ft=ve.paint.get("background-pattern");if(!fe.isPatternMissing(Ft)){var nr=!Ft&&J.a===1&&pe===1&&fe.opaquePassEnabledForLayer()?"opaque":"translucent";if(fe.renderPass===nr){var dr=rr.disabled,xr=fe.depthModeForSublayer(0,nr==="opaque"?en.ReadWrite:en.ReadOnly),Fr=fe.colorModeForRenderPass(),Zr=fe.useProgram(Ft?"backgroundPattern":"background"),Qr=$e.coveringTiles({tileSize:dt});Ft&&(Ee.activeTexture.set(Ie.TEXTURE0),fe.imageManager.bind(fe.context));for(var jr=ve.getCrossfadeParameters(),rn=0,mn=Qr;rn<mn.length;rn+=1){var Fn=mn[rn],Hn=fe.transform.calculatePosMatrix(Fn.toUnwrapped()),ta=Ft?pu(Hn,pe,fe,Ft,{tileID:Fn,tileSize:dt},jr):Po(Hn,pe,J);Zr.draw(Ee,Ie.TRIANGLES,xr,dr,Fr,kt.disabled,ta,ve.id,fe.tileExtentBuffer,fe.quadTriangleIndexBuffer,fe.tileExtentSegments)}}}}}var pr=new e.Color(1,0,0,1),Mr=new e.Color(0,1,0,1),Or=new e.Color(0,0,1,1),$r=new e.Color(1,0,1,1),on=new e.Color(0,1,1,1);function Sn(fe){var W=fe.transform.padding,ve=3;Qn(fe,fe.transform.height-(W.top||0),ve,pr),Qn(fe,W.bottom||0,ve,Mr),_a(fe,W.left||0,ve,Or),_a(fe,fe.transform.width-(W.right||0),ve,$r);var J=fe.transform.centerPoint;Nn(fe,J.x,fe.transform.height-J.y,on)}function Nn(fe,W,ve,J){var pe=20,Ee=2;Ma(fe,W-Ee/2,ve-pe/2,Ee,pe,J),Ma(fe,W-pe/2,ve-Ee/2,pe,Ee,J)}function Qn(fe,W,ve,J){Ma(fe,0,W+ve/2,fe.transform.width,ve,J)}function _a(fe,W,ve,J){Ma(fe,W-ve/2,0,ve,fe.transform.height,J)}function Ma(fe,W,ve,J,pe,Ee){var Ie=fe.context,$e=Ie.gl;$e.enable($e.SCISSOR_TEST),$e.scissor(W*e.browser.devicePixelRatio,ve*e.browser.devicePixelRatio,J*e.browser.devicePixelRatio,pe*e.browser.devicePixelRatio),Ie.clear({color:Ee}),$e.disable($e.SCISSOR_TEST)}function ri(fe,W,ve){for(var J=0;J<ve.length;J++)Qa(fe,W,ve[J])}function Qa(fe,W,ve){var J=fe.context,pe=J.gl,Ee=ve.posMatrix,Ie=fe.useProgram("debug"),$e=en.disabled,dt=rr.disabled,Ft=fe.colorModeForRenderPass(),nr="$debug";J.activeTexture.set(pe.TEXTURE0),fe.emptyTexture.bind(pe.LINEAR,pe.CLAMP_TO_EDGE),Ie.draw(J,pe.LINE_STRIP,$e,dt,Ft,kt.disabled,wn(Ee,e.Color.red),nr,fe.debugBuffer,fe.tileBorderIndexBuffer,fe.debugSegments);var dr=W.getTileByID(ve.key).latestRawTileData,xr=dr&&dr.byteLength||0,Fr=Math.floor(xr/1024),Zr=W.getTile(ve).tileSize,Qr=512/Math.min(Zr,512)*(ve.overscaledZ/fe.transform.zoom)*.5,jr=ve.canonical.toString();ve.overscaledZ!==ve.canonical.z&&(jr+=" => "+ve.overscaledZ);var rn=jr+" "+Fr+"kb";si(fe,rn),Ie.draw(J,pe.TRIANGLES,$e,dt,et.alphaBlended,kt.disabled,wn(Ee,e.Color.transparent,Qr),nr,fe.debugBuffer,fe.quadTriangleIndexBuffer,fe.debugSegments)}function si(fe,W){fe.initDebugOverlayCanvas();var ve=fe.debugOverlayCanvas,J=fe.context.gl,pe=fe.debugOverlayCanvas.getContext("2d");pe.clearRect(0,0,ve.width,ve.height),pe.shadowColor="white",pe.shadowBlur=2,pe.lineWidth=1.5,pe.strokeStyle="white",pe.textBaseline="top",pe.font="bold "+36+"px Open Sans, sans-serif",pe.fillText(W,5,5),pe.strokeText(W,5,5),fe.debugOverlayTexture.update(ve),fe.debugOverlayTexture.bind(J.LINEAR,J.CLAMP_TO_EDGE)}function wi(fe,W,ve){var J=fe.context,pe=ve.implementation;if(fe.renderPass==="offscreen"){var Ee=pe.prerender;Ee&&(fe.setCustomLayerDefaults(),J.setColorMode(fe.colorModeForRenderPass()),Ee.call(pe,J.gl,fe.transform.customLayerMatrix()),J.setDirty(),fe.setBaseState())}else if(fe.renderPass==="translucent"){fe.setCustomLayerDefaults(),J.setColorMode(fe.colorModeForRenderPass()),J.setStencilMode(rr.disabled);var Ie=pe.renderingMode==="3d"?new en(fe.context.gl.LEQUAL,en.ReadWrite,fe.depthRangeFor3D):fe.depthModeForSublayer(0,en.ReadOnly);J.setDepthMode(Ie),pe.render(J.gl,fe.transform.customLayerMatrix()),J.setDirty(),fe.setBaseState(),J.bindFramebuffer.set(null)}}var mo={symbol:df,circle:$o,heatmap:xf,line:qu,fill:bf,"fill-extrusion":Ze,hillshade:ct,raster:It,background:br,debug:ri,custom:wi},fi=function(W,ve){this.context=new Vt(W),this.transform=ve,this._tileTextures={},this.setup(),this.numSublayers=Pe.maxUnderzooming+Pe.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Aa,this.gpuTimers={}};fi.prototype.resize=function(W,ve){if(this.width=W*e.browser.devicePixelRatio,this.height=ve*e.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var J=0,pe=this.style._order;J<pe.length;J+=1){var Ee=pe[J];this.style._layers[Ee].resize()}},fi.prototype.setup=function(){var W=this.context,ve=new e.StructArrayLayout2i4;ve.emplaceBack(0,0),ve.emplaceBack(e.EXTENT,0),ve.emplaceBack(0,e.EXTENT),ve.emplaceBack(e.EXTENT,e.EXTENT),this.tileExtentBuffer=W.createVertexBuffer(ve,Cl.members),this.tileExtentSegments=e.SegmentVector.simpleSegment(0,0,4,2);var J=new e.StructArrayLayout2i4;J.emplaceBack(0,0),J.emplaceBack(e.EXTENT,0),J.emplaceBack(0,e.EXTENT),J.emplaceBack(e.EXTENT,e.EXTENT),this.debugBuffer=W.createVertexBuffer(J,Cl.members),this.debugSegments=e.SegmentVector.simpleSegment(0,0,4,5);var pe=new e.StructArrayLayout4i8;pe.emplaceBack(0,0,0,0),pe.emplaceBack(e.EXTENT,0,e.EXTENT,0),pe.emplaceBack(0,e.EXTENT,0,e.EXTENT),pe.emplaceBack(e.EXTENT,e.EXTENT,e.EXTENT,e.EXTENT),this.rasterBoundsBuffer=W.createVertexBuffer(pe,j.members),this.rasterBoundsSegments=e.SegmentVector.simpleSegment(0,0,4,2);var Ee=new e.StructArrayLayout2i4;Ee.emplaceBack(0,0),Ee.emplaceBack(1,0),Ee.emplaceBack(0,1),Ee.emplaceBack(1,1),this.viewportBuffer=W.createVertexBuffer(Ee,Cl.members),this.viewportSegments=e.SegmentVector.simpleSegment(0,0,4,2);var Ie=new e.StructArrayLayout1ui2;Ie.emplaceBack(0),Ie.emplaceBack(1),Ie.emplaceBack(3),Ie.emplaceBack(2),Ie.emplaceBack(0),this.tileBorderIndexBuffer=W.createIndexBuffer(Ie);var $e=new e.StructArrayLayout3ui6;$e.emplaceBack(0,1,2),$e.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=W.createIndexBuffer($e),this.emptyTexture=new e.Texture(W,{width:1,height:1,data:new Uint8Array([0,0,0,0])},W.gl.RGBA);var dt=this.context.gl;this.stencilClearMode=new rr({func:dt.ALWAYS,mask:0},0,255,dt.ZERO,dt.ZERO,dt.ZERO)},fi.prototype.clearStencil=function(){var W=this.context,ve=W.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var J=e.create();e.ortho(J,0,this.width,this.height,0,0,1),e.scale(J,J,[ve.drawingBufferWidth,ve.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(W,ve.TRIANGLES,en.disabled,this.stencilClearMode,et.disabled,kt.disabled,zn(J),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},fi.prototype._renderTileClippingMasks=function(W,ve){if(!(this.currentStencilSource===W.source||!W.isTileClipped()||!ve||!ve.length)){this.currentStencilSource=W.source;var J=this.context,pe=J.gl;this.nextStencilID+ve.length>256&&this.clearStencil(),J.setColorMode(et.disabled),J.setDepthMode(en.disabled);var Ee=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var Ie=0,$e=ve;Ie<$e.length;Ie+=1){var dt=$e[Ie],Ft=this._tileClippingMaskIDs[dt.key]=this.nextStencilID++;Ee.draw(J,pe.TRIANGLES,en.disabled,new rr({func:pe.ALWAYS,mask:0},Ft,255,pe.KEEP,pe.KEEP,pe.REPLACE),et.disabled,kt.disabled,zn(dt.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},fi.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var W=this.nextStencilID++,ve=this.context.gl;return new rr({func:ve.NOTEQUAL,mask:255},W,255,ve.KEEP,ve.KEEP,ve.REPLACE)},fi.prototype.stencilModeForClipping=function(W){var ve=this.context.gl;return new rr({func:ve.EQUAL,mask:255},this._tileClippingMaskIDs[W.key],0,ve.KEEP,ve.KEEP,ve.REPLACE)},fi.prototype.stencilConfigForOverlap=function(W){var ve,J=this.context.gl,pe=W.sort(function(Ft,nr){return nr.overscaledZ-Ft.overscaledZ}),Ee=pe[pe.length-1].overscaledZ,Ie=pe[0].overscaledZ-Ee+1;if(Ie>1){this.currentStencilSource=void 0,this.nextStencilID+Ie>256&&this.clearStencil();for(var $e={},dt=0;dt<Ie;dt++)$e[dt+Ee]=new rr({func:J.GEQUAL,mask:255},dt+this.nextStencilID,255,J.KEEP,J.KEEP,J.REPLACE);return this.nextStencilID+=Ie,[$e,pe]}return[(ve={},ve[Ee]=rr.disabled,ve),pe]},fi.prototype.colorModeForRenderPass=function(){var W=this.context.gl;if(this._showOverdrawInspector){var ve=8,J=1/ve;return new et([W.CONSTANT_COLOR,W.ONE],new e.Color(J,J,J,0),[!0,!0,!0,!0])}else return this.renderPass==="opaque"?et.unblended:et.alphaBlended},fi.prototype.depthModeForSublayer=function(W,ve,J){if(!this.opaquePassEnabledForLayer())return en.disabled;var pe=1-((1+this.currentLayer)*this.numSublayers+W)*this.depthEpsilon;return new en(J||this.context.gl.LEQUAL,ve,[pe,pe])},fi.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},fi.prototype.render=function(W,ve){var J=this;this.style=W,this.options=ve,this.lineAtlas=W.lineAtlas,this.imageManager=W.imageManager,this.glyphManager=W.glyphManager,this.symbolFadeChange=W.placement.symbolFadeChange(e.browser.now()),this.imageManager.beginFrame();var pe=this.style._order,Ee=this.style.sourceCaches;for(var Ie in Ee){var $e=Ee[Ie];$e.used&&$e.prepare(this.context)}var dt={},Ft={},nr={};for(var dr in Ee){var xr=Ee[dr];dt[dr]=xr.getVisibleCoordinates(),Ft[dr]=dt[dr].slice().reverse(),nr[dr]=xr.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var Fr=0;Fr<pe.length;Fr++){var Zr=pe[Fr];if(this.style._layers[Zr].is3D()){this.opaquePassCutoff=Fr;break}}this.renderPass="offscreen";for(var Qr=0,jr=pe;Qr<jr.length;Qr+=1){var rn=jr[Qr],mn=this.style._layers[rn];if(!(!mn.hasOffscreenPass()||mn.isHidden(this.transform.zoom))){var Fn=Ft[mn.source];mn.type!=="custom"&&!Fn.length||this.renderLayer(this,Ee[mn.source],mn,Fn)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:ve.showOverdrawInspector?e.Color.black:e.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=ve.showOverdrawInspector,this.depthRangeFor3D=[0,1-(W._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=pe.length-1;this.currentLayer>=0;this.currentLayer--){var Hn=this.style._layers[pe[this.currentLayer]],ta=Ee[Hn.source],ia=dt[Hn.source];this._renderTileClippingMasks(Hn,ia),this.renderLayer(this,ta,Hn,ia)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<pe.length;this.currentLayer++){var na=this.style._layers[pe[this.currentLayer]],ya=Ee[na.source],Sa=(na.type==="symbol"?nr:Ft)[na.source];this._renderTileClippingMasks(na,dt[na.source]),this.renderLayer(this,ya,na,Sa)}if(this.options.showTileBoundaries){var Ta,ka,Fa=e.values(this.style._layers);Fa.forEach(function(Za){Za.source&&!Za.isHidden(J.transform.zoom)&&(Za.source!==(ka&&ka.id)&&(ka=J.style.sourceCaches[Za.source]),(!Ta||Ta.getSource().maxzoom<ka.getSource().maxzoom)&&(Ta=ka))}),Ta&&mo.debug(this,Ta,Ta.getVisibleCoordinates())}this.options.showPadding&&Sn(this),this.context.setDefault()},fi.prototype.renderLayer=function(W,ve,J,pe){J.isHidden(this.transform.zoom)||J.type!=="background"&&J.type!=="custom"&&!pe.length||(this.id=J.id,this.gpuTimingStart(J),mo[J.type](W,ve,J,pe,this.style.placement.variableOffsets),this.gpuTimingEnd())},fi.prototype.gpuTimingStart=function(W){if(!!this.options.gpuTiming){var ve=this.context.extTimerQuery,J=this.gpuTimers[W.id];J||(J=this.gpuTimers[W.id]={calls:0,cpuTime:0,query:ve.createQueryEXT()}),J.calls++,ve.beginQueryEXT(ve.TIME_ELAPSED_EXT,J.query)}},fi.prototype.gpuTimingEnd=function(){if(!!this.options.gpuTiming){var W=this.context.extTimerQuery;W.endQueryEXT(W.TIME_ELAPSED_EXT)}},fi.prototype.collectGpuTimers=function(){var W=this.gpuTimers;return this.gpuTimers={},W},fi.prototype.queryGpuTimers=function(W){var ve={};for(var J in W){var pe=W[J],Ee=this.context.extTimerQuery,Ie=Ee.getQueryObjectEXT(pe.query,Ee.QUERY_RESULT_EXT)/(1e3*1e3);Ee.deleteQueryEXT(pe.query),ve[J]=Ie}return ve},fi.prototype.translatePosMatrix=function(W,ve,J,pe,Ee){if(!J[0]&&!J[1])return W;var Ie=Ee?pe==="map"?this.transform.angle:0:pe==="viewport"?-this.transform.angle:0;if(Ie){var $e=Math.sin(Ie),dt=Math.cos(Ie);J=[J[0]*dt-J[1]*$e,J[0]*$e+J[1]*dt]}var Ft=[Ee?J[0]:Ln(ve,J[0],this.transform.zoom),Ee?J[1]:Ln(ve,J[1],this.transform.zoom),0],nr=new Float32Array(16);return e.translate(nr,W,Ft),nr},fi.prototype.saveTileTexture=function(W){var ve=this._tileTextures[W.size[0]];ve?ve.push(W):this._tileTextures[W.size[0]]=[W]},fi.prototype.getTileTexture=function(W){var ve=this._tileTextures[W];return ve&&ve.length>0?ve.pop():null},fi.prototype.isPatternMissing=function(W){if(!W)return!1;if(!W.from||!W.to)return!0;var ve=this.imageManager.getPattern(W.from.toString()),J=this.imageManager.getPattern(W.to.toString());return!ve||!J},fi.prototype.useProgram=function(W,ve){this.cache=this.cache||{};var J=""+W+(ve?ve.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[J]||(this.cache[J]=new gs(this.context,Fl[W],ve,ku[W],this._showOverdrawInspector)),this.cache[J]},fi.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},fi.prototype.setBaseState=function(){var W=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(W.FUNC_ADD)},fi.prototype.initDebugOverlayCanvas=function(){if(this.debugOverlayCanvas==null){this.debugOverlayCanvas=e.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512;var W=this.context.gl;this.debugOverlayTexture=new e.Texture(this.context,this.debugOverlayCanvas,W.RGBA)}},fi.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var to=function(W,ve){this.points=W,this.planes=ve};to.fromInvProjectionMatrix=function(W,ve,J){var pe=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]],Ee=Math.pow(2,J),Ie=pe.map(function(Ft){return e.transformMat4([],Ft,W)}).map(function(Ft){return e.scale$1([],Ft,1/Ft[3]/ve*Ee)}),$e=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],dt=$e.map(function(Ft){var nr=e.sub([],Ie[Ft[0]],Ie[Ft[1]]),dr=e.sub([],Ie[Ft[2]],Ie[Ft[1]]),xr=e.normalize([],e.cross([],nr,dr)),Fr=-e.dot(xr,Ie[Ft[1]]);return xr.concat(Fr)});return new to(Ie,dt)};var To=function(W,ve){this.min=W,this.max=ve,this.center=e.scale$2([],e.add([],this.min,this.max),.5)};To.prototype.quadrant=function(W){for(var ve=[W%2===0,W<2],J=e.clone$2(this.min),pe=e.clone$2(this.max),Ee=0;Ee<ve.length;Ee++)J[Ee]=ve[Ee]?this.min[Ee]:this.center[Ee],pe[Ee]=ve[Ee]?this.center[Ee]:this.max[Ee];return pe[2]=this.max[2],new To(J,pe)},To.prototype.distanceX=function(W){var ve=Math.max(Math.min(this.max[0],W[0]),this.min[0]);return ve-W[0]},To.prototype.distanceY=function(W){var ve=Math.max(Math.min(this.max[1],W[1]),this.min[1]);return ve-W[1]},To.prototype.intersects=function(W){for(var ve=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],J=!0,pe=0;pe<W.planes.length;pe++){for(var Ee=W.planes[pe],Ie=0,$e=0;$e<ve.length;$e++)Ie+=e.dot$1(Ee,ve[$e])>=0;if(Ie===0)return 0;Ie!==ve.length&&(J=!1)}if(J)return 2;for(var dt=0;dt<3;dt++){for(var Ft=Number.MAX_VALUE,nr=-Number.MAX_VALUE,dr=0;dr<W.points.length;dr++){var xr=W.points[dr][dt]-this.min[dt];Ft=Math.min(Ft,xr),nr=Math.max(nr,xr)}if(nr<0||Ft>this.max[dt]-this.min[dt])return 0}return 1};var Io=function(W,ve,J,pe){if(W===void 0&&(W=0),ve===void 0&&(ve=0),J===void 0&&(J=0),pe===void 0&&(pe=0),isNaN(W)||W<0||isNaN(ve)||ve<0||isNaN(J)||J<0||isNaN(pe)||pe<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=W,this.bottom=ve,this.left=J,this.right=pe};Io.prototype.interpolate=function(W,ve,J){return ve.top!=null&&W.top!=null&&(this.top=e.number(W.top,ve.top,J)),ve.bottom!=null&&W.bottom!=null&&(this.bottom=e.number(W.bottom,ve.bottom,J)),ve.left!=null&&W.left!=null&&(this.left=e.number(W.left,ve.left,J)),ve.right!=null&&W.right!=null&&(this.right=e.number(W.right,ve.right,J)),this},Io.prototype.getCenter=function(W,ve){var J=e.clamp((this.left+W-this.right)/2,0,W),pe=e.clamp((this.top+ve-this.bottom)/2,0,ve);return new e.Point(J,pe)},Io.prototype.equals=function(W){return this.top===W.top&&this.bottom===W.bottom&&this.left===W.left&&this.right===W.right},Io.prototype.clone=function(){return new Io(this.top,this.bottom,this.left,this.right)},Io.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var Li=function(W,ve,J,pe,Ee){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=Ee===void 0?!0:Ee,this._minZoom=W||0,this._maxZoom=ve||22,this._minPitch=J==null?0:J,this._maxPitch=pe==null?60:pe,this.setMaxBounds(),this.width=0,this.height=0,this._center=new e.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Io,this._posMatrixCache={},this._alignedPosMatrixCache={}},zi={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Li.prototype.clone=function(){var W=new Li(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return W.tileSize=this.tileSize,W.latRange=this.latRange,W.width=this.width,W.height=this.height,W._center=this._center,W.zoom=this.zoom,W.angle=this.angle,W._fov=this._fov,W._pitch=this._pitch,W._unmodified=this._unmodified,W._edgeInsets=this._edgeInsets.clone(),W._calcMatrices(),W},zi.minZoom.get=function(){return this._minZoom},zi.minZoom.set=function(fe){this._minZoom!==fe&&(this._minZoom=fe,this.zoom=Math.max(this.zoom,fe))},zi.maxZoom.get=function(){return this._maxZoom},zi.maxZoom.set=function(fe){this._maxZoom!==fe&&(this._maxZoom=fe,this.zoom=Math.min(this.zoom,fe))},zi.minPitch.get=function(){return this._minPitch},zi.minPitch.set=function(fe){this._minPitch!==fe&&(this._minPitch=fe,this.pitch=Math.max(this.pitch,fe))},zi.maxPitch.get=function(){return this._maxPitch},zi.maxPitch.set=function(fe){this._maxPitch!==fe&&(this._maxPitch=fe,this.pitch=Math.min(this.pitch,fe))},zi.renderWorldCopies.get=function(){return this._renderWorldCopies},zi.renderWorldCopies.set=function(fe){fe===void 0?fe=!0:fe===null&&(fe=!1),this._renderWorldCopies=fe},zi.worldSize.get=function(){return this.tileSize*this.scale},zi.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},zi.size.get=function(){return new e.Point(this.width,this.height)},zi.bearing.get=function(){return-this.angle/Math.PI*180},zi.bearing.set=function(fe){var W=-e.wrap(fe,-180,180)*Math.PI/180;this.angle!==W&&(this._unmodified=!1,this.angle=W,this._calcMatrices(),this.rotationMatrix=e.create$2(),e.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},zi.pitch.get=function(){return this._pitch/Math.PI*180},zi.pitch.set=function(fe){var W=e.clamp(fe,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==W&&(this._unmodified=!1,this._pitch=W,this._calcMatrices())},zi.fov.get=function(){return this._fov/Math.PI*180},zi.fov.set=function(fe){fe=Math.max(.01,Math.min(60,fe)),this._fov!==fe&&(this._unmodified=!1,this._fov=fe/180*Math.PI,this._calcMatrices())},zi.zoom.get=function(){return this._zoom},zi.zoom.set=function(fe){var W=Math.min(Math.max(fe,this.minZoom),this.maxZoom);this._zoom!==W&&(this._unmodified=!1,this._zoom=W,this.scale=this.zoomScale(W),this.tileZoom=Math.floor(W),this.zoomFraction=W-this.tileZoom,this._constrain(),this._calcMatrices())},zi.center.get=function(){return this._center},zi.center.set=function(fe){fe.lat===this._center.lat&&fe.lng===this._center.lng||(this._unmodified=!1,this._center=fe,this._constrain(),this._calcMatrices())},zi.padding.get=function(){return this._edgeInsets.toJSON()},zi.padding.set=function(fe){this._edgeInsets.equals(fe)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,fe,1),this._calcMatrices())},zi.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},Li.prototype.isPaddingEqual=function(W){return this._edgeInsets.equals(W)},Li.prototype.interpolatePadding=function(W,ve,J){this._unmodified=!1,this._edgeInsets.interpolate(W,ve,J),this._constrain(),this._calcMatrices()},Li.prototype.coveringZoomLevel=function(W){var ve=(W.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/W.tileSize));return Math.max(0,ve)},Li.prototype.getVisibleUnwrappedCoordinates=function(W){var ve=[new e.UnwrappedTileID(0,W)];if(this._renderWorldCopies)for(var J=this.pointCoordinate(new e.Point(0,0)),pe=this.pointCoordinate(new e.Point(this.width,0)),Ee=this.pointCoordinate(new e.Point(this.width,this.height)),Ie=this.pointCoordinate(new e.Point(0,this.height)),$e=Math.floor(Math.min(J.x,pe.x,Ee.x,Ie.x)),dt=Math.floor(Math.max(J.x,pe.x,Ee.x,Ie.x)),Ft=1,nr=$e-Ft;nr<=dt+Ft;nr++)nr!==0&&ve.push(new e.UnwrappedTileID(nr,W));return ve},Li.prototype.coveringTiles=function(W){var ve=this.coveringZoomLevel(W),J=ve;if(W.minzoom!==void 0&&ve<W.minzoom)return[];W.maxzoom!==void 0&&ve>W.maxzoom&&(ve=W.maxzoom);var pe=e.MercatorCoordinate.fromLngLat(this.center),Ee=Math.pow(2,ve),Ie=[Ee*pe.x,Ee*pe.y,0],$e=to.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,ve),dt=W.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(dt=ve);var Ft=3,nr=function(Fa){return{aabb:new To([Fa*Ee,0,0],[(Fa+1)*Ee,Ee,0]),zoom:0,x:0,y:0,wrap:Fa,fullyVisible:!1}},dr=[],xr=[],Fr=ve,Zr=W.reparseOverscaled?J:ve;if(this._renderWorldCopies)for(var Qr=1;Qr<=3;Qr++)dr.push(nr(-Qr)),dr.push(nr(Qr));for(dr.push(nr(0));dr.length>0;){var jr=dr.pop(),rn=jr.x,mn=jr.y,Fn=jr.fullyVisible;if(!Fn){var Hn=jr.aabb.intersects($e);if(Hn===0)continue;Fn=Hn===2}var ta=jr.aabb.distanceX(Ie),ia=jr.aabb.distanceY(Ie),na=Math.max(Math.abs(ta),Math.abs(ia)),ya=Ft+(1<<Fr-jr.zoom)-2;if(jr.zoom===Fr||na>ya&&jr.zoom>=dt){xr.push({tileID:new e.OverscaledTileID(jr.zoom===Fr?Zr:jr.zoom,jr.wrap,jr.zoom,rn,mn),distanceSq:e.sqrLen([Ie[0]-.5-rn,Ie[1]-.5-mn])});continue}for(var Sa=0;Sa<4;Sa++){var Ta=(rn<<1)+Sa%2,ka=(mn<<1)+(Sa>>1);dr.push({aabb:jr.aabb.quadrant(Sa),zoom:jr.zoom+1,x:Ta,y:ka,wrap:jr.wrap,fullyVisible:Fn})}}return xr.sort(function(Fa,Za){return Fa.distanceSq-Za.distanceSq}).map(function(Fa){return Fa.tileID})},Li.prototype.resize=function(W,ve){this.width=W,this.height=ve,this.pixelsToGLUnits=[2/W,-2/ve],this._constrain(),this._calcMatrices()},zi.unmodified.get=function(){return this._unmodified},Li.prototype.zoomScale=function(W){return Math.pow(2,W)},Li.prototype.scaleZoom=function(W){return Math.log(W)/Math.LN2},Li.prototype.project=function(W){var ve=e.clamp(W.lat,-this.maxValidLatitude,this.maxValidLatitude);return new e.Point(e.mercatorXfromLng(W.lng)*this.worldSize,e.mercatorYfromLat(ve)*this.worldSize)},Li.prototype.unproject=function(W){return new e.MercatorCoordinate(W.x/this.worldSize,W.y/this.worldSize).toLngLat()},zi.point.get=function(){return this.project(this.center)},Li.prototype.setLocationAtPoint=function(W,ve){var J=this.pointCoordinate(ve),pe=this.pointCoordinate(this.centerPoint),Ee=this.locationCoordinate(W),Ie=new e.MercatorCoordinate(Ee.x-(J.x-pe.x),Ee.y-(J.y-pe.y));this.center=this.coordinateLocation(Ie),this._renderWorldCopies&&(this.center=this.center.wrap())},Li.prototype.locationPoint=function(W){return this.coordinatePoint(this.locationCoordinate(W))},Li.prototype.pointLocation=function(W){return this.coordinateLocation(this.pointCoordinate(W))},Li.prototype.locationCoordinate=function(W){return e.MercatorCoordinate.fromLngLat(W)},Li.prototype.coordinateLocation=function(W){return W.toLngLat()},Li.prototype.pointCoordinate=function(W){var ve=0,J=[W.x,W.y,0,1],pe=[W.x,W.y,1,1];e.transformMat4(J,J,this.pixelMatrixInverse),e.transformMat4(pe,pe,this.pixelMatrixInverse);var Ee=J[3],Ie=pe[3],$e=J[0]/Ee,dt=pe[0]/Ie,Ft=J[1]/Ee,nr=pe[1]/Ie,dr=J[2]/Ee,xr=pe[2]/Ie,Fr=dr===xr?0:(ve-dr)/(xr-dr);return new e.MercatorCoordinate(e.number($e,dt,Fr)/this.worldSize,e.number(Ft,nr,Fr)/this.worldSize)},Li.prototype.coordinatePoint=function(W){var ve=[W.x*this.worldSize,W.y*this.worldSize,0,1];return e.transformMat4(ve,ve,this.pixelMatrix),new e.Point(ve[0]/ve[3],ve[1]/ve[3])},Li.prototype.getBounds=function(){return new e.LngLatBounds().extend(this.pointLocation(new e.Point(0,0))).extend(this.pointLocation(new e.Point(this.width,0))).extend(this.pointLocation(new e.Point(this.width,this.height))).extend(this.pointLocation(new e.Point(0,this.height)))},Li.prototype.getMaxBounds=function(){return!this.latRange||this.latRange.length!==2||!this.lngRange||this.lngRange.length!==2?null:new e.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]])},Li.prototype.setMaxBounds=function(W){W?(this.lngRange=[W.getWest(),W.getEast()],this.latRange=[W.getSouth(),W.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},Li.prototype.calculatePosMatrix=function(W,ve){ve===void 0&&(ve=!1);var J=W.key,pe=ve?this._alignedPosMatrixCache:this._posMatrixCache;if(pe[J])return pe[J];var Ee=W.canonical,Ie=this.worldSize/this.zoomScale(Ee.z),$e=Ee.x+Math.pow(2,Ee.z)*W.wrap,dt=e.identity(new Float64Array(16));return e.translate(dt,dt,[$e*Ie,Ee.y*Ie,0]),e.scale(dt,dt,[Ie/e.EXTENT,Ie/e.EXTENT,1]),e.multiply(dt,ve?this.alignedProjMatrix:this.projMatrix,dt),pe[J]=new Float32Array(dt),pe[J]},Li.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},Li.prototype._constrain=function(){if(!(!this.center||!this.width||!this.height||this._constraining)){this._constraining=!0;var W=-90,ve=90,J=-180,pe=180,Ee,Ie,$e,dt,Ft=this.size,nr=this._unmodified;if(this.latRange){var dr=this.latRange;W=e.mercatorYfromLat(dr[1])*this.worldSize,ve=e.mercatorYfromLat(dr[0])*this.worldSize,Ee=ve-W<Ft.y?Ft.y/(ve-W):0}if(this.lngRange){var xr=this.lngRange;J=e.mercatorXfromLng(xr[0])*this.worldSize,pe=e.mercatorXfromLng(xr[1])*this.worldSize,Ie=pe-J<Ft.x?Ft.x/(pe-J):0}var Fr=this.point,Zr=Math.max(Ie||0,Ee||0);if(Zr){this.center=this.unproject(new e.Point(Ie?(pe+J)/2:Fr.x,Ee?(ve+W)/2:Fr.y)),this.zoom+=this.scaleZoom(Zr),this._unmodified=nr,this._constraining=!1;return}if(this.latRange){var Qr=Fr.y,jr=Ft.y/2;Qr-jr<W&&(dt=W+jr),Qr+jr>ve&&(dt=ve-jr)}if(this.lngRange){var rn=Fr.x,mn=Ft.x/2;rn-mn<J&&($e=J+mn),rn+mn>pe&&($e=pe-mn)}($e!==void 0||dt!==void 0)&&(this.center=this.unproject(new e.Point($e!==void 0?$e:Fr.x,dt!==void 0?dt:Fr.y))),this._unmodified=nr,this._constraining=!1}},Li.prototype._calcMatrices=function(){if(!!this.height){var W=this._fov/2,ve=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(W)*this.height;var J=Math.PI/2+this._pitch,pe=this._fov*(.5+ve.y/this.height),Ee=Math.sin(pe)*this.cameraToCenterDistance/Math.sin(e.clamp(Math.PI-J-pe,.01,Math.PI-.01)),Ie=this.point,$e=Ie.x,dt=Ie.y,Ft=Math.cos(Math.PI/2-this._pitch)*Ee+this.cameraToCenterDistance,nr=Ft*1.01,dr=this.height/50,xr=new Float64Array(16);e.perspective(xr,this._fov,this.width/this.height,dr,nr),xr[8]=-ve.x*2/this.width,xr[9]=ve.y*2/this.height,e.scale(xr,xr,[1,-1,1]),e.translate(xr,xr,[0,0,-this.cameraToCenterDistance]),e.rotateX(xr,xr,this._pitch),e.rotateZ(xr,xr,this.angle),e.translate(xr,xr,[-$e,-dt,0]),this.mercatorMatrix=e.scale([],xr,[this.worldSize,this.worldSize,this.worldSize]),e.scale(xr,xr,[1,1,e.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=xr,this.invProjMatrix=e.invert([],this.projMatrix);var Fr=this.width%2/2,Zr=this.height%2/2,Qr=Math.cos(this.angle),jr=Math.sin(this.angle),rn=$e-Math.round($e)+Qr*Fr+jr*Zr,mn=dt-Math.round(dt)+Qr*Zr+jr*Fr,Fn=new Float64Array(xr);if(e.translate(Fn,Fn,[rn>.5?rn-1:rn,mn>.5?mn-1:mn,0]),this.alignedProjMatrix=Fn,xr=e.create(),e.scale(xr,xr,[this.width/2,-this.height/2,1]),e.translate(xr,xr,[1,-1,0]),this.labelPlaneMatrix=xr,xr=e.create(),e.scale(xr,xr,[1,-1,1]),e.translate(xr,xr,[-1,-1,0]),e.scale(xr,xr,[2/this.width,2/this.height,1]),this.glCoordMatrix=xr,this.pixelMatrix=e.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),xr=e.invert(new Float64Array(16),this.pixelMatrix),!xr)throw new Error("failed to invert matrix");this.pixelMatrixInverse=xr,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Li.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var W=this.pointCoordinate(new e.Point(0,0)),ve=[W.x*this.worldSize,W.y*this.worldSize,0,1],J=e.transformMat4(ve,ve,this.pixelMatrix);return J[3]/this.cameraToCenterDistance},Li.prototype.getCameraPoint=function(){var W=this._pitch,ve=Math.tan(W)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new e.Point(0,ve))},Li.prototype.getCameraQueryGeometry=function(W){var ve=this.getCameraPoint();if(W.length===1)return[W[0],ve];for(var J=ve.x,pe=ve.y,Ee=ve.x,Ie=ve.y,$e=0,dt=W;$e<dt.length;$e+=1){var Ft=dt[$e];J=Math.min(J,Ft.x),pe=Math.min(pe,Ft.y),Ee=Math.max(Ee,Ft.x),Ie=Math.max(Ie,Ft.y)}return[new e.Point(J,pe),new e.Point(Ee,pe),new e.Point(Ee,Ie),new e.Point(J,Ie),new e.Point(J,pe)]},Object.defineProperties(Li.prototype,zi);function Ps(fe,W){var ve=!1,J=null,pe=function(){J=null,ve&&(fe(),J=setTimeout(pe,W),ve=!1)};return function(){return ve=!0,J||pe(),J}}var Co=function(W){this._hashName=W&&encodeURIComponent(W),e.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=Ps(this._updateHashUnthrottled.bind(this),30*1e3/100)};Co.prototype.addTo=function(W){return this._map=W,e.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Co.prototype.remove=function(){return e.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Co.prototype.getHashString=function(W){var ve=this._map.getCenter(),J=Math.round(this._map.getZoom()*100)/100,pe=Math.ceil((J*Math.LN2+Math.log(512/360/.5))/Math.LN10),Ee=Math.pow(10,pe),Ie=Math.round(ve.lng*Ee)/Ee,$e=Math.round(ve.lat*Ee)/Ee,dt=this._map.getBearing(),Ft=this._map.getPitch(),nr="";if(W?nr+="/"+Ie+"/"+$e+"/"+J:nr+=J+"/"+$e+"/"+Ie,(dt||Ft)&&(nr+="/"+Math.round(dt*10)/10),Ft&&(nr+="/"+Math.round(Ft)),this._hashName){var dr=this._hashName,xr=!1,Fr=e.window.location.hash.slice(1).split("&").map(function(Zr){var Qr=Zr.split("=")[0];return Qr===dr?(xr=!0,Qr+"="+nr):Zr}).filter(function(Zr){return Zr});return xr||Fr.push(dr+"="+nr),"#"+Fr.join("&")}return"#"+nr},Co.prototype._getCurrentHash=function(){var W=this,ve=e.window.location.hash.replace("#","");if(this._hashName){var J;return ve.split("&").map(function(pe){return pe.split("=")}).forEach(function(pe){pe[0]===W._hashName&&(J=pe)}),(J&&J[1]||"").split("/")}return ve.split("/")},Co.prototype._onHashChange=function(){var W=this._getCurrentHash();if(W.length>=3&&!W.some(function(J){return isNaN(J)})){var ve=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(W[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+W[2],+W[1]],zoom:+W[0],bearing:ve,pitch:+(W[4]||0)}),!0}return!1},Co.prototype._updateHashUnthrottled=function(){var W=this.getHashString();try{e.window.history.replaceState(e.window.history.state,"",W)}catch{}};var Yo={linearity:.3,easing:e.bezier(0,0,.3,1)},ls=e.extend({deceleration:2500,maxSpeed:1400},Yo),le=e.extend({deceleration:20,maxSpeed:1400},Yo),_e=e.extend({deceleration:1e3,maxSpeed:360},Yo),De=e.extend({deceleration:1e3,maxSpeed:90},Yo),Ue=function(W){this._map=W,this.clear()};Ue.prototype.clear=function(){this._inertiaBuffer=[]},Ue.prototype.record=function(W){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:e.browser.now(),settings:W})},Ue.prototype._drainInertiaBuffer=function(){for(var W=this._inertiaBuffer,ve=e.browser.now(),J=160;W.length>0&&ve-W[0].time>J;)W.shift()},Ue.prototype._onMoveEnd=function(W){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var ve={zoom:0,bearing:0,pitch:0,pan:new e.Point(0,0),pinchAround:void 0,around:void 0},J=0,pe=this._inertiaBuffer;J<pe.length;J+=1){var Ee=pe[J],Ie=Ee.settings;ve.zoom+=Ie.zoomDelta||0,ve.bearing+=Ie.bearingDelta||0,ve.pitch+=Ie.pitchDelta||0,Ie.panDelta&&ve.pan._add(Ie.panDelta),Ie.around&&(ve.around=Ie.around),Ie.pinchAround&&(ve.pinchAround=Ie.pinchAround)}var $e=this._inertiaBuffer[this._inertiaBuffer.length-1],dt=$e.time-this._inertiaBuffer[0].time,Ft={};if(ve.pan.mag()){var nr=qe(ve.pan.mag(),dt,e.extend({},ls,W||{}));Ft.offset=ve.pan.mult(nr.amount/ve.pan.mag()),Ft.center=this._map.transform.center,Be(Ft,nr)}if(ve.zoom){var dr=qe(ve.zoom,dt,le);Ft.zoom=this._map.transform.zoom+dr.amount,Be(Ft,dr)}if(ve.bearing){var xr=qe(ve.bearing,dt,_e);Ft.bearing=this._map.transform.bearing+e.clamp(xr.amount,-179,179),Be(Ft,xr)}if(ve.pitch){var Fr=qe(ve.pitch,dt,De);Ft.pitch=this._map.transform.pitch+Fr.amount,Be(Ft,Fr)}if(Ft.zoom||Ft.bearing){var Zr=ve.pinchAround===void 0?ve.around:ve.pinchAround;Ft.around=Zr?this._map.unproject(Zr):this._map.getCenter()}return this.clear(),e.extend(Ft,{noMoveStart:!0})}};function Be(fe,W){(!fe.duration||fe.duration<W.duration)&&(fe.duration=W.duration,fe.easing=W.easing)}function qe(fe,W,ve){var J=ve.maxSpeed,pe=ve.linearity,Ee=ve.deceleration,Ie=e.clamp(fe*pe/(W/1e3),-J,J),$e=Math.abs(Ie)/(Ee*pe);return{easing:ve.easing,duration:$e*1e3,amount:Ie*($e/2)}}var Mt=function(fe){function W(J,pe,Ee,Ie){Ie===void 0&&(Ie={});var $e=n.mousePos(pe.getCanvasContainer(),Ee),dt=pe.unproject($e);fe.call(this,J,e.extend({point:$e,lngLat:dt,originalEvent:Ee},Ie)),this._defaultPrevented=!1,this.target=pe}fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W;var ve={defaultPrevented:{configurable:!0}};return W.prototype.preventDefault=function(){this._defaultPrevented=!0},ve.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(W.prototype,ve),W}(e.Event),mt=function(fe){function W(J,pe,Ee){var Ie=J==="touchend"?Ee.changedTouches:Ee.touches,$e=n.touchPos(pe.getCanvasContainer(),Ie),dt=$e.map(function(dr){return pe.unproject(dr)}),Ft=$e.reduce(function(dr,xr,Fr,Zr){return dr.add(xr.div(Zr.length))},new e.Point(0,0)),nr=pe.unproject(Ft);fe.call(this,J,{points:$e,point:Ft,lngLats:dt,lngLat:nr,originalEvent:Ee}),this._defaultPrevented=!1}fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W;var ve={defaultPrevented:{configurable:!0}};return W.prototype.preventDefault=function(){this._defaultPrevented=!0},ve.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(W.prototype,ve),W}(e.Event),Ot=function(fe){function W(J,pe,Ee){fe.call(this,J,{originalEvent:Ee}),this._defaultPrevented=!1}fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W;var ve={defaultPrevented:{configurable:!0}};return W.prototype.preventDefault=function(){this._defaultPrevented=!0},ve.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(W.prototype,ve),W}(e.Event),er=function(W,ve){this._map=W,this._clickTolerance=ve.clickTolerance};er.prototype.reset=function(){delete this._mousedownPos},er.prototype.wheel=function(W){return this._firePreventable(new Ot(W.type,this._map,W))},er.prototype.mousedown=function(W,ve){return this._mousedownPos=ve,this._firePreventable(new Mt(W.type,this._map,W))},er.prototype.mouseup=function(W){this._map.fire(new Mt(W.type,this._map,W))},er.prototype.click=function(W,ve){this._mousedownPos&&this._mousedownPos.dist(ve)>=this._clickTolerance||this._map.fire(new Mt(W.type,this._map,W))},er.prototype.dblclick=function(W){return this._firePreventable(new Mt(W.type,this._map,W))},er.prototype.mouseover=function(W){this._map.fire(new Mt(W.type,this._map,W))},er.prototype.mouseout=function(W){this._map.fire(new Mt(W.type,this._map,W))},er.prototype.touchstart=function(W){return this._firePreventable(new mt(W.type,this._map,W))},er.prototype.touchmove=function(W){this._map.fire(new mt(W.type,this._map,W))},er.prototype.touchend=function(W){this._map.fire(new mt(W.type,this._map,W))},er.prototype.touchcancel=function(W){this._map.fire(new mt(W.type,this._map,W))},er.prototype._firePreventable=function(W){if(this._map.fire(W),W.defaultPrevented)return{}},er.prototype.isEnabled=function(){return!0},er.prototype.isActive=function(){return!1},er.prototype.enable=function(){},er.prototype.disable=function(){};var or=function(W){this._map=W};or.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},or.prototype.mousemove=function(W){this._map.fire(new Mt(W.type,this._map,W))},or.prototype.mousedown=function(){this._delayContextMenu=!0},or.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Mt("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},or.prototype.contextmenu=function(W){this._delayContextMenu?this._contextMenuEvent=W:this._map.fire(new Mt(W.type,this._map,W)),this._map.listens("contextmenu")&&W.preventDefault()},or.prototype.isEnabled=function(){return!0},or.prototype.isActive=function(){return!1},or.prototype.enable=function(){},or.prototype.disable=function(){};var sr=function(W,ve){this._map=W,this._el=W.getCanvasContainer(),this._container=W.getContainer(),this._clickTolerance=ve.clickTolerance||1};sr.prototype.isEnabled=function(){return!!this._enabled},sr.prototype.isActive=function(){return!!this._active},sr.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},sr.prototype.disable=function(){!this.isEnabled()||(this._enabled=!1)},sr.prototype.mousedown=function(W,ve){!this.isEnabled()||!(W.shiftKey&&W.button===0)||(n.disableDrag(),this._startPos=this._lastPos=ve,this._active=!0)},sr.prototype.mousemoveWindow=function(W,ve){if(!!this._active){var J=ve;if(!(this._lastPos.equals(J)||!this._box&&J.dist(this._startPos)<this._clickTolerance)){var pe=this._startPos;this._lastPos=J,this._box||(this._box=n.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",W));var Ee=Math.min(pe.x,J.x),Ie=Math.max(pe.x,J.x),$e=Math.min(pe.y,J.y),dt=Math.max(pe.y,J.y);n.setTransform(this._box,"translate("+Ee+"px,"+$e+"px)"),this._box.style.width=Ie-Ee+"px",this._box.style.height=dt-$e+"px"}}},sr.prototype.mouseupWindow=function(W,ve){var J=this;if(!!this._active&&W.button===0){var pe=this._startPos,Ee=ve;if(this.reset(),n.suppressClick(),pe.x===Ee.x&&pe.y===Ee.y)this._fireEvent("boxzoomcancel",W);else return this._map.fire(new e.Event("boxzoomend",{originalEvent:W})),{cameraAnimation:function(Ie){return Ie.fitScreenCoordinates(pe,Ee,J._map.getBearing(),{linear:!0})}}}},sr.prototype.keydown=function(W){!this._active||W.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",W))},sr.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(n.remove(this._box),this._box=null),n.enableDrag(),delete this._startPos,delete this._lastPos},sr.prototype._fireEvent=function(W,ve){return this._map.fire(new e.Event(W,{originalEvent:ve}))};function Lr(fe,W){for(var ve={},J=0;J<fe.length;J++)ve[fe[J].identifier]=W[J];return ve}function nn(fe){for(var W=new e.Point(0,0),ve=0,J=fe;ve<J.length;ve+=1){var pe=J[ve];W._add(pe)}return W.div(fe.length)}var pn=500,zr=500,Wr=30,qr=function(W){this.reset(),this.numTouches=W.numTouches};qr.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},qr.prototype.touchstart=function(W,ve,J){(this.centroid||J.length>this.numTouches)&&(this.aborted=!0),!this.aborted&&(this.startTime===void 0&&(this.startTime=W.timeStamp),J.length===this.numTouches&&(this.centroid=nn(ve),this.touches=Lr(J,ve)))},qr.prototype.touchmove=function(W,ve,J){if(!(this.aborted||!this.centroid)){var pe=Lr(J,ve);for(var Ee in this.touches){var Ie=this.touches[Ee],$e=pe[Ee];(!$e||$e.dist(Ie)>Wr)&&(this.aborted=!0)}}},qr.prototype.touchend=function(W,ve,J){if((!this.centroid||W.timeStamp-this.startTime>zr)&&(this.aborted=!0),J.length===0){var pe=!this.aborted&&this.centroid;if(this.reset(),pe)return pe}};var fn=function(W){this.singleTap=new qr(W),this.numTaps=W.numTaps,this.reset()};fn.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},fn.prototype.touchstart=function(W,ve,J){this.singleTap.touchstart(W,ve,J)},fn.prototype.touchmove=function(W,ve,J){this.singleTap.touchmove(W,ve,J)},fn.prototype.touchend=function(W,ve,J){var pe=this.singleTap.touchend(W,ve,J);if(pe){var Ee=W.timeStamp-this.lastTime<pn,Ie=!this.lastTap||this.lastTap.dist(pe)<Wr;if((!Ee||!Ie)&&this.reset(),this.count++,this.lastTime=W.timeStamp,this.lastTap=pe,this.count===this.numTaps)return this.reset(),pe}};var hn=function(){this._zoomIn=new fn({numTouches:1,numTaps:2}),this._zoomOut=new fn({numTouches:2,numTaps:1}),this.reset()};hn.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},hn.prototype.touchstart=function(W,ve,J){this._zoomIn.touchstart(W,ve,J),this._zoomOut.touchstart(W,ve,J)},hn.prototype.touchmove=function(W,ve,J){this._zoomIn.touchmove(W,ve,J),this._zoomOut.touchmove(W,ve,J)},hn.prototype.touchend=function(W,ve,J){var pe=this,Ee=this._zoomIn.touchend(W,ve,J),Ie=this._zoomOut.touchend(W,ve,J);if(Ee)return this._active=!0,W.preventDefault(),setTimeout(function(){return pe.reset()},0),{cameraAnimation:function($e){return $e.easeTo({duration:300,zoom:$e.getZoom()+1,around:$e.unproject(Ee)},{originalEvent:W})}};if(Ie)return this._active=!0,W.preventDefault(),setTimeout(function(){return pe.reset()},0),{cameraAnimation:function($e){return $e.easeTo({duration:300,zoom:$e.getZoom()-1,around:$e.unproject(Ie)},{originalEvent:W})}}},hn.prototype.touchcancel=function(){this.reset()},hn.prototype.enable=function(){this._enabled=!0},hn.prototype.disable=function(){this._enabled=!1,this.reset()},hn.prototype.isEnabled=function(){return this._enabled},hn.prototype.isActive=function(){return this._active};var tn=0,jn=2,la=function(W){this.reset(),this._clickTolerance=W.clickTolerance||1};la.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},la.prototype._correctButton=function(W,ve){return!1},la.prototype._move=function(W,ve){return{}},la.prototype.mousedown=function(W,ve){if(!this._lastPoint){var J=n.mouseButton(W);!this._correctButton(W,J)||(this._lastPoint=ve,this._eventButton=J)}},la.prototype.mousemoveWindow=function(W,ve){var J=this._lastPoint;if(!!J&&(W.preventDefault(),!(!this._moved&&ve.dist(J)<this._clickTolerance)))return this._moved=!0,this._lastPoint=ve,this._move(J,ve)},la.prototype.mouseupWindow=function(W){var ve=n.mouseButton(W);ve===this._eventButton&&(this._moved&&n.suppressClick(),this.reset())},la.prototype.enable=function(){this._enabled=!0},la.prototype.disable=function(){this._enabled=!1,this.reset()},la.prototype.isEnabled=function(){return this._enabled},la.prototype.isActive=function(){return this._active};var Ea=function(fe){function W(){fe.apply(this,arguments)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.mousedown=function(J,pe){fe.prototype.mousedown.call(this,J,pe),this._lastPoint&&(this._active=!0)},W.prototype._correctButton=function(J,pe){return pe===tn&&!J.ctrlKey},W.prototype._move=function(J,pe){return{around:pe,panDelta:pe.sub(J)}},W}(la),ca=function(fe){function W(){fe.apply(this,arguments)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype._correctButton=function(J,pe){return pe===tn&&J.ctrlKey||pe===jn},W.prototype._move=function(J,pe){var Ee=.8,Ie=(pe.x-J.x)*Ee;if(Ie)return this._active=!0,{bearingDelta:Ie}},W.prototype.contextmenu=function(J){J.preventDefault()},W}(la),Ra=function(fe){function W(){fe.apply(this,arguments)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype._correctButton=function(J,pe){return pe===tn&&J.ctrlKey||pe===jn},W.prototype._move=function(J,pe){var Ee=-.5,Ie=(pe.y-J.y)*Ee;if(Ie)return this._active=!0,{pitchDelta:Ie}},W.prototype.contextmenu=function(J){J.preventDefault()},W}(la),pa=function(W){this._minTouches=1,this._clickTolerance=W.clickTolerance||1,this.reset()};pa.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new e.Point(0,0)},pa.prototype.touchstart=function(W,ve,J){return this._calculateTransform(W,ve,J)},pa.prototype.touchmove=function(W,ve,J){if(!!this._active)return W.preventDefault(),this._calculateTransform(W,ve,J)},pa.prototype.touchend=function(W,ve,J){this._calculateTransform(W,ve,J),this._active&&J.length<this._minTouches&&this.reset()},pa.prototype.touchcancel=function(){this.reset()},pa.prototype._calculateTransform=function(W,ve,J){J.length>0&&(this._active=!0);var pe=Lr(J,ve),Ee=new e.Point(0,0),Ie=new e.Point(0,0),$e=0;for(var dt in pe){var Ft=pe[dt],nr=this._touches[dt];nr&&(Ee._add(Ft),Ie._add(Ft.sub(nr)),$e++,pe[dt]=Ft)}if(this._touches=pe,!($e<this._minTouches||!Ie.mag())){var dr=Ie.div($e);if(this._sum._add(dr),!(this._sum.mag()<this._clickTolerance)){var xr=Ee.div($e);return{around:xr,panDelta:dr}}}},pa.prototype.enable=function(){this._enabled=!0},pa.prototype.disable=function(){this._enabled=!1,this.reset()},pa.prototype.isEnabled=function(){return this._enabled},pa.prototype.isActive=function(){return this._active};var ja=function(){this.reset()};ja.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},ja.prototype._start=function(W){},ja.prototype._move=function(W,ve,J){return{}},ja.prototype.touchstart=function(W,ve,J){this._firstTwoTouches||J.length<2||(this._firstTwoTouches=[J[0].identifier,J[1].identifier],this._start([ve[0],ve[1]]))},ja.prototype.touchmove=function(W,ve,J){if(!!this._firstTwoTouches){W.preventDefault();var pe=this._firstTwoTouches,Ee=pe[0],Ie=pe[1],$e=Oa(J,ve,Ee),dt=Oa(J,ve,Ie);if(!(!$e||!dt)){var Ft=this._aroundCenter?null:$e.add(dt).div(2);return this._move([$e,dt],Ft,W)}}},ja.prototype.touchend=function(W,ve,J){if(!!this._firstTwoTouches){var pe=this._firstTwoTouches,Ee=pe[0],Ie=pe[1],$e=Oa(J,ve,Ee),dt=Oa(J,ve,Ie);$e&&dt||(this._active&&n.suppressClick(),this.reset())}},ja.prototype.touchcancel=function(){this.reset()},ja.prototype.enable=function(W){this._enabled=!0,this._aroundCenter=!!W&&W.around==="center"},ja.prototype.disable=function(){this._enabled=!1,this.reset()},ja.prototype.isEnabled=function(){return this._enabled},ja.prototype.isActive=function(){return this._active};function Oa(fe,W,ve){for(var J=0;J<fe.length;J++)if(fe[J].identifier===ve)return W[J]}var ii=.1;function Ei(fe,W){return Math.log(fe/W)/Math.LN2}var Ao=function(fe){function W(){fe.apply(this,arguments)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.reset=function(){fe.prototype.reset.call(this),delete this._distance,delete this._startDistance},W.prototype._start=function(J){this._startDistance=this._distance=J[0].dist(J[1])},W.prototype._move=function(J,pe){var Ee=this._distance;if(this._distance=J[0].dist(J[1]),!(!this._active&&Math.abs(Ei(this._distance,this._startDistance))<ii))return this._active=!0,{zoomDelta:Ei(this._distance,Ee),pinchAround:pe}},W}(ja),ji=25;function ga(fe,W){return fe.angleWith(W)*180/Math.PI}var hi=function(fe){function W(){fe.apply(this,arguments)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.reset=function(){fe.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},W.prototype._start=function(J){this._startVector=this._vector=J[0].sub(J[1]),this._minDiameter=J[0].dist(J[1])},W.prototype._move=function(J,pe){var Ee=this._vector;if(this._vector=J[0].sub(J[1]),!(!this._active&&this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:ga(this._vector,Ee),pinchAround:pe}},W.prototype._isBelowThreshold=function(J){this._minDiameter=Math.min(this._minDiameter,J.mag());var pe=Math.PI*this._minDiameter,Ee=ji/pe*360,Ie=ga(J,this._startVector);return Math.abs(Ie)<Ee},W}(ja);function qa(fe){return Math.abs(fe.y)>Math.abs(fe.x)}var Oi=100,di=function(fe){function W(){fe.apply(this,arguments)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.reset=function(){fe.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},W.prototype._start=function(J){this._lastPoints=J,qa(J[0].sub(J[1]))&&(this._valid=!1)},W.prototype._move=function(J,pe,Ee){var Ie=J[0].sub(this._lastPoints[0]),$e=J[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(Ie,$e,Ee.timeStamp),!!this._valid){this._lastPoints=J,this._active=!0;var dt=(Ie.y+$e.y)/2,Ft=-.5;return{pitchDelta:dt*Ft}}},W.prototype.gestureBeginsVertically=function(J,pe,Ee){if(this._valid!==void 0)return this._valid;var Ie=2,$e=J.mag()>=Ie,dt=pe.mag()>=Ie;if(!(!$e&&!dt)){if(!$e||!dt)return this._firstMove===void 0&&(this._firstMove=Ee),Ee-this._firstMove<Oi?void 0:!1;var Ft=J.y>0==pe.y>0;return qa(J)&&qa(pe)&&Ft}},W}(ja),xo={panStep:100,bearingStep:15,pitchStep:10},fo=function(){var W=xo;this._panStep=W.panStep,this._bearingStep=W.bearingStep,this._pitchStep=W.pitchStep};fo.prototype.reset=function(){this._active=!1},fo.prototype.keydown=function(W){var ve=this;if(!(W.altKey||W.ctrlKey||W.metaKey)){var J=0,pe=0,Ee=0,Ie=0,$e=0;switch(W.keyCode){case 61:case 107:case 171:case 187:J=1;break;case 189:case 109:case 173:J=-1;break;case 37:W.shiftKey?pe=-1:(W.preventDefault(),Ie=-1);break;case 39:W.shiftKey?pe=1:(W.preventDefault(),Ie=1);break;case 38:W.shiftKey?Ee=1:(W.preventDefault(),$e=-1);break;case 40:W.shiftKey?Ee=-1:(W.preventDefault(),$e=1);break;default:return}return{cameraAnimation:function(dt){var Ft=dt.getZoom();dt.easeTo({duration:300,easeId:"keyboardHandler",easing:ko,zoom:J?Math.round(Ft)+J*(W.shiftKey?2:1):Ft,bearing:dt.getBearing()+pe*ve._bearingStep,pitch:dt.getPitch()+Ee*ve._pitchStep,offset:[-Ie*ve._panStep,-$e*ve._panStep],center:dt.getCenter()},{originalEvent:W})}}}},fo.prototype.enable=function(){this._enabled=!0},fo.prototype.disable=function(){this._enabled=!1,this.reset()},fo.prototype.isEnabled=function(){return this._enabled},fo.prototype.isActive=function(){return this._active};function ko(fe){return fe*(2-fe)}var us=4.000244140625,qo=1/100,fs=1/450,ro=2,Qi=function(W,ve){this._map=W,this._el=W.getCanvasContainer(),this._handler=ve,this._delta=0,this._defaultZoomRate=qo,this._wheelZoomRate=fs,e.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};Qi.prototype.setZoomRate=function(W){this._defaultZoomRate=W},Qi.prototype.setWheelZoomRate=function(W){this._wheelZoomRate=W},Qi.prototype.isEnabled=function(){return!!this._enabled},Qi.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},Qi.prototype.isZooming=function(){return!!this._zooming},Qi.prototype.enable=function(W){this.isEnabled()||(this._enabled=!0,this._aroundCenter=W&&W.around==="center")},Qi.prototype.disable=function(){!this.isEnabled()||(this._enabled=!1)},Qi.prototype.wheel=function(W){if(!!this.isEnabled()){var ve=W.deltaMode===e.window.WheelEvent.DOM_DELTA_LINE?W.deltaY*40:W.deltaY,J=e.browser.now(),pe=J-(this._lastWheelEventTime||0);this._lastWheelEventTime=J,ve!==0&&ve%us===0?this._type="wheel":ve!==0&&Math.abs(ve)<4?this._type="trackpad":pe>400?(this._type=null,this._lastValue=ve,this._timeout=setTimeout(this._onTimeout,40,W)):this._type||(this._type=Math.abs(pe*ve)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,ve+=this._lastValue)),W.shiftKey&&ve&&(ve=ve/4),this._type&&(this._lastWheelEvent=W,this._delta-=ve,this._active||this._start(W)),W.preventDefault()}},Qi.prototype._onTimeout=function(W){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(W)},Qi.prototype._start=function(W){if(!!this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var ve=n.mousePos(this._el,W);this._around=e.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(ve)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},Qi.prototype.renderFrame=function(){return this._onScrollFrame()},Qi.prototype._onScrollFrame=function(){var W=this;if(!!this._frameId&&(this._frameId=null,!!this.isActive())){var ve=this._map.transform;if(this._delta!==0){var J=this._type==="wheel"&&Math.abs(this._delta)>us?this._wheelZoomRate:this._defaultZoomRate,pe=ro/(1+Math.exp(-Math.abs(this._delta*J)));this._delta<0&&pe!==0&&(pe=1/pe);var Ee=typeof this._targetZoom=="number"?ve.zoomScale(this._targetZoom):ve.scale;this._targetZoom=Math.min(ve.maxZoom,Math.max(ve.minZoom,ve.scaleZoom(Ee*pe))),this._type==="wheel"&&(this._startZoom=ve.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var Ie=typeof this._targetZoom=="number"?this._targetZoom:ve.zoom,$e=this._startZoom,dt=this._easing,Ft=!1,nr;if(this._type==="wheel"&&$e&&dt){var dr=Math.min((e.browser.now()-this._lastWheelEventTime)/200,1),xr=dt(dr);nr=e.number($e,Ie,xr),dr<1?this._frameId||(this._frameId=!0):Ft=!0}else nr=Ie,Ft=!0;return this._active=!0,Ft&&(this._active=!1,this._finishTimeout=setTimeout(function(){W._zooming=!1,W._handler._triggerRenderFrame(),delete W._targetZoom,delete W._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!Ft,zoomDelta:nr-ve.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},Qi.prototype._smoothOutEasing=function(W){var ve=e.ease;if(this._prevEase){var J=this._prevEase,pe=(e.browser.now()-J.start)/J.duration,Ee=J.easing(pe+.01)-J.easing(pe),Ie=.27/Math.sqrt(Ee*Ee+1e-4)*.01,$e=Math.sqrt(.27*.27-Ie*Ie);ve=e.bezier(Ie,$e,.25,1)}return this._prevEase={start:e.browser.now(),duration:W,easing:ve},ve},Qi.prototype.reset=function(){this._active=!1};var Ua=function(W,ve){this._clickZoom=W,this._tapZoom=ve};Ua.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Ua.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Ua.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Ua.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var ei=function(){this.reset()};ei.prototype.reset=function(){this._active=!1},ei.prototype.dblclick=function(W,ve){return W.preventDefault(),{cameraAnimation:function(J){J.easeTo({duration:300,zoom:J.getZoom()+(W.shiftKey?-1:1),around:J.unproject(ve)},{originalEvent:W})}}},ei.prototype.enable=function(){this._enabled=!0},ei.prototype.disable=function(){this._enabled=!1,this.reset()},ei.prototype.isEnabled=function(){return this._enabled},ei.prototype.isActive=function(){return this._active};var Do=function(){this._tap=new fn({numTouches:1,numTaps:1}),this.reset()};Do.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},Do.prototype.touchstart=function(W,ve,J){this._swipePoint||(this._tapTime&&W.timeStamp-this._tapTime>pn&&this.reset(),this._tapTime?J.length>0&&(this._swipePoint=ve[0],this._swipeTouch=J[0].identifier):this._tap.touchstart(W,ve,J))},Do.prototype.touchmove=function(W,ve,J){if(!this._tapTime)this._tap.touchmove(W,ve,J);else if(this._swipePoint){if(J[0].identifier!==this._swipeTouch)return;var pe=ve[0],Ee=pe.y-this._swipePoint.y;return this._swipePoint=pe,W.preventDefault(),this._active=!0,{zoomDelta:Ee/128}}},Do.prototype.touchend=function(W,ve,J){if(this._tapTime)this._swipePoint&&J.length===0&&this.reset();else{var pe=this._tap.touchend(W,ve,J);pe&&(this._tapTime=W.timeStamp)}},Do.prototype.touchcancel=function(){this.reset()},Do.prototype.enable=function(){this._enabled=!0},Do.prototype.disable=function(){this._enabled=!1,this.reset()},Do.prototype.isEnabled=function(){return this._enabled},Do.prototype.isActive=function(){return this._active};var vo=function(W,ve,J){this._el=W,this._mousePan=ve,this._touchPan=J};vo.prototype.enable=function(W){this._inertiaOptions=W||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},vo.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},vo.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},vo.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var Wo=function(W,ve,J){this._pitchWithRotate=W.pitchWithRotate,this._mouseRotate=ve,this._mousePitch=J};Wo.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},Wo.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},Wo.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},Wo.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var io=function(W,ve,J,pe){this._el=W,this._touchZoom=ve,this._touchRotate=J,this._tapDragZoom=pe,this._rotationDisabled=!1,this._enabled=!0};io.prototype.enable=function(W){this._touchZoom.enable(W),this._rotationDisabled||this._touchRotate.enable(W),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},io.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},io.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},io.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},io.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},io.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var cs=function(fe){return fe.zoom||fe.drag||fe.pitch||fe.rotate},Us=function(fe){function W(){fe.apply(this,arguments)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W}(e.Event);function gu(fe){return fe.panDelta&&fe.panDelta.mag()||fe.zoomDelta||fe.bearingDelta||fe.pitchDelta}var oo=function(W,ve){this._map=W,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Ue(W),this._bearingSnap=ve.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(ve),e.bindAll(["handleEvent","handleWindowEvent"],this);var J=this._el;this._listeners=[[J,"touchstart",{passive:!1}],[J,"touchmove",{passive:!1}],[J,"touchend",void 0],[J,"touchcancel",void 0],[J,"mousedown",void 0],[J,"mousemove",void 0],[J,"mouseup",void 0],[e.window.document,"mousemove",{capture:!0}],[e.window.document,"mouseup",void 0],[J,"mouseover",void 0],[J,"mouseout",void 0],[J,"dblclick",void 0],[J,"click",void 0],[J,"keydown",{capture:!1}],[J,"keyup",void 0],[J,"wheel",{passive:!1}],[J,"contextmenu",void 0],[e.window,"blur",void 0]];for(var pe=0,Ee=this._listeners;pe<Ee.length;pe+=1){var Ie=Ee[pe],$e=Ie[0],dt=Ie[1],Ft=Ie[2];n.addEventListener($e,dt,$e===e.window.document?this.handleWindowEvent:this.handleEvent,Ft)}};oo.prototype.destroy=function(){for(var W=0,ve=this._listeners;W<ve.length;W+=1){var J=ve[W],pe=J[0],Ee=J[1],Ie=J[2];n.removeEventListener(pe,Ee,pe===e.window.document?this.handleWindowEvent:this.handleEvent,Ie)}},oo.prototype._addDefaultHandlers=function(W){var ve=this._map,J=ve.getCanvasContainer();this._add("mapEvent",new er(ve,W));var pe=ve.boxZoom=new sr(ve,W);this._add("boxZoom",pe);var Ee=new hn,Ie=new ei;ve.doubleClickZoom=new Ua(Ie,Ee),this._add("tapZoom",Ee),this._add("clickZoom",Ie);var $e=new Do;this._add("tapDragZoom",$e);var dt=ve.touchPitch=new di;this._add("touchPitch",dt);var Ft=new ca(W),nr=new Ra(W);ve.dragRotate=new Wo(W,Ft,nr),this._add("mouseRotate",Ft,["mousePitch"]),this._add("mousePitch",nr,["mouseRotate"]);var dr=new Ea(W),xr=new pa(W);ve.dragPan=new vo(J,dr,xr),this._add("mousePan",dr),this._add("touchPan",xr,["touchZoom","touchRotate"]);var Fr=new hi,Zr=new Ao;ve.touchZoomRotate=new io(J,Zr,Fr,$e),this._add("touchRotate",Fr,["touchPan","touchZoom"]),this._add("touchZoom",Zr,["touchPan","touchRotate"]);var Qr=ve.scrollZoom=new Qi(ve,this);this._add("scrollZoom",Qr,["mousePan"]);var jr=ve.keyboard=new fo;this._add("keyboard",jr),this._add("blockableMapEvent",new or(ve));for(var rn=0,mn=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];rn<mn.length;rn+=1){var Fn=mn[rn];W.interactive&&W[Fn]&&ve[Fn].enable(W[Fn])}},oo.prototype._add=function(W,ve,J){this._handlers.push({handlerName:W,handler:ve,allowed:J}),this._handlersById[W]=ve},oo.prototype.stop=function(){if(!this._updatingCamera){for(var W=0,ve=this._handlers;W<ve.length;W+=1){var J=ve[W],pe=J.handler;pe.reset()}this._inertia.clear(),this._fireEvents({},{}),this._changes=[]}},oo.prototype.isActive=function(){for(var W=0,ve=this._handlers;W<ve.length;W+=1){var J=ve[W],pe=J.handler;if(pe.isActive())return!0}return!1},oo.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},oo.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},oo.prototype.isMoving=function(){return Boolean(cs(this._eventsInProgress))||this.isZooming()},oo.prototype._blockedByActive=function(W,ve,J){for(var pe in W)if(pe!==J&&(!ve||ve.indexOf(pe)<0))return!0;return!1},oo.prototype.handleWindowEvent=function(W){this.handleEvent(W,W.type+"Window")},oo.prototype._getMapTouches=function(W){for(var ve=[],J=0,pe=W;J<pe.length;J+=1){var Ee=pe[J],Ie=Ee.target;this._el.contains(Ie)&&ve.push(Ee)}return ve},oo.prototype.handleEvent=function(W,ve){if(W.type==="blur"){this.stop();return}this._updatingCamera=!0;for(var J=W.type==="renderFrame"?void 0:W,pe={needsRenderFrame:!1},Ee={},Ie={},$e=W.touches?this._getMapTouches(W.touches):void 0,dt=$e?n.touchPos(this._el,$e):n.mousePos(this._el,W),Ft=0,nr=this._handlers;Ft<nr.length;Ft+=1){var dr=nr[Ft],xr=dr.handlerName,Fr=dr.handler,Zr=dr.allowed;if(!!Fr.isEnabled()){var Qr=void 0;this._blockedByActive(Ie,Zr,xr)?Fr.reset():Fr[ve||W.type]&&(Qr=Fr[ve||W.type](W,dt,$e),this.mergeHandlerResult(pe,Ee,Qr,xr,J),Qr&&Qr.needsRenderFrame&&this._triggerRenderFrame()),(Qr||Fr.isActive())&&(Ie[xr]=Fr)}}var jr={};for(var rn in this._previousActiveHandlers)Ie[rn]||(jr[rn]=J);this._previousActiveHandlers=Ie,(Object.keys(jr).length||gu(pe))&&(this._changes.push([pe,Ee,jr]),this._triggerRenderFrame()),(Object.keys(Ie).length||gu(pe))&&this._map._stop(!0),this._updatingCamera=!1;var mn=pe.cameraAnimation;mn&&(this._inertia.clear(),this._fireEvents({},{}),this._changes=[],mn(this._map))},oo.prototype.mergeHandlerResult=function(W,ve,J,pe,Ee){if(!!J){e.extend(W,J);var Ie={handlerName:pe,originalEvent:J.originalEvent||Ee};J.zoomDelta!==void 0&&(ve.zoom=Ie),J.panDelta!==void 0&&(ve.drag=Ie),J.pitchDelta!==void 0&&(ve.pitch=Ie),J.bearingDelta!==void 0&&(ve.rotate=Ie)}},oo.prototype._applyChanges=function(){for(var W={},ve={},J={},pe=0,Ee=this._changes;pe<Ee.length;pe+=1){var Ie=Ee[pe],$e=Ie[0],dt=Ie[1],Ft=Ie[2];$e.panDelta&&(W.panDelta=(W.panDelta||new e.Point(0,0))._add($e.panDelta)),$e.zoomDelta&&(W.zoomDelta=(W.zoomDelta||0)+$e.zoomDelta),$e.bearingDelta&&(W.bearingDelta=(W.bearingDelta||0)+$e.bearingDelta),$e.pitchDelta&&(W.pitchDelta=(W.pitchDelta||0)+$e.pitchDelta),$e.around!==void 0&&(W.around=$e.around),$e.pinchAround!==void 0&&(W.pinchAround=$e.pinchAround),$e.noInertia&&(W.noInertia=$e.noInertia),e.extend(ve,dt),e.extend(J,Ft)}this._updateMapTransform(W,ve,J),this._changes=[]},oo.prototype._updateMapTransform=function(W,ve,J){var pe=this._map,Ee=pe.transform;if(!gu(W))return this._fireEvents(ve,J);var Ie=W.panDelta,$e=W.zoomDelta,dt=W.bearingDelta,Ft=W.pitchDelta,nr=W.around,dr=W.pinchAround;dr!==void 0&&(nr=dr),pe._stop(!0),nr=nr||pe.transform.centerPoint;var xr=Ee.pointLocation(Ie?nr.sub(Ie):nr);dt&&(Ee.bearing+=dt),Ft&&(Ee.pitch+=Ft),$e&&(Ee.zoom+=$e),Ee.setLocationAtPoint(xr,nr),this._map._update(),W.noInertia||this._inertia.record(W),this._fireEvents(ve,J)},oo.prototype._fireEvents=function(W,ve){var J=this,pe=cs(this._eventsInProgress),Ee=cs(W),Ie={};for(var $e in W){var dt=W[$e],Ft=dt.originalEvent;this._eventsInProgress[$e]||(Ie[$e+"start"]=Ft),this._eventsInProgress[$e]=W[$e]}!pe&&Ee&&this._fireEvent("movestart",Ee.originalEvent);for(var nr in Ie)this._fireEvent(nr,Ie[nr]);W.rotate&&(this._bearingChanged=!0),Ee&&this._fireEvent("move",Ee.originalEvent);for(var dr in W){var xr=W[dr],Fr=xr.originalEvent;this._fireEvent(dr,Fr)}var Zr={},Qr;for(var jr in this._eventsInProgress){var rn=this._eventsInProgress[jr],mn=rn.handlerName,Fn=rn.originalEvent;this._handlersById[mn].isActive()||(delete this._eventsInProgress[jr],Qr=ve[mn]||Fn,Zr[jr+"end"]=Qr)}for(var Hn in Zr)this._fireEvent(Hn,Zr[Hn]);var ta=cs(this._eventsInProgress);if((pe||Ee)&&!ta){this._updatingCamera=!0;var ia=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),na=function(ya){return ya!==0&&-J._bearingSnap<ya&&ya<J._bearingSnap};ia?(na(ia.bearing||this._map.getBearing())&&(ia.bearing=0),this._map.easeTo(ia,{originalEvent:Qr})):(this._map.fire(new e.Event("moveend",{originalEvent:Qr})),na(this._map.getBearing())&&this._map.resetNorth()),this._bearingChanged=!1,this._updatingCamera=!1}},oo.prototype._fireEvent=function(W,ve){this._map.fire(new e.Event(W,ve?{originalEvent:ve}:{}))},oo.prototype._triggerRenderFrame=function(){var W=this;this._frameId===void 0&&(this._frameId=this._map._requestRenderFrame(function(ve){delete W._frameId,W.handleEvent(new Us("renderFrame",{timeStamp:ve})),W._applyChanges()}))};var Wf=function(fe){function W(ve,J){fe.call(this),this._moving=!1,this._zooming=!1,this.transform=ve,this._bearingSnap=J.bearingSnap,e.bindAll(["_renderFrameCallback"],this)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.getCenter=function(){return new e.LngLat(this.transform.center.lng,this.transform.center.lat)},W.prototype.setCenter=function(J,pe){return this.jumpTo({center:J},pe)},W.prototype.panBy=function(J,pe,Ee){return J=e.Point.convert(J).mult(-1),this.panTo(this.transform.center,e.extend({offset:J},pe),Ee)},W.prototype.panTo=function(J,pe,Ee){return this.easeTo(e.extend({center:J},pe),Ee)},W.prototype.getZoom=function(){return this.transform.zoom},W.prototype.setZoom=function(J,pe){return this.jumpTo({zoom:J},pe),this},W.prototype.zoomTo=function(J,pe,Ee){return this.easeTo(e.extend({zoom:J},pe),Ee)},W.prototype.zoomIn=function(J,pe){return this.zoomTo(this.getZoom()+1,J,pe),this},W.prototype.zoomOut=function(J,pe){return this.zoomTo(this.getZoom()-1,J,pe),this},W.prototype.getBearing=function(){return this.transform.bearing},W.prototype.setBearing=function(J,pe){return this.jumpTo({bearing:J},pe),this},W.prototype.getPadding=function(){return this.transform.padding},W.prototype.setPadding=function(J,pe){return this.jumpTo({padding:J},pe),this},W.prototype.rotateTo=function(J,pe,Ee){return this.easeTo(e.extend({bearing:J},pe),Ee)},W.prototype.resetNorth=function(J,pe){return this.rotateTo(0,e.extend({duration:1e3},J),pe),this},W.prototype.resetNorthPitch=function(J,pe){return this.easeTo(e.extend({bearing:0,pitch:0,duration:1e3},J),pe),this},W.prototype.snapToNorth=function(J,pe){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(J,pe):this},W.prototype.getPitch=function(){return this.transform.pitch},W.prototype.setPitch=function(J,pe){return this.jumpTo({pitch:J},pe),this},W.prototype.cameraForBounds=function(J,pe){return J=e.LngLatBounds.convert(J),this._cameraForBoxAndBearing(J.getNorthWest(),J.getSouthEast(),0,pe)},W.prototype._cameraForBoxAndBearing=function(J,pe,Ee,Ie){var $e={top:0,bottom:0,right:0,left:0};if(Ie=e.extend({padding:$e,offset:[0,0],maxZoom:this.transform.maxZoom},Ie),typeof Ie.padding=="number"){var dt=Ie.padding;Ie.padding={top:dt,bottom:dt,right:dt,left:dt}}Ie.padding=e.extend($e,Ie.padding);var Ft=this.transform,nr=Ft.padding,dr=Ft.project(e.LngLat.convert(J)),xr=Ft.project(e.LngLat.convert(pe)),Fr=dr.rotate(-Ee*Math.PI/180),Zr=xr.rotate(-Ee*Math.PI/180),Qr=new e.Point(Math.max(Fr.x,Zr.x),Math.max(Fr.y,Zr.y)),jr=new e.Point(Math.min(Fr.x,Zr.x),Math.min(Fr.y,Zr.y)),rn=Qr.sub(jr),mn=(Ft.width-(nr.left+nr.right+Ie.padding.left+Ie.padding.right))/rn.x,Fn=(Ft.height-(nr.top+nr.bottom+Ie.padding.top+Ie.padding.bottom))/rn.y;if(Fn<0||mn<0){e.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");return}var Hn=Math.min(Ft.scaleZoom(Ft.scale*Math.min(mn,Fn)),Ie.maxZoom),ta=e.Point.convert(Ie.offset),ia=(Ie.padding.left-Ie.padding.right)/2,na=(Ie.padding.top-Ie.padding.bottom)/2,ya=new e.Point(ta.x+ia,ta.y+na),Sa=ya.mult(Ft.scale/Ft.zoomScale(Hn)),Ta=Ft.unproject(dr.add(xr).div(2).sub(Sa));return{center:Ta,zoom:Hn,bearing:Ee}},W.prototype.fitBounds=function(J,pe,Ee){return this._fitInternal(this.cameraForBounds(J,pe),pe,Ee)},W.prototype.fitScreenCoordinates=function(J,pe,Ee,Ie,$e){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(e.Point.convert(J)),this.transform.pointLocation(e.Point.convert(pe)),Ee,Ie),Ie,$e)},W.prototype._fitInternal=function(J,pe,Ee){return J?(pe=e.extend(J,pe),delete pe.padding,pe.linear?this.easeTo(pe,Ee):this.flyTo(pe,Ee)):this},W.prototype.jumpTo=function(J,pe){this.stop();var Ee=this.transform,Ie=!1,$e=!1,dt=!1;return"zoom"in J&&Ee.zoom!==+J.zoom&&(Ie=!0,Ee.zoom=+J.zoom),J.center!==void 0&&(Ee.center=e.LngLat.convert(J.center)),"bearing"in J&&Ee.bearing!==+J.bearing&&($e=!0,Ee.bearing=+J.bearing),"pitch"in J&&Ee.pitch!==+J.pitch&&(dt=!0,Ee.pitch=+J.pitch),J.padding!=null&&!Ee.isPaddingEqual(J.padding)&&(Ee.padding=J.padding),this.fire(new e.Event("movestart",pe)).fire(new e.Event("move",pe)),Ie&&this.fire(new e.Event("zoomstart",pe)).fire(new e.Event("zoom",pe)).fire(new e.Event("zoomend",pe)),$e&&this.fire(new e.Event("rotatestart",pe)).fire(new e.Event("rotate",pe)).fire(new e.Event("rotateend",pe)),dt&&this.fire(new e.Event("pitchstart",pe)).fire(new e.Event("pitch",pe)).fire(new e.Event("pitchend",pe)),this.fire(new e.Event("moveend",pe))},W.prototype.easeTo=function(J,pe){var Ee=this;this._stop(!1,J.easeId),J=e.extend({offset:[0,0],duration:500,easing:e.ease},J),(J.animate===!1||!J.essential&&e.browser.prefersReducedMotion)&&(J.duration=0);var Ie=this.transform,$e=this.getZoom(),dt=this.getBearing(),Ft=this.getPitch(),nr=this.getPadding(),dr="zoom"in J?+J.zoom:$e,xr="bearing"in J?this._normalizeBearing(J.bearing,dt):dt,Fr="pitch"in J?+J.pitch:Ft,Zr="padding"in J?J.padding:Ie.padding,Qr=e.Point.convert(J.offset),jr=Ie.centerPoint.add(Qr),rn=Ie.pointLocation(jr),mn=e.LngLat.convert(J.center||rn);this._normalizeCenter(mn);var Fn=Ie.project(rn),Hn=Ie.project(mn).sub(Fn),ta=Ie.zoomScale(dr-$e),ia,na;J.around&&(ia=e.LngLat.convert(J.around),na=Ie.locationPoint(ia));var ya={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||dr!==$e,this._rotating=this._rotating||dt!==xr,this._pitching=this._pitching||Fr!==Ft,this._padding=!Ie.isPaddingEqual(Zr),this._easeId=J.easeId,this._prepareEase(pe,J.noMoveStart,ya),clearTimeout(this._easeEndTimeoutID),this._ease(function(Sa){if(Ee._zooming&&(Ie.zoom=e.number($e,dr,Sa)),Ee._rotating&&(Ie.bearing=e.number(dt,xr,Sa)),Ee._pitching&&(Ie.pitch=e.number(Ft,Fr,Sa)),Ee._padding&&(Ie.interpolatePadding(nr,Zr,Sa),jr=Ie.centerPoint.add(Qr)),ia)Ie.setLocationAtPoint(ia,na);else{var Ta=Ie.zoomScale(Ie.zoom-$e),ka=dr>$e?Math.min(2,ta):Math.max(.5,ta),Fa=Math.pow(ka,1-Sa),Za=Ie.unproject(Fn.add(Hn.mult(Sa*Fa)).mult(Ta));Ie.setLocationAtPoint(Ie.renderWorldCopies?Za.wrap():Za,jr)}Ee._fireMoveEvents(pe)},function(Sa){Ee._afterEase(pe,Sa)},J),this},W.prototype._prepareEase=function(J,pe,Ee){Ee===void 0&&(Ee={}),this._moving=!0,!pe&&!Ee.moving&&this.fire(new e.Event("movestart",J)),this._zooming&&!Ee.zooming&&this.fire(new e.Event("zoomstart",J)),this._rotating&&!Ee.rotating&&this.fire(new e.Event("rotatestart",J)),this._pitching&&!Ee.pitching&&this.fire(new e.Event("pitchstart",J))},W.prototype._fireMoveEvents=function(J){this.fire(new e.Event("move",J)),this._zooming&&this.fire(new e.Event("zoom",J)),this._rotating&&this.fire(new e.Event("rotate",J)),this._pitching&&this.fire(new e.Event("pitch",J))},W.prototype._afterEase=function(J,pe){if(!(this._easeId&&pe&&this._easeId===pe)){delete this._easeId;var Ee=this._zooming,Ie=this._rotating,$e=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,Ee&&this.fire(new e.Event("zoomend",J)),Ie&&this.fire(new e.Event("rotateend",J)),$e&&this.fire(new e.Event("pitchend",J)),this.fire(new e.Event("moveend",J))}},W.prototype.flyTo=function(J,pe){var Ee=this;if(!J.essential&&e.browser.prefersReducedMotion){var Ie=e.pick(J,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Ie,pe)}this.stop(),J=e.extend({offset:[0,0],speed:1.2,curve:1.42,easing:e.ease},J);var $e=this.transform,dt=this.getZoom(),Ft=this.getBearing(),nr=this.getPitch(),dr=this.getPadding(),xr="zoom"in J?e.clamp(+J.zoom,$e.minZoom,$e.maxZoom):dt,Fr="bearing"in J?this._normalizeBearing(J.bearing,Ft):Ft,Zr="pitch"in J?+J.pitch:nr,Qr="padding"in J?J.padding:$e.padding,jr=$e.zoomScale(xr-dt),rn=e.Point.convert(J.offset),mn=$e.centerPoint.add(rn),Fn=$e.pointLocation(mn),Hn=e.LngLat.convert(J.center||Fn);this._normalizeCenter(Hn);var ta=$e.project(Fn),ia=$e.project(Hn).sub(ta),na=J.curve,ya=Math.max($e.width,$e.height),Sa=ya/jr,Ta=ia.mag();if("minZoom"in J){var ka=e.clamp(Math.min(J.minZoom,dt,xr),$e.minZoom,$e.maxZoom),Fa=ya/$e.zoomScale(ka-dt);na=Math.sqrt(Fa/Ta*2)}var Za=na*na;function ci(vi){var Ri=(Sa*Sa-ya*ya+(vi?-1:1)*Za*Za*Ta*Ta)/(2*(vi?Sa:ya)*Za*Ta);return Math.log(Math.sqrt(Ri*Ri+1)-Ri)}function Vi(vi){return(Math.exp(vi)-Math.exp(-vi))/2}function yi(vi){return(Math.exp(vi)+Math.exp(-vi))/2}function Ti(vi){return Vi(vi)/yi(vi)}var Wa=ci(0),Hi=function(vi){return yi(Wa)/yi(Wa+na*vi)},Xi=function(vi){return ya*((yi(Wa)*Ti(Wa+na*vi)-Vi(Wa))/Za)/Ta},$i=(ci(1)-Wa)/na;if(Math.abs(Ta)<1e-6||!isFinite($i)){if(Math.abs(ya-Sa)<1e-6)return this.easeTo(J,pe);var Pi=Sa<ya?-1:1;$i=Math.abs(Math.log(Sa/ya))/na,Xi=function(){return 0},Hi=function(vi){return Math.exp(Pi*na*vi)}}if("duration"in J)J.duration=+J.duration;else{var so="screenSpeed"in J?+J.screenSpeed/na:+J.speed;J.duration=1e3*$i/so}return J.maxDuration&&J.duration>J.maxDuration&&(J.duration=0),this._zooming=!0,this._rotating=Ft!==Fr,this._pitching=Zr!==nr,this._padding=!$e.isPaddingEqual(Qr),this._prepareEase(pe,!1),this._ease(function(vi){var Ri=vi*$i,Fo=1/Hi(Ri);$e.zoom=vi===1?xr:dt+$e.scaleZoom(Fo),Ee._rotating&&($e.bearing=e.number(Ft,Fr,vi)),Ee._pitching&&($e.pitch=e.number(nr,Zr,vi)),Ee._padding&&($e.interpolatePadding(dr,Qr,vi),mn=$e.centerPoint.add(rn));var es=vi===1?Hn:$e.unproject(ta.add(ia.mult(Xi(Ri))).mult(Fo));$e.setLocationAtPoint($e.renderWorldCopies?es.wrap():es,mn),Ee._fireMoveEvents(pe)},function(){return Ee._afterEase(pe)},J),this},W.prototype.isEasing=function(){return!!this._easeFrameId},W.prototype.stop=function(){return this._stop()},W.prototype._stop=function(J,pe){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var Ee=this._onEaseEnd;delete this._onEaseEnd,Ee.call(this,pe)}if(!J){var Ie=this.handlers;Ie&&Ie.stop()}return this},W.prototype._ease=function(J,pe,Ee){Ee.animate===!1||Ee.duration===0?(J(1),pe()):(this._easeStart=e.browser.now(),this._easeOptions=Ee,this._onEaseFrame=J,this._onEaseEnd=pe,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},W.prototype._renderFrameCallback=function(){var J=Math.min((e.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(J)),J<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},W.prototype._normalizeBearing=function(J,pe){J=e.wrap(J,-180,180);var Ee=Math.abs(J-pe);return Math.abs(J-360-pe)<Ee&&(J-=360),Math.abs(J+360-pe)<Ee&&(J+=360),J},W.prototype._normalizeCenter=function(J){var pe=this.transform;if(!(!pe.renderWorldCopies||pe.lngRange)){var Ee=J.lng-pe.center.lng;J.lng+=Ee>180?-360:Ee<-180?360:0}},W}(e.Evented),Jl=function(W){W===void 0&&(W={}),this.options=W,e.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};Jl.prototype.getDefaultPosition=function(){return"bottom-right"},Jl.prototype.onAdd=function(W){var ve=this.options&&this.options.compact;return this._map=W,this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=n.create("div","mapboxgl-ctrl-attrib-inner",this._container),ve&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),ve===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Jl.prototype.onRemove=function(){n.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},Jl.prototype._updateEditLink=function(){var W=this._editLink;W||(W=this._editLink=this._container.querySelector(".mapbox-improve-map"));var ve=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||e.config.ACCESS_TOKEN}];if(W){var J=ve.reduce(function(pe,Ee,Ie){return Ee.value&&(pe+=Ee.key+"="+Ee.value+(Ie<ve.length-1?"&":"")),pe},"?");W.href=e.config.FEEDBACK_URL+"/"+J+(this._map._hash?this._map._hash.getHashString(!0):""),W.rel="noopener nofollow"}},Jl.prototype._updateData=function(W){W&&(W.sourceDataType==="metadata"||W.dataType==="style")&&(this._updateAttributions(),this._updateEditLink())},Jl.prototype._updateAttributions=function(){if(!!this._map.style){var W=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?W=W.concat(this.options.customAttribution.map(function(dt){return typeof dt!="string"?"":dt})):typeof this.options.customAttribution=="string"&&W.push(this.options.customAttribution)),this._map.style.stylesheet){var ve=this._map.style.stylesheet;this.styleOwner=ve.owner,this.styleId=ve.id}var J=this._map.style.sourceCaches;for(var pe in J){var Ee=J[pe];if(Ee.used){var Ie=Ee.getSource();Ie.attribution&&W.indexOf(Ie.attribution)<0&&W.push(Ie.attribution)}}W.sort(function(dt,Ft){return dt.length-Ft.length}),W=W.filter(function(dt,Ft){for(var nr=Ft+1;nr<W.length;nr++)if(W[nr].indexOf(dt)>=0)return!1;return!0});var $e=W.join(" | ");$e!==this._attribHTML&&(this._attribHTML=$e,W.length?(this._innerContainer.innerHTML=$e,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},Jl.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var Ki=function(){e.bindAll(["_updateLogo"],this),e.bindAll(["_updateCompact"],this)};Ki.prototype.onAdd=function(W){this._map=W,this._container=n.create("div","mapboxgl-ctrl");var ve=n.create("a","mapboxgl-ctrl-logo");return ve.target="_blank",ve.rel="noopener nofollow",ve.href="https://www.mapbox.com/",ve.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),ve.setAttribute("rel","noopener nofollow"),this._container.appendChild(ve),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Ki.prototype.onRemove=function(){n.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Ki.prototype.getDefaultPosition=function(){return"bottom-left"},Ki.prototype._updateLogo=function(W){(!W||W.sourceDataType==="metadata")&&(this._container.style.display=this._logoRequired()?"block":"none")},Ki.prototype._logoRequired=function(){if(!!this._map.style){var W=this._map.style.sourceCaches;for(var ve in W){var J=W[ve].getSource();if(J.mapbox_logo)return!0}return!1}},Ki.prototype._updateCompact=function(){var W=this._container.children;if(W.length){var ve=W[0];this._map.getCanvasContainer().offsetWidth<250?ve.classList.add("mapboxgl-compact"):ve.classList.remove("mapboxgl-compact")}};var jo=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};jo.prototype.add=function(W){var ve=++this._id,J=this._queue;return J.push({callback:W,id:ve,cancelled:!1}),ve},jo.prototype.remove=function(W){for(var ve=this._currentlyRunning,J=ve?this._queue.concat(ve):this._queue,pe=0,Ee=J;pe<Ee.length;pe+=1){var Ie=Ee[pe];if(Ie.id===W){Ie.cancelled=!0;return}}},jo.prototype.run=function(W){W===void 0&&(W=0);var ve=this._currentlyRunning=this._queue;this._queue=[];for(var J=0,pe=ve;J<pe.length;J+=1){var Ee=pe[J];if(!Ee.cancelled&&(Ee.callback(W),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},jo.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var ip={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Sc=e.window.HTMLImageElement,fc=e.window.HTMLElement,wf=e.window.ImageBitmap,jf=-2,Ec=22,il=0,_f=60,gh={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:jf,maxZoom:Ec,minPitch:il,maxPitch:_f,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},yh=function(fe){function W(J){var pe=this;if(J=e.extend({},gh,J),J.minZoom!=null&&J.maxZoom!=null&&J.minZoom>J.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(J.minPitch!=null&&J.maxPitch!=null&&J.minPitch>J.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(J.minPitch!=null&&J.minPitch<il)throw new Error("minPitch must be greater than or equal to "+il);if(J.maxPitch!=null&&J.maxPitch>_f)throw new Error("maxPitch must be less than or equal to "+_f);var Ee=new Li(J.minZoom,J.maxZoom,J.minPitch,J.maxPitch,J.renderWorldCopies);if(fe.call(this,Ee,J),this._interactive=J.interactive,this._maxTileCacheSize=J.maxTileCacheSize,this._failIfMajorPerformanceCaveat=J.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=J.preserveDrawingBuffer,this._antialias=J.antialias,this._trackResize=J.trackResize,this._bearingSnap=J.bearingSnap,this._refreshExpiredTiles=J.refreshExpiredTiles,this._fadeDuration=J.fadeDuration,this._crossSourceCollisions=J.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=J.collectResourceTiming,this._renderTaskQueue=new jo,this._controls=[],this._mapId=e.uniqueId(),this._locale=e.extend({},ip,J.locale),this._requestManager=new e.RequestManager(J.transformRequest,J.accessToken),typeof J.container=="string"){if(this._container=e.window.document.getElementById(J.container),!this._container)throw new Error("Container '"+J.container+"' not found.")}else if(J.container instanceof fc)this._container=J.container;else throw new Error("Invalid type: 'container' must be a String or HTMLElement.");if(J.maxBounds&&this.setMaxBounds(J.maxBounds),e.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return pe._update(!1)}),this.on("moveend",function(){return pe._update(!1)}),this.on("zoom",function(){return pe._update(!0)}),typeof e.window<"u"&&(e.window.addEventListener("online",this._onWindowOnline,!1),e.window.addEventListener("resize",this._onWindowResize,!1)),this.handlers=new oo(this,J);var Ie=typeof J.hash=="string"&&J.hash||void 0;this._hash=J.hash&&new Co(Ie).addTo(this),(!this._hash||!this._hash._onHashChange())&&(this.jumpTo({center:J.center,zoom:J.zoom,bearing:J.bearing,pitch:J.pitch}),J.bounds&&(this.resize(),this.fitBounds(J.bounds,e.extend({},J.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=J.localIdeographFontFamily,J.style&&this.setStyle(J.style,{localIdeographFontFamily:J.localIdeographFontFamily}),J.attributionControl&&this.addControl(new Jl({customAttribution:J.customAttribution})),this.addControl(new Ki,J.logoPosition),this.on("style.load",function(){pe.transform.unmodified&&pe.jumpTo(pe.style.stylesheet)}),this.on("data",function($e){pe._update($e.dataType==="style"),pe.fire(new e.Event($e.dataType+"data",$e))}),this.on("dataloading",function($e){pe.fire(new e.Event($e.dataType+"dataloading",$e))})}fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W;var ve={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return W.prototype._getMapId=function(){return this._mapId},W.prototype.addControl=function(pe,Ee){if(Ee===void 0&&pe.getDefaultPosition&&(Ee=pe.getDefaultPosition()),Ee===void 0&&(Ee="top-right"),!pe||!pe.onAdd)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var Ie=pe.onAdd(this);this._controls.push(pe);var $e=this._controlPositions[Ee];return Ee.indexOf("bottom")!==-1?$e.insertBefore(Ie,$e.firstChild):$e.appendChild(Ie),this},W.prototype.removeControl=function(pe){if(!pe||!pe.onRemove)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var Ee=this._controls.indexOf(pe);return Ee>-1&&this._controls.splice(Ee,1),pe.onRemove(this),this},W.prototype.resize=function(pe){var Ee=this._containerDimensions(),Ie=Ee[0],$e=Ee[1];this._resizeCanvas(Ie,$e),this.transform.resize(Ie,$e),this.painter.resize(Ie,$e);var dt=!this._moving;return dt&&(this.stop(),this.fire(new e.Event("movestart",pe)).fire(new e.Event("move",pe))),this.fire(new e.Event("resize",pe)),dt&&this.fire(new e.Event("moveend",pe)),this},W.prototype.getBounds=function(){return this.transform.getBounds()},W.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},W.prototype.setMaxBounds=function(pe){return this.transform.setMaxBounds(e.LngLatBounds.convert(pe)),this._update()},W.prototype.setMinZoom=function(pe){if(pe=pe==null?jf:pe,pe>=jf&&pe<=this.transform.maxZoom)return this.transform.minZoom=pe,this._update(),this.getZoom()<pe&&this.setZoom(pe),this;throw new Error("minZoom must be between "+jf+" and the current maxZoom, inclusive")},W.prototype.getMinZoom=function(){return this.transform.minZoom},W.prototype.setMaxZoom=function(pe){if(pe=pe==null?Ec:pe,pe>=this.transform.minZoom)return this.transform.maxZoom=pe,this._update(),this.getZoom()>pe&&this.setZoom(pe),this;throw new Error("maxZoom must be greater than the current minZoom")},W.prototype.getMaxZoom=function(){return this.transform.maxZoom},W.prototype.setMinPitch=function(pe){if(pe=pe==null?il:pe,pe<il)throw new Error("minPitch must be greater than or equal to "+il);if(pe>=il&&pe<=this.transform.maxPitch)return this.transform.minPitch=pe,this._update(),this.getPitch()<pe&&this.setPitch(pe),this;throw new Error("minPitch must be between "+il+" and the current maxPitch, inclusive")},W.prototype.getMinPitch=function(){return this.transform.minPitch},W.prototype.setMaxPitch=function(pe){if(pe=pe==null?_f:pe,pe>_f)throw new Error("maxPitch must be less than or equal to "+_f);if(pe>=this.transform.minPitch)return this.transform.maxPitch=pe,this._update(),this.getPitch()>pe&&this.setPitch(pe),this;throw new Error("maxPitch must be greater than the current minPitch")},W.prototype.getMaxPitch=function(){return this.transform.maxPitch},W.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},W.prototype.setRenderWorldCopies=function(pe){return this.transform.renderWorldCopies=pe,this._update()},W.prototype.project=function(pe){return this.transform.locationPoint(e.LngLat.convert(pe))},W.prototype.unproject=function(pe){return this.transform.pointLocation(e.Point.convert(pe))},W.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},W.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},W.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},W.prototype._createDelegatedListener=function(pe,Ee,Ie){var $e=this,dt;if(pe==="mouseenter"||pe==="mouseover"){var Ft=!1,nr=function(jr){var rn=$e.getLayer(Ee)?$e.queryRenderedFeatures(jr.point,{layers:[Ee]}):[];rn.length?Ft||(Ft=!0,Ie.call($e,new Mt(pe,$e,jr.originalEvent,{features:rn}))):Ft=!1},dr=function(){Ft=!1};return{layer:Ee,listener:Ie,delegates:{mousemove:nr,mouseout:dr}}}else if(pe==="mouseleave"||pe==="mouseout"){var xr=!1,Fr=function(jr){var rn=$e.getLayer(Ee)?$e.queryRenderedFeatures(jr.point,{layers:[Ee]}):[];rn.length?xr=!0:xr&&(xr=!1,Ie.call($e,new Mt(pe,$e,jr.originalEvent)))},Zr=function(jr){xr&&(xr=!1,Ie.call($e,new Mt(pe,$e,jr.originalEvent)))};return{layer:Ee,listener:Ie,delegates:{mousemove:Fr,mouseout:Zr}}}else{var Qr=function(jr){var rn=$e.getLayer(Ee)?$e.queryRenderedFeatures(jr.point,{layers:[Ee]}):[];rn.length&&(jr.features=rn,Ie.call($e,jr),delete jr.features)};return{layer:Ee,listener:Ie,delegates:(dt={},dt[pe]=Qr,dt)}}},W.prototype.on=function(pe,Ee,Ie){if(Ie===void 0)return fe.prototype.on.call(this,pe,Ee);var $e=this._createDelegatedListener(pe,Ee,Ie);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[pe]=this._delegatedListeners[pe]||[],this._delegatedListeners[pe].push($e);for(var dt in $e.delegates)this.on(dt,$e.delegates[dt]);return this},W.prototype.once=function(pe,Ee,Ie){if(Ie===void 0)return fe.prototype.once.call(this,pe,Ee);var $e=this._createDelegatedListener(pe,Ee,Ie);for(var dt in $e.delegates)this.once(dt,$e.delegates[dt]);return this},W.prototype.off=function(pe,Ee,Ie){var $e=this;if(Ie===void 0)return fe.prototype.off.call(this,pe,Ee);var dt=function(Ft){for(var nr=Ft[pe],dr=0;dr<nr.length;dr++){var xr=nr[dr];if(xr.layer===Ee&&xr.listener===Ie){for(var Fr in xr.delegates)$e.off(Fr,xr.delegates[Fr]);return nr.splice(dr,1),$e}}};return this._delegatedListeners&&this._delegatedListeners[pe]&&dt(this._delegatedListeners),this},W.prototype.queryRenderedFeatures=function(pe,Ee){if(!this.style)return[];Ee===void 0&&pe!==void 0&&!(pe instanceof e.Point)&&!Array.isArray(pe)&&(Ee=pe,pe=void 0),Ee=Ee||{},pe=pe||[[0,0],[this.transform.width,this.transform.height]];var Ie;if(pe instanceof e.Point||typeof pe[0]=="number")Ie=[e.Point.convert(pe)];else{var $e=e.Point.convert(pe[0]),dt=e.Point.convert(pe[1]);Ie=[$e,new e.Point(dt.x,$e.y),dt,new e.Point($e.x,dt.y),$e]}return this.style.queryRenderedFeatures(Ie,Ee,this.transform)},W.prototype.querySourceFeatures=function(pe,Ee){return this.style.querySourceFeatures(pe,Ee)},W.prototype.setStyle=function(pe,Ee){return Ee=e.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},Ee),Ee.diff!==!1&&Ee.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&pe?(this._diffStyle(pe,Ee),this):(this._localIdeographFontFamily=Ee.localIdeographFontFamily,this._updateStyle(pe,Ee))},W.prototype._getUIString=function(pe){var Ee=this._locale[pe];if(Ee==null)throw new Error("Missing UI string '"+pe+"'");return Ee},W.prototype._updateStyle=function(pe,Ee){if(this.style&&(this.style.setEventedParent(null),this.style._remove()),pe)this.style=new vs(this,Ee||{});else return delete this.style,this;return this.style.setEventedParent(this,{style:this.style}),typeof pe=="string"?this.style.loadURL(pe):this.style.loadJSON(pe),this},W.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new vs(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},W.prototype._diffStyle=function(pe,Ee){var Ie=this;if(typeof pe=="string"){var $e=this._requestManager.normalizeStyleURL(pe),dt=this._requestManager.transformRequest($e,e.ResourceType.Style);e.getJSON(dt,function(Ft,nr){Ft?Ie.fire(new e.ErrorEvent(Ft)):nr&&Ie._updateDiff(nr,Ee)})}else typeof pe=="object"&&this._updateDiff(pe,Ee)},W.prototype._updateDiff=function(pe,Ee){try{this.style.setState(pe)&&this._update(!0)}catch(Ie){e.warnOnce("Unable to perform style diff: "+(Ie.message||Ie.error||Ie)+".  Rebuilding the style from scratch."),this._updateStyle(pe,Ee)}},W.prototype.getStyle=function(){if(this.style)return this.style.serialize()},W.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():e.warnOnce("There is no style added to the map.")},W.prototype.addSource=function(pe,Ee){return this._lazyInitEmptyStyle(),this.style.addSource(pe,Ee),this._update(!0)},W.prototype.isSourceLoaded=function(pe){var Ee=this.style&&this.style.sourceCaches[pe];if(Ee===void 0){this.fire(new e.ErrorEvent(new Error("There is no source with ID '"+pe+"'")));return}return Ee.loaded()},W.prototype.areTilesLoaded=function(){var pe=this.style&&this.style.sourceCaches;for(var Ee in pe){var Ie=pe[Ee],$e=Ie._tiles;for(var dt in $e){var Ft=$e[dt];if(!(Ft.state==="loaded"||Ft.state==="errored"))return!1}}return!0},W.prototype.addSourceType=function(pe,Ee,Ie){return this._lazyInitEmptyStyle(),this.style.addSourceType(pe,Ee,Ie)},W.prototype.removeSource=function(pe){return this.style.removeSource(pe),this._update(!0)},W.prototype.getSource=function(pe){return this.style.getSource(pe)},W.prototype.addImage=function(pe,Ee,Ie){Ie===void 0&&(Ie={});var $e=Ie.pixelRatio;$e===void 0&&($e=1);var dt=Ie.sdf;dt===void 0&&(dt=!1);var Ft=Ie.stretchX,nr=Ie.stretchY,dr=Ie.content;this._lazyInitEmptyStyle();var xr=0;if(Ee instanceof Sc||wf&&Ee instanceof wf){var Fr=e.browser.getImageData(Ee),Zr=Fr.width,Qr=Fr.height,jr=Fr.data;this.style.addImage(pe,{data:new e.RGBAImage({width:Zr,height:Qr},jr),pixelRatio:$e,stretchX:Ft,stretchY:nr,content:dr,sdf:dt,version:xr})}else{if(Ee.width===void 0||Ee.height===void 0)return this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var rn=Ee.width,mn=Ee.height,Fn=Ee.data,Hn=Ee;this.style.addImage(pe,{data:new e.RGBAImage({width:rn,height:mn},new Uint8Array(Fn)),pixelRatio:$e,stretchX:Ft,stretchY:nr,content:dr,sdf:dt,version:xr,userImage:Hn}),Hn.onAdd&&Hn.onAdd(this,pe)}},W.prototype.updateImage=function(pe,Ee){var Ie=this.style.getImage(pe);if(!Ie)return this.fire(new e.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var $e=Ee instanceof Sc||wf&&Ee instanceof wf?e.browser.getImageData(Ee):Ee,dt=$e.width,Ft=$e.height,nr=$e.data;if(dt===void 0||Ft===void 0)return this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(dt!==Ie.data.width||Ft!==Ie.data.height)return this.fire(new e.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));var dr=!(Ee instanceof Sc||wf&&Ee instanceof wf);Ie.data.replace(nr,dr),this.style.updateImage(pe,Ie)},W.prototype.hasImage=function(pe){return pe?!!this.style.getImage(pe):(this.fire(new e.ErrorEvent(new Error("Missing required image id"))),!1)},W.prototype.removeImage=function(pe){this.style.removeImage(pe)},W.prototype.loadImage=function(pe,Ee){e.getImage(this._requestManager.transformRequest(pe,e.ResourceType.Image),Ee)},W.prototype.listImages=function(){return this.style.listImages()},W.prototype.addLayer=function(pe,Ee){return this._lazyInitEmptyStyle(),this.style.addLayer(pe,Ee),this._update(!0)},W.prototype.moveLayer=function(pe,Ee){return this.style.moveLayer(pe,Ee),this._update(!0)},W.prototype.removeLayer=function(pe){return this.style.removeLayer(pe),this._update(!0)},W.prototype.getLayer=function(pe){return this.style.getLayer(pe)},W.prototype.setLayerZoomRange=function(pe,Ee,Ie){return this.style.setLayerZoomRange(pe,Ee,Ie),this._update(!0)},W.prototype.setFilter=function(pe,Ee,Ie){return Ie===void 0&&(Ie={}),this.style.setFilter(pe,Ee,Ie),this._update(!0)},W.prototype.getFilter=function(pe){return this.style.getFilter(pe)},W.prototype.setPaintProperty=function(pe,Ee,Ie,$e){return $e===void 0&&($e={}),this.style.setPaintProperty(pe,Ee,Ie,$e),this._update(!0)},W.prototype.getPaintProperty=function(pe,Ee){return this.style.getPaintProperty(pe,Ee)},W.prototype.setLayoutProperty=function(pe,Ee,Ie,$e){return $e===void 0&&($e={}),this.style.setLayoutProperty(pe,Ee,Ie,$e),this._update(!0)},W.prototype.getLayoutProperty=function(pe,Ee){return this.style.getLayoutProperty(pe,Ee)},W.prototype.setLight=function(pe,Ee){return Ee===void 0&&(Ee={}),this._lazyInitEmptyStyle(),this.style.setLight(pe,Ee),this._update(!0)},W.prototype.getLight=function(){return this.style.getLight()},W.prototype.setFeatureState=function(pe,Ee){return this.style.setFeatureState(pe,Ee),this._update()},W.prototype.removeFeatureState=function(pe,Ee){return this.style.removeFeatureState(pe,Ee),this._update()},W.prototype.getFeatureState=function(pe){return this.style.getFeatureState(pe)},W.prototype.getContainer=function(){return this._container},W.prototype.getCanvasContainer=function(){return this._canvasContainer},W.prototype.getCanvas=function(){return this._canvas},W.prototype._containerDimensions=function(){var pe=0,Ee=0;return this._container&&(pe=this._container.clientWidth||400,Ee=this._container.clientHeight||300),[pe,Ee]},W.prototype._detectMissingCSS=function(){var pe=e.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color");pe!=="rgb(250, 128, 114)"&&e.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},W.prototype._setupContainer=function(){var pe=this._container;pe.classList.add("mapboxgl-map");var Ee=this._missingCSSCanary=n.create("div","mapboxgl-canary",pe);Ee.style.visibility="hidden",this._detectMissingCSS();var Ie=this._canvasContainer=n.create("div","mapboxgl-canvas-container",pe);this._interactive&&Ie.classList.add("mapboxgl-interactive"),this._canvas=n.create("canvas","mapboxgl-canvas",Ie),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var $e=this._containerDimensions();this._resizeCanvas($e[0],$e[1]);var dt=this._controlContainer=n.create("div","mapboxgl-control-container",pe),Ft=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(nr){Ft[nr]=n.create("div","mapboxgl-ctrl-"+nr,dt)})},W.prototype._resizeCanvas=function(pe,Ee){var Ie=e.browser.devicePixelRatio||1;this._canvas.width=Ie*pe,this._canvas.height=Ie*Ee,this._canvas.style.width=pe+"px",this._canvas.style.height=Ee+"px"},W.prototype._setupPainter=function(){var pe=e.extend({},a.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),Ee=this._canvas.getContext("webgl",pe)||this._canvas.getContext("experimental-webgl",pe);if(!Ee){this.fire(new e.ErrorEvent(new Error("Failed to initialize WebGL")));return}this.painter=new fi(Ee,this.transform),e.webpSupported.testSupport(Ee)},W.prototype._contextLost=function(pe){pe.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new e.Event("webglcontextlost",{originalEvent:pe}))},W.prototype._contextRestored=function(pe){this._setupPainter(),this.resize(),this._update(),this.fire(new e.Event("webglcontextrestored",{originalEvent:pe}))},W.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},W.prototype._update=function(pe){return this.style?(this._styleDirty=this._styleDirty||pe,this._sourcesDirty=!0,this.triggerRepaint(),this):this},W.prototype._requestRenderFrame=function(pe){return this._update(),this._renderTaskQueue.add(pe)},W.prototype._cancelRenderFrame=function(pe){this._renderTaskQueue.remove(pe)},W.prototype._render=function(pe){var Ee=this,Ie,$e=0,dt=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(Ie=dt.createQueryEXT(),dt.beginQueryEXT(dt.TIME_ELAPSED_EXT,Ie),$e=e.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(pe),!this._removed){var Ft=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var nr=this.transform.zoom,dr=e.browser.now();this.style.zoomHistory.update(nr,dr);var xr=new e.EvaluationParameters(nr,{now:dr,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Fr=xr.crossFadingFactor();(Fr!==1||Fr!==this._crossFadingFactor)&&(Ft=!0,this._crossFadingFactor=Fr),this.style.update(xr)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new e.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new e.Event("load"))),this.style&&(this.style.hasTransitions()||Ft)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var Zr=e.browser.now()-$e;dt.endQueryEXT(dt.TIME_ELAPSED_EXT,Ie),setTimeout(function(){var rn=dt.getQueryObjectEXT(Ie,dt.QUERY_RESULT_EXT)/1e6;dt.deleteQueryEXT(Ie),Ee.fire(new e.Event("gpu-timing-frame",{cpuTime:Zr,gpuTime:rn}))},50)}if(this.listens("gpu-timing-layer")){var Qr=this.painter.collectGpuTimers();setTimeout(function(){var rn=Ee.painter.queryGpuTimers(Qr);Ee.fire(new e.Event("gpu-timing-layer",{layerTimes:rn}))},50)}var jr=this._sourcesDirty||this._styleDirty||this._placementDirty;return jr||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&(this._fullyLoaded||(this._fullyLoaded=!0),this.fire(new e.Event("idle"))),this}},W.prototype.remove=function(){this._hash&&this._hash.remove();for(var pe=0,Ee=this._controls;pe<Ee.length;pe+=1){var Ie=Ee[pe];Ie.onRemove(this)}this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof e.window<"u"&&(e.window.removeEventListener("resize",this._onWindowResize,!1),e.window.removeEventListener("online",this._onWindowOnline,!1));var $e=this.painter.context.gl.getExtension("WEBGL_lose_context");$e&&$e.loseContext(),cc(this._canvasContainer),cc(this._controlContainer),cc(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new e.Event("remove"))},W.prototype.triggerRepaint=function(){var pe=this;this.style&&!this._frame&&(this._frame=e.browser.frame(function(Ee){pe._frame=null,pe._render(Ee)}))},W.prototype._onWindowOnline=function(){this._update()},W.prototype._onWindowResize=function(pe){this._trackResize&&this.resize({originalEvent:pe})._update()},ve.showTileBoundaries.get=function(){return!!this._showTileBoundaries},ve.showTileBoundaries.set=function(J){this._showTileBoundaries!==J&&(this._showTileBoundaries=J,this._update())},ve.showPadding.get=function(){return!!this._showPadding},ve.showPadding.set=function(J){this._showPadding!==J&&(this._showPadding=J,this._update())},ve.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},ve.showCollisionBoxes.set=function(J){this._showCollisionBoxes!==J&&(this._showCollisionBoxes=J,J?this.style._generateCollisionBoxes():this._update())},ve.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},ve.showOverdrawInspector.set=function(J){this._showOverdrawInspector!==J&&(this._showOverdrawInspector=J,this._update())},ve.repaint.get=function(){return!!this._repaint},ve.repaint.set=function(J){this._repaint!==J&&(this._repaint=J,this.triggerRepaint())},ve.vertices.get=function(){return!!this._vertices},ve.vertices.set=function(J){this._vertices=J,this._update()},W.prototype._setCacheLimits=function(pe,Ee){e.setCacheLimits(pe,Ee)},ve.version.get=function(){return e.version},Object.defineProperties(W.prototype,ve),W}(Wf);function cc(fe){fe.parentNode&&fe.parentNode.removeChild(fe)}var Cc={showCompass:!0,showZoom:!0,visualizePitch:!1},ef=function(W){var ve=this;this.options=e.extend({},Cc,W),this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(J){return J.preventDefault()}),this.options.showZoom&&(e.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(J){return ve._map.zoomIn({},{originalEvent:J})}),n.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(J){return ve._map.zoomOut({},{originalEvent:J})}),n.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(e.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(J){ve.options.visualizePitch?ve._map.resetNorthPitch({},{originalEvent:J}):ve._map.resetNorth({},{originalEvent:J})}),this._compassIcon=n.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};ef.prototype._updateZoomButtons=function(){var W=this._map.getZoom();this._zoomInButton.disabled=W===this._map.getMaxZoom(),this._zoomOutButton.disabled=W===this._map.getMinZoom()},ef.prototype._rotateCompassArrow=function(){var W=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=W},ef.prototype.onAdd=function(W){return this._map=W,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new _l(this._map,this._compass,this.options.visualizePitch)),this._container},ef.prototype.onRemove=function(){n.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},ef.prototype._createButton=function(W,ve){var J=n.create("button",W,this._container);return J.type="button",J.addEventListener("click",ve),J},ef.prototype._setButtonTitle=function(W,ve){var J=this._map._getUIString("NavigationControl."+ve);W.title=J,W.setAttribute("aria-label",J)};var _l=function(W,ve,J){J===void 0&&(J=!1),this._clickTolerance=10,this.element=ve,this.mouseRotate=new ca({clickTolerance:W.dragRotate._mouseRotate._clickTolerance}),this.map=W,J&&(this.mousePitch=new Ra({clickTolerance:W.dragRotate._mousePitch._clickTolerance})),e.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),n.addEventListener(ve,"mousedown",this.mousedown),n.addEventListener(ve,"touchstart",this.touchstart,{passive:!1}),n.addEventListener(ve,"touchmove",this.touchmove),n.addEventListener(ve,"touchend",this.touchend),n.addEventListener(ve,"touchcancel",this.reset)};_l.prototype.down=function(W,ve){this.mouseRotate.mousedown(W,ve),this.mousePitch&&this.mousePitch.mousedown(W,ve),n.disableDrag()},_l.prototype.move=function(W,ve){var J=this.map,pe=this.mouseRotate.mousemoveWindow(W,ve);if(pe&&pe.bearingDelta&&J.setBearing(J.getBearing()+pe.bearingDelta),this.mousePitch){var Ee=this.mousePitch.mousemoveWindow(W,ve);Ee&&Ee.pitchDelta&&J.setPitch(J.getPitch()+Ee.pitchDelta)}},_l.prototype.off=function(){var W=this.element;n.removeEventListener(W,"mousedown",this.mousedown),n.removeEventListener(W,"touchstart",this.touchstart,{passive:!1}),n.removeEventListener(W,"touchmove",this.touchmove),n.removeEventListener(W,"touchend",this.touchend),n.removeEventListener(W,"touchcancel",this.reset),this.offTemp()},_l.prototype.offTemp=function(){n.enableDrag(),n.removeEventListener(e.window,"mousemove",this.mousemove),n.removeEventListener(e.window,"mouseup",this.mouseup)},_l.prototype.mousedown=function(W){this.down(e.extend({},W,{ctrlKey:!0,preventDefault:function(){return W.preventDefault()}}),n.mousePos(this.element,W)),n.addEventListener(e.window,"mousemove",this.mousemove),n.addEventListener(e.window,"mouseup",this.mouseup)},_l.prototype.mousemove=function(W){this.move(W,n.mousePos(this.element,W))},_l.prototype.mouseup=function(W){this.mouseRotate.mouseupWindow(W),this.mousePitch&&this.mousePitch.mouseupWindow(W),this.offTemp()},_l.prototype.touchstart=function(W){W.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=n.touchPos(this.element,W.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return W.preventDefault()}},this._startPos))},_l.prototype.touchmove=function(W){W.targetTouches.length!==1?this.reset():(this._lastPos=n.touchPos(this.element,W.targetTouches)[0],this.move({preventDefault:function(){return W.preventDefault()}},this._lastPos))},_l.prototype.touchend=function(W){W.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},_l.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};function tf(fe,W,ve){if(fe=new e.LngLat(fe.lng,fe.lat),W){var J=new e.LngLat(fe.lng-360,fe.lat),pe=new e.LngLat(fe.lng+360,fe.lat),Ee=ve.locationPoint(fe).distSqr(W);ve.locationPoint(J).distSqr(W)<Ee?fe=J:ve.locationPoint(pe).distSqr(W)<Ee&&(fe=pe)}for(;Math.abs(fe.lng-ve.center.lng)>180;){var Ie=ve.locationPoint(fe);if(Ie.x>=0&&Ie.y>=0&&Ie.x<=ve.width&&Ie.y<=ve.height)break;fe.lng>ve.center.lng?fe.lng-=360:fe.lng+=360}return fe}var hc={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function kc(fe,W,ve){var J=fe.classList;for(var pe in hc)J.remove("mapboxgl-"+ve+"-anchor-"+pe);J.add("mapboxgl-"+ve+"-anchor-"+W)}var Xf=function(fe){function W(ve,J){var pe=this;if(fe.call(this),(ve instanceof e.window.HTMLElement||J)&&(ve=e.extend({element:ve},J)),e.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=ve&&ve.anchor||"center",this._color=ve&&ve.color||"#3FB1CE",this._draggable=ve&&ve.draggable||!1,this._state="inactive",this._rotation=ve&&ve.rotation||0,this._rotationAlignment=ve&&ve.rotationAlignment||"auto",this._pitchAlignment=ve&&ve.pitchAlignment&&ve.pitchAlignment!=="auto"?ve.pitchAlignment:this._rotationAlignment,!ve||!ve.element){this._defaultMarker=!0,this._element=n.create("div"),this._element.setAttribute("aria-label","Map marker");var Ee=n.createNS("http://www.w3.org/2000/svg","svg");Ee.setAttributeNS(null,"display","block"),Ee.setAttributeNS(null,"height","41px"),Ee.setAttributeNS(null,"width","27px"),Ee.setAttributeNS(null,"viewBox","0 0 27 41");var Ie=n.createNS("http://www.w3.org/2000/svg","g");Ie.setAttributeNS(null,"stroke","none"),Ie.setAttributeNS(null,"stroke-width","1"),Ie.setAttributeNS(null,"fill","none"),Ie.setAttributeNS(null,"fill-rule","evenodd");var $e=n.createNS("http://www.w3.org/2000/svg","g");$e.setAttributeNS(null,"fill-rule","nonzero");var dt=n.createNS("http://www.w3.org/2000/svg","g");dt.setAttributeNS(null,"transform","translate(3.0, 29.0)"),dt.setAttributeNS(null,"fill","#000000");for(var Ft=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}],nr=0,dr=Ft;nr<dr.length;nr+=1){var xr=dr[nr],Fr=n.createNS("http://www.w3.org/2000/svg","ellipse");Fr.setAttributeNS(null,"opacity","0.04"),Fr.setAttributeNS(null,"cx","10.5"),Fr.setAttributeNS(null,"cy","5.80029008"),Fr.setAttributeNS(null,"rx",xr.rx),Fr.setAttributeNS(null,"ry",xr.ry),dt.appendChild(Fr)}var Zr=n.createNS("http://www.w3.org/2000/svg","g");Zr.setAttributeNS(null,"fill",this._color);var Qr=n.createNS("http://www.w3.org/2000/svg","path");Qr.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Zr.appendChild(Qr);var jr=n.createNS("http://www.w3.org/2000/svg","g");jr.setAttributeNS(null,"opacity","0.25"),jr.setAttributeNS(null,"fill","#000000");var rn=n.createNS("http://www.w3.org/2000/svg","path");rn.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),jr.appendChild(rn);var mn=n.createNS("http://www.w3.org/2000/svg","g");mn.setAttributeNS(null,"transform","translate(6.0, 7.0)"),mn.setAttributeNS(null,"fill","#FFFFFF");var Fn=n.createNS("http://www.w3.org/2000/svg","g");Fn.setAttributeNS(null,"transform","translate(8.0, 8.0)");var Hn=n.createNS("http://www.w3.org/2000/svg","circle");Hn.setAttributeNS(null,"fill","#000000"),Hn.setAttributeNS(null,"opacity","0.25"),Hn.setAttributeNS(null,"cx","5.5"),Hn.setAttributeNS(null,"cy","5.5"),Hn.setAttributeNS(null,"r","5.4999962");var ta=n.createNS("http://www.w3.org/2000/svg","circle");ta.setAttributeNS(null,"fill","#FFFFFF"),ta.setAttributeNS(null,"cx","5.5"),ta.setAttributeNS(null,"cy","5.5"),ta.setAttributeNS(null,"r","5.4999962"),Fn.appendChild(Hn),Fn.appendChild(ta),$e.appendChild(dt),$e.appendChild(Zr),$e.appendChild(jr),$e.appendChild(mn),$e.appendChild(Fn),Ee.appendChild($e),this._element.appendChild(Ee),this._offset=e.Point.convert(ve&&ve.offset||[0,-14])}else this._element=ve.element,this._offset=e.Point.convert(ve&&ve.offset||[0,0]);this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(ia){ia.preventDefault()}),this._element.addEventListener("mousedown",function(ia){ia.preventDefault()}),this._element.addEventListener("focus",function(){var ia=pe._map.getContainer();ia.scrollTop=0,ia.scrollLeft=0}),kc(this._element,this._anchor,"marker"),this._popup=null}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.addTo=function(J){return this.remove(),this._map=J,J.getCanvasContainer().appendChild(this._element),J.on("move",this._update),J.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},W.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),n.remove(this._element),this._popup&&this._popup.remove(),this},W.prototype.getLngLat=function(){return this._lngLat},W.prototype.setLngLat=function(J){return this._lngLat=e.LngLat.convert(J),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},W.prototype.getElement=function(){return this._element},W.prototype.setPopup=function(J){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),J){if(!("offset"in J.options)){var pe=38.1,Ee=13.5,Ie=Math.sqrt(Math.pow(Ee,2)/2);J.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-pe],"bottom-left":[Ie,(pe-Ee+Ie)*-1],"bottom-right":[-Ie,(pe-Ee+Ie)*-1],left:[Ee,(pe-Ee)*-1],right:[-Ee,(pe-Ee)*-1]}:this._offset}this._popup=J,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},W.prototype._onKeyPress=function(J){var pe=J.code,Ee=J.charCode||J.keyCode;(pe==="Space"||pe==="Enter"||Ee===32||Ee===13)&&this.togglePopup()},W.prototype._onMapClick=function(J){var pe=J.originalEvent.target,Ee=this._element;this._popup&&(pe===Ee||Ee.contains(pe))&&this.togglePopup()},W.prototype.getPopup=function(){return this._popup},W.prototype.togglePopup=function(){var J=this._popup;if(J)J.isOpen()?J.remove():J.addTo(this._map);else return this;return this},W.prototype._update=function(J){if(!!this._map){this._map.transform.renderWorldCopies&&(this._lngLat=tf(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var pe="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?pe="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(pe="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var Ee="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?Ee="rotateX(0deg)":this._pitchAlignment==="map"&&(Ee="rotateX("+this._map.getPitch()+"deg)"),(!J||J.type==="moveend")&&(this._pos=this._pos.round()),n.setTransform(this._element,hc[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+Ee+" "+pe)}},W.prototype.getOffset=function(){return this._offset},W.prototype.setOffset=function(J){return this._offset=e.Point.convert(J),this._update(),this},W.prototype._onMove=function(J){this._pos=J.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new e.Event("dragstart"))),this.fire(new e.Event("drag"))},W.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new e.Event("dragend")),this._state="inactive"},W.prototype._addDragHandler=function(J){this._element.contains(J.originalEvent.target)&&(J.preventDefault(),this._positionDelta=J.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},W.prototype.setDraggable=function(J){return this._draggable=!!J,this._map&&(J?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},W.prototype.isDraggable=function(){return this._draggable},W.prototype.setRotation=function(J){return this._rotation=J||0,this._update(),this},W.prototype.getRotation=function(){return this._rotation},W.prototype.setRotationAlignment=function(J){return this._rotationAlignment=J||"auto",this._update(),this},W.prototype.getRotationAlignment=function(){return this._rotationAlignment},W.prototype.setPitchAlignment=function(J){return this._pitchAlignment=J&&J!=="auto"?J:this._rotationAlignment,this._update(),this},W.prototype.getPitchAlignment=function(){return this._pitchAlignment},W}(e.Evented),mh={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Tf;function vc(fe){Tf!==void 0?fe(Tf):e.window.navigator.permissions!==void 0?e.window.navigator.permissions.query({name:"geolocation"}).then(function(W){Tf=W.state!=="denied",fe(Tf)}):(Tf=!!e.window.navigator.geolocation,fe(Tf))}var Zf=0,Af=!1,xh=function(fe){function W(ve){fe.call(this),this.options=e.extend({},mh,ve),e.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.onAdd=function(J){return this._map=J,this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),vc(this._setupUI),this._container},W.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),n.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Zf=0,Af=!1},W.prototype._isOutOfMapMaxBounds=function(J){var pe=this._map.getMaxBounds(),Ee=J.coords;return pe&&(Ee.longitude<pe.getWest()||Ee.longitude>pe.getEast()||Ee.latitude<pe.getSouth()||Ee.latitude>pe.getNorth())},W.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break}},W.prototype._onSuccess=function(J){if(!!this._map){if(this._isOutOfMapMaxBounds(J)){this._setErrorState(),this.fire(new e.Event("outofmaxbounds",J)),this._updateMarker(),this._finish();return}if(this.options.trackUserLocation)switch(this._lastKnownPosition=J,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(J),(!this.options.trackUserLocation||this._watchState==="ACTIVE_LOCK")&&this._updateCamera(J),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("geolocate",J)),this._finish()}},W.prototype._updateCamera=function(J){var pe=new e.LngLat(J.coords.longitude,J.coords.latitude),Ee=J.coords.accuracy,Ie=this._map.getBearing(),$e=e.extend({bearing:Ie},this.options.fitBoundsOptions);this._map.fitBounds(pe.toBounds(Ee),$e,{geolocateSource:!0})},W.prototype._updateMarker=function(J){if(J){var pe=new e.LngLat(J.coords.longitude,J.coords.latitude);this._accuracyCircleMarker.setLngLat(pe).addTo(this._map),this._userLocationDotMarker.setLngLat(pe).addTo(this._map),this._accuracy=J.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},W.prototype._updateCircleRadius=function(){var J=this._map._container.clientHeight/2,pe=this._map.unproject([0,J]),Ee=this._map.unproject([1,J]),Ie=pe.distanceTo(Ee),$e=Math.ceil(2*this._accuracy/Ie);this._circleElement.style.width=$e+"px",this._circleElement.style.height=$e+"px"},W.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},W.prototype._onError=function(J){if(!!this._map){if(this.options.trackUserLocation)if(J.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var pe=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=pe,this._geolocateButton.setAttribute("aria-label",pe),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(J.code===3&&Af)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("error",J)),this._finish()}},W.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},W.prototype._setupUI=function(J){var pe=this;if(this._container.addEventListener("contextmenu",function($e){return $e.preventDefault()}),this._geolocateButton=n.create("button","mapboxgl-ctrl-geolocate",this._container),n.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",J===!1){e.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var Ee=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=Ee,this._geolocateButton.setAttribute("aria-label",Ee)}else{var Ie=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=Ie,this._geolocateButton.setAttribute("aria-label",Ie)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=n.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Xf(this._dotElement),this._circleElement=n.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Xf({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function($e){var dt=$e.originalEvent&&$e.originalEvent.type==="resize";!$e.geolocateSource&&pe._watchState==="ACTIVE_LOCK"&&!dt&&(pe._watchState="BACKGROUND",pe._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),pe._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),pe.fire(new e.Event("trackuserlocationend")))})},W.prototype.trigger=function(){if(!this._setup)return e.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new e.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Zf--,Af=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new e.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new e.Event("trackuserlocationstart"));break}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error");break}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Zf++;var J;Zf>1?(J={maximumAge:6e5,timeout:0},Af=!0):(J=this.options.positionOptions,Af=!1),this._geolocationWatchID=e.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,J)}}else e.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},W.prototype._clearWatch=function(){e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},W}(e.Evented),ov={maxWidth:100,unit:"metric"},Mf=function(W){this.options=e.extend({},ov,W),e.bindAll(["_onMove","setUnit"],this)};Mf.prototype.getDefaultPosition=function(){return"bottom-left"},Mf.prototype._onMove=function(){bh(this._map,this._container,this.options)},Mf.prototype.onAdd=function(W){return this._map=W,this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",W.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Mf.prototype.onRemove=function(){n.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Mf.prototype.setUnit=function(W){this.options.unit=W,bh(this._map,this._container,this.options)};function bh(fe,W,ve){var J=ve&&ve.maxWidth||100,pe=fe._container.clientHeight/2,Ee=fe.unproject([0,pe]),Ie=fe.unproject([J,pe]),$e=Ee.distanceTo(Ie);if(ve&&ve.unit==="imperial"){var dt=3.2808*$e;if(dt>5280){var Ft=dt/5280;Kf(W,J,Ft,fe._getUIString("ScaleControl.Miles"))}else Kf(W,J,dt,fe._getUIString("ScaleControl.Feet"))}else if(ve&&ve.unit==="nautical"){var nr=$e/1852;Kf(W,J,nr,fe._getUIString("ScaleControl.NauticalMiles"))}else $e>=1e3?Kf(W,J,$e/1e3,fe._getUIString("ScaleControl.Kilometers")):Kf(W,J,$e,fe._getUIString("ScaleControl.Meters"))}function Kf(fe,W,ve,J){var pe=lv(ve),Ee=pe/ve;fe.style.width=W*Ee+"px",fe.innerHTML=pe+"&nbsp;"+J}function sv(fe){var W=Math.pow(10,Math.ceil(-Math.log(fe)/Math.LN10));return Math.round(fe*W)/W}function lv(fe){var W=Math.pow(10,(""+Math.floor(fe)).length-1),ve=fe/W;return ve=ve>=10?10:ve>=5?5:ve>=3?3:ve>=2?2:ve>=1?1:sv(ve),W*ve}var yu=function(W){this._fullscreen=!1,W&&W.container&&(W.container instanceof e.window.HTMLElement?this._container=W.container:e.warnOnce("Full screen control 'container' must be a DOM element.")),e.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in e.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in e.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in e.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in e.window.document&&(this._fullscreenchange="MSFullscreenChange")};yu.prototype.onAdd=function(W){return this._map=W,this._container||(this._container=this._map.getContainer()),this._controlContainer=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",e.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},yu.prototype.onRemove=function(){n.remove(this._controlContainer),this._map=null,e.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},yu.prototype._checkFullscreenSupport=function(){return!!(e.window.document.fullscreenEnabled||e.window.document.mozFullScreenEnabled||e.window.document.msFullscreenEnabled||e.window.document.webkitFullscreenEnabled)},yu.prototype._setupUI=function(){var W=this._fullscreenButton=n.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);n.create("span","mapboxgl-ctrl-icon",W).setAttribute("aria-hidden",!0),W.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),e.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},yu.prototype._updateTitle=function(){var W=this._getTitle();this._fullscreenButton.setAttribute("aria-label",W),this._fullscreenButton.title=W},yu.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},yu.prototype._isFullscreen=function(){return this._fullscreen},yu.prototype._changeIcon=function(){var W=e.window.document.fullscreenElement||e.window.document.mozFullScreenElement||e.window.document.webkitFullscreenElement||e.window.document.msFullscreenElement;W===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},yu.prototype._onClickFullscreen=function(){this._isFullscreen()?e.window.document.exitFullscreen?e.window.document.exitFullscreen():e.window.document.mozCancelFullScreen?e.window.document.mozCancelFullScreen():e.window.document.msExitFullscreen?e.window.document.msExitFullscreen():e.window.document.webkitCancelFullScreen&&e.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var uv={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},fv=function(fe){function W(ve){fe.call(this),this.options=e.extend(Object.create(uv),ve),e.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return fe&&(W.__proto__=fe),W.prototype=Object.create(fe&&fe.prototype),W.prototype.constructor=W,W.prototype.addTo=function(J){return this._map&&this.remove(),this._map=J,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new e.Event("open")),this},W.prototype.isOpen=function(){return!!this._map},W.prototype.remove=function(){return this._content&&n.remove(this._content),this._container&&(n.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new e.Event("close")),this},W.prototype.getLngLat=function(){return this._lngLat},W.prototype.setLngLat=function(J){return this._lngLat=e.LngLat.convert(J),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},W.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},W.prototype.getElement=function(){return this._container},W.prototype.setText=function(J){return this.setDOMContent(e.window.document.createTextNode(J))},W.prototype.setHTML=function(J){var pe=e.window.document.createDocumentFragment(),Ee=e.window.document.createElement("body"),Ie;for(Ee.innerHTML=J;Ie=Ee.firstChild,!!Ie;)pe.appendChild(Ie);return this.setDOMContent(pe)},W.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},W.prototype.setMaxWidth=function(J){return this.options.maxWidth=J,this._update(),this},W.prototype.setDOMContent=function(J){return this._createContent(),this._content.appendChild(J),this._update(),this},W.prototype.addClassName=function(J){this._container&&this._container.classList.add(J)},W.prototype.removeClassName=function(J){this._container&&this._container.classList.remove(J)},W.prototype.toggleClassName=function(J){if(this._container)return this._container.classList.toggle(J)},W.prototype._createContent=function(){this._content&&n.remove(this._content),this._content=n.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=n.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},W.prototype._onMouseUp=function(J){this._update(J.point)},W.prototype._onMouseMove=function(J){this._update(J.point)},W.prototype._onDrag=function(J){this._update(J.point)},W.prototype._update=function(J){var pe=this,Ee=this._lngLat||this._trackPointer;if(!(!this._map||!Ee||!this._content)&&(this._container||(this._container=n.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=n.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(Fr){return pe._container.classList.add(Fr)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=tf(this._lngLat,this._pos,this._map.transform)),!(this._trackPointer&&!J))){var Ie=this._pos=this._trackPointer&&J?J:this._map.project(this._lngLat),$e=this.options.anchor,dt=wh(this.options.offset);if(!$e){var Ft=this._container.offsetWidth,nr=this._container.offsetHeight,dr;Ie.y+dt.bottom.y<nr?dr=["top"]:Ie.y>this._map.transform.height-nr?dr=["bottom"]:dr=[],Ie.x<Ft/2?dr.push("left"):Ie.x>this._map.transform.width-Ft/2&&dr.push("right"),dr.length===0?$e="bottom":$e=dr.join("-")}var xr=Ie.add(dt[$e]).round();n.setTransform(this._container,hc[$e]+" translate("+xr.x+"px,"+xr.y+"px)"),kc(this._container,$e,"popup")}},W.prototype._onClose=function(){this.remove()},W}(e.Evented);function wh(fe){if(fe)if(typeof fe=="number"){var W=Math.round(Math.sqrt(.5*Math.pow(fe,2)));return{center:new e.Point(0,0),top:new e.Point(0,fe),"top-left":new e.Point(W,W),"top-right":new e.Point(-W,W),bottom:new e.Point(0,-fe),"bottom-left":new e.Point(W,-W),"bottom-right":new e.Point(-W,-W),left:new e.Point(fe,0),right:new e.Point(-fe,0)}}else if(fe instanceof e.Point||Array.isArray(fe)){var ve=e.Point.convert(fe);return{center:ve,top:ve,"top-left":ve,"top-right":ve,bottom:ve,"bottom-left":ve,"bottom-right":ve,left:ve,right:ve}}else return{center:e.Point.convert(fe.center||[0,0]),top:e.Point.convert(fe.top||[0,0]),"top-left":e.Point.convert(fe["top-left"]||[0,0]),"top-right":e.Point.convert(fe["top-right"]||[0,0]),bottom:e.Point.convert(fe.bottom||[0,0]),"bottom-left":e.Point.convert(fe["bottom-left"]||[0,0]),"bottom-right":e.Point.convert(fe["bottom-right"]||[0,0]),left:e.Point.convert(fe.left||[0,0]),right:e.Point.convert(fe.right||[0,0])};else return wh(new e.Point(0,0))}var cv={version:e.version,supported:a,setRTLTextPlugin:e.setRTLTextPlugin,getRTLTextPluginStatus:e.getRTLTextPluginStatus,Map:yh,NavigationControl:ef,GeolocateControl:xh,AttributionControl:Jl,ScaleControl:Mf,FullscreenControl:yu,Popup:fv,Marker:Xf,Style:vs,LngLat:e.LngLat,LngLatBounds:e.LngLatBounds,Point:e.Point,MercatorCoordinate:e.MercatorCoordinate,Evented:e.Evented,config:e.config,prewarm:fr,clearPrewarmedResources:Rr,get accessToken(){return e.config.ACCESS_TOKEN},set accessToken(fe){e.config.ACCESS_TOKEN=fe},get baseApiUrl(){return e.config.API_URL},set baseApiUrl(fe){e.config.API_URL=fe},get workerCount(){return Rt.workerCount},set workerCount(fe){Rt.workerCount=fe},get maxParallelImageRequests(){return e.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(fe){e.config.MAX_PARALLEL_IMAGE_REQUESTS=fe},clearStorage:function(W){e.clearTileCache(W)},workerUrl:""};return cv}),M})},{}],240:[function(i,U,V){U.exports=Math.log2||function(w){return Math.log(w)*Math.LOG2E}},{}],241:[function(i,U,V){U.exports=f;var w=i("mouse-event");function f(M,T){T||(T=M,M=window);var e=0,a=0,n=0,r={shift:!1,alt:!1,control:!1,meta:!1},t=!1;function h(A){var _=!1;return"altKey"in A&&(_=_||A.altKey!==r.alt,r.alt=!!A.altKey),"shiftKey"in A&&(_=_||A.shiftKey!==r.shift,r.shift=!!A.shiftKey),"ctrlKey"in A&&(_=_||A.ctrlKey!==r.control,r.control=!!A.ctrlKey),"metaKey"in A&&(_=_||A.metaKey!==r.meta,r.meta=!!A.metaKey),_}function s(A,_){var g=w.x(_),b=w.y(_);"buttons"in _&&(A=_.buttons|0),(A!==e||g!==a||b!==n||h(_))&&(e=A|0,a=g||0,n=b||0,T&&T(e,a,n,r))}function o(A){s(0,A)}function y(){(e||a||n||r.shift||r.alt||r.meta||r.control)&&(a=n=0,e=0,r.shift=r.alt=r.control=r.meta=!1,T&&T(0,0,0,r))}function d(A){h(A)&&T&&T(e,a,n,r)}function p(A){w.buttons(A)===0?s(0,A):s(e,A)}function c(A){s(e|w.buttons(A),A)}function m(A){s(e&~w.buttons(A),A)}function l(){t||(t=!0,M.addEventListener("mousemove",p),M.addEventListener("mousedown",c),M.addEventListener("mouseup",m),M.addEventListener("mouseleave",o),M.addEventListener("mouseenter",o),M.addEventListener("mouseout",o),M.addEventListener("mouseover",o),M.addEventListener("blur",y),M.addEventListener("keyup",d),M.addEventListener("keydown",d),M.addEventListener("keypress",d),M!==window&&(window.addEventListener("blur",y),window.addEventListener("keyup",d),window.addEventListener("keydown",d),window.addEventListener("keypress",d)))}function x(){!t||(t=!1,M.removeEventListener("mousemove",p),M.removeEventListener("mousedown",c),M.removeEventListener("mouseup",m),M.removeEventListener("mouseleave",o),M.removeEventListener("mouseenter",o),M.removeEventListener("mouseout",o),M.removeEventListener("mouseover",o),M.removeEventListener("blur",y),M.removeEventListener("keyup",d),M.removeEventListener("keydown",d),M.removeEventListener("keypress",d),M!==window&&(window.removeEventListener("blur",y),window.removeEventListener("keyup",d),window.removeEventListener("keydown",d),window.removeEventListener("keypress",d)))}l();var u={element:M};return Object.defineProperties(u,{enabled:{get:function(){return t},set:function(A){A?l():x()},enumerable:!0},buttons:{get:function(){return e},enumerable:!0},x:{get:function(){return a},enumerable:!0},y:{get:function(){return n},enumerable:!0},mods:{get:function(){return r},enumerable:!0}}),u}},{"mouse-event":243}],242:[function(i,U,V){var w={left:0,top:0};U.exports=f;function f(T,e,a){e=e||T.currentTarget||T.srcElement,Array.isArray(a)||(a=[0,0]);var n=T.clientX||0,r=T.clientY||0,t=M(e);return a[0]=n-t.left,a[1]=r-t.top,a}function M(T){return T===window||T===document||T===document.body?w:T.getBoundingClientRect()}},{}],243:[function(i,U,V){function w(e){if(typeof e=="object"){if("buttons"in e)return e.buttons;if("which"in e){var a=e.which;if(a===2)return 4;if(a===3)return 2;if(a>0)return 1<<a-1}else if("button"in e){var a=e.button;if(a===1)return 4;if(a===2)return 2;if(a>=0)return 1<<a}}return 0}V.buttons=w;function f(e){return e.target||e.srcElement||window}V.element=f;function M(e){if(typeof e=="object"){if("offsetX"in e)return e.offsetX;var a=f(e),n=a.getBoundingClientRect();return e.clientX-n.left}return 0}V.x=M;function T(e){if(typeof e=="object"){if("offsetY"in e)return e.offsetY;var a=f(e),n=a.getBoundingClientRect();return e.clientY-n.top}return 0}V.y=T},{}],244:[function(i,U,V){var w=i("to-px");U.exports=f;function f(M,T,e){typeof M=="function"&&(e=!!T,T=M,M=window);var a=w("ex",M),n=function(r){e&&r.preventDefault();var t=r.deltaX||0,h=r.deltaY||0,s=r.deltaZ||0,o=r.deltaMode,y=1;switch(o){case 1:y=a;break;case 2:y=window.innerHeight;break}if(t*=y,h*=y,s*=y,t||h||s)return T(t,h,s,r)};return M.addEventListener("wheel",n),n}},{"to-px":315}],245:[function(i,U,V){(function(w,f){(function(){/*! Native Promise Only
    v0.8.1 (c) Kyle Simpson
    MIT License: http://getify.mit-license.org
*/(function(T,e,a){e[T]=e[T]||a(),typeof U<"u"&&U.exports&&(U.exports=e[T])})("Promise",typeof w<"u"?w:this,function(){var T,e,a,n=Object.prototype.toString,r=typeof f<"u"?function(A){return f(A)}:setTimeout;try{Object.defineProperty({},"x",{}),T=function(A,_,g,b){return Object.defineProperty(A,_,{value:g,writable:!0,configurable:b!==!1})}}catch{T=function(_,g,b){return _[g]=b,_}}a=function(){var A,_,g;function b(v,k){this.fn=v,this.self=k,this.next=void 0}return{add:function(k,S){g=new b(k,S),_?_.next=g:A=g,_=g,g=void 0},drain:function(){var k=A;for(A=_=e=void 0;k;)k.fn.call(k.self),k=k.next}}}();function t(u,A){a.add(u,A),e||(e=r(a.drain))}function h(u){var A,_=typeof u;return u!=null&&(_=="object"||_=="function")&&(A=u.then),typeof A=="function"?A:!1}function s(){for(var u=0;u<this.chain.length;u++)o(this,this.state===1?this.chain[u].success:this.chain[u].failure,this.chain[u]);this.chain.length=0}function o(u,A,_){var g,b;try{A===!1?_.reject(u.msg):(A===!0?g=u.msg:g=A.call(void 0,u.msg),g===_.promise?_.reject(TypeError("Promise-chain cycle")):(b=h(g))?b.call(g,_.resolve,_.reject):_.resolve(g))}catch(v){_.reject(v)}}function y(u){var A,_=this;if(!_.triggered){_.triggered=!0,_.def&&(_=_.def);try{(A=h(u))?t(function(){var g=new c(_);try{A.call(u,function(){y.apply(g,arguments)},function(){d.apply(g,arguments)})}catch(b){d.call(g,b)}}):(_.msg=u,_.state=1,_.chain.length>0&&t(s,_))}catch(g){d.call(new c(_),g)}}}function d(u){var A=this;A.triggered||(A.triggered=!0,A.def&&(A=A.def),A.msg=u,A.state=2,A.chain.length>0&&t(s,A))}function p(u,A,_,g){for(var b=0;b<A.length;b++)(function(k){u.resolve(A[k]).then(function(E){_(k,E)},g)})(b)}function c(u){this.def=u,this.triggered=!1}function m(u){this.promise=u,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function l(u){if(typeof u!="function")throw TypeError("Not a function");if(this.__NPO__!==0)throw TypeError("Not a promise");this.__NPO__=1;var A=new m(this);this.then=function(g,b){var v={success:typeof g=="function"?g:!0,failure:typeof b=="function"?b:!1};return v.promise=new this.constructor(function(S,E){if(typeof S!="function"||typeof E!="function")throw TypeError("Not a function");v.resolve=S,v.reject=E}),A.chain.push(v),A.state!==0&&t(s,A),v.promise},this.catch=function(g){return this.then(void 0,g)};try{u.call(void 0,function(g){y.call(A,g)},function(g){d.call(A,g)})}catch(_){d.call(A,_)}}var x=T({},"constructor",l,!1);return l.prototype=x,T(x,"__NPO__",0,!1),T(l,"resolve",function(A){var _=this;return A&&typeof A=="object"&&A.__NPO__===1?A:new _(function(b,v){if(typeof b!="function"||typeof v!="function")throw TypeError("Not a function");b(A)})}),T(l,"reject",function(A){return new this(function(g,b){if(typeof g!="function"||typeof b!="function")throw TypeError("Not a function");b(A)})}),T(l,"all",function(A){var _=this;return n.call(A)!="[object Array]"?_.reject(TypeError("Not an array")):A.length===0?_.resolve([]):new _(function(b,v){if(typeof b!="function"||typeof v!="function")throw TypeError("Not a function");var k=A.length,S=Array(k),E=0;p(_,A,function(F,I){S[F]=I,++E===k&&b(S)},v)})}),T(l,"race",function(A){var _=this;return n.call(A)!="[object Array]"?_.reject(TypeError("Not an array")):new _(function(b,v){if(typeof b!="function"||typeof v!="function")throw TypeError("Not a function");p(_,A,function(S,E){b(E)},v)})}),l})}).call(this)}).call(this,typeof Je<"u"?Je:typeof self<"u"?self:typeof window<"u"?window:{},i("timers").setImmediate)},{timers:312}],246:[function(i,U,V){var w=Math.PI,f=r(120);U.exports=M;function M(t){for(var h,s=[],o=0,y=0,d=0,p=0,c=null,m=null,l=0,x=0,u=0,A=t.length;u<A;u++){var _=t[u],g=_[0];switch(g){case"M":d=_[1],p=_[2];break;case"A":_=a(l,x,_[1],_[2],r(_[3]),_[4],_[5],_[6],_[7]),_.unshift("C"),_.length>7&&(s.push(_.splice(0,7)),_.unshift("C"));break;case"S":var b=l,v=x;(h=="C"||h=="S")&&(b+=b-o,v+=v-y),_=["C",b,v,_[1],_[2],_[3],_[4]];break;case"T":h=="Q"||h=="T"?(c=l*2-c,m=x*2-m):(c=l,m=x),_=e(l,x,c,m,_[1],_[2]);break;case"Q":c=_[1],m=_[2],_=e(l,x,_[1],_[2],_[3],_[4]);break;case"L":_=T(l,x,_[1],_[2]);break;case"H":_=T(l,x,_[1],x);break;case"V":_=T(l,x,l,_[1]);break;case"Z":_=T(l,x,d,p);break}h=g,l=_[_.length-2],x=_[_.length-1],_.length>4?(o=_[_.length-4],y=_[_.length-3]):(o=l,y=x),s.push(_)}return s}function T(t,h,s,o){return["C",t,h,s,o,s,o]}function e(t,h,s,o,y,d){return["C",t/3+2/3*s,h/3+2/3*o,y/3+2/3*s,d/3+2/3*o,y,d]}function a(t,h,s,o,y,d,p,c,m,l){if(l)E=l[0],C=l[1],k=l[2],S=l[3];else{var x=n(t,h,-y);t=x.x,h=x.y,x=n(c,m,-y),c=x.x,m=x.y;var u=(t-c)/2,A=(h-m)/2,_=u*u/(s*s)+A*A/(o*o);_>1&&(_=Math.sqrt(_),s=_*s,o=_*o);var g=s*s,b=o*o,v=(d==p?-1:1)*Math.sqrt(Math.abs((g*b-g*A*A-b*u*u)/(g*A*A+b*u*u)));v==1/0&&(v=1);var k=v*s*A/o+(t+c)/2,S=v*-o*u/s+(h+m)/2,E=Math.asin(((h-S)/o).toFixed(9)),C=Math.asin(((m-S)/o).toFixed(9));E=t<k?w-E:E,C=c<k?w-C:C,E<0&&(E=w*2+E),C<0&&(C=w*2+C),p&&E>C&&(E=E-w*2),!p&&C>E&&(C=C-w*2)}if(Math.abs(C-E)>f){var F=C,I=c,D=m;C=E+f*(p&&C>E?1:-1),c=k+s*Math.cos(C),m=S+o*Math.sin(C);var R=a(c,m,s,o,y,0,p,I,D,[C,F,k,S])}var O=Math.tan((C-E)/4),z=4/3*s*O,B=4/3*o*O,G=[2*t-(t+z*Math.sin(E)),2*h-(h-B*Math.cos(E)),c+z*Math.sin(C),m-B*Math.cos(C),c,m];if(l)return G;R&&(G=G.concat(R));for(var Q=0;Q<G.length;){var X=n(G[Q],G[Q+1],y);G[Q++]=X.x,G[Q++]=X.y}return G}function n(t,h,s){return{x:t*Math.cos(s)-h*Math.sin(s),y:t*Math.sin(s)+h*Math.cos(s)}}function r(t){return t*(w/180)}},{}],247:[function(i,U,V){var w=Object.getOwnPropertySymbols,f=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;function T(a){if(a==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(a)}function e(){try{if(!Object.assign)return!1;var a=new String("abc");if(a[5]="de",Object.getOwnPropertyNames(a)[0]==="5")return!1;for(var n={},r=0;r<10;r++)n["_"+String.fromCharCode(r)]=r;var t=Object.getOwnPropertyNames(n).map(function(s){return n[s]});if(t.join("")!=="0123456789")return!1;var h={};return"abcdefghijklmnopqrst".split("").forEach(function(s){h[s]=s}),Object.keys(Object.assign({},h)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}U.exports=e()?Object.assign:function(a,n){for(var r,t=T(a),h,s=1;s<arguments.length;s++){r=Object(arguments[s]);for(var o in r)f.call(r,o)&&(t[o]=r[o]);if(w){h=w(r);for(var y=0;y<h.length;y++)M.call(r,h[y])&&(t[h[y]]=r[h[y]])}}return t}},{}],248:[function(i,U,V){function w(T,e){if(typeof T!="string")return[T];var a=[T];typeof e=="string"||Array.isArray(e)?e={brackets:e}:e||(e={});var n=e.brackets?Array.isArray(e.brackets)?e.brackets:[e.brackets]:["{}","[]","()"],r=e.escape||"___",t=!!e.flat;n.forEach(function(o){var y=new RegExp(["\\",o[0],"[^\\",o[0],"\\",o[1],"]*\\",o[1]].join("")),d=[];function p(c,m,l){var x=a.push(c.slice(o[0].length,-o[1].length))-1;return d.push(x),r+x+r}a.forEach(function(c,m){for(var l,x=0;c!=l;)if(l=c,c=c.replace(y,p),x++>1e4)throw Error("References have circular dependency. Please, check them.");a[m]=c}),d=d.reverse(),a=a.map(function(c){return d.forEach(function(m){c=c.replace(new RegExp("(\\"+r+m+"\\"+r+")","g"),o[0]+"$1"+o[1])}),c})});var h=new RegExp("\\"+r+"([0-9]+)\\"+r);function s(o,y,d){for(var p=[],c,m=0;c=h.exec(o);){if(m++>1e4)throw Error("Circular references in parenthesis");p.push(o.slice(0,c.index)),p.push(s(y[c[1]],y)),o=o.slice(c.index+c[0].length)}return p.push(o),p}return t?a:s(a[0],a)}function f(T,e){if(e&&e.flat){var a=e&&e.escape||"___",n=T[0],r;if(!n)return"";for(var t=new RegExp("\\"+a+"([0-9]+)\\"+a),h=0;n!=r;){if(h++>1e4)throw Error("Circular references in "+T);r=n,n=n.replace(t,s)}return n}return T.reduce(function o(y,d){return Array.isArray(d)&&(d=d.reduce(o,"")),y+d},"");function s(o,y){if(T[y]==null)throw Error("Reference "+y+"is undefined");return T[y]}}function M(T,e){return Array.isArray(T)?f(T,e):w(T,e)}M.parse=w,M.stringify=f,U.exports=M},{}],249:[function(i,U,V){var w=i("pick-by-alias");U.exports=f;function f(M){var T;return arguments.length>1&&(M=arguments),typeof M=="string"?M=M.split(/\s/).map(parseFloat):typeof M=="number"&&(M=[M]),M.length&&typeof M[0]=="number"?M.length===1?T={width:M[0],height:M[0],x:0,y:0}:M.length===2?T={width:M[0],height:M[1],x:0,y:0}:T={x:M[0],y:M[1],width:M[2]-M[0]||0,height:M[3]-M[1]||0}:M&&(M=w(M,{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"}),T={x:M.left||0,y:M.top||0},M.width==null?M.right?T.width=M.right-T.x:T.width=0:T.width=M.width,M.height==null?M.bottom?T.height=M.bottom-T.y:T.height=0:T.height=M.height),T}},{"pick-by-alias":253}],250:[function(i,U,V){U.exports=M;var w={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},f=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function M(a){var n=[];return a.replace(f,function(r,t,h){var s=t.toLowerCase();for(h=e(h),s=="m"&&h.length>2&&(n.push([t].concat(h.splice(0,2))),s="l",t=t=="m"?"l":"L");;){if(h.length==w[s])return h.unshift(t),n.push(h);if(h.length<w[s])throw new Error("malformed path data");n.push([t].concat(h.splice(0,w[s])))}}),n}var T=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function e(a){var n=a.match(T);return n?n.map(Number):[]}},{}],251:[function(i,U,V){U.exports=function(f,M){M||(M=[0,""]),f=String(f);var T=parseFloat(f,10);return M[0]=T,M[1]=f.match(/[\d.\-\+]*\s*(.*)/)[1]||"",M}},{}],252:[function(i,U,V){(function(w){(function(){(function(){var f,M,T,e,a,n;typeof performance<"u"&&performance!==null&&performance.now?U.exports=function(){return performance.now()}:typeof w<"u"&&w!==null&&w.hrtime?(U.exports=function(){return(f()-a)/1e6},M=w.hrtime,f=function(){var r;return r=M(),r[0]*1e9+r[1]},e=f(),n=w.uptime()*1e9,a=e-n):Date.now?(U.exports=function(){return Date.now()-T},T=Date.now()):(U.exports=function(){return new Date().getTime()-T},T=new Date().getTime())}).call(this)}).call(this)}).call(this,i("_process"))},{_process:278}],253:[function(i,U,V){U.exports=function(T,e,a){var n={},r,t;if(typeof e=="string"&&(e=f(e)),Array.isArray(e)){var h={};for(t=0;t<e.length;t++)h[e[t]]=!0;e=h}for(r in e)e[r]=f(e[r]);var s={};for(r in e){var o=e[r];if(Array.isArray(o))for(t=0;t<o.length;t++){var y=o[t];if(a&&(s[y]=!0),y in T){if(n[r]=T[y],a)for(var d=t;d<o.length;d++)s[o[d]]=!0;break}}else r in T&&(e[r]&&(n[r]=T[r]),a&&(s[r]=!0))}if(a)for(r in T)s[r]||(n[r]=T[r]);return n};var w={};function f(M){return w[M]?w[M]:(typeof M=="string"&&(M=w[M]=M.split(/\s*,\s*|\s+/)),M)}},{}],254:[function(i,U,V){U.exports=function(f,M,T,e){var a=f[0],n=f[1],r=!1;T===void 0&&(T=0),e===void 0&&(e=M.length);for(var t=e-T,h=0,s=t-1;h<t;s=h++){var o=M[h+T][0],y=M[h+T][1],d=M[s+T][0],p=M[s+T][1],c=y>n!=p>n&&a<(d-o)*(n-y)/(p-y)+o;c&&(r=!r)}return r}},{}],255:[function(i,U,V){/*
 * @copyright 2016 Sean Connelly (@voidqk), http://syntheti.cc
 * @license MIT
 * @preserve Project Home: https://github.com/voidqk/polybooljs
 */var w=i("./lib/build-log"),f=i("./lib/epsilon"),M=i("./lib/intersecter"),T=i("./lib/segment-chainer"),e=i("./lib/segment-selector"),a=i("./lib/geojson"),n=!1,r=f(),t;t={buildLog:function(s){return s===!0?n=w():s===!1&&(n=!1),n===!1?!1:n.list},epsilon:function(s){return r.epsilon(s)},segments:function(s){var o=M(!0,r,n);return s.regions.forEach(o.addRegion),{segments:o.calculate(s.inverted),inverted:s.inverted}},combine:function(s,o){var y=M(!1,r,n);return{combined:y.calculate(s.segments,s.inverted,o.segments,o.inverted),inverted1:s.inverted,inverted2:o.inverted}},selectUnion:function(s){return{segments:e.union(s.combined,n),inverted:s.inverted1||s.inverted2}},selectIntersect:function(s){return{segments:e.intersect(s.combined,n),inverted:s.inverted1&&s.inverted2}},selectDifference:function(s){return{segments:e.difference(s.combined,n),inverted:s.inverted1&&!s.inverted2}},selectDifferenceRev:function(s){return{segments:e.differenceRev(s.combined,n),inverted:!s.inverted1&&s.inverted2}},selectXor:function(s){return{segments:e.xor(s.combined,n),inverted:s.inverted1!==s.inverted2}},polygon:function(s){return{regions:T(s.segments,r,n),inverted:s.inverted}},polygonFromGeoJSON:function(s){return a.toPolygon(t,s)},polygonToGeoJSON:function(s){return a.fromPolygon(t,r,s)},union:function(s,o){return h(s,o,t.selectUnion)},intersect:function(s,o){return h(s,o,t.selectIntersect)},difference:function(s,o){return h(s,o,t.selectDifference)},differenceRev:function(s,o){return h(s,o,t.selectDifferenceRev)},xor:function(s,o){return h(s,o,t.selectXor)}};function h(s,o,y){var d=t.segments(s),p=t.segments(o),c=t.combine(d,p),m=y(c);return t.polygon(m)}typeof window=="object"&&(window.PolyBool=t),U.exports=t},{"./lib/build-log":256,"./lib/epsilon":257,"./lib/geojson":258,"./lib/intersecter":259,"./lib/segment-chainer":261,"./lib/segment-selector":262}],256:[function(i,U,V){function w(){var f,M=0,T=!1;function e(a,n){return f.list.push({type:a,data:n?JSON.parse(JSON.stringify(n)):void 0}),f}return f={list:[],segmentId:function(){return M++},checkIntersection:function(a,n){return e("check",{seg1:a,seg2:n})},segmentChop:function(a,n){return e("div_seg",{seg:a,pt:n}),e("chop",{seg:a,pt:n})},statusRemove:function(a){return e("pop_seg",{seg:a})},segmentUpdate:function(a){return e("seg_update",{seg:a})},segmentNew:function(a,n){return e("new_seg",{seg:a,primary:n})},segmentRemove:function(a){return e("rem_seg",{seg:a})},tempStatus:function(a,n,r){return e("temp_status",{seg:a,above:n,below:r})},rewind:function(a){return e("rewind",{seg:a})},status:function(a,n,r){return e("status",{seg:a,above:n,below:r})},vert:function(a){return a===T?f:(T=a,e("vert",{x:a}))},log:function(a){return typeof a!="string"&&(a=JSON.stringify(a,!1,"  ")),e("log",{txt:a})},reset:function(){return e("reset")},selected:function(a){return e("selected",{segs:a})},chainStart:function(a){return e("chain_start",{seg:a})},chainRemoveHead:function(a,n){return e("chain_rem_head",{index:a,pt:n})},chainRemoveTail:function(a,n){return e("chain_rem_tail",{index:a,pt:n})},chainNew:function(a,n){return e("chain_new",{pt1:a,pt2:n})},chainMatch:function(a){return e("chain_match",{index:a})},chainClose:function(a){return e("chain_close",{index:a})},chainAddHead:function(a,n){return e("chain_add_head",{index:a,pt:n})},chainAddTail:function(a,n){return e("chain_add_tail",{index:a,pt:n})},chainConnect:function(a,n){return e("chain_con",{index1:a,index2:n})},chainReverse:function(a){return e("chain_rev",{index:a})},chainJoin:function(a,n){return e("chain_join",{index1:a,index2:n})},done:function(){return e("done")}},f}U.exports=w},{}],257:[function(i,U,V){function w(f){typeof f!="number"&&(f=1e-10);var M={epsilon:function(T){return typeof T=="number"&&(f=T),f},pointAboveOrOnLine:function(T,e,a){var n=e[0],r=e[1],t=a[0],h=a[1],s=T[0],o=T[1];return(t-n)*(o-r)-(h-r)*(s-n)>=-f},pointBetween:function(T,e,a){var n=T[1]-e[1],r=a[0]-e[0],t=T[0]-e[0],h=a[1]-e[1],s=t*r+n*h;if(s<f)return!1;var o=r*r+h*h;return!(s-o>-f)},pointsSameX:function(T,e){return Math.abs(T[0]-e[0])<f},pointsSameY:function(T,e){return Math.abs(T[1]-e[1])<f},pointsSame:function(T,e){return M.pointsSameX(T,e)&&M.pointsSameY(T,e)},pointsCompare:function(T,e){return M.pointsSameX(T,e)?M.pointsSameY(T,e)?0:T[1]<e[1]?-1:1:T[0]<e[0]?-1:1},pointsCollinear:function(T,e,a){var n=T[0]-e[0],r=T[1]-e[1],t=e[0]-a[0],h=e[1]-a[1];return Math.abs(n*h-t*r)<f},linesIntersect:function(T,e,a,n){var r=e[0]-T[0],t=e[1]-T[1],h=n[0]-a[0],s=n[1]-a[1],o=r*s-t*h;if(Math.abs(o)<f)return!1;var y=T[0]-a[0],d=T[1]-a[1],p=(h*d-s*y)/o,c=(r*d-t*y)/o,m={alongA:0,alongB:0,pt:[T[0]+p*r,T[1]+p*t]};return p<=-f?m.alongA=-2:p<f?m.alongA=-1:p-1<=-f?m.alongA=0:p-1<f?m.alongA=1:m.alongA=2,c<=-f?m.alongB=-2:c<f?m.alongB=-1:c-1<=-f?m.alongB=0:c-1<f?m.alongB=1:m.alongB=2,m},pointInsideRegion:function(T,e){for(var a=T[0],n=T[1],r=e[e.length-1][0],t=e[e.length-1][1],h=!1,s=0;s<e.length;s++){var o=e[s][0],y=e[s][1];y-n>f!=t-n>f&&(r-o)*(n-y)/(t-y)+o-a>f&&(h=!h),r=o,t=y}return h}};return M}U.exports=w},{}],258:[function(i,U,V){var w={toPolygon:function(f,M){function T(n){if(n.length<=0)return f.segments({inverted:!1,regions:[]});function r(s){var o=s.slice(0,s.length-1);return f.segments({inverted:!1,regions:[o]})}for(var t=r(n[0]),h=1;h<n.length;h++)t=f.selectDifference(f.combine(t,r(n[h])));return t}if(M.type==="Polygon")return f.polygon(T(M.coordinates));if(M.type==="MultiPolygon"){for(var e=f.segments({inverted:!1,regions:[]}),a=0;a<M.coordinates.length;a++)e=f.selectUnion(f.combine(e,T(M.coordinates[a])));return f.polygon(e)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(f,M,T){T=f.polygon(f.segments(T));function e(p,c){return M.pointInsideRegion([(p[0][0]+p[1][0])*.5,(p[0][1]+p[1][1])*.5],c)}function a(p){return{region:p,children:[]}}var n=a(null);function r(p,c){for(var m=0;m<p.children.length;m++){var l=p.children[m];if(e(c,l.region)){r(l,c);return}}for(var x=a(c),m=0;m<p.children.length;m++){var l=p.children[m];e(l.region,c)&&(x.children.push(l),p.children.splice(m,1),m--)}p.children.push(x)}for(var t=0;t<T.regions.length;t++){var h=T.regions[t];h.length<3||r(n,h)}function s(p,c){for(var m=0,l=p[p.length-1][0],x=p[p.length-1][1],u=[],A=0;A<p.length;A++){var _=p[A][0],g=p[A][1];u.push([_,g]),m+=g*l-_*x,l=_,x=g}var b=m<0;return b!==c&&u.reverse(),u.push([u[0][0],u[0][1]]),u}var o=[];function y(p){var c=[s(p.region,!1)];o.push(c);for(var m=0;m<p.children.length;m++)c.push(d(p.children[m]))}function d(p){for(var c=0;c<p.children.length;c++)y(p.children[c]);return s(p.region,!0)}for(var t=0;t<n.children.length;t++)y(n.children[t]);return o.length<=0?{type:"Polygon",coordinates:[]}:o.length==1?{type:"Polygon",coordinates:o[0]}:{type:"MultiPolygon",coordinates:o}}};U.exports=w},{}],259:[function(i,U,V){var w=i("./linked-list");function f(M,T,e){function a(m,l){return{id:e?e.segmentId():-1,start:m,end:l,myFill:{above:null,below:null},otherFill:null}}function n(m,l,x){return{id:e?e.segmentId():-1,start:m,end:l,myFill:{above:x.myFill.above,below:x.myFill.below},otherFill:null}}var r=w.create();function t(m,l,x,u,A,_){var g=T.pointsCompare(l,A);return g!==0?g:T.pointsSame(x,_)?0:m!==u?m?1:-1:T.pointAboveOrOnLine(x,u?A:_,u?_:A)?1:-1}function h(m,l){r.insertBefore(m,function(x){var u=t(m.isStart,m.pt,l,x.isStart,x.pt,x.other.pt);return u<0})}function s(m,l){var x=w.node({isStart:!0,pt:m.start,seg:m,primary:l,other:null,status:null});return h(x,m.end),x}function o(m,l,x){var u=w.node({isStart:!1,pt:l.end,seg:l,primary:x,other:m,status:null});m.other=u,h(u,m.pt)}function y(m,l){var x=s(m,l);return o(x,m,l),x}function d(m,l){e&&e.segmentChop(m.seg,l),m.other.remove(),m.seg.end=l,m.other.pt=l,h(m.other,m.pt)}function p(m,l){var x=n(l,m.seg.end,m.seg);return d(m,l),y(x,m.primary)}function c(m,l){var x=w.create();function u(R,O){var z=R.seg.start,B=R.seg.end,G=O.seg.start,Q=O.seg.end;return T.pointsCollinear(z,G,Q)?T.pointsCollinear(B,G,Q)||T.pointAboveOrOnLine(B,G,Q)?1:-1:T.pointAboveOrOnLine(z,G,Q)?1:-1}function A(R){return x.findTransition(function(O){var z=u(R,O.ev);return z>0})}function _(R,O){var z=R.seg,B=O.seg,G=z.start,Q=z.end,X=B.start,j=B.end;e&&e.checkIntersection(z,B);var re=T.linesIntersect(G,Q,X,j);if(re===!1){if(!T.pointsCollinear(G,Q,X)||T.pointsSame(G,j)||T.pointsSame(Q,X))return!1;var ue=T.pointsSame(G,X),K=T.pointsSame(Q,j);if(ue&&K)return O;var te=!ue&&T.pointBetween(G,X,j),Y=!K&&T.pointBetween(Q,X,j);if(ue)return Y?p(O,Q):p(R,j),O;te&&(K||(Y?p(O,Q):p(R,j)),p(O,G))}else re.alongA===0&&(re.alongB===-1?p(R,X):re.alongB===0?p(R,re.pt):re.alongB===1&&p(R,j)),re.alongB===0&&(re.alongA===-1?p(O,G):re.alongA===0?p(O,re.pt):re.alongA===1&&p(O,Q));return!1}for(var g=[];!r.isEmpty();){var b=r.getHead();if(e&&e.vert(b.pt[0]),b.isStart){let R=function(){if(k){var O=_(b,k);if(O)return O}return S?_(b,S):!1};e&&e.segmentNew(b.seg,b.primary);var v=A(b),k=v.before?v.before.ev:null,S=v.after?v.after.ev:null;e&&e.tempStatus(b.seg,k?k.seg:!1,S?S.seg:!1);var E=R();if(E){if(M){var C;b.seg.myFill.below===null?C=!0:C=b.seg.myFill.above!==b.seg.myFill.below,C&&(E.seg.myFill.above=!E.seg.myFill.above)}else E.seg.otherFill=b.seg.myFill;e&&e.segmentUpdate(E.seg),b.other.remove(),b.remove()}if(r.getHead()!==b){e&&e.rewind(b.seg);continue}if(M){var C;b.seg.myFill.below===null?C=!0:C=b.seg.myFill.above!==b.seg.myFill.below,S?b.seg.myFill.below=S.seg.myFill.above:b.seg.myFill.below=m,C?b.seg.myFill.above=!b.seg.myFill.below:b.seg.myFill.above=b.seg.myFill.below}else if(b.seg.otherFill===null){var F;S?b.primary===S.primary?F=S.seg.otherFill.above:F=S.seg.myFill.above:F=b.primary?l:m,b.seg.otherFill={above:F,below:F}}e&&e.status(b.seg,k?k.seg:!1,S?S.seg:!1),b.other.status=v.insert(w.node({ev:b}))}else{var I=b.status;if(I===null)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(x.exists(I.prev)&&x.exists(I.next)&&_(I.prev.ev,I.next.ev),e&&e.statusRemove(I.ev.seg),I.remove(),!b.primary){var D=b.seg.myFill;b.seg.myFill=b.seg.otherFill,b.seg.otherFill=D}g.push(b.seg)}r.getHead().remove()}return e&&e.done(),g}return M?{addRegion:function(m){for(var l,x=m[m.length-1],u=0;u<m.length;u++){l=x,x=m[u];var A=T.pointsCompare(l,x);A!==0&&y(a(A<0?l:x,A<0?x:l),!0)}},calculate:function(m){return c(m,!1)}}:{calculate:function(m,l,x,u){return m.forEach(function(A){y(n(A.start,A.end,A),!0)}),x.forEach(function(A){y(n(A.start,A.end,A),!1)}),c(l,u)}}}U.exports=f},{"./linked-list":260}],260:[function(i,U,V){var w={create:function(){var f={root:{root:!0,next:null},exists:function(M){return!(M===null||M===f.root)},isEmpty:function(){return f.root.next===null},getHead:function(){return f.root.next},insertBefore:function(M,T){for(var e=f.root,a=f.root.next;a!==null;){if(T(a)){M.prev=a.prev,M.next=a,a.prev.next=M,a.prev=M;return}e=a,a=a.next}e.next=M,M.prev=e,M.next=null},findTransition:function(M){for(var T=f.root,e=f.root.next;e!==null&&!M(e);)T=e,e=e.next;return{before:T===f.root?null:T,after:e,insert:function(a){return a.prev=T,a.next=e,T.next=a,e!==null&&(e.prev=a),a}}}};return f},node:function(f){return f.prev=null,f.next=null,f.remove=function(){f.prev.next=f.next,f.next&&(f.next.prev=f.prev),f.prev=null,f.next=null},f}};U.exports=w},{}],261:[function(i,U,V){function w(f,M,T){var e=[],a=[];return f.forEach(function(n){var r=n.start,t=n.end;if(M.pointsSame(r,t)){console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");return}T&&T.chainStart(n);var h={index:0,matches_head:!1,matches_pt1:!1},s={index:0,matches_head:!1,matches_pt1:!1},o=h;function y(F,I,D){return o.index=F,o.matches_head=I,o.matches_pt1=D,o===h?(o=s,!1):(o=null,!0)}for(var d=0;d<e.length;d++){var p=e[d],c=p[0];p[1];var m=p[p.length-1];if(p[p.length-2],M.pointsSame(c,r)){if(y(d,!0,!0))break}else if(M.pointsSame(c,t)){if(y(d,!0,!1))break}else if(M.pointsSame(m,r)){if(y(d,!1,!0))break}else if(M.pointsSame(m,t)&&y(d,!1,!1))break}if(o===h){e.push([r,t]),T&&T.chainNew(r,t);return}if(o===s){T&&T.chainMatch(h.index);var l=h.index,x=h.matches_pt1?t:r,u=h.matches_head,p=e[l],A=u?p[0]:p[p.length-1],_=u?p[1]:p[p.length-2],g=u?p[p.length-1]:p[0],b=u?p[p.length-2]:p[1];if(M.pointsCollinear(_,A,x)&&(u?(T&&T.chainRemoveHead(h.index,x),p.shift()):(T&&T.chainRemoveTail(h.index,x),p.pop()),A=_),M.pointsSame(g,x)){e.splice(l,1),M.pointsCollinear(b,g,A)&&(u?(T&&T.chainRemoveTail(h.index,A),p.pop()):(T&&T.chainRemoveHead(h.index,A),p.shift())),T&&T.chainClose(h.index),a.push(p);return}u?(T&&T.chainAddHead(h.index,x),p.unshift(x)):(T&&T.chainAddTail(h.index,x),p.push(x));return}function v(F){T&&T.chainReverse(F),e[F].reverse()}function k(F,I){var D=e[F],R=e[I],O=D[D.length-1],z=D[D.length-2],B=R[0],G=R[1];M.pointsCollinear(z,O,B)&&(T&&T.chainRemoveTail(F,O),D.pop(),O=z),M.pointsCollinear(O,B,G)&&(T&&T.chainRemoveHead(I,B),R.shift()),T&&T.chainJoin(F,I),e[F]=D.concat(R),e.splice(I,1)}var S=h.index,E=s.index;T&&T.chainConnect(S,E);var C=e[S].length<e[E].length;h.matches_head?s.matches_head?C?(v(S),k(S,E)):(v(E),k(E,S)):k(E,S):s.matches_head?k(S,E):C?(v(S),k(E,S)):(v(E),k(S,E))}),a}U.exports=w},{}],262:[function(i,U,V){function w(M,T,e){var a=[];return M.forEach(function(n){var r=(n.myFill.above?8:0)+(n.myFill.below?4:0)+(n.otherFill&&n.otherFill.above?2:0)+(n.otherFill&&n.otherFill.below?1:0);T[r]!==0&&a.push({id:e?e.segmentId():-1,start:n.start,end:n.end,myFill:{above:T[r]===1,below:T[r]===2},otherFill:null})}),e&&e.selected(a),a}var f={union:function(M,T){return w(M,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],T)},intersect:function(M,T){return w(M,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],T)},difference:function(M,T){return w(M,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],T)},differenceRev:function(M,T){return w(M,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],T)},xor:function(M,T){return w(M,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],T)}};U.exports=f},{}],263:[function(i,U,V){var w=i("stream").Transform,f=i("stream-parser");function M(){w.call(this,{readableObjectMode:!0})}M.prototype=Object.create(w.prototype),M.prototype.constructor=M,f(M.prototype),V.ParserStream=M,V.sliceEq=function(e,a,n){for(var r=a,t=0;t<n.length;)if(e[r++]!==n[t++])return!1;return!0},V.str2arr=function(e,a){var n=[],r=0;if(a&&a==="hex")for(;r<e.length;)n.push(parseInt(e.slice(r,r+2),16)),r+=2;else for(;r<e.length;r++)n.push(e.charCodeAt(r)&255);return n},V.readUInt16LE=function(e,a){return e[a]|e[a+1]<<8},V.readUInt16BE=function(e,a){return e[a+1]|e[a]<<8},V.readUInt32LE=function(e,a){return e[a]|e[a+1]<<8|e[a+2]<<16|e[a+3]*16777216},V.readUInt32BE=function(e,a){return e[a+3]|e[a+2]<<8|e[a+1]<<16|e[a]*16777216};function T(e,a,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||"",this.name=this.constructor.name,this.message=e,a&&(this.code=a),n&&(this.statusCode=n)}T.prototype=Object.create(Error.prototype),T.prototype.constructor=T,V.ProbeError=T},{stream:286,"stream-parser":302}],264:[function(i,U,V){function w(T,e){var a=new Error(T);return a.code=e,a}function f(T){try{return decodeURIComponent(escape(T))}catch{return T}}function M(T,e,a){this.input=T.subarray(e,a),this.start=e;var n=String.fromCharCode.apply(null,this.input.subarray(0,4));if(n!=="II*\0"&&n!=="MM\0*")throw w("invalid TIFF signature","EBADDATA");this.big_endian=n[0]==="M"}M.prototype.each=function(T){this.aborted=!1;var e=this.read_uint32(4);for(this.ifds_to_read=[{id:0,offset:e}];this.ifds_to_read.length>0&&!this.aborted;){var a=this.ifds_to_read.shift();!a.offset||this.scan_ifd(a.id,a.offset,T)}},M.prototype.read_uint16=function(T){var e=this.input;if(T+2>e.length)throw w("unexpected EOF","EBADDATA");return this.big_endian?e[T]*256+e[T+1]:e[T]+e[T+1]*256},M.prototype.read_uint32=function(T){var e=this.input;if(T+4>e.length)throw w("unexpected EOF","EBADDATA");return this.big_endian?e[T]*16777216+e[T+1]*65536+e[T+2]*256+e[T+3]:e[T]+e[T+1]*256+e[T+2]*65536+e[T+3]*16777216},M.prototype.is_subifd_link=function(T,e){return T===0&&e===34665||T===0&&e===34853||T===34665&&e===40965},M.prototype.exif_format_length=function(T){switch(T){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}},M.prototype.exif_format_read=function(T,e){var a;switch(T){case 1:case 2:return a=this.input[e],a;case 6:return a=this.input[e],a|(a&128)*33554430;case 3:return a=this.read_uint16(e),a;case 8:return a=this.read_uint16(e),a|(a&32768)*131070;case 4:return a=this.read_uint32(e),a;case 9:return a=this.read_uint32(e),a|0;case 5:case 10:case 11:case 12:return null;case 7:return null;default:return null}},M.prototype.scan_ifd=function(T,e,a){var n=this.read_uint16(e);e+=2;for(var r=0;r<n;r++){var t=this.read_uint16(e),h=this.read_uint16(e+2),s=this.read_uint32(e+4),o=this.exif_format_length(h),y=s*o,d=y<=4?e+8:this.read_uint32(e+8),p=!1;if(d+y>this.input.length)throw w("unexpected EOF","EBADDATA");for(var c=[],m=d,l=0;l<s;l++,m+=o){var x=this.exif_format_read(h,m);if(x===null){c=null;break}c.push(x)}Array.isArray(c)&&h===2&&(c=f(String.fromCharCode.apply(null,c)),c&&c[c.length-1]==="\0"&&(c=c.slice(0,-1))),this.is_subifd_link(T,t)&&Array.isArray(c)&&Number.isInteger(c[0])&&c[0]>0&&(this.ifds_to_read.push({id:t,offset:c[0]}),p=!0);var u={is_big_endian:this.big_endian,ifd:T,tag:t,format:h,count:s,entry_offset:e+this.start,data_length:y,data_offset:d+this.start,value:c,is_subifd_link:p};if(a(u)===!1){this.aborted=!0;return}e+=12}T===0&&this.ifds_to_read.push({id:1,offset:this.read_uint32(e)})},U.exports.ExifParser=M,U.exports.get_orientation=function(T){var e=0;try{return new M(T,0,T.length).each(function(a){if(a.ifd===0&&a.tag===274&&Array.isArray(a.value))return e=a.value[0],!1}),e}catch{return-1}}},{}],265:[function(i,U,V){var w=i("./common").readUInt16BE,f=i("./common").readUInt32BE;function M(s,o){if(s.length<4+o)return null;var y=f(s,o);return s.length<y+o||y<8?null:{boxtype:String.fromCharCode.apply(null,s.slice(o+4,o+8)),data:s.slice(o+8,o+y),end:o+y}}U.exports.unbox=M;function T(s,o){for(var y=0;;){var d=M(s,y);if(!d)break;switch(d.boxtype){case"ispe":o.sizes.push({width:f(d.data,4),height:f(d.data,8)});break;case"irot":o.transforms.push({type:"irot",value:d.data[0]&3});break;case"imir":o.transforms.push({type:"imir",value:d.data[0]&1});break}y=d.end}}function e(s,o,y){for(var d=0,p=0;p<y;p++)d=d*256+(s[o+p]||0);return d}function a(s,o){for(var y=s[4]>>4&15,d=s[4]&15,p=s[5]>>4&15,c=w(s,6),m=8,l=0;l<c;l++){var x=w(s,m);m+=2;var u=w(s,m);m+=2;var A=e(s,m,p);m+=p;var _=w(s,m);if(m+=2,u===0&&_===1){var g=e(s,m,y),b=e(s,m+y,d);o.item_loc[x]={length:b,offset:g+A}}m+=_*(y+d)}}function n(s,o){for(var y=w(s,4),d=6,p=0;p<y;p++){var c=M(s,d);if(!c)break;if(c.boxtype==="infe"){for(var m=w(c.data,4),l="",x=8;x<c.data.length&&c.data[x];x++)l+=String.fromCharCode(c.data[x]);o.item_inf[l]=m}d=c.end}}function r(s,o){for(var y=0;;){var d=M(s,y);if(!d)break;d.boxtype==="ipco"&&T(d.data,o),y=d.end}}function t(s,o){for(var y=4;;){var d=M(s,y);if(!d)break;d.boxtype==="iprp"&&r(d.data,o),d.boxtype==="iloc"&&a(d.data,o),d.boxtype==="iinf"&&n(d.data,o),y=d.end}}function h(s){var o=s.reduce(function(p,c){return p.width>c.width||p.width===c.width&&p.height>c.height?p:c}),y=s.reduce(function(p,c){return p.height>c.height||p.height===c.height&&p.width>c.width?p:c}),d;return o.width>y.height||o.width===y.height&&o.height>y.width?d=o:d=y,d}U.exports.readSizeFromMeta=function(s){var o={sizes:[],transforms:[],item_inf:{},item_loc:{}};if(t(s,o),!!o.sizes.length){var y=h(o.sizes),d=1;o.transforms.forEach(function(c){var m={1:6,2:5,3:8,4:7,5:4,6:3,7:2,8:1},l={1:4,2:3,3:2,4:1,5:6,6:5,7:8,8:7};if(c.type==="imir"&&(c.value===0?d=l[d]:(d=l[d],d=m[d],d=m[d])),c.type==="irot")for(var x=0;x<c.value;x++)d=m[d]});var p=null;return o.item_inf.Exif&&(p=o.item_loc[o.item_inf.Exif]),{width:y.width,height:y.height,orientation:o.transforms.length?d:null,variants:o.sizes,exif_location:p}}},U.exports.getMimeType=function(s){var o=String.fromCharCode.apply(null,s.slice(0,4)),y={};y[o]=!0;for(var d=8;d<s.length;d+=4)y[String.fromCharCode.apply(null,s.slice(d,d+4))]=!0;if(!(!y.mif1&&!y.msf1&&!y.miaf))return o==="avif"||o==="avis"||o==="avio"?{type:"avif",mime:"image/avif"}:o==="heic"||o==="heix"?{type:"heic",mime:"image/heic"}:o==="hevc"||o==="hevx"?{type:"heic",mime:"image/heic-sequence"}:y.avif||y.avis?{type:"avif",mime:"image/avif"}:y.heic||y.heix||y.hevc||y.hevx||y.heis?y.msf1?{type:"heif",mime:"image/heif-sequence"}:{type:"heif",mime:"image/heif"}:{type:"avif",mime:"image/avif"}}},{"./common":263}],266:[function(i,U,V){var w=i("../common").str2arr,f=i("../common").sliceEq,M=i("../common").readUInt32BE,T=i("../miaf_utils"),e=i("../exif_utils"),a=w("ftyp");U.exports=function(n){if(!!f(n,4,a)){var r=T.unbox(n,0);if(!!r){var t=T.getMimeType(r.data);if(!!t){for(var h,s=r.end;;){var o=T.unbox(n,s);if(!o)break;if(s=o.end,o.boxtype==="mdat")return;if(o.boxtype==="meta"){h=o.data;break}}if(!!h){var y=T.readSizeFromMeta(h);if(!!y){var d={width:y.width,height:y.height,type:t.type,mime:t.mime,wUnits:"px",hUnits:"px"};if(y.variants.length>1&&(d.variants=y.variants),y.orientation&&(d.orientation=y.orientation),y.exif_location&&y.exif_location.offset+y.exif_location.length<=n.length){var p=M(n,y.exif_location.offset),c=n.slice(y.exif_location.offset+p+4,y.exif_location.offset+y.exif_location.length),m=e.get_orientation(c);m>0&&(d.orientation=m)}return d}}}}}}},{"../common":263,"../exif_utils":264,"../miaf_utils":265}],267:[function(i,U,V){var w=i("../common").str2arr,f=i("../common").sliceEq,M=i("../common").readUInt16LE,T=w("BM");U.exports=function(e){if(!(e.length<26)&&!!f(e,0,T))return{width:M(e,18),height:M(e,22),type:"bmp",mime:"image/bmp",wUnits:"px",hUnits:"px"}}},{"../common":263}],268:[function(i,U,V){var w=i("../common").str2arr,f=i("../common").sliceEq,M=i("../common").readUInt16LE,T=w("GIF87a"),e=w("GIF89a");U.exports=function(a){if(!(a.length<10)&&!(!f(a,0,T)&&!f(a,0,e)))return{width:M(a,6),height:M(a,8),type:"gif",mime:"image/gif",wUnits:"px",hUnits:"px"}}},{"../common":263}],269:[function(i,U,V){var w=i("../common").readUInt16LE,f=0,M=1,T=16;U.exports=function(e){var a=w(e,0),n=w(e,2),r=w(e,4);if(!(a!==f||n!==M||!r)){for(var t=[],h={width:0,height:0},s=0;s<r;s++){var o=e[6+T*s]||256,y=e[6+T*s+1]||256,d={width:o,height:y};t.push(d),(o>h.width||y>h.height)&&(h=d)}return{width:h.width,height:h.height,variants:t,type:"ico",mime:"image/x-icon",wUnits:"px",hUnits:"px"}}}},{"../common":263}],270:[function(i,U,V){var w=i("../common").readUInt16BE,f=i("../common").str2arr,M=i("../common").sliceEq,T=i("../exif_utils"),e=f("Exif\0\0");U.exports=function(a){if(!(a.length<2)&&!(a[0]!==255||a[1]!==216||a[2]!==255))for(var n=2;;){for(;;){if(a.length-n<2)return;if(a[n++]===255)break}for(var r=a[n++],t;r===255;)r=a[n++];if(208<=r&&r<=217||r===1)t=0;else if(192<=r&&r<=254){if(a.length-n<2)return;t=w(a,n)-2,n+=2}else return;if(r===217||r===218)return;var h;if(r===225&&t>=10&&M(a,n,e)&&(h=T.get_orientation(a.slice(n+6,n+t))),t>=5&&192<=r&&r<=207&&r!==196&&r!==200&&r!==204){if(a.length-n<t)return;var s={width:w(a,n+3),height:w(a,n+1),type:"jpg",mime:"image/jpeg",wUnits:"px",hUnits:"px"};return h>0&&(s.orientation=h),s}n+=t}}},{"../common":263,"../exif_utils":264}],271:[function(i,U,V){var w=i("../common").str2arr,f=i("../common").sliceEq,M=i("../common").readUInt32BE,T=w(`\x89PNG\r

`),e=w("IHDR");U.exports=function(a){if(!(a.length<24)&&!!f(a,0,T)&&!!f(a,12,e))return{width:M(a,16),height:M(a,20),type:"png",mime:"image/png",wUnits:"px",hUnits:"px"}}},{"../common":263}],272:[function(i,U,V){var w=i("../common").str2arr,f=i("../common").sliceEq,M=i("../common").readUInt32BE,T=w("8BPS\0");U.exports=function(e){if(!(e.length<6+16)&&!!f(e,0,T))return{width:M(e,6+12),height:M(e,6+8),type:"psd",mime:"image/vnd.adobe.photoshop",wUnits:"px",hUnits:"px"}}},{"../common":263}],273:[function(i,U,V){function w(o){return o===32||o===9||o===13||o===10}function f(o){return typeof o=="number"&&isFinite(o)&&o>0}function M(o){var y=0,d=o.length;for(o[0]===239&&o[1]===187&&o[2]===191&&(y=3);y<d&&w(o[y]);)y++;return y===d?!1:o[y]===60}var T=/<[-_.:a-zA-Z0-9][^>]*>/,e=/^<([-_.:a-zA-Z0-9]+:)?svg\s/,a=/[^-]\bwidth="([^%]+?)"|[^-]\bwidth='([^%]+?)'/,n=/\bheight="([^%]+?)"|\bheight='([^%]+?)'/,r=/\bview[bB]ox="(.+?)"|\bview[bB]ox='(.+?)'/,t=/in$|mm$|cm$|pt$|pc$|px$|em$|ex$/;function h(o){var y=o.match(a),d=o.match(n),p=o.match(r);return{width:y&&(y[1]||y[2]),height:d&&(d[1]||d[2]),viewbox:p&&(p[1]||p[2])}}function s(o){return t.test(o)?o.match(t)[0]:"px"}U.exports=function(o){if(!!M(o)){for(var y="",d=0;d<o.length;d++)y+=String.fromCharCode(o[d]);var p=(y.match(T)||[""])[0];if(!!e.test(p)){var c=h(p),m=parseFloat(c.width),l=parseFloat(c.height);if(c.width&&c.height)return!f(m)||!f(l)?void 0:{width:m,height:l,type:"svg",mime:"image/svg+xml",wUnits:s(c.width),hUnits:s(c.height)};var x=(c.viewbox||"").split(" "),u={width:x[2],height:x[3]},A=parseFloat(u.width),_=parseFloat(u.height);if(!(!f(A)||!f(_))&&s(u.width)===s(u.height)){var g=A/_;return c.width?f(m)?{width:m,height:m/g,type:"svg",mime:"image/svg+xml",wUnits:s(c.width),hUnits:s(c.width)}:void 0:c.height?f(l)?{width:l*g,height:l,type:"svg",mime:"image/svg+xml",wUnits:s(c.height),hUnits:s(c.height)}:void 0:{width:A,height:_,type:"svg",mime:"image/svg+xml",wUnits:s(u.width),hUnits:s(u.height)}}}}}},{}],274:[function(i,U,V){var w=i("../common").str2arr,f=i("../common").sliceEq,M=i("../common").readUInt16LE,T=i("../common").readUInt16BE,e=i("../common").readUInt32LE,a=i("../common").readUInt32BE,n=w("II*\0"),r=w("MM\0*");function t(o,y,d){return d?T(o,y):M(o,y)}function h(o,y,d){return d?a(o,y):e(o,y)}function s(o,y,d){var p=t(o,y+2,d),c=h(o,y+4,d);return c!==1||p!==3&&p!==4?null:p===3?t(o,y+8,d):h(o,y+8,d)}U.exports=function(o){if(!(o.length<8)&&!(!f(o,0,n)&&!f(o,0,r))){var y=o[0]===77,d=h(o,4,y)-8;if(!(d<0)){var p=d+8;if(!(o.length-p<2)){var c=t(o,p+0,y)*12;if(!(c<=0)&&(p+=2,!(o.length-p<c))){var m,l,x,u;for(m=0;m<c;m+=12)u=t(o,p+m,y),u===256?l=s(o,p+m,y):u===257&&(x=s(o,p+m,y));if(l&&x)return{width:l,height:x,type:"tiff",mime:"image/tiff",wUnits:"px",hUnits:"px"}}}}}}},{"../common":263}],275:[function(i,U,V){var w=i("../common").str2arr,f=i("../common").sliceEq,M=i("../common").readUInt16LE,T=i("../common").readUInt32LE,e=i("../exif_utils"),a=w("RIFF"),n=w("WEBP");function r(s,o){if(!(s[o+3]!==157||s[o+4]!==1||s[o+5]!==42))return{width:M(s,o+6)&16383,height:M(s,o+8)&16383,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}function t(s,o){if(s[o]===47){var y=T(s,o+1);return{width:(y&16383)+1,height:(y>>14&16383)+1,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}}function h(s,o){return{width:(s[o+6]<<16|s[o+5]<<8|s[o+4])+1,height:(s[o+9]<<o|s[o+8]<<8|s[o+7])+1,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}U.exports=function(s){if(!(s.length<16)&&!(!f(s,0,a)&&!f(s,8,n))){var o=12,y=null,d=0,p=T(s,4)+8;if(!(p>s.length)){for(;o+8<p;){if(s[o]===0){o++;continue}var c=String.fromCharCode.apply(null,s.slice(o,o+4)),m=T(s,o+4);c==="VP8 "&&m>=10?y=y||r(s,o+8):c==="VP8L"&&m>=9?y=y||t(s,o+8):c==="VP8X"&&m>=10?y=y||h(s,o+8):c==="EXIF"&&(d=e.get_orientation(s.slice(o+8,o+8+m)),o=1/0),o+=8+m}if(!!y)return d>0&&(y.orientation=d),y}}}},{"../common":263,"../exif_utils":264}],276:[function(i,U,V){U.exports={avif:i("./parse_sync/avif"),bmp:i("./parse_sync/bmp"),gif:i("./parse_sync/gif"),ico:i("./parse_sync/ico"),jpeg:i("./parse_sync/jpeg"),png:i("./parse_sync/png"),psd:i("./parse_sync/psd"),svg:i("./parse_sync/svg"),tiff:i("./parse_sync/tiff"),webp:i("./parse_sync/webp")}},{"./parse_sync/avif":266,"./parse_sync/bmp":267,"./parse_sync/gif":268,"./parse_sync/ico":269,"./parse_sync/jpeg":270,"./parse_sync/png":271,"./parse_sync/psd":272,"./parse_sync/svg":273,"./parse_sync/tiff":274,"./parse_sync/webp":275}],277:[function(i,U,V){var w=i("./lib/parsers_sync");function f(M){for(var T=Object.keys(w),e=0;e<T.length;e++){var a=w[T[e]](M);if(a)return a}return null}U.exports=function(T){return f(T)},U.exports.parsers=w},{"./lib/parsers_sync":276}],278:[function(i,U,V){var w=U.exports={},f,M;function T(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?f=setTimeout:f=T}catch{f=T}try{typeof clearTimeout=="function"?M=clearTimeout:M=e}catch{M=e}})();function a(c){if(f===setTimeout)return setTimeout(c,0);if((f===T||!f)&&setTimeout)return f=setTimeout,setTimeout(c,0);try{return f(c,0)}catch{try{return f.call(null,c,0)}catch{return f.call(this,c,0)}}}function n(c){if(M===clearTimeout)return clearTimeout(c);if((M===e||!M)&&clearTimeout)return M=clearTimeout,clearTimeout(c);try{return M(c)}catch{try{return M.call(null,c)}catch{return M.call(this,c)}}}var r=[],t=!1,h,s=-1;function o(){!t||!h||(t=!1,h.length?r=h.concat(r):s=-1,r.length&&y())}function y(){if(!t){var c=a(o);t=!0;for(var m=r.length;m;){for(h=r,r=[];++s<m;)h&&h[s].run();s=-1,m=r.length}h=null,t=!1,n(c)}}w.nextTick=function(c){var m=new Array(arguments.length-1);if(arguments.length>1)for(var l=1;l<arguments.length;l++)m[l-1]=arguments[l];r.push(new d(c,m)),r.length===1&&!t&&a(y)};function d(c,m){this.fun=c,this.array=m}d.prototype.run=function(){this.fun.apply(null,this.array)},w.title="browser",w.browser=!0,w.env={},w.argv=[],w.version="",w.versions={};function p(){}w.on=p,w.addListener=p,w.once=p,w.off=p,w.removeListener=p,w.removeAllListeners=p,w.emit=p,w.prependListener=p,w.prependOnceListener=p,w.listeners=function(c){return[]},w.binding=function(c){throw new Error("process.binding is not supported")},w.cwd=function(){return"/"},w.chdir=function(c){throw new Error("process.chdir is not supported")},w.umask=function(){return 0}},{}],279:[function(i,U,V){(function(w){(function(){for(var f=i("performance-now"),M=typeof window>"u"?w:window,T=["moz","webkit"],e="AnimationFrame",a=M["request"+e],n=M["cancel"+e]||M["cancelRequest"+e],r=0;!a&&r<T.length;r++)a=M[T[r]+"Request"+e],n=M[T[r]+"Cancel"+e]||M[T[r]+"CancelRequest"+e];if(!a||!n){var t=0,h=0,s=[],o=1e3/60;a=function(y){if(s.length===0){var d=f(),p=Math.max(0,o-(d-t));t=p+d,setTimeout(function(){var c=s.slice(0);s.length=0;for(var m=0;m<c.length;m++)if(!c[m].cancelled)try{c[m].callback(t)}catch(l){setTimeout(function(){throw l},0)}},Math.round(p))}return s.push({handle:++h,callback:y,cancelled:!1}),h},n=function(y){for(var d=0;d<s.length;d++)s[d].handle===y&&(s[d].cancelled=!0)}}U.exports=function(y){return a.call(M,y)},U.exports.cancel=function(){n.apply(M,arguments)},U.exports.polyfill=function(y){y||(y=M),y.requestAnimationFrame=a,y.cancelAnimationFrame=n}}).call(this)}).call(this,typeof Je<"u"?Je:typeof self<"u"?self:typeof window<"u"?window:{})},{"performance-now":252}],280:[function(i,U,V){var w=i("array-bounds"),f=i("color-normalize"),M=i("update-diff"),T=i("pick-by-alias"),e=i("object-assign"),a=i("flatten-vertex-data"),n=i("to-float32"),r=n.float32,t=n.fract32;U.exports=s;var h=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]];function s(o,y){if(typeof o=="function"?(y||(y={}),y.regl=o):y=o,y.length&&(y.positions=y),o=y.regl,!o.hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var d=o._gl,p,c,m,l,x,u,A={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},_=[];return l=o.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)}),c=o.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),m=o.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),x=o.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),u=o.buffer({usage:"static",type:"float",data:h}),k(y),p=o({vert:`
		precision highp float;

		attribute vec2 position, positionFract;
		attribute vec4 error;
		attribute vec4 color;

		attribute vec2 direction, lineOffset, capOffset;

		uniform vec4 viewport;
		uniform float lineWidth, capSize;
		uniform vec2 scale, scaleFract, translate, translateFract;

		varying vec4 fragColor;

		void main() {
			fragColor = color / 255.;

			vec2 pixelOffset = lineWidth * lineOffset + (capSize + lineWidth) * capOffset;

			vec2 dxy = -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;

			vec2 position = position + dxy;

			vec2 pos = (position + translate) * scale
				+ (positionFract + translateFract) * scale
				+ (position + translate) * scaleFract
				+ (positionFract + translateFract) * scaleFract;

			pos += pixelOffset / viewport.zw;

			gl_Position = vec4(pos * 2. - 1., 0, 1);
		}
		`,frag:`
		precision highp float;

		varying vec4 fragColor;

		uniform float opacity;

		void main() {
			gl_FragColor = fragColor;
			gl_FragColor.a *= opacity;
		}
		`,uniforms:{range:o.prop("range"),lineWidth:o.prop("lineWidth"),capSize:o.prop("capSize"),opacity:o.prop("opacity"),scale:o.prop("scale"),translate:o.prop("translate"),scaleFract:o.prop("scaleFract"),translateFract:o.prop("translateFract"),viewport:function(E,C){return[C.viewport.x,C.viewport.y,E.viewportWidth,E.viewportHeight]}},attributes:{color:{buffer:l,offset:function(E,C){return C.offset*4},divisor:1},position:{buffer:c,offset:function(E,C){return C.offset*8},divisor:1},positionFract:{buffer:m,offset:function(E,C){return C.offset*8},divisor:1},error:{buffer:x,offset:function(E,C){return C.offset*16},divisor:1},direction:{buffer:u,stride:24,offset:0},lineOffset:{buffer:u,stride:24,offset:8},capOffset:{buffer:u,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:o.prop("viewport")},viewport:o.prop("viewport"),stencil:!1,instances:o.prop("count"),count:h.length}),e(g,{update:k,draw:b,destroy:S,regl:o,gl:d,canvas:d.canvas,groups:_}),g;function g(E){E?k(E):E===null&&S(),b()}function b(E){if(typeof E=="number")return v(E);E&&!Array.isArray(E)&&(E=[E]),o._refresh(),_.forEach(function(C,F){if(!!C){if(E&&(E[F]?C.draw=!0:C.draw=!1),!C.draw){C.draw=!0;return}v(F)}})}function v(E){typeof E=="number"&&(E=_[E]),E!=null&&(!(E&&E.count&&E.color&&E.opacity&&E.positions&&E.positions.length>1)||(E.scaleRatio=[E.scale[0]*E.viewport.width,E.scale[1]*E.viewport.height],p(E),E.after&&E.after(E)))}function k(E){if(!!E){E.length!=null?typeof E[0]=="number"&&(E=[{positions:E}]):Array.isArray(E)||(E=[E]);var C=0,F=0;if(g.groups=_=E.map(function(G,Q){var X=_[Q];if(G)typeof G=="function"?G={after:G}:typeof G[0]=="number"&&(G={positions:G});else return X;return G=T(G,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"}),X||(_[Q]=X={id:Q,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},G=e({},A,G)),M(X,G,[{lineWidth:function(j){return+j*.5},capSize:function(j){return+j*.5},opacity:parseFloat,errors:function(j){return j=a(j),F+=j.length,j},positions:function(j,re){return j=a(j,"float64"),re.count=Math.floor(j.length/2),re.bounds=w(j,2),re.offset=C,C+=re.count,j}},{color:function(j,re){var ue=re.count;if(j||(j="transparent"),!Array.isArray(j)||typeof j[0]=="number"){var K=j;j=Array(ue);for(var te=0;te<ue;te++)j[te]=K}if(j.length<ue)throw Error("Not enough colors");for(var Y=new Uint8Array(ue*4),H=0;H<ue;H++){var ee=f(j[H],"uint8");Y.set(ee,H*4)}return Y},range:function(j,re,ue){var K=re.bounds;return j||(j=K),re.scale=[1/(j[2]-j[0]),1/(j[3]-j[1])],re.translate=[-j[0],-j[1]],re.scaleFract=t(re.scale),re.translateFract=t(re.translate),j},viewport:function(j){var re;return Array.isArray(j)?re={x:j[0],y:j[1],width:j[2]-j[0],height:j[3]-j[1]}:j?(re={x:j.x||j.left||0,y:j.y||j.top||0},j.right?re.width=j.right-re.x:re.width=j.w||j.width||0,j.bottom?re.height=j.bottom-re.y:re.height=j.h||j.height||0):re={x:0,y:0,width:d.drawingBufferWidth,height:d.drawingBufferHeight},re}}]),X}),C||F){var I=_.reduce(function(G,Q,X){return G+(Q?Q.count:0)},0),D=new Float64Array(I*2),R=new Uint8Array(I*4),O=new Float32Array(I*4);_.forEach(function(G,Q){if(!!G){var X=G.positions,j=G.count,re=G.offset,ue=G.color,K=G.errors;!j||(R.set(ue,re*4),O.set(K,re*4),D.set(X,re*2))}});var z=r(D);c(z);var B=t(D,z);m(B),l(R),x(O)}}}function S(){c.destroy(),m.destroy(),l.destroy(),x.destroy(),u.destroy()}}},{"array-bounds":71,"color-normalize":89,"flatten-vertex-data":191,"object-assign":247,"pick-by-alias":253,"to-float32":314,"update-diff":330}],281:[function(i,U,V){var w=i("color-normalize"),f=i("array-bounds"),M=i("object-assign"),T=i("glslify"),e=i("pick-by-alias"),a=i("flatten-vertex-data"),n=i("earcut"),r=i("array-normalize"),t=i("to-float32"),h=t.float32,s=t.fract32,o=i("es6-weak-map"),y=i("parse-rect"),d=i("array-find-index");U.exports=p;function p(c,m){if(!(this instanceof p))return new p(c,m);if(typeof c=="function"?(m||(m={}),m.regl=c):m=c,m.length&&(m.positions=m),c=m.regl,!c.hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=c._gl,this.regl=c,this.passes=[],this.shaders=p.shaders.has(c)?p.shaders.get(c):p.shaders.set(c,p.createShaders(c)).get(c),this.update(m)}p.dashMult=2,p.maxPatternLength=256,p.precisionThreshold=3e6,p.maxPoints=1e4,p.maxLines=2048,p.shaders=new o,p.createShaders=function(c){var m=c.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),l={primitive:"triangle strip",instances:c.prop("count"),count:4,offset:0,uniforms:{miterMode:function(_,g){return g.join==="round"?2:1},miterLimit:c.prop("miterLimit"),scale:c.prop("scale"),scaleFract:c.prop("scaleFract"),translateFract:c.prop("translateFract"),translate:c.prop("translate"),thickness:c.prop("thickness"),dashTexture:c.prop("dashTexture"),opacity:c.prop("opacity"),pixelRatio:c.context("pixelRatio"),id:c.prop("id"),dashLength:c.prop("dashLength"),viewport:function(_,g){return[g.viewport.x,g.viewport.y,_.viewportWidth,_.viewportHeight]},depth:c.prop("depth")},blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(_,g){return!g.overlay}},stencil:{enable:!1},scissor:{enable:!0,box:c.prop("viewport")},viewport:c.prop("viewport")},x=c(M({vert:T([`precision highp float;
#define GLSLIFY 1

attribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;
attribute vec4 color;
attribute float lineEnd, lineTop;

uniform vec2 scale, scaleFract, translate, translateFract;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;

varying vec4 fragColor;
varying vec2 tangent;

vec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {
	// the order is important
	return position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;
}

void main() {
	float lineStart = 1. - lineEnd;
	float lineOffset = lineTop * 2. - 1.;

	vec2 diff = (bCoord + bCoordFract - aCoord - aCoordFract);
	tangent = normalize(diff * scale * viewport.zw);
	vec2 normal = vec2(-tangent.y, tangent.x);

	vec2 position = project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart
		+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd

		+ thickness * normal * .5 * lineOffset / viewport.zw;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
}
`]),frag:T([`precision highp float;
#define GLSLIFY 1

uniform float dashLength, pixelRatio, thickness, opacity, id;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;

void main() {
	float alpha = 1.;

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`]),attributes:{lineEnd:{buffer:m,divisor:0,stride:8,offset:0},lineTop:{buffer:m,divisor:0,stride:8,offset:4},aCoord:{buffer:c.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:c.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:c.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:c.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:c.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},l)),u;try{u=c(M({cull:{enable:!0,face:"back"},vert:T([`precision highp float;
#define GLSLIFY 1

attribute vec2 aCoord, bCoord, nextCoord, prevCoord;
attribute vec4 aColor, bColor;
attribute float lineEnd, lineTop;

uniform vec2 scale, translate;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;
uniform float miterLimit, miterMode;

varying vec4 fragColor;
varying vec4 startCutoff, endCutoff;
varying vec2 tangent;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

const float REVERSE_THRESHOLD = -.875;
const float MIN_DIFF = 1e-6;

// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead
// TODO: precalculate dot products, normalize things beforehead etc.
// TODO: refactor to rectangular algorithm

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

bool isNaN( float val ){
  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;
}

void main() {
	vec2 aCoord = aCoord, bCoord = bCoord, prevCoord = prevCoord, nextCoord = nextCoord;

  vec2 adjustedScale;
  adjustedScale.x = (abs(scale.x) < MIN_DIFF) ? MIN_DIFF : scale.x;
  adjustedScale.y = (abs(scale.y) < MIN_DIFF) ? MIN_DIFF : scale.y;

  vec2 scaleRatio = adjustedScale * viewport.zw;
	vec2 normalWidth = thickness / scaleRatio;

	float lineStart = 1. - lineEnd;
	float lineBot = 1. - lineTop;

	fragColor = (lineStart * aColor + lineEnd * bColor) / 255.;

	if (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;

	if (aCoord == prevCoord) prevCoord = aCoord + normalize(bCoord - aCoord);
	if (bCoord == nextCoord) nextCoord = bCoord - normalize(bCoord - aCoord);

	vec2 prevDiff = aCoord - prevCoord;
	vec2 currDiff = bCoord - aCoord;
	vec2 nextDiff = nextCoord - bCoord;

	vec2 prevTangent = normalize(prevDiff * scaleRatio);
	vec2 currTangent = normalize(currDiff * scaleRatio);
	vec2 nextTangent = normalize(nextDiff * scaleRatio);

	vec2 prevNormal = vec2(-prevTangent.y, prevTangent.x);
	vec2 currNormal = vec2(-currTangent.y, currTangent.x);
	vec2 nextNormal = vec2(-nextTangent.y, nextTangent.x);

	vec2 startJoinDirection = normalize(prevTangent - currTangent);
	vec2 endJoinDirection = normalize(currTangent - nextTangent);

	// collapsed/unidirectional segment cases
	// FIXME: there should be more elegant solution
	vec2 prevTanDiff = abs(prevTangent - currTangent);
	vec2 nextTanDiff = abs(nextTangent - currTangent);
	if (max(prevTanDiff.x, prevTanDiff.y) < MIN_DIFF) {
		startJoinDirection = currNormal;
	}
	if (max(nextTanDiff.x, nextTanDiff.y) < MIN_DIFF) {
		endJoinDirection = currNormal;
	}
	if (aCoord == bCoord) {
		endJoinDirection = startJoinDirection;
		currNormal = prevNormal;
		currTangent = prevTangent;
	}

	tangent = currTangent;

	//calculate join shifts relative to normals
	float startJoinShift = dot(currNormal, startJoinDirection);
	float endJoinShift = dot(currNormal, endJoinDirection);

	float startMiterRatio = abs(1. / startJoinShift);
	float endMiterRatio = abs(1. / endJoinShift);

	vec2 startJoin = startJoinDirection * startMiterRatio;
	vec2 endJoin = endJoinDirection * endMiterRatio;

	vec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;
	startTopJoin = sign(startJoinShift) * startJoin * .5;
	startBotJoin = -startTopJoin;

	endTopJoin = sign(endJoinShift) * endJoin * .5;
	endBotJoin = -endTopJoin;

	vec2 aTopCoord = aCoord + normalWidth * startTopJoin;
	vec2 bTopCoord = bCoord + normalWidth * endTopJoin;
	vec2 aBotCoord = aCoord + normalWidth * startBotJoin;
	vec2 bBotCoord = bCoord + normalWidth * endBotJoin;

	//miter anti-clipping
	float baClipping = distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));
	float abClipping = distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));

	//prevent close to reverse direction switch
	bool prevReverse = dot(currTangent, prevTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) <  length(normalWidth * currNormal);
	bool nextReverse = dot(currTangent, nextTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) <  length(normalWidth * currNormal);

	if (prevReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * startJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / startMiterRatio, 1.);
		aBotCoord = aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		aTopCoord = aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!nextReverse && baClipping > 0. && baClipping < length(normalWidth * endBotJoin)) {
		//handle miter clipping
		bTopCoord -= normalWidth * endTopJoin;
		bTopCoord += normalize(endTopJoin * normalWidth) * baClipping;
	}

	if (nextReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * endJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / endMiterRatio, 1.);
		bBotCoord = bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		bTopCoord = bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!prevReverse && abClipping > 0. && abClipping < length(normalWidth * startBotJoin)) {
		//handle miter clipping
		aBotCoord -= normalWidth * startBotJoin;
		aBotCoord += normalize(startBotJoin * normalWidth) * abClipping;
	}

	vec2 aTopPosition = (aTopCoord) * adjustedScale + translate;
	vec2 aBotPosition = (aBotCoord) * adjustedScale + translate;

	vec2 bTopPosition = (bTopCoord) * adjustedScale + translate;
	vec2 bBotPosition = (bBotCoord) * adjustedScale + translate;

	//position is normalized 0..1 coord on the screen
	vec2 position = (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;

	startCoord = aCoord * scaleRatio + translate * viewport.zw + viewport.xy;
	endCoord = bCoord * scaleRatio + translate * viewport.zw + viewport.xy;

	gl_Position = vec4(position  * 2.0 - 1.0, depth, 1);

	enableStartMiter = step(dot(currTangent, prevTangent), .5);
	enableEndMiter = step(dot(currTangent, nextTangent), .5);

	//bevel miter cutoffs
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * miterLimit * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * miterLimit * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}

	//round miter cutoffs
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}
}
`]),frag:T([`precision highp float;
#define GLSLIFY 1

uniform float dashLength, pixelRatio, thickness, opacity, id, miterMode;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;
varying vec4 startCutoff, endCutoff;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

void main() {
	float alpha = 1., distToStart, distToEnd;
	float cutoff = thickness * .5;

	//bevel miter
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToStart + 1., 0.), 1.);
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToEnd + 1., 0.), 1.);
		}
	}

	// round miter
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < 0.) {
				float radius = length(gl_FragCoord.xy - startCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < 0.) {
				float radius = length(gl_FragCoord.xy - endCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}
	}

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`]),attributes:{lineEnd:{buffer:m,divisor:0,stride:8,offset:0},lineTop:{buffer:m,divisor:0,stride:8,offset:4},aColor:{buffer:c.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:c.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:c.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:c.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:c.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:c.prop("positionBuffer"),stride:8,offset:24,divisor:1}}},l))}catch{u=x}var A=c({primitive:"triangle",elements:function(_,g){return g.triangles},offset:0,vert:T([`precision highp float;
#define GLSLIFY 1

attribute vec2 position, positionFract;

uniform vec4 color;
uniform vec2 scale, scaleFract, translate, translateFract;
uniform float pixelRatio, id;
uniform vec4 viewport;
uniform float opacity;

varying vec4 fragColor;

const float MAX_LINES = 256.;

void main() {
	float depth = (MAX_LINES - 4. - id) / (MAX_LINES);

	vec2 position = position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
	fragColor.a *= opacity;
}
`]),frag:T([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
	gl_FragColor = fragColor;
}
`]),uniforms:{scale:c.prop("scale"),color:c.prop("fill"),scaleFract:c.prop("scaleFract"),translateFract:c.prop("translateFract"),translate:c.prop("translate"),opacity:c.prop("opacity"),pixelRatio:c.context("pixelRatio"),id:c.prop("id"),viewport:function(_,g){return[g.viewport.x,g.viewport.y,_.viewportWidth,_.viewportHeight]}},attributes:{position:{buffer:c.prop("positionBuffer"),stride:8,offset:8},positionFract:{buffer:c.prop("positionFractBuffer"),stride:8,offset:8}},blend:l.blend,depth:{enable:!1},scissor:l.scissor,stencil:l.stencil,viewport:l.viewport});return{fill:A,rect:x,miter:u}},p.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null},p.prototype.render=function(){for(var c,m=[],l=arguments.length;l--;)m[l]=arguments[l];m.length&&(c=this).update.apply(c,m),this.draw()},p.prototype.draw=function(){for(var c=this,m=[],l=arguments.length;l--;)m[l]=arguments[l];return(m.length?m:this.passes).forEach(function(x,u){var A;if(x&&Array.isArray(x))return(A=c).draw.apply(A,x);typeof x=="number"&&(x=c.passes[x]),x&&x.count>1&&x.opacity&&(c.regl._refresh(),x.fill&&x.triangles&&x.triangles.length>2&&c.shaders.fill(x),x.thickness&&(x.scale[0]*x.viewport.width>p.precisionThreshold||x.scale[1]*x.viewport.height>p.precisionThreshold||x.join==="rect"||!x.join&&(x.thickness<=2||x.count>=p.maxPoints)?c.shaders.rect(x):c.shaders.miter(x)))}),this},p.prototype.update=function(c){var m=this;if(!!c){c.length!=null?typeof c[0]=="number"&&(c=[{positions:c}]):Array.isArray(c)||(c=[c]);var l=this,x=l.regl,u=l.gl;if(c.forEach(function(v,k){var S=m.passes[k];if(v!==void 0){if(v===null){m.passes[k]=null;return}if(typeof v[0]=="number"&&(v={positions:v}),v=e(v,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow",splitNull:"splitNull"}),S||(m.passes[k]=S={id:k,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:x.texture({channels:1,data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:x.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:x.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:x.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},v=M({},p.defaults,v)),v.thickness!=null&&(S.thickness=parseFloat(v.thickness)),v.opacity!=null&&(S.opacity=parseFloat(v.opacity)),v.miterLimit!=null&&(S.miterLimit=parseFloat(v.miterLimit)),v.overlay!=null&&(S.overlay=!!v.overlay,k<p.maxLines&&(S.depth=2*(p.maxLines-1-k%p.maxLines)/p.maxLines-1)),v.join!=null&&(S.join=v.join),v.hole!=null&&(S.hole=v.hole),v.fill!=null&&(S.fill=v.fill?w(v.fill,"uint8"):null),v.viewport!=null&&(S.viewport=y(v.viewport)),S.viewport||(S.viewport=y([u.drawingBufferWidth,u.drawingBufferHeight])),v.close!=null&&(S.close=v.close),v.positions===null&&(v.positions=[]),v.positions){var E,C;if(v.positions.x&&v.positions.y){var F=v.positions.x,I=v.positions.y;C=S.count=Math.max(F.length,I.length),E=new Float64Array(C*2);for(var D=0;D<C;D++)E[D*2]=F[D],E[D*2+1]=I[D]}else E=a(v.positions,"float64"),C=S.count=Math.floor(E.length/2);var R=S.bounds=f(E,2);if(S.fill){for(var O=[],z={},B=0,G=0,Q=0,X=S.count;G<X;G++){var j=E[G*2],re=E[G*2+1];isNaN(j)||isNaN(re)||j==null||re==null?(j=E[B*2],re=E[B*2+1],z[G]=B):B=G,O[Q++]=j,O[Q++]=re}if(v.splitNull){S.count-1 in z||(z[S.count]=S.count-1);var ue=Object.keys(z).map(Number).sort(function(We,ot){return We-ot}),K=[],te=0,Y=S.hole!=null?S.hole[0]:null;if(Y!=null){var H=d(ue,function(We){return We>=Y});ue=ue.slice(0,H),ue.push(Y)}for(var ee=function(We){var ot=O.slice(te*2,ue[We]*2).concat(Y?O.slice(Y*2):[]),Ge=(S.hole||[]).map(function(Ve){return Ve-Y+(ue[We]-te)}),Me=n(ot,Ge);Me=Me.map(function(Ve){return Ve+te+(Ve+te<ue[We]?0:Y-ue[We])}),K.push.apply(K,Me),te=ue[We]+1},ne=0;ne<ue.length;ne++)ee(ne);for(var Z=0,q=K.length;Z<q;Z++)z[K[Z]]!=null&&(K[Z]=z[K[Z]]);S.triangles=K}else{for(var ie=n(O,S.hole||[]),se=0,ae=ie.length;se<ae;se++)z[ie[se]]!=null&&(ie[se]=z[ie[se]]);S.triangles=ie}}var oe=new Float64Array(E);r(oe,2,R);var be=new Float64Array(C*2+6);S.close?E[0]===E[C*2-2]&&E[1]===E[C*2-1]?(be[0]=oe[C*2-4],be[1]=oe[C*2-3]):(be[0]=oe[C*2-2],be[1]=oe[C*2-1]):(be[0]=oe[0],be[1]=oe[1]),be.set(oe,2),S.close?E[0]===E[C*2-2]&&E[1]===E[C*2-1]?(be[C*2+2]=oe[2],be[C*2+3]=oe[3],S.count-=1):(be[C*2+2]=oe[0],be[C*2+3]=oe[1],be[C*2+4]=oe[2],be[C*2+5]=oe[3]):(be[C*2+2]=oe[C*2-2],be[C*2+3]=oe[C*2-1],be[C*2+4]=oe[C*2-2],be[C*2+5]=oe[C*2-1]);var ce=h(be);S.positionBuffer(ce);var de=s(be,ce);S.positionFractBuffer(de)}if(v.range?S.range=v.range:S.range||(S.range=S.bounds),(v.range||v.positions)&&S.count){var ye=S.bounds,ge=ye[2]-ye[0],me=ye[3]-ye[1],Se=S.range[2]-S.range[0],Le=S.range[3]-S.range[1];S.scale=[ge/Se,me/Le],S.translate=[-S.range[0]/Se+ye[0]/Se||0,-S.range[1]/Le+ye[1]/Le||0],S.scaleFract=s(S.scale),S.translateFract=s(S.translate)}if(v.dashes){var Oe=0,we;if(!v.dashes||v.dashes.length<2)Oe=1,we=new Uint8Array([255,255,255,255,255,255,255,255]);else{Oe=0;for(var Ce=0;Ce<v.dashes.length;++Ce)Oe+=v.dashes[Ce];we=new Uint8Array(Oe*p.dashMult);for(var Ke=0,Ye=255,Fe=0;Fe<2;Fe++)for(var Re=0;Re<v.dashes.length;++Re){for(var je=0,xt=v.dashes[Re]*p.dashMult*.5;je<xt;++je)we[Ke++]=Ye;Ye^=255}}S.dashLength=Oe,S.dashTexture({channels:1,data:we,width:we.length,height:1,mag:"linear",min:"linear"},0,0)}if(v.color){var Nt=S.count,tr=v.color;tr||(tr="transparent");var Ht=new Uint8Array(Nt*4+4);if(!Array.isArray(tr)||typeof tr[0]=="number")for(var Pt=w(tr,"uint8"),$t=0;$t<Nt+1;$t++)Ht.set(Pt,$t*4);else{for(var Ut=0;Ut<Nt;Ut++){var Lt=w(tr[Ut],"uint8");Ht.set(Lt,Ut*4)}Ht.set(w(tr[0],"uint8"),Nt*4)}S.colorBuffer({usage:"dynamic",type:"uint8",data:Ht})}}}),c.length<this.passes.length){for(var A=c.length;A<this.passes.length;A++){var _=this.passes[A];!_||(_.colorBuffer.destroy(),_.positionBuffer.destroy(),_.dashTexture.destroy())}this.passes.length=c.length}for(var g=[],b=0;b<this.passes.length;b++)this.passes[b]!==null&&g.push(this.passes[b]);return this.passes=g,this}},p.prototype.destroy=function(){return this.passes.forEach(function(c){c.colorBuffer.destroy(),c.positionBuffer.destroy(),c.dashTexture.destroy()}),this.passes.length=0,this}},{"array-bounds":71,"array-find-index":72,"array-normalize":73,"color-normalize":89,earcut:129,"es6-weak-map":183,"flatten-vertex-data":191,glslify:227,"object-assign":247,"parse-rect":249,"pick-by-alias":253,"to-float32":314}],282:[function(i,U,V){function w(S,E){return T(S)||a(S,E)||n(S,E)||h()}function f(S){return M(S)||e(S)||n(S)||t()}function M(S){if(Array.isArray(S))return r(S)}function T(S){if(Array.isArray(S))return S}function e(S){if(typeof Symbol<"u"&&S[Symbol.iterator]!=null||S["@@iterator"]!=null)return Array.from(S)}function a(S,E){var C=S==null?null:typeof Symbol<"u"&&S[Symbol.iterator]||S["@@iterator"];if(C!=null){var F=[],I=!0,D=!1,R,O;try{for(C=C.call(S);!(I=(R=C.next()).done)&&(F.push(R.value),!(E&&F.length===E));I=!0);}catch(z){D=!0,O=z}finally{try{!I&&C.return!=null&&C.return()}finally{if(D)throw O}}return F}}function n(S,E){if(!!S){if(typeof S=="string")return r(S,E);var C=Object.prototype.toString.call(S).slice(8,-1);if(C==="Object"&&S.constructor&&(C=S.constructor.name),C==="Map"||C==="Set")return Array.from(S);if(C==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(C))return r(S,E)}}function r(S,E){(E==null||E>S.length)&&(E=S.length);for(var C=0,F=new Array(E);C<E;C++)F[C]=S[C];return F}function t(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function h(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=i("color-normalize"),o=i("array-bounds"),y=i("color-id"),d=i("@plotly/point-cluster"),p=i("object-assign"),c=i("glslify"),m=i("pick-by-alias"),l=i("update-diff"),x=i("flatten-vertex-data"),u=i("is-iexplorer"),A=i("to-float32"),_=i("parse-rect"),g=b;function b(S,E){var C=this;if(!(this instanceof b))return new b(S,E);typeof S=="function"?(E||(E={}),E.regl=S):(E=S,S=null),E&&E.length&&(E.positions=E),S=E.regl;var F=S._gl,I,D=[],R={},O=[],z=[null],B=[null],G=255,Q=100;this.tooManyColors=u,I=S.texture({data:new Uint8Array(G*4),width:G,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"}),p(this,{regl:S,gl:F,groups:O,markerCache:B,markerTextures:z,palette:D,paletteIds:R,paletteTexture:I,maxColors:G,maxSize:Q,canvas:F.canvas}),this.update(E);var X={uniforms:{constPointSize:!!E.constPointSize,opacity:S.prop("opacity"),paletteSize:function(K,te){return[C.tooManyColors?0:G,I.height]},pixelRatio:S.context("pixelRatio"),scale:S.prop("scale"),scaleFract:S.prop("scaleFract"),translate:S.prop("translate"),translateFract:S.prop("translateFract"),markerTexture:S.prop("markerTexture"),paletteTexture:I},attributes:{x:function(K,te){return te.xAttr||{buffer:te.positionBuffer,stride:8,offset:0}},y:function(K,te){return te.yAttr||{buffer:te.positionBuffer,stride:8,offset:4}},xFract:function(K,te){return te.xAttr?{constant:[0,0]}:{buffer:te.positionFractBuffer,stride:8,offset:0}},yFract:function(K,te){return te.yAttr?{constant:[0,0]}:{buffer:te.positionFractBuffer,stride:8,offset:4}},size:function(K,te){return te.size.length?{buffer:te.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(te.size*255/C.maxSize)]}},borderSize:function(K,te){return te.borderSize.length?{buffer:te.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(te.borderSize*255/C.maxSize)]}},colorId:function(K,te){return te.color.length?{buffer:te.colorBuffer,stride:C.tooManyColors?8:4,offset:0}:{constant:C.tooManyColors?D.slice(te.color*4,te.color*4+4):[te.color]}},borderColorId:function(K,te){return te.borderColor.length?{buffer:te.colorBuffer,stride:C.tooManyColors?8:4,offset:C.tooManyColors?4:2}:{constant:C.tooManyColors?D.slice(te.borderColor*4,te.borderColor*4+4):[te.borderColor]}},isActive:function(K,te){return te.activation===!0?{constant:[1]}:te.activation?te.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:S.prop("viewport")},viewport:S.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:S.prop("elements"),count:S.prop("count"),offset:S.prop("offset"),primitive:"points"},j=p({},X);j.frag=c([`precision highp float;
#define GLSLIFY 1

uniform float opacity;
uniform sampler2D markerTexture;

varying vec4 fragColor, fragBorderColor;
varying float fragWidth, fragBorderColorLevel, fragColorLevel;

float smoothStep(float x, float y) {
  return 1.0 / (1.0 + exp(50.0*(x - y)));
}

void main() {
  float dist = texture2D(markerTexture, gl_PointCoord).r, delta = fragWidth;

  // max-distance alpha
  if (dist < 0.003) discard;

  // null-border case
  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {
    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);
    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);
  }
  else {
    float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);
    float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);

    vec4 color = fragBorderColor;
    color.a *= borderColorAmt;
    color = mix(color, fragColor, colorAmt);
    color.a *= opacity;

    gl_FragColor = color;
  }

}
`]),j.vert=c([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 scale, scaleFract, translate, translateFract, paletteSize;
uniform sampler2D paletteTexture;

const float maxSize = 100.;
const float borderLevel = .5;

varying vec4 fragColor, fragBorderColor;
varying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = 2. * size * pointSizeScale;
  fragPointSize = size * pixelRatio;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragColor = color;
  fragBorderColor = borderColor;
  fragWidth = 1. / gl_PointSize;

  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);
  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);
}`]),this.drawMarker=S(j);var re=p({},X);re.frag=c([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

uniform float opacity;

float smoothStep(float edge0, float edge1, float x) {
	float t;
	t = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);
	return t * t * (3.0 - 2.0 * t);
}

void main() {
	float radius, alpha = 1.0, delta = fragWidth;

	radius = length(2.0 * gl_PointCoord.xy - 1.0);

	if (radius > 1.0 + delta) {
		discard;
	}

	alpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);

	float borderRadius = fragBorderRadius;
	float ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);
	vec4 color = mix(fragColor, fragBorderColor, ratio);
	color.a *= alpha * opacity;
	gl_FragColor = color;
}
`]),re.vert=c([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 paletteSize, scale, scaleFract, translate, translateFract;
uniform sampler2D paletteTexture;

const float maxSize = 100.;

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = (size + borderSize) * pointSizeScale;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragBorderRadius = 1. - 2. * borderSize / (size + borderSize);
  fragColor = color;
  fragBorderColor = borderColor.a == 0. || borderSize == 0. ? vec4(color.rgb, 0.) : borderColor;
  fragWidth = 1. / gl_PointSize;
}
`]),u&&(re.frag=re.frag.replace("smoothstep","smoothStep"),j.frag=j.frag.replace("smoothstep","smoothStep")),this.drawCircle=S(re)}b.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,count:0,offset:0,bounds:null,positions:[],snap:1e4},b.prototype.render=function(){return arguments.length&&this.update.apply(this,arguments),this.draw(),this},b.prototype.draw=function(){for(var S=this,E=arguments.length,C=new Array(E),F=0;F<E;F++)C[F]=arguments[F];var I=this.groups;if(C.length===1&&Array.isArray(C[0])&&(C[0][0]===null||Array.isArray(C[0][0]))&&(C=C[0]),this.regl._refresh(),C.length)for(var D=0;D<C.length;D++)this.drawItem(D,C[D]);else I.forEach(function(R,O){S.drawItem(O)});return this},b.prototype.drawItem=function(S,E){var C=this.groups,F=C[S];if(typeof E=="number"&&(S=E,F=C[E],E=null),!!(F&&F.count&&F.opacity)){F.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,F,E));for(var I=[],D=1;D<F.activation.length;D++)!F.activation[D]||F.activation[D]!==!0&&!F.activation[D].data.length||I.push.apply(I,f(this.getMarkerDrawOptions(D,F,E)));I.length&&this.drawMarker(I)}},b.prototype.getMarkerDrawOptions=function(S,E,C){var F=E.range,I=E.tree,D=E.viewport,R=E.activation,O=E.selectionBuffer,z=E.count;if(this.regl,!I)return C?[p({},E,{markerTexture:this.markerTextures[S],activation:R[S],count:C.length,elements:C,offset:0})]:[p({},E,{markerTexture:this.markerTextures[S],activation:R[S],offset:0})];var B=[],G=I.range(F,{lod:!0,px:[(F[2]-F[0])/D.width,(F[3]-F[1])/D.height]});if(C){for(var Q=R[S],X=Q.data,j=new Uint8Array(z),re=0;re<C.length;re++){var ue=C[re];j[ue]=X?X[ue]:1}O.subdata(j)}for(var K=G.length;K--;){var te=w(G[K],2),Y=te[0],H=te[1];B.push(p({},E,{markerTexture:this.markerTextures[S],activation:C?O:R[S],offset:Y,count:H-Y}))}return B},b.prototype.update=function(){for(var S=this,E=arguments.length,C=new Array(E),F=0;F<E;F++)C[F]=arguments[F];if(!!C.length){C.length===1&&Array.isArray(C[0])&&(C=C[0]);var I=this.groups,D=this.gl,R=this.regl,O=this.maxSize,z=this.maxColors,B=this.palette;this.groups=I=C.map(function(G,Q){var X=I[Q];if(G===void 0)return X;G===null?G={positions:null}:typeof G=="function"?G={ondraw:G}:typeof G[0]=="number"&&(G={positions:G}),G=m(G,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"}),G.positions===null&&(G.positions=[]),G.tooManyColors!=null&&(S.tooManyColors=G.tooManyColors),X||(I[Q]=X={id:Q,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:R.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:R.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:R.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:R.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:R.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},G=p({},b.defaults,G)),G.positions&&!("marker"in G)&&(G.marker=X.marker,delete X.marker),G.marker&&!("positions"in G)&&(G.positions=X.positions,delete X.positions);var j=0,re=0;if(l(X,G,[{snap:!0,size:function(me,Se){return me==null&&(me=b.defaults.size),j+=me&&me.length?1:0,me},borderSize:function(me,Se){return me==null&&(me=b.defaults.borderSize),j+=me&&me.length?1:0,me},opacity:parseFloat,color:function(me,Se){return me==null&&(me=b.defaults.color),me=S.updateColor(me),re++,me},borderColor:function(me,Se){return me==null&&(me=b.defaults.borderColor),me=S.updateColor(me),re++,me},bounds:function(me,Se,Le){return"range"in Le||(Le.range=null),me},positions:function(me,Se,Le){var Oe=Se.snap,we=Se.positionBuffer,Ce=Se.positionFractBuffer,Ke=Se.selectionBuffer;if(me.x||me.y)return me.x.length?Se.xAttr={buffer:R.buffer(me.x),offset:0,stride:4,count:me.x.length}:Se.xAttr={buffer:me.x.buffer,offset:me.x.offset*4||0,stride:(me.x.stride||1)*4,count:me.x.count},me.y.length?Se.yAttr={buffer:R.buffer(me.y),offset:0,stride:4,count:me.y.length}:Se.yAttr={buffer:me.y.buffer,offset:me.y.offset*4||0,stride:(me.y.stride||1)*4,count:me.y.count},Se.count=Math.max(Se.xAttr.count,Se.yAttr.count),me;me=x(me,"float64");var Ye=Se.count=Math.floor(me.length/2),Fe=Se.bounds=Ye?o(me,2):null;if(!Le.range&&!Se.range&&(delete Se.range,Le.range=Fe),!Le.marker&&!Se.marker&&(delete Se.marker,Le.marker=null),Oe&&(Oe===!0||Ye>Oe)?Se.tree=d(me,{bounds:Fe}):Oe&&Oe.length&&(Se.tree=Oe),Se.tree){var Re={primitive:"points",usage:"static",data:Se.tree,type:"uint32"};Se.elements?Se.elements(Re):Se.elements=R.elements(Re)}var je=A.float32(me);we({data:je,usage:"dynamic"});var xt=A.fract32(me,je);return Ce({data:xt,usage:"dynamic"}),Ke({data:new Uint8Array(Ye),type:"uint8",usage:"stream"}),me}},{marker:function(me,Se,Le){var Oe=Se.activation;if(Oe.forEach(function(xt){return xt&&xt.destroy&&xt.destroy()}),Oe.length=0,!me||typeof me[0]=="number"){var we=S.addMarker(me);Oe[we]=!0}else{for(var Ce=[],Ke=0,Ye=Math.min(me.length,Se.count);Ke<Ye;Ke++){var Fe=S.addMarker(me[Ke]);Ce[Fe]||(Ce[Fe]=new Uint8Array(Se.count)),Ce[Fe][Ke]=1}for(var Re=0;Re<Ce.length;Re++)if(!!Ce[Re]){var je={data:Ce[Re],type:"uint8",usage:"static"};Oe[Re]?Oe[Re](je):Oe[Re]=R.buffer(je),Oe[Re].data=Ce[Re]}}return me},range:function(me,Se,Le){var Oe=Se.bounds;if(!!Oe)return me||(me=Oe),Se.scale=[1/(me[2]-me[0]),1/(me[3]-me[1])],Se.translate=[-me[0],-me[1]],Se.scaleFract=A.fract(Se.scale),Se.translateFract=A.fract(Se.translate),me},viewport:function(me){var Se=_(me||[D.drawingBufferWidth,D.drawingBufferHeight]);return Se}}]),j){var ue=X,K=ue.count,te=ue.size,Y=ue.borderSize,H=ue.sizeBuffer,ee=new Uint8Array(K*2);if(te.length||Y.length)for(var ne=0;ne<K;ne++)ee[ne*2]=Math.round((te[ne]==null?te:te[ne])*255/O),ee[ne*2+1]=Math.round((Y[ne]==null?Y:Y[ne])*255/O);H({data:ee,usage:"dynamic"})}if(re){var Z=X,q=Z.count,ie=Z.color,se=Z.borderColor,ae=Z.colorBuffer,oe;if(S.tooManyColors){if(ie.length||se.length){oe=new Uint8Array(q*8);for(var be=0;be<q;be++){var ce=ie[be];oe[be*8]=B[ce*4],oe[be*8+1]=B[ce*4+1],oe[be*8+2]=B[ce*4+2],oe[be*8+3]=B[ce*4+3];var de=se[be];oe[be*8+4]=B[de*4],oe[be*8+5]=B[de*4+1],oe[be*8+6]=B[de*4+2],oe[be*8+7]=B[de*4+3]}}}else if(ie.length||se.length){oe=new Uint8Array(q*4+2);for(var ye=0;ye<q;ye++)ie[ye]!=null&&(oe[ye*4]=ie[ye]%z,oe[ye*4+1]=Math.floor(ie[ye]/z)),se[ye]!=null&&(oe[ye*4+2]=se[ye]%z,oe[ye*4+3]=Math.floor(se[ye]/z))}ae({data:oe||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return X})}},b.prototype.addMarker=function(S){var E=this.markerTextures,C=this.regl,F=this.markerCache,I=S==null?0:F.indexOf(S);if(I>=0)return I;var D;if(S instanceof Uint8Array||S instanceof Uint8ClampedArray)D=S;else{D=new Uint8Array(S.length);for(var R=0,O=S.length;R<O;R++)D[R]=S[R]*255}var z=Math.floor(Math.sqrt(D.length));return I=E.length,F.push(S),E.push(C.texture({channels:1,data:D,radius:z,mag:"linear",min:"linear"})),I},b.prototype.updateColor=function(S){var E=this.paletteIds,C=this.palette,F=this.maxColors;Array.isArray(S)||(S=[S]);var I=[];if(typeof S[0]=="number"){var D=[];if(Array.isArray(S))for(var R=0;R<S.length;R+=4)D.push(S.slice(R,R+4));else for(var O=0;O<S.length;O+=4)D.push(S.subarray(O,O+4));S=D}for(var z=0;z<S.length;z++){var B=S[z];B=s(B,"uint8");var G=y(B,!1);if(E[G]==null){var Q=C.length;E[G]=Math.floor(Q/4),C[Q]=B[0],C[Q+1]=B[1],C[Q+2]=B[2],C[Q+3]=B[3]}I[z]=E[G]}return!this.tooManyColors&&C.length>F*4&&(this.tooManyColors=!0),this.updatePalette(C),I.length===1?I[0]:I},b.prototype.updatePalette=function(S){if(!this.tooManyColors){var E=this.maxColors,C=this.paletteTexture,F=Math.ceil(S.length*.25/E);if(F>1){S=S.slice();for(var I=S.length*.25%E;I<F*E;I++)S.push(0,0,0,0)}C.height<F&&C.resize(E,F),C.subimage({width:Math.min(S.length*.25,E),height:F,data:S},0,0)}},b.prototype.destroy=function(){return this.groups.forEach(function(S){S.sizeBuffer.destroy(),S.positionBuffer.destroy(),S.positionFractBuffer.destroy(),S.colorBuffer.destroy(),S.activation.forEach(function(E){return E&&E.destroy&&E.destroy()}),S.selectionBuffer.destroy(),S.elements&&S.elements.destroy()}),this.groups.length=0,this.paletteTexture.destroy(),this.markerTextures.forEach(function(S){return S&&S.destroy&&S.destroy()}),this};var v=i("object-assign"),k=function(E,C){var F=new g(E,C),I=F.render.bind(F);return v(I,{render:I,update:F.update.bind(F),draw:F.draw.bind(F),destroy:F.destroy.bind(F),regl:F.regl,gl:F.gl,canvas:F.gl.canvas,groups:F.groups,markers:F.markerCache,palette:F.palette}),I};U.exports=k},{"@plotly/point-cluster":59,"array-bounds":71,"color-id":87,"color-normalize":89,"flatten-vertex-data":191,glslify:227,"is-iexplorer":233,"object-assign":247,"parse-rect":249,"pick-by-alias":253,"to-float32":314,"update-diff":330}],283:[function(i,U,V){var w=i("regl-scatter2d"),f=i("pick-by-alias"),M=i("array-bounds"),T=i("raf"),e=i("array-range"),a=i("parse-rect"),n=i("flatten-vertex-data");U.exports=r;function r(o,y){if(!(this instanceof r))return new r(o);this.traces=[],this.passes={},this.regl=o,this.scatter=w(o),this.canvas=this.scatter.canvas}r.prototype.render=function(){for(var o=this,y,d=[],p=arguments.length;p--;)d[p]=arguments[p];return d.length&&(y=this).update.apply(y,d),this.regl.attributes.preserveDrawingBuffer?this.draw():(this.dirty?this.planned==null&&(this.planned=T(function(){o.draw(),o.dirty=!0,o.planned=null})):(this.draw(),this.dirty=!0,T(function(){o.dirty=!1})),this)},r.prototype.update=function(){for(var o,y=[],d=arguments.length;d--;)y[d]=arguments[d];if(!!y.length){for(var p=0;p<y.length;p++)this.updateItem(p,y[p]);this.traces=this.traces.filter(Boolean);for(var c=[],m=0,l=0;l<this.traces.length;l++){for(var x=this.traces[l],u=this.traces[l].passes,A=0;A<u.length;A++)c.push(this.passes[u[A]]);x.passOffset=m,m+=x.passes.length}return(o=this.scatter).update.apply(o,c),this}},r.prototype.updateItem=function(o,y){var d=this,p=d.regl;if(y===null)return this.traces[o]=null,this;if(!y)return this;var c=f(y,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"}),m=this.traces[o]||(this.traces[o]={id:o,buffer:p.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:a([p._gl.drawingBufferWidth,p._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});if(c.color!=null&&(m.color=c.color),c.size!=null&&(m.size=c.size),c.marker!=null&&(m.marker=c.marker),c.borderColor!=null&&(m.borderColor=c.borderColor),c.borderSize!=null&&(m.borderSize=c.borderSize),c.opacity!=null&&(m.opacity=c.opacity),c.viewport&&(m.viewport=a(c.viewport)),c.diagonal!=null&&(m.diagonal=c.diagonal),c.upper!=null&&(m.upper=c.upper),c.lower!=null&&(m.lower=c.lower),c.data){m.buffer(n(c.data)),m.columns=c.data.length,m.count=c.data[0].length,m.bounds=[];for(var l=0;l<m.columns;l++)m.bounds[l]=M(c.data[l],1)}var x;c.range&&(m.range=c.range,x=m.range&&typeof m.range[0]!="number"),c.domain&&(m.domain=c.domain);var u=!1;c.padding!=null&&(Array.isArray(c.padding)&&c.padding.length===m.columns&&typeof c.padding[c.padding.length-1]=="number"?(m.padding=c.padding.map(s),u=!0):m.padding=s(c.padding));var A=m.columns,_=m.count,g=m.viewport.width,b=m.viewport.height,v=m.viewport.x,k=m.viewport.y,S=g/A,E=b/A;m.passes=[];for(var C=0;C<A;C++)for(var F=0;F<A;F++)if(!(!m.diagonal&&F===C)&&!(!m.upper&&C>F)&&!(!m.lower&&C<F)){var I=t(m.id,C,F),D=this.passes[I]||(this.passes[I]={});if(c.data&&(c.transpose?D.positions={x:{buffer:m.buffer,offset:F,count:_,stride:A},y:{buffer:m.buffer,offset:C,count:_,stride:A}}:D.positions={x:{buffer:m.buffer,offset:F*_,count:_},y:{buffer:m.buffer,offset:C*_,count:_}},D.bounds=h(m.bounds,C,F)),c.domain||c.viewport||c.data){var R=u?h(m.padding,C,F):m.padding;if(m.domain){var O=h(m.domain,C,F),z=O[0],B=O[1],G=O[2],Q=O[3];D.viewport=[v+z*g+R[0],k+B*b+R[1],v+G*g-R[2],k+Q*b-R[3]]}else D.viewport=[v+F*S+S*R[0],k+C*E+E*R[1],v+(F+1)*S-S*R[2],k+(C+1)*E-E*R[3]]}c.color&&(D.color=m.color),c.size&&(D.size=m.size),c.marker&&(D.marker=m.marker),c.borderSize&&(D.borderSize=m.borderSize),c.borderColor&&(D.borderColor=m.borderColor),c.opacity&&(D.opacity=m.opacity),c.range&&(D.range=x?h(m.range,C,F):m.range||D.bounds),m.passes.push(I)}return this},r.prototype.draw=function(){for(var o,y=[],d=arguments.length;d--;)y[d]=arguments[d];if(!y.length)this.scatter.draw();else{for(var p=[],c=0;c<y.length;c++)if(typeof y[c]=="number"){var m=this.traces[y[c]],l=m.passes,x=m.passOffset;p.push.apply(p,e(x,x+l.length))}else if(y[c].length){var u=y[c],A=this.traces[c],_=A.passes,g=A.passOffset;_=_.map(function(b,v){p[g+v]=u})}(o=this.scatter).draw.apply(o,p)}return this},r.prototype.destroy=function(){return this.traces.forEach(function(o){o.buffer&&o.buffer.destroy&&o.buffer.destroy()}),this.traces=null,this.passes=null,this.scatter.destroy(),this};function t(o,y,d){var p=o.id!=null?o.id:o,c=y,m=d,l=p<<16|(c&255)<<8|m&255;return l}function h(o,y,d){var p,c,m,l,x=o[y],u=o[d];return x.length>2?(x[0],x[2],p=x[1],c=x[3]):x.length?(p=x[0],c=x[1]):(x.x,p=x.y,x.x+x.width,c=x.y+x.height),u.length>2?(m=u[0],l=u[2],u[1],u[3]):u.length?(m=u[0],l=u[1]):(m=u.x,u.y,l=u.x+u.width,u.y+u.height),[m,p,l,c]}function s(o){if(typeof o=="number")return[o,o,o,o];if(o.length===2)return[o[0],o[1],o[0],o[1]];var y=a(o);return[y.x,y.y,y.x+y.width,y.y+y.height]}},{"array-bounds":71,"array-range":74,"flatten-vertex-data":191,"parse-rect":249,"pick-by-alias":253,raf:279,"regl-scatter2d":282}],284:[function(i,U,V){(function(w,f){typeof V=="object"&&typeof U<"u"?U.exports=f():w.createREGL=f()})(this,function(){function w(ut,ar){this.id=be++,this.type=ut,this.data=ar}function f(ut){if(ut.length===0)return[];var ar=ut.charAt(0),rr=ut.charAt(ut.length-1);if(1<ut.length&&ar===rr&&(ar==='"'||ar==="'"))return['"'+ut.substr(1,ut.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(ar=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(ut))return f(ut.substr(0,ar.index)).concat(f(ar[1])).concat(f(ut.substr(ar.index+ar[0].length)));if(ar=ut.split("."),ar.length===1)return['"'+ut.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];for(ut=[],rr=0;rr<ar.length;++rr)ut=ut.concat(f(ar[rr]));return ut}function M(ut){return"["+f(ut).join("][")+"]"}function T(ut,ar){if(typeof ut=="function")return new w(0,ut);if(typeof ut=="number"||typeof ut=="boolean")return new w(5,ut);if(Array.isArray(ut))return new w(6,ut.map(function(rr,Kt){return T(rr)}));if(ut instanceof w)return ut}function e(){var ut={"":0},ar=[""];return{id:function(rr){var Kt=ut[rr];return Kt||(Kt=ut[rr]=ar.length,ar.push(rr),Kt)},str:function(rr){return ar[rr]}}}function a(ut,ar,rr){function Kt(){var et=window.innerWidth,ht=window.innerHeight;ut!==document.body&&(ht=Er.getBoundingClientRect(),et=ht.right-ht.left,ht=ht.bottom-ht.top),Er.width=rr*et,Er.height=rr*ht}var Er=document.createElement("canvas");oe(Er.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),ut.appendChild(Er),ut===document.body&&(Er.style.position="absolute",oe(ut.style,{margin:0,padding:0}));var st;return ut!==document.body&&typeof ResizeObserver=="function"?(st=new ResizeObserver(function(){setTimeout(Kt)}),st.observe(ut)):window.addEventListener("resize",Kt,!1),Kt(),{canvas:Er,onDestroy:function(){st?st.disconnect():window.removeEventListener("resize",Kt),ut.removeChild(Er)}}}function n(ut,ar){function rr(Kt){try{return ut.getContext(Kt,ar)}catch{return null}}return rr("webgl")||rr("experimental-webgl")||rr("webgl-experimental")}function r(ut){return typeof ut=="string"?ut.split():ut}function t(ut){return typeof ut=="string"?document.querySelector(ut):ut}function h(ut){var ar=ut||{},rr,Kt,Er,st;ut={};var et=[],ht=[],vt=typeof window>"u"?1:window.devicePixelRatio,kt=!1,Vt={},Pe=function(lt){},ke=function(){};if(typeof ar=="string"?rr=document.querySelector(ar):typeof ar=="object"&&(typeof ar.nodeName=="string"&&typeof ar.appendChild=="function"&&typeof ar.getBoundingClientRect=="function"?rr=ar:typeof ar.drawArrays=="function"||typeof ar.drawElements=="function"?(st=ar,Er=st.canvas):("gl"in ar?st=ar.gl:"canvas"in ar?Er=t(ar.canvas):"container"in ar&&(Kt=t(ar.container)),"attributes"in ar&&(ut=ar.attributes),"extensions"in ar&&(et=r(ar.extensions)),"optionalExtensions"in ar&&(ht=r(ar.optionalExtensions)),"onDone"in ar&&(Pe=ar.onDone),"profile"in ar&&(kt=!!ar.profile),"pixelRatio"in ar&&(vt=+ar.pixelRatio),"cachedCode"in ar&&(Vt=ar.cachedCode))),rr&&(rr.nodeName.toLowerCase()==="canvas"?Er=rr:Kt=rr),!st){if(!Er){if(rr=a(Kt||document.body,Pe,vt),!rr)return null;Er=rr.canvas,ke=rr.onDestroy}ut.premultipliedAlpha===void 0&&(ut.premultipliedAlpha=!0),st=n(Er,ut)}return st?{gl:st,canvas:Er,container:Kt,extensions:et,optionalExtensions:ht,pixelRatio:vt,profile:kt,cachedCode:Vt,onDone:Pe,onDestroy:ke}:(ke(),Pe("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function s(ut,ar){function rr(et){et=et.toLowerCase();var ht;try{ht=Kt[et]=ut.getExtension(et)}catch{}return!!ht}for(var Kt={},Er=0;Er<ar.extensions.length;++Er){var st=ar.extensions[Er];if(!rr(st))return ar.onDestroy(),ar.onDone('"'+st+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return ar.optionalExtensions.forEach(rr),{extensions:Kt,restore:function(){Object.keys(Kt).forEach(function(et){if(Kt[et]&&!rr(et))throw Error("(regl): error restoring extension "+et)})}}}function o(ut,ar){for(var rr=Array(ut),Kt=0;Kt<ut;++Kt)rr[Kt]=ar(Kt);return rr}function y(ut){var ar,rr;return ar=(65535<ut)<<4,ut>>>=ar,rr=(255<ut)<<3,ut>>>=rr,ar|=rr,rr=(15<ut)<<2,ut>>>=rr,ar|=rr,rr=(3<ut)<<1,ar|rr|ut>>>rr>>1}function d(){function ut(Kt){e:{for(var Er=16;268435456>=Er;Er*=16)if(Kt<=Er){Kt=Er;break e}Kt=0}return Er=rr[y(Kt)>>2],0<Er.length?Er.pop():new ArrayBuffer(Kt)}function ar(Kt){rr[y(Kt.byteLength)>>2].push(Kt)}var rr=o(8,function(){return[]});return{alloc:ut,free:ar,allocType:function(Kt,Er){var st=null;switch(Kt){case 5120:st=new Int8Array(ut(Er),0,Er);break;case 5121:st=new Uint8Array(ut(Er),0,Er);break;case 5122:st=new Int16Array(ut(2*Er),0,Er);break;case 5123:st=new Uint16Array(ut(2*Er),0,Er);break;case 5124:st=new Int32Array(ut(4*Er),0,Er);break;case 5125:st=new Uint32Array(ut(4*Er),0,Er);break;case 5126:st=new Float32Array(ut(4*Er),0,Er);break;default:return null}return st.length!==Er?st.subarray(0,Er):st},freeType:function(Kt){ar(Kt.buffer)}}}function p(ut){return!!ut&&typeof ut=="object"&&Array.isArray(ut.shape)&&Array.isArray(ut.stride)&&typeof ut.offset=="number"&&ut.shape.length===ut.stride.length&&(Array.isArray(ut.data)||Se(ut.data))}function c(ut,ar,rr,Kt,Er,st){for(var et=0;et<ar;++et)for(var ht=ut[et],vt=0;vt<rr;++vt)for(var kt=ht[vt],Vt=0;Vt<Kt;++Vt)Er[st++]=kt[Vt]}function m(ut,ar,rr,Kt,Er){for(var st=1,et=rr+1;et<ar.length;++et)st*=ar[et];var ht=ar[rr];if(ar.length-rr===4){var vt=ar[rr+1],kt=ar[rr+2];for(ar=ar[rr+3],et=0;et<ht;++et)c(ut[et],vt,kt,ar,Kt,Er),Er+=st}else for(et=0;et<ht;++et)m(ut[et],ar,rr+1,Kt,Er),Er+=st}function l(ut){return we[Object.prototype.toString.call(ut)]|0}function x(ut,ar){for(var rr=0;rr<ar.length;++rr)ut[rr]=ar[rr]}function u(ut,ar,rr,Kt,Er,st,et){for(var ht=0,vt=0;vt<rr;++vt)for(var kt=0;kt<Kt;++kt)ut[ht++]=ar[Er*vt+st*kt+et]}function A(ut,ar,rr,Kt){function Er(Pe){this.id=vt++,this.buffer=ut.createBuffer(),this.type=Pe,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,rr.profile&&(this.stats={size:0})}function st(Pe,ke,lt){Pe.byteLength=ke.byteLength,ut.bufferData(Pe.type,ke,lt)}function et(Pe,ke,lt,ft,yt,Rt){if(Pe.usage=lt,Array.isArray(ke)){if(Pe.dtype=ft||5126,0<ke.length)if(Array.isArray(ke[0])){yt=Fe(ke);for(var _t=ft=1;_t<yt.length;++_t)ft*=yt[_t];Pe.dimension=ft,ke=Ye(ke,yt,Pe.dtype),st(Pe,ke,lt),Rt?Pe.persistentData=ke:ge.freeType(ke)}else typeof ke[0]=="number"?(Pe.dimension=yt,yt=ge.allocType(Pe.dtype,ke.length),x(yt,ke),st(Pe,yt,lt),Rt?Pe.persistentData=yt:ge.freeType(yt)):Se(ke[0])&&(Pe.dimension=ke[0].length,Pe.dtype=ft||l(ke[0])||5126,ke=Ye(ke,[ke.length,ke[0].length],Pe.dtype),st(Pe,ke,lt),Rt?Pe.persistentData=ke:ge.freeType(ke))}else if(Se(ke))Pe.dtype=ft||l(ke),Pe.dimension=yt,st(Pe,ke,lt),Rt&&(Pe.persistentData=new Uint8Array(new Uint8Array(ke.buffer)));else if(p(ke)){yt=ke.shape;var Dt=ke.stride,_t=ke.offset,Jt=0,fr=0,Rr=0,Sr=0;yt.length===1?(Jt=yt[0],fr=1,Rr=Dt[0],Sr=0):yt.length===2&&(Jt=yt[0],fr=yt[1],Rr=Dt[0],Sr=Dt[1]),Pe.dtype=ft||l(ke.data)||5126,Pe.dimension=fr,yt=ge.allocType(Pe.dtype,Jt*fr),u(yt,ke.data,Jt,fr,Rr,Sr,_t),st(Pe,yt,lt),Rt?Pe.persistentData=yt:ge.freeType(yt)}else ke instanceof ArrayBuffer&&(Pe.dtype=5121,Pe.dimension=yt,st(Pe,ke,lt),Rt&&(Pe.persistentData=new Uint8Array(new Uint8Array(ke))))}function ht(Pe){ar.bufferCount--,Kt(Pe),ut.deleteBuffer(Pe.buffer),Pe.buffer=null,delete kt[Pe.id]}var vt=0,kt={};Er.prototype.bind=function(){ut.bindBuffer(this.type,this.buffer)},Er.prototype.destroy=function(){ht(this)};var Vt=[];return rr.profile&&(ar.getTotalBufferSize=function(){var Pe=0;return Object.keys(kt).forEach(function(ke){Pe+=kt[ke].stats.size}),Pe}),{create:function(Pe,ke,lt,ft){function yt(_t){var Dt=35044,Jt=null,fr=0,Rr=0,Sr=1;return Array.isArray(_t)||Se(_t)||p(_t)||_t instanceof ArrayBuffer?Jt=_t:typeof _t=="number"?fr=_t|0:_t&&("data"in _t&&(Jt=_t.data),"usage"in _t&&(Dt=Ke[_t.usage]),"type"in _t&&(Rr=Ce[_t.type]),"dimension"in _t&&(Sr=_t.dimension|0),"length"in _t&&(fr=_t.length|0)),Rt.bind(),Jt?et(Rt,Jt,Dt,Rr,Sr,ft):(fr&&ut.bufferData(Rt.type,fr,Dt),Rt.dtype=Rr||5121,Rt.usage=Dt,Rt.dimension=Sr,Rt.byteLength=fr),rr.profile&&(Rt.stats.size=Rt.byteLength*Re[Rt.dtype]),yt}ar.bufferCount++;var Rt=new Er(ke);return kt[Rt.id]=Rt,lt||yt(Pe),yt._reglType="buffer",yt._buffer=Rt,yt.subdata=function(_t,Dt){var Jt=(Dt||0)|0,fr;if(Rt.bind(),Se(_t)||_t instanceof ArrayBuffer)ut.bufferSubData(Rt.type,Jt,_t);else if(Array.isArray(_t)){if(0<_t.length)if(typeof _t[0]=="number"){var Rr=ge.allocType(Rt.dtype,_t.length);x(Rr,_t),ut.bufferSubData(Rt.type,Jt,Rr),ge.freeType(Rr)}else(Array.isArray(_t[0])||Se(_t[0]))&&(fr=Fe(_t),Rr=Ye(_t,fr,Rt.dtype),ut.bufferSubData(Rt.type,Jt,Rr),ge.freeType(Rr))}else if(p(_t)){fr=_t.shape;var Sr=_t.stride,Pr=Rr=0,Jr=0,ur=0;fr.length===1?(Rr=fr[0],Pr=1,Jr=Sr[0],ur=0):fr.length===2&&(Rr=fr[0],Pr=fr[1],Jr=Sr[0],ur=Sr[1]),fr=Array.isArray(_t.data)?Rt.dtype:l(_t.data),fr=ge.allocType(fr,Rr*Pr),u(fr,_t.data,Rr,Pr,Jr,ur,_t.offset),ut.bufferSubData(Rt.type,Jt,fr),ge.freeType(fr)}return yt},rr.profile&&(yt.stats=Rt.stats),yt.destroy=function(){ht(Rt)},yt},createStream:function(Pe,ke){var lt=Vt.pop();return lt||(lt=new Er(Pe)),lt.bind(),et(lt,ke,35040,0,1,!1),lt},destroyStream:function(Pe){Vt.push(Pe)},clear:function(){Le(kt).forEach(ht),Vt.forEach(ht)},getBuffer:function(Pe){return Pe&&Pe._buffer instanceof Er?Pe._buffer:null},restore:function(){Le(kt).forEach(function(Pe){Pe.buffer=ut.createBuffer(),ut.bindBuffer(Pe.type,Pe.buffer),ut.bufferData(Pe.type,Pe.persistentData||Pe.byteLength,Pe.usage)})},_initBuffer:et}}function _(ut,ar,rr,Kt){function Er(Pe){this.id=vt++,ht[this.id]=this,this.buffer=Pe,this.primType=4,this.type=this.vertCount=0}function st(Pe,ke,lt,ft,yt,Rt,_t){Pe.buffer.bind();var Dt;if(ke?((Dt=_t)||Se(ke)&&(!p(ke)||Se(ke.data))||(Dt=ar.oes_element_index_uint?5125:5123),rr._initBuffer(Pe.buffer,ke,lt,Dt,3)):(ut.bufferData(34963,Rt,lt),Pe.buffer.dtype=Dt||5121,Pe.buffer.usage=lt,Pe.buffer.dimension=3,Pe.buffer.byteLength=Rt),Dt=_t,!_t){switch(Pe.buffer.dtype){case 5121:case 5120:Dt=5121;break;case 5123:case 5122:Dt=5123;break;case 5125:case 5124:Dt=5125}Pe.buffer.dtype=Dt}Pe.type=Dt,ke=yt,0>ke&&(ke=Pe.buffer.byteLength,Dt===5123?ke>>=1:Dt===5125&&(ke>>=2)),Pe.vertCount=ke,ke=ft,0>ft&&(ke=4,ft=Pe.buffer.dimension,ft===1&&(ke=0),ft===2&&(ke=1),ft===3&&(ke=4)),Pe.primType=ke}function et(Pe){Kt.elementsCount--,delete ht[Pe.id],Pe.buffer.destroy(),Pe.buffer=null}var ht={},vt=0,kt={uint8:5121,uint16:5123};ar.oes_element_index_uint&&(kt.uint32=5125),Er.prototype.bind=function(){this.buffer.bind()};var Vt=[];return{create:function(Pe,ke){function lt(Rt){if(Rt)if(typeof Rt=="number")ft(Rt),yt.primType=4,yt.vertCount=Rt|0,yt.type=5121;else{var _t=null,Dt=35044,Jt=-1,fr=-1,Rr=0,Sr=0;Array.isArray(Rt)||Se(Rt)||p(Rt)?_t=Rt:("data"in Rt&&(_t=Rt.data),"usage"in Rt&&(Dt=Ke[Rt.usage]),"primitive"in Rt&&(Jt=je[Rt.primitive]),"count"in Rt&&(fr=Rt.count|0),"type"in Rt&&(Sr=kt[Rt.type]),"length"in Rt?Rr=Rt.length|0:(Rr=fr,Sr===5123||Sr===5122?Rr*=2:(Sr===5125||Sr===5124)&&(Rr*=4))),st(yt,_t,Dt,Jt,fr,Rr,Sr)}else ft(),yt.primType=4,yt.vertCount=0,yt.type=5121;return lt}var ft=rr.create(null,34963,!0),yt=new Er(ft._buffer);return Kt.elementsCount++,lt(Pe),lt._reglType="elements",lt._elements=yt,lt.subdata=function(Rt,_t){return ft.subdata(Rt,_t),lt},lt.destroy=function(){et(yt)},lt},createStream:function(Pe){var ke=Vt.pop();return ke||(ke=new Er(rr.create(null,34963,!0,!1)._buffer)),st(ke,Pe,35040,-1,-1,0,0),ke},destroyStream:function(Pe){Vt.push(Pe)},getElements:function(Pe){return typeof Pe=="function"&&Pe._elements instanceof Er?Pe._elements:null},clear:function(){Le(ht).forEach(et)}}}function g(ut){for(var ar=ge.allocType(5123,ut.length),rr=0;rr<ut.length;++rr)if(isNaN(ut[rr]))ar[rr]=65535;else if(ut[rr]===1/0)ar[rr]=31744;else if(ut[rr]===-1/0)ar[rr]=64512;else{xt[0]=ut[rr];var st=Nt[0],Kt=st>>>31<<15,Er=(st<<1>>>24)-127,st=st>>13&1023;ar[rr]=-24>Er?Kt:-14>Er?Kt+(st+1024>>-14-Er):15<Er?Kt+31744:Kt+(Er+15<<10)+st}return ar}function b(ut){return Array.isArray(ut)||Se(ut)}function v(ut){return"[object "+ut+"]"}function k(ut){return Array.isArray(ut)&&(ut.length===0||typeof ut[0]=="number")}function S(ut){return!!(Array.isArray(ut)&&ut.length!==0&&b(ut[0]))}function E(ut){return Object.prototype.toString.call(ut)}function C(ut){if(!ut)return!1;var ar=E(ut);return 0<=Me.indexOf(ar)?!0:k(ut)||S(ut)||p(ut)}function F(ut,ar){ut.type===36193?(ut.data=g(ar),ge.freeType(ar)):ut.data=ar}function I(ut,ar,rr,Kt,Er,st){if(ut=typeof Qe[ut]<"u"?Qe[ut]:Pt[ut]*Ve[ar],st&&(ut*=6),Er){for(Kt=0;1<=rr;)Kt+=ut*rr*rr,rr/=2;return Kt}return ut*rr*Kt}function D(ut,ar,rr,Kt,Er,st,et){function ht(){this.format=this.internalformat=6408,this.type=5121,this.flipY=this.premultiplyAlpha=this.compressed=!1,this.unpackAlignment=1,this.colorSpace=37444,this.channels=this.height=this.width=0}function vt(kr,bn){kr.internalformat=bn.internalformat,kr.format=bn.format,kr.type=bn.type,kr.compressed=bn.compressed,kr.premultiplyAlpha=bn.premultiplyAlpha,kr.flipY=bn.flipY,kr.unpackAlignment=bn.unpackAlignment,kr.colorSpace=bn.colorSpace,kr.width=bn.width,kr.height=bn.height,kr.channels=bn.channels}function kt(kr,bn){if(typeof bn=="object"&&bn){"premultiplyAlpha"in bn&&(kr.premultiplyAlpha=bn.premultiplyAlpha),"flipY"in bn&&(kr.flipY=bn.flipY),"alignment"in bn&&(kr.unpackAlignment=bn.alignment),"colorSpace"in bn&&(kr.colorSpace=hr[bn.colorSpace]),"type"in bn&&(kr.type=Ur[bn.type]);var gn=kr.width,Ln=kr.height,qn=kr.channels,da=!1;"shape"in bn?(gn=bn.shape[0],Ln=bn.shape[1],bn.shape.length===3&&(qn=bn.shape[2],da=!0)):("radius"in bn&&(gn=Ln=bn.radius),"width"in bn&&(gn=bn.width),"height"in bn&&(Ln=bn.height),"channels"in bn&&(qn=bn.channels,da=!0)),kr.width=gn|0,kr.height=Ln|0,kr.channels=qn|0,gn=!1,"format"in bn&&(gn=bn.format,Ln=kr.internalformat=Gr[gn],kr.format=Zn[Ln],gn in Ur&&!("type"in bn)&&(kr.type=Ur[gn]),gn in Ir&&(kr.compressed=!0),gn=!0),!da&&gn?kr.channels=Pt[kr.format]:da&&!gn&&kr.channels!==Ht[kr.format]&&(kr.format=kr.internalformat=Ht[kr.channels])}}function Vt(kr){ut.pixelStorei(37440,kr.flipY),ut.pixelStorei(37441,kr.premultiplyAlpha),ut.pixelStorei(37443,kr.colorSpace),ut.pixelStorei(3317,kr.unpackAlignment)}function Pe(){ht.call(this),this.yOffset=this.xOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function ke(kr,bn){var gn=null;if(C(bn)?gn=bn:bn&&(kt(kr,bn),"x"in bn&&(kr.xOffset=bn.x|0),"y"in bn&&(kr.yOffset=bn.y|0),C(bn.data)&&(gn=bn.data)),bn.copy){var Ln=Er.viewportWidth,qn=Er.viewportHeight;kr.width=kr.width||Ln-kr.xOffset,kr.height=kr.height||qn-kr.yOffset,kr.needsCopy=!0}else if(!gn)kr.width=kr.width||1,kr.height=kr.height||1,kr.channels=kr.channels||4;else if(Se(gn))kr.channels=kr.channels||4,kr.data=gn,"type"in bn||kr.type!==5121||(kr.type=we[Object.prototype.toString.call(gn)]|0);else if(k(gn)){switch(kr.channels=kr.channels||4,Ln=gn,qn=Ln.length,kr.type){case 5121:case 5123:case 5125:case 5126:qn=ge.allocType(kr.type,qn),qn.set(Ln),kr.data=qn;break;case 36193:kr.data=g(Ln)}kr.alignment=1,kr.needsFree=!0}else if(p(gn)){Ln=gn.data,Array.isArray(Ln)||kr.type!==5121||(kr.type=we[Object.prototype.toString.call(Ln)]|0);var qn=gn.shape,da=gn.stride,oa,Bn,$n,Xa;qn.length===3?($n=qn[2],Xa=da[2]):Xa=$n=1,oa=qn[0],Bn=qn[1],qn=da[0],da=da[1],kr.alignment=1,kr.width=oa,kr.height=Bn,kr.channels=$n,kr.format=kr.internalformat=Ht[$n],kr.needsFree=!0,oa=Xa,gn=gn.offset,$n=kr.width,Xa=kr.height,Bn=kr.channels;for(var gi=ge.allocType(kr.type===36193?5126:kr.type,$n*Xa*Bn),Xt=0,mr=0;mr<Xa;++mr)for(var un=0;un<$n;++un)for(var xn=0;xn<Bn;++xn)gi[Xt++]=Ln[qn*un+da*mr+oa*xn+gn];F(kr,gi)}else if(E(gn)===$t||E(gn)===Ut||E(gn)===Lt)E(gn)===$t||E(gn)===Ut?kr.element=gn:kr.element=gn.canvas,kr.width=kr.element.width,kr.height=kr.element.height,kr.channels=4;else if(E(gn)===We)kr.element=gn,kr.width=gn.width,kr.height=gn.height,kr.channels=4;else if(E(gn)===ot)kr.element=gn,kr.width=gn.naturalWidth,kr.height=gn.naturalHeight,kr.channels=4;else if(E(gn)===Ge)kr.element=gn,kr.width=gn.videoWidth,kr.height=gn.videoHeight,kr.channels=4;else if(S(gn)){for(Ln=kr.width||gn[0].length,qn=kr.height||gn.length,da=kr.channels,da=b(gn[0][0])?da||gn[0][0].length:da||1,oa=Oe.shape(gn),$n=1,Xa=0;Xa<oa.length;++Xa)$n*=oa[Xa];$n=ge.allocType(kr.type===36193?5126:kr.type,$n),Oe.flatten(gn,oa,"",$n),F(kr,$n),kr.alignment=1,kr.width=Ln,kr.height=qn,kr.channels=da,kr.format=kr.internalformat=Ht[da],kr.needsFree=!0}}function lt(kr,bn,gn,Ln,qn){var da=kr.element,oa=kr.data,Bn=kr.internalformat,$n=kr.format,Xa=kr.type,gi=kr.width,Xt=kr.height;Vt(kr),da?ut.texSubImage2D(bn,qn,gn,Ln,$n,Xa,da):kr.compressed?ut.compressedTexSubImage2D(bn,qn,gn,Ln,Bn,gi,Xt,oa):kr.needsCopy?(Kt(),ut.copyTexSubImage2D(bn,qn,gn,Ln,kr.xOffset,kr.yOffset,gi,Xt)):ut.texSubImage2D(bn,qn,gn,Ln,gi,Xt,$n,Xa,oa)}function ft(){return ba.pop()||new Pe}function yt(kr){kr.needsFree&&ge.freeType(kr.data),Pe.call(kr),ba.push(kr)}function Rt(){ht.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function _t(kr,bn,gn){var Ln=kr.images[0]=ft();kr.mipmask=1,Ln.width=kr.width=bn,Ln.height=kr.height=gn,Ln.channels=kr.channels=4}function Dt(kr,bn){var gn=null;if(C(bn))gn=kr.images[0]=ft(),vt(gn,kr),ke(gn,bn),kr.mipmask=1;else if(kt(kr,bn),Array.isArray(bn.mipmap))for(var Ln=bn.mipmap,qn=0;qn<Ln.length;++qn)gn=kr.images[qn]=ft(),vt(gn,kr),gn.width>>=qn,gn.height>>=qn,ke(gn,Ln[qn]),kr.mipmask|=1<<qn;else gn=kr.images[0]=ft(),vt(gn,kr),ke(gn,bn),kr.mipmask=1;vt(kr,kr.images[0])}function Jt(kr,bn){for(var gn=kr.images,Ln=0;Ln<gn.length&&gn[Ln];++Ln){var qn=gn[Ln],da=bn,oa=Ln,Bn=qn.element,$n=qn.data,Xa=qn.internalformat,gi=qn.format,Xt=qn.type,mr=qn.width,un=qn.height;Vt(qn),Bn?ut.texImage2D(da,oa,gi,gi,Xt,Bn):qn.compressed?ut.compressedTexImage2D(da,oa,Xa,mr,un,0,$n):qn.needsCopy?(Kt(),ut.copyTexImage2D(da,oa,gi,qn.xOffset,qn.yOffset,mr,un,0)):ut.texImage2D(da,oa,gi,mr,un,0,gi,Xt,$n||null)}}function fr(){var kr=Pa.pop()||new Rt;ht.call(kr);for(var bn=kr.mipmask=0;16>bn;++bn)kr.images[bn]=null;return kr}function Rr(kr){for(var bn=kr.images,gn=0;gn<bn.length;++gn)bn[gn]&&yt(bn[gn]),bn[gn]=null;Pa.push(kr)}function Sr(){this.magFilter=this.minFilter=9728,this.wrapT=this.wrapS=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function Pr(kr,bn){"min"in bn&&(kr.minFilter=qt[bn.min],0<=tr.indexOf(kr.minFilter)&&!("faces"in bn)&&(kr.genMipmaps=!0)),"mag"in bn&&(kr.magFilter=zt[bn.mag]);var gn=kr.wrapS,Ln=kr.wrapT;if("wrap"in bn){var qn=bn.wrap;typeof qn=="string"?gn=Ln=it[qn]:Array.isArray(qn)&&(gn=it[qn[0]],Ln=it[qn[1]])}else"wrapS"in bn&&(gn=it[bn.wrapS]),"wrapT"in bn&&(Ln=it[bn.wrapT]);if(kr.wrapS=gn,kr.wrapT=Ln,"anisotropic"in bn&&(kr.anisotropic=bn.anisotropic),"mipmap"in bn){switch(gn=!1,typeof bn.mipmap){case"string":kr.mipmapHint=Dr[bn.mipmap],gn=kr.genMipmaps=!0;break;case"boolean":gn=kr.genMipmaps=bn.mipmap;break;case"object":kr.genMipmaps=!1,gn=!0}!gn||"min"in bn||(kr.minFilter=9984)}}function Jr(kr,bn){ut.texParameteri(bn,10241,kr.minFilter),ut.texParameteri(bn,10240,kr.magFilter),ut.texParameteri(bn,10242,kr.wrapS),ut.texParameteri(bn,10243,kr.wrapT),ar.ext_texture_filter_anisotropic&&ut.texParameteri(bn,34046,kr.anisotropic),kr.genMipmaps&&(ut.hint(33170,kr.mipmapHint),ut.generateMipmap(bn))}function ur(kr){ht.call(this),this.mipmask=0,this.internalformat=6408,this.id=xi++,this.refCount=1,this.target=kr,this.texture=ut.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Sr,et.profile&&(this.stats={size:0})}function _r(kr){ut.activeTexture(33984),ut.bindTexture(kr.target,kr.texture)}function Br(){var kr=$a[0];kr?ut.bindTexture(kr.target,kr.texture):ut.bindTexture(3553,null)}function Yr(kr){var bn=kr.texture,gn=kr.unit,Ln=kr.target;0<=gn&&(ut.activeTexture(33984+gn),ut.bindTexture(Ln,null),$a[gn]=null),ut.deleteTexture(bn),kr.texture=null,kr.params=null,kr.pixels=null,kr.refCount=0,delete Ka[kr.id],st.textureCount--}var Dr={"don't care":4352,"dont care":4352,nice:4354,fast:4353},it={repeat:10497,clamp:33071,mirror:33648},zt={nearest:9728,linear:9729},qt=oe({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},zt),hr={none:0,browser:37444},Ur={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},Gr={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},Ir={};ar.ext_srgb&&(Gr.srgb=35904,Gr.srgba=35906),ar.oes_texture_float&&(Ur.float32=Ur.float=5126),ar.oes_texture_half_float&&(Ur.float16=Ur["half float"]=36193),ar.webgl_depth_texture&&(oe(Gr,{depth:6402,"depth stencil":34041}),oe(Ur,{uint16:5123,uint32:5125,"depth stencil":34042})),ar.webgl_compressed_texture_s3tc&&oe(Ir,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),ar.webgl_compressed_texture_atc&&oe(Ir,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),ar.webgl_compressed_texture_pvrtc&&oe(Ir,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),ar.webgl_compressed_texture_etc1&&(Ir["rgb etc1"]=36196);var Cr=Array.prototype.slice.call(ut.getParameter(34467));Object.keys(Ir).forEach(function(kr){var bn=Ir[kr];0<=Cr.indexOf(bn)&&(Gr[kr]=bn)});var Kr=Object.keys(Gr);rr.textureFormats=Kr;var Cn=[];Object.keys(Gr).forEach(function(kr){Cn[Gr[kr]]=kr});var yn=[];Object.keys(Ur).forEach(function(kr){yn[Ur[kr]]=kr});var Yn=[];Object.keys(zt).forEach(function(kr){Yn[zt[kr]]=kr});var In=[];Object.keys(qt).forEach(function(kr){In[qt[kr]]=kr});var Jn=[];Object.keys(it).forEach(function(kr){Jn[it[kr]]=kr});var Zn=Kr.reduce(function(kr,bn){var gn=Gr[bn];return gn===6409||gn===6406||gn===6409||gn===6410||gn===6402||gn===34041||ar.ext_srgb&&(gn===35904||gn===35906)?kr[gn]=gn:gn===32855||0<=bn.indexOf("rgba")?kr[gn]=6408:kr[gn]=6407,kr},{}),ba=[],Pa=[],xi=0,Ka={},ti=rr.maxTextureUnits,$a=Array(ti).map(function(){return null});return oe(ur.prototype,{bind:function(){this.bindCount+=1;var kr=this.unit;if(0>kr){for(var bn=0;bn<ti;++bn){var gn=$a[bn];if(gn){if(0<gn.bindCount)continue;gn.unit=-1}$a[bn]=this,kr=bn;break}et.profile&&st.maxTextureUnits<kr+1&&(st.maxTextureUnits=kr+1),this.unit=kr,ut.activeTexture(33984+kr),ut.bindTexture(this.target,this.texture)}return kr},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&Yr(this)}}),et.profile&&(st.getTotalTextureSize=function(){var kr=0;return Object.keys(Ka).forEach(function(bn){kr+=Ka[bn].stats.size}),kr}),{create2D:function(kr,bn){function gn(qn,da){var oa=Ln.texInfo;Sr.call(oa);var Bn=fr();return typeof qn=="number"?typeof da=="number"?_t(Bn,qn|0,da|0):_t(Bn,qn|0,qn|0):qn?(Pr(oa,qn),Dt(Bn,qn)):_t(Bn,1,1),oa.genMipmaps&&(Bn.mipmask=(Bn.width<<1)-1),Ln.mipmask=Bn.mipmask,vt(Ln,Bn),Ln.internalformat=Bn.internalformat,gn.width=Bn.width,gn.height=Bn.height,_r(Ln),Jt(Bn,3553),Jr(oa,3553),Br(),Rr(Bn),et.profile&&(Ln.stats.size=I(Ln.internalformat,Ln.type,Bn.width,Bn.height,oa.genMipmaps,!1)),gn.format=Cn[Ln.internalformat],gn.type=yn[Ln.type],gn.mag=Yn[oa.magFilter],gn.min=In[oa.minFilter],gn.wrapS=Jn[oa.wrapS],gn.wrapT=Jn[oa.wrapT],gn}var Ln=new ur(3553);return Ka[Ln.id]=Ln,st.textureCount++,gn(kr,bn),gn.subimage=function(qn,da,oa,Bn){da|=0,oa|=0,Bn|=0;var $n=ft();return vt($n,Ln),$n.width=0,$n.height=0,ke($n,qn),$n.width=$n.width||(Ln.width>>Bn)-da,$n.height=$n.height||(Ln.height>>Bn)-oa,_r(Ln),lt($n,3553,da,oa,Bn),Br(),yt($n),gn},gn.resize=function(qn,da){var oa=qn|0,Bn=da|0||oa;if(oa===Ln.width&&Bn===Ln.height)return gn;gn.width=Ln.width=oa,gn.height=Ln.height=Bn,_r(Ln);for(var $n=0;Ln.mipmask>>$n;++$n){var Xa=oa>>$n,gi=Bn>>$n;if(!Xa||!gi)break;ut.texImage2D(3553,$n,Ln.format,Xa,gi,0,Ln.format,Ln.type,null)}return Br(),et.profile&&(Ln.stats.size=I(Ln.internalformat,Ln.type,oa,Bn,!1,!1)),gn},gn._reglType="texture2d",gn._texture=Ln,et.profile&&(gn.stats=Ln.stats),gn.destroy=function(){Ln.decRef()},gn},createCube:function(kr,bn,gn,Ln,qn,da){function oa(Xa,gi,Xt,mr,un,xn){var sn,kn=Bn.texInfo;for(Sr.call(kn),sn=0;6>sn;++sn)$n[sn]=fr();if(typeof Xa=="number"||!Xa)for(Xa=Xa|0||1,sn=0;6>sn;++sn)_t($n[sn],Xa,Xa);else if(typeof Xa=="object")if(gi)Dt($n[0],Xa),Dt($n[1],gi),Dt($n[2],Xt),Dt($n[3],mr),Dt($n[4],un),Dt($n[5],xn);else if(Pr(kn,Xa),kt(Bn,Xa),"faces"in Xa)for(Xa=Xa.faces,sn=0;6>sn;++sn)vt($n[sn],Bn),Dt($n[sn],Xa[sn]);else for(sn=0;6>sn;++sn)Dt($n[sn],Xa);for(vt(Bn,$n[0]),Bn.mipmask=kn.genMipmaps?($n[0].width<<1)-1:$n[0].mipmask,Bn.internalformat=$n[0].internalformat,oa.width=$n[0].width,oa.height=$n[0].height,_r(Bn),sn=0;6>sn;++sn)Jt($n[sn],34069+sn);for(Jr(kn,34067),Br(),et.profile&&(Bn.stats.size=I(Bn.internalformat,Bn.type,oa.width,oa.height,kn.genMipmaps,!0)),oa.format=Cn[Bn.internalformat],oa.type=yn[Bn.type],oa.mag=Yn[kn.magFilter],oa.min=In[kn.minFilter],oa.wrapS=Jn[kn.wrapS],oa.wrapT=Jn[kn.wrapT],sn=0;6>sn;++sn)Rr($n[sn]);return oa}var Bn=new ur(34067);Ka[Bn.id]=Bn,st.cubeCount++;var $n=Array(6);return oa(kr,bn,gn,Ln,qn,da),oa.subimage=function(Xa,gi,Xt,mr,un){Xt|=0,mr|=0,un|=0;var xn=ft();return vt(xn,Bn),xn.width=0,xn.height=0,ke(xn,gi),xn.width=xn.width||(Bn.width>>un)-Xt,xn.height=xn.height||(Bn.height>>un)-mr,_r(Bn),lt(xn,34069+Xa,Xt,mr,un),Br(),yt(xn),oa},oa.resize=function(Xa){if(Xa|=0,Xa!==Bn.width){oa.width=Bn.width=Xa,oa.height=Bn.height=Xa,_r(Bn);for(var gi=0;6>gi;++gi)for(var Xt=0;Bn.mipmask>>Xt;++Xt)ut.texImage2D(34069+gi,Xt,Bn.format,Xa>>Xt,Xa>>Xt,0,Bn.format,Bn.type,null);return Br(),et.profile&&(Bn.stats.size=I(Bn.internalformat,Bn.type,oa.width,oa.height,!1,!0)),oa}},oa._reglType="textureCube",oa._texture=Bn,et.profile&&(oa.stats=Bn.stats),oa.destroy=function(){Bn.decRef()},oa},clear:function(){for(var kr=0;kr<ti;++kr)ut.activeTexture(33984+kr),ut.bindTexture(3553,null),$a[kr]=null;Le(Ka).forEach(Yr),st.cubeCount=0,st.textureCount=0},getTexture:function(kr){return null},restore:function(){for(var kr=0;kr<ti;++kr){var bn=$a[kr];bn&&(bn.bindCount=0,bn.unit=-1,$a[kr]=null)}Le(Ka).forEach(function(gn){gn.texture=ut.createTexture(),ut.bindTexture(gn.target,gn.texture);for(var Ln=0;32>Ln;++Ln)if((gn.mipmask&1<<Ln)!==0)if(gn.target===3553)ut.texImage2D(3553,Ln,gn.internalformat,gn.width>>Ln,gn.height>>Ln,0,gn.internalformat,gn.type,null);else for(var qn=0;6>qn;++qn)ut.texImage2D(34069+qn,Ln,gn.internalformat,gn.width>>Ln,gn.height>>Ln,0,gn.internalformat,gn.type,null);Jr(gn.texInfo,gn.target)})},refresh:function(){for(var kr=0;kr<ti;++kr){var bn=$a[kr];bn&&(bn.bindCount=0,bn.unit=-1,$a[kr]=null),ut.activeTexture(33984+kr),ut.bindTexture(3553,null),ut.bindTexture(34067,null)}}}}function R(ut,ar,rr,Kt,Er,st){function et(ur,_r,Br){this.target=ur,this.texture=_r,this.renderbuffer=Br;var Yr=ur=0;_r?(ur=_r.width,Yr=_r.height):Br&&(ur=Br.width,Yr=Br.height),this.width=ur,this.height=Yr}function ht(ur){ur&&(ur.texture&&ur.texture._texture.decRef(),ur.renderbuffer&&ur.renderbuffer._renderbuffer.decRef())}function vt(ur,_r,Br){ur&&(ur.texture?ur.texture._texture.refCount+=1:ur.renderbuffer._renderbuffer.refCount+=1)}function kt(ur,_r){_r&&(_r.texture?ut.framebufferTexture2D(36160,ur,_r.target,_r.texture._texture.texture,0):ut.framebufferRenderbuffer(36160,ur,36161,_r.renderbuffer._renderbuffer.renderbuffer))}function Vt(ur){var _r=3553,Br=null,Yr=null,Dr=ur;return typeof ur=="object"&&(Dr=ur.data,"target"in ur&&(_r=ur.target|0)),ur=Dr._reglType,ur==="texture2d"||ur==="textureCube"?Br=Dr:ur==="renderbuffer"&&(Yr=Dr,_r=36161),new et(_r,Br,Yr)}function Pe(ur,_r,Br,Yr,Dr){return Br?(ur=Kt.create2D({width:ur,height:_r,format:Yr,type:Dr}),ur._texture.refCount=0,new et(3553,ur,null)):(ur=Er.create({width:ur,height:_r,format:Yr}),ur._renderbuffer.refCount=0,new et(36161,null,ur))}function ke(ur){return ur&&(ur.texture||ur.renderbuffer)}function lt(ur,_r,Br){ur&&(ur.texture?ur.texture.resize(_r,Br):ur.renderbuffer&&ur.renderbuffer.resize(_r,Br),ur.width=_r,ur.height=Br)}function ft(){this.id=Pr++,Jr[this.id]=this,this.framebuffer=ut.createFramebuffer(),this.height=this.width=0,this.colorAttachments=[],this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function yt(ur){ur.colorAttachments.forEach(ht),ht(ur.depthAttachment),ht(ur.stencilAttachment),ht(ur.depthStencilAttachment)}function Rt(ur){ut.deleteFramebuffer(ur.framebuffer),ur.framebuffer=null,st.framebufferCount--,delete Jr[ur.id]}function _t(ur){var _r;ut.bindFramebuffer(36160,ur.framebuffer);var Br=ur.colorAttachments;for(_r=0;_r<Br.length;++_r)kt(36064+_r,Br[_r]);for(_r=Br.length;_r<rr.maxColorAttachments;++_r)ut.framebufferTexture2D(36160,36064+_r,3553,null,0);ut.framebufferTexture2D(36160,33306,3553,null,0),ut.framebufferTexture2D(36160,36096,3553,null,0),ut.framebufferTexture2D(36160,36128,3553,null,0),kt(36096,ur.depthAttachment),kt(36128,ur.stencilAttachment),kt(33306,ur.depthStencilAttachment),ut.checkFramebufferStatus(36160),ut.isContextLost(),ut.bindFramebuffer(36160,Jt.next?Jt.next.framebuffer:null),Jt.cur=Jt.next,ut.getError()}function Dt(ur,_r){function Br(Dr,it){var zt,qt=0,hr=0,Ur=!0,Gr=!0;zt=null;var Ir=!0,Cr="rgba",Kr="uint8",Cn=1,yn=null,Yn=null,In=null,Jn=!1;typeof Dr=="number"?(qt=Dr|0,hr=it|0||qt):Dr?("shape"in Dr?(hr=Dr.shape,qt=hr[0],hr=hr[1]):("radius"in Dr&&(qt=hr=Dr.radius),"width"in Dr&&(qt=Dr.width),"height"in Dr&&(hr=Dr.height)),("color"in Dr||"colors"in Dr)&&(zt=Dr.color||Dr.colors),zt||("colorCount"in Dr&&(Cn=Dr.colorCount|0),"colorTexture"in Dr&&(Ir=!!Dr.colorTexture,Cr="rgba4"),"colorType"in Dr&&(Kr=Dr.colorType,!Ir)&&(Kr==="half float"||Kr==="float16"?Cr="rgba16f":(Kr==="float"||Kr==="float32")&&(Cr="rgba32f")),"colorFormat"in Dr&&(Cr=Dr.colorFormat,0<=fr.indexOf(Cr)?Ir=!0:0<=Rr.indexOf(Cr)&&(Ir=!1))),("depthTexture"in Dr||"depthStencilTexture"in Dr)&&(Jn=!(!Dr.depthTexture&&!Dr.depthStencilTexture)),"depth"in Dr&&(typeof Dr.depth=="boolean"?Ur=Dr.depth:(yn=Dr.depth,Gr=!1)),"stencil"in Dr&&(typeof Dr.stencil=="boolean"?Gr=Dr.stencil:(Yn=Dr.stencil,Ur=!1)),"depthStencil"in Dr&&(typeof Dr.depthStencil=="boolean"?Ur=Gr=Dr.depthStencil:(In=Dr.depthStencil,Gr=Ur=!1))):qt=hr=1;var Zn=null,ba=null,Pa=null,xi=null;if(Array.isArray(zt))Zn=zt.map(Vt);else if(zt)Zn=[Vt(zt)];else for(Zn=Array(Cn),zt=0;zt<Cn;++zt)Zn[zt]=Pe(qt,hr,Ir,Cr,Kr);for(qt=qt||Zn[0].width,hr=hr||Zn[0].height,yn?ba=Vt(yn):Ur&&!Gr&&(ba=Pe(qt,hr,Jn,"depth","uint32")),Yn?Pa=Vt(Yn):Gr&&!Ur&&(Pa=Pe(qt,hr,!1,"stencil","uint8")),In?xi=Vt(In):!yn&&!Yn&&Gr&&Ur&&(xi=Pe(qt,hr,Jn,"depth stencil","depth stencil")),Ur=null,zt=0;zt<Zn.length;++zt)vt(Zn[zt]),Zn[zt]&&Zn[zt].texture&&(Gr=wt[Zn[zt].texture._texture.format]*Ct[Zn[zt].texture._texture.type],Ur===null&&(Ur=Gr));return vt(ba),vt(Pa),vt(xi),yt(Yr),Yr.width=qt,Yr.height=hr,Yr.colorAttachments=Zn,Yr.depthAttachment=ba,Yr.stencilAttachment=Pa,Yr.depthStencilAttachment=xi,Br.color=Zn.map(ke),Br.depth=ke(ba),Br.stencil=ke(Pa),Br.depthStencil=ke(xi),Br.width=Yr.width,Br.height=Yr.height,_t(Yr),Br}var Yr=new ft;return st.framebufferCount++,Br(ur,_r),oe(Br,{resize:function(Dr,it){var zt=Math.max(Dr|0,1),qt=Math.max(it|0||zt,1);if(zt===Yr.width&&qt===Yr.height)return Br;for(var hr=Yr.colorAttachments,Ur=0;Ur<hr.length;++Ur)lt(hr[Ur],zt,qt);return lt(Yr.depthAttachment,zt,qt),lt(Yr.stencilAttachment,zt,qt),lt(Yr.depthStencilAttachment,zt,qt),Yr.width=Br.width=zt,Yr.height=Br.height=qt,_t(Yr),Br},_reglType:"framebuffer",_framebuffer:Yr,destroy:function(){Rt(Yr),yt(Yr)},use:function(Dr){Jt.setFBO({framebuffer:Br},Dr)}})}var Jt={cur:null,next:null,dirty:!1,setFBO:null},fr=["rgba"],Rr=["rgba4","rgb565","rgb5 a1"];ar.ext_srgb&&Rr.push("srgba"),ar.ext_color_buffer_half_float&&Rr.push("rgba16f","rgb16f"),ar.webgl_color_buffer_float&&Rr.push("rgba32f");var Sr=["uint8"];ar.oes_texture_half_float&&Sr.push("half float","float16"),ar.oes_texture_float&&Sr.push("float","float32");var Pr=0,Jr={};return oe(Jt,{getFramebuffer:function(ur){return typeof ur=="function"&&ur._reglType==="framebuffer"&&(ur=ur._framebuffer,ur instanceof ft)?ur:null},create:Dt,createCube:function(ur){function _r(Yr){var Dr,it={color:null},zt=0,qt=null;Dr="rgba";var hr="uint8",Ur=1;if(typeof Yr=="number"?zt=Yr|0:Yr?("shape"in Yr?zt=Yr.shape[0]:("radius"in Yr&&(zt=Yr.radius|0),"width"in Yr?zt=Yr.width|0:"height"in Yr&&(zt=Yr.height|0)),("color"in Yr||"colors"in Yr)&&(qt=Yr.color||Yr.colors),qt||("colorCount"in Yr&&(Ur=Yr.colorCount|0),"colorType"in Yr&&(hr=Yr.colorType),"colorFormat"in Yr&&(Dr=Yr.colorFormat)),"depth"in Yr&&(it.depth=Yr.depth),"stencil"in Yr&&(it.stencil=Yr.stencil),"depthStencil"in Yr&&(it.depthStencil=Yr.depthStencil)):zt=1,qt)if(Array.isArray(qt))for(Yr=[],Dr=0;Dr<qt.length;++Dr)Yr[Dr]=qt[Dr];else Yr=[qt];else for(Yr=Array(Ur),qt={radius:zt,format:Dr,type:hr},Dr=0;Dr<Ur;++Dr)Yr[Dr]=Kt.createCube(qt);for(it.color=Array(Yr.length),Dr=0;Dr<Yr.length;++Dr)Ur=Yr[Dr],zt=zt||Ur.width,it.color[Dr]={target:34069,data:Yr[Dr]};for(Dr=0;6>Dr;++Dr){for(Ur=0;Ur<Yr.length;++Ur)it.color[Ur].target=34069+Dr;0<Dr&&(it.depth=Br[0].depth,it.stencil=Br[0].stencil,it.depthStencil=Br[0].depthStencil),Br[Dr]?Br[Dr](it):Br[Dr]=Dt(it)}return oe(_r,{width:zt,height:zt,color:Yr})}var Br=Array(6);return _r(ur),oe(_r,{faces:Br,resize:function(Yr){var Dr=Yr|0;if(Dr===_r.width)return _r;var it=_r.color;for(Yr=0;Yr<it.length;++Yr)it[Yr].resize(Dr);for(Yr=0;6>Yr;++Yr)Br[Yr].resize(Dr);return _r.width=_r.height=Dr,_r},_reglType:"framebufferCube",destroy:function(){Br.forEach(function(Yr){Yr.destroy()})}})},clear:function(){Le(Jr).forEach(Rt)},restore:function(){Jt.cur=null,Jt.next=null,Jt.dirty=!0,Le(Jr).forEach(function(ur){ur.framebuffer=ut.createFramebuffer(),_t(ur)})}})}function O(){this.w=this.z=this.y=this.x=this.state=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.divisor=this.stride=this.offset=0}function z(ut,ar,rr,Kt,Er,st,et){function ht(_t){if(_t!==Rt.currentVAO){var Dt=ar.oes_vertex_array_object;_t?Dt.bindVertexArrayOES(_t.vao):Dt.bindVertexArrayOES(null),Rt.currentVAO=_t}}function vt(_t){if(_t!==Rt.currentVAO){if(_t)_t.bindAttrs();else{for(var Dt=ar.angle_instanced_arrays,Jt=0;Jt<lt.length;++Jt){var fr=lt[Jt];fr.buffer?(ut.enableVertexAttribArray(Jt),fr.buffer.bind(),ut.vertexAttribPointer(Jt,fr.size,fr.type,fr.normalized,fr.stride,fr.offfset),Dt&&fr.divisor&&Dt.vertexAttribDivisorANGLE(Jt,fr.divisor)):(ut.disableVertexAttribArray(Jt),ut.vertexAttrib4f(Jt,fr.x,fr.y,fr.z,fr.w))}et.elements?ut.bindBuffer(34963,et.elements.buffer.buffer):ut.bindBuffer(34963,null)}Rt.currentVAO=_t}}function kt(){Le(yt).forEach(function(_t){_t.destroy()})}function Vt(){this.id=++ft,this.attributes=[],this.elements=null,this.ownsElements=!1,this.offset=this.count=0,this.instances=-1,this.primitive=4;var _t=ar.oes_vertex_array_object;this.vao=_t?_t.createVertexArrayOES():null,yt[this.id]=this,this.buffers=[]}function Pe(){ar.oes_vertex_array_object&&Le(yt).forEach(function(_t){_t.refresh()})}var ke=rr.maxAttributes,lt=Array(ke);for(rr=0;rr<ke;++rr)lt[rr]=new O;var ft=0,yt={},Rt={Record:O,scope:{},state:lt,currentVAO:null,targetVAO:null,restore:ar.oes_vertex_array_object?Pe:function(){},createVAO:function(_t){function Dt(fr){var Rr;Array.isArray(fr)?(Rr=fr,Jt.elements&&Jt.ownsElements&&Jt.elements.destroy(),Jt.elements=null,Jt.ownsElements=!1,Jt.offset=0,Jt.count=0,Jt.instances=-1,Jt.primitive=4):(fr.elements?(Rr=fr.elements,Jt.ownsElements?(typeof Rr=="function"&&Rr._reglType==="elements"?Jt.elements.destroy():Jt.elements(Rr),Jt.ownsElements=!1):st.getElements(fr.elements)?(Jt.elements=fr.elements,Jt.ownsElements=!1):(Jt.elements=st.create(fr.elements),Jt.ownsElements=!0)):(Jt.elements=null,Jt.ownsElements=!1),Rr=fr.attributes,Jt.offset=0,Jt.count=-1,Jt.instances=-1,Jt.primitive=4,Jt.elements&&(Jt.count=Jt.elements._elements.vertCount,Jt.primitive=Jt.elements._elements.primType),"offset"in fr&&(Jt.offset=fr.offset|0),"count"in fr&&(Jt.count=fr.count|0),"instances"in fr&&(Jt.instances=fr.instances|0),"primitive"in fr&&(Jt.primitive=je[fr.primitive])),fr={};var Sr=Jt.attributes;Sr.length=Rr.length;for(var Pr=0;Pr<Rr.length;++Pr){var Jr=Rr[Pr],ur=Sr[Pr]=new O,_r=Jr.data||Jr;if(Array.isArray(_r)||Se(_r)||p(_r)){var Br;Jt.buffers[Pr]&&(Br=Jt.buffers[Pr],Se(_r)&&Br._buffer.byteLength>=_r.byteLength?Br.subdata(_r):(Br.destroy(),Jt.buffers[Pr]=null)),Jt.buffers[Pr]||(Br=Jt.buffers[Pr]=Er.create(Jr,34962,!1,!0)),ur.buffer=Er.getBuffer(Br),ur.size=ur.buffer.dimension|0,ur.normalized=!1,ur.type=ur.buffer.dtype,ur.offset=0,ur.stride=0,ur.divisor=0,ur.state=1,fr[Pr]=1}else Er.getBuffer(Jr)?(ur.buffer=Er.getBuffer(Jr),ur.size=ur.buffer.dimension|0,ur.normalized=!1,ur.type=ur.buffer.dtype,ur.offset=0,ur.stride=0,ur.divisor=0,ur.state=1):Er.getBuffer(Jr.buffer)?(ur.buffer=Er.getBuffer(Jr.buffer),ur.size=(+Jr.size||ur.buffer.dimension)|0,ur.normalized=!!Jr.normalized||!1,ur.type="type"in Jr?Ce[Jr.type]:ur.buffer.dtype,ur.offset=(Jr.offset||0)|0,ur.stride=(Jr.stride||0)|0,ur.divisor=(Jr.divisor||0)|0,ur.state=1):"x"in Jr&&(ur.x=+Jr.x||0,ur.y=+Jr.y||0,ur.z=+Jr.z||0,ur.w=+Jr.w||0,ur.state=2)}for(Br=0;Br<Jt.buffers.length;++Br)!fr[Br]&&Jt.buffers[Br]&&(Jt.buffers[Br].destroy(),Jt.buffers[Br]=null);return Jt.refresh(),Dt}var Jt=new Vt;return Kt.vaoCount+=1,Dt.destroy=function(){for(var fr=0;fr<Jt.buffers.length;++fr)Jt.buffers[fr]&&Jt.buffers[fr].destroy();Jt.buffers.length=0,Jt.ownsElements&&(Jt.elements.destroy(),Jt.elements=null,Jt.ownsElements=!1),Jt.destroy()},Dt._vao=Jt,Dt._reglType="vao",Dt(_t)},getVAO:function(_t){return typeof _t=="function"&&_t._vao?_t._vao:null},destroyBuffer:function(_t){for(var Dt=0;Dt<lt.length;++Dt){var Jt=lt[Dt];Jt.buffer===_t&&(ut.disableVertexAttribArray(Dt),Jt.buffer=null)}},setVAO:ar.oes_vertex_array_object?ht:vt,clear:ar.oes_vertex_array_object?kt:function(){}};return Vt.prototype.bindAttrs=function(){for(var _t=ar.angle_instanced_arrays,Dt=this.attributes,Jt=0;Jt<Dt.length;++Jt){var fr=Dt[Jt];fr.buffer?(ut.enableVertexAttribArray(Jt),ut.bindBuffer(34962,fr.buffer.buffer),ut.vertexAttribPointer(Jt,fr.size,fr.type,fr.normalized,fr.stride,fr.offset),_t&&fr.divisor&&_t.vertexAttribDivisorANGLE(Jt,fr.divisor)):(ut.disableVertexAttribArray(Jt),ut.vertexAttrib4f(Jt,fr.x,fr.y,fr.z,fr.w))}for(_t=Dt.length;_t<ke;++_t)ut.disableVertexAttribArray(_t);(_t=st.getElements(this.elements))?ut.bindBuffer(34963,_t.buffer.buffer):ut.bindBuffer(34963,null)},Vt.prototype.refresh=function(){var _t=ar.oes_vertex_array_object;_t&&(_t.bindVertexArrayOES(this.vao),this.bindAttrs(),Rt.currentVAO=null,_t.bindVertexArrayOES(null))},Vt.prototype.destroy=function(){if(this.vao){var _t=ar.oes_vertex_array_object;this===Rt.currentVAO&&(Rt.currentVAO=null,_t.bindVertexArrayOES(null)),_t.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),yt[this.id]&&(delete yt[this.id],--Kt.vaoCount)},Rt}function B(ut,ar,rr,Kt){function Er(ft,yt,Rt,_t){this.name=ft,this.id=yt,this.location=Rt,this.info=_t}function st(ft,yt){for(var Rt=0;Rt<ft.length;++Rt)if(ft[Rt].id===yt.id){ft[Rt].location=yt.location;return}ft.push(yt)}function et(ft,yt,Rt){Rt=ft===35632?kt:Vt;var _t=Rt[yt];if(!_t){var Dt=ar.str(yt),_t=ut.createShader(ft);ut.shaderSource(_t,Dt),ut.compileShader(_t),Rt[yt]=_t}return _t}function ht(ft,yt){this.id=lt++,this.fragId=ft,this.vertId=yt,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,Kt.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function vt(ft,yt,Rt){var _t;_t=et(35632,ft.fragId);var Dt=et(35633,ft.vertId);if(yt=ft.program=ut.createProgram(),ut.attachShader(yt,_t),ut.attachShader(yt,Dt),Rt)for(_t=0;_t<Rt.length;++_t)Dt=Rt[_t],ut.bindAttribLocation(yt,Dt[0],Dt[1]);ut.linkProgram(yt),Dt=ut.getProgramParameter(yt,35718),Kt.profile&&(ft.stats.uniformsCount=Dt);var Jt=ft.uniforms;for(_t=0;_t<Dt;++_t)if(Rt=ut.getActiveUniform(yt,_t))if(1<Rt.size)for(var fr=0;fr<Rt.size;++fr){var Rr=Rt.name.replace("[0]","["+fr+"]");st(Jt,new Er(Rr,ar.id(Rr),ut.getUniformLocation(yt,Rr),Rt))}else st(Jt,new Er(Rt.name,ar.id(Rt.name),ut.getUniformLocation(yt,Rt.name),Rt));for(Dt=ut.getProgramParameter(yt,35721),Kt.profile&&(ft.stats.attributesCount=Dt),ft=ft.attributes,_t=0;_t<Dt;++_t)(Rt=ut.getActiveAttrib(yt,_t))&&st(ft,new Er(Rt.name,ar.id(Rt.name),ut.getAttribLocation(yt,Rt.name),Rt))}var kt={},Vt={},Pe={},ke=[],lt=0;return Kt.profile&&(rr.getMaxUniformsCount=function(){var ft=0;return ke.forEach(function(yt){yt.stats.uniformsCount>ft&&(ft=yt.stats.uniformsCount)}),ft},rr.getMaxAttributesCount=function(){var ft=0;return ke.forEach(function(yt){yt.stats.attributesCount>ft&&(ft=yt.stats.attributesCount)}),ft}),{clear:function(){var ft=ut.deleteShader.bind(ut);Le(kt).forEach(ft),kt={},Le(Vt).forEach(ft),Vt={},ke.forEach(function(yt){ut.deleteProgram(yt.program)}),ke.length=0,Pe={},rr.shaderCount=0},program:function(ft,yt,Rt,_t){var Dt=Pe[yt];Dt||(Dt=Pe[yt]={});var Jt=Dt[ft];if(Jt&&(Jt.refCount++,!_t))return Jt;var fr=new ht(yt,ft);return rr.shaderCount++,vt(fr,Rt,_t),Jt||(Dt[ft]=fr),ke.push(fr),oe(fr,{destroy:function(){if(fr.refCount--,0>=fr.refCount){ut.deleteProgram(fr.program);var Rr=ke.indexOf(fr);ke.splice(Rr,1),rr.shaderCount--}0>=Dt[fr.vertId].refCount&&(ut.deleteShader(Vt[fr.vertId]),delete Vt[fr.vertId],delete Pe[fr.fragId][fr.vertId]),Object.keys(Pe[fr.fragId]).length||(ut.deleteShader(kt[fr.fragId]),delete kt[fr.fragId],delete Pe[fr.fragId])}})},restore:function(){kt={},Vt={};for(var ft=0;ft<ke.length;++ft)vt(ke[ft],null,ke[ft].attributes.map(function(yt){return[yt.location,yt.name]}))},shader:et,frag:-1,vert:-1}}function G(ut,ar,rr,Kt,Er,st,et){function ht(kt){var Vt;Vt=ar.next===null?5121:ar.next.colorAttachments[0].texture._texture.type;var Pe=0,ke=0,lt=Kt.framebufferWidth,ft=Kt.framebufferHeight,yt=null;return Se(kt)?yt=kt:kt&&(Pe=kt.x|0,ke=kt.y|0,lt=(kt.width||Kt.framebufferWidth-Pe)|0,ft=(kt.height||Kt.framebufferHeight-ke)|0,yt=kt.data||null),rr(),kt=lt*ft*4,yt||(Vt===5121?yt=new Uint8Array(kt):Vt===5126&&(yt=yt||new Float32Array(kt))),ut.pixelStorei(3333,4),ut.readPixels(Pe,ke,lt,ft,6408,Vt,yt),yt}function vt(kt){var Vt;return ar.setFBO({framebuffer:kt.framebuffer},function(){Vt=ht(kt)}),Vt}return function(kt){return kt&&"framebuffer"in kt?vt(kt):ht(kt)}}function Q(ut){for(var ar=Array(ut.length>>2),Kt=0;Kt<ar.length;Kt++)ar[Kt]=0;for(Kt=0;Kt<8*ut.length;Kt+=8)ar[Kt>>5]|=(ut.charCodeAt(Kt/8)&255)<<24-Kt%32;var rr=8*ut.length;ut=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225];var Kt=Array(64),Er,st,et,ht,vt,kt,Vt,Pe,ke,lt,ft;for(ar[rr>>5]|=128<<24-rr%32,ar[(rr+64>>9<<4)+15]=rr,Pe=0;Pe<ar.length;Pe+=16){for(rr=ut[0],Er=ut[1],st=ut[2],et=ut[3],ht=ut[4],vt=ut[5],kt=ut[6],Vt=ut[7],ke=0;64>ke;ke++){if(16>ke)Kt[ke]=ar[ke+Pe];else{lt=ke,ft=Kt[ke-2],ft=re(ft,17)^re(ft,19)^ft>>>10,ft=ue(ft,Kt[ke-7]);var yt;yt=Kt[ke-15],yt=re(yt,7)^re(yt,18)^yt>>>3,Kt[lt]=ue(ue(ft,yt),Kt[ke-16])}lt=ht,lt=re(lt,6)^re(lt,11)^re(lt,25),lt=ue(ue(ue(ue(Vt,lt),ht&vt^~ht&kt),jt[ke]),Kt[ke]),Vt=rr,Vt=re(Vt,2)^re(Vt,13)^re(Vt,22),ft=ue(Vt,rr&Er^rr&st^Er&st),Vt=kt,kt=vt,vt=ht,ht=ue(et,lt),et=st,st=Er,Er=rr,rr=ue(lt,ft)}ut[0]=ue(rr,ut[0]),ut[1]=ue(Er,ut[1]),ut[2]=ue(st,ut[2]),ut[3]=ue(et,ut[3]),ut[4]=ue(ht,ut[4]),ut[5]=ue(vt,ut[5]),ut[6]=ue(kt,ut[6]),ut[7]=ue(Vt,ut[7])}for(ar="",Kt=0;Kt<32*ut.length;Kt+=8)ar+=String.fromCharCode(ut[Kt>>5]>>>24-Kt%32&255);return ar}function X(ut){for(var ar="",rr,Kt=0;Kt<ut.length;Kt++)rr=ut.charCodeAt(Kt),ar+="0123456789abcdef".charAt(rr>>>4&15)+"0123456789abcdef".charAt(rr&15);return ar}function j(ut){for(var ar="",rr=-1,Kt,Er;++rr<ut.length;)Kt=ut.charCodeAt(rr),Er=rr+1<ut.length?ut.charCodeAt(rr+1):0,55296<=Kt&&56319>=Kt&&56320<=Er&&57343>=Er&&(Kt=65536+((Kt&1023)<<10)+(Er&1023),rr++),127>=Kt?ar+=String.fromCharCode(Kt):2047>=Kt?ar+=String.fromCharCode(192|Kt>>>6&31,128|Kt&63):65535>=Kt?ar+=String.fromCharCode(224|Kt>>>12&15,128|Kt>>>6&63,128|Kt&63):2097151>=Kt&&(ar+=String.fromCharCode(240|Kt>>>18&7,128|Kt>>>12&63,128|Kt>>>6&63,128|Kt&63));return ar}function re(ut,ar){return ut>>>ar|ut<<32-ar}function ue(ut,ar){var rr=(ut&65535)+(ar&65535);return(ut>>16)+(ar>>16)+(rr>>16)<<16|rr&65535}function K(ut){return Array.prototype.slice.call(ut)}function te(ut){return K(ut).join("")}function Y(ut){function ar(){var Vt=[],Pe=[];return oe(function(){Vt.push.apply(Vt,K(arguments))},{def:function(){var ke="v"+Er++;return Pe.push(ke),0<arguments.length&&(Vt.push(ke,"="),Vt.push.apply(Vt,K(arguments)),Vt.push(";")),ke},toString:function(){return te([0<Pe.length?"var "+Pe.join(",")+";":"",te(Vt)])}})}function rr(){function Vt(yt,Rt){ke(yt,Rt,"=",Pe.def(yt,Rt),";")}var Pe=ar(),ke=ar(),lt=Pe.toString,ft=ke.toString;return oe(function(){Pe.apply(Pe,K(arguments))},{def:Pe.def,entry:Pe,exit:ke,save:Vt,set:function(yt,Rt,_t){Vt(yt,Rt),Pe(yt,Rt,"=",_t,";")},toString:function(){return lt()+ft()}})}var Kt=ut&&ut.cache,Er=0,st=[],et=[],ht=[],vt=ar(),kt={};return{global:vt,link:function(Vt,Pe){var ke=Pe&&Pe.stable;if(!ke){for(var lt=0;lt<et.length;++lt)if(et[lt]===Vt&&!ht[lt])return st[lt]}return lt="g"+Er++,st.push(lt),et.push(Vt),ht.push(ke),lt},block:ar,proc:function(Vt,Pe){function ke(){var Rt="a"+lt.length;return lt.push(Rt),Rt}var lt=[];Pe=Pe||0;for(var ft=0;ft<Pe;++ft)ke();var ft=rr(),yt=ft.toString;return kt[Vt]=oe(ft,{arg:ke,toString:function(){return te(["function(",lt.join(),"){",yt(),"}"])}})},scope:rr,cond:function(){var Vt=te(arguments),Pe=rr(),ke=rr(),lt=Pe.toString,ft=ke.toString;return oe(Pe,{then:function(){return Pe.apply(Pe,K(arguments)),this},else:function(){return ke.apply(ke,K(arguments)),this},toString:function(){var yt=ft();return yt&&(yt="else{"+yt+"}"),te(["if(",Vt,"){",lt(),"}",yt])}})},compile:function(){var Vt=['"use strict";',vt,"return {"];Object.keys(kt).forEach(function(lt){Vt.push('"',lt,'":',kt[lt].toString(),",")}),Vt.push("}");var Pe=te(Vt).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),ke;return Kt&&(ke=X(Q(j(Pe))),Kt[ke])?Kt[ke].apply(null,et):(Pe=Function.apply(null,st.concat(Pe)),Kt&&(Kt[ke]=Pe),Pe.apply(null,et))}}}function H(ut){return Array.isArray(ut)||Se(ut)||p(ut)}function ee(ut){return ut.sort(function(ar,rr){return ar==="viewport"?-1:rr==="viewport"?1:ar<rr?-1:1})}function ne(ut,ar,rr,Kt){this.thisDep=ut,this.contextDep=ar,this.propDep=rr,this.append=Kt}function Z(ut){return ut&&!(ut.thisDep||ut.contextDep||ut.propDep)}function q(ut){return new ne(!1,!1,!1,ut)}function ie(ut,ar){var rr=ut.type;if(rr===0)return rr=ut.data.length,new ne(!0,1<=rr,2<=rr,ar);if(rr===4)return rr=ut.data,new ne(rr.thisDep,rr.contextDep,rr.propDep,ar);if(rr===5)return new ne(!1,!1,!1,ar);if(rr===6){for(var Kt=rr=!1,Er=!1,st=0;st<ut.data.length;++st){var et=ut.data[st];et.type===1?Er=!0:et.type===2?Kt=!0:et.type===3?rr=!0:et.type===0?(rr=!0,et=et.data,1<=et&&(Kt=!0),2<=et&&(Er=!0)):et.type===4&&(rr=rr||et.data.thisDep,Kt=Kt||et.data.contextDep,Er=Er||et.data.propDep)}return new ne(rr,Kt,Er,ar)}return new ne(rr===3,rr===2,rr===1,ar)}function se(ut,ar,rr,Kt,Er,st,et,ht,vt,kt,Vt,Pe,ke,lt,ft,yt){function Rt(Xt){return Xt.replace(".","_")}function _t(Xt,mr,un){var xn=Rt(Xt);da.push(Xt),qn[xn]=Ln[xn]=!!un,oa[xn]=mr}function Dt(Xt,mr,un){var xn=Rt(Xt);da.push(Xt),Array.isArray(un)?(Ln[xn]=un.slice(),qn[xn]=un.slice()):Ln[xn]=qn[xn]=un,Bn[xn]=mr}function Jt(){var Xt=Y({cache:ft}),mr=Xt.link,un=Xt.global;Xt.id=gi++,Xt.batchId="0";var xn=mr($n),sn=Xt.shared={props:"a0"};Object.keys($n).forEach(function(Ar){sn[Ar]=un.def(xn,".",Ar)});var kn=Xt.next={},Mn=Xt.current={};Object.keys(Bn).forEach(function(Ar){Array.isArray(Ln[Ar])&&(kn[Ar]=un.def(sn.next,".",Ar),Mn[Ar]=un.def(sn.current,".",Ar))});var dn=Xt.constants={};Object.keys(Xa).forEach(function(Ar){dn[Ar]=un.def(JSON.stringify(Xa[Ar]))}),Xt.invoke=function(Ar,Vr){switch(Vr.type){case 0:var _n=["this",sn.context,sn.props,Xt.batchId];return Ar.def(mr(Vr.data),".call(",_n.slice(0,Math.max(Vr.data.length+1,4)),")");case 1:return Ar.def(sn.props,Vr.data);case 2:return Ar.def(sn.context,Vr.data);case 3:return Ar.def("this",Vr.data);case 4:return Vr.data.append(Xt,Ar),Vr.data.ref;case 5:return Vr.data.toString();case 6:return Vr.data.map(function(Gn){return Xt.invoke(Ar,Gn)})}},Xt.attribCache={};var Tr={};return Xt.scopeAttrib=function(Ar){if(Ar=ar.id(Ar),Ar in Tr)return Tr[Ar];var Vr=kt.scope[Ar];return Vr||(Vr=kt.scope[Ar]=new ti),Tr[Ar]=mr(Vr)},Xt}function fr(Xt){var mr=Xt.static;Xt=Xt.dynamic;var un;if("profile"in mr){var xn=!!mr.profile;un=q(function(kn,Mn){return xn}),un.enable=xn}else if("profile"in Xt){var sn=Xt.profile;un=ie(sn,function(kn,Mn){return kn.invoke(Mn,sn)})}return un}function Rr(Xt,mr){var un=Xt.static,xn=Xt.dynamic;if("framebuffer"in un){var sn=un.framebuffer;return sn?(sn=ht.getFramebuffer(sn),q(function(Mn,dn){var Tr=Mn.link(sn),Ar=Mn.shared;return dn.set(Ar.framebuffer,".next",Tr),Ar=Ar.context,dn.set(Ar,".framebufferWidth",Tr+".width"),dn.set(Ar,".framebufferHeight",Tr+".height"),Tr})):q(function(Mn,dn){var Tr=Mn.shared;return dn.set(Tr.framebuffer,".next","null"),Tr=Tr.context,dn.set(Tr,".framebufferWidth",Tr+".drawingBufferWidth"),dn.set(Tr,".framebufferHeight",Tr+".drawingBufferHeight"),"null"})}if("framebuffer"in xn){var kn=xn.framebuffer;return ie(kn,function(Mn,dn){var Vr=Mn.invoke(dn,kn),Tr=Mn.shared,Ar=Tr.framebuffer,Vr=dn.def(Ar,".getFramebuffer(",Vr,")");return dn.set(Ar,".next",Vr),Tr=Tr.context,dn.set(Tr,".framebufferWidth",Vr+"?"+Vr+".width:"+Tr+".drawingBufferWidth"),dn.set(Tr,".framebufferHeight",Vr+"?"+Vr+".height:"+Tr+".drawingBufferHeight"),Vr})}return null}function Sr(Xt,mr,un){function xn(dn){if(dn in sn){var Tr=sn[dn];dn=!0;var Ar=Tr.x|0,Vr=Tr.y|0,_n,Gn;return"width"in Tr?_n=Tr.width|0:dn=!1,"height"in Tr?Gn=Tr.height|0:dn=!1,new ne(!dn&&mr&&mr.thisDep,!dn&&mr&&mr.contextDep,!dn&&mr&&mr.propDep,function(En,ea){var fa=En.shared.context,wa=_n;"width"in Tr||(wa=ea.def(fa,".","framebufferWidth","-",Ar));var Aa=Gn;return"height"in Tr||(Aa=ea.def(fa,".","framebufferHeight","-",Vr)),[Ar,Vr,wa,Aa]})}if(dn in kn){var sa=kn[dn];return dn=ie(sa,function(En,ea){var La=En.invoke(ea,sa),fa=En.shared.context,wa=ea.def(La,".x|0"),Aa=ea.def(La,".y|0"),va=ea.def('"width" in ',La,"?",La,".width|0:","(",fa,".","framebufferWidth","-",wa,")"),La=ea.def('"height" in ',La,"?",La,".height|0:","(",fa,".","framebufferHeight","-",Aa,")");return[wa,Aa,va,La]}),mr&&(dn.thisDep=dn.thisDep||mr.thisDep,dn.contextDep=dn.contextDep||mr.contextDep,dn.propDep=dn.propDep||mr.propDep),dn}return mr?new ne(mr.thisDep,mr.contextDep,mr.propDep,function(En,ea){var fa=En.shared.context;return[0,0,ea.def(fa,".","framebufferWidth"),ea.def(fa,".","framebufferHeight")]}):null}var sn=Xt.static,kn=Xt.dynamic;if(Xt=xn("viewport")){var Mn=Xt;Xt=new ne(Xt.thisDep,Xt.contextDep,Xt.propDep,function(dn,Tr){var Ar=Mn.append(dn,Tr),Vr=dn.shared.context;return Tr.set(Vr,".viewportWidth",Ar[2]),Tr.set(Vr,".viewportHeight",Ar[3]),Ar})}return{viewport:Xt,scissor_box:xn("scissor.box")}}function Pr(Xt,mr){var un=Xt.static;if(typeof un.frag=="string"&&typeof un.vert=="string"){if(0<Object.keys(mr.dynamic).length)return null;var un=mr.static,xn=Object.keys(un);if(0<xn.length&&typeof un[xn[0]]=="number"){for(var sn=[],kn=0;kn<xn.length;++kn)sn.push([un[xn[kn]]|0,xn[kn]]);return sn}}return null}function Jr(Xt,mr,un){function xn(Ar){if(Ar in sn){var Vr=ar.id(sn[Ar]);return Ar=q(function(){return Vr}),Ar.id=Vr,Ar}if(Ar in kn){var _n=kn[Ar];return ie(_n,function(Gn,sa){var En=Gn.invoke(sa,_n);return sa.def(Gn.shared.strings,".id(",En,")")})}return null}var sn=Xt.static,kn=Xt.dynamic,Mn=xn("frag"),dn=xn("vert"),Tr=null;return Z(Mn)&&Z(dn)?(Tr=Vt.program(dn.id,Mn.id,null,un),Xt=q(function(Ar,Vr){return Ar.link(Tr)})):Xt=new ne(Mn&&Mn.thisDep||dn&&dn.thisDep,Mn&&Mn.contextDep||dn&&dn.contextDep,Mn&&Mn.propDep||dn&&dn.propDep,function(Ar,Vr){var _n=Ar.shared.shader,Gn;Gn=Mn?Mn.append(Ar,Vr):Vr.def(_n,".","frag");var sa;return sa=dn?dn.append(Ar,Vr):Vr.def(_n,".","vert"),Vr.def(_n+".program("+sa+","+Gn+")")}),{frag:Mn,vert:dn,progVar:Xt,program:Tr}}function ur(Xt,mr){function un(En,ea){if(En in xn){var fa=xn[En]|0;return ea?kn.offset=fa:kn.instances=fa,q(function(Aa,va){return ea&&(Aa.OFFSET=fa),fa})}if(En in sn){var wa=sn[En];return ie(wa,function(Aa,va){var La=Aa.invoke(va,wa);return ea&&(Aa.OFFSET=La),La})}if(ea){if(Tr)return q(function(Aa,va){return Aa.OFFSET=0});if(Mn)return new ne(dn.thisDep,dn.contextDep,dn.propDep,function(Aa,va){return va.def(Aa.shared.vao+".currentVAO?"+Aa.shared.vao+".currentVAO.offset:0")})}else if(Mn)return new ne(dn.thisDep,dn.contextDep,dn.propDep,function(Aa,va){return va.def(Aa.shared.vao+".currentVAO?"+Aa.shared.vao+".currentVAO.instances:-1")});return null}var xn=Xt.static,sn=Xt.dynamic,kn={},Mn=!1,dn=function(){if("vao"in xn){var En=xn.vao;return En!==null&&kt.getVAO(En)===null&&(En=kt.createVAO(En)),Mn=!0,kn.vao=En,q(function(fa){var wa=kt.getVAO(En);return wa?fa.link(wa):"null"})}if("vao"in sn){Mn=!0;var ea=sn.vao;return ie(ea,function(fa,wa){var Aa=fa.invoke(wa,ea);return wa.def(fa.shared.vao+".getVAO("+Aa+")")})}return null}(),Tr=!1,Ar=function(){if("elements"in xn){var En=xn.elements;if(kn.elements=En,H(En)){var ea=kn.elements=st.create(En,!0),En=st.getElements(ea);Tr=!0}else En&&(En=st.getElements(En),Tr=!0);return ea=q(function(wa,Aa){if(En){var va=wa.link(En);return wa.ELEMENTS=va}return wa.ELEMENTS=null}),ea.value=En,ea}if("elements"in sn){Tr=!0;var fa=sn.elements;return ie(fa,function(wa,Aa){var va=wa.shared,So=va.isBufferArgs,va=va.elements,Jo=wa.invoke(Aa,fa),La=Aa.def("null"),So=Aa.def(So,"(",Jo,")"),Jo=wa.cond(So).then(La,"=",va,".createStream(",Jo,");").else(La,"=",va,".getElements(",Jo,");");return Aa.entry(Jo),Aa.exit(wa.cond(So).then(va,".destroyStream(",La,");")),wa.ELEMENTS=La})}return Mn?new ne(dn.thisDep,dn.contextDep,dn.propDep,function(wa,Aa){return Aa.def(wa.shared.vao+".currentVAO?"+wa.shared.elements+".getElements("+wa.shared.vao+".currentVAO.elements):null")}):null}(),Vr=un("offset",!0),_n=function(){if("primitive"in xn){var En=xn.primitive;return kn.primitive=En,q(function(fa,wa){return je[En]})}if("primitive"in sn){var ea=sn.primitive;return ie(ea,function(fa,wa){var Aa=fa.constants.primTypes,va=fa.invoke(wa,ea);return wa.def(Aa,"[",va,"]")})}return Tr?Z(Ar)?Ar.value?q(function(fa,wa){return wa.def(fa.ELEMENTS,".primType")}):q(function(){return 4}):new ne(Ar.thisDep,Ar.contextDep,Ar.propDep,function(fa,wa){var Aa=fa.ELEMENTS;return wa.def(Aa,"?",Aa,".primType:",4)}):Mn?new ne(dn.thisDep,dn.contextDep,dn.propDep,function(fa,wa){return wa.def(fa.shared.vao+".currentVAO?"+fa.shared.vao+".currentVAO.primitive:4")}):null}(),Gn=function(){if("count"in xn){var En=xn.count|0;return kn.count=En,q(function(){return En})}if("count"in sn){var ea=sn.count;return ie(ea,function(fa,wa){return fa.invoke(wa,ea)})}return Tr?Z(Ar)?Ar?Vr?new ne(Vr.thisDep,Vr.contextDep,Vr.propDep,function(fa,wa){return wa.def(fa.ELEMENTS,".vertCount-",fa.OFFSET)}):q(function(fa,wa){return wa.def(fa.ELEMENTS,".vertCount")}):q(function(){return-1}):new ne(Ar.thisDep||Vr.thisDep,Ar.contextDep||Vr.contextDep,Ar.propDep||Vr.propDep,function(fa,wa){var Aa=fa.ELEMENTS;return fa.OFFSET?wa.def(Aa,"?",Aa,".vertCount-",fa.OFFSET,":-1"):wa.def(Aa,"?",Aa,".vertCount:-1")}):Mn?new ne(dn.thisDep,dn.contextDep,dn.propDep,function(fa,wa){return wa.def(fa.shared.vao,".currentVAO?",fa.shared.vao,".currentVAO.count:-1")}):null}(),sa=un("instances",!1);return{elements:Ar,primitive:_n,count:Gn,instances:sa,offset:Vr,vao:dn,vaoActive:Mn,elementsActive:Tr,static:kn}}function _r(Xt,mr){var un=Xt.static,xn=Xt.dynamic,sn={};return da.forEach(function(kn){function Mn(Tr,Ar){if(kn in un){var Vr=Tr(un[kn]);sn[dn]=q(function(){return Vr})}else if(kn in xn){var _n=xn[kn];sn[dn]=ie(_n,function(Gn,sa){return Ar(Gn,sa,Gn.invoke(sa,_n))})}}var dn=Rt(kn);switch(kn){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":return Mn(function(Tr){return Tr},function(Tr,Ar,Vr){return Vr});case"depth.func":return Mn(function(Tr){return Zt[Tr]},function(Tr,Ar,Vr){return Ar.def(Tr.constants.compareFuncs,"[",Vr,"]")});case"depth.range":return Mn(function(Tr){return Tr},function(Tr,Ar,Vr){return Tr=Ar.def("+",Vr,"[0]"),Ar=Ar.def("+",Vr,"[1]"),[Tr,Ar]});case"blend.func":return Mn(function(Tr){return[Qt["srcRGB"in Tr?Tr.srcRGB:Tr.src],Qt["dstRGB"in Tr?Tr.dstRGB:Tr.dst],Qt["srcAlpha"in Tr?Tr.srcAlpha:Tr.src],Qt["dstAlpha"in Tr?Tr.dstAlpha:Tr.dst]]},function(Tr,Ar,Vr){function _n(ea,fa){return Ar.def('"',ea,fa,'" in ',Vr,"?",Vr,".",ea,fa,":",Vr,".",ea)}Tr=Tr.constants.blendFuncs;var Gn=_n("src","RGB"),En=_n("dst","RGB"),Gn=Ar.def(Tr,"[",Gn,"]"),sa=Ar.def(Tr,"[",_n("src","Alpha"),"]"),En=Ar.def(Tr,"[",En,"]");return Tr=Ar.def(Tr,"[",_n("dst","Alpha"),"]"),[Gn,En,sa,Tr]});case"blend.equation":return Mn(function(Tr){if(typeof Tr=="string")return[$a[Tr],$a[Tr]];if(typeof Tr=="object")return[$a[Tr.rgb],$a[Tr.alpha]]},function(Tr,Ar,Vr){var _n=Tr.constants.blendEquations,Gn=Ar.def(),sa=Ar.def();return Tr=Tr.cond("typeof ",Vr,'==="string"'),Tr.then(Gn,"=",sa,"=",_n,"[",Vr,"];"),Tr.else(Gn,"=",_n,"[",Vr,".rgb];",sa,"=",_n,"[",Vr,".alpha];"),Ar(Tr),[Gn,sa]});case"blend.color":return Mn(function(Tr){return o(4,function(Ar){return+Tr[Ar]})},function(Tr,Ar,Vr){return o(4,function(_n){return Ar.def("+",Vr,"[",_n,"]")})});case"stencil.mask":return Mn(function(Tr){return Tr|0},function(Tr,Ar,Vr){return Ar.def(Vr,"|0")});case"stencil.func":return Mn(function(Tr){return[Zt[Tr.cmp||"keep"],Tr.ref||0,"mask"in Tr?Tr.mask:-1]},function(Tr,Ar,Vr){Tr=Ar.def('"cmp" in ',Vr,"?",Tr.constants.compareFuncs,"[",Vr,".cmp]",":",7680);var _n=Ar.def(Vr,".ref|0");return Ar=Ar.def('"mask" in ',Vr,"?",Vr,".mask|0:-1"),[Tr,_n,Ar]});case"stencil.opFront":case"stencil.opBack":return Mn(function(Tr){return[kn==="stencil.opBack"?1029:1028,cr[Tr.fail||"keep"],cr[Tr.zfail||"keep"],cr[Tr.zpass||"keep"]]},function(Tr,Ar,Vr){function _n(sa){return Ar.def('"',sa,'" in ',Vr,"?",Gn,"[",Vr,".",sa,"]:",7680)}var Gn=Tr.constants.stencilOps;return[kn==="stencil.opBack"?1029:1028,_n("fail"),_n("zfail"),_n("zpass")]});case"polygonOffset.offset":return Mn(function(Tr){return[Tr.factor|0,Tr.units|0]},function(Tr,Ar,Vr){return Tr=Ar.def(Vr,".factor|0"),Ar=Ar.def(Vr,".units|0"),[Tr,Ar]});case"cull.face":return Mn(function(Tr){var Ar=0;return Tr==="front"?Ar=1028:Tr==="back"&&(Ar=1029),Ar},function(Tr,Ar,Vr){return Ar.def(Vr,'==="front"?',1028,":",1029)});case"lineWidth":return Mn(function(Tr){return Tr},function(Tr,Ar,Vr){return Vr});case"frontFace":return Mn(function(Tr){return Xr[Tr]},function(Tr,Ar,Vr){return Ar.def(Vr+'==="cw"?2304:2305')});case"colorMask":return Mn(function(Tr){return Tr.map(function(Ar){return!!Ar})},function(Tr,Ar,Vr){return o(4,function(_n){return"!!"+Vr+"["+_n+"]"})});case"sample.coverage":return Mn(function(Tr){return["value"in Tr?Tr.value:1,!!Tr.invert]},function(Tr,Ar,Vr){return Tr=Ar.def('"value" in ',Vr,"?+",Vr,".value:1"),Ar=Ar.def("!!",Vr,".invert"),[Tr,Ar]})}}),sn}function Br(Xt,mr){var un=Xt.static,xn=Xt.dynamic,sn={};return Object.keys(un).forEach(function(kn){var Mn=un[kn],dn;if(typeof Mn=="number"||typeof Mn=="boolean")dn=q(function(){return Mn});else if(typeof Mn=="function"){var Tr=Mn._reglType;Tr==="texture2d"||Tr==="textureCube"?dn=q(function(Ar){return Ar.link(Mn)}):(Tr==="framebuffer"||Tr==="framebufferCube")&&(dn=q(function(Ar){return Ar.link(Mn.color[0])}))}else b(Mn)&&(dn=q(function(Ar){return Ar.global.def("[",o(Mn.length,function(Vr){return Mn[Vr]}),"]")}));dn.value=Mn,sn[kn]=dn}),Object.keys(xn).forEach(function(kn){var Mn=xn[kn];sn[kn]=ie(Mn,function(dn,Tr){return dn.invoke(Tr,Mn)})}),sn}function Yr(Xt,mr){var un=Xt.static,xn=Xt.dynamic,sn={};return Object.keys(un).forEach(function(kn){var Mn=un[kn],dn=ar.id(kn),Tr=new ti;if(H(Mn))Tr.state=1,Tr.buffer=Er.getBuffer(Er.create(Mn,34962,!1,!0)),Tr.type=0;else{var Ar=Er.getBuffer(Mn);if(Ar)Tr.state=1,Tr.buffer=Ar,Tr.type=0;else if("constant"in Mn){var Vr=Mn.constant;Tr.buffer="null",Tr.state=2,typeof Vr=="number"?Tr.x=Vr:Bt.forEach(function(fa,wa){wa<Vr.length&&(Tr[fa]=Vr[wa])})}else{var Ar=H(Mn.buffer)?Er.getBuffer(Er.create(Mn.buffer,34962,!1,!0)):Er.getBuffer(Mn.buffer),_n=Mn.offset|0,Gn=Mn.stride|0,sa=Mn.size|0,En=!!Mn.normalized,ea=0;"type"in Mn&&(ea=Ce[Mn.type]),Mn=Mn.divisor|0,Tr.buffer=Ar,Tr.state=1,Tr.size=sa,Tr.normalized=En,Tr.type=ea||Ar.dtype,Tr.offset=_n,Tr.stride=Gn,Tr.divisor=Mn}}sn[kn]=q(function(fa,wa){var Aa=fa.attribCache;if(dn in Aa)return Aa[dn];var va={isStream:!1};return Object.keys(Tr).forEach(function(La){va[La]=Tr[La]}),Tr.buffer&&(va.buffer=fa.link(Tr.buffer),va.type=va.type||va.buffer+".dtype"),Aa[dn]=va})}),Object.keys(xn).forEach(function(kn){var Mn=xn[kn];sn[kn]=ie(Mn,function(dn,Tr){function Ar(Aa){Tr(En[Aa],"=",Vr,".",Aa,"|0;")}var Vr=dn.invoke(Tr,Mn),sa=dn.shared,_n=dn.constants,Gn=sa.isBufferArgs,sa=sa.buffer,En={isStream:Tr.def(!1)},ea=new ti;ea.state=1,Object.keys(ea).forEach(function(Aa){En[Aa]=Tr.def(""+ea[Aa])});var fa=En.buffer,wa=En.type;return Tr("if(",Gn,"(",Vr,")){",En.isStream,"=true;",fa,"=",sa,".createStream(",34962,",",Vr,");",wa,"=",fa,".dtype;","}else{",fa,"=",sa,".getBuffer(",Vr,");","if(",fa,"){",wa,"=",fa,".dtype;",'}else if("constant" in ',Vr,"){",En.state,"=",2,";","if(typeof "+Vr+'.constant === "number"){',En[Bt[0]],"=",Vr,".constant;",Bt.slice(1).map(function(Aa){return En[Aa]}).join("="),"=0;","}else{",Bt.map(function(Aa,va){return En[Aa]+"="+Vr+".constant.length>"+va+"?"+Vr+".constant["+va+"]:0;"}).join(""),"}}else{","if(",Gn,"(",Vr,".buffer)){",fa,"=",sa,".createStream(",34962,",",Vr,".buffer);","}else{",fa,"=",sa,".getBuffer(",Vr,".buffer);","}",wa,'="type" in ',Vr,"?",_n.glTypes,"[",Vr,".type]:",fa,".dtype;",En.normalized,"=!!",Vr,".normalized;"),Ar("size"),Ar("offset"),Ar("stride"),Ar("divisor"),Tr("}}"),Tr.exit("if(",En.isStream,"){",sa,".destroyStream(",fa,");","}"),En})}),sn}function Dr(Xt){var mr=Xt.static,un=Xt.dynamic,xn={};return Object.keys(mr).forEach(function(sn){var kn=mr[sn];xn[sn]=q(function(Mn,dn){return typeof kn=="number"||typeof kn=="boolean"?""+kn:Mn.link(kn)})}),Object.keys(un).forEach(function(sn){var kn=un[sn];xn[sn]=ie(kn,function(Mn,dn){return Mn.invoke(dn,kn)})}),xn}function it(Xt,mr,un,xn,sn){function kn(ea){var fa=dn[ea];fa&&(Ar[ea]=fa)}var Mn=Pr(Xt,mr),Gn=Rr(Xt),dn=Sr(Xt,Gn),Tr=ur(Xt),Ar=_r(Xt),Vr=Jr(Xt,sn,Mn);kn("viewport"),kn(Rt("scissor.box"));var _n=0<Object.keys(Ar).length,Gn={framebuffer:Gn,draw:Tr,shader:Vr,state:Ar,dirty:_n,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(Gn.profile=fr(Xt),Gn.uniforms=Br(un),Gn.drawVAO=Gn.scopeVAO=Tr.vao,!Gn.drawVAO&&Vr.program&&!Mn&&rr.angle_instanced_arrays&&Tr.static.elements){var sa=!0;if(Xt=Vr.program.attributes.map(function(ea){return ea=mr.static[ea],sa=sa&&!!ea,ea}),sa&&0<Xt.length){var En=kt.getVAO(kt.createVAO({attributes:Xt,elements:Tr.static.elements}));Gn.drawVAO=new ne(null,null,null,function(ea,fa){return ea.link(En)}),Gn.useVAO=!0}}return Mn?Gn.useVAO=!0:Gn.attributes=Yr(mr),Gn.context=Dr(xn),Gn}function zt(Xt,mr,un){var xn=Xt.shared.context,sn=Xt.scope();Object.keys(un).forEach(function(kn){mr.save(xn,"."+kn);var Mn=un[kn].append(Xt,mr);Array.isArray(Mn)?sn(xn,".",kn,"=[",Mn.join(),"];"):sn(xn,".",kn,"=",Mn,";")}),mr(sn)}function qt(Xt,mr,un,xn){var dn=Xt.shared,sn=dn.gl,kn=dn.framebuffer,Mn;bn&&(Mn=mr.def(dn.extensions,".webgl_draw_buffers"));var Tr=Xt.constants,dn=Tr.drawBuffer,Tr=Tr.backBuffer;Xt=un?un.append(Xt,mr):mr.def(kn,".next"),xn||mr("if(",Xt,"!==",kn,".cur){"),mr("if(",Xt,"){",sn,".bindFramebuffer(",36160,",",Xt,".framebuffer);"),bn&&mr(Mn,".drawBuffersWEBGL(",dn,"[",Xt,".colorAttachments.length]);"),mr("}else{",sn,".bindFramebuffer(",36160,",null);"),bn&&mr(Mn,".drawBuffersWEBGL(",Tr,");"),mr("}",kn,".cur=",Xt,";"),xn||mr("}")}function hr(Xt,mr,un){var xn=Xt.shared,sn=xn.gl,kn=Xt.current,Mn=Xt.next,dn=xn.current,Tr=xn.next,Ar=Xt.cond(dn,".dirty");da.forEach(function(Vr){if(Vr=Rt(Vr),!(Vr in un.state)){var _n,Gn;if(Vr in Mn){_n=Mn[Vr],Gn=kn[Vr];var sa=o(Ln[Vr].length,function(En){return Ar.def(_n,"[",En,"]")});Ar(Xt.cond(sa.map(function(En,ea){return En+"!=="+Gn+"["+ea+"]"}).join("||")).then(sn,".",Bn[Vr],"(",sa,");",sa.map(function(En,ea){return Gn+"["+ea+"]="+En}).join(";"),";"))}else _n=Ar.def(Tr,".",Vr),sa=Xt.cond(_n,"!==",dn,".",Vr),Ar(sa),Vr in oa?sa(Xt.cond(_n).then(sn,".enable(",oa[Vr],");").else(sn,".disable(",oa[Vr],");"),dn,".",Vr,"=",_n,";"):sa(sn,".",Bn[Vr],"(",_n,");",dn,".",Vr,"=",_n,";")}}),Object.keys(un.state).length===0&&Ar(dn,".dirty=false;"),mr(Ar)}function Ur(Xt,mr,un,xn){var sn=Xt.shared,kn=Xt.current,Mn=sn.current,dn=sn.gl,Tr;ee(Object.keys(un)).forEach(function(Ar){var Vr=un[Ar];if(!xn||xn(Vr)){var _n=Vr.append(Xt,mr);if(oa[Ar]){var Gn=oa[Ar];Z(Vr)?(Tr=Xt.link(_n,{stable:!0}),mr(Xt.cond(Tr).then(dn,".enable(",Gn,");").else(dn,".disable(",Gn,");")),mr(Mn,".",Ar,"=",Tr,";")):(mr(Xt.cond(_n).then(dn,".enable(",Gn,");").else(dn,".disable(",Gn,");")),mr(Mn,".",Ar,"=",_n,";"))}else if(b(_n)){var sa=kn[Ar];mr(dn,".",Bn[Ar],"(",_n,");",_n.map(function(En,ea){return sa+"["+ea+"]="+En}).join(";"),";")}else Z(Vr)?(Tr=Xt.link(_n,{stable:!0}),mr(dn,".",Bn[Ar],"(",Tr,");",Mn,".",Ar,"=",Tr,";")):mr(dn,".",Bn[Ar],"(",_n,");",Mn,".",Ar,"=",_n,";")}})}function Gr(Xt,mr){kr&&(Xt.instancing=mr.def(Xt.shared.extensions,".angle_instanced_arrays"))}function Ir(Xt,mr,un,xn,sn){function kn(){return typeof performance>"u"?"Date.now()":"performance.now()"}function Mn(ea){sa=mr.def(),ea(sa,"=",kn(),";"),typeof sn=="string"?ea(Vr,".count+=",sn,";"):ea(Vr,".count++;"),lt&&(xn?(En=mr.def(),ea(En,"=",Gn,".getNumPendingQueries();")):ea(Gn,".beginQuery(",Vr,");"))}function dn(ea){ea(Vr,".cpuTime+=",kn(),"-",sa,";"),lt&&(xn?ea(Gn,".pushScopeStats(",En,",",Gn,".getNumPendingQueries(),",Vr,");"):ea(Gn,".endQuery();"))}function Tr(ea){var fa=mr.def(_n,".profile");mr(_n,".profile=",ea,";"),mr.exit(_n,".profile=",fa,";")}var Ar=Xt.shared,Vr=Xt.stats,_n=Ar.current,Gn=Ar.timer;un=un.profile;var sa,En;if(un){if(Z(un)){un.enable?(Mn(mr),dn(mr.exit),Tr("true")):Tr("false");return}un=un.append(Xt,mr),Tr(un)}else un=mr.def(_n,".profile");Ar=Xt.block(),Mn(Ar),mr("if(",un,"){",Ar,"}"),Xt=Xt.block(),dn(Xt),mr.exit("if(",un,"){",Xt,"}")}function Cr(Xt,mr,un,xn,sn){function kn(Tr){switch(Tr){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function Mn(Tr,Ar,Vr){function _n(){mr("if(!",ea,".buffer){",sa,".enableVertexAttribArray(",En,");}");var va=Vr.type,La;La=Vr.size?mr.def(Vr.size,"||",Ar):Ar,mr("if(",ea,".type!==",va,"||",ea,".size!==",La,"||",Aa.map(function(So){return ea+"."+So+"!=="+Vr[So]}).join("||"),"){",sa,".bindBuffer(",34962,",",fa,".buffer);",sa,".vertexAttribPointer(",[En,La,va,Vr.normalized,Vr.stride,Vr.offset],");",ea,".type=",va,";",ea,".size=",La,";",Aa.map(function(So){return ea+"."+So+"="+Vr[So]+";"}).join(""),"}"),kr&&(va=Vr.divisor,mr("if(",ea,".divisor!==",va,"){",Xt.instancing,".vertexAttribDivisorANGLE(",[En,va],");",ea,".divisor=",va,";}"))}function Gn(){mr("if(",ea,".buffer){",sa,".disableVertexAttribArray(",En,");",ea,".buffer=null;","}if(",Bt.map(function(va,La){return ea+"."+va+"!=="+wa[La]}).join("||"),"){",sa,".vertexAttrib4f(",En,",",wa,");",Bt.map(function(va,La){return ea+"."+va+"="+wa[La]+";"}).join(""),"}")}var sa=dn.gl,En=mr.def(Tr,".location"),ea=mr.def(dn.attributes,"[",En,"]");Tr=Vr.state;var fa=Vr.buffer,wa=[Vr.x,Vr.y,Vr.z,Vr.w],Aa=["buffer","normalized","offset","stride"];Tr===1?_n():Tr===2?Gn():(mr("if(",Tr,"===",1,"){"),_n(),mr("}else{"),Gn(),mr("}"))}var dn=Xt.shared;xn.forEach(function(Tr){var Ar=Tr.name,Vr=un.attributes[Ar],_n;if(Vr){if(!sn(Vr))return;_n=Vr.append(Xt,mr)}else{if(!sn(vn))return;var Gn=Xt.scopeAttrib(Ar);_n={},Object.keys(new ti).forEach(function(sa){_n[sa]=mr.def(Gn,".",sa)})}Mn(Xt.link(Tr),kn(Tr.info.type),_n)})}function Kr(Xt,mr,un,xn,sn,kn){for(var Mn=Xt.shared,dn=Mn.gl,Tr,Ar=0;Ar<xn.length;++Ar){var sa=xn[Ar],Vr=sa.name,_n=sa.info.type,Gn=un.uniforms[Vr],sa=Xt.link(sa)+".location",En;if(Gn){if(!sn(Gn))continue;if(Z(Gn)){if(Vr=Gn.value,_n===35678||_n===35680)_n=Xt.link(Vr._texture||Vr.color[0]._texture),mr(dn,".uniform1i(",sa,",",_n+".bind());"),mr.exit(_n,".unbind();");else if(_n===35674||_n===35675||_n===35676)Vr=Xt.global.def("new Float32Array(["+Array.prototype.slice.call(Vr)+"])"),Gn=2,_n===35675?Gn=3:_n===35676&&(Gn=4),mr(dn,".uniformMatrix",Gn,"fv(",sa,",false,",Vr,");");else{switch(_n){case 5126:Tr="1f";break;case 35664:Tr="2f";break;case 35665:Tr="3f";break;case 35666:Tr="4f";break;case 35670:Tr="1i";break;case 5124:Tr="1i";break;case 35671:Tr="2i";break;case 35667:Tr="2i";break;case 35672:Tr="3i";break;case 35668:Tr="3i";break;case 35673:Tr="4i";break;case 35669:Tr="4i"}mr(dn,".uniform",Tr,"(",sa,",",b(Vr)?Array.prototype.slice.call(Vr):Vr,");")}continue}else En=Gn.append(Xt,mr)}else{if(!sn(vn))continue;En=mr.def(Mn.uniforms,"[",ar.id(Vr),"]")}switch(_n===35678?mr("if(",En,"&&",En,'._reglType==="framebuffer"){',En,"=",En,".color[0];","}"):_n===35680&&mr("if(",En,"&&",En,'._reglType==="framebufferCube"){',En,"=",En,".color[0];","}"),Vr=1,_n){case 35678:case 35680:_n=mr.def(En,"._texture"),mr(dn,".uniform1i(",sa,",",_n,".bind());"),mr.exit(_n,".unbind();");continue;case 5124:case 35670:Tr="1i";break;case 35667:case 35671:Tr="2i",Vr=2;break;case 35668:case 35672:Tr="3i",Vr=3;break;case 35669:case 35673:Tr="4i",Vr=4;break;case 5126:Tr="1f";break;case 35664:Tr="2f",Vr=2;break;case 35665:Tr="3f",Vr=3;break;case 35666:Tr="4f",Vr=4;break;case 35674:Tr="Matrix2fv";break;case 35675:Tr="Matrix3fv";break;case 35676:Tr="Matrix4fv"}if(Tr.charAt(0)==="M"){mr(dn,".uniform",Tr,"(",sa,",");var sa=Math.pow(_n-35674+2,2),ea=Xt.global.def("new Float32Array(",sa,")");Array.isArray(En)?mr("false,(",o(sa,function(Aa){return ea+"["+Aa+"]="+En[Aa]}),",",ea,")"):mr("false,(Array.isArray(",En,")||",En," instanceof Float32Array)?",En,":(",o(sa,function(Aa){return ea+"["+Aa+"]="+En+"["+Aa+"]"}),",",ea,")"),mr(");")}else{if(1<Vr){for(var _n=[],fa=[],Gn=0;Gn<Vr;++Gn)Array.isArray(En)?fa.push(En[Gn]):fa.push(mr.def(En+"["+Gn+"]")),kn&&_n.push(mr.def());kn&&mr("if(!",Xt.batchId,"||",_n.map(function(wa,Aa){return wa+"!=="+fa[Aa]}).join("||"),"){",_n.map(function(wa,Aa){return wa+"="+fa[Aa]+";"}).join("")),mr(dn,".uniform",Tr,"(",sa,",",fa.join(","),");")}else kn&&(_n=mr.def(),mr("if(!",Xt.batchId,"||",_n,"!==",En,"){",_n,"=",En,";")),mr(dn,".uniform",Tr,"(",sa,",",En,");");kn&&mr("}")}}}function Cn(Xt,mr,un,xn){function sn(va){var La=Vr[va];return La?La.contextDep&&xn.contextDynamic||La.propDep?La.append(Xt,un):La.append(Xt,mr):mr.def(Ar,".",va)}function kn(){function va(){un(fa,".drawElementsInstancedANGLE(",[Gn,En,wa,sa+"<<(("+wa+"-5121)>>1)",ea],");")}function La(){un(fa,".drawArraysInstancedANGLE(",[Gn,sa,En,ea],");")}_n&&_n!=="null"?Aa?va():(un("if(",_n,"){"),va(),un("}else{"),La(),un("}")):La()}function Mn(){function va(){un(Tr+".drawElements("+[Gn,En,wa,sa+"<<(("+wa+"-5121)>>1)"]+");")}function La(){un(Tr+".drawArrays("+[Gn,sa,En]+");")}_n&&_n!=="null"?Aa?va():(un("if(",_n,"){"),va(),un("}else{"),La(),un("}")):La()}var dn=Xt.shared,Tr=dn.gl,Ar=dn.draw,Vr=xn.draw,_n=function(){var va=Vr.elements,La=mr;return va?((va.contextDep&&xn.contextDynamic||va.propDep)&&(La=un),va=va.append(Xt,La),Vr.elementsActive&&La("if("+va+")"+Tr+".bindBuffer(34963,"+va+".buffer.buffer);")):(va=La.def(),La(va,"=",Ar,".","elements",";","if(",va,"){",Tr,".bindBuffer(",34963,",",va,".buffer.buffer);}","else if(",dn.vao,".currentVAO){",va,"=",Xt.shared.elements+".getElements("+dn.vao,".currentVAO.elements);",gn?"":"if("+va+")"+Tr+".bindBuffer(34963,"+va+".buffer.buffer);","}")),va}(),Gn=sn("primitive"),sa=sn("offset"),En=function(){var va=Vr.count,La=mr;return va?((va.contextDep&&xn.contextDynamic||va.propDep)&&(La=un),va=va.append(Xt,La)):va=La.def(Ar,".","count"),va}();if(typeof En=="number"){if(En===0)return}else un("if(",En,"){"),un.exit("}");var ea,fa;kr&&(ea=sn("instances"),fa=Xt.instancing);var wa=_n+".type",Aa=Vr.elements&&Z(Vr.elements)&&!Vr.vaoActive;kr&&(typeof ea!="number"||0<=ea)?typeof ea=="string"?(un("if(",ea,">0){"),kn(),un("}else if(",ea,"<0){"),Mn(),un("}")):kn():Mn()}function yn(Xt,mr,un,xn,sn){return mr=Jt(),sn=mr.proc("body",sn),kr&&(mr.instancing=sn.def(mr.shared.extensions,".angle_instanced_arrays")),Xt(mr,sn,un,xn),mr.compile().body}function Yn(Xt,mr,un,xn){Gr(Xt,mr),un.useVAO?un.drawVAO?mr(Xt.shared.vao,".setVAO(",un.drawVAO.append(Xt,mr),");"):mr(Xt.shared.vao,".setVAO(",Xt.shared.vao,".targetVAO);"):(mr(Xt.shared.vao,".setVAO(null);"),Cr(Xt,mr,un,xn.attributes,function(){return!0})),Kr(Xt,mr,un,xn.uniforms,function(){return!0},!1),Cn(Xt,mr,mr,un)}function In(Xt,mr){var un=Xt.proc("draw",1);Gr(Xt,un),zt(Xt,un,mr.context),qt(Xt,un,mr.framebuffer),hr(Xt,un,mr),Ur(Xt,un,mr.state),Ir(Xt,un,mr,!1,!0);var xn=mr.shader.progVar.append(Xt,un);if(un(Xt.shared.gl,".useProgram(",xn,".program);"),mr.shader.program)Yn(Xt,un,mr,mr.shader.program);else{un(Xt.shared.vao,".setVAO(null);");var sn=Xt.global.def("{}"),kn=un.def(xn,".id"),Mn=un.def(sn,"[",kn,"]");un(Xt.cond(Mn).then(Mn,".call(this,a0);").else(Mn,"=",sn,"[",kn,"]=",Xt.link(function(dn){return yn(Yn,Xt,mr,dn,1)}),"(",xn,");",Mn,".call(this,a0);"))}0<Object.keys(mr.state).length&&un(Xt.shared.current,".dirty=true;"),Xt.shared.vao&&un(Xt.shared.vao,".setVAO(null);")}function Jn(Xt,mr,un,xn){function sn(){return!0}Xt.batchId="a1",Gr(Xt,mr),Cr(Xt,mr,un,xn.attributes,sn),Kr(Xt,mr,un,xn.uniforms,sn,!1),Cn(Xt,mr,mr,un)}function Zn(Xt,mr,un,xn){function sn(_n){return _n.contextDep&&Mn||_n.propDep}function kn(_n){return!sn(_n)}Gr(Xt,mr);var Mn=un.contextDep,dn=mr.def(),Tr=mr.def();Xt.shared.props=Tr,Xt.batchId=dn;var Ar=Xt.scope(),Vr=Xt.scope();mr(Ar.entry,"for(",dn,"=0;",dn,"<","a1",";++",dn,"){",Tr,"=","a0","[",dn,"];",Vr,"}",Ar.exit),un.needsContext&&zt(Xt,Vr,un.context),un.needsFramebuffer&&qt(Xt,Vr,un.framebuffer),Ur(Xt,Vr,un.state,sn),un.profile&&sn(un.profile)&&Ir(Xt,Vr,un,!1,!0),xn?(un.useVAO?un.drawVAO?sn(un.drawVAO)?Vr(Xt.shared.vao,".setVAO(",un.drawVAO.append(Xt,Vr),");"):Ar(Xt.shared.vao,".setVAO(",un.drawVAO.append(Xt,Ar),");"):Ar(Xt.shared.vao,".setVAO(",Xt.shared.vao,".targetVAO);"):(Ar(Xt.shared.vao,".setVAO(null);"),Cr(Xt,Ar,un,xn.attributes,kn),Cr(Xt,Vr,un,xn.attributes,sn)),Kr(Xt,Ar,un,xn.uniforms,kn,!1),Kr(Xt,Vr,un,xn.uniforms,sn,!0),Cn(Xt,Ar,Vr,un)):(mr=Xt.global.def("{}"),xn=un.shader.progVar.append(Xt,Vr),Tr=Vr.def(xn,".id"),Ar=Vr.def(mr,"[",Tr,"]"),Vr(Xt.shared.gl,".useProgram(",xn,".program);","if(!",Ar,"){",Ar,"=",mr,"[",Tr,"]=",Xt.link(function(_n){return yn(Jn,Xt,un,_n,2)}),"(",xn,");}",Ar,".call(this,a0[",dn,"],",dn,");"))}function ba(Xt,mr){function un(Ar){return Ar.contextDep&&sn||Ar.propDep}var xn=Xt.proc("batch",2);Xt.batchId="0",Gr(Xt,xn);var sn=!1,kn=!0;Object.keys(mr.context).forEach(function(Ar){sn=sn||mr.context[Ar].propDep}),sn||(zt(Xt,xn,mr.context),kn=!1);var Mn=mr.framebuffer,dn=!1;if(Mn?(Mn.propDep?sn=dn=!0:Mn.contextDep&&sn&&(dn=!0),dn||qt(Xt,xn,Mn)):qt(Xt,xn,null),mr.state.viewport&&mr.state.viewport.propDep&&(sn=!0),hr(Xt,xn,mr),Ur(Xt,xn,mr.state,function(Ar){return!un(Ar)}),mr.profile&&un(mr.profile)||Ir(Xt,xn,mr,!1,"a1"),mr.contextDep=sn,mr.needsContext=kn,mr.needsFramebuffer=dn,kn=mr.shader.progVar,kn.contextDep&&sn||kn.propDep)Zn(Xt,xn,mr,null);else if(kn=kn.append(Xt,xn),xn(Xt.shared.gl,".useProgram(",kn,".program);"),mr.shader.program)Zn(Xt,xn,mr,mr.shader.program);else{xn(Xt.shared.vao,".setVAO(null);");var Mn=Xt.global.def("{}"),dn=xn.def(kn,".id"),Tr=xn.def(Mn,"[",dn,"]");xn(Xt.cond(Tr).then(Tr,".call(this,a0,a1);").else(Tr,"=",Mn,"[",dn,"]=",Xt.link(function(_n){return yn(Zn,Xt,mr,_n,2)}),"(",kn,");",Tr,".call(this,a0,a1);"))}0<Object.keys(mr.state).length&&xn(Xt.shared.current,".dirty=true;"),Xt.shared.vao&&xn(Xt.shared.vao,".setVAO(null);")}function Pa(Xt,mr){function un(dn){var Tr=mr.shader[dn];Tr&&(Tr=Tr.append(Xt,xn),isNaN(Tr)?xn.set(sn.shader,"."+dn,Tr):xn.set(sn.shader,"."+dn,Xt.link(Tr,{stable:!0})))}var xn=Xt.proc("scope",3);Xt.batchId="a2";var sn=Xt.shared,kn=sn.current;if(zt(Xt,xn,mr.context),mr.framebuffer&&mr.framebuffer.append(Xt,xn),ee(Object.keys(mr.state)).forEach(function(dn){var Tr=mr.state[dn],Ar=Tr.append(Xt,xn);b(Ar)?Ar.forEach(function(Vr,_n){isNaN(Vr)?xn.set(Xt.next[dn],"["+_n+"]",Vr):xn.set(Xt.next[dn],"["+_n+"]",Xt.link(Vr,{stable:!0}))}):Z(Tr)?xn.set(sn.next,"."+dn,Xt.link(Ar,{stable:!0})):xn.set(sn.next,"."+dn,Ar)}),Ir(Xt,xn,mr,!0,!0),["elements","offset","count","instances","primitive"].forEach(function(dn){var Tr=mr.draw[dn];Tr&&(Tr=Tr.append(Xt,xn),isNaN(Tr)?xn.set(sn.draw,"."+dn,Tr):xn.set(sn.draw,"."+dn,Xt.link(Tr),{stable:!0}))}),Object.keys(mr.uniforms).forEach(function(dn){var Tr=mr.uniforms[dn].append(Xt,xn);Array.isArray(Tr)&&(Tr="["+Tr.map(function(Ar){return isNaN(Ar)?Ar:Xt.link(Ar,{stable:!0})})+"]"),xn.set(sn.uniforms,"["+Xt.link(ar.id(dn),{stable:!0})+"]",Tr)}),Object.keys(mr.attributes).forEach(function(dn){var Tr=mr.attributes[dn].append(Xt,xn),Ar=Xt.scopeAttrib(dn);Object.keys(new ti).forEach(function(Vr){xn.set(Ar,"."+Vr,Tr[Vr])})}),mr.scopeVAO){var Mn=mr.scopeVAO.append(Xt,xn);isNaN(Mn)?xn.set(sn.vao,".targetVAO",Mn):xn.set(sn.vao,".targetVAO",Xt.link(Mn,{stable:!0}))}un("vert"),un("frag"),0<Object.keys(mr.state).length&&(xn(kn,".dirty=true;"),xn.exit(kn,".dirty=true;")),xn("a1(",Xt.shared.context,",a0,",Xt.batchId,");")}function xi(Xt){if(typeof Xt=="object"&&!b(Xt)){for(var mr=Object.keys(Xt),un=0;un<mr.length;++un)if(ce.isDynamic(Xt[mr[un]]))return!0;return!1}}function Ka(Xt,mr,un){function xn(_n,Gn){Mn.forEach(function(sa){var En=sn[sa];ce.isDynamic(En)&&(En=_n.invoke(Gn,En),Gn(Vr,".",sa,"=",En,";"))})}var sn=mr.static[un];if(sn&&xi(sn)){var kn=Xt.global,Mn=Object.keys(sn),dn=!1,Tr=!1,Ar=!1,Vr=Xt.global.def("{}");Mn.forEach(function(_n){var Gn=sn[_n];if(ce.isDynamic(Gn))typeof Gn=="function"&&(Gn=sn[_n]=ce.unbox(Gn)),_n=ie(Gn,null),dn=dn||_n.thisDep,Ar=Ar||_n.propDep,Tr=Tr||_n.contextDep;else{switch(kn(Vr,".",_n,"="),typeof Gn){case"number":kn(Gn);break;case"string":kn('"',Gn,'"');break;case"object":Array.isArray(Gn)&&kn("[",Gn.join(),"]");break;default:kn(Xt.link(Gn))}kn(";")}}),mr.dynamic[un]=new ce.DynamicVariable(4,{thisDep:dn,contextDep:Tr,propDep:Ar,ref:Vr,append:xn}),delete mr.static[un]}}var ti=kt.Record,$a={add:32774,subtract:32778,"reverse subtract":32779};rr.ext_blend_minmax&&($a.min=32775,$a.max=32776);var kr=rr.angle_instanced_arrays,bn=rr.webgl_draw_buffers,gn=rr.oes_vertex_array_object,Ln={dirty:!0,profile:yt.profile},qn={},da=[],oa={},Bn={};_t("dither",3024),_t("blend.enable",3042),Dt("blend.color","blendColor",[0,0,0,0]),Dt("blend.equation","blendEquationSeparate",[32774,32774]),Dt("blend.func","blendFuncSeparate",[1,0,1,0]),_t("depth.enable",2929,!0),Dt("depth.func","depthFunc",513),Dt("depth.range","depthRange",[0,1]),Dt("depth.mask","depthMask",!0),Dt("colorMask","colorMask",[!0,!0,!0,!0]),_t("cull.enable",2884),Dt("cull.face","cullFace",1029),Dt("frontFace","frontFace",2305),Dt("lineWidth","lineWidth",1),_t("polygonOffset.enable",32823),Dt("polygonOffset.offset","polygonOffset",[0,0]),_t("sample.alpha",32926),_t("sample.enable",32928),Dt("sample.coverage","sampleCoverage",[1,!1]),_t("stencil.enable",2960),Dt("stencil.mask","stencilMask",-1),Dt("stencil.func","stencilFunc",[519,0,-1]),Dt("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),Dt("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),_t("scissor.enable",3089),Dt("scissor.box","scissor",[0,0,ut.drawingBufferWidth,ut.drawingBufferHeight]),Dt("viewport","viewport",[0,0,ut.drawingBufferWidth,ut.drawingBufferHeight]);var $n={gl:ut,context:ke,strings:ar,next:qn,current:Ln,draw:Pe,elements:st,buffer:Er,shader:Vt,attributes:kt.state,vao:kt,uniforms:vt,framebuffer:ht,extensions:rr,timer:lt,isBufferArgs:H},Xa={primTypes:je,compareFuncs:Zt,blendFuncs:Qt,blendEquations:$a,stencilOps:cr,glTypes:Ce,orientationType:Xr};bn&&(Xa.backBuffer=[1029],Xa.drawBuffer=o(Kt.maxDrawbuffers,function(Xt){return Xt===0?[0]:o(Xt,function(mr){return 36064+mr})}));var gi=0;return{next:qn,current:Ln,procs:function(){var Xt=Jt(),mr=Xt.proc("poll"),un=Xt.proc("refresh"),xn=Xt.block();mr(xn),un(xn);var Tr=Xt.shared,sn=Tr.gl,kn=Tr.next,Mn=Tr.current;xn(Mn,".dirty=false;"),qt(Xt,mr),qt(Xt,un,null,!0);var dn;kr&&(dn=Xt.link(kr)),rr.oes_vertex_array_object&&un(Xt.link(rr.oes_vertex_array_object),".bindVertexArrayOES(null);");var Tr=un.def(Tr.attributes),Ar=un.def(0),Vr=Xt.cond(Ar,".buffer");Vr.then(sn,".enableVertexAttribArray(i);",sn,".bindBuffer(",34962,",",Ar,".buffer.buffer);",sn,".vertexAttribPointer(i,",Ar,".size,",Ar,".type,",Ar,".normalized,",Ar,".stride,",Ar,".offset);").else(sn,".disableVertexAttribArray(i);",sn,".vertexAttrib4f(i,",Ar,".x,",Ar,".y,",Ar,".z,",Ar,".w);",Ar,".buffer=null;");var _n=Xt.link(Kt.maxAttributes,{stable:!0});return un("for(var i=0;i<",_n,";++i){",Ar,"=",Tr,"[i];",Vr,"}"),kr&&un("for(var i=0;i<",_n,";++i){",dn,".vertexAttribDivisorANGLE(i,",Tr,"[i].divisor);","}"),un(Xt.shared.vao,".currentVAO=null;",Xt.shared.vao,".setVAO(",Xt.shared.vao,".targetVAO);"),Object.keys(oa).forEach(function(Gn){var sa=oa[Gn],En=xn.def(kn,".",Gn),ea=Xt.block();ea("if(",En,"){",sn,".enable(",sa,")}else{",sn,".disable(",sa,")}",Mn,".",Gn,"=",En,";"),un(ea),mr("if(",En,"!==",Mn,".",Gn,"){",ea,"}")}),Object.keys(Bn).forEach(function(Gn){var sa=Bn[Gn],En=Ln[Gn],ea,fa,wa=Xt.block();wa(sn,".",sa,"("),b(En)?(sa=En.length,ea=Xt.global.def(kn,".",Gn),fa=Xt.global.def(Mn,".",Gn),wa(o(sa,function(Aa){return ea+"["+Aa+"]"}),");",o(sa,function(Aa){return fa+"["+Aa+"]="+ea+"["+Aa+"];"}).join("")),mr("if(",o(sa,function(Aa){return ea+"["+Aa+"]!=="+fa+"["+Aa+"]"}).join("||"),"){",wa,"}")):(ea=xn.def(kn,".",Gn),fa=xn.def(Mn,".",Gn),wa(ea,");",Mn,".",Gn,"=",ea,";"),mr("if(",ea,"!==",fa,"){",wa,"}")),un(wa)}),Xt.compile()}(),compile:function(Xt,mr,un,xn,sn){var kn=Jt();kn.stats=kn.link(sn),Object.keys(mr.static).forEach(function(dn){Ka(kn,mr,dn)}),Wt.forEach(function(dn){Ka(kn,Xt,dn)});var Mn=it(Xt,mr,un,xn,kn);return Mn.shader.program&&(Mn.shader.program.attributes.sort(function(dn,Tr){return dn.name<Tr.name?-1:1}),Mn.shader.program.uniforms.sort(function(dn,Tr){return dn.name<Tr.name?-1:1})),In(kn,Mn),Pa(kn,Mn),ba(kn,Mn),oe(kn.compile(),{destroy:function(){Mn.shader.program.destroy()}})}}}function ae(ut,ar){for(var rr=0;rr<ut.length;++rr)if(ut[rr]===ar)return rr;return-1}var oe=function(ut,ar){for(var rr=Object.keys(ar),Kt=0;Kt<rr.length;++Kt)ut[rr[Kt]]=ar[rr[Kt]];return ut},be=0,ce={DynamicVariable:w,define:function(ut,ar){return new w(ut,M(ar+""))},isDynamic:function(ut){return typeof ut=="function"&&!ut._reglType||ut instanceof w},unbox:T,accessor:M},de={next:typeof requestAnimationFrame=="function"?function(ut){return requestAnimationFrame(ut)}:function(ut){return setTimeout(ut,16)},cancel:typeof cancelAnimationFrame=="function"?function(ut){return cancelAnimationFrame(ut)}:clearTimeout},ye=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date},ge=d();ge.zero=d();var me=function(ut,ar){var rr=1;ar.ext_texture_filter_anisotropic&&(rr=ut.getParameter(34047));var Kt=1,Er=1;ar.webgl_draw_buffers&&(Kt=ut.getParameter(34852),Er=ut.getParameter(36063));var st=!!ar.oes_texture_float;if(st){st=ut.createTexture(),ut.bindTexture(3553,st),ut.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var et=ut.createFramebuffer();if(ut.bindFramebuffer(36160,et),ut.framebufferTexture2D(36160,36064,3553,st,0),ut.bindTexture(3553,null),ut.checkFramebufferStatus(36160)!==36053)st=!1;else{ut.viewport(0,0,1,1),ut.clearColor(1,0,0,1),ut.clear(16384);var ht=ge.allocType(5126,4);ut.readPixels(0,0,1,1,6408,5126,ht),ut.getError()?st=!1:(ut.deleteFramebuffer(et),ut.deleteTexture(st),st=ht[0]===1),ge.freeType(ht)}}return ht=!0,typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(ht=ut.createTexture(),et=ge.allocType(5121,36),ut.activeTexture(33984),ut.bindTexture(34067,ht),ut.texImage2D(34069,0,6408,3,3,0,6408,5121,et),ge.freeType(et),ut.bindTexture(34067,null),ut.deleteTexture(ht),ht=!ut.getError()),{colorBits:[ut.getParameter(3410),ut.getParameter(3411),ut.getParameter(3412),ut.getParameter(3413)],depthBits:ut.getParameter(3414),stencilBits:ut.getParameter(3415),subpixelBits:ut.getParameter(3408),extensions:Object.keys(ar).filter(function(vt){return!!ar[vt]}),maxAnisotropic:rr,maxDrawbuffers:Kt,maxColorAttachments:Er,pointSizeDims:ut.getParameter(33901),lineWidthDims:ut.getParameter(33902),maxViewportDims:ut.getParameter(3386),maxCombinedTextureUnits:ut.getParameter(35661),maxCubeMapSize:ut.getParameter(34076),maxRenderbufferSize:ut.getParameter(34024),maxTextureUnits:ut.getParameter(34930),maxTextureSize:ut.getParameter(3379),maxAttributes:ut.getParameter(34921),maxVertexUniforms:ut.getParameter(36347),maxVertexTextureUnits:ut.getParameter(35660),maxVaryingVectors:ut.getParameter(36348),maxFragmentUniforms:ut.getParameter(36349),glsl:ut.getParameter(35724),renderer:ut.getParameter(7937),vendor:ut.getParameter(7936),version:ut.getParameter(7938),readFloat:st,npotTextureCube:ht}},Se=function(ut){return ut instanceof Uint8Array||ut instanceof Uint16Array||ut instanceof Uint32Array||ut instanceof Int8Array||ut instanceof Int16Array||ut instanceof Int32Array||ut instanceof Float32Array||ut instanceof Float64Array||ut instanceof Uint8ClampedArray},Le=function(ut){return Object.keys(ut).map(function(ar){return ut[ar]})},Oe={shape:function(ut){for(var ar=[];ut.length;ut=ut[0])ar.push(ut.length);return ar},flatten:function(ut,ar,rr,Kt){var Er=1;if(ar.length)for(var st=0;st<ar.length;++st)Er*=ar[st];else Er=0;switch(rr=Kt||ge.allocType(rr,Er),ar.length){case 0:break;case 1:for(Kt=ar[0],ar=0;ar<Kt;++ar)rr[ar]=ut[ar];break;case 2:for(Kt=ar[0],ar=ar[1],st=Er=0;st<Kt;++st)for(var et=ut[st],ht=0;ht<ar;++ht)rr[Er++]=et[ht];break;case 3:c(ut,ar[0],ar[1],ar[2],rr,0);break;default:m(ut,ar,0,rr,0)}return rr}},we={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Ce={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},Ke={dynamic:35048,stream:35040,static:35044},Ye=Oe.flatten,Fe=Oe.shape,Re=[];Re[5120]=1,Re[5122]=2,Re[5124]=4,Re[5121]=1,Re[5123]=2,Re[5125]=4,Re[5126]=4;var je={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},xt=new Float32Array(1),Nt=new Uint32Array(xt.buffer),tr=[9984,9986,9985,9987],Ht=[0,6409,6410,6407,6408],Pt={};Pt[6409]=Pt[6406]=Pt[6402]=1,Pt[34041]=Pt[6410]=2,Pt[6407]=Pt[35904]=3,Pt[6408]=Pt[35906]=4;var $t=v("HTMLCanvasElement"),Ut=v("OffscreenCanvas"),Lt=v("CanvasRenderingContext2D"),We=v("ImageBitmap"),ot=v("HTMLImageElement"),Ge=v("HTMLVideoElement"),Me=Object.keys(we).concat([$t,Ut,Lt,We,ot,Ge]),Ve=[];Ve[5121]=1,Ve[5126]=4,Ve[36193]=2,Ve[5123]=2,Ve[5125]=4;var Qe=[];Qe[32854]=2,Qe[32855]=2,Qe[36194]=2,Qe[34041]=4,Qe[33776]=.5,Qe[33777]=.5,Qe[33778]=1,Qe[33779]=1,Qe[35986]=.5,Qe[35987]=1,Qe[34798]=1,Qe[35840]=.5,Qe[35841]=.25,Qe[35842]=.5,Qe[35843]=.25,Qe[36196]=.5;var tt=[];tt[32854]=2,tt[32855]=2,tt[36194]=2,tt[33189]=2,tt[36168]=1,tt[34041]=4,tt[35907]=4,tt[34836]=16,tt[34842]=8,tt[34843]=6;var St=function(ut,ar,rr,Kt,Er){function st(Pe){this.id=kt++,this.refCount=1,this.renderbuffer=Pe,this.format=32854,this.height=this.width=0,Er.profile&&(this.stats={size:0})}function et(Pe){var ke=Pe.renderbuffer;ut.bindRenderbuffer(36161,null),ut.deleteRenderbuffer(ke),Pe.renderbuffer=null,Pe.refCount=0,delete Vt[Pe.id],Kt.renderbufferCount--}var ht={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};ar.ext_srgb&&(ht.srgba=35907),ar.ext_color_buffer_half_float&&(ht.rgba16f=34842,ht.rgb16f=34843),ar.webgl_color_buffer_float&&(ht.rgba32f=34836);var vt=[];Object.keys(ht).forEach(function(Pe){vt[ht[Pe]]=Pe});var kt=0,Vt={};return st.prototype.decRef=function(){0>=--this.refCount&&et(this)},Er.profile&&(Kt.getTotalRenderbufferSize=function(){var Pe=0;return Object.keys(Vt).forEach(function(ke){Pe+=Vt[ke].stats.size}),Pe}),{create:function(Pe,ke){function lt(yt,Rt){var _t=0,Dt=0,Jt=32854;if(typeof yt=="object"&&yt?("shape"in yt?(Dt=yt.shape,_t=Dt[0]|0,Dt=Dt[1]|0):("radius"in yt&&(_t=Dt=yt.radius|0),"width"in yt&&(_t=yt.width|0),"height"in yt&&(Dt=yt.height|0)),"format"in yt&&(Jt=ht[yt.format])):typeof yt=="number"?(_t=yt|0,Dt=typeof Rt=="number"?Rt|0:_t):yt||(_t=Dt=1),_t!==ft.width||Dt!==ft.height||Jt!==ft.format)return lt.width=ft.width=_t,lt.height=ft.height=Dt,ft.format=Jt,ut.bindRenderbuffer(36161,ft.renderbuffer),ut.renderbufferStorage(36161,Jt,_t,Dt),Er.profile&&(ft.stats.size=tt[ft.format]*ft.width*ft.height),lt.format=vt[ft.format],lt}var ft=new st(ut.createRenderbuffer());return Vt[ft.id]=ft,Kt.renderbufferCount++,lt(Pe,ke),lt.resize=function(yt,Rt){var _t=yt|0,Dt=Rt|0||_t;return _t===ft.width&&Dt===ft.height||(lt.width=ft.width=_t,lt.height=ft.height=Dt,ut.bindRenderbuffer(36161,ft.renderbuffer),ut.renderbufferStorage(36161,ft.format,_t,Dt),Er.profile&&(ft.stats.size=tt[ft.format]*ft.width*ft.height)),lt},lt._reglType="renderbuffer",lt._renderbuffer=ft,Er.profile&&(lt.stats=ft.stats),lt.destroy=function(){ft.decRef()},lt},clear:function(){Le(Vt).forEach(et)},restore:function(){Le(Vt).forEach(function(Pe){Pe.renderbuffer=ut.createRenderbuffer(),ut.bindRenderbuffer(36161,Pe.renderbuffer),ut.renderbufferStorage(36161,Pe.format,Pe.width,Pe.height)}),ut.bindRenderbuffer(36161,null)}}},wt=[];wt[6408]=4,wt[6407]=3;var Ct=[];Ct[5121]=1,Ct[5126]=4,Ct[36193]=2;var jt=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],Bt=["x","y","z","w"],Wt="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),Qt={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Zt={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},cr={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Xr={cw:2304,ccw:2305},vn=new ne(!1,!1,!1,function(){}),en=function(ut,ar){function rr(){this.endQueryIndex=this.startQueryIndex=-1,this.sum=0,this.stats=null}function Kt(Vt,Pe,ke){var lt=et.pop()||new rr;lt.startQueryIndex=Vt,lt.endQueryIndex=Pe,lt.sum=0,lt.stats=ke,ht.push(lt)}if(!ar.ext_disjoint_timer_query)return null;var Er=[],st=[],et=[],ht=[],vt=[],kt=[];return{beginQuery:function(Vt){var Pe=Er.pop()||ar.ext_disjoint_timer_query.createQueryEXT();ar.ext_disjoint_timer_query.beginQueryEXT(35007,Pe),st.push(Pe),Kt(st.length-1,st.length,Vt)},endQuery:function(){ar.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:Kt,update:function(){var Vt,Pe;if(Vt=st.length,Vt!==0){kt.length=Math.max(kt.length,Vt+1),vt.length=Math.max(vt.length,Vt+1),vt[0]=0;var ke=kt[0]=0;for(Pe=Vt=0;Pe<st.length;++Pe){var lt=st[Pe];ar.ext_disjoint_timer_query.getQueryObjectEXT(lt,34919)?(ke+=ar.ext_disjoint_timer_query.getQueryObjectEXT(lt,34918),Er.push(lt)):st[Vt++]=lt,vt[Pe+1]=ke,kt[Pe+1]=Vt}for(st.length=Vt,Pe=Vt=0;Pe<ht.length;++Pe){var ke=ht[Pe],ft=ke.startQueryIndex,lt=ke.endQueryIndex;ke.sum+=vt[lt]-vt[ft],ft=kt[ft],lt=kt[lt],lt===ft?(ke.stats.gpuTime+=ke.sum/1e6,et.push(ke)):(ke.startQueryIndex=ft,ke.endQueryIndex=lt,ht[Vt++]=ke)}ht.length=Vt}},getNumPendingQueries:function(){return st.length},clear:function(){Er.push.apply(Er,st);for(var Vt=0;Vt<Er.length;Vt++)ar.ext_disjoint_timer_query.deleteQueryEXT(Er[Vt]);st.length=0,Er.length=0},restore:function(){st.length=0,Er.length=0}}};return function(ut){function ar(){if(Ir.length===0)Jt&&Jt.update(),yn=null;else{yn=de.next(ar),Vt();for(var In=Ir.length-1;0<=In;--In){var Jn=Ir[In];Jn&&Jn(Sr,null,0)}lt.flush(),Jt&&Jt.update()}}function rr(){!yn&&0<Ir.length&&(yn=de.next(ar))}function Kt(){yn&&(de.cancel(ar),yn=null)}function Er(In){In.preventDefault(),Kt(),Cr.forEach(function(Jn){Jn()})}function st(In){lt.getError(),yt.restore(),Yr.restore(),ur.restore(),Dr.restore(),it.restore(),zt.restore(),Br.restore(),Jt&&Jt.restore(),qt.procs.refresh(),rr(),Kr.forEach(function(Jn){Jn()})}function et(In){function Jn(Ln,qn){var da={},oa={};return Object.keys(Ln).forEach(function(Bn){var $n=Ln[Bn];if(ce.isDynamic($n))oa[Bn]=ce.unbox($n,Bn);else{if(qn&&Array.isArray($n)){for(var Xa=0;Xa<$n.length;++Xa)if(ce.isDynamic($n[Xa])){oa[Bn]=ce.unbox($n,Bn);return}}da[Bn]=$n}}),{dynamic:oa,static:da}}function Zn(Ln){for(;gn.length<Ln;)gn.push(null);return gn}var ba=Jn(In.context||{},!0),Pa=Jn(In.uniforms||{},!0),xi=Jn(In.attributes||{},!1);In=Jn(function(Ln){function qn(oa){if(oa in da){var Bn=da[oa];delete da[oa],Object.keys(Bn).forEach(function($n){da[oa+"."+$n]=Bn[$n]})}}var da=oe({},Ln);return delete da.uniforms,delete da.attributes,delete da.context,delete da.vao,"stencil"in da&&da.stencil.op&&(da.stencil.opBack=da.stencil.opFront=da.stencil.op,delete da.stencil.op),qn("blend"),qn("depth"),qn("cull"),qn("stencil"),qn("polygonOffset"),qn("scissor"),qn("sample"),"vao"in Ln&&(da.vao=Ln.vao),da}(In),!1);var Ka={gpuTime:0,cpuTime:0,count:0},ti=qt.compile(In,xi,Pa,ba,Ka),$a=ti.draw,kr=ti.batch,bn=ti.scope,gn=[];return oe(function(Ln,qn){var da;if(typeof Ln=="function")return bn.call(this,null,Ln,0);if(typeof qn=="function")if(typeof Ln=="number")for(da=0;da<Ln;++da)bn.call(this,null,qn,da);else if(Array.isArray(Ln))for(da=0;da<Ln.length;++da)bn.call(this,Ln[da],qn,da);else return bn.call(this,Ln,qn,0);else if(typeof Ln=="number"){if(0<Ln)return kr.call(this,Zn(Ln|0),Ln|0)}else if(Array.isArray(Ln)){if(Ln.length)return kr.call(this,Ln,Ln.length)}else return $a.call(this,Ln)},{stats:Ka,destroy:function(){ti.destroy()}})}function ht(In,Jn){var Zn=0;qt.procs.poll();var ba=Jn.color;ba&&(lt.clearColor(+ba[0]||0,+ba[1]||0,+ba[2]||0,+ba[3]||0),Zn|=16384),"depth"in Jn&&(lt.clearDepth(+Jn.depth),Zn|=256),"stencil"in Jn&&(lt.clearStencil(Jn.stencil|0),Zn|=1024),lt.clear(Zn)}function vt(In){return Ir.push(In),rr(),{cancel:function(){function Jn(){var ba=ae(Ir,Jn);Ir[ba]=Ir[Ir.length-1],--Ir.length,0>=Ir.length&&Kt()}var Zn=ae(Ir,In);Ir[Zn]=Jn}}}function kt(){var In=Ur.viewport,Jn=Ur.scissor_box;In[0]=In[1]=Jn[0]=Jn[1]=0,Sr.viewportWidth=Sr.framebufferWidth=Sr.drawingBufferWidth=In[2]=Jn[2]=lt.drawingBufferWidth,Sr.viewportHeight=Sr.framebufferHeight=Sr.drawingBufferHeight=In[3]=Jn[3]=lt.drawingBufferHeight}function Vt(){Sr.tick+=1,Sr.time=ke(),kt(),qt.procs.poll()}function Pe(){Dr.refresh(),kt(),qt.procs.refresh(),Jt&&Jt.update()}function ke(){return(ye()-fr)/1e3}if(ut=h(ut),!ut)return null;var lt=ut.gl,ft=lt.getContextAttributes();lt.isContextLost();var yt=s(lt,ut);if(!yt)return null;var hr=e(),Rt={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},_t=ut.cachedCode||{},Dt=yt.extensions,Jt=en(lt,Dt),fr=ye(),Pr=lt.drawingBufferWidth,Rr=lt.drawingBufferHeight,Sr={tick:0,time:0,viewportWidth:Pr,viewportHeight:Rr,framebufferWidth:Pr,framebufferHeight:Rr,drawingBufferWidth:Pr,drawingBufferHeight:Rr,pixelRatio:ut.pixelRatio},Pr={elements:null,primitive:4,count:-1,offset:0,instances:-1},Jr=me(lt,Dt),ur=A(lt,Rt,ut,function(In){return Br.destroyBuffer(In)}),_r=_(lt,Dt,ur,Rt),Br=z(lt,Dt,Jr,Rt,ur,_r,Pr),Yr=B(lt,hr,Rt,ut),Dr=D(lt,Dt,Jr,function(){qt.procs.poll()},Sr,Rt,ut),it=St(lt,Dt,Jr,Rt,ut),zt=R(lt,Dt,Jr,Dr,it,Rt),qt=se(lt,hr,Dt,Jr,ur,_r,Dr,zt,{},Br,Yr,Pr,Sr,Jt,_t,ut),hr=G(lt,zt,qt.procs.poll,Sr),Ur=qt.next,Gr=lt.canvas,Ir=[],Cr=[],Kr=[],Cn=[ut.onDestroy],yn=null;Gr&&(Gr.addEventListener("webglcontextlost",Er,!1),Gr.addEventListener("webglcontextrestored",st,!1));var Yn=zt.setFBO=et({framebuffer:ce.define.call(null,1,"framebuffer")});return Pe(),ft=oe(et,{clear:function(In){if("framebuffer"in In)if(In.framebuffer&&In.framebuffer_reglType==="framebufferCube")for(var Jn=0;6>Jn;++Jn)Yn(oe({framebuffer:In.framebuffer.faces[Jn]},In),ht);else Yn(In,ht);else ht(null,In)},prop:ce.define.bind(null,1),context:ce.define.bind(null,2),this:ce.define.bind(null,3),draw:et({}),buffer:function(In){return ur.create(In,34962,!1,!1)},elements:function(In){return _r.create(In,!1)},texture:Dr.create2D,cube:Dr.createCube,renderbuffer:it.create,framebuffer:zt.create,framebufferCube:zt.createCube,vao:Br.createVAO,attributes:ft,frame:vt,on:function(In,Jn){var Zn;switch(In){case"frame":return vt(Jn);case"lost":Zn=Cr;break;case"restore":Zn=Kr;break;case"destroy":Zn=Cn}return Zn.push(Jn),{cancel:function(){for(var ba=0;ba<Zn.length;++ba)if(Zn[ba]===Jn){Zn[ba]=Zn[Zn.length-1],Zn.pop();break}}}},limits:Jr,hasExtension:function(In){return 0<=Jr.extensions.indexOf(In.toLowerCase())},read:hr,destroy:function(){Ir.length=0,Kt(),Gr&&(Gr.removeEventListener("webglcontextlost",Er),Gr.removeEventListener("webglcontextrestored",st)),Yr.clear(),zt.clear(),it.clear(),Br.clear(),Dr.clear(),_r.clear(),ur.clear(),Jt&&Jt.clear(),Cn.forEach(function(In){In()})},_gl:lt,_refresh:Pe,poll:function(){Vt(),Jt&&Jt.update()},now:ke,stats:Rt,getCachedCode:function(){return _t},preloadCachedCode:function(In){Object.entries(In).forEach(function(Jn){_t[Jn[0]]=Jn[1]})}}),ut.onDone(null,ft),ft}})},{}],285:[function(i,U,V){var w=i("buffer"),f=w.Buffer;function M(e,a){for(var n in e)a[n]=e[n]}f.from&&f.alloc&&f.allocUnsafe&&f.allocUnsafeSlow?U.exports=w:(M(w,V),V.Buffer=T);function T(e,a,n){return f(e,a,n)}T.prototype=Object.create(f.prototype),M(f,T),T.from=function(e,a,n){if(typeof e=="number")throw new TypeError("Argument must not be a number");return f(e,a,n)},T.alloc=function(e,a,n){if(typeof e!="number")throw new TypeError("Argument must be a number");var r=f(e);return a!==void 0?typeof n=="string"?r.fill(a,n):r.fill(a):r.fill(0),r},T.allocUnsafe=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return f(e)},T.allocUnsafeSlow=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return w.SlowBuffer(e)}},{buffer:85}],286:[function(i,U,V){U.exports=M;var w=i("events").EventEmitter,f=i("inherits");f(M,w),M.Readable=i("readable-stream/lib/_stream_readable.js"),M.Writable=i("readable-stream/lib/_stream_writable.js"),M.Duplex=i("readable-stream/lib/_stream_duplex.js"),M.Transform=i("readable-stream/lib/_stream_transform.js"),M.PassThrough=i("readable-stream/lib/_stream_passthrough.js"),M.finished=i("readable-stream/lib/internal/streams/end-of-stream.js"),M.pipeline=i("readable-stream/lib/internal/streams/pipeline.js"),M.Stream=M;function M(){w.call(this)}M.prototype.pipe=function(T,e){var a=this;function n(d){T.writable&&T.write(d)===!1&&a.pause&&a.pause()}a.on("data",n);function r(){a.readable&&a.resume&&a.resume()}T.on("drain",r),!T._isStdio&&(!e||e.end!==!1)&&(a.on("end",h),a.on("close",s));var t=!1;function h(){t||(t=!0,T.end())}function s(){t||(t=!0,typeof T.destroy=="function"&&T.destroy())}function o(d){if(y(),w.listenerCount(this,"error")===0)throw d}a.on("error",o),T.on("error",o);function y(){a.removeListener("data",n),T.removeListener("drain",r),a.removeListener("end",h),a.removeListener("close",s),a.removeListener("error",o),T.removeListener("error",o),a.removeListener("end",y),a.removeListener("close",y),T.removeListener("close",y)}return a.on("end",y),a.on("close",y),T.on("close",y),T.emit("pipe",a),T}},{events:84,inherits:231,"readable-stream/lib/_stream_duplex.js":288,"readable-stream/lib/_stream_passthrough.js":289,"readable-stream/lib/_stream_readable.js":290,"readable-stream/lib/_stream_transform.js":291,"readable-stream/lib/_stream_writable.js":292,"readable-stream/lib/internal/streams/end-of-stream.js":296,"readable-stream/lib/internal/streams/pipeline.js":298}],287:[function(i,U,V){function w(r,t){r.prototype=Object.create(t.prototype),r.prototype.constructor=r,r.__proto__=t}var f={};function M(r,t,h){h||(h=Error);function s(y,d,p){return typeof t=="string"?t:t(y,d,p)}var o=function(y){w(d,y);function d(p,c,m){return y.call(this,s(p,c,m))||this}return d}(h);o.prototype.name=h.name,o.prototype.code=r,f[r]=o}function T(r,t){if(Array.isArray(r)){var h=r.length;return r=r.map(function(s){return String(s)}),h>2?"one of ".concat(t," ").concat(r.slice(0,h-1).join(", "),", or ")+r[h-1]:h===2?"one of ".concat(t," ").concat(r[0]," or ").concat(r[1]):"of ".concat(t," ").concat(r[0])}else return"of ".concat(t," ").concat(String(r))}function e(r,t,h){return r.substr(!h||h<0?0:+h,t.length)===t}function a(r,t,h){return(h===void 0||h>r.length)&&(h=r.length),r.substring(h-t.length,h)===t}function n(r,t,h){return typeof h!="number"&&(h=0),h+t.length>r.length?!1:r.indexOf(t,h)!==-1}M("ERR_INVALID_OPT_VALUE",function(r,t){return'The value "'+t+'" is invalid for option "'+r+'"'},TypeError),M("ERR_INVALID_ARG_TYPE",function(r,t,h){var s;typeof t=="string"&&e(t,"not ")?(s="must not be",t=t.replace(/^not /,"")):s="must be";var o;if(a(r," argument"))o="The ".concat(r," ").concat(s," ").concat(T(t,"type"));else{var y=n(r,".")?"property":"argument";o='The "'.concat(r,'" ').concat(y," ").concat(s," ").concat(T(t,"type"))}return o+=". Received type ".concat(typeof h),o},TypeError),M("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),M("ERR_METHOD_NOT_IMPLEMENTED",function(r){return"The "+r+" method is not implemented"}),M("ERR_STREAM_PREMATURE_CLOSE","Premature close"),M("ERR_STREAM_DESTROYED",function(r){return"Cannot call "+r+" after a stream was destroyed"}),M("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),M("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),M("ERR_STREAM_WRITE_AFTER_END","write after end"),M("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),M("ERR_UNKNOWN_ENCODING",function(r){return"Unknown encoding: "+r},TypeError),M("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),U.exports.codes=f},{}],288:[function(i,U,V){(function(w){(function(){var f=Object.keys||function(s){var o=[];for(var y in s)o.push(y);return o};U.exports=r;var M=i("./_stream_readable"),T=i("./_stream_writable");i("inherits")(r,M);for(var e=f(T.prototype),a=0;a<e.length;a++){var n=e[a];r.prototype[n]||(r.prototype[n]=T.prototype[n])}function r(s){if(!(this instanceof r))return new r(s);M.call(this,s),T.call(this,s),this.allowHalfOpen=!0,s&&(s.readable===!1&&(this.readable=!1),s.writable===!1&&(this.writable=!1),s.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",t)))}Object.defineProperty(r.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(r.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(r.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function t(){this._writableState.ended||w.nextTick(h,this)}function h(s){s.end()}Object.defineProperty(r.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(o){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=o,this._writableState.destroyed=o)}})}).call(this)}).call(this,i("_process"))},{"./_stream_readable":290,"./_stream_writable":292,_process:278,inherits:231}],289:[function(i,U,V){U.exports=f;var w=i("./_stream_transform");i("inherits")(f,w);function f(M){if(!(this instanceof f))return new f(M);w.call(this,M)}f.prototype._transform=function(M,T,e){e(null,M)}},{"./_stream_transform":291,inherits:231}],290:[function(i,U,V){(function(w,f){(function(){U.exports=E;var M;E.ReadableState=S,i("events").EventEmitter;var T=function(ie,se){return ie.listeners(se).length},e=i("./internal/streams/stream"),a=i("buffer").Buffer,n=f.Uint8Array||function(){};function r(q){return a.from(q)}function t(q){return a.isBuffer(q)||q instanceof n}var h=i("util"),s;h&&h.debuglog?s=h.debuglog("stream"):s=function(){};var o=i("./internal/streams/buffer_list"),y=i("./internal/streams/destroy"),d=i("./internal/streams/state"),p=d.getHighWaterMark,c=i("../errors").codes,m=c.ERR_INVALID_ARG_TYPE,l=c.ERR_STREAM_PUSH_AFTER_EOF,x=c.ERR_METHOD_NOT_IMPLEMENTED,u=c.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,A,_,g;i("inherits")(E,e);var b=y.errorOrDestroy,v=["error","close","destroy","pause","resume"];function k(q,ie,se){if(typeof q.prependListener=="function")return q.prependListener(ie,se);!q._events||!q._events[ie]?q.on(ie,se):Array.isArray(q._events[ie])?q._events[ie].unshift(se):q._events[ie]=[se,q._events[ie]]}function S(q,ie,se){M=M||i("./_stream_duplex"),q=q||{},typeof se!="boolean"&&(se=ie instanceof M),this.objectMode=!!q.objectMode,se&&(this.objectMode=this.objectMode||!!q.readableObjectMode),this.highWaterMark=p(this,q,"readableHighWaterMark",se),this.buffer=new o,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=q.emitClose!==!1,this.autoDestroy=!!q.autoDestroy,this.destroyed=!1,this.defaultEncoding=q.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,q.encoding&&(A||(A=i("string_decoder/").StringDecoder),this.decoder=new A(q.encoding),this.encoding=q.encoding)}function E(q){if(M=M||i("./_stream_duplex"),!(this instanceof E))return new E(q);var ie=this instanceof M;this._readableState=new S(q,this,ie),this.readable=!0,q&&(typeof q.read=="function"&&(this._read=q.read),typeof q.destroy=="function"&&(this._destroy=q.destroy)),e.call(this)}Object.defineProperty(E.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(ie){!this._readableState||(this._readableState.destroyed=ie)}}),E.prototype.destroy=y.destroy,E.prototype._undestroy=y.undestroy,E.prototype._destroy=function(q,ie){ie(q)},E.prototype.push=function(q,ie){var se=this._readableState,ae;return se.objectMode?ae=!0:typeof q=="string"&&(ie=ie||se.defaultEncoding,ie!==se.encoding&&(q=a.from(q,ie),ie=""),ae=!0),C(this,q,ie,!1,ae)},E.prototype.unshift=function(q){return C(this,q,null,!0,!1)};function C(q,ie,se,ae,oe){s("readableAddChunk",ie);var be=q._readableState;if(ie===null)be.reading=!1,z(q,be);else{var ce;if(oe||(ce=I(be,ie)),ce)b(q,ce);else if(be.objectMode||ie&&ie.length>0)if(typeof ie!="string"&&!be.objectMode&&Object.getPrototypeOf(ie)!==a.prototype&&(ie=r(ie)),ae)be.endEmitted?b(q,new u):F(q,be,ie,!0);else if(be.ended)b(q,new l);else{if(be.destroyed)return!1;be.reading=!1,be.decoder&&!se?(ie=be.decoder.write(ie),be.objectMode||ie.length!==0?F(q,be,ie,!1):Q(q,be)):F(q,be,ie,!1)}else ae||(be.reading=!1,Q(q,be))}return!be.ended&&(be.length<be.highWaterMark||be.length===0)}function F(q,ie,se,ae){ie.flowing&&ie.length===0&&!ie.sync?(ie.awaitDrain=0,q.emit("data",se)):(ie.length+=ie.objectMode?1:se.length,ae?ie.buffer.unshift(se):ie.buffer.push(se),ie.needReadable&&B(q)),Q(q,ie)}function I(q,ie){var se;return!t(ie)&&typeof ie!="string"&&ie!==void 0&&!q.objectMode&&(se=new m("chunk",["string","Buffer","Uint8Array"],ie)),se}E.prototype.isPaused=function(){return this._readableState.flowing===!1},E.prototype.setEncoding=function(q){A||(A=i("string_decoder/").StringDecoder);var ie=new A(q);this._readableState.decoder=ie,this._readableState.encoding=this._readableState.decoder.encoding;for(var se=this._readableState.buffer.head,ae="";se!==null;)ae+=ie.write(se.data),se=se.next;return this._readableState.buffer.clear(),ae!==""&&this._readableState.buffer.push(ae),this._readableState.length=ae.length,this};var D=1073741824;function R(q){return q>=D?q=D:(q--,q|=q>>>1,q|=q>>>2,q|=q>>>4,q|=q>>>8,q|=q>>>16,q++),q}function O(q,ie){return q<=0||ie.length===0&&ie.ended?0:ie.objectMode?1:q!==q?ie.flowing&&ie.length?ie.buffer.head.data.length:ie.length:(q>ie.highWaterMark&&(ie.highWaterMark=R(q)),q<=ie.length?q:ie.ended?ie.length:(ie.needReadable=!0,0))}E.prototype.read=function(q){s("read",q),q=parseInt(q,10);var ie=this._readableState,se=q;if(q!==0&&(ie.emittedReadable=!1),q===0&&ie.needReadable&&((ie.highWaterMark!==0?ie.length>=ie.highWaterMark:ie.length>0)||ie.ended))return s("read: emitReadable",ie.length,ie.ended),ie.length===0&&ie.ended?ee(this):B(this),null;if(q=O(q,ie),q===0&&ie.ended)return ie.length===0&&ee(this),null;var ae=ie.needReadable;s("need readable",ae),(ie.length===0||ie.length-q<ie.highWaterMark)&&(ae=!0,s("length less than watermark",ae)),ie.ended||ie.reading?(ae=!1,s("reading or ended",ae)):ae&&(s("do read"),ie.reading=!0,ie.sync=!0,ie.length===0&&(ie.needReadable=!0),this._read(ie.highWaterMark),ie.sync=!1,ie.reading||(q=O(se,ie)));var oe;return q>0?oe=H(q,ie):oe=null,oe===null?(ie.needReadable=ie.length<=ie.highWaterMark,q=0):(ie.length-=q,ie.awaitDrain=0),ie.length===0&&(ie.ended||(ie.needReadable=!0),se!==q&&ie.ended&&ee(this)),oe!==null&&this.emit("data",oe),oe};function z(q,ie){if(s("onEofChunk"),!ie.ended){if(ie.decoder){var se=ie.decoder.end();se&&se.length&&(ie.buffer.push(se),ie.length+=ie.objectMode?1:se.length)}ie.ended=!0,ie.sync?B(q):(ie.needReadable=!1,ie.emittedReadable||(ie.emittedReadable=!0,G(q)))}}function B(q){var ie=q._readableState;s("emitReadable",ie.needReadable,ie.emittedReadable),ie.needReadable=!1,ie.emittedReadable||(s("emitReadable",ie.flowing),ie.emittedReadable=!0,w.nextTick(G,q))}function G(q){var ie=q._readableState;s("emitReadable_",ie.destroyed,ie.length,ie.ended),!ie.destroyed&&(ie.length||ie.ended)&&(q.emit("readable"),ie.emittedReadable=!1),ie.needReadable=!ie.flowing&&!ie.ended&&ie.length<=ie.highWaterMark,Y(q)}function Q(q,ie){ie.readingMore||(ie.readingMore=!0,w.nextTick(X,q,ie))}function X(q,ie){for(;!ie.reading&&!ie.ended&&(ie.length<ie.highWaterMark||ie.flowing&&ie.length===0);){var se=ie.length;if(s("maybeReadMore read 0"),q.read(0),se===ie.length)break}ie.readingMore=!1}E.prototype._read=function(q){b(this,new x("_read()"))},E.prototype.pipe=function(q,ie){var se=this,ae=this._readableState;switch(ae.pipesCount){case 0:ae.pipes=q;break;case 1:ae.pipes=[ae.pipes,q];break;default:ae.pipes.push(q);break}ae.pipesCount+=1,s("pipe count=%d opts=%j",ae.pipesCount,ie);var oe=(!ie||ie.end!==!1)&&q!==w.stdout&&q!==w.stderr,be=oe?de:Ce;ae.endEmitted?w.nextTick(be):se.once("end",be),q.on("unpipe",ce);function ce(Ke,Ye){s("onunpipe"),Ke===se&&Ye&&Ye.hasUnpiped===!1&&(Ye.hasUnpiped=!0,me())}function de(){s("onend"),q.end()}var ye=j(se);q.on("drain",ye);var ge=!1;function me(){s("cleanup"),q.removeListener("close",Oe),q.removeListener("finish",we),q.removeListener("drain",ye),q.removeListener("error",Le),q.removeListener("unpipe",ce),se.removeListener("end",de),se.removeListener("end",Ce),se.removeListener("data",Se),ge=!0,ae.awaitDrain&&(!q._writableState||q._writableState.needDrain)&&ye()}se.on("data",Se);function Se(Ke){s("ondata");var Ye=q.write(Ke);s("dest.write",Ye),Ye===!1&&((ae.pipesCount===1&&ae.pipes===q||ae.pipesCount>1&&Z(ae.pipes,q)!==-1)&&!ge&&(s("false write response, pause",ae.awaitDrain),ae.awaitDrain++),se.pause())}function Le(Ke){s("onerror",Ke),Ce(),q.removeListener("error",Le),T(q,"error")===0&&b(q,Ke)}k(q,"error",Le);function Oe(){q.removeListener("finish",we),Ce()}q.once("close",Oe);function we(){s("onfinish"),q.removeListener("close",Oe),Ce()}q.once("finish",we);function Ce(){s("unpipe"),se.unpipe(q)}return q.emit("pipe",se),ae.flowing||(s("pipe resume"),se.resume()),q};function j(q){return function(){var se=q._readableState;s("pipeOnDrain",se.awaitDrain),se.awaitDrain&&se.awaitDrain--,se.awaitDrain===0&&T(q,"data")&&(se.flowing=!0,Y(q))}}E.prototype.unpipe=function(q){var ie=this._readableState,se={hasUnpiped:!1};if(ie.pipesCount===0)return this;if(ie.pipesCount===1)return q&&q!==ie.pipes?this:(q||(q=ie.pipes),ie.pipes=null,ie.pipesCount=0,ie.flowing=!1,q&&q.emit("unpipe",this,se),this);if(!q){var ae=ie.pipes,oe=ie.pipesCount;ie.pipes=null,ie.pipesCount=0,ie.flowing=!1;for(var be=0;be<oe;be++)ae[be].emit("unpipe",this,{hasUnpiped:!1});return this}var ce=Z(ie.pipes,q);return ce===-1?this:(ie.pipes.splice(ce,1),ie.pipesCount-=1,ie.pipesCount===1&&(ie.pipes=ie.pipes[0]),q.emit("unpipe",this,se),this)},E.prototype.on=function(q,ie){var se=e.prototype.on.call(this,q,ie),ae=this._readableState;return q==="data"?(ae.readableListening=this.listenerCount("readable")>0,ae.flowing!==!1&&this.resume()):q==="readable"&&!ae.endEmitted&&!ae.readableListening&&(ae.readableListening=ae.needReadable=!0,ae.flowing=!1,ae.emittedReadable=!1,s("on readable",ae.length,ae.reading),ae.length?B(this):ae.reading||w.nextTick(ue,this)),se},E.prototype.addListener=E.prototype.on,E.prototype.removeListener=function(q,ie){var se=e.prototype.removeListener.call(this,q,ie);return q==="readable"&&w.nextTick(re,this),se},E.prototype.removeAllListeners=function(q){var ie=e.prototype.removeAllListeners.apply(this,arguments);return(q==="readable"||q===void 0)&&w.nextTick(re,this),ie};function re(q){var ie=q._readableState;ie.readableListening=q.listenerCount("readable")>0,ie.resumeScheduled&&!ie.paused?ie.flowing=!0:q.listenerCount("data")>0&&q.resume()}function ue(q){s("readable nexttick read 0"),q.read(0)}E.prototype.resume=function(){var q=this._readableState;return q.flowing||(s("resume"),q.flowing=!q.readableListening,K(this,q)),q.paused=!1,this};function K(q,ie){ie.resumeScheduled||(ie.resumeScheduled=!0,w.nextTick(te,q,ie))}function te(q,ie){s("resume",ie.reading),ie.reading||q.read(0),ie.resumeScheduled=!1,q.emit("resume"),Y(q),ie.flowing&&!ie.reading&&q.read(0)}E.prototype.pause=function(){return s("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(s("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function Y(q){var ie=q._readableState;for(s("flow",ie.flowing);ie.flowing&&q.read()!==null;);}E.prototype.wrap=function(q){var ie=this,se=this._readableState,ae=!1;q.on("end",function(){if(s("wrapped end"),se.decoder&&!se.ended){var ce=se.decoder.end();ce&&ce.length&&ie.push(ce)}ie.push(null)}),q.on("data",function(ce){if(s("wrapped data"),se.decoder&&(ce=se.decoder.write(ce)),!(se.objectMode&&ce==null)&&!(!se.objectMode&&(!ce||!ce.length))){var de=ie.push(ce);de||(ae=!0,q.pause())}});for(var oe in q)this[oe]===void 0&&typeof q[oe]=="function"&&(this[oe]=function(de){return function(){return q[de].apply(q,arguments)}}(oe));for(var be=0;be<v.length;be++)q.on(v[be],this.emit.bind(this,v[be]));return this._read=function(ce){s("wrapped _read",ce),ae&&(ae=!1,q.resume())},this},typeof Symbol=="function"&&(E.prototype[Symbol.asyncIterator]=function(){return _===void 0&&(_=i("./internal/streams/async_iterator")),_(this)}),Object.defineProperty(E.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(E.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(E.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(ie){this._readableState&&(this._readableState.flowing=ie)}}),E._fromList=H,Object.defineProperty(E.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function H(q,ie){if(ie.length===0)return null;var se;return ie.objectMode?se=ie.buffer.shift():!q||q>=ie.length?(ie.decoder?se=ie.buffer.join(""):ie.buffer.length===1?se=ie.buffer.first():se=ie.buffer.concat(ie.length),ie.buffer.clear()):se=ie.buffer.consume(q,ie.decoder),se}function ee(q){var ie=q._readableState;s("endReadable",ie.endEmitted),ie.endEmitted||(ie.ended=!0,w.nextTick(ne,ie,q))}function ne(q,ie){if(s("endReadableNT",q.endEmitted,q.length),!q.endEmitted&&q.length===0&&(q.endEmitted=!0,ie.readable=!1,ie.emit("end"),q.autoDestroy)){var se=ie._writableState;(!se||se.autoDestroy&&se.finished)&&ie.destroy()}}typeof Symbol=="function"&&(E.from=function(q,ie){return g===void 0&&(g=i("./internal/streams/from")),g(E,q,ie)});function Z(q,ie){for(var se=0,ae=q.length;se<ae;se++)if(q[se]===ie)return se;return-1}}).call(this)}).call(this,i("_process"),typeof Je<"u"?Je:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":287,"./_stream_duplex":288,"./internal/streams/async_iterator":293,"./internal/streams/buffer_list":294,"./internal/streams/destroy":295,"./internal/streams/from":297,"./internal/streams/state":299,"./internal/streams/stream":300,_process:278,buffer:85,events:84,inherits:231,"string_decoder/":301,util:83}],291:[function(i,U,V){U.exports=r;var w=i("../errors").codes,f=w.ERR_METHOD_NOT_IMPLEMENTED,M=w.ERR_MULTIPLE_CALLBACK,T=w.ERR_TRANSFORM_ALREADY_TRANSFORMING,e=w.ERR_TRANSFORM_WITH_LENGTH_0,a=i("./_stream_duplex");i("inherits")(r,a);function n(s,o){var y=this._transformState;y.transforming=!1;var d=y.writecb;if(d===null)return this.emit("error",new M);y.writechunk=null,y.writecb=null,o!=null&&this.push(o),d(s);var p=this._readableState;p.reading=!1,(p.needReadable||p.length<p.highWaterMark)&&this._read(p.highWaterMark)}function r(s){if(!(this instanceof r))return new r(s);a.call(this,s),this._transformState={afterTransform:n.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,s&&(typeof s.transform=="function"&&(this._transform=s.transform),typeof s.flush=="function"&&(this._flush=s.flush)),this.on("prefinish",t)}function t(){var s=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(o,y){h(s,o,y)}):h(this,null,null)}r.prototype.push=function(s,o){return this._transformState.needTransform=!1,a.prototype.push.call(this,s,o)},r.prototype._transform=function(s,o,y){y(new f("_transform()"))},r.prototype._write=function(s,o,y){var d=this._transformState;if(d.writecb=y,d.writechunk=s,d.writeencoding=o,!d.transforming){var p=this._readableState;(d.needTransform||p.needReadable||p.length<p.highWaterMark)&&this._read(p.highWaterMark)}},r.prototype._read=function(s){var o=this._transformState;o.writechunk!==null&&!o.transforming?(o.transforming=!0,this._transform(o.writechunk,o.writeencoding,o.afterTransform)):o.needTransform=!0},r.prototype._destroy=function(s,o){a.prototype._destroy.call(this,s,function(y){o(y)})};function h(s,o,y){if(o)return s.emit("error",o);if(y!=null&&s.push(y),s._writableState.length)throw new e;if(s._transformState.transforming)throw new T;return s.push(null)}},{"../errors":287,"./_stream_duplex":288,inherits:231}],292:[function(i,U,V){(function(w,f){(function(){U.exports=S;function M(Y){var H=this;this.next=null,this.entry=null,this.finish=function(){te(H,Y)}}var T;S.WritableState=v;var e={deprecate:i("util-deprecate")},a=i("./internal/streams/stream"),n=i("buffer").Buffer,r=f.Uint8Array||function(){};function t(Y){return n.from(Y)}function h(Y){return n.isBuffer(Y)||Y instanceof r}var s=i("./internal/streams/destroy"),o=i("./internal/streams/state"),y=o.getHighWaterMark,d=i("../errors").codes,p=d.ERR_INVALID_ARG_TYPE,c=d.ERR_METHOD_NOT_IMPLEMENTED,m=d.ERR_MULTIPLE_CALLBACK,l=d.ERR_STREAM_CANNOT_PIPE,x=d.ERR_STREAM_DESTROYED,u=d.ERR_STREAM_NULL_VALUES,A=d.ERR_STREAM_WRITE_AFTER_END,_=d.ERR_UNKNOWN_ENCODING,g=s.errorOrDestroy;i("inherits")(S,a);function b(){}function v(Y,H,ee){T=T||i("./_stream_duplex"),Y=Y||{},typeof ee!="boolean"&&(ee=H instanceof T),this.objectMode=!!Y.objectMode,ee&&(this.objectMode=this.objectMode||!!Y.writableObjectMode),this.highWaterMark=y(this,Y,"writableHighWaterMark",ee),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var ne=Y.decodeStrings===!1;this.decodeStrings=!ne,this.defaultEncoding=Y.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Z){z(H,Z)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=Y.emitClose!==!1,this.autoDestroy=!!Y.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new M(this)}v.prototype.getBuffer=function(){for(var H=this.bufferedRequest,ee=[];H;)ee.push(H),H=H.next;return ee},function(){try{Object.defineProperty(v.prototype,"buffer",{get:e.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var k;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(k=Function.prototype[Symbol.hasInstance],Object.defineProperty(S,Symbol.hasInstance,{value:function(H){return k.call(this,H)?!0:this!==S?!1:H&&H._writableState instanceof v}})):k=function(H){return H instanceof this};function S(Y){T=T||i("./_stream_duplex");var H=this instanceof T;if(!H&&!k.call(S,this))return new S(Y);this._writableState=new v(Y,this,H),this.writable=!0,Y&&(typeof Y.write=="function"&&(this._write=Y.write),typeof Y.writev=="function"&&(this._writev=Y.writev),typeof Y.destroy=="function"&&(this._destroy=Y.destroy),typeof Y.final=="function"&&(this._final=Y.final)),a.call(this)}S.prototype.pipe=function(){g(this,new l)};function E(Y,H){var ee=new A;g(Y,ee),w.nextTick(H,ee)}function C(Y,H,ee,ne){var Z;return ee===null?Z=new u:typeof ee!="string"&&!H.objectMode&&(Z=new p("chunk",["string","Buffer"],ee)),Z?(g(Y,Z),w.nextTick(ne,Z),!1):!0}S.prototype.write=function(Y,H,ee){var ne=this._writableState,Z=!1,q=!ne.objectMode&&h(Y);return q&&!n.isBuffer(Y)&&(Y=t(Y)),typeof H=="function"&&(ee=H,H=null),q?H="buffer":H||(H=ne.defaultEncoding),typeof ee!="function"&&(ee=b),ne.ending?E(this,ee):(q||C(this,ne,Y,ee))&&(ne.pendingcb++,Z=I(this,ne,q,Y,H,ee)),Z},S.prototype.cork=function(){this._writableState.corked++},S.prototype.uncork=function(){var Y=this._writableState;Y.corked&&(Y.corked--,!Y.writing&&!Y.corked&&!Y.bufferProcessing&&Y.bufferedRequest&&Q(this,Y))},S.prototype.setDefaultEncoding=function(H){if(typeof H=="string"&&(H=H.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((H+"").toLowerCase())>-1))throw new _(H);return this._writableState.defaultEncoding=H,this},Object.defineProperty(S.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function F(Y,H,ee){return!Y.objectMode&&Y.decodeStrings!==!1&&typeof H=="string"&&(H=n.from(H,ee)),H}Object.defineProperty(S.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function I(Y,H,ee,ne,Z,q){if(!ee){var ie=F(H,ne,Z);ne!==ie&&(ee=!0,Z="buffer",ne=ie)}var se=H.objectMode?1:ne.length;H.length+=se;var ae=H.length<H.highWaterMark;if(ae||(H.needDrain=!0),H.writing||H.corked){var oe=H.lastBufferedRequest;H.lastBufferedRequest={chunk:ne,encoding:Z,isBuf:ee,callback:q,next:null},oe?oe.next=H.lastBufferedRequest:H.bufferedRequest=H.lastBufferedRequest,H.bufferedRequestCount+=1}else D(Y,H,!1,se,ne,Z,q);return ae}function D(Y,H,ee,ne,Z,q,ie){H.writelen=ne,H.writecb=ie,H.writing=!0,H.sync=!0,H.destroyed?H.onwrite(new x("write")):ee?Y._writev(Z,H.onwrite):Y._write(Z,q,H.onwrite),H.sync=!1}function R(Y,H,ee,ne,Z){--H.pendingcb,ee?(w.nextTick(Z,ne),w.nextTick(ue,Y,H),Y._writableState.errorEmitted=!0,g(Y,ne)):(Z(ne),Y._writableState.errorEmitted=!0,g(Y,ne),ue(Y,H))}function O(Y){Y.writing=!1,Y.writecb=null,Y.length-=Y.writelen,Y.writelen=0}function z(Y,H){var ee=Y._writableState,ne=ee.sync,Z=ee.writecb;if(typeof Z!="function")throw new m;if(O(ee),H)R(Y,ee,ne,H,Z);else{var q=X(ee)||Y.destroyed;!q&&!ee.corked&&!ee.bufferProcessing&&ee.bufferedRequest&&Q(Y,ee),ne?w.nextTick(B,Y,ee,q,Z):B(Y,ee,q,Z)}}function B(Y,H,ee,ne){ee||G(Y,H),H.pendingcb--,ne(),ue(Y,H)}function G(Y,H){H.length===0&&H.needDrain&&(H.needDrain=!1,Y.emit("drain"))}function Q(Y,H){H.bufferProcessing=!0;var ee=H.bufferedRequest;if(Y._writev&&ee&&ee.next){var ne=H.bufferedRequestCount,Z=new Array(ne),q=H.corkedRequestsFree;q.entry=ee;for(var ie=0,se=!0;ee;)Z[ie]=ee,ee.isBuf||(se=!1),ee=ee.next,ie+=1;Z.allBuffers=se,D(Y,H,!0,H.length,Z,"",q.finish),H.pendingcb++,H.lastBufferedRequest=null,q.next?(H.corkedRequestsFree=q.next,q.next=null):H.corkedRequestsFree=new M(H),H.bufferedRequestCount=0}else{for(;ee;){var ae=ee.chunk,oe=ee.encoding,be=ee.callback,ce=H.objectMode?1:ae.length;if(D(Y,H,!1,ce,ae,oe,be),ee=ee.next,H.bufferedRequestCount--,H.writing)break}ee===null&&(H.lastBufferedRequest=null)}H.bufferedRequest=ee,H.bufferProcessing=!1}S.prototype._write=function(Y,H,ee){ee(new c("_write()"))},S.prototype._writev=null,S.prototype.end=function(Y,H,ee){var ne=this._writableState;return typeof Y=="function"?(ee=Y,Y=null,H=null):typeof H=="function"&&(ee=H,H=null),Y!=null&&this.write(Y,H),ne.corked&&(ne.corked=1,this.uncork()),ne.ending||K(this,ne,ee),this},Object.defineProperty(S.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function X(Y){return Y.ending&&Y.length===0&&Y.bufferedRequest===null&&!Y.finished&&!Y.writing}function j(Y,H){Y._final(function(ee){H.pendingcb--,ee&&g(Y,ee),H.prefinished=!0,Y.emit("prefinish"),ue(Y,H)})}function re(Y,H){!H.prefinished&&!H.finalCalled&&(typeof Y._final=="function"&&!H.destroyed?(H.pendingcb++,H.finalCalled=!0,w.nextTick(j,Y,H)):(H.prefinished=!0,Y.emit("prefinish")))}function ue(Y,H){var ee=X(H);if(ee&&(re(Y,H),H.pendingcb===0&&(H.finished=!0,Y.emit("finish"),H.autoDestroy))){var ne=Y._readableState;(!ne||ne.autoDestroy&&ne.endEmitted)&&Y.destroy()}return ee}function K(Y,H,ee){H.ending=!0,ue(Y,H),ee&&(H.finished?w.nextTick(ee):Y.once("finish",ee)),H.ended=!0,Y.writable=!1}function te(Y,H,ee){var ne=Y.entry;for(Y.entry=null;ne;){var Z=ne.callback;H.pendingcb--,Z(ee),ne=ne.next}H.corkedRequestsFree.next=Y}Object.defineProperty(S.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(H){!this._writableState||(this._writableState.destroyed=H)}}),S.prototype.destroy=s.destroy,S.prototype._undestroy=s.undestroy,S.prototype._destroy=function(Y,H){H(Y)}}).call(this)}).call(this,i("_process"),typeof Je<"u"?Je:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":287,"./_stream_duplex":288,"./internal/streams/destroy":295,"./internal/streams/state":299,"./internal/streams/stream":300,_process:278,buffer:85,inherits:231,"util-deprecate":331}],293:[function(i,U,V){(function(w){(function(){var f;function M(x,u,A){return u in x?Object.defineProperty(x,u,{value:A,enumerable:!0,configurable:!0,writable:!0}):x[u]=A,x}var T=i("./end-of-stream"),e=Symbol("lastResolve"),a=Symbol("lastReject"),n=Symbol("error"),r=Symbol("ended"),t=Symbol("lastPromise"),h=Symbol("handlePromise"),s=Symbol("stream");function o(x,u){return{value:x,done:u}}function y(x){var u=x[e];if(u!==null){var A=x[s].read();A!==null&&(x[t]=null,x[e]=null,x[a]=null,u(o(A,!1)))}}function d(x){w.nextTick(y,x)}function p(x,u){return function(A,_){x.then(function(){if(u[r]){A(o(void 0,!0));return}u[h](A,_)},_)}}var c=Object.getPrototypeOf(function(){}),m=Object.setPrototypeOf((f={get stream(){return this[s]},next:function(){var u=this,A=this[n];if(A!==null)return Promise.reject(A);if(this[r])return Promise.resolve(o(void 0,!0));if(this[s].destroyed)return new Promise(function(v,k){w.nextTick(function(){u[n]?k(u[n]):v(o(void 0,!0))})});var _=this[t],g;if(_)g=new Promise(p(_,this));else{var b=this[s].read();if(b!==null)return Promise.resolve(o(b,!1));g=new Promise(this[h])}return this[t]=g,g}},M(f,Symbol.asyncIterator,function(){return this}),M(f,"return",function(){var u=this;return new Promise(function(A,_){u[s].destroy(null,function(g){if(g){_(g);return}A(o(void 0,!0))})})}),f),c),l=function(u){var A,_=Object.create(m,(A={},M(A,s,{value:u,writable:!0}),M(A,e,{value:null,writable:!0}),M(A,a,{value:null,writable:!0}),M(A,n,{value:null,writable:!0}),M(A,r,{value:u._readableState.endEmitted,writable:!0}),M(A,h,{value:function(b,v){var k=_[s].read();k?(_[t]=null,_[e]=null,_[a]=null,b(o(k,!1))):(_[e]=b,_[a]=v)},writable:!0}),A));return _[t]=null,T(u,function(g){if(g&&g.code!=="ERR_STREAM_PREMATURE_CLOSE"){var b=_[a];b!==null&&(_[t]=null,_[e]=null,_[a]=null,b(g)),_[n]=g;return}var v=_[e];v!==null&&(_[t]=null,_[e]=null,_[a]=null,v(o(void 0,!0))),_[r]=!0}),u.on("readable",d.bind(null,_)),_};U.exports=l}).call(this)}).call(this,i("_process"))},{"./end-of-stream":296,_process:278}],294:[function(i,U,V){function w(y,d){var p=Object.keys(y);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(y);d&&(c=c.filter(function(m){return Object.getOwnPropertyDescriptor(y,m).enumerable})),p.push.apply(p,c)}return p}function f(y){for(var d=1;d<arguments.length;d++){var p=arguments[d]!=null?arguments[d]:{};d%2?w(Object(p),!0).forEach(function(c){M(y,c,p[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(p)):w(Object(p)).forEach(function(c){Object.defineProperty(y,c,Object.getOwnPropertyDescriptor(p,c))})}return y}function M(y,d,p){return d in y?Object.defineProperty(y,d,{value:p,enumerable:!0,configurable:!0,writable:!0}):y[d]=p,y}function T(y,d){if(!(y instanceof d))throw new TypeError("Cannot call a class as a function")}function e(y,d){for(var p=0;p<d.length;p++){var c=d[p];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(y,c.key,c)}}function a(y,d,p){return d&&e(y.prototype,d),p&&e(y,p),y}var n=i("buffer"),r=n.Buffer,t=i("util"),h=t.inspect,s=h&&h.custom||"inspect";function o(y,d,p){r.prototype.copy.call(y,d,p)}U.exports=function(){function y(){T(this,y),this.head=null,this.tail=null,this.length=0}return a(y,[{key:"push",value:function(p){var c={data:p,next:null};this.length>0?this.tail.next=c:this.head=c,this.tail=c,++this.length}},{key:"unshift",value:function(p){var c={data:p,next:this.head};this.length===0&&(this.tail=c),this.head=c,++this.length}},{key:"shift",value:function(){if(this.length!==0){var p=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,p}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(p){if(this.length===0)return"";for(var c=this.head,m=""+c.data;c=c.next;)m+=p+c.data;return m}},{key:"concat",value:function(p){if(this.length===0)return r.alloc(0);for(var c=r.allocUnsafe(p>>>0),m=this.head,l=0;m;)o(m.data,c,l),l+=m.data.length,m=m.next;return c}},{key:"consume",value:function(p,c){var m;return p<this.head.data.length?(m=this.head.data.slice(0,p),this.head.data=this.head.data.slice(p)):p===this.head.data.length?m=this.shift():m=c?this._getString(p):this._getBuffer(p),m}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(p){var c=this.head,m=1,l=c.data;for(p-=l.length;c=c.next;){var x=c.data,u=p>x.length?x.length:p;if(u===x.length?l+=x:l+=x.slice(0,p),p-=u,p===0){u===x.length?(++m,c.next?this.head=c.next:this.head=this.tail=null):(this.head=c,c.data=x.slice(u));break}++m}return this.length-=m,l}},{key:"_getBuffer",value:function(p){var c=r.allocUnsafe(p),m=this.head,l=1;for(m.data.copy(c),p-=m.data.length;m=m.next;){var x=m.data,u=p>x.length?x.length:p;if(x.copy(c,c.length-p,0,u),p-=u,p===0){u===x.length?(++l,m.next?this.head=m.next:this.head=this.tail=null):(this.head=m,m.data=x.slice(u));break}++l}return this.length-=l,c}},{key:s,value:function(p,c){return h(this,f({},c,{depth:0,customInspect:!1}))}}]),y}()},{buffer:85,util:83}],295:[function(i,U,V){(function(w){(function(){function f(r,t){var h=this,s=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;return s||o?(t?t(r):r&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,w.nextTick(a,this,r)):w.nextTick(a,this,r)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(r||null,function(y){!t&&y?h._writableState?h._writableState.errorEmitted?w.nextTick(T,h):(h._writableState.errorEmitted=!0,w.nextTick(M,h,y)):w.nextTick(M,h,y):t?(w.nextTick(T,h),t(y)):w.nextTick(T,h)}),this)}function M(r,t){a(r,t),T(r)}function T(r){r._writableState&&!r._writableState.emitClose||r._readableState&&!r._readableState.emitClose||r.emit("close")}function e(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function a(r,t){r.emit("error",t)}function n(r,t){var h=r._readableState,s=r._writableState;h&&h.autoDestroy||s&&s.autoDestroy?r.destroy(t):r.emit("error",t)}U.exports={destroy:f,undestroy:e,errorOrDestroy:n}}).call(this)}).call(this,i("_process"))},{_process:278}],296:[function(i,U,V){var w=i("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function f(a){var n=!1;return function(){if(!n){n=!0;for(var r=arguments.length,t=new Array(r),h=0;h<r;h++)t[h]=arguments[h];a.apply(this,t)}}}function M(){}function T(a){return a.setHeader&&typeof a.abort=="function"}function e(a,n,r){if(typeof n=="function")return e(a,null,n);n||(n={}),r=f(r||M);var t=n.readable||n.readable!==!1&&a.readable,h=n.writable||n.writable!==!1&&a.writable,s=function(){a.writable||y()},o=a._writableState&&a._writableState.finished,y=function(){h=!1,o=!0,t||r.call(a)},d=a._readableState&&a._readableState.endEmitted,p=function(){t=!1,d=!0,h||r.call(a)},c=function(u){r.call(a,u)},m=function(){var u;if(t&&!d)return(!a._readableState||!a._readableState.ended)&&(u=new w),r.call(a,u);if(h&&!o)return(!a._writableState||!a._writableState.ended)&&(u=new w),r.call(a,u)},l=function(){a.req.on("finish",y)};return T(a)?(a.on("complete",y),a.on("abort",m),a.req?l():a.on("request",l)):h&&!a._writableState&&(a.on("end",s),a.on("close",s)),a.on("end",p),a.on("finish",y),n.error!==!1&&a.on("error",c),a.on("close",m),function(){a.removeListener("complete",y),a.removeListener("abort",m),a.removeListener("request",l),a.req&&a.req.removeListener("finish",y),a.removeListener("end",s),a.removeListener("close",s),a.removeListener("finish",y),a.removeListener("end",p),a.removeListener("error",c),a.removeListener("close",m)}}U.exports=e},{"../../../errors":287}],297:[function(i,U,V){U.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],298:[function(i,U,V){var w;function f(y){var d=!1;return function(){d||(d=!0,y.apply(void 0,arguments))}}var M=i("../../../errors").codes,T=M.ERR_MISSING_ARGS,e=M.ERR_STREAM_DESTROYED;function a(y){if(y)throw y}function n(y){return y.setHeader&&typeof y.abort=="function"}function r(y,d,p,c){c=f(c);var m=!1;y.on("close",function(){m=!0}),w===void 0&&(w=i("./end-of-stream")),w(y,{readable:d,writable:p},function(x){if(x)return c(x);m=!0,c()});var l=!1;return function(x){if(!m&&!l){if(l=!0,n(y))return y.abort();if(typeof y.destroy=="function")return y.destroy();c(x||new e("pipe"))}}}function t(y){y()}function h(y,d){return y.pipe(d)}function s(y){return!y.length||typeof y[y.length-1]!="function"?a:y.pop()}function o(){for(var y=arguments.length,d=new Array(y),p=0;p<y;p++)d[p]=arguments[p];var c=s(d);if(Array.isArray(d[0])&&(d=d[0]),d.length<2)throw new T("streams");var m,l=d.map(function(x,u){var A=u<d.length-1,_=u>0;return r(x,A,_,function(g){m||(m=g),g&&l.forEach(t),!A&&(l.forEach(t),c(m))})});return d.reduce(h)}U.exports=o},{"../../../errors":287,"./end-of-stream":296}],299:[function(i,U,V){var w=i("../../../errors").codes.ERR_INVALID_OPT_VALUE;function f(T,e,a){return T.highWaterMark!=null?T.highWaterMark:e?T[a]:null}function M(T,e,a,n){var r=f(e,n,a);if(r!=null){if(!(isFinite(r)&&Math.floor(r)===r)||r<0){var t=n?a:"highWaterMark";throw new w(t,r)}return Math.floor(r)}return T.objectMode?16:16*1024}U.exports={getHighWaterMark:M}},{"../../../errors":287}],300:[function(i,U,V){U.exports=i("events").EventEmitter},{events:84}],301:[function(i,U,V){var w=i("safe-buffer").Buffer,f=w.isEncoding||function(l){switch(l=""+l,l&&l.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function M(l){if(!l)return"utf8";for(var x;;)switch(l){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return l;default:if(x)return;l=(""+l).toLowerCase(),x=!0}}function T(l){var x=M(l);if(typeof x!="string"&&(w.isEncoding===f||!f(l)))throw new Error("Unknown encoding: "+l);return x||l}V.StringDecoder=e;function e(l){this.encoding=T(l);var x;switch(this.encoding){case"utf16le":this.text=o,this.end=y,x=4;break;case"utf8":this.fillLast=t,x=4;break;case"base64":this.text=d,this.end=p,x=3;break;default:this.write=c,this.end=m;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=w.allocUnsafe(x)}e.prototype.write=function(l){if(l.length===0)return"";var x,u;if(this.lastNeed){if(x=this.fillLast(l),x===void 0)return"";u=this.lastNeed,this.lastNeed=0}else u=0;return u<l.length?x?x+this.text(l,u):this.text(l,u):x||""},e.prototype.end=s,e.prototype.text=h,e.prototype.fillLast=function(l){if(this.lastNeed<=l.length)return l.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);l.copy(this.lastChar,this.lastTotal-this.lastNeed,0,l.length),this.lastNeed-=l.length};function a(l){return l<=127?0:l>>5===6?2:l>>4===14?3:l>>3===30?4:l>>6===2?-1:-2}function n(l,x,u){var A=x.length-1;if(A<u)return 0;var _=a(x[A]);return _>=0?(_>0&&(l.lastNeed=_-1),_):--A<u||_===-2?0:(_=a(x[A]),_>=0?(_>0&&(l.lastNeed=_-2),_):--A<u||_===-2?0:(_=a(x[A]),_>=0?(_>0&&(_===2?_=0:l.lastNeed=_-3),_):0))}function r(l,x,u){if((x[0]&192)!==128)return l.lastNeed=0,"\uFFFD";if(l.lastNeed>1&&x.length>1){if((x[1]&192)!==128)return l.lastNeed=1,"\uFFFD";if(l.lastNeed>2&&x.length>2&&(x[2]&192)!==128)return l.lastNeed=2,"\uFFFD"}}function t(l){var x=this.lastTotal-this.lastNeed,u=r(this,l);if(u!==void 0)return u;if(this.lastNeed<=l.length)return l.copy(this.lastChar,x,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);l.copy(this.lastChar,x,0,l.length),this.lastNeed-=l.length}function h(l,x){var u=n(this,l,x);if(!this.lastNeed)return l.toString("utf8",x);this.lastTotal=u;var A=l.length-(u-this.lastNeed);return l.copy(this.lastChar,0,A),l.toString("utf8",x,A)}function s(l){var x=l&&l.length?this.write(l):"";return this.lastNeed?x+"\uFFFD":x}function o(l,x){if((l.length-x)%2===0){var u=l.toString("utf16le",x);if(u){var A=u.charCodeAt(u.length-1);if(A>=55296&&A<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=l[l.length-2],this.lastChar[1]=l[l.length-1],u.slice(0,-1)}return u}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=l[l.length-1],l.toString("utf16le",x,l.length-1)}function y(l){var x=l&&l.length?this.write(l):"";if(this.lastNeed){var u=this.lastTotal-this.lastNeed;return x+this.lastChar.toString("utf16le",0,u)}return x}function d(l,x){var u=(l.length-x)%3;return u===0?l.toString("base64",x):(this.lastNeed=3-u,this.lastTotal=3,u===1?this.lastChar[0]=l[l.length-1]:(this.lastChar[0]=l[l.length-2],this.lastChar[1]=l[l.length-1]),l.toString("base64",x,l.length-u))}function p(l){var x=l&&l.length?this.write(l):"";return this.lastNeed?x+this.lastChar.toString("base64",0,3-this.lastNeed):x}function c(l){return l.toString(this.encoding)}function m(l){return l&&l.length?this.write(l):""}},{"safe-buffer":285}],302:[function(i,U,V){(function(w,f){(function(){var M=i("assert"),T=i("debug")("stream-parser");U.exports=t;var e=-1,a=0,n=1,r=2;function t(u){var A=u&&typeof u._transform=="function",_=u&&typeof u._write=="function";if(!A&&!_)throw new Error("must pass a Writable or Transform stream in");T("extending Parser into stream"),u._bytes=s,u._skipBytes=o,A&&(u._passthrough=y),A?u._transform=p:u._write=d}function h(u){T("initializing parser stream"),u._parserBytesLeft=0,u._parserBuffers=[],u._parserBuffered=0,u._parserState=e,u._parserCallback=null,typeof u.push=="function"&&(u._parserOutput=u.push.bind(u)),u._parserInit=!0}function s(u,A){M(!this._parserCallback,'there is already a "callback" set!'),M(isFinite(u)&&u>0,'can only buffer a finite number of bytes > 0, got "'+u+'"'),this._parserInit||h(this),T("buffering %o bytes",u),this._parserBytesLeft=u,this._parserCallback=A,this._parserState=a}function o(u,A){M(!this._parserCallback,'there is already a "callback" set!'),M(u>0,'can only skip > 0 bytes, got "'+u+'"'),this._parserInit||h(this),T("skipping %o bytes",u),this._parserBytesLeft=u,this._parserCallback=A,this._parserState=n}function y(u,A){M(!this._parserCallback,'There is already a "callback" set!'),M(u>0,'can only pass through > 0 bytes, got "'+u+'"'),this._parserInit||h(this),T("passing through %o bytes",u),this._parserBytesLeft=u,this._parserCallback=A,this._parserState=r}function d(u,A,_){this._parserInit||h(this),T("write(%o bytes)",u.length),typeof A=="function"&&(_=A),l(this,u,null,_)}function p(u,A,_){this._parserInit||h(this),T("transform(%o bytes)",u.length),typeof A!="function"&&(A=this._parserOutput),l(this,u,A,_)}function c(u,A,_,g){return u._parserBytesLeft<=0?g(new Error("got data but not currently parsing anything")):A.length<=u._parserBytesLeft?function(){return m(u,A,_,g)}:function(){var b=A.slice(0,u._parserBytesLeft);return m(u,b,_,function(v){if(v)return g(v);if(A.length>b.length)return function(){return c(u,A.slice(b.length),_,g)}})}}function m(u,A,_,g){if(u._parserBytesLeft-=A.length,T("%o bytes left for stream piece",u._parserBytesLeft),u._parserState===a?(u._parserBuffers.push(A),u._parserBuffered+=A.length):u._parserState===r&&_(A),u._parserBytesLeft===0){var b=u._parserCallback;if(b&&u._parserState===a&&u._parserBuffers.length>1&&(A=f.concat(u._parserBuffers,u._parserBuffered)),u._parserState!==a&&(A=null),u._parserCallback=null,u._parserBuffered=0,u._parserState=e,u._parserBuffers.splice(0),b){var v=[];A&&v.push(A),_&&v.push(_);var k=b.length>v.length;k&&v.push(x(g));var S=b.apply(u,v);if(!k||g===S)return g}}else return g}var l=x(c);function x(u){return function(){for(var A=u.apply(this,arguments);typeof A=="function";)A=A();return A}}}).call(this)}).call(this,i("_process"),i("buffer").Buffer)},{_process:278,assert:75,buffer:85,debug:303}],303:[function(i,U,V){(function(w){(function(){V=U.exports=i("./debug"),V.log=T,V.formatArgs=M,V.save=e,V.load=a,V.useColors=f,V.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:n(),V.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function f(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}V.formatters.j=function(r){try{return JSON.stringify(r)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}};function M(r){var t=this.useColors;if(r[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+r[0]+(t?"%c ":" ")+"+"+V.humanize(this.diff),!!t){var h="color: "+this.color;r.splice(1,0,h,"color: inherit");var s=0,o=0;r[0].replace(/%[a-zA-Z%]/g,function(y){y!=="%%"&&(s++,y==="%c"&&(o=s))}),r.splice(o,0,h)}}function T(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function e(r){try{r==null?V.storage.removeItem("debug"):V.storage.debug=r}catch{}}function a(){var r;try{r=V.storage.debug}catch{}return!r&&typeof w<"u"&&"env"in w&&(r=w.env.DEBUG),r}V.enable(a());function n(){try{return window.localStorage}catch{}}}).call(this)}).call(this,i("_process"))},{"./debug":304,_process:278}],304:[function(i,U,V){V=U.exports=M.debug=M.default=M,V.coerce=n,V.disable=e,V.enable=T,V.enabled=a,V.humanize=i("ms"),V.names=[],V.skips=[],V.formatters={};var w;function f(r){var t=0,h;for(h in r)t=(t<<5)-t+r.charCodeAt(h),t|=0;return V.colors[Math.abs(t)%V.colors.length]}function M(r){function t(){if(!!t.enabled){var h=t,s=+new Date,o=s-(w||s);h.diff=o,h.prev=w,h.curr=s,w=s;for(var y=new Array(arguments.length),d=0;d<y.length;d++)y[d]=arguments[d];y[0]=V.coerce(y[0]),typeof y[0]!="string"&&y.unshift("%O");var p=0;y[0]=y[0].replace(/%([a-zA-Z%])/g,function(m,l){if(m==="%%")return m;p++;var x=V.formatters[l];if(typeof x=="function"){var u=y[p];m=x.call(h,u),y.splice(p,1),p--}return m}),V.formatArgs.call(h,y);var c=t.log||V.log||console.log.bind(console);c.apply(h,y)}}return t.namespace=r,t.enabled=V.enabled(r),t.useColors=V.useColors(),t.color=f(r),typeof V.init=="function"&&V.init(t),t}function T(r){V.save(r),V.names=[],V.skips=[];for(var t=(typeof r=="string"?r:"").split(/[\s,]+/),h=t.length,s=0;s<h;s++)!t[s]||(r=t[s].replace(/\*/g,".*?"),r[0]==="-"?V.skips.push(new RegExp("^"+r.substr(1)+"$")):V.names.push(new RegExp("^"+r+"$")))}function e(){V.enable("")}function a(r){var t,h;for(t=0,h=V.skips.length;t<h;t++)if(V.skips[t].test(r))return!1;for(t=0,h=V.names.length;t<h;t++)if(V.names[t].test(r))return!0;return!1}function n(r){return r instanceof Error?r.stack||r.message:r}},{ms:305}],305:[function(i,U,V){var w=1e3,f=w*60,M=f*60,T=M*24,e=T*365.25;U.exports=function(h,s){s=s||{};var o=typeof h;if(o==="string"&&h.length>0)return a(h);if(o==="number"&&isNaN(h)===!1)return s.long?r(h):n(h);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(h))};function a(h){if(h=String(h),!(h.length>100)){var s=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(h);if(!!s){var o=parseFloat(s[1]),y=(s[2]||"ms").toLowerCase();switch(y){case"years":case"year":case"yrs":case"yr":case"y":return o*e;case"days":case"day":case"d":return o*T;case"hours":case"hour":case"hrs":case"hr":case"h":return o*M;case"minutes":case"minute":case"mins":case"min":case"m":return o*f;case"seconds":case"second":case"secs":case"sec":case"s":return o*w;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}}}function n(h){return h>=T?Math.round(h/T)+"d":h>=M?Math.round(h/M)+"h":h>=f?Math.round(h/f)+"m":h>=w?Math.round(h/w)+"s":h+"ms"}function r(h){return t(h,T,"day")||t(h,M,"hour")||t(h,f,"minute")||t(h,w,"second")||h+" ms"}function t(h,s,o){if(!(h<s))return h<s*1.5?Math.floor(h/s)+" "+o:Math.ceil(h/s)+" "+o+"s"}},{}],306:[function(i,U,V){var w=i("parenthesis");U.exports=function(M,T,e){if(M==null)throw Error("First argument should be a string");if(T==null)throw Error("Separator should be a string or a RegExp");e?(typeof e=="string"||Array.isArray(e))&&(e={ignore:e}):e={},e.escape==null&&(e.escape=!0),e.ignore==null?e.ignore=["[]","()","{}","<>",'""',"''","``","\u201C\u201D","\xAB\xBB"]:(typeof e.ignore=="string"&&(e.ignore=[e.ignore]),e.ignore=e.ignore.map(function(y){return y.length===1&&(y=y+y),y}));var a=w.parse(M,{flat:!0,brackets:e.ignore}),n=a[0],r=n.split(T);if(e.escape){for(var t=[],h=0;h<r.length;h++){var s=r[h],o=r[h+1];s[s.length-1]==="\\"&&s[s.length-2]!=="\\"?(t.push(s+T+o),h++):t.push(s)}r=t}for(var h=0;h<r.length;h++)a[0]=r[h],r[h]=w.stringify(a,{flat:!0});return r}},{parenthesis:248}],307:[function(i,U,V){U.exports=w;function w(f){for(var M=f.length,T=new Array(M),e=new Array(M),a=new Array(M),n=new Array(M),r=new Array(M),t=new Array(M),h=0;h<M;++h)T[h]=-1,e[h]=0,a[h]=!1,n[h]=0,r[h]=-1,t[h]=[];var s=0,o=[],y=[];function d(l){var x=[l],u=[l];for(T[l]=e[l]=s,a[l]=!0,s+=1;u.length>0;){l=u[u.length-1];var A=f[l];if(n[l]<A.length){for(var _=n[l];_<A.length;++_){var g=A[_];if(T[g]<0){T[g]=e[g]=s,a[g]=!0,s+=1,x.push(g),u.push(g);break}else a[g]&&(e[l]=Math.min(e[l],e[g])|0);r[g]>=0&&t[l].push(r[g])}n[l]=_}else{if(e[l]===T[l]){for(var b=[],v=[],k=0,_=x.length-1;_>=0;--_){var S=x[_];if(a[S]=!1,b.push(S),v.push(t[S]),k+=t[S].length,r[S]=o.length,S===l){x.length=_;break}}o.push(b);for(var E=new Array(k),_=0;_<v.length;_++)for(var C=0;C<v[_].length;C++)E[--k]=v[_][C];y.push(E)}u.pop()}}}for(var h=0;h<M;++h)T[h]<0&&d(h);for(var p,h=0;h<y.length;h++){var c=y[h];if(c.length!==0){c.sort(function(x,u){return x-u}),p=[c[0]];for(var m=1;m<c.length;m++)c[m]!==c[m-1]&&p.push(c[m]);y[h]=p}}return{components:o,adjacencyList:y}}},{}],308:[function(i,U,V){Object.defineProperty(V,"__esModule",{value:!0});var w=function(){function r(t,h){var s=[],o=!0,y=!1,d=void 0;try{for(var p=t[Symbol.iterator](),c;!(o=(c=p.next()).done)&&(s.push(c.value),!(h&&s.length===h));o=!0);}catch(m){y=!0,d=m}finally{try{!o&&p.return&&p.return()}finally{if(y)throw d}}return s}return function(t,h){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return r(t,h);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f=Math.PI*2,M=function(t,h,s,o,y,d,p){var c=t.x,m=t.y;c*=h,m*=s;var l=o*c-y*m,x=y*c+o*m;return{x:l+d,y:x+p}},T=function(t,h){var s=h===1.5707963267948966?.551915024494:h===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(h/4),o=Math.cos(t),y=Math.sin(t),d=Math.cos(t+h),p=Math.sin(t+h);return[{x:o-y*s,y:y+o*s},{x:d+p*s,y:p-d*s},{x:d,y:p}]},e=function(t,h,s,o){var y=t*o-h*s<0?-1:1,d=t*s+h*o;return d>1&&(d=1),d<-1&&(d=-1),y*Math.acos(d)},a=function(t,h,s,o,y,d,p,c,m,l,x,u){var A=Math.pow(y,2),_=Math.pow(d,2),g=Math.pow(x,2),b=Math.pow(u,2),v=A*_-A*b-_*g;v<0&&(v=0),v/=A*b+_*g,v=Math.sqrt(v)*(p===c?-1:1);var k=v*y/d*u,S=v*-d/y*x,E=l*k-m*S+(t+s)/2,C=m*k+l*S+(h+o)/2,F=(x-k)/y,I=(u-S)/d,D=(-x-k)/y,R=(-u-S)/d,O=e(1,0,F,I),z=e(F,I,D,R);return c===0&&z>0&&(z-=f),c===1&&z<0&&(z+=f),[E,C,O,z]},n=function(t){var h=t.px,s=t.py,o=t.cx,y=t.cy,d=t.rx,p=t.ry,c=t.xAxisRotation,m=c===void 0?0:c,l=t.largeArcFlag,x=l===void 0?0:l,u=t.sweepFlag,A=u===void 0?0:u,_=[];if(d===0||p===0)return[];var g=Math.sin(m*f/360),b=Math.cos(m*f/360),v=b*(h-o)/2+g*(s-y)/2,k=-g*(h-o)/2+b*(s-y)/2;if(v===0&&k===0)return[];d=Math.abs(d),p=Math.abs(p);var S=Math.pow(v,2)/Math.pow(d,2)+Math.pow(k,2)/Math.pow(p,2);S>1&&(d*=Math.sqrt(S),p*=Math.sqrt(S));var E=a(h,s,o,y,d,p,x,A,g,b,v,k),C=w(E,4),F=C[0],I=C[1],D=C[2],R=C[3],O=Math.abs(R)/(f/4);Math.abs(1-O)<1e-7&&(O=1);var z=Math.max(Math.ceil(O),1);R/=z;for(var B=0;B<z;B++)_.push(T(D,R)),D+=R;return _.map(function(G){var Q=M(G[0],d,p,b,g,F,I),X=Q.x,j=Q.y,re=M(G[1],d,p,b,g,F,I),ue=re.x,K=re.y,te=M(G[2],d,p,b,g,F,I),Y=te.x,H=te.y;return{x1:X,y1:j,x2:ue,y2:K,x:Y,y:H}})};V.default=n,U.exports=V.default},{}],309:[function(i,U,V){var w=i("parse-svg-path"),f=i("abs-svg-path"),M=i("normalize-svg-path"),T=i("is-svg-path"),e=i("assert");U.exports=a;function a(n){if(Array.isArray(n)&&n.length===1&&typeof n[0]=="string"&&(n=n[0]),typeof n=="string"&&(e(T(n),"String is not an SVG path."),n=w(n)),e(Array.isArray(n),"Argument should be a string or an array of path segments."),n=f(n),n=M(n),!n.length)return[0,0,0,0];for(var r=[1/0,1/0,-1/0,-1/0],t=0,h=n.length;t<h;t++)for(var s=n[t].slice(1),o=0;o<s.length;o+=2)s[o+0]<r[0]&&(r[0]=s[o+0]),s[o+1]<r[1]&&(r[1]=s[o+1]),s[o+0]>r[2]&&(r[2]=s[o+0]),s[o+1]>r[3]&&(r[3]=s[o+1]);return r}},{"abs-svg-path":70,assert:75,"is-svg-path":238,"normalize-svg-path":310,"parse-svg-path":250}],310:[function(i,U,V){U.exports=f;var w=i("svg-arc-to-cubic-bezier");function f(e){for(var a,n=[],r=0,t=0,h=0,s=0,o=null,y=null,d=0,p=0,c=0,m=e.length;c<m;c++){var l=e[c],x=l[0];switch(x){case"M":h=l[1],s=l[2];break;case"A":var u=w({px:d,py:p,cx:l[6],cy:l[7],rx:l[1],ry:l[2],xAxisRotation:l[3],largeArcFlag:l[4],sweepFlag:l[5]});if(!u.length)continue;for(var A=0,_;A<u.length;A++)_=u[A],l=["C",_.x1,_.y1,_.x2,_.y2,_.x,_.y],A<u.length-1&&n.push(l);break;case"S":var g=d,b=p;(a=="C"||a=="S")&&(g+=g-r,b+=b-t),l=["C",g,b,l[1],l[2],l[3],l[4]];break;case"T":a=="Q"||a=="T"?(o=d*2-o,y=p*2-y):(o=d,y=p),l=T(d,p,o,y,l[1],l[2]);break;case"Q":o=l[1],y=l[2],l=T(d,p,l[1],l[2],l[3],l[4]);break;case"L":l=M(d,p,l[1],l[2]);break;case"H":l=M(d,p,l[1],p);break;case"V":l=M(d,p,d,l[1]);break;case"Z":l=M(d,p,h,s);break}a=x,d=l[l.length-2],p=l[l.length-1],l.length>4?(r=l[l.length-4],t=l[l.length-3]):(r=d,t=p),n.push(l)}return n}function M(e,a,n,r){return["C",e,a,n,r,n,r]}function T(e,a,n,r,t,h){return["C",e/3+2/3*n,a/3+2/3*r,t/3+2/3*n,h/3+2/3*r,t,h]}},{"svg-arc-to-cubic-bezier":308}],311:[function(i,U,V){var w=i("svg-path-bounds"),f=i("parse-svg-path"),M=i("draw-svg-path"),T=i("is-svg-path"),e=i("bitmap-sdf"),a=document.createElement("canvas"),n=a.getContext("2d");U.exports=r;function r(s,o){if(!T(s))throw Error("Argument should be valid svg path string");o||(o={});var y,d;o.shape?(y=o.shape[0],d=o.shape[1]):(y=a.width=o.w||o.width||200,d=a.height=o.h||o.height||200);var p=Math.min(y,d),c=o.stroke||0,m=o.viewbox||o.viewBox||w(s),l=[y/(m[2]-m[0]),d/(m[3]-m[1])],x=Math.min(l[0]||0,l[1]||0)/2;if(n.fillStyle="black",n.fillRect(0,0,y,d),n.fillStyle="white",c&&(typeof c!="number"&&(c=1),c>0?n.strokeStyle="white":n.strokeStyle="black",n.lineWidth=Math.abs(c)),n.translate(y*.5,d*.5),n.scale(x,x),h()){var u=new Path2D(s);n.fill(u),c&&n.stroke(u)}else{var A=f(s);M(n,A),n.fill(),c&&n.stroke()}n.setTransform(1,0,0,1,0,0);var _=e(n,{cutoff:o.cutoff!=null?o.cutoff:.5,radius:o.radius!=null?o.radius:p*.5});return _}var t;function h(){if(t!=null)return t;var s=document.createElement("canvas").getContext("2d");if(s.canvas.width=s.canvas.height=1,!window.Path2D)return t=!1;var o=new Path2D("M0,0h1v1h-1v-1Z");s.fillStyle="black",s.fill(o);var y=s.getImageData(0,0,1,1);return t=y&&y.data&&y.data[3]===255}},{"bitmap-sdf":82,"draw-svg-path":126,"is-svg-path":238,"parse-svg-path":250,"svg-path-bounds":309}],312:[function(i,U,V){(function(w,f){(function(){var M=i("process/browser.js").nextTick,T=Function.prototype.apply,e=Array.prototype.slice,a={},n=0;V.setTimeout=function(){return new r(T.call(setTimeout,window,arguments),clearTimeout)},V.setInterval=function(){return new r(T.call(setInterval,window,arguments),clearInterval)},V.clearTimeout=V.clearInterval=function(t){t.close()};function r(t,h){this._id=t,this._clearFn=h}r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},V.enroll=function(t,h){clearTimeout(t._idleTimeoutId),t._idleTimeout=h},V.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},V._unrefActive=V.active=function(t){clearTimeout(t._idleTimeoutId);var h=t._idleTimeout;h>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},h))},V.setImmediate=typeof w=="function"?w:function(t){var h=n++,s=arguments.length<2?!1:e.call(arguments,1);return a[h]=!0,M(function(){a[h]&&(s?t.apply(null,s):t.call(null),V.clearImmediate(h))}),h},V.clearImmediate=typeof f=="function"?f:function(t){delete a[t]}}).call(this)}).call(this,i("timers").setImmediate,i("timers").clearImmediate)},{"process/browser.js":278,timers:312}],313:[function(i,U,V){(function(w){var f=/^\s+/,M=/\s+$/,T=0,e=w.round,a=w.min,n=w.max,r=w.random;function t(Z,q){if(Z=Z||"",q=q||{},Z instanceof t)return Z;if(!(this instanceof t))return new t(Z,q);var ie=h(Z);this._originalInput=Z,this._r=ie.r,this._g=ie.g,this._b=ie.b,this._a=ie.a,this._roundA=e(100*this._a)/100,this._format=q.format||ie.format,this._gradientType=q.gradientType,this._r<1&&(this._r=e(this._r)),this._g<1&&(this._g=e(this._g)),this._b<1&&(this._b=e(this._b)),this._ok=ie.ok,this._tc_id=T++}t.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var Z=this.toRgb();return(Z.r*299+Z.g*587+Z.b*114)/1e3},getLuminance:function(){var Z=this.toRgb(),q,ie,se,ae,oe,be;return q=Z.r/255,ie=Z.g/255,se=Z.b/255,q<=.03928?ae=q/12.92:ae=w.pow((q+.055)/1.055,2.4),ie<=.03928?oe=ie/12.92:oe=w.pow((ie+.055)/1.055,2.4),se<=.03928?be=se/12.92:be=w.pow((se+.055)/1.055,2.4),.2126*ae+.7152*oe+.0722*be},setAlpha:function(Z){return this._a=z(Z),this._roundA=e(100*this._a)/100,this},toHsv:function(){var Z=d(this._r,this._g,this._b);return{h:Z.h*360,s:Z.s,v:Z.v,a:this._a}},toHsvString:function(){var Z=d(this._r,this._g,this._b),q=e(Z.h*360),ie=e(Z.s*100),se=e(Z.v*100);return this._a==1?"hsv("+q+", "+ie+"%, "+se+"%)":"hsva("+q+", "+ie+"%, "+se+"%, "+this._roundA+")"},toHsl:function(){var Z=o(this._r,this._g,this._b);return{h:Z.h*360,s:Z.s,l:Z.l,a:this._a}},toHslString:function(){var Z=o(this._r,this._g,this._b),q=e(Z.h*360),ie=e(Z.s*100),se=e(Z.l*100);return this._a==1?"hsl("+q+", "+ie+"%, "+se+"%)":"hsla("+q+", "+ie+"%, "+se+"%, "+this._roundA+")"},toHex:function(Z){return c(this._r,this._g,this._b,Z)},toHexString:function(Z){return"#"+this.toHex(Z)},toHex8:function(Z){return m(this._r,this._g,this._b,this._a,Z)},toHex8String:function(Z){return"#"+this.toHex8(Z)},toRgb:function(){return{r:e(this._r),g:e(this._g),b:e(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+e(this._r)+", "+e(this._g)+", "+e(this._b)+")":"rgba("+e(this._r)+", "+e(this._g)+", "+e(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:e(B(this._r,255)*100)+"%",g:e(B(this._g,255)*100)+"%",b:e(B(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+e(B(this._r,255)*100)+"%, "+e(B(this._g,255)*100)+"%, "+e(B(this._b,255)*100)+"%)":"rgba("+e(B(this._r,255)*100)+"%, "+e(B(this._g,255)*100)+"%, "+e(B(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:R[c(this._r,this._g,this._b,!0)]||!1},toFilter:function(Z){var q="#"+l(this._r,this._g,this._b,this._a),ie=q,se=this._gradientType?"GradientType = 1, ":"";if(Z){var ae=t(Z);ie="#"+l(ae._r,ae._g,ae._b,ae._a)}return"progid:DXImageTransform.Microsoft.gradient("+se+"startColorstr="+q+",endColorstr="+ie+")"},toString:function(Z){var q=!!Z;Z=Z||this._format;var ie=!1,se=this._a<1&&this._a>=0,ae=!q&&se&&(Z==="hex"||Z==="hex6"||Z==="hex3"||Z==="hex4"||Z==="hex8"||Z==="name");return ae?Z==="name"&&this._a===0?this.toName():this.toRgbString():(Z==="rgb"&&(ie=this.toRgbString()),Z==="prgb"&&(ie=this.toPercentageRgbString()),(Z==="hex"||Z==="hex6")&&(ie=this.toHexString()),Z==="hex3"&&(ie=this.toHexString(!0)),Z==="hex4"&&(ie=this.toHex8String(!0)),Z==="hex8"&&(ie=this.toHex8String()),Z==="name"&&(ie=this.toName()),Z==="hsl"&&(ie=this.toHslString()),Z==="hsv"&&(ie=this.toHsvString()),ie||this.toHexString())},clone:function(){return t(this.toString())},_applyModification:function(Z,q){var ie=Z.apply(null,[this].concat([].slice.call(q)));return this._r=ie._r,this._g=ie._g,this._b=ie._b,this.setAlpha(ie._a),this},lighten:function(){return this._applyModification(_,arguments)},brighten:function(){return this._applyModification(g,arguments)},darken:function(){return this._applyModification(b,arguments)},desaturate:function(){return this._applyModification(x,arguments)},saturate:function(){return this._applyModification(u,arguments)},greyscale:function(){return this._applyModification(A,arguments)},spin:function(){return this._applyModification(v,arguments)},_applyCombination:function(Z,q){return Z.apply(null,[this].concat([].slice.call(q)))},analogous:function(){return this._applyCombination(F,arguments)},complement:function(){return this._applyCombination(k,arguments)},monochromatic:function(){return this._applyCombination(I,arguments)},splitcomplement:function(){return this._applyCombination(C,arguments)},triad:function(){return this._applyCombination(S,arguments)},tetrad:function(){return this._applyCombination(E,arguments)}},t.fromRatio=function(Z,q){if(typeof Z=="object"){var ie={};for(var se in Z)Z.hasOwnProperty(se)&&(se==="a"?ie[se]=Z[se]:ie[se]=ue(Z[se]));Z=ie}return t(Z,q)};function h(Z){var q={r:0,g:0,b:0},ie=1,se=null,ae=null,oe=null,be=!1,ce=!1;return typeof Z=="string"&&(Z=ee(Z)),typeof Z=="object"&&(H(Z.r)&&H(Z.g)&&H(Z.b)?(q=s(Z.r,Z.g,Z.b),be=!0,ce=String(Z.r).substr(-1)==="%"?"prgb":"rgb"):H(Z.h)&&H(Z.s)&&H(Z.v)?(se=ue(Z.s),ae=ue(Z.v),q=p(Z.h,se,ae),be=!0,ce="hsv"):H(Z.h)&&H(Z.s)&&H(Z.l)&&(se=ue(Z.s),oe=ue(Z.l),q=y(Z.h,se,oe),be=!0,ce="hsl"),Z.hasOwnProperty("a")&&(ie=Z.a)),ie=z(ie),{ok:be,format:Z.format||ce,r:a(255,n(q.r,0)),g:a(255,n(q.g,0)),b:a(255,n(q.b,0)),a:ie}}function s(Z,q,ie){return{r:B(Z,255)*255,g:B(q,255)*255,b:B(ie,255)*255}}function o(Z,q,ie){Z=B(Z,255),q=B(q,255),ie=B(ie,255);var se=n(Z,q,ie),ae=a(Z,q,ie),oe,be,ce=(se+ae)/2;if(se==ae)oe=be=0;else{var de=se-ae;switch(be=ce>.5?de/(2-se-ae):de/(se+ae),se){case Z:oe=(q-ie)/de+(q<ie?6:0);break;case q:oe=(ie-Z)/de+2;break;case ie:oe=(Z-q)/de+4;break}oe/=6}return{h:oe,s:be,l:ce}}function y(Z,q,ie){var se,ae,oe;Z=B(Z,360),q=B(q,100),ie=B(ie,100);function be(ye,ge,me){return me<0&&(me+=1),me>1&&(me-=1),me<1/6?ye+(ge-ye)*6*me:me<1/2?ge:me<2/3?ye+(ge-ye)*(2/3-me)*6:ye}if(q===0)se=ae=oe=ie;else{var ce=ie<.5?ie*(1+q):ie+q-ie*q,de=2*ie-ce;se=be(de,ce,Z+1/3),ae=be(de,ce,Z),oe=be(de,ce,Z-1/3)}return{r:se*255,g:ae*255,b:oe*255}}function d(Z,q,ie){Z=B(Z,255),q=B(q,255),ie=B(ie,255);var se=n(Z,q,ie),ae=a(Z,q,ie),oe,be,ce=se,de=se-ae;if(be=se===0?0:de/se,se==ae)oe=0;else{switch(se){case Z:oe=(q-ie)/de+(q<ie?6:0);break;case q:oe=(ie-Z)/de+2;break;case ie:oe=(Z-q)/de+4;break}oe/=6}return{h:oe,s:be,v:ce}}function p(Z,q,ie){Z=B(Z,360)*6,q=B(q,100),ie=B(ie,100);var se=w.floor(Z),ae=Z-se,oe=ie*(1-q),be=ie*(1-ae*q),ce=ie*(1-(1-ae)*q),de=se%6,ye=[ie,be,oe,oe,ce,ie][de],ge=[ce,ie,ie,be,oe,oe][de],me=[oe,oe,ce,ie,ie,be][de];return{r:ye*255,g:ge*255,b:me*255}}function c(Z,q,ie,se){var ae=[re(e(Z).toString(16)),re(e(q).toString(16)),re(e(ie).toString(16))];return se&&ae[0].charAt(0)==ae[0].charAt(1)&&ae[1].charAt(0)==ae[1].charAt(1)&&ae[2].charAt(0)==ae[2].charAt(1)?ae[0].charAt(0)+ae[1].charAt(0)+ae[2].charAt(0):ae.join("")}function m(Z,q,ie,se,ae){var oe=[re(e(Z).toString(16)),re(e(q).toString(16)),re(e(ie).toString(16)),re(K(se))];return ae&&oe[0].charAt(0)==oe[0].charAt(1)&&oe[1].charAt(0)==oe[1].charAt(1)&&oe[2].charAt(0)==oe[2].charAt(1)&&oe[3].charAt(0)==oe[3].charAt(1)?oe[0].charAt(0)+oe[1].charAt(0)+oe[2].charAt(0)+oe[3].charAt(0):oe.join("")}function l(Z,q,ie,se){var ae=[re(K(se)),re(e(Z).toString(16)),re(e(q).toString(16)),re(e(ie).toString(16))];return ae.join("")}t.equals=function(Z,q){return!Z||!q?!1:t(Z).toRgbString()==t(q).toRgbString()},t.random=function(){return t.fromRatio({r:r(),g:r(),b:r()})};function x(Z,q){q=q===0?0:q||10;var ie=t(Z).toHsl();return ie.s-=q/100,ie.s=G(ie.s),t(ie)}function u(Z,q){q=q===0?0:q||10;var ie=t(Z).toHsl();return ie.s+=q/100,ie.s=G(ie.s),t(ie)}function A(Z){return t(Z).desaturate(100)}function _(Z,q){q=q===0?0:q||10;var ie=t(Z).toHsl();return ie.l+=q/100,ie.l=G(ie.l),t(ie)}function g(Z,q){q=q===0?0:q||10;var ie=t(Z).toRgb();return ie.r=n(0,a(255,ie.r-e(255*-(q/100)))),ie.g=n(0,a(255,ie.g-e(255*-(q/100)))),ie.b=n(0,a(255,ie.b-e(255*-(q/100)))),t(ie)}function b(Z,q){q=q===0?0:q||10;var ie=t(Z).toHsl();return ie.l-=q/100,ie.l=G(ie.l),t(ie)}function v(Z,q){var ie=t(Z).toHsl(),se=(ie.h+q)%360;return ie.h=se<0?360+se:se,t(ie)}function k(Z){var q=t(Z).toHsl();return q.h=(q.h+180)%360,t(q)}function S(Z){var q=t(Z).toHsl(),ie=q.h;return[t(Z),t({h:(ie+120)%360,s:q.s,l:q.l}),t({h:(ie+240)%360,s:q.s,l:q.l})]}function E(Z){var q=t(Z).toHsl(),ie=q.h;return[t(Z),t({h:(ie+90)%360,s:q.s,l:q.l}),t({h:(ie+180)%360,s:q.s,l:q.l}),t({h:(ie+270)%360,s:q.s,l:q.l})]}function C(Z){var q=t(Z).toHsl(),ie=q.h;return[t(Z),t({h:(ie+72)%360,s:q.s,l:q.l}),t({h:(ie+216)%360,s:q.s,l:q.l})]}function F(Z,q,ie){q=q||6,ie=ie||30;var se=t(Z).toHsl(),ae=360/ie,oe=[t(Z)];for(se.h=(se.h-(ae*q>>1)+720)%360;--q;)se.h=(se.h+ae)%360,oe.push(t(se));return oe}function I(Z,q){q=q||6;for(var ie=t(Z).toHsv(),se=ie.h,ae=ie.s,oe=ie.v,be=[],ce=1/q;q--;)be.push(t({h:se,s:ae,v:oe})),oe=(oe+ce)%1;return be}t.mix=function(Z,q,ie){ie=ie===0?0:ie||50;var se=t(Z).toRgb(),ae=t(q).toRgb(),oe=ie/100,be={r:(ae.r-se.r)*oe+se.r,g:(ae.g-se.g)*oe+se.g,b:(ae.b-se.b)*oe+se.b,a:(ae.a-se.a)*oe+se.a};return t(be)},t.readability=function(Z,q){var ie=t(Z),se=t(q);return(w.max(ie.getLuminance(),se.getLuminance())+.05)/(w.min(ie.getLuminance(),se.getLuminance())+.05)},t.isReadable=function(Z,q,ie){var se=t.readability(Z,q),ae,oe;switch(oe=!1,ae=ne(ie),ae.level+ae.size){case"AAsmall":case"AAAlarge":oe=se>=4.5;break;case"AAlarge":oe=se>=3;break;case"AAAsmall":oe=se>=7;break}return oe},t.mostReadable=function(Z,q,ie){var se=null,ae=0,oe,be,ce,de;ie=ie||{},be=ie.includeFallbackColors,ce=ie.level,de=ie.size;for(var ye=0;ye<q.length;ye++)oe=t.readability(Z,q[ye]),oe>ae&&(ae=oe,se=t(q[ye]));return t.isReadable(Z,se,{level:ce,size:de})||!be?se:(ie.includeFallbackColors=!1,t.mostReadable(Z,["#fff","#000"],ie))};var D=t.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},R=t.hexNames=O(D);function O(Z){var q={};for(var ie in Z)Z.hasOwnProperty(ie)&&(q[Z[ie]]=ie);return q}function z(Z){return Z=parseFloat(Z),(isNaN(Z)||Z<0||Z>1)&&(Z=1),Z}function B(Z,q){X(Z)&&(Z="100%");var ie=j(Z);return Z=a(q,n(0,parseFloat(Z))),ie&&(Z=parseInt(Z*q,10)/100),w.abs(Z-q)<1e-6?1:Z%q/parseFloat(q)}function G(Z){return a(1,n(0,Z))}function Q(Z){return parseInt(Z,16)}function X(Z){return typeof Z=="string"&&Z.indexOf(".")!=-1&&parseFloat(Z)===1}function j(Z){return typeof Z=="string"&&Z.indexOf("%")!=-1}function re(Z){return Z.length==1?"0"+Z:""+Z}function ue(Z){return Z<=1&&(Z=Z*100+"%"),Z}function K(Z){return w.round(parseFloat(Z)*255).toString(16)}function te(Z){return Q(Z)/255}var Y=function(){var Z="[-\\+]?\\d+%?",q="[-\\+]?\\d*\\.\\d+%?",ie="(?:"+q+")|(?:"+Z+")",se="[\\s|\\(]+("+ie+")[,|\\s]+("+ie+")[,|\\s]+("+ie+")\\s*\\)?",ae="[\\s|\\(]+("+ie+")[,|\\s]+("+ie+")[,|\\s]+("+ie+")[,|\\s]+("+ie+")\\s*\\)?";return{CSS_UNIT:new RegExp(ie),rgb:new RegExp("rgb"+se),rgba:new RegExp("rgba"+ae),hsl:new RegExp("hsl"+se),hsla:new RegExp("hsla"+ae),hsv:new RegExp("hsv"+se),hsva:new RegExp("hsva"+ae),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function H(Z){return!!Y.CSS_UNIT.exec(Z)}function ee(Z){Z=Z.replace(f,"").replace(M,"").toLowerCase();var q=!1;if(D[Z])Z=D[Z],q=!0;else if(Z=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var ie;return(ie=Y.rgb.exec(Z))?{r:ie[1],g:ie[2],b:ie[3]}:(ie=Y.rgba.exec(Z))?{r:ie[1],g:ie[2],b:ie[3],a:ie[4]}:(ie=Y.hsl.exec(Z))?{h:ie[1],s:ie[2],l:ie[3]}:(ie=Y.hsla.exec(Z))?{h:ie[1],s:ie[2],l:ie[3],a:ie[4]}:(ie=Y.hsv.exec(Z))?{h:ie[1],s:ie[2],v:ie[3]}:(ie=Y.hsva.exec(Z))?{h:ie[1],s:ie[2],v:ie[3],a:ie[4]}:(ie=Y.hex8.exec(Z))?{r:Q(ie[1]),g:Q(ie[2]),b:Q(ie[3]),a:te(ie[4]),format:q?"name":"hex8"}:(ie=Y.hex6.exec(Z))?{r:Q(ie[1]),g:Q(ie[2]),b:Q(ie[3]),format:q?"name":"hex"}:(ie=Y.hex4.exec(Z))?{r:Q(ie[1]+""+ie[1]),g:Q(ie[2]+""+ie[2]),b:Q(ie[3]+""+ie[3]),a:te(ie[4]+""+ie[4]),format:q?"name":"hex8"}:(ie=Y.hex3.exec(Z))?{r:Q(ie[1]+""+ie[1]),g:Q(ie[2]+""+ie[2]),b:Q(ie[3]+""+ie[3]),format:q?"name":"hex"}:!1}function ne(Z){var q,ie;return Z=Z||{level:"AA",size:"small"},q=(Z.level||"AA").toUpperCase(),ie=(Z.size||"small").toLowerCase(),q!=="AA"&&q!=="AAA"&&(q="AA"),ie!=="small"&&ie!=="large"&&(ie="small"),{level:q,size:ie}}typeof U<"u"&&U.exports?U.exports=t:window.tinycolor=t})(Math)},{}],314:[function(i,U,V){U.exports=M,U.exports.float32=U.exports.float=M,U.exports.fract32=U.exports.fract=f;var w=new Float32Array(1);function f(T,e){if(T.length){if(T instanceof Float32Array)return new Float32Array(T.length);e instanceof Float32Array||(e=M(T));for(var a=0,n=e.length;a<n;a++)e[a]=T[a]-e[a];return e}return M(T-M(T))}function M(T){return T.length?T instanceof Float32Array?T:new Float32Array(T):(w[0]=T,w[0])}},{}],315:[function(i,U,V){var w=i("parse-unit");U.exports=e;var f=96;function M(a,n){var r=w(getComputedStyle(a).getPropertyValue(n));return r[0]*e(r[1],a)}function T(a,n){var r=document.createElement("div");r.style["font-size"]="128"+a,n.appendChild(r);var t=M(r,"font-size")/128;return n.removeChild(r),t}function e(a,n){switch(n=n||document.body,a=(a||"px").trim().toLowerCase(),(n===window||n===document)&&(n=document.body),a){case"%":return n.clientHeight/100;case"ch":case"ex":return T(a,n);case"em":return M(n,"font-size");case"rem":return M(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return f;case"cm":return f/2.54;case"mm":return f/25.4;case"pt":return f/72;case"pc":return f/6}return 1}},{"parse-unit":251}],316:[function(i,U,V){(function(w,f){typeof V=="object"&&typeof U<"u"?f(V):(w=w||self,f(w.topojson=w.topojson||{}))})(this,function(w){function f(u){return u}function M(u){if(u==null)return f;var A,_,g=u.scale[0],b=u.scale[1],v=u.translate[0],k=u.translate[1];return function(S,E){E||(A=_=0);var C=2,F=S.length,I=new Array(F);for(I[0]=(A+=S[0])*g+v,I[1]=(_+=S[1])*b+k;C<F;)I[C]=S[C],++C;return I}}function T(u){var A=M(u.transform),_,g=1/0,b=g,v=-g,k=-g;function S(C){C=A(C),C[0]<g&&(g=C[0]),C[0]>v&&(v=C[0]),C[1]<b&&(b=C[1]),C[1]>k&&(k=C[1])}function E(C){switch(C.type){case"GeometryCollection":C.geometries.forEach(E);break;case"Point":S(C.coordinates);break;case"MultiPoint":C.coordinates.forEach(S);break}}u.arcs.forEach(function(C){for(var F=-1,I=C.length,D;++F<I;)D=A(C[F],F),D[0]<g&&(g=D[0]),D[0]>v&&(v=D[0]),D[1]<b&&(b=D[1]),D[1]>k&&(k=D[1])});for(_ in u.objects)E(u.objects[_]);return[g,b,v,k]}function e(u,A){for(var _,g=u.length,b=g-A;b<--g;)_=u[b],u[b++]=u[g],u[g]=_}function a(u,A){return typeof A=="string"&&(A=u.objects[A]),A.type==="GeometryCollection"?{type:"FeatureCollection",features:A.geometries.map(function(_){return n(u,_)})}:n(u,A)}function n(u,A){var _=A.id,g=A.bbox,b=A.properties==null?{}:A.properties,v=r(u,A);return _==null&&g==null?{type:"Feature",properties:b,geometry:v}:g==null?{type:"Feature",id:_,properties:b,geometry:v}:{type:"Feature",id:_,bbox:g,properties:b,geometry:v}}function r(u,A){var _=M(u.transform),g=u.arcs;function b(F,I){I.length&&I.pop();for(var D=g[F<0?~F:F],R=0,O=D.length;R<O;++R)I.push(_(D[R],R));F<0&&e(I,O)}function v(F){return _(F)}function k(F){for(var I=[],D=0,R=F.length;D<R;++D)b(F[D],I);return I.length<2&&I.push(I[0]),I}function S(F){for(var I=k(F);I.length<4;)I.push(I[0]);return I}function E(F){return F.map(S)}function C(F){var I=F.type,D;switch(I){case"GeometryCollection":return{type:I,geometries:F.geometries.map(C)};case"Point":D=v(F.coordinates);break;case"MultiPoint":D=F.coordinates.map(v);break;case"LineString":D=k(F.arcs);break;case"MultiLineString":D=F.arcs.map(k);break;case"Polygon":D=E(F.arcs);break;case"MultiPolygon":D=F.arcs.map(E);break;default:return null}return{type:I,coordinates:D}}return C(A)}function t(u,A){var _={},g={},b={},v=[],k=-1;A.forEach(function(C,F){var I=u.arcs[C<0?~C:C],D;I.length<3&&!I[1][0]&&!I[1][1]&&(D=A[++k],A[k]=C,A[F]=D)}),A.forEach(function(C){var F=S(C),I=F[0],D=F[1],R,O;if(R=b[I])if(delete b[R.end],R.push(C),R.end=D,O=g[D]){delete g[O.start];var z=O===R?R:R.concat(O);g[z.start=R.start]=b[z.end=O.end]=z}else g[R.start]=b[R.end]=R;else if(R=g[D])if(delete g[R.start],R.unshift(C),R.start=I,O=b[I]){delete b[O.end];var B=O===R?R:O.concat(R);g[B.start=O.start]=b[B.end=R.end]=B}else g[R.start]=b[R.end]=R;else R=[C],g[R.start=I]=b[R.end=D]=R});function S(C){var F=u.arcs[C<0?~C:C],I=F[0],D;return u.transform?(D=[0,0],F.forEach(function(R){D[0]+=R[0],D[1]+=R[1]})):D=F[F.length-1],C<0?[D,I]:[I,D]}function E(C,F){for(var I in C){var D=C[I];delete F[D.start],delete D.start,delete D.end,D.forEach(function(R){_[R<0?~R:R]=1}),v.push(D)}}return E(b,g),E(g,b),A.forEach(function(C){_[C<0?~C:C]||v.push([C])}),v}function h(u){return r(u,s.apply(this,arguments))}function s(u,A,_){var g,b,v;if(arguments.length>1)g=o(u,A,_);else for(b=0,g=new Array(v=u.arcs.length);b<v;++b)g[b]=b;return{type:"MultiLineString",arcs:t(u,g)}}function o(u,A,_){var g=[],b=[],v;function k(I){var D=I<0?~I:I;(b[D]||(b[D]=[])).push({i:I,g:v})}function S(I){I.forEach(k)}function E(I){I.forEach(S)}function C(I){I.forEach(E)}function F(I){switch(v=I,I.type){case"GeometryCollection":I.geometries.forEach(F);break;case"LineString":S(I.arcs);break;case"MultiLineString":case"Polygon":E(I.arcs);break;case"MultiPolygon":C(I.arcs);break}}return F(A),b.forEach(_==null?function(I){g.push(I[0].i)}:function(I){_(I[0].g,I[I.length-1].g)&&g.push(I[0].i)}),g}function y(u){for(var A=-1,_=u.length,g,b=u[_-1],v=0;++A<_;)g=b,b=u[A],v+=g[0]*b[1]-g[1]*b[0];return Math.abs(v)}function d(u){return r(u,p.apply(this,arguments))}function p(u,A){var _={},g=[],b=[];A.forEach(v);function v(E){switch(E.type){case"GeometryCollection":E.geometries.forEach(v);break;case"Polygon":k(E.arcs);break;case"MultiPolygon":E.arcs.forEach(k);break}}function k(E){E.forEach(function(C){C.forEach(function(F){(_[F=F<0?~F:F]||(_[F]=[])).push(E)})}),g.push(E)}function S(E){return y(r(u,{type:"Polygon",arcs:[E]}).coordinates[0])}return g.forEach(function(E){if(!E._){var C=[],F=[E];for(E._=1,b.push(C);E=F.pop();)C.push(E),E.forEach(function(I){I.forEach(function(D){_[D<0?~D:D].forEach(function(R){R._||(R._=1,F.push(R))})})})}}),g.forEach(function(E){delete E._}),{type:"MultiPolygon",arcs:b.map(function(E){var C=[],F;if(E.forEach(function(z){z.forEach(function(B){B.forEach(function(G){_[G<0?~G:G].length<2&&C.push(G)})})}),C=t(u,C),(F=C.length)>1)for(var I=1,D=S(C[0]),R,O;I<F;++I)(R=S(C[I]))>D&&(O=C[0],C[0]=C[I],C[I]=O,D=R);return C}).filter(function(E){return E.length>0})}}function c(u,A){for(var _=0,g=u.length;_<g;){var b=_+g>>>1;u[b]<A?_=b+1:g=b}return _}function m(u){var A={},_=u.map(function(){return[]});function g(z,B){z.forEach(function(G){G<0&&(G=~G);var Q=A[G];Q?Q.push(B):A[G]=[B]})}function b(z,B){z.forEach(function(G){g(G,B)})}function v(z,B){z.type==="GeometryCollection"?z.geometries.forEach(function(G){v(G,B)}):z.type in k&&k[z.type](z.arcs,B)}var k={LineString:g,MultiLineString:b,Polygon:b,MultiPolygon:function(z,B){z.forEach(function(G){b(G,B)})}};u.forEach(v);for(var S in A)for(var E=A[S],C=E.length,F=0;F<C;++F)for(var I=F+1;I<C;++I){var D=E[F],R=E[I],O;(O=_[D])[S=c(O,R)]!==R&&O.splice(S,0,R),(O=_[R])[S=c(O,D)]!==D&&O.splice(S,0,D)}return _}function l(u){if(u==null)return f;var A,_,g=u.scale[0],b=u.scale[1],v=u.translate[0],k=u.translate[1];return function(S,E){E||(A=_=0);var C=2,F=S.length,I=new Array(F),D=Math.round((S[0]-v)/g),R=Math.round((S[1]-k)/b);for(I[0]=D-A,A=D,I[1]=R-_,_=R;C<F;)I[C]=S[C],++C;return I}}function x(u,A){if(u.transform)throw new Error("already quantized");if(!A||!A.scale){if(!((k=Math.floor(A))>=2))throw new Error("n must be \u22652");E=u.bbox||T(u);var _=E[0],g=E[1],b=E[2],v=E[3],k;A={scale:[b-_?(b-_)/(k-1):1,v-g?(v-g)/(k-1):1],translate:[_,g]}}else E=u.bbox;var S=l(A),E,C,F=u.objects,I={};function D(z){return S(z)}function R(z){var B;switch(z.type){case"GeometryCollection":B={type:"GeometryCollection",geometries:z.geometries.map(R)};break;case"Point":B={type:"Point",coordinates:D(z.coordinates)};break;case"MultiPoint":B={type:"MultiPoint",coordinates:z.coordinates.map(D)};break;default:return z}return z.id!=null&&(B.id=z.id),z.bbox!=null&&(B.bbox=z.bbox),z.properties!=null&&(B.properties=z.properties),B}function O(z){var B=0,G=1,Q=z.length,X,j=new Array(Q);for(j[0]=S(z[0],0);++B<Q;)((X=S(z[B],B))[0]||X[1])&&(j[G++]=X);return G===1&&(j[G++]=[0,0]),j.length=G,j}for(C in F)I[C]=R(F[C]);return{type:"Topology",bbox:E,transform:A,objects:I,arcs:u.arcs.map(O)}}w.bbox=T,w.feature=a,w.merge=d,w.mergeArcs=p,w.mesh=h,w.meshArcs=s,w.neighbors=m,w.quantize=x,w.transform=M,w.untransform=l,Object.defineProperty(w,"__esModule",{value:!0})})},{}],317:[function(i,U,V){var w=i("../prototype/is");U.exports=function(f){if(typeof f!="function"||!hasOwnProperty.call(f,"length"))return!1;try{if(typeof f.length!="number"||typeof f.call!="function"||typeof f.apply!="function")return!1}catch{return!1}return!w(f)}},{"../prototype/is":324}],318:[function(i,U,V){var w=i("../value/is"),f=i("../object/is"),M=i("../string/coerce"),T=i("./to-short-string"),e=function(a,n){return a.replace("%v",T(n))};U.exports=function(a,n,r){if(!f(r))throw new TypeError(e(n,a));if(!w(a)){if("default"in r)return r.default;if(r.isOptional)return null}var t=M(r.errorMessage);throw w(t)||(t=n),new TypeError(e(t,a))}},{"../object/is":321,"../string/coerce":325,"../value/is":327,"./to-short-string":320}],319:[function(i,U,V){U.exports=function(w){try{return w.toString()}catch{try{return String(w)}catch{return null}}}},{}],320:[function(i,U,V){var w=i("./safe-to-string"),f=/[\n\r\u2028\u2029]/g;U.exports=function(M){var T=w(M);return T===null?"<Non-coercible to string value>":(T.length>100&&(T=T.slice(0,99)+"\u2026"),T=T.replace(f,function(e){switch(e){case`
`:return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}}),T)}},{"./safe-to-string":319}],321:[function(i,U,V){var w=i("../value/is"),f={object:!0,function:!0,undefined:!0};U.exports=function(M){return w(M)?hasOwnProperty.call(f,typeof M):!1}},{"../value/is":327}],322:[function(i,U,V){var w=i("../lib/resolve-exception"),f=i("./is");U.exports=function(M){return f(M)?M:w(M,"%v is not a plain function",arguments[1])}},{"../lib/resolve-exception":318,"./is":323}],323:[function(i,U,V){var w=i("../function/is"),f=/^\s*class[\s{/}]/,M=Function.prototype.toString;U.exports=function(T){return!(!w(T)||f.test(M.call(T)))}},{"../function/is":317}],324:[function(i,U,V){var w=i("../object/is");U.exports=function(f){if(!w(f))return!1;try{return f.constructor?f.constructor.prototype===f:!1}catch{return!1}}},{"../object/is":321}],325:[function(i,U,V){var w=i("../value/is"),f=i("../object/is"),M=Object.prototype.toString;U.exports=function(T){if(!w(T))return null;if(f(T)){var e=T.toString;if(typeof e!="function"||e===M)return null}try{return""+T}catch{return null}}},{"../object/is":321,"../value/is":327}],326:[function(i,U,V){var w=i("../lib/resolve-exception"),f=i("./is");U.exports=function(M){return f(M)?M:w(M,"Cannot use %v",arguments[1])}},{"../lib/resolve-exception":318,"./is":327}],327:[function(i,U,V){var w=void 0;U.exports=function(f){return f!==w&&f!==null}},{}],328:[function(i,U,V){(function(w){(function(){var f=i("bit-twiddle"),M=i("dup"),T=i("buffer").Buffer;w.__TYPEDARRAY_POOL||(w.__TYPEDARRAY_POOL={UINT8:M([32,0]),UINT16:M([32,0]),UINT32:M([32,0]),BIGUINT64:M([32,0]),INT8:M([32,0]),INT16:M([32,0]),INT32:M([32,0]),BIGINT64:M([32,0]),FLOAT:M([32,0]),DOUBLE:M([32,0]),DATA:M([32,0]),UINT8C:M([32,0]),BUFFER:M([32,0])});var e=typeof Uint8ClampedArray<"u",a=typeof BigUint64Array<"u",n=typeof BigInt64Array<"u",r=w.__TYPEDARRAY_POOL;r.UINT8C||(r.UINT8C=M([32,0])),r.BIGUINT64||(r.BIGUINT64=M([32,0])),r.BIGINT64||(r.BIGINT64=M([32,0])),r.BUFFER||(r.BUFFER=M([32,0]));var t=r.DATA,h=r.BUFFER;V.free=function(E){if(T.isBuffer(E))h[f.log2(E.length)].push(E);else{if(Object.prototype.toString.call(E)!=="[object ArrayBuffer]"&&(E=E.buffer),!E)return;var C=E.length||E.byteLength,F=f.log2(C)|0;t[F].push(E)}};function s(S){if(!!S){var E=S.length||S.byteLength,C=f.log2(E);t[C].push(S)}}function o(S){s(S.buffer)}V.freeUint8=V.freeUint16=V.freeUint32=V.freeBigUint64=V.freeInt8=V.freeInt16=V.freeInt32=V.freeBigInt64=V.freeFloat32=V.freeFloat=V.freeFloat64=V.freeDouble=V.freeUint8Clamped=V.freeDataView=o,V.freeArrayBuffer=s,V.freeBuffer=function(E){h[f.log2(E.length)].push(E)},V.malloc=function(E,C){if(C===void 0||C==="arraybuffer")return y(E);switch(C){case"uint8":return d(E);case"uint16":return p(E);case"uint32":return c(E);case"int8":return m(E);case"int16":return l(E);case"int32":return x(E);case"float":case"float32":return u(E);case"double":case"float64":return A(E);case"uint8_clamped":return _(E);case"bigint64":return b(E);case"biguint64":return g(E);case"buffer":return k(E);case"data":case"dataview":return v(E);default:return null}return null};function y(E){var E=f.nextPow2(E),C=f.log2(E),F=t[C];return F.length>0?F.pop():new ArrayBuffer(E)}V.mallocArrayBuffer=y;function d(S){return new Uint8Array(y(S),0,S)}V.mallocUint8=d;function p(S){return new Uint16Array(y(2*S),0,S)}V.mallocUint16=p;function c(S){return new Uint32Array(y(4*S),0,S)}V.mallocUint32=c;function m(S){return new Int8Array(y(S),0,S)}V.mallocInt8=m;function l(S){return new Int16Array(y(2*S),0,S)}V.mallocInt16=l;function x(S){return new Int32Array(y(4*S),0,S)}V.mallocInt32=x;function u(S){return new Float32Array(y(4*S),0,S)}V.mallocFloat32=V.mallocFloat=u;function A(S){return new Float64Array(y(8*S),0,S)}V.mallocFloat64=V.mallocDouble=A;function _(S){return e?new Uint8ClampedArray(y(S),0,S):d(S)}V.mallocUint8Clamped=_;function g(S){return a?new BigUint64Array(y(8*S),0,S):null}V.mallocBigUint64=g;function b(S){return n?new BigInt64Array(y(8*S),0,S):null}V.mallocBigInt64=b;function v(S){return new DataView(y(S),0,S)}V.mallocDataView=v;function k(S){S=f.nextPow2(S);var E=f.log2(S),C=h[E];return C.length>0?C.pop():new T(S)}V.mallocBuffer=k,V.clearCache=function(){for(var E=0;E<32;++E)r.UINT8[E].length=0,r.UINT16[E].length=0,r.UINT32[E].length=0,r.INT8[E].length=0,r.INT16[E].length=0,r.INT32[E].length=0,r.FLOAT[E].length=0,r.DOUBLE[E].length=0,r.BIGUINT64[E].length=0,r.BIGINT64[E].length=0,r.UINT8C[E].length=0,t[E].length=0,h[E].length=0}}).call(this)}).call(this,typeof Je<"u"?Je:typeof self<"u"?self:typeof window<"u"?window:{})},{"bit-twiddle":81,buffer:85,dup:128}],329:[function(i,U,V){var w=/[\'\"]/;U.exports=function(M){return M?(w.test(M.charAt(0))&&(M=M.substr(1)),w.test(M.charAt(M.length-1))&&(M=M.substr(0,M.length-1)),M):""}},{}],330:[function(i,U,V){U.exports=function(f,M,T){Array.isArray(T)||(T=[].slice.call(arguments,2));for(var e=0,a=T.length;e<a;e++){var n=T[e];for(var r in n)if(!(M[r]!==void 0&&!Array.isArray(M[r])&&f[r]===M[r])&&r in M){var t;if(n[r]===!0)t=M[r];else{if(n[r]===!1)continue;if(typeof n[r]=="function"&&(t=n[r](M[r],f,M),t===void 0))continue}f[r]=t}}return f}},{}],331:[function(i,U,V){(function(w){(function(){U.exports=f;function f(T,e){if(M("noDeprecation"))return T;var a=!1;function n(){if(!a){if(M("throwDeprecation"))throw new Error(e);M("traceDeprecation")?console.trace(e):console.warn(e),a=!0}return T.apply(this,arguments)}return n}function M(T){try{if(!w.localStorage)return!1}catch{return!1}var e=w.localStorage[T];return e==null?!1:String(e).toLowerCase()==="true"}}).call(this)}).call(this,typeof Je<"u"?Je:typeof self<"u"?self:typeof window<"u"?window:{})},{}],332:[function(i,U,V){var w=i("get-canvas-context");U.exports=function(M){return w("webgl",M)}},{"get-canvas-context":194}],333:[function(i,U,V){var w=i("../main"),f=i("object-assign"),M=w.instance();function T(y){this.local=this.regionalOptions[y||""]||this.regionalOptions[""]}T.prototype=new w.baseCalendar,f(T.prototype,{name:"Chinese",jdEpoch:17214255e-1,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(y,d){if(typeof y=="string"){var p=y.match(a);return p?p[0]:""}var c=this._validateYear(y),m=y.month(),l=""+this.toChineseMonth(c,m);return d&&l.length<2&&(l="0"+l),this.isIntercalaryMonth(c,m)&&(l+="i"),l},monthNames:function(y){if(typeof y=="string"){var d=y.match(n);return d?d[0]:""}var p=this._validateYear(y),c=y.month(),m=this.toChineseMonth(p,c),l=["\u4E00\u6708","\u4E8C\u6708","\u4E09\u6708","\u56DB\u6708","\u4E94\u6708","\u516D\u6708","\u4E03\u6708","\u516B\u6708","\u4E5D\u6708","\u5341\u6708","\u5341\u4E00\u6708","\u5341\u4E8C\u6708"][m-1];return this.isIntercalaryMonth(p,c)&&(l="\u95F0"+l),l},monthNamesShort:function(y){if(typeof y=="string"){var d=y.match(r);return d?d[0]:""}var p=this._validateYear(y),c=y.month(),m=this.toChineseMonth(p,c),l=["\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D","\u5341","\u5341\u4E00","\u5341\u4E8C"][m-1];return this.isIntercalaryMonth(p,c)&&(l="\u95F0"+l),l},parseMonth:function(y,d){y=this._validateYear(y);var p=parseInt(d),c;if(isNaN(p))d[0]==="\u95F0"&&(c=!0,d=d.substring(1)),d[d.length-1]==="\u6708"&&(d=d.substring(0,d.length-1)),p=1+["\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D","\u5341","\u5341\u4E00","\u5341\u4E8C"].indexOf(d);else{var m=d[d.length-1];c=m==="i"||m==="I"}var l=this.toMonthIndex(y,p,c);return l},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(y,d){if(y.year&&(y=y.year()),typeof y!="number"||y<1888||y>2111)throw d.replace(/\{0\}/,this.local.name);return y},toMonthIndex:function(y,d,p){var c=this.intercalaryMonth(y),m=p&&d!==c;if(m||d<1||d>12)throw w.local.invalidMonth.replace(/\{0\}/,this.local.name);var l;return c?!p&&d<=c?l=d-1:l=d:l=d-1,l},toChineseMonth:function(y,d){y.year&&(y=y.year(),d=y.month());var p=this.intercalaryMonth(y),c=p?12:11;if(d<0||d>c)throw w.local.invalidMonth.replace(/\{0\}/,this.local.name);var m;return p?d<p?m=d+1:m=d:m=d+1,m},intercalaryMonth:function(y){y=this._validateYear(y);var d=t[y-t[0]],p=d>>13;return p},isIntercalaryMonth:function(y,d){y.year&&(y=y.year(),d=y.month());var p=this.intercalaryMonth(y);return!!p&&p===d},leapYear:function(y){return this.intercalaryMonth(y)!==0},weekOfYear:function(y,d,p){var c=this._validateYear(y,w.local.invalidyear),m=h[c-h[0]],l=m>>9&4095,x=m>>5&15,u=m&31,A;A=M.newDate(l,x,u),A.add(4-(A.dayOfWeek()||7),"d");var _=this.toJD(y,d,p)-A.toJD();return 1+Math.floor(_/7)},monthsInYear:function(y){return this.leapYear(y)?13:12},daysInMonth:function(y,d){y.year&&(d=y.month(),y=y.year()),y=this._validateYear(y);var p=t[y-t[0]],c=p>>13,m=c?12:11;if(d>m)throw w.local.invalidMonth.replace(/\{0\}/,this.local.name);var l=p&1<<12-d?30:29;return l},weekDay:function(y,d,p){return(this.dayOfWeek(y,d,p)||7)<6},toJD:function(y,d,p){var c=this._validate(y,l,p,w.local.invalidDate);y=this._validateYear(c.year()),d=c.month(),p=c.day();var m=this.isIntercalaryMonth(y,d),l=this.toChineseMonth(y,d),x=o(y,l,p,m);return M.toJD(x.year,x.month,x.day)},fromJD:function(y){var d=M.fromJD(y),p=s(d.year(),d.month(),d.day()),c=this.toMonthIndex(p.year,p.month,p.isIntercalary);return this.newDate(p.year,c,p.day)},fromString:function(y){var d=y.match(e),p=this._validateYear(+d[1]),c=+d[2],m=!!d[3],l=this.toMonthIndex(p,c,m),x=+d[4];return this.newDate(p,l,x)},add:function(y,d,p){var c=y.year(),m=y.month(),l=this.isIntercalaryMonth(c,m),x=this.toChineseMonth(c,m),u=Object.getPrototypeOf(T.prototype).add.call(this,y,d,p);if(p==="y"){var A=u.year(),_=u.month(),g=this.isIntercalaryMonth(A,x),b=l&&g?this.toMonthIndex(A,x,!0):this.toMonthIndex(A,x,!1);b!==_&&u.month(b)}return u}});var e=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,a=/^\d?\d[iI]?/m,n=/^闰?十?[一二三四五六七八九]?月/m,r=/^闰?十?[一二三四五六七八九]?/m;w.calendars.chinese=T;var t=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],h=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904];function s(y,d,p,c){var m,l;if(typeof y=="object")m=y,l=d||{};else{var x=typeof y=="number"&&y>=1888&&y<=2111;if(!x)throw new Error("Solar year outside range 1888-2111");var u=typeof d=="number"&&d>=1&&d<=12;if(!u)throw new Error("Solar month outside range 1 - 12");var A=typeof p=="number"&&p>=1&&p<=31;if(!A)throw new Error("Solar day outside range 1 - 31");m={year:y,month:d,day:p},l=c||{}}var _=h[m.year-h[0]],g=m.year<<9|m.month<<5|m.day;l.year=g>=_?m.year:m.year-1,_=h[l.year-h[0]];var b=_>>9&4095,v=_>>5&15,k=_&31,S,E=new Date(b,v-1,k),C=new Date(m.year,m.month-1,m.day);S=Math.round((C-E)/(24*3600*1e3));var F=t[l.year-t[0]],I;for(I=0;I<13;I++){var D=F&1<<12-I?30:29;if(S<D)break;S-=D}var R=F>>13;return!R||I<R?(l.isIntercalary=!1,l.month=1+I):I===R?(l.isIntercalary=!0,l.month=I):(l.isIntercalary=!1,l.month=I),l.day=1+S,l}function o(y,d,p,c,m){var l,x;if(typeof y=="object")x=y,l=d||{};else{var u=typeof y=="number"&&y>=1888&&y<=2111;if(!u)throw new Error("Lunar year outside range 1888-2111");var A=typeof d=="number"&&d>=1&&d<=12;if(!A)throw new Error("Lunar month outside range 1 - 12");var _=typeof p=="number"&&p>=1&&p<=30;if(!_)throw new Error("Lunar day outside range 1 - 30");var g;typeof c=="object"?(g=!1,l=c):(g=!!c,l=m||{}),x={year:y,month:d,day:p,isIntercalary:g}}var b;b=x.day-1;var v=t[x.year-t[0]],k=v>>13,S;k&&(x.month>k||x.isIntercalary)?S=x.month:S=x.month-1;for(var E=0;E<S;E++){var C=v&1<<12-E?30:29;b+=C}var F=h[x.year-h[0]],I=F>>9&4095,D=F>>5&15,R=F&31,O=new Date(I,D-1,R+b);return l.year=O.getFullYear(),l.month=1+O.getMonth(),l.day=O.getDate(),l}},{"../main":347,"object-assign":247}],334:[function(i,U,V){var w=i("../main"),f=i("object-assign");function M(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}M.prototype=new w.baseCalendar,f(M.prototype,{name:"Coptic",jdEpoch:18250295e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(a){var e=this._validate(a,this.minMonth,this.minDay,w.local.invalidYear),a=e.year()+(e.year()<0?1:0);return a%4===3||a%4===-1},monthsInYear:function(T){return this._validate(T,this.minMonth,this.minDay,w.local.invalidYear||w.regionalOptions[""].invalidYear),13},weekOfYear:function(T,e,a){var n=this.newDate(T,e,a);return n.add(-n.dayOfWeek(),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(T,e){var a=this._validate(T,e,this.minDay,w.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(a.month()===13&&this.leapYear(a.year())?1:0)},weekDay:function(T,e,a){return(this.dayOfWeek(T,e,a)||7)<6},toJD:function(T,e,a){var n=this._validate(T,e,a,w.local.invalidDate);return T=n.year(),T<0&&T++,n.day()+(n.month()-1)*30+(T-1)*365+Math.floor(T/4)+this.jdEpoch-1},fromJD:function(T){var e=Math.floor(T)+.5-this.jdEpoch,a=Math.floor((e-Math.floor((e+366)/1461))/365)+1;a<=0&&a--,e=Math.floor(T)+.5-this.newDate(a,1,1).toJD();var n=Math.floor(e/30)+1,r=e-(n-1)*30+1;return this.newDate(a,n,r)}}),w.calendars.coptic=M},{"../main":347,"object-assign":247}],335:[function(i,U,V){var w=i("../main"),f=i("object-assign");function M(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}M.prototype=new w.baseCalendar,f(M.prototype,{name:"Discworld",jdEpoch:17214255e-1,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(e){return this._validate(e,this.minMonth,this.minDay,w.local.invalidYear),!1},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,w.local.invalidYear),13},daysInYear:function(e){return this._validate(e,this.minMonth,this.minDay,w.local.invalidYear),400},weekOfYear:function(e,a,n){var r=this.newDate(e,a,n);return r.add(-r.dayOfWeek(),"d"),Math.floor((r.dayOfYear()-1)/8)+1},daysInMonth:function(e,a){var n=this._validate(e,a,this.minDay,w.local.invalidMonth);return this.daysPerMonth[n.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(e,a,n){var r=this._validate(e,a,n,w.local.invalidDate);return(r.day()+1)%8},weekDay:function(e,a,n){var r=this.dayOfWeek(e,a,n);return r>=2&&r<=6},extraInfo:function(e,a,n){var r=this._validate(e,a,n,w.local.invalidDate);return{century:T[Math.floor((r.year()-1)/100)+1]||""}},toJD:function(e,a,n){var r=this._validate(e,a,n,w.local.invalidDate);return e=r.year()+(r.year()<0?1:0),a=r.month(),n=r.day(),n+(a>1?16:0)+(a>2?(a-2)*32:0)+(e-1)*400+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e+.5)-Math.floor(this.jdEpoch)-1;var a=Math.floor(e/400)+1;e-=(a-1)*400,e+=e>15?16:0;var n=Math.floor(e/32)+1,r=e-(n-1)*32+1;return this.newDate(a<=0?a-1:a,n,r)}});var T={20:"Fruitbat",21:"Anchovy"};w.calendars.discworld=M},{"../main":347,"object-assign":247}],336:[function(i,U,V){var w=i("../main"),f=i("object-assign");function M(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}M.prototype=new w.baseCalendar,f(M.prototype,{name:"Ethiopian",jdEpoch:17242205e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(a){var e=this._validate(a,this.minMonth,this.minDay,w.local.invalidYear),a=e.year()+(e.year()<0?1:0);return a%4===3||a%4===-1},monthsInYear:function(T){return this._validate(T,this.minMonth,this.minDay,w.local.invalidYear||w.regionalOptions[""].invalidYear),13},weekOfYear:function(T,e,a){var n=this.newDate(T,e,a);return n.add(-n.dayOfWeek(),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(T,e){var a=this._validate(T,e,this.minDay,w.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(a.month()===13&&this.leapYear(a.year())?1:0)},weekDay:function(T,e,a){return(this.dayOfWeek(T,e,a)||7)<6},toJD:function(T,e,a){var n=this._validate(T,e,a,w.local.invalidDate);return T=n.year(),T<0&&T++,n.day()+(n.month()-1)*30+(T-1)*365+Math.floor(T/4)+this.jdEpoch-1},fromJD:function(T){var e=Math.floor(T)+.5-this.jdEpoch,a=Math.floor((e-Math.floor((e+366)/1461))/365)+1;a<=0&&a--,e=Math.floor(T)+.5-this.newDate(a,1,1).toJD();var n=Math.floor(e/30)+1,r=e-(n-1)*30+1;return this.newDate(a,n,r)}}),w.calendars.ethiopian=M},{"../main":347,"object-assign":247}],337:[function(i,U,V){var w=i("../main"),f=i("object-assign");function M(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}M.prototype=new w.baseCalendar,f(M.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var a=this._validate(e,this.minMonth,this.minDay,w.local.invalidYear);return this._leapYear(a.year())},_leapYear:function(e){return e=e<0?e+1:e,T(e*7+1,19)<7},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,w.local.invalidYear),this._leapYear(e.year?e.year():e)?13:12},weekOfYear:function(e,a,n){var r=this.newDate(e,a,n);return r.add(-r.dayOfWeek(),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInYear:function(e){var a=this._validate(e,this.minMonth,this.minDay,w.local.invalidYear);return e=a.year(),this.toJD(e===-1?1:e+1,7,1)-this.toJD(e,7,1)},daysInMonth:function(e,a){return e.year&&(a=e.month(),e=e.year()),this._validate(e,a,this.minDay,w.local.invalidMonth),a===12&&this.leapYear(e)||a===8&&T(this.daysInYear(e),10)===5?30:a===9&&T(this.daysInYear(e),10)===3?29:this.daysPerMonth[a-1]},weekDay:function(e,a,n){return this.dayOfWeek(e,a,n)!==6},extraInfo:function(e,a,n){var r=this._validate(e,a,n,w.local.invalidDate);return{yearType:(this.leapYear(r)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(r)%10-3]}},toJD:function(e,a,n){var r=this._validate(e,a,n,w.local.invalidDate);e=r.year(),a=r.month(),n=r.day();var t=e<=0?e+1:e,h=this.jdEpoch+this._delay1(t)+this._delay2(t)+n+1;if(a<7){for(var s=7;s<=this.monthsInYear(e);s++)h+=this.daysInMonth(e,s);for(var s=1;s<a;s++)h+=this.daysInMonth(e,s)}else for(var s=7;s<a;s++)h+=this.daysInMonth(e,s);return h},_delay1:function(e){var a=Math.floor((235*e-234)/19),n=12084+13753*a,r=a*29+Math.floor(n/25920);return T(3*(r+1),7)<3&&r++,r},_delay2:function(e){var a=this._delay1(e-1),n=this._delay1(e),r=this._delay1(e+1);return r-n===356?2:n-a===382?1:0},fromJD:function(e){e=Math.floor(e)+.5;for(var a=Math.floor((e-this.jdEpoch)*98496/35975351)-1;e>=this.toJD(a===-1?1:a+1,7,1);)a++;for(var n=e<this.toJD(a,1,1)?7:1;e>this.toJD(a,n,this.daysInMonth(a,n));)n++;var r=e-this.toJD(a,n,1)+1;return this.newDate(a,n,r)}});function T(e,a){return e-a*Math.floor(e/a)}w.calendars.hebrew=M},{"../main":347,"object-assign":247}],338:[function(i,U,V){var w=i("../main"),f=i("object-assign");function M(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}M.prototype=new w.baseCalendar,f(M.prototype,{name:"Islamic",jdEpoch:19484395e-1,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-kham\u012Bs","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(T){var e=this._validate(T,this.minMonth,this.minDay,w.local.invalidYear);return(e.year()*11+14)%30<11},weekOfYear:function(T,e,a){var n=this.newDate(T,e,a);return n.add(-n.dayOfWeek(),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInYear:function(T){return this.leapYear(T)?355:354},daysInMonth:function(T,e){var a=this._validate(T,e,this.minDay,w.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(a.month()===12&&this.leapYear(a.year())?1:0)},weekDay:function(T,e,a){return this.dayOfWeek(T,e,a)!==5},toJD:function(T,e,a){var n=this._validate(T,e,a,w.local.invalidDate);return T=n.year(),e=n.month(),a=n.day(),T=T<=0?T+1:T,a+Math.ceil(29.5*(e-1))+(T-1)*354+Math.floor((3+11*T)/30)+this.jdEpoch-1},fromJD:function(T){T=Math.floor(T)+.5;var e=Math.floor((30*(T-this.jdEpoch)+10646)/10631);e=e<=0?e-1:e;var a=Math.min(12,Math.ceil((T-29-this.toJD(e,1,1))/29.5)+1),n=T-this.toJD(e,a,1)+1;return this.newDate(e,a,n)}}),w.calendars.islamic=M},{"../main":347,"object-assign":247}],339:[function(i,U,V){var w=i("../main"),f=i("object-assign");function M(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}M.prototype=new w.baseCalendar,f(M.prototype,{name:"Julian",jdEpoch:17214235e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(a){var e=this._validate(a,this.minMonth,this.minDay,w.local.invalidYear),a=e.year()<0?e.year()+1:e.year();return a%4===0},weekOfYear:function(T,e,a){var n=this.newDate(T,e,a);return n.add(4-(n.dayOfWeek()||7),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(T,e){var a=this._validate(T,e,this.minDay,w.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(a.month()===2&&this.leapYear(a.year())?1:0)},weekDay:function(T,e,a){return(this.dayOfWeek(T,e,a)||7)<6},toJD:function(T,e,a){var n=this._validate(T,e,a,w.local.invalidDate);return T=n.year(),e=n.month(),a=n.day(),T<0&&T++,e<=2&&(T--,e+=12),Math.floor(365.25*(T+4716))+Math.floor(30.6001*(e+1))+a-1524.5},fromJD:function(T){var e=Math.floor(T+.5),a=e+1524,n=Math.floor((a-122.1)/365.25),r=Math.floor(365.25*n),t=Math.floor((a-r)/30.6001),h=t-Math.floor(t<14?1:13),s=n-Math.floor(h>2?4716:4715),o=a-r-Math.floor(30.6001*t);return s<=0&&s--,this.newDate(s,h,o)}}),w.calendars.julian=M},{"../main":347,"object-assign":247}],340:[function(i,U,V){var w=i("../main"),f=i("object-assign");function M(a){this.local=this.regionalOptions[a||""]||this.regionalOptions[""]}M.prototype=new w.baseCalendar,f(M.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(a){return this._validate(a,this.minMonth,this.minDay,w.local.invalidYear),!1},formatYear:function(a){var n=this._validate(a,this.minMonth,this.minDay,w.local.invalidYear);a=n.year();var r=Math.floor(a/400);a=a%400,a+=a<0?400:0;var t=Math.floor(a/20);return r+"."+t+"."+a%20},forYear:function(a){if(a=a.split("."),a.length<3)throw"Invalid Mayan year";for(var n=0,r=0;r<a.length;r++){var t=parseInt(a[r],10);if(Math.abs(t)>19||r>0&&t<0)throw"Invalid Mayan year";n=n*20+t}return n},monthsInYear:function(a){return this._validate(a,this.minMonth,this.minDay,w.local.invalidYear),18},weekOfYear:function(a,n,r){return this._validate(a,n,r,w.local.invalidDate),0},daysInYear:function(a){return this._validate(a,this.minMonth,this.minDay,w.local.invalidYear),360},daysInMonth:function(a,n){return this._validate(a,n,this.minDay,w.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(a,n,r){var t=this._validate(a,n,r,w.local.invalidDate);return t.day()},weekDay:function(a,n,r){return this._validate(a,n,r,w.local.invalidDate),!0},extraInfo:function(a,n,r){var t=this._validate(a,n,r,w.local.invalidDate),h=t.toJD(),s=this._toHaab(h),o=this._toTzolkin(h);return{haabMonthName:this.local.haabMonths[s[0]-1],haabMonth:s[0],haabDay:s[1],tzolkinDayName:this.local.tzolkinMonths[o[0]-1],tzolkinDay:o[0],tzolkinTrecena:o[1]}},_toHaab:function(a){a-=this.jdEpoch;var n=T(a+8+(18-1)*20,365);return[Math.floor(n/20)+1,T(n,20)]},_toTzolkin:function(a){return a-=this.jdEpoch,[e(a+20,20),e(a+4,13)]},toJD:function(a,n,r){var t=this._validate(a,n,r,w.local.invalidDate);return t.day()+t.month()*20+t.year()*360+this.jdEpoch},fromJD:function(a){a=Math.floor(a)+.5-this.jdEpoch;var n=Math.floor(a/360);a=a%360,a+=a<0?360:0;var r=Math.floor(a/20),t=a%20;return this.newDate(n,r,t)}});function T(a,n){return a-n*Math.floor(a/n)}function e(a,n){return T(a-1,n)+1}w.calendars.mayan=M},{"../main":347,"object-assign":247}],341:[function(i,U,V){var w=i("../main"),f=i("object-assign");function M(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}M.prototype=new w.baseCalendar;var T=w.instance("gregorian");f(M.prototype,{name:"Nanakshahi",jdEpoch:22576735e-1,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var a=this._validate(e,this.minMonth,this.minDay,w.local.invalidYear||w.regionalOptions[""].invalidYear);return T.leapYear(a.year()+(a.year()<1?1:0)+1469)},weekOfYear:function(e,a,n){var r=this.newDate(e,a,n);return r.add(1-(r.dayOfWeek()||7),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInMonth:function(e,a){var n=this._validate(e,a,this.minDay,w.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(n.month()===12&&this.leapYear(n.year())?1:0)},weekDay:function(e,a,n){return(this.dayOfWeek(e,a,n)||7)<6},toJD:function(t,a,n){var r=this._validate(t,a,n,w.local.invalidMonth),t=r.year();t<0&&t++;for(var h=r.day(),s=1;s<r.month();s++)h+=this.daysPerMonth[s-1];return h+T.toJD(t+1468,3,13)},fromJD:function(e){e=Math.floor(e+.5);for(var a=Math.floor((e-(this.jdEpoch-1))/366);e>=this.toJD(a+1,1,1);)a++;for(var n=e-Math.floor(this.toJD(a,1,1)+.5)+1,r=1;n>this.daysInMonth(a,r);)n-=this.daysInMonth(a,r),r++;return this.newDate(a,r,n)}}),w.calendars.nanakshahi=M},{"../main":347,"object-assign":247}],342:[function(i,U,V){var w=i("../main"),f=i("object-assign");function M(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}M.prototype=new w.baseCalendar,f(M.prototype,{name:"Nepali",jdEpoch:17007095e-1,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(T){return this.daysInYear(T)!==this.daysPerYear},weekOfYear:function(T,e,a){var n=this.newDate(T,e,a);return n.add(-n.dayOfWeek(),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInYear:function(T){var e=this._validate(T,this.minMonth,this.minDay,w.local.invalidYear);if(T=e.year(),typeof this.NEPALI_CALENDAR_DATA[T]>"u")return this.daysPerYear;for(var a=0,n=this.minMonth;n<=12;n++)a+=this.NEPALI_CALENDAR_DATA[T][n];return a},daysInMonth:function(T,e){return T.year&&(e=T.month(),T=T.year()),this._validate(T,e,this.minDay,w.local.invalidMonth),typeof this.NEPALI_CALENDAR_DATA[T]>"u"?this.daysPerMonth[e-1]:this.NEPALI_CALENDAR_DATA[T][e]},weekDay:function(T,e,a){return this.dayOfWeek(T,e,a)!==6},toJD:function(T,e,a){var n=this._validate(T,e,a,w.local.invalidDate);T=n.year(),e=n.month(),a=n.day();var r=w.instance(),t=0,h=e,s=T;this._createMissingCalendarData(T);var o=T-(h>9||h===9&&a>=this.NEPALI_CALENDAR_DATA[s][0]?56:57);for(e!==9&&(t=a,h--);h!==9;)h<=0&&(h=12,s--),t+=this.NEPALI_CALENDAR_DATA[s][h],h--;return e===9?(t+=a-this.NEPALI_CALENDAR_DATA[s][0],t<0&&(t+=r.daysInYear(o))):t+=this.NEPALI_CALENDAR_DATA[s][9]-this.NEPALI_CALENDAR_DATA[s][0],r.newDate(o,1,1).add(t,"d").toJD()},fromJD:function(T){var e=w.instance(),a=e.fromJD(T),n=a.year(),r=a.dayOfYear(),t=n+56;this._createMissingCalendarData(t);for(var h=9,s=this.NEPALI_CALENDAR_DATA[t][0],o=this.NEPALI_CALENDAR_DATA[t][h]-s+1;r>o;)h++,h>12&&(h=1,t++),o+=this.NEPALI_CALENDAR_DATA[t][h];var y=this.NEPALI_CALENDAR_DATA[t][h]-(o-r);return this.newDate(t,h,y)},_createMissingCalendarData:function(T){var e=this.daysPerMonth.slice(0);e.unshift(17);for(var a=T-1;a<T+2;a++)typeof this.NEPALI_CALENDAR_DATA[a]>"u"&&(this.NEPALI_CALENDAR_DATA[a]=e)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),w.calendars.nepali=M},{"../main":347,"object-assign":247}],343:[function(i,U,V){var w=i("../main"),f=i("object-assign");function M(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}M.prototype=new w.baseCalendar,f(M.prototype,{name:"Persian",jdEpoch:19483205e-1,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Ch\xE6harshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Ch\xE6","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(e){var a=this._validate(e,this.minMonth,this.minDay,w.local.invalidYear);return((a.year()-(a.year()>0?474:473))%2820+474+38)*682%2816<682},weekOfYear:function(e,a,n){var r=this.newDate(e,a,n);return r.add(-((r.dayOfWeek()+1)%7),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInMonth:function(e,a){var n=this._validate(e,a,this.minDay,w.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(n.month()===12&&this.leapYear(n.year())?1:0)},weekDay:function(e,a,n){return this.dayOfWeek(e,a,n)!==5},toJD:function(e,a,n){var r=this._validate(e,a,n,w.local.invalidDate);e=r.year(),a=r.month(),n=r.day();var t=e-(e>=0?474:473),h=474+T(t,2820);return n+(a<=7?(a-1)*31:(a-1)*30+6)+Math.floor((h*682-110)/2816)+(h-1)*365+Math.floor(t/2820)*1029983+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e)+.5;var a=e-this.toJD(475,1,1),n=Math.floor(a/1029983),r=T(a,1029983),t=2820;if(r!==1029982){var h=Math.floor(r/366),s=T(r,366);t=Math.floor((2134*h+2816*s+2815)/1028522)+h+1}var o=t+2820*n+474;o=o<=0?o-1:o;var y=e-this.toJD(o,1,1)+1,d=y<=186?Math.ceil(y/31):Math.ceil((y-6)/30),p=e-this.toJD(o,d,1)+1;return this.newDate(o,d,p)}});function T(e,a){return e-a*Math.floor(e/a)}w.calendars.persian=M,w.calendars.jalali=M},{"../main":347,"object-assign":247}],344:[function(i,U,V){var w=i("../main"),f=i("object-assign"),M=w.instance();function T(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}T.prototype=new w.baseCalendar,f(T.prototype,{name:"Taiwan",jdEpoch:24194025e-1,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(n){var a=this._validate(n,this.minMonth,this.minDay,w.local.invalidYear),n=this._t2gYear(a.year());return M.leapYear(n)},weekOfYear:function(t,a,n){var r=this._validate(t,this.minMonth,this.minDay,w.local.invalidYear),t=this._t2gYear(r.year());return M.weekOfYear(t,r.month(),r.day())},daysInMonth:function(e,a){var n=this._validate(e,a,this.minDay,w.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(n.month()===2&&this.leapYear(n.year())?1:0)},weekDay:function(e,a,n){return(this.dayOfWeek(e,a,n)||7)<6},toJD:function(t,a,n){var r=this._validate(t,a,n,w.local.invalidDate),t=this._t2gYear(r.year());return M.toJD(t,r.month(),r.day())},fromJD:function(e){var a=M.fromJD(e),n=this._g2tYear(a.year());return this.newDate(n,a.month(),a.day())},_t2gYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)},_g2tYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)}}),w.calendars.taiwan=T},{"../main":347,"object-assign":247}],345:[function(i,U,V){var w=i("../main"),f=i("object-assign"),M=w.instance();function T(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}T.prototype=new w.baseCalendar,f(T.prototype,{name:"Thai",jdEpoch:15230985e-1,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(n){var a=this._validate(n,this.minMonth,this.minDay,w.local.invalidYear),n=this._t2gYear(a.year());return M.leapYear(n)},weekOfYear:function(t,a,n){var r=this._validate(t,this.minMonth,this.minDay,w.local.invalidYear),t=this._t2gYear(r.year());return M.weekOfYear(t,r.month(),r.day())},daysInMonth:function(e,a){var n=this._validate(e,a,this.minDay,w.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(n.month()===2&&this.leapYear(n.year())?1:0)},weekDay:function(e,a,n){return(this.dayOfWeek(e,a,n)||7)<6},toJD:function(t,a,n){var r=this._validate(t,a,n,w.local.invalidDate),t=this._t2gYear(r.year());return M.toJD(t,r.month(),r.day())},fromJD:function(e){var a=M.fromJD(e),n=this._g2tYear(a.year());return this.newDate(n,a.month(),a.day())},_t2gYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)},_g2tYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)}}),w.calendars.thai=T},{"../main":347,"object-assign":247}],346:[function(i,U,V){var w=i("../main"),f=i("object-assign");function M(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}M.prototype=new w.baseCalendar,f(M.prototype,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thal\u0101th\u0101\u2019","Yawm al-Arba\u2018\u0101\u2019","Yawm al-Kham\u012Bs","Yawm al-Jum\u2018a","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(e){var a=this._validate(e,this.minMonth,this.minDay,w.local.invalidYear);return this.daysInYear(a.year())===355},weekOfYear:function(e,a,n){var r=this.newDate(e,a,n);return r.add(-r.dayOfWeek(),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInYear:function(e){for(var a=0,n=1;n<=12;n++)a+=this.daysInMonth(e,n);return a},daysInMonth:function(e,a){for(var n=this._validate(e,a,this.minDay,w.local.invalidMonth),r=n.toJD()-24e5+.5,t=0,h=0;h<T.length;h++){if(T[h]>r)return T[t]-T[t-1];t++}return 30},weekDay:function(e,a,n){return this.dayOfWeek(e,a,n)!==5},toJD:function(e,a,n){var r=this._validate(e,a,n,w.local.invalidDate),t=12*(r.year()-1)+r.month()-15292,h=r.day()+T[t-1]-1;return h+24e5-.5},fromJD:function(e){for(var a=e-24e5+.5,n=0,r=0;r<T.length&&!(T[r]>a);r++)n++;var t=n+15292,h=Math.floor((t-1)/12),s=h+1,o=t-12*h,y=a-T[n-1]+1;return this.newDate(s,o,y)},isValid:function(e,a,n){var r=w.baseCalendar.prototype.isValid.apply(this,arguments);return r&&(e=e.year!=null?e.year:e,r=e>=1276&&e<=1500),r},_validate:function(e,a,n,r){var t=w.baseCalendar.prototype._validate.apply(this,arguments);if(t.year<1276||t.year>1500)throw r.replace(/\{0\}/,this.local.name);return t}}),w.calendars.ummalqura=M;var T=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},{"../main":347,"object-assign":247}],347:[function(i,U,V){var w=i("object-assign");function f(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}w(f.prototype,{instance:function(r,t){r=(r||"gregorian").toLowerCase(),t=t||"";var h=this._localCals[r+"-"+t];if(!h&&this.calendars[r]&&(h=new this.calendars[r](t),this._localCals[r+"-"+t]=h),!h)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,r);return h},newDate:function(r,t,h,s,o){return s=(r!=null&&r.year?r.calendar():typeof s=="string"?this.instance(s,o):s)||this.instance(),s.newDate(r,t,h)},substituteDigits:function(r){return function(t){return(t+"").replace(/[0-9]/g,function(h){return r[h]})}},substituteChineseDigits:function(r,t){return function(h){for(var s="",o=0;h>0;){var y=h%10;s=(y===0?"":r[y]+t[o])+s,o++,h=Math.floor(h/10)}return s.indexOf(r[1]+t[1])===0&&(s=s.substr(1)),s||r[0]}}});function M(r,t,h,s){if(this._calendar=r,this._year=t,this._month=h,this._day=s,this._calendar._validateLevel===0&&!this._calendar.isValid(this._year,this._month,this._day))throw(n.local.invalidDate||n.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function T(r,t){return r=""+r,"000000".substring(0,t-r.length)+r}w(M.prototype,{newDate:function(r,t,h){return this._calendar.newDate(r==null?this:r,t,h)},year:function(r){return arguments.length===0?this._year:this.set(r,"y")},month:function(r){return arguments.length===0?this._month:this.set(r,"m")},day:function(r){return arguments.length===0?this._day:this.set(r,"d")},date:function(r,t,h){if(!this._calendar.isValid(r,t,h))throw(n.local.invalidDate||n.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=r,this._month=t,this._day=h,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(r,t){return this._calendar.add(this,r,t)},set:function(r,t){return this._calendar.set(this,r,t)},compareTo:function(r){if(this._calendar.name!==r._calendar.name)throw(n.local.differentCalendars||n.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,r._calendar.local.name);var t=this._year!==r._year?this._year-r._year:this._month!==r._month?this.monthOfYear()-r.monthOfYear():this._day-r._day;return t===0?0:t<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(r){return this._calendar.fromJD(r)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(r){return this._calendar.fromJSDate(r)},toString:function(){return(this.year()<0?"-":"")+T(Math.abs(this.year()),4)+"-"+T(this.month(),2)+"-"+T(this.day(),2)}});function e(){this.shortYearCutoff="+10"}w(e.prototype,{_validateLevel:0,newDate:function(r,t,h){return r==null?this.today():(r.year&&(this._validate(r,t,h,n.local.invalidDate||n.regionalOptions[""].invalidDate),h=r.day(),t=r.month(),r=r.year()),new M(this,r,t,h))},today:function(){return this.fromJSDate(new Date)},epoch:function(r){var t=this._validate(r,this.minMonth,this.minDay,n.local.invalidYear||n.regionalOptions[""].invalidYear);return t.year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(r){var t=this._validate(r,this.minMonth,this.minDay,n.local.invalidYear||n.regionalOptions[""].invalidYear);return(t.year()<0?"-":"")+T(Math.abs(t.year()),4)},monthsInYear:function(r){return this._validate(r,this.minMonth,this.minDay,n.local.invalidYear||n.regionalOptions[""].invalidYear),12},monthOfYear:function(r,t){var h=this._validate(r,t,this.minDay,n.local.invalidMonth||n.regionalOptions[""].invalidMonth);return(h.month()+this.monthsInYear(h)-this.firstMonth)%this.monthsInYear(h)+this.minMonth},fromMonthOfYear:function(r,t){var h=(t+this.firstMonth-2*this.minMonth)%this.monthsInYear(r)+this.minMonth;return this._validate(r,h,this.minDay,n.local.invalidMonth||n.regionalOptions[""].invalidMonth),h},daysInYear:function(r){var t=this._validate(r,this.minMonth,this.minDay,n.local.invalidYear||n.regionalOptions[""].invalidYear);return this.leapYear(t)?366:365},dayOfYear:function(r,t,h){var s=this._validate(r,t,h,n.local.invalidDate||n.regionalOptions[""].invalidDate);return s.toJD()-this.newDate(s.year(),this.fromMonthOfYear(s.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(r,t,h){var s=this._validate(r,t,h,n.local.invalidDate||n.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(s))+2)%this.daysInWeek()},extraInfo:function(r,t,h){return this._validate(r,t,h,n.local.invalidDate||n.regionalOptions[""].invalidDate),{}},add:function(r,t,h){return this._validate(r,this.minMonth,this.minDay,n.local.invalidDate||n.regionalOptions[""].invalidDate),this._correctAdd(r,this._add(r,t,h),t,h)},_add:function(r,t,h){if(this._validateLevel++,h==="d"||h==="w"){var s=r.toJD()+t*(h==="w"?this.daysInWeek():1),o=r.calendar().fromJD(s);return this._validateLevel--,[o.year(),o.month(),o.day()]}try{var y=r.year()+(h==="y"?t:0),d=r.monthOfYear()+(h==="m"?t:0),o=r.day(),p=function(l){for(;d<l.minMonth;)y--,d+=l.monthsInYear(y);for(var x=l.monthsInYear(y);d>x-1+l.minMonth;)y++,d-=x,x=l.monthsInYear(y)};h==="y"?(r.month()!==this.fromMonthOfYear(y,d)&&(d=this.newDate(y,r.month(),this.minDay).monthOfYear()),d=Math.min(d,this.monthsInYear(y)),o=Math.min(o,this.daysInMonth(y,this.fromMonthOfYear(y,d)))):h==="m"&&(p(this),o=Math.min(o,this.daysInMonth(y,this.fromMonthOfYear(y,d))));var c=[y,this.fromMonthOfYear(y,d),o];return this._validateLevel--,c}catch(m){throw this._validateLevel--,m}},_correctAdd:function(r,t,h,s){if(!this.hasYearZero&&(s==="y"||s==="m")&&(t[0]===0||r.year()>0!=t[0]>0)){var o={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[s],y=h<0?-1:1;t=this._add(r,h*o[0]+y*o[1],o[2])}return r.date(t[0],t[1],t[2])},set:function(r,t,h){this._validate(r,this.minMonth,this.minDay,n.local.invalidDate||n.regionalOptions[""].invalidDate);var s=h==="y"?t:r.year(),o=h==="m"?t:r.month(),y=h==="d"?t:r.day();return(h==="y"||h==="m")&&(y=Math.min(y,this.daysInMonth(s,o))),r.date(s,o,y)},isValid:function(r,t,h){this._validateLevel++;var s=this.hasYearZero||r!==0;if(s){var o=this.newDate(r,t,this.minDay);s=t>=this.minMonth&&t-this.minMonth<this.monthsInYear(o)&&h>=this.minDay&&h-this.minDay<this.daysInMonth(o)}return this._validateLevel--,s},toJSDate:function(r,t,h){var s=this._validate(r,t,h,n.local.invalidDate||n.regionalOptions[""].invalidDate);return n.instance().fromJD(this.toJD(s)).toJSDate()},fromJSDate:function(r){return this.fromJD(n.instance().fromJSDate(r).toJD())},_validate:function(r,t,h,s){if(r.year){if(this._validateLevel===0&&this.name!==r.calendar().name)throw(n.local.differentCalendars||n.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,r.calendar().local.name);return r}try{if(this._validateLevel++,this._validateLevel===1&&!this.isValid(r,t,h))throw s.replace(/\{0\}/,this.local.name);var o=this.newDate(r,t,h);return this._validateLevel--,o}catch(y){throw this._validateLevel--,y}}});function a(r){this.local=this.regionalOptions[r]||this.regionalOptions[""]}a.prototype=new e,w(a.prototype,{name:"Gregorian",jdEpoch:17214255e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(h){var t=this._validate(h,this.minMonth,this.minDay,n.local.invalidYear||n.regionalOptions[""].invalidYear),h=t.year()+(t.year()<0?1:0);return h%4===0&&(h%100!==0||h%400===0)},weekOfYear:function(r,t,h){var s=this.newDate(r,t,h);return s.add(4-(s.dayOfWeek()||7),"d"),Math.floor((s.dayOfYear()-1)/7)+1},daysInMonth:function(r,t){var h=this._validate(r,t,this.minDay,n.local.invalidMonth||n.regionalOptions[""].invalidMonth);return this.daysPerMonth[h.month()-1]+(h.month()===2&&this.leapYear(h.year())?1:0)},weekDay:function(r,t,h){return(this.dayOfWeek(r,t,h)||7)<6},toJD:function(r,t,h){var s=this._validate(r,t,h,n.local.invalidDate||n.regionalOptions[""].invalidDate);r=s.year(),t=s.month(),h=s.day(),r<0&&r++,t<3&&(t+=12,r--);var o=Math.floor(r/100),y=2-o+Math.floor(o/4);return Math.floor(365.25*(r+4716))+Math.floor(30.6001*(t+1))+h+y-1524.5},fromJD:function(r){var t=Math.floor(r+.5),h=Math.floor((t-186721625e-2)/36524.25);h=t+1+h-Math.floor(h/4);var s=h+1524,o=Math.floor((s-122.1)/365.25),y=Math.floor(365.25*o),d=Math.floor((s-y)/30.6001),p=s-y-Math.floor(d*30.6001),c=d-(d>13.5?13:1),m=o-(c>2.5?4716:4715);return m<=0&&m--,this.newDate(m,c,p)},toJSDate:function(r,t,h){var s=this._validate(r,t,h,n.local.invalidDate||n.regionalOptions[""].invalidDate),o=new Date(s.year(),s.month()-1,s.day());return o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0),o.setHours(o.getHours()>12?o.getHours()+2:0),o},fromJSDate:function(r){return this.newDate(r.getFullYear(),r.getMonth()+1,r.getDate())}});var n=U.exports=new f;n.cdate=M,n.baseCalendar=e,n.calendars.gregorian=a},{"object-assign":247}],348:[function(i,U,V){var w=i("object-assign"),f=i("./main");w(f.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),f.local=f.regionalOptions[""],w(f.cdate.prototype,{formatDate:function(M,T){return typeof M!="string"&&(T=M,M=""),this._calendar.formatDate(M||"",this,T)}}),w(f.baseCalendar.prototype,{UNIX_EPOCH:f.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:24*60*60,TICKS_EPOCH:f.instance().jdEpoch,TICKS_PER_DAY:24*60*60*1e7,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(M,T,e){if(typeof M!="string"&&(e=T,T=M,M=""),!T)return"";if(T.calendar()!==this)throw f.local.invalidFormat||f.regionalOptions[""].invalidFormat;M=M||this.local.dateFormat,e=e||{};var a=e.dayNamesShort||this.local.dayNamesShort,n=e.dayNames||this.local.dayNames,r=e.monthNumbers||this.local.monthNumbers,t=e.monthNamesShort||this.local.monthNamesShort,h=e.monthNames||this.local.monthNames;e.calculateWeek||this.local.calculateWeek;for(var s=function(_,g){for(var b=1;A+b<M.length&&M.charAt(A+b)===_;)b++;return A+=b-1,Math.floor(b/(g||1))>1},o=function(_,g,b,v){var k=""+g;if(s(_,v))for(;k.length<b;)k="0"+k;return k},y=function(_,g,b,v){return s(_)?v[g]:b[g]},d=this,p=function(_){return typeof r=="function"?r.call(d,_,s("m")):l(o("m",_.month(),2))},c=function(_,g){return g?typeof h=="function"?h.call(d,_):h[_.month()-d.minMonth]:typeof t=="function"?t.call(d,_):t[_.month()-d.minMonth]},m=this.local.digits,l=function(_){return e.localNumbers&&m?m(_):_},x="",u=!1,A=0;A<M.length;A++)if(u)M.charAt(A)==="'"&&!s("'")?u=!1:x+=M.charAt(A);else switch(M.charAt(A)){case"d":x+=l(o("d",T.day(),2));break;case"D":x+=y("D",T.dayOfWeek(),a,n);break;case"o":x+=o("o",T.dayOfYear(),3);break;case"w":x+=o("w",T.weekOfYear(),2);break;case"m":x+=p(T);break;case"M":x+=c(T,s("M"));break;case"y":x+=s("y",2)?T.year():(T.year()%100<10?"0":"")+T.year()%100;break;case"Y":s("Y",2),x+=T.formatYear();break;case"J":x+=T.toJD();break;case"@":x+=(T.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":x+=(T.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":s("'")?x+="'":u=!0;break;default:x+=M.charAt(A)}return x},parseDate:function(M,T,e){if(T==null)throw f.local.invalidArguments||f.regionalOptions[""].invalidArguments;if(T=typeof T=="object"?T.toString():T+"",T==="")return null;M=M||this.local.dateFormat,e=e||{};var a=e.shortYearCutoff||this.shortYearCutoff;a=typeof a!="string"?a:this.today().year()%100+parseInt(a,10);for(var n=e.dayNamesShort||this.local.dayNamesShort,r=e.dayNames||this.local.dayNames,t=e.parseMonth||this.local.parseMonth,h=e.monthNumbers||this.local.monthNumbers,s=e.monthNamesShort||this.local.monthNamesShort,o=e.monthNames||this.local.monthNames,y=-1,d=-1,p=-1,c=-1,m=-1,l=!1,x=!1,u=function(I,D){for(var R=1;E+R<M.length&&M.charAt(E+R)===I;)R++;return E+=R-1,Math.floor(R/(D||1))>1},A=function(I,D){var R=u(I,D),O=[2,3,R?4:2,R?4:2,10,11,20]["oyYJ@!".indexOf(I)+1],z=new RegExp("^-?\\d{1,"+O+"}"),B=T.substring(S).match(z);if(!B)throw(f.local.missingNumberAt||f.regionalOptions[""].missingNumberAt).replace(/\{0\}/,S);return S+=B[0].length,parseInt(B[0],10)},_=this,g=function(){if(typeof h=="function"){u("m");var I=h.call(_,T.substring(S));return S+=I.length,I}return A("m")},b=function(I,D,R,O){for(var z=u(I,O)?R:D,B=0;B<z.length;B++)if(T.substr(S,z[B].length).toLowerCase()===z[B].toLowerCase())return S+=z[B].length,B+_.minMonth;throw(f.local.unknownNameAt||f.regionalOptions[""].unknownNameAt).replace(/\{0\}/,S)},v=function(){if(typeof o=="function"){var I=u("M")?o.call(_,T.substring(S)):s.call(_,T.substring(S));return S+=I.length,I}return b("M",s,o)},k=function(){if(T.charAt(S)!==M.charAt(E))throw(f.local.unexpectedLiteralAt||f.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,S);S++},S=0,E=0;E<M.length;E++)if(x)M.charAt(E)==="'"&&!u("'")?x=!1:k();else switch(M.charAt(E)){case"d":c=A("d");break;case"D":b("D",n,r);break;case"o":m=A("o");break;case"w":A("w");break;case"m":p=g();break;case"M":p=v();break;case"y":var C=E;l=!u("y",2),E=C,d=A("y",2);break;case"Y":d=A("Y",2);break;case"J":y=A("J")+.5,T.charAt(S)==="."&&(S++,A("J"));break;case"@":y=A("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":y=A("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":S=T.length;break;case"'":u("'")?k():x=!0;break;default:k()}if(S<T.length)throw f.local.unexpectedText||f.regionalOptions[""].unexpectedText;if(d===-1?d=this.today().year():d<100&&l&&(d+=a===-1?1900:this.today().year()-this.today().year()%100-(d<=a?0:100)),typeof p=="string"&&(p=t.call(this,d,p)),m>-1){p=1,c=m;for(var F=this.daysInMonth(d,p);c>F;F=this.daysInMonth(d,p))p++,c-=F}return y>-1?this.fromJD(y):this.newDate(d,p,c)},determineDate:function(M,T,e,a,n){e&&typeof e!="object"&&(n=a,a=e,e=null),typeof a!="string"&&(n=a,a="");var r=this,t=function(h){try{return r.parseDate(a,h,n)}catch{}h=h.toLowerCase();for(var s=(h.match(/^c/)&&e?e.newDate():null)||r.today(),o=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,y=o.exec(h);y;)s.add(parseInt(y[1],10),y[2]||"d"),y=o.exec(h);return s};return T=T?T.newDate():null,M=M==null?T:typeof M=="string"?t(M):typeof M=="number"?isNaN(M)||M===1/0||M===-1/0?T:r.today().add(M,"d"):r.newDate(M),M}})},{"./main":347,"object-assign":247}],349:[function(i,U,V){U.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},{}],350:[function(i,U,V){var w=i("./arrow_paths"),f=i("../../plots/font_attributes"),M=i("../../plots/cartesian/constants"),T=i("../../plot_api/plot_template").templatedArray;i("../../constants/axis_placeable_objects"),U.exports=T("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:f({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:w.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:w.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",M.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",M.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",M.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",M.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:f({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},{"../../constants/axis_placeable_objects":484,"../../plot_api/plot_template":555,"../../plots/cartesian/constants":573,"../../plots/font_attributes":594,"./arrow_paths":349}],351:[function(i,U,V){var w=i("../../lib"),f=i("../../plots/cartesian/axes"),M=i("./draw").draw;U.exports=function(n){var r=n._fullLayout,t=w.filterVisible(r.annotations);if(t.length&&n._fullData.length)return w.syncOrAsync([M,T],n)};function T(a){var n=a._fullLayout;w.filterVisible(n.annotations).forEach(function(r){var t=f.getFromId(a,r.xref),h=f.getFromId(a,r.yref),s=f.getRefType(r.xref),o=f.getRefType(r.yref);r._extremes={},s==="range"&&e(r,t),o==="range"&&e(r,h)})}function e(a,n){var r=n._id,t=r.charAt(0),h=a[t],s=a["a"+t],o=a[t+"ref"],y=a["a"+t+"ref"],d=a["_"+t+"padplus"],p=a["_"+t+"padminus"],c={x:1,y:-1}[t]*a[t+"shift"],m=3*a.arrowsize*a.arrowwidth||0,l=m+c,x=m-c,u=3*a.startarrowsize*a.arrowwidth||0,A=u+c,_=u-c,g;if(y===o){var b=f.findExtremes(n,[n.r2c(h)],{ppadplus:l,ppadminus:x}),v=f.findExtremes(n,[n.r2c(s)],{ppadplus:Math.max(d,A),ppadminus:Math.max(p,_)});g={min:[b.min[0],v.min[0]],max:[b.max[0],v.max[0]]}}else A=s?A+s:A,_=s?_-s:_,g=f.findExtremes(n,[n.r2c(h)],{ppadplus:Math.max(d,l,A),ppadminus:Math.max(p,x,_)});a._extremes[r]=g}},{"../../lib":515,"../../plots/cartesian/axes":566,"./draw":356}],352:[function(i,U,V){var w=i("../../lib"),f=i("../../registry"),M=i("../../plot_api/plot_template").arrayEditor;U.exports={hasClickToShow:T,onClick:e};function T(r,t){var h=a(r,t);return h.on.length>0||h.explicitOff.length>0}function e(r,t){var h=a(r,t),s=h.on,o=h.off.concat(h.explicitOff),y={},d=r._fullLayout.annotations,p,c;if(!!(s.length||o.length)){for(p=0;p<s.length;p++)c=M(r.layout,"annotations",d[s[p]]),c.modifyItem("visible",!0),w.extendFlat(y,c.getUpdateObj());for(p=0;p<o.length;p++)c=M(r.layout,"annotations",d[o[p]]),c.modifyItem("visible",!1),w.extendFlat(y,c.getUpdateObj());return f.call("update",r,{},y)}}function a(r,t){var h=r._fullLayout.annotations,s=[],o=[],y=[],d=(t||[]).length,p,c,m,l,x,u,A,_;for(p=0;p<h.length;p++)if(m=h[p],l=m.clicktoshow,l){for(c=0;c<d;c++)if(x=t[c],u=x.xaxis,A=x.yaxis,u._id===m.xref&&A._id===m.yref&&u.d2r(x.x)===n(m._xclick,u)&&A.d2r(x.y)===n(m._yclick,A)){m.visible?l==="onout"?_=o:_=y:_=s,_.push(p);break}c===d&&m.visible&&l==="onout"&&o.push(p)}return{on:s,off:o,explicitOff:y}}function n(r,t){return t.type==="log"?t.l2r(r):t.d2r(r)}},{"../../lib":515,"../../plot_api/plot_template":555,"../../registry":647}],353:[function(i,U,V){var w=i("../../lib"),f=i("../color");U.exports=function(T,e,a,n){n("opacity");var r=n("bgcolor"),t=n("bordercolor"),h=f.opacity(t);n("borderpad");var s=n("borderwidth"),o=n("showarrow");n("text",o?" ":a._dfltTitle.annotation),n("textangle"),w.coerceFont(n,"font",a.font),n("width"),n("align");var y=n("height");if(y&&n("valign"),o){var d=n("arrowside"),p,c;d.indexOf("end")!==-1&&(p=n("arrowhead"),c=n("arrowsize")),d.indexOf("start")!==-1&&(n("startarrowhead",p),n("startarrowsize",c)),n("arrowcolor",h?e.bordercolor:f.defaultLine),n("arrowwidth",(h&&s||1)*2),n("standoff"),n("startstandoff")}var m=n("hovertext"),l=a.hoverlabel||{};if(m){var x=n("hoverlabel.bgcolor",l.bgcolor||(f.opacity(r)?f.rgb(r):f.defaultLine)),u=n("hoverlabel.bordercolor",l.bordercolor||f.contrast(x));w.coerceFont(n,"hoverlabel.font",{family:l.font.family,size:l.font.size,color:l.font.color||u})}n("captureevents",!!m)}},{"../../lib":515,"../color":367}],354:[function(i,U,V){var w=i("fast-isnumeric"),f=i("../../lib/to_log_range");U.exports=function(T,e,a,n){e=e||{};var r=a==="log"&&e.type==="linear",t=a==="linear"&&e.type==="log";if(!(r||t))return;var h=T._fullLayout.annotations,s=e._id.charAt(0),o,y;function d(c){var m=o[c],l=null;r?l=f(m,e.range):l=Math.pow(10,m),w(l)||(l=null),n(y+c,l)}for(var p=0;p<h.length;p++)o=h[p],y="annotations["+p+"].",o[s+"ref"]===e._id&&d(s),o["a"+s+"ref"]===e._id&&d("a"+s)}},{"../../lib/to_log_range":543,"fast-isnumeric":190}],355:[function(i,U,V){var w=i("../../lib"),f=i("../../plots/cartesian/axes"),M=i("../../plots/array_container_defaults"),T=i("./common_defaults"),e=i("./attributes");U.exports=function(r,t){M(r,t,{name:"annotations",handleItemDefaults:a})};function a(n,r,t){function h(k,S){return w.coerce(n,r,e,k,S)}var s=h("visible"),o=h("clicktoshow");if(!!(s||o)){T(n,r,t,h);for(var y=r.showarrow,d=["x","y"],p=[-10,-30],c={_fullLayout:t},m=0;m<2;m++){var l=d[m],x=f.coerceRef(n,r,c,l,"","paper");if(x!=="paper"){var u=f.getFromId(c,x);u._annIndices.push(r._index)}if(f.coercePosition(r,c,h,x,l,.5),y){var A="a"+l,_=f.coerceRef(n,r,c,A,"pixel",["pixel","paper"]);_!=="pixel"&&_!==x&&(_=r[A]="pixel");var g=_==="pixel"?p[m]:.4;f.coercePosition(r,c,h,_,A,g)}h(l+"anchor"),h(l+"shift")}if(w.noneOrAll(n,r,["x","y"]),y&&w.noneOrAll(n,r,["ax","ay"]),o){var b=h("xclick"),v=h("yclick");r._xclick=b===void 0?r.x:f.cleanPosition(b,c,r.xref),r._yclick=v===void 0?r.y:f.cleanPosition(v,c,r.yref)}}}},{"../../lib":515,"../../plots/array_container_defaults":561,"../../plots/cartesian/axes":566,"./attributes":350,"./common_defaults":353}],356:[function(i,U,V){var w=i("@plotly/d3"),f=i("../../registry"),M=i("../../plots/plots"),T=i("../../lib"),e=T.strTranslate,a=i("../../plots/cartesian/axes"),n=i("../color"),r=i("../drawing"),t=i("../fx"),h=i("../../lib/svg_text_utils"),s=i("../../lib/setcursor"),o=i("../dragelement"),y=i("../../plot_api/plot_template").arrayEditor,d=i("./draw_arrow_head");U.exports={draw:p,drawOne:c,drawRaw:l};function p(x){var u=x._fullLayout;u._infolayer.selectAll(".annotation").remove();for(var A=0;A<u.annotations.length;A++)u.annotations[A].visible&&c(x,A);return M.previousPromises(x)}function c(x,u){var A=x._fullLayout,_=A.annotations[u]||{},g=a.getFromId(x,_.xref),b=a.getFromId(x,_.yref);g&&g.setScale(),b&&b.setScale(),l(x,_,u,!1,g,b)}function m(x,u,A,_,g){var b=g[A],v=g[A+"ref"],k=A.indexOf("y")!==-1,S=a.getRefType(v)==="domain",E=k?_.h:_.w;return x?S?b+(k?-u:u)/x._length:x.p2r(x.r2p(b)+u):b+(k?-u:u)/E}function l(x,u,A,_,g,b){var v=x._fullLayout,k=x._fullLayout._size,S=x._context.edits,E,C;_?(E="annotation-"+_,C=_+".annotations"):(E="annotation",C="annotations");var F=y(x.layout,C,u),I=F.modifyBase,D=F.modifyItem,R=F.getUpdateObj;v._infolayer.selectAll("."+E+'[data-index="'+A+'"]').remove();var O="clip"+v._uid+"_ann"+A;if(!u._input||u.visible===!1){w.selectAll("#"+O).remove();return}var z={x:{},y:{}},B=+u.textangle||0,G=v._infolayer.append("g").classed(E,!0).attr("data-index",String(A)).style("opacity",u.opacity),Q=G.append("g").classed("annotation-text-g",!0),X=S[u.showarrow?"annotationTail":"annotationPosition"],j=u.captureevents||S.annotationText||X;function re(oe){var be={index:A,annotation:u._input,fullAnnotation:u,event:oe};return _&&(be.subplotId=_),be}var ue=Q.append("g").style("pointer-events",j?"all":null).call(s,"pointer").on("click",function(){x._dragging=!1,x.emit("plotly_clickannotation",re(w.event))});u.hovertext&&ue.on("mouseover",function(){var oe=u.hoverlabel,be=oe.font,ce=this.getBoundingClientRect(),de=x.getBoundingClientRect();t.loneHover({x0:ce.left-de.left,x1:ce.right-de.left,y:(ce.top+ce.bottom)/2-de.top,text:u.hovertext,color:oe.bgcolor,borderColor:oe.bordercolor,fontFamily:be.family,fontSize:be.size,fontColor:be.color},{container:v._hoverlayer.node(),outerContainer:v._paper.node(),gd:x})}).on("mouseout",function(){t.loneUnhover(v._hoverlayer.node())});var K=u.borderwidth,te=u.borderpad,Y=K+te,H=ue.append("rect").attr("class","bg").style("stroke-width",K+"px").call(n.stroke,u.bordercolor).call(n.fill,u.bgcolor),ee=u.width||u.height,ne=v._topclips.selectAll("#"+O).data(ee?[0]:[]);ne.enter().append("clipPath").classed("annclip",!0).attr("id",O).append("rect"),ne.exit().remove();var Z=u.font,q=v._meta?T.templateString(u.text,v._meta):u.text,ie=ue.append("text").classed("annotation-text",!0).text(q);function se(oe){return oe.call(r.font,Z).attr({"text-anchor":{left:"start",right:"end"}[u.align]||"middle"}),h.convertToTspans(oe,x,ae),oe}function ae(){var oe=ie.selectAll("a");if(oe.size()===1&&oe.text()===ie.text()){var be=ue.insert("a",":first-child").attr({"xlink:xlink:href":oe.attr("xlink:href"),"xlink:xlink:show":oe.attr("xlink:show")}).style({cursor:"pointer"});be.node().appendChild(H.node())}var ce=ue.select(".annotation-text-math-group"),de=!ce.empty(),ye=r.bBox((de?ce:ie).node()),ge=ye.width,me=ye.height,Se=u.width||ge,Le=u.height||me,Oe=Math.round(Se+2*Y),we=Math.round(Le+2*Y);function Ce(ar,rr){return rr==="auto"&&(ar<1/3?rr="left":ar>2/3?rr="right":rr="center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[rr]}for(var Ke=!1,Ye=["x","y"],Fe=0;Fe<Ye.length;Fe++){var Re=Ye[Fe],je=u[Re+"ref"]||Re,xt=u["a"+Re+"ref"],Nt={x:g,y:b}[Re],tr=(B+(Re==="x"?0:-90))*Math.PI/180,Ht=Oe*Math.cos(tr),Pt=we*Math.sin(tr),$t=Math.abs(Ht)+Math.abs(Pt),Ut=u[Re+"anchor"],Lt=u[Re+"shift"]*(Re==="x"?1:-1),We=z[Re],ot,Ge,Me,Ve,Qe,tt=a.getRefType(je);if(Nt&&tt!=="domain"){var St=Nt.r2fraction(u[Re]);(St<0||St>1)&&(xt===je?(St=Nt.r2fraction(u["a"+Re]),(St<0||St>1)&&(Ke=!0)):Ke=!0),ot=Nt._offset+Nt.r2p(u[Re]),Ve=.5}else{var wt=tt==="domain";Re==="x"?(Me=u[Re],ot=wt?Nt._offset+Nt._length*Me:ot=k.l+k.w*Me):(Me=1-u[Re],ot=wt?Nt._offset+Nt._length*Me:ot=k.t+k.h*Me),Ve=u.showarrow?.5:Me}if(u.showarrow){We.head=ot;var Ct=u["a"+Re];if(Qe=Ht*Ce(.5,u.xanchor)-Pt*Ce(.5,u.yanchor),xt===je){var jt=a.getRefType(xt);jt==="domain"?(Re==="y"&&(Ct=1-Ct),We.tail=Nt._offset+Nt._length*Ct):jt==="paper"?Re==="y"?(Ct=1-Ct,We.tail=k.t+k.h*Ct):We.tail=k.l+k.w*Ct:We.tail=Nt._offset+Nt.r2p(Ct),Ge=Qe}else We.tail=ot+Ct,Ge=Qe+Ct;We.text=We.tail+Qe;var Bt=v[Re==="x"?"width":"height"];if(je==="paper"&&(We.head=T.constrain(We.head,1,Bt-1)),xt==="pixel"){var Wt=-Math.max(We.tail-3,We.text),Qt=Math.min(We.tail+3,We.text)-Bt;Wt>0?(We.tail+=Wt,We.text+=Wt):Qt>0&&(We.tail-=Qt,We.text-=Qt)}We.tail+=Lt,We.head+=Lt}else Qe=$t*Ce(Ve,Ut),Ge=Qe,We.text=ot+Qe;We.text+=Lt,Qe+=Lt,Ge+=Lt,u["_"+Re+"padplus"]=$t/2+Ge,u["_"+Re+"padminus"]=$t/2-Ge,u["_"+Re+"size"]=$t,u["_"+Re+"shift"]=Qe}if(Ke){ue.remove();return}var Zt=0,cr=0;if(u.align!=="left"&&(Zt=(Se-ge)*(u.align==="center"?.5:1)),u.valign!=="top"&&(cr=(Le-me)*(u.valign==="middle"?.5:1)),de)ce.select("svg").attr({x:Y+Zt-1,y:Y+cr}).call(r.setClipUrl,ee?O:null,x);else{var Xr=Y+cr-ye.top,vn=Y+Zt-ye.left;ie.call(h.positionText,vn,Xr).call(r.setClipUrl,ee?O:null,x)}ne.select("rect").call(r.setRect,Y,Y,Se,Le),H.call(r.setRect,K/2,K/2,Oe-K,we-K),ue.call(r.setTranslate,Math.round(z.x.text-Oe/2),Math.round(z.y.text-we/2)),Q.attr({transform:"rotate("+B+","+z.x.text+","+z.y.text+")"});var en=function(ar,rr){G.selectAll(".annotation-arrow-g").remove();var Kt=z.x.head,Er=z.y.head,st=z.x.tail+ar,et=z.y.tail+rr,ht=z.x.text+ar,vt=z.y.text+rr,kt=T.rotationXYMatrix(B,ht,vt),Vt=T.apply2DTransform(kt),Pe=T.apply2DTransform2(kt),ke=+H.attr("width"),lt=+H.attr("height"),ft=ht-.5*ke,yt=ft+ke,Rt=vt-.5*lt,_t=Rt+lt,Dt=[[ft,Rt,ft,_t],[ft,_t,yt,_t],[yt,_t,yt,Rt],[yt,Rt,ft,Rt]].map(Pe);if(!Dt.reduce(function(it,zt){return it^!!T.segmentsIntersect(Kt,Er,Kt+1e6,Er+1e6,zt[0],zt[1],zt[2],zt[3])},!1)){Dt.forEach(function(it){var zt=T.segmentsIntersect(st,et,Kt,Er,it[0],it[1],it[2],it[3]);zt&&(st=zt.x,et=zt.y)});var Jt=u.arrowwidth,fr=u.arrowcolor,Rr=u.arrowside,Sr=G.append("g").style({opacity:n.opacity(fr)}).classed("annotation-arrow-g",!0),Pr=Sr.append("path").attr("d","M"+st+","+et+"L"+Kt+","+Er).style("stroke-width",Jt+"px").call(n.stroke,n.rgb(fr));if(d(Pr,Rr,u),S.annotationPosition&&Pr.node().parentNode&&!_){var Jr=Kt,ur=Er;if(u.standoff){var _r=Math.sqrt(Math.pow(Kt-st,2)+Math.pow(Er-et,2));Jr+=u.standoff*(st-Kt)/_r,ur+=u.standoff*(et-Er)/_r}var Br=Sr.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(st-Jr)+","+(et-ur),transform:e(Jr,ur)}).style("stroke-width",Jt+6+"px").call(n.stroke,"rgba(0,0,0,0)").call(n.fill,"rgba(0,0,0,0)"),Yr,Dr;o.init({element:Br.node(),gd:x,prepFn:function(){var it=r.getTranslate(ue);Yr=it.x,Dr=it.y,g&&g.autorange&&I(g._name+".autorange",!0),b&&b.autorange&&I(b._name+".autorange",!0)},moveFn:function(it,zt){var qt=Vt(Yr,Dr),hr=qt[0]+it,Ur=qt[1]+zt;ue.call(r.setTranslate,hr,Ur),D("x",m(g,it,"x",k,u)),D("y",m(b,zt,"y",k,u)),u.axref===u.xref&&D("ax",m(g,it,"ax",k,u)),u.ayref===u.yref&&D("ay",m(b,zt,"ay",k,u)),Sr.attr("transform",e(it,zt)),Q.attr({transform:"rotate("+B+","+hr+","+Ur+")"})},doneFn:function(){f.call("_guiRelayout",x,R());var it=document.querySelector(".js-notes-box-panel");it&&it.redraw(it.selectedObj)}})}}};if(u.showarrow&&en(0,0),X){var ut;o.init({element:ue.node(),gd:x,prepFn:function(){ut=Q.attr("transform")},moveFn:function(ar,rr){var Kt="pointer";if(u.showarrow)u.axref===u.xref?D("ax",m(g,ar,"ax",k,u)):D("ax",u.ax+ar),u.ayref===u.yref?D("ay",m(b,rr,"ay",k.w,u)):D("ay",u.ay+rr),en(ar,rr);else{if(_)return;var Er,st;if(g)Er=m(g,ar,"x",k,u);else{var et=u._xsize/k.w,ht=u.x+(u._xshift-u.xshift)/k.w-et/2;Er=o.align(ht+ar/k.w,et,0,1,u.xanchor)}if(b)st=m(b,rr,"y",k,u);else{var vt=u._ysize/k.h,kt=u.y-(u._yshift+u.yshift)/k.h-vt/2;st=o.align(kt-rr/k.h,vt,0,1,u.yanchor)}D("x",Er),D("y",st),(!g||!b)&&(Kt=o.getCursor(g?.5:Er,b?.5:st,u.xanchor,u.yanchor))}Q.attr({transform:e(ar,rr)+ut}),s(ue,Kt)},clickFn:function(ar,rr){u.captureevents&&x.emit("plotly_clickannotation",re(rr))},doneFn:function(){s(ue),f.call("_guiRelayout",x,R());var ar=document.querySelector(".js-notes-box-panel");ar&&ar.redraw(ar.selectedObj)}})}}S.annotationText?ie.call(h.makeEditable,{delegate:ue,gd:x}).call(se).on("edit",function(oe){u.text=oe,this.call(se),D("text",oe),g&&g.autorange&&I(g._name+".autorange",!0),b&&b.autorange&&I(b._name+".autorange",!0),f.call("_guiRelayout",x,R())}):ie.call(se)}},{"../../lib":515,"../../lib/setcursor":536,"../../lib/svg_text_utils":541,"../../plot_api/plot_template":555,"../../plots/cartesian/axes":566,"../../plots/plots":628,"../../registry":647,"../color":367,"../dragelement":386,"../drawing":389,"../fx":407,"./draw_arrow_head":357,"@plotly/d3":58}],357:[function(i,U,V){var w=i("@plotly/d3"),f=i("../color"),M=i("./arrow_paths"),T=i("../../lib"),e=T.strScale,a=T.strRotate,n=T.strTranslate;U.exports=function(t,h,s){var o=t.node(),y=M[s.arrowhead||0],d=M[s.startarrowhead||0],p=(s.arrowwidth||1)*(s.arrowsize||1),c=(s.arrowwidth||1)*(s.startarrowsize||1),m=h.indexOf("start")>=0,l=h.indexOf("end")>=0,x=y.backoff*p+s.standoff,u=d.backoff*c+s.startstandoff,A,_,g,b;if(o.nodeName==="line"){A={x:+t.attr("x1"),y:+t.attr("y1")},_={x:+t.attr("x2"),y:+t.attr("y2")};var v=A.x-_.x,k=A.y-_.y;if(g=Math.atan2(k,v),b=g+Math.PI,x&&u&&x+u>Math.sqrt(v*v+k*k)){Q();return}if(x){if(x*x>v*v+k*k){Q();return}var S=x*Math.cos(g),E=x*Math.sin(g);_.x+=S,_.y+=E,t.attr({x2:_.x,y2:_.y})}if(u){if(u*u>v*v+k*k){Q();return}var C=u*Math.cos(g),F=u*Math.sin(g);A.x-=C,A.y-=F,t.attr({x1:A.x,y1:A.y})}}else if(o.nodeName==="path"){var I=o.getTotalLength(),D="";if(I<x+u){Q();return}var R=o.getPointAtLength(0),O=o.getPointAtLength(.1);g=Math.atan2(R.y-O.y,R.x-O.x),A=o.getPointAtLength(Math.min(u,I)),D="0px,"+u+"px,";var z=o.getPointAtLength(I),B=o.getPointAtLength(I-.1);b=Math.atan2(z.y-B.y,z.x-B.x),_=o.getPointAtLength(Math.max(0,I-x));var G=D?u+x:x;D+=I-G+"px,"+I+"px",t.style("stroke-dasharray",D)}function Q(){t.style("stroke-dasharray","0px,100px")}function X(j,re,ue,K){!j.path||(j.noRotate&&(ue=0),w.select(o.parentNode).append("path").attr({class:t.attr("class"),d:j.path,transform:n(re.x,re.y)+a(ue*180/Math.PI)+e(K)}).style({fill:f.rgb(s.arrowcolor),"stroke-width":0}))}m&&X(d,A,g,c),l&&X(y,_,b,p)}},{"../../lib":515,"../color":367,"./arrow_paths":349,"@plotly/d3":58}],358:[function(i,U,V){var w=i("./draw"),f=i("./click");U.exports={moduleType:"component",name:"annotations",layoutAttributes:i("./attributes"),supplyLayoutDefaults:i("./defaults"),includeBasePlot:i("../../plots/cartesian/include_components")("annotations"),calcAutorange:i("./calc_autorange"),draw:w.draw,drawOne:w.drawOne,drawRaw:w.drawRaw,hasClickToShow:f.hasClickToShow,onClick:f.onClick,convertCoords:i("./convert_coords")}},{"../../plots/cartesian/include_components":577,"./attributes":350,"./calc_autorange":351,"./click":352,"./convert_coords":354,"./defaults":355,"./draw":356}],359:[function(i,U,V){var w=i("../annotations/attributes"),f=i("../../plot_api/edit_types").overrideAll,M=i("../../plot_api/plot_template").templatedArray;U.exports=f(M("annotation",{visible:w.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:w.xanchor,xshift:w.xshift,yanchor:w.yanchor,yshift:w.yshift,text:w.text,textangle:w.textangle,font:w.font,width:w.width,height:w.height,opacity:w.opacity,align:w.align,valign:w.valign,bgcolor:w.bgcolor,bordercolor:w.bordercolor,borderpad:w.borderpad,borderwidth:w.borderwidth,showarrow:w.showarrow,arrowcolor:w.arrowcolor,arrowhead:w.arrowhead,startarrowhead:w.startarrowhead,arrowside:w.arrowside,arrowsize:w.arrowsize,startarrowsize:w.startarrowsize,arrowwidth:w.arrowwidth,standoff:w.standoff,startstandoff:w.startstandoff,hovertext:w.hovertext,hoverlabel:w.hoverlabel,captureevents:w.captureevents}),"calc","from-root")},{"../../plot_api/edit_types":548,"../../plot_api/plot_template":555,"../annotations/attributes":350}],360:[function(i,U,V){var w=i("../../lib"),f=i("../../plots/cartesian/axes");U.exports=function(e){for(var a=e.fullSceneLayout,n=a.annotations,r=0;r<n.length;r++)M(n[r],e);e.fullLayout._infolayer.selectAll(".annotation-"+e.id).remove()};function M(T,e){var a=e.fullSceneLayout,n=a.domain,r=e.fullLayout._size,t={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};T._xa={},w.extendFlat(T._xa,t),f.setConvert(T._xa),T._xa._offset=r.l+n.x[0]*r.w,T._xa.l2p=function(){return .5*(1+T._pdata[0]/T._pdata[3])*r.w*(n.x[1]-n.x[0])},T._ya={},w.extendFlat(T._ya,t),f.setConvert(T._ya),T._ya._offset=r.t+(1-n.y[1])*r.h,T._ya.l2p=function(){return .5*(1-T._pdata[1]/T._pdata[3])*r.h*(n.y[1]-n.y[0])}}},{"../../lib":515,"../../plots/cartesian/axes":566}],361:[function(i,U,V){var w=i("../../lib"),f=i("../../plots/cartesian/axes"),M=i("../../plots/array_container_defaults"),T=i("../annotations/common_defaults"),e=i("./attributes");U.exports=function(r,t,h){M(r,t,{name:"annotations",handleItemDefaults:a,fullLayout:h.fullLayout})};function a(n,r,t,h){function s(d,p){return w.coerce(n,r,e,d,p)}function o(d){var p=d+"axis",c={_fullLayout:{}};return c._fullLayout[p]=t[p],f.coercePosition(r,c,s,d,d,.5)}var y=s("visible");!y||(T(n,r,h.fullLayout,s),o("x"),o("y"),o("z"),w.noneOrAll(n,r,["x","y","z"]),r.xref="x",r.yref="y",r.zref="z",s("xanchor"),s("yanchor"),s("xshift"),s("yshift"),r.showarrow&&(r.axref="pixel",r.ayref="pixel",s("ax",-10),s("ay",-30),w.noneOrAll(n,r,["ax","ay"])))}},{"../../lib":515,"../../plots/array_container_defaults":561,"../../plots/cartesian/axes":566,"../annotations/common_defaults":353,"./attributes":359}],362:[function(i,U,V){var w=i("../annotations/draw").drawRaw,f=i("../../plots/gl3d/project"),M=["x","y","z"];U.exports=function(e){for(var a=e.fullSceneLayout,n=e.dataScale,r=a.annotations,t=0;t<r.length;t++){for(var h=r[t],s=!1,o=0;o<3;o++){var y=M[o],d=h[y],p=a[y+"axis"],c=p.r2fraction(d);if(c<0||c>1){s=!0;break}}s?e.fullLayout._infolayer.select(".annotation-"+e.id+'[data-index="'+t+'"]').remove():(h._pdata=f(e.glplot.cameraParams,[a.xaxis.r2l(h.x)*n[0],a.yaxis.r2l(h.y)*n[1],a.zaxis.r2l(h.z)*n[2]]),w(e.graphDiv,h,t,e.id,h._xa,h._ya))}}},{"../../plots/gl3d/project":616,"../annotations/draw":356}],363:[function(i,U,V){var w=i("../../registry"),f=i("../../lib");U.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:i("./attributes")}}},layoutAttributes:i("./attributes"),handleDefaults:i("./defaults"),includeBasePlot:M,convert:i("./convert"),draw:i("./draw")};function M(T,e){var a=w.subplotsRegistry.gl3d;if(!!a)for(var n=a.attrRegex,r=Object.keys(T),t=0;t<r.length;t++){var h=r[t];n.test(h)&&(T[h].annotations||[]).length&&(f.pushUnique(e._basePlotModules,a),f.pushUnique(e._subplots.gl3d,h))}}},{"../../lib":515,"../../registry":647,"./attributes":359,"./convert":360,"./defaults":361,"./draw":362}],364:[function(i,U,V){U.exports=i("world-calendars/dist/main"),i("world-calendars/dist/plus"),i("world-calendars/dist/calendars/chinese"),i("world-calendars/dist/calendars/coptic"),i("world-calendars/dist/calendars/discworld"),i("world-calendars/dist/calendars/ethiopian"),i("world-calendars/dist/calendars/hebrew"),i("world-calendars/dist/calendars/islamic"),i("world-calendars/dist/calendars/julian"),i("world-calendars/dist/calendars/mayan"),i("world-calendars/dist/calendars/nanakshahi"),i("world-calendars/dist/calendars/nepali"),i("world-calendars/dist/calendars/persian"),i("world-calendars/dist/calendars/taiwan"),i("world-calendars/dist/calendars/thai"),i("world-calendars/dist/calendars/ummalqura")},{"world-calendars/dist/calendars/chinese":333,"world-calendars/dist/calendars/coptic":334,"world-calendars/dist/calendars/discworld":335,"world-calendars/dist/calendars/ethiopian":336,"world-calendars/dist/calendars/hebrew":337,"world-calendars/dist/calendars/islamic":338,"world-calendars/dist/calendars/julian":339,"world-calendars/dist/calendars/mayan":340,"world-calendars/dist/calendars/nanakshahi":341,"world-calendars/dist/calendars/nepali":342,"world-calendars/dist/calendars/persian":343,"world-calendars/dist/calendars/taiwan":344,"world-calendars/dist/calendars/thai":345,"world-calendars/dist/calendars/ummalqura":346,"world-calendars/dist/main":347,"world-calendars/dist/plus":348}],365:[function(i,U,V){var w=i("./calendars"),f=i("../../lib"),M=i("../../constants/numerical"),T=M.EPOCHJD,e=M.ONEDAY,a={valType:"enumerated",values:f.sortObjectKeys(w.calendars),editType:"calc",dflt:"gregorian"},n=function(g,b,v,k){var S={};return S[v]=a,f.coerce(g,b,S,v,k)},r=function(g,b,v,k){for(var S=0;S<v.length;S++)n(g,b,v[S]+"calendar",k.calendar)},t={chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},h={chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},s={chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},o="##",y={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:o,w:o,c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}};function d(g,b,v){for(var k=Math.floor((b+.05)/e)+T,S=c(v).fromJD(k),E=0,C,F,I,D,R;(E=g.indexOf("%",E))!==-1;)C=g.charAt(E+1),C==="0"||C==="-"||C==="_"?(I=3,F=g.charAt(E+2),C==="_"&&(C="-")):(F=C,C="0",I=2),D=y[F],D?(D===o?R=o:R=S.formatDate(D[C]),g=g.substr(0,E)+R+g.substr(E+I),E+=R.length):E+=I;return g}var p={};function c(g){var b=p[g];return b||(b=p[g]=w.instance(g),b)}function m(g){return f.extendFlat({},a,{description:g})}function l(g){return"Sets the calendar system to use with `"+g+"` date data."}var x={xcalendar:m(l("x"))},u=f.extendFlat({},x,{ycalendar:m(l("y"))}),A=f.extendFlat({},u,{zcalendar:m(l("z"))}),_=m(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));U.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:u,bar:u,box:u,heatmap:u,contour:u,histogram:u,histogram2d:u,histogram2dcontour:u,scatter3d:A,surface:A,mesh3d:A,scattergl:u,ohlc:x,candlestick:x},layout:{calendar:m(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:_},yaxis:{calendar:_},scene:{xaxis:{calendar:_},yaxis:{calendar:_},zaxis:{calendar:_}},polar:{radialaxis:{calendar:_}}},transforms:{filter:{valuecalendar:m(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:m(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:a,handleDefaults:n,handleTraceDefaults:r,CANONICAL_SUNDAY:h,CANONICAL_TICK:t,DFLTRANGE:s,getCal:c,worldCalFmt:d}},{"../../constants/numerical":491,"../../lib":515,"./calendars":364}],366:[function(i,U,V){V.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],V.defaultLine="#444",V.lightLine="#eee",V.background="#fff",V.borderLine="#BEC8D9",V.lightFraction=100*(14-4)/(15-4)},{}],367:[function(i,U,V){var w=i("tinycolor2"),f=i("fast-isnumeric"),M=i("../../lib/array").isTypedArray,T=U.exports={},e=i("./attributes");T.defaults=e.defaults;var a=T.defaultLine=e.defaultLine;T.lightLine=e.lightLine;var n=T.background=e.background;T.tinyRGB=function(t){var h=t.toRgb();return"rgb("+Math.round(h.r)+", "+Math.round(h.g)+", "+Math.round(h.b)+")"},T.rgb=function(t){return T.tinyRGB(w(t))},T.opacity=function(t){return t?w(t).getAlpha():0},T.addOpacity=function(t,h){var s=w(t).toRgb();return"rgba("+Math.round(s.r)+", "+Math.round(s.g)+", "+Math.round(s.b)+", "+h+")"},T.combine=function(t,h){var s=w(t).toRgb();if(s.a===1)return w(t).toRgbString();var o=w(h||n).toRgb(),y=o.a===1?o:{r:255*(1-o.a)+o.r*o.a,g:255*(1-o.a)+o.g*o.a,b:255*(1-o.a)+o.b*o.a},d={r:y.r*(1-s.a)+s.r*s.a,g:y.g*(1-s.a)+s.g*s.a,b:y.b*(1-s.a)+s.b*s.a};return w(d).toRgbString()},T.contrast=function(t,h,s){var o=w(t);o.getAlpha()!==1&&(o=w(T.combine(t,n)));var y=o.isDark()?h?o.lighten(h):n:s?o.darken(s):a;return y.toString()},T.stroke=function(t,h){var s=w(h);t.style({stroke:T.tinyRGB(s),"stroke-opacity":s.getAlpha()})},T.fill=function(t,h){var s=w(h);t.style({fill:T.tinyRGB(s),"fill-opacity":s.getAlpha()})},T.clean=function(t){if(!(!t||typeof t!="object")){var h=Object.keys(t),s,o,y,d;for(s=0;s<h.length;s++)if(y=h[s],d=t[y],y.substr(y.length-5)==="color")if(Array.isArray(d))for(o=0;o<d.length;o++)d[o]=r(d[o]);else t[y]=r(d);else if(y.substr(y.length-10)==="colorscale"&&Array.isArray(d))for(o=0;o<d.length;o++)Array.isArray(d[o])&&(d[o][1]=r(d[o][1]));else if(Array.isArray(d)){var p=d[0];if(!Array.isArray(p)&&p&&typeof p=="object")for(o=0;o<d.length;o++)T.clean(d[o])}else d&&typeof d=="object"&&!M(d)&&T.clean(d)}};function r(t){if(f(t)||typeof t!="string")return t;var h=t.trim();if(h.substr(0,3)!=="rgb")return t;var s=h.match(/^rgba?\s*\(([^()]*)\)$/);if(!s)return t;var o=s[1].trim().split(/\s*[\s,]\s*/),y=h.charAt(3)==="a"&&o.length===4;if(!y&&o.length!==3)return t;for(var d=0;d<o.length;d++){if(!o[d].length||(o[d]=Number(o[d]),!(o[d]>=0)))return t;if(d===3)o[d]>1&&(o[d]=1);else if(o[d]>=1)return t}var p=Math.round(o[0]*255)+", "+Math.round(o[1]*255)+", "+Math.round(o[2]*255);return y?"rgba("+p+", "+o[3]+")":"rgb("+p+")"}},{"../../lib/array":497,"./attributes":366,"fast-isnumeric":190,tinycolor2:313}],368:[function(i,U,V){var w=i("../../plots/cartesian/layout_attributes"),f=i("../../plots/font_attributes"),M=i("../../lib/extend").extendFlat,T=i("../../plot_api/edit_types").overrideAll;U.exports=T({orientation:{valType:"enumerated",values:["h","v"],dflt:"v"},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"]},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",min:-2,max:3},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},ypad:{valType:"number",min:0,dflt:10},outlinecolor:w.linecolor,outlinewidth:w.linewidth,bordercolor:w.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:w.tickmode,nticks:w.nticks,tick0:w.tick0,dtick:w.dtick,tickvals:w.tickvals,ticktext:w.ticktext,ticks:M({},w.ticks,{dflt:""}),ticklabeloverflow:M({},w.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside"},ticklen:w.ticklen,tickwidth:w.tickwidth,tickcolor:w.tickcolor,ticklabelstep:w.ticklabelstep,showticklabels:w.showticklabels,tickfont:f({}),tickangle:w.tickangle,tickformat:w.tickformat,tickformatstops:w.tickformatstops,tickprefix:w.tickprefix,showtickprefix:w.showtickprefix,ticksuffix:w.ticksuffix,showticksuffix:w.showticksuffix,separatethousands:w.separatethousands,exponentformat:w.exponentformat,minexponent:w.minexponent,showexponent:w.showexponent,title:{text:{valType:"string"},font:f({}),side:{valType:"enumerated",values:["right","top","bottom"]}},_deprecated:{title:{valType:"string"},titlefont:f({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},{"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/cartesian/layout_attributes":579,"../../plots/font_attributes":594}],369:[function(i,U,V){U.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},{}],370:[function(i,U,V){var w=i("../../lib"),f=i("../../plot_api/plot_template"),M=i("../../plots/cartesian/tick_value_defaults"),T=i("../../plots/cartesian/tick_mark_defaults"),e=i("../../plots/cartesian/tick_label_defaults"),a=i("../../plots/cartesian/prefix_suffix_defaults"),n=i("./attributes");U.exports=function(t,h,s){var o=f.newContainer(h,"colorbar"),y=t.colorbar||{};function d(S,E){return w.coerce(y,o,n,S,E)}var p=s.margin||{t:0,b:0,l:0,r:0},c=s.width-p.l-p.r,m=s.height-p.t-p.b,l=d("orientation"),x=l==="v",u=d("thicknessmode");d("thickness",u==="fraction"?30/(x?c:m):30);var A=d("lenmode");d("len",A==="fraction"?1:x?m:c),d("x",x?1.02:.5),d("xanchor",x?"left":"center"),d("xpad"),d("y",x?.5:1.02),d("yanchor",x?"middle":"bottom"),d("ypad"),w.noneOrAll(y,o,["x","y"]),d("outlinecolor"),d("outlinewidth"),d("bordercolor"),d("borderwidth"),d("bgcolor");var _=w.coerce(y,o,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:x?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");d("ticklabeloverflow",_.indexOf("inside")!==-1?"hide past domain":"hide past div"),M(y,o,d,"linear");var g=s.font,b={outerTicks:!1,font:g};_.indexOf("inside")!==-1&&(b.bgColor="black"),a(y,o,d,"linear",b),e(y,o,d,"linear",b),T(y,o,d,"linear",b),d("title.text",s._dfltTitle.colorbar);var v=o.tickfont,k=w.extendFlat({},v,{color:g.color,size:w.bigFont(v.size)});w.coerceFont(d,"title.font",k),d("title.side",x?"top":"right")}},{"../../lib":515,"../../plot_api/plot_template":555,"../../plots/cartesian/prefix_suffix_defaults":583,"../../plots/cartesian/tick_label_defaults":587,"../../plots/cartesian/tick_mark_defaults":588,"../../plots/cartesian/tick_value_defaults":589,"./attributes":368}],371:[function(i,U,V){var w=i("@plotly/d3"),f=i("tinycolor2"),M=i("../../plots/plots"),T=i("../../registry"),e=i("../../plots/cartesian/axes"),a=i("../dragelement"),n=i("../../lib"),r=n.strTranslate,t=i("../../lib/extend").extendFlat,h=i("../../lib/setcursor"),s=i("../drawing"),o=i("../color"),y=i("../titles"),d=i("../../lib/svg_text_utils"),p=i("../colorscale/helpers").flipScale,c=i("../../plots/cartesian/axis_defaults"),m=i("../../plots/cartesian/position_defaults"),l=i("../../plots/cartesian/layout_attributes"),x=i("../../constants/alignment"),u=x.LINE_SPACING,A=x.FROM_TL,_=x.FROM_BR,g=i("./constants").cn;function b(F){var I=F._fullLayout,D=I._infolayer.selectAll("g."+g.colorbar).data(v(F),function(R){return R._id});D.enter().append("g").attr("class",function(R){return R._id}).classed(g.colorbar,!0),D.each(function(R){var O=w.select(this);n.ensureSingle(O,"rect",g.cbbg),n.ensureSingle(O,"g",g.cbfills),n.ensureSingle(O,"g",g.cblines),n.ensureSingle(O,"g",g.cbaxis,function(B){B.classed(g.crisp,!0)}),n.ensureSingle(O,"g",g.cbtitleunshift,function(B){B.append("g").classed(g.cbtitle,!0)}),n.ensureSingle(O,"rect",g.cboutline);var z=k(O,R,F);z&&z.then&&(F._promises||[]).push(z),F._context.edits.colorbarPosition&&S(O,R,F)}),D.exit().each(function(R){M.autoMargin(F,R._id)}).remove(),D.order()}function v(F){var I=F._fullLayout,D=F.calcdata,R=[],O,z,B,G;function Q(Z){return t(Z,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function X(){typeof G.calc=="function"?G.calc(F,B,O):(O._fillgradient=z.reversescale?p(z.colorscale):z.colorscale,O._zrange=[z[G.min],z[G.max]])}for(var j=0;j<D.length;j++){var re=D[j];B=re[0].trace;var ue=B._module.colorbar;if(B.visible===!0&&ue)for(var K=Array.isArray(ue),te=K?ue:[ue],Y=0;Y<te.length;Y++){G=te[Y];var H=G.container;z=H?B[H]:B,z&&z.showscale&&(O=Q(z.colorbar),O._id="cb"+B.uid+(K&&H?"-"+H:""),O._traceIndex=B.index,O._propPrefix=(H?H+".":"")+"colorbar.",O._meta=B._meta,X(),R.push(O))}}for(var ee in I._colorAxes)if(z=I[ee],z.showscale){var ne=I._colorAxes[ee];O=Q(z.colorbar),O._id="cb"+ee,O._propPrefix=ee+".colorbar.",O._meta=I._meta,G={min:"cmin",max:"cmax"},ne[0]!=="heatmap"&&(B=ne[1],G.calc=B._module.colorbar.calc),X(),R.push(O)}return R}function k(F,I,D){var R=I.orientation==="v",O=I.len,z=I.lenmode,B=I.thickness,G=I.thicknessmode,Q=I.outlinewidth,X=I.borderwidth,j=I.bgcolor,re=I.xanchor,ue=I.yanchor,K=I.xpad,te=I.ypad,Y=I.x,H=R?I.y:1-I.y,ee=D._fullLayout,ne=ee._size,Z=I._fillcolor,q=I._line,ie=I.title,se=ie.side,ae=I._zrange||w.extent((typeof Z=="function"?Z:q.color).domain()),oe=typeof q.color=="function"?q.color:function(){return q.color},be=typeof Z=="function"?Z:function(){return Z},ce=I._levels,de=E(D,I,ae),ye=de.fill,ge=de.line,me=Math.round(B*(G==="fraction"?R?ne.w:ne.h:1)),Se=me/(R?ne.w:ne.h),Le=Math.round(O*(z==="fraction"?R?ne.h:ne.w:1)),Oe=Le/(R?ne.h:ne.w),we=Math.round(R?Y*ne.w+K:H*ne.h+te),Ce={center:.5,right:1}[re]||0,Ke={top:1,middle:.5}[ue]||0,Ye=R?Y-Ce*Se:H-Ke*Se,Fe=R?H-Ke*Oe:Y-Ce*Oe,Re=Math.round(R?ne.h*(1-Fe):ne.w*Fe);I._lenFrac=Oe,I._thickFrac=Se,I._uFrac=Ye,I._vFrac=Fe;var je=I._axis=C(D,I,ae);je.position=Se+(R?Y+K/ne.w:H+te/ne.h);var xt=["top","bottom"].indexOf(se)!==-1;if(R&&xt&&(je.title.side=se,je.titlex=Y+K/ne.w,je.titley=Fe+(ie.side==="top"?Oe-te/ne.h:te/ne.h)),!R&&!xt&&(je.title.side=se,je.titley=H+te/ne.h,je.titlex=Fe+K/ne.w),q.color&&I.tickmode==="auto"){je.tickmode="linear",je.tick0=ce.start;var Nt=ce.size,tr=n.constrain(Le/50,4,15)+1,Ht=(ae[1]-ae[0])/((I.nticks||tr)*Nt);if(Ht>1){var Pt=Math.pow(10,Math.floor(Math.log(Ht)/Math.LN10));Nt*=Pt*n.roundUp(Ht/Pt,[2,5,10]),(Math.abs(ce.start)/ce.size+1e-6)%1<2e-6&&(je.tick0=0)}je.dtick=Nt}je.domain=R?[Fe+te/ne.h,Fe+Oe-te/ne.h]:[Fe+K/ne.w,Fe+Oe-K/ne.w],je.setScale(),F.attr("transform",r(Math.round(ne.l),Math.round(ne.t)));var $t=F.select("."+g.cbtitleunshift).attr("transform",r(-Math.round(ne.l),-Math.round(ne.t))),Ut=je.ticklabelposition,Lt=je.title.font.size,We=F.select("."+g.cbaxis),ot,Ge=0,Me=0;function Ve(Ct,jt){var Bt={propContainer:je,propName:I._propPrefix+"title",traceIndex:I._traceIndex,_meta:I._meta,placeholder:ee._dfltTitle.colorbar,containerGroup:F.select("."+g.cbtitle)},Wt=Ct.charAt(0)==="h"?Ct.substr(1):"h"+Ct;F.selectAll("."+Wt+",."+Wt+"-math-group").remove(),y.draw(D,Ct,t(Bt,jt||{}))}function Qe(){if(R&&xt||!R&&!xt){var Ct,jt;se==="top"&&(Ct=K+ne.l+ne.w*Y,jt=te+ne.t+ne.h*(1-Fe-Oe)+3+Lt*.75),se==="bottom"&&(Ct=K+ne.l+ne.w*Y,jt=te+ne.t+ne.h*(1-Fe)-3-Lt*.25),se==="right"&&(jt=te+ne.t+ne.h*H+3+Lt*.75,Ct=K+ne.l+ne.w*Fe),Ve(je._id+"title",{attributes:{x:Ct,y:jt,"text-anchor":R?"start":"middle"}})}}function tt(){if(R&&!xt||!R&&xt){var Ct=je.position||0,jt=je._offset+je._length/2,Bt,Wt;if(se==="right")Wt=jt,Bt=ne.l+ne.w*Ct+10+Lt*(je.showticklabels?1:.5);else if(Bt=jt,se==="bottom"&&(Wt=ne.t+ne.h*Ct+10+(Ut.indexOf("inside")===-1?je.tickfont.size:0)+(je.ticks!=="intside"&&I.ticklen||0)),se==="top"){var Qt=ie.text.split("<br>").length;Wt=ne.t+ne.h*Ct+10-me-u*Lt*Qt}Ve((R?"h":"v")+je._id+"title",{avoid:{selection:w.select(D).selectAll("g."+je._id+"tick"),side:se,offsetTop:R?0:ne.t,offsetLeft:R?ne.l:0,maxShift:R?ee.width:ee.height},attributes:{x:Bt,y:Wt,"text-anchor":"middle"},transform:{rotate:R?-90:0,offset:0}})}}function St(){if(!R&&!xt||R&&xt){var Ct=F.select("."+g.cbtitle),jt=Ct.select("text"),Bt=[-Q/2,Q/2],Wt=Ct.select(".h"+je._id+"title-math-group").node(),Qt=15.6;jt.node()&&(Qt=parseInt(jt.node().style.fontSize,10)*u);var Zt;if(Wt?(Zt=s.bBox(Wt),Me=Zt.width,Ge=Zt.height,Ge>Qt&&(Bt[1]-=(Ge-Qt)/2)):jt.node()&&!jt.classed(g.jsPlaceholder)&&(Zt=s.bBox(jt.node()),Me=Zt.width,Ge=Zt.height),R){if(Ge){if(Ge+=5,se==="top")je.domain[1]-=Ge/ne.h,Bt[1]*=-1;else{je.domain[0]+=Ge/ne.h;var cr=d.lineCount(jt);Bt[1]+=(1-cr)*Qt}Ct.attr("transform",r(Bt[0],Bt[1])),je.setScale()}}else Me&&(se==="right"&&(je.domain[0]+=(Me+Lt/2)/ne.w),Ct.attr("transform",r(Bt[0],Bt[1])),je.setScale())}F.selectAll("."+g.cbfills+",."+g.cblines).attr("transform",R?r(0,Math.round(ne.h*(1-je.domain[1]))):r(Math.round(ne.w*je.domain[0]),0)),We.attr("transform",R?r(0,Math.round(-ne.t)):r(Math.round(-ne.l),0));var Xr=F.select("."+g.cbfills).selectAll("rect."+g.cbfill).attr("style","").data(ye);Xr.enter().append("rect").classed(g.cbfill,!0).style("stroke","none"),Xr.exit().remove();var vn=ae.map(je.c2p).map(Math.round).sort(function(Kt,Er){return Kt-Er});Xr.each(function(Kt,Er){var st=[Er===0?ae[0]:(ye[Er]+ye[Er-1])/2,Er===ye.length-1?ae[1]:(ye[Er]+ye[Er+1])/2].map(je.c2p).map(Math.round);R&&(st[1]=n.constrain(st[1]+(st[1]>st[0])?1:-1,vn[0],vn[1]));var et=w.select(this).attr(R?"x":"y",we).attr(R?"y":"x",w.min(st)).attr(R?"width":"height",Math.max(me,2)).attr(R?"height":"width",Math.max(w.max(st)-w.min(st),2));if(I._fillgradient)s.gradient(et,D,I._id,R?"vertical":"horizontalreversed",I._fillgradient,"fill");else{var ht=be(Kt).replace("e-","");et.attr("fill",f(ht).toHexString())}});var en=F.select("."+g.cblines).selectAll("path."+g.cbline).data(q.color&&q.width?ge:[]);en.enter().append("path").classed(g.cbline,!0),en.exit().remove(),en.each(function(Kt){var Er=we,st=Math.round(je.c2p(Kt))+q.width/2%1;w.select(this).attr("d","M"+(R?Er+","+st:st+","+Er)+(R?"h":"v")+me).call(s.lineGroupStyle,q.width,oe(Kt),q.dash)}),We.selectAll("g."+je._id+"tick,path").remove();var ut=we+me+(Q||0)/2-(I.ticks==="outside"?1:0),ar=e.calcTicks(je),rr=e.getTickSigns(je)[2];return e.drawTicks(D,je,{vals:je.ticks==="inside"?e.clipEnds(je,ar):ar,layer:We,path:e.makeTickPath(je,ut,rr),transFn:e.makeTransTickFn(je)}),e.drawLabels(D,je,{vals:ar,layer:We,transFn:e.makeTransTickLabelFn(je),labelFns:e.makeLabelFns(je,ut)})}function wt(){var Ct,jt=me+Q/2;Ut.indexOf("inside")===-1&&(Ct=s.bBox(We.node()),jt+=R?Ct.width:Ct.height),ot=$t.select("text");var Bt=0,Wt=R&&se==="top",Qt=!R&&se==="right",Zt=0;if(ot.node()&&!ot.classed(g.jsPlaceholder)){var cr,Xr=$t.select(".h"+je._id+"title-math-group").node();Xr&&(R&&xt||!R&&!xt)?(Ct=s.bBox(Xr),Bt=Ct.width,cr=Ct.height):(Ct=s.bBox($t.node()),Bt=Ct.right-ne.l-(R?we:Re),cr=Ct.bottom-ne.t-(R?Re:we),!R&&se==="top"&&(jt+=Ct.height,Zt=Ct.height)),Qt&&(ot.attr("transform",r(Bt/2+Lt/2,0)),Bt*=2),jt=Math.max(jt,R?Bt:cr)}var vn=(R?K:te)*2+jt+X+Q/2,en=0;!R&&ie.text&&ue==="bottom"&&H<=0&&(en=vn/2,vn+=en,Zt+=en),ee._hColorbarMoveTitle=en,ee._hColorbarMoveCBTitle=Zt;var ut=X+Q;F.select("."+g.cbbg).attr("x",(R?we:Re)-ut/2-(R?K:0)).attr("y",(R?Re:we)-(R?Le:te+Zt-en)).attr(R?"width":"height",Math.max(vn-en,2)).attr(R?"height":"width",Math.max(Le+ut,2)).call(o.fill,j).call(o.stroke,I.bordercolor).style("stroke-width",X);var ar=Qt?Math.max(Bt-10,0):0;if(F.selectAll("."+g.cboutline).attr("x",(R?we:Re+K)+ar).attr("y",(R?Re+te-Le:we)+(Wt?Ge:0)).attr(R?"width":"height",Math.max(me,2)).attr(R?"height":"width",Math.max(Le-(R?2*te+Ge:2*K+ar),2)).call(o.stroke,I.outlinecolor).style({fill:"none","stroke-width":Q}),F.attr("transform",r(ne.l-(R?Ce*vn:0),ne.t-(R?0:(1-Ke)*vn-Zt))),!R&&(X||f(j).getAlpha()&&!f.equals(ee.paper_bgcolor,j))){var rr=We.selectAll("text"),Kt=rr[0].length,Er=F.select("."+g.cbbg).node(),st=s.bBox(Er),et=s.getTranslate(F),ht=2;rr.each(function(ft,yt){var Rt=0,_t=Kt-1;if(yt===Rt||yt===_t){var Dt=s.bBox(this),Jt=s.getTranslate(this),fr;if(yt===_t){var Rr=Dt.right+Jt.x,Sr=st.right+et.x+Re-X-ht+Y;fr=Sr-Rr,fr>0&&(fr=0)}else if(yt===Rt){var Pr=Dt.left+Jt.x,Jr=st.left+et.x+Re+X+ht;fr=Jr-Pr,fr<0&&(fr=0)}fr&&(Kt<3?this.setAttribute("transform","translate("+fr+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}})}var vt={},kt=A[re],Vt=_[re],Pe=A[ue],ke=_[ue],lt=vn-me;R?(z==="pixels"?(vt.y=H,vt.t=Le*Pe,vt.b=Le*ke):(vt.t=vt.b=0,vt.yt=H+O*Pe,vt.yb=H-O*ke),G==="pixels"?(vt.x=Y,vt.l=vn*kt,vt.r=vn*Vt):(vt.l=lt*kt,vt.r=lt*Vt,vt.xl=Y-B*kt,vt.xr=Y+B*Vt)):(z==="pixels"?(vt.x=Y,vt.l=Le*kt,vt.r=Le*Vt):(vt.l=vt.r=0,vt.xl=Y+O*kt,vt.xr=Y-O*Vt),G==="pixels"?(vt.y=1-H,vt.t=vn*Pe,vt.b=vn*ke):(vt.t=lt*Pe,vt.b=lt*ke,vt.yt=H-B*Pe,vt.yb=H+B*ke)),M.autoMargin(D,I._id,vt)}return n.syncOrAsync([M.previousPromises,Qe,St,tt,M.previousPromises,wt],D)}function S(F,I,D){var R=I.orientation==="v",O=D._fullLayout,z=O._size,B,G,Q;a.init({element:F.node(),gd:D,prepFn:function(){B=F.attr("transform"),h(F)},moveFn:function(X,j){F.attr("transform",B+r(X,j)),G=a.align((R?I._uFrac:I._vFrac)+X/z.w,R?I._thickFrac:I._lenFrac,0,1,I.xanchor),Q=a.align((R?I._vFrac:1-I._uFrac)-j/z.h,R?I._lenFrac:I._thickFrac,0,1,I.yanchor);var re=a.getCursor(G,Q,I.xanchor,I.yanchor);h(F,re)},doneFn:function(){if(h(F),G!==void 0&&Q!==void 0){var X={};X[I._propPrefix+"x"]=G,X[I._propPrefix+"y"]=Q,I._traceIndex!==void 0?T.call("_guiRestyle",D,X,I._traceIndex):T.call("_guiRelayout",D,X)}}})}function E(F,I,D){var R=I._levels,O=[],z=[],B,G,Q=R.end+R.size/100,X=R.size,j=1.001*D[0]-.001*D[1],re=1.001*D[1]-.001*D[0];for(G=0;G<1e5&&(B=R.start+G*X,!(X>0?B>=Q:B<=Q));G++)B>j&&B<re&&O.push(B);if(I._fillgradient)z=[0];else if(typeof I._fillcolor=="function"){var ue=I._filllevels;if(ue)for(Q=ue.end+ue.size/100,X=ue.size,G=0;G<1e5&&(B=ue.start+G*X,!(X>0?B>=Q:B<=Q));G++)B>D[0]&&B<D[1]&&z.push(B);else z=O.map(function(K){return K-R.size/2}),z.push(z[z.length-1]+R.size)}else I._fillcolor&&typeof I._fillcolor=="string"&&(z=[0]);return R.size<0&&(O.reverse(),z.reverse()),{line:O,fill:z}}function C(F,I,D){var R=F._fullLayout,O=I.orientation==="v",z={type:"linear",range:D,tickmode:I.tickmode,nticks:I.nticks,tick0:I.tick0,dtick:I.dtick,tickvals:I.tickvals,ticktext:I.ticktext,ticks:I.ticks,ticklen:I.ticklen,tickwidth:I.tickwidth,tickcolor:I.tickcolor,showticklabels:I.showticklabels,ticklabelposition:I.ticklabelposition,ticklabeloverflow:I.ticklabeloverflow,ticklabelstep:I.ticklabelstep,tickfont:I.tickfont,tickangle:I.tickangle,tickformat:I.tickformat,exponentformat:I.exponentformat,minexponent:I.minexponent,separatethousands:I.separatethousands,showexponent:I.showexponent,showtickprefix:I.showtickprefix,tickprefix:I.tickprefix,showticksuffix:I.showticksuffix,ticksuffix:I.ticksuffix,title:I.title,showline:!0,anchor:"free",side:O?"right":"bottom",position:1},B=O?"y":"x",G={type:"linear",_id:B+I._id},Q={letter:B,font:R.font,noHover:!0,noTickson:!0,noTicklabelmode:!0,calendar:R.calendar};function X(j,re){return n.coerce(z,G,l,j,re)}return c(z,G,X,Q,R),m(z,G,X,Q),G}U.exports={draw:b}},{"../../constants/alignment":483,"../../lib":515,"../../lib/extend":505,"../../lib/setcursor":536,"../../lib/svg_text_utils":541,"../../plots/cartesian/axes":566,"../../plots/cartesian/axis_defaults":568,"../../plots/cartesian/layout_attributes":579,"../../plots/cartesian/position_defaults":582,"../../plots/plots":628,"../../registry":647,"../color":367,"../colorscale/helpers":378,"../dragelement":386,"../drawing":389,"../titles":476,"./constants":369,"@plotly/d3":58,tinycolor2:313}],372:[function(i,U,V){var w=i("../../lib");U.exports=function(M){return w.isPlainObject(M.colorbar)}},{"../../lib":515}],373:[function(i,U,V){U.exports={moduleType:"component",name:"colorbar",attributes:i("./attributes"),supplyDefaults:i("./defaults"),draw:i("./draw").draw,hasColorbar:i("./has_colorbar")}},{"./attributes":368,"./defaults":370,"./draw":371,"./has_colorbar":372}],374:[function(i,U,V){var w=i("../colorbar/attributes"),f=i("../../lib/regex").counter,M=i("../../lib/sort_object_keys"),T=i("./scales.js").scales;M(T),U.exports=function(a,n){a=a||"",n=n||{};var r=n.cLetter||"c";"onlyIfNumerical"in n?n.onlyIfNumerical:Boolean(a);var t="noScale"in n?n.noScale:a==="marker.line",h="showScaleDflt"in n?n.showScaleDflt:r==="z",s=typeof n.colorscaleDflt=="string"?T[n.colorscaleDflt]:null,o=n.editTypeOverride||"",y;"colorAttr"in n?(y=n.colorAttr,n.colorAttr):y={z:"z",c:"color"}[r];var d=r+"auto",p=r+"min",c=r+"max",m=r+"mid",l={};l[p]=l[c]=void 0;var x={};x[d]=!1;var u={};return y==="color"&&(u.color={valType:"color",arrayOk:!0,editType:o||"style"},n.anim&&(u.color.anim=!0)),u[d]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:l},u[p]={valType:"number",dflt:null,editType:o||"plot",impliedEdits:x},u[c]={valType:"number",dflt:null,editType:o||"plot",impliedEdits:x},u[m]={valType:"number",dflt:null,editType:"calc",impliedEdits:l},u.colorscale={valType:"colorscale",editType:"calc",dflt:s,impliedEdits:{autocolorscale:!1}},u.autocolorscale={valType:"boolean",dflt:n.autoColorDflt!==!1,editType:"calc",impliedEdits:{colorscale:void 0}},u.reversescale={valType:"boolean",dflt:!1,editType:"plot"},t||(u.showscale={valType:"boolean",dflt:h,editType:"calc"},u.colorbar=w),n.noColorAxis||(u.coloraxis={valType:"subplotid",regex:f("coloraxis"),dflt:null,editType:"calc"}),u}},{"../../lib/regex":532,"../../lib/sort_object_keys":538,"../colorbar/attributes":368,"./scales.js":382}],375:[function(i,U,V){var w=i("fast-isnumeric"),f=i("../../lib"),M=i("./helpers").extractOpts;U.exports=function(e,a,n){var r=e._fullLayout,t=n.vals,h=n.containerStr,s=h?f.nestedProperty(a,h).get():a,o=M(s),y=o.auto!==!1,d=o.min,p=o.max,c=o.mid,m=function(){return f.aggNums(Math.min,null,t)},l=function(){return f.aggNums(Math.max,null,t)};if(d===void 0?d=m():y&&(s._colorAx&&w(d)?d=Math.min(d,m()):d=m()),p===void 0?p=l():y&&(s._colorAx&&w(p)?p=Math.max(p,l()):p=l()),y&&c!==void 0&&(p-c>c-d?d=c-(p-c):p-c<c-d&&(p=c+(c-d))),d===p&&(d-=.5,p+=.5),o._sync("min",d),o._sync("max",p),o.autocolorscale){var x;d*p<0?x=r.colorscale.diverging:d>=0?x=r.colorscale.sequential:x=r.colorscale.sequentialminus,o._sync("colorscale",x)}}},{"../../lib":515,"./helpers":378,"fast-isnumeric":190}],376:[function(i,U,V){var w=i("../../lib"),f=i("./helpers").hasColorscale,M=i("./helpers").extractOpts;U.exports=function(e,a){function n(d,p){var c=d["_"+p];c!==void 0&&(d[p]=c)}function r(d,p){var c=p.container?w.nestedProperty(d,p.container).get():d;if(c)if(c.coloraxis)c._colorAx=a[c.coloraxis];else{var m=M(c),l=m.auto;(l||m.min===void 0)&&n(c,p.min),(l||m.max===void 0)&&n(c,p.max),m.autocolorscale&&n(c,"colorscale")}}for(var t=0;t<e.length;t++){var h=e[t],s=h._module.colorbar;if(s)if(Array.isArray(s))for(var o=0;o<s.length;o++)r(h,s[o]);else r(h,s);f(h,"marker.line")&&r(h,{container:"marker.line",min:"cmin",max:"cmax"})}for(var y in a._colorAxes)r(a[y],{min:"cmin",max:"cmax"})}},{"../../lib":515,"./helpers":378}],377:[function(i,U,V){var w=i("fast-isnumeric"),f=i("../../lib"),M=i("../colorbar/has_colorbar"),T=i("../colorbar/defaults"),e=i("./scales").isValid,a=i("../../registry").traceIs;function n(r,t){var h=t.slice(0,t.length-1);return t?f.nestedProperty(r,h).get()||{}:r}U.exports=function r(t,h,s,o,y){var d=y.prefix,p=y.cLetter,c="_module"in h,m=n(t,d),l=n(h,d),x=n(h._template||{},d)||{},u=function(){return delete t.coloraxis,delete h.coloraxis,r(t,h,s,o,y)};if(c){var A=s._colorAxes||{},_=o(d+"coloraxis");if(_){var g=a(h,"contour")&&f.nestedProperty(h,"contours.coloring").get()||"heatmap",b=A[_];b?(b[2].push(u),b[0]!==g&&(b[0]=!1,f.warn(["Ignoring coloraxis:",_,"setting","as it is linked to incompatible colorscales."].join(" ")))):A[_]=[g,h,[u]];return}}var v=m[p+"min"],k=m[p+"max"],S=w(v)&&w(k)&&v<k,E=o(d+p+"auto",!S);E?o(d+p+"mid"):(o(d+p+"min"),o(d+p+"max"));var C=m.colorscale,F=x.colorscale,I;if(C!==void 0&&(I=!e(C)),F!==void 0&&(I=!e(F)),o(d+"autocolorscale",I),o(d+"colorscale"),o(d+"reversescale"),d!=="marker.line."){var D;d&&c&&(D=M(m));var R=o(d+"showscale",D);R&&(d&&x&&(l._template=x),T(m,l,s))}}},{"../../lib":515,"../../registry":647,"../colorbar/defaults":370,"../colorbar/has_colorbar":372,"./scales":382,"fast-isnumeric":190}],378:[function(i,U,V){var w=i("@plotly/d3"),f=i("tinycolor2"),M=i("fast-isnumeric"),T=i("../../lib"),e=i("../color"),a=i("./scales").isValid;function n(c,m,l){var x=m?T.nestedProperty(c,m).get()||{}:c,u=x[l||"color"],A=!1;if(T.isArrayOrTypedArray(u)){for(var _=0;_<u.length;_++)if(M(u[_])){A=!0;break}}return T.isPlainObject(x)&&(A||x.showscale===!0||M(x.cmin)&&M(x.cmax)||a(x.colorscale)||T.isPlainObject(x.colorbar))}var r=["showscale","autocolorscale","colorscale","reversescale","colorbar"],t=["min","max","mid","auto"];function h(c){var m=c._colorAx,l=m||c,x={},u,A,_;for(A=0;A<r.length;A++)_=r[A],x[_]=l[_];if(m)for(u="c",A=0;A<t.length;A++)_=t[A],x[_]=l["c"+_];else{var g;for(A=0;A<t.length;A++){if(_=t[A],g="c"+_,g in l){x[_]=l[g];continue}g="z"+_,g in l&&(x[_]=l[g])}u=g.charAt(0)}return x._sync=function(b,v){var k=t.indexOf(b)!==-1?u+b:b;l[k]=l["_"+k]=v},x}function s(c){for(var m=h(c),l=m.min,x=m.max,u=m.reversescale?o(m.colorscale):m.colorscale,A=u.length,_=new Array(A),g=new Array(A),b=0;b<A;b++){var v=u[b];_[b]=l+v[0]*(x-l),g[b]=v[1]}return{domain:_,range:g}}function o(c){for(var m=c.length,l=new Array(m),x=m-1,u=0;x>=0;x--,u++){var A=c[x];l[u]=[1-A[0],A[1]]}return l}function y(c,m){m=m||{};for(var l=c.domain,x=c.range,u=x.length,A=new Array(u),_=0;_<u;_++){var g=f(x[_]).toRgb();A[_]=[g.r,g.g,g.b,g.a]}var b=w.scale.linear().domain(l).range(A).clamp(!0),v=m.noNumericCheck,k=m.returnArray,S;return v&&k?S=b:v?S=function(E){return p(b(E))}:k?S=function(E){return M(E)?b(E):f(E).isValid()?E:e.defaultLine}:S=function(E){return M(E)?p(b(E)):f(E).isValid()?E:e.defaultLine},S.domain=b.domain,S.range=function(){return x},S}function d(c,m){return y(s(c),m)}function p(c){var m={r:c[0],g:c[1],b:c[2],a:c[3]};return f(m).toRgbString()}U.exports={hasColorscale:n,extractOpts:h,extractScale:s,flipScale:o,makeColorScaleFunc:y,makeColorScaleFuncFromTrace:d}},{"../../lib":515,"../color":367,"./scales":382,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:313}],379:[function(i,U,V){var w=i("./scales"),f=i("./helpers");U.exports={moduleType:"component",name:"colorscale",attributes:i("./attributes"),layoutAttributes:i("./layout_attributes"),supplyLayoutDefaults:i("./layout_defaults"),handleDefaults:i("./defaults"),crossTraceDefaults:i("./cross_trace_defaults"),calc:i("./calc"),scales:w.scales,defaultScale:w.defaultScale,getScale:w.get,isValidScale:w.isValid,hasColorscale:f.hasColorscale,extractOpts:f.extractOpts,extractScale:f.extractScale,flipScale:f.flipScale,makeColorScaleFunc:f.makeColorScaleFunc,makeColorScaleFuncFromTrace:f.makeColorScaleFuncFromTrace}},{"./attributes":374,"./calc":375,"./cross_trace_defaults":376,"./defaults":377,"./helpers":378,"./layout_attributes":380,"./layout_defaults":381,"./scales":382}],380:[function(i,U,V){var w=i("../../lib/extend").extendFlat,f=i("./attributes"),M=i("./scales").scales;U.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:M.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:M.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:M.RdBu,editType:"calc"}},coloraxis:w({_isSubplotObj:!0,editType:"calc"},f("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},{"../../lib/extend":505,"./attributes":374,"./scales":382}],381:[function(i,U,V){var w=i("../../lib"),f=i("../../plot_api/plot_template"),M=i("./layout_attributes"),T=i("./defaults");U.exports=function(a,n){function r(c,m){return w.coerce(a,n,M,c,m)}r("colorscale.sequential"),r("colorscale.sequentialminus"),r("colorscale.diverging");var t=n._colorAxes,h,s;function o(c,m){return w.coerce(h,s,M.coloraxis,c,m)}for(var y in t){var d=t[y];if(d[0])h=a[y]||{},s=f.newContainer(n,y,"coloraxis"),s._name=y,T(h,s,n,o,{prefix:"",cLetter:"c"});else{for(var p=0;p<d[2].length;p++)d[2][p]();delete n._colorAxes[y]}}}},{"../../lib":515,"../../plot_api/plot_template":555,"./defaults":377,"./layout_attributes":380}],382:[function(i,U,V){var w=i("tinycolor2"),f={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},M=f.RdBu;function T(n,r){if(r||(r=M),!n)return r;function t(){try{n=f[n]||JSON.parse(n)}catch{n=r}}return typeof n=="string"&&(t(),typeof n=="string"&&t()),e(n)?n:r}function e(n){var r=0;if(!Array.isArray(n)||n.length<2||!n[0]||!n[n.length-1]||+n[0][0]!=0||+n[n.length-1][0]!=1)return!1;for(var t=0;t<n.length;t++){var h=n[t];if(h.length!==2||+h[0]<r||!w(h[1]).isValid())return!1;r=+h[0]}return!0}function a(n){return f[n]!==void 0?!0:e(n)}U.exports={scales:f,defaultScale:M,get:T,isValid:a}},{tinycolor2:313}],383:[function(i,U,V){U.exports=function(f,M,T,e,a){var n=(f-T)/(e-T),r=n+M/(e-T),t=(n+r)/2;return a==="left"||a==="bottom"?n:a==="center"||a==="middle"?t:a==="right"||a==="top"?r:n<2/3-t?n:r>4/3-t?r:t}},{}],384:[function(i,U,V){var w=i("../../lib"),f=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];U.exports=function(T,e,a,n){return a==="left"?T=0:a==="center"?T=1:a==="right"?T=2:T=w.constrain(Math.floor(T*3),0,2),n==="bottom"?e=0:n==="middle"?e=1:n==="top"?e=2:e=w.constrain(Math.floor(e*3),0,2),f[e][T]}},{"../../lib":515}],385:[function(i,U,V){V.selectMode=function(w){return w==="lasso"||w==="select"},V.drawMode=function(w){return w==="drawclosedpath"||w==="drawopenpath"||w==="drawline"||w==="drawrect"||w==="drawcircle"},V.openMode=function(w){return w==="drawline"||w==="drawopenpath"},V.rectMode=function(w){return w==="select"||w==="drawline"||w==="drawrect"||w==="drawcircle"},V.freeMode=function(w){return w==="lasso"||w==="drawclosedpath"||w==="drawopenpath"},V.selectingOrDrawing=function(w){return V.freeMode(w)||V.rectMode(w)}},{}],386:[function(i,U,V){var w=i("mouse-event-offset"),f=i("has-hover"),M=i("has-passive-events"),T=i("../../lib").removeElement,e=i("../../plots/cartesian/constants"),a=U.exports={};a.align=i("./align"),a.getCursor=i("./cursor");var n=i("./unhover");a.unhover=n.wrapped,a.unhoverRaw=n.raw,a.init=function(s){var o=s.gd,y=1,d=o._context.doubleClickDelay,p=s.element,c,m,l,x,u,A,_,g;o._mouseDownTime||(o._mouseDownTime=0),p.style.pointerEvents="all",p.onmousedown=k,M?(p._ontouchstart&&p.removeEventListener("touchstart",p._ontouchstart),p._ontouchstart=k,p.addEventListener("touchstart",k,{passive:!1})):p.ontouchstart=k;function b(C,F,I){return Math.abs(C)<I&&(C=0),Math.abs(F)<I&&(F=0),[C,F]}var v=s.clampFn||b;function k(C){o._dragged=!1,o._dragging=!0;var F=t(C);c=F[0],m=F[1],_=C.target,A=C,g=C.buttons===2||C.ctrlKey,typeof C.clientX>"u"&&typeof C.clientY>"u"&&(C.clientX=c,C.clientY=m),l=new Date().getTime(),l-o._mouseDownTime<d?y+=1:(y=1,o._mouseDownTime=l),s.prepFn&&s.prepFn(C,c,m),f&&!g?(u=r(),u.style.cursor=window.getComputedStyle(p).cursor):f||(u=document,x=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(p).cursor),document.addEventListener("mouseup",E),document.addEventListener("touchend",E),s.dragmode!==!1&&(C.preventDefault(),document.addEventListener("mousemove",S),document.addEventListener("touchmove",S,{passive:!1}))}function S(C){C.preventDefault();var F=t(C),I=s.minDrag||e.MINDRAG,D=v(F[0]-c,F[1]-m,I),R=D[0],O=D[1];(R||O)&&(o._dragged=!0,a.unhover(o,C)),o._dragged&&s.moveFn&&!g&&(o._dragdata={element:p,dx:R,dy:O},s.moveFn(R,O))}function E(C){if(delete o._dragdata,s.dragmode!==!1&&(C.preventDefault(),document.removeEventListener("mousemove",S),document.removeEventListener("touchmove",S)),document.removeEventListener("mouseup",E),document.removeEventListener("touchend",E),f?T(u):x&&(u.documentElement.style.cursor=x,x=null),!o._dragging){o._dragged=!1;return}if(o._dragging=!1,new Date().getTime()-o._mouseDownTime>d&&(y=Math.max(y-1,1)),o._dragged)s.doneFn&&s.doneFn();else if(s.clickFn&&s.clickFn(y,A),!g){var F;try{F=new MouseEvent("click",C)}catch{var I=t(C);F=document.createEvent("MouseEvents"),F.initMouseEvent("click",C.bubbles,C.cancelable,C.view,C.detail,C.screenX,C.screenY,I[0],I[1],C.ctrlKey,C.altKey,C.shiftKey,C.metaKey,C.button,C.relatedTarget)}_.dispatchEvent(F)}o._dragging=!1,o._dragged=!1}};function r(){var h=document.createElement("div");h.className="dragcover";var s=h.style;return s.position="fixed",s.left=0,s.right=0,s.top=0,s.bottom=0,s.zIndex=999999999,s.background="none",document.body.appendChild(h),h}a.coverSlip=r;function t(h){return w(h.changedTouches?h.changedTouches[0]:h,document.body)}},{"../../lib":515,"../../plots/cartesian/constants":573,"./align":383,"./cursor":384,"./unhover":387,"has-hover":228,"has-passive-events":229,"mouse-event-offset":242}],387:[function(i,U,V){var w=i("../../lib/events"),f=i("../../lib/throttle"),M=i("../../lib/dom").getGraphDiv,T=i("../fx/constants"),e=U.exports={};e.wrapped=function(a,n,r){a=M(a),a._fullLayout&&f.clear(a._fullLayout._uid+T.HOVERID),e.raw(a,n,r)},e.raw=function(n,r){var t=n._fullLayout,h=n._hoverdata;r||(r={}),!(r.target&&!n._dragged&&w.triggerHandler(n,"plotly_beforehover",r)===!1)&&(t._hoverlayer.selectAll("g").remove(),t._hoverlayer.selectAll("line").remove(),t._hoverlayer.selectAll("circle").remove(),n._hoverdata=void 0,r.target&&h&&n.emit("plotly_unhover",{event:r,points:h}))}},{"../../lib/dom":503,"../../lib/events":504,"../../lib/throttle":542,"../fx/constants":401}],388:[function(i,U,V){V.dash={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"},V.pattern={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}},{}],389:[function(i,U,V){var w=i("@plotly/d3"),f=i("../../lib"),M=f.numberFormat,T=i("fast-isnumeric"),e=i("tinycolor2"),a=i("../../registry"),n=i("../color"),r=i("../colorscale"),t=f.strTranslate,h=i("../../lib/svg_text_utils"),s=i("../../constants/xmlns_namespaces"),o=i("../../constants/alignment"),y=o.LINE_SPACING,d=i("../../constants/interactions").DESELECTDIM,p=i("../../traces/scatter/subtypes"),c=i("../../traces/scatter/make_bubble_size_func"),m=i("../../components/fx/helpers").appendArrayPointValue,l=U.exports={};l.font=function(ge,me,Se,Le){f.isPlainObject(me)&&(Le=me.color,Se=me.size,me=me.family),me&&ge.style("font-family",me),Se+1&&ge.style("font-size",Se+"px"),Le&&ge.call(n.fill,Le)},l.setPosition=function(ge,me,Se){ge.attr("x",me).attr("y",Se)},l.setSize=function(ge,me,Se){ge.attr("width",me).attr("height",Se)},l.setRect=function(ge,me,Se,Le,Oe){ge.call(l.setPosition,me,Se).call(l.setSize,Le,Oe)},l.translatePoint=function(ge,me,Se,Le){var Oe=Se.c2p(ge.x),we=Le.c2p(ge.y);if(T(Oe)&&T(we)&&me.node())me.node().nodeName==="text"?me.attr("x",Oe).attr("y",we):me.attr("transform",t(Oe,we));else return!1;return!0},l.translatePoints=function(ge,me,Se){ge.each(function(Le){var Oe=w.select(this);l.translatePoint(Le,Oe,me,Se)})},l.hideOutsideRangePoint=function(ge,me,Se,Le,Oe,we){me.attr("display",Se.isPtWithinRange(ge,Oe)&&Le.isPtWithinRange(ge,we)?null:"none")},l.hideOutsideRangePoints=function(ge,me){if(!!me._hasClipOnAxisFalse){var Se=me.xaxis,Le=me.yaxis;ge.each(function(Oe){var we=Oe[0].trace,Ce=we.xcalendar,Ke=we.ycalendar,Ye=a.traceIs(we,"bar-like")?".bartext":".point,.textpoint";ge.selectAll(Ye).each(function(Fe){l.hideOutsideRangePoint(Fe,w.select(this),Se,Le,Ce,Ke)})})}},l.crispRound=function(ge,me,Se){return!me||!T(me)?Se||0:ge._context.staticPlot?me:me<1?1:Math.round(me)},l.singleLineStyle=function(ge,me,Se,Le,Oe){me.style("fill","none");var we=(((ge||[])[0]||{}).trace||{}).line||{},Ce=Se||we.width||0,Ke=Oe||we.dash||"";n.stroke(me,Le||we.color),l.dashLine(me,Ke,Ce)},l.lineGroupStyle=function(ge,me,Se,Le){ge.style("fill","none").each(function(Oe){var we=(((Oe||[])[0]||{}).trace||{}).line||{},Ce=me||we.width||0,Ke=Le||we.dash||"";w.select(this).call(n.stroke,Se||we.color).call(l.dashLine,Ke,Ce)})},l.dashLine=function(ge,me,Se){Se=+Se||0,me=l.dashStyle(me,Se),ge.style({"stroke-dasharray":me,"stroke-width":Se+"px"})},l.dashStyle=function(ge,me){me=+me||1;var Se=Math.max(me,3);return ge==="solid"?ge="":ge==="dot"?ge=Se+"px,"+Se+"px":ge==="dash"?ge=3*Se+"px,"+3*Se+"px":ge==="longdash"?ge=5*Se+"px,"+5*Se+"px":ge==="dashdot"?ge=3*Se+"px,"+Se+"px,"+Se+"px,"+Se+"px":ge==="longdashdot"&&(ge=5*Se+"px,"+2*Se+"px,"+Se+"px,"+2*Se+"px"),ge};function x(ge,me,Se){var Le=me.fillpattern,Oe=Le&&l.getPatternAttr(Le.shape,0,"");if(Oe){var we=l.getPatternAttr(Le.bgcolor,0,null),Ce=l.getPatternAttr(Le.fgcolor,0,null),Ke=Le.fgopacity,Ye=l.getPatternAttr(Le.size,0,8),Fe=l.getPatternAttr(Le.solidity,0,.3),Re=me.uid;l.pattern(ge,"point",Se,Re,Oe,Ye,Fe,void 0,Le.fillmode,we,Ce,Ke)}else me.fillcolor&&ge.call(n.fill,me.fillcolor)}l.singleFillStyle=function(ge,me){var Se=w.select(ge.node()),Le=Se.data(),Oe=((Le[0]||[])[0]||{}).trace||{};x(ge,Oe,me)},l.fillGroupStyle=function(ge,me){ge.style("stroke-width",0).each(function(Se){var Le=w.select(this);Se[0].trace&&x(Le,Se[0].trace,me)})};var u=i("./symbol_defs");l.symbolNames=[],l.symbolFuncs=[],l.symbolBackOffs=[],l.symbolNeedLines={},l.symbolNoDot={},l.symbolNoFill={},l.symbolList=[],Object.keys(u).forEach(function(ge){var me=u[ge],Se=me.n;l.symbolList.push(Se,String(Se),ge,Se+100,String(Se+100),ge+"-open"),l.symbolNames[Se]=ge,l.symbolFuncs[Se]=me.f,l.symbolBackOffs[Se]=me.backoff||0,me.needLine&&(l.symbolNeedLines[Se]=!0),me.noDot?l.symbolNoDot[Se]=!0:l.symbolList.push(Se+200,String(Se+200),ge+"-dot",Se+300,String(Se+300),ge+"-open-dot"),me.noFill&&(l.symbolNoFill[Se]=!0)});var A=l.symbolNames.length,_="M0,0.5L0.5,0L0,-0.5L-0.5,0Z";l.symbolNumber=function(ge){if(T(ge))ge=+ge;else if(typeof ge=="string"){var me=0;ge.indexOf("-open")>0&&(me=100,ge=ge.replace("-open","")),ge.indexOf("-dot")>0&&(me+=200,ge=ge.replace("-dot","")),ge=l.symbolNames.indexOf(ge),ge>=0&&(ge+=me)}return ge%100>=A||ge>=400?0:Math.floor(Math.max(ge,0))};function g(ge,me,Se,Le){var Oe=ge%100;return l.symbolFuncs[Oe](me,Se,Le)+(ge>=200?_:"")}var b={x1:1,x2:0,y1:0,y2:0},v={x1:0,x2:0,y1:1,y2:0},k=M("~f"),S={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:b},horizontalreversed:{node:"linearGradient",attrs:b,reversed:!0},vertical:{node:"linearGradient",attrs:v},verticalreversed:{node:"linearGradient",attrs:v,reversed:!0}};l.gradient=function(ge,me,Se,Le,Oe,we){for(var Ce=Oe.length,Ke=S[Le],Ye=new Array(Ce),Fe=0;Fe<Ce;Fe++)Ke.reversed?Ye[Ce-1-Fe]=[k((1-Oe[Fe][0])*100),Oe[Fe][1]]:Ye[Fe]=[k(Oe[Fe][0]*100),Oe[Fe][1]];var Re=me._fullLayout,je="g"+Re._uid+"-"+Se,xt=Re._defs.select(".gradients").selectAll("#"+je).data([Le+Ye.join(";")],f.identity);xt.exit().remove(),xt.enter().append(Ke.node).each(function(){var Nt=w.select(this);Ke.attrs&&Nt.attr(Ke.attrs),Nt.attr("id",je);var tr=Nt.selectAll("stop").data(Ye);tr.exit().remove(),tr.enter().append("stop"),tr.each(function(Ht){var Pt=e(Ht[1]);w.select(this).attr({offset:Ht[0]+"%","stop-color":n.tinyRGB(Pt),"stop-opacity":Pt.getAlpha()})})}),ge.style(we,te(je,me)).style(we+"-opacity",null),ge.classed("gradient_filled",!0)},l.pattern=function(ge,me,Se,Le,Oe,we,Ce,Ke,Ye,Fe,Re,je){var xt=me==="legend";Ke&&(Ye==="overlay"?(Fe=Ke,Re=n.contrast(Fe)):(Fe=void 0,Re=Ke));var Nt=Se._fullLayout,tr="p"+Nt._uid+"-"+Le,Ht,Pt,$t=function(Ct,jt,Bt,Wt,Qt){return Wt+(Qt-Wt)*(Ct-jt)/(Bt-jt)},Ut,Lt,We,ot,Ge={},Me=e(Re),Ve=n.tinyRGB(Me),Qe=Me.getAlpha(),tt=je*Qe;switch(Oe){case"/":Ht=we*Math.sqrt(2),Pt=we*Math.sqrt(2),Ut="M-"+Ht/4+","+Pt/4+"l"+Ht/2+",-"+Pt/2+"M0,"+Pt+"L"+Ht+",0M"+Ht/4*3+","+Pt/4*5+"l"+Ht/2+",-"+Pt/2,Lt=Ce*we,ot="path",Ge={d:Ut,opacity:tt,stroke:Ve,"stroke-width":Lt+"px"};break;case"\\":Ht=we*Math.sqrt(2),Pt=we*Math.sqrt(2),Ut="M"+Ht/4*3+",-"+Pt/4+"l"+Ht/2+","+Pt/2+"M0,0L"+Ht+","+Pt+"M-"+Ht/4+","+Pt/4*3+"l"+Ht/2+","+Pt/2,Lt=Ce*we,ot="path",Ge={d:Ut,opacity:tt,stroke:Ve,"stroke-width":Lt+"px"};break;case"x":Ht=we*Math.sqrt(2),Pt=we*Math.sqrt(2),Ut="M-"+Ht/4+","+Pt/4+"l"+Ht/2+",-"+Pt/2+"M0,"+Pt+"L"+Ht+",0M"+Ht/4*3+","+Pt/4*5+"l"+Ht/2+",-"+Pt/2+"M"+Ht/4*3+",-"+Pt/4+"l"+Ht/2+","+Pt/2+"M0,0L"+Ht+","+Pt+"M-"+Ht/4+","+Pt/4*3+"l"+Ht/2+","+Pt/2,Lt=we-we*Math.sqrt(1-Ce),ot="path",Ge={d:Ut,opacity:tt,stroke:Ve,"stroke-width":Lt+"px"};break;case"|":Ht=we,Pt=we,ot="path",Ut="M"+Ht/2+",0L"+Ht/2+","+Pt,Lt=Ce*we,ot="path",Ge={d:Ut,opacity:tt,stroke:Ve,"stroke-width":Lt+"px"};break;case"-":Ht=we,Pt=we,ot="path",Ut="M0,"+Pt/2+"L"+Ht+","+Pt/2,Lt=Ce*we,ot="path",Ge={d:Ut,opacity:tt,stroke:Ve,"stroke-width":Lt+"px"};break;case"+":Ht=we,Pt=we,ot="path",Ut="M"+Ht/2+",0L"+Ht/2+","+Pt+"M0,"+Pt/2+"L"+Ht+","+Pt/2,Lt=we-we*Math.sqrt(1-Ce),ot="path",Ge={d:Ut,opacity:tt,stroke:Ve,"stroke-width":Lt+"px"};break;case".":Ht=we,Pt=we,Ce<Math.PI/4?We=Math.sqrt(Ce*we*we/Math.PI):We=$t(Ce,Math.PI/4,1,we/2,we/Math.sqrt(2)),ot="circle",Ge={cx:Ht/2,cy:Pt/2,r:We,opacity:tt,fill:Ve};break}var St=[Oe||"noSh",Fe||"noBg",Re||"noFg",we,Ce].join(";"),wt=Nt._defs.select(".patterns").selectAll("#"+tr).data([St],f.identity);wt.exit().remove(),wt.enter().append("pattern").each(function(){var Ct=w.select(this);if(Ct.attr({id:tr,width:Ht+"px",height:Pt+"px",patternUnits:"userSpaceOnUse",patternTransform:xt?"scale(0.8)":""}),Fe){var jt=e(Fe),Bt=n.tinyRGB(jt),Wt=jt.getAlpha(),Qt=Ct.selectAll("rect").data([0]);Qt.exit().remove(),Qt.enter().append("rect").attr({width:Ht+"px",height:Pt+"px",fill:Bt,"fill-opacity":Wt})}var Zt=Ct.selectAll(ot).data([0]);Zt.exit().remove(),Zt.enter().append(ot).attr(Ge)}),ge.style("fill",te(tr,Se)).style("fill-opacity",null),ge.classed("pattern_filled",!0)},l.initGradients=function(ge){var me=ge._fullLayout,Se=f.ensureSingle(me._defs,"g","gradients");Se.selectAll("linearGradient,radialGradient").remove(),w.select(ge).selectAll(".gradient_filled").classed("gradient_filled",!1)},l.initPatterns=function(ge){var me=ge._fullLayout,Se=f.ensureSingle(me._defs,"g","patterns");Se.selectAll("pattern").remove(),w.select(ge).selectAll(".pattern_filled").classed("pattern_filled",!1)},l.getPatternAttr=function(ge,me,Se){return ge&&f.isArrayOrTypedArray(ge)?me<ge.length?ge[me]:Se:ge},l.pointStyle=function(ge,me,Se){if(!!ge.size()){var Le=l.makePointStyleFns(me);ge.each(function(Oe){l.singlePointStyle(Oe,w.select(this),me,Le,Se)})}},l.singlePointStyle=function(ge,me,Se,Le,Oe){var we=Se.marker,Ce=we.line;if(me.style("opacity",Le.selectedOpacityFn?Le.selectedOpacityFn(ge):ge.mo===void 0?we.opacity:ge.mo),Le.ms2mrc){var Ke;ge.ms==="various"||we.size==="various"?Ke=3:Ke=Le.ms2mrc(ge.ms),ge.mrc=Ke,Le.selectedSizeFn&&(Ke=ge.mrc=Le.selectedSizeFn(ge));var Ye=l.symbolNumber(ge.mx||we.symbol)||0;ge.om=Ye%200>=100;var Fe=ye(ge,Se),Re=ee(ge,Se);me.attr("d",g(Ye,Ke,Fe,Re))}var je=!1,xt,Nt,tr;if(ge.so)tr=Ce.outlierwidth,Nt=Ce.outliercolor,xt=we.outliercolor;else{var Ht=(Ce||{}).width;tr=(ge.mlw+1||Ht+1||(ge.trace?(ge.trace.marker.line||{}).width:0)+1)-1||0,"mlc"in ge?Nt=ge.mlcc=Le.lineScale(ge.mlc):f.isArrayOrTypedArray(Ce.color)?Nt=n.defaultLine:Nt=Ce.color,f.isArrayOrTypedArray(we.color)&&(xt=n.defaultLine,je=!0),"mc"in ge?xt=ge.mcc=Le.markerScale(ge.mc):xt=we.color||"rgba(0,0,0,0)",Le.selectedColorFn&&(xt=Le.selectedColorFn(ge))}if(ge.om)me.call(n.stroke,xt).style({"stroke-width":(tr||1)+"px",fill:"none"});else{me.style("stroke-width",(ge.isBlank?0:tr)+"px");var Pt=we.gradient,$t=ge.mgt;$t?je=!0:$t=Pt&&Pt.type,f.isArrayOrTypedArray($t)&&($t=$t[0],S[$t]||($t=0));var Ut=we.pattern,Lt=Ut&&l.getPatternAttr(Ut.shape,ge.i,"");if($t&&$t!=="none"){var We=ge.mgc;We?je=!0:We=Pt.color;var ot=Se.uid;je&&(ot+="-"+ge.i),l.gradient(me,Oe,ot,$t,[[0,We],[1,xt]],"fill")}else if(Lt){var Ge=l.getPatternAttr(Ut.bgcolor,ge.i,null),Me=l.getPatternAttr(Ut.fgcolor,ge.i,null),Ve=Ut.fgopacity,Qe=l.getPatternAttr(Ut.size,ge.i,8),tt=l.getPatternAttr(Ut.solidity,ge.i,.3),St=ge.mcc||f.isArrayOrTypedArray(Ut.shape)||f.isArrayOrTypedArray(Ut.bgcolor)||f.isArrayOrTypedArray(Ut.size)||f.isArrayOrTypedArray(Ut.solidity),wt=Se.uid;St&&(wt+="-"+ge.i),l.pattern(me,"point",Oe,wt,Lt,Qe,tt,ge.mcc,Ut.fillmode,Ge,Me,Ve)}else n.fill(me,xt);tr&&n.stroke(me,Nt)}},l.makePointStyleFns=function(ge){var me={},Se=ge.marker;return me.markerScale=l.tryColorscale(Se,""),me.lineScale=l.tryColorscale(Se,"line"),a.traceIs(ge,"symbols")&&(me.ms2mrc=p.isBubble(ge)?c(ge):function(){return(Se.size||6)/2}),ge.selectedpoints&&f.extendFlat(me,l.makeSelectedPointStyleFns(ge)),me},l.makeSelectedPointStyleFns=function(ge){var me={},Se=ge.selected||{},Le=ge.unselected||{},Oe=ge.marker||{},we=Se.marker||{},Ce=Le.marker||{},Ke=Oe.opacity,Ye=we.opacity,Fe=Ce.opacity,Re=Ye!==void 0,je=Fe!==void 0;(f.isArrayOrTypedArray(Ke)||Re||je)&&(me.selectedOpacityFn=function(We){var ot=We.mo===void 0?Oe.opacity:We.mo;return We.selected?Re?Ye:ot:je?Fe:d*ot});var xt=Oe.color,Nt=we.color,tr=Ce.color;(Nt||tr)&&(me.selectedColorFn=function(We){var ot=We.mcc||xt;return We.selected?Nt||ot:tr||ot});var Ht=Oe.size,Pt=we.size,$t=Ce.size,Ut=Pt!==void 0,Lt=$t!==void 0;return a.traceIs(ge,"symbols")&&(Ut||Lt)&&(me.selectedSizeFn=function(We){var ot=We.mrc||Ht/2;return We.selected?Ut?Pt/2:ot:Lt?$t/2:ot}),me},l.makeSelectedTextStyleFns=function(ge){var me={},Se=ge.selected||{},Le=ge.unselected||{},Oe=ge.textfont||{},we=Se.textfont||{},Ce=Le.textfont||{},Ke=Oe.color,Ye=we.color,Fe=Ce.color;return me.selectedTextColorFn=function(Re){var je=Re.tc||Ke;return Re.selected?Ye||je:Fe||(Ye?je:n.addOpacity(je,d))},me},l.selectedPointStyle=function(ge,me){if(!(!ge.size()||!me.selectedpoints)){var Se=l.makeSelectedPointStyleFns(me),Le=me.marker||{},Oe=[];Se.selectedOpacityFn&&Oe.push(function(we,Ce){we.style("opacity",Se.selectedOpacityFn(Ce))}),Se.selectedColorFn&&Oe.push(function(we,Ce){n.fill(we,Se.selectedColorFn(Ce))}),Se.selectedSizeFn&&Oe.push(function(we,Ce){var Ke=Ce.mx||Le.symbol||0,Ye=Se.selectedSizeFn(Ce);we.attr("d",g(l.symbolNumber(Ke),Ye,ye(Ce,me),ee(Ce,me))),Ce.mrc2=Ye}),Oe.length&&ge.each(function(we){for(var Ce=w.select(this),Ke=0;Ke<Oe.length;Ke++)Oe[Ke](Ce,we)})}},l.tryColorscale=function(ge,me){var Se=me?f.nestedProperty(ge,me).get():ge;if(Se){var Le=Se.color;if((Se.colorscale||Se._colorAx)&&f.isArrayOrTypedArray(Le))return r.makeColorScaleFuncFromTrace(Se)}return f.identity};var E={start:1,end:-1,middle:0,bottom:1,top:-1};function C(ge,me,Se,Le,Oe){var we=w.select(ge.node().parentNode),Ce=me.indexOf("top")!==-1?"top":me.indexOf("bottom")!==-1?"bottom":"middle",Ke=me.indexOf("left")!==-1?"end":me.indexOf("right")!==-1?"start":"middle",Ye=Le?Le/.8+1:0,Fe=(h.lineCount(ge)-1)*y+1,Re=E[Ke]*Ye,je=Se*.75+E[Ce]*Ye+(E[Ce]-1)*Fe*Se/2;ge.attr("text-anchor",Ke),Oe||we.attr("transform",t(Re,je))}function F(ge,me){var Se=ge.ts||me.textfont.size;return T(Se)&&Se>0?Se:0}l.textPointStyle=function(ge,me,Se){if(!!ge.size()){var Le;if(me.selectedpoints){var Oe=l.makeSelectedTextStyleFns(me);Le=Oe.selectedTextColorFn}var we=me.texttemplate,Ce=Se._fullLayout;ge.each(function(Ke){var Ye=w.select(this),Fe=we?f.extractOption(Ke,me,"txt","texttemplate"):f.extractOption(Ke,me,"tx","text");if(!Fe&&Fe!==0){Ye.remove();return}if(we){var Re=me._module.formatLabels,je=Re?Re(Ke,me,Ce):{},xt={};m(xt,me,Ke.i);var Nt=me._meta||{};Fe=f.texttemplateString(Fe,je,Ce._d3locale,xt,Ke,Nt)}var tr=Ke.tp||me.textposition,Ht=F(Ke,me),Pt=Le?Le(Ke):Ke.tc||me.textfont.color;Ye.call(l.font,Ke.tf||me.textfont.family,Ht,Pt).text(Fe).call(h.convertToTspans,Se).call(C,tr,Ht,Ke.mrc)})}},l.selectedTextStyle=function(ge,me){if(!(!ge.size()||!me.selectedpoints)){var Se=l.makeSelectedTextStyleFns(me);ge.each(function(Le){var Oe=w.select(this),we=Se.selectedTextColorFn(Le),Ce=Le.tp||me.textposition,Ke=F(Le,me);n.fill(Oe,we);var Ye=a.traceIs(me,"bar-like");C(Oe,Ce,Ke,Le.mrc2||Le.mrc,Ye)})}};var I=.5;l.smoothopen=function(ge,me){if(ge.length<3)return"M"+ge.join("L");var Se="M"+ge[0],Le=[],Oe;for(Oe=1;Oe<ge.length-1;Oe++)Le.push(G(ge[Oe-1],ge[Oe],ge[Oe+1],me));for(Se+="Q"+Le[0][0]+" "+ge[1],Oe=2;Oe<ge.length-1;Oe++)Se+="C"+Le[Oe-2][1]+" "+Le[Oe-1][0]+" "+ge[Oe];return Se+="Q"+Le[ge.length-3][1]+" "+ge[ge.length-1],Se},l.smoothclosed=function(ge,me){if(ge.length<3)return"M"+ge.join("L")+"Z";var Se="M"+ge[0],Le=ge.length-1,Oe=[G(ge[Le],ge[0],ge[1],me)],we;for(we=1;we<Le;we++)Oe.push(G(ge[we-1],ge[we],ge[we+1],me));for(Oe.push(G(ge[Le-1],ge[Le],ge[0],me)),we=1;we<=Le;we++)Se+="C"+Oe[we-1][1]+" "+Oe[we][0]+" "+ge[we];return Se+="C"+Oe[Le][1]+" "+Oe[0][0]+" "+ge[0]+"Z",Se};var D,R;function O(ge,me,Se){return Se&&(ge=j(ge)),me?B(ge[1]):z(ge[0])}function z(ge){var me=w.round(ge,2);return D=me,me}function B(ge){var me=w.round(ge,2);return R=me,me}function G(ge,me,Se,Le){var Oe=ge[0]-me[0],we=ge[1]-me[1],Ce=Se[0]-me[0],Ke=Se[1]-me[1],Ye=Math.pow(Oe*Oe+we*we,I/2),Fe=Math.pow(Ce*Ce+Ke*Ke,I/2),Re=(Fe*Fe*Oe-Ye*Ye*Ce)*Le,je=(Fe*Fe*we-Ye*Ye*Ke)*Le,xt=3*Fe*(Ye+Fe),Nt=3*Ye*(Ye+Fe);return[[z(me[0]+(xt&&Re/xt)),B(me[1]+(xt&&je/xt))],[z(me[0]-(Nt&&Re/Nt)),B(me[1]-(Nt&&je/Nt))]]}var Q={hv:function(ge,me,Se){return"H"+z(me[0])+"V"+O(me,1,Se)},vh:function(ge,me,Se){return"V"+B(me[1])+"H"+O(me,0,Se)},hvh:function(ge,me,Se){return"H"+z((ge[0]+me[0])/2)+"V"+B(me[1])+"H"+O(me,0,Se)},vhv:function(ge,me,Se){return"V"+B((ge[1]+me[1])/2)+"H"+z(me[0])+"V"+O(me,1,Se)}},X=function(ge,me,Se){return"L"+O(me,0,Se)+","+O(me,1,Se)};l.steps=function(ge){var me=Q[ge]||X;return function(Se){for(var Le="M"+z(Se[0][0])+","+B(Se[0][1]),Oe=Se.length,we=1;we<Oe;we++)Le+=me(Se[we-1],Se[we],we===Oe-1);return Le}};function j(ge,me){var Se=ge.backoff,Le=ge.trace,Oe=ge.d,we=ge.i;if(Se&&Le&&Le.marker&&Le.marker.angle%360===0&&Le.line&&Le.line.shape!=="spline"){var Ce=f.isArrayOrTypedArray(Se),Ke=ge,Ye=me?me[0]:D||0,Fe=me?me[1]:R||0,Re=Ke[0],je=Ke[1],xt=Re-Ye,Nt=je-Fe,tr=Math.atan2(Nt,xt),Ht=Ce?Se[we]:Se;if(Ht==="auto"){var Pt=Ke.i;Le.type==="scatter"&&Pt--;var $t=Ke.marker;Ht=$t?l.symbolBackOffs[l.symbolNumber($t.symbol)]*$t.size:0,Ht+=l.getMarkerStandoff(Oe[Pt],Le)||0}var Ut=Re-Ht*Math.cos(tr),Lt=je-Ht*Math.sin(tr);(Ut<=Re&&Ut>=Ye||Ut>=Re&&Ut<=Ye)&&(Lt<=je&&Lt>=Fe||Lt>=je&&Lt<=Fe)&&(ge=[Ut,Lt])}return ge}l.applyBackoff=j,l.makeTester=function(){var ge=f.ensureSingleById(w.select("body"),"svg","js-plotly-tester",function(Se){Se.attr(s.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),me=f.ensureSingle(ge,"path","js-reference-point",function(Se){Se.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});l.tester=ge,l.testref=me},l.savedBBoxes={};var re=0,ue=1e4;l.bBox=function(ge,me,Se){Se||(Se=K(ge));var Le;if(Se){if(Le=l.savedBBoxes[Se],Le)return f.extendFlat({},Le)}else if(ge.childNodes.length===1){var Oe=ge.childNodes[0];if(Se=K(Oe),Se){var we=+Oe.getAttribute("x")||0,Ce=+Oe.getAttribute("y")||0,Ke=Oe.getAttribute("transform");if(!Ke){var Ye=l.bBox(Oe,!1,Se);return we&&(Ye.left+=we,Ye.right+=we),Ce&&(Ye.top+=Ce,Ye.bottom+=Ce),Ye}if(Se+="~"+we+"~"+Ce+"~"+Ke,Le=l.savedBBoxes[Se],Le)return f.extendFlat({},Le)}}var Fe,Re;me?Fe=ge:(Re=l.tester.node(),Fe=ge.cloneNode(!0),Re.appendChild(Fe)),w.select(Fe).attr("transform",null).call(h.positionText,0,0);var je=Fe.getBoundingClientRect(),xt=l.testref.node().getBoundingClientRect();me||Re.removeChild(Fe);var Nt={height:je.height,width:je.width,left:je.left-xt.left,top:je.top-xt.top,right:je.right-xt.left,bottom:je.bottom-xt.top};return re>=ue&&(l.savedBBoxes={},re=0),Se&&(l.savedBBoxes[Se]=Nt),re++,f.extendFlat({},Nt)};function K(ge){var me=ge.getAttribute("data-unformatted");if(me!==null)return me+ge.getAttribute("data-math")+ge.getAttribute("text-anchor")+ge.getAttribute("style")}l.setClipUrl=function(ge,me,Se){ge.attr("clip-path",te(me,Se))};function te(ge,me){if(!ge)return null;var Se=me._context,Le=Se._exportedPlot?"":Se._baseUrl||"";return Le?"url('"+Le+"#"+ge+"')":"url(#"+ge+")"}l.getTranslate=function(ge){var me=/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,Se=ge.attr?"attr":"getAttribute",Le=ge[Se]("transform")||"",Oe=Le.replace(me,function(we,Ce,Ke){return[Ce,Ke].join(" ")}).split(" ");return{x:+Oe[0]||0,y:+Oe[1]||0}},l.setTranslate=function(ge,me,Se){var Le=/(\btranslate\(.*?\);?)/,Oe=ge.attr?"attr":"getAttribute",we=ge.attr?"attr":"setAttribute",Ce=ge[Oe]("transform")||"";return me=me||0,Se=Se||0,Ce=Ce.replace(Le,"").trim(),Ce+=t(me,Se),Ce=Ce.trim(),ge[we]("transform",Ce),Ce},l.getScale=function(ge){var me=/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,Se=ge.attr?"attr":"getAttribute",Le=ge[Se]("transform")||"",Oe=Le.replace(me,function(we,Ce,Ke){return[Ce,Ke].join(" ")}).split(" ");return{x:+Oe[0]||1,y:+Oe[1]||1}},l.setScale=function(ge,me,Se){var Le=/(\bscale\(.*?\);?)/,Oe=ge.attr?"attr":"getAttribute",we=ge.attr?"attr":"setAttribute",Ce=ge[Oe]("transform")||"";return me=me||1,Se=Se||1,Ce=Ce.replace(Le,"").trim(),Ce+="scale("+me+","+Se+")",Ce=Ce.trim(),ge[we]("transform",Ce),Ce};var Y=/\s*sc.*/;l.setPointGroupScale=function(ge,me,Se){if(me=me||1,Se=Se||1,!!ge){var Le=me===1&&Se===1?"":"scale("+me+","+Se+")";ge.each(function(){var Oe=(this.getAttribute("transform")||"").replace(Y,"");Oe+=Le,Oe=Oe.trim(),this.setAttribute("transform",Oe)})}};var H=/translate\([^)]*\)\s*$/;l.setTextPointsScale=function(ge,me,Se){!ge||ge.each(function(){var Le,Oe=w.select(this),we=Oe.select("text");if(!!we.node()){var Ce=parseFloat(we.attr("x")||0),Ke=parseFloat(we.attr("y")||0),Ye=(Oe.attr("transform")||"").match(H);me===1&&Se===1?Le=[]:Le=[t(Ce,Ke),"scale("+me+","+Se+")",t(-Ce,-Ke)],Ye&&Le.push(Ye),Oe.attr("transform",Le.join(""))}})};function ee(ge,me){var Se;return ge&&(Se=ge.mf),Se===void 0&&(Se=me.marker&&me.marker.standoff||0),!me._geo&&!me._xA?-Se:Se}l.getMarkerStandoff=ee;var ne=Math.atan2,Z=Math.cos,q=Math.sin;function ie(ge,me){var Se=me[0],Le=me[1];return[Se*Z(ge)-Le*q(ge),Se*q(ge)+Le*Z(ge)]}var se,ae,oe,be,ce,de;function ye(ge,me){var Se=ge.ma;Se===void 0&&(Se=me.marker.angle||0);var Le,Oe,we=me.marker.angleref;if(we==="previous"||we==="north"){if(me._geo){var Ce=me._geo.project(ge.lonlat);Le=Ce[0],Oe=Ce[1]}else{var Ke=me._xA,Ye=me._yA;if(Ke&&Ye)Le=Ke.c2p(ge.x),Oe=Ye.c2p(ge.y);else return 90}if(me._geo){var Fe=ge.lonlat[0],Re=ge.lonlat[1],je=me._geo.project([Fe,Re+1e-5]),xt=me._geo.project([Fe+1e-5,Re]),Nt=ne(xt[1]-Oe,xt[0]-Le),tr=ne(je[1]-Oe,je[0]-Le),Ht;if(we==="north")Ht=Se/180*Math.PI;else if(we==="previous"){var Pt=Fe/180*Math.PI,$t=Re/180*Math.PI,Ut=se/180*Math.PI,Lt=ae/180*Math.PI,We=Ut-Pt,ot=Z(Lt)*q(We),Ge=q(Lt)*Z($t)-Z(Lt)*q($t)*Z(We);Ht=-ne(ot,Ge)-Math.PI,se=Fe,ae=Re}var Me=ie(Nt,[Z(Ht),0]),Ve=ie(tr,[q(Ht),0]);Se=ne(Me[1]+Ve[1],Me[0]+Ve[0])/Math.PI*180,we==="previous"&&!(de===me.uid&&ge.i===ce+1)&&(Se=null)}if(we==="previous"&&!me._geo)if(de===me.uid&&ge.i===ce+1&&T(Le)&&T(Oe)){var Qe=Le-oe,tt=Oe-be,St=me.line&&me.line.shape||"",wt=St.slice(St.length-1);wt==="h"&&(tt=0),wt==="v"&&(Qe=0),Se+=ne(tt,Qe)/Math.PI*180+90}else Se=null}return oe=Le,be=Oe,ce=ge.i,de=me.uid,Se}l.getMarkerAngle=ye},{"../../components/fx/helpers":403,"../../constants/alignment":483,"../../constants/interactions":490,"../../constants/xmlns_namespaces":492,"../../lib":515,"../../lib/svg_text_utils":541,"../../registry":647,"../../traces/scatter/make_bubble_size_func":953,"../../traces/scatter/subtypes":961,"../color":367,"../colorscale":379,"./symbol_defs":390,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:313}],390:[function(i,U,V){var w=i("parse-svg-path"),f=i("@plotly/d3").round,M="M0,0Z",T=Math.sqrt(2),e=Math.sqrt(3),a=Math.PI,n=Math.cos,r=Math.sin;U.exports={circle:{n:0,f:function(p,c,m){if(t(c))return M;var l=f(p,2),x="M"+l+",0A"+l+","+l+" 0 1,1 0,-"+l+"A"+l+","+l+" 0 0,1 "+l+",0Z";return m?d(c,m,x):x}},square:{n:1,f:function(p,c,m){if(t(c))return M;var l=f(p,2);return d(c,m,"M"+l+","+l+"H-"+l+"V-"+l+"H"+l+"Z")}},diamond:{n:2,f:function(p,c,m){if(t(c))return M;var l=f(p*1.3,2);return d(c,m,"M"+l+",0L0,"+l+"L-"+l+",0L0,-"+l+"Z")}},cross:{n:3,f:function(p,c,m){if(t(c))return M;var l=f(p*.4,2),x=f(p*1.2,2);return d(c,m,"M"+x+","+l+"H"+l+"V"+x+"H-"+l+"V"+l+"H-"+x+"V-"+l+"H-"+l+"V-"+x+"H"+l+"V-"+l+"H"+x+"Z")}},x:{n:4,f:function(p,c,m){if(t(c))return M;var l=f(p*.8/T,2),x="l"+l+","+l,u="l"+l+",-"+l,A="l-"+l+",-"+l,_="l-"+l+","+l;return d(c,m,"M0,"+l+x+u+A+u+A+_+A+_+x+_+x+"Z")}},"triangle-up":{n:5,f:function(p,c,m){if(t(c))return M;var l=f(p*2/e,2),x=f(p/2,2),u=f(p,2);return d(c,m,"M-"+l+","+x+"H"+l+"L0,-"+u+"Z")}},"triangle-down":{n:6,f:function(p,c,m){if(t(c))return M;var l=f(p*2/e,2),x=f(p/2,2),u=f(p,2);return d(c,m,"M-"+l+",-"+x+"H"+l+"L0,"+u+"Z")}},"triangle-left":{n:7,f:function(p,c,m){if(t(c))return M;var l=f(p*2/e,2),x=f(p/2,2),u=f(p,2);return d(c,m,"M"+x+",-"+l+"V"+l+"L-"+u+",0Z")}},"triangle-right":{n:8,f:function(p,c,m){if(t(c))return M;var l=f(p*2/e,2),x=f(p/2,2),u=f(p,2);return d(c,m,"M-"+x+",-"+l+"V"+l+"L"+u+",0Z")}},"triangle-ne":{n:9,f:function(p,c,m){if(t(c))return M;var l=f(p*.6,2),x=f(p*1.2,2);return d(c,m,"M-"+x+",-"+l+"H"+l+"V"+x+"Z")}},"triangle-se":{n:10,f:function(p,c,m){if(t(c))return M;var l=f(p*.6,2),x=f(p*1.2,2);return d(c,m,"M"+l+",-"+x+"V"+l+"H-"+x+"Z")}},"triangle-sw":{n:11,f:function(p,c,m){if(t(c))return M;var l=f(p*.6,2),x=f(p*1.2,2);return d(c,m,"M"+x+","+l+"H-"+l+"V-"+x+"Z")}},"triangle-nw":{n:12,f:function(p,c,m){if(t(c))return M;var l=f(p*.6,2),x=f(p*1.2,2);return d(c,m,"M-"+l+","+x+"V-"+l+"H"+x+"Z")}},pentagon:{n:13,f:function(p,c,m){if(t(c))return M;var l=f(p*.951,2),x=f(p*.588,2),u=f(-p,2),A=f(p*-.309,2),_=f(p*.809,2);return d(c,m,"M"+l+","+A+"L"+x+","+_+"H-"+x+"L-"+l+","+A+"L0,"+u+"Z")}},hexagon:{n:14,f:function(p,c,m){if(t(c))return M;var l=f(p,2),x=f(p/2,2),u=f(p*e/2,2);return d(c,m,"M"+u+",-"+x+"V"+x+"L0,"+l+"L-"+u+","+x+"V-"+x+"L0,-"+l+"Z")}},hexagon2:{n:15,f:function(p,c,m){if(t(c))return M;var l=f(p,2),x=f(p/2,2),u=f(p*e/2,2);return d(c,m,"M-"+x+","+u+"H"+x+"L"+l+",0L"+x+",-"+u+"H-"+x+"L-"+l+",0Z")}},octagon:{n:16,f:function(p,c,m){if(t(c))return M;var l=f(p*.924,2),x=f(p*.383,2);return d(c,m,"M-"+x+",-"+l+"H"+x+"L"+l+",-"+x+"V"+x+"L"+x+","+l+"H-"+x+"L-"+l+","+x+"V-"+x+"Z")}},star:{n:17,f:function(p,c,m){if(t(c))return M;var l=p*1.4,x=f(l*.225,2),u=f(l*.951,2),A=f(l*.363,2),_=f(l*.588,2),g=f(-l,2),b=f(l*-.309,2),v=f(l*.118,2),k=f(l*.809,2),S=f(l*.382,2);return d(c,m,"M"+x+","+b+"H"+u+"L"+A+","+v+"L"+_+","+k+"L0,"+S+"L-"+_+","+k+"L-"+A+","+v+"L-"+u+","+b+"H-"+x+"L0,"+g+"Z")}},hexagram:{n:18,f:function(p,c,m){if(t(c))return M;var l=f(p*.66,2),x=f(p*.38,2),u=f(p*.76,2);return d(c,m,"M-"+u+",0l-"+x+",-"+l+"h"+u+"l"+x+",-"+l+"l"+x+","+l+"h"+u+"l-"+x+","+l+"l"+x+","+l+"h-"+u+"l-"+x+","+l+"l-"+x+",-"+l+"h-"+u+"Z")}},"star-triangle-up":{n:19,f:function(p,c,m){if(t(c))return M;var l=f(p*e*.8,2),x=f(p*.8,2),u=f(p*1.6,2),A=f(p*4,2),_="A "+A+","+A+" 0 0 1 ";return d(c,m,"M-"+l+","+x+_+l+","+x+_+"0,-"+u+_+"-"+l+","+x+"Z")}},"star-triangle-down":{n:20,f:function(p,c,m){if(t(c))return M;var l=f(p*e*.8,2),x=f(p*.8,2),u=f(p*1.6,2),A=f(p*4,2),_="A "+A+","+A+" 0 0 1 ";return d(c,m,"M"+l+",-"+x+_+"-"+l+",-"+x+_+"0,"+u+_+l+",-"+x+"Z")}},"star-square":{n:21,f:function(p,c,m){if(t(c))return M;var l=f(p*1.1,2),x=f(p*2,2),u="A "+x+","+x+" 0 0 1 ";return d(c,m,"M-"+l+",-"+l+u+"-"+l+","+l+u+l+","+l+u+l+",-"+l+u+"-"+l+",-"+l+"Z")}},"star-diamond":{n:22,f:function(p,c,m){if(t(c))return M;var l=f(p*1.4,2),x=f(p*1.9,2),u="A "+x+","+x+" 0 0 1 ";return d(c,m,"M-"+l+",0"+u+"0,"+l+u+l+",0"+u+"0,-"+l+u+"-"+l+",0Z")}},"diamond-tall":{n:23,f:function(p,c,m){if(t(c))return M;var l=f(p*.7,2),x=f(p*1.4,2);return d(c,m,"M0,"+x+"L"+l+",0L0,-"+x+"L-"+l+",0Z")}},"diamond-wide":{n:24,f:function(p,c,m){if(t(c))return M;var l=f(p*1.4,2),x=f(p*.7,2);return d(c,m,"M0,"+x+"L"+l+",0L0,-"+x+"L-"+l+",0Z")}},hourglass:{n:25,f:function(p,c,m){if(t(c))return M;var l=f(p,2);return d(c,m,"M"+l+","+l+"H-"+l+"L"+l+",-"+l+"H-"+l+"Z")},noDot:!0},bowtie:{n:26,f:function(p,c,m){if(t(c))return M;var l=f(p,2);return d(c,m,"M"+l+","+l+"V-"+l+"L-"+l+","+l+"V-"+l+"Z")},noDot:!0},"circle-cross":{n:27,f:function(p,c,m){if(t(c))return M;var l=f(p,2);return d(c,m,"M0,"+l+"V-"+l+"M"+l+",0H-"+l+"M"+l+",0A"+l+","+l+" 0 1,1 0,-"+l+"A"+l+","+l+" 0 0,1 "+l+",0Z")},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(p,c,m){if(t(c))return M;var l=f(p,2),x=f(p/T,2);return d(c,m,"M"+x+","+x+"L-"+x+",-"+x+"M"+x+",-"+x+"L-"+x+","+x+"M"+l+",0A"+l+","+l+" 0 1,1 0,-"+l+"A"+l+","+l+" 0 0,1 "+l+",0Z")},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(p,c,m){if(t(c))return M;var l=f(p,2);return d(c,m,"M0,"+l+"V-"+l+"M"+l+",0H-"+l+"M"+l+","+l+"H-"+l+"V-"+l+"H"+l+"Z")},needLine:!0,noDot:!0},"square-x":{n:30,f:function(p,c,m){if(t(c))return M;var l=f(p,2);return d(c,m,"M"+l+","+l+"L-"+l+",-"+l+"M"+l+",-"+l+"L-"+l+","+l+"M"+l+","+l+"H-"+l+"V-"+l+"H"+l+"Z")},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(p,c,m){if(t(c))return M;var l=f(p*1.3,2);return d(c,m,"M"+l+",0L0,"+l+"L-"+l+",0L0,-"+l+"ZM0,-"+l+"V"+l+"M-"+l+",0H"+l)},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(p,c,m){if(t(c))return M;var l=f(p*1.3,2),x=f(p*.65,2);return d(c,m,"M"+l+",0L0,"+l+"L-"+l+",0L0,-"+l+"ZM-"+x+",-"+x+"L"+x+","+x+"M-"+x+","+x+"L"+x+",-"+x)},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(p,c,m){if(t(c))return M;var l=f(p*1.4,2);return d(c,m,"M0,"+l+"V-"+l+"M"+l+",0H-"+l)},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(p,c,m){if(t(c))return M;var l=f(p,2);return d(c,m,"M"+l+","+l+"L-"+l+",-"+l+"M"+l+",-"+l+"L-"+l+","+l)},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(p,c,m){if(t(c))return M;var l=f(p*1.2,2),x=f(p*.85,2);return d(c,m,"M0,"+l+"V-"+l+"M"+l+",0H-"+l+"M"+x+","+x+"L-"+x+",-"+x+"M"+x+",-"+x+"L-"+x+","+x)},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(p,c,m){if(t(c))return M;var l=f(p/2,2),x=f(p,2);return d(c,m,"M"+l+","+x+"V-"+x+"M"+(l-x)+",-"+x+"V"+x+"M"+x+","+l+"H-"+x+"M-"+x+","+(l-x)+"H"+x)},needLine:!0,noFill:!0},"y-up":{n:37,f:function(p,c,m){if(t(c))return M;var l=f(p*1.2,2),x=f(p*1.6,2),u=f(p*.8,2);return d(c,m,"M-"+l+","+u+"L0,0M"+l+","+u+"L0,0M0,-"+x+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(p,c,m){if(t(c))return M;var l=f(p*1.2,2),x=f(p*1.6,2),u=f(p*.8,2);return d(c,m,"M-"+l+",-"+u+"L0,0M"+l+",-"+u+"L0,0M0,"+x+"L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(p,c,m){if(t(c))return M;var l=f(p*1.2,2),x=f(p*1.6,2),u=f(p*.8,2);return d(c,m,"M"+u+","+l+"L0,0M"+u+",-"+l+"L0,0M-"+x+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(p,c,m){if(t(c))return M;var l=f(p*1.2,2),x=f(p*1.6,2),u=f(p*.8,2);return d(c,m,"M-"+u+","+l+"L0,0M-"+u+",-"+l+"L0,0M"+x+",0L0,0")},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(p,c,m){if(t(c))return M;var l=f(p*1.4,2);return d(c,m,"M"+l+",0H-"+l)},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(p,c,m){if(t(c))return M;var l=f(p*1.4,2);return d(c,m,"M0,"+l+"V-"+l)},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(p,c,m){if(t(c))return M;var l=f(p,2);return d(c,m,"M"+l+",-"+l+"L-"+l+","+l)},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(p,c,m){if(t(c))return M;var l=f(p,2);return d(c,m,"M"+l+","+l+"L-"+l+",-"+l)},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(p,c,m){if(t(c))return M;var l=f(p,2),x=f(p*2,2);return d(c,m,"M0,0L-"+l+","+x+"H"+l+"Z")},backoff:1,noDot:!0},"arrow-down":{n:46,f:function(p,c,m){if(t(c))return M;var l=f(p,2),x=f(p*2,2);return d(c,m,"M0,0L-"+l+",-"+x+"H"+l+"Z")},noDot:!0},"arrow-left":{n:47,f:function(p,c,m){if(t(c))return M;var l=f(p*2,2),x=f(p,2);return d(c,m,"M0,0L"+l+",-"+x+"V"+x+"Z")},noDot:!0},"arrow-right":{n:48,f:function(p,c,m){if(t(c))return M;var l=f(p*2,2),x=f(p,2);return d(c,m,"M0,0L-"+l+",-"+x+"V"+x+"Z")},noDot:!0},"arrow-bar-up":{n:49,f:function(p,c,m){if(t(c))return M;var l=f(p,2),x=f(p*2,2);return d(c,m,"M-"+l+",0H"+l+"M0,0L-"+l+","+x+"H"+l+"Z")},backoff:1,needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(p,c,m){if(t(c))return M;var l=f(p,2),x=f(p*2,2);return d(c,m,"M-"+l+",0H"+l+"M0,0L-"+l+",-"+x+"H"+l+"Z")},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(p,c,m){if(t(c))return M;var l=f(p*2,2),x=f(p,2);return d(c,m,"M0,-"+x+"V"+x+"M0,0L"+l+",-"+x+"V"+x+"Z")},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(p,c,m){if(t(c))return M;var l=f(p*2,2),x=f(p,2);return d(c,m,"M0,-"+x+"V"+x+"M0,0L-"+l+",-"+x+"V"+x+"Z")},needLine:!0,noDot:!0},arrow:{n:53,f:function(p,c,m){if(t(c))return M;var l=a/2.5,x=2*p*n(l),u=2*p*r(l);return d(c,m,"M0,0L"+-x+","+u+"L"+x+","+u+"Z")},backoff:.9,noDot:!0},"arrow-wide":{n:54,f:function(p,c,m){if(t(c))return M;var l=a/4,x=2*p*n(l),u=2*p*r(l);return d(c,m,"M0,0L"+-x+","+u+"A "+2*p+","+2*p+" 0 0 1 "+x+","+u+"Z")},backoff:.4,noDot:!0}};function t(p){return p===null}var h,s,o,y;function d(p,c,m){if((!p||p%360===0)&&!c)return m;if(o===p&&y===c&&h===m)return s;o=p,y=c,h=m;function l(I,D){var R=n(I),O=r(I),z=D[0],B=D[1]+(c||0);return[z*R-B*O,z*O+B*R]}for(var x=p/180*a,u=0,A=0,_=w(m),g="",b=0;b<_.length;b++){var v=_[b],k=v[0],S=u,E=A;if(k==="M"||k==="L")u=+v[1],A=+v[2];else if(k==="m"||k==="l")u+=+v[1],A+=+v[2];else if(k==="H")u=+v[1];else if(k==="h")u+=+v[1];else if(k==="V")A=+v[1];else if(k==="v")A+=+v[1];else if(k==="A"){u=+v[1],A=+v[2];var C=l(x,[+v[6],+v[7]]);v[6]=C[0],v[7]=C[1],v[3]=+v[3]+p}(k==="H"||k==="V")&&(k="L"),(k==="h"||k==="v")&&(k="l"),(k==="m"||k==="l")&&(u-=S,A-=E);var F=l(x,[u,A]);(k==="H"||k==="V")&&(k="L"),(k==="M"||k==="L"||k==="m"||k==="l")&&(v[1]=F[0],v[2]=F[1]),v[0]=k,g+=v[0]+v.slice(1).join(",")}return s=g,g}},{"@plotly/d3":58,"parse-svg-path":250}],391:[function(i,U,V){U.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},{}],392:[function(i,U,V){var w=i("fast-isnumeric"),f=i("../../registry"),M=i("../../plots/cartesian/axes"),T=i("../../lib"),e=i("./compute_error");U.exports=function(r){for(var t=r.calcdata,h=0;h<t.length;h++){var s=t[h],o=s[0].trace;if(o.visible===!0&&f.traceIs(o,"errorBarsOK")){var y=M.getFromId(r,o.xaxis),d=M.getFromId(r,o.yaxis);a(s,o,y,"x"),a(s,o,d,"y")}}};function a(n,r,t,h){var s=r["error_"+h]||{},o=s.visible&&["linear","log"].indexOf(t.type)!==-1,y=[];if(!!o){for(var d=e(s),p=0;p<n.length;p++){var c=n[p],m=c.i;if(m===void 0)m=p;else if(m===null)continue;var l=c[h];if(!!w(t.c2l(l))){var x=d(l,m);if(w(x[0])&&w(x[1])){var u=c[h+"s"]=l-x[0],A=c[h+"h"]=l+x[1];y.push(u,A)}}}var _=t._id,g=r._extremes[_],b=M.findExtremes(t,y,T.extendFlat({tozero:g.opts.tozero},{padded:!0}));g.min=g.min.concat(b.min),g.max=g.max.concat(b.max)}}},{"../../lib":515,"../../plots/cartesian/axes":566,"../../registry":647,"./compute_error":393,"fast-isnumeric":190}],393:[function(i,U,V){U.exports=function(M){var T=M.type,e=M.symmetric;if(T==="data"){var a=M.array||[];if(e)return function(s,o){var y=+a[o];return[y,y]};var n=M.arrayminus||[];return function(s,o){var y=+a[o],d=+n[o];return!isNaN(y)||!isNaN(d)?[d||0,y||0]:[NaN,NaN]}}else{var r=w(T,M.value),t=w(T,M.valueminus);return e||M.valueminus===void 0?function(s){var o=r(s);return[o,o]}:function(s){return[t(s),r(s)]}}};function w(f,M){if(f==="percent")return function(T){return Math.abs(T*M/100)};if(f==="constant")return function(){return Math.abs(M)};if(f==="sqrt")return function(T){return Math.sqrt(Math.abs(T))}}},{}],394:[function(i,U,V){var w=i("fast-isnumeric"),f=i("../../registry"),M=i("../../lib"),T=i("../../plot_api/plot_template"),e=i("./attributes");U.exports=function(a,n,r,t){var h="error_"+t.axis,s=T.newContainer(n,h),o=a[h]||{};function y(u,A){return M.coerce(o,s,e,u,A)}var d=o.array!==void 0||o.value!==void 0||o.type==="sqrt",p=y("visible",d);if(p!==!1){var c=y("type","array"in o?"data":"percent"),m=!0;c!=="sqrt"&&(m=y("symmetric",!((c==="data"?"arrayminus":"valueminus")in o))),c==="data"?(y("array"),y("traceref"),m||(y("arrayminus"),y("tracerefminus"))):(c==="percent"||c==="constant")&&(y("value"),m||y("valueminus"));var l="copy_"+t.inherit+"style";if(t.inherit){var x=n["error_"+t.inherit];(x||{}).visible&&y(l,!(o.color||w(o.thickness)||w(o.width)))}(!t.inherit||!s[l])&&(y("color",r),y("thickness"),y("width",f.traceIs(n,"gl3d")?0:4))}}},{"../../lib":515,"../../plot_api/plot_template":555,"../../registry":647,"./attributes":391,"fast-isnumeric":190}],395:[function(i,U,V){var w=i("../../lib"),f=i("../../plot_api/edit_types").overrideAll,M=i("./attributes"),T={error_x:w.extendFlat({},M),error_y:w.extendFlat({},M)};delete T.error_x.copy_zstyle,delete T.error_y.copy_zstyle,delete T.error_y.copy_ystyle;var e={error_x:w.extendFlat({},M),error_y:w.extendFlat({},M),error_z:w.extendFlat({},M)};delete e.error_x.copy_ystyle,delete e.error_y.copy_ystyle,delete e.error_z.copy_ystyle,delete e.error_z.copy_zstyle,U.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:T,bar:T,histogram:T,scatter3d:f(e,"calc","nested"),scattergl:f(T,"calc","nested")}},supplyDefaults:i("./defaults"),calc:i("./calc"),makeComputeError:i("./compute_error"),plot:i("./plot"),style:i("./style"),hoverInfo:a};function a(n,r,t){(r.error_y||{}).visible&&(t.yerr=n.yh-n.y,r.error_y.symmetric||(t.yerrneg=n.y-n.ys)),(r.error_x||{}).visible&&(t.xerr=n.xh-n.x,r.error_x.symmetric||(t.xerrneg=n.x-n.xs))}},{"../../lib":515,"../../plot_api/edit_types":548,"./attributes":391,"./calc":392,"./compute_error":393,"./defaults":394,"./plot":396,"./style":397}],396:[function(i,U,V){var w=i("@plotly/d3"),f=i("fast-isnumeric"),M=i("../drawing"),T=i("../../traces/scatter/subtypes");U.exports=function(n,r,t,h){var s,o=t.xaxis,y=t.yaxis,d=h&&h.duration>0;r.each(function(p){var c=p[0].trace,m=c.error_x||{},l=c.error_y||{},x;c.ids&&(x=function(g){return g.id});var u=T.hasMarkers(c)&&c.marker.maxdisplayed>0;!l.visible&&!m.visible&&(p=[]);var A=w.select(this).selectAll("g.errorbar").data(p,x);if(A.exit().remove(),!!p.length){m.visible||A.selectAll("path.xerror").remove(),l.visible||A.selectAll("path.yerror").remove(),A.style("opacity",1);var _=A.enter().append("g").classed("errorbar",!0);d&&_.style("opacity",0).transition().duration(h.duration).style("opacity",1),M.setClipUrl(A,t.layerClipId,n),A.each(function(g){var b=w.select(this),v=e(g,o,y);if(!(u&&!g.vis)){var k,S=b.select("path.yerror");if(l.visible&&f(v.x)&&f(v.yh)&&f(v.ys)){var E=l.width;k="M"+(v.x-E)+","+v.yh+"h"+2*E+"m-"+E+",0V"+v.ys,v.noYS||(k+="m-"+E+",0h"+2*E),s=!S.size(),s?S=b.append("path").style("vector-effect","non-scaling-stroke").classed("yerror",!0):d&&(S=S.transition().duration(h.duration).ease(h.easing)),S.attr("d",k)}else S.remove();var C=b.select("path.xerror");if(m.visible&&f(v.y)&&f(v.xh)&&f(v.xs)){var F=(m.copy_ystyle?l:m).width;k="M"+v.xh+","+(v.y-F)+"v"+2*F+"m0,-"+F+"H"+v.xs,v.noXS||(k+="m0,-"+F+"v"+2*F),s=!C.size(),s?C=b.append("path").style("vector-effect","non-scaling-stroke").classed("xerror",!0):d&&(C=C.transition().duration(h.duration).ease(h.easing)),C.attr("d",k)}else C.remove()}})}})};function e(a,n,r){var t={x:n.c2p(a.x),y:r.c2p(a.y)};return a.yh!==void 0&&(t.yh=r.c2p(a.yh),t.ys=r.c2p(a.ys),f(t.ys)||(t.noYS=!0,t.ys=r.c2p(a.ys,!0))),a.xh!==void 0&&(t.xh=n.c2p(a.xh),t.xs=n.c2p(a.xs),f(t.xs)||(t.noXS=!0,t.xs=n.c2p(a.xs,!0))),t}},{"../../traces/scatter/subtypes":961,"../drawing":389,"@plotly/d3":58,"fast-isnumeric":190}],397:[function(i,U,V){var w=i("@plotly/d3"),f=i("../color");U.exports=function(T){T.each(function(e){var a=e[0].trace,n=a.error_y||{},r=a.error_x||{},t=w.select(this);t.selectAll("path.yerror").style("stroke-width",n.thickness+"px").call(f.stroke,n.color),r.copy_ystyle&&(r=n),t.selectAll("path.xerror").style("stroke-width",r.thickness+"px").call(f.stroke,r.color)})}},{"../color":367,"@plotly/d3":58}],398:[function(i,U,V){var w=i("../../plots/font_attributes"),f=i("./layout_attributes").hoverlabel,M=i("../../lib/extend").extendFlat;U.exports={hoverlabel:{bgcolor:M({},f.bgcolor,{arrayOk:!0}),bordercolor:M({},f.bordercolor,{arrayOk:!0}),font:w({arrayOk:!0,editType:"none"}),align:M({},f.align,{arrayOk:!0}),namelength:M({},f.namelength,{arrayOk:!0}),editType:"none"}}},{"../../lib/extend":505,"../../plots/font_attributes":594,"./layout_attributes":408}],399:[function(i,U,V){var w=i("../../lib"),f=i("../../registry");U.exports=function(e){var a=e.calcdata,n=e._fullLayout;function r(y){return function(d){return w.coerceHoverinfo({hoverinfo:d},{_module:y._module},n)}}for(var t=0;t<a.length;t++){var h=a[t],s=h[0].trace;if(!f.traceIs(s,"pie-like")){var o=f.traceIs(s,"2dMap")?M:w.fillArray;o(s.hoverinfo,h,"hi",r(s)),s.hovertemplate&&o(s.hovertemplate,h,"ht"),s.hoverlabel&&(o(s.hoverlabel.bgcolor,h,"hbg"),o(s.hoverlabel.bordercolor,h,"hbc"),o(s.hoverlabel.font.size,h,"hts"),o(s.hoverlabel.font.color,h,"htc"),o(s.hoverlabel.font.family,h,"htf"),o(s.hoverlabel.namelength,h,"hnl"),o(s.hoverlabel.align,h,"hta"))}}};function M(T,e,a,n){n=n||w.identity,Array.isArray(T)&&(e[0][a]=n(T))}},{"../../lib":515,"../../registry":647}],400:[function(i,U,V){var w=i("../../registry"),f=i("./hover").hover;U.exports=function(T,e,a){var n=w.getComponentMethod("annotations","onClick")(T,T._hoverdata);a!==void 0&&f(T,e,a,!0);function r(){T.emit("plotly_click",{points:T._hoverdata,event:e})}T._hoverdata&&e&&e.target&&(n&&n.then?n.then(r):r(),e.stopImmediatePropagation&&e.stopImmediatePropagation())}},{"../../registry":647,"./hover":404}],401:[function(i,U,V){U.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},{}],402:[function(i,U,V){var w=i("../../lib"),f=i("./attributes"),M=i("./hoverlabel_defaults");U.exports=function(e,a,n,r){function t(s,o){return w.coerce(e,a,f,s,o)}var h=w.extendFlat({},r.hoverlabel);a.hovertemplate&&(h.namelength=-1),M(e,a,t,h)}},{"../../lib":515,"./attributes":398,"./hoverlabel_defaults":405}],403:[function(i,U,V){var w=i("../../lib");V.getSubplot=function(n){return n.subplot||n.xaxis+n.yaxis||n.geo},V.isTraceInSubplots=function(n,r){if(n.type==="splom"){for(var t=n.xaxes||[],h=n.yaxes||[],s=0;s<t.length;s++)for(var o=0;o<h.length;o++)if(r.indexOf(t[s]+h[o])!==-1)return!0;return!1}return r.indexOf(V.getSubplot(n))!==-1},V.flat=function(n,r){for(var t=new Array(n.length),h=0;h<n.length;h++)t[h]=r;return t},V.p2c=function(n,r){for(var t=new Array(n.length),h=0;h<n.length;h++)t[h]=n[h].p2c(r);return t},V.getDistanceFunction=function(n,r,t,h){return n==="closest"?h||V.quadrature(r,t):n.charAt(0)==="x"?r:t},V.getClosest=function(n,r,t){if(t.index!==!1)t.index>=0&&t.index<n.length?t.distance=0:t.index=!1;else for(var h=0;h<n.length;h++){var s=r(n[h]);s<=t.distance&&(t.index=h,t.distance=s)}return t},V.inbox=function(n,r,t){return n*r<0||n===0?t:1/0},V.quadrature=function(n,r){return function(t){var h=n(t),s=r(t);return Math.sqrt(h*h+s*s)}},V.makeEventData=function(n,r,t){var h="index"in n?n.index:n.pointNumber,s={data:r._input,fullData:r,curveNumber:r.index,pointNumber:h};if(r._indexToPoints){var o=r._indexToPoints[h];o.length===1?s.pointIndex=o[0]:s.pointIndices=o}else s.pointIndex=h;return r._module.eventData?s=r._module.eventData(s,n,r,t,h):("xVal"in n?s.x=n.xVal:"x"in n&&(s.x=n.x),"yVal"in n?s.y=n.yVal:"y"in n&&(s.y=n.y),n.xa&&(s.xaxis=n.xa),n.ya&&(s.yaxis=n.ya),n.zLabelVal!==void 0&&(s.z=n.zLabelVal)),V.appendArrayPointValue(s,r,h),s},V.appendArrayPointValue=function(n,r,t){var h=r._arrayAttrs;if(!!h)for(var s=0;s<h.length;s++){var o=h[s],y=M(o);if(n[y]===void 0){var d=w.nestedProperty(r,o).get(),p=T(d,t);p!==void 0&&(n[y]=p)}}},V.appendArrayMultiPointValues=function(n,r,t){var h=r._arrayAttrs;if(!!h)for(var s=0;s<h.length;s++){var o=h[s],y=M(o);if(n[y]===void 0){for(var d=w.nestedProperty(r,o).get(),p=new Array(t.length),c=0;c<t.length;c++)p[c]=T(d,t[c]);n[y]=p}}};var f={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function M(n){return f[n]||n}function T(n,r){if(Array.isArray(r)){if(Array.isArray(n)&&Array.isArray(n[r[0]]))return n[r[0]][r[1]]}else return n[r]}var e={x:!0,y:!0},a={"x unified":!0,"y unified":!0};V.isUnifiedHover=function(n){return typeof n!="string"?!1:!!a[n]},V.isXYhover=function(n){return typeof n!="string"?!1:!!e[n]}},{"../../lib":515}],404:[function(i,U,V){var w=i("@plotly/d3"),f=i("fast-isnumeric"),M=i("tinycolor2"),T=i("../../lib"),e=T.strTranslate,a=T.strRotate,n=i("../../lib/events"),r=i("../../lib/svg_text_utils"),t=i("../../lib/override_cursor"),h=i("../drawing"),s=i("../color"),o=i("../dragelement"),y=i("../../plots/cartesian/axes"),d=i("../../registry"),p=i("./helpers"),c=i("./constants"),m=i("../legend/defaults"),l=i("../legend/draw"),x=c.YANGLE,u=Math.PI*x/180,A=1/Math.sin(u),_=Math.cos(u),g=Math.sin(u),b=c.HOVERARROWSIZE,v=c.HOVERTEXTPAD,k={box:!0,ohlc:!0,violin:!0,candlestick:!0},S={scatter:!0,scattergl:!0,splom:!0};V.hover=function(H,ee,ne,Z){H=T.getGraphDiv(H);var q=ee.target;T.throttle(H._fullLayout._uid+c.HOVERID,c.HOVERMINTIME,function(){E(H,ee,ne,Z,q)})},V.loneHover=function(H,ee){var ne=!0;Array.isArray(H)||(ne=!1,H=[H]);var Z=ee.gd,q=ue(Z),ie=K(Z),se=H.map(function(me){var Se=me._x0||me.x0||me.x||0,Le=me._x1||me.x1||me.x||0,Oe=me._y0||me.y0||me.y||0,we=me._y1||me.y1||me.y||0,Ce=me.eventData;if(Ce){var Ke=Math.min(Se,Le),Ye=Math.max(Se,Le),Fe=Math.min(Oe,we),Re=Math.max(Oe,we),je=me.trace;if(d.traceIs(je,"gl3d")){var xt=Z._fullLayout[je.scene]._scene.container,Nt=xt.offsetLeft,tr=xt.offsetTop;Ke+=Nt,Ye+=Nt,Fe+=tr,Re+=tr}Ce.bbox={x0:Ke+ie,x1:Ye+ie,y0:Fe+q,y1:Re+q},ee.inOut_bbox&&ee.inOut_bbox.push(Ce.bbox)}else Ce=!1;return{color:me.color||s.defaultLine,x0:me.x0||me.x||0,x1:me.x1||me.x||0,y0:me.y0||me.y||0,y1:me.y1||me.y||0,xLabel:me.xLabel,yLabel:me.yLabel,zLabel:me.zLabel,text:me.text,name:me.name,idealAlign:me.idealAlign,borderColor:me.borderColor,fontFamily:me.fontFamily,fontSize:me.fontSize,fontColor:me.fontColor,nameLength:me.nameLength,textAlign:me.textAlign,trace:me.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:me.hovertemplate||!1,hovertemplateLabels:me.hovertemplateLabels||!1,eventData:Ce}}),ae=!1,oe=I(se,{gd:Z,hovermode:"closest",rotateLabels:ae,bgColor:ee.bgColor||s.background,container:w.select(ee.container),outerContainer:ee.outerContainer||ee.container}),be=5,ce=0,de=0;oe.sort(function(me,Se){return me.y0-Se.y0}).each(function(me,Se){var Le=me.y0-me.by/2;Le-be<ce?me.offset=ce-Le+be:me.offset=0,ce=Le+me.by+me.offset,Se===ee.anchorIndex&&(de=me.offset)}).each(function(me){me.offset-=de});var ye=Z._fullLayout._invScaleX,ge=Z._fullLayout._invScaleY;return O(oe,ae,ye,ge),ne?oe:oe.node()};function E(Y,H,ee,ne,Z){ee||(ee="xy");var q=Array.isArray(ee)?ee:[ee],ie=Y._fullLayout,se=ie._plots||[],ae=se[ee],oe=ie._has("cartesian");if(ae){var be=ae.overlays.map(function(hr){return hr.id});q=q.concat(be)}for(var ce=q.length,de=new Array(ce),ye=new Array(ce),ge=!1,me=0;me<ce;me++){var Se=q[me];if(se[Se])ge=!0,de[me]=se[Se].xaxis,ye[me]=se[Se].yaxis;else if(ie[Se]&&ie[Se]._subplot){var Le=ie[Se]._subplot;de[me]=Le.xaxis,ye[me]=Le.yaxis}else{T.warn("Unrecognized subplot: "+Se);return}}var Oe=H.hovermode||ie.hovermode;if(Oe&&!ge&&(Oe="closest"),["x","y","closest","x unified","y unified"].indexOf(Oe)===-1||!Y.calcdata||Y.querySelector(".zoombox")||Y._dragging)return o.unhoverRaw(Y,H);var we=ie.hoverdistance;we===-1&&(we=1/0);var Ce=ie.spikedistance;Ce===-1&&(Ce=1/0);var Ke=[],Ye=[],Fe,Re,je,xt,Nt,tr,Ht,Pt,$t,Ut,Lt,We,ot,Ge={hLinePoint:null,vLinePoint:null},Me=!1;if(Array.isArray(H))for(Oe="array",je=0;je<H.length;je++)Nt=Y.calcdata[H[je].curveNumber||0],Nt&&(tr=Nt[0].trace,Nt[0].trace.hoverinfo!=="skip"&&(Ye.push(Nt),tr.orientation==="h"&&(Me=!0)));else{for(xt=0;xt<Y.calcdata.length;xt++)Nt=Y.calcdata[xt],tr=Nt[0].trace,tr.hoverinfo!=="skip"&&p.isTraceInSubplots(tr,q)&&(Ye.push(Nt),tr.orientation==="h"&&(Me=!0));var Ve=!Z,Qe,tt;if(Ve)"xpx"in H?Qe=H.xpx:Qe=de[0]._length/2,"ypx"in H?tt=H.ypx:tt=ye[0]._length/2;else{if(n.triggerHandler(Y,"plotly_beforehover",H)===!1)return;var St=Z.getBoundingClientRect();Qe=H.clientX-St.left,tt=H.clientY-St.top,ie._calcInverseTransform(Y);var wt=T.apply3DTransform(ie._invTransform)(Qe,tt);if(Qe=wt[0],tt=wt[1],Qe<0||Qe>de[0]._length||tt<0||tt>ye[0]._length)return o.unhoverRaw(Y,H)}if(H.pointerX=Qe+de[0]._offset,H.pointerY=tt+ye[0]._offset,"xval"in H?Fe=p.flat(q,H.xval):Fe=p.p2c(de,Qe),"yval"in H?Re=p.flat(q,H.yval):Re=p.p2c(ye,tt),!f(Fe[0])||!f(Re[0]))return T.warn("Fx.hover failed",H,Y),o.unhoverRaw(Y,H)}var Ct=1/0;function jt(hr,Ur){for(xt=0;xt<Ye.length;xt++)if(Nt=Ye[xt],!(!Nt||!Nt[0]||!Nt[0].trace)&&(tr=Nt[0].trace,!(tr.visible!==!0||tr._length===0)&&["carpet","contourcarpet"].indexOf(tr._module.name)===-1)){if(tr.type==="splom"?(Pt=0,Ht=q[Pt]):(Ht=p.getSubplot(tr),Pt=q.indexOf(Ht)),$t=Oe,p.isUnifiedHover($t)&&($t=$t.charAt(0)),We={cd:Nt,trace:tr,xa:de[Pt],ya:ye[Pt],maxHoverDistance:we,maxSpikeDistance:Ce,index:!1,distance:Math.min(Ct,we),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:s.defaultLine,name:tr.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},ie[Ht]&&(We.subplot=ie[Ht]._subplot),ie._splomScenes&&ie._splomScenes[tr.uid]&&(We.scene=ie._splomScenes[tr.uid]),ot=Ke.length,$t==="array"){var Gr=H[xt];"pointNumber"in Gr?(We.index=Gr.pointNumber,$t="closest"):($t="","xval"in Gr&&(Ut=Gr.xval,$t="x"),"yval"in Gr&&(Lt=Gr.yval,$t=$t?"closest":"y"))}else hr!==void 0&&Ur!==void 0?(Ut=hr,Lt=Ur):(Ut=Fe[Pt],Lt=Re[Pt]);if(we!==0)if(tr._module&&tr._module.hoverPoints){var Ir=tr._module.hoverPoints(We,Ut,Lt,$t,{finiteRange:!0,hoverLayer:ie._hoverlayer});if(Ir)for(var Cr,Kr=0;Kr<Ir.length;Kr++)Cr=Ir[Kr],f(Cr.x0)&&f(Cr.y0)&&Ke.push(z(Cr,Oe))}else T.log("Unrecognized trace type in hover:",tr);if(Oe==="closest"&&Ke.length>ot&&(Ke.splice(0,ot),Ct=Ke[0].distance),oe&&Ce!==0&&Ke.length===0){We.distance=Ce,We.index=!1;var Cn=tr._module.hoverPoints(We,Ut,Lt,"closest",{hoverLayer:ie._hoverlayer});if(Cn&&(Cn=Cn.filter(function(ba){return ba.spikeDistance<=Ce})),Cn&&Cn.length){var yn,Yn=Cn.filter(function(ba){return ba.xa.showspikes&&ba.xa.spikesnap!=="hovered data"});if(Yn.length){var In=Yn[0];f(In.x0)&&f(In.y0)&&(yn=Wt(In),(!Ge.vLinePoint||Ge.vLinePoint.spikeDistance>yn.spikeDistance)&&(Ge.vLinePoint=yn))}var Jn=Cn.filter(function(ba){return ba.ya.showspikes&&ba.ya.spikesnap!=="hovered data"});if(Jn.length){var Zn=Jn[0];f(Zn.x0)&&f(Zn.y0)&&(yn=Wt(Zn),(!Ge.hLinePoint||Ge.hLinePoint.spikeDistance>yn.spikeDistance)&&(Ge.hLinePoint=yn))}}}}}jt();function Bt(hr,Ur,Gr){for(var Ir=null,Cr=1/0,Kr,Cn=0;Cn<hr.length;Cn++)Kr=hr[Cn].spikeDistance,Gr&&Cn===0&&(Kr=-1/0),Kr<=Cr&&Kr<=Ur&&(Ir=hr[Cn],Cr=Kr);return Ir}function Wt(hr){return hr?{xa:hr.xa,ya:hr.ya,x:hr.xSpike!==void 0?hr.xSpike:(hr.x0+hr.x1)/2,y:hr.ySpike!==void 0?hr.ySpike:(hr.y0+hr.y1)/2,distance:hr.distance,spikeDistance:hr.spikeDistance,curveNumber:hr.trace.index,color:hr.color,pointNumber:hr.index}:null}var Qt={fullLayout:ie,container:ie._hoverlayer,event:H},Zt=Y._spikepoints,cr={vLinePoint:Ge.vLinePoint,hLinePoint:Ge.hLinePoint};Y._spikepoints=cr;var Xr=function(){Ke.sort(function(hr,Ur){return hr.distance-Ur.distance}),Ke=j(Ke,Oe)};Xr();var vn=Oe.charAt(0),en=(vn==="x"||vn==="y")&&Ke[0]&&S[Ke[0].trace.type];if(oe&&Ce!==0&&Ke.length!==0){var ut=Ke.filter(function(hr){return hr.ya.showspikes}),ar=Bt(ut,Ce,en);Ge.hLinePoint=Wt(ar);var rr=Ke.filter(function(hr){return hr.xa.showspikes}),Kt=Bt(rr,Ce,en);Ge.vLinePoint=Wt(Kt)}if(Ke.length===0){var Er=o.unhoverRaw(Y,H);return oe&&(Ge.hLinePoint!==null||Ge.vLinePoint!==null)&&Q(Zt)&&B(Y,Ge,Qt),Er}if(oe&&Q(Zt)&&B(Y,Ge,Qt),p.isXYhover($t)&&Ke[0].length!==0&&Ke[0].trace.type!=="splom"){var st=Ke[0];k[st.trace.type]?Ke=Ke.filter(function(hr){return hr.trace.index===st.trace.index}):Ke=[st];var et=Ke.length,ht=re("x",st,ie),vt=re("y",st,ie);jt(ht,vt);var kt=[],Vt={},Pe=0,ke=function(hr){var Ur=k[hr.trace.type]?C(hr):hr.trace.index;if(!Vt[Ur])Pe++,Vt[Ur]=Pe,kt.push(hr);else{var Gr=Vt[Ur]-1,Ir=kt[Gr];Gr>0&&Math.abs(hr.distance)<Math.abs(Ir.distance)&&(kt[Gr]=hr)}},lt;for(lt=0;lt<et;lt++)ke(Ke[lt]);for(lt=Ke.length-1;lt>et-1;lt--)ke(Ke[lt]);Ke=kt,Xr()}var ft=Y._hoverdata,yt=[],Rt=ue(Y),_t=K(Y);for(je=0;je<Ke.length;je++){var Dt=Ke[je],Jt=p.makeEventData(Dt,Dt.trace,Dt.cd);if(Dt.hovertemplate!==!1){var fr=!1;Dt.cd[Dt.index]&&Dt.cd[Dt.index].ht&&(fr=Dt.cd[Dt.index].ht),Dt.hovertemplate=fr||Dt.trace.hovertemplate||!1}if(Dt.xa&&Dt.ya){var Rr=Dt.x0+Dt.xa._offset,Sr=Dt.x1+Dt.xa._offset,Pr=Dt.y0+Dt.ya._offset,Jr=Dt.y1+Dt.ya._offset,ur=Math.min(Rr,Sr),_r=Math.max(Rr,Sr),Br=Math.min(Pr,Jr),Yr=Math.max(Pr,Jr);Jt.bbox={x0:ur+_t,x1:_r+_t,y0:Br+Rt,y1:Yr+Rt}}Dt.eventData=[Jt],yt.push(Jt)}Y._hoverdata=yt;var Dr=Oe==="y"&&(Ye.length>1||Ke.length>1)||Oe==="closest"&&Me&&Ke.length>1,it=s.combine(ie.plot_bgcolor||s.background,ie.paper_bgcolor),zt=I(Ke,{gd:Y,hovermode:Oe,rotateLabels:Dr,bgColor:it,container:ie._hoverlayer,outerContainer:ie._paper.node(),commonLabelOpts:ie.hoverlabel,hoverdistance:ie.hoverdistance});if(p.isUnifiedHover(Oe)||(R(zt,Dr?"xa":"ya",ie),O(zt,Dr,ie._invScaleX,ie._invScaleY)),Z&&Z.tagName){var qt=d.getComponentMethod("annotations","hasClickToShow")(Y,yt);t(w.select(Z),qt?"pointer":"")}!Z||ne||!G(Y,H,ft)||(ft&&Y.emit("plotly_unhover",{event:H,points:ft}),Y.emit("plotly_hover",{event:H,points:Y._hoverdata,xaxes:de,yaxes:ye,xvals:Fe,yvals:Re}))}function C(Y){return[Y.trace.index,Y.index,Y.x0,Y.y0,Y.name,Y.attr,Y.xa?Y.xa._id:"",Y.ya?Y.ya._id:""].join(",")}var F=/<extra>([\s\S]*)<\/extra>/;function I(Y,H){var ee=H.gd,ne=ee._fullLayout,Z=H.hovermode,q=H.rotateLabels,ie=H.bgColor,se=H.container,ae=H.outerContainer,oe=H.commonLabelOpts||{};if(Y.length===0)return[[]];var be=H.fontFamily||c.HOVERFONT,ce=H.fontSize||c.HOVERFONTSIZE,de=Y[0],ye=de.xa,ge=de.ya,me=Z.charAt(0),Se=de[me+"Label"],Le=te(ee,ae),Oe=Le.top,we=Le.width,Ce=Le.height,Ke=Se!==void 0&&de.distance<=H.hoverdistance&&(Z==="x"||Z==="y");if(Ke){var Ye=!0,Fe,Re;for(Fe=0;Fe<Y.length;Fe++)if(Ye&&Y[Fe].zLabel===void 0&&(Ye=!1),Re=Y[Fe].hoverinfo||Y[Fe].trace.hoverinfo,Re){var je=Array.isArray(Re)?Re:Re.split("+");if(je.indexOf("all")===-1&&je.indexOf(Z)===-1){Ke=!1;break}}Ye&&(Ke=!1)}var xt=se.selectAll("g.axistext").data(Ke?[0]:[]);if(xt.enter().append("g").classed("axistext",!0),xt.exit().remove(),xt.each(function(){var Kt=w.select(this),Er=T.ensureSingle(Kt,"path","",function(Jr){Jr.style({"stroke-width":"1px"})}),st=T.ensureSingle(Kt,"text","",function(Jr){Jr.attr("data-notex",1)}),et=oe.bgcolor||s.defaultLine,ht=oe.bordercolor||s.contrast(et),vt=s.contrast(et),kt={family:oe.font.family||be,size:oe.font.size||ce,color:oe.font.color||vt};Er.style({fill:et,stroke:ht}),st.text(Se).call(h.font,kt).call(r.positionText,0,0).call(r.convertToTspans,ee),Kt.attr("transform","");var Vt=te(ee,st.node()),Pe,ke;if(Z==="x"){var lt=ye.side==="top"?"-":"";st.attr("text-anchor","middle").call(r.positionText,0,ye.side==="top"?Oe-Vt.bottom-b-v:Oe-Vt.top+b+v),Pe=ye._offset+(de.x0+de.x1)/2,ke=ge._offset+(ye.side==="top"?0:ge._length);var ft=Vt.width/2+v;Pe<ft?(Pe=ft,Er.attr("d","M-"+(ft-b)+",0L-"+(ft-b*2)+","+lt+b+"H"+(v+Vt.width/2)+"v"+lt+(v*2+Vt.height)+"H-"+ft+"V"+lt+b+"Z")):Pe>ne.width-ft?(Pe=ne.width-ft,Er.attr("d","M"+(ft-b)+",0L"+ft+","+lt+b+"v"+lt+(v*2+Vt.height)+"H-"+ft+"V"+lt+b+"H"+(ft-b*2)+"Z")):Er.attr("d","M0,0L"+b+","+lt+b+"H"+(v+Vt.width/2)+"v"+lt+(v*2+Vt.height)+"H-"+(v+Vt.width/2)+"V"+lt+b+"H-"+b+"Z")}else{var yt,Rt,_t;ge.side==="right"?(yt="start",Rt=1,_t="",Pe=ye._offset+ye._length):(yt="end",Rt=-1,_t="-",Pe=ye._offset),ke=ge._offset+(de.y0+de.y1)/2,st.attr("text-anchor",yt),Er.attr("d","M0,0L"+_t+b+","+b+"V"+(v+Vt.height/2)+"h"+_t+(v*2+Vt.width)+"V-"+(v+Vt.height/2)+"H"+_t+b+"V-"+b+"Z");var Dt=Vt.height/2,Jt=Oe-Vt.top-Dt,fr="clip"+ne._uid+"commonlabel"+ge._id,Rr;if(Pe<Vt.width+2*v+b){Rr="M-"+(b+v)+"-"+Dt+"h-"+(Vt.width-v)+"V"+Dt+"h"+(Vt.width-v)+"Z";var Sr=Vt.width-Pe+v;r.positionText(st,Sr,Jt),yt==="end"&&st.selectAll("tspan").each(function(){var Jr=w.select(this),ur=h.tester.append("text").text(Jr.text()).call(h.font,kt),_r=te(ee,ur.node());Math.round(_r.width)<Math.round(Vt.width)&&Jr.attr("x",Sr-_r.width),ur.remove()})}else r.positionText(st,Rt*(v+b),Jt),Rr=null;var Pr=ne._topclips.selectAll("#"+fr).data(Rr?[0]:[]);Pr.enter().append("clipPath").attr("id",fr).append("path"),Pr.exit().remove(),Pr.select("path").attr("d",Rr),h.setClipUrl(st,Rr?fr:null,ee)}Kt.attr("transform",e(Pe,ke))}),p.isUnifiedHover(Z)){se.selectAll("g.hovertext").remove();var Nt=Y.filter(function(Kt){return Kt.hoverinfo!=="none"});if(Nt.length===0)return;var tr=ne.hoverlabel,Ht=tr.font,Pt={showlegend:!0,legend:{title:{text:Se,font:Ht},font:Ht,bgcolor:tr.bgcolor,bordercolor:tr.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:ne.legend?ne.legend.traceorder:void 0,orientation:"v"}},$t={font:Ht};m(Pt,$t,ee._fullData);var Ut=$t.legend;Ut.entries=[];for(var Lt=0;Lt<Nt.length;Lt++){var We=Nt[Lt];if(We.hoverinfo!=="none"){var ot=D(We,!0,Z,ne,Se),Ge=ot[0],Me=ot[1];We.name=Me,Me!==""?We.text=Me+" : "+Ge:We.text=Ge;var Ve=We.cd[We.index];Ve&&(Ve.mc&&(We.mc=Ve.mc),Ve.mcc&&(We.mc=Ve.mcc),Ve.mlc&&(We.mlc=Ve.mlc),Ve.mlcc&&(We.mlc=Ve.mlcc),Ve.mlw&&(We.mlw=Ve.mlw),Ve.mrc&&(We.mrc=Ve.mrc),Ve.dir&&(We.dir=Ve.dir)),We._distinct=!0,Ut.entries.push([We])}}Ut.entries.sort(function(Kt,Er){return Kt[0].trace.index-Er[0].trace.index}),Ut.layer=se,Ut._inHover=!0,Ut._groupTitleFont=tr.grouptitlefont,l(ee,Ut);var Qe=se.select("g.legend"),tt=te(ee,Qe.node()),St=tt.width+2*v,wt=tt.height+2*v,Ct=Nt[0],jt=(Ct.x0+Ct.x1)/2,Bt=(Ct.y0+Ct.y1)/2,Wt=!(d.traceIs(Ct.trace,"bar-like")||d.traceIs(Ct.trace,"box-violin")),Qt,Zt;me==="y"?Wt?(Zt=Bt-v,Qt=Bt+v):(Zt=Math.min.apply(null,Nt.map(function(Kt){return Math.min(Kt.y0,Kt.y1)})),Qt=Math.max.apply(null,Nt.map(function(Kt){return Math.max(Kt.y0,Kt.y1)}))):Zt=Qt=T.mean(Nt.map(function(Kt){return(Kt.y0+Kt.y1)/2}))-wt/2;var cr,Xr;me==="x"?Wt?(cr=jt+v,Xr=jt-v):(cr=Math.max.apply(null,Nt.map(function(Kt){return Math.max(Kt.x0,Kt.x1)})),Xr=Math.min.apply(null,Nt.map(function(Kt){return Math.min(Kt.x0,Kt.x1)}))):cr=Xr=T.mean(Nt.map(function(Kt){return(Kt.x0+Kt.x1)/2}))-St/2;var vn=ye._offset,en=ge._offset;Qt+=en,cr+=vn,Xr+=vn-St,Zt+=en-wt;var ut,ar;return cr+St<we&&cr>=0?ut=cr:Xr+St<we&&Xr>=0?ut=Xr:vn+St<we?ut=vn:cr-jt<jt-Xr+St?ut=we-St:ut=0,ut+=v,Qt+wt<Ce&&Qt>=0?ar=Qt:Zt+wt<Ce&&Zt>=0?ar=Zt:en+wt<Ce?ar=en:Qt-Bt<Bt-Zt+wt?ar=Ce-wt:ar=0,ar+=v,Qe.attr("transform",e(ut-1,ar-1)),Qe}var rr=se.selectAll("g.hovertext").data(Y,function(Kt){return C(Kt)});return rr.enter().append("g").classed("hovertext",!0).each(function(){var Kt=w.select(this);Kt.append("rect").call(s.fill,s.addOpacity(ie,.8)),Kt.append("text").classed("name",!0),Kt.append("path").style("stroke-width","1px"),Kt.append("text").classed("nums",!0).call(h.font,be,ce)}),rr.exit().remove(),rr.each(function(Kt){var Er=w.select(this).attr("transform",""),st=Kt.color;Array.isArray(st)&&(st=st[Kt.eventData[0].pointNumber]);var et=Kt.bgcolor||st,ht=s.combine(s.opacity(et)?et:s.defaultLine,ie),vt=s.combine(s.opacity(st)?st:s.defaultLine,ie),kt=Kt.borderColor||s.contrast(ht),Vt=D(Kt,Ke,Z,ne,Se,Er),Pe=Vt[0],ke=Vt[1],lt=Er.select("text.nums").call(h.font,Kt.fontFamily||be,Kt.fontSize||ce,Kt.fontColor||kt).text(Pe).attr("data-notex",1).call(r.positionText,0,0).call(r.convertToTspans,ee),ft=Er.select("text.name"),yt=0,Rt=0;if(ke&&ke!==Pe){ft.call(h.font,Kt.fontFamily||be,Kt.fontSize||ce,vt).text(ke).attr("data-notex",1).call(r.positionText,0,0).call(r.convertToTspans,ee);var _t=te(ee,ft.node());yt=_t.width+2*v,Rt=_t.height+2*v}else ft.remove(),Er.select("rect").remove();Er.select("path").style({fill:ht,stroke:kt});var Dt=Kt.xa._offset+(Kt.x0+Kt.x1)/2,Jt=Kt.ya._offset+(Kt.y0+Kt.y1)/2,fr=Math.abs(Kt.x1-Kt.x0),Rr=Math.abs(Kt.y1-Kt.y0),Sr=te(ee,lt.node()),Pr=Sr.width/ne._invScaleX,Jr=Sr.height/ne._invScaleY;Kt.ty0=(Oe-Sr.top)/ne._invScaleY,Kt.bx=Pr+2*v,Kt.by=Math.max(Jr+2*v,Rt),Kt.anchor="start",Kt.txwidth=Pr,Kt.tx2width=yt,Kt.offset=0;var ur=(Pr+b+v+yt)*ne._invScaleX,_r,Br;if(q)Kt.pos=Dt,_r=Jt+Rr/2+ur<=Ce,Br=Jt-Rr/2-ur>=0,(Kt.idealAlign==="top"||!_r)&&Br?(Jt-=Rr/2,Kt.anchor="end"):_r?(Jt+=Rr/2,Kt.anchor="start"):Kt.anchor="middle";else if(Kt.pos=Jt,_r=Dt+fr/2+ur<=we,Br=Dt-fr/2-ur>=0,(Kt.idealAlign==="left"||!_r)&&Br)Dt-=fr/2,Kt.anchor="end";else if(_r)Dt+=fr/2,Kt.anchor="start";else{Kt.anchor="middle";var Yr=ur/2,Dr=Dt+Yr-we,it=Dt-Yr;Dr>0&&(Dt-=Dr),it<0&&(Dt+=-it)}lt.attr("text-anchor",Kt.anchor),yt&&ft.attr("text-anchor",Kt.anchor),Er.attr("transform",e(Dt,Jt)+(q?a(x):""))}),rr}function D(Y,H,ee,ne,Z,q){var ie="",se="";Y.nameOverride!==void 0&&(Y.name=Y.nameOverride),Y.name&&(Y.trace._meta&&(Y.name=T.templateString(Y.name,Y.trace._meta)),ie=X(Y.name,Y.nameLength));var ae=ee.charAt(0),oe=ae==="x"?"y":"x";Y.zLabel!==void 0?(Y.xLabel!==void 0&&(se+="x: "+Y.xLabel+"<br>"),Y.yLabel!==void 0&&(se+="y: "+Y.yLabel+"<br>"),Y.trace.type!=="choropleth"&&Y.trace.type!=="choroplethmapbox"&&(se+=(se?"z: ":"")+Y.zLabel)):H&&Y[ae+"Label"]===Z?se=Y[oe+"Label"]||"":Y.xLabel===void 0?Y.yLabel!==void 0&&Y.trace.type!=="scattercarpet"&&(se=Y.yLabel):Y.yLabel===void 0?se=Y.xLabel:se="("+Y.xLabel+", "+Y.yLabel+")",(Y.text||Y.text===0)&&!Array.isArray(Y.text)&&(se+=(se?"<br>":"")+Y.text),Y.extraText!==void 0&&(se+=(se?"<br>":"")+Y.extraText),q&&se===""&&!Y.hovertemplate&&(ie===""&&q.remove(),se=ie);var be=Y.hovertemplate||!1;if(be){var ce=Y.hovertemplateLabels||Y;Y[ae+"Label"]!==Z&&(ce[ae+"other"]=ce[ae+"Val"],ce[ae+"otherLabel"]=ce[ae+"Label"]),se=T.hovertemplateString(be,ce,ne._d3locale,Y.eventData[0]||{},Y.trace._meta),se=se.replace(F,function(de,ye){return ie=X(ye,Y.nameLength),""})}return[se,ie]}function R(Y,H,ee){var ne=0,Z=1,q=Y.size(),ie=new Array(q),se=0;Y.each(function(Fe){var Re=Fe[H],je=Re._id.charAt(0)==="x",xt=Re.range;se===0&&xt&&xt[0]>xt[1]!==je&&(Z=-1),ie[se++]=[{datum:Fe,traceIndex:Fe.trace.index,dp:0,pos:Fe.pos,posref:Fe.posref,size:Fe.by*(je?A:1)/2,pmin:0,pmax:je?ee.width:ee.height}]}),ie.sort(function(Fe,Re){return Fe[0].posref-Re[0].posref||Z*(Re[0].traceIndex-Fe[0].traceIndex)});var ae,oe,be,ce,de,ye,ge;function me(Fe){var Re=Fe[0],je=Fe[Fe.length-1];if(oe=Re.pmin-Re.pos-Re.dp+Re.size,be=je.pos+je.dp+je.size-Re.pmax,oe>.01){for(de=Fe.length-1;de>=0;de--)Fe[de].dp+=oe;ae=!1}if(!(be<.01)){if(oe<-.01){for(de=Fe.length-1;de>=0;de--)Fe[de].dp-=be;ae=!1}if(!!ae){var xt=0;for(ce=0;ce<Fe.length;ce++)ye=Fe[ce],ye.pos+ye.dp+ye.size>Re.pmax&&xt++;for(ce=Fe.length-1;ce>=0&&!(xt<=0);ce--)ye=Fe[ce],ye.pos>Re.pmax-1&&(ye.del=!0,xt--);for(ce=0;ce<Fe.length&&!(xt<=0);ce++)if(ye=Fe[ce],ye.pos<Re.pmin+1)for(ye.del=!0,xt--,be=ye.size*2,de=Fe.length-1;de>=0;de--)Fe[de].dp-=be;for(ce=Fe.length-1;ce>=0&&!(xt<=0);ce--)ye=Fe[ce],ye.pos+ye.dp+ye.size>Re.pmax&&(ye.del=!0,xt--)}}}for(;!ae&&ne<=q;){for(ne++,ae=!0,ce=0;ce<ie.length-1;){var Se=ie[ce],Le=ie[ce+1],Oe=Se[Se.length-1],we=Le[0];if(oe=Oe.pos+Oe.dp+Oe.size-we.pos-we.dp+we.size,oe>.01&&Oe.pmin===we.pmin&&Oe.pmax===we.pmax){for(de=Le.length-1;de>=0;de--)Le[de].dp+=oe;for(Se.push.apply(Se,Le),ie.splice(ce+1,1),ge=0,de=Se.length-1;de>=0;de--)ge+=Se[de].dp;for(be=ge/Se.length,de=Se.length-1;de>=0;de--)Se[de].dp-=be;ae=!1}else ce++}ie.forEach(me)}for(ce=ie.length-1;ce>=0;ce--){var Ce=ie[ce];for(de=Ce.length-1;de>=0;de--){var Ke=Ce[de],Ye=Ke.datum;Ye.offset=Ke.dp,Ye.del=Ke.del}}}function O(Y,H,ee,ne){var Z=function(ie){return ie*ee},q=function(ie){return ie*ne};Y.each(function(ie){var se=w.select(this);if(ie.del)return se.remove();var ae=se.select("text.nums"),oe=ie.anchor,be=oe==="end"?-1:1,ce={start:1,end:-1,middle:0}[oe],de=ce*(b+v),ye=de+ce*(ie.txwidth+v),ge=0,me=ie.offset,Se=oe==="middle";Se&&(de-=ie.tx2width/2,ye+=ie.txwidth/2+v),H&&(me*=-g,ge=ie.offset*_),se.select("path").attr("d",Se?"M-"+Z(ie.bx/2+ie.tx2width/2)+","+q(me-ie.by/2)+"h"+Z(ie.bx)+"v"+q(ie.by)+"h-"+Z(ie.bx)+"Z":"M0,0L"+Z(be*b+ge)+","+q(b+me)+"v"+q(ie.by/2-b)+"h"+Z(be*ie.bx)+"v-"+q(ie.by)+"H"+Z(be*b+ge)+"V"+q(me-b)+"Z");var Le=ge+de,Oe=me+ie.ty0-ie.by/2+v,we=ie.textAlign||"auto";we!=="auto"&&(we==="left"&&oe!=="start"?(ae.attr("text-anchor","start"),Le=Se?-ie.bx/2-ie.tx2width/2+v:-ie.bx-v):we==="right"&&oe!=="end"&&(ae.attr("text-anchor","end"),Le=Se?ie.bx/2-ie.tx2width/2-v:ie.bx+v)),ae.call(r.positionText,Z(Le),q(Oe)),ie.tx2width&&(se.select("text.name").call(r.positionText,Z(ye+ce*v+ge),q(me+ie.ty0-ie.by/2+v)),se.select("rect").call(h.setRect,Z(ye+(ce-1)*ie.tx2width/2+ge),q(me-ie.by/2-1),Z(ie.tx2width),q(ie.by+2)))})}function z(Y,H){var ee=Y.index,ne=Y.trace||{},Z=Y.cd[0],q=Y.cd[ee]||{};function ie(de){return de||f(de)&&de===0}var se=Array.isArray(ee)?function(de,ye){var ge=T.castOption(Z,ee,de);return ie(ge)?ge:T.extractOption({},ne,"",ye)}:function(de,ye){return T.extractOption(q,ne,de,ye)};function ae(de,ye,ge){var me=se(ye,ge);ie(me)&&(Y[de]=me)}if(ae("hoverinfo","hi","hoverinfo"),ae("bgcolor","hbg","hoverlabel.bgcolor"),ae("borderColor","hbc","hoverlabel.bordercolor"),ae("fontFamily","htf","hoverlabel.font.family"),ae("fontSize","hts","hoverlabel.font.size"),ae("fontColor","htc","hoverlabel.font.color"),ae("nameLength","hnl","hoverlabel.namelength"),ae("textAlign","hta","hoverlabel.align"),Y.posref=H==="y"||H==="closest"&&ne.orientation==="h"?Y.xa._offset+(Y.x0+Y.x1)/2:Y.ya._offset+(Y.y0+Y.y1)/2,Y.x0=T.constrain(Y.x0,0,Y.xa._length),Y.x1=T.constrain(Y.x1,0,Y.xa._length),Y.y0=T.constrain(Y.y0,0,Y.ya._length),Y.y1=T.constrain(Y.y1,0,Y.ya._length),Y.xLabelVal!==void 0&&(Y.xLabel="xLabel"in Y?Y.xLabel:y.hoverLabelText(Y.xa,Y.xLabelVal,ne.xhoverformat),Y.xVal=Y.xa.c2d(Y.xLabelVal)),Y.yLabelVal!==void 0&&(Y.yLabel="yLabel"in Y?Y.yLabel:y.hoverLabelText(Y.ya,Y.yLabelVal,ne.yhoverformat),Y.yVal=Y.ya.c2d(Y.yLabelVal)),Y.zLabelVal!==void 0&&Y.zLabel===void 0&&(Y.zLabel=String(Y.zLabelVal)),!isNaN(Y.xerr)&&!(Y.xa.type==="log"&&Y.xerr<=0)){var oe=y.tickText(Y.xa,Y.xa.c2l(Y.xerr),"hover").text;Y.xerrneg!==void 0?Y.xLabel+=" +"+oe+" / -"+y.tickText(Y.xa,Y.xa.c2l(Y.xerrneg),"hover").text:Y.xLabel+=" \xB1 "+oe,H==="x"&&(Y.distance+=1)}if(!isNaN(Y.yerr)&&!(Y.ya.type==="log"&&Y.yerr<=0)){var be=y.tickText(Y.ya,Y.ya.c2l(Y.yerr),"hover").text;Y.yerrneg!==void 0?Y.yLabel+=" +"+be+" / -"+y.tickText(Y.ya,Y.ya.c2l(Y.yerrneg),"hover").text:Y.yLabel+=" \xB1 "+be,H==="y"&&(Y.distance+=1)}var ce=Y.hoverinfo||Y.trace.hoverinfo;return ce&&ce!=="all"&&(ce=Array.isArray(ce)?ce:ce.split("+"),ce.indexOf("x")===-1&&(Y.xLabel=void 0),ce.indexOf("y")===-1&&(Y.yLabel=void 0),ce.indexOf("z")===-1&&(Y.zLabel=void 0),ce.indexOf("text")===-1&&(Y.text=void 0),ce.indexOf("name")===-1&&(Y.name=void 0)),Y}function B(Y,H,ee){var ne=ee.container,Z=ee.fullLayout,q=Z._size,ie=ee.event,se=!!H.hLinePoint,ae=!!H.vLinePoint,oe,be;if(ne.selectAll(".spikeline").remove(),!!(ae||se)){var ce=s.combine(Z.plot_bgcolor,Z.paper_bgcolor);if(se){var de=H.hLinePoint,ye,ge;oe=de&&de.xa,be=de&&de.ya;var me=be.spikesnap;me==="cursor"?(ye=ie.pointerX,ge=ie.pointerY):(ye=oe._offset+de.x,ge=be._offset+de.y);var Se=M.readability(de.color,ce)<1.5?s.contrast(ce):de.color,Le=be.spikemode,Oe=be.spikethickness,we=be.spikecolor||Se,Ce=y.getPxPosition(Y,be),Ke,Ye;if(Le.indexOf("toaxis")!==-1||Le.indexOf("across")!==-1){if(Le.indexOf("toaxis")!==-1&&(Ke=Ce,Ye=ye),Le.indexOf("across")!==-1){var Fe=be._counterDomainMin,Re=be._counterDomainMax;be.anchor==="free"&&(Fe=Math.min(Fe,be.position),Re=Math.max(Re,be.position)),Ke=q.l+Fe*q.w,Ye=q.l+Re*q.w}ne.insert("line",":first-child").attr({x1:Ke,x2:Ye,y1:ge,y2:ge,"stroke-width":Oe,stroke:we,"stroke-dasharray":h.dashStyle(be.spikedash,Oe)}).classed("spikeline",!0).classed("crisp",!0),ne.insert("line",":first-child").attr({x1:Ke,x2:Ye,y1:ge,y2:ge,"stroke-width":Oe+2,stroke:ce}).classed("spikeline",!0).classed("crisp",!0)}Le.indexOf("marker")!==-1&&ne.insert("circle",":first-child").attr({cx:Ce+(be.side!=="right"?Oe:-Oe),cy:ge,r:Oe,fill:we}).classed("spikeline",!0)}if(ae){var je=H.vLinePoint,xt,Nt;oe=je&&je.xa,be=je&&je.ya;var tr=oe.spikesnap;tr==="cursor"?(xt=ie.pointerX,Nt=ie.pointerY):(xt=oe._offset+je.x,Nt=be._offset+je.y);var Ht=M.readability(je.color,ce)<1.5?s.contrast(ce):je.color,Pt=oe.spikemode,$t=oe.spikethickness,Ut=oe.spikecolor||Ht,Lt=y.getPxPosition(Y,oe),We,ot;if(Pt.indexOf("toaxis")!==-1||Pt.indexOf("across")!==-1){if(Pt.indexOf("toaxis")!==-1&&(We=Lt,ot=Nt),Pt.indexOf("across")!==-1){var Ge=oe._counterDomainMin,Me=oe._counterDomainMax;oe.anchor==="free"&&(Ge=Math.min(Ge,oe.position),Me=Math.max(Me,oe.position)),We=q.t+(1-Me)*q.h,ot=q.t+(1-Ge)*q.h}ne.insert("line",":first-child").attr({x1:xt,x2:xt,y1:We,y2:ot,"stroke-width":$t,stroke:Ut,"stroke-dasharray":h.dashStyle(oe.spikedash,$t)}).classed("spikeline",!0).classed("crisp",!0),ne.insert("line",":first-child").attr({x1:xt,x2:xt,y1:We,y2:ot,"stroke-width":$t+2,stroke:ce}).classed("spikeline",!0).classed("crisp",!0)}Pt.indexOf("marker")!==-1&&ne.insert("circle",":first-child").attr({cx:xt,cy:Lt-(oe.side!=="top"?$t:-$t),r:$t,fill:Ut}).classed("spikeline",!0)}}}function G(Y,H,ee){if(!ee||ee.length!==Y._hoverdata.length)return!0;for(var ne=ee.length-1;ne>=0;ne--){var Z=ee[ne],q=Y._hoverdata[ne];if(Z.curveNumber!==q.curveNumber||String(Z.pointNumber)!==String(q.pointNumber)||String(Z.pointNumbers)!==String(q.pointNumbers))return!0}return!1}function Q(Y,H){return!H||H.vLinePoint!==Y._spikepoints.vLinePoint||H.hLinePoint!==Y._spikepoints.hLinePoint}function X(Y,H){return r.plainText(Y||"",{len:H,allowedTags:["br","sub","sup","b","i","em"]})}function j(Y,H){for(var ee=H.charAt(0),ne=[],Z=[],q=[],ie=0;ie<Y.length;ie++){var se=Y[ie];d.traceIs(se.trace,"bar-like")||d.traceIs(se.trace,"box-violin")?q.push(se):se.trace[ee+"period"]?Z.push(se):ne.push(se)}return ne.concat(Z).concat(q)}function re(Y,H,ee){var ne=H[Y+"a"],Z=H[Y+"Val"],q=H.cd[0];if(ne.type==="category")Z=ne._categoriesMap[Z];else if(ne.type==="date"){var ie=H.trace[Y+"periodalignment"];if(ie){var se=H.cd[H.index],ae=se[Y+"Start"];ae===void 0&&(ae=se[Y]);var oe=se[Y+"End"];oe===void 0&&(oe=se[Y]);var be=oe-ae;ie==="end"?Z+=be:ie==="middle"&&(Z+=be/2)}Z=ne.d2c(Z)}return q&&q.t&&q.t.posLetter===ne._id&&(ee.boxmode==="group"||ee.violinmode==="group")&&(Z+=q.t.dPos),Z}function ue(Y){return Y.offsetTop+Y.clientTop}function K(Y){return Y.offsetLeft+Y.clientLeft}function te(Y,H){var ee=Y._fullLayout,ne=H.getBoundingClientRect(),Z=ne.x,q=ne.y,ie=Z+ne.width,se=q+ne.height,ae=T.apply3DTransform(ee._invTransform)(Z,q),oe=T.apply3DTransform(ee._invTransform)(ie,se),be=ae[0],ce=ae[1],de=oe[0],ye=oe[1];return{x:be,y:ce,width:de-be,height:ye-ce,top:Math.min(ce,ye),left:Math.min(be,de),right:Math.max(be,de),bottom:Math.max(ce,ye)}}},{"../../lib":515,"../../lib/events":504,"../../lib/override_cursor":526,"../../lib/svg_text_utils":541,"../../plots/cartesian/axes":566,"../../registry":647,"../color":367,"../dragelement":386,"../drawing":389,"../legend/defaults":419,"../legend/draw":420,"./constants":401,"./helpers":403,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:313}],405:[function(i,U,V){var w=i("../../lib"),f=i("../color"),M=i("./helpers").isUnifiedHover;U.exports=function(e,a,n,r){r=r||{};var t=a.legend;function h(s){r.font[s]||(r.font[s]=t?a.legend.font[s]:a.font[s])}a&&M(a.hovermode)&&(r.font||(r.font={}),h("size"),h("family"),h("color"),t?(r.bgcolor||(r.bgcolor=f.combine(a.legend.bgcolor,a.paper_bgcolor)),r.bordercolor||(r.bordercolor=a.legend.bordercolor)):r.bgcolor||(r.bgcolor=a.paper_bgcolor)),n("hoverlabel.bgcolor",r.bgcolor),n("hoverlabel.bordercolor",r.bordercolor),n("hoverlabel.namelength",r.namelength),w.coerceFont(n,"hoverlabel.font",r.font),n("hoverlabel.align",r.align)}},{"../../lib":515,"../color":367,"./helpers":403}],406:[function(i,U,V){var w=i("../../lib"),f=i("./layout_attributes");U.exports=function(T,e){function a(n,r){return e[n]!==void 0?e[n]:w.coerce(T,e,f,n,r)}return a("clickmode"),a("hovermode")}},{"../../lib":515,"./layout_attributes":408}],407:[function(i,U,V){var w=i("@plotly/d3"),f=i("../../lib"),M=i("../dragelement"),T=i("./helpers"),e=i("./layout_attributes"),a=i("./hover");U.exports={moduleType:"component",name:"fx",constants:i("./constants"),schema:{layout:e},attributes:i("./attributes"),layoutAttributes:e,supplyLayoutGlobalDefaults:i("./layout_global_defaults"),supplyDefaults:i("./defaults"),supplyLayoutDefaults:i("./layout_defaults"),calc:i("./calc"),getDistanceFunction:T.getDistanceFunction,getClosest:T.getClosest,inbox:T.inbox,quadrature:T.quadrature,appendArrayPointValue:T.appendArrayPointValue,castHoverOption:r,castHoverinfo:t,hover:a.hover,unhover:M.unhover,loneHover:a.loneHover,loneUnhover:n,click:i("./click")};function n(h){var s=f.isD3Selection(h)?h:w.select(h);s.selectAll("g.hovertext").remove(),s.selectAll(".spikeline").remove()}function r(h,s,o){return f.castOption(h,s,"hoverlabel."+o)}function t(h,s,o){function y(d){return f.coerceHoverinfo({hoverinfo:d},{_module:h._module},s)}return f.castOption(h,o,"hoverinfo",y)}},{"../../lib":515,"../dragelement":386,"./attributes":398,"./calc":399,"./click":400,"./constants":401,"./defaults":402,"./helpers":403,"./hover":404,"./layout_attributes":408,"./layout_defaults":409,"./layout_global_defaults":410,"@plotly/d3":58}],408:[function(i,U,V){var w=i("./constants"),f=i("../../plots/font_attributes"),M=f({editType:"none"});M.family.dflt=w.HOVERFONT,M.size.dflt=w.HOVERFONTSIZE,U.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:M,grouptitlefont:f({editType:"none"}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},{"../../plots/font_attributes":594,"./constants":401}],409:[function(i,U,V){var w=i("../../lib"),f=i("./layout_attributes"),M=i("./hovermode_defaults"),T=i("./hoverlabel_defaults");U.exports=function(a,n){function r(d,p){return w.coerce(a,n,f,d,p)}var t=M(a,n);t&&(r("hoverdistance"),r("spikedistance"));var h=r("dragmode");h==="select"&&r("selectdirection");var s=n._has("mapbox"),o=n._has("geo"),y=n._basePlotModules.length;n.dragmode==="zoom"&&((s||o)&&y===1||s&&o&&y===2)&&(n.dragmode="pan"),T(a,n,r),w.coerceFont(r,"hoverlabel.grouptitlefont",n.hoverlabel.font)}},{"../../lib":515,"./hoverlabel_defaults":405,"./hovermode_defaults":406,"./layout_attributes":408}],410:[function(i,U,V){var w=i("../../lib"),f=i("./hoverlabel_defaults"),M=i("./layout_attributes");U.exports=function(e,a){function n(r,t){return w.coerce(e,a,M,r,t)}f(e,a,n)}},{"../../lib":515,"./hoverlabel_defaults":405,"./layout_attributes":408}],411:[function(i,U,V){var w=i("../../lib"),f=i("../../lib/regex").counter,M=i("../../plots/domain").attributes,T=i("../../plots/cartesian/constants").idRegex,e=i("../../plot_api/plot_template"),a={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[f("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[T.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[T.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:M({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function n(o,y,d){var p=y[d+"axes"],c=Object.keys((o._splomAxes||{})[d]||{});if(Array.isArray(p))return p;if(c.length)return c}function r(o,y){var d=o.grid||{},p=n(y,d,"x"),c=n(y,d,"y");if(!o.grid&&!p&&!c)return;var m=Array.isArray(d.subplots)&&Array.isArray(d.subplots[0]),l=Array.isArray(p),x=Array.isArray(c),u=l&&p!==d.xaxes&&x&&c!==d.yaxes,A,_;m?(A=d.subplots.length,_=d.subplots[0].length):(x&&(A=c.length),l&&(_=p.length));var g=e.newContainer(y,"grid");function b(O,z){return w.coerce(d,g,a,O,z)}var v=b("rows",A),k=b("columns",_);if(!(v*k>1)){delete y.grid;return}if(!m&&!l&&!x){var S=b("pattern")==="independent";S&&(m=!0)}g._hasSubplotGrid=m;var E=b("roworder"),C=E==="top to bottom",F=m?.2:.1,I=m?.3:.1,D,R;u&&y._splomGridDflt&&(D=y._splomGridDflt.xside,R=y._splomGridDflt.yside),g._domains={x:t("x",b,F,D,k),y:t("y",b,I,R,v,C)}}function t(o,y,d,p,c,m){var l=y(o+"gap",d),x=y("domain."+o);y(o+"side",p);for(var u=new Array(c),A=x[0],_=(x[1]-A)/(c-l),g=_*(1-l),b=0;b<c;b++){var v=A+_*b;u[m?c-1-b:b]=[v,v+g]}return u}function h(o,y){var d=y.grid;if(!(!d||!d._domains)){var p=o.grid||{},c=y._subplots,m=d._hasSubplotGrid,l=d.rows,x=d.columns,u=d.pattern==="independent",A,_,g,b,v,k,S,E=d._axisMap={};if(m){var C=p.subplots||[];k=d.subplots=new Array(l);var F=1;for(A=0;A<l;A++){var I=k[A]=new Array(x),D=C[A]||[];for(_=0;_<x;_++)if(u?(v=F===1?"xy":"x"+F+"y"+F,F++):v=D[_],I[_]="",c.cartesian.indexOf(v)!==-1){if(S=v.indexOf("y"),g=v.slice(0,S),b=v.slice(S),E[g]!==void 0&&E[g]!==_||E[b]!==void 0&&E[b]!==A)continue;I[_]=v,E[g]=_,E[b]=A}}}else{var R=n(y,p,"x"),O=n(y,p,"y");d.xaxes=s(R,c.xaxis,x,E,"x"),d.yaxes=s(O,c.yaxis,l,E,"y")}var z=d._anchors={},B=d.roworder==="top to bottom";for(var G in E){var Q=G.charAt(0),X=d[Q+"side"],j,re,ue;if(X.length<8)z[G]="free";else if(Q==="x"){if(X.charAt(0)==="t"===B?(j=0,re=1,ue=l):(j=l-1,re=-1,ue=-1),m){var K=E[G];for(A=j;A!==ue;A+=re)if(v=k[A][K],!!v&&(S=v.indexOf("y"),v.slice(0,S)===G)){z[G]=v.slice(S);break}}else for(A=j;A!==ue;A+=re)if(b=d.yaxes[A],c.cartesian.indexOf(G+b)!==-1){z[G]=b;break}}else if(X.charAt(0)==="l"?(j=0,re=1,ue=x):(j=x-1,re=-1,ue=-1),m){var te=E[G];for(A=j;A!==ue;A+=re)if(v=k[te][A],!!v&&(S=v.indexOf("y"),v.slice(S)===G)){z[G]=v.slice(0,S);break}}else for(A=j;A!==ue;A+=re)if(g=d.xaxes[A],c.cartesian.indexOf(g+G)!==-1){z[G]=g;break}}}}function s(o,y,d,p,c){var m=new Array(d),l;function x(u,A){y.indexOf(A)!==-1&&p[A]===void 0?(m[u]=A,p[A]=u):m[u]=""}if(Array.isArray(o))for(l=0;l<d;l++)x(l,o[l]);else for(x(0,c),l=1;l<d;l++)x(l,c+(l+1));return m}U.exports={moduleType:"component",name:"grid",schema:{layout:{grid:a}},layoutAttributes:a,sizeDefaults:r,contentDefaults:h}},{"../../lib":515,"../../lib/regex":532,"../../plot_api/plot_template":555,"../../plots/cartesian/constants":573,"../../plots/domain":593}],412:[function(i,U,V){var w=i("../../plots/cartesian/constants"),f=i("../../plot_api/plot_template").templatedArray;i("../../constants/axis_placeable_objects"),U.exports=f("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",w.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",w.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":484,"../../plot_api/plot_template":555,"../../plots/cartesian/constants":573}],413:[function(i,U,V){var w=i("fast-isnumeric"),f=i("../../lib/to_log_range");U.exports=function(T,e,a,n){e=e||{};var r=a==="log"&&e.type==="linear",t=a==="linear"&&e.type==="log";if(!!(r||t)){for(var h=T._fullLayout.images,s=e._id.charAt(0),o,y,d=0;d<h.length;d++)if(o=h[d],y="images["+d+"].",o[s+"ref"]===e._id){var p=o[s],c=o["size"+s],m=null,l=null;if(r){m=f(p,e.range);var x=c/Math.pow(10,m)/2;l=2*Math.log(x+Math.sqrt(1+x*x))/Math.LN10}else m=Math.pow(10,p),l=m*(Math.pow(10,c/2)-Math.pow(10,-c/2));w(m)?w(l)||(l=null):(m=null,l=null),n(y+s,m),n(y+"size"+s,l)}}}},{"../../lib/to_log_range":543,"fast-isnumeric":190}],414:[function(i,U,V){var w=i("../../lib"),f=i("../../plots/cartesian/axes"),M=i("../../plots/array_container_defaults"),T=i("./attributes"),e="images";U.exports=function(r,t){var h={name:e,handleItemDefaults:a};M(r,t,h)};function a(n,r,t){function h(x,u){return w.coerce(n,r,T,x,u)}var s=h("source"),o=h("visible",!!s);if(!o)return r;h("layer"),h("xanchor"),h("yanchor"),h("sizex"),h("sizey"),h("sizing"),h("opacity");for(var y={_fullLayout:t},d=["x","y"],p=0;p<2;p++){var c=d[p],m=f.coerceRef(n,r,y,c,"paper",void 0);if(m!=="paper"){var l=f.getFromId(y,m);l._imgIndices.push(r._index)}f.coercePosition(r,y,h,m,c,0)}return r}},{"../../lib":515,"../../plots/array_container_defaults":561,"../../plots/cartesian/axes":566,"./attributes":412}],415:[function(i,U,V){var w=i("@plotly/d3"),f=i("../drawing"),M=i("../../plots/cartesian/axes"),T=i("../../plots/cartesian/axis_ids"),e=i("../../constants/xmlns_namespaces");U.exports=function(n){var r=n._fullLayout,t=[],h={},s=[],o,y;for(y=0;y<r.images.length;y++){var d=r.images[y];if(d.visible)if(d.layer==="below"&&d.xref!=="paper"&&d.yref!=="paper"){o=T.ref2id(d.xref)+T.ref2id(d.yref);var p=r._plots[o];if(!p){s.push(d);continue}p.mainplot&&(o=p.mainplot.id),h[o]||(h[o]=[]),h[o].push(d)}else d.layer==="above"?t.push(d):s.push(d)}var c={x:{left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-1/2},right:{sizing:"xMax",offset:-1}},y:{top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-1/2},bottom:{sizing:"YMax",offset:-1}}};function m(b){var v=w.select(this);if(this._imgSrc!==b.source)if(v.attr("xmlns",e.svg),b.source&&b.source.slice(0,5)==="data:")v.attr("xlink:href",b.source),this._imgSrc=b.source;else{var k=new Promise(function(S){var E=new Image;this.img=E,E.setAttribute("crossOrigin","anonymous"),E.onerror=C,E.onload=function(){var F=document.createElement("canvas");F.width=this.width,F.height=this.height;var I=F.getContext("2d",{willReadFrequently:!0});I.drawImage(this,0,0);var D=F.toDataURL("image/png");v.attr("xlink:href",D),S()},v.on("error",C),E.src=b.source,this._imgSrc=b.source;function C(){v.remove(),S()}}.bind(this));n._promises.push(k)}}function l(b){var v=w.select(this),k=M.getFromId(n,b.xref),S=M.getFromId(n,b.yref),E=M.getRefType(b.xref)==="domain",C=M.getRefType(b.yref)==="domain",F=r._size,I,D;k!==void 0?I=typeof b.xref=="string"&&E?k._length*b.sizex:Math.abs(k.l2p(b.sizex)-k.l2p(0)):I=b.sizex*F.w,S!==void 0?D=typeof b.yref=="string"&&C?S._length*b.sizey:Math.abs(S.l2p(b.sizey)-S.l2p(0)):D=b.sizey*F.h;var R=I*c.x[b.xanchor].offset,O=D*c.y[b.yanchor].offset,z=c.x[b.xanchor].sizing+c.y[b.yanchor].sizing,B,G;switch(k!==void 0?B=typeof b.xref=="string"&&E?k._length*b.x+k._offset:k.r2p(b.x)+k._offset:B=b.x*F.w+F.l,B+=R,S!==void 0?G=typeof b.yref=="string"&&C?S._length*(1-b.y)+S._offset:S.r2p(b.y)+S._offset:G=F.h-b.y*F.h+F.t,G+=O,b.sizing){case"fill":z+=" slice";break;case"stretch":z="none";break}v.attr({x:B,y:G,width:I,height:D,preserveAspectRatio:z,opacity:b.opacity});var Q=k&&M.getRefType(b.xref)!=="domain"?k._id:"",X=S&&M.getRefType(b.yref)!=="domain"?S._id:"",j=Q+X;f.setClipUrl(v,j?"clip"+r._uid+j:null,n)}var x=r._imageLowerLayer.selectAll("image").data(s),u=r._imageUpperLayer.selectAll("image").data(t);x.enter().append("image"),u.enter().append("image"),x.exit().remove(),u.exit().remove(),x.each(function(b){m.bind(this)(b),l.bind(this)(b)}),u.each(function(b){m.bind(this)(b),l.bind(this)(b)});var A=Object.keys(r._plots);for(y=0;y<A.length;y++){o=A[y];var _=r._plots[o];if(!!_.imagelayer){var g=_.imagelayer.selectAll("image").data(h[o]||[]);g.enter().append("image"),g.exit().remove(),g.each(function(b){m.bind(this)(b),l.bind(this)(b)})}}}},{"../../constants/xmlns_namespaces":492,"../../plots/cartesian/axes":566,"../../plots/cartesian/axis_ids":570,"../drawing":389,"@plotly/d3":58}],416:[function(i,U,V){U.exports={moduleType:"component",name:"images",layoutAttributes:i("./attributes"),supplyLayoutDefaults:i("./defaults"),includeBasePlot:i("../../plots/cartesian/include_components")("images"),draw:i("./draw"),convertCoords:i("./convert_coords")}},{"../../plots/cartesian/include_components":577,"./attributes":412,"./convert_coords":413,"./defaults":414,"./draw":415}],417:[function(i,U,V){var w=i("../../plots/font_attributes"),f=i("../color/attributes");U.exports={bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:f.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:w({editType:"legend"}),grouptitlefont:w({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},entrywidth:{valType:"number",min:0,editType:"legend"},entrywidthmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels",editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend"},x:{valType:"number",min:-2,max:3,editType:"legend"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",min:-2,max:3,editType:"legend"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:w({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left"],editType:"legend"},editType:"legend"},editType:"legend"}},{"../../plots/font_attributes":594,"../color/attributes":366}],418:[function(i,U,V){U.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},{}],419:[function(i,U,V){var w=i("../../registry"),f=i("../../lib"),M=i("../../plot_api/plot_template"),T=i("../../plots/attributes"),e=i("./attributes"),a=i("../../plots/layout_attributes"),n=i("./helpers");U.exports=function(t,h,s){var o=t.legend||{},y=M.newContainer(h,"legend");function d(D,R){return f.coerce(o,y,e,D,R)}for(var p,c=function(D,R){var O=p._input,z=p;return f.coerce(O,z,T,D,R)},m=h.font||{},l=f.coerceFont(d,"grouptitlefont",f.extendFlat({},m,{size:Math.round(m.size*1.1)})),x=0,u=!1,A="normal",_=0;_<s.length;_++)p=s[_],p.visible&&((p.showlegend||p._dfltShowLegend&&!(p._module&&p._module.attributes&&p._module.attributes.showlegend&&p._module.attributes.showlegend.dflt===!1))&&(x++,p.showlegend&&(u=!0,(w.traceIs(p,"pie-like")||p._input.showlegend===!0)&&x++),f.coerceFont(c,"legendgrouptitle.font",l)),(w.traceIs(p,"bar")&&h.barmode==="stack"||["tonextx","tonexty"].indexOf(p.fill)!==-1)&&(A=n.isGrouped({traceorder:A})?"grouped+reversed":"reversed"),p.legendgroup!==void 0&&p.legendgroup!==""&&(A=n.isReversed({traceorder:A})?"reversed+grouped":"grouped"));var g=f.coerce(t,h,a,"showlegend",u&&x>1);if(g===!1&&(h.legend=void 0),!(g===!1&&!o.uirevision)&&(d("uirevision",h.uirevision),g!==!1)){d("bgcolor",h.paper_bgcolor),d("bordercolor"),d("borderwidth");var b=f.coerceFont(d,"font",h.font),v=d("orientation"),k=v==="h",S,E,C;k?(S=0,w.getComponentMethod("rangeslider","isVisible")(t.xaxis)?(E=1.1,C="bottom"):(E=-.1,C="top")):(S=1.02,E=1,C="auto"),d("traceorder",A),n.isGrouped(h.legend)&&d("tracegroupgap"),d("entrywidth"),d("entrywidthmode"),d("itemsizing"),d("itemwidth"),d("itemclick"),d("itemdoubleclick"),d("groupclick"),d("x",S),d("xanchor"),d("y",E),d("yanchor",C),d("valign"),f.noneOrAll(o,y,["x","y"]);var F=d("title.text");if(F){d("title.side",k?"left":"top");var I=f.extendFlat({},b,{size:f.bigFont(b.size)});f.coerceFont(d,"title.font",I)}}}},{"../../lib":515,"../../plot_api/plot_template":555,"../../plots/attributes":562,"../../plots/layout_attributes":619,"../../registry":647,"./attributes":417,"./helpers":423}],420:[function(i,U,V){var w=i("@plotly/d3"),f=i("../../lib"),M=i("../../plots/plots"),T=i("../../registry"),e=i("../../lib/events"),a=i("../dragelement"),n=i("../drawing"),r=i("../color"),t=i("../../lib/svg_text_utils"),h=i("./handle_click"),s=i("./constants"),o=i("../../constants/alignment"),y=o.LINE_SPACING,d=o.FROM_TL,p=o.FROM_BR,c=i("./get_legend_data"),m=i("./style"),l=i("./helpers"),x=1;U.exports=function(O,z){return z||(z=O._fullLayout.legend||{}),u(O,z)};function u(R,O){var z=R._fullLayout,B="legend"+z._uid,G,Q=O._inHover;if(Q?(G=O.layer,B+="-hover"):G=z._infolayer,!!G){R._legendMouseDownTime||(R._legendMouseDownTime=0);var X;if(Q){if(!O.entries)return;X=c(O.entries,O)}else{if(!R.calcdata)return;X=z.showlegend&&c(R.calcdata,O)}var j=z.hiddenlabels||[];if(!Q&&(!z.showlegend||!X.length))return G.selectAll(".legend").remove(),z._topdefs.select("#"+B).remove(),M.autoMargin(R,"legend");var re=f.ensureSingle(G,"g","legend",function(q){Q||q.attr("pointer-events","all")}),ue=f.ensureSingleById(z._topdefs,"clipPath",B,function(q){q.append("rect")}),K=f.ensureSingle(re,"rect","bg",function(q){q.attr("shape-rendering","crispEdges")});K.call(r.stroke,O.bordercolor).call(r.fill,O.bgcolor).style("stroke-width",O.borderwidth+"px");var te=f.ensureSingle(re,"g","scrollbox"),Y=O.title;if(O._titleWidth=0,O._titleHeight=0,Y.text){var H=f.ensureSingle(te,"text","legendtitletext");H.attr("text-anchor","start").call(n.font,Y.font).text(Y.text),k(H,te,R,O,x)}else te.selectAll(".legendtitletext").remove();var ee=f.ensureSingle(re,"rect","scrollbar",function(q){q.attr(s.scrollBarEnterAttrs).call(r.fill,s.scrollBarColor)}),ne=te.selectAll("g.groups").data(X);ne.enter().append("g").attr("class","groups"),ne.exit().remove();var Z=ne.selectAll("g.traces").data(f.identity);Z.enter().append("g").attr("class","traces"),Z.exit().remove(),Z.style("opacity",function(q){var ie=q[0].trace;return T.traceIs(ie,"pie-like")?j.indexOf(q[0].label)!==-1?.5:1:ie.visible==="legendonly"?.5:1}).each(function(){w.select(this).call(g,R,O)}).call(m,R,O).each(function(){Q||w.select(this).call(v,R)}),f.syncOrAsync([M.previousPromises,function(){return C(R,ne,Z,O)},function(){var q=z._size,ie=O.borderwidth;if(!Q){var se=F(R);if(se)return;var ae=q.l+q.w*O.x-d[I(O)]*O._width,oe=q.t+q.h*(1-O.y)-d[D(O)]*O._effHeight;if(z.margin.autoexpand){var be=ae,ce=oe;ae=f.constrain(ae,0,z.width-O._width),oe=f.constrain(oe,0,z.height-O._effHeight),ae!==be&&f.log("Constrain legend.x to make legend fit inside graph"),oe!==ce&&f.log("Constrain legend.y to make legend fit inside graph")}n.setTranslate(re,ae,oe)}if(ee.on(".drag",null),re.on("wheel",null),Q||O._height<=O._maxHeight||R._context.staticPlot){var de=O._effHeight;Q&&(de=O._height),K.attr({width:O._width-ie,height:de-ie,x:ie/2,y:ie/2}),n.setTranslate(te,0,0),ue.select("rect").attr({width:O._width-2*ie,height:de-2*ie,x:ie,y:ie}),n.setClipUrl(te,B,R),n.setRect(ee,0,0,0,0),delete O._scrollY}else{var ye=Math.max(s.scrollBarMinHeight,O._effHeight*O._effHeight/O._height),ge=O._effHeight-ye-2*s.scrollBarMargin,me=O._height-O._effHeight,Se=ge/me,Le=Math.min(O._scrollY||0,me);K.attr({width:O._width-2*ie+s.scrollBarWidth+s.scrollBarMargin,height:O._effHeight-ie,x:ie/2,y:ie/2}),ue.select("rect").attr({width:O._width-2*ie+s.scrollBarWidth+s.scrollBarMargin,height:O._effHeight-2*ie,x:ie,y:ie+Le}),n.setClipUrl(te,B,R),je(Le,ye,Se),re.on("wheel",function(){Le=f.constrain(O._scrollY+w.event.deltaY/ge*me,0,me),je(Le,ye,Se),Le!==0&&Le!==me&&w.event.preventDefault()});var Oe,we,Ce,Ke=function(Pt,$t,Ut){var Lt=(Ut-$t)/Se+Pt;return f.constrain(Lt,0,me)},Ye=function(Pt,$t,Ut){var Lt=($t-Ut)/Se+Pt;return f.constrain(Lt,0,me)},Fe=w.behavior.drag().on("dragstart",function(){var Pt=w.event.sourceEvent;Pt.type==="touchstart"?Oe=Pt.changedTouches[0].clientY:Oe=Pt.clientY,Ce=Le}).on("drag",function(){var Pt=w.event.sourceEvent;Pt.buttons===2||Pt.ctrlKey||(Pt.type==="touchmove"?we=Pt.changedTouches[0].clientY:we=Pt.clientY,Le=Ke(Ce,Oe,we),je(Le,ye,Se))});ee.call(Fe);var Re=w.behavior.drag().on("dragstart",function(){var Pt=w.event.sourceEvent;Pt.type==="touchstart"&&(Oe=Pt.changedTouches[0].clientY,Ce=Le)}).on("drag",function(){var Pt=w.event.sourceEvent;Pt.type==="touchmove"&&(we=Pt.changedTouches[0].clientY,Le=Ye(Ce,Oe,we),je(Le,ye,Se))});te.call(Re)}function je(Pt,$t,Ut){O._scrollY=R._fullLayout.legend._scrollY=Pt,n.setTranslate(te,0,-Pt),n.setRect(ee,O._width,s.scrollBarMargin+Pt*Ut,s.scrollBarWidth,$t),ue.select("rect").attr("y",ie+Pt)}if(R._context.edits.legendPosition){var xt,Nt,tr,Ht;re.classed("cursor-move",!0),a.init({element:re.node(),gd:R,prepFn:function(){var Pt=n.getTranslate(re);tr=Pt.x,Ht=Pt.y},moveFn:function(Pt,$t){var Ut=tr+Pt,Lt=Ht+$t;n.setTranslate(re,Ut,Lt),xt=a.align(Ut,0,q.l,q.l+q.w,O.xanchor),Nt=a.align(Lt,0,q.t+q.h,q.t,O.yanchor)},doneFn:function(){xt!==void 0&&Nt!==void 0&&T.call("_guiRelayout",R,{"legend.x":xt,"legend.y":Nt})},clickFn:function(Pt,$t){var Ut=G.selectAll("g.traces").filter(function(){var Lt=this.getBoundingClientRect();return $t.clientX>=Lt.left&&$t.clientX<=Lt.right&&$t.clientY>=Lt.top&&$t.clientY<=Lt.bottom});Ut.size()>0&&_(R,re,Ut,Pt,$t)}})}}],R)}}function A(R,O,z){var B=R[0],G=B.width,Q=O.entrywidthmode,X=B.trace.legendwidth||O.entrywidth;return Q==="fraction"?O._maxWidth*X:z+(X||G)}function _(R,O,z,B,G){var Q=z.data()[0][0].trace,X={event:G,node:z.node(),curveNumber:Q.index,expandedIndex:Q._expandedIndex,data:R.data,layout:R.layout,frames:R._transitionData._frames,config:R._context,fullData:R._fullData,fullLayout:R._fullLayout};Q._group&&(X.group=Q._group),T.traceIs(Q,"pie-like")&&(X.label=z.datum()[0].label);var j=e.triggerHandler(R,"plotly_legendclick",X);if(j!==!1){if(B===1)O._clickTimeout=setTimeout(function(){!R._fullLayout||h(z,R,B)},R._context.doubleClickDelay);else if(B===2){O._clickTimeout&&clearTimeout(O._clickTimeout),R._legendMouseDownTime=0;var re=e.triggerHandler(R,"plotly_legenddoubleclick",X);re!==!1&&h(z,R,B)}}}function g(R,O,z){var B=R.data()[0][0],G=B.trace,Q=T.traceIs(G,"pie-like"),X=!z._inHover&&O._context.edits.legendText&&!Q,j=z._maxNameLength,re,ue;B.groupTitle?(re=B.groupTitle.text,ue=B.groupTitle.font):(ue=z.font,z.entries?re=B.text:(re=Q?B.label:G.name,G._meta&&(re=f.templateString(re,G._meta))));var K=f.ensureSingle(R,"text","legendtext");K.attr("text-anchor","start").call(n.font,ue).text(X?b(re,j):re);var te=z.itemwidth+s.itemGap*2;t.positionText(K,te,0),X?K.call(t.makeEditable,{gd:O,text:re}).call(k,R,O,z).on("edit",function(Y){this.text(b(Y,j)).call(k,R,O,z);var H=B.trace._fullInput||{},ee={};if(T.hasTransform(H,"groupby")){var ne=T.getTransformIndices(H,"groupby"),Z=ne[ne.length-1],q=f.keyedContainer(H,"transforms["+Z+"].styles","target","value.name");q.set(B.trace._group,Y),ee=q.constructUpdate()}else ee.name=Y;return T.call("_guiRestyle",O,ee,G.index)}):k(K,R,O,z)}function b(R,O){var z=Math.max(4,O);if(R&&R.trim().length>=z/2)return R;R=R||"";for(var B=z-R.length;B>0;B--)R+=" ";return R}function v(R,O){var z=O._context.doubleClickDelay,B,G=1,Q=f.ensureSingle(R,"rect","legendtoggle",function(X){O._context.staticPlot||X.style("cursor","pointer").attr("pointer-events","all"),X.call(r.fill,"rgba(0,0,0,0)")});O._context.staticPlot||(Q.on("mousedown",function(){B=new Date().getTime(),B-O._legendMouseDownTime<z?G+=1:(G=1,O._legendMouseDownTime=B)}),Q.on("mouseup",function(){if(!(O._dragged||O._editing)){var X=O._fullLayout.legend;new Date().getTime()-O._legendMouseDownTime>z&&(G=Math.max(G-1,1)),_(O,X,R,G,w.event)}}))}function k(R,O,z,B,G){B._inHover&&R.attr("data-notex",!0),t.convertToTspans(R,z,function(){S(O,z,B,G)})}function S(R,O,z,B){var G=R.data()[0][0];if(!z._inHover&&G&&!G.trace.showlegend){R.remove();return}var Q=R.select("g[class*=math-group]"),X=Q.node();z||(z=O._fullLayout.legend);var j=z.borderwidth,re;B===x?re=z.title.font:G.groupTitle?re=G.groupTitle.font:re=z.font;var ue=re.size*y,K,te;if(X){var Y=n.bBox(X);K=Y.height,te=Y.width,B===x?n.setTranslate(Q,j,j+K*.75):n.setTranslate(Q,0,K*.25)}else{var H=R.select(B===x?".legendtitletext":".legendtext"),ee=t.lineCount(H),ne=H.node();if(K=ue*ee,te=ne?n.bBox(ne).width:0,B===x)z.title.side==="left"&&(te+=s.itemGap*2),t.positionText(H,j+s.titlePad,j+ue);else{var Z=s.itemGap*2+z.itemwidth;G.groupTitle&&(Z=s.itemGap,te-=z.itemwidth),t.positionText(H,Z,-ue*((ee-1)/2-.3))}}B===x?(z._titleWidth=te,z._titleHeight=K):(G.lineHeight=ue,G.height=Math.max(K,16)+3,G.width=te)}function E(R){var O=0,z=0,B=R.title.side;return B&&(B.indexOf("left")!==-1&&(O=R._titleWidth),B.indexOf("top")!==-1&&(z=R._titleHeight)),[O,z]}function C(R,O,z,B){var G=R._fullLayout;B||(B=G.legend);var Q=G._size,X=l.isVertical(B),j=l.isGrouped(B),re=B.entrywidthmode==="fraction",ue=B.borderwidth,K=2*ue,te=s.itemGap,Y=B.itemwidth+te*2,H=2*(ue+te),ee=D(B),ne=B.y<0||B.y===0&&ee==="top",Z=B.y>1||B.y===1&&ee==="bottom",q=B.tracegroupgap,ie={};B._maxHeight=Math.max(ne||Z?G.height/2:Q.h,30);var se=0;B._width=0,B._height=0;var ae=E(B);if(X)z.each(function(tr){var Ht=tr[0].height;n.setTranslate(this,ue+ae[0],ue+ae[1]+B._height+Ht/2+te),B._height+=Ht,B._width=Math.max(B._width,tr[0].width)}),se=Y+B._width,B._width+=te+Y+K,B._height+=H,j&&(O.each(function(tr,Ht){n.setTranslate(this,0,Ht*B.tracegroupgap)}),B._height+=(B._lgroupsLength-1)*B.tracegroupgap);else{var oe=I(B),be=B.x<0||B.x===0&&oe==="right",ce=B.x>1||B.x===1&&oe==="left",de=Z||ne,ye=G.width/2;B._maxWidth=Math.max(be?de&&oe==="left"?Q.l+Q.w:ye:ce?de&&oe==="right"?Q.r+Q.w:ye:Q.w,2*Y);var ge=0,me=0;z.each(function(tr){var Ht=A(tr,B,Y);ge=Math.max(ge,Ht),me+=Ht}),se=null;var Se=0;if(j){var Le=0,Oe=0,we=0;O.each(function(){var tr=0,Ht=0;w.select(this).selectAll("g.traces").each(function($t){var Ut=A($t,B,Y),Lt=$t[0].height;n.setTranslate(this,ae[0],ae[1]+ue+te+Lt/2+Ht),Ht+=Lt,tr=Math.max(tr,Ut),ie[$t[0].trace.legendgroup]=tr});var Pt=tr+te;Oe>0&&Pt+ue+Oe>B._maxWidth?(Se=Math.max(Se,Oe),Oe=0,we+=Le+q,Le=Ht):Le=Math.max(Le,Ht),n.setTranslate(this,Oe,we),Oe+=Pt}),B._width=Math.max(Se,Oe)+ue,B._height=we+Le+H}else{var Ce=z.size(),Ke=me+K+(Ce-1)*te<B._maxWidth,Ye=0,Fe=0,Re=0,je=0;z.each(function(tr){var Ht=tr[0].height,Pt=A(tr,B,Y),$t=Ke?Pt:ge;re||($t+=te),$t+ue+Fe-te>=B._maxWidth&&(Se=Math.max(Se,je),Fe=0,Re+=Ye,B._height+=Ye,Ye=0),n.setTranslate(this,ae[0]+ue+Fe,ae[1]+ue+Re+Ht/2+te),je=Fe+Pt+te,Fe+=$t,Ye=Math.max(Ye,Ht)}),Ke?(B._width=Fe+K,B._height=Ye+H):(B._width=Math.max(Se,je)+K,B._height+=Ye+H)}}B._width=Math.ceil(Math.max(B._width+ae[0],B._titleWidth+2*(ue+s.titlePad))),B._height=Math.ceil(Math.max(B._height+ae[1],B._titleHeight+2*(ue+s.itemGap))),B._effHeight=Math.min(B._height,B._maxHeight);var xt=R._context.edits,Nt=xt.legendText||xt.legendPosition;z.each(function(tr){var Ht=w.select(this).select(".legendtoggle"),Pt=tr[0].height,$t=tr[0].trace.legendgroup,Ut=A(tr,B,Y);j&&$t!==""&&(Ut=ie[$t]);var Lt=Nt?Y:se||Ut;!X&&!re&&(Lt+=te/2),n.setRect(Ht,0,-Pt/2,Lt,Pt)})}function F(R){var O=R._fullLayout,z=O.legend,B=I(z),G=D(z);return M.autoMargin(R,"legend",{x:z.x,y:z.y,l:z._width*d[B],r:z._width*p[B],b:z._effHeight*p[G],t:z._effHeight*d[G]})}function I(R){return f.isRightAnchor(R)?"right":f.isCenterAnchor(R)?"center":"left"}function D(R){return f.isBottomAnchor(R)?"bottom":f.isMiddleAnchor(R)?"middle":"top"}},{"../../constants/alignment":483,"../../lib":515,"../../lib/events":504,"../../lib/svg_text_utils":541,"../../plots/plots":628,"../../registry":647,"../color":367,"../dragelement":386,"../drawing":389,"./constants":418,"./get_legend_data":421,"./handle_click":422,"./helpers":423,"./style":425,"@plotly/d3":58}],421:[function(i,U,V){var w=i("../../registry"),f=i("./helpers");U.exports=function(T,e){var a=e._inHover,n=f.isGrouped(e),r=f.isReversed(e),t={},h=[],s=!1,o={},y=0,d=0,p,c;function m(O,z){if(O===""||!f.isGrouped(e)){var B="~~i"+y;h.push(B),t[B]=[z],y++}else h.indexOf(O)===-1?(h.push(O),s=!0,t[O]=[z]):t[O].push(z)}for(p=0;p<T.length;p++){var l=T[p],x=l[0],u=x.trace,A=u.legendgroup;if(!(!a&&(!u.visible||!u.showlegend)))if(w.traceIs(u,"pie-like"))for(o[A]||(o[A]={}),c=0;c<l.length;c++){var _=l[c].label;o[A][_]||(m(A,{label:_,color:l[c].color,i:l[c].i,trace:u,pts:l[c].pts}),o[A][_]=!0,d=Math.max(d,(_||"").length))}else m(A,x),d=Math.max(d,(u.name||"").length)}if(!h.length)return[];var g=!s||!n,b=[];for(p=0;p<h.length;p++){var v=t[h[p]];g?b.push(v[0]):b.push(v)}for(g&&(b=[b]),p=0;p<b.length;p++){var k=1/0;for(c=0;c<b[p].length;c++){var S=b[p][c].trace.legendrank;k>S&&(k=S)}b[p][0]._groupMinRank=k,b[p][0]._preGroupSort=p}var E=function(O,z){return O[0]._groupMinRank-z[0]._groupMinRank||O[0]._preGroupSort-z[0]._preGroupSort},C=function(O,z){return O.trace.legendrank-z.trace.legendrank||O._preSort-z._preSort};for(b.forEach(function(O,z){O[0]._preGroupSort=z}),b.sort(E),p=0;p<b.length;p++){b[p].forEach(function(O,z){O._preSort=z}),b[p].sort(C);var F=b[p][0].trace,I=null;for(c=0;c<b[p].length;c++){var D=b[p][c].trace.legendgrouptitle;if(D&&D.text){I=D,a&&(D.font=e._groupTitleFont);break}}if(r&&b[p].reverse(),I){var R=!1;for(c=0;c<b[p].length;c++)if(w.traceIs(b[p][c].trace,"pie-like")){R=!0;break}b[p].unshift({i:-1,groupTitle:I,noClick:R,trace:{showlegend:F.showlegend,legendgroup:F.legendgroup,visible:e.groupclick==="toggleitem"?!0:F.visible}})}for(c=0;c<b[p].length;c++)b[p][c]=[b[p][c]]}return e._lgroupsLength=b.length,e._maxNameLength=d,b}},{"../../registry":647,"./helpers":423}],422:[function(i,U,V){var w=i("../../lib"),f=i("../../registry"),M=!0;U.exports=function(e,a,n){var r=a._fullLayout;if(a._dragged||a._editing)return;var t=r.legend.itemclick,h=r.legend.itemdoubleclick,s=r.legend.groupclick;n===1&&t==="toggle"&&h==="toggleothers"&&M&&a.data&&a._context.showTips&&w.notifier(w._(a,"Double-click on legend to isolate one trace"),"long"),M=!1;var o;if(n===1?o=t:n===2&&(o=h),!o)return;var y=s==="togglegroup",d=r.hiddenlabels?r.hiddenlabels.slice():[],p=e.data()[0][0];if(p.groupTitle&&p.noClick)return;var c=a._fullData,m=p.trace,l=m.legendgroup,x,u,A,_,g,b,v={},k=[],S=[],E=[];function C(te,Y,H){var ee=k.indexOf(te),ne=v[Y];return ne||(ne=v[Y]=[]),k.indexOf(te)===-1&&(k.push(te),ee=k.length-1),ne[ee]=H,ee}function F(te,Y){if(!(p.groupTitle&&!y)){var H=te._fullInput;if(f.hasTransform(H,"groupby")){var ee=S[H.index];if(!ee){var ne=f.getTransformIndices(H,"groupby"),Z=ne[ne.length-1];ee=w.keyedContainer(H,"transforms["+Z+"].styles","target","value.visible"),S[H.index]=ee}var q=ee.get(te._group);q===void 0&&(q=!0),q!==!1&&ee.set(te._group,Y),E[H.index]=C(H.index,"visible",H.visible!==!1)}else{var ie=H.visible===!1?!1:Y;C(H.index,"visible",ie)}}}if(f.traceIs(m,"pie-like")){var I=p.label,D=d.indexOf(I);o==="toggle"?D===-1?d.push(I):d.splice(D,1):o==="toggleothers"&&(d=[],a.calcdata[0].forEach(function(te){I!==te.label&&d.push(te.label)}),a._fullLayout.hiddenlabels&&a._fullLayout.hiddenlabels.length===d.length&&D===-1&&(d=[])),f.call("_guiRelayout",a,"hiddenlabels",d)}else{var R=l&&l.length,O=[],z;if(R)for(x=0;x<c.length;x++)z=c[x],!!z.visible&&z.legendgroup===l&&O.push(x);if(o==="toggle"){var B;switch(m.visible){case!0:B="legendonly";break;case!1:B=!1;break;case"legendonly":B=!0;break}if(R)if(y)for(x=0;x<c.length;x++)c[x].visible!==!1&&c[x].legendgroup===l&&F(c[x],B);else F(m,B);else F(m,B)}else if(o==="toggleothers"){var G,Q,X,j,re=!0;for(x=0;x<c.length;x++)if(G=c[x]===m,X=c[x].showlegend!==!0,!(G||X)&&(Q=R&&c[x].legendgroup===l,!Q&&c[x].visible===!0&&!f.traceIs(c[x],"notLegendIsolatable"))){re=!1;break}for(x=0;x<c.length;x++)if(c[x].visible!==!1&&!f.traceIs(c[x],"notLegendIsolatable"))switch(m.visible){case"legendonly":F(c[x],!0);break;case!0:j=re?!0:"legendonly",G=c[x]===m,X=c[x].showlegend!==!0&&!c[x].legendgroup,Q=G||R&&c[x].legendgroup===l,F(c[x],Q||X?!0:j);break}}for(x=0;x<S.length;x++)if(A=S[x],!!A){var ue=A.constructUpdate(),K=Object.keys(ue);for(u=0;u<K.length;u++)_=K[u],b=v[_]=v[_]||[],b[E[x]]=ue[_]}for(g=Object.keys(v),x=0;x<g.length;x++)for(_=g[x],u=0;u<k.length;u++)v[_].hasOwnProperty(u)||(v[_][u]=void 0);f.call("_guiRestyle",a,v,k)}}},{"../../lib":515,"../../registry":647}],423:[function(i,U,V){V.isGrouped=function(f){return(f.traceorder||"").indexOf("grouped")!==-1},V.isVertical=function(f){return f.orientation!=="h"},V.isReversed=function(f){return(f.traceorder||"").indexOf("reversed")!==-1}},{}],424:[function(i,U,V){U.exports={moduleType:"component",name:"legend",layoutAttributes:i("./attributes"),supplyLayoutDefaults:i("./defaults"),draw:i("./draw"),style:i("./style")}},{"./attributes":417,"./defaults":419,"./draw":420,"./style":425}],425:[function(i,U,V){var w=i("@plotly/d3"),f=i("../../registry"),M=i("../../lib"),T=M.strTranslate,e=i("../drawing"),a=i("../color"),n=i("../colorscale/helpers").extractOpts,r=i("../../traces/scatter/subtypes"),t=i("../../traces/pie/style_one"),h=i("../../traces/pie/helpers").castOption,s=i("./constants"),o=12,y=5,d=2,p=10,c=5;U.exports=function(A,_,g){var b=_._fullLayout;g||(g=b.legend);var v=g.itemsizing==="constant",k=g.itemwidth,S=(k+s.itemGap*2)/2,E=T(S,0),C=function(K,te,Y,H){var ee;if(K+1)ee=K;else if(te&&te.width>0)ee=te.width;else return 0;return v?H:Math.min(ee,Y)};A.each(function(K){var te=w.select(this),Y=M.ensureSingle(te,"g","layers");Y.style("opacity",K[0].trace.opacity);var H=g.valign,ee=K[0].lineHeight,ne=K[0].height;if(H==="middle"||!ee||!ne)Y.attr("transform",null);else{var Z={top:1,bottom:-1}[H],q=Z*(.5*(ee-ne+3));Y.attr("transform",T(0,q))}var ie=Y.selectAll("g.legendfill").data([K]);ie.enter().append("g").classed("legendfill",!0);var se=Y.selectAll("g.legendlines").data([K]);se.enter().append("g").classed("legendlines",!0);var ae=Y.selectAll("g.legendsymbols").data([K]);ae.enter().append("g").classed("legendsymbols",!0),ae.selectAll("g.legendpoints").data([K]).enter().append("g").classed("legendpoints",!0)}).each(ue).each(D).each(O).each(R).each(B).each(j).each(X).each(F).each(I).each(G).each(Q);function F(K){var te=l(K),Y=te.showFill,H=te.showLine,ee=te.showGradientLine,ne=te.showGradientFill,Z=te.anyFill,q=te.anyLine,ie=K[0],se=ie.trace,ae,oe,be=n(se),ce=be.colorscale,de=be.reversescale,ye=function(Ce){if(Ce.size())if(Y)e.fillGroupStyle(Ce,_);else{var Ke="legendfill-"+se.uid;e.gradient(Ce,_,Ke,m(de),ce,"fill")}},ge=function(Ce){if(Ce.size()){var Ke="legendline-"+se.uid;e.lineGroupStyle(Ce),e.gradient(Ce,_,Ke,m(de),ce,"stroke")}},me=r.hasMarkers(se)||!Z?"M5,0":q?"M5,-2":"M5,-3",Se=w.select(this),Le=Se.select(".legendfill").selectAll("path").data(Y||ne?[K]:[]);if(Le.enter().append("path").classed("js-fill",!0),Le.exit().remove(),Le.attr("d",me+"h"+k+"v6h-"+k+"z").call(ye),H||ee){var Oe=C(void 0,se.line,p,y);oe=M.minExtend(se,{line:{width:Oe}}),ae=[M.minExtend(ie,{trace:oe})]}var we=Se.select(".legendlines").selectAll("path").data(H||ee?[ae]:[]);we.enter().append("path").classed("js-line",!0),we.exit().remove(),we.attr("d",me+(ee?"l"+k+",0.0001":"h"+k)).call(H?e.lineGroupStyle:ge)}function I(K){var te=l(K),Y=te.anyFill,H=te.anyLine,ee=te.showLine,ne=te.showMarker,Z=K[0],q=Z.trace,ie=!ne&&!H&&!Y&&r.hasText(q),se,ae;function oe(Le,Oe,we,Ce){var Ke=M.nestedProperty(q,Le).get(),Ye=M.isArrayOrTypedArray(Ke)&&Oe?Oe(Ke):Ke;if(v&&Ye&&Ce!==void 0&&(Ye=Ce),we){if(Ye<we[0])return we[0];if(Ye>we[1])return we[1]}return Ye}function be(Le){return Z._distinct&&Z.index&&Le[Z.index]?Le[Z.index]:Le[0]}if(ne||ie||ee){var ce={},de={};if(ne){ce.mc=oe("marker.color",be),ce.mx=oe("marker.symbol",be),ce.mo=oe("marker.opacity",M.mean,[.2,1]),ce.mlc=oe("marker.line.color",be),ce.mlw=oe("marker.line.width",M.mean,[0,5],d),de.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var ye=oe("marker.size",M.mean,[2,16],o);ce.ms=ye,de.marker.size=ye}ee&&(de.line={width:oe("line.width",be,[0,10],y)}),ie&&(ce.tx="Aa",ce.tp=oe("textposition",be),ce.ts=10,ce.tc=oe("textfont.color",be),ce.tf=oe("textfont.family",be)),se=[M.minExtend(Z,ce)],ae=M.minExtend(q,de),ae.selectedpoints=null,ae.texttemplate=null}var ge=w.select(this).select("g.legendpoints"),me=ge.selectAll("path.scatterpts").data(ne?se:[]);me.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",E),me.exit().remove(),me.call(e.pointStyle,ae,_),ne&&(se[0].mrc=3);var Se=ge.selectAll("g.pointtext").data(ie?se:[]);Se.enter().append("g").classed("pointtext",!0).append("text").attr("transform",E),Se.exit().remove(),Se.selectAll("text").call(e.textPointStyle,ae,_)}function D(K){var te=K[0].trace,Y=te.type==="waterfall";if(K[0]._distinct&&Y){var H=K[0].trace[K[0].dir].marker;return K[0].mc=H.color,K[0].mlw=H.line.width,K[0].mlc=H.line.color,z(K,this,"waterfall")}var ee=[];te.visible&&Y&&(ee=K[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var ne=w.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(ee);ne.enter().append("path").classed("legendwaterfall",!0).attr("transform",E).style("stroke-miterlimit",1),ne.exit().remove(),ne.each(function(Z){var q=w.select(this),ie=te[Z[0]].marker,se=C(void 0,ie.line,c,d);q.attr("d",Z[1]).style("stroke-width",se+"px").call(a.fill,ie.color),se&&q.call(a.stroke,ie.line.color)})}function R(K){z(K,this)}function O(K){z(K,this,"funnel")}function z(K,te,Y){var H=K[0].trace,ee=H.marker||{},ne=ee.line||{},Z=Y?H.visible&&H.type===Y:f.traceIs(H,"bar"),q=w.select(te).select("g.legendpoints").selectAll("path.legend"+Y).data(Z?[K]:[]);q.enter().append("path").classed("legend"+Y,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",E),q.exit().remove(),q.each(function(ie){var se=w.select(this),ae=ie[0],oe=C(ae.mlw,ee.line,c,d);se.style("stroke-width",oe+"px");var be=ae.mcc;if(!g._inHover&&"mc"in ae){var ce=n(ee),de=ce.mid;de===void 0&&(de=(ce.max+ce.min)/2),be=e.tryColorscale(ee,"")(de)}var ye=be||ae.mc||ee.color,ge=ee.pattern,me=ge&&e.getPatternAttr(ge.shape,0,"");if(me){var Se=e.getPatternAttr(ge.bgcolor,0,null),Le=e.getPatternAttr(ge.fgcolor,0,null),Oe=ge.fgopacity,we=x(ge.size,8,10),Ce=x(ge.solidity,.5,1),Ke="legend-"+H.uid;se.call(e.pattern,"legend",_,Ke,me,we,Ce,be,ge.fillmode,Se,Le,Oe)}else se.call(a.fill,ye);oe&&a.stroke(se,ae.mlc||ne.color)})}function B(K){var te=K[0].trace,Y=w.select(this).select("g.legendpoints").selectAll("path.legendbox").data(te.visible&&f.traceIs(te,"box-violin")?[K]:[]);Y.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",E),Y.exit().remove(),Y.each(function(){var H=w.select(this);if((te.boxpoints==="all"||te.points==="all")&&a.opacity(te.fillcolor)===0&&a.opacity((te.line||{}).color)===0){var ee=M.minExtend(te,{marker:{size:v?o:M.constrain(te.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});Y.call(e.pointStyle,ee,_)}else{var ne=C(void 0,te.line,c,d);H.style("stroke-width",ne+"px").call(a.fill,te.fillcolor),ne&&a.stroke(H,te.line.color)}})}function G(K){var te=K[0].trace,Y=w.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(te.visible&&te.type==="candlestick"?[K,K]:[]);Y.enter().append("path").classed("legendcandle",!0).attr("d",function(H,ee){return ee?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",E).style("stroke-miterlimit",1),Y.exit().remove(),Y.each(function(H,ee){var ne=w.select(this),Z=te[ee?"increasing":"decreasing"],q=C(void 0,Z.line,c,d);ne.style("stroke-width",q+"px").call(a.fill,Z.fillcolor),q&&a.stroke(ne,Z.line.color)})}function Q(K){var te=K[0].trace,Y=w.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(te.visible&&te.type==="ohlc"?[K,K]:[]);Y.enter().append("path").classed("legendohlc",!0).attr("d",function(H,ee){return ee?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",E).style("stroke-miterlimit",1),Y.exit().remove(),Y.each(function(H,ee){var ne=w.select(this),Z=te[ee?"increasing":"decreasing"],q=C(void 0,Z.line,c,d);ne.style("fill","none").call(e.dashLine,Z.line.dash,q),q&&a.stroke(ne,Z.line.color)})}function X(K){re(K,this,"pie")}function j(K){re(K,this,"funnelarea")}function re(K,te,Y){var H=K[0],ee=H.trace,ne=Y?ee.visible&&ee.type===Y:f.traceIs(ee,Y),Z=w.select(te).select("g.legendpoints").selectAll("path.legend"+Y).data(ne?[K]:[]);if(Z.enter().append("path").classed("legend"+Y,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",E),Z.exit().remove(),Z.size()){var q=(ee.marker||{}).line,ie=C(h(q.width,H.pts),q,c,d),se=M.minExtend(ee,{marker:{line:{width:ie}}});se.marker.line.color=q.color;var ae=M.minExtend(H,{trace:se});t(Z,ae,se)}}function ue(K){var te=K[0].trace,Y,H=[];if(te.visible)switch(te.type){case"histogram2d":case"heatmap":H=[["M-15,-2V4H15V-2Z"]],Y=!0;break;case"choropleth":case"choroplethmapbox":H=[["M-6,-6V6H6V-6Z"]],Y=!0;break;case"densitymapbox":H=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],Y="radial";break;case"cone":H=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],Y=!1;break;case"streamtube":H=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],Y=!1;break;case"surface":H=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],Y=!0;break;case"mesh3d":H=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],Y=!1;break;case"volume":H=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],Y=!0;break;case"isosurface":H=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],Y=!1;break}var ee=w.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(H);ee.enter().append("path").classed("legend3dandfriends",!0).attr("transform",E).style("stroke-miterlimit",1),ee.exit().remove(),ee.each(function(ne,Z){var q=w.select(this),ie=n(te),se=ie.colorscale,ae=ie.reversescale,oe=function(ye){if(ye.size()){var ge="legendfill-"+te.uid;e.gradient(ye,_,ge,m(ae,Y==="radial"),se,"fill")}},be;if(se){if(!Y){var de=se.length;be=Z===0?se[ae?de-1:0][1]:Z===1?se[ae?0:de-1][1]:se[Math.floor((de-1)/2)][1]}}else{var ce=te.vertexcolor||te.facecolor||te.color;be=M.isArrayOrTypedArray(ce)?ce[Z]||ce[0]:ce}q.attr("d",ne[0]),be?q.call(a.fill,be):q.call(oe)})}};function m(u,A){var _=A?"radial":"horizontal";return _+(u?"":"reversed")}function l(u){var A=u[0].trace,_=A.contours,g=r.hasLines(A),b=r.hasMarkers(A),v=A.visible&&A.fill&&A.fill!=="none",k=!1,S=!1;if(_){var E=_.coloring;E==="lines"?k=!0:g=E==="none"||E==="heatmap"||_.showlines,_.type==="constraint"?v=_._operation!=="=":(E==="fill"||E==="heatmap")&&(S=!0)}return{showMarker:b,showLine:g,showFill:v,showGradientLine:k,showGradientFill:S,anyLine:g||k,anyFill:v||S}}function x(u,A,_){return u&&M.isArrayOrTypedArray(u)?A:u>_?_:u}},{"../../lib":515,"../../registry":647,"../../traces/pie/helpers":915,"../../traces/pie/style_one":921,"../../traces/scatter/subtypes":961,"../color":367,"../colorscale/helpers":378,"../drawing":389,"./constants":418,"@plotly/d3":58}],426:[function(i,U,V){i("./constants"),U.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}},{"./constants":428}],427:[function(i,U,V){var w=i("../../registry"),f=i("../../plots/plots"),M=i("../../plots/cartesian/axis_ids"),T=i("../../fonts/ploticon"),e=i("../shapes/draw").eraseActiveShape,a=i("../../lib"),n=a._,r=U.exports={};r.toImage={name:"toImage",title:function(u){var A=u._context.toImageButtonOptions||{},_=A.format||"png";return _==="png"?n(u,"Download plot as a png"):n(u,"Download plot")},icon:T.camera,click:function(u){var A=u._context.toImageButtonOptions,_={format:A.format||"png"};a.notifier(n(u,"Taking snapshot - this may take a few seconds"),"long"),_.format!=="svg"&&a.isIE()&&(a.notifier(n(u,"IE only supports svg.  Changing format to svg."),"long"),_.format="svg"),["filename","width","height","scale"].forEach(function(g){g in A&&(_[g]=A[g])}),w.call("downloadImage",u,_).then(function(g){a.notifier(n(u,"Snapshot succeeded")+" - "+g,"long")}).catch(function(){a.notifier(n(u,"Sorry, there was a problem downloading your snapshot!"),"long")})}},r.sendDataToCloud={name:"sendDataToCloud",title:function(u){return n(u,"Edit in Chart Studio")},icon:T.disk,click:function(u){f.sendDataToCloud(u)}},r.editInChartStudio={name:"editInChartStudio",title:function(u){return n(u,"Edit in Chart Studio")},icon:T.pencil,click:function(u){f.sendDataToCloud(u)}},r.zoom2d={name:"zoom2d",_cat:"zoom",title:function(u){return n(u,"Zoom")},attr:"dragmode",val:"zoom",icon:T.zoombox,click:t},r.pan2d={name:"pan2d",_cat:"pan",title:function(u){return n(u,"Pan")},attr:"dragmode",val:"pan",icon:T.pan,click:t},r.select2d={name:"select2d",_cat:"select",title:function(u){return n(u,"Box Select")},attr:"dragmode",val:"select",icon:T.selectbox,click:t},r.lasso2d={name:"lasso2d",_cat:"lasso",title:function(u){return n(u,"Lasso Select")},attr:"dragmode",val:"lasso",icon:T.lasso,click:t},r.drawclosedpath={name:"drawclosedpath",title:function(u){return n(u,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:T.drawclosedpath,click:t},r.drawopenpath={name:"drawopenpath",title:function(u){return n(u,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:T.drawopenpath,click:t},r.drawline={name:"drawline",title:function(u){return n(u,"Draw line")},attr:"dragmode",val:"drawline",icon:T.drawline,click:t},r.drawrect={name:"drawrect",title:function(u){return n(u,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:T.drawrect,click:t},r.drawcircle={name:"drawcircle",title:function(u){return n(u,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:T.drawcircle,click:t},r.eraseshape={name:"eraseshape",title:function(u){return n(u,"Erase active shape")},icon:T.eraseshape,click:e},r.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(u){return n(u,"Zoom in")},attr:"zoom",val:"in",icon:T.zoom_plus,click:t},r.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(u){return n(u,"Zoom out")},attr:"zoom",val:"out",icon:T.zoom_minus,click:t},r.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(u){return n(u,"Autoscale")},attr:"zoom",val:"auto",icon:T.autoscale,click:t},r.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(u){return n(u,"Reset axes")},attr:"zoom",val:"reset",icon:T.home,click:t},r.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(u){return n(u,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:T.tooltip_basic,gravity:"ne",click:t},r.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(u){return n(u,"Compare data on hover")},attr:"hovermode",val:function(u){return u._fullLayout._isHoriz?"y":"x"},icon:T.tooltip_compare,gravity:"ne",click:t};function t(u,A){var _=A.currentTarget,g=_.getAttribute("data-attr"),b=_.getAttribute("data-val")||!0,v=u._fullLayout,k={},S=M.list(u,null,!0),E=v._cartesianSpikesEnabled,C,F;if(g==="zoom"){var I=b==="in"?.5:2,D=(1+I)/2,R=(1-I)/2,O;for(F=0;F<S.length;F++)if(C=S[F],!C.fixedrange)if(O=C._name,b==="auto")k[O+".autorange"]=!0;else if(b==="reset"){if(C._rangeInitial===void 0)k[O+".autorange"]=!0;else{var z=C._rangeInitial.slice();k[O+".range[0]"]=z[0],k[O+".range[1]"]=z[1]}C._showSpikeInitial!==void 0&&(k[O+".showspikes"]=C._showSpikeInitial,E==="on"&&!C._showSpikeInitial&&(E="off"))}else{var B=[C.r2l(C.range[0]),C.r2l(C.range[1])],G=[D*B[0]+R*B[1],D*B[1]+R*B[0]];k[O+".range[0]"]=C.l2r(G[0]),k[O+".range[1]"]=C.l2r(G[1])}}else g==="hovermode"&&(b==="x"||b==="y")&&(b=v._isHoriz?"y":"x",_.setAttribute("data-val",b)),k[g]=b;v._cartesianSpikesEnabled=E,w.call("_guiRelayout",u,k)}r.zoom3d={name:"zoom3d",_cat:"zoom",title:function(u){return n(u,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:T.zoombox,click:h},r.pan3d={name:"pan3d",_cat:"pan",title:function(u){return n(u,"Pan")},attr:"scene.dragmode",val:"pan",icon:T.pan,click:h},r.orbitRotation={name:"orbitRotation",title:function(u){return n(u,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:T["3d_rotate"],click:h},r.tableRotation={name:"tableRotation",title:function(u){return n(u,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:T["z-axis"],click:h};function h(u,A){for(var _=A.currentTarget,g=_.getAttribute("data-attr"),b=_.getAttribute("data-val")||!0,v=u._fullLayout._subplots.gl3d||[],k={},S=g.split("."),E=0;E<v.length;E++)k[v[E]+"."+S[1]]=b;var C=b==="pan"?b:"zoom";k.dragmode=C,w.call("_guiRelayout",u,k)}r.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(u){return n(u,"Reset camera to default")},attr:"resetDefault",icon:T.home,click:s},r.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(u){return n(u,"Reset camera to last save")},attr:"resetLastSave",icon:T.movie,click:s};function s(u,A){for(var _=A.currentTarget,g=_.getAttribute("data-attr"),b=g==="resetLastSave",v=g==="resetDefault",k=u._fullLayout,S=k._subplots.gl3d||[],E={},C=0;C<S.length;C++){var F=S[C],I=F+".camera",D=F+".aspectratio",R=F+".aspectmode",O=k[F]._scene,z;b?(E[I+".up"]=O.viewInitial.up,E[I+".eye"]=O.viewInitial.eye,E[I+".center"]=O.viewInitial.center,z=!0):v&&(E[I+".up"]=null,E[I+".eye"]=null,E[I+".center"]=null,z=!0),z&&(E[D+".x"]=O.viewInitial.aspectratio.x,E[D+".y"]=O.viewInitial.aspectratio.y,E[D+".z"]=O.viewInitial.aspectratio.z,E[R]=O.viewInitial.aspectmode)}w.call("_guiRelayout",u,E)}r.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(u){return n(u,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:y};function o(u,A){var _=A.currentTarget,g=_._previousVal,b=u._fullLayout,v=b._subplots.gl3d||[],k=["xaxis","yaxis","zaxis"],S={},E={};if(g)E=g,_._previousVal=null;else{for(var C=0;C<v.length;C++){var F=v[C],I=b[F],D=F+".hovermode";S[D]=I.hovermode,E[D]=!1;for(var R=0;R<3;R++){var O=k[R],z=F+"."+O+".showspikes";E[z]=!1,S[z]=I[O].showspikes}}_._previousVal=S}return E}function y(u,A){var _=o(u,A);w.call("_guiRelayout",u,_)}r.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(u){return n(u,"Zoom in")},attr:"zoom",val:"in",icon:T.zoom_plus,click:d},r.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(u){return n(u,"Zoom out")},attr:"zoom",val:"out",icon:T.zoom_minus,click:d},r.resetGeo={name:"resetGeo",_cat:"reset",title:function(u){return n(u,"Reset")},attr:"reset",val:null,icon:T.autoscale,click:d},r.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(u){return n(u,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:c};function d(u,A){for(var _=A.currentTarget,g=_.getAttribute("data-attr"),b=_.getAttribute("data-val")||!0,v=u._fullLayout,k=v._subplots.geo||[],S=0;S<k.length;S++){var E=k[S],C=v[E];if(g==="zoom"){var F=C.projection.scale,I=b==="in"?2*F:.5*F;w.call("_guiRelayout",u,E+".projection.scale",I)}}g==="reset"&&x(u,"geo")}r.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(u){return n(u,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:c},r.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(u){return n(u,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:T.tooltip_basic,gravity:"ne",click:c};function p(u){var A=u._fullLayout;return A.hovermode?!1:A._has("cartesian")?A._isHoriz?"y":"x":"closest"}function c(u){var A=p(u);w.call("_guiRelayout",u,"hovermode",A)}r.resetViewSankey={name:"resetSankeyGroup",title:function(u){return n(u,"Reset view")},icon:T.home,click:function(u){for(var A={"node.groups":[],"node.x":[],"node.y":[]},_=0;_<u._fullData.length;_++){var g=u._fullData[_]._viewInitial;A["node.groups"].push(g.node.groups.slice()),A["node.x"].push(g.node.x.slice()),A["node.y"].push(g.node.y.slice())}w.call("restyle",u,A)}},r.toggleHover={name:"toggleHover",title:function(u){return n(u,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:function(u,A){var _=o(u,A);_.hovermode=p(u),w.call("_guiRelayout",u,_)}},r.resetViews={name:"resetViews",title:function(u){return n(u,"Reset views")},icon:T.home,click:function(u,A){var _=A.currentTarget;_.setAttribute("data-attr","zoom"),_.setAttribute("data-val","reset"),t(u,A),_.setAttribute("data-attr","resetLastSave"),s(u,A),x(u,"geo"),x(u,"mapbox")}},r.toggleSpikelines={name:"toggleSpikelines",title:function(u){return n(u,"Toggle Spike Lines")},icon:T.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(u){var A=u._fullLayout,_=A._cartesianSpikesEnabled;A._cartesianSpikesEnabled=_==="on"?"off":"on",w.call("_guiRelayout",u,m(u))}};function m(u){for(var A=u._fullLayout,_=A._cartesianSpikesEnabled==="on",g=M.list(u,null,!0),b={},v=0;v<g.length;v++){var k=g[v];b[k._name+".showspikes"]=_?!0:k._showSpikeInitial}return b}r.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(u){return n(u,"Reset view")},attr:"reset",icon:T.home,click:function(u){x(u,"mapbox")}},r.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(u){return n(u,"Zoom in")},attr:"zoom",val:"in",icon:T.zoom_plus,click:l},r.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(u){return n(u,"Zoom out")},attr:"zoom",val:"out",icon:T.zoom_minus,click:l};function l(u,A){for(var _=A.currentTarget,g=_.getAttribute("data-val"),b=u._fullLayout,v=b._subplots.mapbox||[],k=1.05,S={},E=0;E<v.length;E++){var C=v[E],F=b[C].zoom,I=g==="in"?k*F:F/k;S[C+".zoom"]=I}w.call("_guiRelayout",u,S)}function x(u,A){for(var _=u._fullLayout,g=_._subplots[A]||[],b={},v=0;v<g.length;v++)for(var k=g[v],S=_[k]._subplot,E=S.viewInitial,C=Object.keys(E),F=0;F<C.length;F++){var I=C[F];b[k+"."+I]=E[I]}w.call("_guiRelayout",u,b)}},{"../../fonts/ploticon":494,"../../lib":515,"../../plots/cartesian/axis_ids":570,"../../plots/plots":628,"../../registry":647,"../shapes/draw":462}],428:[function(i,U,V){var w=i("./buttons"),f=Object.keys(w),M=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],T=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(M),e=[],a=function(n){if(T.indexOf(n._cat||n.name)===-1){var r=n.name,t=(n._cat||n.name).toLowerCase();e.indexOf(r)===-1&&e.push(r),e.indexOf(t)===-1&&e.push(t)}};f.forEach(function(n){a(w[n])}),e.sort(),U.exports={DRAW_MODES:M,backButtons:T,foreButtons:e}},{"./buttons":427}],429:[function(i,U,V){var w=i("../../lib"),f=i("../color"),M=i("../../plot_api/plot_template"),T=i("./attributes");U.exports=function(a,n){var r=a.modebar||{},t=M.newContainer(n,"modebar");function h(o,y){return w.coerce(r,t,T,o,y)}h("orientation"),h("bgcolor",f.addOpacity(n.paper_bgcolor,.5));var s=f.contrast(f.rgb(n.modebar.bgcolor));h("color",f.addOpacity(s,.3)),h("activecolor",f.addOpacity(s,.7)),h("uirevision",n.uirevision),h("add"),h("remove")}},{"../../lib":515,"../../plot_api/plot_template":555,"../color":367,"./attributes":426}],430:[function(i,U,V){U.exports={moduleType:"component",name:"modebar",layoutAttributes:i("./attributes"),supplyLayoutDefaults:i("./defaults"),manage:i("./manage")}},{"./attributes":426,"./defaults":429,"./manage":431}],431:[function(i,U,V){var w=i("../../plots/cartesian/axis_ids"),f=i("../../traces/scatter/subtypes"),M=i("../../registry"),T=i("../fx/helpers").isUnifiedHover,e=i("./modebar"),a=i("./buttons"),n=i("./constants").DRAW_MODES,r=i("../../lib").extendDeep;U.exports=function(c){var m=c._fullLayout,l=c._context,x=m._modeBar;if(!l.displayModeBar&&!l.watermark){x&&(x.destroy(),delete m._modeBar);return}if(!Array.isArray(l.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(l.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var u=l.modeBarButtons,A;Array.isArray(u)&&u.length?A=d(u):!l.displayModeBar&&l.watermark?A=[]:A=t(c),x?x.update(c,A):m._modeBar=e(c,A)};function t(p){var c=p._fullLayout,m=p._fullData,l=p._context;function x(Z,q){if(typeof q=="string"){if(q.toLowerCase()===Z.toLowerCase())return!0}else{var ie=q.name,se=q._cat||q.name;if(ie===Z||se===Z.toLowerCase())return!0}return!1}var u=c.modebar.add;typeof u=="string"&&(u=[u]);var A=c.modebar.remove;typeof A=="string"&&(A=[A]);var _=l.modeBarButtonsToAdd.concat(u.filter(function(Z){for(var q=0;q<l.modeBarButtonsToRemove.length;q++)if(x(Z,l.modeBarButtonsToRemove[q]))return!1;return!0})),g=l.modeBarButtonsToRemove.concat(A.filter(function(Z){for(var q=0;q<l.modeBarButtonsToAdd.length;q++)if(x(Z,l.modeBarButtonsToAdd[q]))return!1;return!0})),b=c._has("cartesian"),v=c._has("gl3d"),k=c._has("geo"),S=c._has("pie"),E=c._has("funnelarea"),C=c._has("gl2d"),F=c._has("ternary"),I=c._has("mapbox"),D=c._has("polar"),R=c._has("smith"),O=c._has("sankey"),z=h(c),B=T(c.hovermode),G=[];function Q(Z){if(!!Z.length){for(var q=[],ie=0;ie<Z.length;ie++){for(var se=Z[ie],ae=a[se],oe=ae.name.toLowerCase(),be=(ae._cat||ae.name).toLowerCase(),ce=!1,de=0;de<g.length;de++){var ye=g[de].toLowerCase();if(ye===oe||ye===be){ce=!0;break}}ce||q.push(a[se])}G.push(q)}}var X=["toImage"];l.showEditInChartStudio?X.push("editInChartStudio"):l.showSendToCloud&&X.push("sendDataToCloud"),Q(X);var j=[],re=[],ue=[],K=[];(b||C||S||E||F)+k+v+I+D+R>1?(re=["toggleHover"],ue=["resetViews"]):k?(j=["zoomInGeo","zoomOutGeo"],re=["hoverClosestGeo"],ue=["resetGeo"]):v?(re=["hoverClosest3d"],ue=["resetCameraDefault3d","resetCameraLastSave3d"]):I?(j=["zoomInMapbox","zoomOutMapbox"],re=["toggleHover"],ue=["resetViewMapbox"]):C?re=["hoverClosestGl2d"]:S?re=["hoverClosestPie"]:O?(re=["hoverClosestCartesian","hoverCompareCartesian"],ue=["resetViewSankey"]):re=["toggleHover"],b&&(re=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]),(o(m)||B)&&(re=[]),(b||C)&&!z&&(j=["zoomIn2d","zoomOut2d","autoScale2d"],ue[0]!=="resetViews"&&(ue=["resetScale2d"])),v?K=["zoom3d","pan3d","orbitRotation","tableRotation"]:(b||C)&&!z||F?K=["zoom2d","pan2d"]:I||k?K=["pan2d"]:D&&(K=["zoom2d"]),s(m)&&K.push("select2d","lasso2d");var te=[],Y=function(Z){te.indexOf(Z)===-1&&re.indexOf(Z)!==-1&&te.push(Z)};if(Array.isArray(_)){for(var H=[],ee=0;ee<_.length;ee++){var ne=_[ee];typeof ne=="string"?(ne=ne.toLowerCase(),n.indexOf(ne)!==-1?(c._has("mapbox")||c._has("cartesian"))&&K.push(ne):ne==="togglespikelines"?Y("toggleSpikelines"):ne==="togglehover"?Y("toggleHover"):ne==="hovercompare"?Y("hoverCompareCartesian"):ne==="hoverclosest"?(Y("hoverClosestCartesian"),Y("hoverClosestGeo"),Y("hoverClosest3d"),Y("hoverClosestGl2d"),Y("hoverClosestPie")):ne==="v1hovermode"&&(Y("toggleHover"),Y("hoverClosestCartesian"),Y("hoverCompareCartesian"),Y("hoverClosestGeo"),Y("hoverClosest3d"),Y("hoverClosestGl2d"),Y("hoverClosestPie"))):H.push(ne)}_=H}return Q(K),Q(j.concat(ue)),Q(te),y(G,_)}function h(p){for(var c=w.list({_fullLayout:p},null,!0),m=0;m<c.length;m++)if(!c[m].fixedrange)return!1;return!0}function s(p){for(var c=!1,m=0;m<p.length&&!c;m++){var l=p[m];!l._module||!l._module.selectPoints||(M.traceIs(l,"scatter-like")?(f.hasMarkers(l)||f.hasText(l))&&(c=!0):M.traceIs(l,"box-violin")?(l.boxpoints==="all"||l.points==="all")&&(c=!0):c=!0)}return c}function o(p){for(var c=0;c<p.length;c++)if(!M.traceIs(p[c],"noHover"))return!1;return!0}function y(p,c){if(c.length)if(Array.isArray(c[0]))for(var m=0;m<c.length;m++)p.push(c[m]);else p.push(c);return p}function d(p){for(var c=r([],p),m=0;m<c.length;m++)for(var l=c[m],x=0;x<l.length;x++){var u=l[x];if(typeof u=="string")if(a[u]!==void 0)c[m][x]=a[u];else throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "))}return c}},{"../../lib":515,"../../plots/cartesian/axis_ids":570,"../../registry":647,"../../traces/scatter/subtypes":961,"../fx/helpers":403,"./buttons":427,"./constants":428,"./modebar":432}],432:[function(i,U,V){var w=i("@plotly/d3"),f=i("fast-isnumeric"),M=i("../../lib"),T=i("../../fonts/ploticon"),e=i("../../version").version,a=new DOMParser;function n(s){this.container=s.container,this.element=document.createElement("div"),this.update(s.graphInfo,s.buttons),this.container.appendChild(this.element)}var r=n.prototype;r.update=function(s,o){this.graphInfo=s;var y=this.graphInfo._context,d=this.graphInfo._fullLayout,p="modebar-"+d._uid;this.element.setAttribute("id",p),this._uid=p,this.element.className="modebar",y.displayModeBar==="hover"&&(this.element.className+=" modebar--hover ease-bg"),d.modebar.orientation==="v"&&(this.element.className+=" vertical",o=o.reverse());var c=d.modebar,m=y.displayModeBar==="hover"?".js-plotly-plot .plotly:hover ":"";M.deleteRelatedStyleRule(p),M.addRelatedStyleRule(p,m+"#"+p+" .modebar-group","background-color: "+c.bgcolor),M.addRelatedStyleRule(p,"#"+p+" .modebar-btn .icon path","fill: "+c.color),M.addRelatedStyleRule(p,"#"+p+" .modebar-btn:hover .icon path","fill: "+c.activecolor),M.addRelatedStyleRule(p,"#"+p+" .modebar-btn.active .icon path","fill: "+c.activecolor);var l=!this.hasButtons(o),x=this.hasLogo!==y.displaylogo,u=this.locale!==y.locale;if(this.locale=y.locale,(l||x||u)&&(this.removeAllButtons(),this.updateButtons(o),y.watermark||y.displaylogo)){var A=this.getLogo();y.watermark&&(A.className=A.className+" watermark"),d.modebar.orientation==="v"?this.element.insertBefore(A,this.element.childNodes[0]):this.element.appendChild(A),this.hasLogo=!0}this.updateActiveButton()},r.updateButtons=function(s){var o=this;this.buttons=s,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(y){var d=o.createGroup();y.forEach(function(p){var c=p.name;if(!c)throw new Error("must provide button 'name' in button config");if(o.buttonsNames.indexOf(c)!==-1)throw new Error("button name '"+c+"' is taken");o.buttonsNames.push(c);var m=o.createButton(p);o.buttonElements.push(m),d.appendChild(m)}),o.element.appendChild(d)})},r.createGroup=function(){var s=document.createElement("div");return s.className="modebar-group",s},r.createButton=function(s){var o=this,y=document.createElement("a");y.setAttribute("rel","tooltip"),y.className="modebar-btn";var d=s.title;d===void 0?d=s.name:typeof d=="function"&&(d=d(this.graphInfo)),(d||d===0)&&y.setAttribute("data-title",d),s.attr!==void 0&&y.setAttribute("data-attr",s.attr);var p=s.val;p!==void 0&&(typeof p=="function"&&(p=p(this.graphInfo)),y.setAttribute("data-val",p));var c=s.click;if(typeof c!="function")throw new Error("must provide button 'click' function in button config");y.addEventListener("click",function(l){s.click(o.graphInfo,l),o.updateActiveButton(l.currentTarget)}),y.setAttribute("data-toggle",s.toggle||!1),s.toggle&&w.select(y).classed("active",!0);var m=s.icon;return typeof m=="function"?y.appendChild(m()):y.appendChild(this.createIcon(m||T.question)),y.setAttribute("data-gravity",s.gravity||"n"),y},r.createIcon=function(s){var o=f(s.height)?Number(s.height):s.ascent-s.descent,y="http://www.w3.org/2000/svg",d;if(s.path){d=document.createElementNS(y,"svg"),d.setAttribute("viewBox",[0,0,s.width,o].join(" ")),d.setAttribute("class","icon");var p=document.createElementNS(y,"path");p.setAttribute("d",s.path),s.transform?p.setAttribute("transform",s.transform):s.ascent!==void 0&&p.setAttribute("transform","matrix(1 0 0 -1 0 "+s.ascent+")"),d.appendChild(p)}if(s.svg){var c=a.parseFromString(s.svg,"application/xml");d=c.childNodes[0]}return d.setAttribute("height","1em"),d.setAttribute("width","1em"),d},r.updateActiveButton=function(s){var o=this.graphInfo._fullLayout,y=s!==void 0?s.getAttribute("data-attr"):null;this.buttonElements.forEach(function(d){var p=d.getAttribute("data-val")||!0,c=d.getAttribute("data-attr"),m=d.getAttribute("data-toggle")==="true",l=w.select(d);if(m)c===y&&l.classed("active",!l.classed("active"));else{var x=c===null?c:M.nestedProperty(o,c).get();l.classed("active",x===p)}})},r.hasButtons=function(s){var o=this.buttons;if(!o||s.length!==o.length)return!1;for(var y=0;y<s.length;++y){if(s[y].length!==o[y].length)return!1;for(var d=0;d<s[y].length;d++)if(s[y][d].name!==o[y][d].name)return!1}return!0};function t(s){return s+" (v"+e+")"}r.getLogo=function(){var s=this.createGroup(),o=document.createElement("a");return o.href="https://plotly.com/",o.target="_blank",o.setAttribute("data-title",t(M._(this.graphInfo,"Produced with Plotly.js"))),o.className="modebar-btn plotlyjsicon modebar-btn--logo",o.appendChild(this.createIcon(T.newplotlylogo)),s.appendChild(o),s},r.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},r.destroy=function(){M.removeElement(this.container.querySelector(".modebar")),M.deleteRelatedStyleRule(this._uid)};function h(s,o){var y=s._fullLayout,d=new n({graphInfo:s,container:y._modebardiv.node(),buttons:o});return y._privateplot&&w.select(d.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),d}U.exports=h},{"../../fonts/ploticon":494,"../../lib":515,"../../version":1132,"@plotly/d3":58,"fast-isnumeric":190}],433:[function(i,U,V){var w=i("../../plots/font_attributes"),f=i("../color/attributes"),M=i("../../plot_api/plot_template").templatedArray,T=M("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});U.exports={visible:{valType:"boolean",editType:"plot"},buttons:T,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:w({editType:"plot"}),bgcolor:{valType:"color",dflt:f.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:f.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},{"../../plot_api/plot_template":555,"../../plots/font_attributes":594,"../color/attributes":366}],434:[function(i,U,V){U.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},{}],435:[function(i,U,V){var w=i("../../lib"),f=i("../color"),M=i("../../plot_api/plot_template"),T=i("../../plots/array_container_defaults"),e=i("./attributes"),a=i("./constants");U.exports=function(h,s,o,y,d){var p=h.rangeselector||{},c=M.newContainer(s,"rangeselector");function m(_,g){return w.coerce(p,c,e,_,g)}var l=T(p,c,{name:"buttons",handleItemDefaults:n,calendar:d}),x=m("visible",l.length>0);if(x){var u=r(s,o,y);m("x",u[0]),m("y",u[1]),w.noneOrAll(h,s,["x","y"]),m("xanchor"),m("yanchor"),w.coerceFont(m,"font",o.font);var A=m("bgcolor");m("activecolor",f.contrast(A,a.lightAmount,a.darkAmount)),m("bordercolor"),m("borderwidth")}};function n(t,h,s,o){var y=o.calendar;function d(m,l){return w.coerce(t,h,e.buttons,m,l)}var p=d("visible");if(p){var c=d("step");c!=="all"&&(y&&y!=="gregorian"&&(c==="month"||c==="year")?h.stepmode="backward":d("stepmode"),d("count")),d("label")}}function r(t,h,s){for(var o=s.filter(function(c){return h[c].anchor===t._id}),y=0,d=0;d<o.length;d++){var p=h[o[d]].domain;p&&(y=Math.max(p[1],y))}return[t.domain[0],y+a.yPad]}},{"../../lib":515,"../../plot_api/plot_template":555,"../../plots/array_container_defaults":561,"../color":367,"./attributes":433,"./constants":434}],436:[function(i,U,V){var w=i("@plotly/d3"),f=i("../../registry"),M=i("../../plots/plots"),T=i("../color"),e=i("../drawing"),a=i("../../lib"),n=a.strTranslate,r=i("../../lib/svg_text_utils"),t=i("../../plots/cartesian/axis_ids"),h=i("../../constants/alignment"),s=h.LINE_SPACING,o=h.FROM_TL,y=h.FROM_BR,d=i("./constants"),p=i("./get_update_object");U.exports=function(v){var k=v._fullLayout,S=k._infolayer.selectAll(".rangeselector").data(c(v),m);S.enter().append("g").classed("rangeselector",!0),S.exit().remove(),S.style({cursor:"pointer","pointer-events":"all"}),S.each(function(E){var C=w.select(this),F=E,I=F.rangeselector,D=C.selectAll("g.button").data(a.filterVisible(I.buttons));D.enter().append("g").classed("button",!0),D.exit().remove(),D.each(function(R){var O=w.select(this),z=p(F,R);R._isActive=l(F,R,z),O.call(x,I,R),O.call(A,I,R,v),O.on("click",function(){v._dragged||f.call("_guiRelayout",v,z)}),O.on("mouseover",function(){R._isHovered=!0,O.call(x,I,R)}),O.on("mouseout",function(){R._isHovered=!1,O.call(x,I,R)})}),g(v,D,I,F._name,C)})};function c(b){for(var v=t.list(b,"x",!0),k=[],S=0;S<v.length;S++){var E=v[S];E.rangeselector&&E.rangeselector.visible&&k.push(E)}return k}function m(b){return b._id}function l(b,v,k){if(v.step==="all")return b.autorange===!0;var S=Object.keys(k);return b.range[0]===k[S[0]]&&b.range[1]===k[S[1]]}function x(b,v,k){var S=a.ensureSingle(b,"rect","selector-rect",function(E){E.attr("shape-rendering","crispEdges")});S.attr({rx:d.rx,ry:d.ry}),S.call(T.stroke,v.bordercolor).call(T.fill,u(v,k)).style("stroke-width",v.borderwidth+"px")}function u(b,v){return v._isActive||v._isHovered?b.activecolor:b.bgcolor}function A(b,v,k,S){function E(F){r.convertToTspans(F,S)}var C=a.ensureSingle(b,"text","selector-text",function(F){F.attr("text-anchor","middle")});C.call(e.font,v.font).text(_(k,S._fullLayout._meta)).call(E)}function _(b,v){return b.label?v?a.templateString(b.label,v):b.label:b.step==="all"?"all":b.count+b.step.charAt(0)}function g(b,v,k,S,E){var C=0,F=0,I=k.borderwidth;v.each(function(){var G=w.select(this),Q=G.select(".selector-text"),X=k.font.size*s,j=Math.max(X*r.lineCount(Q),16)+3;F=Math.max(F,j)}),v.each(function(){var G=w.select(this),Q=G.select(".selector-rect"),X=G.select(".selector-text"),j=X.node()&&e.bBox(X.node()).width,re=k.font.size*s,ue=r.lineCount(X),K=Math.max(j+10,d.minButtonWidth);G.attr("transform",n(I+C,I)),Q.attr({x:0,y:0,width:K,height:F}),r.positionText(X,K/2,F/2-(ue-1)*re/2+3),C+=K+5});var D=b._fullLayout._size,R=D.l+D.w*k.x,O=D.t+D.h*(1-k.y),z="left";a.isRightAnchor(k)&&(R-=C,z="right"),a.isCenterAnchor(k)&&(R-=C/2,z="center");var B="top";a.isBottomAnchor(k)&&(O-=F,B="bottom"),a.isMiddleAnchor(k)&&(O-=F/2,B="middle"),C=Math.ceil(C),F=Math.ceil(F),R=Math.round(R),O=Math.round(O),M.autoMargin(b,S+"-range-selector",{x:k.x,y:k.y,l:C*o[z],r:C*y[z],b:F*y[B],t:F*o[B]}),E.attr("transform",n(R,O))}},{"../../constants/alignment":483,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/cartesian/axis_ids":570,"../../plots/plots":628,"../../registry":647,"../color":367,"../drawing":389,"./constants":434,"./get_update_object":437,"@plotly/d3":58}],437:[function(i,U,V){var w=i("d3-time"),f=i("../../lib").titleCase;U.exports=function(e,a){var n=e._name,r={};if(a.step==="all")r[n+".autorange"]=!0;else{var t=M(e,a);r[n+".range[0]"]=t[0],r[n+".range[1]"]=t[1]}return r};function M(T,e){var a=T.range,n=new Date(T.r2l(a[1])),r=e.step,t=w["utc"+f(r)],h=e.count,s;switch(e.stepmode){case"backward":s=T.l2r(+t.offset(n,-h));break;case"todate":var o=t.offset(n,-h);s=T.l2r(+t.ceil(o));break}var y=a[1];return[s,y]}},{"../../lib":515,"d3-time":122}],438:[function(i,U,V){U.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:i("./attributes")}}},layoutAttributes:i("./attributes"),handleDefaults:i("./defaults"),draw:i("./draw")}},{"./attributes":433,"./defaults":435,"./draw":436}],439:[function(i,U,V){var w=i("../color/attributes");U.exports={bgcolor:{valType:"color",dflt:w.background,editType:"plot"},bordercolor:{valType:"color",dflt:w.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},{"../color/attributes":366}],440:[function(i,U,V){var w=i("../../plots/cartesian/axis_ids").list,f=i("../../plots/cartesian/autorange").getAutoRange,M=i("./constants");U.exports=function(e){for(var a=w(e,"x",!0),n=0;n<a.length;n++){var r=a[n],t=r[M.name];t&&t.visible&&t.autorange&&(t._input.autorange=!0,t._input.range=t.range=f(e,r))}}},{"../../plots/cartesian/autorange":565,"../../plots/cartesian/axis_ids":570,"./constants":441}],441:[function(i,U,V){U.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},{}],442:[function(i,U,V){var w=i("../../lib"),f=i("../../plot_api/plot_template"),M=i("../../plots/cartesian/axis_ids"),T=i("./attributes"),e=i("./oppaxis_attributes");U.exports=function(n,r,t){var h=n[t],s=r[t];if(!(h.rangeslider||r._requestRangeslider[s._id]))return;w.isPlainObject(h.rangeslider)||(h.rangeslider={});var o=h.rangeslider,y=f.newContainer(s,"rangeslider");function d(S,E){return w.coerce(o,y,T,S,E)}var p,c;function m(S,E){return w.coerce(p,c,e,S,E)}var l=d("visible");if(!!l){d("bgcolor",r.plot_bgcolor),d("bordercolor"),d("borderwidth"),d("thickness"),d("autorange",!s.isValidRange(o.range)),d("range");var x=r._subplots;if(x)for(var u=x.cartesian.filter(function(S){return S.substr(0,S.indexOf("y"))===M.name2id(t)}).map(function(S){return S.substr(S.indexOf("y"),S.length)}),A=w.simpleMap(u,M.id2name),_=0;_<A.length;_++){var g=A[_];p=o[g]||{},c=f.newContainer(y,g,"yaxis");var b=r[g],v;p.range&&b.isValidRange(p.range)&&(v="fixed");var k=m("rangemode",v);k!=="match"&&m("range",b.range.slice())}y._input=o}}},{"../../lib":515,"../../plot_api/plot_template":555,"../../plots/cartesian/axis_ids":570,"./attributes":439,"./oppaxis_attributes":446}],443:[function(i,U,V){var w=i("@plotly/d3"),f=i("../../registry"),M=i("../../plots/plots"),T=i("../../lib"),e=T.strTranslate,a=i("../drawing"),n=i("../color"),r=i("../titles"),t=i("../../plots/cartesian"),h=i("../../plots/cartesian/axis_ids"),s=i("../dragelement"),o=i("../../lib/setcursor"),y=i("./constants");U.exports=function(b){for(var v=b._fullLayout,k=v._rangeSliderData,S=0;S<k.length;S++){var E=k[S][y.name];E._clipId=E._id+"-"+v._uid}function C(I){return I._name}var F=v._infolayer.selectAll("g."+y.containerClassName).data(k,C);F.exit().each(function(I){var D=I[y.name];v._topdefs.select("#"+D._clipId).remove()}).remove(),k.length!==0&&(F.enter().append("g").classed(y.containerClassName,!0).attr("pointer-events","all"),F.each(function(I){var D=w.select(this),R=I[y.name],O=v[h.id2name(I.anchor)],z=R[h.id2name(I.anchor)];if(R.range){var B=T.simpleMap(R.range,I.r2l),G=T.simpleMap(I.range,I.r2l),Q;G[0]<G[1]?Q=[Math.min(B[0],G[0]),Math.max(B[1],G[1])]:Q=[Math.max(B[0],G[0]),Math.min(B[1],G[1])],R.range=R._input.range=T.simpleMap(Q,I.l2r)}I.cleanRange("rangeslider.range");var X=v._size,j=I.domain;R._width=X.w*(j[1]-j[0]);var re=Math.round(X.l+X.w*j[0]),ue=Math.round(X.t+X.h*(1-I._counterDomainMin)+(I.side==="bottom"?I._depth:0)+R._offsetShift+y.extraPad);D.attr("transform",e(re,ue)),R._rl=T.simpleMap(R.range,I.r2l);var K=R._rl[0],te=R._rl[1],Y=te-K;if(R.p2d=function(be){return be/R._width*Y+K},R.d2p=function(be){return(be-K)/Y*R._width},I.rangebreaks){var H=I.locateBreaks(K,te);if(H.length){var ee,ne,Z=0;for(ee=0;ee<H.length;ee++)ne=H[ee],Z+=ne.max-ne.min;var q=R._width/(te-K-Z),ie=[-q*K];for(ee=0;ee<H.length;ee++)ne=H[ee],ie.push(ie[ie.length-1]-q*(ne.max-ne.min));for(R.d2p=function(be){for(var ce=ie[0],de=0;de<H.length;de++){var ye=H[de];if(be>=ye.max)ce=ie[de+1];else if(be<ye.min)break}return ce+q*be},ee=0;ee<H.length;ee++)ne=H[ee],ne.pmin=R.d2p(ne.min),ne.pmax=R.d2p(ne.max);R.p2d=function(be){for(var ce=ie[0],de=0;de<H.length;de++){var ye=H[de];if(be>=ye.pmax)ce=ie[de+1];else if(be<ye.pmin)break}return(be-ce)/q}}}if(z.rangemode!=="match"){var se=O.r2l(z.range[0]),ae=O.r2l(z.range[1]),oe=ae-se;R.d2pOppAxis=function(be){return(be-se)/oe*R._height}}D.call(m,b,I,R).call(l,b,I,R).call(x,b,I,R).call(A,b,I,R,z).call(_,b,I,R).call(g,b,I,R),d(D,b,I,R),c(D,b,I,R,O,z),I.side==="bottom"&&r.draw(b,I._id+"title",{propContainer:I,propName:I._name+".title",placeholder:v._dfltTitle.x,attributes:{x:I._offset+I._length/2,y:ue+R._height+R._offsetShift+10+1.5*I.title.font.size,"text-anchor":"middle"}})}))};function d(b,v,k,S){if(v._context.staticPlot)return;var E=b.select("rect."+y.slideBoxClassName).node(),C=b.select("rect."+y.grabAreaMinClassName).node(),F=b.select("rect."+y.grabAreaMaxClassName).node();function I(){var D=w.event,R=D.target,O=D.clientX||D.touches[0].clientX,z=O-b.node().getBoundingClientRect().left,B=S.d2p(k._rl[0]),G=S.d2p(k._rl[1]),Q=s.coverSlip();this.addEventListener("touchmove",X),this.addEventListener("touchend",j),Q.addEventListener("mousemove",X),Q.addEventListener("mouseup",j);function X(re){var ue=re.clientX||re.touches[0].clientX,K=+ue-O,te,Y,H;switch(R){case E:H="ew-resize",te=B+K,Y=G+K;break;case C:H="col-resize",te=B+K,Y=G;break;case F:H="col-resize",te=B,Y=G+K;break;default:H="ew-resize",te=z,Y=z+K;break}if(Y<te){var ee=Y;Y=te,te=ee}S._pixelMin=te,S._pixelMax=Y,o(w.select(Q),H),p(b,v,k,S)}function j(){Q.removeEventListener("mousemove",X),Q.removeEventListener("mouseup",j),this.removeEventListener("touchmove",X),this.removeEventListener("touchend",j),T.removeElement(Q)}}b.on("mousedown",I),b.on("touchstart",I)}function p(b,v,k,S){function E(I){return k.l2r(T.constrain(I,S._rl[0],S._rl[1]))}var C=E(S.p2d(S._pixelMin)),F=E(S.p2d(S._pixelMax));window.requestAnimationFrame(function(){f.call("_guiRelayout",v,k._name+".range",[C,F])})}function c(b,v,k,S,E,C){var F=y.handleWidth/2;function I(re){return T.constrain(re,0,S._width)}function D(re){return T.constrain(re,0,S._height)}function R(re){return T.constrain(re,-F,S._width+F)}var O=I(S.d2p(k._rl[0])),z=I(S.d2p(k._rl[1]));if(b.select("rect."+y.slideBoxClassName).attr("x",O).attr("width",z-O),b.select("rect."+y.maskMinClassName).attr("width",O),b.select("rect."+y.maskMaxClassName).attr("x",z).attr("width",S._width-z),C.rangemode!=="match"){var B=S._height-D(S.d2pOppAxis(E._rl[1])),G=S._height-D(S.d2pOppAxis(E._rl[0]));b.select("rect."+y.maskMinOppAxisClassName).attr("x",O).attr("height",B).attr("width",z-O),b.select("rect."+y.maskMaxOppAxisClassName).attr("x",O).attr("y",G).attr("height",S._height-G).attr("width",z-O),b.select("rect."+y.slideBoxClassName).attr("y",B).attr("height",G-B)}var Q=.5,X=Math.round(R(O-F))-Q,j=Math.round(R(z-F))+Q;b.select("g."+y.grabberMinClassName).attr("transform",e(X,Q)),b.select("g."+y.grabberMaxClassName).attr("transform",e(j,Q))}function m(b,v,k,S){var E=T.ensureSingle(b,"rect",y.bgClassName,function(D){D.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),C=S.borderwidth%2===0?S.borderwidth:S.borderwidth-1,F=-S._offsetShift,I=a.crispRound(v,S.borderwidth);E.attr({width:S._width+C,height:S._height+C,transform:e(F,F),"stroke-width":I}).call(n.stroke,S.bordercolor).call(n.fill,S.bgcolor)}function l(b,v,k,S){var E=v._fullLayout,C=T.ensureSingleById(E._topdefs,"clipPath",S._clipId,function(F){F.append("rect").attr({x:0,y:0})});C.select("rect").attr({width:S._width,height:S._height})}function x(b,v,k,S){var E=v.calcdata,C=b.selectAll("g."+y.rangePlotClassName).data(k._subplotsWith,T.identity);C.enter().append("g").attr("class",function(I){return y.rangePlotClassName+" "+I}).call(a.setClipUrl,S._clipId,v),C.order(),C.exit().remove();var F;C.each(function(I,D){var R=w.select(this),O=D===0,z=h.getFromId(v,I,"y"),B=z._name,G=S[B],Q={data:[],layout:{xaxis:{type:k.type,domain:[0,1],range:S.range.slice(),calendar:k.calendar},width:S._width,height:S._height,margin:{t:0,b:0,l:0,r:0}},_context:v._context};k.rangebreaks&&(Q.layout.xaxis.rangebreaks=k.rangebreaks),Q.layout[B]={type:z.type,domain:[0,1],range:G.rangemode!=="match"?G.range.slice():z.range.slice(),calendar:z.calendar},z.rangebreaks&&(Q.layout[B].rangebreaks=z.rangebreaks),M.supplyDefaults(Q);var X=Q._fullLayout.xaxis,j=Q._fullLayout[B];X.clearCalc(),X.setScale(),j.clearCalc(),j.setScale();var re={id:I,plotgroup:R,xaxis:X,yaxis:j,isRangePlot:!0};O?F=re:(re.mainplot="xy",re.mainplotinfo=F),t.rangePlot(v,re,u(E,I))})}function u(b,v){for(var k=[],S=0;S<b.length;S++){var E=b[S],C=E[0].trace;C.xaxis+C.yaxis===v&&k.push(E)}return k}function A(b,v,k,S,E){var C=T.ensureSingle(b,"rect",y.maskMinClassName,function(R){R.attr({x:0,y:0,"shape-rendering":"crispEdges"})});C.attr("height",S._height).call(n.fill,y.maskColor);var F=T.ensureSingle(b,"rect",y.maskMaxClassName,function(R){R.attr({y:0,"shape-rendering":"crispEdges"})});if(F.attr("height",S._height).call(n.fill,y.maskColor),E.rangemode!=="match"){var I=T.ensureSingle(b,"rect",y.maskMinOppAxisClassName,function(R){R.attr({y:0,"shape-rendering":"crispEdges"})});I.attr("width",S._width).call(n.fill,y.maskOppAxisColor);var D=T.ensureSingle(b,"rect",y.maskMaxOppAxisClassName,function(R){R.attr({y:0,"shape-rendering":"crispEdges"})});D.attr("width",S._width).style("border-top",y.maskOppBorder).call(n.fill,y.maskOppAxisColor)}}function _(b,v,k,S){if(!v._context.staticPlot){var E=T.ensureSingle(b,"rect",y.slideBoxClassName,function(C){C.attr({y:0,cursor:y.slideBoxCursor,"shape-rendering":"crispEdges"})});E.attr({height:S._height,fill:y.slideBoxFill})}}function g(b,v,k,S){var E=T.ensureSingle(b,"g",y.grabberMinClassName),C=T.ensureSingle(b,"g",y.grabberMaxClassName),F={x:0,width:y.handleWidth,rx:y.handleRadius,fill:n.background,stroke:n.defaultLine,"stroke-width":y.handleStrokeWidth,"shape-rendering":"crispEdges"},I={y:Math.round(S._height/4),height:Math.round(S._height/2)},D=T.ensureSingle(E,"rect",y.handleMinClassName,function(G){G.attr(F)});D.attr(I);var R=T.ensureSingle(C,"rect",y.handleMaxClassName,function(G){G.attr(F)});R.attr(I);var O={width:y.grabAreaWidth,x:0,y:0,fill:y.grabAreaFill,cursor:v._context.staticPlot?void 0:y.grabAreaCursor},z=T.ensureSingle(E,"rect",y.grabAreaMinClassName,function(G){G.attr(O)});z.attr("height",S._height);var B=T.ensureSingle(C,"rect",y.grabAreaMaxClassName,function(G){G.attr(O)});B.attr("height",S._height)}},{"../../lib":515,"../../lib/setcursor":536,"../../plots/cartesian":578,"../../plots/cartesian/axis_ids":570,"../../plots/plots":628,"../../registry":647,"../color":367,"../dragelement":386,"../drawing":389,"../titles":476,"./constants":441,"@plotly/d3":58}],444:[function(i,U,V){var w=i("../../plots/cartesian/axis_ids"),f=i("../../lib/svg_text_utils"),M=i("./constants"),T=i("../../constants/alignment").LINE_SPACING,e=M.name;function a(n){var r=n&&n[e];return r&&r.visible}V.isVisible=a,V.makeData=function(n){var r=w.list({_fullLayout:n},"x",!0),t=n.margin,h=[];if(!n._has("gl2d"))for(var s=0;s<r.length;s++){var o=r[s];if(a(o)){h.push(o);var y=o[e];y._id=e+o._id,y._height=(n.height-t.b-t.t)*y.thickness,y._offsetShift=Math.floor(y.borderwidth/2)}}n._rangeSliderData=h},V.autoMarginOpts=function(n,r){var t=n._fullLayout,h=r[e],s=r._id.charAt(0),o=0,y=0;if(r.side==="bottom"&&(o=r._depth,r.title.text!==t._dfltTitle[s])){y=1.5*r.title.font.size+10+h._offsetShift;var d=(r.title.text.match(f.BR_TAG_ALL)||[]).length;y+=d*r.title.font.size*T}return{x:0,y:r._counterDomainMin,l:0,r:0,t:0,b:h._height+o+Math.max(t.margin.b,y),pad:M.extraPad+h._offsetShift*2}}},{"../../constants/alignment":483,"../../lib/svg_text_utils":541,"../../plots/cartesian/axis_ids":570,"./constants":441}],445:[function(i,U,V){var w=i("../../lib"),f=i("./attributes"),M=i("./oppaxis_attributes"),T=i("./helpers");U.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:w.extendFlat({},f,{yaxis:M})}}},layoutAttributes:i("./attributes"),handleDefaults:i("./defaults"),calcAutorange:i("./calc_autorange"),draw:i("./draw"),isVisible:T.isVisible,makeData:T.makeData,autoMarginOpts:T.autoMarginOpts}},{"../../lib":515,"./attributes":439,"./calc_autorange":440,"./defaults":442,"./draw":443,"./helpers":444,"./oppaxis_attributes":446}],446:[function(i,U,V){U.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},{}],447:[function(i,U,V){var w=i("../annotations/attributes"),f=i("../../traces/scatter/attributes").line,M=i("../drawing/attributes").dash,T=i("../../lib/extend").extendFlat,e=i("../../plot_api/edit_types").overrideAll,a=i("../../plot_api/plot_template").templatedArray;i("../../constants/axis_placeable_objects"),U.exports=e(a("selection",{type:{valType:"enumerated",values:["rect","path"]},xref:T({},w.xref,{}),yref:T({},w.yref,{}),x0:{valType:"any"},x1:{valType:"any"},y0:{valType:"any"},y1:{valType:"any"},path:{valType:"string",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:.7,editType:"arraydraw"},line:{color:f.color,width:T({},f.width,{min:1,dflt:1}),dash:T({},M,{dflt:"dot"})}}),"arraydraw","from-root")},{"../../constants/axis_placeable_objects":484,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plot_api/plot_template":555,"../../traces/scatter/attributes":936,"../annotations/attributes":350,"../drawing/attributes":388}],448:[function(i,U,V){U.exports={BENDPX:1.5,MINSELECT:12,SELECTDELAY:100,SELECTID:"-select"}},{}],449:[function(i,U,V){var w=i("../../lib"),f=i("../../plots/cartesian/axes"),M=i("../../plots/array_container_defaults"),T=i("./attributes"),e=i("../shapes/helpers");U.exports=function(r,t){M(r,t,{name:"selections",handleItemDefaults:a});for(var h=t.selections,s=0;s<h.length;s++){var o=h[s];!o||o.path===void 0&&(o.x0===void 0||o.x1===void 0||o.y0===void 0||o.y1===void 0)&&(t.selections[s]=null)}};function a(n,r,t){function h(C,F){return w.coerce(n,r,T,C,F)}var s=h("path"),o=s?"path":"rect",y=h("type",o),d=y!=="path";d&&delete r.path,h("opacity"),h("line.color"),h("line.width"),h("line.dash");for(var p=["x","y"],c=0;c<2;c++){var m=p[c],l={_fullLayout:t},x,u,A,_=f.coerceRef(n,r,l,m);if(x=f.getFromId(l,_),x._selectionIndices.push(r._index),A=e.rangeToShapePosition(x),u=e.shapePositionToRange(x),d){var g=m+"0",b=m+"1",v=n[g],k=n[b];n[g]=u(n[g],!0),n[b]=u(n[b],!0),f.coercePosition(r,l,h,_,g),f.coercePosition(r,l,h,_,b);var S=r[g],E=r[b];S!==void 0&&E!==void 0&&(r[g]=A(S),r[b]=A(E),n[g]=v,n[b]=k)}}d&&w.noneOrAll(n,r,["x0","x1","y0","y1"])}},{"../../lib":515,"../../plots/array_container_defaults":561,"../../plots/cartesian/axes":566,"../shapes/helpers":469,"./attributes":447}],450:[function(i,U,V){var w=i("../shapes/draw_newshape/helpers").readPaths,f=i("../shapes/display_outlines"),M=i("../shapes/handle_outline").clearOutlineControllers,T=i("../color"),e=i("../drawing"),a=i("../../plot_api/plot_template").arrayEditor,n=i("../shapes/helpers"),r=n.getPathString;U.exports={draw:t,drawOne:s,activateLastSelection:d};function t(c){var m=c._fullLayout;M(c),m._selectionLayer.selectAll("path").remove();for(var l in m._plots){var x=m._plots[l].selectionLayer;x&&x.selectAll("path").remove()}for(var u=0;u<m.selections.length;u++)s(c,u)}function h(c){return c._context.editSelection}function s(c,m){c._fullLayout._paperdiv.selectAll('.selectionlayer [data-index="'+m+'"]').remove();var l=n.makeSelectionsOptionsAndPlotinfo(c,m),x=l.options,u=l.plotinfo;if(!x._input)return;A(c._fullLayout._selectionLayer);function A(_){var g=r(c,x),b={"data-index":m,"fill-rule":"evenodd",d:g},v=x.opacity,k="rgba(0,0,0,0)",S=x.line.color||T.contrast(c._fullLayout.plot_bgcolor),E=x.line.width,C=x.line.dash;E||(E=5,C="solid");var F=h(c)&&c._fullLayout._activeSelectionIndex===m;F&&(k=c._fullLayout.activeselection.fillcolor,v=c._fullLayout.activeselection.opacity);for(var I=[],D=1;D>=0;D--){var R=_.append("path").attr(b).style("opacity",D?.1:v).call(T.stroke,S).call(T.fill,k).call(e.dashLine,D?"solid":C,D?4+E:E);if(o(R,c,x),F){var O=a(c.layout,"selections",x);R.style({cursor:"move"});var z={element:R.node(),plotinfo:u,gd:c,editHelpers:O,isActiveSelection:!0},B=w(g,c);f(B,R,z)}else R.style("pointer-events",D?"all":"none");I[D]=R}var G=I[0],Q=I[1];Q.node().addEventListener("click",function(){return y(c,G)})}}function o(c,m,l){var x=l.xref+l.yref;e.setClipUrl(c,"clip"+m._fullLayout._uid+x,m)}function y(c,m){if(!!h(c)){var l=m.node(),x=+l.getAttribute("data-index");if(x>=0){if(x===c._fullLayout._activeSelectionIndex){p(c);return}c._fullLayout._activeSelectionIndex=x,c._fullLayout._deactivateSelection=p,t(c)}}}function d(c){if(!!h(c)){var m=c._fullLayout.selections.length-1;c._fullLayout._activeSelectionIndex=m,c._fullLayout._deactivateSelection=p,t(c)}}function p(c){if(!!h(c)){var m=c._fullLayout._activeSelectionIndex;m>=0&&(M(c),delete c._fullLayout._activeSelectionIndex,t(c))}}},{"../../plot_api/plot_template":555,"../color":367,"../drawing":389,"../shapes/display_outlines":461,"../shapes/draw_newshape/helpers":466,"../shapes/handle_outline":468,"../shapes/helpers":469}],451:[function(i,U,V){var w=i("../../drawing/attributes").dash,f=i("../../../lib/extend").extendFlat;U.exports={newselection:{mode:{valType:"enumerated",values:["immediate","gradual"],dflt:"immediate",editType:"none"},line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:1,dflt:1,editType:"none"},dash:f({},w,{dflt:"dot",editType:"none"}),editType:"none"},editType:"none"},activeselection:{fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},{"../../../lib/extend":505,"../../drawing/attributes":388}],452:[function(i,U,V){U.exports=function(f,M,T){T("newselection.mode");var e=T("newselection.line.width");e&&(T("newselection.line.color"),T("newselection.line.dash")),T("activeselection.fillcolor"),T("activeselection.opacity")}},{}],453:[function(i,U,V){var w=i("../../dragelement/helpers"),f=w.selectMode,M=i("../../shapes/handle_outline"),T=M.clearOutline,e=i("../../shapes/draw_newshape/helpers"),a=e.readPaths,n=e.writePaths,r=e.fixDatesForPaths;U.exports=function(h,s){if(!!h.length){var o=h[0][0];if(!!o){var y=o.getAttribute("d"),d=s.gd,p=d._fullLayout.newselection,c=s.plotinfo,m=c.xaxis,l=c.yaxis,x=s.isActiveSelection,u=s.dragmode,A=(d.layout||{}).selections||[];if(!f(u)&&x!==void 0){var _=d._fullLayout._activeSelectionIndex;if(_<A.length)switch(d._fullLayout.selections[_].type){case"rect":u="select";break;case"path":u="lasso";break}}var g=a(y,d,c,x),b={xref:m._id,yref:l._id,opacity:p.opacity,line:{color:p.line.color,width:p.line.width,dash:p.line.dash}},v;g.length===1&&(v=g[0]),v&&v.length===5&&u==="select"?(b.type="rect",b.x0=v[0][1],b.y0=v[0][2],b.x1=v[2][1],b.y1=v[2][2]):(b.type="path",m&&l&&r(g,m,l),b.path=n(g),v=null),T(d);for(var k=s.editHelpers,S=(k||{}).modifyItem,E=[],C=0;C<A.length;C++){var F=d._fullLayout.selections[C];if(!F){E[C]=F;continue}if(E[C]=F._input,x!==void 0&&C===d._fullLayout._activeSelectionIndex){var I=b;switch(F.type){case"rect":S("x0",I.x0),S("x1",I.x1),S("y0",I.y0),S("y1",I.y1);break;case"path":S("path",I.path);break}}}return x===void 0?(E.push(b),E):k?k.getUpdateObj():{}}}}},{"../../dragelement/helpers":385,"../../shapes/draw_newshape/helpers":466,"../../shapes/handle_outline":468}],454:[function(i,U,V){var w=i("../../lib").strTranslate;function f(a,n){switch(a.type){case"log":return a.p2d(n);case"date":return a.p2r(n,0,a.calendar);default:return a.p2r(n)}}function M(a,n){switch(a.type){case"log":return a.d2p(n);case"date":return a.r2p(n,0,a.calendar);default:return a.r2p(n)}}function T(a){var n=a._id.charAt(0)==="y"?1:0;return function(r){return f(a,r[n])}}function e(a){return w(a.xaxis._offset,a.yaxis._offset)}U.exports={p2r:f,r2p:M,axValue:T,getTransform:e}},{"../../lib":515}],455:[function(i,U,V){var w=i("./draw"),f=i("./select");U.exports={moduleType:"component",name:"selections",layoutAttributes:i("./attributes"),supplyLayoutDefaults:i("./defaults"),supplyDrawNewSelectionDefaults:i("./draw_newselection/defaults"),includeBasePlot:i("../../plots/cartesian/include_components")("selections"),draw:w.draw,drawOne:w.drawOne,reselect:f.reselect,prepSelect:f.prepSelect,clearOutline:f.clearOutline,clearSelectionsCache:f.clearSelectionsCache,selectOnClick:f.selectOnClick}},{"../../plots/cartesian/include_components":577,"./attributes":447,"./defaults":449,"./draw":450,"./draw_newselection/defaults":452,"./select":456}],456:[function(i,U,V){var w=i("polybooljs"),f=i("point-in-polygon/nested"),M=i("../../registry"),T=i("../drawing").dashStyle,e=i("../color"),a=i("../fx"),n=i("../fx/helpers").makeEventData,r=i("../dragelement/helpers"),t=r.freeMode,h=r.rectMode,s=r.drawMode,o=r.openMode,y=r.selectMode,d=i("../shapes/helpers"),p=i("../shapes/constants"),c=i("../shapes/display_outlines"),m=i("../shapes/handle_outline").clearOutline,l=i("../shapes/draw_newshape/helpers"),x=l.handleEllipse,u=l.readPaths,A=i("../shapes/draw_newshape/newshapes"),_=i("./draw_newselection/newselections"),g=i("./draw").activateLastSelection,b=i("../../lib"),v=b.sorterAsc,k=i("../../lib/polygon"),S=i("../../lib/throttle"),E=i("../../plots/cartesian/axis_ids").getFromId,C=i("../../lib/clear_gl_canvases"),F=i("../../plot_api/subroutines").redrawReglTraces,I=i("./constants"),D=I.MINSELECT,R=k.filter,O=k.tester,z=i("./helpers"),B=z.p2r,G=z.axValue,Q=z.getTransform;function X(We){return We.subplot!==void 0}function j(We,ot,Ge,Me,Ve){var Qe=!X(Me),tt=t(Ve),St=h(Ve),wt=o(Ve),Ct=s(Ve),jt=y(Ve),Bt=Ve==="drawline",Wt=Ve==="drawcircle",Qt=Bt||Wt,Zt=Me.gd,cr=Zt._fullLayout,Xr=jt&&cr.newselection.mode==="immediate"&&Qe,vn=cr._zoomlayer,en=Me.element.getBoundingClientRect(),ut=Me.plotinfo,ar=Q(ut),rr=ot-en.left,Kt=Ge-en.top;cr._calcInverseTransform(Zt);var Er=b.apply3DTransform(cr._invTransform)(rr,Kt);rr=Er[0],Kt=Er[1];var st=cr._invScaleX,et=cr._invScaleY,ht=rr,vt=Kt,kt="M"+rr+","+Kt,Vt=Me.xaxes[0],Pe=Me.yaxes[0],ke=Vt._length,lt=Pe._length,ft=We.altKey&&!(s(Ve)&&wt),yt,Rt,_t,Dt,Jt,fr,Rr;H(We,Zt,Me),tt&&(yt=R([[rr,Kt]],I.BENDPX));var Sr=vn.selectAll("path.select-outline-"+ut.id).data([1]),Pr=Ct?cr.newshape:cr.newselection,Jr=Ct&&!wt?Pr.fillcolor:"rgba(0,0,0,0)",ur=Pr.line.color||(Qe?e.contrast(Zt._fullLayout.plot_bgcolor):"#7f7f7f");Sr.enter().append("path").attr("class","select-outline select-outline-"+ut.id).style({opacity:Ct?Pr.opacity/2:1,"stroke-dasharray":T(Pr.line.dash,Pr.line.width),"stroke-width":Pr.line.width+"px","shape-rendering":"crispEdges"}).call(e.stroke,ur).call(e.fill,Jr).attr("fill-rule","evenodd").classed("cursor-move",!!Ct).attr("transform",ar).attr("d",kt+"Z");var _r=vn.append("path").attr("class","zoombox-corners").style({fill:e.background,stroke:e.defaultLine,"stroke-width":1}).attr("transform",ar).attr("d","M0,0Z"),Br=cr._uid+I.SELECTID,Yr=[],Dr=ie(Zt,Me.xaxes,Me.yaxes,Me.subplot);Xr&&!We.shiftKey&&(Me._clearSubplotSelections=function(){if(!!Qe){var zt=Vt._id,qt=Pe._id;Ye(Zt,zt,qt,Dr);for(var hr=(Zt.layout||{}).selections||[],Ur=[],Gr=!1,Ir=0;Ir<hr.length;Ir++){var Cr=cr.selections[Ir];Cr.xref!==zt||Cr.yref!==qt?Ur.push(hr[Ir]):Gr=!0}Gr&&(Zt._fullLayout._noEmitSelectedAtStart=!0,M.call("_guiRelayout",Zt,{selections:Ur}))}});var it=Pt(Me);Me.moveFn=function(zt,qt){Me._clearSubplotSelections&&(Me._clearSubplotSelections(),Me._clearSubplotSelections=void 0),ht=Math.max(0,Math.min(ke,st*zt+rr)),vt=Math.max(0,Math.min(lt,et*qt+Kt));var hr=Math.abs(ht-rr),Ur=Math.abs(vt-Kt);if(St){var Gr,Ir,Cr;if(jt){var Kr=cr.selectdirection;switch(Kr==="any"?Ur<Math.min(hr*.6,D)?Gr="h":hr<Math.min(Ur*.6,D)?Gr="v":Gr="d":Gr=Kr,Gr){case"h":Ir=Wt?lt/2:0,Cr=lt;break;case"v":Ir=Wt?ke/2:0,Cr=ke;break}}if(Ct)switch(cr.newshape.drawdirection){case"vertical":Gr="h",Ir=Wt?lt/2:0,Cr=lt;break;case"horizontal":Gr="v",Ir=Wt?ke/2:0,Cr=ke;break;case"ortho":hr<Ur?(Gr="h",Ir=Kt,Cr=vt):(Gr="v",Ir=rr,Cr=ht);break;default:Gr="d"}Gr==="h"?(Dt=Qt?x(Wt,[ht,Ir],[ht,Cr]):[[rr,Ir],[rr,Cr],[ht,Cr],[ht,Ir]],Dt.xmin=Qt?ht:Math.min(rr,ht),Dt.xmax=Qt?ht:Math.max(rr,ht),Dt.ymin=Math.min(Ir,Cr),Dt.ymax=Math.max(Ir,Cr),_r.attr("d","M"+Dt.xmin+","+(Kt-D)+"h-4v"+2*D+"h4ZM"+(Dt.xmax-1)+","+(Kt-D)+"h4v"+2*D+"h-4Z")):Gr==="v"?(Dt=Qt?x(Wt,[Ir,vt],[Cr,vt]):[[Ir,Kt],[Ir,vt],[Cr,vt],[Cr,Kt]],Dt.xmin=Math.min(Ir,Cr),Dt.xmax=Math.max(Ir,Cr),Dt.ymin=Qt?vt:Math.min(Kt,vt),Dt.ymax=Qt?vt:Math.max(Kt,vt),_r.attr("d","M"+(rr-D)+","+Dt.ymin+"v-4h"+2*D+"v4ZM"+(rr-D)+","+(Dt.ymax-1)+"v4h"+2*D+"v-4Z")):Gr==="d"&&(Dt=Qt?x(Wt,[rr,Kt],[ht,vt]):[[rr,Kt],[rr,vt],[ht,vt],[ht,Kt]],Dt.xmin=Math.min(rr,ht),Dt.xmax=Math.max(rr,ht),Dt.ymin=Math.min(Kt,vt),Dt.ymax=Math.max(Kt,vt),_r.attr("d","M0,0Z"))}else tt&&(yt.addPt([ht,vt]),Dt=yt.filtered);if(Me.selectionDefs&&Me.selectionDefs.length?(_t=me(Me.mergedPolygons,Dt,ft),Dt.subtract=ft,Rt=Y(Me.selectionDefs.concat([Dt]))):(_t=[Dt],Rt=O(Dt)),c(Le(_t,wt),Sr,Me),jt){var Cn=we(Zt,!1),yn=Cn.eventData?Cn.eventData.points.slice():[];Cn=we(Zt,!1,Rt,Dr,Me),Rt=Cn.selectionTesters,Rr=Cn.eventData;var Yn;yt?Yn=yt.filtered:Yn=Nt(_t),S.throttle(Br,I.SELECTDELAY,function(){Yr=Oe(Rt,Dr);for(var In=Yr.slice(),Jn=0;Jn<yn.length;Jn++){for(var Zn=yn[Jn],ba=!1,Pa=0;Pa<In.length;Pa++)if(In[Pa].curveNumber===Zn.curveNumber&&In[Pa].pointNumber===Zn.pointNumber){ba=!0;break}ba||In.push(Zn)}In.length&&(Rr||(Rr={}),Rr.points=In),it(Rr,Yn),$t(Zt,Rr)})}},Me.clickFn=function(zt,qt){if(_r.remove(),Zt._fullLayout._activeShapeIndex>=0){Zt._fullLayout._deactivateShape(Zt);return}if(!Ct){var hr=cr.clickmode;S.done(Br).then(function(){if(S.clear(Br),zt===2){for(Sr.remove(),Jt=0;Jt<Dr.length;Jt++)fr=Dr[Jt],fr._module.selectPoints(fr,!1);if(ye(Zt,Dr),Z(Me),Lt(Zt),Dr.length){var Ur=Dr[0].xaxis,Gr=Dr[0].yaxis;if(Ur&&Gr){for(var Ir=[],Cr=Zt._fullLayout.selections,Kr=0;Kr<Cr.length;Kr++){var Cn=Cr[Kr];!Cn||(Cn.xref!==Ur._id||Cn.yref!==Gr._id)&&Ir.push(Cn)}Ir.length<Cr.length&&(Zt._fullLayout._noEmitSelectedAtStart=!0,M.call("_guiRelayout",Zt,{selections:Ir}))}}}else hr.indexOf("select")>-1&&re(qt,Zt,Me.xaxes,Me.yaxes,Me.subplot,Me,Sr),hr==="event"&&Ut(Zt,void 0);a.click(Zt,qt)}).catch(b.error)}},Me.doneFn=function(){_r.remove(),S.done(Br).then(function(){S.clear(Br),!Xr&&Dt&&Me.selectionDefs&&(Dt.subtract=ft,Me.selectionDefs.push(Dt),Me.mergedPolygons.length=0,[].push.apply(Me.mergedPolygons,_t)),(Xr||Ct)&&Z(Me,Xr),Me.doneFnCompleted&&Me.doneFnCompleted(Yr),jt&&Ut(Zt,Rr)}).catch(b.error)}}function re(We,ot,Ge,Me,Ve,Qe,tt){var St=ot._hoverdata,wt=ot._fullLayout,Ct=wt.clickmode,jt=Ct.indexOf("event")>-1,Bt=[],Wt,Qt,Zt,cr,Xr,vn,en,ut,ar,rr;if(ae(St)){H(We,ot,Qe),Wt=ie(ot,Ge,Me,Ve);var Kt=oe(St,Wt),Er=Kt.pointNumbers.length>0;if(Er?ce(Wt,Kt):de(Wt)&&(en=be(Kt))){for(tt&&tt.remove(),rr=0;rr<Wt.length;rr++)Qt=Wt[rr],Qt._module.selectPoints(Qt,!1);ye(ot,Wt),Z(Qe),jt&&Lt(ot)}else{ut=We.shiftKey&&(en!==void 0?en:be(Kt)),Zt=ue(Kt.pointNumber,Kt.searchInfo,ut);var st=Qe.selectionDefs.concat([Zt]);for(cr=Y(st),rr=0;rr<Wt.length;rr++)if(Xr=Wt[rr]._module.selectPoints(Wt[rr],cr),vn=Se(Xr,Wt[rr]),Bt.length)for(var et=0;et<vn.length;et++)Bt.push(vn[et]);else Bt=vn;if(ar={points:Bt},ye(ot,Wt,ar),Zt&&Qe&&Qe.selectionDefs.push(Zt),tt){var ht=Qe.mergedPolygons,vt=o(Qe.dragmode);c(Le(ht,vt),tt,Qe)}jt&&Ut(ot,ar)}}}function ue(We,ot,Ge){return{pointNumber:We,searchInfo:ot,subtract:!!Ge}}function K(We){return"pointNumber"in We&&"searchInfo"in We}function te(We){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(ot,Ge,Me,Ve){var Qe=We.searchInfo.cd[0].trace._expandedIndex,tt=Ve.cd[0].trace._expandedIndex;return tt===Qe&&Me===We.pointNumber},isRect:!1,degenerate:!1,subtract:!!We.subtract}}function Y(We){if(!We.length)return;for(var ot=[],Ge=K(We[0])?0:We[0][0][0],Me=Ge,Ve=K(We[0])?0:We[0][0][1],Qe=Ve,tt=0;tt<We.length;tt++)if(K(We[tt]))ot.push(te(We[tt]));else{var St=O(We[tt]);St.subtract=!!We[tt].subtract,ot.push(St),Ge=Math.min(Ge,St.xmin),Me=Math.max(Me,St.xmax),Ve=Math.min(Ve,St.ymin),Qe=Math.max(Qe,St.ymax)}function wt(Ct,jt,Bt,Wt){for(var Qt=!1,Zt=0;Zt<ot.length;Zt++)ot[Zt].contains(Ct,jt,Bt,Wt)&&(Qt=!ot[Zt].subtract);return Qt}return{xmin:Ge,xmax:Me,ymin:Ve,ymax:Qe,pts:[],contains:wt,isRect:!1,degenerate:!1}}function H(We,ot,Ge){var Me=ot._fullLayout,Ve=Ge.plotinfo,Qe=Ge.dragmode,tt=Me._lastSelectedSubplot&&Me._lastSelectedSubplot===Ve.id,St=(We.shiftKey||We.altKey)&&!(s(Qe)&&o(Qe));tt&&St&&Ve.selection&&Ve.selection.selectionDefs&&!Ge.selectionDefs?(Ge.selectionDefs=Ve.selection.selectionDefs,Ge.mergedPolygons=Ve.selection.mergedPolygons):(!St||!Ve.selection)&&Z(Ge),tt||(m(ot),Me._lastSelectedSubplot=Ve.id)}function ee(We){return We._fullLayout._activeShapeIndex>=0}function ne(We){return We._fullLayout._activeSelectionIndex>=0}function Z(We,ot){var Ge=We.dragmode,Me=We.plotinfo,Ve=We.gd;ee(Ve)&&Ve._fullLayout._deactivateShape(Ve),ne(Ve)&&Ve._fullLayout._deactivateSelection(Ve);var Qe=Ve._fullLayout,tt=Qe._zoomlayer,St=s(Ge),wt=y(Ge);if(St||wt){var Ct=tt.selectAll(".select-outline-"+Me.id);if(Ct&&Ve._fullLayout._outlining){var jt;St&&(jt=A(Ct,We)),jt&&M.call("_guiRelayout",Ve,{shapes:jt});var Bt;wt&&!X(We)&&(Bt=_(Ct,We)),Bt&&(Ve._fullLayout._noEmitSelectedAtStart=!0,M.call("_guiRelayout",Ve,{selections:Bt}).then(function(){ot&&g(Ve)})),Ve._fullLayout._outlining=!1}}Me.selection={},Me.selection.selectionDefs=We.selectionDefs=[],Me.selection.mergedPolygons=We.mergedPolygons=[]}function q(We){return We._id}function ie(We,ot,Ge,Me){if(!We.calcdata)return[];var Ve=[],Qe=ot.map(q),tt=Ge.map(q),St,wt,Ct;for(Ct=0;Ct<We.calcdata.length;Ct++)if(St=We.calcdata[Ct],wt=St[0].trace,!(wt.visible!==!0||!wt._module||!wt._module.selectPoints))if(X({subplot:Me})&&(wt.subplot===Me||wt.geo===Me))Ve.push(se(wt._module,St,ot[0],Ge[0]));else if(wt.type==="splom"){if(wt._xaxes[Qe[0]]&&wt._yaxes[tt[0]]){var jt=se(wt._module,St,ot[0],Ge[0]);jt.scene=We._fullLayout._splomScenes[wt.uid],Ve.push(jt)}}else if(wt.type==="sankey"){var Bt=se(wt._module,St,ot[0],Ge[0]);Ve.push(Bt)}else{if(Qe.indexOf(wt.xaxis)===-1||tt.indexOf(wt.yaxis)===-1)continue;Ve.push(se(wt._module,St,E(We,wt.xaxis),E(We,wt.yaxis)))}return Ve}function se(We,ot,Ge,Me){return{_module:We,cd:ot,xaxis:Ge,yaxis:Me}}function ae(We){return We&&Array.isArray(We)&&We[0].hoverOnBox!==!0}function oe(We,ot){var Ge=We[0],Me=-1,Ve=[],Qe,tt;for(tt=0;tt<ot.length;tt++)if(Qe=ot[tt],Ge.fullData._expandedIndex===Qe.cd[0].trace._expandedIndex){if(Ge.hoverOnBox===!0)break;Ge.pointNumber!==void 0?Me=Ge.pointNumber:Ge.binNumber!==void 0&&(Me=Ge.binNumber,Ve=Ge.pointNumbers);break}return{pointNumber:Me,pointNumbers:Ve,searchInfo:Qe}}function be(We){var ot=We.searchInfo.cd[0].trace,Ge=We.pointNumber,Me=We.pointNumbers,Ve=Me.length>0,Qe=Ve?Me[0]:Ge;return ot.selectedpoints?ot.selectedpoints.indexOf(Qe)>-1:!1}function ce(We,ot){var Ge=[],Me,Ve,Qe,tt;for(tt=0;tt<We.length;tt++)Me=We[tt],Me.cd[0].trace.selectedpoints&&Me.cd[0].trace.selectedpoints.length>0&&Ge.push(Me);if(Ge.length===1&&(Qe=Ge[0]===ot.searchInfo,Qe&&(Ve=ot.searchInfo.cd[0].trace,Ve.selectedpoints.length===ot.pointNumbers.length))){for(tt=0;tt<ot.pointNumbers.length;tt++)if(Ve.selectedpoints.indexOf(ot.pointNumbers[tt])<0)return!1;return!0}return!1}function de(We){var ot=0,Ge,Me,Ve;for(Ve=0;Ve<We.length;Ve++)if(Ge=We[Ve],Me=Ge.cd[0].trace,Me.selectedpoints&&(Me.selectedpoints.length>1||(ot+=Me.selectedpoints.length,ot>1)))return!1;return ot===1}function ye(We,ot,Ge){var Me;for(Me=0;Me<ot.length;Me++){var Ve=ot[Me].cd[0].trace._fullInput,Qe=We._fullLayout._tracePreGUI[Ve.uid]||{};Qe.selectedpoints===void 0&&(Qe.selectedpoints=Ve._input.selectedpoints||null)}var tt;if(Ge){var St=Ge.points||[];for(Me=0;Me<ot.length;Me++)tt=ot[Me].cd[0].trace,tt._input.selectedpoints=tt._fullInput.selectedpoints=[],tt._fullInput!==tt&&(tt.selectedpoints=[]);for(var wt=0;wt<St.length;wt++){var Ct=St[wt],jt=Ct.data,Bt=Ct.fullData,Wt=Ct.pointIndex,Qt=Ct.pointIndices;Qt?([].push.apply(jt.selectedpoints,Qt),tt._fullInput!==tt&&[].push.apply(Bt.selectedpoints,Qt)):(jt.selectedpoints.push(Wt),tt._fullInput!==tt&&Bt.selectedpoints.push(Wt))}}else for(Me=0;Me<ot.length;Me++)tt=ot[Me].cd[0].trace,delete tt.selectedpoints,delete tt._input.selectedpoints,tt._fullInput!==tt&&delete tt._fullInput.selectedpoints;ge(We,ot)}function ge(We,ot){for(var Ge=!1,Me=0;Me<ot.length;Me++){var Ve=ot[Me],Qe=Ve.cd;M.traceIs(Qe[0].trace,"regl")&&(Ge=!0);var tt=Ve._module,St=tt.styleOnSelect||tt.style;St&&(St(We,Qe,Qe[0].node3),Qe[0].nodeRangePlot3&&St(We,Qe,Qe[0].nodeRangePlot3))}Ge&&(C(We),F(We))}function me(We,ot,Ge){for(var Me=Ge?w.difference:w.union,Ve=Me({regions:We},{regions:[ot]}),Qe=Ve.regions.reverse(),tt=0;tt<Qe.length;tt++){var St=Qe[tt];St.subtract=je(St,Qe.slice(0,tt))}return Qe}function Se(We,ot){if(Array.isArray(We))for(var Ge=ot.cd,Me=ot.cd[0].trace,Ve=0;Ve<We.length;Ve++)We[Ve]=n(We[Ve],Me,Ge);return We}function Le(We,ot){for(var Ge=[],Me=0;Me<We.length;Me++){Ge[Me]=[];for(var Ve=0;Ve<We[Me].length;Ve++){Ge[Me][Ve]=[],Ge[Me][Ve][0]=Ve?"L":"M";for(var Qe=0;Qe<We[Me][Ve].length;Qe++)Ge[Me][Ve].push(We[Me][Ve][Qe])}ot||Ge[Me].push(["Z",Ge[Me][0][1],Ge[Me][0][2]])}return Ge}function Oe(We,ot){for(var Ge=[],Me,Ve,Qe=0;Qe<ot.length;Qe++){var tt=ot[Qe];Ve=tt._module.selectPoints(tt,We),Me=Se(Ve,tt),Ge=Ge.concat(Me)}return Ge}function we(We,ot,Ge,Me,Ve){var Qe=!!Me,tt,St,wt;Ve&&(tt=Ve.plotinfo,St=Ve.xaxes[0]._id,wt=Ve.yaxes[0]._id);var Ct=[],jt=[],Bt=Re(We),Wt=We._fullLayout;if(tt){var Qt=Wt._zoomlayer,Zt=Wt.dragmode,cr=s(Zt),Xr=y(Zt);if(cr||Xr){var vn=E(We,St,"x"),en=E(We,wt,"y");if(vn&&en){var ut=Qt.selectAll(".select-outline-"+tt.id);if(ut&&We._fullLayout._outlining&&ut.length){for(var ar=ut[0][0],rr=ar.getAttribute("d"),Kt=u(rr,We,tt),Er=[],st=0;st<Kt.length;st++){for(var et=Kt[st],ht=[],vt=0;vt<et.length;vt++)ht.push([xt(vn,et[vt][1]),xt(en,et[vt][2])]);ht.xref=St,ht.yref=wt,ht.subtract=je(ht,Er),Er.push(ht)}Bt=Bt.concat(Er)}}}}var kt=St&&wt?[St+wt]:Wt._subplots.cartesian;Ce(We);for(var Vt={},Pe=0;Pe<kt.length;Pe++){var ke=kt[Pe],lt=ke.indexOf("y"),ft=ke.slice(0,lt),yt=ke.slice(lt),Rt=St&&wt?Ge:void 0;if(Rt=Fe(Bt,ft,yt,Rt),Rt){var _t=Me;if(!Qe){var Dt=E(We,ft,"x"),Jt=E(We,yt,"y");_t=ie(We,[Dt],[Jt],ke);for(var fr=0;fr<_t.length;fr++){var Rr=_t[fr],Sr=Rr.cd[0],Pr=Sr.trace;if(Rr._module.name==="scattergl"&&!Sr.t.xpx){var Jr=Pr.x,ur=Pr.y,_r=Pr._length;Sr.t.xpx=[],Sr.t.ypx=[];for(var Br=0;Br<_r;Br++)Sr.t.xpx[Br]=Dt.c2p(Jr[Br]),Sr.t.ypx[Br]=Jt.c2p(ur[Br])}Rr._module.name==="splom"&&(Vt[Pr.uid]||(Vt[Pr.uid]=!0))}}var Yr=Oe(Rt,_t);Ct=Ct.concat(Yr),jt=jt.concat(_t)}}var Dr={points:Ct};ye(We,jt,Dr);var it=Wt.clickmode,zt=it.indexOf("event")>-1&&ot;if(!tt&&ot){var qt=Re(We,!0);if(qt.length){var hr=qt[0].xref,Ur=qt[0].yref;if(hr&&Ur){var Gr=Nt(qt),Ir=Ht([E(We,hr,"x"),E(We,Ur,"y")]);Ir(Dr,Gr)}}We._fullLayout._noEmitSelectedAtStart?We._fullLayout._noEmitSelectedAtStart=!1:zt&&Ut(We,Dr),Wt._reselect=!1}if(!tt&&Wt._deselect){var Cr=Wt._deselect;St=Cr.xref,wt=Cr.yref,Ke(St,wt,jt)||Ye(We,St,wt,Me),zt&&(Dr.points.length?Ut(We,Dr):Lt(We)),Wt._deselect=!1}return{eventData:Dr,selectionTesters:Ge}}function Ce(We){var ot=We.calcdata;if(!!ot)for(var Ge=0;Ge<ot.length;Ge++){var Me=ot[Ge][0],Ve=Me.trace,Qe=We._fullLayout._splomScenes;if(Qe){var tt=Qe[Ve.uid];tt&&(tt.selectBatch=[])}}}function Ke(We,ot,Ge){for(var Me=0;Me<Ge.length;Me++){var Ve=Ge[Me];if(Ve.xaxis&&Ve.xaxis._id===We&&Ve.yaxis&&Ve.yaxis._id===ot)return!0}return!1}function Ye(We,ot,Ge,Me){Me=ie(We,[E(We,ot,"x")],[E(We,Ge,"y")],ot+Ge);for(var Ve=0;Ve<Me.length;Ve++){var Qe=Me[Ve];Qe._module.selectPoints(Qe,!1)}ye(We,Me)}function Fe(We,ot,Ge,Me){for(var Ve,Qe=0;Qe<We.length;Qe++){var tt=We[Qe];if(!(ot!==tt.xref||Ge!==tt.yref))if(Ve){var St=!!tt.subtract;Ve=me(Ve,tt,St),Me=Y(Ve)}else Ve=[tt],Me=O(tt)}return Me}function Re(We,ot){for(var Ge=[],Me=We._fullLayout,Ve=Me.selections,Qe=Ve.length,tt=0;tt<Qe;tt++)if(!(ot&&tt!==Me._activeSelectionIndex)){var St=Ve[tt];if(!!St){var wt=St.xref,Ct=St.yref,jt=E(We,wt,"x"),Bt=E(We,Ct,"y"),Wt,Qt,Zt,cr,Xr;if(St.type==="rect"){Xr=[];var vn=xt(jt,St.x0),en=xt(jt,St.x1),ut=xt(Bt,St.y0),ar=xt(Bt,St.y1);Xr=[[vn,ut],[vn,ar],[en,ar],[en,ut]],Wt=Math.min(vn,en),Qt=Math.max(vn,en),Zt=Math.min(ut,ar),cr=Math.max(ut,ar),Xr.xmin=Wt,Xr.xmax=Qt,Xr.ymin=Zt,Xr.ymax=cr,Xr.xref=wt,Xr.yref=Ct,Xr.subtract=!1,Xr.isRect=!0,Ge.push(Xr)}else if(St.type==="path")for(var rr=St.path.split("Z"),Kt=[],Er=0;Er<rr.length;Er++){var st=rr[Er];if(!!st){st+="Z";var et=d.extractPathCoords(st,p.paramIsX,"raw"),ht=d.extractPathCoords(st,p.paramIsY,"raw");Wt=1/0,Qt=-1/0,Zt=1/0,cr=-1/0,Xr=[];for(var vt=0;vt<et.length;vt++){var kt=xt(jt,et[vt]),Vt=xt(Bt,ht[vt]);Xr.push([kt,Vt]),Wt=Math.min(kt,Wt),Qt=Math.max(kt,Qt),Zt=Math.min(Vt,Zt),cr=Math.max(Vt,cr)}Xr.xmin=Wt,Xr.xmax=Qt,Xr.ymin=Zt,Xr.ymax=cr,Xr.xref=wt,Xr.yref=Ct,Xr.subtract=je(Xr,Kt),Kt.push(Xr),Ge.push(Xr)}}}}return Ge}function je(We,ot){for(var Ge=!1,Me=0;Me<ot.length;Me++)for(var Ve=ot[Me],Qe=0;Qe<We.length;Qe++)if(f(We[Qe],Ve)){Ge=!Ge;break}return Ge}function xt(We,ot){return We.type==="date"&&(ot=ot.replace("_"," ")),We.type==="log"?We.c2p(ot):We.r2p(ot,null,We.calendar)}function Nt(We){for(var ot=We.length,Ge=[],Me=0;Me<ot;Me++){var Ve=We[Me];Ge=Ge.concat(Ve),Ge=Ge.concat([Ve[0]])}return tr(Ge)}function tr(We){return We.isRect=We.length===5&&We[0][0]===We[4][0]&&We[0][1]===We[4][1]&&We[0][0]===We[1][0]&&We[2][0]===We[3][0]&&We[0][1]===We[3][1]&&We[1][1]===We[2][1]||We[0][1]===We[1][1]&&We[2][1]===We[3][1]&&We[0][0]===We[3][0]&&We[1][0]===We[2][0],We.isRect&&(We.xmin=Math.min(We[0][0],We[2][0]),We.xmax=Math.max(We[0][0],We[2][0]),We.ymin=Math.min(We[0][1],We[2][1]),We.ymax=Math.max(We[0][1],We[2][1])),We}function Ht(We){return function(ot,Ge){for(var Me,Ve,Qe=0;Qe<We.length;Qe++){var tt=We[Qe],St=tt._id,wt=St.charAt(0);if(Ge.isRect){Me||(Me={});var Ct=Ge[wt+"min"],jt=Ge[wt+"max"];Ct!==void 0&&jt!==void 0&&(Me[St]=[B(tt,Ct),B(tt,jt)].sort(v))}else Ve||(Ve={}),Ve[St]=Ge.map(G(tt))}Me&&(ot.range=Me),Ve&&(ot.lassoPoints=Ve)}}function Pt(We){var ot=We.plotinfo;return ot.fillRangeItems||Ht(We.xaxes.concat(We.yaxes))}function $t(We,ot){We.emit("plotly_selecting",ot)}function Ut(We,ot){ot&&(ot.selections=(We.layout||{}).selections||[]),We.emit("plotly_selected",ot)}function Lt(We){We.emit("plotly_deselect",null)}U.exports={reselect:we,prepSelect:j,clearOutline:m,clearSelectionsCache:Z,selectOnClick:re}},{"../../lib":515,"../../lib/clear_gl_canvases":499,"../../lib/polygon":527,"../../lib/throttle":542,"../../plot_api/subroutines":556,"../../plots/cartesian/axis_ids":570,"../../registry":647,"../color":367,"../dragelement/helpers":385,"../drawing":389,"../fx":407,"../fx/helpers":403,"../shapes/constants":459,"../shapes/display_outlines":461,"../shapes/draw_newshape/helpers":466,"../shapes/draw_newshape/newshapes":467,"../shapes/handle_outline":468,"../shapes/helpers":469,"./constants":448,"./draw":450,"./draw_newselection/newselections":453,"./helpers":454,"point-in-polygon/nested":254,polybooljs:255}],457:[function(i,U,V){var w=i("../annotations/attributes"),f=i("../../traces/scatter/attributes").line,M=i("../drawing/attributes").dash,T=i("../../lib/extend").extendFlat,e=i("../../plot_api/plot_template").templatedArray;i("../../constants/axis_placeable_objects"),U.exports=e("shape",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:T({},w.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:T({},w.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:T({},f.color,{editType:"arraydraw"}),width:T({},f.width,{editType:"calc+arraydraw"}),dash:T({},M,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":484,"../../lib/extend":505,"../../plot_api/plot_template":555,"../../traces/scatter/attributes":936,"../annotations/attributes":350,"../drawing/attributes":388}],458:[function(i,U,V){var w=i("../../lib"),f=i("../../plots/cartesian/axes"),M=i("./constants"),T=i("./helpers");U.exports=function(h){var s=h._fullLayout,o=w.filterVisible(s.shapes);if(!(!o.length||!h._fullData.length))for(var y=0;y<o.length;y++){var d=o[y];d._extremes={};var p,c,m=f.getRefType(d.xref),l=f.getRefType(d.yref);if(d.xref!=="paper"&&m!=="domain"){var x=d.xsizemode==="pixel"?d.xanchor:d.x0,u=d.xsizemode==="pixel"?d.xanchor:d.x1;p=f.getFromId(h,d.xref),c=r(p,x,u,d.path,M.paramIsX),c&&(d._extremes[p._id]=f.findExtremes(p,c,e(d)))}if(d.yref!=="paper"&&l!=="domain"){var A=d.ysizemode==="pixel"?d.yanchor:d.y0,_=d.ysizemode==="pixel"?d.yanchor:d.y1;p=f.getFromId(h,d.yref),c=r(p,A,_,d.path,M.paramIsY),c&&(d._extremes[p._id]=f.findExtremes(p,c,a(d)))}}};function e(t){return n(t.line.width,t.xsizemode,t.x0,t.x1,t.path,!1)}function a(t){return n(t.line.width,t.ysizemode,t.y0,t.y1,t.path,!0)}function n(t,h,s,o,y,d){var p=t/2,c=d;if(h==="pixel"){var m=y?T.extractPathCoords(y,d?M.paramIsY:M.paramIsX):[s,o],l=w.aggNums(Math.max,null,m),x=w.aggNums(Math.min,null,m),u=x<0?Math.abs(x)+p:p,A=l>0?l+p:p;return{ppad:p,ppadplus:c?u:A,ppadminus:c?A:u}}else return{ppad:p}}function r(t,h,s,o,y){var d=t.type==="category"||t.type==="multicategory"?t.r2c:t.d2c;if(h!==void 0)return[d(h),d(s)];if(!!o){var p=1/0,c=-1/0,m=o.match(M.segmentRE),l,x,u,A,_;for(t.type==="date"&&(d=T.decodeDate(d)),l=0;l<m.length;l++)x=m[l],u=y[x.charAt(0)].drawn,u!==void 0&&(A=m[l].substr(1).match(M.paramRE),!(!A||A.length<u)&&(_=d(A[u]),_<p&&(p=_),_>c&&(c=_)));if(c>=p)return[p,c]}}},{"../../lib":515,"../../plots/cartesian/axes":566,"./constants":459,"./helpers":469}],459:[function(i,U,V){U.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},{}],460:[function(i,U,V){var w=i("../../lib"),f=i("../../plots/cartesian/axes"),M=i("../../plots/array_container_defaults"),T=i("./attributes"),e=i("./helpers");U.exports=function(r,t){M(r,t,{name:"shapes",handleItemDefaults:a})};function a(n,r,t){function h(G,Q){return w.coerce(n,r,T,G,Q)}var s=h("visible");if(!!s){var o=h("path"),y=o?"path":"rect",d=h("type",y),p=d!=="path";p&&delete r.path,h("editable"),h("layer"),h("opacity"),h("fillcolor"),h("fillrule");var c=h("line.width");c&&(h("line.color"),h("line.dash"));for(var m=h("xsizemode"),l=h("ysizemode"),x=["x","y"],u=0;u<2;u++){var A=x[u],_=A+"anchor",g=A==="x"?m:l,b={_fullLayout:t},v,k,S,E=f.coerceRef(n,r,b,A,void 0,"paper"),C=f.getRefType(E);if(C==="range"?(v=f.getFromId(b,E),v._shapeIndices.push(r._index),S=e.rangeToShapePosition(v),k=e.shapePositionToRange(v)):k=S=w.identity,p){var F=.25,I=.75,D=A+"0",R=A+"1",O=n[D],z=n[R];n[D]=k(n[D],!0),n[R]=k(n[R],!0),g==="pixel"?(h(D,0),h(R,10)):(f.coercePosition(r,b,h,E,D,F),f.coercePosition(r,b,h,E,R,I)),r[D]=S(r[D]),r[R]=S(r[R]),n[D]=O,n[R]=z}if(g==="pixel"){var B=n[_];n[_]=k(n[_],!0),f.coercePosition(r,b,h,E,_,.25),r[_]=S(r[_]),n[_]=B}}p&&w.noneOrAll(n,r,["x0","x1","y0","y1"])}}},{"../../lib":515,"../../plots/array_container_defaults":561,"../../plots/cartesian/axes":566,"./attributes":457,"./helpers":469}],461:[function(i,U,V){var w=i("../../lib"),f=w.strTranslate,M=i("../dragelement"),T=i("../dragelement/helpers"),e=T.drawMode,a=T.selectMode,n=i("../../registry"),r=i("../color"),t=i("./draw_newshape/constants"),h=t.i000,s=t.i090,o=t.i180,y=t.i270,d=i("./handle_outline"),p=d.clearOutlineControllers,c=i("./draw_newshape/helpers"),m=c.pointsOnRectangle,l=c.pointsOnEllipse,x=c.writePaths,u=i("./draw_newshape/newshapes"),A=i("../selections/draw_newselection/newselections");U.exports=function v(k,S,E,C){C||(C=0);var F=E.gd;function I(){v(k,S,E,C++),l(k[0])&&D({redrawing:!0})}function D(ce){var de={};E.isActiveShape!==void 0&&(E.isActiveShape=!1,de=u(S,E)),E.isActiveSelection!==void 0&&(E.isActiveSelection=!1,de=A(S,E),F._fullLayout._reselect=!0),Object.keys(de).length&&n.call((ce||{}).redrawing?"relayout":"_guiRelayout",F,de)}var R=F._fullLayout,O=R._zoomlayer,z=E.dragmode,B=e(z),G=a(z);(B||G)&&(F._fullLayout._outlining=!0),p(F),S.attr("d",x(k));var Q,X,j,re,ue;if(!C&&(E.isActiveShape||E.isActiveSelection)){ue=_([],k);var K=O.append("g").attr("class","outline-controllers");Z(K),be()}function te(ce){j=+ce.srcElement.getAttribute("data-i"),re=+ce.srcElement.getAttribute("data-j"),Q[j][re].moveFn=Y}function Y(ce,de){if(!!k.length){var ye=ue[j][re][1],ge=ue[j][re][2],me=k[j],Se=me.length;if(m(me)){var Le=ce,Oe=de;if(E.isActiveSelection){var we=g(me,re);we[1]===me[re][1]?Oe=0:Le=0}for(var Ce=0;Ce<Se;Ce++)if(Ce!==re){var Ke=me[Ce];Ke[1]===me[re][1]&&(Ke[1]=ye+Le),Ke[2]===me[re][2]&&(Ke[2]=ge+Oe)}if(me[re][1]=ye+Le,me[re][2]=ge+Oe,!m(me))for(var Ye=0;Ye<Se;Ye++)for(var Fe=0;Fe<me[Ye].length;Fe++)me[Ye][Fe]=ue[j][Ye][Fe]}else me[re][1]=ye+ce,me[re][2]=ge+de;I()}}function H(){D()}function ee(){if(!!k.length&&!!k[j]&&!!k[j].length){for(var ce=[],de=0;de<k[j].length;de++)de!==re&&ce.push(k[j][de]);ce.length>1&&!(ce.length===2&&ce[1][0]==="Z")&&(re===0&&(ce[0][0]="M"),k[j]=ce,I(),D())}}function ne(ce,de){if(ce===2){j=+de.srcElement.getAttribute("data-i"),re=+de.srcElement.getAttribute("data-j");var ye=k[j];!m(ye)&&!l(ye)&&ee()}}function Z(ce){Q=[];for(var de=0;de<k.length;de++){var ye=k[de],ge=m(ye),me=!ge&&l(ye);Q[de]=[];for(var Se=ye.length,Le=0;Le<Se;Le++)if(ye[Le][0]!=="Z"&&!(me&&Le!==h&&Le!==s&&Le!==o&&Le!==y)){var Oe=ge&&E.isActiveSelection,we;Oe&&(we=g(ye,Le));var Ce=ye[Le][1],Ke=ye[Le][2],Ye=ce.append(Oe?"rect":"circle").attr("data-i",de).attr("data-j",Le).style({fill:r.background,stroke:r.defaultLine,"stroke-width":1,"shape-rendering":"crispEdges"});if(Oe){var Fe=we[1]-Ce,Re=we[2]-Ke,je=Re?5:Math.max(Math.min(25,Math.abs(Fe)-5),5),xt=Fe?5:Math.max(Math.min(25,Math.abs(Re)-5),5);Ye.classed(Re?"cursor-ew-resize":"cursor-ns-resize",!0).attr("width",je).attr("height",xt).attr("x",Ce-je/2).attr("y",Ke-xt/2).attr("transform",f(Fe/2,Re/2))}else Ye.classed("cursor-grab",!0).attr("r",5).attr("cx",Ce).attr("cy",Ke);Q[de][Le]={element:Ye.node(),gd:F,prepFn:te,doneFn:H,clickFn:ne},M.init(Q[de][Le])}}}function q(ce,de){if(!!k.length)for(var ye=0;ye<k.length;ye++)for(var ge=0;ge<k[ye].length;ge++)for(var me=0;me+2<k[ye][ge].length;me+=2)k[ye][ge][me+1]=ue[ye][ge][me+1]+ce,k[ye][ge][me+2]=ue[ye][ge][me+2]+de}function ie(ce,de){q(ce,de),I()}function se(ce){j=+ce.srcElement.getAttribute("data-i"),j||(j=0),X[j].moveFn=ie}function ae(){D()}function oe(ce){ce===2&&b(F)}function be(){if(X=[],!!k.length){var ce=0;X[ce]={element:S[0][0],gd:F,prepFn:se,doneFn:ae,clickFn:oe},M.init(X[ce])}}};function _(v,k){for(var S=0;S<k.length;S++){var E=k[S];v[S]=[];for(var C=0;C<E.length;C++){v[S][C]=[];for(var F=0;F<E[C].length;F++)v[S][C][F]=E[C][F]}}return v}function g(v,k){var S=v[k][1],E=v[k][2],C=v.length,F,I,D;return F=(k+1)%C,I=v[F][1],D=v[F][2],I===S&&D===E&&(F=(k+2)%C,I=v[F][1],D=v[F][2]),[F,I,D]}function b(v){if(!!a(v._fullLayout.dragmode)){p(v);var k=v._fullLayout._activeSelectionIndex,S=(v.layout||{}).selections||[];if(k<S.length){for(var E=[],C=0;C<S.length;C++)C!==k&&E.push(S[C]);delete v._fullLayout._activeSelectionIndex;var F=v._fullLayout.selections[k];v._fullLayout._deselect={xref:F.xref,yref:F.yref},n.call("_guiRelayout",v,{selections:E})}}}},{"../../lib":515,"../../registry":647,"../color":367,"../dragelement":386,"../dragelement/helpers":385,"../selections/draw_newselection/newselections":453,"./draw_newshape/constants":464,"./draw_newshape/helpers":466,"./draw_newshape/newshapes":467,"./handle_outline":468}],462:[function(i,U,V){var w=i("../../registry"),f=i("../../lib"),M=i("../../plots/cartesian/axes"),T=i("./draw_newshape/helpers").readPaths,e=i("./display_outlines"),a=i("./handle_outline").clearOutlineControllers,n=i("../color"),r=i("../drawing"),t=i("../../plot_api/plot_template").arrayEditor,h=i("../dragelement"),s=i("../../lib/setcursor"),o=i("./constants"),y=i("./helpers"),d=y.getPathString;U.exports={draw:p,drawOne:l,eraseActiveShape:b};function p(v){var k=v._fullLayout;k._shapeUpperLayer.selectAll("path").remove(),k._shapeLowerLayer.selectAll("path").remove();for(var S in k._plots){var E=k._plots[S].shapelayer;E&&E.selectAll("path").remove()}for(var C=0;C<k.shapes.length;C++)k.shapes[C].visible&&l(v,C)}function c(v){return!!v._fullLayout._outlining}function m(v){return!v._context.edits.shapePosition}function l(v,k){v._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+k+'"]').remove();var S=y.makeShapesOptionsAndPlotinfo(v,k),E=S.options,C=S.plotinfo;if(!E._input||E.visible===!1)return;if(E.layer!=="below")I(v._fullLayout._shapeUpperLayer);else if(E.xref==="paper"||E.yref==="paper")I(v._fullLayout._shapeLowerLayer);else if(C._hadPlotinfo){var F=C.mainplotinfo||C;I(F.shapelayer)}else I(v._fullLayout._shapeLowerLayer);function I(D){var R=d(v,E),O={"data-index":k,"fill-rule":E.fillrule,d:R},z=E.opacity,B=E.fillcolor,G=E.line.width?E.line.color:"rgba(0,0,0,0)",Q=E.line.width,X=E.line.dash;!Q&&E.editable===!0&&(Q=5,X="solid");var j=R[R.length-1]!=="Z",re=m(v)&&E.editable&&v._fullLayout._activeShapeIndex===k;re&&(B=j?"rgba(0,0,0,0)":v._fullLayout.activeshape.fillcolor,z=v._fullLayout.activeshape.opacity);var ue=D.append("path").attr(O).style("opacity",z).call(n.stroke,G).call(n.fill,B).call(r.dashLine,X,Q);x(ue,v,E);var K;if((re||v._context.edits.shapePosition)&&(K=t(v.layout,"shapes",E)),re){ue.style({cursor:"move"});var te={element:ue.node(),plotinfo:C,gd:v,editHelpers:K,isActiveShape:!0},Y=T(R,v);e(Y,ue,te)}else v._context.edits.shapePosition?u(v,ue,E,k,D,K):E.editable===!0&&ue.style("pointer-events",j||n.opacity(B)*z<=.5?"stroke":"all");ue.node().addEventListener("click",function(){return _(v,ue)})}}function x(v,k,S){var E=(S.xref+S.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");r.setClipUrl(v,E?"clip"+k._fullLayout._uid+E:null,k)}function u(v,k,S,E,C,F){var I=10,D=10,R=S.xsizemode==="pixel",O=S.ysizemode==="pixel",z=S.type==="line",B=S.type==="path",G=F.modifyItem,Q,X,j,re,ue,K,te,Y,H,ee,ne,Z,q,ie,se,ae=M.getFromId(v,S.xref),oe=M.getRefType(S.xref),be=M.getFromId(v,S.yref),ce=M.getRefType(S.yref),de=y.getDataToPixel(v,ae,!1,oe),ye=y.getDataToPixel(v,be,!0,ce),ge=y.getPixelToData(v,ae,!1,oe),me=y.getPixelToData(v,be,!0,ce),Se=we(),Le={element:Se.node(),gd:v,prepFn:Ye,doneFn:Fe,clickFn:Re},Oe;h.init(Le),Se.node().onmousemove=Ke;function we(){return z?Ce():k}function Ce(){var Pt=10,$t=Math.max(S.line.width,Pt),Ut=C.append("g").attr("data-index",E);Ut.append("path").attr("d",k.attr("d")).style({cursor:"move","stroke-width":$t,"stroke-opacity":"0"});var Lt={"fill-opacity":"0"},We=Math.max($t/2,Pt);return Ut.append("circle").attr({"data-line-point":"start-point",cx:R?de(S.xanchor)+S.x0:de(S.x0),cy:O?ye(S.yanchor)-S.y0:ye(S.y0),r:We}).style(Lt).classed("cursor-grab",!0),Ut.append("circle").attr({"data-line-point":"end-point",cx:R?de(S.xanchor)+S.x1:de(S.x1),cy:O?ye(S.yanchor)-S.y1:ye(S.y1),r:We}).style(Lt).classed("cursor-grab",!0),Ut}function Ke(Pt){if(c(v)){Oe=null;return}if(z)Pt.target.tagName==="path"?Oe="move":Oe=Pt.target.attributes["data-line-point"].value==="start-point"?"resize-over-start-point":"resize-over-end-point";else{var $t=Le.element.getBoundingClientRect(),Ut=$t.right-$t.left,Lt=$t.bottom-$t.top,We=Pt.clientX-$t.left,ot=Pt.clientY-$t.top,Ge=!B&&Ut>I&&Lt>D&&!Pt.shiftKey?h.getCursor(We/Ut,1-ot/Lt):"move";s(k,Ge),Oe=Ge.split("-")[0]}}function Ye(Pt){c(v)||(R&&(ue=de(S.xanchor)),O&&(K=ye(S.yanchor)),S.type==="path"?se=S.path:(Q=R?S.x0:de(S.x0),X=O?S.y0:ye(S.y0),j=R?S.x1:de(S.x1),re=O?S.y1:ye(S.y1)),Q<j?(H=Q,q="x0",ee=j,ie="x1"):(H=j,q="x1",ee=Q,ie="x0"),!O&&X<re||O&&X>re?(te=X,ne="y0",Y=re,Z="y1"):(te=re,ne="y1",Y=X,Z="y0"),Ke(Pt),Nt(C,S),Ht(k,S,v),Le.moveFn=Oe==="move"?je:xt,Le.altKey=Pt.altKey)}function Fe(){c(v)||(s(k),tr(C),x(k,v,S),w.call("_guiRelayout",v,F.getUpdateObj()))}function Re(){c(v)||tr(C)}function je(Pt,$t){if(S.type==="path"){var Ut=function(ot){return ot},Lt=Ut,We=Ut;R?G("xanchor",S.xanchor=ge(ue+Pt)):(Lt=function(Ge){return ge(de(Ge)+Pt)},ae&&ae.type==="date"&&(Lt=y.encodeDate(Lt))),O?G("yanchor",S.yanchor=me(K+$t)):(We=function(Ge){return me(ye(Ge)+$t)},be&&be.type==="date"&&(We=y.encodeDate(We))),G("path",S.path=A(se,Lt,We))}else R?G("xanchor",S.xanchor=ge(ue+Pt)):(G("x0",S.x0=ge(Q+Pt)),G("x1",S.x1=ge(j+Pt))),O?G("yanchor",S.yanchor=me(K+$t)):(G("y0",S.y0=me(X+$t)),G("y1",S.y1=me(re+$t)));k.attr("d",d(v,S)),Nt(C,S)}function xt(Pt,$t){if(B){var Ut=function(Zt){return Zt},Lt=Ut,We=Ut;R?G("xanchor",S.xanchor=ge(ue+Pt)):(Lt=function(cr){return ge(de(cr)+Pt)},ae&&ae.type==="date"&&(Lt=y.encodeDate(Lt))),O?G("yanchor",S.yanchor=me(K+$t)):(We=function(cr){return me(ye(cr)+$t)},be&&be.type==="date"&&(We=y.encodeDate(We))),G("path",S.path=A(se,Lt,We))}else if(z){if(Oe==="resize-over-start-point"){var ot=Q+Pt,Ge=O?X-$t:X+$t;G("x0",S.x0=R?ot:ge(ot)),G("y0",S.y0=O?Ge:me(Ge))}else if(Oe==="resize-over-end-point"){var Me=j+Pt,Ve=O?re-$t:re+$t;G("x1",S.x1=R?Me:ge(Me)),G("y1",S.y1=O?Ve:me(Ve))}}else{var Qe=function(Zt){return Oe.indexOf(Zt)!==-1},tt=Qe("n"),St=Qe("s"),wt=Qe("w"),Ct=Qe("e"),jt=tt?te+$t:te,Bt=St?Y+$t:Y,Wt=wt?H+Pt:H,Qt=Ct?ee+Pt:ee;O&&(tt&&(jt=te-$t),St&&(Bt=Y-$t)),(!O&&Bt-jt>D||O&&jt-Bt>D)&&(G(ne,S[ne]=O?jt:me(jt)),G(Z,S[Z]=O?Bt:me(Bt))),Qt-Wt>I&&(G(q,S[q]=R?Wt:ge(Wt)),G(ie,S[ie]=R?Qt:ge(Qt)))}k.attr("d",d(v,S)),Nt(C,S)}function Nt(Pt,$t){(R||O)&&Ut();function Ut(){var Lt=$t.type!=="path",We=Pt.selectAll(".visual-cue").data([0]),ot=1;We.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":ot}).classed("visual-cue",!0);var Ge=de(R?$t.xanchor:f.midRange(Lt?[$t.x0,$t.x1]:y.extractPathCoords($t.path,o.paramIsX))),Me=ye(O?$t.yanchor:f.midRange(Lt?[$t.y0,$t.y1]:y.extractPathCoords($t.path,o.paramIsY)));if(Ge=y.roundPositionForSharpStrokeRendering(Ge,ot),Me=y.roundPositionForSharpStrokeRendering(Me,ot),R&&O){var Ve="M"+(Ge-1-ot)+","+(Me-1-ot)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z";We.attr("d",Ve)}else if(R){var Qe="M"+(Ge-1-ot)+","+(Me-9-ot)+"v18 h2 v-18 Z";We.attr("d",Qe)}else{var tt="M"+(Ge-9-ot)+","+(Me-1-ot)+"h18 v2 h-18 Z";We.attr("d",tt)}}}function tr(Pt){Pt.selectAll(".visual-cue").remove()}function Ht(Pt,$t,Ut){var Lt=$t.xref,We=$t.yref,ot=M.getFromId(Ut,Lt),Ge=M.getFromId(Ut,We),Me="";Lt!=="paper"&&!ot.autorange&&(Me+=Lt),We!=="paper"&&!Ge.autorange&&(Me+=We),r.setClipUrl(Pt,Me?"clip"+Ut._fullLayout._uid+Me:null,Ut)}}function A(v,k,S){return v.replace(o.segmentRE,function(E){var C=0,F=E.charAt(0),I=o.paramIsX[F],D=o.paramIsY[F],R=o.numParams[F],O=E.substr(1).replace(o.paramRE,function(z){return C>=R||(I[C]?z=k(z):D[C]&&(z=S(z)),C++),z});return F+O})}function _(v,k){if(!!m(v)){var S=k.node(),E=+S.getAttribute("data-index");if(E>=0){if(E===v._fullLayout._activeShapeIndex){g(v);return}v._fullLayout._activeShapeIndex=E,v._fullLayout._deactivateShape=g,p(v)}}}function g(v){if(!!m(v)){var k=v._fullLayout._activeShapeIndex;k>=0&&(a(v),delete v._fullLayout._activeShapeIndex,p(v))}}function b(v){if(!!m(v)){a(v);var k=v._fullLayout._activeShapeIndex,S=(v.layout||{}).shapes||[];if(k<S.length){for(var E=[],C=0;C<S.length;C++)C!==k&&E.push(S[C]);delete v._fullLayout._activeShapeIndex,w.call("_guiRelayout",v,{shapes:E})}}}},{"../../lib":515,"../../lib/setcursor":536,"../../plot_api/plot_template":555,"../../plots/cartesian/axes":566,"../../registry":647,"../color":367,"../dragelement":386,"../drawing":389,"./constants":459,"./display_outlines":461,"./draw_newshape/helpers":466,"./handle_outline":468,"./helpers":469}],463:[function(i,U,V){var w=i("../../drawing/attributes").dash,f=i("../../../lib/extend").extendFlat;U.exports={newshape:{line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:0,dflt:4,editType:"none"},dash:f({},w,{dflt:"solid",editType:"none"}),editType:"none"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"none"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"none"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal",editType:"none"},editType:"none"},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},{"../../../lib/extend":505,"../../drawing/attributes":388}],464:[function(i,U,V){var w=32;U.exports={CIRCLE_SIDES:w,i000:0,i090:w/4,i180:w/2,i270:w/4*3,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},{}],465:[function(i,U,V){var w=i("../../color");U.exports=function(M,T,e){e("newshape.drawdirection"),e("newshape.layer"),e("newshape.fillcolor"),e("newshape.fillrule"),e("newshape.opacity");var a=e("newshape.line.width");if(a){var n=(M||{}).plot_bgcolor||"#FFF";e("newshape.line.color",w.contrast(n)),e("newshape.line.dash")}e("activeshape.fillcolor"),e("activeshape.opacity")}},{"../../color":367}],466:[function(i,U,V){var w=i("parse-svg-path"),f=i("./constants"),M=f.CIRCLE_SIDES,T=f.SQRT2,e=i("../../selections/helpers"),a=e.p2r,n=e.r2p,r=[0,3,4,5,6,1,2],t=[0,3,4,1,2];V.writePaths=function(o){var y=o.length;if(!y)return"M0,0Z";for(var d="",p=0;p<y;p++)for(var c=o[p].length,m=0;m<c;m++){var l=o[p][m][0];if(l==="Z")d+="Z";else for(var x=o[p][m].length,u=0;u<x;u++){var A=u;l==="Q"||l==="S"?A=t[u]:l==="C"&&(A=r[u]),d+=o[p][m][A],u>0&&u<x-1&&(d+=",")}}return d},V.readPaths=function(o,y,d,p){var c=w(o),m=[],l=-1,x=function(){l++,m[l]=[]},u,A=0,_=0,g,b,v=function(){g=A,b=_};v();for(var k=0;k<c.length;k++){var S=[],E,C,F,I,D=c[k][0],R=D;switch(D){case"M":x(),A=+c[k][1],_=+c[k][2],S.push([R,A,_]),v();break;case"Q":case"S":E=+c[k][1],F=+c[k][2],A=+c[k][3],_=+c[k][4],S.push([R,A,_,E,F]);break;case"C":E=+c[k][1],F=+c[k][2],C=+c[k][3],I=+c[k][4],A=+c[k][5],_=+c[k][6],S.push([R,A,_,E,F,C,I]);break;case"T":case"L":A=+c[k][1],_=+c[k][2],S.push([R,A,_]);break;case"H":R="L",A=+c[k][1],S.push([R,A,_]);break;case"V":R="L",_=+c[k][1],S.push([R,A,_]);break;case"A":R="L";var O=+c[k][1],z=+c[k][2];+c[k][4]||(O=-O,z=-z);var B=A-O,G=_;for(u=1;u<=M/2;u++){var Q=2*Math.PI*u/M;S.push([R,B+O*Math.cos(Q),G+z*Math.sin(Q)])}break;case"Z":(A!==g||_!==b)&&(A=g,_=b,S.push([R,A,_]));break}for(var X=(d||{}).domain,j=y._fullLayout._size,re=d&&d.xsizemode==="pixel",ue=d&&d.ysizemode==="pixel",K=p===!1,te=0;te<S.length;te++){for(u=0;u+2<7;u+=2){var Y=S[te][u+1],H=S[te][u+2];Y===void 0||H===void 0||(A=Y,_=H,d&&(d.xaxis&&d.xaxis.p2r?(K&&(Y-=d.xaxis._offset),re?Y=n(d.xaxis,d.xanchor)+Y:Y=a(d.xaxis,Y)):(K&&(Y-=j.l),X?Y=X.x[0]+Y/j.w:Y=Y/j.w),d.yaxis&&d.yaxis.p2r?(K&&(H-=d.yaxis._offset),ue?H=n(d.yaxis,d.yanchor)-H:H=a(d.yaxis,H)):(K&&(H-=j.t),X?H=X.y[1]-H/j.h:H=1-H/j.h)),S[te][u+1]=Y,S[te][u+2]=H)}m[l].push(S[te].slice())}}return m};function h(o,y){return Math.abs(o-y)<=1e-6}function s(o,y){var d=y[1]-o[1],p=y[2]-o[2];return Math.sqrt(d*d+p*p)}V.pointsOnRectangle=function(o){var y=o.length;if(y!==5)return!1;for(var d=1;d<3;d++){var p=o[0][d]-o[1][d],c=o[3][d]-o[2][d];if(!h(p,c))return!1;var m=o[0][d]-o[3][d],l=o[1][d]-o[2][d];if(!h(m,l))return!1}return!h(o[0][1],o[1][1])&&!h(o[0][1],o[3][1])?!1:!!(s(o[0],o[1])*s(o[0],o[3]))},V.pointsOnEllipse=function(o){var y=o.length;if(y!==M+1)return!1;y=M;for(var d=0;d<y;d++){var p=(y*2-d)%y,c=(y/2+p)%y,m=(y/2+d)%y;if(!h(s(o[d],o[m]),s(o[p],o[c])))return!1}return!0},V.handleEllipse=function(o,y,d){if(!o)return[y,d];var p=V.ellipseOver({x0:y[0],y0:y[1],x1:d[0],y1:d[1]}),c=(p.x1+p.x0)/2,m=(p.y1+p.y0)/2,l=(p.x1-p.x0)/2,x=(p.y1-p.y0)/2;l||(l=x=x/T),x||(x=l=l/T);for(var u=[],A=0;A<M;A++){var _=A*2*Math.PI/M;u.push([c+l*Math.cos(_),m+x*Math.sin(_)])}return u},V.ellipseOver=function(o){var y=o.x0,d=o.y0,p=o.x1,c=o.y1,m=p-y,l=c-d;y-=m,d-=l;var x=(y+p)/2,u=(d+c)/2,A=T;return m*=A,l*=A,{x0:x-m,y0:u-l,x1:x+m,y1:u+l}},V.fixDatesForPaths=function(o,y,d){var p=y.type==="date",c=d.type==="date";if(!p&&!c)return o;for(var m=0;m<o.length;m++)for(var l=0;l<o[m].length;l++)for(var x=0;x+2<o[m][l].length;x+=2)p&&(o[m][l][x+1]=o[m][l][x+1].replace(" ","_")),c&&(o[m][l][x+2]=o[m][l][x+2].replace(" ","_"));return o}},{"../../selections/helpers":454,"./constants":464,"parse-svg-path":250}],467:[function(i,U,V){var w=i("../../dragelement/helpers"),f=w.drawMode,M=w.openMode,T=i("./constants"),e=T.i000,a=T.i090,n=T.i180,r=T.i270,t=T.cos45,h=T.sin45,s=i("../../selections/helpers"),o=s.p2r,y=s.r2p,d=i(".././handle_outline"),p=d.clearOutline,c=i("./helpers"),m=c.readPaths,l=c.writePaths,x=c.ellipseOver,u=c.fixDatesForPaths;U.exports=function(_,g){if(!!_.length){var b=_[0][0];if(!!b){var v=b.getAttribute("d"),k=g.gd,S=k._fullLayout.newshape,E=g.plotinfo,C=E.xaxis,F=E.yaxis,I=!!E.domain||!E.xaxis,D=!!E.domain||!E.yaxis,R=g.isActiveShape,O=g.dragmode,z=(k.layout||{}).shapes||[];if(!f(O)&&R!==void 0){var B=k._fullLayout._activeShapeIndex;if(B<z.length)switch(k._fullLayout.shapes[B].type){case"rect":O="drawrect";break;case"circle":O="drawcircle";break;case"line":O="drawline";break;case"path":var G=z[B].path||"";G[G.length-1]==="Z"?O="drawclosedpath":O="drawopenpath";break}}var Q=M(O),X=m(v,k,E,R),j={editable:!0,xref:I?"paper":C._id,yref:D?"paper":F._id,layer:S.layer,opacity:S.opacity,line:{color:S.line.color,width:S.line.width,dash:S.line.dash}};Q||(j.fillcolor=S.fillcolor,j.fillrule=S.fillrule);var re;if(X.length===1&&(re=X[0]),re&&re.length===5&&O==="drawrect")j.type="rect",j.x0=re[0][1],j.y0=re[0][2],j.x1=re[2][1],j.y1=re[2][2];else if(re&&O==="drawline")j.type="line",j.x0=re[0][1],j.y0=re[0][2],j.x1=re[1][1],j.y1=re[1][2];else if(re&&O==="drawcircle"){j.type="circle";var ue=re[e][1],K=re[a][1],te=re[n][1],Y=re[r][1],H=re[e][2],ee=re[a][2],ne=re[n][2],Z=re[r][2],q=E.xaxis&&(E.xaxis.type==="date"||E.xaxis.type==="log"),ie=E.yaxis&&(E.yaxis.type==="date"||E.yaxis.type==="log");q&&(ue=y(E.xaxis,ue),K=y(E.xaxis,K),te=y(E.xaxis,te),Y=y(E.xaxis,Y)),ie&&(H=y(E.yaxis,H),ee=y(E.yaxis,ee),ne=y(E.yaxis,ne),Z=y(E.yaxis,Z));var se=(K+Y)/2,ae=(H+ne)/2,oe=(Y-K+te-ue)/2,be=(Z-ee+ne-H)/2,ce=x({x0:se,y0:ae,x1:se+oe*t,y1:ae+be*h});q&&(ce.x0=o(E.xaxis,ce.x0),ce.x1=o(E.xaxis,ce.x1)),ie&&(ce.y0=o(E.yaxis,ce.y0),ce.y1=o(E.yaxis,ce.y1)),j.x0=ce.x0,j.y0=ce.y0,j.x1=ce.x1,j.y1=ce.y1}else j.type="path",C&&F&&u(X,C,F),j.path=l(X),re=null;p(k);for(var de=g.editHelpers,ye=(de||{}).modifyItem,ge=[],me=0;me<z.length;me++){var Se=k._fullLayout.shapes[me];if(ge[me]=Se._input,R!==void 0&&me===k._fullLayout._activeShapeIndex){var Le=j;switch(Se.type){case"line":case"rect":case"circle":ye("x0",Le.x0),ye("x1",Le.x1),ye("y0",Le.y0),ye("y1",Le.y1);break;case"path":ye("path",Le.path);break}}}return R===void 0?(ge.push(j),ge):de?de.getUpdateObj():{}}}}},{"../../dragelement/helpers":385,"../../selections/helpers":454,".././handle_outline":468,"./constants":464,"./helpers":466}],468:[function(i,U,V){function w(M){var T=M._fullLayout._zoomlayer;T&&T.selectAll(".outline-controllers").remove()}function f(M){var T=M._fullLayout._zoomlayer;T&&T.selectAll(".select-outline").remove(),M._fullLayout._outlining=!1}U.exports={clearOutlineControllers:w,clearOutline:f}},{}],469:[function(i,U,V){var w=i("./constants"),f=i("../../lib"),M=i("../../plots/cartesian/axes");V.rangeToShapePosition=function(e){return e.type==="log"?e.r2d:function(a){return a}},V.shapePositionToRange=function(e){return e.type==="log"?e.d2r:function(a){return a}},V.decodeDate=function(e){return function(a){return a.replace&&(a=a.replace("_"," ")),e(a)}},V.encodeDate=function(e){return function(a){return e(a).replace(" ","_")}},V.extractPathCoords=function(e,a,n){var r=[],t=e.match(w.segmentRE);return t.forEach(function(h){var s=a[h.charAt(0)].drawn;if(s!==void 0){var o=h.substr(1).match(w.paramRE);if(!(!o||o.length<s)){var y=o[s],d=n?y:f.cleanNumber(y);r.push(d)}}}),r},V.getDataToPixel=function(e,a,n,r){var t=e._fullLayout._size,h;if(a)if(r==="domain")h=function(o){return a._length*(n?1-o:o)+a._offset};else{var s=V.shapePositionToRange(a);h=function(o){return a._offset+a.r2p(s(o,!0))},a.type==="date"&&(h=V.decodeDate(h))}else n?h=function(o){return t.t+t.h*(1-o)}:h=function(o){return t.l+t.w*o};return h},V.getPixelToData=function(e,a,n,r){var t=e._fullLayout._size,h;if(a)if(r==="domain")h=function(o){var y=(o-a._offset)/a._length;return n?1-y:y};else{var s=V.rangeToShapePosition(a);h=function(o){return s(a.p2r(o-a._offset))}}else n?h=function(o){return 1-(o-t.t)/t.h}:h=function(o){return(o-t.l)/t.w};return h},V.roundPositionForSharpStrokeRendering=function(e,a){var n=Math.round(a%2)===1,r=Math.round(e);return n?r+.5:r},V.makeShapesOptionsAndPlotinfo=function(e,a){var n=e._fullLayout.shapes[a]||{},r=e._fullLayout._plots[n.xref+n.yref],t=!!r;return t?r._hadPlotinfo=!0:(r={},n.xref&&n.xref!=="paper"&&(r.xaxis=e._fullLayout[n.xref+"axis"]),n.yref&&n.yref!=="paper"&&(r.yaxis=e._fullLayout[n.yref+"axis"])),r.xsizemode=n.xsizemode,r.ysizemode=n.ysizemode,r.xanchor=n.xanchor,r.yanchor=n.yanchor,{options:n,plotinfo:r}},V.makeSelectionsOptionsAndPlotinfo=function(e,a){var n=e._fullLayout.selections[a]||{},r=e._fullLayout._plots[n.xref+n.yref],t=!!r;return t?r._hadPlotinfo=!0:(r={},n.xref&&(r.xaxis=e._fullLayout[n.xref+"axis"]),n.yref&&(r.yaxis=e._fullLayout[n.yref+"axis"])),{options:n,plotinfo:r}},V.getPathString=function(e,a){var n=a.type,r=M.getRefType(a.xref),t=M.getRefType(a.yref),h=M.getFromId(e,a.xref),s=M.getFromId(e,a.yref),o=e._fullLayout._size,y,d,p,c,m,l,x,u;if(h?r==="domain"?d=function(F){return h._offset+h._length*F}:(y=V.shapePositionToRange(h),d=function(F){return h._offset+h.r2p(y(F,!0))}):d=function(F){return o.l+o.w*F},s?t==="domain"?c=function(F){return s._offset+s._length*(1-F)}:(p=V.shapePositionToRange(s),c=function(F){return s._offset+s.r2p(p(F,!0))}):c=function(F){return o.t+o.h*(1-F)},n==="path")return h&&h.type==="date"&&(d=V.decodeDate(d)),s&&s.type==="date"&&(c=V.decodeDate(c)),T(a,d,c);if(a.xsizemode==="pixel"){var A=d(a.xanchor);m=A+a.x0,l=A+a.x1}else m=d(a.x0),l=d(a.x1);if(a.ysizemode==="pixel"){var _=c(a.yanchor);x=_-a.y0,u=_-a.y1}else x=c(a.y0),u=c(a.y1);if(n==="line")return"M"+m+","+x+"L"+l+","+u;if(n==="rect")return"M"+m+","+x+"H"+l+"V"+u+"H"+m+"Z";var g=(m+l)/2,b=(x+u)/2,v=Math.abs(g-m),k=Math.abs(b-x),S="A"+v+","+k,E=g+v+","+b,C=g+","+(b-k);return"M"+E+S+" 0 1,1 "+C+S+" 0 0,1 "+E+"Z"};function T(e,a,n){var r=e.path,t=e.xsizemode,h=e.ysizemode,s=e.xanchor,o=e.yanchor;return r.replace(w.segmentRE,function(y){var d=0,p=y.charAt(0),c=w.paramIsX[p],m=w.paramIsY[p],l=w.numParams[p],x=y.substr(1).replace(w.paramRE,function(u){return c[d]?t==="pixel"?u=a(s)+Number(u):u=a(u):m[d]&&(h==="pixel"?u=n(o)-Number(u):u=n(u)),d++,d>l&&(u="X"),u});return d>l&&(x=x.replace(/[\s,]*X.*/,""),f.log("Ignoring extra params in segment "+y)),p+x})}},{"../../lib":515,"../../plots/cartesian/axes":566,"./constants":459}],470:[function(i,U,V){var w=i("./draw");U.exports={moduleType:"component",name:"shapes",layoutAttributes:i("./attributes"),supplyLayoutDefaults:i("./defaults"),supplyDrawNewShapeDefaults:i("./draw_newshape/defaults"),includeBasePlot:i("../../plots/cartesian/include_components")("shapes"),calcAutorange:i("./calc_autorange"),draw:w.draw,drawOne:w.drawOne}},{"../../plots/cartesian/include_components":577,"./attributes":457,"./calc_autorange":458,"./defaults":460,"./draw":462,"./draw_newshape/defaults":465}],471:[function(i,U,V){var w=i("../../plots/font_attributes"),f=i("../../plots/pad_attributes"),M=i("../../lib/extend").extendDeepAll,T=i("../../plot_api/edit_types").overrideAll,e=i("../../plots/animation_attributes"),a=i("../../plot_api/plot_template").templatedArray,n=i("./constants"),r=a("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});U.exports=T(a("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:r,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:M(f({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:e.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:w({})},font:w({}),activebgcolor:{valType:"color",dflt:n.gripBgActiveColor},bgcolor:{valType:"color",dflt:n.railBgColor},bordercolor:{valType:"color",dflt:n.railBorderColor},borderwidth:{valType:"number",min:0,dflt:n.railBorderWidth},ticklen:{valType:"number",min:0,dflt:n.tickLength},tickcolor:{valType:"color",dflt:n.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:n.minorTickLength}}),"arraydraw","from-root")},{"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plot_api/plot_template":555,"../../plots/animation_attributes":560,"../../plots/font_attributes":594,"../../plots/pad_attributes":627,"./constants":472}],472:[function(i,U,V){U.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},{}],473:[function(i,U,V){var w=i("../../lib"),f=i("../../plots/array_container_defaults"),M=i("./attributes"),T=i("./constants"),e=T.name,a=M.steps;U.exports=function(h,s){f(h,s,{name:e,handleItemDefaults:n})};function n(t,h,s){function o(u,A){return w.coerce(t,h,M,u,A)}for(var y=f(t,h,{name:"steps",handleItemDefaults:r}),d=0,p=0;p<y.length;p++)y[p].visible&&d++;var c;if(d<2?c=h.visible=!1:c=o("visible"),!!c){h._stepCount=d;var m=h._visibleSteps=w.filterVisible(y),l=o("active");(y[l]||{}).visible||(h.active=m[0]._index),o("x"),o("y"),w.noneOrAll(t,h,["x","y"]),o("xanchor"),o("yanchor"),o("len"),o("lenmode"),o("pad.t"),o("pad.r"),o("pad.b"),o("pad.l"),w.coerceFont(o,"font",s.font);var x=o("currentvalue.visible");x&&(o("currentvalue.xanchor"),o("currentvalue.prefix"),o("currentvalue.suffix"),o("currentvalue.offset"),w.coerceFont(o,"currentvalue.font",h.font)),o("transition.duration"),o("transition.easing"),o("bgcolor"),o("activebgcolor"),o("bordercolor"),o("borderwidth"),o("ticklen"),o("tickwidth"),o("tickcolor"),o("minorticklen")}}function r(t,h){function s(d,p){return w.coerce(t,h,a,d,p)}var o;if(t.method!=="skip"&&!Array.isArray(t.args)?o=h.visible=!1:o=s("visible"),o){s("method"),s("args");var y=s("label","step-"+h._index);s("value",y),s("execute")}}},{"../../lib":515,"../../plots/array_container_defaults":561,"./attributes":471,"./constants":472}],474:[function(i,U,V){var w=i("@plotly/d3"),f=i("../../plots/plots"),M=i("../color"),T=i("../drawing"),e=i("../../lib"),a=e.strTranslate,n=i("../../lib/svg_text_utils"),r=i("../../plot_api/plot_template").arrayEditor,t=i("./constants"),h=i("../../constants/alignment"),s=h.LINE_SPACING,o=h.FROM_TL,y=h.FROM_BR;U.exports=function(O){var z=O._fullLayout,B=p(z,O),G=z._infolayer.selectAll("g."+t.containerClassName).data(B.length>0?[0]:[]);G.enter().append("g").classed(t.containerClassName,!0).style("cursor","ew-resize");function Q(ue){ue._commandObserver&&(ue._commandObserver.remove(),delete ue._commandObserver),f.autoMargin(O,d(ue))}if(G.exit().each(function(){w.select(this).selectAll("g."+t.groupClassName).each(Q)}).remove(),B.length!==0){var X=G.selectAll("g."+t.groupClassName).data(B,c);X.enter().append("g").classed(t.groupClassName,!0),X.exit().each(Q).remove();for(var j=0;j<B.length;j++){var re=B[j];m(O,re)}X.each(function(ue){var K=w.select(this);S(ue),f.manageCommandObserver(O,ue,ue._visibleSteps,function(te){var Y=K.data()[0];Y.active!==te.index&&(Y._dragging||b(O,K,Y,te.index,!1,!0))}),l(O,w.select(this),ue)})}};function d(R){return t.autoMarginIdRoot+R._index}function p(R,O){for(var z=R[t.name],B=[],G=0;G<z.length;G++){var Q=z[G];!Q.visible||(Q._gd=O,B.push(Q))}return B}function c(R){return R._index}function m(R,O){var z=T.tester.selectAll("g."+t.labelGroupClass).data(O._visibleSteps);z.enter().append("g").classed(t.labelGroupClass,!0);var B=0,G=0;z.each(function(ee){var ne=w.select(this),Z=A(ne,{step:ee},O),q=Z.node();if(q){var ie=T.bBox(q);G=Math.max(G,ie.height),B=Math.max(B,ie.width)}}),z.remove();var Q=O._dims={};Q.inputAreaWidth=Math.max(t.railWidth,t.gripHeight);var X=R._fullLayout._size;Q.lx=X.l+X.w*O.x,Q.ly=X.t+X.h*(1-O.y),O.lenmode==="fraction"?Q.outerLength=Math.round(X.w*O.len):Q.outerLength=O.len,Q.inputAreaStart=0,Q.inputAreaLength=Math.round(Q.outerLength-O.pad.l-O.pad.r);var j=Q.inputAreaLength-2*t.stepInset,re=j/(O._stepCount-1),ue=B+t.labelPadding;if(Q.labelStride=Math.max(1,Math.ceil(ue/re)),Q.labelHeight=G,Q.currentValueMaxWidth=0,Q.currentValueHeight=0,Q.currentValueTotalHeight=0,Q.currentValueMaxLines=1,O.currentvalue.visible){var K=T.tester.append("g");z.each(function(ee){var ne=x(K,O,ee.label),Z=ne.node()&&T.bBox(ne.node())||{width:0,height:0},q=n.lineCount(ne);Q.currentValueMaxWidth=Math.max(Q.currentValueMaxWidth,Math.ceil(Z.width)),Q.currentValueHeight=Math.max(Q.currentValueHeight,Math.ceil(Z.height)),Q.currentValueMaxLines=Math.max(Q.currentValueMaxLines,q)}),Q.currentValueTotalHeight=Q.currentValueHeight+O.currentvalue.offset,K.remove()}Q.height=Q.currentValueTotalHeight+t.tickOffset+O.ticklen+t.labelOffset+Q.labelHeight+O.pad.t+O.pad.b;var te="left";e.isRightAnchor(O)&&(Q.lx-=Q.outerLength,te="right"),e.isCenterAnchor(O)&&(Q.lx-=Q.outerLength/2,te="center");var Y="top";e.isBottomAnchor(O)&&(Q.ly-=Q.height,Y="bottom"),e.isMiddleAnchor(O)&&(Q.ly-=Q.height/2,Y="middle"),Q.outerLength=Math.ceil(Q.outerLength),Q.height=Math.ceil(Q.height),Q.lx=Math.round(Q.lx),Q.ly=Math.round(Q.ly);var H={y:O.y,b:Q.height*y[Y],t:Q.height*o[Y]};O.lenmode==="fraction"?(H.l=0,H.xl=O.x-O.len*o[te],H.r=0,H.xr=O.x+O.len*y[te]):(H.x=O.x,H.l=Q.outerLength*o[te],H.r=Q.outerLength*y[te]),f.autoMargin(R,d(O),H)}function l(R,O,z){(z.steps[z.active]||{}).visible||(z.active=z._visibleSteps[0]._index),O.call(x,z).call(D,z).call(_,z).call(k,z).call(I,R,z).call(u,R,z);var B=z._dims;T.setTranslate(O,B.lx+z.pad.l,B.ly+z.pad.t),O.call(E,z,!1),O.call(x,z)}function x(R,O,z){if(!!O.currentvalue.visible){var B=O._dims,G,Q;switch(O.currentvalue.xanchor){case"right":G=B.inputAreaLength-t.currentValueInset-B.currentValueMaxWidth,Q="left";break;case"center":G=B.inputAreaLength*.5,Q="middle";break;default:G=t.currentValueInset,Q="left"}var X=e.ensureSingle(R,"text",t.labelClass,function(Y){Y.attr({"text-anchor":Q,"data-notex":1})}),j=O.currentvalue.prefix?O.currentvalue.prefix:"";if(typeof z=="string")j+=z;else{var re=O.steps[O.active].label,ue=O._gd._fullLayout._meta;ue&&(re=e.templateString(re,ue)),j+=re}O.currentvalue.suffix&&(j+=O.currentvalue.suffix),X.call(T.font,O.currentvalue.font).text(j).call(n.convertToTspans,O._gd);var K=n.lineCount(X),te=(B.currentValueMaxLines+1-K)*O.currentvalue.font.size*s;return n.positionText(X,G,te),X}}function u(R,O,z){var B=e.ensureSingle(R,"rect",t.gripRectClass,function(G){G.call(v,O,R,z).style("pointer-events","all")});B.attr({width:t.gripWidth,height:t.gripHeight,rx:t.gripRadius,ry:t.gripRadius}).call(M.stroke,z.bordercolor).call(M.fill,z.bgcolor).style("stroke-width",z.borderwidth+"px")}function A(R,O,z){var B=e.ensureSingle(R,"text",t.labelClass,function(X){X.attr({"text-anchor":"middle","data-notex":1})}),G=O.step.label,Q=z._gd._fullLayout._meta;return Q&&(G=e.templateString(G,Q)),B.call(T.font,z.font).text(G).call(n.convertToTspans,z._gd),B}function _(R,O){var z=e.ensureSingle(R,"g",t.labelsClass),B=O._dims,G=z.selectAll("g."+t.labelGroupClass).data(B.labelSteps);G.enter().append("g").classed(t.labelGroupClass,!0),G.exit().remove(),G.each(function(Q){var X=w.select(this);X.call(A,Q,O),T.setTranslate(X,C(O,Q.fraction),t.tickOffset+O.ticklen+O.font.size*s+t.labelOffset+B.currentValueTotalHeight)})}function g(R,O,z,B,G){var Q=Math.round(B*(z._stepCount-1)),X=z._visibleSteps[Q]._index;X!==z.active&&b(R,O,z,X,!0,G)}function b(R,O,z,B,G,Q){var X=z.active;z.active=B,r(R.layout,t.name,z).applyUpdate("active",B);var j=z.steps[z.active];O.call(E,z,Q),O.call(x,z),R.emit("plotly_sliderchange",{slider:z,step:z.steps[z.active],interaction:G,previousActive:X}),j&&j.method&&G&&(O._nextMethod?(O._nextMethod.step=j,O._nextMethod.doCallback=G,O._nextMethod.doTransition=Q):(O._nextMethod={step:j,doCallback:G,doTransition:Q},O._nextMethodRaf=window.requestAnimationFrame(function(){var re=O._nextMethod.step;!re.method||(re.execute&&f.executeAPICommand(R,re.method,re.args),O._nextMethod=null,O._nextMethodRaf=null)})))}function v(R,O,z){var B=z.node(),G=w.select(O);function Q(){return z.data()[0]}function X(){var j=Q();O.emit("plotly_sliderstart",{slider:j});var re=z.select("."+t.gripRectClass);w.event.stopPropagation(),w.event.preventDefault(),re.call(M.fill,j.activebgcolor);var ue=F(j,w.mouse(B)[0]);g(O,z,j,ue,!0),j._dragging=!0;function K(){var Y=Q(),H=F(Y,w.mouse(B)[0]);g(O,z,Y,H,!1)}G.on("mousemove",K),G.on("touchmove",K);function te(){var Y=Q();Y._dragging=!1,re.call(M.fill,Y.bgcolor),G.on("mouseup",null),G.on("mousemove",null),G.on("touchend",null),G.on("touchmove",null),O.emit("plotly_sliderend",{slider:Y,step:Y.steps[Y.active]})}G.on("mouseup",te),G.on("touchend",te)}R.on("mousedown",X),R.on("touchstart",X)}function k(R,O){var z=R.selectAll("rect."+t.tickRectClass).data(O._visibleSteps),B=O._dims;z.enter().append("rect").classed(t.tickRectClass,!0),z.exit().remove(),z.attr({width:O.tickwidth+"px","shape-rendering":"crispEdges"}),z.each(function(G,Q){var X=Q%B.labelStride===0,j=w.select(this);j.attr({height:X?O.ticklen:O.minorticklen}).call(M.fill,O.tickcolor),T.setTranslate(j,C(O,Q/(O._stepCount-1))-.5*O.tickwidth,(X?t.tickOffset:t.minorTickOffset)+B.currentValueTotalHeight)})}function S(R){var O=R._dims;O.labelSteps=[];for(var z=R._stepCount,B=0;B<z;B+=O.labelStride)O.labelSteps.push({fraction:B/(z-1),step:R._visibleSteps[B]})}function E(R,O,z){for(var B=R.select("rect."+t.gripRectClass),G=0,Q=0;Q<O._stepCount;Q++)if(O._visibleSteps[Q]._index===O.active){G=Q;break}var X=C(O,G/(O._stepCount-1));if(!O._invokingCommand){var j=B;z&&O.transition.duration>0&&(j=j.transition().duration(O.transition.duration).ease(O.transition.easing)),j.attr("transform",a(X-t.gripWidth*.5,O._dims.currentValueTotalHeight))}}function C(R,O){var z=R._dims;return z.inputAreaStart+t.stepInset+(z.inputAreaLength-2*t.stepInset)*Math.min(1,Math.max(0,O))}function F(R,O){var z=R._dims;return Math.min(1,Math.max(0,(O-t.stepInset-z.inputAreaStart)/(z.inputAreaLength-2*t.stepInset-2*z.inputAreaStart)))}function I(R,O,z){var B=z._dims,G=e.ensureSingle(R,"rect",t.railTouchRectClass,function(Q){Q.call(v,O,R,z).style("pointer-events","all")});G.attr({width:B.inputAreaLength,height:Math.max(B.inputAreaWidth,t.tickOffset+z.ticklen+B.labelHeight)}).call(M.fill,z.bgcolor).attr("opacity",0),T.setTranslate(G,0,B.currentValueTotalHeight)}function D(R,O){var z=O._dims,B=z.inputAreaLength-t.railInset*2,G=e.ensureSingle(R,"rect",t.railRectClass);G.attr({width:B,height:t.railWidth,rx:t.railRadius,ry:t.railRadius,"shape-rendering":"crispEdges"}).call(M.stroke,O.bordercolor).call(M.fill,O.bgcolor).style("stroke-width",O.borderwidth+"px"),T.setTranslate(G,t.railInset,(z.inputAreaWidth-t.railWidth)*.5+z.currentValueTotalHeight)}},{"../../constants/alignment":483,"../../lib":515,"../../lib/svg_text_utils":541,"../../plot_api/plot_template":555,"../../plots/plots":628,"../color":367,"../drawing":389,"./constants":472,"@plotly/d3":58}],475:[function(i,U,V){var w=i("./constants");U.exports={moduleType:"component",name:w.name,layoutAttributes:i("./attributes"),supplyLayoutDefaults:i("./defaults"),draw:i("./draw")}},{"./attributes":471,"./constants":472,"./defaults":473,"./draw":474}],476:[function(i,U,V){var w=i("@plotly/d3"),f=i("fast-isnumeric"),M=i("../../plots/plots"),T=i("../../registry"),e=i("../../lib"),a=e.strTranslate,n=i("../drawing"),r=i("../color"),t=i("../../lib/svg_text_utils"),h=i("../../constants/interactions"),s=i("../../constants/alignment").OPPOSITE_SIDE,o=/ [XY][0-9]* /;function y(d,p,c){var m=c.propContainer,l=c.propName,x=c.placeholder,u=c.traceIndex,A=c.avoid||{},_=c.attributes,g=c.transform,b=c.containerGroup,v=d._fullLayout,k=1,S=!1,E=m.title,C=(E&&E.text?E.text:"").trim(),F=E&&E.font?E.font:{},I=F.family,D=F.size,R=F.color,O;l==="title.text"?O="titleText":l.indexOf("axis")!==-1?O="axisTitleText":l.indexOf("colorbar"!==-1)&&(O="colorbarTitleText");var z=d._context.edits[O];C===""?k=0:C.replace(o," % ")===x.replace(o," % ")&&(k=.2,S=!0,z||(C="")),c._meta?C=e.templateString(C,c._meta):v._meta&&(C=e.templateString(C,v._meta));var B=C||z,G;b||(b=e.ensureSingle(v._infolayer,"g","g-"+p),G=v._hColorbarMoveTitle);var Q=b.selectAll("text").data(B?[0]:[]);if(Q.enter().append("text"),Q.text(C).attr("class",p),Q.exit().remove(),!B)return b;function X(K){e.syncOrAsync([j,re],K)}function j(K){var te;return!g&&G&&(g={}),g?(te="",g.rotate&&(te+="rotate("+[g.rotate,_.x,_.y]+")"),(g.offset||G)&&(te+=a(0,(g.offset||0)-(G||0)))):te=null,K.attr("transform",te),K.style({"font-family":I,"font-size":w.round(D,2)+"px",fill:r.rgb(R),opacity:k*r.opacity(R),"font-weight":M.fontWeight}).attr(_).call(t.convertToTspans,d),M.previousPromises(d)}function re(K){var te=w.select(K.node().parentNode);if(A&&A.selection&&A.side&&C){te.attr("transform",null);var Y=s[A.side],H=A.side==="left"||A.side==="top"?-1:1,ee=f(A.pad)?A.pad:2,ne=n.bBox(te.node()),Z={left:0,top:0,right:v.width,bottom:v.height},q=A.maxShift||H*(Z[A.side]-ne[A.side]),ie=0;if(q<0)ie=q;else{var se=A.offsetLeft||0,ae=A.offsetTop||0;ne.left-=se,ne.right-=se,ne.top-=ae,ne.bottom-=ae,A.selection.each(function(){var be=n.bBox(this);e.bBoxIntersect(ne,be,ee)&&(ie=Math.max(ie,H*(be[A.side]-ne[Y])+ee))}),ie=Math.min(q,ie)}if(ie>0||q<0){var oe={left:[-ie,0],right:[ie,0],top:[0,-ie],bottom:[0,ie]}[A.side];te.attr("transform",a(oe[0],oe[1]))}}}Q.call(X);function ue(){k=0,S=!0,Q.text(x).on("mouseover.opacity",function(){w.select(this).transition().duration(h.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){w.select(this).transition().duration(h.HIDE_PLACEHOLDER).style("opacity",0)})}return z&&(C?Q.on(".opacity",null):ue(),Q.call(t.makeEditable,{gd:d}).on("edit",function(K){u!==void 0?T.call("_guiRestyle",d,l,K,u):T.call("_guiRelayout",d,l,K)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(X)}).on("input",function(K){this.text(K||" ").call(t.positionText,_.x,_.y)})),Q.classed("js-placeholder",S),b}U.exports={draw:y}},{"../../constants/alignment":483,"../../constants/interactions":490,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/plots":628,"../../registry":647,"../color":367,"../drawing":389,"@plotly/d3":58,"fast-isnumeric":190}],477:[function(i,U,V){var w=i("../../plots/font_attributes"),f=i("../color/attributes"),M=i("../../lib/extend").extendFlat,T=i("../../plot_api/edit_types").overrideAll,e=i("../../plots/pad_attributes"),a=i("../../plot_api/plot_template").templatedArray,n=a("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});U.exports=T(a("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:n,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:M(e({editType:"arraydraw"}),{}),font:w({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:f.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},{"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plot_api/plot_template":555,"../../plots/font_attributes":594,"../../plots/pad_attributes":627,"../color/attributes":366}],478:[function(i,U,V){U.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"\u25C4",right:"\u25BA",up:"\u25B2",down:"\u25BC"}}},{}],479:[function(i,U,V){var w=i("../../lib"),f=i("../../plots/array_container_defaults"),M=i("./attributes"),T=i("./constants"),e=T.name,a=M.buttons;U.exports=function(h,s){var o={name:e,handleItemDefaults:n};f(h,s,o)};function n(t,h,s){function o(p,c){return w.coerce(t,h,M,p,c)}var y=f(t,h,{name:"buttons",handleItemDefaults:r}),d=o("visible",y.length>0);!d||(o("active"),o("direction"),o("type"),o("showactive"),o("x"),o("y"),w.noneOrAll(t,h,["x","y"]),o("xanchor"),o("yanchor"),o("pad.t"),o("pad.r"),o("pad.b"),o("pad.l"),w.coerceFont(o,"font",s.font),o("bgcolor",s.paper_bgcolor),o("bordercolor"),o("borderwidth"))}function r(t,h){function s(y,d){return w.coerce(t,h,a,y,d)}var o=s("visible",t.method==="skip"||Array.isArray(t.args));o&&(s("method"),s("args"),s("args2"),s("label"),s("execute"))}},{"../../lib":515,"../../plots/array_container_defaults":561,"./attributes":477,"./constants":478}],480:[function(i,U,V){var w=i("@plotly/d3"),f=i("../../plots/plots"),M=i("../color"),T=i("../drawing"),e=i("../../lib"),a=i("../../lib/svg_text_utils"),n=i("../../plot_api/plot_template").arrayEditor,r=i("../../constants/alignment").LINE_SPACING,t=i("./constants"),h=i("./scrollbox");U.exports=function(F){var I=F._fullLayout,D=e.filterVisible(I[t.name]);function R(re){f.autoMargin(F,k(re))}var O=I._menulayer.selectAll("g."+t.containerClassName).data(D.length>0?[0]:[]);if(O.enter().append("g").classed(t.containerClassName,!0).style("cursor","pointer"),O.exit().each(function(){w.select(this).selectAll("g."+t.headerGroupClassName).each(R)}).remove(),D.length!==0){var z=O.selectAll("g."+t.headerGroupClassName).data(D,s);z.enter().append("g").classed(t.headerGroupClassName,!0);for(var B=e.ensureSingle(O,"g",t.dropdownButtonGroupClassName,function(re){re.style("pointer-events","all")}),G=0;G<D.length;G++){var Q=D[G];v(F,Q)}var X="updatemenus"+I._uid,j=new h(F,B,X);z.enter().size()&&(B.node().parentNode.appendChild(B.node()),B.call(E)),z.exit().each(function(re){B.call(E),R(re)}).remove(),z.each(function(re){var ue=w.select(this),K=re.type==="dropdown"?B:null;f.manageCommandObserver(F,re,re.buttons,function(te){d(F,re,re.buttons[te.index],ue,K,j,te.index,!0)}),re.type==="dropdown"?(p(F,ue,B,j,re),y(B,re)&&c(F,ue,B,j,re)):c(F,ue,null,null,re)})}};function s(C){return C._index}function o(C){return+C.attr(t.menuIndexAttrName)==-1}function y(C,F){return+C.attr(t.menuIndexAttrName)===F._index}function d(C,F,I,D,R,O,z,B){F.active=z,n(C.layout,t.name,F).applyUpdate("active",z),F.type==="buttons"?c(C,D,null,null,F):F.type==="dropdown"&&(R.attr(t.menuIndexAttrName,"-1"),p(C,D,R,O,F),B||c(C,D,R,O,F))}function p(C,F,I,D,R){var O=e.ensureSingle(F,"g",t.headerClassName,function(re){re.style("pointer-events","all")}),z=R._dims,B=R.active,G=R.buttons[B]||t.blankHeaderOpts,Q={y:R.pad.t,yPad:0,x:R.pad.l,xPad:0,index:0},X={width:z.headerWidth,height:z.headerHeight};O.call(x,R,G,C).call(S,R,Q,X);var j=e.ensureSingle(F,"text",t.headerArrowClassName,function(re){re.attr("text-anchor","end").call(T.font,R.font).text(t.arrowSymbol[R.direction])});j.attr({x:z.headerWidth-t.arrowOffsetX+R.pad.l,y:z.headerHeight/2+t.textOffsetY+R.pad.t}),O.on("click",function(){I.call(E,String(y(I,R)?-1:R._index)),c(C,F,I,D,R)}),O.on("mouseover",function(){O.call(g)}),O.on("mouseout",function(){O.call(b,R)}),T.setTranslate(F,z.lx,z.ly)}function c(C,F,I,D,R){I||(I=F,I.attr("pointer-events","all"));var O=!o(I)||R.type==="buttons"?R.buttons:[],z=R.type==="dropdown"?t.dropdownButtonClassName:t.buttonClassName,B=I.selectAll("g."+z).data(e.filterVisible(O)),G=B.enter().append("g").classed(z,!0),Q=B.exit();R.type==="dropdown"?(G.attr("opacity","0").transition().attr("opacity","1"),Q.transition().attr("opacity","0").remove()):Q.remove();var X=0,j=0,re=R._dims,ue=["up","down"].indexOf(R.direction)!==-1;R.type==="dropdown"&&(ue?j=re.headerHeight+t.gapButtonHeader:X=re.headerWidth+t.gapButtonHeader),R.type==="dropdown"&&R.direction==="up"&&(j=-t.gapButtonHeader+t.gapButton-re.openHeight),R.type==="dropdown"&&R.direction==="left"&&(X=-t.gapButtonHeader+t.gapButton-re.openWidth);var K={x:re.lx+X+R.pad.l,y:re.ly+j+R.pad.t,yPad:t.gapButton,xPad:t.gapButton,index:0},te={l:K.x+R.borderwidth,t:K.y+R.borderwidth};B.each(function(Y,H){var ee=w.select(this);ee.call(x,R,Y,C).call(S,R,K),ee.on("click",function(){w.event.defaultPrevented||(Y.execute&&(Y.args2&&R.active===H?(d(C,R,Y,F,I,D,-1),f.executeAPICommand(C,Y.method,Y.args2)):(d(C,R,Y,F,I,D,H),f.executeAPICommand(C,Y.method,Y.args))),C.emit("plotly_buttonclicked",{menu:R,button:Y,active:R.active}))}),ee.on("mouseover",function(){ee.call(g)}),ee.on("mouseout",function(){ee.call(b,R),B.call(_,R)})}),B.call(_,R),ue?(te.w=Math.max(re.openWidth,re.headerWidth),te.h=K.y-te.t):(te.w=K.x-te.l,te.h=Math.max(re.openHeight,re.headerHeight)),te.direction=R.direction,D&&(B.size()?m(C,F,I,D,R,te):l(D))}function m(C,F,I,D,R,O){var z=R.direction,B=z==="up"||z==="down",G=R._dims,Q=R.active,X,j,re;if(B)for(j=0,re=0;re<Q;re++)j+=G.heights[re]+t.gapButton;else for(X=0,re=0;re<Q;re++)X+=G.widths[re]+t.gapButton;D.enable(O,X,j),D.hbar&&D.hbar.attr("opacity","0").transition().attr("opacity","1"),D.vbar&&D.vbar.attr("opacity","0").transition().attr("opacity","1")}function l(C){var F=!!C.hbar,I=!!C.vbar;F&&C.hbar.transition().attr("opacity","0").each("end",function(){F=!1,I||C.disable()}),I&&C.vbar.transition().attr("opacity","0").each("end",function(){I=!1,F||C.disable()})}function x(C,F,I,D){C.call(u,F).call(A,F,I,D)}function u(C,F){var I=e.ensureSingle(C,"rect",t.itemRectClassName,function(D){D.attr({rx:t.rx,ry:t.ry,"shape-rendering":"crispEdges"})});I.call(M.stroke,F.bordercolor).call(M.fill,F.bgcolor).style("stroke-width",F.borderwidth+"px")}function A(C,F,I,D){var R=e.ensureSingle(C,"text",t.itemTextClassName,function(B){B.attr({"text-anchor":"start","data-notex":1})}),O=I.label,z=D._fullLayout._meta;z&&(O=e.templateString(O,z)),R.call(T.font,F.font).text(O).call(a.convertToTspans,D)}function _(C,F){var I=F.active;C.each(function(D,R){var O=w.select(this);R===I&&F.showactive&&O.select("rect."+t.itemRectClassName).call(M.fill,t.activeColor)})}function g(C){C.select("rect."+t.itemRectClassName).call(M.fill,t.hoverColor)}function b(C,F){C.select("rect."+t.itemRectClassName).call(M.fill,F.bgcolor)}function v(C,F){var I=F._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},D=T.tester.selectAll("g."+t.dropdownButtonClassName).data(e.filterVisible(F.buttons));D.enter().append("g").classed(t.dropdownButtonClassName,!0);var R=["up","down"].indexOf(F.direction)!==-1;D.each(function(X,j){var re=w.select(this);re.call(x,F,X,C);var ue=re.select("."+t.itemTextClassName),K=ue.node()&&T.bBox(ue.node()).width,te=Math.max(K+t.textPadX,t.minWidth),Y=F.font.size*r,H=a.lineCount(ue),ee=Math.max(Y*H,t.minHeight)+t.textOffsetY;ee=Math.ceil(ee),te=Math.ceil(te),I.widths[j]=te,I.heights[j]=ee,I.height1=Math.max(I.height1,ee),I.width1=Math.max(I.width1,te),R?(I.totalWidth=Math.max(I.totalWidth,te),I.openWidth=I.totalWidth,I.totalHeight+=ee+t.gapButton,I.openHeight+=ee+t.gapButton):(I.totalWidth+=te+t.gapButton,I.openWidth+=te+t.gapButton,I.totalHeight=Math.max(I.totalHeight,ee),I.openHeight=I.totalHeight)}),R?I.totalHeight-=t.gapButton:I.totalWidth-=t.gapButton,I.headerWidth=I.width1+t.arrowPadX,I.headerHeight=I.height1,F.type==="dropdown"&&(R?(I.width1+=t.arrowPadX,I.totalHeight=I.height1):I.totalWidth=I.width1,I.totalWidth+=t.arrowPadX),D.remove();var O=I.totalWidth+F.pad.l+F.pad.r,z=I.totalHeight+F.pad.t+F.pad.b,B=C._fullLayout._size;I.lx=B.l+B.w*F.x,I.ly=B.t+B.h*(1-F.y);var G="left";e.isRightAnchor(F)&&(I.lx-=O,G="right"),e.isCenterAnchor(F)&&(I.lx-=O/2,G="center");var Q="top";e.isBottomAnchor(F)&&(I.ly-=z,Q="bottom"),e.isMiddleAnchor(F)&&(I.ly-=z/2,Q="middle"),I.totalWidth=Math.ceil(I.totalWidth),I.totalHeight=Math.ceil(I.totalHeight),I.lx=Math.round(I.lx),I.ly=Math.round(I.ly),f.autoMargin(C,k(F),{x:F.x,y:F.y,l:O*({right:1,center:.5}[G]||0),r:O*({left:1,center:.5}[G]||0),b:z*({top:1,middle:.5}[Q]||0),t:z*({bottom:1,middle:.5}[Q]||0)})}function k(C){return t.autoMarginIdRoot+C._index}function S(C,F,I,D){D=D||{};var R=C.select("."+t.itemRectClassName),O=C.select("."+t.itemTextClassName),z=F.borderwidth,B=I.index,G=F._dims;T.setTranslate(C,z+I.x,z+I.y);var Q=["up","down"].indexOf(F.direction)!==-1,X=D.height||(Q?G.heights[B]:G.height1);R.attr({x:0,y:0,width:D.width||(Q?G.width1:G.widths[B]),height:X});var j=F.font.size*r,re=a.lineCount(O),ue=(re-1)*j/2;a.positionText(O,t.textOffsetX,X/2-ue+t.textOffsetY),Q?I.y+=G.heights[B]+I.yPad:I.x+=G.widths[B]+I.xPad,I.index++}function E(C,F){C.attr(t.menuIndexAttrName,F||"-1").selectAll("g."+t.dropdownButtonClassName).remove()}},{"../../constants/alignment":483,"../../lib":515,"../../lib/svg_text_utils":541,"../../plot_api/plot_template":555,"../../plots/plots":628,"../color":367,"../drawing":389,"./constants":478,"./scrollbox":482,"@plotly/d3":58}],481:[function(i,U,V){arguments[4][475][0].apply(V,arguments)},{"./attributes":477,"./constants":478,"./defaults":479,"./draw":480,dup:475}],482:[function(i,U,V){U.exports=e;var w=i("@plotly/d3"),f=i("../color"),M=i("../drawing"),T=i("../../lib");function e(a,n,r){this.gd=a,this.container=n,this.id=r,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}e.barWidth=2,e.barLength=20,e.barRadius=2,e.barPad=1,e.barColor="#808BA4",e.prototype.enable=function(n,r,t){var h=this.gd._fullLayout,s=h.width,o=h.height;this.position=n;var y=this.position.l,d=this.position.w,p=this.position.t,c=this.position.h,m=this.position.direction,l=m==="down",x=m==="left",u=m==="right",A=m==="up",_=d,g=c,b,v,k,S;!l&&!x&&!u&&!A&&(this.position.direction="down",l=!0);var E=l||A;E?(b=y,v=b+_,l?(k=p,S=Math.min(k+g,o),g=S-k):(S=p+g,k=Math.max(S-g,0),g=S-k)):(k=p,S=k+g,x?(v=y+_,b=Math.max(v-_,0),_=v-b):(b=y,v=Math.min(b+_,s),_=v-b)),this._box={l:b,t:k,w:_,h:g};var C=d>_,F=e.barLength+2*e.barPad,I=e.barWidth+2*e.barPad,D=y,R=p+c;R+I>o&&(R=o-I);var O=this.container.selectAll("rect.scrollbar-horizontal").data(C?[0]:[]);O.exit().on(".drag",null).remove(),O.enter().append("rect").classed("scrollbar-horizontal",!0).call(f.fill,e.barColor),C?(this.hbar=O.attr({rx:e.barRadius,ry:e.barRadius,x:D,y:R,width:F,height:I}),this._hbarXMin=D+F/2,this._hbarTranslateMax=_-F):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var z=c>g,B=e.barWidth+2*e.barPad,G=e.barLength+2*e.barPad,Q=y+d,X=p;Q+B>s&&(Q=s-B);var j=this.container.selectAll("rect.scrollbar-vertical").data(z?[0]:[]);j.exit().on(".drag",null).remove(),j.enter().append("rect").classed("scrollbar-vertical",!0).call(f.fill,e.barColor),z?(this.vbar=j.attr({rx:e.barRadius,ry:e.barRadius,x:Q,y:X,width:B,height:G}),this._vbarYMin=X+G/2,this._vbarTranslateMax=g-G):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var re=this.id,ue=b-.5,K=z?v+B+.5:v+.5,te=k-.5,Y=C?S+I+.5:S+.5,H=h._topdefs.selectAll("#"+re).data(C||z?[0]:[]);if(H.exit().remove(),H.enter().append("clipPath").attr("id",re).append("rect"),C||z?(this._clipRect=H.select("rect").attr({x:Math.floor(ue),y:Math.floor(te),width:Math.ceil(K)-Math.floor(ue),height:Math.ceil(Y)-Math.floor(te)}),this.container.call(M.setClipUrl,re,this.gd),this.bg.attr({x:y,y:p,width:d,height:c})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(M.setClipUrl,null),delete this._clipRect),C||z){var ee=w.behavior.drag().on("dragstart",function(){w.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(ee);var ne=w.behavior.drag().on("dragstart",function(){w.event.sourceEvent.preventDefault(),w.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));C&&this.hbar.on(".drag",null).call(ne),z&&this.vbar.on(".drag",null).call(ne)}this.setTranslate(r,t)},e.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(M.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},e.prototype._onBoxDrag=function(){var n=this.translateX,r=this.translateY;this.hbar&&(n-=w.event.dx),this.vbar&&(r-=w.event.dy),this.setTranslate(n,r)},e.prototype._onBoxWheel=function(){var n=this.translateX,r=this.translateY;this.hbar&&(n+=w.event.deltaY),this.vbar&&(r+=w.event.deltaY),this.setTranslate(n,r)},e.prototype._onBarDrag=function(){var n=this.translateX,r=this.translateY;if(this.hbar){var t=n+this._hbarXMin,h=t+this._hbarTranslateMax,s=T.constrain(w.event.x,t,h),o=(s-t)/(h-t),y=this.position.w-this._box.w;n=o*y}if(this.vbar){var d=r+this._vbarYMin,p=d+this._vbarTranslateMax,c=T.constrain(w.event.y,d,p),m=(c-d)/(p-d),l=this.position.h-this._box.h;r=m*l}this.setTranslate(n,r)},e.prototype.setTranslate=function(n,r){var t=this.position.w-this._box.w,h=this.position.h-this._box.h;if(n=T.constrain(n||0,0,t),r=T.constrain(r||0,0,h),this.translateX=n,this.translateY=r,this.container.call(M.setTranslate,this._box.l-this.position.l-n,this._box.t-this.position.t-r),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+n-.5),y:Math.floor(this.position.t+r-.5)}),this.hbar){var s=n/t;this.hbar.call(M.setTranslate,n+s*this._hbarTranslateMax,r)}if(this.vbar){var o=r/h;this.vbar.call(M.setTranslate,n,r+o*this._vbarTranslateMax)}}},{"../../lib":515,"../color":367,"../drawing":389,"@plotly/d3":58}],483:[function(i,U,V){U.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},{}],484:[function(i,U,V){U.exports={axisRefDescription:function(w,f,M){return["If set to a",w,"axis id (e.g. *"+w+"* or","*"+w+"2*), the `"+w+"` position refers to a",w,"coordinate. If set to *paper*, the `"+w+"`","position refers to the distance from the",f,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",f,"("+M+"). If set to a",w,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",f,"of the domain of that axis: e.g.,","*"+w+"2 domain* refers to the domain of the second",w," axis and a",w,"position of 0.5 refers to the","point between the",f,"and the",M,"of the domain of the","second",w,"axis."].join(" ")}}},{}],485:[function(i,U,V){U.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:"\u25B2"},DECREASING:{COLOR:"#FF4136",SYMBOL:"\u25BC"}}},{}],486:[function(i,U,V){U.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}},{}],487:[function(i,U,V){U.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},{}],488:[function(i,U,V){U.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},{}],489:[function(i,U,V){U.exports={circle:"\u25CF","circle-open":"\u25CB",square:"\u25A0","square-open":"\u25A1",diamond:"\u25C6","diamond-open":"\u25C7",cross:"+",x:"\u274C"}},{}],490:[function(i,U,V){U.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},{}],491:[function(i,U,V){U.exports={BADNUM:void 0,FP_SAFE:Number.MAX_VALUE*1e-4,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:24405875e-1,ALMOST_EQUAL:1-1e-6,LOG_CLIP:10,MINUS_SIGN:"\u2212"}},{}],492:[function(i,U,V){V.xmlns="http://www.w3.org/2000/xmlns/",V.svg="http://www.w3.org/2000/svg",V.xlink="http://www.w3.org/1999/xlink",V.svgAttrs={xmlns:V.svg,"xmlns:xlink":V.xlink}},{}],493:[function(i,U,V){V.version=i("./version").version,i("native-promise-only"),i("../build/plotcss");for(var w=i("./registry"),f=V.register=w.register,M=i("./plot_api"),T=Object.keys(M),e=0;e<T.length;e++){var a=T[e];a.charAt(0)!=="_"&&(V[a]=M[a]),f({moduleType:"apiMethod",name:a,fn:M[a]})}f(i("./traces/scatter")),f([i("./components/legend"),i("./components/fx"),i("./components/annotations"),i("./components/annotations3d"),i("./components/selections"),i("./components/shapes"),i("./components/images"),i("./components/updatemenus"),i("./components/sliders"),i("./components/rangeslider"),i("./components/rangeselector"),i("./components/grid"),i("./components/errorbars"),i("./components/colorscale"),i("./components/colorbar"),i("./components/modebar")]),f([i("./locale-en"),i("./locale-en-us")]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(f(window.PlotlyLocales),delete window.PlotlyLocales),V.Icons=i("./fonts/ploticon");var n=i("./components/fx"),r=i("./plots/plots");V.Plots={resize:r.resize,graphJson:r.graphJson,sendDataToCloud:r.sendDataToCloud},V.Fx={hover:n.hover,unhover:n.unhover,loneHover:n.loneHover,loneUnhover:n.loneUnhover},V.Snapshot=i("./snapshot"),V.PlotSchema=i("./plot_api/plot_schema")},{"../build/plotcss":1,"./components/annotations":358,"./components/annotations3d":363,"./components/colorbar":373,"./components/colorscale":379,"./components/errorbars":395,"./components/fx":407,"./components/grid":411,"./components/images":416,"./components/legend":424,"./components/modebar":430,"./components/rangeselector":438,"./components/rangeslider":445,"./components/selections":455,"./components/shapes":470,"./components/sliders":475,"./components/updatemenus":481,"./fonts/ploticon":494,"./locale-en":546,"./locale-en-us":545,"./plot_api":550,"./plot_api/plot_schema":554,"./plots/plots":628,"./registry":647,"./snapshot":652,"./traces/scatter":948,"./version":1132,"native-promise-only":245}],494:[function(i,U,V){U.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:["<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'>","<defs>"," <style>","  .cls-0{fill:#000;}","  .cls-1{fill:#FFF;}","  .cls-2{fill:#F26;}","  .cls-3{fill:#D69;}","  .cls-4{fill:#BAC;}","  .cls-5{fill:#9EF;}"," </style>","</defs>"," <title>plotly-logomark</title>"," <g id='symbol'>","  <rect class='cls-0' x='0' y='0' width='132' height='132' rx='18' ry='18'/>","  <circle class='cls-5' cx='102' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='30' r='6'/>","  <circle class='cls-4' cx='78' cy='54' r='6'/>","  <circle class='cls-3' cx='54' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='30' r='6'/>","  <circle class='cls-2' cx='30' cy='54' r='6'/>","  <path class='cls-1' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/>","  <path class='cls-1' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/>","  <path class='cls-1' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/>","  <path class='cls-1' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/>"," </g>","</svg>"].join("")}}},{}],495:[function(i,U,V){V.isLeftAnchor=function(f){return f.xanchor==="left"||f.xanchor==="auto"&&f.x<=1/3},V.isCenterAnchor=function(f){return f.xanchor==="center"||f.xanchor==="auto"&&f.x>1/3&&f.x<2/3},V.isRightAnchor=function(f){return f.xanchor==="right"||f.xanchor==="auto"&&f.x>=2/3},V.isTopAnchor=function(f){return f.yanchor==="top"||f.yanchor==="auto"&&f.y>=2/3},V.isMiddleAnchor=function(f){return f.yanchor==="middle"||f.yanchor==="auto"&&f.y>1/3&&f.y<2/3},V.isBottomAnchor=function(f){return f.yanchor==="bottom"||f.yanchor==="auto"&&f.y<=1/3}},{}],496:[function(i,U,V){var w=i("./mod"),f=w.mod,M=w.modHalf,T=Math.PI,e=2*T;function a(m){return m/180*T}function n(m){return m/T*180}function r(m){return Math.abs(m[1]-m[0])>e-1e-14}function t(m,l){return M(l-m,e)}function h(m,l){return Math.abs(t(m,l))}function s(m,l){if(r(l))return!0;var x,u;l[0]<l[1]?(x=l[0],u=l[1]):(x=l[1],u=l[0]),x=f(x,e),u=f(u,e),x>u&&(u+=e);var A=f(m,e),_=A+e;return A>=x&&A<=u||_>=x&&_<=u}function o(m,l,x,u){if(!s(l,u))return!1;var A,_;return x[0]<x[1]?(A=x[0],_=x[1]):(A=x[1],_=x[0]),m>=A&&m<=_}function y(m,l,x,u,A,_,g){A=A||0,_=_||0;var b=r([x,u]),v,k,S,E,C;b?(v=0,k=T,S=e):x<u?(v=x,S=u):(v=u,S=x),m<l?(E=m,C=l):(E=l,C=m);function F(O,z){return[O*Math.cos(z)+A,_-O*Math.sin(z)]}var I=Math.abs(S-v)<=T?0:1;function D(O,z,B){return"A"+[O,O]+" "+[0,I,B]+" "+F(O,z)}var R;return b?E===null?R="M"+F(C,v)+D(C,k,0)+D(C,S,0)+"Z":R="M"+F(E,v)+D(E,k,0)+D(E,S,0)+"ZM"+F(C,v)+D(C,k,1)+D(C,S,1)+"Z":E===null?(R="M"+F(C,v)+D(C,S,0),g&&(R+="L0,0Z")):R="M"+F(E,v)+"L"+F(C,v)+D(C,S,0)+"L"+F(E,S)+D(E,v,1)+"Z",R}function d(m,l,x,u,A){return y(null,m,l,x,u,A,0)}function p(m,l,x,u,A){return y(null,m,l,x,u,A,1)}function c(m,l,x,u,A,_){return y(m,l,x,u,A,_,1)}U.exports={deg2rad:a,rad2deg:n,angleDelta:t,angleDist:h,isFullCircle:r,isAngleInsideSector:s,isPtInsideSector:o,pathArc:d,pathSector:p,pathAnnulus:c}},{"./mod":522}],497:[function(i,U,V){var w=Array.isArray,f=ArrayBuffer,M=DataView;function T(r){return f.isView(r)&&!(r instanceof M)}V.isTypedArray=T;function e(r){return w(r)||T(r)}V.isArrayOrTypedArray=e;function a(r){return!e(r[0])}V.isArray1D=a,V.ensureArray=function(r,t){return w(r)||(r=[]),r.length=t,r},V.concat=function(){var r=[],t=!0,h=0,s,o,y,d,p,c,m,l;for(y=0;y<arguments.length;y++)d=arguments[y],c=d.length,c&&(o?r.push(d):(o=d,p=c),w(d)?s=!1:(t=!1,h?s!==d.constructor&&(s=!1):s=d.constructor),h+=c);if(!h)return[];if(!r.length)return o;if(t)return o.concat.apply(o,r);if(s){for(m=new s(h),m.set(o),y=0;y<r.length;y++)d=r[y],m.set(d,p),p+=d.length;return m}for(m=new Array(h),l=0;l<o.length;l++)m[l]=o[l];for(y=0;y<r.length;y++){for(d=r[y],l=0;l<d.length;l++)m[p+l]=d[l];p+=l}return m},V.maxRowLength=function(r){return n(r,Math.max,0)},V.minRowLength=function(r){return n(r,Math.min,1/0)};function n(r,t,h){if(e(r))if(e(r[0])){for(var s=h,o=0;o<r.length;o++)s=t(s,r[o].length);return s}else return r.length;return 0}},{}],498:[function(i,U,V){var w=i("fast-isnumeric"),f=i("../constants/numerical").BADNUM,M=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;U.exports=function(e){return typeof e=="string"&&(e=e.replace(M,"")),w(e)?Number(e):f}},{"../constants/numerical":491,"fast-isnumeric":190}],499:[function(i,U,V){U.exports=function(f){var M=f._fullLayout;M._glcanvas&&M._glcanvas.size()&&M._glcanvas.each(function(T){T.regl&&T.regl.clear({color:!0,depth:!0})})}},{}],500:[function(i,U,V){U.exports=function(f){f._responsiveChartHandler&&(window.removeEventListener("resize",f._responsiveChartHandler),delete f._responsiveChartHandler)}},{}],501:[function(i,U,V){var w=i("fast-isnumeric"),f=i("tinycolor2"),M=i("../plots/attributes"),T=i("../components/colorscale/scales"),e=i("../components/color"),a=i("../constants/interactions").DESELECTDIM,n=i("./nested_property"),r=i("./regex").counter,t=i("./mod").modHalf,h=i("./array").isArrayOrTypedArray;V.valObjectMeta={data_array:{coerceFunction:function(o,y,d){h(o)?y.set(o):d!==void 0&&y.set(d)}},enumerated:{coerceFunction:function(o,y,d,p){p.coerceNumber&&(o=+o),p.values.indexOf(o)===-1?y.set(d):y.set(o)},validateFunction:function(o,y){y.coerceNumber&&(o=+o);for(var d=y.values,p=0;p<d.length;p++){var c=String(d[p]);if(c.charAt(0)==="/"&&c.charAt(c.length-1)==="/"){var m=new RegExp(c.substr(1,c.length-2));if(m.test(o))return!0}else if(o===d[p])return!0}return!1}},boolean:{coerceFunction:function(o,y,d){o===!0||o===!1?y.set(o):y.set(d)}},number:{coerceFunction:function(o,y,d,p){!w(o)||p.min!==void 0&&o<p.min||p.max!==void 0&&o>p.max?y.set(d):y.set(+o)}},integer:{coerceFunction:function(o,y,d,p){o%1||!w(o)||p.min!==void 0&&o<p.min||p.max!==void 0&&o>p.max?y.set(d):y.set(+o)}},string:{coerceFunction:function(o,y,d,p){if(typeof o!="string"){var c=typeof o=="number";p.strict===!0||!c?y.set(d):y.set(String(o))}else p.noBlank&&!o?y.set(d):y.set(o)}},color:{coerceFunction:function(o,y,d){f(o).isValid()?y.set(o):y.set(d)}},colorlist:{coerceFunction:function(o,y,d){function p(c){return f(c).isValid()}!Array.isArray(o)||!o.length?y.set(d):o.every(p)?y.set(o):y.set(d)}},colorscale:{coerceFunction:function(o,y,d){y.set(T.get(o,d))}},angle:{coerceFunction:function(o,y,d){o==="auto"?y.set("auto"):w(o)?y.set(t(+o,360)):y.set(d)}},subplotid:{coerceFunction:function(o,y,d,p){var c=p.regex||r(d);if(typeof o=="string"&&c.test(o)){y.set(o);return}y.set(d)},validateFunction:function(o,y){var d=y.dflt;return o===d?!0:typeof o!="string"?!1:!!r(d).test(o)}},flaglist:{coerceFunction:function(o,y,d,p){if((p.extras||[]).indexOf(o)!==-1){y.set(o);return}if(typeof o!="string"){y.set(d);return}for(var c=o.split("+"),m=0;m<c.length;){var l=c[m];p.flags.indexOf(l)===-1||c.indexOf(l)<m?c.splice(m,1):m++}c.length?y.set(c.join("+")):y.set(d)}},any:{coerceFunction:function(o,y,d){o===void 0?y.set(d):y.set(o)}},info_array:{coerceFunction:function(o,y,d,p){function c(F,I,D){var R,O={set:function(z){R=z}};return D===void 0&&(D=I.dflt),V.valObjectMeta[I.valType].coerceFunction(F,O,D,I),R}var m=p.dimensions===2||p.dimensions==="1-2"&&Array.isArray(o)&&Array.isArray(o[0]);if(!Array.isArray(o)){y.set(d);return}var l=p.items,x=[],u=Array.isArray(l),A=u&&m&&Array.isArray(l[0]),_=m&&u&&!A,g=u&&!_?l.length:o.length,b,v,k,S,E,C;if(d=Array.isArray(d)?d:[],m)for(b=0;b<g;b++)for(x[b]=[],k=Array.isArray(o[b])?o[b]:[],_?E=l.length:u?E=l[b].length:E=k.length,v=0;v<E;v++)_?S=l[v]:u?S=l[b][v]:S=l,C=c(k[v],S,(d[b]||[])[v]),C!==void 0&&(x[b][v]=C);else for(b=0;b<g;b++)C=c(o[b],u?l[b]:l,d[b]),C!==void 0&&(x[b]=C);y.set(x)},validateFunction:function(o,y){if(!Array.isArray(o))return!1;var d=y.items,p=Array.isArray(d),c=y.dimensions===2;if(!y.freeLength&&o.length!==d.length)return!1;for(var m=0;m<o.length;m++)if(c){if(!Array.isArray(o[m])||!y.freeLength&&o[m].length!==d[m].length)return!1;for(var l=0;l<o[m].length;l++)if(!s(o[m][l],p?d[m][l]:d))return!1}else if(!s(o[m],p?d[m]:d))return!1;return!0}}},V.coerce=function(o,y,d,p,c){var m=n(d,p).get(),l=n(o,p),x=n(y,p),u=l.get(),A=y._template;if(u===void 0&&A&&(u=n(A,p).get(),A=0),c===void 0&&(c=m.dflt),m.arrayOk&&h(u))return x.set(u),u;var _=V.valObjectMeta[m.valType].coerceFunction;_(u,x,c,m);var g=x.get();return A&&g===c&&!s(u,m)&&(u=n(A,p).get(),_(u,x,c,m),g=x.get()),g},V.coerce2=function(o,y,d,p,c){var m=n(o,p),l=V.coerce(o,y,d,p,c),x=m.get();return x!=null?l:!1},V.coerceFont=function(o,y,d){var p={};return d=d||{},p.family=o(y+".family",d.family),p.size=o(y+".size",d.size),p.color=o(y+".color",d.color),p},V.coercePattern=function(o,y,d,p){var c=o(y+".shape");if(c){o(y+".solidity"),o(y+".size");var m=o(y+".fillmode"),l=m==="overlay";if(!p){var x=o(y+".bgcolor",l?d:void 0);o(y+".fgcolor",l?e.contrast(x):d)}o(y+".fgopacity",l?.5:1)}},V.coerceHoverinfo=function(o,y,d){var p=y._module.attributes,c=p.hoverinfo?p:M,m=c.hoverinfo,l;if(d._dataLength===1){var x=m.dflt==="all"?m.flags.slice():m.dflt.split("+");x.splice(x.indexOf("name"),1),l=x.join("+")}return V.coerce(o,y,c,"hoverinfo",l)},V.coerceSelectionMarkerOpacity=function(o,y){if(!!o.marker){var d=o.marker.opacity;if(d!==void 0){var p,c;!h(d)&&!o.selected&&!o.unselected&&(p=d,c=a*d),y("selected.marker.opacity",p),y("unselected.marker.opacity",c)}}};function s(o,y){var d=V.valObjectMeta[y.valType];if(y.arrayOk&&h(o))return!0;if(d.validateFunction)return d.validateFunction(o,y);var p={},c=p,m={set:function(l){c=l}};return d.coerceFunction(o,m,p,y),c!==p}V.validate=s},{"../components/color":367,"../components/colorscale/scales":382,"../constants/interactions":490,"../plots/attributes":562,"./array":497,"./mod":522,"./nested_property":523,"./regex":532,"fast-isnumeric":190,tinycolor2:313}],502:[function(i,U,V){var w=i("d3-time-format").timeFormat,f=i("fast-isnumeric"),M=i("./loggers"),T=i("./mod").mod,e=i("../constants/numerical"),a=e.BADNUM,n=e.ONEDAY,r=e.ONEHOUR,t=e.ONEMIN,h=e.ONESEC,s=e.EPOCHJD,o=i("../registry"),y=i("d3-time-format").utcFormat,d=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,p=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,c=new Date().getFullYear()-70;function m(R){return R&&o.componentsRegistry.calendars&&typeof R=="string"&&R!=="gregorian"}V.dateTick0=function(R,O){var z=l(R,!!O);if(O<2)return z;var B=V.dateTime2ms(z,R);return B+=n*(O-1),V.ms2DateTime(B,0,R)};function l(R,O){return m(R)?O?o.getComponentMethod("calendars","CANONICAL_SUNDAY")[R]:o.getComponentMethod("calendars","CANONICAL_TICK")[R]:O?"2000-01-02":"2000-01-01"}V.dfltRange=function(R){return m(R)?o.getComponentMethod("calendars","DFLTRANGE")[R]:["2000-01-01","2001-01-01"]},V.isJSDate=function(R){return typeof R=="object"&&R!==null&&typeof R.getTime=="function"};var x,u;V.dateTime2ms=function(R,O){if(V.isJSDate(R)){var z=R.getTimezoneOffset()*t,B=(R.getUTCMinutes()-R.getMinutes())*t+(R.getUTCSeconds()-R.getSeconds())*h+(R.getUTCMilliseconds()-R.getMilliseconds());if(B){var G=3*t;z=z-G/2+T(B-z+G/2,G)}return R=Number(R)-z,R>=x&&R<=u?R:a}if(typeof R!="string"&&typeof R!="number")return a;R=String(R);var Q=m(O),X=R.charAt(0);Q&&(X==="G"||X==="g")&&(R=R.substr(1),O="");var j=Q&&O.substr(0,7)==="chinese",re=R.match(j?p:d);if(!re)return a;var ue=re[1],K=re[3]||"1",te=Number(re[5]||1),Y=Number(re[7]||0),H=Number(re[9]||0),ee=Number(re[11]||0);if(Q){if(ue.length===2)return a;ue=Number(ue);var ne;try{var Z=o.getComponentMethod("calendars","getCal")(O);if(j){var q=K.charAt(K.length-1)==="i";K=parseInt(K,10),ne=Z.newDate(ue,Z.toMonthIndex(ue,K,q),te)}else ne=Z.newDate(ue,Number(K),te)}catch{return a}return ne?(ne.toJD()-s)*n+Y*r+H*t+ee*h:a}ue.length===2?ue=(Number(ue)+2e3-c)%100+c:ue=Number(ue),K-=1;var ie=new Date(Date.UTC(2e3,K,te,Y,H));return ie.setUTCFullYear(ue),ie.getUTCMonth()!==K||ie.getUTCDate()!==te?a:ie.getTime()+ee*h},x=V.MIN_MS=V.dateTime2ms("-9999"),u=V.MAX_MS=V.dateTime2ms("9999-12-31 23:59:59.9999"),V.isDateTime=function(R,O){return V.dateTime2ms(R,O)!==a};function A(R,O){return String(R+Math.pow(10,O)).substr(1)}var _=90*n,g=3*r,b=5*t;V.ms2DateTime=function(R,O,z){if(typeof R!="number"||!(R>=x&&R<=u))return a;O||(O=0);var B=Math.floor(T(R+.05,1)*10),G=Math.round(R-B/10),Q,X,j,re,ue,K;if(m(z)){var te=Math.floor(G/n)+s,Y=Math.floor(T(R,n));try{Q=o.getComponentMethod("calendars","getCal")(z).fromJD(te).formatDate("yyyy-mm-dd")}catch{Q=y("G%Y-%m-%d")(new Date(G))}if(Q.charAt(0)==="-")for(;Q.length<11;)Q="-0"+Q.substr(1);else for(;Q.length<10;)Q="0"+Q;X=O<_?Math.floor(Y/r):0,j=O<_?Math.floor(Y%r/t):0,re=O<g?Math.floor(Y%t/h):0,ue=O<b?Y%h*10+B:0}else K=new Date(G),Q=y("%Y-%m-%d")(K),X=O<_?K.getUTCHours():0,j=O<_?K.getUTCMinutes():0,re=O<g?K.getUTCSeconds():0,ue=O<b?K.getUTCMilliseconds()*10+B:0;return v(Q,X,j,re,ue)},V.ms2DateTimeLocal=function(R){if(!(R>=x+n&&R<=u-n))return a;var O=Math.floor(T(R+.05,1)*10),z=new Date(Math.round(R-O/10)),B=w("%Y-%m-%d")(z),G=z.getHours(),Q=z.getMinutes(),X=z.getSeconds(),j=z.getUTCMilliseconds()*10+O;return v(B,G,Q,X,j)};function v(R,O,z,B,G){if((O||z||B||G)&&(R+=" "+A(O,2)+":"+A(z,2),(B||G)&&(R+=":"+A(B,2),G))){for(var Q=4;G%10===0;)Q-=1,G/=10;R+="."+A(G,Q)}return R}V.cleanDate=function(R,O,z){if(R===a)return O;if(V.isJSDate(R)||typeof R=="number"&&isFinite(R)){if(m(z))return M.error("JS Dates and milliseconds are incompatible with world calendars",R),O;if(R=V.ms2DateTimeLocal(+R),!R&&O!==void 0)return O}else if(!V.isDateTime(R,z))return M.error("unrecognized date",R),O;return R};var k=/%\d?f/g,S=/%h/g,E={1:"1",2:"1",3:"2",4:"2"};function C(R,O,z,B){R=R.replace(k,function(Q){var X=Math.min(+Q.charAt(1)||6,6),j=(O/1e3%1+2).toFixed(X).substr(2).replace(/0+$/,"")||"0";return j});var G=new Date(Math.floor(O+.05));if(R=R.replace(S,function(){return E[z("%q")(G)]}),m(B))try{R=o.getComponentMethod("calendars","worldCalFmt")(R,O,B)}catch{return"Invalid"}return z(R)(G)}var F=[59,59.9,59.99,59.999,59.9999];function I(R,O){var z=T(R+.05,n),B=A(Math.floor(z/r),2)+":"+A(T(Math.floor(z/t),60),2);if(O!=="M"){f(O)||(O=0);var G=Math.min(T(R/h,60),F[O]),Q=(100+G).toFixed(O).substr(1);O>0&&(Q=Q.replace(/0+$/,"").replace(/[\.]$/,"")),B+=":"+Q}return B}V.formatDate=function(R,O,z,B,G,Q){if(G=m(G)&&G,!O)if(z==="y")O=Q.year;else if(z==="m")O=Q.month;else if(z==="d")O=Q.dayMonth+`
`+Q.year;else return I(R,z)+`
`+C(Q.dayMonthYear,R,B,G);return C(O,R,B,G)};var D=3*n;V.incrementMonth=function(R,O,z){z=m(z)&&z;var B=T(R,n);if(R=Math.round(R-B),z)try{var G=Math.round(R/n)+s,Q=o.getComponentMethod("calendars","getCal")(z),X=Q.fromJD(G);return O%12?Q.add(X,O,"m"):Q.add(X,O/12,"y"),(X.toJD()-s)*n+B}catch{M.error("invalid ms "+R+" in calendar "+z)}var j=new Date(R+D);return j.setUTCMonth(j.getUTCMonth()+O)+B-D},V.findExactDates=function(R,O){for(var z=0,B=0,G=0,Q=0,X,j,re=m(O)&&o.getComponentMethod("calendars","getCal")(O),ue=0;ue<R.length;ue++){if(j=R[ue],!f(j)){Q++;continue}if(!(j%n))if(re)try{X=re.fromJD(j/n+s),X.day()===1?X.month()===1?z++:B++:G++}catch{}else X=new Date(j),X.getUTCDate()===1?X.getUTCMonth()===0?z++:B++:G++}B+=z,G+=B;var K=R.length-Q;return{exactYears:z/K,exactMonths:B/K,exactDays:G/K}}},{"../constants/numerical":491,"../registry":647,"./loggers":519,"./mod":522,"d3-time-format":120,"fast-isnumeric":190}],503:[function(i,U,V){var w=i("@plotly/d3"),f=i("./loggers"),M=i("./matrix"),T=i("gl-mat4");function e(c){var m;if(typeof c=="string"){if(m=document.getElementById(c),m===null)throw new Error("No DOM element with id '"+c+"' exists on the page.");return m}else if(c==null)throw new Error("DOM element provided is null or undefined");return c}function a(c){var m=w.select(c);return m.node()instanceof HTMLElement&&m.size()&&m.classed("js-plotly-plot")}function n(c){var m=c&&c.parentNode;m&&m.removeChild(c)}function r(c,m){t("global",c,m)}function t(c,m,l){var x="plotly.js-style-"+c,u=document.getElementById(x);u||(u=document.createElement("style"),u.setAttribute("id",x),u.appendChild(document.createTextNode("")),document.head.appendChild(u));var A=u.sheet;A.insertRule?A.insertRule(m+"{"+l+"}",0):A.addRule?A.addRule(m,l,0):f.warn("addStyleRule failed")}function h(c){var m="plotly.js-style-"+c,l=document.getElementById(m);l&&n(l)}function s(c){var m=y(c),l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return m.forEach(function(x){var u=o(x);if(u){var A=M.convertCssMatrix(u);l=T.multiply(l,l,A)}}),l}function o(c){var m=window.getComputedStyle(c,null),l=m.getPropertyValue("-webkit-transform")||m.getPropertyValue("-moz-transform")||m.getPropertyValue("-ms-transform")||m.getPropertyValue("-o-transform")||m.getPropertyValue("transform");return l==="none"?null:l.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(x){return+x})}function y(c){for(var m=[];d(c);)m.push(c),c=c.parentNode;return m}function d(c){return c&&(c instanceof Element||c instanceof HTMLElement)}function p(c,m){return c&&m&&c.x===m.x&&c.y===m.y&&c.top===m.top&&c.left===m.left&&c.right===m.right&&c.bottom===m.bottom}U.exports={getGraphDiv:e,isPlotDiv:a,removeElement:n,addStyleRule:r,addRelatedStyleRule:t,deleteRelatedStyleRule:h,getFullTransformMatrix:s,getElementTransformMatrix:o,getElementAndAncestors:y,equalDomRects:p}},{"./loggers":519,"./matrix":521,"@plotly/d3":58,"gl-mat4":210}],504:[function(i,U,V){var w=i("events").EventEmitter,f={init:function(M){if(M._ev instanceof w)return M;var T=new w,e=new w;return M._ev=T,M._internalEv=e,M.on=T.on.bind(T),M.once=T.once.bind(T),M.removeListener=T.removeListener.bind(T),M.removeAllListeners=T.removeAllListeners.bind(T),M._internalOn=e.on.bind(e),M._internalOnce=e.once.bind(e),M._removeInternalListener=e.removeListener.bind(e),M._removeAllInternalListeners=e.removeAllListeners.bind(e),M.emit=function(a,n){typeof jQuery<"u"&&jQuery(M).trigger(a,n),T.emit(a,n),e.emit(a,n)},M},triggerHandler:function(M,T,e){var a,n;typeof jQuery<"u"&&(a=jQuery(M).triggerHandler(T,e));var r=M._ev;if(!r)return a;var t=r._events[T];if(!t)return a;function h(o){if(o.listener){if(r.removeListener(T,o.listener),!o.fired)return o.fired=!0,o.listener.apply(r,[e])}else return o.apply(r,[e])}t=Array.isArray(t)?t:[t];var s;for(s=0;s<t.length-1;s++)h(t[s]);return n=h(t[s]),a!==void 0?a:n},purge:function(M){return delete M._ev,delete M.on,delete M.once,delete M.removeListener,delete M.removeAllListeners,delete M.emit,delete M._ev,delete M._internalEv,delete M._internalOn,delete M._internalOnce,delete M._removeInternalListener,delete M._removeAllInternalListeners,M}};U.exports=f},{events:84}],505:[function(i,U,V){var w=i("./is_plain_object.js"),f=Array.isArray;function M(e,a){var n,r;for(n=0;n<e.length;n++){if(r=e[n],r!==null&&typeof r=="object")return!1;r!==void 0&&(a[n]=r)}return!0}V.extendFlat=function(){return T(arguments,!1,!1,!1)},V.extendDeep=function(){return T(arguments,!0,!1,!1)},V.extendDeepAll=function(){return T(arguments,!0,!0,!1)},V.extendDeepNoArrays=function(){return T(arguments,!0,!1,!0)};function T(e,a,n,r){var t=e[0],h=e.length,s,o,y,d,p,c,m;if(h===2&&f(t)&&f(e[1])&&t.length===0){if(m=M(e[1],t),m)return t;t.splice(0,t.length)}for(var l=1;l<h;l++){s=e[l];for(o in s)y=t[o],d=s[o],r&&f(d)?t[o]=d:a&&d&&(w(d)||(p=f(d)))?(p?(p=!1,c=y&&f(y)?y:[]):c=y&&w(y)?y:{},t[o]=T([c,d],a,n,r)):(typeof d<"u"||n)&&(t[o]=d)}return t}},{"./is_plain_object.js":516}],506:[function(i,U,V){U.exports=function(f){for(var M={},T=[],e=0,a=0;a<f.length;a++){var n=f[a];M[n]!==1&&(M[n]=1,T[e++]=n)}return T}},{}],507:[function(i,U,V){U.exports=function(e){for(var a=M(e)?f:w,n=[],r=0;r<e.length;r++){var t=e[r];a(t)&&n.push(t)}return n};function w(T){return T.visible===!0}function f(T){var e=T[0].trace;return e.visible===!0&&e._length!==0}function M(T){return Array.isArray(T)&&Array.isArray(T[0])&&T[0][0]&&T[0][0].trace}},{}],508:[function(i,U,V){var w=i("@plotly/d3"),f=i("country-regex"),M=i("@turf/area"),T=i("@turf/centroid"),e=i("@turf/bbox"),a=i("./identity"),n=i("./loggers"),r=i("./is_plain_object"),t=i("./nested_property"),h=i("./polygon"),s=Object.keys(f),o={"ISO-3":a,"USA-states":a,"country names":y};function y(A){for(var _=0;_<s.length;_++){var g=s[_],b=new RegExp(f[g]);if(b.test(A.trim().toLowerCase()))return g}return n.log("Unrecognized country name: "+A+"."),!1}function d(A,_,g){if(!_||typeof _!="string")return!1;var b=o[A](_),v,k,S;if(b){if(A==="USA-states")for(v=[],S=0;S<g.length;S++)k=g[S],k.properties&&k.properties.gu&&k.properties.gu==="USA"&&v.push(k);else v=g;for(S=0;S<v.length;S++)if(k=v[S],k.id===b)return k;n.log(["Location with id",b,"does not have a matching topojson feature at this resolution."].join(" "))}return!1}function p(A){var _=A.geometry,g=_.coordinates,b=A.id,v=[],k,S,E,C;function F(I){for(var D=0;D<I.length-1;D++)if(I[D][0]>0&&I[D+1][0]<0)return D;return null}switch(b==="RUS"||b==="FJI"?k=function(I){var D;if(F(I)===null)D=I;else for(D=new Array(I.length),C=0;C<I.length;C++)D[C]=[I[C][0]<0?I[C][0]+360:I[C][0],I[C][1]];v.push(h.tester(D))}:b==="ATA"?k=function(I){var D=F(I);if(D===null)return v.push(h.tester(I));var R=new Array(I.length+1),O=0;for(C=0;C<I.length;C++)C>D?R[O++]=[I[C][0]+360,I[C][1]]:C===D?(R[O++]=I[C],R[O++]=[I[C][0],-90]):R[O++]=I[C];var z=h.tester(R);z.pts.pop(),v.push(z)}:k=function(I){v.push(h.tester(I))},_.type){case"MultiPolygon":for(S=0;S<g.length;S++)for(E=0;E<g[S].length;E++)k(g[S][E]);break;case"Polygon":for(S=0;S<g.length;S++)k(g[S]);break}return v}function c(A){var _=A.geojson,g=window.PlotlyGeoAssets||{},b=typeof _=="string"?g[_]:_;return r(b)?b:(n.error("Oops ... something went wrong when fetching "+_),!1)}function m(A){var _=A[0].trace,g=c(_);if(!g)return!1;var b={},v=[],k;for(k=0;k<_._length;k++){var S=A[k];(S.loc||S.loc===0)&&(b[S.loc]=S)}function E(I){var D=t(I,_.featureidkey||"id").get(),R=b[D];if(R){var O=I.geometry;if(O.type==="Polygon"||O.type==="MultiPolygon"){var z={type:"Feature",id:D,geometry:O,properties:{}};z.properties.ct=l(z),R.fIn=I,R.fOut=z,v.push(z)}else n.log(["Location",R.loc,"does not have a valid GeoJSON geometry.","Traces with locationmode *geojson-id* only support","*Polygon* and *MultiPolygon* geometries."].join(" "))}delete b[D]}switch(g.type){case"FeatureCollection":var C=g.features;for(k=0;k<C.length;k++)E(C[k]);break;case"Feature":E(g);break;default:return n.warn(["Invalid GeoJSON type",(g.type||"none")+".","Traces with locationmode *geojson-id* only support","*FeatureCollection* and *Feature* types."].join(" ")),!1}for(var F in b)n.log(["Location *"+F+"*","does not have a matching feature with id-key","*"+_.featureidkey+"*."].join(" "));return v}function l(A){var _=A.geometry,g;if(_.type==="MultiPolygon")for(var b=_.coordinates,v=0,k=0;k<b.length;k++){var S={type:"Polygon",coordinates:b[k]},E=M.default(S);E>v&&(v=E,g=S)}else g=_;return T.default(g).geometry.coordinates}function x(A){var _=window.PlotlyGeoAssets||{},g=[];function b(C){return new Promise(function(F,I){w.json(C,function(D,R){if(D){delete _[C];var O=D.status===404?'GeoJSON at URL "'+C+'" does not exist.':"Unexpected error while fetching from "+C;return I(new Error(O))}return _[C]=R,F(R)})})}function v(C){return new Promise(function(F,I){var D=0,R=setInterval(function(){if(_[C]&&_[C]!=="pending")return clearInterval(R),F(_[C]);if(D>100)return clearInterval(R),I("Unexpected error while fetching from "+C);D++},50)})}for(var k=0;k<A.length;k++){var S=A[k][0].trace,E=S.geojson;typeof E=="string"&&(_[E]?_[E]==="pending"&&g.push(v(E)):(_[E]="pending",g.push(b(E))))}return g}function u(A){return e.default(A)}U.exports={locationToFeature:d,feature2polygons:p,getTraceGeojson:c,extractTraceFeature:m,fetchTraceGeoData:x,computeBbox:u}},{"./identity":513,"./is_plain_object":516,"./loggers":519,"./nested_property":523,"./polygon":527,"@plotly/d3":58,"@turf/area":61,"@turf/bbox":64,"@turf/centroid":67,"country-regex":94}],509:[function(i,U,V){var w=i("../constants/numerical").BADNUM;V.calcTraceToLineCoords=function(f){for(var M=f[0].trace,T=M.connectgaps,e=[],a=[],n=0;n<f.length;n++){var r=f[n],t=r.lonlat;t[0]!==w?a.push(t):!T&&a.length>0&&(e.push(a),a=[])}return a.length>0&&e.push(a),e},V.makeLine=function(f){return f.length===1?{type:"LineString",coordinates:f[0]}:{type:"MultiLineString",coordinates:f}},V.makePolygon=function(f){if(f.length===1)return{type:"Polygon",coordinates:f};for(var M=new Array(f.length),T=0;T<f.length;T++)M[T]=[f[T]];return{type:"MultiPolygon",coordinates:M}},V.makeBlank=function(){return{type:"Point",coordinates:[]}}},{"../constants/numerical":491}],510:[function(i,U,V){var w=i("./mod").mod;V.segmentsIntersect=f;function f(n,r,t,h,s,o,y,d){var p=t-n,c=s-n,m=y-s,l=h-r,x=o-r,u=d-o,A=p*u-m*l;if(A===0)return null;var _=(c*u-m*x)/A,g=(c*l-p*x)/A;return g<0||g>1||_<0||_>1?null:{x:n+p*_,y:r+l*_}}V.segmentDistance=function(r,t,h,s,o,y,d,p){if(f(r,t,h,s,o,y,d,p))return 0;var c=h-r,m=s-t,l=d-o,x=p-y,u=c*c+m*m,A=l*l+x*x,_=Math.min(M(c,m,u,o-r,y-t),M(c,m,u,d-r,p-t),M(l,x,A,r-o,t-y),M(l,x,A,h-o,s-y));return Math.sqrt(_)};function M(n,r,t,h,s){var o=h*n+s*r;if(o<0)return h*h+s*s;if(o>t){var y=h-n,d=s-r;return y*y+d*d}else{var p=h*r-s*n;return p*p/t}}var T,e,a;V.getTextLocation=function(r,t,h,s){if((r!==e||s!==a)&&(T={},e=r,a=s),T[h])return T[h];var o=r.getPointAtLength(w(h-s/2,t)),y=r.getPointAtLength(w(h+s/2,t)),d=Math.atan((y.y-o.y)/(y.x-o.x)),p=r.getPointAtLength(w(h,t)),c=(p.x*4+o.x+y.x)/6,m=(p.y*4+o.y+y.y)/6,l={x:c,y:m,theta:d};return T[h]=l,l},V.clearLocationCache=function(){e=null},V.getVisibleSegment=function(r,t,h){var s=t.left,o=t.right,y=t.top,d=t.bottom,p=0,c=r.getTotalLength(),m=c,l,x;function u(_){var g=r.getPointAtLength(_);_===0?l=g:_===c&&(x=g);var b=g.x<s?s-g.x:g.x>o?g.x-o:0,v=g.y<y?y-g.y:g.y>d?g.y-d:0;return Math.sqrt(b*b+v*v)}for(var A=u(p);A;){if(p+=A+h,p>m)return;A=u(p)}for(A=u(m);A;){if(m-=A+h,p>m)return;A=u(m)}return{min:p,max:m,len:m-p,total:c,isClosed:p===0&&m===c&&Math.abs(l.x-x.x)<.1&&Math.abs(l.y-x.y)<.1}},V.findPointOnPath=function(r,t,h,s){s=s||{};for(var o=s.pathLength||r.getTotalLength(),y=s.tolerance||.001,d=s.iterationLimit||30,p=r.getPointAtLength(0)[h]>r.getPointAtLength(o)[h]?-1:1,c=0,m=0,l=o,x,u,A;c<d;){if(x=(m+l)/2,u=r.getPointAtLength(x),A=u[h]-t,Math.abs(A)<y)return u;p*A>0?l=x:m=x,c++}return u}},{"./mod":522}],511:[function(i,U,V){var w=i("fast-isnumeric"),f=i("tinycolor2"),M=i("color-normalize"),T=i("../components/colorscale"),e=i("../components/color/attributes").defaultLine,a=i("./array").isArrayOrTypedArray,n=M(e),r=1;function t(d,p){var c=d;return c[3]*=p,c}function h(d){if(w(d))return n;var p=M(d);return p.length?p:n}function s(d){return w(d)?d:r}function o(d,p,c){var m=d.color,l=a(m),x=a(p),u=T.extractOpts(d),A=[],_,g,b,v,k;if(u.colorscale!==void 0?_=T.makeColorScaleFuncFromTrace(d):_=h,l?g=function(E,C){return E[C]===void 0?n:M(_(E[C]))}:g=h,x?b=function(E,C){return E[C]===void 0?r:s(E[C])}:b=s,l||x)for(var S=0;S<c;S++)v=g(m,S),k=b(p,S),A[S]=t(v,k);else A=t(M(m),p);return A}function y(d){var p=T.extractOpts(d),c=p.colorscale;return p.reversescale&&(c=T.flipScale(p.colorscale)),c.map(function(m){var l=m[0],x=f(m[1]),u=x.toRgb();return{index:l,rgb:[u.r,u.g,u.b,u.a]}})}U.exports={formatColor:o,parseColorScale:y}},{"../components/color/attributes":366,"../components/colorscale":379,"./array":497,"color-normalize":89,"fast-isnumeric":190,tinycolor2:313}],512:[function(i,U,V){var w=i("./identity");function f(M){return[M]}U.exports={keyFun:function(M){return M.key},repeat:f,descend:w,wrap:f,unwrap:function(M){return M[0]}}},{"./identity":513}],513:[function(i,U,V){U.exports=function(f){return f}},{}],514:[function(i,U,V){U.exports=function(f,M){if(!M)return f;var T=1/Math.abs(M),e=T>1?(T*f+T*M)/T:f+M,a=String(e).length;if(a>16){var n=String(M).length,r=String(f).length;if(a>=r+n){var t=parseFloat(e).toPrecision(12);t.indexOf("e+")===-1&&(e=+t)}}return e}},{}],515:[function(i,U,V){var w=i("@plotly/d3"),f=i("d3-time-format").utcFormat,M=i("d3-format").format,T=i("fast-isnumeric"),e=i("../constants/numerical"),a=e.FP_SAFE,n=-a,r=e.BADNUM,t=U.exports={};t.adjustFormat=function(K){return!K||/^\d[.]\df/.test(K)||/[.]\d%/.test(K)?K:K==="0.f"?"~f":/^\d%/.test(K)?"~%":/^\ds/.test(K)?"~s":!/^[~,.0$]/.test(K)&&/[&fps]/.test(K)?"~"+K:K};var h={};t.warnBadFormat=function(ue){var K=String(ue);h[K]||(h[K]=1,t.warn('encountered bad format: "'+K+'"'))},t.noFormat=function(ue){return String(ue)},t.numberFormat=function(ue){var K;try{K=M(t.adjustFormat(ue))}catch{return t.warnBadFormat(ue),t.noFormat}return K},t.nestedProperty=i("./nested_property"),t.keyedContainer=i("./keyed_container"),t.relativeAttr=i("./relative_attr"),t.isPlainObject=i("./is_plain_object"),t.toLogRange=i("./to_log_range"),t.relinkPrivateKeys=i("./relink_private");var s=i("./array");t.isTypedArray=s.isTypedArray,t.isArrayOrTypedArray=s.isArrayOrTypedArray,t.isArray1D=s.isArray1D,t.ensureArray=s.ensureArray,t.concat=s.concat,t.maxRowLength=s.maxRowLength,t.minRowLength=s.minRowLength;var o=i("./mod");t.mod=o.mod,t.modHalf=o.modHalf;var y=i("./coerce");t.valObjectMeta=y.valObjectMeta,t.coerce=y.coerce,t.coerce2=y.coerce2,t.coerceFont=y.coerceFont,t.coercePattern=y.coercePattern,t.coerceHoverinfo=y.coerceHoverinfo,t.coerceSelectionMarkerOpacity=y.coerceSelectionMarkerOpacity,t.validate=y.validate;var d=i("./dates");t.dateTime2ms=d.dateTime2ms,t.isDateTime=d.isDateTime,t.ms2DateTime=d.ms2DateTime,t.ms2DateTimeLocal=d.ms2DateTimeLocal,t.cleanDate=d.cleanDate,t.isJSDate=d.isJSDate,t.formatDate=d.formatDate,t.incrementMonth=d.incrementMonth,t.dateTick0=d.dateTick0,t.dfltRange=d.dfltRange,t.findExactDates=d.findExactDates,t.MIN_MS=d.MIN_MS,t.MAX_MS=d.MAX_MS;var p=i("./search");t.findBin=p.findBin,t.sorterAsc=p.sorterAsc,t.sorterDes=p.sorterDes,t.distinctVals=p.distinctVals,t.roundUp=p.roundUp,t.sort=p.sort,t.findIndexOfMin=p.findIndexOfMin,t.sortObjectKeys=i("./sort_object_keys");var c=i("./stats");t.aggNums=c.aggNums,t.len=c.len,t.mean=c.mean,t.median=c.median,t.midRange=c.midRange,t.variance=c.variance,t.stdev=c.stdev,t.interp=c.interp;var m=i("./matrix");t.init2dArray=m.init2dArray,t.transposeRagged=m.transposeRagged,t.dot=m.dot,t.translationMatrix=m.translationMatrix,t.rotationMatrix=m.rotationMatrix,t.rotationXYMatrix=m.rotationXYMatrix,t.apply3DTransform=m.apply3DTransform,t.apply2DTransform=m.apply2DTransform,t.apply2DTransform2=m.apply2DTransform2,t.convertCssMatrix=m.convertCssMatrix,t.inverseTransformMatrix=m.inverseTransformMatrix;var l=i("./angles");t.deg2rad=l.deg2rad,t.rad2deg=l.rad2deg,t.angleDelta=l.angleDelta,t.angleDist=l.angleDist,t.isFullCircle=l.isFullCircle,t.isAngleInsideSector=l.isAngleInsideSector,t.isPtInsideSector=l.isPtInsideSector,t.pathArc=l.pathArc,t.pathSector=l.pathSector,t.pathAnnulus=l.pathAnnulus;var x=i("./anchor_utils");t.isLeftAnchor=x.isLeftAnchor,t.isCenterAnchor=x.isCenterAnchor,t.isRightAnchor=x.isRightAnchor,t.isTopAnchor=x.isTopAnchor,t.isMiddleAnchor=x.isMiddleAnchor,t.isBottomAnchor=x.isBottomAnchor;var u=i("./geometry2d");t.segmentsIntersect=u.segmentsIntersect,t.segmentDistance=u.segmentDistance,t.getTextLocation=u.getTextLocation,t.clearLocationCache=u.clearLocationCache,t.getVisibleSegment=u.getVisibleSegment,t.findPointOnPath=u.findPointOnPath;var A=i("./extend");t.extendFlat=A.extendFlat,t.extendDeep=A.extendDeep,t.extendDeepAll=A.extendDeepAll,t.extendDeepNoArrays=A.extendDeepNoArrays;var _=i("./loggers");t.log=_.log,t.warn=_.warn,t.error=_.error;var g=i("./regex");t.counterRegex=g.counter;var b=i("./throttle");t.throttle=b.throttle,t.throttleDone=b.done,t.clearThrottle=b.clear;var v=i("./dom");t.getGraphDiv=v.getGraphDiv,t.isPlotDiv=v.isPlotDiv,t.removeElement=v.removeElement,t.addStyleRule=v.addStyleRule,t.addRelatedStyleRule=v.addRelatedStyleRule,t.deleteRelatedStyleRule=v.deleteRelatedStyleRule,t.getFullTransformMatrix=v.getFullTransformMatrix,t.getElementTransformMatrix=v.getElementTransformMatrix,t.getElementAndAncestors=v.getElementAndAncestors,t.equalDomRects=v.equalDomRects,t.clearResponsive=i("./clear_responsive"),t.preserveDrawingBuffer=i("./preserve_drawing_buffer"),t.makeTraceGroups=i("./make_trace_groups"),t._=i("./localize"),t.notifier=i("./notifier"),t.filterUnique=i("./filter_unique"),t.filterVisible=i("./filter_visible"),t.pushUnique=i("./push_unique"),t.increment=i("./increment"),t.cleanNumber=i("./clean_number"),t.ensureNumber=function(K){return T(K)?(K=Number(K),K>a||K<n?r:K):r},t.isIndex=function(ue,K){return K!==void 0&&ue>=K?!1:T(ue)&&ue>=0&&ue%1===0},t.noop=i("./noop"),t.identity=i("./identity"),t.repeat=function(ue,K){for(var te=new Array(K),Y=0;Y<K;Y++)te[Y]=ue;return te},t.swapAttrs=function(ue,K,te,Y){te||(te="x"),Y||(Y="y");for(var H=0;H<K.length;H++){var ee=K[H],ne=t.nestedProperty(ue,ee.replace("?",te)),Z=t.nestedProperty(ue,ee.replace("?",Y)),q=ne.get();ne.set(Z.get()),Z.set(q)}},t.raiseToTop=function(K){K.parentNode.appendChild(K)},t.cancelTransition=function(ue){return ue.transition().duration(0)},t.constrain=function(ue,K,te){return K>te?Math.max(te,Math.min(K,ue)):Math.max(K,Math.min(te,ue))},t.bBoxIntersect=function(ue,K,te){return te=te||0,ue.left<=K.right+te&&K.left<=ue.right+te&&ue.top<=K.bottom+te&&K.top<=ue.bottom+te},t.simpleMap=function(ue,K,te,Y,H){for(var ee=ue.length,ne=new Array(ee),Z=0;Z<ee;Z++)ne[Z]=K(ue[Z],te,Y,H);return ne},t.randstr=function ue(K,te,Y,H){if(Y||(Y=16),te===void 0&&(te=24),te<=0)return"0";var ee=Math.log(Math.pow(2,te))/Math.log(Y),ne="",Z,q,ie;for(Z=2;ee===1/0;Z*=2)ee=Math.log(Math.pow(2,te/Z))/Math.log(Y)*Z;var se=ee-Math.floor(ee);for(Z=0;Z<Math.floor(ee);Z++)ie=Math.floor(Math.random()*Y).toString(Y),ne=ie+ne;se&&(q=Math.pow(Y,se),ie=Math.floor(Math.random()*q).toString(Y),ne=ie+ne);var ae=parseInt(ne,Y);return K&&K[ne]||ae!==1/0&&ae>=Math.pow(2,te)?H>10?(t.warn("randstr failed uniqueness"),ne):ue(K,te,Y,(H||0)+1):ne},t.OptionControl=function(ue,K){ue||(ue={}),K||(K="opt");var te={};return te.optionList=[],te._newoption=function(Y){Y[K]=ue,te[Y.name]=Y,te.optionList.push(Y)},te["_"+K]=ue,te},t.smooth=function(ue,K){if(K=Math.round(K)||0,K<2)return ue;var te=ue.length,Y=2*te,H=2*K-1,ee=new Array(H),ne=new Array(te),Z,q,ie,se;for(Z=0;Z<H;Z++)ee[Z]=(1-Math.cos(Math.PI*(Z+1)/K))/(2*K);for(Z=0;Z<te;Z++){for(se=0,q=0;q<H;q++)ie=Z+q+1-K,ie<-te?ie-=Y*Math.round(ie/Y):ie>=Y&&(ie-=Y*Math.floor(ie/Y)),ie<0?ie=-1-ie:ie>=te&&(ie=Y-1-ie),se+=ue[ie]*ee[q];ne[Z]=se}return ne},t.syncOrAsync=function(ue,K,te){var Y,H;function ee(){return t.syncOrAsync(ue,K,te)}for(;ue.length;)if(H=ue.splice(0,1)[0],Y=H(K),Y&&Y.then)return Y.then(ee);return te&&te(K)},t.stripTrailingSlash=function(ue){return ue.substr(-1)==="/"?ue.substr(0,ue.length-1):ue},t.noneOrAll=function(ue,K,te){if(!!ue){var Y=!1,H=!0,ee,ne;for(ee=0;ee<te.length;ee++)ne=ue[te[ee]],ne!=null?Y=!0:H=!1;if(Y&&!H)for(ee=0;ee<te.length;ee++)ue[te[ee]]=K[te[ee]]}},t.mergeArray=function(ue,K,te,Y){var H=typeof Y=="function";if(t.isArrayOrTypedArray(ue))for(var ee=Math.min(ue.length,K.length),ne=0;ne<ee;ne++){var Z=ue[ne];K[ne][te]=H?Y(Z):Z}},t.mergeArrayCastPositive=function(ue,K,te){return t.mergeArray(ue,K,te,function(Y){var H=+Y;return isFinite(H)&&H>0?H:0})},t.fillArray=function(ue,K,te,Y){if(Y=Y||t.identity,t.isArrayOrTypedArray(ue))for(var H=0;H<K.length;H++)K[H][te]=Y(ue[H])},t.castOption=function(ue,K,te,Y){Y=Y||t.identity;var H=t.nestedProperty(ue,te).get();return t.isArrayOrTypedArray(H)?Array.isArray(K)&&t.isArrayOrTypedArray(H[K[0]])?Y(H[K[0]][K[1]]):Y(H[K]):H},t.extractOption=function(ue,K,te,Y){if(te in ue)return ue[te];var H=t.nestedProperty(K,Y).get();if(!Array.isArray(H))return H};function k(ue){var K={};for(var te in ue)for(var Y=ue[te],H=0;H<Y.length;H++)K[Y[H]]=+te;return K}t.tagSelected=function(ue,K,te){var Y=K.selectedpoints,H=K._indexToPoints,ee;H&&(ee=k(H));function ne(ae){return ae!==void 0&&ae<ue.length}for(var Z=0;Z<Y.length;Z++){var q=Y[Z];if(t.isIndex(q)||t.isArrayOrTypedArray(q)&&t.isIndex(q[0])&&t.isIndex(q[1])){var ie=ee?ee[q]:q,se=te?te[ie]:ie;ne(se)&&(ue[se].selected=1)}}},t.selIndices2selPoints=function(ue){var K=ue.selectedpoints,te=ue._indexToPoints;if(te){for(var Y=k(te),H=[],ee=0;ee<K.length;ee++){var ne=K[ee];if(t.isIndex(ne)){var Z=Y[ne];t.isIndex(Z)&&H.push(Z)}}return H}else return K},t.getTargetArray=function(ue,K){var te=K.target;if(typeof te=="string"&&te){var Y=t.nestedProperty(ue,te).get();return Array.isArray(Y)?Y:!1}else if(Array.isArray(te))return te;return!1},t.minExtend=function(ue,K){var te={};typeof K!="object"&&(K={});var Y=3,H=Object.keys(ue),ee,ne,Z;for(ee=0;ee<H.length;ee++)ne=H[ee],Z=ue[ne],!(ne.charAt(0)==="_"||typeof Z=="function")&&(ne==="module"?te[ne]=Z:Array.isArray(Z)?ne==="colorscale"?te[ne]=Z.slice():te[ne]=Z.slice(0,Y):t.isTypedArray(Z)?te[ne]=Z.subarray(0,Y):Z&&typeof Z=="object"?te[ne]=t.minExtend(ue[ne],K[ne]):te[ne]=Z);for(H=Object.keys(K),ee=0;ee<H.length;ee++)ne=H[ee],Z=K[ne],(typeof Z!="object"||!(ne in te)||typeof te[ne]!="object")&&(te[ne]=Z);return te},t.titleCase=function(ue){return ue.charAt(0).toUpperCase()+ue.substr(1)},t.containsAny=function(ue,K){for(var te=0;te<K.length;te++)if(ue.indexOf(K[te])!==-1)return!0;return!1},t.isIE=function(){return typeof window.navigator.msSaveBlob<"u"};var S=/Version\/[\d\.]+.*Safari/;t.isSafari=function(){return S.test(window.navigator.userAgent)};var E=/iPad|iPhone|iPod/;t.isIOS=function(){return E.test(window.navigator.userAgent)};var C=/Firefox\/(\d+)\.\d+/;t.getFirefoxVersion=function(){var ue=C.exec(window.navigator.userAgent);if(ue&&ue.length===2){var K=parseInt(ue[1]);if(!isNaN(K))return K}return null},t.isD3Selection=function(ue){return ue instanceof w.selection},t.ensureSingle=function(ue,K,te,Y){var H=ue.select(K+(te?"."+te:""));if(H.size())return H;var ee=ue.append(K);return te&&ee.classed(te,!0),Y&&ee.call(Y),ee},t.ensureSingleById=function(ue,K,te,Y){var H=ue.select(K+"#"+te);if(H.size())return H;var ee=ue.append(K).attr("id",te);return Y&&ee.call(Y),ee},t.objectFromPath=function(ue,K){for(var te=ue.split("."),Y,H=Y={},ee=0;ee<te.length;ee++){var ne=te[ee],Z=null,q=te[ee].match(/(.*)\[([0-9]+)\]/);q?(ne=q[1],Z=q[2],Y=Y[ne]=[],ee===te.length-1?Y[Z]=K:Y[Z]={},Y=Y[Z]):(ee===te.length-1?Y[ne]=K:Y[ne]={},Y=Y[ne])}return H};var F=/^([^\[\.]+)\.(.+)?/,I=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;t.expandObjectPaths=function(ue){var K,te,Y,H,ee,ne,Z;if(typeof ue=="object"&&!Array.isArray(ue))for(te in ue)ue.hasOwnProperty(te)&&((K=te.match(F))?(H=ue[te],Y=K[1],delete ue[te],ue[Y]=t.extendDeepNoArrays(ue[Y]||{},t.objectFromPath(te,t.expandObjectPaths(H))[Y])):(K=te.match(I))?(H=ue[te],Y=K[1],ee=parseInt(K[2]),delete ue[te],ue[Y]=ue[Y]||[],K[3]==="."?(Z=K[4],ne=ue[Y][ee]=ue[Y][ee]||{},t.extendDeepNoArrays(ne,t.objectFromPath(Z,t.expandObjectPaths(H)))):ue[Y][ee]=t.expandObjectPaths(H)):ue[te]=t.expandObjectPaths(ue[te]));return ue},t.numSeparate=function(ue,K,te){if(te||(te=!1),typeof K!="string"||K.length===0)throw new Error("Separator string required for formatting!");typeof ue=="number"&&(ue=String(ue));var Y=/(\d+)(\d{3})/,H=K.charAt(0),ee=K.charAt(1),ne=ue.split("."),Z=ne[0],q=ne.length>1?H+ne[1]:"";if(ee&&(ne.length>1||Z.length>4||te))for(;Y.test(Z);)Z=Z.replace(Y,"$1"+ee+"$2");return Z+q},t.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var D=/^\w*$/;t.templateString=function(ue,K){var te={};return ue.replace(t.TEMPLATE_STRING_REGEX,function(Y,H){var ee;return D.test(H)?ee=K[H]:(te[H]=te[H]||t.nestedProperty(K,H).get,ee=te[H]()),t.isValidTextValue(ee)?ee:""})};var R={max:10,count:0,name:"hovertemplate"};t.hovertemplateString=function(){return B.apply(R,arguments)};var O={max:10,count:0,name:"texttemplate"};t.texttemplateString=function(){return B.apply(O,arguments)};var z=/^[:|\|]/;function B(ue,K,te){var Y=this,H=arguments;K||(K={});var ee={};return ue.replace(t.TEMPLATE_STRING_REGEX,function(ne,Z,q){var ie=Z==="xother"||Z==="yother",se=Z==="_xother"||Z==="_yother",ae=Z==="_xother_"||Z==="_yother_",oe=Z==="xother_"||Z==="yother_",be=ie||se||oe||ae,ce=Z;(se||ae)&&(ce=ce.substring(1)),(oe||ae)&&(ce=ce.substring(0,ce.length-1));var de;if(be){if(de=K[ce],de===void 0)return""}else{var ye,ge;for(ge=3;ge<H.length;ge++)if(ye=H[ge],!!ye){if(ye.hasOwnProperty(ce)){de=ye[ce];break}if(D.test(ce)||(de=t.nestedProperty(ye,ce).get(),de=ee[ce]||t.nestedProperty(ye,ce).get(),de&&(ee[ce]=de)),de!==void 0)break}}if(de===void 0&&Y)return Y.count<Y.max&&(t.warn("Variable '"+ce+"' in "+Y.name+" could not be found!"),de=ne),Y.count===Y.max&&t.warn("Too many "+Y.name+" warnings - additional warnings will be suppressed"),Y.count++,ne;if(q){var me;if(q[0]===":"&&(me=te?te.numberFormat:t.numberFormat,de=me(q.replace(z,""))(de)),q[0]==="|"){me=te?te.timeFormat:f;var Se=t.dateTime2ms(de);de=t.formatDate(Se,q.replace(z,""),!1,me)}}else{var Le=ce+"Label";K.hasOwnProperty(Le)&&(de=K[Le])}return be&&(de="("+de+")",(se||ae)&&(de=" "+de),(oe||ae)&&(de=de+" ")),de})}var G=48,Q=57;t.subplotSort=function(ue,K){for(var te=Math.min(ue.length,K.length)+1,Y=0,H=0,ee=0;ee<te;ee++){var ne=ue.charCodeAt(ee)||0,Z=K.charCodeAt(ee)||0,q=ne>=G&&ne<=Q,ie=Z>=G&&Z<=Q;if(q&&(Y=10*Y+ne-G),ie&&(H=10*H+Z-G),!q||!ie){if(Y!==H)return Y-H;if(ne!==Z)return ne-Z}}return H-Y};var X=2e9;t.seedPseudoRandom=function(){X=2e9},t.pseudoRandom=function(){var ue=X;return X=(69069*X+1)%4294967296,Math.abs(X-ue)<429496729?t.pseudoRandom():X/4294967296},t.fillText=function(ue,K,te){var Y=Array.isArray(te)?function(ne){te.push(ne)}:function(ne){te.text=ne},H=t.extractOption(ue,K,"htx","hovertext");if(t.isValidTextValue(H))return Y(H);var ee=t.extractOption(ue,K,"tx","text");if(t.isValidTextValue(ee))return Y(ee)},t.isValidTextValue=function(ue){return ue||ue===0},t.formatPercent=function(ue,K){K=K||0;for(var te=(Math.round(100*ue*Math.pow(10,K))*Math.pow(.1,K)).toFixed(K)+"%",Y=0;Y<K;Y++)te.indexOf(".")!==-1&&(te=te.replace("0%","%"),te=te.replace(".%","%"));return te},t.isHidden=function(ue){var K=window.getComputedStyle(ue).display;return!K||K==="none"},t.strTranslate=function(ue,K){return ue||K?"translate("+ue+","+K+")":""},t.strRotate=function(ue){return ue?"rotate("+ue+")":""},t.strScale=function(ue){return ue!==1?"scale("+ue+")":""},t.getTextTransform=function(ue){var K=ue.noCenter,te=ue.textX,Y=ue.textY,H=ue.targetX,ee=ue.targetY,ne=ue.anchorX||0,Z=ue.anchorY||0,q=ue.rotate,ie=ue.scale;return ie?ie>1&&(ie=1):ie=0,t.strTranslate(H-ie*(te+ne),ee-ie*(Y+Z))+t.strScale(ie)+(q?"rotate("+q+(K?"":" "+te+" "+Y)+")":"")},t.setTransormAndDisplay=function(ue,K){ue.attr("transform",t.getTextTransform(K)),ue.style("display",K.scale?null:"none")},t.ensureUniformFontSize=function(ue,K){var te=t.extendFlat({},K);return te.size=Math.max(K.size,ue._fullLayout.uniformtext.minsize||0),te},t.join2=function(ue,K,te){var Y=ue.length;return Y>1?ue.slice(0,-1).join(K)+te+ue[Y-1]:ue.join(K)},t.bigFont=function(ue){return Math.round(1.2*ue)};var j=t.getFirefoxVersion(),re=j!==null&&j<86;t.getPositionFromD3Event=function(){return re?[w.event.layerX,w.event.layerY]:[w.event.offsetX,w.event.offsetY]}},{"../constants/numerical":491,"./anchor_utils":495,"./angles":496,"./array":497,"./clean_number":498,"./clear_responsive":500,"./coerce":501,"./dates":502,"./dom":503,"./extend":505,"./filter_unique":506,"./filter_visible":507,"./geometry2d":510,"./identity":513,"./increment":514,"./is_plain_object":516,"./keyed_container":517,"./localize":518,"./loggers":519,"./make_trace_groups":520,"./matrix":521,"./mod":522,"./nested_property":523,"./noop":524,"./notifier":525,"./preserve_drawing_buffer":529,"./push_unique":530,"./regex":532,"./relative_attr":533,"./relink_private":534,"./search":535,"./sort_object_keys":538,"./stats":539,"./throttle":542,"./to_log_range":543,"@plotly/d3":58,"d3-format":112,"d3-time-format":120,"fast-isnumeric":190}],516:[function(i,U,V){U.exports=function(f){return window&&window.process&&window.process.versions?Object.prototype.toString.call(f)==="[object Object]":Object.prototype.toString.call(f)==="[object Object]"&&Object.getPrototypeOf(f).hasOwnProperty("hasOwnProperty")}},{}],517:[function(i,U,V){var w=i("./nested_property"),f=/^\w*$/,M=0,T=1,e=2,a=3,n=4;U.exports=function(t,h,s,o){s=s||"name",o=o||"value";var y,d,p,c={};h&&h.length?(p=w(t,h),d=p.get()):d=t,h=h||"";var m={};if(d)for(y=0;y<d.length;y++)m[d[y][s]]=y;var l=f.test(o),x={set:function(u,A){var _=A===null?n:M;if(!d){if(!p||_===n)return;d=[],p.set(d)}var g=m[u];if(g===void 0){if(_===n)return;_=_|a,g=d.length,m[u]=g}else A!==(l?d[g][o]:w(d[g],o).get())&&(_=_|e);var b=d[g]=d[g]||{};return b[s]=u,l?b[o]=A:w(b,o).set(A),A!==null&&(_=_&~n),c[g]=c[g]|_,x},get:function(u){if(!!d){var A=m[u];if(A!==void 0)return l?d[A][o]:w(d[A],o).get()}},rename:function(u,A){var _=m[u];return _===void 0||(c[_]=c[_]|T,m[A]=_,delete m[u],d[_][s]=A),x},remove:function(u){var A=m[u];if(A===void 0)return x;var _=d[A];if(Object.keys(_).length>2)return c[A]=c[A]|e,x.set(u,null);if(l){for(y=A;y<d.length;y++)c[y]=c[y]|a;for(y=A;y<d.length;y++)m[d[y][s]]--;d.splice(A,1),delete m[u]}else w(_,o).set(null),c[A]=c[A]|e|n;return x},constructUpdate:function(){for(var u,A,_={},g=Object.keys(c),b=0;b<g.length;b++)A=g[b],u=h+"["+A+"]",d[A]?(c[A]&T&&(_[u+"."+s]=d[A][s]),c[A]&e&&(l?_[u+"."+o]=c[A]&n?null:d[A][o]:_[u+"."+o]=c[A]&n?null:w(d[A],o).get())):_[u]=null;return _}};return x}},{"./nested_property":523}],518:[function(i,U,V){var w=i("../registry");U.exports=function(M,T){for(var e=M._context.locale,a=0;a<2;a++){for(var n=M._context.locales,r=0;r<2;r++){var t=(n[e]||{}).dictionary;if(t){var h=t[T];if(h)return h}n=w.localeRegistry}var s=e.split("-")[0];if(s===e)break;e=s}return T}},{"../registry":647}],519:[function(i,U,V){var w=i("../plot_api/plot_config").dfltConfig,f=i("./notifier"),M=U.exports={};M.log=function(){var T;if(w.logging>1){var e=["LOG:"];for(T=0;T<arguments.length;T++)e.push(arguments[T]);console.trace.apply(console,e)}if(w.notifyOnLogging>1){var a=[];for(T=0;T<arguments.length;T++)a.push(arguments[T]);f(a.join("<br>"),"long")}},M.warn=function(){var T;if(w.logging>0){var e=["WARN:"];for(T=0;T<arguments.length;T++)e.push(arguments[T]);console.trace.apply(console,e)}if(w.notifyOnLogging>0){var a=[];for(T=0;T<arguments.length;T++)a.push(arguments[T]);f(a.join("<br>"),"stick")}},M.error=function(){var T;if(w.logging>0){var e=["ERROR:"];for(T=0;T<arguments.length;T++)e.push(arguments[T]);console.error.apply(console,e)}if(w.notifyOnLogging>0){var a=[];for(T=0;T<arguments.length;T++)a.push(arguments[T]);f(a.join("<br>"),"stick")}}},{"../plot_api/plot_config":553,"./notifier":525}],520:[function(i,U,V){var w=i("@plotly/d3");U.exports=function(M,T,e){var a=M.selectAll("g."+e.replace(/\s/g,".")).data(T,function(r){return r[0].trace.uid});a.exit().remove(),a.enter().append("g").attr("class",e),a.order();var n=M.classed("rangeplot")?"nodeRangePlot3":"node3";return a.each(function(r){r[0][n]=w.select(this)}),a}},{"@plotly/d3":58}],521:[function(i,U,V){var w=i("gl-mat4");V.init2dArray=function(f,M){for(var T=new Array(f),e=0;e<f;e++)T[e]=new Array(M);return T},V.transposeRagged=function(f){var M=0,T=f.length,e,a;for(e=0;e<T;e++)M=Math.max(M,f[e].length);var n=new Array(M);for(e=0;e<M;e++)for(n[e]=new Array(T),a=0;a<T;a++)n[e][a]=f[a][e];return n},V.dot=function(f,M){if(!(f.length&&M.length)||f.length!==M.length)return null;var T=f.length,e,a;if(f[0].length)for(e=new Array(T),a=0;a<T;a++)e[a]=V.dot(f[a],M);else if(M[0].length){var n=V.transposeRagged(M);for(e=new Array(n.length),a=0;a<n.length;a++)e[a]=V.dot(f,n[a])}else for(e=0,a=0;a<T;a++)e+=f[a]*M[a];return e},V.translationMatrix=function(f,M){return[[1,0,f],[0,1,M],[0,0,1]]},V.rotationMatrix=function(f){var M=f*Math.PI/180;return[[Math.cos(M),-Math.sin(M),0],[Math.sin(M),Math.cos(M),0],[0,0,1]]},V.rotationXYMatrix=function(f,M,T){return V.dot(V.dot(V.translationMatrix(M,T),V.rotationMatrix(f)),V.translationMatrix(-M,-T))},V.apply3DTransform=function(f){return function(){var M=arguments,T=arguments.length===1?M[0]:[M[0],M[1],M[2]||0];return V.dot(f,[T[0],T[1],T[2],1]).slice(0,3)}},V.apply2DTransform=function(f){return function(){var M=arguments;M.length===3&&(M=M[0]);var T=arguments.length===1?M[0]:[M[0],M[1]];return V.dot(f,[T[0],T[1],1]).slice(0,2)}},V.apply2DTransform2=function(f){var M=V.apply2DTransform(f);return function(T){return M(T.slice(0,2)).concat(M(T.slice(2,4)))}},V.convertCssMatrix=function(f){if(f){var M=f.length;if(M===16)return f;if(M===6)return[f[0],f[1],0,0,f[2],f[3],0,0,0,0,1,0,f[4],f[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},V.inverseTransformMatrix=function(f){var M=[];return w.invert(M,f),[[M[0],M[1],M[2],M[3]],[M[4],M[5],M[6],M[7]],[M[8],M[9],M[10],M[11]],[M[12],M[13],M[14],M[15]]]}},{"gl-mat4":210}],522:[function(i,U,V){function w(M,T){var e=M%T;return e<0?e+T:e}function f(M,T){return Math.abs(M)>T/2?M-Math.round(M/T)*T:M}U.exports={mod:w,modHalf:f}},{}],523:[function(i,U,V){var w=i("fast-isnumeric"),f=i("./array").isArrayOrTypedArray;U.exports=function(o,y){if(w(y))y=String(y);else if(typeof y!="string"||y.substr(y.length-4)==="[-1]")throw"bad property string";for(var d=0,p=y.split("."),c,m,l;d<p.length;){if(c=String(p[d]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/),c){if(c[1])p[d]=c[1];else if(d===0)p.splice(0,1);else throw"bad property string";for(m=c[2].substr(1,c[2].length-2).split("]["),l=0;l<m.length;l++)d++,p.splice(d,0,Number(m[l]))}d++}return typeof o!="object"?h(o,y,p):{set:a(o,p,y),get:M(o,p),astr:y,parts:p,obj:o}};function M(s,o){return function(){var y=s,d,p,c,m,l;for(m=0;m<o.length-1;m++){if(d=o[m],d===-1){for(p=!0,c=[],l=0;l<y.length;l++)c[l]=M(y[l],o.slice(m+1))(),c[l]!==c[0]&&(p=!1);return p?c[0]:c}if(typeof d=="number"&&!f(y)||(y=y[d],typeof y!="object"||y===null))return}if(!(typeof y!="object"||y===null)&&(c=y[o[m]],c!==null))return c}}var T=/(^|\.)args\[/;function e(s,o){return s===void 0||s===null&&!o.match(T)}function a(s,o,y){return function(d){var p=s,c="",m=e(d,y),l,x;for(x=0;x<o.length-1;x++){if(l=o[x],typeof l=="number"&&!f(p))throw"array index but container is not an array";if(l===-1){if(m=!r(p,o.slice(x+1),d,y),m)break;return}if(!t(p,l,o[x+1],m))break;if(p=p[l],typeof p!="object"||p===null)throw"container is not an object";c=n(c,l)}if(m){if(x===o.length-1&&(delete p[o[x]],Array.isArray(p)&&+o[x]===p.length-1))for(;p.length&&p[p.length-1]===void 0;)p.pop()}else p[o[x]]=d}}function n(s,o){var y=o;return w(o)?y="["+o+"]":s&&(y="."+o),s+y}function r(s,o,y,d){var p=f(y),c=!0,m=y,l=d.replace("-1",0),x=p?!1:e(y,l),u=o[0],A;for(A=0;A<s.length;A++)l=d.replace("-1",A),p&&(m=y[A%y.length],x=e(m,l)),x&&(c=!1),t(s,A,u,x)&&a(s[A],o,d.replace("-1",A))(m);return c}function t(s,o,y,d){if(s[o]===void 0){if(d)return!1;typeof y=="number"?s[o]=[]:s[o]={}}return!0}function h(s,o,y){return{set:function(){throw"bad container"},get:function(){},astr:o,parts:y,obj:s}}},{"./array":497,"fast-isnumeric":190}],524:[function(i,U,V){U.exports=function(){}},{}],525:[function(i,U,V){var w=i("@plotly/d3"),f=i("fast-isnumeric"),M=[];U.exports=function(T,e){if(M.indexOf(T)!==-1)return;M.push(T);var a=1e3;f(e)?a=e:e==="long"&&(a=3e3);var n=w.select("body").selectAll(".plotly-notifier").data([0]);n.enter().append("div").classed("plotly-notifier",!0);var r=n.selectAll(".notifier-note").data(M);function t(h){h.duration(700).style("opacity",0).each("end",function(s){var o=M.indexOf(s);o!==-1&&M.splice(o,1),w.select(this).remove()})}r.enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(h){var s=w.select(this);s.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){s.transition().call(t)});for(var o=s.append("p"),y=h.split(/<br\s*\/?>/g),d=0;d<y.length;d++)d&&o.append("br"),o.append("span").text(y[d]);e==="stick"?s.transition().duration(350).style("opacity",1):s.transition().duration(700).style("opacity",1).transition().delay(a).call(t)})}},{"@plotly/d3":58,"fast-isnumeric":190}],526:[function(i,U,V){var w=i("./setcursor"),f="data-savedcursor",M="!!";U.exports=function(e,a){var n=e.attr(f);if(a){if(!n){for(var r=(e.attr("class")||"").split(" "),t=0;t<r.length;t++){var h=r[t];h.indexOf("cursor-")===0&&e.attr(f,h.substr(7)).classed(h,!1)}e.attr(f)||e.attr(f,M)}w(e,a)}else n&&(e.attr(f,null),n===M?w(e):w(e,n))}},{"./setcursor":536}],527:[function(i,U,V){var w=i("./matrix").dot,f=i("../constants/numerical").BADNUM,M=U.exports={};M.tester=function(e){var a=e.slice(),n=a[0][0],r=n,t=a[0][1],h=t,s;for((a[a.length-1][0]!==a[0][0]||a[a.length-1][1]!==a[0][1])&&a.push(a[0]),s=1;s<a.length;s++)n=Math.min(n,a[s][0]),r=Math.max(r,a[s][0]),t=Math.min(t,a[s][1]),h=Math.max(h,a[s][1]);var o=!1,y;a.length===5&&(a[0][0]===a[1][0]?a[2][0]===a[3][0]&&a[0][1]===a[3][1]&&a[1][1]===a[2][1]&&(o=!0,y=function(l){return l[0]===a[0][0]}):a[0][1]===a[1][1]&&a[2][1]===a[3][1]&&a[0][0]===a[3][0]&&a[1][0]===a[2][0]&&(o=!0,y=function(l){return l[1]===a[0][1]}));function d(l,x){var u=l[0],A=l[1];return!(u===f||u<n||u>r||A===f||A<t||A>h||x&&y(l))}function p(l,x){var u=l[0],A=l[1];if(u===f||u<n||u>r||A===f||A<t||A>h)return!1;var _=a.length,g=a[0][0],b=a[0][1],v=0,k,S,E,C,F;for(k=1;k<_;k++)if(S=g,E=b,g=a[k][0],b=a[k][1],C=Math.min(S,g),!(u<C||u>Math.max(S,g)||A>Math.max(E,b)))if(A<Math.min(E,b))u!==C&&v++;else{if(g===S?F=A:F=E+(u-S)*(b-E)/(g-S),A===F)return!(k===1&&x);A<=F&&u!==C&&v++}return v%2===1}var c=!0,m=a[0];for(s=1;s<a.length;s++)if(m[0]!==a[s][0]||m[1]!==a[s][1]){c=!1;break}return{xmin:n,xmax:r,ymin:t,ymax:h,pts:a,contains:o?d:p,isRect:o,degenerate:c}},M.isSegmentBent=function(e,a,n,r){var t=e[a],h=[e[n][0]-t[0],e[n][1]-t[1]],s=w(h,h),o=Math.sqrt(s),y=[-h[1]/o,h[0]/o],d,p,c;for(d=a+1;d<n;d++)if(p=[e[d][0]-t[0],e[d][1]-t[1]],c=w(p,h),c<0||c>s||Math.abs(w(p,y))>r)return!0;return!1},M.filter=function(e,a){var n=[e[0]],r=0,t=0;function h(o){e.push(o);var y=n.length,d=r;n.splice(t+1);for(var p=d+1;p<e.length;p++)(p===e.length-1||M.isSegmentBent(e,d,p+1,a))&&(n.push(e[p]),n.length<y-2&&(r=p,t=n.length-1),d=p)}if(e.length>1){var s=e.pop();h(s)}return{addPt:h,raw:e,filtered:n}}},{"../constants/numerical":491,"./matrix":521}],528:[function(i,U,V){(function(w){(function(){var f=i("./show_no_webgl_msg"),M=i("regl");U.exports=function(e,a,n){var r=e._fullLayout,t=!0;return r._glcanvas.each(function(h){if(h.regl){h.regl.preloadCachedCode(n);return}if(!(h.pick&&!r._has("parcoords"))){try{h.regl=M({canvas:this,attributes:{antialias:!h.pick,preserveDrawingBuffer:!0},pixelRatio:e._context.plotGlPixelRatio||w.devicePixelRatio,extensions:a||[],cachedCode:n||{}})}catch{t=!1}h.regl||(t=!1),t&&this.addEventListener("webglcontextlost",function(s){e&&e.emit&&e.emit("plotly_webglcontextlost",{event:s,layer:h.key})},!1)}}),t||f({container:r._glcontainer.node()}),t}}).call(this)}).call(this,typeof Je<"u"?Je:typeof self<"u"?self:typeof window<"u"?window:{})},{"./show_no_webgl_msg":537,regl:284}],529:[function(i,U,V){var w=i("fast-isnumeric"),f=i("is-mobile");U.exports=function(e){var a;if(e&&e.hasOwnProperty("userAgent")?a=e.userAgent:a=M(),typeof a!="string")return!0;var n=f({ua:{headers:{"user-agent":a}},tablet:!0,featureDetect:!1});if(!n)for(var r=a.split(" "),t=1;t<r.length;t++){var h=r[t];if(h.indexOf("Safari")!==-1)for(var s=t-1;s>-1;s--){var o=r[s];if(o.substr(0,8)==="Version/"){var y=o.substr(8).split(".")[0];if(w(y)&&(y=+y),y>=13)return!0}}}return n};function M(){var T;return typeof navigator<"u"&&(T=navigator.userAgent),T&&T.headers&&typeof T.headers["user-agent"]=="string"&&(T=T.headers["user-agent"]),T}},{"fast-isnumeric":190,"is-mobile":234}],530:[function(i,U,V){U.exports=function(f,M){if(M instanceof RegExp){for(var T=M.toString(),e=0;e<f.length;e++)if(f[e]instanceof RegExp&&f[e].toString()===T)return f;f.push(M)}else(M||M===0)&&f.indexOf(M)===-1&&f.push(M);return f}},{}],531:[function(i,U,V){var w=i("../lib"),f=i("../plot_api/plot_config").dfltConfig;function M(e,a){for(var n=[],r,t=0;t<a.length;t++)r=a[t],r===e?n[t]=r:typeof r=="object"?n[t]=Array.isArray(r)?w.extendDeep([],r):w.extendDeepAll({},r):n[t]=r;return n}var T={};T.add=function(e,a,n,r,t){var h,s;if(e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},s=e.undoQueue.index,e.autoplay){e.undoQueue.inSequence||(e.autoplay=!1);return}!e.undoQueue.sequence||e.undoQueue.beginSequence?(h={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},e.undoQueue.queue.splice(s,e.undoQueue.queue.length-s,h),e.undoQueue.index+=1):h=e.undoQueue.queue[s-1],e.undoQueue.beginSequence=!1,h&&(h.undo.calls.unshift(a),h.undo.args.unshift(n),h.redo.calls.push(r),h.redo.args.push(t)),e.undoQueue.queue.length>f.queueLength&&(e.undoQueue.queue.shift(),e.undoQueue.index--)},T.startSequence=function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},e.undoQueue.sequence=!0,e.undoQueue.beginSequence=!0},T.stopSequence=function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},e.undoQueue.sequence=!1,e.undoQueue.beginSequence=!1},T.undo=function(a){var n,r;if(!(a.undoQueue===void 0||isNaN(a.undoQueue.index)||a.undoQueue.index<=0)){for(a.undoQueue.index--,n=a.undoQueue.queue[a.undoQueue.index],a.undoQueue.inSequence=!0,r=0;r<n.undo.calls.length;r++)T.plotDo(a,n.undo.calls[r],n.undo.args[r]);a.undoQueue.inSequence=!1,a.autoplay=!1}},T.redo=function(a){var n,r;if(!(a.undoQueue===void 0||isNaN(a.undoQueue.index)||a.undoQueue.index>=a.undoQueue.queue.length)){for(n=a.undoQueue.queue[a.undoQueue.index],a.undoQueue.inSequence=!0,r=0;r<n.redo.calls.length;r++)T.plotDo(a,n.redo.calls[r],n.redo.args[r]);a.undoQueue.inSequence=!1,a.autoplay=!1,a.undoQueue.index++}},T.plotDo=function(e,a,n){e.autoplay=!0,n=M(e,n),a.apply(null,n)},U.exports=T},{"../lib":515,"../plot_api/plot_config":553}],532:[function(i,U,V){V.counter=function(w,f,M,T){var e=(f||"")+(M?"":"$"),a=T===!1?"":"^";return w==="xy"?new RegExp(a+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+e):new RegExp(a+w+"([2-9]|[1-9][0-9]+)?"+e)}},{}],533:[function(i,U,V){var w=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,f=/^[^\.\[\]]+$/;U.exports=function(M,T){for(;T;){var e=M.match(w);if(e)M=e[1];else if(M.match(f))M="";else throw new Error("bad relativeAttr call:"+[M,T]);if(T.charAt(0)==="^")T=T.slice(1);else break}return M&&T.charAt(0)!=="["?M+"."+T:M+T}},{}],534:[function(i,U,V){var w=i("./array").isArrayOrTypedArray,f=i("./is_plain_object");U.exports=function M(T,e){for(var a in e){var n=e[a],r=T[a];if(r!==n)if(a.charAt(0)==="_"||typeof n=="function"){if(a in T)continue;T[a]=n}else if(w(n)&&w(r)&&f(n[0])){if(a==="customdata"||a==="ids")continue;for(var t=Math.min(n.length,r.length),h=0;h<t;h++)r[h]!==n[h]&&f(n[h])&&f(r[h])&&M(r[h],n[h])}else f(n)&&f(r)&&(M(r,n),Object.keys(r).length||delete T[a])}}},{"./array":497,"./is_plain_object":516}],535:[function(i,U,V){var w=i("fast-isnumeric"),f=i("./loggers"),M=i("./identity"),T=i("../constants/numerical").BADNUM,e=1e-9;V.findBin=function(h,s,o){if(w(s.start))return o?Math.ceil((h-s.start)/s.size-e)-1:Math.floor((h-s.start)/s.size+e);var y=0,d=s.length,p=0,c=d>1?(s[d-1]-s[0])/(d-1):1,m,l;for(c>=0?l=o?a:n:l=o?t:r,h+=c*e*(o?-1:1)*(c>=0?1:-1);y<d&&p++<100;)m=Math.floor((y+d)/2),l(s[m],h)?y=m+1:d=m;return p>90&&f.log("Long binary search..."),y-1};function a(h,s){return h<s}function n(h,s){return h<=s}function r(h,s){return h>s}function t(h,s){return h>=s}V.sorterAsc=function(h,s){return h-s},V.sorterDes=function(h,s){return s-h},V.distinctVals=function(h){var s=h.slice();s.sort(V.sorterAsc);var o;for(o=s.length-1;o>-1&&s[o]===T;o--);for(var y=s[o]-s[0]||1,d=y/(o||1)/1e4,p=[],c,m=0;m<=o;m++){var l=s[m],x=l-c;c===void 0?(p.push(l),c=l):x>d&&(y=Math.min(y,x),p.push(l),c=l)}return{vals:p,minDiff:y}},V.roundUp=function(h,s,o){for(var y=0,d=s.length-1,p,c=0,m=o?0:1,l=o?1:0,x=o?Math.ceil:Math.floor;y<d&&c++<100;)p=x((y+d)/2),s[p]<=h?y=p+m:d=p-l;return s[y]},V.sort=function(h,s){for(var o=0,y=0,d=1;d<h.length;d++){var p=s(h[d],h[d-1]);if(p<0?o=1:p>0&&(y=1),o&&y)return h.sort(s)}return y?h:h.reverse()},V.findIndexOfMin=function(h,s){s=s||M;for(var o=1/0,y,d=0;d<h.length;d++){var p=s(h[d]);p<o&&(o=p,y=d)}return y}},{"../constants/numerical":491,"./identity":513,"./loggers":519,"fast-isnumeric":190}],536:[function(i,U,V){U.exports=function(f,M){(f.attr("class")||"").split(" ").forEach(function(T){T.indexOf("cursor-")===0&&f.classed(T,!1)}),M&&f.classed("cursor-"+M,!0)}},{}],537:[function(i,U,V){var w=i("../components/color"),f=function(){};U.exports=function(T){for(var e in T)typeof T[e]=="function"&&(T[e]=f);T.destroy=function(){T.container.parentNode.removeChild(T.container)};var a=document.createElement("div");a.className="no-webgl",a.style.cursor="pointer",a.style.fontSize="24px",a.style.color=w.defaults[0],a.style.position="absolute",a.style.left=a.style.top="0px",a.style.width=a.style.height="100%",a.style["background-color"]=w.lightLine,a.style["z-index"]=30;var n=document.createElement("p");return n.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",n.style.position="relative",n.style.top="50%",n.style.left="50%",n.style.height="30%",n.style.width="50%",n.style.margin="-15% 0 0 -25%",a.appendChild(n),T.container.appendChild(a),T.container.style.background="#FFFFFF",T.container.onclick=function(){window.open("https://get.webgl.org")},!1}},{"../components/color":367}],538:[function(i,U,V){U.exports=function(f){return Object.keys(f).sort()}},{}],539:[function(i,U,V){var w=i("fast-isnumeric"),f=i("./array").isArrayOrTypedArray;V.aggNums=function(M,T,e,a){var n,r;if((!a||a>e.length)&&(a=e.length),w(T)||(T=!1),f(e[0])){for(r=new Array(a),n=0;n<a;n++)r[n]=V.aggNums(M,T,e[n]);e=r}for(n=0;n<a;n++)w(T)?w(e[n])&&(T=M(+T,+e[n])):T=e[n];return T},V.len=function(M){return V.aggNums(function(T){return T+1},0,M)},V.mean=function(M,T){return T||(T=V.len(M)),V.aggNums(function(e,a){return e+a},0,M)/T},V.midRange=function(M){if(!(M===void 0||M.length===0))return(V.aggNums(Math.max,null,M)+V.aggNums(Math.min,null,M))/2},V.variance=function(M,T,e){return T||(T=V.len(M)),w(e)||(e=V.mean(M,T)),V.aggNums(function(a,n){return a+Math.pow(n-e,2)},0,M)/T},V.stdev=function(M,T,e){return Math.sqrt(V.variance(M,T,e))},V.median=function(M){var T=M.slice().sort();return V.interp(T,.5)},V.interp=function(M,T){if(!w(T))throw"n should be a finite number";if(T=T*M.length-.5,T<0)return M[0];if(T>M.length-1)return M[M.length-1];var e=T%1;return e*M[Math.ceil(T)]+(1-e)*M[Math.floor(T)]}},{"./array":497,"fast-isnumeric":190}],540:[function(i,U,V){var w=i("color-normalize");function f(M){return M?w(M):[0,0,0,1]}U.exports=f},{"color-normalize":89}],541:[function(i,U,V){var w=i("@plotly/d3"),f=i("../lib"),M=f.strTranslate,T=i("../constants/xmlns_namespaces"),e=i("../constants/alignment").LINE_SPACING,a=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;V.convertToTspans=function(z,B,G){var Q=z.text(),X=!z.attr("data-notex")&&B&&B._context.typesetMath&&typeof MathJax<"u"&&Q.match(a),j=w.select(z.node().parentNode);if(j.empty())return;var re=z.attr("class")?z.attr("class").split(" ")[0]:"text";re+="-math",j.selectAll("svg."+re).remove(),j.selectAll("g."+re+"-group").remove(),z.style("display",null).attr({"data-unformatted":Q,"data-math":"N"});function ue(){j.empty()||(re=z.attr("class")+"-math",j.select("svg."+re).remove()),z.text("").style("white-space","pre");var K=I(z.node(),Q);K&&z.style("pointer-events","all"),V.positionText(z),G&&G.call(z)}return X?(B&&B._promises||[]).push(new Promise(function(K){z.style("display","none");var te=parseInt(z.node().style.fontSize,10),Y={fontSize:te};s(X[2],Y,function(H,ee,ne){j.selectAll("svg."+re).remove(),j.selectAll("g."+re+"-group").remove();var Z=H&&H.select("svg");if(!Z||!Z.node()){ue(),K();return}var q=j.append("g").classed(re+"-group",!0).attr({"pointer-events":"none","data-unformatted":Q,"data-math":"Y"});q.node().appendChild(Z.node()),ee&&ee.node()&&Z.node().insertBefore(ee.node().cloneNode(!0),Z.node().firstChild);var ie=ne.width,se=ne.height;Z.attr({class:re,height:se,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var ae=z.node().style.fill||"black",oe=Z.select("g");oe.attr({fill:ae,stroke:ae});var be=oe.node().getBoundingClientRect(),ce=be.width,de=be.height;(ce>ie||de>se)&&(Z.style("overflow","hidden"),be=Z.node().getBoundingClientRect(),ce=be.width,de=be.height);var ye=+z.attr("x"),ge=+z.attr("y"),me=te||z.node().getBoundingClientRect().height,Se=-me/4;if(re[0]==="y")q.attr({transform:"rotate("+[-90,ye,ge]+")"+M(-ce/2,Se-de/2)});else if(re[0]==="l")ge=Se-de/2;else if(re[0]==="a"&&re.indexOf("atitle")!==0)ye=0,ge=Se;else{var Le=z.attr("text-anchor");ye=ye-ce*(Le==="middle"?.5:Le==="end"?1:0),ge=ge+Se-de/2}Z.attr({x:ye,y:ge}),G&&G.call(z,q),K(q)})})):ue(),z};var n=/(<|&lt;|&#60;)/g,r=/(>|&gt;|&#62;)/g;function t(z){return z.replace(n,"\\lt ").replace(r,"\\gt ")}var h=[["$","$"],["\\(","\\)"]];function s(z,B,G){var Q=parseInt((MathJax.version||"").split(".")[0]);if(Q!==2&&Q!==3){f.warn("No MathJax version:",MathJax.version);return}var X,j,re,ue,K=function(){return j=f.extendDeepAll({},MathJax.Hub.config),re=MathJax.Hub.processSectionDelay,MathJax.Hub.processSectionDelay!==void 0&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:h},displayAlign:"left"})},te=function(){j=f.extendDeepAll({},MathJax.config),MathJax.config.tex||(MathJax.config.tex={}),MathJax.config.tex.inlineMath=h},Y=function(){if(X=MathJax.Hub.config.menuSettings.renderer,X!=="SVG")return MathJax.Hub.setRenderer("SVG")},H=function(){X=MathJax.config.startup.output,X!=="svg"&&(MathJax.config.startup.output="svg")},ee=function(){var ae="math-output-"+f.randstr({},64);ue=w.select("body").append("div").attr({id:ae}).style({visibility:"hidden",position:"absolute","font-size":B.fontSize+"px"}).text(t(z));var oe=ue.node();return Q===2?MathJax.Hub.Typeset(oe):MathJax.typeset([oe])},ne=function(){var ae=ue.select(Q===2?".MathJax_SVG":".MathJax"),oe=!ae.empty()&&ue.select("svg").node();if(!oe)f.log("There was an error in the tex syntax.",z),G();else{var be=oe.getBoundingClientRect(),ce;Q===2?ce=w.select("body").select("#MathJax_SVG_glyphs"):ce=ae.select("defs"),G(ae,ce,be)}ue.remove()},Z=function(){if(X!=="SVG")return MathJax.Hub.setRenderer(X)},q=function(){X!=="svg"&&(MathJax.config.startup.output=X)},ie=function(){return re!==void 0&&(MathJax.Hub.processSectionDelay=re),MathJax.Hub.Config(j)},se=function(){MathJax.config=j};Q===2?MathJax.Hub.Queue(K,Y,ee,ne,Z,ie):Q===3&&(te(),H(),MathJax.startup.defaultReady(),MathJax.startup.promise.then(function(){ee(),ne(),q(),se()}))}var o={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},y={sub:"0.3em",sup:"-0.6em"},d={sub:"-0.21em",sup:"0.42em"},p="\u200B",c=["http:","https:","mailto:","",void 0,":"],m=V.NEWLINES=/(\r\n?|\n)/g,l=/(<[^<>]*>)/,x=/<(\/?)([^ >]*)(\s+(.*))?>/i,u=/<br(\s+.*)?>/i;V.BR_TAG_ALL=/<br(\s+.*)?>/gi;var A=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,_=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,g=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,b=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function v(z,B){if(!z)return null;var G=z.match(B),Q=G&&(G[3]||G[4]);return Q&&C(Q)}var k=/(^|;)\s*color:/;V.plainText=function(z,B){B=B||{};for(var G=B.len!==void 0&&B.len!==-1?B.len:1/0,Q=B.allowedTags!==void 0?B.allowedTags:["br"],X="...",j=X.length,re=z.split(l),ue=[],K="",te=0,Y=0;Y<re.length;Y++){var H=re[Y],ee=H.match(x),ne=ee&&ee[2].toLowerCase();if(ne)Q.indexOf(ne)!==-1&&(ue.push(H),K=ne);else{var Z=H.length;if(te+Z<G)ue.push(H),te+=Z;else if(te<G){var q=G-te;K&&(K!=="br"||q<=j||Z<=j)&&ue.pop(),G>j?ue.push(H.substr(0,q-j)+X):ue.push(H.substr(0,q));break}K=""}}return ue.join("")};var S={mu:"\u03BC",amp:"&",lt:"<",gt:">",nbsp:"\xA0",times:"\xD7",plusmn:"\xB1",deg:"\xB0"},E=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function C(z){return z.replace(E,function(B,G){var Q;return G.charAt(0)==="#"?Q=F(G.charAt(1)==="x"?parseInt(G.substr(2),16):parseInt(G.substr(1),10)):Q=S[G],Q||B})}V.convertEntities=C;function F(z){if(!(z>1114111)){var B=String.fromCodePoint;if(B)return B(z);var G=String.fromCharCode;return z<=65535?G(z):G((z>>10)+55232,z%1024+56320)}}function I(z,B){B=B.replace(m," ");var G=!1,Q=[],X,j=-1;function re(){j++;var de=document.createElementNS(T.svg,"tspan");w.select(de).attr({class:"line",dy:j*e+"em"}),z.appendChild(de),X=de;var ye=Q;if(Q=[{node:de}],ye.length>1)for(var ge=1;ge<ye.length;ge++)ue(ye[ge])}function ue(de){var ye=de.type,ge={},me;if(ye==="a"){me="a";var Se=de.target,Le=de.href,Oe=de.popup;Le&&(ge={"xlink:xlink:show":Se==="_blank"||Se.charAt(0)!=="_"?"new":"replace",target:Se,"xlink:xlink:href":Le},Oe&&(ge.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+Oe+'");return false;'))}else me="tspan";de.style&&(ge.style=de.style);var we=document.createElementNS(T.svg,me);if(ye==="sup"||ye==="sub"){K(X,p),X.appendChild(we);var Ce=document.createElementNS(T.svg,"tspan");K(Ce,p),w.select(Ce).attr("dy",d[ye]),ge.dy=y[ye],X.appendChild(we),X.appendChild(Ce)}else X.appendChild(we);w.select(we).attr(ge),X=de.node=we,Q.push(de)}function K(de,ye){de.appendChild(document.createTextNode(ye))}function te(de){if(Q.length===1){f.log("Ignoring unexpected end tag </"+de+">.",B);return}var ye=Q.pop();de!==ye.type&&f.log("Start tag <"+ye.type+"> doesnt match end tag <"+de+">. Pretending it did match.",B),X=Q[Q.length-1].node}var Y=u.test(B);Y?re():(X=z,Q=[{node:z}]);for(var H=B.split(l),ee=0;ee<H.length;ee++){var ne=H[ee],Z=ne.match(x),q=Z&&Z[2].toLowerCase(),ie=o[q];if(q==="br")re();else if(ie===void 0)K(X,C(ne));else if(Z[1])te(q);else{var se=Z[4],ae={type:q},oe=v(se,A);if(oe?(oe=oe.replace(k,"$1 fill:"),ie&&(oe+=";"+ie)):ie&&(oe=ie),oe&&(ae.style=oe),q==="a"){G=!0;var be=v(se,_);if(be){var ce=D(be);ce&&(ae.href=ce,ae.target=v(se,g)||"_blank",ae.popup=v(se,b))}}ue(ae)}}return G}function D(z){var B=encodeURI(decodeURI(z)),G=document.createElement("a"),Q=document.createElement("a");G.href=z,Q.href=B;var X=G.protocol,j=Q.protocol;return c.indexOf(X)!==-1&&c.indexOf(j)!==-1?B:""}V.sanitizeHTML=function(B){B=B.replace(m," ");for(var G=document.createElement("p"),Q=G,X=[],j=B.split(l),re=0;re<j.length;re++){var ue=j[re],K=ue.match(x),te=K&&K[2].toLowerCase();if(te in o)if(K[1])X.length&&(Q=X.pop());else{var Y=K[4],H=v(Y,A),ee=H?{style:H}:{};if(te==="a"){var ne=v(Y,_);if(ne){var Z=D(ne);if(Z){ee.href=Z;var q=v(Y,g);q&&(ee.target=q)}}}var ie=document.createElement(te);Q.appendChild(ie),w.select(ie).attr(ee),Q=ie,X.push(ie)}else Q.appendChild(document.createTextNode(C(ue)))}var se="innerHTML";return G[se]},V.lineCount=function(B){return B.selectAll("tspan.line").size()||1},V.positionText=function(B,G,Q){return B.each(function(){var X=w.select(this);function j(K,te){return te===void 0?(te=X.attr(K),te===null&&(X.attr(K,0),te=0)):X.attr(K,te),te}var re=j("x",G),ue=j("y",Q);this.nodeName==="text"&&X.selectAll("tspan.line").attr({x:re,y:ue})})};function R(z,B,G){var Q=G.horizontalAlign,X=G.verticalAlign||"top",j=z.node().getBoundingClientRect(),re=B.node().getBoundingClientRect(),ue,K,te;return X==="bottom"?K=function(){return j.bottom-ue.height}:X==="middle"?K=function(){return j.top+(j.height-ue.height)/2}:K=function(){return j.top},Q==="right"?te=function(){return j.right-ue.width}:Q==="center"?te=function(){return j.left+(j.width-ue.width)/2}:te=function(){return j.left},function(){ue=this.node().getBoundingClientRect();var Y=te()-re.left,H=K()-re.top,ee=G.gd||{};if(G.gd){ee._fullLayout._calcInverseTransform(ee);var ne=f.apply3DTransform(ee._fullLayout._invTransform)(Y,H);Y=ne[0],H=ne[1]}return this.style({top:H+"px",left:Y+"px","z-index":1e3}),this}}var O="1px ";V.makeTextShadow=function(z){var B=O,G=O,Q=O;return B+G+Q+z+", -"+B+"-"+G+Q+z+", "+B+"-"+G+Q+z+", -"+B+G+Q+z},V.makeEditable=function(z,B){var G=B.gd,Q=B.delegate,X=w.dispatch("edit","input","cancel"),j=Q||z;if(z.style({"pointer-events":Q?"none":"all"}),z.size()!==1)throw new Error("boo");function re(){K(),z.style({opacity:0});var te=j.attr("class"),Y;te?Y="."+te.split(" ")[0]+"-math-group":Y="[class*=-math-group]",Y&&w.select(z.node().parentNode).select(Y).style({opacity:0})}function ue(te){var Y=te.node(),H=document.createRange();H.selectNodeContents(Y);var ee=window.getSelection();ee.removeAllRanges(),ee.addRange(H),Y.focus()}function K(){var te=w.select(G),Y=te.select(".svg-container"),H=Y.append("div"),ee=z.node().style,ne=parseFloat(ee.fontSize||12),Z=B.text;Z===void 0&&(Z=z.attr("data-unformatted")),H.classed("plugin-editable editable",!0).style({position:"absolute","font-family":ee.fontFamily||"Arial","font-size":ne,color:B.fill||ee.fill||"black",opacity:1,"background-color":B.background||"transparent",outline:"#ffffff33 1px solid",margin:[-ne/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(Z).call(R(z,Y,B)).on("blur",function(){G._editing=!1,z.text(this.textContent).style({opacity:1});var q=w.select(this).attr("class"),ie;q?ie="."+q.split(" ")[0]+"-math-group":ie="[class*=-math-group]",ie&&w.select(z.node().parentNode).select(ie).style({opacity:0});var se=this.textContent;w.select(this).transition().duration(0).remove(),w.select(document).on("mouseup",null),X.edit.call(z,se)}).on("focus",function(){var q=this;G._editing=!0,w.select(document).on("mouseup",function(){if(w.event.target===q)return!1;document.activeElement===H.node()&&H.node().blur()})}).on("keyup",function(){w.event.which===27?(G._editing=!1,z.style({opacity:1}),w.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),X.cancel.call(z,this.textContent)):(X.input.call(z,this.textContent),w.select(this).call(R(z,Y,B)))}).on("keydown",function(){w.event.which===13&&this.blur()}).call(ue)}return B.immediate?re():j.on("click",re),w.rebind(z,X,"on")}},{"../constants/alignment":483,"../constants/xmlns_namespaces":492,"../lib":515,"@plotly/d3":58}],542:[function(i,U,V){var w={};V.throttle=function(T,e,a){var n=w[T],r=Date.now();if(!n){for(var t in w)w[t].ts<r-6e4&&delete w[t];n=w[T]={ts:0,timer:null}}f(n);function h(){a(),n.ts=Date.now(),n.onDone&&(n.onDone(),n.onDone=null)}if(r>n.ts+e){h();return}n.timer=setTimeout(function(){h(),n.timer=null},e)},V.done=function(M){var T=w[M];return!T||!T.timer?Promise.resolve():new Promise(function(e){var a=T.onDone;T.onDone=function(){a&&a(),e(),T.onDone=null}})},V.clear=function(M){if(M)f(w[M]),delete w[M];else for(var T in w)V.clear(T)};function f(M){M&&M.timer!==null&&(clearTimeout(M.timer),M.timer=null)}},{}],543:[function(i,U,V){var w=i("fast-isnumeric");U.exports=function(M,T){if(M>0)return Math.log(M)/Math.LN10;var e=Math.log(Math.min(T[0],T[1]))/Math.LN10;return w(e)||(e=Math.log(Math.max(T[0],T[1]))/Math.LN10-6),e}},{"fast-isnumeric":190}],544:[function(i,U,V){var w=U.exports={},f=i("../plots/geo/constants").locationmodeToLayer,M=i("topojson-client").feature;w.getTopojsonName=function(T){return[T.scope.replace(/ /g,"-"),"_",T.resolution.toString(),"m"].join("")},w.getTopojsonPath=function(T,e){return T+e+".json"},w.getTopojsonFeatures=function(T,e){var a=f[T.locationmode],n=e.objects[a];return M(e,n).features}},{"../plots/geo/constants":596,"topojson-client":316}],545:[function(i,U,V){U.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},{}],546:[function(i,U,V){U.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},{}],547:[function(i,U,V){var w=i("../registry");U.exports=function(M){for(var T=w.layoutArrayContainers,e=w.layoutArrayRegexes,a=M.split("[")[0],n,r,t=0;t<e.length;t++)if(r=M.match(e[t]),r&&r.index===0){n=r[0];break}if(n||(n=T[T.indexOf(a)]),!n)return!1;var h=M.substr(n.length);return h?(r=h.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/),r?{array:n,index:Number(r[1]),property:r[3]||""}:!1):{array:n,index:"",property:""}}},{"../registry":647}],548:[function(i,U,V){var w=i("../lib"),f=w.extendFlat,M=w.isPlainObject,T={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},e={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},a=T.flags.slice().concat(["fullReplot"]),n=e.flags.slice().concat("layoutReplot");U.exports={traces:T,layout:e,traceFlags:function(){return r(a)},layoutFlags:function(){return r(n)},update:function(s,o){var y=o.editType;if(y&&y!=="none")for(var d=y.split("+"),p=0;p<d.length;p++)s[d[p]]=!0},overrideAll:t};function r(s){for(var o={},y=0;y<s.length;y++)o[s[y]]=!1;return o}function t(s,o,y){var d=f({},s);for(var p in d){var c=d[p];M(c)&&(d[p]=h(c,o,y,p))}return y==="from-root"&&(d.editType=o),d}function h(s,o,y,d){if(s.valType){var p=f({},s);if(p.editType=o,Array.isArray(s.items)){p.items=new Array(s.items.length);for(var c=0;c<s.items.length;c++)p.items[c]=h(s.items[c],o)}return p}else return t(s,o,d.charAt(0)==="_"?"nested":"from-root")}},{"../lib":515}],549:[function(i,U,V){var w=i("fast-isnumeric"),f=i("gl-mat4/fromQuat"),M=i("../registry"),T=i("../lib"),e=i("../plots/plots"),a=i("../plots/cartesian/axis_ids"),n=i("../components/color"),r=a.cleanId,t=a.getFromTrace,h=M.traceIs;V.clearPromiseQueue=function(u){Array.isArray(u._promises)&&u._promises.length>0&&T.log("Clearing previous rejected promises from queue."),u._promises=[]},V.cleanLayout=function(u){var A,_;u||(u={}),u.xaxis1&&(u.xaxis||(u.xaxis=u.xaxis1),delete u.xaxis1),u.yaxis1&&(u.yaxis||(u.yaxis=u.yaxis1),delete u.yaxis1),u.scene1&&(u.scene||(u.scene=u.scene1),delete u.scene1);var g=(e.subplotsRegistry.cartesian||{}).attrRegex,b=(e.subplotsRegistry.polar||{}).attrRegex,v=(e.subplotsRegistry.ternary||{}).attrRegex,k=(e.subplotsRegistry.gl3d||{}).attrRegex,S=Object.keys(u);for(A=0;A<S.length;A++){var E=S[A];if(g&&g.test(E)){var C=u[E];C.anchor&&C.anchor!=="free"&&(C.anchor=r(C.anchor)),C.overlaying&&(C.overlaying=r(C.overlaying)),C.type||(C.isdate?C.type="date":C.islog?C.type="log":C.isdate===!1&&C.islog===!1&&(C.type="linear")),(C.autorange==="withzero"||C.autorange==="tozero")&&(C.autorange=!0,C.rangemode="tozero"),delete C.islog,delete C.isdate,delete C.categories,c(C,"domain")&&delete C.domain,C.autotick!==void 0&&(C.tickmode===void 0&&(C.tickmode=C.autotick?"auto":"linear"),delete C.autotick),o(C)}else if(b&&b.test(E)){var F=u[E];o(F.radialaxis)}else if(v&&v.test(E)){var I=u[E];o(I.aaxis),o(I.baxis),o(I.caxis)}else if(k&&k.test(E)){var D=u[E],R=D.cameraposition;if(Array.isArray(R)&&R[0].length===4){var O=R[0],z=R[1],B=R[2],G=f([],O),Q=[];for(_=0;_<3;++_)Q[_]=z[_]+B*G[2+4*_];D.camera={eye:{x:Q[0],y:Q[1],z:Q[2]},center:{x:z[0],y:z[1],z:z[2]},up:{x:0,y:0,z:1}},delete D.cameraposition}o(D.xaxis),o(D.yaxis),o(D.zaxis)}}var X=Array.isArray(u.annotations)?u.annotations.length:0;for(A=0;A<X;A++){var j=u.annotations[A];!T.isPlainObject(j)||(j.ref&&(j.ref==="paper"?(j.xref="paper",j.yref="paper"):j.ref==="data"&&(j.xref="x",j.yref="y"),delete j.ref),s(j,"xref"),s(j,"yref"))}var re=Array.isArray(u.shapes)?u.shapes.length:0;for(A=0;A<re;A++){var ue=u.shapes[A];!T.isPlainObject(ue)||(s(ue,"xref"),s(ue,"yref"))}var K=Array.isArray(u.images)?u.images.length:0;for(A=0;A<K;A++){var te=u.images[A];!T.isPlainObject(te)||(s(te,"xref"),s(te,"yref"))}var Y=u.legend;return Y&&(Y.x>3?(Y.x=1.02,Y.xanchor="left"):Y.x<-2&&(Y.x=-.02,Y.xanchor="right"),Y.y>3?(Y.y=1.02,Y.yanchor="bottom"):Y.y<-2&&(Y.y=-.02,Y.yanchor="top")),o(u),u.dragmode==="rotate"&&(u.dragmode="orbit"),n.clean(u),u.template&&u.template.layout&&V.cleanLayout(u.template.layout),u};function s(u,A){var _=u[A],g=A.charAt(0);_&&_!=="paper"&&(u[A]=r(_,g,!0))}function o(u){u&&((typeof u.title=="string"||typeof u.title=="number")&&(u.title={text:u.title}),A("titlefont","font"),A("titleposition","position"),A("titleside","side"),A("titleoffset","offset"));function A(_,g){var b=u[_],v=u.title&&u.title[g];b&&!v&&(u.title||(u.title={}),u.title[g]=u[_],delete u[_])}}V.cleanData=function(u){for(var A=0;A<u.length;A++){var _=u[A],g;if(_.type==="histogramy"&&"xbins"in _&&!("ybins"in _)&&(_.ybins=_.xbins,delete _.xbins),_.error_y&&"opacity"in _.error_y){var b=n.defaults,v=_.error_y.color||(h(_,"bar")?n.defaultLine:b[A%b.length]);_.error_y.color=n.addOpacity(n.rgb(v),n.opacity(v)*_.error_y.opacity),delete _.error_y.opacity}if("bardir"in _&&(_.bardir==="h"&&(h(_,"bar")||_.type.substr(0,9)==="histogram")&&(_.orientation="h",V.swapXYData(_)),delete _.bardir),_.type==="histogramy"&&V.swapXYData(_),(_.type==="histogramx"||_.type==="histogramy")&&(_.type="histogram"),"scl"in _&&!("colorscale"in _)&&(_.colorscale=_.scl,delete _.scl),"reversescl"in _&&!("reversescale"in _)&&(_.reversescale=_.reversescl,delete _.reversescl),_.xaxis&&(_.xaxis=r(_.xaxis,"x")),_.yaxis&&(_.yaxis=r(_.yaxis,"y")),h(_,"gl3d")&&_.scene&&(_.scene=e.subplotsRegistry.gl3d.cleanId(_.scene)),!h(_,"pie-like")&&!h(_,"bar-like"))if(Array.isArray(_.textposition))for(g=0;g<_.textposition.length;g++)_.textposition[g]=p(_.textposition[g]);else _.textposition&&(_.textposition=p(_.textposition));var k=M.getModule(_);if(k&&k.colorbar){var S=k.colorbar.container,E=S?_[S]:_;E&&E.colorscale&&(E.colorscale==="YIGnBu"&&(E.colorscale="YlGnBu"),E.colorscale==="YIOrRd"&&(E.colorscale="YlOrRd"))}if(_.type==="surface"&&T.isPlainObject(_.contours)){var C=["x","y","z"];for(g=0;g<C.length;g++){var F=_.contours[C[g]];!T.isPlainObject(F)||(F.highlightColor&&(F.highlightcolor=F.highlightColor,delete F.highlightColor),F.highlightWidth&&(F.highlightwidth=F.highlightWidth,delete F.highlightWidth))}}if(_.type==="candlestick"||_.type==="ohlc"){var I=(_.increasing||{}).showlegend!==!1,D=(_.decreasing||{}).showlegend!==!1,R=y(_.increasing),O=y(_.decreasing);if(R!==!1&&O!==!1){var z=d(R,O,I,D);z&&(_.name=z)}else(R||O)&&!_.name&&(_.name=R||O)}if(Array.isArray(_.transforms)){var B=_.transforms;for(g=0;g<B.length;g++){var G=B[g];if(!!T.isPlainObject(G))switch(G.type){case"filter":G.filtersrc&&(G.target=G.filtersrc,delete G.filtersrc),G.calendar&&(G.valuecalendar||(G.valuecalendar=G.calendar),delete G.calendar);break;case"groupby":if(G.styles=G.styles||G.style,G.styles&&!Array.isArray(G.styles)){var Q=G.styles,X=Object.keys(Q);G.styles=[];for(var j=0;j<X.length;j++)G.styles.push({target:X[j],value:Q[X[j]]})}break}}}c(_,"line")&&delete _.line,"marker"in _&&(c(_.marker,"line")&&delete _.marker.line,c(_,"marker")&&delete _.marker),n.clean(_),_.autobinx&&(delete _.autobinx,delete _.xbins),_.autobiny&&(delete _.autobiny,delete _.ybins),o(_),_.colorbar&&o(_.colorbar),_.marker&&_.marker.colorbar&&o(_.marker.colorbar),_.line&&_.line.colorbar&&o(_.line.colorbar),_.aaxis&&o(_.aaxis),_.baxis&&o(_.baxis)}};function y(u){if(!T.isPlainObject(u))return!1;var A=u.name;return delete u.name,delete u.showlegend,(typeof A=="string"||typeof A=="number")&&String(A)}function d(u,A,_,g){if(_&&!g)return u;if(g&&!_||!u.trim())return A;if(!A.trim())return u;var b=Math.min(u.length,A.length),v;for(v=0;v<b&&u.charAt(v)===A.charAt(v);v++);var k=u.substr(0,v);return k.trim()}function p(u){var A="middle",_="center";return typeof u=="string"&&(u.indexOf("top")!==-1?A="top":u.indexOf("bottom")!==-1&&(A="bottom"),u.indexOf("left")!==-1?_="left":u.indexOf("right")!==-1&&(_="right")),A+" "+_}function c(u,A){return A in u&&typeof u[A]=="object"&&Object.keys(u[A]).length===0}V.swapXYData=function(u){var A;if(T.swapAttrs(u,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(u.z)&&Array.isArray(u.z[0])&&(u.transpose?delete u.transpose:u.transpose=!0),u.error_x&&u.error_y){var _=u.error_y,g="copy_ystyle"in _?_.copy_ystyle:!(_.color||_.thickness||_.width);T.swapAttrs(u,["error_?.copy_ystyle"]),g&&T.swapAttrs(u,["error_?.color","error_?.thickness","error_?.width"])}if(typeof u.hoverinfo=="string"){var b=u.hoverinfo.split("+");for(A=0;A<b.length;A++)b[A]==="x"?b[A]="y":b[A]==="y"&&(b[A]="x");u.hoverinfo=b.join("+")}},V.coerceTraceIndices=function(u,A){if(w(A))return[A];if(!Array.isArray(A)||!A.length)return u.data.map(function(b,v){return v});if(Array.isArray(A)){for(var _=[],g=0;g<A.length;g++)T.isIndex(A[g],u.data.length)?_.push(A[g]):T.warn("trace index (",A[g],") is not a number or is out of bounds");return _}return A},V.manageArrayContainers=function(u,A,_){var g=u.obj,b=u.parts,v=b.length,k=b[v-1],S=w(k);if(S&&A===null){var E=b.slice(0,v-1).join("."),C=T.nestedProperty(g,E).get();C.splice(k,1)}else S&&u.get()===void 0&&u.get()===void 0&&(_[u.astr]=null),u.set(A)};var m=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function l(u){var A=u.search(m);if(A>0)return u.substr(0,A)}V.hasParent=function(u,A){for(var _=l(A);_;){if(_ in u)return!0;_=l(_)}return!1};var x=["x","y","z"];V.clearAxisTypes=function(u,A,_){for(var g=0;g<A.length;g++)for(var b=u._fullData[g],v=0;v<3;v++){var k=t(u,b,x[v]);if(k&&k.type!=="log"){var S=k._name,E=k._id.substr(1);if(E.substr(0,5)==="scene"){if(_[E]!==void 0)continue;S=E+"."+S}var C=S+".type";_[S]===void 0&&_[C]===void 0&&T.nestedProperty(u.layout,C).set(null)}}}},{"../components/color":367,"../lib":515,"../plots/cartesian/axis_ids":570,"../plots/plots":628,"../registry":647,"fast-isnumeric":190,"gl-mat4/fromQuat":200}],550:[function(i,U,V){var w=i("./plot_api");V._doPlot=w._doPlot,V.newPlot=w.newPlot,V.restyle=w.restyle,V.relayout=w.relayout,V.redraw=w.redraw,V.update=w.update,V._guiRestyle=w._guiRestyle,V._guiRelayout=w._guiRelayout,V._guiUpdate=w._guiUpdate,V._storeDirectGUIEdit=w._storeDirectGUIEdit,V.react=w.react,V.extendTraces=w.extendTraces,V.prependTraces=w.prependTraces,V.addTraces=w.addTraces,V.deleteTraces=w.deleteTraces,V.moveTraces=w.moveTraces,V.purge=w.purge,V.addFrames=w.addFrames,V.deleteFrames=w.deleteFrames,V.animate=w.animate,V.setPlotConfig=w.setPlotConfig,V.toImage=i("./to_image"),V.validate=i("./validate"),V.downloadImage=i("../snapshot/download");var f=i("./template_api");V.makeTemplate=f.makeTemplate,V.validateTemplate=f.validateTemplate},{"../snapshot/download":649,"./plot_api":552,"./template_api":557,"./to_image":558,"./validate":559}],551:[function(i,U,V){var w=i("../lib/is_plain_object"),f=i("../lib/noop"),M=i("../lib/loggers"),T=i("../lib/search").sorterAsc,e=i("../registry");V.containerArrayMatch=i("./container_array_match");var a=V.isAddVal=function(t){return t==="add"||w(t)},n=V.isRemoveVal=function(t){return t===null||t==="remove"};V.applyContainerArrayChanges=function(t,h,s,o,y){var d=h.astr,p=e.getComponentMethod(d,"supplyLayoutDefaults"),c=e.getComponentMethod(d,"draw"),m=e.getComponentMethod(d,"drawOne"),l=o.replot||o.recalc||p===f||c===f,x=t.layout,u=t._fullLayout;if(s[""]){Object.keys(s).length>1&&M.warn("Full array edits are incompatible with other edits",d);var A=s[""][""];if(n(A))h.set(null);else if(Array.isArray(A))h.set(A);else return M.warn("Unrecognized full array edit value",d,A),!0;return l?!1:(p(x,u),c(t),!0)}var _=Object.keys(s).map(Number).sort(T),g=h.get(),b=g||[],v=y(u,d).get(),k=[],S=-1,E=b.length,C,F,I,D,R,O,z,B;for(C=0;C<_.length;C++){if(I=_[C],D=s[I],R=Object.keys(D),O=D[""],z=a(O),I<0||I>b.length-(z?0:1)){M.warn("index out of range",d,I);continue}if(O!==void 0)R.length>1&&M.warn("Insertion & removal are incompatible with edits to the same index.",d,I),n(O)?k.push(I):z?(O==="add"&&(O={}),b.splice(I,0,O),v&&v.splice(I,0,{})):M.warn("Unrecognized full object edit value",d,I,O),S===-1&&(S=I);else for(F=0;F<R.length;F++)B=d+"["+I+"].",y(b[I],R[F],B).set(D[R[F]])}for(C=k.length-1;C>=0;C--)b.splice(k[C],1),v&&v.splice(k[C],1);if(b.length?g||h.set(b):h.set(null),l)return!1;if(p(x,u),m!==f){var G;if(S===-1)G=_;else{for(E=Math.max(b.length,E),G=[],C=0;C<_.length&&(I=_[C],!(I>=S));C++)G.push(I);for(C=S;C<E;C++)G.push(C)}for(C=0;C<G.length;C++)m(t,G[C])}else c(t);return!0}},{"../lib/is_plain_object":516,"../lib/loggers":519,"../lib/noop":524,"../lib/search":535,"../registry":647,"./container_array_match":547}],552:[function(i,U,V){var w=i("@plotly/d3"),f=i("fast-isnumeric"),M=i("has-hover"),T=i("../lib"),e=T.nestedProperty,a=i("../lib/events"),n=i("../lib/queue"),r=i("../registry"),t=i("./plot_schema"),h=i("../plots/plots"),s=i("../plots/cartesian/axes"),o=i("../components/drawing"),y=i("../components/color"),d=i("../plots/cartesian/graph_interact").initInteractions,p=i("../constants/xmlns_namespaces"),c=i("../components/selections").clearOutline,m=i("./plot_config").dfltConfig,l=i("./manage_arrays"),x=i("./helpers"),u=i("./subroutines"),A=i("./edit_types"),_=i("../plots/cartesian/constants").AX_NAME_PATTERN,g=0,b=5;function v(Me,Ve,Qe,tt){var St;if(Me=T.getGraphDiv(Me),a.init(Me),T.isPlainObject(Ve)){var wt=Ve;Ve=wt.data,Qe=wt.layout,tt=wt.config,St=wt.frames}var Ct=a.triggerHandler(Me,"plotly_beforeplot",[Ve,Qe,tt]);if(Ct===!1)return Promise.reject();!Ve&&!Qe&&!T.isPlotDiv(Me)&&T.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",Me);function jt(){if(St)return V.addFrames(Me,St)}F(Me,tt),Qe||(Qe={}),w.select(Me).classed("js-plotly-plot",!0),o.makeTester(),Array.isArray(Me._promises)||(Me._promises=[]);var Bt=(Me.data||[]).length===0&&Array.isArray(Ve);Array.isArray(Ve)&&(x.cleanData(Ve),Bt?Me.data=Ve:Me.data.push.apply(Me.data,Ve),Me.empty=!1),(!Me.layout||Bt)&&(Me.layout=x.cleanLayout(Qe)),h.supplyDefaults(Me);var Wt=Me._fullLayout,Qt=Wt._has("cartesian");Wt._replotting=!0,(Bt||Wt._shouldCreateBgLayer)&&(Ge(Me),Wt._shouldCreateBgLayer&&delete Wt._shouldCreateBgLayer),o.initGradients(Me),o.initPatterns(Me),Bt&&s.saveShowSpikeInitial(Me);var Zt=!Me.calcdata||Me.calcdata.length!==(Me._fullData||[]).length;Zt&&h.doCalcdata(Me);for(var cr=0;cr<Me.calcdata.length;cr++)Me.calcdata[cr][0].trace=Me._fullData[cr];Me._context.responsive?Me._responsiveChartHandler||(Me._responsiveChartHandler=function(){T.isHidden(Me)||h.resize(Me)},window.addEventListener("resize",Me._responsiveChartHandler)):T.clearResponsive(Me);var Xr=T.extendFlat({},Wt._size),vn=0;function en(){for(var vt=Wt._basePlotModules,kt=0;kt<vt.length;kt++)vt[kt].drawFramework&&vt[kt].drawFramework(Me);!Wt._glcanvas&&Wt._has("gl")&&(Wt._glcanvas=Wt._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(lt){return lt.key}),Wt._glcanvas.enter().append("canvas").attr("class",function(lt){return"gl-canvas gl-canvas-"+lt.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var Vt=Me._context.plotGlPixelRatio;if(Wt._glcanvas){Wt._glcanvas.attr("width",Wt.width*Vt).attr("height",Wt.height*Vt).style("width",Wt.width+"px").style("height",Wt.height+"px");var Pe=Wt._glcanvas.data()[0].regl;if(Pe&&(Math.floor(Wt.width*Vt)!==Pe._gl.drawingBufferWidth||Math.floor(Wt.height*Vt)!==Pe._gl.drawingBufferHeight)){var ke="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(vn)T.error(ke);else return T.log(ke+" Clearing graph and plotting again."),h.cleanPlot([],{},Me._fullData,Wt),h.supplyDefaults(Me),Wt=Me._fullLayout,h.doCalcdata(Me),vn++,en()}}return Wt.modebar.orientation==="h"?Wt._modebardiv.style("height",null).style("width","100%"):Wt._modebardiv.style("width",null).style("height",Wt.height+"px"),h.previousPromises(Me)}function ut(){if(h.clearAutoMarginIds(Me),u.drawMarginPushers(Me),s.allowAutoMargin(Me),Wt._has("pie"))for(var vt=Me._fullData,kt=0;kt<vt.length;kt++){var Vt=vt[kt];Vt.type==="pie"&&Vt.automargin&&h.allowAutoMargin(Me,"pie."+Vt.uid+".automargin")}return h.doAutoMargin(Me),h.previousPromises(Me)}function ar(){if(!!h.didMarginChange(Xr,Wt._size))return T.syncOrAsync([ut,u.layoutStyles],Me)}function rr(){if(!Zt){Kt();return}return T.syncOrAsync([r.getComponentMethod("shapes","calcAutorange"),r.getComponentMethod("annotations","calcAutorange"),Kt],Me)}function Kt(){Me._transitioning||(u.doAutoRangeAndConstraints(Me),Bt&&s.saveRangeInitial(Me),r.getComponentMethod("rangeslider","calcAutorange")(Me))}function Er(){return s.draw(Me,Bt?"":"redraw")}var st=[h.previousPromises,jt,en,ut,ar];Qt&&st.push(rr),st.push(u.layoutStyles),Qt&&st.push(Er,function(kt){kt._fullLayout._insideTickLabelsAutorange&&ae(kt,kt._fullLayout._insideTickLabelsAutorange).then(function(){kt._fullLayout._insideTickLabelsAutorange=void 0})}),st.push(u.drawData,u.finalDraw,d,h.addLinks,h.rehover,h.redrag,h.reselect,h.doAutoMargin,et,h.previousPromises);function et(vt){vt._fullLayout._insideTickLabelsAutorange&&Bt&&s.saveRangeInitial(vt,!0)}var ht=T.syncOrAsync(st,Me);return(!ht||!ht.then)&&(ht=Promise.resolve()),ht.then(function(){return k(Me),Me})}function k(Me){var Ve=Me._fullLayout;Ve._redrawFromAutoMarginCount?Ve._redrawFromAutoMarginCount--:Me.emit("plotly_afterplot")}function S(Me){return T.extendFlat(m,Me)}function E(Me,Ve){try{Me._fullLayout._paper.style("background",Ve)}catch(Qe){T.error(Qe)}}function C(Me,Ve){var Qe=y.combine(Ve,"white");E(Me,Qe)}function F(Me,Ve){if(!Me._context){Me._context=T.extendDeep({},m);var Qe=w.select("base");Me._context._baseUrl=Qe.size()&&Qe.attr("href")?window.location.href.split("#")[0]:""}var tt=Me._context,St,wt,Ct;if(Ve){for(wt=Object.keys(Ve),St=0;St<wt.length;St++)Ct=wt[St],!(Ct==="editable"||Ct==="edits")&&Ct in tt&&(Ct==="setBackground"&&Ve[Ct]==="opaque"?tt[Ct]=C:tt[Ct]=Ve[Ct]);Ve.plot3dPixelRatio&&!tt.plotGlPixelRatio&&(tt.plotGlPixelRatio=tt.plot3dPixelRatio);var jt=Ve.editable;if(jt!==void 0)for(tt.editable=jt,wt=Object.keys(tt.edits),St=0;St<wt.length;St++)tt.edits[wt[St]]=jt;if(Ve.edits)for(wt=Object.keys(Ve.edits),St=0;St<wt.length;St++)Ct=wt[St],Ct in tt.edits&&(tt.edits[Ct]=Ve.edits[Ct]);tt._exportedPlot=Ve._exportedPlot}tt.staticPlot&&(tt.editable=!1,tt.edits={},tt.autosizable=!1,tt.scrollZoom=!1,tt.doubleClick=!1,tt.showTips=!1,tt.showLink=!1,tt.displayModeBar=!1),tt.displayModeBar==="hover"&&!M&&(tt.displayModeBar=!0),(tt.setBackground==="transparent"||typeof tt.setBackground!="function")&&(tt.setBackground=E),tt._hasZeroHeight=tt._hasZeroHeight||Me.clientHeight===0,tt._hasZeroWidth=tt._hasZeroWidth||Me.clientWidth===0;var Bt=tt.scrollZoom,Wt=tt._scrollZoom={};if(Bt===!0)Wt.cartesian=1,Wt.gl3d=1,Wt.geo=1,Wt.mapbox=1;else if(typeof Bt=="string"){var Qt=Bt.split("+");for(St=0;St<Qt.length;St++)Wt[Qt[St]]=1}else Bt!==!1&&(Wt.gl3d=1,Wt.geo=1,Wt.mapbox=1)}function I(Me){if(Me=T.getGraphDiv(Me),!T.isPlotDiv(Me))throw new Error("This element is not a Plotly plot: "+Me);return x.cleanData(Me.data),x.cleanLayout(Me.layout),Me.calcdata=void 0,V._doPlot(Me).then(function(){return Me.emit("plotly_redraw"),Me})}function D(Me,Ve,Qe,tt){return Me=T.getGraphDiv(Me),h.cleanPlot([],{},Me._fullData||[],Me._fullLayout||{}),h.purge(Me),V._doPlot(Me,Ve,Qe,tt)}function R(Me,Ve){var Qe=Ve+1,tt=[],St,wt;for(St=0;St<Me.length;St++)wt=Me[St],wt<0?tt.push(Qe+wt):tt.push(wt);return tt}function O(Me,Ve,Qe){var tt,St;for(tt=0;tt<Ve.length;tt++){if(St=Ve[tt],St!==parseInt(St,10))throw new Error("all values in "+Qe+" must be integers");if(St>=Me.data.length||St<-Me.data.length)throw new Error(Qe+" must be valid indices for gd.data.");if(Ve.indexOf(St,tt+1)>-1||St>=0&&Ve.indexOf(-Me.data.length+St)>-1||St<0&&Ve.indexOf(Me.data.length+St)>-1)throw new Error("each index in "+Qe+" must be unique.")}}function z(Me,Ve,Qe){if(!Array.isArray(Me.data))throw new Error("gd.data must be an array.");if(typeof Ve>"u")throw new Error("currentIndices is a required argument.");if(Array.isArray(Ve)||(Ve=[Ve]),O(Me,Ve,"currentIndices"),typeof Qe<"u"&&!Array.isArray(Qe)&&(Qe=[Qe]),typeof Qe<"u"&&O(Me,Qe,"newIndices"),typeof Qe<"u"&&Ve.length!==Qe.length)throw new Error("current and new indices must be of equal length.")}function B(Me,Ve,Qe){var tt,St;if(!Array.isArray(Me.data))throw new Error("gd.data must be an array.");if(typeof Ve>"u")throw new Error("traces must be defined.");for(Array.isArray(Ve)||(Ve=[Ve]),tt=0;tt<Ve.length;tt++)if(St=Ve[tt],typeof St!="object"||Array.isArray(St)||St===null)throw new Error("all values in traces array must be non-array objects");if(typeof Qe<"u"&&!Array.isArray(Qe)&&(Qe=[Qe]),typeof Qe<"u"&&Qe.length!==Ve.length)throw new Error("if indices is specified, traces.length must equal indices.length")}function G(Me,Ve,Qe,tt){var St=T.isPlainObject(tt);if(!Array.isArray(Me.data))throw new Error("gd.data must be an array");if(!T.isPlainObject(Ve))throw new Error("update must be a key:value object");if(typeof Qe>"u")throw new Error("indices must be an integer or array of integers");O(Me,Qe,"indices");for(var wt in Ve){if(!Array.isArray(Ve[wt])||Ve[wt].length!==Qe.length)throw new Error("attribute "+wt+" must be an array of length equal to indices array length");if(St&&(!(wt in tt)||!Array.isArray(tt[wt])||tt[wt].length!==Ve[wt].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}function Q(Me,Ve,Qe,tt){var St=T.isPlainObject(tt),wt=[],Ct,jt,Bt,Wt,Qt;Array.isArray(Qe)||(Qe=[Qe]),Qe=R(Qe,Me.data.length-1);for(var Zt in Ve)for(var cr=0;cr<Qe.length;cr++){if(Ct=Me.data[Qe[cr]],Bt=e(Ct,Zt),jt=Bt.get(),Wt=Ve[Zt][cr],!T.isArrayOrTypedArray(Wt))throw new Error("attribute: "+Zt+" index: "+cr+" must be an array");if(!T.isArrayOrTypedArray(jt))throw new Error("cannot extend missing or non-array attribute: "+Zt);if(jt.constructor!==Wt.constructor)throw new Error("cannot extend array with an array of a different type: "+Zt);Qt=St?tt[Zt][cr]:tt,f(Qt)||(Qt=-1),wt.push({prop:Bt,target:jt,insert:Wt,maxp:Math.floor(Qt)})}return wt}function X(Me,Ve,Qe,tt,St){G(Me,Ve,Qe,tt);for(var wt=Q(Me,Ve,Qe,tt),Ct={},jt={},Bt=0;Bt<wt.length;Bt++){var Wt=wt[Bt].prop,Qt=wt[Bt].maxp,Zt=St(wt[Bt].target,wt[Bt].insert,Qt);Wt.set(Zt[0]),Array.isArray(Ct[Wt.astr])||(Ct[Wt.astr]=[]),Ct[Wt.astr].push(Zt[1]),Array.isArray(jt[Wt.astr])||(jt[Wt.astr]=[]),jt[Wt.astr].push(wt[Bt].target.length)}return{update:Ct,maxPoints:jt}}function j(Me,Ve){var Qe=new Me.constructor(Me.length+Ve.length);return Qe.set(Me),Qe.set(Ve,Me.length),Qe}function re(Me,Ve,Qe,tt){Me=T.getGraphDiv(Me);function St(Bt,Wt,Qt){var Zt,cr;if(T.isTypedArray(Bt))if(Qt<0){var Xr=new Bt.constructor(0),vn=j(Bt,Wt);Qt<0?(Zt=vn,cr=Xr):(Zt=Xr,cr=vn)}else if(Zt=new Bt.constructor(Qt),cr=new Bt.constructor(Bt.length+Wt.length-Qt),Qt===Wt.length)Zt.set(Wt),cr.set(Bt);else if(Qt<Wt.length){var en=Wt.length-Qt;Zt.set(Wt.subarray(en)),cr.set(Bt),cr.set(Wt.subarray(0,en),Bt.length)}else{var ut=Qt-Wt.length,ar=Bt.length-ut;Zt.set(Bt.subarray(ar)),Zt.set(Wt,ut),cr.set(Bt.subarray(0,ar))}else Zt=Bt.concat(Wt),cr=Qt>=0&&Qt<Zt.length?Zt.splice(0,Zt.length-Qt):[];return[Zt,cr]}var wt=X(Me,Ve,Qe,tt,St),Ct=V.redraw(Me),jt=[Me,wt.update,Qe,wt.maxPoints];return n.add(Me,V.prependTraces,jt,re,arguments),Ct}function ue(Me,Ve,Qe,tt){Me=T.getGraphDiv(Me);function St(Bt,Wt,Qt){var Zt,cr;if(T.isTypedArray(Bt))if(Qt<=0){var Xr=new Bt.constructor(0),vn=j(Wt,Bt);Qt<0?(Zt=vn,cr=Xr):(Zt=Xr,cr=vn)}else if(Zt=new Bt.constructor(Qt),cr=new Bt.constructor(Bt.length+Wt.length-Qt),Qt===Wt.length)Zt.set(Wt),cr.set(Bt);else if(Qt<Wt.length){var en=Wt.length-Qt;Zt.set(Wt.subarray(0,en)),cr.set(Wt.subarray(en)),cr.set(Bt,en)}else{var ut=Qt-Wt.length;Zt.set(Wt),Zt.set(Bt.subarray(0,ut),Wt.length),cr.set(Bt.subarray(ut))}else Zt=Wt.concat(Bt),cr=Qt>=0&&Qt<Zt.length?Zt.splice(Qt,Zt.length):[];return[Zt,cr]}var wt=X(Me,Ve,Qe,tt,St),Ct=V.redraw(Me),jt=[Me,wt.update,Qe,wt.maxPoints];return n.add(Me,V.extendTraces,jt,ue,arguments),Ct}function K(Me,Ve,Qe){Me=T.getGraphDiv(Me);var tt=[],St=V.deleteTraces,wt=K,Ct=[Me,tt],jt=[Me,Ve],Bt,Wt;for(B(Me,Ve,Qe),Array.isArray(Ve)||(Ve=[Ve]),Ve=Ve.map(function(Qt){return T.extendFlat({},Qt)}),x.cleanData(Ve),Bt=0;Bt<Ve.length;Bt++)Me.data.push(Ve[Bt]);for(Bt=0;Bt<Ve.length;Bt++)tt.push(-Ve.length+Bt);if(typeof Qe>"u")return Wt=V.redraw(Me),n.add(Me,St,Ct,wt,jt),Wt;Array.isArray(Qe)||(Qe=[Qe]);try{z(Me,tt,Qe)}catch(Qt){throw Me.data.splice(Me.data.length-Ve.length,Ve.length),Qt}return n.startSequence(Me),n.add(Me,St,Ct,wt,jt),Wt=V.moveTraces(Me,tt,Qe),n.stopSequence(Me),Wt}function te(Me,Ve){Me=T.getGraphDiv(Me);var Qe=[],tt=V.addTraces,St=te,wt=[Me,Qe,Ve],Ct=[Me,Ve],jt,Bt;if(typeof Ve>"u")throw new Error("indices must be an integer or array of integers.");for(Array.isArray(Ve)||(Ve=[Ve]),O(Me,Ve,"indices"),Ve=R(Ve,Me.data.length-1),Ve.sort(T.sorterDes),jt=0;jt<Ve.length;jt+=1)Bt=Me.data.splice(Ve[jt],1)[0],Qe.push(Bt);var Wt=V.redraw(Me);return n.add(Me,tt,wt,St,Ct),Wt}function Y(Me,Ve,Qe){Me=T.getGraphDiv(Me);var tt=[],St=[],wt=Y,Ct=Y,jt=[Me,Qe,Ve],Bt=[Me,Ve,Qe],Wt;if(z(Me,Ve,Qe),Ve=Array.isArray(Ve)?Ve:[Ve],typeof Qe>"u")for(Qe=[],Wt=0;Wt<Ve.length;Wt++)Qe.push(-Ve.length+Wt);for(Qe=Array.isArray(Qe)?Qe:[Qe],Ve=R(Ve,Me.data.length-1),Qe=R(Qe,Me.data.length-1),Wt=0;Wt<Me.data.length;Wt++)Ve.indexOf(Wt)===-1&&tt.push(Me.data[Wt]);for(Wt=0;Wt<Ve.length;Wt++)St.push({newIndex:Qe[Wt],trace:Me.data[Ve[Wt]]});for(St.sort(function(Zt,cr){return Zt.newIndex-cr.newIndex}),Wt=0;Wt<St.length;Wt+=1)tt.splice(St[Wt].newIndex,0,St[Wt].trace);Me.data=tt;var Qt=V.redraw(Me);return n.add(Me,wt,jt,Ct,Bt),Qt}function H(Me,Ve,Qe,tt){Me=T.getGraphDiv(Me),x.clearPromiseQueue(Me);var St={};if(typeof Ve=="string")St[Ve]=Qe;else if(T.isPlainObject(Ve))St=T.extendFlat({},Ve),tt===void 0&&(tt=Qe);else return T.warn("Restyle fail.",Ve,Qe,tt),Promise.reject();Object.keys(St).length&&(Me.changed=!0);var wt=x.coerceTraceIndices(Me,tt),Ct=ie(Me,St,wt),jt=Ct.flags;jt.calc&&(Me.calcdata=void 0),jt.clearAxisTypes&&x.clearAxisTypes(Me,wt,{});var Bt=[];jt.fullReplot?Bt.push(V._doPlot):(Bt.push(h.previousPromises),h.supplyDefaults(Me),jt.markerSize&&(h.doCalcdata(Me),be(Bt)),jt.style&&Bt.push(u.doTraceStyle),jt.colorbars&&Bt.push(u.doColorBars),Bt.push(k)),Bt.push(h.rehover,h.redrag,h.reselect),n.add(Me,H,[Me,Ct.undoit,Ct.traces],H,[Me,Ct.redoit,Ct.traces]);var Wt=T.syncOrAsync(Bt,Me);return(!Wt||!Wt.then)&&(Wt=Promise.resolve()),Wt.then(function(){return Me.emit("plotly_restyle",Ct.eventData),Me})}function ee(Me){return Me===void 0?null:Me}function ne(Me,Ve){return Ve?function(Qe,tt,St){var wt=e(Qe,tt),Ct=wt.set;return wt.set=function(jt){var Bt=(St||"")+tt;Z(Bt,wt.get(),jt,Me),Ct(jt)},wt}:e}function Z(Me,Ve,Qe,tt){if(Array.isArray(Ve)||Array.isArray(Qe))for(var St=Array.isArray(Ve)?Ve:[],wt=Array.isArray(Qe)?Qe:[],Ct=Math.max(St.length,wt.length),jt=0;jt<Ct;jt++)Z(Me+"["+jt+"]",St[jt],wt[jt],tt);else if(T.isPlainObject(Ve)||T.isPlainObject(Qe)){var Bt=T.isPlainObject(Ve)?Ve:{},Wt=T.isPlainObject(Qe)?Qe:{},Qt=T.extendFlat({},Bt,Wt);for(var Zt in Qt)Z(Me+"."+Zt,Bt[Zt],Wt[Zt],tt)}else tt[Me]===void 0&&(tt[Me]=ee(Ve))}function q(Me,Ve,Qe){for(var tt in Qe){var St=e(Me,tt);Z(tt,St.get(),Qe[tt],Ve)}}function ie(Me,Ve,Qe){var tt=Me._fullLayout,St=Me._fullData,wt=Me.data,Ct=tt._guiEditing,jt=ne(tt._preGUI,Ct),Bt=T.extendDeepAll({},Ve),Wt;se(Ve);var Qt=A.traceFlags(),Zt={},cr={},Xr;function vn(){return Qe.map(function(){})}function en(qt){var hr=s.id2name(qt);Xr.indexOf(hr)===-1&&Xr.push(hr)}function ut(qt){return"LAYOUT"+qt+".autorange"}function ar(qt){return"LAYOUT"+qt+".range"}function rr(qt){for(var hr=qt;hr<St.length;hr++)if(St[hr]._input===wt[qt])return St[hr]}function Kt(qt,hr,Ur){if(Array.isArray(qt)){qt.forEach(function(Kr){Kt(Kr,hr,Ur)});return}if(!(qt in Ve||x.hasParent(Ve,qt))){var Gr;if(qt.substr(0,6)==="LAYOUT")Gr=jt(Me.layout,qt.replace("LAYOUT",""));else{var Ir=Qe[Ur],Cr=tt._tracePreGUI[rr(Ir)._fullInput.uid];Gr=ne(Cr,Ct)(wt[Ir],qt)}qt in cr||(cr[qt]=vn()),cr[qt][Ur]===void 0&&(cr[qt][Ur]=ee(Gr.get())),hr!==void 0&&Gr.set(hr)}}function Er(qt){return function(hr){return St[hr][qt]}}function st(qt){return function(hr,Ur){return hr===!1?St[Qe[Ur]][qt]:null}}for(var et in Ve){if(x.hasParent(Ve,et))throw new Error("cannot set "+et+" and a parent attribute simultaneously");var ht=Ve[et],vt,kt,Vt,Pe,ke,lt;if((et==="autobinx"||et==="autobiny")&&(et=et.charAt(et.length-1)+"bins",Array.isArray(ht)?ht=ht.map(st(et)):ht===!1?ht=Qe.map(Er(et)):ht=null),Zt[et]=ht,et.substr(0,6)==="LAYOUT"){Vt=jt(Me.layout,et.replace("LAYOUT","")),cr[et]=[ee(Vt.get())],Vt.set(Array.isArray(ht)?ht[0]:ht),Qt.calc=!0;continue}for(cr[et]=vn(),Wt=0;Wt<Qe.length;Wt++){vt=wt[Qe[Wt]],kt=rr(Qe[Wt]);var ft=tt._tracePreGUI[kt._fullInput.uid];if(Vt=ne(ft,Ct)(vt,et),Pe=Vt.get(),ke=Array.isArray(ht)?ht[Wt%ht.length]:ht,ke!==void 0){var yt=Vt.parts[Vt.parts.length-1],Rt=et.substr(0,et.length-yt.length-1),_t=Rt?Rt+".":"",Dt=Rt?e(kt,Rt).get():kt;if(lt=t.getTraceValObject(kt,Vt.parts),lt&&lt.impliedEdits&&ke!==null)for(var Jt in lt.impliedEdits)Kt(T.relativeAttr(et,Jt),lt.impliedEdits[Jt],Wt);else if((yt==="thicknessmode"||yt==="lenmode")&&Pe!==ke&&(ke==="fraction"||ke==="pixels")&&Dt){var fr=tt._size,Rr=Dt.orient,Sr=Rr==="top"||Rr==="bottom";if(yt==="thicknessmode"){var Pr=Sr?fr.h:fr.w;Kt(_t+"thickness",Dt.thickness*(ke==="fraction"?1/Pr:Pr),Wt)}else{var Jr=Sr?fr.w:fr.h;Kt(_t+"len",Dt.len*(ke==="fraction"?1/Jr:Jr),Wt)}}else if(et==="type"&&(ke==="pie"!=(Pe==="pie")||ke==="funnelarea"!=(Pe==="funnelarea"))){var ur="x",_r="y";(ke==="bar"||Pe==="bar")&&vt.orientation==="h"&&(ur="y",_r="x"),T.swapAttrs(vt,["?","?src"],"labels",ur),T.swapAttrs(vt,["d?","?0"],"label",ur),T.swapAttrs(vt,["?","?src"],"values",_r),Pe==="pie"||Pe==="funnelarea"?(e(vt,"marker.color").set(e(vt,"marker.colors").get()),tt._pielayer.selectAll("g.trace").remove()):r.traceIs(vt,"cartesian")&&e(vt,"marker.colors").set(e(vt,"marker.color").get())}cr[et][Wt]=ee(Pe);var Br=["swapxy","swapxyaxes","orientation","orientationaxes"];if(Br.indexOf(et)!==-1){if(et==="orientation"){Vt.set(ke);var Yr=vt.x&&!vt.y?"h":"v";if((Vt.get()||Yr)===kt.orientation)continue}else et==="orientationaxes"&&(vt.orientation={v:"h",h:"v"}[kt.orientation]);x.swapXYData(vt),Qt.calc=Qt.clearAxisTypes=!0}else h.dataArrayContainers.indexOf(Vt.parts[0])!==-1?(x.manageArrayContainers(Vt,ke,cr),Qt.calc=!0):(lt?lt.arrayOk&&!r.traceIs(kt,"regl")&&(T.isArrayOrTypedArray(ke)||T.isArrayOrTypedArray(Pe))?Qt.calc=!0:A.update(Qt,lt):Qt.calc=!0,Vt.set(ke))}}if(["swapxyaxes","orientationaxes"].indexOf(et)!==-1&&s.swap(Me,Qe),et==="orientationaxes"){var Dr=e(Me.layout,"hovermode"),it=Dr.get();it==="x"?Dr.set("y"):it==="y"?Dr.set("x"):it==="x unified"?Dr.set("y unified"):it==="y unified"&&Dr.set("x unified")}if(["orientation","type"].indexOf(et)!==-1){for(Xr=[],Wt=0;Wt<Qe.length;Wt++){var zt=wt[Qe[Wt]];r.traceIs(zt,"cartesian")&&(en(zt.xaxis||"x"),en(zt.yaxis||"y"))}Kt(Xr.map(ut),!0,0),Kt(Xr.map(ar),[0,1],0)}}return(Qt.calc||Qt.plot)&&(Qt.fullReplot=!0),{flags:Qt,undoit:cr,redoit:Zt,traces:Qe,eventData:T.extendDeepNoArrays([],[Bt,Qe])}}function se(Me){var Ve=T.counterRegex("axis",".title",!1,!1),Qe=/colorbar\.title$/,tt=Object.keys(Me),St,wt,Ct;for(St=0;St<tt.length;St++)wt=tt[St],Ct=Me[wt],(wt==="title"||Ve.test(wt)||Qe.test(wt))&&(typeof Ct=="string"||typeof Ct=="number")?jt(wt,wt.replace("title","title.text")):wt.indexOf("titlefont")>-1&&wt.indexOf("grouptitlefont")===-1?jt(wt,wt.replace("titlefont","title.font")):wt.indexOf("titleposition")>-1?jt(wt,wt.replace("titleposition","title.position")):wt.indexOf("titleside")>-1?jt(wt,wt.replace("titleside","title.side")):wt.indexOf("titleoffset")>-1&&jt(wt,wt.replace("titleoffset","title.offset"));function jt(Bt,Wt){Me[Wt]=Me[Bt],delete Me[Bt]}}function ae(Me,Ve,Qe){Me=T.getGraphDiv(Me),x.clearPromiseQueue(Me);var tt={};if(typeof Ve=="string")tt[Ve]=Qe;else if(T.isPlainObject(Ve))tt=T.extendFlat({},Ve);else return T.warn("Relayout fail.",Ve,Qe),Promise.reject();Object.keys(tt).length&&(Me.changed=!0);var St=ge(Me,tt),wt=St.flags;wt.calc&&(Me.calcdata=void 0);var Ct=[h.previousPromises];wt.layoutReplot?Ct.push(u.layoutReplot):Object.keys(tt).length&&(oe(Me,wt,St)||h.supplyDefaults(Me),wt.legend&&Ct.push(u.doLegend),wt.layoutstyle&&Ct.push(u.layoutStyles),wt.axrange&&be(Ct,St.rangesAltered),wt.ticks&&Ct.push(u.doTicksRelayout),wt.modebar&&Ct.push(u.doModeBar),wt.camera&&Ct.push(u.doCamera),wt.colorbars&&Ct.push(u.doColorBars),Ct.push(k)),Ct.push(h.rehover,h.redrag,h.reselect),n.add(Me,ae,[Me,St.undoit],ae,[Me,St.redoit]);var jt=T.syncOrAsync(Ct,Me);return(!jt||!jt.then)&&(jt=Promise.resolve(Me)),jt.then(function(){return Me.emit("plotly_relayout",St.eventData),Me})}function oe(Me,Ve,Qe){var tt=Me._fullLayout;if(!Ve.axrange)return!1;for(var St in Ve)if(St!=="axrange"&&Ve[St])return!1;for(var wt in Qe.rangesAltered){var Ct=s.id2name(wt),jt=Me.layout[Ct],Bt=tt[Ct];if(Bt.autorange=jt.autorange,jt.range&&(Bt.range=jt.range.slice()),Bt.cleanRange(),Bt._matchGroup){for(var Wt in Bt._matchGroup)if(Wt!==wt){var Qt=tt[s.id2name(Wt)];Qt.autorange=Bt.autorange,Qt.range=Bt.range.slice(),Qt._input.range=Bt.range.slice()}}}return!0}function be(Me,Ve){var Qe=Ve?function(tt){var St=[],wt=!0;for(var Ct in Ve){var jt=s.getFromId(tt,Ct);if(St.push(Ct),(jt.ticklabelposition||"").indexOf("inside")!==-1&&jt._anchorAxis&&St.push(jt._anchorAxis._id),jt._matchGroup)for(var Bt in jt._matchGroup)Ve[Bt]||St.push(Bt)}return s.draw(tt,St,{skipTitle:wt})}:function(tt){return s.draw(tt,"redraw")};Me.push(c,u.doAutoRangeAndConstraints,Qe,u.drawData,u.finalDraw)}var ce=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,de=/^[xyz]axis[0-9]*\.autorange$/,ye=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function ge(Me,Ve){var Qe=Me.layout,tt=Me._fullLayout,St=tt._guiEditing,wt=ne(tt._preGUI,St),Ct=Object.keys(Ve),jt=s.list(Me),Bt=T.extendDeepAll({},Ve),Wt={},Qt,Zt,cr;for(se(Ve),Ct=Object.keys(Ve),Zt=0;Zt<Ct.length;Zt++)if(Ct[Zt].indexOf("allaxes")===0){for(cr=0;cr<jt.length;cr++){var Xr=jt[cr]._id.substr(1),vn=Xr.indexOf("scene")!==-1?Xr+".":"",en=Ct[Zt].replace("allaxes",vn+jt[cr]._name);Ve[en]||(Ve[en]=Ve[Ct[Zt]])}delete Ve[Ct[Zt]]}var ut=A.layoutFlags(),ar={},rr={};function Kt(Ir,Cr){if(Array.isArray(Ir)){Ir.forEach(function(Cn){Kt(Cn,Cr)});return}if(!(Ir in Ve||x.hasParent(Ve,Ir))){var Kr=wt(Qe,Ir);Ir in rr||(rr[Ir]=ee(Kr.get())),Cr!==void 0&&Kr.set(Cr)}}var Er={},st;function et(Ir){var Cr=s.name2id(Ir.split(".")[0]);return Er[Cr]=1,Cr}for(var ht in Ve){if(x.hasParent(Ve,ht))throw new Error("cannot set "+ht+" and a parent attribute simultaneously");for(var vt=wt(Qe,ht),kt=Ve[ht],Vt=vt.parts.length,Pe=Vt-1;Pe>0&&typeof vt.parts[Pe]!="string";)Pe--;var ke=vt.parts[Pe],lt=vt.parts[Pe-1]+"."+ke,ft=vt.parts.slice(0,Pe).join("."),yt=e(Me.layout,ft).get(),Rt=e(tt,ft).get(),_t=vt.get();if(kt!==void 0){ar[ht]=kt,rr[ht]=ke==="reverse"?kt:ee(_t);var Dt=t.getLayoutValObject(tt,vt.parts);if(Dt&&Dt.impliedEdits&&kt!==null)for(var Jt in Dt.impliedEdits)Kt(T.relativeAttr(ht,Jt),Dt.impliedEdits[Jt]);if(["width","height"].indexOf(ht)!==-1)if(kt){Kt("autosize",null);var fr=ht==="height"?"width":"height";Kt(fr,tt[fr])}else tt[ht]=Me._initialAutoSize[ht];else if(ht==="autosize")Kt("width",kt?null:tt.width),Kt("height",kt?null:tt.height);else if(lt.match(ce))et(lt),e(tt,ft+"._inputRange").set(null);else if(lt.match(de)){et(lt),e(tt,ft+"._inputRange").set(null);var Rr=e(tt,ft).get();Rr._inputDomain&&(Rr._input.domain=Rr._inputDomain.slice())}else lt.match(ye)&&e(tt,ft+"._inputDomain").set(null);if(ke==="type"){st=yt;var Sr=Rt.type==="linear"&&kt==="log",Pr=Rt.type==="log"&&kt==="linear";if(Sr||Pr){if(!st||!st.range)Kt(ft+".autorange",!0);else if(Rt.autorange)Sr&&(st.range=st.range[1]>st.range[0]?[1,2]:[2,1]);else{var Jr=st.range[0],ur=st.range[1];Sr?(Jr<=0&&ur<=0&&Kt(ft+".autorange",!0),Jr<=0?Jr=ur/1e6:ur<=0&&(ur=Jr/1e6),Kt(ft+".range[0]",Math.log(Jr)/Math.LN10),Kt(ft+".range[1]",Math.log(ur)/Math.LN10)):(Kt(ft+".range[0]",Math.pow(10,Jr)),Kt(ft+".range[1]",Math.pow(10,ur)))}Array.isArray(tt._subplots.polar)&&tt._subplots.polar.length&&tt[vt.parts[0]]&&vt.parts[1]==="radialaxis"&&delete tt[vt.parts[0]]._subplot.viewInitial["radialaxis.range"],r.getComponentMethod("annotations","convertCoords")(Me,Rt,kt,Kt),r.getComponentMethod("images","convertCoords")(Me,Rt,kt,Kt)}else Kt(ft+".autorange",!0),Kt(ft+".range",null);e(tt,ft+"._inputRange").set(null)}else if(ke.match(_)){var _r=e(tt,ht).get(),Br=(kt||{}).type;(!Br||Br==="-")&&(Br="linear"),r.getComponentMethod("annotations","convertCoords")(Me,_r,Br,Kt),r.getComponentMethod("images","convertCoords")(Me,_r,Br,Kt)}var Yr=l.containerArrayMatch(ht);if(Yr){Qt=Yr.array,Zt=Yr.index;var Dr=Yr.property,it=Dt||{editType:"calc"};Zt!==""&&Dr===""&&(l.isAddVal(kt)?rr[ht]=null:l.isRemoveVal(kt)?rr[ht]=(e(Qe,Qt).get()||[])[Zt]:T.warn("unrecognized full object value",Ve)),A.update(ut,it),Wt[Qt]||(Wt[Qt]={});var zt=Wt[Qt][Zt];zt||(zt=Wt[Qt][Zt]={}),zt[Dr]=kt,delete Ve[ht]}else ke==="reverse"?(yt.range?yt.range.reverse():(Kt(ft+".autorange",!0),yt.range=[1,0]),Rt.autorange?ut.calc=!0:ut.plot=!0):(ht==="dragmode"&&(kt===!1&&_t!==!1||kt!==!1&&_t===!1)||tt._has("scatter-like")&&tt._has("regl")&&ht==="dragmode"&&(kt==="lasso"||kt==="select")&&!(_t==="lasso"||_t==="select")||tt._has("gl2d")?ut.plot=!0:Dt?A.update(ut,Dt):ut.calc=!0,vt.set(kt))}}for(Qt in Wt){var qt=l.applyContainerArrayChanges(Me,wt(Qe,Qt),Wt[Qt],ut,wt);qt||(ut.plot=!0)}for(var hr in Er){st=s.getFromId(Me,hr);var Ur=st&&st._constraintGroup;if(Ur){ut.calc=!0;for(var Gr in Ur)Er[Gr]||(s.getFromId(Me,Gr)._constraintShrinkable=!0)}}return(me(Me)||Ve.height||Ve.width)&&(ut.plot=!0),(ut.plot||ut.calc)&&(ut.layoutReplot=!0),{flags:ut,rangesAltered:Er,undoit:rr,redoit:ar,eventData:Bt}}function me(Me){var Ve=Me._fullLayout,Qe=Ve.width,tt=Ve.height;return Me.layout.autosize&&h.plotAutoSize(Me,Me.layout,Ve),Ve.width!==Qe||Ve.height!==tt}function Se(Me,Ve,Qe,tt){Me=T.getGraphDiv(Me),x.clearPromiseQueue(Me),T.isPlainObject(Ve)||(Ve={}),T.isPlainObject(Qe)||(Qe={}),Object.keys(Ve).length&&(Me.changed=!0),Object.keys(Qe).length&&(Me.changed=!0);var St=x.coerceTraceIndices(Me,tt),wt=ie(Me,T.extendFlat({},Ve),St),Ct=wt.flags,jt=ge(Me,T.extendFlat({},Qe)),Bt=jt.flags;(Ct.calc||Bt.calc)&&(Me.calcdata=void 0),Ct.clearAxisTypes&&x.clearAxisTypes(Me,St,Qe);var Wt=[];Bt.layoutReplot?Wt.push(u.layoutReplot):Ct.fullReplot?Wt.push(V._doPlot):(Wt.push(h.previousPromises),oe(Me,Bt,jt)||h.supplyDefaults(Me),Ct.style&&Wt.push(u.doTraceStyle),(Ct.colorbars||Bt.colorbars)&&Wt.push(u.doColorBars),Bt.legend&&Wt.push(u.doLegend),Bt.layoutstyle&&Wt.push(u.layoutStyles),Bt.axrange&&be(Wt,jt.rangesAltered),Bt.ticks&&Wt.push(u.doTicksRelayout),Bt.modebar&&Wt.push(u.doModeBar),Bt.camera&&Wt.push(u.doCamera),Wt.push(k)),Wt.push(h.rehover,h.redrag,h.reselect),n.add(Me,Se,[Me,wt.undoit,jt.undoit,wt.traces],Se,[Me,wt.redoit,jt.redoit,wt.traces]);var Qt=T.syncOrAsync(Wt,Me);return(!Qt||!Qt.then)&&(Qt=Promise.resolve(Me)),Qt.then(function(){return Me.emit("plotly_update",{data:wt.eventData,layout:jt.eventData}),Me})}function Le(Me){return function(Qe){Qe._fullLayout._guiEditing=!0;var tt=Me.apply(null,arguments);return Qe._fullLayout._guiEditing=!1,tt}}var Oe=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],we=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function Ce(Me,Ve){for(var Qe=0;Qe<Ve.length;Qe++){var tt=Ve[Qe],St=Me.match(tt.pattern);if(St){var wt=St[1]||"";return{head:wt,tail:Me.substr(wt.length+1),attr:tt.attr}}}}function Ke(Me,Ve){var Qe=e(Ve,Me).get();if(Qe!==void 0)return Qe;var tt=Me.split(".");for(tt.pop();tt.length>1;)if(tt.pop(),Qe=e(Ve,tt.join(".")+".uirevision").get(),Qe!==void 0)return Qe;return Ve.uirevision}function Ye(Me,Ve){for(var Qe=0;Qe<Ve.length;Qe++)if(Ve[Qe]._fullInput.uid===Me)return Qe;return-1}function Fe(Me,Ve,Qe){for(var tt=0;tt<Ve.length;tt++)if(Ve[tt].uid===Me)return tt;return!Ve[Qe]||Ve[Qe].uid?-1:Qe}function Re(Me,Ve){var Qe=T.isPlainObject(Me),tt=Array.isArray(Me);return Qe||tt?(Qe&&T.isPlainObject(Ve)||tt&&Array.isArray(Ve))&&JSON.stringify(Me)===JSON.stringify(Ve):Me===Ve}function je(Me,Ve,Qe,tt){var St=tt._preGUI,wt,Ct,jt,Bt,Wt,Qt,Zt,cr,Xr,vn,en=[],ut={},ar={};for(wt in St){if(Wt=Ce(wt,Oe),Wt){if(Xr=Wt.head,vn=Wt.tail,Ct=Wt.attr||Xr+".uirevision",jt=e(tt,Ct).get(),Bt=jt&&Ke(Ct,Ve),Bt&&Bt===jt){if(Qt=St[wt],Qt===null&&(Qt=void 0),Zt=e(Ve,wt),cr=Zt.get(),Re(cr,Qt)){cr===void 0&&vn==="autorange"&&en.push(Xr),Zt.set(ee(e(tt,wt).get()));continue}else if(vn==="autorange"||vn.substr(0,6)==="range["){var rr=St[Xr+".range[0]"],Kt=St[Xr+".range[1]"],Er=St[Xr+".autorange"];if(Er||Er===null&&rr===null&&Kt===null){if(!(Xr in ut)){var st=e(Ve,Xr).get();ut[Xr]=st&&(st.autorange||st.autorange!==!1&&(!st.range||st.range.length!==2))}if(ut[Xr]){Zt.set(ee(e(tt,wt).get()));continue}}}}}else T.warn("unrecognized GUI edit: "+wt);delete St[wt],Wt&&Wt.tail.substr(0,6)==="range["&&(ar[Wt.head]=1)}for(var et=0;et<en.length;et++){var ht=en[et];if(ar[ht]){var vt=e(Ve,ht).get();vt&&delete vt.autorange}}var kt=tt._tracePreGUI;for(var Vt in kt){var Pe=kt[Vt],ke=null,lt;for(wt in Pe){if(!ke){var ft=Ye(Vt,Qe);if(ft<0){delete kt[Vt];break}var yt=Qe[ft];lt=yt._fullInput;var Rt=Fe(Vt,Me,lt.index);if(Rt<0){delete kt[Vt];break}ke=Me[Rt]}if(Wt=Ce(wt,we),Wt){if(Wt.attr?(jt=e(tt,Wt.attr).get(),Bt=jt&&Ke(Wt.attr,Ve)):(jt=lt.uirevision,Bt=ke.uirevision,Bt===void 0&&(Bt=Ve.uirevision)),Bt&&Bt===jt&&(Qt=Pe[wt],Qt===null&&(Qt=void 0),Zt=e(ke,wt),cr=Zt.get(),Re(cr,Qt))){Zt.set(ee(e(lt,wt).get()));continue}}else T.warn("unrecognized GUI edit: "+wt+" in trace uid "+Vt);delete Pe[wt]}}}function xt(Me,Ve,Qe,tt){var St,wt;function Ct(){return V.addFrames(Me,St)}Me=T.getGraphDiv(Me),x.clearPromiseQueue(Me);var jt=Me._fullData,Bt=Me._fullLayout;if(!T.isPlotDiv(Me)||!jt||!Bt)wt=V.newPlot(Me,Ve,Qe,tt);else{if(T.isPlainObject(Ve)){var Wt=Ve;Ve=Wt.data,Qe=Wt.layout,tt=Wt.config,St=Wt.frames}var Qt=!1;if(tt){var Zt=T.extendDeep({},Me._context);Me._context=void 0,F(Me,tt),Qt=Pt(Zt,Me._context)}Me.data=Ve||[],x.cleanData(Me.data),Me.layout=Qe||{},x.cleanLayout(Me.layout),je(Me.data,Me.layout,jt,Bt),h.supplyDefaults(Me,{skipUpdateCalc:!0});var cr=Me._fullData,Xr=Me._fullLayout,vn=Xr.datarevision===void 0,en=Xr.transition,ut=tr(Me,Bt,Xr,vn,en),ar=ut.newDataRevision,rr=Nt(Me,jt,cr,vn,en,ar);if(me(Me)&&(ut.layoutReplot=!0),rr.calc||ut.calc){Me.calcdata=void 0;for(var Kt=Object.getOwnPropertyNames(Xr),Er=0;Er<Kt.length;Er++){var st=Kt[Er],et=st.substring(0,5);if(et==="xaxis"||et==="yaxis"){var ht=Xr[st]._emptyCategories;ht&&ht()}}}else h.supplyDefaultsUpdateCalc(Me.calcdata,cr);var vt=[];if(St&&(Me._transitionData={},h.createTransitionData(Me),vt.push(Ct)),Xr.transition&&!Qt&&(rr.anim||ut.anim))ut.ticks&&vt.push(u.doTicksRelayout),h.doCalcdata(Me),u.doAutoRangeAndConstraints(Me),vt.push(function(){return h.transitionFromReact(Me,rr,ut,Bt)});else if(rr.fullReplot||ut.layoutReplot||Qt)Me._fullLayout._skipDefaults=!0,vt.push(V._doPlot);else{for(var kt in ut.arrays){var Vt=ut.arrays[kt];if(Vt.length){var Pe=r.getComponentMethod(kt,"drawOne");if(Pe!==T.noop)for(var ke=0;ke<Vt.length;ke++)Pe(Me,Vt[ke]);else{var lt=r.getComponentMethod(kt,"draw");if(lt===T.noop)throw new Error("cannot draw components: "+kt);lt(Me)}}}vt.push(h.previousPromises),rr.style&&vt.push(u.doTraceStyle),(rr.colorbars||ut.colorbars)&&vt.push(u.doColorBars),ut.legend&&vt.push(u.doLegend),ut.layoutstyle&&vt.push(u.layoutStyles),ut.axrange&&be(vt),ut.ticks&&vt.push(u.doTicksRelayout),ut.modebar&&vt.push(u.doModeBar),ut.camera&&vt.push(u.doCamera),vt.push(k)}vt.push(h.rehover,h.redrag,h.reselect),wt=T.syncOrAsync(vt,Me),(!wt||!wt.then)&&(wt=Promise.resolve(Me))}return wt.then(function(){return Me.emit("plotly_react",{data:Ve,layout:Qe}),Me})}function Nt(Me,Ve,Qe,tt,St,wt){var Ct=Ve.length===Qe.length;if(!St&&!Ct)return{fullReplot:!0,calc:!0};var jt=A.traceFlags();jt.arrays={},jt.nChanges=0,jt.nChangesAnim=0;var Bt,Wt;function Qt(Xr){var vn=t.getTraceValObject(Wt,Xr);return!Wt._module.animatable&&vn.anim&&(vn.anim=!1),vn}var Zt={getValObject:Qt,flags:jt,immutable:tt,transition:St,newDataRevision:wt,gd:Me},cr={};for(Bt=0;Bt<Ve.length;Bt++)if(Qe[Bt]){if(Wt=Qe[Bt]._fullInput,h.hasMakesDataTransform(Wt)&&(Wt=Qe[Bt]),cr[Wt.uid])continue;cr[Wt.uid]=1,Ht(Ve[Bt]._fullInput,Wt,[],Zt)}return(jt.calc||jt.plot)&&(jt.fullReplot=!0),St&&jt.nChanges&&jt.nChangesAnim&&(jt.anim=jt.nChanges===jt.nChangesAnim&&Ct?"all":"some"),jt}function tr(Me,Ve,Qe,tt,St){var wt=A.layoutFlags();wt.arrays={},wt.rangesAltered={},wt.nChanges=0,wt.nChangesAnim=0;function Ct(Bt){return t.getLayoutValObject(Qe,Bt)}var jt={getValObject:Ct,flags:wt,immutable:tt,transition:St,gd:Me};return Ht(Ve,Qe,[],jt),(wt.plot||wt.calc)&&(wt.layoutReplot=!0),St&&wt.nChanges&&wt.nChangesAnim&&(wt.anim=wt.nChanges===wt.nChangesAnim?"all":"some"),wt}function Ht(Me,Ve,Qe,tt){var St,wt,Ct,jt=tt.getValObject,Bt=tt.flags,Wt=tt.immutable,Qt=tt.inArray,Zt=tt.arrayIndex;function cr(){var ft=St.editType;if(Qt&&ft.indexOf("arraydraw")!==-1){T.pushUnique(Bt.arrays[Qt],Zt);return}A.update(Bt,St),ft!=="none"&&Bt.nChanges++,tt.transition&&St.anim&&Bt.nChangesAnim++,(ce.test(Ct)||de.test(Ct))&&(Bt.rangesAltered[Qe[0]]=1),ye.test(Ct)&&e(Ve,"_inputDomain").set(null),wt==="datarevision"&&(Bt.newDataRevision=1)}function Xr(ft){return ft.valType==="data_array"||ft.arrayOk}for(wt in Me){if(Bt.calc&&!tt.transition)return;var vn=Me[wt],en=Ve[wt],ut=Qe.concat(wt);if(Ct=ut.join("."),!(wt.charAt(0)==="_"||typeof vn=="function"||vn===en)){if((wt==="tick0"||wt==="dtick")&&Qe[0]!=="geo"){var ar=Ve.tickmode;if(ar==="auto"||ar==="array"||!ar)continue}if(!(wt==="range"&&Ve.autorange)&&!((wt==="zmin"||wt==="zmax")&&Ve.type==="contourcarpet")&&(St=jt(ut),!!St&&!(St._compareAsJSON&&JSON.stringify(vn)===JSON.stringify(en)))){var rr=St.valType,Kt,Er=Xr(St),st=Array.isArray(vn),et=Array.isArray(en);if(st&&et){var ht="_input_"+wt,vt=Me[ht],kt=Ve[ht];if(Array.isArray(vt)&&vt===kt)continue}if(en===void 0)Er&&st?Bt.calc=!0:cr();else if(St._isLinkedToArray){var Vt=[],Pe=!1;Qt||(Bt.arrays[wt]=Vt);var ke=Math.min(vn.length,en.length),lt=Math.max(vn.length,en.length);if(ke!==lt)if(St.editType==="arraydraw")Pe=!0;else{cr();continue}for(Kt=0;Kt<ke;Kt++)Ht(vn[Kt],en[Kt],ut.concat(Kt),T.extendFlat({inArray:wt,arrayIndex:Kt},tt));if(Pe)for(Kt=ke;Kt<lt;Kt++)Vt.push(Kt)}else!rr&&T.isPlainObject(vn)?Ht(vn,en,ut,tt):Er?st&&et?(Wt&&(Bt.calc=!0),(Wt||tt.newDataRevision)&&cr()):st!==et?Bt.calc=!0:cr():st&&et?(vn.length!==en.length||String(vn)!==String(en))&&cr():cr()}}}for(wt in Ve)if(!(wt in Me||wt.charAt(0)==="_"||typeof Ve[wt]=="function"))if(St=jt(Qe.concat(wt)),Xr(St)&&Array.isArray(Ve[wt])){Bt.calc=!0;return}else cr()}function Pt(Me,Ve){var Qe;for(Qe in Me)if(Qe.charAt(0)!=="_"){var tt=Me[Qe],St=Ve[Qe];if(tt!==St)if(T.isPlainObject(tt)&&T.isPlainObject(St)){if(Pt(tt,St))return!0}else if(Array.isArray(tt)&&Array.isArray(St)){if(tt.length!==St.length)return!0;for(var wt=0;wt<tt.length;wt++)if(tt[wt]!==St[wt])if(T.isPlainObject(tt[wt])&&T.isPlainObject(St[wt])){if(Pt(tt[wt],St[wt]))return!0}else return!0}else return!0}}function $t(Me,Ve,Qe){if(Me=T.getGraphDiv(Me),!T.isPlotDiv(Me))throw new Error("This element is not a Plotly plot: "+Me+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var tt=Me._transitionData;tt._frameQueue||(tt._frameQueue=[]),Qe=h.supplyAnimationDefaults(Qe);var St=Qe.transition,wt=Qe.frame;tt._frameWaitingCnt===void 0&&(tt._frameWaitingCnt=0);function Ct(Wt){return Array.isArray(St)?Wt>=St.length?St[0]:St[Wt]:St}function jt(Wt){return Array.isArray(wt)?Wt>=wt.length?wt[0]:wt[Wt]:wt}function Bt(Wt,Qt){var Zt=0;return function(){if(Wt&&++Zt===Qt)return Wt()}}return new Promise(function(Wt,Qt){function Zt(){if(tt._frameQueue.length!==0){for(;tt._frameQueue.length;){var ke=tt._frameQueue.pop();ke.onInterrupt&&ke.onInterrupt()}Me.emit("plotly_animationinterrupted",[])}}function cr(ke){if(ke.length!==0){for(var lt=0;lt<ke.length;lt++){var ft;ke[lt].type==="byname"?ft=h.computeFrame(Me,ke[lt].name):ft=ke[lt].data;var yt=jt(lt),Rt=Ct(lt);Rt.duration=Math.min(Rt.duration,yt.duration);var _t={frame:ft,name:ke[lt].name,frameOpts:yt,transitionOpts:Rt};lt===ke.length-1&&(_t.onComplete=Bt(Wt,2),_t.onInterrupt=Qt),tt._frameQueue.push(_t)}Qe.mode==="immediate"&&(tt._lastFrameAt=-1/0),tt._animationRaf||en()}}function Xr(){Me.emit("plotly_animated"),window.cancelAnimationFrame(tt._animationRaf),tt._animationRaf=null}function vn(){tt._currentFrame&&tt._currentFrame.onComplete&&tt._currentFrame.onComplete();var ke=tt._currentFrame=tt._frameQueue.shift();if(ke){var lt=ke.name?ke.name.toString():null;Me._fullLayout._currentFrame=lt,tt._lastFrameAt=Date.now(),tt._timeToNext=ke.frameOpts.duration,h.transition(Me,ke.frame.data,ke.frame.layout,x.coerceTraceIndices(Me,ke.frame.traces),ke.frameOpts,ke.transitionOpts).then(function(){ke.onComplete&&ke.onComplete()}),Me.emit("plotly_animatingframe",{name:lt,frame:ke.frame,animation:{frame:ke.frameOpts,transition:ke.transitionOpts}})}else Xr()}function en(){Me.emit("plotly_animating"),tt._lastFrameAt=-1/0,tt._timeToNext=0,tt._runningTransitions=0,tt._currentFrame=null;var ke=function(){tt._animationRaf=window.requestAnimationFrame(ke),Date.now()-tt._lastFrameAt>tt._timeToNext&&vn()};ke()}var ut=0;function ar(ke){return Array.isArray(St)?ut>=St.length?ke.transitionOpts=St[ut]:ke.transitionOpts=St[0]:ke.transitionOpts=St,ut++,ke}var rr,Kt,Er=[],st=Ve==null,et=Array.isArray(Ve),ht=!st&&!et&&T.isPlainObject(Ve);if(ht)Er.push({type:"object",data:ar(T.extendFlat({},Ve))});else if(st||["string","number"].indexOf(typeof Ve)!==-1)for(rr=0;rr<tt._frames.length;rr++)Kt=tt._frames[rr],!!Kt&&(st||String(Kt.group)===String(Ve))&&Er.push({type:"byname",name:String(Kt.name),data:ar({name:Kt.name})});else if(et)for(rr=0;rr<Ve.length;rr++){var vt=Ve[rr];["number","string"].indexOf(typeof vt)!==-1?(vt=String(vt),Er.push({type:"byname",name:vt,data:ar({name:vt})})):T.isPlainObject(vt)&&Er.push({type:"object",data:ar(T.extendFlat({},vt))})}for(rr=0;rr<Er.length;rr++)if(Kt=Er[rr],Kt.type==="byname"&&!tt._frameHash[Kt.data.name]){T.warn('animate failure: frame not found: "'+Kt.data.name+'"'),Qt();return}["next","immediate"].indexOf(Qe.mode)!==-1&&Zt(),Qe.direction==="reverse"&&Er.reverse();var kt=Me._fullLayout._currentFrame;if(kt&&Qe.fromcurrent){var Vt=-1;for(rr=0;rr<Er.length;rr++)if(Kt=Er[rr],Kt.type==="byname"&&Kt.name===kt){Vt=rr;break}if(Vt>0&&Vt<Er.length-1){var Pe=[];for(rr=0;rr<Er.length;rr++)Kt=Er[rr],(Er[rr].type!=="byname"||rr>Vt)&&Pe.push(Kt);Er=Pe}}Er.length>0?cr(Er):(Me.emit("plotly_animated"),Wt())})}function Ut(Me,Ve,Qe){if(Me=T.getGraphDiv(Me),Ve==null)return Promise.resolve();if(!T.isPlotDiv(Me))throw new Error("This element is not a Plotly plot: "+Me+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var tt,St,wt,Ct,jt=Me._transitionData._frames,Bt=Me._transitionData._frameHash;if(!Array.isArray(Ve))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+Ve);var Wt=jt.length+Ve.length*2,Qt=[],Zt={};for(tt=Ve.length-1;tt>=0;tt--)if(!!T.isPlainObject(Ve[tt])){var cr=Ve[tt].name,Xr=(Bt[cr]||Zt[cr]||{}).name,vn=Ve[tt].name,en=Bt[Xr]||Zt[Xr];Xr&&vn&&typeof vn=="number"&&en&&g<b&&(g++,T.warn('addFrames: overwriting frame "'+(Bt[Xr]||Zt[Xr]).name+'" with a frame whose name of type "number" also equates to "'+Xr+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),g===b&&T.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),Zt[cr]={name:cr},Qt.push({frame:h.supplyFrameDefaults(Ve[tt]),index:Qe&&Qe[tt]!==void 0&&Qe[tt]!==null?Qe[tt]:Wt+tt})}Qt.sort(function(ht,vt){return ht.index>vt.index?-1:ht.index<vt.index?1:0});var ut=[],ar=[],rr=jt.length;for(tt=Qt.length-1;tt>=0;tt--){if(St=Qt[tt].frame,typeof St.name=="number"&&T.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!St.name)for(;Bt[St.name="frame "+Me._transitionData._counter++];);if(Bt[St.name]){for(wt=0;wt<jt.length&&(jt[wt]||{}).name!==St.name;wt++);ut.push({type:"replace",index:wt,value:St}),ar.unshift({type:"replace",index:wt,value:jt[wt]})}else Ct=Math.max(0,Math.min(Qt[tt].index,rr)),ut.push({type:"insert",index:Ct,value:St}),ar.unshift({type:"delete",index:Ct}),rr++}var Kt=h.modifyFrames,Er=h.modifyFrames,st=[Me,ar],et=[Me,ut];return n&&n.add(Me,Kt,st,Er,et),h.modifyFrames(Me,ut)}function Lt(Me,Ve){if(Me=T.getGraphDiv(Me),!T.isPlotDiv(Me))throw new Error("This element is not a Plotly plot: "+Me);var Qe,tt,St=Me._transitionData._frames,wt=[],Ct=[];if(!Ve)for(Ve=[],Qe=0;Qe<St.length;Qe++)Ve.push(Qe);for(Ve=Ve.slice(),Ve.sort(),Qe=Ve.length-1;Qe>=0;Qe--)tt=Ve[Qe],wt.push({type:"delete",index:tt}),Ct.unshift({type:"insert",index:tt,value:St[tt]});var jt=h.modifyFrames,Bt=h.modifyFrames,Wt=[Me,Ct],Qt=[Me,wt];return n&&n.add(Me,jt,Wt,Bt,Qt),h.modifyFrames(Me,wt)}function We(Me){Me=T.getGraphDiv(Me);var Ve=Me._fullLayout||{},Qe=Me._fullData||[];return h.cleanPlot([],{},Qe,Ve),h.purge(Me),a.purge(Me),Ve._container&&Ve._container.remove(),delete Me._context,Me}function ot(Me){var Ve=Me._fullLayout,Qe=Me.getBoundingClientRect();if(!T.equalDomRects(Qe,Ve._lastBBox)){var tt=Ve._invTransform=T.inverseTransformMatrix(T.getFullTransformMatrix(Me));Ve._invScaleX=Math.sqrt(tt[0][0]*tt[0][0]+tt[0][1]*tt[0][1]+tt[0][2]*tt[0][2]),Ve._invScaleY=Math.sqrt(tt[1][0]*tt[1][0]+tt[1][1]*tt[1][1]+tt[1][2]*tt[1][2]),Ve._lastBBox=Qe}}function Ge(Me){var Ve=w.select(Me),Qe=Me._fullLayout;if(Qe._calcInverseTransform=ot,Qe._calcInverseTransform(Me),Qe._container=Ve.selectAll(".plot-container").data([0]),Qe._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),Qe._paperdiv=Qe._container.selectAll(".svg-container").data([0]),Qe._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),Qe._glcontainer=Qe._paperdiv.selectAll(".gl-container").data([{}]),Qe._glcontainer.enter().append("div").classed("gl-container",!0),Qe._paperdiv.selectAll(".main-svg").remove(),Qe._paperdiv.select(".modebar-container").remove(),Qe._paper=Qe._paperdiv.insert("svg",":first-child").classed("main-svg",!0),Qe._toppaper=Qe._paperdiv.append("svg").classed("main-svg",!0),Qe._modebardiv=Qe._paperdiv.append("div"),delete Qe._modeBar,Qe._hoverpaper=Qe._paperdiv.append("svg").classed("main-svg",!0),!Qe._uid){var tt={};w.selectAll("defs").each(function(){this.id&&(tt[this.id.split("-")[1]]=1)}),Qe._uid=T.randstr(tt)}Qe._paperdiv.selectAll(".main-svg").attr(p.svgAttrs),Qe._defs=Qe._paper.append("defs").attr("id","defs-"+Qe._uid),Qe._clips=Qe._defs.append("g").classed("clips",!0),Qe._topdefs=Qe._toppaper.append("defs").attr("id","topdefs-"+Qe._uid),Qe._topclips=Qe._topdefs.append("g").classed("clips",!0),Qe._bgLayer=Qe._paper.append("g").classed("bglayer",!0),Qe._draggers=Qe._paper.append("g").classed("draglayer",!0);var St=Qe._paper.append("g").classed("layer-below",!0);Qe._imageLowerLayer=St.append("g").classed("imagelayer",!0),Qe._shapeLowerLayer=St.append("g").classed("shapelayer",!0),Qe._cartesianlayer=Qe._paper.append("g").classed("cartesianlayer",!0),Qe._polarlayer=Qe._paper.append("g").classed("polarlayer",!0),Qe._smithlayer=Qe._paper.append("g").classed("smithlayer",!0),Qe._ternarylayer=Qe._paper.append("g").classed("ternarylayer",!0),Qe._geolayer=Qe._paper.append("g").classed("geolayer",!0),Qe._funnelarealayer=Qe._paper.append("g").classed("funnelarealayer",!0),Qe._pielayer=Qe._paper.append("g").classed("pielayer",!0),Qe._iciclelayer=Qe._paper.append("g").classed("iciclelayer",!0),Qe._treemaplayer=Qe._paper.append("g").classed("treemaplayer",!0),Qe._sunburstlayer=Qe._paper.append("g").classed("sunburstlayer",!0),Qe._indicatorlayer=Qe._toppaper.append("g").classed("indicatorlayer",!0),Qe._glimages=Qe._paper.append("g").classed("glimages",!0);var wt=Qe._toppaper.append("g").classed("layer-above",!0);Qe._imageUpperLayer=wt.append("g").classed("imagelayer",!0),Qe._shapeUpperLayer=wt.append("g").classed("shapelayer",!0),Qe._selectionLayer=Qe._toppaper.append("g").classed("selectionlayer",!0),Qe._infolayer=Qe._toppaper.append("g").classed("infolayer",!0),Qe._menulayer=Qe._toppaper.append("g").classed("menulayer",!0),Qe._zoomlayer=Qe._toppaper.append("g").classed("zoomlayer",!0),Qe._hoverlayer=Qe._hoverpaper.append("g").classed("hoverlayer",!0),Qe._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),Me.emit("plotly_framework")}V.animate=$t,V.addFrames=Ut,V.deleteFrames=Lt,V.addTraces=K,V.deleteTraces=te,V.extendTraces=re,V.moveTraces=Y,V.prependTraces=ue,V.newPlot=D,V._doPlot=v,V.purge=We,V.react=xt,V.redraw=I,V.relayout=ae,V.restyle=H,V.setPlotConfig=S,V.update=Se,V._guiRelayout=Le(ae),V._guiRestyle=Le(H),V._guiUpdate=Le(Se),V._storeDirectGUIEdit=q},{"../components/color":367,"../components/drawing":389,"../components/selections":455,"../constants/xmlns_namespaces":492,"../lib":515,"../lib/events":504,"../lib/queue":531,"../plots/cartesian/axes":566,"../plots/cartesian/constants":573,"../plots/cartesian/graph_interact":576,"../plots/plots":628,"../registry":647,"./edit_types":548,"./helpers":549,"./manage_arrays":551,"./plot_config":553,"./plot_schema":554,"./subroutines":556,"@plotly/d3":58,"fast-isnumeric":190,"has-hover":228}],553:[function(i,U,V){var w={staticPlot:{valType:"boolean",dflt:!1},typesetMath:{valType:"boolean",dflt:!0},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},editSelection:{valType:"boolean",dflt:!0},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},f={};function M(T,e){for(var a in T){var n=T[a];n.valType?e[a]=n.dflt:(e[a]||(e[a]={}),M(n,e[a]))}}M(w,f),U.exports={configAttributes:w,dfltConfig:f}},{}],554:[function(i,U,V){var w=i("../registry"),f=i("../lib"),M=i("../plots/attributes"),T=i("../plots/layout_attributes"),e=i("../plots/frame_attributes"),a=i("../plots/animation_attributes"),n=i("./plot_config").configAttributes,r=i("./edit_types"),t=f.extendDeepAll,h=f.isPlainObject,s=f.isArrayOrTypedArray,o=f.nestedProperty,y=f.valObjectMeta,d="_isSubplotObj",p="_isLinkedToArray",c="_arrayAttrRegexps",m="_deprecated",l=[d,p,c,m];V.IS_SUBPLOT_OBJ=d,V.IS_LINKED_TO_ARRAY=p,V.DEPRECATED=m,V.UNDERSCORE_ATTRS=l,V.get=function(){var D={};w.allTypes.forEach(function(O){D[O]=_(O)});var R={};return Object.keys(w.transformsRegistry).forEach(function(O){R[O]=b(O)}),{defs:{valObjects:y,metaKeys:l.concat(["description","role","editType","impliedEdits"]),editType:{traces:r.traces,layout:r.layout},impliedEdits:{}},traces:D,layout:g(),transforms:R,frames:v(),animation:k(a),config:k(n)}},V.crawl=function(D,R,O,z){var B=O||0;z=z||"",Object.keys(D).forEach(function(G){var Q=D[G];if(l.indexOf(G)===-1){var X=(z?z+".":"")+G;R(Q,G,D,B,X),!V.isValObject(Q)&&h(Q)&&G!=="impliedEdits"&&V.crawl(Q,R,B+1,X)}})},V.isValObject=function(D){return D&&D.valType!==void 0},V.findArrayAttributes=function(D){var R=[],O=[],z=[],B,G;function Q(te,Y,H,ee){O=O.slice(0,ee).concat([Y]),z=z.slice(0,ee).concat([te&&te._isLinkedToArray]);var ne=te&&(te.valType==="data_array"||te.arrayOk===!0)&&!(O[ee-1]==="colorbar"&&(Y==="ticktext"||Y==="tickvals"));!ne||X(B,0,"")}function X(te,Y,H){var ee=te[O[Y]],ne=H+O[Y];if(Y===O.length-1)s(ee)&&R.push(G+ne);else if(z[Y]){if(Array.isArray(ee))for(var Z=0;Z<ee.length;Z++)h(ee[Z])&&X(ee[Z],Y+1,ne+"["+Z+"].")}else h(ee)&&X(ee,Y+1,ne+".")}B=D,G="",V.crawl(M,Q),D._module&&D._module.attributes&&V.crawl(D._module.attributes,Q);var j=D.transforms;if(j)for(var re=0;re<j.length;re++){var ue=j[re],K=ue._module;K&&(G="transforms["+re+"].",B=ue,V.crawl(K.attributes,Q))}return R},V.getTraceValObject=function(D,R){var O=R[0],z=1,B,G;if(O==="transforms"){if(R.length===1)return M.transforms;var Q=D.transforms;if(!Array.isArray(Q)||!Q.length)return!1;var X=R[1];if(!A(X)||X>=Q.length)return!1;B=(w.transformsRegistry[Q[X].type]||{}).attributes,G=B&&B[R[2]],z=3}else{var j=D._module;if(j||(j=(w.modules[D.type||M.type.dflt]||{})._module),!j)return!1;if(B=j.attributes,G=B&&B[O],!G){var re=j.basePlotModule;re&&re.attributes&&(G=re.attributes[O])}G||(G=M[O])}return u(G,R,z)},V.getLayoutValObject=function(D,R){var O=x(D,R[0]);return u(O,R,1)};function x(D,R){var O,z,B,G,Q=D._basePlotModules;if(Q){var X;for(O=0;O<Q.length;O++){if(B=Q[O],B.attrRegex&&B.attrRegex.test(R)){if(B.layoutAttrOverrides)return B.layoutAttrOverrides;!X&&B.layoutAttributes&&(X=B.layoutAttributes)}var j=B.baseLayoutAttrOverrides;if(j&&R in j)return j[R]}if(X)return X}var re=D._modules;if(re){for(O=0;O<re.length;O++)if(G=re[O].layoutAttributes,G&&R in G)return G[R]}for(z in w.componentsRegistry){if(B=w.componentsRegistry[z],B.name==="colorscale"&&R.indexOf("coloraxis")===0)return B.layoutAttributes[R];if(!B.schema&&R===B.name)return B.layoutAttributes}return R in T?T[R]:!1}function u(D,R,O){if(!D)return!1;if(D._isLinkedToArray){if(A(R[O]))O++;else if(O<R.length)return!1}for(;O<R.length;O++){var z=D[R[O]];if(h(z))D=z;else break;if(O===R.length-1)break;if(D._isLinkedToArray){if(O++,!A(R[O]))return!1}else if(D.valType==="info_array"){O++;var B=R[O];if(!A(B))return!1;var G=D.items;if(Array.isArray(G)){if(B>=G.length)return!1;if(D.dimensions===2){if(O++,R.length===O)return D;var Q=R[O];if(!A(Q))return!1;D=G[B][Q]}else D=G[B]}else D=G}}return D}function A(D){return D===Math.round(D)&&D>=0}function _(D){var R,O;R=w.modules[D]._module,O=R.basePlotModule;var z={};z.type=null;var B=t({},M),G=t({},R.attributes);V.crawl(G,function(j,re,ue,K,te){o(B,te).set(void 0),j===void 0&&o(G,te).set(void 0)}),t(z,B),w.traceIs(D,"noOpacity")&&delete z.opacity,w.traceIs(D,"showLegend")||(delete z.showlegend,delete z.legendgroup),w.traceIs(D,"noHover")&&(delete z.hoverinfo,delete z.hoverlabel),R.selectPoints||delete z.selectedpoints,t(z,G),O.attributes&&t(z,O.attributes),z.type=D;var Q={meta:R.meta||{},categories:R.categories||{},animatable:Boolean(R.animatable),type:D,attributes:k(z)};if(R.layoutAttributes){var X={};t(X,R.layoutAttributes),Q.layoutAttributes=k(X)}return R.animatable||V.crawl(Q,function(j){V.isValObject(j)&&"anim"in j&&delete j.anim}),Q}function g(){var D={},R,O;t(D,T);for(R in w.subplotsRegistry)if(O=w.subplotsRegistry[R],!!O.layoutAttributes)if(Array.isArray(O.attr))for(var z=0;z<O.attr.length;z++)F(D,O,O.attr[z]);else{var B=O.attr==="subplot"?O.name:O.attr;F(D,O,B)}for(R in w.componentsRegistry){O=w.componentsRegistry[R];var G=O.schema;if(G&&(G.subplots||G.layout)){var Q=G.subplots;if(Q&&Q.xaxis&&!Q.yaxis)for(var X in Q.xaxis)delete D.yaxis[X]}else O.name==="colorscale"?t(D,O.layoutAttributes):O.layoutAttributes&&I(D,O.layoutAttributes,O.name)}return{layoutAttributes:k(D)}}function b(D){var R=w.transformsRegistry[D],O=t({},R.attributes);return Object.keys(w.componentsRegistry).forEach(function(z){var B=w.componentsRegistry[z];B.schema&&B.schema.transforms&&B.schema.transforms[D]&&Object.keys(B.schema.transforms[D]).forEach(function(G){I(O,B.schema.transforms[D][G],G)})}),{attributes:k(O)}}function v(){var D={frames:t({},e)};return k(D),D.frames}function k(D){return S(D),E(D),C(D),D}function S(D){function R(z){return{valType:"string",editType:"none"}}function O(z,B,G){V.isValObject(z)?(z.arrayOk===!0||z.valType==="data_array")&&(G[B+"src"]=R()):h(z)&&(z.role="object")}V.crawl(D,O)}function E(D){function R(O,z,B){if(!!O){var G=O[p];!G||(delete O[p],B[z]={items:{}},B[z].items[G]=O,B[z].role="object")}}V.crawl(D,R)}function C(D){function R(O){for(var z in O)if(h(O[z]))R(O[z]);else if(Array.isArray(O[z]))for(var B=0;B<O[z].length;B++)R(O[z][B]);else O[z]instanceof RegExp&&(O[z]=O[z].toString())}R(D)}function F(D,R,O){var z=o(D,O),B=t({},R.layoutAttributes);B[d]=!0,z.set(B)}function I(D,R,O){var z=o(D,O);z.set(t(z.get()||{},R))}},{"../lib":515,"../plots/animation_attributes":560,"../plots/attributes":562,"../plots/frame_attributes":595,"../plots/layout_attributes":619,"../registry":647,"./edit_types":548,"./plot_config":553}],555:[function(i,U,V){var w=i("../lib"),f=i("../plots/attributes"),M="templateitemname",T={name:{valType:"string",editType:"none"}};T[M]={valType:"string",editType:"calc"},V.templatedArray=function(n,r){return r._isLinkedToArray=n,r.name=T.name,r[M]=T[M],r},V.traceTemplater=function(n){var r={},t,h;for(t in n)h=n[t],Array.isArray(h)&&h.length&&(r[t]=0);function s(o){t=w.coerce(o,{},f,"type");var y={type:t,_template:null};if(t in r){h=n[t];var d=r[t]%h.length;r[t]++,y._template=h[d]}return y}return{newTrace:s}},V.newContainer=function(n,r,t){var h=n._template,s=h&&(h[r]||t&&h[t]);w.isPlainObject(s)||(s=null);var o=n[r]={_template:s};return o},V.arrayTemplater=function(n,r,t){var h=n._template,s=h&&h[a(r)],o=h&&h[r];(!Array.isArray(o)||!o.length)&&(o=[]);var y={};function d(c){var m={name:c.name,_input:c},l=m[M]=c[M];if(!e(l))return m._template=s,m;for(var x=0;x<o.length;x++){var u=o[x];if(u.name===l)return y[l]=1,m._template=u,m}return m[t]=c[t]||!1,m._template=!1,m}function p(){for(var c=[],m=0;m<o.length;m++){var l=o[m],x=l.name;if(e(x)&&!y[x]){var u={_template:l,name:x,_input:{_templateitemname:x}};u[M]=l[M],c.push(u),y[x]=1}}return c}return{newItem:d,defaultItems:p}};function e(n){return n&&typeof n=="string"}function a(n){var r=n.length-1;return n.charAt(r)!=="s"&&w.warn("bad argument to arrayDefaultKey: "+n),n.substr(0,n.length-1)+"defaults"}V.arrayDefaultKey=a,V.arrayEditor=function(n,r,t){var h=(w.nestedProperty(n,r).get()||[]).length,s=t._index,o=s>=h&&(t._input||{})._templateitemname;o&&(s=h);var y=r+"["+s+"]",d;function p(){d={},o&&(d[y]={},d[y][M]=o)}p();function c(u,A){d[u]=A}function m(u,A){o?w.nestedProperty(d[y],u).set(A):d[y+"."+u]=A}function l(){var u=d;return p(),u}function x(u,A){u&&m(u,A);var _=l();for(var g in _)w.nestedProperty(n,g).set(_[g])}return{modifyBase:c,modifyItem:m,getUpdateObj:l,applyUpdate:x}}},{"../lib":515,"../plots/attributes":562}],556:[function(i,U,V){var w=i("@plotly/d3"),f=i("../registry"),M=i("../plots/plots"),T=i("../lib"),e=i("../lib/clear_gl_canvases"),a=i("../components/color"),n=i("../components/drawing"),r=i("../components/titles"),t=i("../components/modebar"),h=i("../plots/cartesian/axes"),s=i("../constants/alignment"),o=i("../plots/cartesian/constraints"),y=o.enforce,d=o.clean,p=i("../plots/cartesian/autorange").doAutoRange,c="start",m="middle",l="end";V.layoutStyles=function(E){return T.syncOrAsync([M.doAutoMargin,u],E)};function x(E,C,F){for(var I=0;I<F.length;I++){var D=F[I][0],R=F[I][1];if(!(D[0]>=E[1]||D[1]<=E[0])&&R[0]<C[1]&&R[1]>C[0])return!0}return!1}function u(E){var C=E._fullLayout,F=C._size,I=F.p,D=h.list(E,"",!0),R,O,z,B,G,Q;if(C._paperdiv.style({width:E._context.responsive&&C.autosize&&!E._context._hasZeroWidth&&!E.layout.width?"100%":C.width+"px",height:E._context.responsive&&C.autosize&&!E._context._hasZeroHeight&&!E.layout.height?"100%":C.height+"px"}).selectAll(".main-svg").call(n.setSize,C.width,C.height),E._context.setBackground(E,C.paper_bgcolor),V.drawMainTitle(E),t.manage(E),!C._has("cartesian"))return M.previousPromises(E);function X(Pt,$t,Ut){var Lt=Pt._lw/2;if(Pt._id.charAt(0)==="x"){if($t){if(Ut==="top")return $t._offset-I-Lt}else return F.t+F.h*(1-(Pt.position||0))+Lt%1;return $t._offset+$t._length+I+Lt}if($t){if(Ut==="right")return $t._offset+$t._length+I+Lt}else return F.l+F.w*(Pt.position||0)+Lt%1;return $t._offset-I-Lt}for(R=0;R<D.length;R++){B=D[R];var j=B._anchorAxis;B._linepositions={},B._lw=n.crispRound(E,B.linewidth,1),B._mainLinePosition=X(B,j,B.side),B._mainMirrorPosition=B.mirror&&j?X(B,j,s.OPPOSITE_SIDE[B.side]):null}var re=[],ue=[],K=[],te=a.opacity(C.paper_bgcolor)===1&&a.opacity(C.plot_bgcolor)===1&&C.paper_bgcolor===C.plot_bgcolor;for(O in C._plots)if(z=C._plots[O],z.mainplot)z.bg&&z.bg.remove(),z.bg=void 0;else{var Y=z.xaxis.domain,H=z.yaxis.domain,ee=z.plotgroup;if(x(Y,H,K)){var ne=ee.node(),Z=z.bg=T.ensureSingle(ee,"rect","bg");ne.insertBefore(Z.node(),ne.childNodes[0]),ue.push(O)}else ee.select("rect.bg").remove(),K.push([Y,H]),te||(re.push(O),ue.push(O))}var q=C._bgLayer.selectAll(".bg").data(re);for(q.enter().append("rect").classed("bg",!0),q.exit().remove(),q.each(function(Pt){C._plots[Pt].bg=w.select(this)}),R=0;R<ue.length;R++)z=C._plots[ue[R]],G=z.xaxis,Q=z.yaxis,z.bg&&G._offset!==void 0&&Q._offset!==void 0&&z.bg.call(n.setRect,G._offset-I,Q._offset-I,G._length+2*I,Q._length+2*I).call(a.fill,C.plot_bgcolor).style("stroke-width",0);if(!C._hasOnlyLargeSploms)for(O in C._plots){z=C._plots[O],G=z.xaxis,Q=z.yaxis;var ie=z.clipId="clip"+C._uid+O+"plot",se=T.ensureSingleById(C._clips,"clipPath",ie,function(Pt){Pt.classed("plotclip",!0).append("rect")});z.clipRect=se.select("rect").attr({width:G._length,height:Q._length}),n.setTranslate(z.plot,G._offset,Q._offset);var ae,oe;z._hasClipOnAxisFalse?(ae=null,oe=ie):(ae=ie,oe=null),n.setClipUrl(z.plot,ae,E),z.layerClipId=oe}var be,ce,de,ye,ge,me,Se,Le,Oe,we,Ce,Ke,Ye;function Fe(Pt){return"M"+be+","+Pt+"H"+ce}function Re(Pt){return"M"+G._offset+","+Pt+"h"+G._length}function je(Pt){return"M"+Pt+","+Le+"V"+Se}function xt(Pt){return"M"+Pt+","+Q._offset+"v"+Q._length}function Nt(Pt,$t,Ut){if(!Pt.showline||O!==Pt._mainSubplot)return"";if(!Pt._anchorAxis)return Ut(Pt._mainLinePosition);var Lt=$t(Pt._mainLinePosition);return Pt.mirror&&(Lt+=$t(Pt._mainMirrorPosition)),Lt}for(O in C._plots){z=C._plots[O],G=z.xaxis,Q=z.yaxis;var tr="M0,0";A(G,O)&&(ge=g(G,"left",Q,D),be=G._offset-(ge?I+ge:0),me=g(G,"right",Q,D),ce=G._offset+G._length+(me?I+me:0),de=X(G,Q,"bottom"),ye=X(G,Q,"top"),Ye=!G._anchorAxis||O!==G._mainSubplot,Ye&&(G.mirror==="allticks"||G.mirror==="all")&&(G._linepositions[O]=[de,ye]),tr=Nt(G,Fe,Re),Ye&&G.showline&&(G.mirror==="all"||G.mirror==="allticks")&&(tr+=Fe(de)+Fe(ye)),z.xlines.style("stroke-width",G._lw+"px").call(a.stroke,G.showline?G.linecolor:"rgba(0,0,0,0)")),z.xlines.attr("d",tr);var Ht="M0,0";A(Q,O)&&(Ce=g(Q,"bottom",G,D),Se=Q._offset+Q._length+(Ce?I:0),Ke=g(Q,"top",G,D),Le=Q._offset-(Ke?I:0),Oe=X(Q,G,"left"),we=X(Q,G,"right"),Ye=!Q._anchorAxis||O!==Q._mainSubplot,Ye&&(Q.mirror==="allticks"||Q.mirror==="all")&&(Q._linepositions[O]=[Oe,we]),Ht=Nt(Q,je,xt),Ye&&Q.showline&&(Q.mirror==="all"||Q.mirror==="allticks")&&(Ht+=je(Oe)+je(we)),z.ylines.style("stroke-width",Q._lw+"px").call(a.stroke,Q.showline?Q.linecolor:"rgba(0,0,0,0)")),z.ylines.attr("d",Ht)}return h.makeClipPaths(E),M.previousPromises(E)}function A(E,C){return(E.ticks||E.showline)&&(C===E._mainSubplot||E.mirror==="all"||E.mirror==="allticks")}function _(E,C,F){if(!F.showline||!F._lw)return!1;if(F.mirror==="all"||F.mirror==="allticks")return!0;var I=F._anchorAxis;if(!I)return!1;var D=s.FROM_BL[C];return F.side===C?I.domain[D]===E.domain[D]:F.mirror&&I.domain[1-D]===E.domain[1-D]}function g(E,C,F,I){if(_(E,C,F))return F._lw;for(var D=0;D<I.length;D++){var R=I[D];if(R._mainAxis===F._mainAxis&&_(E,C,R))return R._lw}return 0}V.drawMainTitle=function(E){var C=E._fullLayout,F=k(C),I=S(C);r.draw(E,"gtitle",{propContainer:C,propName:"title.text",placeholder:C._dfltTitle.plot,attributes:{x:b(C,F),y:v(C,I),"text-anchor":F,dy:I}})};function b(E,C){var F=E.title,I=E._size,D=0;switch(C===c?D=F.pad.l:C===l&&(D=-F.pad.r),F.xref){case"paper":return I.l+I.w*F.x+D;case"container":default:return E.width*F.x+D}}function v(E,C){var F=E.title,I=E._size,D=0;if(C==="0em"||!C?D=-F.pad.b:C===s.CAP_SHIFT+"em"&&(D=F.pad.t),F.y==="auto")return I.t/2;switch(F.yref){case"paper":return I.t+I.h-I.h*F.y+D;case"container":default:return E.height-E.height*F.y+D}}function k(E){var C=E.title,F=m;return T.isRightAnchor(C)?F=l:T.isLeftAnchor(C)&&(F=c),F}function S(E){var C=E.title,F="0em";return T.isTopAnchor(C)?F=s.CAP_SHIFT+"em":T.isMiddleAnchor(C)&&(F=s.MID_SHIFT+"em"),F}V.doTraceStyle=function(E){var C=E.calcdata,F=[],I;for(I=0;I<C.length;I++){var D=C[I],R=D[0]||{},O=R.trace||{},z=O._module||{},B=z.arraysToCalcdata;B&&B(D,O);var G=z.editStyle;G&&F.push({fn:G,cd0:R})}if(F.length){for(I=0;I<F.length;I++){var Q=F[I];Q.fn(E,Q.cd0)}e(E),V.redrawReglTraces(E)}return M.style(E),f.getComponentMethod("legend","draw")(E),M.previousPromises(E)},V.doColorBars=function(E){return f.getComponentMethod("colorbar","draw")(E),M.previousPromises(E)},V.layoutReplot=function(E){var C=E.layout;return E.layout=void 0,f.call("_doPlot",E,"",C)},V.doLegend=function(E){return f.getComponentMethod("legend","draw")(E),M.previousPromises(E)},V.doTicksRelayout=function(E){return h.draw(E,"redraw"),E._fullLayout._hasOnlyLargeSploms&&(f.subplotsRegistry.splom.updateGrid(E),e(E),V.redrawReglTraces(E)),V.drawMainTitle(E),M.previousPromises(E)},V.doModeBar=function(E){var C=E._fullLayout;t.manage(E);for(var F=0;F<C._basePlotModules.length;F++){var I=C._basePlotModules[F].updateFx;I&&I(E)}return M.previousPromises(E)},V.doCamera=function(E){for(var C=E._fullLayout,F=C._subplots.gl3d,I=0;I<F.length;I++){var D=C[F[I]],R=D._scene;R.setViewport(D)}},V.drawData=function(E){var C=E._fullLayout;e(E);for(var F=C._basePlotModules,I=0;I<F.length;I++)F[I].plot(E);return V.redrawReglTraces(E),M.style(E),f.getComponentMethod("selections","draw")(E),f.getComponentMethod("shapes","draw")(E),f.getComponentMethod("annotations","draw")(E),f.getComponentMethod("images","draw")(E),C._replotting=!1,M.previousPromises(E)},V.redrawReglTraces=function(E){var C=E._fullLayout;if(C._has("regl")){var F=E._fullData,I=[],D=[],R,O;for(C._hasOnlyLargeSploms&&C._splomGrid.draw(),R=0;R<F.length;R++){var z=F[R];z.visible===!0&&z._length!==0&&(z.type==="splom"?C._splomScenes[z.uid].draw():z.type==="scattergl"?T.pushUnique(I,z.xaxis+z.yaxis):z.type==="scatterpolargl"&&T.pushUnique(D,z.subplot))}for(R=0;R<I.length;R++)O=C._plots[I[R]],O._scene&&O._scene.draw();for(R=0;R<D.length;R++)O=C[D[R]]._subplot,O._scene&&O._scene.draw()}},V.doAutoRangeAndConstraints=function(E){for(var C=h.list(E,"",!0),F,I={},D=0;D<C.length;D++)if(F=C[D],!I[F._id]){I[F._id]=1,d(E,F),p(E,F);var R=F._matchGroup;if(R)for(var O in R){var z=h.getFromId(E,O);p(E,z,F.range),I[O]=1}}y(E)},V.finalDraw=function(E){f.getComponentMethod("rangeslider","draw")(E),f.getComponentMethod("rangeselector","draw")(E)},V.drawMarginPushers=function(E){f.getComponentMethod("legend","draw")(E),f.getComponentMethod("rangeselector","draw")(E),f.getComponentMethod("sliders","draw")(E),f.getComponentMethod("updatemenus","draw")(E),f.getComponentMethod("colorbar","draw")(E)}},{"../components/color":367,"../components/drawing":389,"../components/modebar":430,"../components/titles":476,"../constants/alignment":483,"../lib":515,"../lib/clear_gl_canvases":499,"../plots/cartesian/autorange":565,"../plots/cartesian/axes":566,"../plots/cartesian/constraints":574,"../plots/plots":628,"../registry":647,"@plotly/d3":58}],557:[function(i,U,V){var w=i("../lib"),f=w.isPlainObject,M=i("./plot_schema"),T=i("../plots/plots"),e=i("../plots/attributes"),a=i("./plot_template"),n=i("./plot_config").dfltConfig;V.makeTemplate=function(c){c=w.isPlainObject(c)?c:w.getGraphDiv(c),c=w.extendDeep({_context:n},{data:c.data,layout:c.layout}),T.supplyDefaults(c);var m=c.data||[],l=c.layout||{};l._basePlotModules=c._fullLayout._basePlotModules,l._modules=c._fullLayout._modules;var x={data:{},layout:{}};m.forEach(function(C){var F={};h(C,F,o.bind(null,C));var I=w.coerce(C,{},e,"type"),D=x.data[I];D||(D=x.data[I]=[]),D.push(F)}),h(l,x.layout,s.bind(null,l)),delete x.layout.template;var u=l.template;if(f(u)){var A=u.layout,_,g,b,v,k,S;f(A)&&r(A,x.layout);var E=u.data;if(f(E)){for(g in x.data)if(b=E[g],Array.isArray(b)){for(k=x.data[g],S=k.length,v=b.length,_=0;_<S;_++)r(b[_%v],k[_]);for(_=S;_<v;_++)k.push(w.extendDeep({},b[_]))}for(g in E)g in x.data||(x.data[g]=w.extendDeep([],E[g]))}}return x};function r(c,m){c=w.extendDeep({},c);var l=Object.keys(c).sort(),x,u;function A(k,S,E){if(f(S)&&f(k))r(k,S);else if(Array.isArray(S)&&Array.isArray(k)){var C=a.arrayTemplater({_template:c},E);for(u=0;u<S.length;u++){var F=S[u],I=C.newItem(F)._template;I&&r(I,F)}var D=C.defaultItems();for(u=0;u<D.length;u++)S.push(D[u]._template);for(u=0;u<S.length;u++)delete S[u].templateitemname}}for(x=0;x<l.length;x++){var _=l[x],g=c[_];if(_ in m?A(g,m[_],_):m[_]=g,t(_)===_)for(var b in m){var v=t(b);b!==v&&v===_&&!(b in c)&&A(g,m[b],_)}}}function t(c){return c.replace(/[0-9]+$/,"")}function h(c,m,l,x,u){var A=u&&l(u);for(var _ in c){var g=c[_],b=y(c,_,x),v=y(c,_,u),k=l(v);if(!k){var S=t(_);S!==_&&(v=y(c,S,u),k=l(v))}if(!(A&&A===k)&&!(!k||k._noTemplating||k.valType==="data_array"||k.arrayOk&&Array.isArray(g)))if(!k.valType&&f(g))h(g,m,l,b,v);else if(k._isLinkedToArray&&Array.isArray(g))for(var E=!1,C=0,F={},I=0;I<g.length;I++){var D=g[I];if(f(D)){var R=D.name;if(R)F[R]||(h(D,m,l,y(g,C,b),y(g,C,v)),C++,F[R]=1);else if(!E){var O=a.arrayDefaultKey(_),z=y(c,O,x),B=y(g,C,b);h(D,m,l,B,y(g,C,v));var G=w.nestedProperty(m,B),Q=w.nestedProperty(m,z);Q.set(G.get()),G.set(null),E=!0}}}else{var X=w.nestedProperty(m,b);X.set(g)}}}function s(c,m){return M.getLayoutValObject(c,w.nestedProperty({},m).parts)}function o(c,m){return M.getTraceValObject(c,w.nestedProperty({},m).parts)}function y(c,m,l){var x;return l?Array.isArray(c)?x=l+"["+m+"]":x=l+"."+m:x=m,x}V.validateTemplate=function(c,m){var l=w.extendDeep({},{_context:n,data:c.data,layout:c.layout}),x=l.layout||{};f(m)||(m=x.template||{});var u=m.layout,A=m.data,_=[];l.layout=x,l.layout.template=m,T.supplyDefaults(l);var g=l._fullLayout,b=l._fullData,v={};function k(z,B){for(var G in z)if(G.charAt(0)!=="_"&&f(z[G])){var Q=t(G),X=[],j;for(j=0;j<B.length;j++)X.push(y(z,G,B[j])),Q!==G&&X.push(y(z,Q,B[j]));for(j=0;j<X.length;j++)v[X[j]]=1;k(z[G],X)}}function S(z,B){for(var G in z)if(G.indexOf("defaults")===-1&&f(z[G])){var Q=y(z,G,B);v[Q]?S(z[G],Q):_.push({code:"unused",path:Q})}}if(f(u)?(k(g,["layout"]),S(u,"layout")):_.push({code:"layout"}),!f(A))_.push({code:"data"});else{for(var E={},C,F=0;F<b.length;F++){var I=b[F];C=I.type,E[C]=(E[C]||0)+1,I._fullInput._template||_.push({code:"missing",index:I._fullInput.index,traceType:C})}for(C in A){var D=A[C].length,R=E[C]||0;D>R?_.push({code:"unused",traceType:C,templateCount:D,dataCount:R}):R>D&&_.push({code:"reused",traceType:C,templateCount:D,dataCount:R})}}function O(z,B){for(var G in z)if(G.charAt(0)!=="_"){var Q=z[G],X=y(z,G,B);f(Q)?(Array.isArray(z)&&Q._template===!1&&Q.templateitemname&&_.push({code:"missing",path:X,templateitemname:Q.templateitemname}),O(Q,X)):Array.isArray(Q)&&d(Q)&&O(Q,X)}}if(O({data:b,layout:g},""),_.length)return _.map(p)};function d(c){for(var m=0;m<c.length;m++)if(f(c[m]))return!0}function p(c){var m;switch(c.code){case"data":m="The template has no key data.";break;case"layout":m="The template has no key layout.";break;case"missing":c.path?m="There are no templates for item "+c.path+" with name "+c.templateitemname:m="There are no templates for trace "+c.index+", of type "+c.traceType+".";break;case"unused":c.path?m="The template item at "+c.path+" was not used in constructing the plot.":c.dataCount?m="Some of the templates of type "+c.traceType+" were not used. The template has "+c.templateCount+" traces, the data only has "+c.dataCount+" of this type.":m="The template has "+c.templateCount+" traces of type "+c.traceType+" but there are none in the data.";break;case"reused":m="Some of the templates of type "+c.traceType+" were used more than once. The template has "+c.templateCount+" traces, the data has "+c.dataCount+" of this type.";break}return c.msg=m,c}},{"../lib":515,"../plots/attributes":562,"../plots/plots":628,"./plot_config":553,"./plot_schema":554,"./plot_template":555}],558:[function(i,U,V){var w=i("fast-isnumeric"),f=i("./plot_api"),M=i("../plots/plots"),T=i("../lib"),e=i("../snapshot/helpers"),a=i("../snapshot/tosvg"),n=i("../snapshot/svgtoimg"),r=i("../version").version,t={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};function h(s,o){o=o||{};var y,d,p,c;T.isPlainObject(s)?(y=s.data||[],d=s.layout||{},p=s.config||{},c={}):(s=T.getGraphDiv(s),y=T.extendDeep([],s.data),d=T.extendDeep({},s.layout),p=s._context,c=s._fullLayout||{});function m(R){return!(R in o)||T.validate(o[R],t[R])}if(!m("width")&&o.width!==null||!m("height")&&o.height!==null)throw new Error("Height and width should be pixel values.");if(!m("format"))throw new Error("Export format is not "+T.join2(t.format.values,", "," or ")+".");var l={};function x(R,O){return T.coerce(o,l,t,R,O)}var u=x("format"),A=x("width"),_=x("height"),g=x("scale"),b=x("setBackground"),v=x("imageDataOnly"),k=document.createElement("div");k.style.position="absolute",k.style.left="-5000px",document.body.appendChild(k);var S=T.extendFlat({},d);A?S.width=A:o.width===null&&w(c.width)&&(S.width=c.width),_?S.height=_:o.height===null&&w(c.height)&&(S.height=c.height);var E=T.extendFlat({},p,{_exportedPlot:!0,staticPlot:!0,setBackground:b}),C=e.getRedrawFunc(k);function F(){return new Promise(function(R){setTimeout(R,e.getDelay(k._fullLayout))})}function I(){return new Promise(function(R,O){var z=a(k,u,g),B=k._fullLayout.width,G=k._fullLayout.height;function Q(){f.purge(k),document.body.removeChild(k)}if(u==="full-json"){var X=M.graphJson(k,!1,"keepdata","object",!0,!0);return X.version=r,X=JSON.stringify(X),Q(),R(v?X:e.encodeJSON(X))}if(Q(),u==="svg")return R(v?z:e.encodeSVG(z));var j=document.createElement("canvas");j.id=T.randstr(),n({format:u,width:B,height:G,scale:g,canvas:j,svg:z,promise:!0}).then(R).catch(O)})}function D(R){return v?R.replace(e.IMAGE_URL_PREFIX,""):R}return new Promise(function(R,O){f.newPlot(k,y,S,E).then(C).then(F).then(I).then(function(z){R(D(z))}).catch(function(z){O(z)})})}U.exports=h},{"../lib":515,"../plots/plots":628,"../snapshot/helpers":651,"../snapshot/svgtoimg":653,"../snapshot/tosvg":655,"../version":1132,"./plot_api":552,"fast-isnumeric":190}],559:[function(i,U,V){var w=i("../lib"),f=i("../plots/plots"),M=i("./plot_schema"),T=i("./plot_config").dfltConfig,e=w.isPlainObject,a=Array.isArray,n=w.isArrayOrTypedArray;U.exports=function(x,u){x===void 0&&(x=[]),u===void 0&&(u={});var A=M.get(),_=[],g={_context:w.extendFlat({},T)},b,v;a(x)?(g.data=w.extendDeep([],x),b=x):(g.data=[],b=[],_.push(o("array","data"))),e(u)?(g.layout=w.extendDeep({},u),v=u):(g.layout={},v={},arguments.length>1&&_.push(o("object","layout"))),f.supplyDefaults(g);for(var k=g._fullData,S=b.length,E=0;E<S;E++){var C=b[E],F=["data",E];if(!e(C)){_.push(o("object",F));continue}var I=k[E],D=I.type,R=A.traces[D].attributes;R.type={valType:"enumerated",values:[D]},I.visible===!1&&C.visible!==!1&&_.push(o("invisible",F)),r(C,I,R,_,F);var O=C.transforms,z=I.transforms;if(O){a(O)||_.push(o("array",F,["transforms"])),F.push("transforms");for(var B=0;B<O.length;B++){var G=["transforms",B],Q=O[B].type;if(!e(O[B])){_.push(o("object",F,G));continue}var X=A.transforms[Q]?A.transforms[Q].attributes:{};X.type={valType:"enumerated",values:Object.keys(A.transforms)},r(O[B],z[B],X,_,F,G)}}}var j=g._fullLayout,re=t(A,k);return r(v,j,re,_,"layout"),_.length===0?void 0:_};function r(l,x,u,A,_,g){g=g||[];for(var b=Object.keys(l),v=0;v<b.length;v++){var k=b[v];if(k!=="transforms"){var S=g.slice();S.push(k);var E=l[k],C=x[k],F=d(u,k),I=(F||{}).valType,D=I==="info_array",R=I==="colorscale",O=(F||{}).items;if(!y(u,k))A.push(o("schema",_,S));else if(e(E)&&e(C)&&I!=="any")r(E,C,F,A,_,S);else if(D&&a(E)){E.length>C.length&&A.push(o("unused",_,S.concat(C.length)));var z=C.length,B=Array.isArray(O);B&&(z=Math.min(z,O.length));var G,Q,X,j,re;if(F.dimensions===2)for(Q=0;Q<z;Q++)if(a(E[Q])){E[Q].length>C[Q].length&&A.push(o("unused",_,S.concat(Q,C[Q].length)));var ue=C[Q].length;for(G=0;G<(B?Math.min(ue,O[Q].length):ue);G++)X=B?O[Q][G]:O,j=E[Q][G],re=C[Q][G],w.validate(j,X)?re!==j&&re!==+j&&A.push(o("dynamic",_,S.concat(Q,G),j,re)):A.push(o("value",_,S.concat(Q,G),j))}else A.push(o("array",_,S.concat(Q),E[Q]));else for(Q=0;Q<z;Q++)X=B?O[Q]:O,j=E[Q],re=C[Q],w.validate(j,X)?re!==j&&re!==+j&&A.push(o("dynamic",_,S.concat(Q),j,re)):A.push(o("value",_,S.concat(Q),j))}else if(F.items&&!D&&a(E)){var K=O[Object.keys(O)[0]],te=[],Y,H;for(Y=0;Y<C.length;Y++){var ee=C[Y]._index||Y;if(H=S.slice(),H.push(ee),e(E[ee])&&e(C[Y])){te.push(ee);var ne=E[ee],Z=C[Y];e(ne)&&ne.visible!==!1&&Z.visible===!1?A.push(o("invisible",_,H)):r(ne,Z,K,A,_,H)}}for(Y=0;Y<E.length;Y++)H=S.slice(),H.push(Y),e(E[Y])?te.indexOf(Y)===-1&&A.push(o("unused",_,H)):A.push(o("object",_,H,E[Y]))}else!e(E)&&e(C)?A.push(o("object",_,S,E)):!n(E)&&n(C)&&!D&&!R?A.push(o("array",_,S,E)):k in x?w.validate(E,F)?F.valType==="enumerated"&&(F.coerceNumber&&E!==+C||E!==C)&&A.push(o("dynamic",_,S,E,C)):A.push(o("value",_,S,E)):A.push(o("unused",_,S,E))}}return A}function t(l,x){for(var u=l.layout.layoutAttributes,A=0;A<x.length;A++){var _=x[A],g=l.traces[_.type],b=g.layoutAttributes;b&&(_.subplot?w.extendFlat(u[g.attributes.subplot.dflt],b):w.extendFlat(u,b))}return u}var h={object:function(l,x){var u;return l==="layout"&&x===""?u="The layout argument":l[0]==="data"&&x===""?u="Trace "+l[1]+" in the data argument":u=s(l)+"key "+x,u+" must be linked to an object container"},array:function(l,x){var u;return l==="data"?u="The data argument":u=s(l)+"key "+x,u+" must be linked to an array container"},schema:function(l,x){return s(l)+"key "+x+" is not part of the schema"},unused:function(l,x,u){var A=e(u)?"container":"key";return s(l)+A+" "+x+" did not get coerced"},dynamic:function(l,x,u,A){return[s(l)+"key",x,"(set to '"+u+"')","got reset to","'"+A+"'","during defaults."].join(" ")},invisible:function(l,x){return(x?s(l)+"item "+x:"Trace "+l[1])+" got defaulted to be not visible"},value:function(l,x,u){return[s(l)+"key "+x,"is set to an invalid value ("+u+")"].join(" ")}};function s(l){return a(l)?"In data trace "+l[1]+", ":"In "+l+", "}function o(l,x,u,A,_){u=u||"";var g,b;a(x)?(g=x[0],b=x[1]):(g=x,b=null);var v=m(u),k=h[l](x,v,A,_);return w.log(k),{code:l,container:g,trace:b,path:u,astr:v,msg:k}}function y(l,x){var u=c(x),A=u.keyMinusId,_=u.id;return A in l&&l[A]._isSubplotObj&&_?!0:x in l}function d(l,x){if(x in l)return l[x];var u=c(x);return l[u.keyMinusId]}var p=w.counterRegex("([a-z]+)");function c(l){var x=l.match(p);return{keyMinusId:x&&x[1],id:x&&x[2]}}function m(l){if(!a(l))return String(l);for(var x="",u=0;u<l.length;u++){var A=l[u];typeof A=="number"?x=x.substr(0,x.length-1)+"["+A+"]":x+=A,u<l.length-1&&(x+=".")}return x}},{"../lib":515,"../plots/plots":628,"./plot_config":553,"./plot_schema":554}],560:[function(i,U,V){U.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},{}],561:[function(i,U,V){var w=i("../lib"),f=i("../plot_api/plot_template");U.exports=function(T,e,a){var n=a.name,r=a.inclusionAttr||"visible",t=e[n],h=w.isArrayOrTypedArray(T[n])?T[n]:[],s=e[n]=[],o=f.arrayTemplater(e,n,r),y,d;for(y=0;y<h.length;y++){var p=h[y];w.isPlainObject(p)?d=o.newItem(p):(d=o.newItem({}),d[r]=!1),d._index=y,d[r]!==!1&&a.handleItemDefaults(p,d,e,a),s.push(d)}var c=o.defaultItems();for(y=0;y<c.length;y++)d=c[y],d._index=s.length,a.handleItemDefaults({},d,e,a,{}),s.push(d);if(w.isArrayOrTypedArray(t)){var m=Math.min(t.length,s.length);for(y=0;y<m;y++)w.relinkPrivateKeys(s[y],t[y])}return s}},{"../lib":515,"../plot_api/plot_template":555}],562:[function(i,U,V){var w=i("./font_attributes"),f=i("../components/fx/attributes");U.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:w({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},legendwidth:{valType:"number",min:0,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:f.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},{"../components/fx/attributes":398,"./font_attributes":594}],563:[function(i,U,V){var w=i("fast-isnumeric"),f=i("../../lib"),M=f.dateTime2ms,T=f.incrementMonth,e=i("../../constants/numerical"),a=e.ONEAVGMONTH;U.exports=function(r,t,h,s){if(t.type!=="date")return{vals:s};var o=r[h+"periodalignment"];if(!o)return{vals:s};var y=r[h+"period"],d;if(w(y)){if(y=+y,y<=0)return{vals:s}}else if(typeof y=="string"&&y.charAt(0)==="M"){var p=+y.substring(1);if(p>0&&Math.round(p)===p)d=p;else return{vals:s}}for(var c=t.calendar,m=o==="start",l=o==="end",x=r[h+"period0"],u=M(x,c)||0,A=[],_=[],g=[],b=s.length,v=0;v<b;v++){var k=s[v],S,E,C;if(d){for(S=Math.round((k-u)/(d*a)),C=T(u,d*S,c);C>k;)C=T(C,-d,c);for(;C<=k;)C=T(C,d,c);E=T(C,-d,c)}else{for(S=Math.round((k-u)/y),C=u+S*y;C>k;)C-=y;for(;C<=k;)C+=y;E=C-y}A[v]=m?E:l?C:(E+C)/2,_[v]=E,g[v]=C}return{vals:A,starts:_,ends:g}}},{"../../constants/numerical":491,"../../lib":515,"fast-isnumeric":190}],564:[function(i,U,V){U.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},{}],565:[function(i,U,V){var w=i("@plotly/d3"),f=i("fast-isnumeric"),M=i("../../lib"),T=i("../../constants/numerical").FP_SAFE,e=i("../../registry"),a=i("../../components/drawing"),n=i("./axis_ids"),r=n.getFromId,t=n.isLinked;U.exports={getAutoRange:h,makePadFn:o,doAutoRange:c,findExtremes:m,concatExtremes:p};function h(b,v){var k,S,E=[],C=b._fullLayout,F=o(C,v,0),I=o(C,v,1),D=p(b,v),R=D.min,O=D.max;if(R.length===0||O.length===0)return M.simpleMap(v.range,v.r2l);var z=R[0].val,B=O[0].val;for(k=1;k<R.length&&z===B;k++)z=Math.min(z,R[k].val);for(k=1;k<O.length&&z===B;k++)B=Math.max(B,O[k].val);var G=!1;if(v.range){var Q=M.simpleMap(v.range,v.r2l);G=Q[1]<Q[0]}v.autorange==="reversed"&&(G=!0,v.autorange=!0);var X=v.rangemode,j=X==="tozero",re=X==="nonnegative",ue=v._length,K=ue/10,te=0,Y,H,ee,ne,Z,q;for(k=0;k<R.length;k++)for(Y=R[k],S=0;S<O.length;S++)H=O[S],q=H.val-Y.val-s(v,Y.val,H.val),q>0&&(Z=ue-F(Y)-I(H),Z>K?q/Z>te&&(ee=Y,ne=H,te=q/Z):q/ue>te&&(ee={val:Y.val,nopad:1},ne={val:H.val,nopad:1},te=q/ue));function ie(ce,de){return Math.max(ce,I(de))}if(z===B){var se=z-1,ae=z+1;if(j)if(z===0)E=[0,1];else{var oe=(z>0?O:R).reduce(ie,0),be=z/(1-Math.min(.5,oe/ue));E=z>0?[0,be]:[be,0]}else re?E=[Math.max(0,se),Math.max(1,ae)]:E=[se,ae]}else j?(ee.val>=0&&(ee={val:0,nopad:1}),ne.val<=0&&(ne={val:0,nopad:1})):re&&(ee.val-te*F(ee)<0&&(ee={val:0,nopad:1}),ne.val<=0&&(ne={val:1,nopad:1})),te=(ne.val-ee.val-s(v,Y.val,H.val))/(ue-F(ee)-I(ne)),E=[ee.val-te*F(ee),ne.val+te*I(ne)];return G&&E.reverse(),M.simpleMap(E,v.l2r||Number)}function s(b,v,k){var S=0;if(b.rangebreaks)for(var E=b.locateBreaks(v,k),C=0;C<E.length;C++){var F=E[C];S+=F.max-F.min}return S}function o(b,v,k){var S=.05*v._length,E=v._anchorAxis||{};if((v.ticklabelposition||"").indexOf("inside")!==-1||(E.ticklabelposition||"").indexOf("inside")!==-1){var C=v.autorange==="reversed";if(!C){var F=M.simpleMap(v.range,v.r2l);C=F[1]<F[0]}C&&(k=!k)}var I=0;return t(b,v._id)||(I=d(b,v,k)),S=Math.max(I,S),v.constrain==="domain"&&v._inputDomain&&(S*=(v._inputDomain[1]-v._inputDomain[0])/(v.domain[1]-v.domain[0])),function(R){return R.nopad?0:R.pad+(R.extrapad?S:I)}}var y=3;function d(b,v,k){var S=0,E=v._id.charAt(0)==="x";for(var C in b._plots){var F=b._plots[C];if(!(v._id!==F.xaxis._id&&v._id!==F.yaxis._id)){var I=(E?F.yaxis:F.xaxis)||{};if((I.ticklabelposition||"").indexOf("inside")!==-1&&(!k&&(I.side==="left"||I.side==="bottom")||k&&(I.side==="top"||I.side==="right"))){if(I._vals){var D=M.deg2rad(I._tickAngles[I._id+"tick"]||0),R=Math.abs(Math.cos(D)),O=Math.abs(Math.sin(D));if(!I._vals[0].bb){var z=I._id+"tick",B=I._selections[z];B.each(function(ue){var K=w.select(this),te=K.select(".text-math-group");te.empty()&&(ue.bb=a.bBox(K.node()))})}for(var G=0;G<I._vals.length;G++){var Q=I._vals[G],X=Q.bb;if(X){var j=2*y+X.width,re=2*y+X.height;S=Math.max(S,E?Math.max(j*R,re*O):Math.max(re*R,j*O))}}}I.ticks==="inside"&&I.ticklabelposition==="inside"&&(S+=I.ticklen||0)}}}return S}function p(b,v,k){var S=v._id,E=b._fullData,C=b._fullLayout,F=[],I=[],D,R,O;function z(j,re){for(D=0;D<re.length;D++){var ue=j[re[D]],K=(ue._extremes||{})[S];if(ue.visible===!0&&K){for(R=0;R<K.min.length;R++)O=K.min[R],l(F,O.val,O.pad,{extrapad:O.extrapad});for(R=0;R<K.max.length;R++)O=K.max[R],x(I,O.val,O.pad,{extrapad:O.extrapad})}}}if(z(E,v._traceIndices),z(C.annotations||[],v._annIndices||[]),z(C.shapes||[],v._shapeIndices||[]),v._matchGroup&&!k){for(var B in v._matchGroup)if(B!==v._id){var G=r(b,B),Q=p(b,G,!0),X=v._length/G._length;for(R=0;R<Q.min.length;R++)O=Q.min[R],l(F,O.val,O.pad*X,{extrapad:O.extrapad});for(R=0;R<Q.max.length;R++)O=Q.max[R],x(I,O.val,O.pad*X,{extrapad:O.extrapad})}}return{min:F,max:I}}function c(b,v,k){if(v.setScale(),v.autorange){v.range=k?k.slice():h(b,v),v._r=v.range.slice(),v._rl=M.simpleMap(v._r,v.r2l);var S=v._input,E={};E[v._attr+".range"]=v.range,E[v._attr+".autorange"]=v.autorange,e.call("_storeDirectGUIEdit",b.layout,b._fullLayout._preGUI,E),S.range=v.range.slice(),S.autorange=v.autorange}var C=v._anchorAxis;if(C&&C.rangeslider){var F=C.rangeslider[v._name];F&&F.rangemode==="auto"&&(F.range=h(b,v)),C._input.rangeslider[v._name]=M.extendFlat({},F)}}function m(b,v,k){k||(k={}),b._m||b.setScale();var S=[],E=[],C=v.length,F=k.padded||!1,I=k.tozero&&(b.type==="linear"||b.type==="-"),D=b.type==="log",R=!1,O=k.vpadLinearized||!1,z,B,G,Q,X,j,re,ue,K;function te(se){if(Array.isArray(se))return R=!0,function(oe){return Math.max(Number(se[oe]||0),0)};var ae=Math.max(Number(se||0),0);return function(){return ae}}var Y=te((b._m>0?k.ppadplus:k.ppadminus)||k.ppad||0),H=te((b._m>0?k.ppadminus:k.ppadplus)||k.ppad||0),ee=te(k.vpadplus||k.vpad),ne=te(k.vpadminus||k.vpad);if(!R){if(ue=1/0,K=-1/0,D)for(z=0;z<C;z++)B=v[z],B<ue&&B>0&&(ue=B),B>K&&B<T&&(K=B);else for(z=0;z<C;z++)B=v[z],B<ue&&B>-T&&(ue=B),B>K&&B<T&&(K=B);v=[ue,K],C=2}var Z={tozero:I,extrapad:F};function q(se){G=v[se],f(G)&&(j=Y(se),re=H(se),O?(Q=b.c2l(G)-ne(se),X=b.c2l(G)+ee(se)):(ue=G-ne(se),K=G+ee(se),D&&ue<K/10&&(ue=K/10),Q=b.c2l(ue),X=b.c2l(K)),I&&(Q=Math.min(0,Q),X=Math.max(0,X)),A(Q)&&l(S,Q,re,Z),A(X)&&x(E,X,j,Z))}var ie=Math.min(6,C);for(z=0;z<ie;z++)q(z);for(z=C-1;z>=ie;z--)q(z);return{min:S,max:E,opts:k}}function l(b,v,k,S){u(b,v,k,S,_)}function x(b,v,k,S){u(b,v,k,S,g)}function u(b,v,k,S,E){for(var C=S.tozero,F=S.extrapad,I=!0,D=0;D<b.length&&I;D++){var R=b[D];if(E(R.val,v)&&R.pad>=k&&(R.extrapad||!F)){I=!1;break}else E(v,R.val)&&R.pad<=k&&(F||!R.extrapad)&&(b.splice(D,1),D--)}if(I){var O=C&&v===0;b.push({val:v,pad:O?0:k,extrapad:O?!1:F})}}function A(b){return f(b)&&Math.abs(b)<T}function _(b,v){return b<=v}function g(b,v){return b>=v}},{"../../components/drawing":389,"../../constants/numerical":491,"../../lib":515,"../../registry":647,"./axis_ids":570,"@plotly/d3":58,"fast-isnumeric":190}],566:[function(i,U,V){var w=i("@plotly/d3"),f=i("fast-isnumeric"),M=i("../../plots/plots"),T=i("../../registry"),e=i("../../lib"),a=e.strTranslate,n=i("../../lib/svg_text_utils"),r=i("../../components/titles"),t=i("../../components/color"),h=i("../../components/drawing"),s=i("./layout_attributes"),o=i("./clean_ticks"),y=i("../../constants/numerical"),d=y.ONEMAXYEAR,p=y.ONEAVGYEAR,c=y.ONEMINYEAR,m=y.ONEMAXQUARTER,l=y.ONEAVGQUARTER,x=y.ONEMINQUARTER,u=y.ONEMAXMONTH,A=y.ONEAVGMONTH,_=y.ONEMINMONTH,g=y.ONEWEEK,b=y.ONEDAY,v=b/2,k=y.ONEHOUR,S=y.ONEMIN,E=y.ONESEC,C=y.MINUS_SIGN,F=y.BADNUM,I={K:"zeroline"},D={K:"gridline",L:"path"},R={K:"minor-gridline",L:"path"},O={K:"tick",L:"path"},z={K:"tick",L:"text"},B={width:["x","r","l","xl","xr"],height:["y","t","b","yt","yb"],right:["r","xr"],left:["l","xl"],top:["t","yt"],bottom:["b","yb"]},G=i("../../constants/alignment"),Q=G.MID_SHIFT,X=G.CAP_SHIFT,j=G.LINE_SPACING,re=G.OPPOSITE_SIDE,ue=3,K=U.exports={};K.setConvert=i("./set_convert");var te=i("./axis_autotype"),Y=i("./axis_ids"),H=Y.idSort,ee=Y.isLinked;K.id2name=Y.id2name,K.name2id=Y.name2id,K.cleanId=Y.cleanId,K.list=Y.list,K.listIds=Y.listIds,K.getFromId=Y.getFromId,K.getFromTrace=Y.getFromTrace;var ne=i("./autorange");K.getAutoRange=ne.getAutoRange,K.findExtremes=ne.findExtremes;var Z=1e-4;function q(Pe){var ke=(Pe[1]-Pe[0])*Z;return[Pe[0]-ke,Pe[1]+ke]}K.coerceRef=function(Pe,ke,lt,ft,yt,Rt){var _t=ft.charAt(ft.length-1),Dt=lt._fullLayout._subplots[_t+"axis"],Jt=ft+"ref",fr={};return yt||(yt=Dt[0]||(typeof Rt=="string"?Rt:Rt[0])),Rt||(Rt=yt),Dt=Dt.concat(Dt.map(function(Rr){return Rr+" domain"})),fr[Jt]={valType:"enumerated",values:Dt.concat(Rt?typeof Rt=="string"?[Rt]:Rt:[]),dflt:yt},e.coerce(Pe,ke,fr,Jt)},K.getRefType=function(Pe){return Pe===void 0?Pe:Pe==="paper"?"paper":Pe==="pixel"?"pixel":/( domain)$/.test(Pe)?"domain":"range"},K.coercePosition=function(Pe,ke,lt,ft,yt,Rt){var _t,Dt,Jt=K.getRefType(ft);if(Jt!=="range")_t=e.ensureNumber,Dt=lt(yt,Rt);else{var fr=K.getFromId(ke,ft);Rt=fr.fraction2r(Rt),Dt=lt(yt,Rt),_t=fr.cleanPos}Pe[yt]=_t(Dt)},K.cleanPosition=function(Pe,ke,lt){var ft=lt==="paper"||lt==="pixel"?e.ensureNumber:K.getFromId(ke,lt).cleanPos;return ft(Pe)},K.redrawComponents=function(Pe,ke){ke=ke||K.listIds(Pe);var lt=Pe._fullLayout;function ft(yt,Rt,_t,Dt){for(var Jt=T.getComponentMethod(yt,Rt),fr={},Rr=0;Rr<ke.length;Rr++)for(var Sr=lt[K.id2name(ke[Rr])],Pr=Sr[_t],Jr=0;Jr<Pr.length;Jr++){var ur=Pr[Jr];if(!fr[ur]&&(Jt(Pe,ur),fr[ur]=1,Dt))return}}ft("annotations","drawOne","_annIndices"),ft("shapes","drawOne","_shapeIndices"),ft("images","draw","_imgIndices",!0),ft("selections","drawOne","_selectionIndices")};var ie=K.getDataConversions=function(Pe,ke,lt,ft){var yt,Rt=lt==="x"||lt==="y"||lt==="z"?lt:ft;if(Array.isArray(Rt)){if(yt={type:te(ft,void 0,{autotypenumbers:Pe._fullLayout.autotypenumbers}),_categories:[]},K.setConvert(yt),yt.type==="category")for(var _t=0;_t<ft.length;_t++)yt.d2c(ft[_t])}else yt=K.getFromTrace(Pe,ke,Rt);return yt?{d2c:yt.d2c,c2d:yt.c2d}:Rt==="ids"?{d2c:ae,c2d:ae}:{d2c:se,c2d:se}};function se(Pe){return+Pe}function ae(Pe){return String(Pe)}K.getDataToCoordFunc=function(Pe,ke,lt,ft){return ie(Pe,ke,lt,ft).d2c},K.counterLetter=function(Pe){var ke=Pe.charAt(0);if(ke==="x")return"y";if(ke==="y")return"x"},K.minDtick=function(Pe,ke,lt,ft){["log","category","multicategory"].indexOf(Pe.type)!==-1||!ft?Pe._minDtick=0:Pe._minDtick===void 0?(Pe._minDtick=ke,Pe._forceTick0=lt):Pe._minDtick&&((Pe._minDtick/ke+1e-6)%1<2e-6&&((lt-Pe._forceTick0)/ke%1+1.000001)%1<2e-6?(Pe._minDtick=ke,Pe._forceTick0=lt):((ke/Pe._minDtick+1e-6)%1>2e-6||((lt-Pe._forceTick0)/Pe._minDtick%1+1.000001)%1>2e-6)&&(Pe._minDtick=0))},K.saveRangeInitial=function(Pe,ke){for(var lt=K.list(Pe,"",!0),ft=!1,yt=0;yt<lt.length;yt++){var Rt=lt[yt],_t=Rt._rangeInitial===void 0,Dt=_t||!(Rt.range[0]===Rt._rangeInitial[0]&&Rt.range[1]===Rt._rangeInitial[1]);(_t&&Rt.autorange===!1||ke&&Dt)&&(Rt._rangeInitial=Rt.range.slice(),ft=!0)}return ft},K.saveShowSpikeInitial=function(Pe,ke){for(var lt=K.list(Pe,"",!0),ft=!1,yt="on",Rt=0;Rt<lt.length;Rt++){var _t=lt[Rt],Dt=_t._showSpikeInitial===void 0,Jt=Dt||_t.showspikes!==_t._showspikes;(Dt||ke&&Jt)&&(_t._showSpikeInitial=_t.showspikes,ft=!0),yt==="on"&&!_t.showspikes&&(yt="off")}return Pe._fullLayout._cartesianSpikesEnabled=yt,ft},K.autoBin=function(Pe,ke,lt,ft,yt,Rt){var _t=e.aggNums(Math.min,null,Pe),Dt=e.aggNums(Math.max,null,Pe);if(ke.type==="category"||ke.type==="multicategory")return{start:_t-.5,end:Dt+.5,size:Math.max(1,Math.round(Rt)||1),_dataSpan:Dt-_t};yt||(yt=ke.calendar);var Jt;if(ke.type==="log"?Jt={type:"linear",range:[_t,Dt]}:Jt={type:ke.type,range:e.simpleMap([_t,Dt],ke.c2r,0,yt),calendar:yt},K.setConvert(Jt),Rt=Rt&&o.dtick(Rt,Jt.type),Rt)Jt.dtick=Rt,Jt.tick0=o.tick0(void 0,Jt.type,yt);else{var fr;if(lt)fr=(Dt-_t)/lt;else{var Rr=e.distinctVals(Pe),Sr=Math.pow(10,Math.floor(Math.log(Rr.minDiff)/Math.LN10)),Pr=Sr*e.roundUp(Rr.minDiff/Sr,[.9,1.9,4.9,9.9],!0);fr=Math.max(Pr,2*e.stdev(Pe)/Math.pow(Pe.length,ft?.25:.4)),f(fr)||(fr=1)}K.autoTicks(Jt,fr)}var Jr=Jt.dtick,ur=K.tickIncrement(K.tickFirst(Jt),Jr,"reverse",yt),_r,Br;if(typeof Jr=="number")ur=oe(ur,Pe,Jt,_t,Dt),Br=1+Math.floor((Dt-ur)/Jr),_r=ur+Br*Jr;else for(Jt.dtick.charAt(0)==="M"&&(ur=be(ur,Pe,Jr,_t,yt)),_r=ur,Br=0;_r<=Dt;)_r=K.tickIncrement(_r,Jr,!1,yt),Br++;return{start:ke.c2r(ur,0,yt),end:ke.c2r(_r,0,yt),size:Jr,_dataSpan:Dt-_t}};function oe(Pe,ke,lt,ft,yt){var Rt=0,_t=0,Dt=0,Jt=0;function fr(Jr){return(1+(Jr-Pe)*100/lt.dtick)%100<2}for(var Rr=0;Rr<ke.length;Rr++)ke[Rr]%1===0?Dt++:f(ke[Rr])||Jt++,fr(ke[Rr])&&Rt++,fr(ke[Rr]+lt.dtick/2)&&_t++;var Sr=ke.length-Jt;if(Dt===Sr&&lt.type!=="date")lt.dtick<1?Pe=ft-.5*lt.dtick:(Pe-=.5,Pe+lt.dtick<ft&&(Pe+=lt.dtick));else if(_t<Sr*.1&&(Rt>Sr*.3||fr(ft)||fr(yt))){var Pr=lt.dtick/2;Pe+=Pe+Pr<ft?Pr:-Pr}return Pe}function be(Pe,ke,lt,ft,yt){var Rt=e.findExactDates(ke,yt),_t=.8;if(Rt.exactDays>_t){var Dt=Number(lt.substr(1));Rt.exactYears>_t&&Dt%12===0?Pe=K.tickIncrement(Pe,"M6","reverse")+b*1.5:Rt.exactMonths>_t?Pe=K.tickIncrement(Pe,"M1","reverse")+b*15.5:Pe-=v;var Jt=K.tickIncrement(Pe,lt);if(Jt<=ft)return Jt}return Pe}K.prepMinorTicks=function(Pe,ke,lt){if(!ke.minor.dtick){delete Pe.dtick;var ft=ke.dtick&&f(ke._tmin),yt;if(ft){var Rt=K.tickIncrement(ke._tmin,ke.dtick,!0);yt=[ke._tmin,Rt*.99+ke._tmin*.01]}else{var _t=e.simpleMap(ke.range,ke.r2l);yt=[_t[0],.8*_t[0]+.2*_t[1]]}if(Pe.range=e.simpleMap(yt,ke.l2r),Pe._isMinor=!0,K.prepTicks(Pe,lt),ft){var Dt=f(ke.dtick),Jt=f(Pe.dtick),fr=Dt?ke.dtick:+ke.dtick.substring(1),Rr=Jt?Pe.dtick:+Pe.dtick.substring(1);Dt&&Jt?ce(fr,Rr)?fr===2*g&&Rr===2*b&&(Pe.dtick=g):fr===2*g&&Rr===3*b?Pe.dtick=g:fr===g&&!(ke._input.minor||{}).nticks?Pe.dtick=b:de(fr/Rr,2.5)?Pe.dtick=fr/2:Pe.dtick=fr:String(ke.dtick).charAt(0)==="M"?Jt?Pe.dtick="M1":ce(fr,Rr)?fr>=12&&Rr===2&&(Pe.dtick="M3"):Pe.dtick=ke.dtick:String(Pe.dtick).charAt(0)==="L"?String(ke.dtick).charAt(0)==="L"?ce(fr,Rr)||(Pe.dtick=de(fr/Rr,2.5)?ke.dtick/2:ke.dtick):Pe.dtick="D1":Pe.dtick==="D2"&&+ke.dtick>1&&(Pe.dtick=1)}Pe.range=ke.range}ke.minor._tick0Init===void 0&&(Pe.tick0=ke.tick0)};function ce(Pe,ke){return Math.abs((Pe/ke+.5)%1-.5)<.001}function de(Pe,ke){return Math.abs(Pe/ke-1)<.001}K.prepTicks=function(Pe,ke){var lt=e.simpleMap(Pe.range,Pe.r2l,void 0,void 0,ke);if(Pe.tickmode==="auto"||!Pe.dtick){var ft=Pe.nticks,yt;ft||(Pe.type==="category"||Pe.type==="multicategory"?(yt=Pe.tickfont?e.bigFont(Pe.tickfont.size||12):15,ft=Pe._length/yt):(yt=Pe._id.charAt(0)==="y"?40:80,ft=e.constrain(Pe._length/yt,4,9)+1),Pe._name==="radialaxis"&&(ft*=2)),Pe.minor&&Pe.minor.tickmode!=="array"||Pe.tickmode==="array"&&(ft*=100),Pe._roughDTick=Math.abs(lt[1]-lt[0])/ft,K.autoTicks(Pe,Pe._roughDTick),Pe._minDtick>0&&Pe.dtick<Pe._minDtick*2&&(Pe.dtick=Pe._minDtick,Pe.tick0=Pe.l2r(Pe._forceTick0))}Pe.ticklabelmode==="period"&&ge(Pe),Pe.tick0||(Pe.tick0=Pe.type==="date"?"2000-01-01":0),Pe.type==="date"&&Pe.dtick<.1&&(Pe.dtick=.1),je(Pe)};function ye(Pe){return+Pe.substring(1)}function ge(Pe){var ke;function lt(){return!(f(Pe.dtick)||Pe.dtick.charAt(0)!=="M")}var ft=lt(),yt=K.getTickFormat(Pe);if(yt){var Rt=Pe._dtickInit!==Pe.dtick;/%[fLQsSMX]/.test(yt)||(/%[HI]/.test(yt)?(ke=k,Rt&&!ft&&Pe.dtick<k&&(Pe.dtick=k)):/%p/.test(yt)?(ke=v,Rt&&!ft&&Pe.dtick<v&&(Pe.dtick=v)):/%[Aadejuwx]/.test(yt)?(ke=b,Rt&&!ft&&Pe.dtick<b&&(Pe.dtick=b)):/%[UVW]/.test(yt)?(ke=g,Rt&&!ft&&Pe.dtick<g&&(Pe.dtick=g)):/%[Bbm]/.test(yt)?(ke=A,Rt&&(ft?ye(Pe.dtick)<1:Pe.dtick<_)&&(Pe.dtick="M1")):/%[q]/.test(yt)?(ke=l,Rt&&(ft?ye(Pe.dtick)<3:Pe.dtick<x)&&(Pe.dtick="M3")):/%[Yy]/.test(yt)&&(ke=p,Rt&&(ft?ye(Pe.dtick)<12:Pe.dtick<c)&&(Pe.dtick="M12")))}ft=lt(),ft&&Pe.tick0===Pe._dowTick0&&(Pe.tick0=Pe._rawTick0),Pe._definedDelta=ke}function me(Pe,ke,lt){for(var ft=0;ft<Pe.length;ft++){var yt=Pe[ft].value,Rt=ft,_t=ft+1;ft<Pe.length-1?(Rt=ft,_t=ft+1):ft>0?(Rt=ft-1,_t=ft):(Rt=ft,_t=ft);var Dt=Pe[Rt].value,Jt=Pe[_t].value,fr=Math.abs(Jt-Dt),Rr=lt||fr,Sr=0;Rr>=c?fr>=c&&fr<=d?Sr=fr:Sr=p:lt===l&&Rr>=x?fr>=x&&fr<=m?Sr=fr:Sr=l:Rr>=_?fr>=_&&fr<=u?Sr=fr:Sr=A:lt===g&&Rr>=g?Sr=g:Rr>=b?Sr=b:lt===v&&Rr>=v?Sr=v:lt===k&&Rr>=k&&(Sr=k);var Pr;Sr>=fr&&(Sr=fr,Pr=!0);var Jr=yt+Sr;if(ke.rangebreaks&&Sr>0){for(var ur=84,_r=0,Br=0;Br<ur;Br++){var Yr=(Br+.5)/ur;ke.maskBreaks(yt*(1-Yr)+Yr*Jr)!==F&&_r++}Sr*=_r/ur,Sr||(Pe[ft].drop=!0),Pr&&fr>g&&(Sr=fr)}(Sr>0||ft===0)&&(Pe[ft].periodX=yt+Sr/2)}}K.calcTicks=function(ke,lt){for(var ft=ke.type,yt=ke.calendar,Rt=ke.ticklabelstep,_t=ke.ticklabelmode==="period",Dt=e.simpleMap(ke.range,ke.r2l,void 0,void 0,lt),Jt=Dt[1]<Dt[0],fr=Math.min(Dt[0],Dt[1]),Rr=Math.max(Dt[0],Dt[1]),Sr=Math.max(1e3,ke._length||0),Pr=[],Jr=[],ur=[],_r=[],Br=ke.minor&&(ke.minor.ticks||ke.minor.showgrid),Yr=1;Yr>=(Br?0:1);Yr--){var Dr=!Yr;Yr?(ke._dtickInit=ke.dtick,ke._tick0Init=ke.tick0):(ke.minor._dtickInit=ke.minor.dtick,ke.minor._tick0Init=ke.minor.tick0);var it=Yr?ke:e.extendFlat({},ke,ke.minor);if(Dr?K.prepMinorTicks(it,ke,lt):K.prepTicks(it,lt),it.tickmode==="array"){Yr?(ur=[],Pr=Se(ke)):(_r=[],Jr=Se(ke));continue}var zt=q(Dt),qt=zt[0],hr=zt[1],Ur=f(it.dtick),Gr=ft==="log"&&!(Ur||it.dtick.charAt(0)==="L"),Ir=K.tickFirst(it,lt);if(Yr){if(ke._tmin=Ir,Ir<qt!==Jt)break;(ft==="category"||ft==="multicategory")&&(hr=Jt?Math.max(-.5,hr):Math.min(ke._categories.length-.5,hr))}var Cr=null,Kr=Ir,Cn;if(Yr){var yn;Ur?yn=ke.dtick:ft==="date"?typeof ke.dtick=="string"&&ke.dtick.charAt(0)==="M"&&(yn=A*ke.dtick.substring(1)):yn=ke._roughDTick,Cn=Math.round((ke.r2l(Kr)-ke.r2l(ke.tick0))/yn)-1}var Yn=it.dtick;for(it.rangebreaks&&it._tick0Init!==it.tick0&&(Kr=vt(Kr,ke),Jt||(Kr=K.tickIncrement(Kr,Yn,!Jt,yt))),Yr&&_t&&(Kr=K.tickIncrement(Kr,Yn,!Jt,yt),Cn--);Jt?Kr>=hr:Kr<=hr;Kr=K.tickIncrement(Kr,Yn,Jt,yt)){if(Yr&&Cn++,it.rangebreaks&&!Jt){if(Kr<qt)continue;if(it.maskBreaks(Kr)===F&&vt(Kr,it)>=Rr)break}if(ur.length>Sr||Kr===Cr)break;Cr=Kr;var In={value:Kr};Yr?(Gr&&Kr!==(Kr|0)&&(In.simpleLabel=!0),Rt>1&&Cn%Rt&&(In.skipLabel=!0),ur.push(In)):(In.minor=!0,_r.push(In))}}if(Br){var Jn=ke.minor.ticks==="inside"&&ke.ticks==="outside"||ke.minor.ticks==="outside"&&ke.ticks==="inside";if(!Jn){for(var Zn=ur.map(function(Xt){return Xt.value}),ba=[],Pa=0;Pa<_r.length;Pa++){var xi=_r[Pa],Ka=xi.value;if(Zn.indexOf(Ka)===-1){for(var ti=!1,$a=0;!ti&&$a<ur.length;$a++)1e7+ur[$a].value===1e7+Ka&&(ti=!0);ti||ba.push(xi)}}_r=ba}}_t&&me(ur,ke,ke._definedDelta);var kr;if(ke.rangebreaks){var bn=ke._id.charAt(0)==="y",gn=1;ke.tickmode==="auto"&&(gn=ke.tickfont?ke.tickfont.size:12);var Ln=NaN;for(kr=ur.length-1;kr>-1;kr--){if(ur[kr].drop){ur.splice(kr,1);continue}ur[kr].value=vt(ur[kr].value,ke);var qn=ke.c2p(ur[kr].value);(bn?Ln>qn-gn:Ln<qn+gn)?ur.splice(Jt?kr+1:kr,1):Ln=qn}}ht(ke)&&Math.abs(Dt[1]-Dt[0])===360&&ur.pop(),ke._tmax=(ur[ur.length-1]||{}).value,ke._prevDateHead="",ke._inCalcTicks=!0;var da,oa=function(Xt){Xt.text="",ke._prevDateHead=da};ur=ur.concat(_r);var Bn,$n;for(kr=0;kr<ur.length;kr++){var Xa=ur[kr].minor,gi=ur[kr].value;Xa?Jr.push({x:gi,minor:!0}):(da=ke._prevDateHead,Bn=K.tickText(ke,gi,!1,ur[kr].simpleLabel),$n=ur[kr].periodX,$n!==void 0&&(Bn.periodX=$n,($n>Rr||$n<fr)&&($n>Rr&&(Bn.periodX=Rr),$n<fr&&(Bn.periodX=fr),oa(Bn))),ur[kr].skipLabel&&oa(Bn),Pr.push(Bn))}return Pr=Pr.concat(Jr),ke._inCalcTicks=!1,_t&&Pr.length&&(Pr[0].noTick=!0),Pr};function Se(Pe){var ke=e.simpleMap(Pe.range,Pe.r2l),lt=q(ke),ft=Math.min(lt[0],lt[1]),yt=Math.max(lt[0],lt[1]),Rt=Pe.type==="category"?Pe.d2l_noadd:Pe.d2l;Pe.type==="log"&&String(Pe.dtick).charAt(0)!=="L"&&(Pe.dtick="L"+Math.pow(10,Math.floor(Math.min(Pe.range[0],Pe.range[1]))-1));for(var _t=[],Dt=0;Dt<=1;Dt++)if(!(Dt&&!Pe.minor)){var Jt=Dt?Pe.minor.tickvals:Pe.tickvals,fr=Dt?[]:Pe.ticktext;if(!!Jt){Array.isArray(fr)||(fr=[]);for(var Rr=0;Rr<Jt.length;Rr++){var Sr=Rt(Jt[Rr]);if(Sr>ft&&Sr<yt){var Pr=fr[Rr]===void 0?K.tickText(Pe,Sr):xt(Pe,Sr,String(fr[Rr]));Dt&&(Pr.minor=!0,Pr.text=""),_t.push(Pr)}}}}return Pe.rangebreaks&&(_t=_t.filter(function(Jr){return Pe.maskBreaks(Jr.x)!==F})),_t}var Le=[2,5,10],Oe=[1,2,3,6,12],we=[1,2,5,10,15,30],Ce=[1,2,3,7,14],Ke=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],Ye=[-.301,0,.301,.699,1],Fe=[15,30,45,90,180];function Re(Pe,ke,lt){return ke*e.roundUp(Pe/ke,lt)}K.autoTicks=function(Pe,ke,lt){var ft;function yt(Sr){return Math.pow(Sr,Math.floor(Math.log(ke)/Math.LN10))}if(Pe.type==="date"){Pe.tick0=e.dateTick0(Pe.calendar,0);var Rt=2*ke;if(Rt>p)ke/=p,ft=yt(10),Pe.dtick="M"+12*Re(ke,ft,Le);else if(Rt>A)ke/=A,Pe.dtick="M"+Re(ke,1,Oe);else if(Rt>b){if(Pe.dtick=Re(ke,b,Pe._hasDayOfWeekBreaks?[1,2,7,14]:Ce),!lt){var _t=K.getTickFormat(Pe),Dt=Pe.ticklabelmode==="period";Dt&&(Pe._rawTick0=Pe.tick0),/%[uVW]/.test(_t)?Pe.tick0=e.dateTick0(Pe.calendar,2):Pe.tick0=e.dateTick0(Pe.calendar,1),Dt&&(Pe._dowTick0=Pe.tick0)}}else Rt>k?Pe.dtick=Re(ke,k,Oe):Rt>S?Pe.dtick=Re(ke,S,we):Rt>E?Pe.dtick=Re(ke,E,we):(ft=yt(10),Pe.dtick=Re(ke,ft,Le))}else if(Pe.type==="log"){Pe.tick0=0;var Jt=e.simpleMap(Pe.range,Pe.r2l);if(Pe._isMinor&&(ke*=1.5),ke>.7)Pe.dtick=Math.ceil(ke);else if(Math.abs(Jt[1]-Jt[0])<1){var fr=1.5*Math.abs((Jt[1]-Jt[0])/ke);ke=Math.abs(Math.pow(10,Jt[1])-Math.pow(10,Jt[0]))/fr,ft=yt(10),Pe.dtick="L"+Re(ke,ft,Le)}else Pe.dtick=ke>.3?"D2":"D1"}else Pe.type==="category"||Pe.type==="multicategory"?(Pe.tick0=0,Pe.dtick=Math.ceil(Math.max(ke,1))):ht(Pe)?(Pe.tick0=0,ft=1,Pe.dtick=Re(ke,ft,Fe)):(Pe.tick0=0,ft=yt(10),Pe.dtick=Re(ke,ft,Le));if(Pe.dtick===0&&(Pe.dtick=1),!f(Pe.dtick)&&typeof Pe.dtick!="string"){var Rr=Pe.dtick;throw Pe.dtick=1,"ax.dtick error: "+String(Rr)}};function je(Pe){var ke=Pe.dtick;if(Pe._tickexponent=0,!f(ke)&&typeof ke!="string"&&(ke=1),(Pe.type==="category"||Pe.type==="multicategory")&&(Pe._tickround=null),Pe.type==="date"){var lt=Pe.r2l(Pe.tick0),ft=Pe.l2r(lt).replace(/(^-|i)/g,""),yt=ft.length;if(String(ke).charAt(0)==="M")yt>10||ft.substr(5)!=="01-01"?Pe._tickround="d":Pe._tickround=+ke.substr(1)%12===0?"y":"m";else if(ke>=b&&yt<=10||ke>=b*15)Pe._tickround="d";else if(ke>=S&&yt<=16||ke>=k)Pe._tickround="M";else if(ke>=E&&yt<=19||ke>=S)Pe._tickround="S";else{var Rt=Pe.l2r(lt+ke).replace(/^-/,"").length;Pe._tickround=Math.max(yt,Rt)-20,Pe._tickround<0&&(Pe._tickround=4)}}else if(f(ke)||ke.charAt(0)==="L"){var _t=Pe.range.map(Pe.r2d||Number);f(ke)||(ke=Number(ke.substr(1))),Pe._tickround=2-Math.floor(Math.log(ke)/Math.LN10+.01);var Dt=Math.max(Math.abs(_t[0]),Math.abs(_t[1])),Jt=Math.floor(Math.log(Dt)/Math.LN10+.01),fr=Pe.minexponent===void 0?3:Pe.minexponent;Math.abs(Jt)>fr&&(ot(Pe.exponentformat)&&!Ge(Jt)?Pe._tickexponent=3*Math.round((Jt-1)/3):Pe._tickexponent=Jt)}else Pe._tickround=null}K.tickIncrement=function(Pe,ke,lt,ft){var yt=lt?-1:1;if(f(ke))return e.increment(Pe,yt*ke);var Rt=ke.charAt(0),_t=yt*Number(ke.substr(1));if(Rt==="M")return e.incrementMonth(Pe,_t,ft);if(Rt==="L")return Math.log(Math.pow(10,Pe)+_t)/Math.LN10;if(Rt==="D"){var Dt=ke==="D2"?Ye:Ke,Jt=Pe+yt*.01,fr=e.roundUp(e.mod(Jt,1),Dt,lt);return Math.floor(Jt)+Math.log(w.round(Math.pow(10,fr),1))/Math.LN10}throw"unrecognized dtick "+String(ke)},K.tickFirst=function(Pe,ke){var lt=Pe.r2l||Number,ft=e.simpleMap(Pe.range,lt,void 0,void 0,ke),yt=ft[1]<ft[0],Rt=yt?Math.floor:Math.ceil,_t=q(ft)[0],Dt=Pe.dtick,Jt=lt(Pe.tick0);if(f(Dt)){var fr=Rt((_t-Jt)/Dt)*Dt+Jt;return(Pe.type==="category"||Pe.type==="multicategory")&&(fr=e.constrain(fr,0,Pe._categories.length-1)),fr}var Rr=Dt.charAt(0),Sr=Number(Dt.substr(1));if(Rr==="M"){for(var Pr=0,Jr=Jt,ur,_r,Br;Pr<10;){if(ur=K.tickIncrement(Jr,Dt,yt,Pe.calendar),(ur-_t)*(Jr-_t)<=0)return yt?Math.min(Jr,ur):Math.max(Jr,ur);_r=(_t-(Jr+ur)/2)/(ur-Jr),Br=Rr+(Math.abs(Math.round(_r))||1)*Sr,Jr=K.tickIncrement(Jr,Br,_r<0?!yt:yt,Pe.calendar),Pr++}return e.error("tickFirst did not converge",Pe),Jr}else{if(Rr==="L")return Math.log(Rt((Math.pow(10,_t)-Jt)/Sr)*Sr+Jt)/Math.LN10;if(Rr==="D"){var Yr=Dt==="D2"?Ye:Ke,Dr=e.roundUp(e.mod(_t,1),Yr,yt);return Math.floor(_t)+Math.log(w.round(Math.pow(10,Dr),1))/Math.LN10}else throw"unrecognized dtick "+String(Dt)}},K.tickText=function(Pe,ke,lt,ft){var yt=xt(Pe,ke),Rt=Pe.tickmode==="array",_t=lt||Rt,Dt=Pe.type,Jt=Dt==="category"?Pe.d2l_noadd:Pe.d2l,fr;if(Rt&&Array.isArray(Pe.ticktext)){var Rr=e.simpleMap(Pe.range,Pe.r2l),Sr=(Math.abs(Rr[1]-Rr[0])-(Pe._lBreaks||0))/1e4;for(fr=0;fr<Pe.ticktext.length&&!(Math.abs(ke-Jt(Pe.tickvals[fr]))<Sr);fr++);if(fr<Pe.ticktext.length)return yt.text=String(Pe.ticktext[fr]),yt}function Pr(_r){if(_r===void 0)return!0;if(lt)return _r==="none";var Br={first:Pe._tmin,last:Pe._tmax}[_r];return _r!=="all"&&ke!==Br}var Jr=lt?"never":Pe.exponentformat!=="none"&&Pr(Pe.showexponent)?"hide":"";if(Dt==="date"?Nt(Pe,yt,lt,_t):Dt==="log"?tr(Pe,yt,lt,_t,Jr):Dt==="category"?Ht(Pe,yt):Dt==="multicategory"?Pt(Pe,yt,lt):ht(Pe)?Ut(Pe,yt,lt,_t,Jr):$t(Pe,yt,lt,_t,Jr),ft||(Pe.tickprefix&&!Pr(Pe.showtickprefix)&&(yt.text=Pe.tickprefix+yt.text),Pe.ticksuffix&&!Pr(Pe.showticksuffix)&&(yt.text+=Pe.ticksuffix)),Pe.tickson==="boundaries"||Pe.showdividers){var ur=function(_r){var Br=Pe.l2p(_r);return Br>=0&&Br<=Pe._length?_r:null};yt.xbnd=[ur(yt.x-.5),ur(yt.x+Pe.dtick-.5)]}return yt},K.hoverLabelText=function(Pe,ke,lt){lt&&(Pe=e.extendFlat({},Pe,{hoverformat:lt}));var ft=Array.isArray(ke)?ke[0]:ke,yt=Array.isArray(ke)?ke[1]:void 0;if(yt!==void 0&&yt!==ft)return K.hoverLabelText(Pe,ft,lt)+" - "+K.hoverLabelText(Pe,yt,lt);var Rt=Pe.type==="log"&&ft<=0,_t=K.tickText(Pe,Pe.c2l(Rt?-ft:ft),"hover").text;return Rt?ft===0?"0":C+_t:_t};function xt(Pe,ke,lt){var ft=Pe.tickfont||{};return{x:ke,dx:0,dy:0,text:lt||"",fontSize:ft.size,font:ft.family,fontColor:ft.color}}function Nt(Pe,ke,lt,ft){var yt=Pe._tickround,Rt=lt&&Pe.hoverformat||K.getTickFormat(Pe);ft&&(f(yt)?yt=4:yt={y:"m",m:"d",d:"M",M:"S",S:4}[yt]);var _t=e.formatDate(ke.x,Rt,yt,Pe._dateFormat,Pe.calendar,Pe._extraFormat),Dt,Jt=_t.indexOf(`
`);if(Jt!==-1&&(Dt=_t.substr(Jt+1),_t=_t.substr(0,Jt)),ft&&(_t==="00:00:00"||_t==="00:00"?(_t=Dt,Dt=""):_t.length===8&&(_t=_t.replace(/:00$/,""))),Dt)if(lt)yt==="d"?_t+=", "+Dt:_t=Dt+(_t?", "+_t:"");else if(!Pe._inCalcTicks||Pe._prevDateHead!==Dt)Pe._prevDateHead=Dt,_t+="<br>"+Dt;else{var fr=kt(Pe),Rr=Pe._trueSide||Pe.side;(!fr&&Rr==="top"||fr&&Rr==="bottom")&&(_t+="<br> ")}ke.text=_t}function tr(Pe,ke,lt,ft,yt){var Rt=Pe.dtick,_t=ke.x,Dt=Pe.tickformat,Jt=typeof Rt=="string"&&Rt.charAt(0);if(yt==="never"&&(yt=""),ft&&Jt!=="L"&&(Rt="L3",Jt="L"),Dt||Jt==="L")ke.text=Me(Math.pow(10,_t),Pe,yt,ft);else if(f(Rt)||Jt==="D"&&e.mod(_t+.01,1)<.1){var fr=Math.round(_t),Rr=Math.abs(fr),Sr=Pe.exponentformat;Sr==="power"||ot(Sr)&&Ge(fr)?(fr===0?ke.text=1:fr===1?ke.text="10":ke.text="10<sup>"+(fr>1?"":C)+Rr+"</sup>",ke.fontSize*=1.25):(Sr==="e"||Sr==="E")&&Rr>2?ke.text="1"+Sr+(fr>0?"+":C)+Rr:(ke.text=Me(Math.pow(10,_t),Pe,"","fakehover"),Rt==="D1"&&Pe._id.charAt(0)==="y"&&(ke.dy-=ke.fontSize/6))}else if(Jt==="D")ke.text=String(Math.round(Math.pow(10,e.mod(_t,1)))),ke.fontSize*=.75;else throw"unrecognized dtick "+String(Rt);if(Pe.dtick==="D1"){var Pr=String(ke.text).charAt(0);(Pr==="0"||Pr==="1")&&(Pe._id.charAt(0)==="y"?ke.dx-=ke.fontSize/4:(ke.dy+=ke.fontSize/2,ke.dx+=(Pe.range[1]>Pe.range[0]?1:-1)*ke.fontSize*(_t<0?.5:.25)))}}function Ht(Pe,ke){var lt=Pe._categories[Math.round(ke.x)];lt===void 0&&(lt=""),ke.text=String(lt)}function Pt(Pe,ke,lt){var ft=Math.round(ke.x),yt=Pe._categories[ft]||[],Rt=yt[1]===void 0?"":String(yt[1]),_t=yt[0]===void 0?"":String(yt[0]);lt?ke.text=_t+" - "+Rt:(ke.text=Rt,ke.text2=_t)}function $t(Pe,ke,lt,ft,yt){yt==="never"?yt="":Pe.showexponent==="all"&&Math.abs(ke.x/Pe.dtick)<1e-6&&(yt="hide"),ke.text=Me(ke.x,Pe,yt,ft)}function Ut(Pe,ke,lt,ft,yt){if(Pe.thetaunit==="radians"&&!lt){var Rt=ke.x/180;if(Rt===0)ke.text="0";else{var _t=Lt(Rt);if(_t[1]>=100)ke.text=Me(e.deg2rad(ke.x),Pe,yt,ft);else{var Dt=ke.x<0;_t[1]===1?_t[0]===1?ke.text="\u03C0":ke.text=_t[0]+"\u03C0":ke.text=["<sup>",_t[0],"</sup>","\u2044","<sub>",_t[1],"</sub>","\u03C0"].join(""),Dt&&(ke.text=C+ke.text)}}}else ke.text=Me(ke.x,Pe,yt,ft)}function Lt(Pe){function ke(Dt,Jt){return Math.abs(Dt-Jt)<=1e-6}function lt(Dt,Jt){return ke(Jt,0)?Dt:lt(Jt,Dt%Jt)}function ft(Dt){for(var Jt=1;!ke(Math.round(Dt*Jt)/Jt,Dt);)Jt*=10;return Jt}var yt=ft(Pe),Rt=Pe*yt,_t=Math.abs(lt(Rt,yt));return[Math.round(Rt/_t),Math.round(yt/_t)]}var We=["f","p","n","\u03BC","m","","k","M","G","T"];function ot(Pe){return Pe==="SI"||Pe==="B"}function Ge(Pe){return Pe>14||Pe<-15}function Me(Pe,ke,lt,ft){var yt=Pe<0,Rt=ke._tickround,_t=lt||ke.exponentformat||"B",Dt=ke._tickexponent,Jt=K.getTickFormat(ke),fr=ke.separatethousands;if(ft){var Rr={exponentformat:_t,minexponent:ke.minexponent,dtick:ke.showexponent==="none"?ke.dtick:f(Pe)&&Math.abs(Pe)||1,range:ke.showexponent==="none"?ke.range.map(ke.r2d):[0,Pe||1]};je(Rr),Rt=(Number(Rr._tickround)||0)+4,Dt=Rr._tickexponent,ke.hoverformat&&(Jt=ke.hoverformat)}if(Jt)return ke._numFormat(Jt)(Pe).replace(/-/g,C);var Sr=Math.pow(10,-Rt)/2;if(_t==="none"&&(Dt=0),Pe=Math.abs(Pe),Pe<Sr)Pe="0",yt=!1;else{if(Pe+=Sr,Dt&&(Pe*=Math.pow(10,-Dt),Rt+=Dt),Rt===0)Pe=String(Math.floor(Pe));else if(Rt<0){Pe=String(Math.round(Pe)),Pe=Pe.substr(0,Pe.length+Rt);for(var Pr=Rt;Pr<0;Pr++)Pe+="0"}else{Pe=String(Pe);var Jr=Pe.indexOf(".")+1;Jr&&(Pe=Pe.substr(0,Jr+Rt).replace(/\.?0+$/,""))}Pe=e.numSeparate(Pe,ke._separators,fr)}if(Dt&&_t!=="hide"){ot(_t)&&Ge(Dt)&&(_t="power");var ur;Dt<0?ur=C+-Dt:_t!=="power"?ur="+"+Dt:ur=String(Dt),_t==="e"||_t==="E"?Pe+=_t+ur:_t==="power"?Pe+="\xD710<sup>"+ur+"</sup>":_t==="B"&&Dt===9?Pe+="B":ot(_t)&&(Pe+=We[Dt/3+5])}return yt?C+Pe:Pe}K.getTickFormat=function(Pe){var ke;function lt(Jt){return typeof Jt!="string"?Jt:Number(Jt.replace("M",""))*A}function ft(Jt,fr){var Rr=["L","D"];if(typeof Jt==typeof fr){if(typeof Jt=="number")return Jt-fr;var Sr=Rr.indexOf(Jt.charAt(0)),Pr=Rr.indexOf(fr.charAt(0));return Sr===Pr?Number(Jt.replace(/(L|D)/g,""))-Number(fr.replace(/(L|D)/g,"")):Sr-Pr}else return typeof Jt=="number"?1:-1}function yt(Jt,fr,Rr){var Sr=Rr||function(ur){return ur},Pr=fr[0],Jr=fr[1];return(!Pr&&typeof Pr!="number"||Sr(Pr)<=Sr(Jt))&&(!Jr&&typeof Jr!="number"||Sr(Jr)>=Sr(Jt))}function Rt(Jt,fr){var Rr=fr[0]===null,Sr=fr[1]===null,Pr=ft(Jt,fr[0])>=0,Jr=ft(Jt,fr[1])<=0;return(Rr||Pr)&&(Sr||Jr)}var _t,Dt;if(Pe.tickformatstops&&Pe.tickformatstops.length>0)switch(Pe.type){case"date":case"linear":{for(ke=0;ke<Pe.tickformatstops.length;ke++)if(Dt=Pe.tickformatstops[ke],Dt.enabled&&yt(Pe.dtick,Dt.dtickrange,lt)){_t=Dt;break}break}case"log":{for(ke=0;ke<Pe.tickformatstops.length;ke++)if(Dt=Pe.tickformatstops[ke],Dt.enabled&&Rt(Pe.dtick,Dt.dtickrange)){_t=Dt;break}break}}return _t?_t.value:Pe.tickformat},K.getSubplots=function(Pe,ke){var lt=Pe._fullLayout._subplots,ft=lt.cartesian.concat(lt.gl2d||[]),yt=ke?K.findSubplotsWithAxis(ft,ke):ft;return yt.sort(function(Rt,_t){var Dt=Rt.substr(1).split("y"),Jt=_t.substr(1).split("y");return Dt[0]===Jt[0]?+Dt[1]-+Jt[1]:+Dt[0]-+Jt[0]}),yt},K.findSubplotsWithAxis=function(Pe,ke){for(var lt=new RegExp(ke._id.charAt(0)==="x"?"^"+ke._id+"y":ke._id+"$"),ft=[],yt=0;yt<Pe.length;yt++){var Rt=Pe[yt];lt.test(Rt)&&ft.push(Rt)}return ft},K.makeClipPaths=function(Pe){var ke=Pe._fullLayout;if(!ke._hasOnlyLargeSploms){var lt={_offset:0,_length:ke.width,_id:""},ft={_offset:0,_length:ke.height,_id:""},yt=K.list(Pe,"x",!0),Rt=K.list(Pe,"y",!0),_t=[],Dt,Jt;for(Dt=0;Dt<yt.length;Dt++)for(_t.push({x:yt[Dt],y:ft}),Jt=0;Jt<Rt.length;Jt++)Dt===0&&_t.push({x:lt,y:Rt[Jt]}),_t.push({x:yt[Dt],y:Rt[Jt]});var fr=ke._clips.selectAll(".axesclip").data(_t,function(Rr){return Rr.x._id+Rr.y._id});fr.enter().append("clipPath").classed("axesclip",!0).attr("id",function(Rr){return"clip"+ke._uid+Rr.x._id+Rr.y._id}).append("rect"),fr.exit().remove(),fr.each(function(Rr){w.select(this).select("rect").attr({x:Rr.x._offset||0,y:Rr.y._offset||0,width:Rr.x._length||1,height:Rr.y._length||1})})}},K.draw=function(Pe,ke,lt){var ft=Pe._fullLayout;ke==="redraw"&&ft._paper.selectAll("g.subplot").each(function(Rt){var _t=Rt[0],Dt=ft._plots[_t];if(Dt){var Jt=Dt.xaxis,fr=Dt.yaxis;Dt.xaxislayer.selectAll("."+Jt._id+"tick").remove(),Dt.yaxislayer.selectAll("."+fr._id+"tick").remove(),Dt.xaxislayer.selectAll("."+Jt._id+"tick2").remove(),Dt.yaxislayer.selectAll("."+fr._id+"tick2").remove(),Dt.xaxislayer.selectAll("."+Jt._id+"divider").remove(),Dt.yaxislayer.selectAll("."+fr._id+"divider").remove(),Dt.minorGridlayer&&Dt.minorGridlayer.selectAll("path").remove(),Dt.gridlayer&&Dt.gridlayer.selectAll("path").remove(),Dt.zerolinelayer&&Dt.zerolinelayer.selectAll("path").remove(),ft._infolayer.select(".g-"+Jt._id+"title").remove(),ft._infolayer.select(".g-"+fr._id+"title").remove()}});var yt=!ke||ke==="redraw"?K.listIds(Pe):ke;return e.syncOrAsync(yt.map(function(Rt){return function(){if(!!Rt){var _t=K.getFromId(Pe,Rt),Dt=K.drawOne(Pe,_t,lt);return _t._r=_t.range.slice(),_t._rl=e.simpleMap(_t._r,_t.r2l),Dt}}}))},K.drawOne=function(Pe,ke,lt){lt=lt||{};var ft,yt,Rt;ke.setScale();var _t=Pe._fullLayout,Dt=ke._id,Jt=Dt.charAt(0),fr=K.counterLetter(Dt),Rr=_t._plots[ke._mainSubplot];if(!Rr)return;var Sr=Rr[Jt+"axislayer"],Pr=ke._mainLinePosition,Jr=ke._mainMirrorPosition,ur=ke._vals=K.calcTicks(ke),_r=[ke.mirror,Pr,Jr].join("_");for(ft=0;ft<ur.length;ft++)ur[ft].axInfo=_r;ke._selections={},ke._tickAngles&&(ke._prevTickAngles=ke._tickAngles),ke._tickAngles={},ke._depth=null;var Br={};function Yr(Xt){var mr=Dt+(Xt||"tick");return Br[mr]||(Br[mr]=wt(ke,mr)),Br[mr]}if(!!ke.visible){var Dr=K.makeTransTickFn(ke),it=K.makeTransTickLabelFn(ke),zt,qt,hr=ke.ticks==="inside",Ur=ke.ticks==="outside";if(ke.tickson==="boundaries"){var Gr=Qe(ke,ur);qt=K.clipEnds(ke,Gr),zt=hr?qt:Gr}else qt=K.clipEnds(ke,ur),zt=hr&&ke.ticklabelmode!=="period"?qt:ur;var Ir=ke._gridVals=qt,Cr=St(ke,ur);if(!_t._hasOnlyLargeSploms){var Kr=ke._subplotsWith,Cn={};for(ft=0;ft<Kr.length;ft++){yt=Kr[ft],Rt=_t._plots[yt];var yn=Rt[fr+"axis"],Yn=yn._mainAxis._id;if(!Cn[Yn]){Cn[Yn]=1;var In=Jt==="x"?"M0,"+yn._offset+"v"+yn._length:"M"+yn._offset+",0h"+yn._length;K.drawGrid(Pe,ke,{vals:Ir,counterAxis:yn,layer:Rt.gridlayer.select("."+Dt),minorLayer:Rt.minorGridlayer.select("."+Dt),path:In,transFn:Dr}),K.drawZeroLine(Pe,ke,{counterAxis:yn,layer:Rt.zerolinelayer,path:In,transFn:Dr})}}}var Jn,Zn=K.getTickSigns(ke),ba=K.getTickSigns(ke,"minor");if(ke.ticks||ke.minor&&ke.minor.ticks){var Pa=K.makeTickPath(ke,Pr,Zn[2]),xi=K.makeTickPath(ke,Pr,ba[2],{minor:!0}),Ka,ti,$a,kr;if(ke._anchorAxis&&ke.mirror&&ke.mirror!==!0?(Ka=K.makeTickPath(ke,Jr,Zn[3]),ti=K.makeTickPath(ke,Jr,ba[3],{minor:!0}),$a=Pa+Ka,kr=xi+ti):(Ka="",ti="",$a=Pa,kr=xi),ke.showdividers&&Ur&&ke.tickson==="boundaries"){var bn={};for(ft=0;ft<Cr.length;ft++)bn[Cr[ft].x]=1;Jn=function(Xt){return bn[Xt.x]?Ka:$a}}else Jn=function(Xt){return Xt.minor?kr:$a}}if(K.drawTicks(Pe,ke,{vals:zt,layer:Sr,path:Jn,transFn:Dr}),ke.mirror==="allticks"){var gn=Object.keys(ke._linepositions||{});for(ft=0;ft<gn.length;ft++){yt=gn[ft],Rt=_t._plots[yt];var Ln=ke._linepositions[yt]||[],qn=Ln[0],da=Ln[1],oa=Ln[2],Bn=K.makeTickPath(ke,qn,oa?Zn[0]:ba[0],{minor:oa})+K.makeTickPath(ke,da,oa?Zn[1]:ba[1],{minor:oa});K.drawTicks(Pe,ke,{vals:zt,layer:Rt[Jt+"axislayer"],path:Bn,transFn:Dr})}}var $n=[];if($n.push(function(){return K.drawLabels(Pe,ke,{vals:ur,layer:Sr,plotinfo:Rt,transFn:it,labelFns:K.makeLabelFns(ke,Pr)})}),ke.type==="multicategory"){var Xa={x:2,y:10}[Jt];$n.push(function(){var Xt={x:"height",y:"width"}[Jt],mr=Yr()[Xt]+Xa+(ke._tickAngles[Dt+"tick"]?ke.tickfont.size*j:0);return K.drawLabels(Pe,ke,{vals:tt(ke,ur),layer:Sr,cls:Dt+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:Dr,labelFns:K.makeLabelFns(ke,Pr+mr*Zn[4])})}),$n.push(function(){return ke._depth=Zn[4]*(Yr("tick2")[ke.side]-Pr),Wt(Pe,ke,{vals:Cr,layer:Sr,path:K.makeTickPath(ke,Pr,Zn[4],{len:ke._depth}),transFn:Dr})})}else ke.title.hasOwnProperty("standoff")&&$n.push(function(){ke._depth=Zn[4]*(Yr()[ke.side]-Pr)});var gi=T.getComponentMethod("rangeslider","isVisible")(ke);return $n.push(function(){var Xt=ke.side.charAt(0),mr=re[ke.side].charAt(0),un=K.getPxPosition(Pe,ke),xn=Ur?ke.ticklen:0,sn,kn,Mn,dn;if((ke.automargin||gi)&&(ke.type==="multicategory"?sn=Yr("tick2"):(sn=Yr(),Jt==="x"&&Xt==="b"&&(ke._depth=Math.max(sn.width>0?sn.bottom-un:0,xn)))),ke.automargin){kn={x:0,y:0,r:0,l:0,t:0,b:0};var Tr=[0,1];if(Jt==="x"){if(Xt==="b"?kn[Xt]=ke._depth:(kn[Xt]=ke._depth=Math.max(sn.width>0?un-sn.top:0,xn),Tr.reverse()),sn.width>0){var Ar=sn.right-(ke._offset+ke._length);Ar>0&&(kn.xr=1,kn.r=Ar);var Vr=ke._offset-sn.left;Vr>0&&(kn.xl=0,kn.l=Vr)}}else if(Xt==="l"?kn[Xt]=ke._depth=Math.max(sn.height>0?un-sn.left:0,xn):(kn[Xt]=ke._depth=Math.max(sn.height>0?sn.right-un:0,xn),Tr.reverse()),sn.height>0){var _n=sn.bottom-(ke._offset+ke._length);_n>0&&(kn.yb=0,kn.b=_n);var Gn=ke._offset-sn.top;Gn>0&&(kn.yt=1,kn.t=Gn)}kn[fr]=ke.anchor==="free"?ke.position:ke._anchorAxis.domain[Tr[0]],ke.title.text!==_t._dfltTitle[Jt]&&(kn[Xt]+=Qt(ke)+(ke.title.standoff||0)),ke.mirror&&ke.anchor!=="free"&&(Mn={x:0,y:0,r:0,l:0,t:0,b:0},Mn[mr]=ke.linewidth,ke.mirror&&ke.mirror!==!0&&(Mn[mr]+=xn),ke.mirror===!0||ke.mirror==="ticks"?Mn[fr]=ke._anchorAxis.domain[Tr[1]]:(ke.mirror==="all"||ke.mirror==="allticks")&&(Mn[fr]=[ke._counterDomainMin,ke._counterDomainMax][Tr[1]]))}gi&&(dn=T.getComponentMethod("rangeslider","autoMarginOpts")(Pe,ke)),typeof ke.automargin=="string"&&(Ve(kn,ke.automargin),Ve(Mn,ke.automargin)),M.autoMargin(Pe,ut(ke),kn),M.autoMargin(Pe,ar(ke),Mn),M.autoMargin(Pe,rr(ke),dn)}),!lt.skipTitle&&!(gi&&ke.side==="bottom")&&$n.push(function(){return Zt(Pe,ke)}),e.syncOrAsync($n)}};function Ve(Pe,ke){if(!!Pe){var lt=Object.keys(B).reduce(function(ft,yt){return ke.indexOf(yt)!==-1&&B[yt].forEach(function(Rt){ft[Rt]=1}),ft},{});Object.keys(Pe).forEach(function(ft){lt[ft]||(ft.length===1?Pe[ft]=0:delete Pe[ft])})}}function Qe(Pe,ke){var lt=[],ft,yt=function(Rt,_t){var Dt=Rt.xbnd[_t];Dt!==null&&lt.push(e.extendFlat({},Rt,{x:Dt}))};if(ke.length){for(ft=0;ft<ke.length;ft++)yt(ke[ft],0);yt(ke[ft-1],1)}return lt}function tt(Pe,ke){for(var lt=[],ft={},yt=0;yt<ke.length;yt++){var Rt=ke[yt];ft[Rt.text2]?ft[Rt.text2].push(Rt.x):ft[Rt.text2]=[Rt.x]}for(var _t in ft)lt.push(xt(Pe,e.interp(ft[_t],.5),_t));return lt}function St(Pe,ke){var lt=[],ft,yt,Rt=ke.length&&ke[ke.length-1].x<ke[0].x,_t=function(Jt,fr){var Rr=Jt.xbnd[fr];Rr!==null&&lt.push(e.extendFlat({},Jt,{x:Rr}))};if(Pe.showdividers&&ke.length){for(ft=0;ft<ke.length;ft++){var Dt=ke[ft];Dt.text2!==yt&&_t(Dt,Rt?1:0),yt=Dt.text2}_t(ke[ft-1],Rt?0:1)}return lt}function wt(Pe,ke){var lt,ft,yt,Rt;return Pe._selections[ke].size()?(lt=1/0,ft=-1/0,yt=1/0,Rt=-1/0,Pe._selections[ke].each(function(){var _t=en(this),Dt=h.bBox(_t.node().parentNode);lt=Math.min(lt,Dt.top),ft=Math.max(ft,Dt.bottom),yt=Math.min(yt,Dt.left),Rt=Math.max(Rt,Dt.right)})):(lt=0,ft=0,yt=0,Rt=0),{top:lt,bottom:ft,left:yt,right:Rt,height:ft-lt,width:Rt-yt}}K.getTickSigns=function(Pe,ke){var lt=Pe._id.charAt(0),ft={x:"top",y:"right"}[lt],yt=Pe.side===ft?1:-1,Rt=[-1,1,yt,-yt],_t=ke?(Pe.minor||{}).ticks:Pe.ticks;return _t!=="inside"==(lt==="x")&&(Rt=Rt.map(function(Dt){return-Dt})),Pe.side&&Rt.push({l:-1,t:-1,r:1,b:1}[Pe.side.charAt(0)]),Rt},K.makeTransTickFn=function(Pe){return Pe._id.charAt(0)==="x"?function(ke){return a(Pe._offset+Pe.l2p(ke.x),0)}:function(ke){return a(0,Pe._offset+Pe.l2p(ke.x))}},K.makeTransTickLabelFn=function(Pe){var ke=jt(Pe),lt=ke[0],ft=ke[1];return Pe._id.charAt(0)==="x"?function(yt){return a(lt+Pe._offset+Pe.l2p(Ct(yt)),ft)}:function(yt){return a(ft,lt+Pe._offset+Pe.l2p(Ct(yt)))}};function Ct(Pe){return Pe.periodX!==void 0?Pe.periodX:Pe.x}function jt(Pe){var ke=Pe.ticklabelposition||"",lt=function(Jr){return ke.indexOf(Jr)!==-1},ft=lt("top"),yt=lt("left"),Rt=lt("right"),_t=lt("bottom"),Dt=lt("inside"),Jt=_t||yt||ft||Rt;if(!Jt&&!Dt)return[0,0];var fr=Pe.side,Rr=Jt?(Pe.tickwidth||0)/2:0,Sr=ue,Pr=Pe.tickfont?Pe.tickfont.size:12;return(_t||ft)&&(Rr+=Pr*X,Sr+=(Pe.linewidth||0)/2),(yt||Rt)&&(Rr+=(Pe.linewidth||0)/2,Sr+=ue),Dt&&fr==="top"&&(Sr-=Pr*(1-X)),(yt||ft)&&(Rr=-Rr),(fr==="bottom"||fr==="right")&&(Sr=-Sr),[Jt?Rr:0,Dt?Sr:0]}K.makeTickPath=function(Pe,ke,lt,ft){ft||(ft={});var yt=ft.minor;if(yt&&!Pe.minor)return"";var Rt=ft.len!==void 0?ft.len:yt?Pe.minor.ticklen:Pe.ticklen,_t=Pe._id.charAt(0),Dt=(Pe.linewidth||1)/2;return _t==="x"?"M0,"+(ke+Dt*lt)+"v"+Rt*lt:"M"+(ke+Dt*lt)+",0h"+Rt*lt},K.makeLabelFns=function(Pe,ke,lt){var ft=Pe.ticklabelposition||"",yt=function(Cn){return ft.indexOf(Cn)!==-1},Rt=yt("top"),_t=yt("left"),Dt=yt("right"),Jt=yt("bottom"),fr=Jt||_t||Rt||Dt,Rr=yt("inside"),Sr=ft==="inside"&&Pe.ticks==="inside"||!Rr&&Pe.ticks==="outside"&&Pe.tickson!=="boundaries",Pr=0,Jr=0,ur=Sr?Pe.ticklen:0;if(Rr?ur*=-1:fr&&(ur=0),Sr&&(Pr+=ur,lt)){var _r=e.deg2rad(lt);Pr=ur*Math.cos(_r)+1,Jr=ur*Math.sin(_r)}Pe.showticklabels&&(Sr||Pe.showline)&&(Pr+=.2*Pe.tickfont.size),Pr+=(Pe.linewidth||1)/2*(Rr?-1:1);var Br={labelStandoff:Pr,labelShift:Jr},Yr,Dr,it,zt,qt=0,hr=Pe.side,Ur=Pe._id.charAt(0),Gr=Pe.tickangle,Ir;if(Ur==="x")Ir=!Rr&&hr==="bottom"||Rr&&hr==="top",zt=Ir?1:-1,Rr&&(zt*=-1),Yr=Jr*zt,Dr=ke+Pr*zt,it=Ir?1:-.2,Math.abs(Gr)===90&&(Rr?it+=Q:Gr===-90&&hr==="bottom"?it=X:Gr===90&&hr==="top"?it=Q:it=.5,qt=Q/2*(Gr/90)),Br.xFn=function(Cn){return Cn.dx+Yr+qt*Cn.fontSize},Br.yFn=function(Cn){return Cn.dy+Dr+Cn.fontSize*it},Br.anchorFn=function(Cn,yn){if(fr){if(_t)return"end";if(Dt)return"start"}return!f(yn)||yn===0||yn===180?"middle":yn*zt<0!==Rr?"end":"start"},Br.heightFn=function(Cn,yn,Yn){return yn<-60||yn>60?-.5*Yn:Pe.side==="top"!==Rr?-Yn:0};else if(Ur==="y"){if(Ir=!Rr&&hr==="left"||Rr&&hr==="right",zt=Ir?1:-1,Rr&&(zt*=-1),Yr=Pr,Dr=Jr*zt,it=0,!Rr&&Math.abs(Gr)===90&&(Gr===-90&&hr==="left"||Gr===90&&hr==="right"?it=X:it=.5),Rr){var Cr=f(Gr)?+Gr:0;if(Cr!==0){var Kr=e.deg2rad(Cr);qt=Math.abs(Math.sin(Kr))*X*zt,it=0}}Br.xFn=function(Cn){return Cn.dx+ke-(Yr+Cn.fontSize*it)*zt+qt*Cn.fontSize},Br.yFn=function(Cn){return Cn.dy+Dr+Cn.fontSize*Q},Br.anchorFn=function(Cn,yn){return f(yn)&&Math.abs(yn)===90?"middle":Ir?"end":"start"},Br.heightFn=function(Cn,yn,Yn){return Pe.side==="right"&&(yn*=-1),yn<-30?-Yn:yn<30?-.5*Yn:0}}return Br};function Bt(Pe){return[Pe.text,Pe.x,Pe.axInfo,Pe.font,Pe.fontSize,Pe.fontColor].join("_")}K.drawTicks=function(Pe,ke,lt){lt=lt||{};var ft=ke._id+"tick",yt=[].concat(ke.minor&&ke.minor.ticks?lt.vals.filter(function(_t){return _t.minor&&!_t.noTick}):[]).concat(ke.ticks?lt.vals.filter(function(_t){return!_t.minor&&!_t.noTick}):[]),Rt=lt.layer.selectAll("path."+ft).data(yt,Bt);Rt.exit().remove(),Rt.enter().append("path").classed(ft,1).classed("ticks",1).classed("crisp",lt.crisp!==!1).each(function(_t){return t.stroke(w.select(this),_t.minor?ke.minor.tickcolor:ke.tickcolor)}).style("stroke-width",function(_t){return h.crispRound(Pe,_t.minor?ke.minor.tickwidth:ke.tickwidth,1)+"px"}).attr("d",lt.path).style("display",null),Vt(ke,[O]),Rt.attr("transform",lt.transFn)},K.drawGrid=function(Pe,ke,lt){lt=lt||{};var ft=ke._id+"grid",yt=ke.minor&&ke.minor.showgrid,Rt=yt?lt.vals.filter(function(Yr){return Yr.minor}):[],_t=ke.showgrid?lt.vals.filter(function(Yr){return!Yr.minor}):[],Dt=lt.counterAxis;if(Dt&&K.shouldShowZeroLine(Pe,ke,Dt))for(var Jt=ke.tickmode==="array",fr=0;fr<_t.length;fr++){var Rr=_t[fr].x;if(Jt?!Rr:Math.abs(Rr)<ke.dtick/100)if(_t=_t.slice(0,fr).concat(_t.slice(fr+1)),Jt)fr--;else break}ke._gw=h.crispRound(Pe,ke.gridwidth,1);for(var Sr=yt?h.crispRound(Pe,ke.minor.gridwidth,1):0,Pr=lt.layer,Jr=lt.minorLayer,ur=1;ur>=0;ur--){var _r=ur?Pr:Jr;if(!!_r){var Br=_r.selectAll("path."+ft).data(ur?_t:Rt,Bt);Br.exit().remove(),Br.enter().append("path").classed(ft,1).classed("crisp",lt.crisp!==!1),Br.attr("transform",lt.transFn).attr("d",lt.path).each(function(Yr){return t.stroke(w.select(this),Yr.minor?ke.minor.gridcolor:ke.gridcolor||"#ddd")}).style("stroke-dasharray",function(Yr){return h.dashStyle(Yr.minor?ke.minor.griddash:ke.griddash,Yr.minor?ke.minor.gridwidth:ke.gridwidth)}).style("stroke-width",function(Yr){return(Yr.minor?Sr:ke._gw)+"px"}).style("display",null),typeof lt.path=="function"&&Br.attr("d",lt.path)}}Vt(ke,[D,R])},K.drawZeroLine=function(Pe,ke,lt){lt=lt||lt;var ft=ke._id+"zl",yt=K.shouldShowZeroLine(Pe,ke,lt.counterAxis),Rt=lt.layer.selectAll("path."+ft).data(yt?[{x:0,id:ke._id}]:[]);Rt.exit().remove(),Rt.enter().append("path").classed(ft,1).classed("zl",1).classed("crisp",lt.crisp!==!1).each(function(){lt.layer.selectAll("path").sort(function(_t,Dt){return H(_t.id,Dt.id)})}),Rt.attr("transform",lt.transFn).attr("d",lt.path).call(t.stroke,ke.zerolinecolor||t.defaultLine).style("stroke-width",h.crispRound(Pe,ke.zerolinewidth,ke._gw||1)+"px").style("display",null),Vt(ke,[I])},K.drawLabels=function(Pe,ke,lt){lt=lt||{};var ft=Pe._fullLayout,yt=ke._id,Rt=yt.charAt(0),_t=lt.cls||yt+"tick",Dt=lt.vals.filter(function(zt){return zt.text}),Jt=lt.labelFns,fr=lt.secondary?0:ke.tickangle,Rr=(ke._prevTickAngles||{})[_t],Sr=lt.layer.selectAll("g."+_t).data(ke.showticklabels?Dt:[],Bt),Pr=[];Sr.enter().append("g").classed(_t,1).append("text").attr("text-anchor","middle").each(function(zt){var qt=w.select(this),hr=Pe._promises.length;qt.call(n.positionText,Jt.xFn(zt),Jt.yFn(zt)).call(h.font,zt.font,zt.fontSize,zt.fontColor).text(zt.text).call(n.convertToTspans,Pe),Pe._promises[hr]?Pr.push(Pe._promises.pop().then(function(){Jr(qt,fr)})):Jr(qt,fr)}),Vt(ke,[z]),Sr.exit().remove(),lt.repositionOnUpdate&&Sr.each(function(zt){w.select(this).select("text").call(n.positionText,Jt.xFn(zt),Jt.yFn(zt))});function Jr(zt,qt){zt.each(function(hr){var Ur=w.select(this),Gr=Ur.select(".text-math-group"),Ir=Jt.anchorFn(hr,qt),Cr=lt.transFn.call(Ur.node(),hr)+(f(qt)&&+qt!=0?" rotate("+qt+","+Jt.xFn(hr)+","+(Jt.yFn(hr)-hr.fontSize/2)+")":""),Kr=n.lineCount(Ur),Cn=j*hr.fontSize,yn=Jt.heightFn(hr,f(qt)?+qt:0,(Kr-1)*Cn);if(yn&&(Cr+=a(0,yn)),Gr.empty()){var Yn=Ur.select("text");Yn.attr({transform:Cr,"text-anchor":Ir}),Yn.style("opacity",1),ke._adjustTickLabelsOverflow&&ke._adjustTickLabelsOverflow()}else{var In=h.bBox(Gr.node()).width,Jn=In*{end:-.5,start:.5}[Ir];Gr.attr("transform",Cr+a(Jn,0))}})}ke._adjustTickLabelsOverflow=function(){var zt=ke.ticklabeloverflow;if(!(!zt||zt==="allow")){var qt=zt.indexOf("hide")!==-1,hr=ke._id.charAt(0)==="x",Ur=0,Gr=hr?Pe._fullLayout.width:Pe._fullLayout.height;if(zt.indexOf("domain")!==-1){var Ir=e.simpleMap(ke.range,ke.r2l);Ur=ke.l2p(Ir[0])+ke._offset,Gr=ke.l2p(Ir[1])+ke._offset}var Cr=Math.min(Ur,Gr),Kr=Math.max(Ur,Gr),Cn=ke.side,yn=1/0,Yn=-1/0;Sr.each(function(ba){var Pa=w.select(this),xi=Pa.select(".text-math-group");if(xi.empty()){var Ka=h.bBox(Pa.node()),ti=0;hr?(Ka.right>Kr||Ka.left<Cr)&&(ti=1):(Ka.bottom>Kr||Ka.top+(ke.tickangle?0:ba.fontSize/4)<Cr)&&(ti=1);var $a=Pa.select("text");ti?qt&&$a.style("opacity",0):($a.style("opacity",1),Cn==="bottom"||Cn==="right"?yn=Math.min(yn,hr?Ka.top:Ka.left):yn=-1/0,Cn==="top"||Cn==="left"?Yn=Math.max(Yn,hr?Ka.bottom:Ka.right):Yn=1/0)}});for(var In in ft._plots){var Jn=ft._plots[In];if(!(ke._id!==Jn.xaxis._id&&ke._id!==Jn.yaxis._id)){var Zn=hr?Jn.yaxis:Jn.xaxis;Zn&&(Zn["_visibleLabelMin_"+ke._id]=yn,Zn["_visibleLabelMax_"+ke._id]=Yn)}}}},ke._hideCounterAxisInsideTickLabels=function(zt){var qt=ke._id.charAt(0)==="x",hr=[];for(var Ur in ft._plots){var Gr=ft._plots[Ur];ke._id!==Gr.xaxis._id&&ke._id!==Gr.yaxis._id||hr.push(qt?Gr.yaxis:Gr.xaxis)}hr.forEach(function(Ir,Cr){Ir&&kt(Ir)&&(zt||[I,R,D,O,z]).forEach(function(Kr){var Cn=Kr.K==="tick"&&Kr.L==="text"&&ke.ticklabelmode==="period",yn=ft._plots[ke._mainSubplot],Yn;Kr.K===I.K?Yn=yn.zerolinelayer.selectAll("."+ke._id+"zl"):Kr.K===R.K?Yn=yn.minorGridlayer.selectAll("."+ke._id):Kr.K===D.K?Yn=yn.gridlayer.selectAll("."+ke._id):Yn=yn[ke._id.charAt(0)+"axislayer"],Yn.each(function(){var In=w.select(this);Kr.L&&(In=In.selectAll(Kr.L)),In.each(function(Jn){var Zn=ke.l2p(Cn?Ct(Jn):Jn.x)+ke._offset,ba=w.select(this);Zn<ke["_visibleLabelMax_"+Ir._id]&&Zn>ke["_visibleLabelMin_"+Ir._id]?ba.style("display","none"):Kr.K==="tick"&&!Cr&&ba.style("display",null)})})})})},Jr(Sr,Rr+1?Rr:fr);function ur(){return Pr.length&&Promise.all(Pr)}var _r=null;function Br(){if(Jr(Sr,fr),Dt.length&&Rt==="x"&&!f(fr)&&(ke.type!=="log"||String(ke.dtick).charAt(0)!=="D")){_r=0;var zt=0,qt=[],hr;if(Sr.each(function(Ka){zt=Math.max(zt,Ka.fontSize);var ti=ke.l2p(Ka.x),$a=en(this),kr=h.bBox($a.node());qt.push({top:0,bottom:10,height:10,left:ti-kr.width/2,right:ti+kr.width/2+2,width:kr.width+2})}),(ke.tickson==="boundaries"||ke.showdividers)&&!lt.secondary){var Ur=2;for(ke.ticks&&(Ur+=ke.tickwidth/2),hr=0;hr<qt.length;hr++){var Gr=Dt[hr].xbnd,Ir=qt[hr];if(Gr[0]!==null&&Ir.left-ke.l2p(Gr[0])<Ur||Gr[1]!==null&&ke.l2p(Gr[1])-Ir.right<Ur){_r=90;break}}}else{var Cr=Dt.length,Kr=Math.abs((Dt[Cr-1].x-Dt[0].x)*ke._m)/(Cr-1),Cn=ke.ticklabelposition||"",yn=function(Ka){return Cn.indexOf(Ka)!==-1},Yn=yn("top"),In=yn("left"),Jn=yn("right"),Zn=yn("bottom"),ba=Zn||In||Yn||Jn,Pa=ba?(ke.tickwidth||0)+2*ue:0,xi=Kr<zt*2.5||ke.type==="multicategory"||ke._name==="realaxis";for(hr=0;hr<qt.length-1;hr++)if(e.bBoxIntersect(qt[hr],qt[hr+1],Pa)){_r=xi?90:30;break}}_r&&Jr(Sr,_r)}}ke._selections&&(ke._selections[_t]=Sr);var Yr=[ur];ke.automargin&&ft._redrawFromAutoMarginCount&&Rr===90?(_r=90,Yr.push(function(){Jr(Sr,Rr)})):Yr.push(Br),ke._tickAngles&&Yr.push(function(){ke._tickAngles[_t]=_r===null?f(fr)?fr:0:_r});var Dr=ke._anchorAxis;Dr&&Dr.autorange&&kt(ke)&&!ee(ft,ke._id)&&(ft._insideTickLabelsAutorange||(ft._insideTickLabelsAutorange={}),ft._insideTickLabelsAutorange[Dr._name+".autorange"]=Dr.autorange,Yr.push(function(){Sr.each(function(qt,hr){var Ur=en(this),Gr=Ur.select(".text-math-group");Gr.empty()&&(ke._vals[hr].bb=h.bBox(Ur.node()))})}));var it=e.syncOrAsync(Yr);return it&&it.then&&Pe._promises.push(it),it};function Wt(Pe,ke,lt){var ft=ke._id+"divider",yt=lt.vals,Rt=lt.layer.selectAll("path."+ft).data(yt,Bt);Rt.exit().remove(),Rt.enter().insert("path",":first-child").classed(ft,1).classed("crisp",1).call(t.stroke,ke.dividercolor).style("stroke-width",h.crispRound(Pe,ke.dividerwidth,1)+"px"),Rt.attr("transform",lt.transFn).attr("d",lt.path)}K.getPxPosition=function(Pe,ke){var lt=Pe._fullLayout._size,ft=ke._id.charAt(0),yt=ke.side,Rt;if(ke.anchor!=="free"?Rt=ke._anchorAxis:ft==="x"?Rt={_offset:lt.t+(1-(ke.position||0))*lt.h,_length:0}:ft==="y"&&(Rt={_offset:lt.l+(ke.position||0)*lt.w,_length:0}),yt==="top"||yt==="left")return Rt._offset;if(yt==="bottom"||yt==="right")return Rt._offset+Rt._length};function Qt(Pe){var ke=Pe.title.font.size,lt=(Pe.title.text.match(n.BR_TAG_ALL)||[]).length;return Pe.title.hasOwnProperty("standoff")?lt?ke*(X+lt*j):ke*X:lt?ke*(lt+1)*j:ke}function Zt(Pe,ke){var lt=Pe._fullLayout,ft=ke._id,yt=ft.charAt(0),Rt=ke.title.font.size,_t;if(ke.title.hasOwnProperty("standoff"))_t=ke._depth+ke.title.standoff+Qt(ke);else{var Dt=kt(ke);if(ke.type==="multicategory")_t=ke._depth;else{var Jt=1.5*Rt;Dt&&(Jt=.5*Rt,ke.ticks==="outside"&&(Jt+=ke.ticklen)),_t=10+Jt+(ke.linewidth?ke.linewidth-1:0)}Dt||(yt==="x"?_t+=ke.side==="top"?Rt*(ke.showticklabels?1:0):Rt*(ke.showticklabels?1.5:.5):_t+=ke.side==="right"?Rt*(ke.showticklabels?1:.5):Rt*(ke.showticklabels?.5:0))}var fr=K.getPxPosition(Pe,ke),Rr,Sr,Pr;yt==="x"?(Sr=ke._offset+ke._length/2,Pr=ke.side==="top"?fr-_t:fr+_t):(Pr=ke._offset+ke._length/2,Sr=ke.side==="right"?fr+_t:fr-_t,Rr={rotate:"-90",offset:0});var Jr;if(ke.type!=="multicategory"){var ur=ke._selections[ke._id+"tick"];if(Jr={selection:ur,side:ke.side},ur&&ur.node()&&ur.node().parentNode){var _r=h.getTranslate(ur.node().parentNode);Jr.offsetLeft=_r.x,Jr.offsetTop=_r.y}ke.title.hasOwnProperty("standoff")&&(Jr.pad=0)}return r.draw(Pe,ft+"title",{propContainer:ke,propName:ke._name+".title.text",placeholder:lt._dfltTitle[yt],avoid:Jr,transform:Rr,attributes:{x:Sr,y:Pr,"text-anchor":"middle"}})}K.shouldShowZeroLine=function(Pe,ke,lt){var ft=e.simpleMap(ke.range,ke.r2l);return ft[0]*ft[1]<=0&&ke.zeroline&&(ke.type==="linear"||ke.type==="-")&&!(ke.rangebreaks&&ke.maskBreaks(0)===F)&&(cr(ke,0)||!Xr(Pe,ke,lt,ft)||vn(Pe,ke))},K.clipEnds=function(Pe,ke){return ke.filter(function(lt){return cr(Pe,lt.x)})};function cr(Pe,ke){var lt=Pe.l2p(ke);return lt>1&&lt<Pe._length-1}function Xr(Pe,ke,lt,ft){var yt=lt._mainAxis;if(!yt)return;var Rt=Pe._fullLayout,_t=ke._id.charAt(0),Dt=K.counterLetter(ke._id),Jt=ke._offset+(Math.abs(ft[0])<Math.abs(ft[1])==(_t==="x")?0:ke._length);function fr(ur){if(!ur.showline||!ur.linewidth)return!1;var _r=Math.max((ur.linewidth+ke.zerolinewidth)/2,1);function Br(it){return typeof it=="number"&&Math.abs(it-Jt)<_r}if(Br(ur._mainLinePosition)||Br(ur._mainMirrorPosition))return!0;var Yr=ur._linepositions||{};for(var Dr in Yr)if(Br(Yr[Dr][0])||Br(Yr[Dr][1]))return!0}var Rr=Rt._plots[lt._mainSubplot];if(!(Rr.mainplotinfo||Rr).overlays.length)return fr(lt);for(var Sr=K.list(Pe,Dt),Pr=0;Pr<Sr.length;Pr++){var Jr=Sr[Pr];if(Jr._mainAxis===yt&&fr(Jr))return!0}}function vn(Pe,ke){for(var lt=Pe._fullData,ft=ke._mainSubplot,yt=ke._id.charAt(0),Rt=0;Rt<lt.length;Rt++){var _t=lt[Rt];if(_t.visible===!0&&_t.xaxis+_t.yaxis===ft&&(T.traceIs(_t,"bar-like")&&_t.orientation==={x:"h",y:"v"}[yt]||_t.fill&&_t.fill.charAt(_t.fill.length-1)===yt))return!0}return!1}function en(Pe){var ke=w.select(Pe),lt=ke.select(".text-math-group");return lt.empty()?ke.select("text"):lt}K.allowAutoMargin=function(Pe){for(var ke=K.list(Pe,"",!0),lt=0;lt<ke.length;lt++){var ft=ke[lt];ft.automargin&&(M.allowAutoMargin(Pe,ut(ft)),ft.mirror&&M.allowAutoMargin(Pe,ar(ft))),T.getComponentMethod("rangeslider","isVisible")(ft)&&M.allowAutoMargin(Pe,rr(ft))}};function ut(Pe){return Pe._id+".automargin"}function ar(Pe){return ut(Pe)+".mirror"}function rr(Pe){return Pe._id+".rangeslider"}K.swap=function(Pe,ke){for(var lt=Kt(Pe,ke),ft=0;ft<lt.length;ft++)st(Pe,lt[ft].x,lt[ft].y)};function Kt(Pe,ke){var lt=[],ft,yt;for(ft=0;ft<ke.length;ft++){var Rt=[],_t=Pe._fullData[ke[ft]].xaxis,Dt=Pe._fullData[ke[ft]].yaxis;if(!(!_t||!Dt)){for(yt=0;yt<lt.length;yt++)(lt[yt].x.indexOf(_t)!==-1||lt[yt].y.indexOf(Dt)!==-1)&&Rt.push(yt);if(!Rt.length){lt.push({x:[_t],y:[Dt]});continue}var Jt=lt[Rt[0]],fr;if(Rt.length>1)for(yt=1;yt<Rt.length;yt++)fr=lt[Rt[yt]],Er(Jt.x,fr.x),Er(Jt.y,fr.y);Er(Jt.x,[_t]),Er(Jt.y,[Dt])}}return lt}function Er(Pe,ke){for(var lt=0;lt<ke.length;lt++)Pe.indexOf(ke[lt])===-1&&Pe.push(ke[lt])}function st(Pe,ke,lt){var ft=[],yt=[],Rt=Pe.layout,_t,Dt;for(_t=0;_t<ke.length;_t++)ft.push(K.getFromId(Pe,ke[_t]));for(_t=0;_t<lt.length;_t++)yt.push(K.getFromId(Pe,lt[_t]));var Jt=Object.keys(s),fr=["anchor","domain","overlaying","position","side","tickangle","editType"],Rr=["linear","log"];for(_t=0;_t<Jt.length;_t++){var Sr=Jt[_t],Pr=ft[0][Sr],Jr=yt[0][Sr],ur=!0,_r=!1,Br=!1;if(!(Sr.charAt(0)==="_"||typeof Pr=="function"||fr.indexOf(Sr)!==-1)){for(Dt=1;Dt<ft.length&&ur;Dt++){var Yr=ft[Dt][Sr];Sr==="type"&&Rr.indexOf(Pr)!==-1&&Rr.indexOf(Yr)!==-1&&Pr!==Yr?_r=!0:Yr!==Pr&&(ur=!1)}for(Dt=1;Dt<yt.length&&ur;Dt++){var Dr=yt[Dt][Sr];Sr==="type"&&Rr.indexOf(Jr)!==-1&&Rr.indexOf(Dr)!==-1&&Jr!==Dr?Br=!0:yt[Dt][Sr]!==Jr&&(ur=!1)}ur&&(_r&&(Rt[ft[0]._name].type="linear"),Br&&(Rt[yt[0]._name].type="linear"),et(Rt,Sr,ft,yt,Pe._fullLayout._dfltTitle))}}for(_t=0;_t<Pe._fullLayout.annotations.length;_t++){var it=Pe._fullLayout.annotations[_t];ke.indexOf(it.xref)!==-1&&lt.indexOf(it.yref)!==-1&&e.swapAttrs(Rt.annotations[_t],["?"])}}function et(Pe,ke,lt,ft,yt){var Rt=e.nestedProperty,_t=Rt(Pe[lt[0]._name],ke).get(),Dt=Rt(Pe[ft[0]._name],ke).get(),Jt;for(ke==="title"&&(_t&&_t.text===yt.x&&(_t.text=yt.y),Dt&&Dt.text===yt.y&&(Dt.text=yt.x)),Jt=0;Jt<lt.length;Jt++)Rt(Pe,lt[Jt]._name+"."+ke).set(Dt);for(Jt=0;Jt<ft.length;Jt++)Rt(Pe,ft[Jt]._name+"."+ke).set(_t)}function ht(Pe){return Pe._id==="angularaxis"}function vt(Pe,ke){for(var lt=ke._rangebreaks.length,ft=0;ft<lt;ft++){var yt=ke._rangebreaks[ft];if(Pe>=yt.min&&Pe<yt.max)return yt.max}return Pe}function kt(Pe){return(Pe.ticklabelposition||"").indexOf("inside")!==-1}function Vt(Pe,ke){kt(Pe._anchorAxis||{})&&Pe._hideCounterAxisInsideTickLabels&&Pe._hideCounterAxisInsideTickLabels(ke)}},{"../../components/color":367,"../../components/drawing":389,"../../components/titles":476,"../../constants/alignment":483,"../../constants/numerical":491,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/plots":628,"../../registry":647,"./autorange":565,"./axis_autotype":567,"./axis_ids":570,"./clean_ticks":572,"./layout_attributes":579,"./set_convert":585,"@plotly/d3":58,"fast-isnumeric":190}],567:[function(i,U,V){var w=i("fast-isnumeric"),f=i("../../lib"),M=i("../../constants/numerical").BADNUM,T=f.isArrayOrTypedArray,e=f.isDateTime,a=f.cleanNumber,n=Math.round;U.exports=function(p,c,m){var l=p,x=m.noMultiCategory;if(T(l)&&!l.length)return"-";if(!x&&y(l))return"multicategory";if(x&&Array.isArray(l[0])){for(var u=[],A=0;A<l.length;A++)if(T(l[A]))for(var _=0;_<l[A].length;_++)u.push(l[A][_]);l=u}if(h(l,c))return"date";var g=m.autotypenumbers!=="strict";return o(l,g)?"category":t(l,g)?"linear":"-"};function r(d,p){return p?w(d):typeof d=="number"}function t(d,p){for(var c=d.length,m=0;m<c;m++)if(r(d[m],p))return!0;return!1}function h(d,p){for(var c=d.length,m=s(c),l=0,x=0,u={},A=0;A<c;A+=m){var _=n(A),g=d[_],b=String(g);u[b]||(u[b]=1,e(g,p)&&l++,w(g)&&x++)}return l>x*2}function s(d){return Math.max(1,(d-1)/1e3)}function o(d,p){for(var c=d.length,m=s(c),l=0,x=0,u={},A=0;A<c;A+=m){var _=n(A),g=d[_],b=String(g);if(!u[b]){u[b]=1;var v=typeof g;v==="boolean"?x++:(p?a(g)!==M:v==="number")?l++:v==="string"&&x++}}return x>l*2}function y(d){return T(d[0])&&T(d[1])}},{"../../constants/numerical":491,"../../lib":515,"fast-isnumeric":190}],568:[function(i,U,V){var w=i("fast-isnumeric"),f=i("../../registry"),M=i("../../lib"),T=i("../../plot_api/plot_template"),e=i("../array_container_defaults"),a=i("./layout_attributes"),n=i("./tick_value_defaults"),r=i("./tick_mark_defaults"),t=i("./tick_label_defaults"),h=i("./prefix_suffix_defaults"),s=i("./category_order_defaults"),o=i("./line_grid_defaults"),y=i("./set_convert"),d=i("./constants").WEEKDAY_PATTERN,p=i("./constants").HOUR_PATTERN;U.exports=function(u,A,_,g,b){var v=g.letter,k=g.font||{},S=g.splomStash||{},E=_("visible",!g.visibleDflt),C=A._template||{},F=A.type||C.type||"-",I;if(F==="date"){var D=f.getComponentMethod("calendars","handleDefaults");D(u,A,"calendar",g.calendar),g.noTicklabelmode||(I=_("ticklabelmode"))}var R="";(!g.noTicklabelposition||F==="multicategory")&&(R=M.coerce(u,A,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:I==="period"?["outside","inside"]:v==="x"?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),g.noTicklabeloverflow||_("ticklabeloverflow",R.indexOf("inside")!==-1?"hide past domain":F==="category"||F==="multicategory"?"allow":"hide past div"),y(A,b);var O=!A.isValidRange(u.range);O&&g.reverseDflt&&(O="reversed");var z=_("autorange",O);z&&(F==="linear"||F==="-")&&_("rangemode"),_("range"),A.cleanRange(),s(u,A,_,g),F!=="category"&&!g.noHover&&_("hoverformat");var B=_("color"),G=B!==a.color.dflt?B:k.color,Q=S.label||b._dfltTitle[v];if(h(u,A,_,F,g),!E)return A;_("title.text",Q),M.coerceFont(_,"title.font",{family:k.family,size:M.bigFont(k.size),color:G}),n(u,A,_,F);var X=g.hasMinor;if(X&&(T.newContainer(A,"minor"),n(u,A,_,F,{isMinor:!0})),t(u,A,_,F,g),r(u,A,_,g),X){var j=g.isMinor;g.isMinor=!0,r(u,A,_,g),g.isMinor=j}o(u,A,_,{dfltColor:B,bgColor:g.bgColor,showGrid:g.showGrid,hasMinor:X,attributes:a}),X&&!A.minor.ticks&&!A.minor.showgrid&&delete A.minor,(A.showline||A.ticks)&&_("mirror"),g.automargin&&_("automargin");var re=F==="multicategory";if(!g.noTickson&&(F==="category"||re)&&(A.ticks||A.showgrid)){var ue;re&&(ue="boundaries");var K=_("tickson",ue);K==="boundaries"&&delete A.ticklabelposition}if(re){var te=_("showdividers");te&&(_("dividercolor"),_("dividerwidth"))}if(F==="date")if(e(u,A,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:c}),!A.rangebreaks.length)delete A.rangebreaks;else{for(var Y=0;Y<A.rangebreaks.length;Y++)if(A.rangebreaks[Y].pattern===d){A._hasDayOfWeekBreaks=!0;break}if(y(A,b),b._has("scattergl")||b._has("splom"))for(var H=0;H<g.data.length;H++){var ee=g.data[H];(ee.type==="scattergl"||ee.type==="splom")&&(ee.visible=!1,M.warn(ee.type+" traces do not work on axes with rangebreaks. Setting trace "+ee.index+" to `visible: false`."))}}return A};function c(x,u,A){function _(I,D){return M.coerce(x,u,a.rangebreaks,I,D)}var g=_("enabled");if(g){var b=_("bounds");if(b&&b.length>=2){var v="",k,S;if(b.length===2){for(k=0;k<2;k++)if(S=l(b[k]),S){v=d;break}}var E=_("pattern",v);if(E===d)for(k=0;k<2;k++)S=l(b[k]),S&&(u.bounds[k]=b[k]=S-1);if(E)for(k=0;k<2;k++)switch(S=b[k],E){case d:if(!w(S)){u.enabled=!1;return}if(S=+S,S!==Math.floor(S)||S<0||S>=7){u.enabled=!1;return}u.bounds[k]=b[k]=S;break;case p:if(!w(S)){u.enabled=!1;return}if(S=+S,S<0||S>24){u.enabled=!1;return}u.bounds[k]=b[k]=S;break}if(A.autorange===!1){var C=A.range;if(C[0]<C[1]){if(b[0]<C[0]&&b[1]>C[1]){u.enabled=!1;return}}else if(b[0]>C[0]&&b[1]<C[1]){u.enabled=!1;return}}}else{var F=_("values");if(F&&F.length)_("dvalue");else{u.enabled=!1;return}}}}var m={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function l(x){if(typeof x=="string")return m[x.substr(0,3).toLowerCase()]}},{"../../lib":515,"../../plot_api/plot_template":555,"../../registry":647,"../array_container_defaults":561,"./category_order_defaults":571,"./constants":573,"./layout_attributes":579,"./line_grid_defaults":581,"./prefix_suffix_defaults":583,"./set_convert":585,"./tick_label_defaults":587,"./tick_mark_defaults":588,"./tick_value_defaults":589,"fast-isnumeric":190}],569:[function(i,U,V){var w=i("../../constants/docs"),f=w.FORMAT_LINK,M=w.DATE_FORMAT_LINK;function T(n,r){return{valType:"string",dflt:"",editType:"none",description:(r?e:a)("hover text",n)+["By default the values are formatted using "+(r?"generic number format":"`"+n+"axis.hoverformat`")+"."].join(" ")}}function e(n,r){return["Sets the "+n+" formatting rule"+(r?"for `"+r+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+f+"."].join(" ")}function a(n,r){return e(n,r)+[" And for dates see: "+M+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}U.exports={axisHoverFormat:T,descriptionOnlyNumbers:e,descriptionWithDates:a}},{"../../constants/docs":486}],570:[function(i,U,V){var w=i("../../registry"),f=i("./constants");V.id2name=function(e){if(!(typeof e!="string"||!e.match(f.AX_ID_PATTERN))){var a=e.split(" ")[0].substr(1);return a==="1"&&(a=""),e.charAt(0)+"axis"+a}},V.name2id=function(e){if(!!e.match(f.AX_NAME_PATTERN)){var a=e.substr(5);return a==="1"&&(a=""),e.charAt(0)+a}},V.cleanId=function(e,a,n){var r=/( domain)$/.test(e);if(!(typeof e!="string"||!e.match(f.AX_ID_PATTERN))&&!(a&&e.charAt(0)!==a)&&!(r&&!n)){var t=e.split(" ")[0].substr(1).replace(/^0+/,"");return t==="1"&&(t=""),e.charAt(0)+t+(r&&n?" domain":"")}},V.list=function(T,e,a){var n=T._fullLayout;if(!n)return[];var r=V.listIds(T,e),t=new Array(r.length),h;for(h=0;h<r.length;h++){var s=r[h];t[h]=n[s.charAt(0)+"axis"+s.substr(1)]}if(!a){var o=n._subplots.gl3d||[];for(h=0;h<o.length;h++){var y=n[o[h]];e?t.push(y[e+"axis"]):t.push(y.xaxis,y.yaxis,y.zaxis)}}return t},V.listIds=function(T,e){var a=T._fullLayout;if(!a)return[];var n=a._subplots;return e?n[e+"axis"]:n.xaxis.concat(n.yaxis)},V.getFromId=function(T,e,a){var n=T._fullLayout;return e=e===void 0||typeof e!="string"?e:e.replace(" domain",""),a==="x"?e=e.replace(/y[0-9]*/,""):a==="y"&&(e=e.replace(/x[0-9]*/,"")),n[V.id2name(e)]},V.getFromTrace=function(T,e,a){var n=T._fullLayout,r=null;if(w.traceIs(e,"gl3d")){var t=e.scene;t.substr(0,5)==="scene"&&(r=n[t][a+"axis"])}else r=V.getFromId(T,e[a+"axis"]||a);return r},V.idSort=function(T,e){var a=T.charAt(0),n=e.charAt(0);return a!==n?a>n?1:-1:+(T.substr(1)||1)-+(e.substr(1)||1)},V.ref2id=function(T){return/^[xyz]/.test(T)?T.split(" ")[0]:!1};function M(T,e){if(e&&e.length){for(var a=0;a<e.length;a++)if(e[a][T])return!0}return!1}V.isLinked=function(T,e){return M(e,T._axisMatchGroups)||M(e,T._axisConstraintGroups)}},{"../../registry":647,"./constants":573}],571:[function(i,U,V){function w(f,M){var T=M.dataAttr||f._id.charAt(0),e={},a,n,r;if(M.axData)a=M.axData;else for(a=[],n=0;n<M.data.length;n++){var t=M.data[n];t[T+"axis"]===f._id&&a.push(t)}for(n=0;n<a.length;n++){var h=a[n][T];for(r=0;r<h.length;r++){var s=h[r];s!=null&&(e[s]=1)}}return Object.keys(e)}U.exports=function(M,T,e,a){if(T.type==="category"){var n=M.categoryarray,r=Array.isArray(n)&&n.length>0,t;r&&(t="array");var h=e("categoryorder",t),s;h==="array"&&(s=e("categoryarray")),!r&&h==="array"&&(h=T.categoryorder="trace"),h==="trace"?T._initialCategories=[]:h==="array"?T._initialCategories=s.slice():(s=w(T,a).sort(),h==="category ascending"?T._initialCategories=s:h==="category descending"&&(T._initialCategories=s.reverse()))}}},{}],572:[function(i,U,V){var w=i("fast-isnumeric"),f=i("../../lib"),M=i("../../constants/numerical"),T=M.ONEDAY,e=M.ONEWEEK;V.dtick=function(a,n){var r=n==="log",t=n==="date",h=n==="category",s=t?T:1;if(!a)return s;if(w(a))return a=Number(a),a<=0?s:h?Math.max(1,Math.round(a)):t?Math.max(.1,a):a;if(typeof a!="string"||!(t||r))return s;var o=a.charAt(0),y=a.substr(1);return y=w(y)?Number(y):0,y<=0||!(t&&o==="M"&&y===Math.round(y)||r&&o==="L"||r&&o==="D"&&(y===1||y===2))?s:a},V.tick0=function(a,n,r,t){if(n==="date")return f.cleanDate(a,f.dateTick0(r,t%e===0?1:0));if(!(t==="D1"||t==="D2"))return w(a)?Number(a):0}},{"../../constants/numerical":491,"../../lib":515,"fast-isnumeric":190}],573:[function(i,U,V){var w=i("../../lib/regex").counter;U.exports={idRegex:{x:w("x","( domain)?"),y:w("y","( domain)?")},attrRegex:w("[xy]axis"),xAxisMatch:w("xaxis"),yAxisMatch:w("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINZOOM:20,DRAGGERSIZE:20,REDRAWDELAY:50,DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},{"../../lib/regex":532}],574:[function(i,U,V){var w=i("../../lib"),f=i("./autorange"),M=i("./axis_ids").id2name,T=i("./layout_attributes"),e=i("./scale_zoom"),a=i("./set_convert"),n=i("../../constants/numerical").ALMOST_EQUAL,r=i("../../constants/alignment").FROM_BL;V.handleDefaults=function(c,m,l){var x=l.axIds,u=l.axHasImage,A=m._axisConstraintGroups=[],_=m._axisMatchGroups=[],g,b,v,k,S,E,C,F;for(g=0;g<x.length;g++)k=M(x[g]),S=c[k],E=m[k],t(S,E,{axIds:x,layoutOut:m,hasImage:u[k]});function I(j,re){for(g=0;g<j.length;g++){b=j[g];for(v in b)m[M(v)][re]=b}}for(I(_,"_matchGroup"),g=0;g<A.length;g++){b=A[g];for(v in b)if(E=m[M(v)],E.fixedrange){for(var D in b){var R=M(D);(c[R]||{}).fixedrange===!1&&w.warn("fixedrange was specified as false for axis "+R+" but was overridden because another axis in its constraint group has fixedrange true"),m[R].fixedrange=!0}break}}for(g=0;g<A.length;){b=A[g];for(v in b){E=m[M(v)],E._matchGroup&&Object.keys(E._matchGroup).length===Object.keys(b).length&&(A.splice(g,1),g--);break}g++}I(A,"_constraintGroup");var O=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],z=!1,B=!1;function G(){F=E[C],C==="rangebreaks"&&(B=E._hasDayOfWeekBreaks)}for(g=0;g<_.length;g++){b=_[g];for(var Q=0;Q<O.length;Q++){C=O[Q],F=null;var X;for(v in b)if(k=M(v),S=c[k],E=m[k],C in E){if(!E.matches&&(X=E,C in S)){G();break}F===null&&C in S&&G()}if(C==="range"&&F&&(z=!0),C==="autorange"&&F===null&&z&&(F=!1),F===null&&C in X&&(F=X[C]),F!==null)for(v in b)E=m[M(v)],E[C]=C==="range"?F.slice():F,C==="rangebreaks"&&(E._hasDayOfWeekBreaks=B,a(E,m))}}};function t(c,m,l){var x=l.axIds,u=l.layoutOut,A=l.hasImage,_=u._axisConstraintGroups,g=u._axisMatchGroups,b=m._id,v=b.charAt(0),k=((u._splomAxes||{})[v]||{})[b]||{},S=m._id,E=S.charAt(0)==="x";m._matchGroup=null,m._constraintGroup=null;function C(te,Y){return w.coerce(c,m,T,te,Y)}C("constrain",A?"domain":"range"),w.coerce(c,m,{constraintoward:{valType:"enumerated",values:E?["left","center","right"]:["bottom","middle","top"],dflt:E?"center":"middle"}},"constraintoward");var F=m.type,I,D,R=[];for(I=0;I<x.length;I++)if(D=x[I],D!==S){var O=u[M(D)];O.type===F&&R.push(D)}var z=s(_,S);if(z){var B=[];for(I=0;I<R.length;I++)D=R[I],z[D]||B.push(D);R=B}var G=R.length,Q,X;G&&(c.matches||k.matches)&&(Q=w.coerce(c,m,{matches:{valType:"enumerated",values:R,dflt:R.indexOf(k.matches)!==-1?k.matches:void 0}},"matches"));var j=A&&!E?m.anchor:void 0;if(G&&!Q&&(c.scaleanchor||j)&&(X=w.coerce(c,m,{scaleanchor:{valType:"enumerated",values:R}},"scaleanchor",j)),Q){m._matchGroup=o(g,S,Q,1);var re=u[M(Q)],ue=h(u,m)/h(u,re);E!==(Q.charAt(0)==="x")&&(ue=(E?"x":"y")+ue),o(_,S,Q,ue)}else c.matches&&x.indexOf(c.matches)!==-1&&w.warn("ignored "+m._name+'.matches: "'+c.matches+'" to avoid an infinite loop');if(X){var K=C("scaleratio");K||(K=m.scaleratio=1),o(_,S,X,K)}else c.scaleanchor&&x.indexOf(c.scaleanchor)!==-1&&w.warn("ignored "+m._name+'.scaleanchor: "'+c.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function h(c,m){var l=m.domain;return l||(l=c[M(m.overlaying)].domain),l[1]-l[0]}function s(c,m){for(var l=0;l<c.length;l++)if(c[l][m])return c[l];return null}function o(c,m,l,x){var u,A,_,g,b,v=s(c,m);v===null?(v={},v[m]=1,b=c.length,c.push(v)):b=c.indexOf(v);var k=Object.keys(v);for(u=0;u<c.length;u++)if(_=c[u],u!==b&&_[l]){var S=_[l];for(A=0;A<k.length;A++)g=k[A],_[g]=y(S,y(x,v[g]));c.splice(b,1);return}if(x!==1)for(A=0;A<k.length;A++){var E=k[A];v[E]=y(x,v[E])}v[l]=1}function y(c,m){var l="",x="",u,A;typeof c=="string"&&(l=c.match(/^[xy]*/)[0],u=l.length,c=+c.substr(u)),typeof m=="string"&&(x=m.match(/^[xy]*/)[0],A=x.length,m=+m.substr(A));var _=c*m;return!u&&!A?_:!u||!A||l.charAt(0)===x.charAt(0)?l+x+c*m:u===A?_:(u>A?l.substr(A):x.substr(u))+_}function d(c,m){for(var l=m._size,x=l.h/l.w,u={},A=Object.keys(c),_=0;_<A.length;_++){var g=A[_],b=c[g];if(typeof b=="string"){var v=b.match(/^[xy]*/)[0],k=v.length;b=+b.substr(k);for(var S=v.charAt(0)==="y"?x:1/x,E=0;E<k;E++)b*=S}u[g]=b}return u}V.enforce=function(m){var l=m._fullLayout,x=l._axisConstraintGroups||[],u,A,_,g,b,v,k,S;for(u=0;u<x.length;u++){_=d(x[u],l);var E=Object.keys(_),C=1/0,F=0,I=1/0,D={},R={},O=!1;for(A=0;A<E.length;A++)g=E[A],R[g]=b=l[M(g)],b._inputDomain?b.domain=b._inputDomain.slice():b._inputDomain=b.domain.slice(),b._inputRange||(b._inputRange=b.range.slice()),b.setScale(),D[g]=v=Math.abs(b._m)/_[g],C=Math.min(C,v),(b.constrain==="domain"||!b._constraintShrinkable)&&(I=Math.min(I,v)),delete b._constraintShrinkable,F=Math.max(F,v),b.constrain==="domain"&&(O=!0);if(!(C>n*F&&!O)){for(A=0;A<E.length;A++)if(g=E[A],v=D[g],b=R[g],k=b.constrain,v!==I||k==="domain")if(S=v/I,k==="range")e(b,S);else{var z=b._inputDomain,B=(b.domain[1]-b.domain[0])/(z[1]-z[0]),G=(b.r2l(b.range[1])-b.r2l(b.range[0]))/(b.r2l(b._inputRange[1])-b.r2l(b._inputRange[0]));if(S/=B,S*G<1){b.domain=b._input.domain=z.slice(),e(b,S);continue}if(G<1&&(b.range=b._input.range=b._inputRange.slice(),S*=G),b.autorange){var Q=b.r2l(b.range[0]),X=b.r2l(b.range[1]),j=(Q+X)/2,re=j,ue=j,K=Math.abs(X-j),te=j-K*S*1.0001,Y=j+K*S*1.0001,H=f.makePadFn(l,b,0),ee=f.makePadFn(l,b,1);p(b,S);var ne=Math.abs(b._m),Z=f.concatExtremes(m,b),q=Z.min,ie=Z.max,se,ae;for(ae=0;ae<q.length;ae++)se=q[ae].val-H(q[ae])/ne,se>te&&se<re&&(re=se);for(ae=0;ae<ie.length;ae++)se=ie[ae].val+ee(ie[ae])/ne,se<Y&&se>ue&&(ue=se);var oe=(ue-re)/(2*K);S/=oe,re=b.l2r(re),ue=b.l2r(ue),b.range=b._input.range=Q<X?[re,ue]:[ue,re]}p(b,S)}}}},V.getAxisGroup=function(m,l){for(var x=m._axisMatchGroups,u=0;u<x.length;u++){var A=x[u];if(A[l])return"g"+u}return l},V.clean=function(m,l){if(l._inputDomain){for(var x=!1,u=l._id,A=m._fullLayout._axisConstraintGroups,_=0;_<A.length;_++)if(A[_][u]){x=!0;break}(!x||l.constrain!=="domain")&&(l._input.domain=l.domain=l._inputDomain,delete l._inputDomain)}};function p(c,m){var l=c._inputDomain,x=r[c.constraintoward],u=l[0]+(l[1]-l[0])*x;c.domain=c._input.domain=[u+(l[0]-u)/m,u+(l[1]-u)/m],c.setScale()}},{"../../constants/alignment":483,"../../constants/numerical":491,"../../lib":515,"./autorange":565,"./axis_ids":570,"./layout_attributes":579,"./scale_zoom":584,"./set_convert":585}],575:[function(i,U,V){var w=i("@plotly/d3"),f=i("../../lib"),M=f.numberFormat,T=i("tinycolor2"),e=i("has-passive-events"),a=i("../../registry"),n=f.strTranslate,r=i("../../lib/svg_text_utils"),t=i("../../components/color"),h=i("../../components/drawing"),s=i("../../components/fx"),o=i("./axes"),y=i("../../lib/setcursor"),d=i("../../components/dragelement"),p=i("../../components/dragelement/helpers"),c=p.selectingOrDrawing,m=p.freeMode,l=i("../../constants/alignment").FROM_TL,x=i("../../lib/clear_gl_canvases"),u=i("../../plot_api/subroutines").redrawReglTraces,A=i("../plots"),_=i("./axis_ids").getFromId,g=i("../../components/selections").prepSelect,b=i("../../components/selections").clearOutline,v=i("../../components/selections").selectOnClick,k=i("./scale_zoom"),S=i("./constants"),E=S.MINDRAG,C=S.MINZOOM,F=!0;function I(se,ae,oe,be,ce,de,ye,ge){var me=se._fullLayout._zoomlayer,Se=ye+ge==="nsew",Le=(ye+ge).length===1,Oe,we,Ce,Ke,Ye,Fe,Re,je,xt,Nt,tr,Ht,Pt,$t,Ut,Lt,We,ot,Ge,Me,Ve,Qe,tt;function St(){if(Oe=ae.xaxis,we=ae.yaxis,xt=Oe._length,Nt=we._length,Re=Oe._offset,je=we._offset,Ce={},Ce[Oe._id]=Oe,Ke={},Ke[we._id]=we,ye&&ge)for(var Sr=ae.overlays,Pr=0;Pr<Sr.length;Pr++){var Jr=Sr[Pr].xaxis;Ce[Jr._id]=Jr;var ur=Sr[Pr].yaxis;Ke[ur._id]=ur}Ye=ie(Ce),Fe=ie(Ke),Pt=O(Ye,ge),$t=O(Fe,ye),Ut=!$t&&!Pt,Ht=Z(se,se._fullLayout._axisMatchGroups,Ce,Ke),tr=Z(se,se._fullLayout._axisConstraintGroups,Ce,Ke,Ht);var _r=tr.isSubplotConstrained||Ht.isSubplotConstrained;Lt=ge||_r,We=ye||_r;var Br=se._fullLayout;ot=Br._has("scattergl"),Ge=Br._has("splom"),Me=Br._has("svg")}St();var wt=X($t+Pt,se._fullLayout.dragmode,Se),Ct=R(ae,ye+ge+"drag",wt,oe,be,ce,de);if(Ut&&!Se)return Ct.onmousedown=null,Ct.style.pointerEvents="none",Ct;var jt={element:Ct,gd:se,plotinfo:ae};jt.prepFn=function(Sr,Pr,Jr){var ur=jt.dragmode,_r=se._fullLayout.dragmode;_r!==ur&&(jt.dragmode=_r),St(),Qe=se._fullLayout._invScaleX,tt=se._fullLayout._invScaleY,Ut||(Se?Sr.shiftKey?_r==="pan"?_r="zoom":c(_r)||(_r="pan"):Sr.ctrlKey&&(_r="pan"):_r="pan"),m(_r)?jt.minDrag=1:jt.minDrag=void 0,c(_r)?(jt.xaxes=Ye,jt.yaxes=Fe,g(Sr,Pr,Jr,jt,_r)):(jt.clickFn=Wt,c(ur)&&Bt(),Ut||(_r==="zoom"?(jt.moveFn=st,jt.doneFn=ht,jt.minDrag=1,Er(Sr,Pr,Jr)):_r==="pan"&&(jt.moveFn=lt,jt.doneFn=_t))),se._fullLayout._redrag=function(){var Br=se._dragdata;if(Br&&Br.element===Ct){var Yr=se._fullLayout.dragmode;c(Yr)||(St(),Dt([0,0,xt,Nt]),jt.moveFn(Br.dx,Br.dy))}}};function Bt(){jt.plotinfo.selection=!1,b(se)}function Wt(Sr,Pr){var Jr=jt.gd;if(Jr._fullLayout._activeShapeIndex>=0){Jr._fullLayout._deactivateShape(Jr);return}var ur=Jr._fullLayout.clickmode;if(te(Jr),Sr===2&&!Le&&Rt(),Se)ur.indexOf("select")>-1&&v(Pr,Jr,Ye,Fe,ae.id,jt),ur.indexOf("event")>-1&&s.click(Jr,Pr,ae.id);else if(Sr===1&&Le){var _r=ye?we:Oe,Br=ye==="s"||ge==="w"?0:1,Yr=_r._name+".range["+Br+"]",Dr=z(_r,Br),it="left",zt="middle";if(_r.fixedrange)return;ye?(zt=ye==="n"?"top":"bottom",_r.side==="right"&&(it="right")):ge==="e"&&(it="right"),Jr._context.showAxisRangeEntryBoxes&&w.select(Ct).call(r.makeEditable,{gd:Jr,immediate:!0,background:Jr._fullLayout.paper_bgcolor,text:String(Dr),fill:_r.tickfont?_r.tickfont.color:"#444",horizontalAlign:it,verticalAlign:zt}).on("edit",function(qt){var hr=_r.d2r(qt);hr!==void 0&&a.call("_guiRelayout",Jr,Yr,hr)})}}d.init(jt);var Qt,Zt,cr,Xr,vn,en,ut,ar,rr,Kt;function Er(Sr,Pr,Jr){var ur=Ct.getBoundingClientRect();Qt=Pr-ur.left,Zt=Jr-ur.top,se._fullLayout._calcInverseTransform(se);var _r=f.apply3DTransform(se._fullLayout._invTransform)(Qt,Zt);Qt=_r[0],Zt=_r[1],cr={l:Qt,r:Qt,w:0,t:Zt,b:Zt,h:0},Xr=se._hmpixcount?se._hmlumcount/se._hmpixcount:T(se._fullLayout.plot_bgcolor).getLuminance(),vn="M0,0H"+xt+"V"+Nt+"H0V0",en=!1,ut="xy",Kt=!1,ar=j(me,Xr,Re,je,vn),rr=re(me,Re,je)}function st(Sr,Pr){if(se._transitioningWithDuration)return!1;var Jr=Math.max(0,Math.min(xt,Qe*Sr+Qt)),ur=Math.max(0,Math.min(Nt,tt*Pr+Zt)),_r=Math.abs(Jr-Qt),Br=Math.abs(ur-Zt);cr.l=Math.min(Qt,Jr),cr.r=Math.max(Qt,Jr),cr.t=Math.min(Zt,ur),cr.b=Math.max(Zt,ur);function Yr(){ut="",cr.r=cr.l,cr.t=cr.b,rr.attr("d","M0,0Z")}if(tr.isSubplotConstrained)_r>C||Br>C?(ut="xy",_r/xt>Br/Nt?(Br=_r*Nt/xt,Zt>ur?cr.t=Zt-Br:cr.b=Zt+Br):(_r=Br*xt/Nt,Qt>Jr?cr.l=Qt-_r:cr.r=Qt+_r),rr.attr("d",ne(cr))):Yr();else if(Ht.isSubplotConstrained)if(_r>C||Br>C){ut="xy";var Dr=Math.min(cr.l/xt,(Nt-cr.b)/Nt),it=Math.max(cr.r/xt,(Nt-cr.t)/Nt);cr.l=Dr*xt,cr.r=it*xt,cr.b=(1-Dr)*Nt,cr.t=(1-it)*Nt,rr.attr("d",ne(cr))}else Yr();else!$t||Br<Math.min(Math.max(_r*.6,E),C)?_r<E||!Pt?Yr():(cr.t=0,cr.b=Nt,ut="x",rr.attr("d",H(cr,Zt))):!Pt||_r<Math.min(Br*.6,C)?(cr.l=0,cr.r=xt,ut="y",rr.attr("d",ee(cr,Qt))):(ut="xy",rr.attr("d",ne(cr)));cr.w=cr.r-cr.l,cr.h=cr.b-cr.t,ut&&(Kt=!0),se._dragged=Kt,ue(ar,rr,cr,vn,en,Xr),et(),se.emit("plotly_relayouting",Ve),en=!0}function et(){Ve={},(ut==="xy"||ut==="x")&&(B(Ye,cr.l/xt,cr.r/xt,Ve,tr.xaxes),ft("x",Ve)),(ut==="xy"||ut==="y")&&(B(Fe,(Nt-cr.b)/Nt,(Nt-cr.t)/Nt,Ve,tr.yaxes),ft("y",Ve))}function ht(){et(),te(se),_t(),Y(se)}var vt=[0,0,xt,Nt],kt=null,Vt=S.REDRAWDELAY,Pe=ae.mainplot?se._fullLayout._plots[ae.mainplot]:ae;function ke(Sr){if(!se._context._scrollZoom.cartesian&&!se._fullLayout._enablescrollzoom)return;if(Bt(),se._transitioningWithDuration){Sr.preventDefault(),Sr.stopPropagation();return}St(),clearTimeout(kt);var Pr=-Sr.deltaY;if(isFinite(Pr)||(Pr=Sr.wheelDelta/10),!isFinite(Pr)){f.log("Did not find wheel motion attributes: ",Sr);return}var Jr=Math.exp(-Math.min(Math.max(Pr,-20),20)/200),ur=Pe.draglayer.select(".nsewdrag").node().getBoundingClientRect(),_r=(Sr.clientX-ur.left)/ur.width,Br=(ur.bottom-Sr.clientY)/ur.height,Yr;function Dr(it,zt,qt){if(it.fixedrange)return;var hr=f.simpleMap(it.range,it.r2l),Ur=hr[0]+(hr[1]-hr[0])*zt;function Gr(Ir){return it.l2r(Ur+(Ir-Ur)*qt)}it.range=hr.map(Gr)}if(Lt){for(ge||(_r=.5),Yr=0;Yr<Ye.length;Yr++)Dr(Ye[Yr],_r,Jr);ft("x"),vt[2]*=Jr,vt[0]+=vt[2]*_r*(1/Jr-1)}if(We){for(ye||(Br=.5),Yr=0;Yr<Fe.length;Yr++)Dr(Fe[Yr],Br,Jr);ft("y"),vt[3]*=Jr,vt[1]+=vt[3]*(1-Br)*(1/Jr-1)}Dt(vt),yt(),se.emit("plotly_relayouting",Ve),kt=setTimeout(function(){!se._fullLayout||(vt=[0,0,xt,Nt],_t())},Vt),Sr.preventDefault()}ye.length*ge.length!==1&&q(Ct,ke);function lt(Sr,Pr){if(Sr=Sr*Qe,Pr=Pr*tt,se._transitioningWithDuration)return;if(se._fullLayout._replotting=!0,Pt==="ew"||$t==="ns"){var Jr=Pt?-Sr:0,ur=$t?-Pr:0;if(Ht.isSubplotConstrained){if(Pt&&$t){var _r=(Sr/xt-Pr/Nt)/2;Sr=_r*xt,Pr=-_r*Nt,Jr=-Sr,ur=-Pr}$t?Jr=-ur*xt/Nt:ur=-Jr*Nt/xt}Pt&&(G(Ye,Sr),ft("x")),$t&&(G(Fe,Pr),ft("y")),Dt([Jr,ur,xt,Nt]),yt(),se.emit("plotly_relayouting",Ve);return}function Br(Gr,Ir,Cr){for(var Kr=1-Ir,Cn,yn,Yn=0;Yn<Gr.length;Yn++){var In=Gr[Yn];if(!In.fixedrange){Cn=In,yn=In._rl[Kr]+(In._rl[Ir]-In._rl[Kr])/Q(Cr/In._length);var Jn=In.l2r(yn);Jn!==!1&&Jn!==void 0&&(In.range[Ir]=Jn)}}return Cn._length*(Cn._rl[Ir]-yn)/(Cn._rl[Ir]-Cn._rl[Kr])}var Yr=Pt==="w"==($t==="n")?1:-1;if(Pt&&$t&&(tr.isSubplotConstrained||Ht.isSubplotConstrained)){var Dr=(Sr/xt+Yr*Pr/Nt)/2;Sr=Dr*xt,Pr=Yr*Dr*Nt}var it,zt;if(Pt==="w"?Sr=Br(Ye,0,Sr):Pt==="e"?Sr=Br(Ye,1,-Sr):Pt||(Sr=0),$t==="n"?Pr=Br(Fe,1,Pr):$t==="s"?Pr=Br(Fe,0,-Pr):$t||(Pr=0),it=Pt==="w"?Sr:0,zt=$t==="n"?Pr:0,tr.isSubplotConstrained&&!Ht.isSubplotConstrained||Ht.isSubplotConstrained&&Pt&&$t&&Yr>0){var qt;if(Ht.isSubplotConstrained||!Pt&&$t.length===1){for(qt=0;qt<Ye.length;qt++)Ye[qt].range=Ye[qt]._r.slice(),k(Ye[qt],1-Pr/Nt);Sr=Pr*xt/Nt,it=Sr/2}if(Ht.isSubplotConstrained||!$t&&Pt.length===1){for(qt=0;qt<Fe.length;qt++)Fe[qt].range=Fe[qt]._r.slice(),k(Fe[qt],1-Sr/xt);Pr=Sr*Nt/xt,zt=Pr/2}}(!Ht.isSubplotConstrained||!$t)&&ft("x"),(!Ht.isSubplotConstrained||!Pt)&&ft("y");var hr=xt-Sr,Ur=Nt-Pr;Ht.isSubplotConstrained&&!(Pt&&$t)&&(Pt?(zt=it?0:Sr*Nt/xt,Ur=hr*Nt/xt):(it=zt?0:Pr*xt/Nt,hr=Ur*xt/Nt)),Dt([it,zt,hr,Ur]),yt(),se.emit("plotly_relayouting",Ve)}function ft(Sr,Pr){for(var Jr=Ht.isSubplotConstrained?{x:Fe,y:Ye}[Sr]:Ht[Sr+"axes"],ur=Ht.isSubplotConstrained?{x:Ye,y:Fe}[Sr]:[],_r=0;_r<Jr.length;_r++){var Br=Jr[_r],Yr=Br._id,Dr=Ht.xLinks[Yr]||Ht.yLinks[Yr],it=ur[0]||Ce[Dr]||Ke[Dr];it&&(Pr?(Pr[Br._name+".range[0]"]=Pr[it._name+".range[0]"],Pr[Br._name+".range[1]"]=Pr[it._name+".range[1]"]):Br.range=it.range.slice())}}function yt(){var Sr=[],Pr;function Jr(Br){for(Pr=0;Pr<Br.length;Pr++)Br[Pr].fixedrange||Sr.push(Br[Pr]._id)}for(Lt&&(Jr(Ye),Jr(tr.xaxes),Jr(Ht.xaxes)),We&&(Jr(Fe),Jr(tr.yaxes),Jr(Ht.yaxes)),Ve={},Pr=0;Pr<Sr.length;Pr++){var ur=Sr[Pr],_r=_(se,ur);o.drawOne(se,_r,{skipTitle:!0}),Ve[_r._name+".range[0]"]=_r.range[0],Ve[_r._name+".range[1]"]=_r.range[1]}o.redrawComponents(se,Sr)}function Rt(){if(!se._transitioningWithDuration){var Sr=se._context.doubleClick,Pr=[];Pt&&(Pr=Pr.concat(Ye)),$t&&(Pr=Pr.concat(Fe)),Ht.xaxes&&(Pr=Pr.concat(Ht.xaxes)),Ht.yaxes&&(Pr=Pr.concat(Ht.yaxes));var Jr={},ur,_r,Br;if(Sr==="reset+autosize"){for(Sr="autosize",_r=0;_r<Pr.length;_r++)if(ur=Pr[_r],ur._rangeInitial&&(ur.range[0]!==ur._rangeInitial[0]||ur.range[1]!==ur._rangeInitial[1])||!ur._rangeInitial&&!ur.autorange){Sr="reset";break}}if(Sr==="autosize")for(_r=0;_r<Pr.length;_r++)ur=Pr[_r],ur.fixedrange||(Jr[ur._name+".autorange"]=!0);else if(Sr==="reset")for((Pt||tr.isSubplotConstrained)&&(Pr=Pr.concat(tr.xaxes)),$t&&!tr.isSubplotConstrained&&(Pr=Pr.concat(tr.yaxes)),tr.isSubplotConstrained&&(Pt?$t||(Pr=Pr.concat(Fe)):Pr=Pr.concat(Ye)),_r=0;_r<Pr.length;_r++)ur=Pr[_r],ur.fixedrange||(ur._rangeInitial?(Br=ur._rangeInitial,Jr[ur._name+".range[0]"]=Br[0],Jr[ur._name+".range[1]"]=Br[1]):Jr[ur._name+".autorange"]=!0);se.emit("plotly_doubleclick",null),a.call("_guiRelayout",se,Jr)}}function _t(){Dt([0,0,xt,Nt]),f.syncOrAsync([A.previousPromises,function(){se._fullLayout._replotting=!1,a.call("_guiRelayout",se,Ve)}],se)}function Dt(Sr){var Pr=se._fullLayout,Jr=Pr._plots,ur=Pr._subplots.cartesian,_r,Br,Yr,Dr;if(Ge&&a.subplotsRegistry.splom.drag(se),ot){for(_r=0;_r<ur.length;_r++)if(Br=Jr[ur[_r]],Yr=Br.xaxis,Dr=Br.yaxis,Br._scene){var it=f.simpleMap(Yr.range,Yr.r2l),zt=f.simpleMap(Dr.range,Dr.r2l);Br._scene.update({range:[it[0],zt[0],it[1],zt[1]]})}}if((Ge||ot)&&(x(se),u(se)),Me){var qt=Sr[2]/Oe._length,hr=Sr[3]/we._length;for(_r=0;_r<ur.length;_r++){Br=Jr[ur[_r]],Yr=Br.xaxis,Dr=Br.yaxis;var Ur=(Lt||Ht.isSubplotConstrained)&&!Yr.fixedrange&&Ce[Yr._id],Gr=(We||Ht.isSubplotConstrained)&&!Dr.fixedrange&&Ke[Dr._id],Ir,Cr,Kr,Cn;if(Ur?(Ir=qt,Kr=ge||Ht.isSubplotConstrained?Sr[0]:Rr(Yr,Ir)):Ht.xaHash[Yr._id]?(Ir=qt,Kr=Sr[0]*Yr._length/Oe._length):Ht.yaHash[Yr._id]?(Ir=hr,Kr=$t==="ns"?-Sr[1]*Yr._length/we._length:Rr(Yr,Ir,{n:"top",s:"bottom"}[$t])):(Ir=Jt(Yr,qt,hr),Kr=fr(Yr,Ir)),Gr?(Cr=hr,Cn=ye||Ht.isSubplotConstrained?Sr[1]:Rr(Dr,Cr)):Ht.yaHash[Dr._id]?(Cr=hr,Cn=Sr[1]*Dr._length/we._length):Ht.xaHash[Dr._id]?(Cr=qt,Cn=Pt==="ew"?-Sr[0]*Dr._length/Oe._length:Rr(Dr,Cr,{e:"right",w:"left"}[Pt])):(Cr=Jt(Dr,qt,hr),Cn=fr(Dr,Cr)),!(!Ir&&!Cr)){Ir||(Ir=1),Cr||(Cr=1);var yn=Yr._offset-Kr/Ir,Yn=Dr._offset-Cn/Cr;Br.clipRect.call(h.setTranslate,Kr,Cn).call(h.setScale,Ir,Cr),Br.plot.call(h.setTranslate,yn,Yn).call(h.setScale,1/Ir,1/Cr),(Ir!==Br.xScaleFactor||Cr!==Br.yScaleFactor)&&(h.setPointGroupScale(Br.zoomScalePts,Ir,Cr),h.setTextPointsScale(Br.zoomScaleTxt,Ir,Cr)),h.hideOutsideRangePoints(Br.clipOnAxisFalseTraces,Br),Br.xScaleFactor=Ir,Br.yScaleFactor=Cr}}}}function Jt(Sr,Pr,Jr){return Sr.fixedrange?0:Lt&&tr.xaHash[Sr._id]?Pr:We&&(tr.isSubplotConstrained?tr.xaHash:tr.yaHash)[Sr._id]?Jr:0}function fr(Sr,Pr){return Pr?(Sr.range=Sr._r.slice(),k(Sr,Pr),Rr(Sr,Pr)):0}function Rr(Sr,Pr,Jr){return Sr._length*(1-Pr)*l[Jr||Sr.constraintoward||"middle"]}return Ct}function D(se,ae,oe,be){var ce=f.ensureSingle(se.draglayer,ae,oe,function(de){de.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",se.id)});return ce.call(y,be),ce.node()}function R(se,ae,oe,be,ce,de,ye){var ge=D(se,"rect",ae,oe);return w.select(ge).call(h.setRect,be,ce,de,ye),ge}function O(se,ae){for(var oe=0;oe<se.length;oe++)if(!se[oe].fixedrange)return ae;return""}function z(se,ae){var oe=se.range[ae],be=Math.abs(oe-se.range[1-ae]),ce;return se.type==="date"?oe:se.type==="log"?(ce=Math.ceil(Math.max(0,-Math.log(be)/Math.LN10))+3,M("."+ce+"g")(Math.pow(10,oe))):(ce=Math.floor(Math.log(Math.abs(oe))/Math.LN10)-Math.floor(Math.log(be)/Math.LN10)+4,M("."+String(ce)+"g")(oe))}function B(se,ae,oe,be,ce){for(var de=0;de<se.length;de++){var ye=se[de];if(!ye.fixedrange)if(ye.rangebreaks){var ge=ye._id.charAt(0)==="y",me=ge?1-ae:ae,Se=ge?1-oe:oe;be[ye._name+".range[0]"]=ye.l2r(ye.p2l(me*ye._length)),be[ye._name+".range[1]"]=ye.l2r(ye.p2l(Se*ye._length))}else{var Le=ye._rl[0],Oe=ye._rl[1]-Le;be[ye._name+".range[0]"]=ye.l2r(Le+Oe*ae),be[ye._name+".range[1]"]=ye.l2r(Le+Oe*oe)}}if(ce&&ce.length){var we=(ae+(1-oe))/2;B(ce,we,1-we,be,[])}}function G(se,ae){for(var oe=0;oe<se.length;oe++){var be=se[oe];if(!be.fixedrange)if(be.rangebreaks){var ce=0,de=be._length,ye=be.p2l(ce+ae)-be.p2l(ce),ge=be.p2l(de+ae)-be.p2l(de),me=(ye+ge)/2;be.range=[be.l2r(be._rl[0]-me),be.l2r(be._rl[1]-me)]}else be.range=[be.l2r(be._rl[0]-ae/be._m),be.l2r(be._rl[1]-ae/be._m)]}}function Q(se){return 1-(se>=0?Math.min(se,.9):1/(1/Math.max(se,-.3)+3.222))}function X(se,ae,oe){return se?se==="nsew"?oe?"":ae==="pan"?"move":"crosshair":se.toLowerCase()+"-resize":"pointer"}function j(se,ae,oe,be,ce){return se.append("path").attr("class","zoombox").style({fill:ae>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",n(oe,be)).attr("d",ce+"Z")}function re(se,ae,oe){return se.append("path").attr("class","zoombox-corners").style({fill:t.background,stroke:t.defaultLine,"stroke-width":1,opacity:0}).attr("transform",n(ae,oe)).attr("d","M0,0Z")}function ue(se,ae,oe,be,ce,de){se.attr("d",be+"M"+oe.l+","+oe.t+"v"+oe.h+"h"+oe.w+"v-"+oe.h+"h-"+oe.w+"Z"),K(se,ae,ce,de)}function K(se,ae,oe,be){oe||(se.transition().style("fill",be>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),ae.transition().style("opacity",1).duration(200))}function te(se){w.select(se).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function Y(se){F&&se.data&&se._context.showTips&&(f.notifier(f._(se,"Double-click to zoom back out"),"long"),F=!1)}function H(se,ae){return"M"+(se.l-.5)+","+(ae-C-.5)+"h-3v"+(2*C+1)+"h3ZM"+(se.r+.5)+","+(ae-C-.5)+"h3v"+(2*C+1)+"h-3Z"}function ee(se,ae){return"M"+(ae-C-.5)+","+(se.t-.5)+"v-3h"+(2*C+1)+"v3ZM"+(ae-C-.5)+","+(se.b+.5)+"v3h"+(2*C+1)+"v-3Z"}function ne(se){var ae=Math.floor(Math.min(se.b-se.t,se.r-se.l,C)/2);return"M"+(se.l-3.5)+","+(se.t-.5+ae)+"h3v"+-ae+"h"+ae+"v-3h-"+(ae+3)+"ZM"+(se.r+3.5)+","+(se.t-.5+ae)+"h-3v"+-ae+"h"+-ae+"v-3h"+(ae+3)+"ZM"+(se.r+3.5)+","+(se.b+.5-ae)+"h-3v"+ae+"h"+-ae+"v3h"+(ae+3)+"ZM"+(se.l-3.5)+","+(se.b+.5-ae)+"h3v"+ae+"h"+ae+"v3h-"+(ae+3)+"Z"}function Z(se,ae,oe,be,ce){for(var de=!1,ye={},ge={},me,Se,Le,Oe,we=(ce||{}).xaHash,Ce=(ce||{}).yaHash,Ke=0;Ke<ae.length;Ke++){var Ye=ae[Ke];for(me in oe)if(Ye[me]){for(Le in Ye)!(ce&&(we[Le]||Ce[Le]))&&!(Le.charAt(0)==="x"?oe:be)[Le]&&(ye[Le]=me);for(Se in be)!(ce&&(we[Se]||Ce[Se]))&&Ye[Se]&&(de=!0)}for(Se in be)if(Ye[Se])for(Oe in Ye)!(ce&&(we[Oe]||Ce[Oe]))&&!(Oe.charAt(0)==="x"?oe:be)[Oe]&&(ge[Oe]=Se)}de&&(f.extendFlat(ye,ge),ge={});var Fe={},Re=[];for(Le in ye){var je=_(se,Le);Re.push(je),Fe[je._id]=je}var xt={},Nt=[];for(Oe in ge){var tr=_(se,Oe);Nt.push(tr),xt[tr._id]=tr}return{xaHash:Fe,yaHash:xt,xaxes:Re,yaxes:Nt,xLinks:ye,yLinks:ge,isSubplotConstrained:de}}function q(se,ae){if(!e)se.onwheel!==void 0?se.onwheel=ae:se.onmousewheel!==void 0?se.onmousewheel=ae:se.isAddedWheelEvent||(se.isAddedWheelEvent=!0,se.addEventListener("wheel",ae,{passive:!1}));else{var oe=se.onwheel!==void 0?"wheel":"mousewheel";se._onwheel&&se.removeEventListener(oe,se._onwheel),se._onwheel=ae,se.addEventListener(oe,ae,{passive:!1})}}function ie(se){var ae=[];for(var oe in se)ae.push(se[oe]);return ae}U.exports={makeDragBox:I,makeDragger:D,makeRectDragger:R,makeZoombox:j,makeCorners:re,updateZoombox:ue,xyCorners:ne,transitionZoombox:K,removeZoombox:te,showDoubleClickNotifier:Y,attachWheelEventHandler:q}},{"../../components/color":367,"../../components/dragelement":386,"../../components/dragelement/helpers":385,"../../components/drawing":389,"../../components/fx":407,"../../components/selections":455,"../../constants/alignment":483,"../../lib":515,"../../lib/clear_gl_canvases":499,"../../lib/setcursor":536,"../../lib/svg_text_utils":541,"../../plot_api/subroutines":556,"../../registry":647,"../plots":628,"./axes":566,"./axis_ids":570,"./constants":573,"./scale_zoom":584,"@plotly/d3":58,"has-passive-events":229,tinycolor2:313}],576:[function(i,U,V){var w=i("@plotly/d3"),f=i("../../components/fx"),M=i("../../components/dragelement"),T=i("../../lib/setcursor"),e=i("./dragbox").makeDragBox,a=i("./constants").DRAGGERSIZE;V.initInteractions=function(r){var t=r._fullLayout;if(r._context.staticPlot){w.select(r).selectAll(".drag").remove();return}if(!(!t._has("cartesian")&&!t._has("splom"))){var h=Object.keys(t._plots||{}).sort(function(o,y){if((t._plots[o].mainplot&&!0)===(t._plots[y].mainplot&&!0)){var d=o.split("y"),p=y.split("y");return d[0]===p[0]?Number(d[1]||1)-Number(p[1]||1):Number(d[0]||1)-Number(p[0]||1)}return t._plots[o].mainplot?1:-1});h.forEach(function(o){var y=t._plots[o],d=y.xaxis,p=y.yaxis;if(!y.mainplot){var c=e(r,y,d._offset,p._offset,d._length,p._length,"ns","ew");c.onmousemove=function(x){r._fullLayout._rehover=function(){r._fullLayout._hoversubplot===o&&r._fullLayout._plots[o]&&f.hover(r,x,o)},f.hover(r,x,o),r._fullLayout._lasthover=c,r._fullLayout._hoversubplot=o},c.onmouseout=function(x){r._dragging||(r._fullLayout._hoversubplot=null,M.unhover(r,x))},r._context.showAxisDragHandles&&(e(r,y,d._offset-a,p._offset-a,a,a,"n","w"),e(r,y,d._offset+d._length,p._offset-a,a,a,"n","e"),e(r,y,d._offset-a,p._offset+p._length,a,a,"s","w"),e(r,y,d._offset+d._length,p._offset+p._length,a,a,"s","e"))}if(r._context.showAxisDragHandles){if(o===d._mainSubplot){var m=d._mainLinePosition;d.side==="top"&&(m-=a),e(r,y,d._offset+d._length*.1,m,d._length*.8,a,"","ew"),e(r,y,d._offset,m,d._length*.1,a,"","w"),e(r,y,d._offset+d._length*.9,m,d._length*.1,a,"","e")}if(o===p._mainSubplot){var l=p._mainLinePosition;p.side!=="right"&&(l-=a),e(r,y,l,p._offset+p._length*.1,a,p._length*.8,"ns",""),e(r,y,l,p._offset+p._length*.9,a,p._length*.1,"s",""),e(r,y,l,p._offset,a,p._length*.1,"n","")}}});var s=t._hoverlayer.node();s.onmousemove=function(o){o.target=r._fullLayout._lasthover,f.hover(r,o,t._hoversubplot)},s.onclick=function(o){o.target=r._fullLayout._lasthover,f.click(r,o)},s.onmousedown=function(o){r._fullLayout._lasthover.onmousedown(o)},V.updateFx(r)}},V.updateFx=function(n){var r=n._fullLayout,t=r.dragmode==="pan"?"move":"crosshair";T(r._draggers,t)}},{"../../components/dragelement":386,"../../components/fx":407,"../../lib/setcursor":536,"./constants":573,"./dragbox":575,"@plotly/d3":58}],577:[function(i,U,V){var w=i("../../registry"),f=i("../../lib"),M=i("./axis_ids");U.exports=function(e){return function(n,r){var t=n[e];if(!!Array.isArray(t))for(var h=w.subplotsRegistry.cartesian,s=h.idRegex,o=r._subplots,y=o.xaxis,d=o.yaxis,p=o.cartesian,c=r._has("cartesian")||r._has("gl2d"),m=0;m<t.length;m++){var l=t[m];if(!!f.isPlainObject(l)){var x=M.cleanId(l.xref,"x",!1),u=M.cleanId(l.yref,"y",!1),A=s.x.test(x),_=s.y.test(u);if(A||_){c||f.pushUnique(r._basePlotModules,h);var g=!1;A&&y.indexOf(x)===-1&&(y.push(x),g=!0),_&&d.indexOf(u)===-1&&(d.push(u),g=!0),g&&A&&_&&p.push(x+u)}}}}}},{"../../lib":515,"../../registry":647,"./axis_ids":570}],578:[function(i,U,V){var w=i("@plotly/d3"),f=i("../../registry"),M=i("../../lib"),T=i("../plots"),e=i("../../components/drawing"),a=i("../get_data").getModuleCalcData,n=i("./axis_ids"),r=i("./constants"),t=i("../../constants/xmlns_namespaces"),h=M.ensureSingle;function s(m,l,x){return M.ensureSingle(m,l,x,function(u){u.datum(x)})}V.name="cartesian",V.attr=["xaxis","yaxis"],V.idRoot=["x","y"],V.idRegex=r.idRegex,V.attrRegex=r.attrRegex,V.attributes=i("./attributes"),V.layoutAttributes=i("./layout_attributes"),V.supplyLayoutDefaults=i("./layout_defaults"),V.transitionAxes=i("./transition_axes"),V.finalizeSubplots=function(m,l){var x=l._subplots,u=x.xaxis,A=x.yaxis,_=x.cartesian,g=_.concat(x.gl2d||[]),b={},v={},k,S,E;for(k=0;k<g.length;k++){var C=g[k].split("y");b[C[0]]=1,v["y"+C[1]]=1}for(k=0;k<u.length;k++)S=u[k],b[S]||(E=(m[n.id2name(S)]||{}).anchor,r.idRegex.y.test(E)||(E="y"),_.push(S+E),g.push(S+E),v[E]||(v[E]=1,M.pushUnique(A,E)));for(k=0;k<A.length;k++)E=A[k],v[E]||(S=(m[n.id2name(E)]||{}).anchor,r.idRegex.x.test(S)||(S="x"),_.push(S+E),g.push(S+E),b[S]||(b[S]=1,M.pushUnique(u,S)));if(!g.length){S="",E="";for(var F in m)if(r.attrRegex.test(F)){var I=F.charAt(0);I==="x"?(!S||+F.substr(5)<+S.substr(5))&&(S=F):(!E||+F.substr(5)<+E.substr(5))&&(E=F)}S=S?n.name2id(S):"x",E=E?n.name2id(E):"y",u.push(S),A.push(E),_.push(S+E)}},V.plot=function(m,l,x,u){var A=m._fullLayout,_=A._subplots.cartesian,g=m.calcdata,b;if(!Array.isArray(l))for(l=[],b=0;b<g.length;b++)l.push(b);for(b=0;b<_.length;b++){for(var v=_[b],k=A._plots[v],S=[],E,C=0;C<g.length;C++){var F=g[C],I=F[0].trace;I.xaxis+I.yaxis===v&&((l.indexOf(I.index)!==-1||I.carpet)&&(E&&E[0].trace.xaxis+E[0].trace.yaxis===v&&["tonextx","tonexty","tonext"].indexOf(I.fill)!==-1&&S.indexOf(E)===-1&&S.push(E),S.push(F)),E=F)}o(m,k,S,x,u)}};function o(m,l,x,u,A){for(var _=r.traceLayerClasses,g=m._fullLayout,b=g._modules,v,k,S,E=[],C=[],F=0;F<b.length;F++){v=b[F];var I=v.name,D=f.modules[I].categories;if(D.svg){var R=v.layerName||I+"layer",O=v.plot;k=a(x,O),S=k[0],x=k[1],S.length&&E.push({i:_.indexOf(R),className:R,plotMethod:O,cdModule:S}),D.zoomScale&&C.push("."+R)}}E.sort(function(G,Q){return G.i-Q.i});var z=l.plot.selectAll("g.mlayer").data(E,function(G){return G.className});if(z.enter().append("g").attr("class",function(G){return G.className}).classed("mlayer",!0).classed("rangeplot",l.isRangePlot),z.exit().remove(),z.order(),z.each(function(G){var Q=w.select(this),X=G.className;G.plotMethod(m,l,G.cdModule,Q,u,A),r.clipOnAxisFalseQuery.indexOf("."+X)===-1&&e.setClipUrl(Q,l.layerClipId,m)}),g._has("scattergl")&&(v=f.getModule("scattergl"),S=a(x,v)[0],v.plot(m,l,S)),!m._context.staticPlot&&(l._hasClipOnAxisFalse&&(l.clipOnAxisFalseTraces=l.plot.selectAll(r.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),C.length)){var B=l.plot.selectAll(C.join(",")).selectAll(".trace");l.zoomScalePts=B.selectAll("path.point"),l.zoomScaleTxt=B.selectAll(".textpoint")}}V.clean=function(m,l,x,u){var A=u._plots||{},_=l._plots||{},g=u._subplots||{},b,v,k;if(u._hasOnlyLargeSploms&&!l._hasOnlyLargeSploms)for(k in A)b=A[k],b.plotgroup&&b.plotgroup.remove();var S=u._has&&u._has("gl"),E=l._has&&l._has("gl");if(S&&!E)for(k in A)b=A[k],b._scene&&b._scene.destroy();if(g.xaxis&&g.yaxis){var C=n.listIds({_fullLayout:u});for(v=0;v<C.length;v++){var F=C[v];l[n.id2name(F)]||u._infolayer.selectAll(".g-"+F+"title").remove()}}var I=u._has&&u._has("cartesian"),D=l._has&&l._has("cartesian");if(I&&!D)p(u._cartesianlayer.selectAll(".subplot"),u),u._defs.selectAll(".axesclip").remove(),delete u._axisConstraintGroups,delete u._axisMatchGroups;else if(g.cartesian)for(v=0;v<g.cartesian.length;v++){var R=g.cartesian[v];if(!_[R]){var O="."+R+",."+R+"-x,."+R+"-y";u._cartesianlayer.selectAll(O).remove(),c(R,u)}}},V.drawFramework=function(m){var l=m._fullLayout,x=y(m),u=l._cartesianlayer.selectAll(".subplot").data(x,String);u.enter().append("g").attr("class",function(A){return"subplot "+A[0]}),u.order(),u.exit().call(p,l),u.each(function(A){var _=A[0],g=l._plots[_];g.plotgroup=w.select(this),d(m,g),g.draglayer=h(l._draggers,"g",_)})},V.rangePlot=function(m,l,x){d(m,l),o(m,l,x),T.style(m)};function y(m){var l=m._fullLayout,x=l._subplots.cartesian,u=x.length,A,_,g,b,v,k,S=[],E=[];for(A=0;A<u;A++){g=x[A],b=l._plots[g],v=b.xaxis,k=b.yaxis;var C=v._mainAxis,F=k._mainAxis,I=C._id+F._id,D=l._plots[I];b.overlays=[],I!==g&&D?(b.mainplot=I,b.mainplotinfo=D,E.push(g)):(b.mainplot=void 0,b.mainplotinfo=void 0,S.push(g))}for(A=0;A<E.length;A++)g=E[A],b=l._plots[g],b.mainplotinfo.overlays.push(b);var R=S.concat(E),O=new Array(u);for(A=0;A<u;A++){g=R[A],b=l._plots[g],v=b.xaxis,k=b.yaxis;var z=[g,v.layer,k.layer,v.overlaying||"",k.overlaying||""];for(_=0;_<b.overlays.length;_++)z.push(b.overlays[_].id);O[A]=z}return O}function d(m,l){var x=l.plotgroup,u=l.id,A=r.layerValue2layerClass[l.xaxis.layer],_=r.layerValue2layerClass[l.yaxis.layer],g=m._fullLayout._hasOnlyLargeSploms;if(l.mainplot){var v=l.mainplotinfo,k=v.plotgroup,S=u+"-x",E=u+"-y";l.minorGridlayer=v.minorGridlayer,l.gridlayer=v.gridlayer,l.zerolinelayer=v.zerolinelayer,h(v.overlinesBelow,"path",S),h(v.overlinesBelow,"path",E),h(v.overaxesBelow,"g",S),h(v.overaxesBelow,"g",E),l.plot=h(v.overplot,"g",u),h(v.overlinesAbove,"path",S),h(v.overlinesAbove,"path",E),h(v.overaxesAbove,"g",S),h(v.overaxesAbove,"g",E),l.xlines=k.select(".overlines-"+A).select("."+S),l.ylines=k.select(".overlines-"+_).select("."+E),l.xaxislayer=k.select(".overaxes-"+A).select("."+S),l.yaxislayer=k.select(".overaxes-"+_).select("."+E)}else if(g)l.xlines=h(x,"path","xlines-above"),l.ylines=h(x,"path","ylines-above"),l.xaxislayer=h(x,"g","xaxislayer-above"),l.yaxislayer=h(x,"g","yaxislayer-above");else{var b=h(x,"g","layer-subplot");l.shapelayer=h(b,"g","shapelayer"),l.imagelayer=h(b,"g","imagelayer"),l.minorGridlayer=h(x,"g","minor-gridlayer"),l.gridlayer=h(x,"g","gridlayer"),l.zerolinelayer=h(x,"g","zerolinelayer"),h(x,"path","xlines-below"),h(x,"path","ylines-below"),l.overlinesBelow=h(x,"g","overlines-below"),h(x,"g","xaxislayer-below"),h(x,"g","yaxislayer-below"),l.overaxesBelow=h(x,"g","overaxes-below"),l.plot=h(x,"g","plot"),l.overplot=h(x,"g","overplot"),l.xlines=h(x,"path","xlines-above"),l.ylines=h(x,"path","ylines-above"),l.overlinesAbove=h(x,"g","overlines-above"),h(x,"g","xaxislayer-above"),h(x,"g","yaxislayer-above"),l.overaxesAbove=h(x,"g","overaxes-above"),l.xlines=x.select(".xlines-"+A),l.ylines=x.select(".ylines-"+_),l.xaxislayer=x.select(".xaxislayer-"+A),l.yaxislayer=x.select(".yaxislayer-"+_)}g||(s(l.minorGridlayer,"g",l.xaxis._id),s(l.minorGridlayer,"g",l.yaxis._id),l.minorGridlayer.selectAll("g").map(function(C){return C[0]}).sort(n.idSort),s(l.gridlayer,"g",l.xaxis._id),s(l.gridlayer,"g",l.yaxis._id),l.gridlayer.selectAll("g").map(function(C){return C[0]}).sort(n.idSort)),l.xlines.style("fill","none").classed("crisp",!0),l.ylines.style("fill","none").classed("crisp",!0)}function p(m,l){if(!!m){var x={};m.each(function(v){var k=v[0],S=w.select(this);S.remove(),c(k,l),x[k]=!0});for(var u in l._plots)for(var A=l._plots[u],_=A.overlays||[],g=0;g<_.length;g++){var b=_[g];x[b.id]&&b.plot.selectAll(".trace").remove()}}}function c(m,l){l._draggers.selectAll("g."+m).remove(),l._defs.select("#clip"+l._uid+m+"plot").remove()}V.toSVG=function(m){var l=m._fullLayout._glimages,x=w.select(m).selectAll(".svg-container"),u=x.filter(function(_,g){return g===x.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus");function A(){var _=this,g=_.toDataURL("image/png"),b=l.append("svg:image");b.attr({xmlns:t.svg,"xlink:href":g,preserveAspectRatio:"none",x:0,y:0,width:_.style.width,height:_.style.height})}u.each(A)},V.updateFx=i("./graph_interact").updateFx},{"../../components/drawing":389,"../../constants/xmlns_namespaces":492,"../../lib":515,"../../registry":647,"../get_data":602,"../plots":628,"./attributes":564,"./axis_ids":570,"./constants":573,"./graph_interact":576,"./layout_attributes":579,"./layout_defaults":580,"./transition_axes":590,"@plotly/d3":58}],579:[function(i,U,V){var w=i("../font_attributes"),f=i("../../components/color/attributes"),M=i("../../components/drawing/attributes").dash,T=i("../../lib/extend").extendFlat,e=i("../../plot_api/plot_template").templatedArray,a=i("../../plots/cartesian/axis_format_attributes").descriptionWithDates,n=i("../../constants/numerical").ONEDAY,r=i("./constants"),t=r.HOUR_PATTERN,h=r.WEEKDAY_PATTERN,s={valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}};function o(b){return{valType:"integer",min:0,dflt:b?5:0,editType:"ticks"}}var y={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},d={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},p={valType:"data_array",editType:"ticks"},c={valType:"enumerated",values:["outside","inside",""],editType:"ticks"};function m(b){var v={valType:"number",min:0,editType:"ticks"};return b||(v.dflt=5),v}function l(b){var v={valType:"number",min:0,editType:"ticks"};return b||(v.dflt=1),v}var x={valType:"color",dflt:f.defaultLine,editType:"ticks"},u={valType:"color",dflt:f.lightLine,editType:"ticks"};function A(b){var v={valType:"number",min:0,editType:"ticks"};return b||(v.dflt=1),v}var _=T({},M,{editType:"ticks"}),g={valType:"boolean",editType:"ticks"};U.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:f.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:w({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},scaleanchor:{valType:"enumerated",values:[r.idRegex.x.toString(),r.idRegex.y.toString()],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[r.idRegex.x.toString(),r.idRegex.y.toString()],editType:"calc"},rangebreaks:e("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[h,t,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:n},editType:"calc"}),tickmode:s,nticks:o(),tick0:y,dtick:d,ticklabelstep:{valType:"integer",min:1,dflt:1,editType:"ticks"},tickvals:p,ticktext:{valType:"data_array",editType:"ticks"},ticks:c,tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:m(),tickwidth:l(),tickcolor:x,showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},automargin:{valType:"flaglist",flags:["height","width","left","right","top","bottom"],extras:[!0,!1],dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:T({},M,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:w({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:a("tick label")},tickformatstops:e("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:a("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:f.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:g,gridcolor:u,gridwidth:A(),griddash:_,zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:f.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:f.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",r.idRegex.x.toString(),r.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",r.idRegex.x.toString(),r.idRegex.y.toString()],editType:"plot"},minor:{tickmode:s,nticks:o("minor"),tick0:y,dtick:d,tickvals:p,ticks:c,ticklen:m("minor"),tickwidth:l("minor"),tickcolor:x,gridcolor:u,gridwidth:A("minor"),griddash:_,showgrid:g,editType:"ticks"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:w({editType:"ticks"})}}},{"../../components/color/attributes":366,"../../components/drawing/attributes":388,"../../constants/numerical":491,"../../lib/extend":505,"../../plot_api/plot_template":555,"../../plots/cartesian/axis_format_attributes":569,"../font_attributes":594,"./constants":573}],580:[function(i,U,V){var w=i("../../lib"),f=i("../../components/color"),M=i("../../components/fx/helpers").isUnifiedHover,T=i("../../components/fx/hovermode_defaults"),e=i("../../plot_api/plot_template"),a=i("../layout_attributes"),n=i("./layout_attributes"),r=i("./type_defaults"),t=i("./axis_defaults"),h=i("./constraints"),s=i("./position_defaults"),o=i("./axis_ids"),y=o.id2name,d=o.name2id,p=i("./constants").AX_ID_PATTERN,c=i("../../registry"),m=c.traceIs,l=c.getComponentMethod;function x(u,A,_){Array.isArray(u[A])?u[A].push(_):u[A]=[_]}U.exports=function(A,_,g){var b=_.autotypenumbers,v={},k={},S={},E={},C={},F={},I={},D={},R={},O={},z,B;for(z=0;z<g.length;z++){var G=g[z];if(!(!m(G,"cartesian")&&!m(G,"gl2d"))){var Q;if(G.xaxis)Q=y(G.xaxis),x(v,Q,G);else if(G.xaxes)for(B=0;B<G.xaxes.length;B++)x(v,y(G.xaxes[B]),G);var X;if(G.yaxis)X=y(G.yaxis),x(v,X,G);else if(G.yaxes)for(B=0;B<G.yaxes.length;B++)x(v,y(G.yaxes[B]),G);if(G.type==="funnel"?G.orientation==="h"?(Q&&(k[Q]=!0),X&&(I[X]=!0)):X&&(S[X]=!0):G.type==="image"?(X&&(D[X]=!0),Q&&(D[Q]=!0)):(X&&(C[X]=!0,F[X]=!0),(!m(G,"carpet")||G.type==="carpet"&&!G._cheater)&&Q&&(E[Q]=!0)),G.type==="carpet"&&G._cheater&&Q&&(k[Q]=!0),m(G,"2dMap")&&(R[Q]=!0,R[X]=!0),m(G,"oriented")){var j=G.orientation==="h"?X:Q;O[j]=!0}}}var re=_._subplots,ue=re.xaxis,K=re.yaxis,te=w.simpleMap(ue,y),Y=w.simpleMap(K,y),H=te.concat(Y),ee=f.background;ue.length&&K.length&&(ee=w.coerce(A,_,a,"plot_bgcolor"));var ne=f.combine(ee,_.paper_bgcolor),Z,q,ie,se,ae;function oe(){var Ge=v[Z]||[];ae._traceIndices=Ge.map(function(Me){return Me._expandedIndex}),ae._annIndices=[],ae._shapeIndices=[],ae._selectionIndices=[],ae._imgIndices=[],ae._subplotsWith=[],ae._counterAxes=[],ae._name=ae._attr=Z,ae._id=q}function be(Ge,Me){return w.coerce(se,ae,n,Ge,Me)}function ce(Ge,Me){return w.coerce2(se,ae,n,Ge,Me)}function de(Ge){return Ge==="x"?K:ue}function ye(Ge,Me){for(var Ve=Ge==="x"?te:Y,Qe=[],tt=0;tt<Ve.length;tt++){var St=Ve[tt];St!==Me&&!(A[St]||{}).overlaying&&Qe.push(d(St))}return Qe}var ge={x:de("x"),y:de("y")},me=ge.x.concat(ge.y),Se={},Le=[];function Oe(){var Ge=se.matches;p.test(Ge)&&me.indexOf(Ge)===-1&&(Se[Ge]=se.type,Le=Object.keys(Se))}var we=T(A,_),Ce=M(we);for(z=0;z<H.length;z++){Z=H[z],q=d(Z),ie=Z.charAt(0),w.isPlainObject(A[Z])||(A[Z]={}),se=A[Z],ae=e.newContainer(_,Z,ie+"axis"),oe();var Ke=ie==="x"&&!E[Z]&&k[Z]||ie==="y"&&!C[Z]&&S[Z],Ye=ie==="y"&&(!F[Z]&&I[Z]||D[Z]),Fe={hasMinor:!0,letter:ie,font:_.font,outerTicks:R[Z],showGrid:!O[Z],data:v[Z]||[],bgColor:ne,calendar:_.calendar,automargin:!0,visibleDflt:Ke,reverseDflt:Ye,autotypenumbersDflt:b,splomStash:((_._splomAxes||{})[ie]||{})[q]};be("uirevision",_.uirevision),r(se,ae,be,Fe),t(se,ae,be,Fe,_);var Re=Ce&&ie===we.charAt(0),je=ce("spikecolor",Ce?ae.color:void 0),xt=ce("spikethickness",Ce?1.5:void 0),Nt=ce("spikedash",Ce?"dot":void 0),tr=ce("spikemode",Ce?"across":void 0),Ht=ce("spikesnap"),Pt=be("showspikes",!!Re||!!je||!!xt||!!Nt||!!tr||!!Ht);Pt||(delete ae.spikecolor,delete ae.spikethickness,delete ae.spikedash,delete ae.spikemode,delete ae.spikesnap),s(se,ae,be,{letter:ie,counterAxes:ge[ie],overlayableAxes:ye(ie,Z),grid:_.grid}),be("title.standoff"),Oe(),ae._input=se}for(z=0;z<Le.length;){q=Le[z++],Z=y(q),ie=Z.charAt(0),w.isPlainObject(A[Z])||(A[Z]={}),se=A[Z],ae=e.newContainer(_,Z,ie+"axis"),oe();var $t={letter:ie,font:_.font,outerTicks:R[Z],showGrid:!O[Z],data:[],bgColor:ne,calendar:_.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:b,splomStash:((_._splomAxes||{})[ie]||{})[q]};be("uirevision",_.uirevision),ae.type=Se[q]||"linear",t(se,ae,be,$t,_),s(se,ae,be,{letter:ie,counterAxes:ge[ie],overlayableAxes:ye(ie,Z),grid:_.grid}),be("fixedrange"),Oe(),ae._input=se}var Ut=l("rangeslider","handleDefaults"),Lt=l("rangeselector","handleDefaults");for(z=0;z<te.length;z++)Z=te[z],se=A[Z],ae=_[Z],Ut(A,_,Z),ae.type==="date"&&Lt(se,ae,_,Y,ae.calendar),be("fixedrange");for(z=0;z<Y.length;z++){Z=Y[z],se=A[Z],ae=_[Z];var We=_[y(ae.anchor)],ot=l("rangeslider","isVisible")(We);be("fixedrange",ot)}h.handleDefaults(A,_,{axIds:me.concat(Le).sort(o.idSort),axHasImage:D})}},{"../../components/color":367,"../../components/fx/helpers":403,"../../components/fx/hovermode_defaults":406,"../../lib":515,"../../plot_api/plot_template":555,"../../registry":647,"../layout_attributes":619,"./axis_defaults":568,"./axis_ids":570,"./constants":573,"./constraints":574,"./layout_attributes":579,"./position_defaults":582,"./type_defaults":591}],581:[function(i,U,V){var w=i("tinycolor2").mix,f=i("../../components/color/attributes"),M=i("../../lib");U.exports=function(e,a,n,r){r=r||{};var t=r.dfltColor;function h(S,E){return M.coerce2(e,a,r.attributes,S,E)}var s=h("linecolor",t),o=h("linewidth"),y=n("showline",r.showLine||!!s||!!o);y||(delete a.linecolor,delete a.linewidth);var d=w(t,r.bgColor,r.blend||f.lightFraction).toRgbString(),p=h("gridcolor",d),c=h("gridwidth"),m=h("griddash"),l=n("showgrid",r.showGrid||!!p||!!c||!!m);if(l||(delete a.gridcolor,delete a.gridwidth,delete a.griddash),r.hasMinor){var x=w(a.gridcolor,r.bgColor,67).toRgbString(),u=h("minor.gridcolor",x),A=h("minor.gridwidth",a.gridwidth||1),_=h("minor.griddash",a.griddash||"solid"),g=n("minor.showgrid",!!u||!!A||!!_);g||(delete a.minor.gridcolor,delete a.minor.gridwidth,delete a.minor.griddash)}if(!r.noZeroLine){var b=h("zerolinecolor",t),v=h("zerolinewidth"),k=n("zeroline",r.showGrid||!!b||!!v);k||(delete a.zerolinecolor,delete a.zerolinewidth)}}},{"../../components/color/attributes":366,"../../lib":515,tinycolor2:313}],582:[function(i,U,V){var w=i("fast-isnumeric"),f=i("../../lib");U.exports=function(T,e,a,n){var r=n.counterAxes||[],t=n.overlayableAxes||[],h=n.letter,s=n.grid,o,y,d,p;s&&(y=s._domains[h][s._axisMap[e._id]],o=s._anchors[e._id],y&&(d=s[h+"side"].split(" ")[0],p=s.domain[h][d==="right"||d==="top"?1:0])),y=y||[0,1],o=o||(w(T.position)?"free":r[0]||"free"),d=d||(h==="x"?"bottom":"left"),p=p||0;var c=f.coerce(T,e,{anchor:{valType:"enumerated",values:["free"].concat(r),dflt:o}},"anchor");c==="free"&&a("position",p),f.coerce(T,e,{side:{valType:"enumerated",values:h==="x"?["bottom","top"]:["left","right"],dflt:d}},"side");var m=!1;if(t.length&&(m=f.coerce(T,e,{overlaying:{valType:"enumerated",values:[!1].concat(t),dflt:!1}},"overlaying")),!m){var l=a("domain",y);l[0]>l[1]-1/4096&&(e.domain=y),f.noneOrAll(T.domain,e.domain,y)}return a("layer"),e}},{"../../lib":515,"fast-isnumeric":190}],583:[function(i,U,V){var w=i("./show_dflt");U.exports=function(M,T,e,a,n){n||(n={});var r=n.tickSuffixDflt,t=w(M),h=e("tickprefix");h&&e("showtickprefix",t);var s=e("ticksuffix",r);s&&e("showticksuffix",t)}},{"./show_dflt":586}],584:[function(i,U,V){var w=i("../../constants/alignment").FROM_BL;U.exports=function(M,T,e){e===void 0&&(e=w[M.constraintoward||"center"]);var a=[M.r2l(M.range[0]),M.r2l(M.range[1])],n=a[0]+(a[1]-a[0])*e;M.range=M._input.range=[M.l2r(n+(a[0]-n)*T),M.l2r(n+(a[1]-n)*T)],M.setScale()}},{"../../constants/alignment":483}],585:[function(i,U,V){var w=i("@plotly/d3"),f=i("d3-time-format").utcFormat,M=i("../../lib"),T=M.numberFormat,e=i("fast-isnumeric"),a=M.cleanNumber,n=M.ms2DateTime,r=M.dateTime2ms,t=M.ensureNumber,h=M.isArrayOrTypedArray,s=i("../../constants/numerical"),o=s.FP_SAFE,y=s.BADNUM,d=s.LOG_CLIP,p=s.ONEWEEK,c=s.ONEDAY,m=s.ONEHOUR,l=s.ONEMIN,x=s.ONESEC,u=i("./axis_ids"),A=i("./constants"),_=A.HOUR_PATTERN,g=A.WEEKDAY_PATTERN;function b(k){return Math.pow(10,k)}function v(k){return k!=null}U.exports=function(S,E){E=E||{};var C=S._id||"x",F=C.charAt(0);function I(H,ee){if(H>0)return Math.log(H)/Math.LN10;if(H<=0&&ee&&S.range&&S.range.length===2){var ne=S.range[0],Z=S.range[1];return .5*(ne+Z-2*d*Math.abs(ne-Z))}else return y}function D(H,ee,ne,Z){if((Z||{}).msUTC&&e(H))return+H;var q=r(H,ne||S.calendar);if(q===y)if(e(H)){H=+H;var ie=Math.floor(M.mod(H+.05,1)*10),se=Math.round(H-ie/10);q=r(new Date(se))+ie/10}else return y;return q}function R(H,ee,ne){return n(H,ee,ne||S.calendar)}function O(H){return S._categories[Math.round(H)]}function z(H){if(v(H)){if(S._categoriesMap===void 0&&(S._categoriesMap={}),S._categoriesMap[H]!==void 0)return S._categoriesMap[H];S._categories.push(typeof H=="number"?String(H):H);var ee=S._categories.length-1;return S._categoriesMap[H]=ee,ee}return y}function B(H,ee){for(var ne=new Array(ee),Z=0;Z<ee;Z++){var q=(H[0]||[])[Z],ie=(H[1]||[])[Z];ne[Z]=G([q,ie])}return ne}function G(H){if(S._categoriesMap)return S._categoriesMap[H]}function Q(H){var ee=G(H);if(ee!==void 0)return ee;if(e(H))return+H}function X(H){return e(H)?+H:G(H)}function j(H,ee,ne){return w.round(ne+ee*H,2)}function re(H,ee,ne){return(H-ne)/ee}var ue=function(ee){return e(ee)?j(ee,S._m,S._b):y},K=function(H){return re(H,S._m,S._b)};if(S.rangebreaks){var te=F==="y";ue=function(H){if(!e(H))return y;var ee=S._rangebreaks.length;if(!ee)return j(H,S._m,S._b);var ne=te;S.range[0]>S.range[1]&&(ne=!ne);for(var Z=ne?-1:1,q=Z*H,ie=0,se=0;se<ee;se++){var ae=Z*S._rangebreaks[se].min,oe=Z*S._rangebreaks[se].max;if(q<ae)break;if(q>oe)ie=se+1;else{ie=q<(ae+oe)/2?se:se+1;break}}var be=S._B[ie]||0;return isFinite(be)?j(H,S._m2,be):0},K=function(H){var ee=S._rangebreaks.length;if(!ee)return re(H,S._m,S._b);for(var ne=0,Z=0;Z<ee&&!(H<S._rangebreaks[Z].pmin);Z++)H>S._rangebreaks[Z].pmax&&(ne=Z+1);return re(H,S._m2,S._B[ne])}}S.c2l=S.type==="log"?I:t,S.l2c=S.type==="log"?b:t,S.l2p=ue,S.p2l=K,S.c2p=S.type==="log"?function(H,ee){return ue(I(H,ee))}:ue,S.p2c=S.type==="log"?function(H){return b(K(H))}:K,["linear","-"].indexOf(S.type)!==-1?(S.d2r=S.r2d=S.d2c=S.r2c=S.d2l=S.r2l=a,S.c2d=S.c2r=S.l2d=S.l2r=t,S.d2p=S.r2p=function(H){return S.l2p(a(H))},S.p2d=S.p2r=K,S.cleanPos=t):S.type==="log"?(S.d2r=S.d2l=function(H,ee){return I(a(H),ee)},S.r2d=S.r2c=function(H){return b(a(H))},S.d2c=S.r2l=a,S.c2d=S.l2r=t,S.c2r=I,S.l2d=b,S.d2p=function(H,ee){return S.l2p(S.d2r(H,ee))},S.p2d=function(H){return b(K(H))},S.r2p=function(H){return S.l2p(a(H))},S.p2r=K,S.cleanPos=t):S.type==="date"?(S.d2r=S.r2d=M.identity,S.d2c=S.r2c=S.d2l=S.r2l=D,S.c2d=S.c2r=S.l2d=S.l2r=R,S.d2p=S.r2p=function(H,ee,ne){return S.l2p(D(H,0,ne))},S.p2d=S.p2r=function(H,ee,ne){return R(K(H),ee,ne)},S.cleanPos=function(H){return M.cleanDate(H,y,S.calendar)}):S.type==="category"?(S.d2c=S.d2l=z,S.r2d=S.c2d=S.l2d=O,S.d2r=S.d2l_noadd=Q,S.r2c=function(H){var ee=X(H);return ee!==void 0?ee:S.fraction2r(.5)},S.l2r=S.c2r=t,S.r2l=X,S.d2p=function(H){return S.l2p(S.r2c(H))},S.p2d=function(H){return O(K(H))},S.r2p=S.d2p,S.p2r=K,S.cleanPos=function(H){return typeof H=="string"&&H!==""?H:t(H)}):S.type==="multicategory"&&(S.r2d=S.c2d=S.l2d=O,S.d2r=S.d2l_noadd=Q,S.r2c=function(H){var ee=Q(H);return ee!==void 0?ee:S.fraction2r(.5)},S.r2c_just_indices=G,S.l2r=S.c2r=t,S.r2l=Q,S.d2p=function(H){return S.l2p(S.r2c(H))},S.p2d=function(H){return O(K(H))},S.r2p=S.d2p,S.p2r=K,S.cleanPos=function(H){return Array.isArray(H)||typeof H=="string"&&H!==""?H:t(H)},S.setupMultiCategory=function(H){var ee=S._traceIndices,ne,Z,q=S._matchGroup;if(q&&S._categories.length===0){for(var ie in q)if(ie!==C){var se=E[u.id2name(ie)];ee=ee.concat(se._traceIndices)}}var ae=[[0,{}],[0,{}]],oe=[];for(ne=0;ne<ee.length;ne++){var be=H[ee[ne]];if(F in be){var ce=be[F],de=be._length||M.minRowLength(ce);if(h(ce[0])&&h(ce[1]))for(Z=0;Z<de;Z++){var ye=ce[0][Z],ge=ce[1][Z];v(ye)&&v(ge)&&(oe.push([ye,ge]),ye in ae[0][1]||(ae[0][1][ye]=ae[0][0]++),ge in ae[1][1]||(ae[1][1][ge]=ae[1][0]++))}}}for(oe.sort(function(me,Se){var Le=ae[0][1],Oe=Le[me[0]]-Le[Se[0]];if(Oe)return Oe;var we=ae[1][1];return we[me[1]]-we[Se[1]]}),ne=0;ne<oe.length;ne++)z(oe[ne])}),S.fraction2r=function(H){var ee=S.r2l(S.range[0]),ne=S.r2l(S.range[1]);return S.l2r(ee+H*(ne-ee))},S.r2fraction=function(H){var ee=S.r2l(S.range[0]),ne=S.r2l(S.range[1]);return(S.r2l(H)-ee)/(ne-ee)},S.cleanRange=function(H,ee){ee||(ee={}),H||(H="range");var ne=M.nestedProperty(S,H).get(),Z,q;if(S.type==="date"?q=M.dfltRange(S.calendar):F==="y"?q=A.DFLTRANGEY:S._name==="realaxis"?q=[0,1]:q=ee.dfltRange||A.DFLTRANGEX,q=q.slice(),(S.rangemode==="tozero"||S.rangemode==="nonnegative")&&(q[0]=0),!ne||ne.length!==2){M.nestedProperty(S,H).set(q);return}for(S.type==="date"&&!S.autorange&&(ne[0]=M.cleanDate(ne[0],y,S.calendar),ne[1]=M.cleanDate(ne[1],y,S.calendar)),Z=0;Z<2;Z++)if(S.type==="date"){if(!M.isDateTime(ne[Z],S.calendar)){S[H]=q;break}if(S.r2l(ne[0])===S.r2l(ne[1])){var ie=M.constrain(S.r2l(ne[0]),M.MIN_MS+1e3,M.MAX_MS-1e3);ne[0]=S.l2r(ie-1e3),ne[1]=S.l2r(ie+1e3);break}}else{if(!e(ne[Z]))if(e(ne[1-Z]))ne[Z]=ne[1-Z]*(Z?10:.1);else{S[H]=q;break}if(ne[Z]<-o?ne[Z]=-o:ne[Z]>o&&(ne[Z]=o),ne[0]===ne[1]){var se=Math.max(1,Math.abs(ne[0]*1e-6));ne[0]-=se,ne[1]+=se}}},S.setScale=function(H){var ee=E._size;if(S.overlaying){var ne=u.getFromId({_fullLayout:E},S.overlaying);S.domain=ne.domain}var Z=H&&S._r?"_r":"range",q=S.calendar;S.cleanRange(Z);var ie=S.r2l(S[Z][0],q),se=S.r2l(S[Z][1],q),ae=F==="y";if(ae?(S._offset=ee.t+(1-S.domain[1])*ee.h,S._length=ee.h*(S.domain[1]-S.domain[0]),S._m=S._length/(ie-se),S._b=-S._m*se):(S._offset=ee.l+S.domain[0]*ee.w,S._length=ee.w*(S.domain[1]-S.domain[0]),S._m=S._length/(se-ie),S._b=-S._m*ie),S._rangebreaks=[],S._lBreaks=0,S._m2=0,S._B=[],S.rangebreaks){var oe,be;if(S._rangebreaks=S.locateBreaks(Math.min(ie,se),Math.max(ie,se)),S._rangebreaks.length){for(oe=0;oe<S._rangebreaks.length;oe++)be=S._rangebreaks[oe],S._lBreaks+=Math.abs(be.max-be.min);var ce=ae;ie>se&&(ce=!ce),ce&&S._rangebreaks.reverse();var de=ce?-1:1;for(S._m2=de*S._length/(Math.abs(se-ie)-S._lBreaks),S._B.push(-S._m2*(ae?se:ie)),oe=0;oe<S._rangebreaks.length;oe++)be=S._rangebreaks[oe],S._B.push(S._B[S._B.length-1]-de*S._m2*(be.max-be.min));for(oe=0;oe<S._rangebreaks.length;oe++)be=S._rangebreaks[oe],be.pmin=ue(be.min),be.pmax=ue(be.max)}}if(!isFinite(S._m)||!isFinite(S._b)||S._length<0)throw E._replotting=!1,new Error("Something went wrong with axis scaling")},S.maskBreaks=function(H){var ee=S.rangebreaks||[],ne,Z,q,ie,se;ee._cachedPatterns||(ee._cachedPatterns=ee.map(function(Le){return Le.enabled&&Le.bounds?M.simpleMap(Le.bounds,Le.pattern?a:S.d2c):null})),ee._cachedValues||(ee._cachedValues=ee.map(function(Le){return Le.enabled&&Le.values?M.simpleMap(Le.values,S.d2c).sort(M.sorterAsc):null}));for(var ae=0;ae<ee.length;ae++){var oe=ee[ae];if(oe.enabled){if(oe.bounds){var be=oe.pattern;switch(ne=ee._cachedPatterns[ae],Z=ne[0],q=ne[1],be){case g:se=new Date(H),ie=se.getUTCDay(),Z>q&&(q+=7,ie<Z&&(ie+=7));break;case _:se=new Date(H);var ce=se.getUTCHours(),de=se.getUTCMinutes(),ye=se.getUTCSeconds(),ge=se.getUTCMilliseconds();ie=ce+(de/60+ye/3600+ge/36e5),Z>q&&(q+=24,ie<Z&&(ie+=24));break;case"":ie=H;break}if(ie>=Z&&ie<q)return y}else for(var me=ee._cachedValues[ae],Se=0;Se<me.length;Se++)if(Z=me[Se],q=Z+oe.dvalue,H>=Z&&H<q)return y}}return H},S.locateBreaks=function(H,ee){var ne,Z,q,ie,se=[];if(!S.rangebreaks)return se;var ae=S.rangebreaks.slice().sort(function(we,Ce){return we.pattern===g&&Ce.pattern===_?-1:Ce.pattern===g&&we.pattern===_?1:0}),oe=function(we,Ce){if(we=M.constrain(we,H,ee),Ce=M.constrain(Ce,H,ee),we!==Ce){for(var Ke=!0,Ye=0;Ye<se.length;Ye++){var Fe=se[Ye];we<Fe.max&&Ce>=Fe.min&&(we<Fe.min&&(Fe.min=we),Ce>Fe.max&&(Fe.max=Ce),Ke=!1)}Ke&&se.push({min:we,max:Ce})}};for(ne=0;ne<ae.length;ne++){var be=ae[ne];if(be.enabled)if(be.bounds){var ce=H,de=ee;be.pattern&&(ce=Math.floor(ce)),Z=M.simpleMap(be.bounds,be.pattern?a:S.r2l),q=Z[0],ie=Z[1];var ye=new Date(ce),ge,me;switch(be.pattern){case g:me=p,ge=((ie<q?7:0)+(ie-q))*c,ce+=q*c-(ye.getUTCDay()*c+ye.getUTCHours()*m+ye.getUTCMinutes()*l+ye.getUTCSeconds()*x+ye.getUTCMilliseconds());break;case _:me=c,ge=((ie<q?24:0)+(ie-q))*m,ce+=q*m-(ye.getUTCHours()*m+ye.getUTCMinutes()*l+ye.getUTCSeconds()*x+ye.getUTCMilliseconds());break;default:ce=Math.min(Z[0],Z[1]),de=Math.max(Z[0],Z[1]),me=de-ce,ge=me}for(var Se=ce;Se<de;Se+=me)oe(Se,Se+ge)}else for(var Le=M.simpleMap(be.values,S.d2c),Oe=0;Oe<Le.length;Oe++)q=Le[Oe],ie=q+be.dvalue,oe(q,ie)}return se.sort(function(we,Ce){return we.min-Ce.min}),se},S.makeCalcdata=function(H,ee,ne){var Z,q,ie,se,ae=S.type,oe=ae==="date"&&H[ee+"calendar"];if(ee in H){if(Z=H[ee],se=H._length||M.minRowLength(Z),M.isTypedArray(Z)&&(ae==="linear"||ae==="log")){if(se===Z.length)return Z;if(Z.subarray)return Z.subarray(0,se)}if(ae==="multicategory")return B(Z,se);for(q=new Array(se),ie=0;ie<se;ie++)q[ie]=S.d2c(Z[ie],0,oe,ne)}else{var be=ee+"0"in H?S.d2c(H[ee+"0"],0,oe):0,ce=H["d"+ee]?Number(H["d"+ee]):1;for(Z=H[{x:"y",y:"x"}[ee]],se=H._length||Z.length,q=new Array(se),ie=0;ie<se;ie++)q[ie]=be+ie*ce}if(S.rangebreaks)for(ie=0;ie<se;ie++)q[ie]=S.maskBreaks(q[ie]);return q},S.isValidRange=function(H){return Array.isArray(H)&&H.length===2&&e(S.r2l(H[0]))&&e(S.r2l(H[1]))},S.isPtWithinRange=function(H,ee){var ne=S.c2l(H[F],null,ee),Z=S.r2l(S.range[0]),q=S.r2l(S.range[1]);return Z<q?Z<=ne&&ne<=q:q<=ne&&ne<=Z},S._emptyCategories=function(){S._categories=[],S._categoriesMap={}},S.clearCalc=function(){var H=S._matchGroup;if(H){var ee=null,ne=null;for(var Z in H){var q=E[u.id2name(Z)];if(q._categories){ee=q._categories,ne=q._categoriesMap;break}}ee&&ne?(S._categories=ee,S._categoriesMap=ne):S._emptyCategories()}else S._emptyCategories();if(S._initialCategories)for(var ie=0;ie<S._initialCategories.length;ie++)z(S._initialCategories[ie])},S.sortByInitialCategories=function(){var H=[];if(S._emptyCategories(),S._initialCategories)for(var ee=0;ee<S._initialCategories.length;ee++)z(S._initialCategories[ee]);H=H.concat(S._traceIndices);var ne=S._matchGroup;for(var Z in ne)if(C!==Z){var q=E[u.id2name(Z)];q._categories=S._categories,q._categoriesMap=S._categoriesMap,H=H.concat(q._traceIndices)}return H};var Y=E._d3locale;S.type==="date"&&(S._dateFormat=Y?Y.timeFormat:f,S._extraFormat=E._extraFormat),S._separators=E.separators,S._numFormat=Y?Y.numberFormat:T,delete S._minDtick,delete S._forceTick0}},{"../../constants/numerical":491,"../../lib":515,"./axis_ids":570,"./constants":573,"@plotly/d3":58,"d3-time-format":120,"fast-isnumeric":190}],586:[function(i,U,V){U.exports=function(f){var M=["showexponent","showtickprefix","showticksuffix"],T=M.filter(function(a){return f[a]!==void 0}),e=function(a){return f[a]===f[T[0]]};if(T.every(e)||T.length===1)return f[T[0]]}},{}],587:[function(i,U,V){var w=i("../../lib"),f=i("../../components/color").contrast,M=i("./layout_attributes"),T=i("./show_dflt"),e=i("../array_container_defaults");U.exports=function(r,t,h,s,o){o||(o={});var y=T(r),d=h("showticklabels");if(d){var p=o.font||{},c=t.color,m=t.ticklabelposition||"",l=m.indexOf("inside")!==-1?f(o.bgColor):c&&c!==M.color.dflt?c:p.color;if(w.coerceFont(h,"tickfont",{family:p.family,size:p.size,color:l}),!o.noTicklabelstep&&s!=="multicategory"&&s!=="log"&&h("ticklabelstep"),o.noAng||h("tickangle"),s!=="category"){var x=h("tickformat");e(r,t,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:a}),t.tickformatstops.length||delete t.tickformatstops,!o.noExp&&!x&&s!=="date"&&(h("showexponent",y),h("exponentformat"),h("minexponent"),h("separatethousands"))}}};function a(n,r){function t(s,o){return w.coerce(n,r,M.tickformatstops,s,o)}var h=t("enabled");h&&(t("dtickrange"),t("value"))}},{"../../components/color":367,"../../lib":515,"../array_container_defaults":561,"./layout_attributes":579,"./show_dflt":586}],588:[function(i,U,V){var w=i("../../lib"),f=i("./layout_attributes");U.exports=function(T,e,a,n){var r=n.isMinor,t=r?T.minor||{}:T,h=r?e.minor:e,s=r?f.minor:f,o=r?"minor.":"",y=w.coerce2(t,h,s,"ticklen",r?(e.ticklen||5)*.6:void 0),d=w.coerce2(t,h,s,"tickwidth",r?e.tickwidth||1:void 0),p=w.coerce2(t,h,s,"tickcolor",(r?e.tickcolor:void 0)||h.color),c=a(o+"ticks",!r&&n.outerTicks||y||d||p?"outside":"");c||(delete h.ticklen,delete h.tickwidth,delete h.tickcolor)}},{"../../lib":515,"./layout_attributes":579}],589:[function(i,U,V){var w=i("./clean_ticks"),f=i("../../lib").isArrayOrTypedArray;U.exports=function(T,e,a,n,r){r||(r={});var t=r.isMinor,h=t?T.minor||{}:T,s=t?e.minor:e,o=t?"minor.":"";function y(A){var _=h[A];return _!==void 0?_:(s._template||{})[A]}var d=y("tick0"),p=y("dtick"),c=y("tickvals"),m=f(c)?"array":p?"linear":"auto",l=a(o+"tickmode",m);if(l==="auto")a(o+"nticks");else if(l==="linear"){var x=s.dtick=w.dtick(p,n);s.tick0=w.tick0(d,n,e.calendar,x)}else if(n!=="multicategory"){var u=a(o+"tickvals");u===void 0?s.tickmode="auto":t||a("ticktext")}}},{"../../lib":515,"./clean_ticks":572}],590:[function(i,U,V){var w=i("@plotly/d3"),f=i("../../registry"),M=i("../../lib"),T=i("../../components/drawing"),e=i("./axes");U.exports=function(n,r,t,h){var s=n._fullLayout;if(r.length===0){e.redrawComponents(n);return}function o(_){var g=_.xaxis,b=_.yaxis;s._defs.select("#"+_.clipId+"> rect").call(T.setTranslate,0,0).call(T.setScale,1,1),_.plot.call(T.setTranslate,g._offset,b._offset).call(T.setScale,1,1);var v=_.plot.selectAll(".scatterlayer .trace");v.selectAll(".point").call(T.setPointGroupScale,1,1),v.selectAll(".textpoint").call(T.setTextPointsScale,1,1),v.call(T.hideOutsideRangePoints,_)}function y(_,g){var b=_.plotinfo,v=b.xaxis,k=b.yaxis,S=v._length,E=k._length,C=!!_.xr1,F=!!_.yr1,I=[];if(C){var D=M.simpleMap(_.xr0,v.r2l),R=M.simpleMap(_.xr1,v.r2l),O=D[1]-D[0],z=R[1]-R[0];I[0]=(D[0]*(1-g)+g*R[0]-D[0])/(D[1]-D[0])*S,I[2]=S*(1-g+g*z/O),v.range[0]=v.l2r(D[0]*(1-g)+g*R[0]),v.range[1]=v.l2r(D[1]*(1-g)+g*R[1])}else I[0]=0,I[2]=S;if(F){var B=M.simpleMap(_.yr0,k.r2l),G=M.simpleMap(_.yr1,k.r2l),Q=B[1]-B[0],X=G[1]-G[0];I[1]=(B[1]*(1-g)+g*G[1]-B[1])/(B[0]-B[1])*E,I[3]=E*(1-g+g*X/Q),k.range[0]=v.l2r(B[0]*(1-g)+g*G[0]),k.range[1]=k.l2r(B[1]*(1-g)+g*G[1])}else I[1]=0,I[3]=E;e.drawOne(n,v,{skipTitle:!0}),e.drawOne(n,k,{skipTitle:!0}),e.redrawComponents(n,[v._id,k._id]);var j=C?S/I[2]:1,re=F?E/I[3]:1,ue=C?I[0]:0,K=F?I[1]:0,te=C?I[0]/I[2]*S:0,Y=F?I[1]/I[3]*E:0,H=v._offset-te,ee=k._offset-Y;b.clipRect.call(T.setTranslate,ue,K).call(T.setScale,1/j,1/re),b.plot.call(T.setTranslate,H,ee).call(T.setScale,j,re),T.setPointGroupScale(b.zoomScalePts,1/j,1/re),T.setTextPointsScale(b.zoomScaleTxt,1/j,1/re)}var d;h&&(d=h());function p(){for(var _={},g=0;g<r.length;g++){var b=r[g],v=b.plotinfo.xaxis,k=b.plotinfo.yaxis;b.xr1&&(_[v._name+".range"]=b.xr1.slice()),b.yr1&&(_[k._name+".range"]=b.yr1.slice())}return d&&d(),f.call("relayout",n,_).then(function(){for(var S=0;S<r.length;S++)o(r[S].plotinfo)})}function c(){for(var _={},g=0;g<r.length;g++){var b=r[g],v=b.plotinfo.xaxis,k=b.plotinfo.yaxis;b.xr0&&(_[v._name+".range"]=b.xr0.slice()),b.yr0&&(_[k._name+".range"]=b.yr0.slice())}return f.call("relayout",n,_).then(function(){for(var S=0;S<r.length;S++)o(r[S].plotinfo)})}var m,l,x,u=w.ease(t.easing);n._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(x),x=null,c()});function A(){l=Date.now();for(var _=Math.min(1,(l-m)/t.duration),g=u(_),b=0;b<r.length;b++)y(r[b],g);l-m>t.duration?(p(),x=window.cancelAnimationFrame(A)):x=window.requestAnimationFrame(A)}return m=Date.now(),x=window.requestAnimationFrame(A),Promise.resolve()}},{"../../components/drawing":389,"../../lib":515,"../../registry":647,"./axes":566,"@plotly/d3":58}],591:[function(i,U,V){var w=i("../../registry").traceIs,f=i("./axis_autotype");U.exports=function(r,t,h,s){h("autotypenumbers",s.autotypenumbersDflt);var o=h("type",(s.splomStash||{}).type);o==="-"&&(M(t,s.data),t.type==="-"?t.type="linear":r.type=t.type)};function M(n,r){if(n.type==="-"){var t=n._id,h=t.charAt(0),s;t.indexOf("scene")!==-1&&(t=h);var o=T(r,t,h);if(!!o){if(o.type==="histogram"&&h==={v:"y",h:"x"}[o.orientation||"v"]){n.type="linear";return}var y=h+"calendar",d=o[y],p={noMultiCategory:!w(o,"cartesian")||w(o,"noMultiCategory")};if(o.type==="box"&&o._hasPreCompStats&&h==={h:"x",v:"y"}[o.orientation||"v"]&&(p.noMultiCategory=!0),p.autotypenumbers=n.autotypenumbers,a(o,h)){var c=e(o),m=[];for(s=0;s<r.length;s++){var l=r[s];!w(l,"box-violin")||(l[h+"axis"]||h)!==t||(l[c]!==void 0?m.push(l[c][0]):l.name!==void 0?m.push(l.name):m.push("text"),l[y]!==d&&(d=void 0))}n.type=f(m,d,p)}else if(o.type==="splom"){var x=o.dimensions,u=x[o._axesDim[t]];u.visible&&(n.type=f(u.values,d,p))}else n.type=f(o[h]||[o[h+"0"]],d,p)}}}function T(n,r,t){for(var h=0;h<n.length;h++){var s=n[h];if(s.type==="splom"&&s._length>0&&(s["_"+t+"axes"]||{})[r])return s;if((s[t+"axis"]||t)===r){if(a(s,t))return s;if((s[t]||[]).length||s[t+"0"])return s}}}function e(n){return{v:"x",h:"y"}[n.orientation||"v"]}function a(n,r){var t=e(n),h=w(n,"box-violin"),s=w(n._fullInput||{},"candlestick");return h&&!s&&r===t&&n[t]===void 0&&n[t+"0"]===void 0}},{"../../registry":647,"./axis_autotype":567}],592:[function(i,U,V){var w=i("../registry"),f=i("../lib");V.manageCommandObserver=function(r,t,h,s){var o={},y=!0;t&&t._commandObserver&&(o=t._commandObserver),o.cache||(o.cache={}),o.lookupTable={};var d=V.hasSimpleAPICommandBindings(r,h,o.lookupTable);if(t&&t._commandObserver){if(d)return o;if(t._commandObserver.remove)return t._commandObserver.remove(),t._commandObserver=null,o}if(d){M(r,d,o.cache),o.check=function(){if(!!y){var l=M(r,d,o.cache);return l.changed&&s&&o.lookupTable[l.value]!==void 0&&(o.disable(),Promise.resolve(s({value:l.value,type:d.type,prop:d.prop,traces:d.traces,index:o.lookupTable[l.value]})).then(o.enable,o.enable)),l.changed}};for(var p=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],c=0;c<p.length;c++)r._internalOn(p[c],o.check);o.remove=function(){for(var m=0;m<p.length;m++)r._removeInternalListener(p[m],o.check)}}else f.log("Unable to automatically bind plot updates to API command"),o.lookupTable={},o.remove=function(){};return o.disable=function(){y=!1},o.enable=function(){y=!0},t&&(t._commandObserver=o),o},V.hasSimpleAPICommandBindings=function(r,t,h){var s,o=t.length,y;for(s=0;s<o;s++){var d,p=t[s],c=p.method,m=p.args;if(Array.isArray(m)||(m=[]),!c)return!1;var l=V.computeAPICommandBindings(r,c,m);if(l.length!==1)return!1;if(!y)y=l[0],Array.isArray(y.traces)&&y.traces.sort();else{if(d=l[0],d.type!==y.type||d.prop!==y.prop)return!1;if(Array.isArray(y.traces))if(Array.isArray(d.traces)){d.traces.sort();for(var x=0;x<y.traces.length;x++)if(y.traces[x]!==d.traces[x])return!1}else return!1;else if(d.prop!==y.prop)return!1}d=l[0];var u=d.value;if(Array.isArray(u))if(u.length===1)u=u[0];else return!1;h&&(h[u]=s)}return y};function M(r,t,h){var s,o,y,d=!1;if(t.type==="data")s=r._fullData[t.traces!==null?t.traces[0]:0];else if(t.type==="layout")s=r._fullLayout;else return!1;return o=f.nestedProperty(s,t.prop).get(),y=h[t.type]=h[t.type]||{},y.hasOwnProperty(t.prop)&&y[t.prop]!==o&&(d=!0),y[t.prop]=o,{changed:d,value:o}}V.executeAPICommand=function(r,t,h){if(t==="skip")return Promise.resolve();var s=w.apiMethodRegistry[t],o=[r];Array.isArray(h)||(h=[]);for(var y=0;y<h.length;y++)o.push(h[y]);return s.apply(null,o).catch(function(d){return f.warn("API call to Plotly."+t+" rejected.",d),Promise.reject(d)})},V.computeAPICommandBindings=function(r,t,h){var s;switch(Array.isArray(h)||(h=[]),t){case"restyle":s=a(r,h);break;case"relayout":s=e(r,h);break;case"update":s=a(r,[h[0],h[2]]).concat(e(r,[h[1]]));break;case"animate":s=T(r,h);break;default:s=[]}return s};function T(r,t){return Array.isArray(t[0])&&t[0].length===1&&["string","number"].indexOf(typeof t[0][0])!==-1?[{type:"layout",prop:"_currentFrame",value:t[0][0].toString()}]:[]}function e(r,t){var h=[],s=t[0],o={};if(typeof s=="string")o[s]=t[1];else if(f.isPlainObject(s))o=s;else return h;return n(o,function(y,d,p){h.push({type:"layout",prop:y,value:p})},"",0),h}function a(r,t){var h,s,o,y,d=[];if(s=t[0],o=t[1],h=t[2],y={},typeof s=="string")y[s]=o;else if(f.isPlainObject(s))y=s,h===void 0&&(h=o);else return d;return h===void 0&&(h=null),n(y,function(p,c,m){var l,x;if(Array.isArray(m)){x=m.slice();var u=Math.min(x.length,r.data.length);h&&(u=Math.min(u,h.length)),l=[];for(var A=0;A<u;A++)l[A]=h?h[A]:A}else x=m,l=h?h.slice():null;if(l===null)Array.isArray(x)&&(x=x[0]);else if(Array.isArray(l)){if(!Array.isArray(x)){var _=x;x=[];for(var g=0;g<l.length;g++)x[g]=_}x.length=Math.min(l.length,x.length)}d.push({type:"data",prop:p,traces:l,value:x})},"",0),d}function n(r,t,h,s){Object.keys(r).forEach(function(o){var y=r[o];if(o[0]!=="_"){var d=h+(s>0?".":"")+o;f.isPlainObject(y)?n(y,t,d,s+1):t(d,o,y)}})}},{"../lib":515,"../registry":647}],593:[function(i,U,V){var w=i("../lib/extend").extendFlat;V.attributes=function(f,M){f=f||{},M=M||{};var T={valType:"info_array",editType:f.editType,items:[{valType:"number",min:0,max:1,editType:f.editType},{valType:"number",min:0,max:1,editType:f.editType}],dflt:[0,1]};f.name&&f.name+"",f.trace,M.description&&""+M.description;var e={x:w({},T,{}),y:w({},T,{}),editType:f.editType};return f.noGridCell||(e.row={valType:"integer",min:0,dflt:0,editType:f.editType},e.column={valType:"integer",min:0,dflt:0,editType:f.editType}),e},V.defaults=function(f,M,T,e){var a=e&&e.x||[0,1],n=e&&e.y||[0,1],r=M.grid;if(r){var t=T("domain.column");t!==void 0&&(t<r.columns?a=r._domains.x[t]:delete f.domain.column);var h=T("domain.row");h!==void 0&&(h<r.rows?n=r._domains.y[h]:delete f.domain.row)}var s=T("domain.x",a),o=T("domain.y",n);s[0]<s[1]||(f.domain.x=a.slice()),o[0]<o[1]||(f.domain.y=n.slice())}},{"../lib/extend":505}],594:[function(i,U,V){U.exports=function(w){var f=w.editType,M=w.colorEditType;M===void 0&&(M=f);var T={family:{valType:"string",noBlank:!0,strict:!0,editType:f},size:{valType:"number",min:1,editType:f},color:{valType:"color",editType:M},editType:f};return w.autoSize&&(T.size.dflt="auto"),w.autoColor&&(T.color.dflt="auto"),w.arrayOk&&(T.family.arrayOk=!0,T.size.arrayOk=!0,T.color.arrayOk=!0),T}},{}],595:[function(i,U,V){U.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},{}],596:[function(i,U,V){V.projNames={airy:"airy",aitoff:"aitoff","albers usa":"albersUsa",albers:"albers",august:"august","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant",baker:"baker",bertin1953:"bertin1953",boggs:"boggs",bonne:"bonne",bottomley:"bottomley",bromley:"bromley",collignon:"collignon","conic conformal":"conicConformal","conic equal area":"conicEqualArea","conic equidistant":"conicEquidistant",craig:"craig",craster:"craster","cylindrical equal area":"cylindricalEqualArea","cylindrical stereographic":"cylindricalStereographic",eckert1:"eckert1",eckert2:"eckert2",eckert3:"eckert3",eckert4:"eckert4",eckert5:"eckert5",eckert6:"eckert6",eisenlohr:"eisenlohr",equirectangular:"equirectangular",fahey:"fahey","foucaut sinusoidal":"foucautSinusoidal",foucaut:"foucaut",ginzburg4:"ginzburg4",ginzburg5:"ginzburg5",ginzburg6:"ginzburg6",ginzburg8:"ginzburg8",ginzburg9:"ginzburg9",gnomonic:"gnomonic","gringorten quincuncial":"gringortenQuincuncial",gringorten:"gringorten",guyou:"guyou",hammer:"hammer",hill:"hill",homolosine:"homolosine",hufnagel:"hufnagel",hyperelliptical:"hyperelliptical",kavrayskiy7:"kavrayskiy7",lagrange:"lagrange",larrivee:"larrivee",laskowski:"laskowski",loximuthal:"loximuthal",mercator:"mercator",miller:"miller",mollweide:"mollweide","mt flat polar parabolic":"mtFlatPolarParabolic","mt flat polar quartic":"mtFlatPolarQuartic","mt flat polar sinusoidal":"mtFlatPolarSinusoidal","natural earth":"naturalEarth","natural earth1":"naturalEarth1","natural earth2":"naturalEarth2","nell hammer":"nellHammer",nicolosi:"nicolosi",orthographic:"orthographic",patterson:"patterson","peirce quincuncial":"peirceQuincuncial",polyconic:"polyconic","rectangular polyconic":"rectangularPolyconic",robinson:"robinson",satellite:"satellite","sinu mollweide":"sinuMollweide",sinusoidal:"sinusoidal",stereographic:"stereographic",times:"times","transverse mercator":"transverseMercator","van der grinten":"vanDerGrinten","van der grinten2":"vanDerGrinten2","van der grinten3":"vanDerGrinten3","van der grinten4":"vanDerGrinten4",wagner4:"wagner4",wagner6:"wagner6",wiechel:"wiechel","winkel tripel":"winkel3",winkel3:"winkel3"},V.axesNames=["lonaxis","lataxis"],V.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360},V.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180},V.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}},V.clipPad=.001,V.precision=.1,V.landColor="#F0DC82",V.waterColor="#3399FF",V.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"},V.sphereSVG={type:"Sphere"},V.fillLayers={ocean:1,land:1,lakes:1},V.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1},V.layers=["bg","ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame","backplot","frontplot"],V.layersForChoropleth=["bg","ocean","land","subunits","countries","coastlines","lataxis","lonaxis","frame","backplot","rivers","lakes","frontplot"],V.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}},{}],597:[function(i,U,V){var w=i("@plotly/d3"),f=i("d3-geo"),M=f.geoPath,T=f.geoDistance,e=i("d3-geo-projection"),a=i("../../registry"),n=i("../../lib"),r=n.strTranslate,t=i("../../components/color"),h=i("../../components/drawing"),s=i("../../components/fx"),o=i("../plots"),y=i("../cartesian/axes"),d=i("../cartesian/autorange").getAutoRange,p=i("../../components/dragelement"),c=i("../../components/selections").prepSelect,m=i("../../components/selections").clearOutline,l=i("../../components/selections").selectOnClick,x=i("./zoom"),u=i("./constants"),A=i("../../lib/geo_location_utils"),_=i("../../lib/topojson_utils"),g=i("topojson-client").feature;function b(C){this.id=C.id,this.graphDiv=C.graphDiv,this.container=C.container,this.topojsonURL=C.topojsonURL,this.isStatic=C.staticPlot,this.topojsonName=null,this.topojson=null,this.projection=null,this.scope=null,this.viewInitial=null,this.fitScale=null,this.bounds=null,this.midPt=null,this.hasChoropleth=!1,this.traceHash={},this.layers={},this.basePaths={},this.dataPaths={},this.dataPoints={},this.clipDef=null,this.clipRect=null,this.bgRect=null,this.makeFramework()}var v=b.prototype;U.exports=function(F){return new b(F)},v.plot=function(C,F,I,D){var R=this;if(D)return R.update(C,F,!0);R._geoCalcData=C,R._fullLayout=F;var O=F[this.id],z=[],B=!1;for(var G in u.layerNameToAdjective)if(G!=="frame"&&O["show"+G]){B=!0;break}for(var Q=!1,X=0;X<C.length;X++){var j=C[0][0].trace;j._geo=R,j.locationmode&&(B=!0);var re=j.marker;if(re){var ue=re.angle,K=re.angleref;(ue||K==="north"||K==="previous")&&(Q=!0)}}if(this._hasMarkerAngles=Q,B){var te=_.getTopojsonName(O);(R.topojson===null||te!==R.topojsonName)&&(R.topojsonName=te,PlotlyGeoAssets.topojson[R.topojsonName]===void 0&&z.push(R.fetchTopojson()))}z=z.concat(A.fetchTraceGeoData(C)),I.push(new Promise(function(Y,H){Promise.all(z).then(function(){R.topojson=PlotlyGeoAssets.topojson[R.topojsonName],R.update(C,F),Y()}).catch(H)}))},v.fetchTopojson=function(){var C=this,F=_.getTopojsonPath(C.topojsonURL,C.topojsonName);return new Promise(function(I,D){w.json(F,function(R,O){if(R)return R.status===404?D(new Error(["plotly.js could not find topojson file at",F+".","Make sure the *topojsonURL* plot config option","is set properly."].join(" "))):D(new Error(["unexpected error while fetching topojson file at",F].join(" ")));PlotlyGeoAssets.topojson[C.topojsonName]=O,I()})})},v.update=function(C,F,I){var D=F[this.id];this.hasChoropleth=!1;for(var R=0;R<C.length;R++){var O=C[R],z=O[0].trace;z.type==="choropleth"&&(this.hasChoropleth=!0),z.visible===!0&&z._length>0&&z._module.calcGeoJSON(O,F)}if(!I){var B=this.updateProjection(C,F);if(B)return;(!this.viewInitial||this.scope!==D.scope)&&this.saveViewInitial(D)}this.scope=D.scope,this.updateBaseLayers(F,D),this.updateDims(F,D),this.updateFx(F,D),o.generalUpdatePerTraceModule(this.graphDiv,this,C,D);var G=this.layers.frontplot.select(".scatterlayer");this.dataPoints.point=G.selectAll(".point"),this.dataPoints.text=G.selectAll("text"),this.dataPaths.line=G.selectAll(".js-line");var Q=this.layers.backplot.select(".choroplethlayer");this.dataPaths.choropleth=Q.selectAll("path"),this._render()},v.updateProjection=function(C,F){var I=this.graphDiv,D=F[this.id],R=F._size,O=D.domain,z=D.projection,B=D.lonaxis,G=D.lataxis,Q=B._ax,X=G._ax,j=this.projection=k(D),re=[[R.l+R.w*O.x[0],R.t+R.h*(1-O.y[1])],[R.l+R.w*O.x[1],R.t+R.h*(1-O.y[0])]],ue=D.center||{},K=z.rotation||{},te=B.range||[],Y=G.range||[];if(D.fitbounds){Q._length=re[1][0]-re[0][0],X._length=re[1][1]-re[0][1],Q.range=d(I,Q),X.range=d(I,X);var H=(Q.range[0]+Q.range[1])/2,ee=(X.range[0]+X.range[1])/2;if(D._isScoped)ue={lon:H,lat:ee};else if(D._isClipped){ue={lon:H,lat:ee},K={lon:H,lat:ee,roll:K.roll};var ne=z.type,Z=u.lonaxisSpan[ne]/2||180,q=u.lataxisSpan[ne]/2||90;te=[H-Z,H+Z],Y=[ee-q,ee+q]}else ue={lon:H,lat:ee},K={lon:H,lat:K.lat,roll:K.roll}}j.center([ue.lon-K.lon,ue.lat-K.lat]).rotate([-K.lon,-K.lat,K.roll]).parallels(z.parallels);var ie=E(te,Y);j.fitExtent(re,ie);var se=this.bounds=j.getBounds(ie),ae=this.fitScale=j.scale(),oe=j.translate();if(D.fitbounds){var be=j.getBounds(E(Q.range,X.range)),ce=Math.min((se[1][0]-se[0][0])/(be[1][0]-be[0][0]),(se[1][1]-se[0][1])/(be[1][1]-be[0][1]));isFinite(ce)?j.scale(ce*ae):n.warn("Something went wrong during"+this.id+"fitbounds computations.")}else j.scale(z.scale*ae);var de=this.midPt=[(se[0][0]+se[1][0])/2,(se[0][1]+se[1][1])/2];if(j.translate([oe[0]+(de[0]-oe[0]),oe[1]+(de[1]-oe[1])]).clipExtent(se),D._isAlbersUsa){var ye=j([ue.lon,ue.lat]),ge=j.translate();j.translate([ge[0]-(ye[0]-ge[0]),ge[1]-(ye[1]-ge[1])])}},v.updateBaseLayers=function(C,F){var I=this,D=I.topojson,R=I.layers,O=I.basePaths;function z(re){return re==="lonaxis"||re==="lataxis"}function B(re){return Boolean(u.lineLayers[re])}function G(re){return Boolean(u.fillLayers[re])}var Q=this.hasChoropleth?u.layersForChoropleth:u.layers,X=Q.filter(function(re){return B(re)||G(re)?F["show"+re]:z(re)?F[re].showgrid:!0}),j=I.framework.selectAll(".layer").data(X,String);j.exit().each(function(re){delete R[re],delete O[re],w.select(this).remove()}),j.enter().append("g").attr("class",function(re){return"layer "+re}).each(function(re){var ue=R[re]=w.select(this);re==="bg"?I.bgRect=ue.append("rect").style("pointer-events","all"):z(re)?O[re]=ue.append("path").style("fill","none"):re==="backplot"?ue.append("g").classed("choroplethlayer",!0):re==="frontplot"?ue.append("g").classed("scatterlayer",!0):B(re)?O[re]=ue.append("path").style("fill","none").style("stroke-miterlimit",2):G(re)&&(O[re]=ue.append("path").style("stroke","none"))}),j.order(),j.each(function(re){var ue=O[re],K=u.layerNameToAdjective[re];re==="frame"?ue.datum(u.sphereSVG):B(re)||G(re)?ue.datum(g(D,D.objects[re])):z(re)&&ue.datum(S(re,F,C)).call(t.stroke,F[re].gridcolor).call(h.dashLine,F[re].griddash,F[re].gridwidth),B(re)?ue.call(t.stroke,F[K+"color"]).call(h.dashLine,"",F[K+"width"]):G(re)&&ue.call(t.fill,F[K+"color"])})},v.updateDims=function(C,F){var I=this.bounds,D=(F.framewidth||0)/2,R=I[0][0]-D,O=I[0][1]-D,z=I[1][0]-R+D,B=I[1][1]-O+D;h.setRect(this.clipRect,R,O,z,B),this.bgRect.call(h.setRect,R,O,z,B).call(t.fill,F.bgcolor),this.xaxis._offset=R,this.xaxis._length=z,this.yaxis._offset=O,this.yaxis._length=B},v.updateFx=function(C,F){var I=this,D=I.graphDiv,R=I.bgRect,O=C.dragmode,z=C.clickmode;if(I.isStatic)return;function B(){var j=I.viewInitial,re={};for(var ue in j)re[I.id+"."+ue]=j[ue];a.call("_guiRelayout",D,re),D.emit("plotly_doubleclick",null)}function G(j){return I.projection.invert([j[0]+I.xaxis._offset,j[1]+I.yaxis._offset])}var Q=function(j,re){if(re.isRect){var ue=j.range={};ue[I.id]=[G([re.xmin,re.ymin]),G([re.xmax,re.ymax])]}else{var K=j.lassoPoints={};K[I.id]=re.map(G)}},X={element:I.bgRect.node(),gd:D,plotinfo:{id:I.id,xaxis:I.xaxis,yaxis:I.yaxis,fillRangeItems:Q},xaxes:[I.xaxis],yaxes:[I.yaxis],subplot:I.id,clickFn:function(j){j===2&&m(D)}};O==="pan"?(R.node().onmousedown=null,R.call(x(I,F)),R.on("dblclick.zoom",B),D._context._scrollZoom.geo||R.on("wheel.zoom",null)):(O==="select"||O==="lasso")&&(R.on(".zoom",null),X.prepFn=function(j,re,ue){c(j,re,ue,X,O)},p.init(X)),R.on("mousemove",function(){var j=I.projection.invert(n.getPositionFromD3Event());if(!j)return p.unhover(D,w.event);I.xaxis.p2c=function(){return j[0]},I.yaxis.p2c=function(){return j[1]},s.hover(D,w.event,I.id)}),R.on("mouseout",function(){D._dragging||p.unhover(D,w.event)}),R.on("click",function(){O!=="select"&&O!=="lasso"&&(z.indexOf("select")>-1&&l(w.event,D,[I.xaxis],[I.yaxis],I.id,X),z.indexOf("event")>-1&&s.click(D,w.event))})},v.makeFramework=function(){var C=this,F=C.graphDiv,I=F._fullLayout,D="clip"+I._uid+C.id;C.clipDef=I._clips.append("clipPath").attr("id",D),C.clipRect=C.clipDef.append("rect"),C.framework=w.select(C.container).append("g").attr("class","geo "+C.id).call(h.setClipUrl,D,F),C.project=function(R){var O=C.projection(R);return O?[O[0]-C.xaxis._offset,O[1]-C.yaxis._offset]:[null,null]},C.xaxis={_id:"x",c2p:function(R){return C.project(R)[0]}},C.yaxis={_id:"y",c2p:function(R){return C.project(R)[1]}},C.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},y.setConvert(C.mockAxis,I)},v.saveViewInitial=function(C){var F=C.center||{},I=C.projection,D=I.rotation||{};this.viewInitial={fitbounds:C.fitbounds,"projection.scale":I.scale};var R;C._isScoped?R={"center.lon":F.lon,"center.lat":F.lat}:C._isClipped?R={"projection.rotation.lon":D.lon,"projection.rotation.lat":D.lat}:R={"center.lon":F.lon,"center.lat":F.lat,"projection.rotation.lon":D.lon},n.extendFlat(this.viewInitial,R)},v.render=function(C){this._hasMarkerAngles&&C?this.plot(this._geoCalcData,this._fullLayout,[],!0):this._render()},v._render=function(){var C=this.projection,F=C.getPath(),I;function D(O){var z=C(O.lonlat);return z?r(z[0],z[1]):null}function R(O){return C.isLonLatOverEdges(O.lonlat)?"none":null}for(I in this.basePaths)this.basePaths[I].attr("d",F);for(I in this.dataPaths)this.dataPaths[I].attr("d",function(O){return F(O.geojson)});for(I in this.dataPoints)this.dataPoints[I].attr("display",R).attr("transform",D)};function k(C){var F=C.projection,I=F.type,D=u.projNames[I];D="geo"+n.titleCase(D);for(var R=f[D]||e[D],O=R(),z=C._isSatellite?Math.acos(1/F.distance)*180/Math.PI:C._isClipped?u.lonaxisSpan[I]/2:null,B=["center","rotate","parallels","clipExtent"],G=function(j){return j?O:[]},Q=0;Q<B.length;Q++){var X=B[Q];typeof O[X]!="function"&&(O[X]=G)}return O.isLonLatOverEdges=function(j){if(O(j)===null)return!0;if(z){var re=O.rotate(),ue=T(j,[-re[0],-re[1]]),K=z*Math.PI/180;return ue>K}else return!1},O.getPath=function(){return M().projection(O)},O.getBounds=function(j){return O.getPath().bounds(j)},O.precision(u.precision),C._isSatellite&&O.tilt(F.tilt).distance(F.distance),z&&O.clipAngle(z-u.clipPad),O}function S(C,F,I){var D=1e-6,R=2.5,O=F[C],z=u.scopeDefaults[F.scope],B,G,Q;C==="lonaxis"?(B=z.lonaxisRange,G=z.lataxisRange,Q=function(ee,ne){return[ee,ne]}):C==="lataxis"&&(B=z.lataxisRange,G=z.lonaxisRange,Q=function(ee,ne){return[ne,ee]});var X={type:"linear",range:[B[0],B[1]-D],tick0:O.tick0,dtick:O.dtick};y.setConvert(X,I);var j=y.calcTicks(X);!F.isScoped&&C==="lonaxis"&&j.pop();for(var re=j.length,ue=new Array(re),K=0;K<re;K++)for(var te=j[K].x,Y=ue[K]=[],H=G[0];H<G[1]+R;H+=R)Y.push(Q(te,H));return{type:"MultiLineString",coordinates:ue}}function E(C,F){var I=u.clipPad,D=C[0]+I,R=C[1]-I,O=F[0]+I,z=F[1]-I;D>0&&R<0&&(R+=360);var B=(R-D)/4;return{type:"Polygon",coordinates:[[[D,O],[D,z],[D+B,z],[D+2*B,z],[D+3*B,z],[R,z],[R,O],[R-B,O],[R-2*B,O],[R-3*B,O],[D,O]]]}}},{"../../components/color":367,"../../components/dragelement":386,"../../components/drawing":389,"../../components/fx":407,"../../components/selections":455,"../../lib":515,"../../lib/geo_location_utils":508,"../../lib/topojson_utils":544,"../../registry":647,"../cartesian/autorange":565,"../cartesian/axes":566,"../plots":628,"./constants":596,"./zoom":601,"@plotly/d3":58,"d3-geo":114,"d3-geo-projection":113,"topojson-client":316}],598:[function(i,U,V){var w=i("../../plots/get_data").getSubplotCalcData,f=i("../../lib").counterRegex,M=i("./geo"),T="geo",e=f(T),a={};a[T]={valType:"subplotid",dflt:T,editType:"calc"};function n(h){for(var s=h._fullLayout,o=h.calcdata,y=s._subplots[T],d=0;d<y.length;d++){var p=y[d],c=w(o,T,p),m=s[p],l=m._subplot;l||(l=M({id:p,graphDiv:h,container:s._geolayer.node(),topojsonURL:h._context.topojsonURL,staticPlot:h._context.staticPlot}),s[p]._subplot=l),l.plot(c,s,h._promises)}}function r(h,s,o,y){for(var d=y._subplots[T]||[],p=0;p<d.length;p++){var c=d[p],m=y[c]._subplot;!s[c]&&!!m&&(m.framework.remove(),m.clipDef.remove())}}function t(h){for(var s=h._fullLayout,o=s._subplots[T],y=0;y<o.length;y++){var d=s[o[y]],p=d._subplot;p.updateFx(s,d)}}U.exports={attr:T,name:T,idRoot:T,idRegex:e,attrRegex:e,attributes:a,layoutAttributes:i("./layout_attributes"),supplyLayoutDefaults:i("./layout_defaults"),plot:n,updateFx:t,clean:r}},{"../../lib":515,"../../plots/get_data":602,"./geo":597,"./layout_attributes":599,"./layout_defaults":600}],599:[function(i,U,V){var w=i("../../components/color/attributes"),f=i("../domain").attributes,M=i("../../components/drawing/attributes").dash,T=i("./constants"),e=i("../../plot_api/edit_types").overrideAll,a=i("../../lib/sort_object_keys"),n={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number",dflt:0},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:w.lightLine},gridwidth:{valType:"number",min:0,dflt:1},griddash:M},r=U.exports=e({domain:f({name:"geo"},{}),fitbounds:{valType:"enumerated",values:[!1,"locations","geojson"],dflt:!1,editType:"plot"},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:a(T.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:a(T.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},tilt:{valType:"number",dflt:0},distance:{valType:"number",min:1.001,dflt:2},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},visible:{valType:"boolean",dflt:!0},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:w.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:T.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:T.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:T.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:T.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:w.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:w.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:w.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:w.background},lonaxis:n,lataxis:n},"plot","from-root");r.uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":366,"../../components/drawing/attributes":388,"../../lib/sort_object_keys":538,"../../plot_api/edit_types":548,"../domain":593,"./constants":596}],600:[function(i,U,V){var w=i("../../lib"),f=i("../subplot_defaults"),M=i("../get_data").getSubplotData,T=i("./constants"),e=i("./layout_attributes"),a=T.axesNames;U.exports=function(t,h,s){f(t,h,s,{type:"geo",attributes:e,handleDefaults:n,fullData:s,partition:"y"})};function n(r,t,h,s){var o=M(s.fullData,"geo",s.id),y=o.map(function(Y){return Y._expandedIndex}),d=h("resolution"),p=h("scope"),c=T.scopeDefaults[p],m=h("projection.type",c.projType),l=t._isAlbersUsa=m==="albers usa";l&&(p=t.scope="usa");var x=t._isScoped=p!=="world",u=t._isSatellite=m==="satellite",A=t._isConic=m.indexOf("conic")!==-1||m==="albers",_=t._isClipped=!!T.lonaxisSpan[m];if(r.visible===!1){var g=w.extendDeep({},t._template);g.showcoastlines=!1,g.showcountries=!1,g.showframe=!1,g.showlakes=!1,g.showland=!1,g.showocean=!1,g.showrivers=!1,g.showsubunits=!1,g.lonaxis&&(g.lonaxis.showgrid=!1),g.lataxis&&(g.lataxis.showgrid=!1),t._template=g}for(var b=h("visible"),v,k=0;k<a.length;k++){var S=a[k],E=[30,10][k],C;if(x)C=c[S+"Range"];else{var F=T[S+"Span"],I=(F[m]||F["*"])/2,D=h("projection.rotation."+S.substr(0,3),c.projRotate[k]);C=[D-I,D+I]}var R=h(S+".range",C);h(S+".tick0"),h(S+".dtick",E),v=h(S+".showgrid",b?void 0:!1),v&&(h(S+".gridcolor"),h(S+".gridwidth"),h(S+".griddash")),t[S]._ax={type:"linear",_id:S.slice(0,3),_traceIndices:y,setScale:w.identity,c2l:w.identity,r2l:w.identity,autorange:!0,range:R.slice(),_m:1,_input:{}}}var O=t.lonaxis.range,z=t.lataxis.range,B=O[0],G=O[1];B>0&&G<0&&(G+=360);var Q=(B+G)/2,X;if(!l){var j=x?c.projRotate:[Q,0,0];X=h("projection.rotation.lon",j[0]),h("projection.rotation.lat",j[1]),h("projection.rotation.roll",j[2]),v=h("showcoastlines",!x&&b),v&&(h("coastlinecolor"),h("coastlinewidth")),v=h("showocean",b?void 0:!1),v&&h("oceancolor")}var re,ue;if(l?(re=-96.6,ue=38.7):(re=x?Q:X,ue=(z[0]+z[1])/2),h("center.lon",re),h("center.lat",ue),u&&(h("projection.tilt"),h("projection.distance")),A){var K=c.projParallels||[0,60];h("projection.parallels",K)}h("projection.scale"),v=h("showland",b?void 0:!1),v&&h("landcolor"),v=h("showlakes",b?void 0:!1),v&&h("lakecolor"),v=h("showrivers",b?void 0:!1),v&&(h("rivercolor"),h("riverwidth")),v=h("showcountries",x&&p!=="usa"&&b),v&&(h("countrycolor"),h("countrywidth")),(p==="usa"||p==="north america"&&d===50)&&(h("showsubunits",b),h("subunitcolor"),h("subunitwidth")),x||(v=h("showframe",b),v&&(h("framecolor"),h("framewidth"))),h("bgcolor");var te=h("fitbounds");te&&(delete t.projection.scale,x?(delete t.center.lon,delete t.center.lat):_?(delete t.center.lon,delete t.center.lat,delete t.projection.rotation.lon,delete t.projection.rotation.lat,delete t.lonaxis.range,delete t.lataxis.range):(delete t.center.lon,delete t.center.lat,delete t.projection.rotation.lon))}},{"../../lib":515,"../get_data":602,"../subplot_defaults":641,"./constants":596,"./layout_attributes":599}],601:[function(i,U,V){var w=i("@plotly/d3"),f=i("../../lib"),M=i("../../registry"),T=Math.PI/180,e=180/Math.PI,a={cursor:"pointer"},n={cursor:"auto"};function r(S,E){var C=S.projection,F;return E._isScoped?F=s:E._isClipped?F=y:F=o,F(S,C)}U.exports=r;function t(S,E){return w.behavior.zoom().translate(E.translate()).scale(E.scale())}function h(S,E,C){var F=S.id,I=S.graphDiv,D=I.layout,R=D[F],O=I._fullLayout,z=O[F],B={},G={};function Q(X,j){B[F+"."+X]=f.nestedProperty(R,X).get(),M.call("_storeDirectGUIEdit",D,O._preGUI,B);var re=f.nestedProperty(z,X);re.get()!==j&&(re.set(j),f.nestedProperty(R,X).set(j),G[F+"."+X]=j)}C(Q),Q("projection.scale",E.scale()/S.fitScale),Q("fitbounds",!1),I.emit("plotly_relayout",G)}function s(S,E){var C=t(S,E);function F(){w.select(this).style(a)}function I(){E.scale(w.event.scale).translate(w.event.translate),S.render(!0);var O=E.invert(S.midPt);S.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":E.scale()/S.fitScale,"geo.center.lon":O[0],"geo.center.lat":O[1]})}function D(O){var z=E.invert(S.midPt);O("center.lon",z[0]),O("center.lat",z[1])}function R(){w.select(this).style(n),h(S,E,D)}return C.on("zoomstart",F).on("zoom",I).on("zoomend",R),C}function o(S,E){var C=t(S,E),F=2,I,D,R,O,z,B,G,Q,X;function j(H){return E.invert(H)}function re(H){var ee=j(H);if(!ee)return!0;var ne=E(ee);return Math.abs(ne[0]-H[0])>F||Math.abs(ne[1]-H[1])>F}function ue(){w.select(this).style(a),I=w.mouse(this),D=E.rotate(),R=E.translate(),O=D,z=j(I)}function K(){if(B=w.mouse(this),re(I)){C.scale(E.scale()),C.translate(E.translate());return}E.scale(w.event.scale),E.translate([R[0],w.event.translate[1]]),z?j(B)&&(Q=j(B),G=[O[0]+(Q[0]-z[0]),D[1],D[2]],E.rotate(G),O=G):(I=B,z=j(I)),X=!0,S.render(!0);var H=E.rotate(),ee=E.invert(S.midPt);S.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":E.scale()/S.fitScale,"geo.center.lon":ee[0],"geo.center.lat":ee[1],"geo.projection.rotation.lon":-H[0]})}function te(){w.select(this).style(n),X&&h(S,E,Y)}function Y(H){var ee=E.rotate(),ne=E.invert(S.midPt);H("projection.rotation.lon",-ee[0]),H("center.lon",ne[0]),H("center.lat",ne[1])}return C.on("zoomstart",ue).on("zoom",K).on("zoomend",te),C}function y(S,E){E.rotate(),E.scale();var C=t(S,E),F=k(C,"zoomstart","zoom","zoomend"),I=0,D=C.on,R;C.on("zoomstart",function(){w.select(this).style(a);var Q=w.mouse(this),X=E.rotate(),j=X,re=E.translate(),ue=p(X);R=d(E,Q),D.call(C,"zoom",function(){var K=w.mouse(this);if(E.scale(w.event.scale),!R)Q=K,R=d(E,Q);else if(d(E,K)){E.rotate(X).translate(re);var te=d(E,K),Y=m(R,te),H=_(c(ue,Y)),ee=l(H,R,j);(!isFinite(ee[0])||!isFinite(ee[1])||!isFinite(ee[2]))&&(ee=j),E.rotate(ee),j=ee}z(F.of(this,arguments))}),O(F.of(this,arguments))}).on("zoomend",function(){w.select(this).style(n),D.call(C,"zoom",null),B(F.of(this,arguments)),h(S,E,G)}).on("zoom.redraw",function(){S.render(!0);var Q=E.rotate();S.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":E.scale()/S.fitScale,"geo.projection.rotation.lon":-Q[0],"geo.projection.rotation.lat":-Q[1]})});function O(Q){I++||Q({type:"zoomstart"})}function z(Q){Q({type:"zoom"})}function B(Q){--I||Q({type:"zoomend"})}function G(Q){var X=E.rotate();Q("projection.rotation.lon",-X[0]),Q("projection.rotation.lat",-X[1])}return w.rebind(C,F,"on")}function d(S,E){var C=S.invert(E);return C&&isFinite(C[0])&&isFinite(C[1])&&g(C)}function p(S){var E=.5*S[0]*T,C=.5*S[1]*T,F=.5*S[2]*T,I=Math.sin(E),D=Math.cos(E),R=Math.sin(C),O=Math.cos(C),z=Math.sin(F),B=Math.cos(F);return[D*O*B+I*R*z,I*O*B-D*R*z,D*R*B+I*O*z,D*O*z-I*R*B]}function c(S,E){var C=S[0],F=S[1],I=S[2],D=S[3],R=E[0],O=E[1],z=E[2],B=E[3];return[C*R-F*O-I*z-D*B,C*O+F*R+I*B-D*z,C*z-F*B+I*R+D*O,C*B+F*z-I*O+D*R]}function m(S,E){if(!(!S||!E)){var C=v(S,E),F=Math.sqrt(b(C,C)),I=.5*Math.acos(Math.max(-1,Math.min(1,b(S,E)))),D=Math.sin(I)/F;return F&&[Math.cos(I),C[2]*D,-C[1]*D,C[0]*D]}}function l(S,E,C){var F=A(E,2,S[0]);F=A(F,1,S[1]),F=A(F,0,S[2]-C[2]);var I=E[0],D=E[1],R=E[2],O=F[0],z=F[1],B=F[2],G=Math.atan2(D,I)*e,Q=Math.sqrt(I*I+D*D),X,j;Math.abs(z)>Q?(j=(z>0?90:-90)-G,X=0):(j=Math.asin(z/Q)*e-G,X=Math.sqrt(Q*Q-z*z));var re=180-j-2*G,ue=(Math.atan2(B,O)-Math.atan2(R,X))*e,K=(Math.atan2(B,O)-Math.atan2(R,-X))*e,te=x(C[0],C[1],j,ue),Y=x(C[0],C[1],re,K);return te<=Y?[j,ue,C[2]]:[re,K,C[2]]}function x(S,E,C,F){var I=u(C-S),D=u(F-E);return Math.sqrt(I*I+D*D)}function u(S){return(S%360+540)%360-180}function A(S,E,C){var F=C*T,I=S.slice(),D=E===0?1:0,R=E===2?1:2,O=Math.cos(F),z=Math.sin(F);return I[D]=S[D]*O-S[R]*z,I[R]=S[R]*O+S[D]*z,I}function _(S){return[Math.atan2(2*(S[0]*S[1]+S[2]*S[3]),1-2*(S[1]*S[1]+S[2]*S[2]))*e,Math.asin(Math.max(-1,Math.min(1,2*(S[0]*S[2]-S[3]*S[1]))))*e,Math.atan2(2*(S[0]*S[3]+S[1]*S[2]),1-2*(S[2]*S[2]+S[3]*S[3]))*e]}function g(S){var E=S[0]*T,C=S[1]*T,F=Math.cos(C);return[F*Math.cos(E),F*Math.sin(E),Math.sin(C)]}function b(S,E){for(var C=0,F=0,I=S.length;F<I;++F)C+=S[F]*E[F];return C}function v(S,E){return[S[1]*E[2]-S[2]*E[1],S[2]*E[0]-S[0]*E[2],S[0]*E[1]-S[1]*E[0]]}function k(S){for(var E=0,C=arguments.length,F=[];++E<C;)F.push(arguments[E]);var I=w.dispatch.apply(null,F);return I.of=function(D,R){return function(O){var z;try{z=O.sourceEvent=w.event,O.target=S,w.event=O,I[O.type].apply(D,R)}finally{w.event=z}}},I}},{"../../lib":515,"../../registry":647,"@plotly/d3":58}],602:[function(i,U,V){var w=i("../registry"),f=i("./cartesian/constants").SUBPLOT_PATTERN;V.getSubplotCalcData=function(M,T,e){var a=w.subplotsRegistry[T];if(!a)return[];for(var n=a.attr,r=[],t=0;t<M.length;t++){var h=M[t],s=h[0].trace;s[n]===e&&r.push(h)}return r},V.getModuleCalcData=function(M,T){var e=[],a=[],n;if(typeof T=="string"?n=w.getModule(T).plot:typeof T=="function"?n=T:n=T.plot,!n)return[e,M];for(var r=0;r<M.length;r++){var t=M[r],h=t[0].trace;h.visible!==!0||h._length===0||(h._module.plot===n?e.push(t):a.push(t))}return[e,a]},V.getSubplotData=function(T,e,a){if(!w.subplotsRegistry[e])return[];var n=w.subplotsRegistry[e].attr,r=[],t,h,s;if(e==="gl2d"){var o=a.match(f);h="x"+o[1],s="y"+o[2]}for(var y=0;y<T.length;y++)t=T[y],e==="gl2d"&&w.traceIs(t,"gl2d")?t[n[0]]===h&&t[n[1]]===s&&r.push(t):t[n]===a&&r.push(t);return r}},{"../registry":647,"./cartesian/constants":573}],603:[function(i,U,V){var w=i("mouse-change"),f=i("mouse-wheel"),M=i("mouse-event-offset"),T=i("../cartesian/constants"),e=i("has-passive-events");U.exports=n;function a(r,t){this.element=r,this.plot=t,this.mouseListener=null,this.wheelListener=null,this.lastInputTime=Date.now(),this.lastPos=[0,0],this.boxEnabled=!1,this.boxInited=!1,this.boxStart=[0,0],this.boxEnd=[0,0],this.dragStart=[0,0]}function n(r){var t=r.mouseContainer,h=r.glplot,s=new a(t,h);function o(){r.xaxis.autorange=!1,r.yaxis.autorange=!1}function y(){for(var p=r.graphDiv._fullLayout._axisConstraintGroups,c=r.xaxis._id,m=r.yaxis._id,l=0;l<p.length;l++)if(p[l][c]!==-1){if(p[l][m]!==-1)return!0;break}return!1}s.mouseListener=w(t,d),t.addEventListener("touchstart",function(p){var c=M(p.changedTouches[0],t);d(0,c[0],c[1]),d(1,c[0],c[1]),p.preventDefault()},e?{passive:!1}:!1),t.addEventListener("touchmove",function(p){p.preventDefault();var c=M(p.changedTouches[0],t);d(1,c[0],c[1]),p.preventDefault()},e?{passive:!1}:!1),t.addEventListener("touchend",function(p){d(0,s.lastPos[0],s.lastPos[1]),p.preventDefault()},e?{passive:!1}:!1);function d(p,c,m){var l=r.calcDataBox(),x=h.viewBox,u=s.lastPos[0],A=s.lastPos[1],_=T.MINDRAG*h.pixelRatio,g=T.MINZOOM*h.pixelRatio,b,v;c*=h.pixelRatio,m*=h.pixelRatio,m=x[3]-x[1]-m;function k(D,R,O){var z=Math.min(R,O),B=Math.max(R,O);z!==B?(l[D]=z,l[D+2]=B,s.dataBox=l,r.setRanges(l)):(r.selectBox.selectBox=[0,0,1,1],r.glplot.setDirty())}switch(r.fullLayout.dragmode){case"zoom":if(p){var S=c/(x[2]-x[0])*(l[2]-l[0])+l[0],E=m/(x[3]-x[1])*(l[3]-l[1])+l[1];s.boxInited||(s.boxStart[0]=S,s.boxStart[1]=E,s.dragStart[0]=c,s.dragStart[1]=m),s.boxEnd[0]=S,s.boxEnd[1]=E,s.boxInited=!0,!s.boxEnabled&&(s.boxStart[0]!==s.boxEnd[0]||s.boxStart[1]!==s.boxEnd[1])&&(s.boxEnabled=!0);var C=Math.abs(s.dragStart[0]-c)<g,F=Math.abs(s.dragStart[1]-m)<g;if(y()&&!(C&&F)){b=s.boxEnd[0]-s.boxStart[0],v=s.boxEnd[1]-s.boxStart[1];var I=(l[3]-l[1])/(l[2]-l[0]);Math.abs(b*I)>Math.abs(v)?(s.boxEnd[1]=s.boxStart[1]+Math.abs(b)*I*(v>=0?1:-1),s.boxEnd[1]<l[1]?(s.boxEnd[1]=l[1],s.boxEnd[0]=s.boxStart[0]+(l[1]-s.boxStart[1])/Math.abs(I)):s.boxEnd[1]>l[3]&&(s.boxEnd[1]=l[3],s.boxEnd[0]=s.boxStart[0]+(l[3]-s.boxStart[1])/Math.abs(I))):(s.boxEnd[0]=s.boxStart[0]+Math.abs(v)/I*(b>=0?1:-1),s.boxEnd[0]<l[0]?(s.boxEnd[0]=l[0],s.boxEnd[1]=s.boxStart[1]+(l[0]-s.boxStart[0])*Math.abs(I)):s.boxEnd[0]>l[2]&&(s.boxEnd[0]=l[2],s.boxEnd[1]=s.boxStart[1]+(l[2]-s.boxStart[0])*Math.abs(I)))}else C&&(s.boxEnd[0]=s.boxStart[0]),F&&(s.boxEnd[1]=s.boxStart[1])}else s.boxEnabled?(b=s.boxStart[0]!==s.boxEnd[0],v=s.boxStart[1]!==s.boxEnd[1],b||v?(b&&(k(0,s.boxStart[0],s.boxEnd[0]),r.xaxis.autorange=!1),v&&(k(1,s.boxStart[1],s.boxEnd[1]),r.yaxis.autorange=!1),r.relayoutCallback()):r.glplot.setDirty(),s.boxEnabled=!1,s.boxInited=!1):s.boxInited&&(s.boxInited=!1);break;case"pan":s.boxEnabled=!1,s.boxInited=!1,p?(s.panning||(s.dragStart[0]=c,s.dragStart[1]=m),Math.abs(s.dragStart[0]-c)<_&&(c=s.dragStart[0]),Math.abs(s.dragStart[1]-m)<_&&(m=s.dragStart[1]),b=(u-c)*(l[2]-l[0])/(h.viewBox[2]-h.viewBox[0]),v=(A-m)*(l[3]-l[1])/(h.viewBox[3]-h.viewBox[1]),l[0]+=b,l[2]+=b,l[1]+=v,l[3]+=v,r.setRanges(l),s.panning=!0,s.lastInputTime=Date.now(),o(),r.cameraChanged(),r.handleAnnotations()):s.panning&&(s.panning=!1,r.relayoutCallback());break}s.lastPos[0]=c,s.lastPos[1]=m}return s.wheelListener=f(t,function(p,c){if(!r.scrollZoom)return!1;var m=r.calcDataBox(),l=h.viewBox,x=s.lastPos[0],u=s.lastPos[1],A=Math.exp(5*c/(l[3]-l[1])),_=x/(l[2]-l[0])*(m[2]-m[0])+m[0],g=u/(l[3]-l[1])*(m[3]-m[1])+m[1];return m[0]=(m[0]-_)*A+_,m[2]=(m[2]-_)*A+_,m[1]=(m[1]-g)*A+g,m[3]=(m[3]-g)*A+g,r.setRanges(m),s.lastInputTime=Date.now(),o(),r.cameraChanged(),r.handleAnnotations(),r.relayoutCallback(),!0},!0),s}},{"../cartesian/constants":573,"has-passive-events":229,"mouse-change":241,"mouse-event-offset":242,"mouse-wheel":244}],604:[function(i,U,V){var w=i("../cartesian/axes"),f=i("../../lib/str2rgbarray");function M(n){this.scene=n,this.gl=n.gl,this.pixelRatio=n.pixelRatio,this.screenBox=[0,0,1,1],this.viewBox=[0,0,1,1],this.dataBox=[-1,-1,1,1],this.borderLineEnable=[!1,!1,!1,!1],this.borderLineWidth=[1,1,1,1],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.ticks=[[],[]],this.tickEnable=[!0,!0,!1,!1],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labels=["x","y"],this.labelEnable=[!0,!0,!1,!1],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelPad=[15,15,15,15],this.labelSize=[12,12],this.labelFont=["sans-serif","sans-serif"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.title="",this.titleEnable=!0,this.titleCenter=[0,0,0,0],this.titleAngle=0,this.titleColor=[0,0,0,1],this.titleFont="sans-serif",this.titleSize=18,this.gridLineEnable=[!0,!0],this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]],this.gridLineWidth=[1,1],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[1,1],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.static=this.scene.staticPlot}var T=M.prototype,e=["xaxis","yaxis"];T.merge=function(n){this.titleEnable=!1,this.backgroundColor=f(n.plot_bgcolor);var r,t,h,s,o,y,d,p,c,m,l;for(m=0;m<2;++m){r=e[m];var x=r.charAt(0);for(t=n[this.scene[r]._name],h=t.title.text===this.scene.fullLayout._dfltTitle[x]?"":t.title.text,l=0;l<=2;l+=2)this.labelEnable[m+l]=!1,this.labels[m+l]=h,this.labelColor[m+l]=f(t.title.font.color),this.labelFont[m+l]=t.title.font.family,this.labelSize[m+l]=t.title.font.size,this.labelPad[m+l]=this.getLabelPad(r,t),this.tickEnable[m+l]=!1,this.tickColor[m+l]=f((t.tickfont||{}).color),this.tickAngle[m+l]=t.tickangle==="auto"?0:Math.PI*-t.tickangle/180,this.tickPad[m+l]=this.getTickPad(t),this.tickMarkLength[m+l]=0,this.tickMarkWidth[m+l]=t.tickwidth||0,this.tickMarkColor[m+l]=f(t.tickcolor),this.borderLineEnable[m+l]=!1,this.borderLineColor[m+l]=f(t.linecolor),this.borderLineWidth[m+l]=t.linewidth||0;d=this.hasSharedAxis(t),o=this.hasAxisInDfltPos(r,t)&&!d,y=this.hasAxisInAltrPos(r,t)&&!d,s=t.mirror||!1,p=d?String(s).indexOf("all")!==-1:!!s,c=d?s==="allticks":String(s).indexOf("ticks")!==-1,o?this.labelEnable[m]=!0:y&&(this.labelEnable[m+2]=!0),o?this.tickEnable[m]=t.showticklabels:y&&(this.tickEnable[m+2]=t.showticklabels),(o||p)&&(this.borderLineEnable[m]=t.showline),(y||p)&&(this.borderLineEnable[m+2]=t.showline),(o||c)&&(this.tickMarkLength[m]=this.getTickMarkLength(t)),(y||c)&&(this.tickMarkLength[m+2]=this.getTickMarkLength(t)),this.gridLineEnable[m]=t.showgrid,this.gridLineColor[m]=f(t.gridcolor),this.gridLineWidth[m]=t.gridwidth,this.zeroLineEnable[m]=t.zeroline,this.zeroLineColor[m]=f(t.zerolinecolor),this.zeroLineWidth[m]=t.zerolinewidth}},T.hasSharedAxis=function(n){var r=this.scene,t=r.fullLayout._subplots.gl2d,h=w.findSubplotsWithAxis(t,n);return h.indexOf(r.id)!==0},T.hasAxisInDfltPos=function(n,r){var t=r.side;if(n==="xaxis")return t==="bottom";if(n==="yaxis")return t==="left"},T.hasAxisInAltrPos=function(n,r){var t=r.side;if(n==="xaxis")return t==="top";if(n==="yaxis")return t==="right"},T.getLabelPad=function(n,r){var t=1.5,h=r.title.font.size,s=r.showticklabels;if(n==="xaxis")return r.side==="top"?-10+h*(t+(s?1:0)):-10+h*(t+(s?.5:0));if(n==="yaxis")return r.side==="right"?10+h*(t+(s?1:.5)):10+h*(t+(s?.5:0))},T.getTickPad=function(n){return n.ticks==="outside"?10+n.ticklen:15},T.getTickMarkLength=function(n){if(!n.ticks)return 0;var r=n.ticklen;return n.ticks==="inside"?-r:r};function a(n){return new M(n)}U.exports=a},{"../../lib/str2rgbarray":540,"../cartesian/axes":566}],605:[function(i,U,V){var w=i("../../plot_api/edit_types").overrideAll,f=i("./scene2d"),M=i("../layout_attributes"),T=i("../../constants/xmlns_namespaces"),e=i("../cartesian/constants"),a=i("../cartesian"),n=i("../../components/fx/layout_attributes"),r=i("../get_data").getSubplotData;V.name="gl2d",V.attr=["xaxis","yaxis"],V.idRoot=["x","y"],V.idRegex=e.idRegex,V.attrRegex=e.attrRegex,V.attributes=i("../cartesian/attributes"),V.supplyLayoutDefaults=function(t,h,s){h._has("cartesian")||a.supplyLayoutDefaults(t,h,s)},V.layoutAttrOverrides=w(a.layoutAttributes,"plot","from-root"),V.baseLayoutAttrOverrides=w({plot_bgcolor:M.plot_bgcolor,hoverlabel:n.hoverlabel},"plot","nested"),V.plot=function(h){for(var s=h._fullLayout,o=h._fullData,y=s._subplots.gl2d,d=0;d<y.length;d++){var p=y[d],c=s._plots[p],m=r(o,"gl2d",p),l=c._scene2d;l===void 0&&(l=new f({id:p,graphDiv:h,container:h.querySelector(".gl-container"),staticPlot:h._context.staticPlot,plotGlPixelRatio:h._context.plotGlPixelRatio},s),c._scene2d=l),l.plot(m,h.calcdata,s,h.layout)}},V.clean=function(t,h,s,o){for(var y=o._subplots.gl2d||[],d=0;d<y.length;d++){var p=y[d],c=o._plots[p];if(!!c._scene2d){var m=r(t,"gl2d",p);m.length===0&&(c._scene2d.destroy(),delete o._plots[p])}}a.clean.apply(this,arguments)},V.drawFramework=function(t){t._context.staticPlot||a.drawFramework(t)},V.toSVG=function(t){for(var h=t._fullLayout,s=h._subplots.gl2d,o=0;o<s.length;o++){var y=h._plots[s[o]],d=y._scene2d,p=d.toImage("png"),c=h._glimages.append("svg:image");c.attr({xmlns:T.svg,"xlink:href":p,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"}),d.destroy()}},V.updateFx=function(t){for(var h=t._fullLayout,s=h._subplots.gl2d,o=0;o<s.length;o++){var y=h._plots[s[o]]._scene2d;y.updateFx(h.dragmode)}}},{"../../components/fx/layout_attributes":408,"../../constants/xmlns_namespaces":492,"../../plot_api/edit_types":548,"../cartesian":578,"../cartesian/attributes":564,"../cartesian/constants":573,"../get_data":602,"../layout_attributes":619,"./scene2d":606}],606:[function(i,U,V){var w=i("../../registry"),f=i("../../plots/cartesian/axes"),M=i("../../components/fx"),T=i("../../../stackgl_modules").gl_plot2d,e=i("../../../stackgl_modules").gl_spikes2d,a=i("../../../stackgl_modules").gl_select_box,n=i("webgl-context"),r=i("./convert"),t=i("./camera"),h=i("../../lib/show_no_webgl_msg"),s=i("../cartesian/constraints"),o=s.enforce,y=s.clean,d=i("../cartesian/autorange").doAutoRange,p=i("../../components/dragelement/helpers"),c=p.drawMode,m=p.selectMode,l=["xaxis","yaxis"],x,u,A=i("../cartesian/constants").SUBPLOT_PATTERN;function _(v,k){this.container=v.container,this.graphDiv=v.graphDiv,this.pixelRatio=v.plotGlPixelRatio||window.devicePixelRatio,this.id=v.id,this.staticPlot=!!v.staticPlot,this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian,this.fullData=null,this.updateRefs(k),this.makeFramework(),!this.stopped&&(this.glplotOptions=r(this),this.glplotOptions.merge(k),this.glplot=T(this.glplotOptions),this.camera=t(this),this.traces={},this.spikes=e(this.glplot),this.selectBox=a(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}U.exports=_;var g=_.prototype;g.makeFramework=function(){if(this.staticPlot){if(!u&&(x=document.createElement("canvas"),u=n({canvas:x,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}),!u))throw new Error("Error creating static canvas/context for image server");this.canvas=x,this.gl=u}else{var v=this.container.querySelector(".gl-canvas-focus"),k=n({canvas:v,preserveDrawingBuffer:!0,premultipliedAlpha:!0});if(!k){h(this),this.stopped=!0;return}this.canvas=v,this.gl=k}var S=this.canvas;S.style.width="100%",S.style.height="100%",S.style.position="absolute",S.style.top="0px",S.style.left="0px",S.style["pointer-events"]="none",this.updateSize(S);var E=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");E.style.position="absolute",E.style.top=E.style.left="0px",E.style.width=E.style.height="100%",E.style["z-index"]=20,E.style["pointer-events"]="none";var C=this.mouseContainer=document.createElement("div");C.style.position="absolute",C.style["pointer-events"]="auto",this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var F=this.container;F.appendChild(E),F.appendChild(C);var I=this;C.addEventListener("mouseout",function(){I.isMouseOver=!1,I.unhover()}),C.addEventListener("mouseover",function(){I.isMouseOver=!0})},g.toImage=function(v){v||(v="png"),this.stopped=!0,this.staticPlot&&this.container.appendChild(x),this.updateSize(this.canvas);var k=this.glplot.gl,S=k.drawingBufferWidth,E=k.drawingBufferHeight;k.clearColor(1,1,1,0),k.clear(k.COLOR_BUFFER_BIT|k.DEPTH_BUFFER_BIT),this.glplot.setDirty(),this.glplot.draw(),k.bindFramebuffer(k.FRAMEBUFFER,null);var C=new Uint8Array(S*E*4);k.readPixels(0,0,S,E,k.RGBA,k.UNSIGNED_BYTE,C);for(var F=0,I=E-1;F<I;++F,--I)for(var D=0;D<S;++D)for(var R=0;R<4;++R){var O=C[4*(S*F+D)+R];C[4*(S*F+D)+R]=C[4*(S*I+D)+R],C[4*(S*I+D)+R]=O}var z=document.createElement("canvas");z.width=S,z.height=E;var B=z.getContext("2d",{willReadFrequently:!0}),G=B.createImageData(S,E);G.data.set(C),B.putImageData(G,0,0);var Q;switch(v){case"jpeg":Q=z.toDataURL("image/jpeg");break;case"webp":Q=z.toDataURL("image/webp");break;default:Q=z.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(x),Q},g.updateSize=function(v){v||(v=this.canvas);var k=this.pixelRatio,S=this.fullLayout,E=S.width,C=S.height,F=Math.ceil(k*E)|0,I=Math.ceil(k*C)|0;return(v.width!==F||v.height!==I)&&(v.width=F,v.height=I),v},g.computeTickMarks=function(){this.xaxis.setScale(),this.yaxis.setScale();for(var v=[f.calcTicks(this.xaxis),f.calcTicks(this.yaxis)],k=0;k<2;++k)for(var S=0;S<v[k].length;++S)v[k][S].text=v[k][S].text+"";return v};function b(v,k){for(var S=0;S<2;++S){var E=v[S],C=k[S];if(E.length!==C.length)return!0;for(var F=0;F<E.length;++F)if(E[F].x!==C[F].x)return!0}return!1}g.updateRefs=function(v){this.fullLayout=v;var k=this.id.match(A),S="xaxis"+k[1],E="yaxis"+k[2];this.xaxis=this.fullLayout[S],this.yaxis=this.fullLayout[E]},g.relayoutCallback=function(){var v=this.graphDiv,k=this.xaxis,S=this.yaxis,E=v.layout,C={},F=C[k._name+".range"]=k.range.slice(),I=C[S._name+".range"]=S.range.slice();C[k._name+".autorange"]=k.autorange,C[S._name+".autorange"]=S.autorange,w.call("_storeDirectGUIEdit",v.layout,v._fullLayout._preGUI,C);var D=E[k._name];D.range=F,D.autorange=k.autorange;var R=E[S._name];R.range=I,R.autorange=S.autorange,C.lastInputTime=this.camera.lastInputTime,v.emit("plotly_relayout",C)},g.cameraChanged=function(){var v=this.camera;this.glplot.setDataBox(this.calcDataBox());var k=this.computeTickMarks(),S=this.glplotOptions.ticks;b(k,S)&&(this.glplotOptions.ticks=k,this.glplotOptions.dataBox=v.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())},g.handleAnnotations=function(){for(var v=this.graphDiv,k=this.fullLayout.annotations,S=0;S<k.length;S++){var E=k[S];E.xref===this.xaxis._id&&E.yref===this.yaxis._id&&w.getComponentMethod("annotations","drawOne")(v,S)}},g.destroy=function(){if(!!this.glplot){var v=this.traces;v&&Object.keys(v).map(function(k){v[k].dispose(),delete v[k]}),this.glplot.dispose(),this.container.removeChild(this.svgContainer),this.container.removeChild(this.mouseContainer),this.fullData=null,this.glplot=null,this.stopped=!0,this.camera.mouseListener.enabled=!1,this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener),this.camera=null}},g.plot=function(v,k,S){var E=this.glplot;this.updateRefs(S),this.xaxis.clearCalc(),this.yaxis.clearCalc(),this.updateTraces(v,k),this.updateFx(S.dragmode);var C=S.width,F=S.height;this.updateSize(this.canvas);var I=this.glplotOptions;I.merge(S),I.screenBox=[0,0,C,F];var D={_fullLayout:{_axisConstraintGroups:S._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis,_size:S._size}};y(D,this.xaxis),y(D,this.yaxis);var R=S._size,O=this.xaxis.domain,z=this.yaxis.domain;I.viewBox=[R.l+O[0]*R.w,R.b+z[0]*R.h,C-R.r-(1-O[1])*R.w,F-R.t-(1-z[1])*R.h],this.mouseContainer.style.width=R.w*(O[1]-O[0])+"px",this.mouseContainer.style.height=R.h*(z[1]-z[0])+"px",this.mouseContainer.height=R.h*(z[1]-z[0]),this.mouseContainer.style.left=R.l+O[0]*R.w+"px",this.mouseContainer.style.top=R.t+(1-z[1])*R.h+"px";var B,G;for(G=0;G<2;++G)B=this[l[G]],B._length=I.viewBox[G+2]-I.viewBox[G],d(this.graphDiv,B),B.setScale();o(D),I.ticks=this.computeTickMarks(),I.dataBox=this.calcDataBox(),I.merge(S),E.update(I),this.glplot.draw()},g.calcDataBox=function(){var v=this.xaxis,k=this.yaxis,S=v.range,E=k.range,C=v.r2l,F=k.r2l;return[C(S[0]),F(E[0]),C(S[1]),F(E[1])]},g.setRanges=function(v){var k=this.xaxis,S=this.yaxis,E=k.l2r,C=S.l2r;k.range=[E(v[0]),E(v[2])],S.range=[C(v[1]),C(v[3])]},g.updateTraces=function(v,k){var S=Object.keys(this.traces),E,C,F;this.fullData=v;e:for(E=0;E<S.length;E++){var I=S[E],D=this.traces[I];for(C=0;C<v.length;C++)if(F=v[C],F.uid===I&&F.type===D.type)continue e;D.dispose(),delete this.traces[I]}for(E=0;E<v.length;E++){F=v[E];var R=k[E],O=this.traces[F.uid];O?O.update(F,R):(O=F._module.plot(this,F,R),this.traces[F.uid]=O)}this.glplot.objects.sort(function(z,B){return z._trace.index-B._trace.index})},g.updateFx=function(v){m(v)||c(v)?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto"),v==="pan"?this.mouseContainer.style.cursor="move":v==="zoom"?this.mouseContainer.style.cursor="crosshair":this.mouseContainer.style.cursor=null},g.emitPointAction=function(v,k){for(var S=v.trace.uid,E=v.pointIndex,C,F=0;F<this.fullData.length;F++)this.fullData[F].uid===S&&(C=this.fullData[F]);var I={x:v.traceCoord[0],y:v.traceCoord[1],curveNumber:C.index,pointNumber:E,data:C._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};M.appendArrayPointValue(I,C,E),this.graphDiv.emit(k,{points:[I]})},g.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var v=this.glplot,k=this.camera,S=k.mouseListener,E=this.lastButtonState===1&&S.buttons===0,C=this.fullLayout;this.lastButtonState=S.buttons,this.cameraChanged();var F=S.x*v.pixelRatio,I=this.canvas.height-v.pixelRatio*S.y,D;if(k.boxEnabled&&C.dragmode==="zoom"){this.selectBox.enabled=!0;for(var R=this.selectBox.selectBox=[Math.min(k.boxStart[0],k.boxEnd[0]),Math.min(k.boxStart[1],k.boxEnd[1]),Math.max(k.boxStart[0],k.boxEnd[0]),Math.max(k.boxStart[1],k.boxEnd[1])],O=0;O<2;O++)k.boxStart[O]===k.boxEnd[O]&&(R[O]=v.dataBox[O],R[O+2]=v.dataBox[O+2]);v.setDirty()}else if(!k.panning&&this.isMouseOver){this.selectBox.enabled=!1;var z=C._size,B=this.xaxis.domain,G=this.yaxis.domain;D=v.pick(F/v.pixelRatio+z.l+B[0]*z.w,I/v.pixelRatio-(z.t+(1-G[1])*z.h));var Q=D&&D.object._trace.handlePick(D);if(Q&&E&&this.emitPointAction(Q,"plotly_click"),D&&D.object._trace.hoverinfo!=="skip"&&C.hovermode&&Q&&(!this.lastPickResult||this.lastPickResult.traceUid!==Q.trace.uid||this.lastPickResult.dataCoord[0]!==Q.dataCoord[0]||this.lastPickResult.dataCoord[1]!==Q.dataCoord[1])){var X=Q;this.lastPickResult={traceUid:Q.trace?Q.trace.uid:null,dataCoord:Q.dataCoord.slice()},this.spikes.update({center:D.dataCoord}),X.screenCoord=[((v.viewBox[2]-v.viewBox[0])*(D.dataCoord[0]-v.dataBox[0])/(v.dataBox[2]-v.dataBox[0])+v.viewBox[0])/v.pixelRatio,(this.canvas.height-(v.viewBox[3]-v.viewBox[1])*(D.dataCoord[1]-v.dataBox[1])/(v.dataBox[3]-v.dataBox[1])-v.viewBox[1])/v.pixelRatio],this.emitPointAction(Q,"plotly_hover");var j=this.fullData[X.trace.index]||{},re=X.pointIndex,ue=M.castHoverinfo(j,C,re);if(ue&&ue!=="all"){var K=ue.split("+");K.indexOf("x")===-1&&(X.traceCoord[0]=void 0),K.indexOf("y")===-1&&(X.traceCoord[1]=void 0),K.indexOf("z")===-1&&(X.traceCoord[2]=void 0),K.indexOf("text")===-1&&(X.textLabel=void 0),K.indexOf("name")===-1&&(X.name=void 0)}M.loneHover({x:X.screenCoord[0],y:X.screenCoord[1],xLabel:this.hoverFormatter("xaxis",X.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",X.traceCoord[1]),zLabel:X.traceCoord[2],text:X.textLabel,name:X.name,color:M.castHoverOption(j,re,"bgcolor")||X.color,borderColor:M.castHoverOption(j,re,"bordercolor"),fontFamily:M.castHoverOption(j,re,"font.family"),fontSize:M.castHoverOption(j,re,"font.size"),fontColor:M.castHoverOption(j,re,"font.color"),nameLength:M.castHoverOption(j,re,"namelength"),textAlign:M.castHoverOption(j,re,"align")},{container:this.svgContainer,gd:this.graphDiv})}}D||this.unhover(),v.draw()}},g.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),M.loneUnhover(this.svgContainer))},g.hoverFormatter=function(v,k){if(k!==void 0){var S=this[v];return f.tickText(S,S.c2l(k),"hover").text}}},{"../../../stackgl_modules":1133,"../../components/dragelement/helpers":385,"../../components/fx":407,"../../lib/show_no_webgl_msg":537,"../../plots/cartesian/axes":566,"../../registry":647,"../cartesian/autorange":565,"../cartesian/constants":573,"../cartesian/constraints":574,"./camera":603,"./convert":604,"webgl-context":332}],607:[function(i,U,V){var w=i("../../plot_api/edit_types").overrideAll,f=i("../../components/fx/layout_attributes"),M=i("./scene"),T=i("../get_data").getSubplotData,e=i("../../lib"),a=i("../../constants/xmlns_namespaces"),n="gl3d",r="scene";V.name=n,V.attr=r,V.idRoot=r,V.idRegex=V.attrRegex=e.counterRegex("scene"),V.attributes=i("./layout/attributes"),V.layoutAttributes=i("./layout/layout_attributes"),V.baseLayoutAttrOverrides=w({hoverlabel:f.hoverlabel},"plot","nested"),V.supplyLayoutDefaults=i("./layout/defaults"),V.plot=function(h){for(var s=h._fullLayout,o=h._fullData,y=s._subplots[n],d=0;d<y.length;d++){var p=y[d],c=T(o,n,p),m=s[p],l=m.camera,x=m._scene;x||(x=new M({id:p,graphDiv:h,container:h.querySelector(".gl-container"),staticPlot:h._context.staticPlot,plotGlPixelRatio:h._context.plotGlPixelRatio,camera:l},s),m._scene=x),x.viewInitial||(x.viewInitial={up:{x:l.up.x,y:l.up.y,z:l.up.z},eye:{x:l.eye.x,y:l.eye.y,z:l.eye.z},center:{x:l.center.x,y:l.center.y,z:l.center.z}}),x.plot(c,s,h.layout)}},V.clean=function(t,h,s,o){for(var y=o._subplots[n]||[],d=0;d<y.length;d++){var p=y[d];!h[p]&&!!o[p]._scene&&(o[p]._scene.destroy(),o._infolayer&&o._infolayer.selectAll(".annotation-"+p).remove())}},V.toSVG=function(t){for(var h=t._fullLayout,s=h._subplots[n],o=h._size,y=0;y<s.length;y++){var d=h[s[y]],p=d.domain,c=d._scene,m=c.toImage("png"),l=h._glimages.append("svg:image");l.attr({xmlns:a.svg,"xlink:href":m,x:o.l+o.w*p.x[0],y:o.t+o.h*(1-p.y[1]),width:o.w*(p.x[1]-p.x[0]),height:o.h*(p.y[1]-p.y[0]),preserveAspectRatio:"none"}),c.destroy()}},V.cleanId=function(h){if(!!h.match(/^scene[0-9]*$/)){var s=h.substr(5);return s==="1"&&(s=""),r+s}},V.updateFx=function(t){for(var h=t._fullLayout,s=h._subplots[n],o=0;o<s.length;o++){var y=h[s[o]]._scene;y.updateFx(h.dragmode,h.hovermode)}}},{"../../components/fx/layout_attributes":408,"../../constants/xmlns_namespaces":492,"../../lib":515,"../../plot_api/edit_types":548,"../get_data":602,"./layout/attributes":608,"./layout/defaults":612,"./layout/layout_attributes":613,"./scene":617}],608:[function(i,U,V){U.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},{}],609:[function(i,U,V){var w=i("../../../components/color"),f=i("../../cartesian/layout_attributes"),M=i("../../../lib/extend").extendFlat,T=i("../../../plot_api/edit_types").overrideAll;U.exports=T({visible:f.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:w.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:f.color,categoryorder:f.categoryorder,categoryarray:f.categoryarray,title:{text:f.title.text,font:f.title.font},type:M({},f.type,{values:["-","linear","log","date","category"]}),autotypenumbers:f.autotypenumbers,autorange:f.autorange,rangemode:f.rangemode,range:M({},f.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:f.tickmode,nticks:f.nticks,tick0:f.tick0,dtick:f.dtick,tickvals:f.tickvals,ticktext:f.ticktext,ticks:f.ticks,mirror:f.mirror,ticklen:f.ticklen,tickwidth:f.tickwidth,tickcolor:f.tickcolor,showticklabels:f.showticklabels,tickfont:f.tickfont,tickangle:f.tickangle,tickprefix:f.tickprefix,showtickprefix:f.showtickprefix,ticksuffix:f.ticksuffix,showticksuffix:f.showticksuffix,showexponent:f.showexponent,exponentformat:f.exponentformat,minexponent:f.minexponent,separatethousands:f.separatethousands,tickformat:f.tickformat,tickformatstops:f.tickformatstops,hoverformat:f.hoverformat,showline:f.showline,linecolor:f.linecolor,linewidth:f.linewidth,showgrid:f.showgrid,gridcolor:M({},f.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:f.gridwidth,zeroline:f.zeroline,zerolinecolor:f.zerolinecolor,zerolinewidth:f.zerolinewidth,_deprecated:{title:f._deprecated.title,titlefont:f._deprecated.titlefont}},"plot","from-root")},{"../../../components/color":367,"../../../lib/extend":505,"../../../plot_api/edit_types":548,"../../cartesian/layout_attributes":579}],610:[function(i,U,V){var w=i("tinycolor2").mix,f=i("../../../lib"),M=i("../../../plot_api/plot_template"),T=i("./axis_attributes"),e=i("../../cartesian/type_defaults"),a=i("../../cartesian/axis_defaults"),n=["xaxis","yaxis","zaxis"],r=100*(204-68)/(255-68);U.exports=function(h,s,o){var y,d;function p(l,x){return f.coerce(y,d,T,l,x)}for(var c=0;c<n.length;c++){var m=n[c];y=h[m]||{},d=M.newContainer(s,m),d._id=m[0]+o.scene,d._name=m,e(y,d,p,o),a(y,d,p,{font:o.font,letter:m[0],data:o.data,showGrid:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelstep:!0,noTicklabelposition:!0,noTicklabeloverflow:!0,bgColor:o.bgColor,calendar:o.calendar},o.fullLayout),p("gridcolor",w(d.color,o.bgColor,r).toRgbString()),p("title.text",m[0]),d.setScale=f.noop,p("showspikes")&&(p("spikesides"),p("spikethickness"),p("spikecolor",d.color)),p("showaxeslabels"),p("showbackground")&&p("backgroundcolor")}}},{"../../../lib":515,"../../../plot_api/plot_template":555,"../../cartesian/axis_defaults":568,"../../cartesian/type_defaults":591,"./axis_attributes":609,tinycolor2:313}],611:[function(i,U,V){var w=i("../../../lib/str2rgbarray"),f=i("../../../lib"),M=["xaxis","yaxis","zaxis"];function T(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}var e=T.prototype;e.merge=function(n,r){for(var t=this,h=0;h<3;++h){var s=r[M[h]];if(!s.visible){t.tickEnable[h]=!1,t.labelEnable[h]=!1,t.lineEnable[h]=!1,t.lineTickEnable[h]=!1,t.gridEnable[h]=!1,t.zeroEnable[h]=!1,t.backgroundEnable[h]=!1;continue}t.labels[h]=n._meta?f.templateString(s.title.text,n._meta):s.title.text,"font"in s.title&&(s.title.font.color&&(t.labelColor[h]=w(s.title.font.color)),s.title.font.family&&(t.labelFont[h]=s.title.font.family),s.title.font.size&&(t.labelSize[h]=s.title.font.size)),"showline"in s&&(t.lineEnable[h]=s.showline),"linecolor"in s&&(t.lineColor[h]=w(s.linecolor)),"linewidth"in s&&(t.lineWidth[h]=s.linewidth),"showgrid"in s&&(t.gridEnable[h]=s.showgrid),"gridcolor"in s&&(t.gridColor[h]=w(s.gridcolor)),"gridwidth"in s&&(t.gridWidth[h]=s.gridwidth),s.type==="log"?t.zeroEnable[h]=!1:"zeroline"in s&&(t.zeroEnable[h]=s.zeroline),"zerolinecolor"in s&&(t.zeroLineColor[h]=w(s.zerolinecolor)),"zerolinewidth"in s&&(t.zeroLineWidth[h]=s.zerolinewidth),"ticks"in s&&!!s.ticks?t.lineTickEnable[h]=!0:t.lineTickEnable[h]=!1,"ticklen"in s&&(t.lineTickLength[h]=t._defaultLineTickLength[h]=s.ticklen),"tickcolor"in s&&(t.lineTickColor[h]=w(s.tickcolor)),"tickwidth"in s&&(t.lineTickWidth[h]=s.tickwidth),"tickangle"in s&&(t.tickAngle[h]=s.tickangle==="auto"?-3600:Math.PI*-s.tickangle/180),"showticklabels"in s&&(t.tickEnable[h]=s.showticklabels),"tickfont"in s&&(s.tickfont.color&&(t.tickColor[h]=w(s.tickfont.color)),s.tickfont.family&&(t.tickFont[h]=s.tickfont.family),s.tickfont.size&&(t.tickSize[h]=s.tickfont.size)),"mirror"in s?["ticks","all","allticks"].indexOf(s.mirror)!==-1?(t.lineTickMirror[h]=!0,t.lineMirror[h]=!0):s.mirror===!0?(t.lineTickMirror[h]=!1,t.lineMirror[h]=!0):(t.lineTickMirror[h]=!1,t.lineMirror[h]=!1):t.lineMirror[h]=!1,"showbackground"in s&&s.showbackground!==!1?(t.backgroundEnable[h]=!0,t.backgroundColor[h]=w(s.backgroundcolor)):t.backgroundEnable[h]=!1}};function a(n,r){var t=new T;return t.merge(n,r),t}U.exports=a},{"../../../lib":515,"../../../lib/str2rgbarray":540}],612:[function(i,U,V){var w=i("../../../lib"),f=i("../../../components/color"),M=i("../../../registry"),T=i("../../subplot_defaults"),e=i("./axis_defaults"),a=i("./layout_attributes"),n=i("../../get_data").getSubplotData,r="gl3d";U.exports=function(s,o,y){var d=o._basePlotModules.length>1;function p(c){if(!d){var m=w.validate(s[c],a[c]);if(m)return s[c]}}T(s,o,y,{type:r,attributes:a,handleDefaults:t,fullLayout:o,font:o.font,fullData:y,getDfltFromLayout:p,autotypenumbersDflt:o.autotypenumbers,paper_bgcolor:o.paper_bgcolor,calendar:o.calendar})};function t(h,s,o,y){for(var d=o("bgcolor"),p=f.combine(d,y.paper_bgcolor),c=["up","center","eye"],m=0;m<c.length;m++)o("camera."+c[m]+".x"),o("camera."+c[m]+".y"),o("camera."+c[m]+".z");o("camera.projection.type");var l=!!o("aspectratio.x")&&!!o("aspectratio.y")&&!!o("aspectratio.z"),x=l?"manual":"auto",u=o("aspectmode",x);l||(h.aspectratio=s.aspectratio={x:1,y:1,z:1},u==="manual"&&(s.aspectmode="auto"),h.aspectmode=s.aspectmode);var A=n(y.fullData,r,y.id);e(h,s,{font:y.font,scene:y.id,data:A,bgColor:p,calendar:y.calendar,autotypenumbersDflt:y.autotypenumbersDflt,fullLayout:y.fullLayout}),M.getComponentMethod("annotations3d","handleDefaults")(h,s,y);var _=y.getDfltFromLayout("dragmode");if(_!==!1&&!_)if(_="orbit",h.camera&&h.camera.up){var g=h.camera.up.x,b=h.camera.up.y,v=h.camera.up.z;v!==0&&(!g||!b||!v||v/Math.sqrt(g*g+b*b+v*v)>.999)&&(_="turntable")}else _="turntable";o("dragmode",_),o("hovermode",y.getDfltFromLayout("hovermode"))}},{"../../../components/color":367,"../../../lib":515,"../../../registry":647,"../../get_data":602,"../../subplot_defaults":641,"./axis_defaults":610,"./layout_attributes":613}],613:[function(i,U,V){var w=i("./axis_attributes"),f=i("../../domain").attributes,M=i("../../../lib/extend").extendFlat,T=i("../../../lib").counterRegex;function e(a,n,r){return{x:{valType:"number",dflt:a,editType:"camera"},y:{valType:"number",dflt:n,editType:"camera"},z:{valType:"number",dflt:r,editType:"camera"},editType:"camera"}}U.exports={_arrayAttrRegexps:[T("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:M(e(0,0,1),{}),center:M(e(0,0,0),{}),eye:M(e(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:f({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:w,yaxis:w,zaxis:w,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}},{"../../../lib":515,"../../../lib/extend":505,"../../domain":593,"./axis_attributes":609}],614:[function(i,U,V){var w=i("../../../lib/str2rgbarray"),f=["xaxis","yaxis","zaxis"];function M(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}var T=M.prototype;T.merge=function(a){for(var n=0;n<3;++n){var r=a[f[n]];if(!r.visible){this.enabled[n]=!1,this.drawSides[n]=!1;continue}this.enabled[n]=r.showspikes,this.colors[n]=w(r.spikecolor),this.drawSides[n]=r.spikesides,this.lineWidth[n]=r.spikethickness}};function e(a){var n=new M;return n.merge(a),n}U.exports=e},{"../../../lib/str2rgbarray":540}],615:[function(i,U,V){U.exports=e;var w=i("../../cartesian/axes"),f=i("../../../lib"),M=["xaxis","yaxis","zaxis"];function T(a){for(var n=new Array(3),r=0;r<3;++r){for(var t=a[r],h=new Array(t.length),s=0;s<t.length;++s)h[s]=t[s].x;n[r]=h}return n}function e(a){for(var n=a.axesOptions,r=a.glplot.axesPixels,t=a.fullSceneLayout,h=[[],[],[]],s=0;s<3;++s){var o=t[M[s]];if(o._length=(r[s].hi-r[s].lo)*r[s].pixelsPerDataUnit/a.dataScale[s],Math.abs(o._length)===1/0||isNaN(o._length))h[s]=[];else{o._input_range=o.range.slice(),o.range[0]=r[s].lo/a.dataScale[s],o.range[1]=r[s].hi/a.dataScale[s],o._m=1/(a.dataScale[s]*r[s].pixelsPerDataUnit),o.range[0]===o.range[1]&&(o.range[0]-=1,o.range[1]+=1);var y=o.tickmode;if(o.tickmode==="auto"){o.tickmode="linear";var d=o.nticks||f.constrain(o._length/40,4,9);w.autoTicks(o,Math.abs(o.range[1]-o.range[0])/d)}for(var p=w.calcTicks(o,{msUTC:!0}),c=0;c<p.length;++c)p[c].x=p[c].x*a.dataScale[s],o.type==="date"&&(p[c].text=p[c].text.replace(/\<br\>/g," "));h[s]=p,o.tickmode=y}}n.ticks=h;for(var s=0;s<3;++s){.5*(a.glplot.bounds[0][s]+a.glplot.bounds[1][s]);for(var c=0;c<2;++c)n.bounds[c][s]=a.glplot.bounds[c][s]}a.contourLevels=T(h)}},{"../../../lib":515,"../../cartesian/axes":566}],616:[function(i,U,V){function w(M,T){var e=[0,0,0,0],a,n;for(a=0;a<4;++a)for(n=0;n<4;++n)e[n]+=M[4*a+n]*T[a];return e}function f(M,T){var e=w(M.projection,w(M.view,w(M.model,[T[0],T[1],T[2],1])));return e}U.exports=f},{}],617:[function(i,U,V){var w=i("../../../stackgl_modules").gl_plot3d,f=w.createCamera,M=w.createScene,T=i("webgl-context"),e=i("has-passive-events"),a=i("../../registry"),n=i("../../lib"),r=n.preserveDrawingBuffer(),t=i("../../plots/cartesian/axes"),h=i("../../components/fx"),s=i("../../lib/str2rgbarray"),o=i("../../lib/show_no_webgl_msg"),y=i("./project"),d=i("./layout/convert"),p=i("./layout/spikes"),c=i("./layout/tick_marks"),m,l;function x(C,F){var I=document.createElement("div"),D=C.container;this.graphDiv=C.graphDiv;var R=document.createElementNS("http://www.w3.org/2000/svg","svg");R.style.position="absolute",R.style.top=R.style.left="0px",R.style.width=R.style.height="100%",R.style["z-index"]=20,R.style["pointer-events"]="none",I.appendChild(R),this.svgContainer=R,I.id=C.id,I.style.position="absolute",I.style.top=I.style.left="0px",I.style.width=I.style.height="100%",D.appendChild(I),this.fullLayout=F,this.id=C.id||"scene",this.fullSceneLayout=F[this.id],this.plotArgs=[[],{},{}],this.axesOptions=d(F,F[this.id]),this.spikeOptions=p(F[this.id]),this.container=I,this.staticMode=!!C.staticPlot,this.pixelRatio=this.pixelRatio||C.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=a.getComponentMethod("annotations3d","convert"),this.drawAnnotations=a.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}var u=x.prototype;u.prepareOptions=function(){var C=this,F={canvas:C.canvas,gl:C.gl,glOptions:{preserveDrawingBuffer:r,premultipliedAlpha:!0,antialias:!0},container:C.container,axes:C.axesOptions,spikes:C.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:C.camera,pixelRatio:C.pixelRatio};if(C.staticMode){if(!l&&(m=document.createElement("canvas"),l=T({canvas:m,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}),!l))throw new Error("error creating static canvas/context for image server");F.gl=l,F.canvas=m}return F};var A=!0;u.tryCreatePlot=function(){var C=this,F=C.prepareOptions(),I=!0;try{C.glplot=M(F)}catch{if(C.staticMode||!A||r)I=!1;else{n.warn(["webgl setup failed possibly due to","false preserveDrawingBuffer config.","The mobile/tablet device may not be detected by is-mobile module.","Enabling preserveDrawingBuffer in second attempt to create webgl scene..."].join(" "));try{r=F.glOptions.preserveDrawingBuffer=!0,C.glplot=M(F)}catch{r=F.glOptions.preserveDrawingBuffer=!1,I=!1}}}return A=!1,I},u.initializeGLCamera=function(){var C=this,F=C.fullSceneLayout.camera,I=F.projection.type==="orthographic";C.camera=f(C.container,{center:[F.center.x,F.center.y,F.center.z],eye:[F.eye.x,F.eye.y,F.eye.z],up:[F.up.x,F.up.y,F.up.z],_ortho:I,zoomMin:.01,zoomMax:100,mode:"orbit"})},u.initializeGLPlot=function(){var C=this;C.initializeGLCamera();var F=C.tryCreatePlot();if(!F)return o(C);C.traces={},C.make4thDimension();var I=C.graphDiv,D=I.layout,R=function(){var z={};return C.isCameraChanged(D)&&(z[C.id+".camera"]=C.getCamera()),C.isAspectChanged(D)&&(z[C.id+".aspectratio"]=C.glplot.getAspectratio(),D[C.id].aspectmode!=="manual"&&(C.fullSceneLayout.aspectmode=D[C.id].aspectmode=z[C.id+".aspectmode"]="manual")),z},O=function(z){if(z.fullSceneLayout.dragmode!==!1){var B=R();z.saveLayout(D),z.graphDiv.emit("plotly_relayout",B)}};return C.glplot.canvas&&(C.glplot.canvas.addEventListener("mouseup",function(){O(C)}),C.glplot.canvas.addEventListener("wheel",function(z){if(I._context._scrollZoom.gl3d){if(C.camera._ortho){var B=z.deltaX>z.deltaY?1.1:.9090909090909091,G=C.glplot.getAspectratio();C.glplot.setAspectratio({x:B*G.x,y:B*G.y,z:B*G.z})}O(C)}},e?{passive:!1}:!1),C.glplot.canvas.addEventListener("mousemove",function(){if(C.fullSceneLayout.dragmode!==!1&&C.camera.mouseListener.buttons!==0){var z=R();C.graphDiv.emit("plotly_relayouting",z)}}),C.staticMode||C.glplot.canvas.addEventListener("webglcontextlost",function(z){I&&I.emit&&I.emit("plotly_webglcontextlost",{event:z,layer:C.id})},!1)),C.glplot.oncontextloss=function(){C.recoverContext()},C.glplot.onrender=function(){C.render()},!0},u.render=function(){var C=this,F=C.graphDiv,I,D=C.svgContainer,R=C.container.getBoundingClientRect();F._fullLayout._calcInverseTransform(F);var O=F._fullLayout._invScaleX,z=F._fullLayout._invScaleY,B=R.width*O,G=R.height*z;D.setAttributeNS(null,"viewBox","0 0 "+B+" "+G),D.setAttributeNS(null,"width",B),D.setAttributeNS(null,"height",G),c(C),C.glplot.axes.update(C.axesOptions);for(var Q=Object.keys(C.traces),X=null,j=C.glplot.selection,re=0;re<Q.length;++re)I=C.traces[Q[re]],I.data.hoverinfo!=="skip"&&I.handlePick(j)&&(X=I),I.setContourLevels&&I.setContourLevels();function ue(be,ce,de){var ye=C.fullSceneLayout[be+"axis"];return ye.type!=="log"&&(ce=ye.d2l(ce)),t.hoverLabelText(ye,ce,de)}if(X!==null){var K=y(C.glplot.cameraParams,j.dataCoordinate);I=X.data;var te=F._fullData[I.index],Y=j.index,H={xLabel:ue("x",j.traceCoordinate[0],I.xhoverformat),yLabel:ue("y",j.traceCoordinate[1],I.yhoverformat),zLabel:ue("z",j.traceCoordinate[2],I.zhoverformat)},ee=h.castHoverinfo(te,C.fullLayout,Y),ne=(ee||"").split("+"),Z=ee&&ee==="all";!te.hovertemplate&&!Z&&(ne.indexOf("x")===-1&&(H.xLabel=void 0),ne.indexOf("y")===-1&&(H.yLabel=void 0),ne.indexOf("z")===-1&&(H.zLabel=void 0),ne.indexOf("text")===-1&&(j.textLabel=void 0),ne.indexOf("name")===-1&&(X.name=void 0));var q,ie=[];I.type==="cone"||I.type==="streamtube"?(H.uLabel=ue("x",j.traceCoordinate[3],I.uhoverformat),(Z||ne.indexOf("u")!==-1)&&ie.push("u: "+H.uLabel),H.vLabel=ue("y",j.traceCoordinate[4],I.vhoverformat),(Z||ne.indexOf("v")!==-1)&&ie.push("v: "+H.vLabel),H.wLabel=ue("z",j.traceCoordinate[5],I.whoverformat),(Z||ne.indexOf("w")!==-1)&&ie.push("w: "+H.wLabel),H.normLabel=j.traceCoordinate[6].toPrecision(3),(Z||ne.indexOf("norm")!==-1)&&ie.push("norm: "+H.normLabel),I.type==="streamtube"&&(H.divergenceLabel=j.traceCoordinate[7].toPrecision(3),(Z||ne.indexOf("divergence")!==-1)&&ie.push("divergence: "+H.divergenceLabel)),j.textLabel&&ie.push(j.textLabel),q=ie.join("<br>")):I.type==="isosurface"||I.type==="volume"?(H.valueLabel=t.hoverLabelText(C._mockAxis,C._mockAxis.d2l(j.traceCoordinate[3]),I.valuehoverformat),ie.push("value: "+H.valueLabel),j.textLabel&&ie.push(j.textLabel),q=ie.join("<br>")):q=j.textLabel;var se={x:j.traceCoordinate[0],y:j.traceCoordinate[1],z:j.traceCoordinate[2],data:te._input,fullData:te,curveNumber:te.index,pointNumber:Y};h.appendArrayPointValue(se,te,Y),I._module.eventData&&(se=te._module.eventData(se,j,te,{},Y));var ae={points:[se]};if(C.fullSceneLayout.hovermode){var oe=[];h.loneHover({trace:te,x:(.5+.5*K[0]/K[3])*B,y:(.5-.5*K[1]/K[3])*G,xLabel:H.xLabel,yLabel:H.yLabel,zLabel:H.zLabel,text:q,name:X.name,color:h.castHoverOption(te,Y,"bgcolor")||X.color,borderColor:h.castHoverOption(te,Y,"bordercolor"),fontFamily:h.castHoverOption(te,Y,"font.family"),fontSize:h.castHoverOption(te,Y,"font.size"),fontColor:h.castHoverOption(te,Y,"font.color"),nameLength:h.castHoverOption(te,Y,"namelength"),textAlign:h.castHoverOption(te,Y,"align"),hovertemplate:n.castOption(te,Y,"hovertemplate"),hovertemplateLabels:n.extendFlat({},se,H),eventData:[se]},{container:D,gd:F,inOut_bbox:oe}),se.bbox=oe[0]}j.buttons&&j.distance<5?F.emit("plotly_click",ae):F.emit("plotly_hover",ae),this.oldEventData=ae}else h.loneUnhover(D),this.oldEventData&&F.emit("plotly_unhover",this.oldEventData),this.oldEventData=void 0;C.drawAnnotations(C)},u.recoverContext=function(){var C=this;C.glplot.dispose();var F=function(){if(C.glplot.gl.isContextLost()){requestAnimationFrame(F);return}if(!C.initializeGLPlot()){n.error("Catastrophic and unrecoverable WebGL error. Context lost.");return}C.plot.apply(C,C.plotArgs)};requestAnimationFrame(F)};var _=["xaxis","yaxis","zaxis"];function g(C,F,I){for(var D=C.fullSceneLayout,R=0;R<3;R++){var O=_[R],z=O.charAt(0),B=D[O],G=F[z],Q=F[z+"calendar"],X=F["_"+z+"length"];if(!n.isArrayOrTypedArray(G))I[0][R]=Math.min(I[0][R],0),I[1][R]=Math.max(I[1][R],X-1);else for(var j,re=0;re<(X||G.length);re++)if(n.isArrayOrTypedArray(G[re]))for(var ue=0;ue<G[re].length;++ue)j=B.d2l(G[re][ue],0,Q),!isNaN(j)&&isFinite(j)&&(I[0][R]=Math.min(I[0][R],j),I[1][R]=Math.max(I[1][R],j));else j=B.d2l(G[re],0,Q),!isNaN(j)&&isFinite(j)&&(I[0][R]=Math.min(I[0][R],j),I[1][R]=Math.max(I[1][R],j))}}function b(C,F){for(var I=C.fullSceneLayout,D=I.annotations||[],R=0;R<3;R++)for(var O=_[R],z=O.charAt(0),B=I[O],G=0;G<D.length;G++){var Q=D[G];if(Q.visible){var X=B.r2l(Q[z]);!isNaN(X)&&isFinite(X)&&(F[0][R]=Math.min(F[0][R],X),F[1][R]=Math.max(F[1][R],X))}}}u.plot=function(C,F,I){var D=this;if(D.plotArgs=[C,F,I],D.glplot.contextLost)return;var R,O,z,B,G,Q,X=F[D.id],j=I[D.id];D.fullLayout=F,D.fullSceneLayout=X,D.axesOptions.merge(F,X),D.spikeOptions.merge(X),D.setViewport(X),D.updateFx(X.dragmode,X.hovermode),D.camera.enableWheel=D.graphDiv._context._scrollZoom.gl3d,D.glplot.setClearColor(s(X.bgcolor)),D.setConvert(G),C?Array.isArray(C)||(C=[C]):C=[];var re=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(z=0;z<C.length;++z)R=C[z],!(R.visible!==!0||R._length===0)&&g(this,R,re);b(this,re);var ue=[1,1,1];for(B=0;B<3;++B)re[1][B]===re[0][B]?ue[B]=1:ue[B]=1/(re[1][B]-re[0][B]);for(D.dataScale=ue,D.convertAnnotations(this),z=0;z<C.length;++z)R=C[z],!(R.visible!==!0||R._length===0)&&(O=D.traces[R.uid],O?O.data.type===R.type?O.update(R):(O.dispose(),O=R._module.plot(this,R),D.traces[R.uid]=O):(O=R._module.plot(this,R),D.traces[R.uid]=O),O.name=R.name);var K=Object.keys(D.traces);e:for(z=0;z<K.length;++z){for(B=0;B<C.length;++B)if(C[B].uid===K[z]&&C[B].visible===!0&&C[B]._length!==0)continue e;O=D.traces[K[z]],O.dispose(),delete D.traces[K[z]]}D.glplot.objects.sort(function(Ce,Ke){return Ce._trace.data.index-Ke._trace.data.index});var te=[[0,0,0],[0,0,0]],Y={};for(z=0;z<3;++z){if(G=X[_[z]],Q=G.type,Q in Y?(Y[Q].acc*=ue[z],Y[Q].count+=1):Y[Q]={acc:ue[z],count:1},G.autorange){te[0][z]=1/0,te[1][z]=-1/0;var H=D.glplot.objects,ee=D.fullSceneLayout.annotations||[],ne=G._name.charAt(0);for(B=0;B<H.length;B++){var Z=H[B],q=Z.bounds,ie=Z._trace.data._pad||0;Z.constructor.name==="ErrorBars"&&G._lowerLogErrorBound?te[0][z]=Math.min(te[0][z],G._lowerLogErrorBound):te[0][z]=Math.min(te[0][z],q[0][z]/ue[z]-ie),te[1][z]=Math.max(te[1][z],q[1][z]/ue[z]+ie)}for(B=0;B<ee.length;B++){var se=ee[B];if(se.visible){var ae=G.r2l(se[ne]);te[0][z]=Math.min(te[0][z],ae),te[1][z]=Math.max(te[1][z],ae)}}if("rangemode"in G&&G.rangemode==="tozero"&&(te[0][z]=Math.min(te[0][z],0),te[1][z]=Math.max(te[1][z],0)),te[0][z]>te[1][z])te[0][z]=-1,te[1][z]=1;else{var oe=te[1][z]-te[0][z];te[0][z]-=oe/32,te[1][z]+=oe/32}if(G.autorange==="reversed"){var be=te[0][z];te[0][z]=te[1][z],te[1][z]=be}}else{var ce=G.range;te[0][z]=G.r2l(ce[0]),te[1][z]=G.r2l(ce[1])}te[0][z]===te[1][z]&&(te[0][z]-=1,te[1][z]+=1),D.glplot.setBounds(z,{min:te[0][z]*ue[z],max:te[1][z]*ue[z]})}var de,ye=X.aspectmode;if(ye==="cube")de=[1,1,1];else if(ye==="manual"){var ge=X.aspectratio;de=[ge.x,ge.y,ge.z]}else if(ye==="auto"||ye==="data"){var me=[1,1,1];for(z=0;z<3;++z){G=X[_[z]],Q=G.type;var Se=Y[Q];me[z]=Math.pow(Se.acc,1/Se.count)/ue[z]}ye==="data"||Math.max.apply(null,me)/Math.min.apply(null,me)<=4?de=me:de=[1,1,1]}else throw new Error("scene.js aspectRatio was not one of the enumerated types");X.aspectratio.x=j.aspectratio.x=de[0],X.aspectratio.y=j.aspectratio.y=de[1],X.aspectratio.z=j.aspectratio.z=de[2],D.glplot.setAspectratio(X.aspectratio),D.viewInitial.aspectratio||(D.viewInitial.aspectratio={x:X.aspectratio.x,y:X.aspectratio.y,z:X.aspectratio.z}),D.viewInitial.aspectmode||(D.viewInitial.aspectmode=X.aspectmode);var Le=X.domain||null,Oe=F._size||null;if(Le&&Oe){var we=D.container.style;we.position="absolute",we.left=Oe.l+Le.x[0]*Oe.w+"px",we.top=Oe.t+(1-Le.y[1])*Oe.h+"px",we.width=Oe.w*(Le.x[1]-Le.x[0])+"px",we.height=Oe.h*(Le.y[1]-Le.y[0])+"px"}D.glplot.redraw()},u.destroy=function(){var C=this;!C.glplot||(C.camera.mouseListener.enabled=!1,C.container.removeEventListener("wheel",C.camera.wheelListener),C.camera=null,C.glplot.dispose(),C.container.parentNode.removeChild(C.container),C.glplot=null)};function v(C){return[[C.eye.x,C.eye.y,C.eye.z],[C.center.x,C.center.y,C.center.z],[C.up.x,C.up.y,C.up.z]]}function k(C){return{up:{x:C.up[0],y:C.up[1],z:C.up[2]},center:{x:C.center[0],y:C.center[1],z:C.center[2]},eye:{x:C.eye[0],y:C.eye[1],z:C.eye[2]},projection:{type:C._ortho===!0?"orthographic":"perspective"}}}u.getCamera=function(){var C=this;return C.camera.view.recalcMatrix(C.camera.view.lastT()),k(C.camera)},u.setViewport=function(C){var F=this,I=C.camera;F.camera.lookAt.apply(this,v(I)),F.glplot.setAspectratio(C.aspectratio);var D=I.projection.type==="orthographic",R=F.camera._ortho;D!==R&&(F.glplot.redraw(),F.glplot.clearRGBA(),F.glplot.dispose(),F.initializeGLPlot())},u.isCameraChanged=function(C){var F=this,I=F.getCamera(),D=n.nestedProperty(C,F.id+".camera"),R=D.get();function O(Q,X,j,re){var ue=["up","center","eye"],K=["x","y","z"];return X[ue[j]]&&Q[ue[j]][K[re]]===X[ue[j]][K[re]]}var z=!1;if(R===void 0)z=!0;else{for(var B=0;B<3;B++)for(var G=0;G<3;G++)if(!O(I,R,B,G)){z=!0;break}(!R.projection||I.projection&&I.projection.type!==R.projection.type)&&(z=!0)}return z},u.isAspectChanged=function(C){var F=this,I=F.glplot.getAspectratio(),D=n.nestedProperty(C,F.id+".aspectratio"),R=D.get();return R===void 0||R.x!==I.x||R.y!==I.y||R.z!==I.z},u.saveLayout=function(C){var F=this,I=F.fullLayout,D,R,O,z,B,G,Q=F.isCameraChanged(C),X=F.isAspectChanged(C),j=Q||X;if(j){var re={};if(Q&&(D=F.getCamera(),R=n.nestedProperty(C,F.id+".camera"),O=R.get(),re[F.id+".camera"]=O),X&&(z=F.glplot.getAspectratio(),B=n.nestedProperty(C,F.id+".aspectratio"),G=B.get(),re[F.id+".aspectratio"]=G),a.call("_storeDirectGUIEdit",C,I._preGUI,re),Q){R.set(D);var ue=n.nestedProperty(I,F.id+".camera");ue.set(D)}if(X){B.set(z);var K=n.nestedProperty(I,F.id+".aspectratio");K.set(z),F.glplot.redraw()}}return j},u.updateFx=function(C,F){var I=this,D=I.camera;if(D)if(C==="orbit")D.mode="orbit",D.keyBindingMode="rotate";else if(C==="turntable"){D.up=[0,0,1],D.mode="turntable",D.keyBindingMode="rotate";var R=I.graphDiv,O=R._fullLayout,z=I.fullSceneLayout.camera,B=z.up.x,G=z.up.y,Q=z.up.z;if(Q/Math.sqrt(B*B+G*G+Q*Q)<.999){var X=I.id+".camera.up",j={x:0,y:0,z:1},re={};re[X]=j;var ue=R.layout;a.call("_storeDirectGUIEdit",ue,O._preGUI,re),z.up=j,n.nestedProperty(ue,X).set(j)}}else D.keyBindingMode=C;I.fullSceneLayout.hovermode=F};function S(C,F,I){for(var D=0,R=I-1;D<R;++D,--R)for(var O=0;O<F;++O)for(var z=0;z<4;++z){var B=4*(F*D+O)+z,G=4*(F*R+O)+z,Q=C[B];C[B]=C[G],C[G]=Q}}function E(C,F,I){for(var D=0;D<I;++D)for(var R=0;R<F;++R){var O=4*(F*D+R),z=C[O+3];if(z>0)for(var B=255/z,G=0;G<3;++G)C[O+G]=Math.min(B*C[O+G],255)}}u.toImage=function(C){var F=this;C||(C="png"),F.staticMode&&F.container.appendChild(m),F.glplot.redraw();var I=F.glplot.gl,D=I.drawingBufferWidth,R=I.drawingBufferHeight;I.bindFramebuffer(I.FRAMEBUFFER,null);var O=new Uint8Array(D*R*4);I.readPixels(0,0,D,R,I.RGBA,I.UNSIGNED_BYTE,O),S(O,D,R),E(O,D,R);var z=document.createElement("canvas");z.width=D,z.height=R;var B=z.getContext("2d",{willReadFrequently:!0}),G=B.createImageData(D,R);G.data.set(O),B.putImageData(G,0,0);var Q;switch(C){case"jpeg":Q=z.toDataURL("image/jpeg");break;case"webp":Q=z.toDataURL("image/webp");break;default:Q=z.toDataURL("image/png")}return F.staticMode&&F.container.removeChild(m),Q},u.setConvert=function(){for(var C=this,F=0;F<3;F++){var I=C.fullSceneLayout[_[F]];t.setConvert(I,C.fullLayout),I.setScale=n.noop}},u.make4thDimension=function(){var C=this,F=C.graphDiv,I=F._fullLayout;C._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},t.setConvert(C._mockAxis,I)},U.exports=x},{"../../../stackgl_modules":1133,"../../components/fx":407,"../../lib":515,"../../lib/show_no_webgl_msg":537,"../../lib/str2rgbarray":540,"../../plots/cartesian/axes":566,"../../registry":647,"./layout/convert":611,"./layout/spikes":614,"./layout/tick_marks":615,"./project":616,"has-passive-events":229,"webgl-context":332}],618:[function(i,U,V){U.exports=function(f,M,T,e){e=e||f.length;for(var a=new Array(e),n=0;n<e;n++)a[n]=[f[n],M[n],T[n]];return a}},{}],619:[function(i,U,V){var w=i("./font_attributes"),f=i("./animation_attributes"),M=i("../components/color/attributes"),T=i("../components/shapes/draw_newshape/attributes"),e=i("../components/selections/draw_newselection/attributes"),a=i("./pad_attributes"),n=i("../lib/extend").extendFlat,r=w({editType:"calc"});r.family.dflt='"Open Sans", verdana, arial, sans-serif',r.size.dflt=12,r.color.dflt=M.defaultLine,U.exports={font:r,title:{text:{valType:"string",editType:"layoutstyle"},font:w({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:n(a({editType:"layoutstyle"}),{}),editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},minreducedwidth:{valType:"number",min:2,dflt:64,editType:"plot"},minreducedheight:{valType:"number",min:2,dflt:64,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:M.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:M.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:M.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:T.newshape,activeshape:T.activeshape,newselection:e.newselection,activeselection:e.activeselection,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:n({},f.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:w({editType:"layoutstyle"})}}},{"../components/color/attributes":366,"../components/selections/draw_newselection/attributes":451,"../components/shapes/draw_newshape/attributes":463,"../lib/extend":505,"./animation_attributes":560,"./font_attributes":594,"./pad_attributes":627}],620:[function(i,U,V){var w=i("../../lib/sort_object_keys"),f="1.10.1",M='\xA9 <a target="_blank" href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',T=['\xA9 <a target="_blank" href="https://carto.com/">Carto</a>',M].join(" "),e=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://www.openstreetmap.org/copyright">ODbL</a>'].join(" "),a=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>'].join(" "),n={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:M,tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}]},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}]},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:T,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}]},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:T,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}]},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:e,tiles:["https://stamen-tiles.a.ssl.fastly.net/terrain/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}]},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:e,tiles:["https://stamen-tiles.a.ssl.fastly.net/toner/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}]},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:a,tiles:["https://stamen-tiles.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}]}},r=w(n);U.exports={requiredVersion:f,styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:["basic","streets","outdoors","light","dark","satellite","satellite-streets"],styleValueDflt:"basic",stylesNonMapbox:n,styleValuesNonMapbox:r,traceLayerPrefix:"plotly-trace-layer-",layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:["Your custom plotly.js bundle is not using the correct mapbox-gl version","Please install mapbox-gl@"+f+"."].join(`
`),noAccessTokenErrorMsg:["Missing Mapbox access token.","Mapbox trace type require a Mapbox access token to be registered.","For example:","  Plotly.newPlot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });","More info here: https://www.mapbox.com/help/define-access-token/"].join(`
`),missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",r.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join(`
`),multipleTokensErrorMsg:["Set multiple mapbox access token across different mapbox subplot,","using first token found as mapbox-gl does not allow multipleaccess tokens on the same page."].join(`
`),mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;","ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":`content: ""; cursor: pointer; position: absolute; background-image: url('data:image/svg+xml;charset=utf-8,%3Csvg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"%3E %3Cpath fill="%23333333" fill-rule="evenodd" d="M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;`,"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":`display:block; width: 21px; height: 21px; background-image: url('data:image/svg+xml;charset=utf-8,%3C?xml version="1.0" encoding="utf-8"?%3E %3Csvg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 21 21" style="enable-background:new 0 0 21 21;" xml:space="preserve"%3E%3Cg transform="translate(0,0.01)"%3E%3Cpath d="m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3Cpath d="M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpath d="M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpolygon points="11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3C/g%3E%3C/svg%3E')`}}},{"../../lib/sort_object_keys":538}],621:[function(i,U,V){var w=i("../../lib");U.exports=function(M,T){var e=M.split(" "),a=e[0],n=e[1],r=w.isArrayOrTypedArray(T)?w.mean(T):T,t=.5+r/100,h=1.5+r/100,s=["",""],o=[0,0];switch(a){case"top":s[0]="top",o[1]=-h;break;case"bottom":s[0]="bottom",o[1]=h;break}switch(n){case"left":s[1]="right",o[0]=-t;break;case"right":s[1]="left",o[0]=t;break}var y;return s[0]&&s[1]?y=s.join("-"):s[0]?y=s[0]:s[1]?y=s[1]:y="center",{anchor:y,offset:o}}},{"../../lib":515}],622:[function(i,U,V){var w=i("mapbox-gl/dist/mapbox-gl-unminified"),f=i("../../lib"),M=f.strTranslate,T=f.strScale,e=i("../../plots/get_data").getSubplotCalcData,a=i("../../constants/xmlns_namespaces"),n=i("@plotly/d3"),r=i("../../components/drawing"),t=i("../../lib/svg_text_utils"),h=i("./mapbox"),s="mapbox",o=V.constants=i("./constants");V.name=s,V.attr="subplot",V.idRoot=s,V.idRegex=V.attrRegex=f.counterRegex(s),V.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}},V.layoutAttributes=i("./layout_attributes"),V.supplyLayoutDefaults=i("./layout_defaults"),V.plot=function(c){var m=c._fullLayout,l=c.calcdata,x=m._subplots[s];if(w.version!==o.requiredVersion)throw new Error(o.wrongVersionErrorMsg);var u=y(c,x);w.accessToken=u;for(var A=0;A<x.length;A++){var _=x[A],g=e(l,s,_),b=m[_],v=b._subplot;v||(v=new h(c,_),m[_]._subplot=v),v.viewInitial||(v.viewInitial={center:f.extendFlat({},b.center),zoom:b.zoom,bearing:b.bearing,pitch:b.pitch}),v.plot(g,m,c._promises)}},V.clean=function(p,c,m,l){for(var x=l._subplots[s]||[],u=0;u<x.length;u++){var A=x[u];!c[A]&&!!l[A]._subplot&&l[A]._subplot.destroy()}},V.toSVG=function(p){for(var c=p._fullLayout,m=c._subplots[s],l=c._size,x=0;x<m.length;x++){var u=c[m[x]],A=u.domain,_=u._subplot,g=_.toImage("png"),b=c._glimages.append("svg:image");b.attr({xmlns:a.svg,"xlink:href":g,x:l.l+l.w*A.x[0],y:l.t+l.h*(1-A.y[1]),width:l.w*(A.x[1]-A.x[0]),height:l.h*(A.y[1]-A.y[0]),preserveAspectRatio:"none"});var v=n.select(u._subplot.div),k=v.select(".mapboxgl-ctrl-logo").node().offsetParent===null;if(!k){var S=c._glimages.append("g");S.attr("transform",M(l.l+l.w*A.x[0]+10,l.t+l.h*(1-A.y[0])-31)),S.append("path").attr("d",o.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),S.append("path").attr("d",o.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),S.append("path").attr("d",o.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),S.append("polygon").attr("points",o.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"})}var E=v.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map",""),C=c._glimages.append("g"),F=C.append("text");F.text(E).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":E});var I=r.bBox(F.node()),D=l.w*(A.x[1]-A.x[0]);if(I.width>D/2){var R=E.split("|").join("<br>");F.text(R).attr("data-unformatted",R).call(t.convertToTspans,p),I=r.bBox(F.node())}F.attr("transform",M(-3,-I.height+8)),C.insert("rect",".static-attribution").attr({x:-I.width-6,y:-I.height-3,width:I.width+6,height:I.height+3,fill:"rgba(255, 255, 255, 0.75)"});var O=1;I.width+6>D&&(O=D/(I.width+6));var z=[l.l+l.w*A.x[1],l.t+l.h*(1-A.y[0])];C.attr("transform",M(z[0],z[1])+T(O))}};function y(p,c){var m=p._fullLayout,l=p._context;if(l.mapboxAccessToken==="")return"";for(var x=[],u=[],A=!1,_=!1,g=0;g<c.length;g++){var b=m[c[g]],v=b.accesstoken;d(b.style)&&(v?f.pushUnique(x,v):(d(b._input.style)&&(f.error("Uses Mapbox map style, but did not set an access token."),A=!0),_=!0)),v&&f.pushUnique(u,v)}if(_){var k=A?o.noAccessTokenErrorMsg:o.missingStyleErrorMsg;throw f.error(k),new Error(k)}return x.length?(x.length>1&&f.warn(o.multipleTokensErrorMsg),x[0]):(u.length&&f.log(["Listed mapbox access token(s)",u.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),"")}function d(p){return typeof p=="string"&&(o.styleValuesMapbox.indexOf(p)!==-1||p.indexOf("mapbox://")===0)}V.updateFx=function(p){for(var c=p._fullLayout,m=c._subplots[s],l=0;l<m.length;l++){var x=c[m[l]]._subplot;x.updateFx(c)}}},{"../../components/drawing":389,"../../constants/xmlns_namespaces":492,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/get_data":602,"./constants":620,"./layout_attributes":624,"./layout_defaults":625,"./mapbox":626,"@plotly/d3":58,"mapbox-gl/dist/mapbox-gl-unminified":239}],623:[function(i,U,V){var w=i("../../lib"),f=i("../../lib/svg_text_utils").sanitizeHTML,M=i("./convert_text_opts"),T=i("./constants");function e(h,s){this.subplot=h,this.uid=h.uid+"-"+s,this.index=s,this.idSource="source-"+this.uid,this.idLayer=T.layoutLayerPrefix+this.uid,this.sourceType=null,this.source=null,this.layerType=null,this.below=null,this.visible=!1}var a=e.prototype;a.update=function(s){this.visible?this.needsNewImage(s)?this.updateImage(s):this.needsNewSource(s)?(this.removeLayer(),this.updateSource(s),this.updateLayer(s)):this.needsNewLayer(s)?this.updateLayer(s):this.updateStyle(s):(this.updateSource(s),this.updateLayer(s)),this.visible=n(s)},a.needsNewImage=function(h){var s=this.subplot.map;return s.getSource(this.idSource)&&this.sourceType==="image"&&h.sourcetype==="image"&&(this.source!==h.source||JSON.stringify(this.coordinates)!==JSON.stringify(h.coordinates))},a.needsNewSource=function(h){return this.sourceType!==h.sourcetype||JSON.stringify(this.source)!==JSON.stringify(h.source)||this.layerType!==h.type},a.needsNewLayer=function(h){return this.layerType!==h.type||this.below!==this.subplot.belowLookup["layout-"+this.index]},a.lookupBelow=function(){return this.subplot.belowLookup["layout-"+this.index]},a.updateImage=function(h){var s=this.subplot.map;s.getSource(this.idSource).updateImage({url:h.source,coordinates:h.coordinates});var o=this.findFollowingMapboxLayerId(this.lookupBelow());o!==null&&this.subplot.map.moveLayer(this.idLayer,o)},a.updateSource=function(h){var s=this.subplot.map;if(s.getSource(this.idSource)&&s.removeSource(this.idSource),this.sourceType=h.sourcetype,this.source=h.source,!!n(h)){var o=t(h);s.addSource(this.idSource,o)}},a.findFollowingMapboxLayerId=function(h){if(h==="traces")for(var s=this.subplot.getMapLayers(),o=0;o<s.length;o++){var y=s[o].id;if(typeof y=="string"&&y.indexOf(T.traceLayerPrefix)===0){h=y;break}}return h},a.updateLayer=function(h){var s=this.subplot,o=r(h),y=this.lookupBelow(),d=this.findFollowingMapboxLayerId(y);this.removeLayer(),n(h)&&s.addLayer({id:this.idLayer,source:this.idSource,"source-layer":h.sourcelayer||"",type:h.type,minzoom:h.minzoom,maxzoom:h.maxzoom,layout:o.layout,paint:o.paint},d),this.layerType=h.type,this.below=y},a.updateStyle=function(h){if(n(h)){var s=r(h);this.subplot.setOptions(this.idLayer,"setLayoutProperty",s.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",s.paint)}},a.removeLayer=function(){var h=this.subplot.map;h.getLayer(this.idLayer)&&h.removeLayer(this.idLayer)},a.dispose=function(){var h=this.subplot.map;h.getLayer(this.idLayer)&&h.removeLayer(this.idLayer),h.getSource(this.idSource)&&h.removeSource(this.idSource)};function n(h){if(!h.visible)return!1;var s=h.source;if(Array.isArray(s)&&s.length>0){for(var o=0;o<s.length;o++)if(typeof s[o]!="string"||s[o].length===0)return!1;return!0}return w.isPlainObject(s)||typeof s=="string"&&s.length>0}function r(h){var s={},o={};switch(h.type){case"circle":w.extendFlat(o,{"circle-radius":h.circle.radius,"circle-color":h.color,"circle-opacity":h.opacity});break;case"line":w.extendFlat(o,{"line-width":h.line.width,"line-color":h.color,"line-opacity":h.opacity,"line-dasharray":h.line.dash});break;case"fill":w.extendFlat(o,{"fill-color":h.color,"fill-outline-color":h.fill.outlinecolor,"fill-opacity":h.opacity});break;case"symbol":var y=h.symbol,d=M(y.textposition,y.iconsize);w.extendFlat(s,{"icon-image":y.icon+"-15","icon-size":y.iconsize/10,"text-field":y.text,"text-size":y.textfont.size,"text-anchor":d.anchor,"text-offset":d.offset,"symbol-placement":y.placement}),w.extendFlat(o,{"icon-color":h.color,"text-color":y.textfont.color,"text-opacity":h.opacity});break;case"raster":w.extendFlat(o,{"raster-fade-duration":0,"raster-opacity":h.opacity});break}return{layout:s,paint:o}}function t(h){var s=h.sourcetype,o=h.source,y={type:s},d;return s==="geojson"?d="data":s==="vector"?d=typeof o=="string"?"url":"tiles":s==="raster"?(d="tiles",y.tileSize=256):s==="image"&&(d="url",y.coordinates=h.coordinates),y[d]=o,h.sourceattribution&&(y.attribution=f(h.sourceattribution)),y}U.exports=function(s,o,y){var d=new e(s,o);return d.update(y),d}},{"../../lib":515,"../../lib/svg_text_utils":541,"./constants":620,"./convert_text_opts":621}],624:[function(i,U,V){var w=i("../../lib"),f=i("../../components/color").defaultLine,M=i("../domain").attributes,T=i("../font_attributes"),e=i("../../traces/scatter/attributes").textposition,a=i("../../plot_api/edit_types").overrideAll,n=i("../../plot_api/plot_template").templatedArray,r=i("./constants"),t=T({});t.family.dflt="Open Sans Regular, Arial Unicode MS Regular";var h=U.exports=a({_arrayAttrRegexps:[w.counterRegex("mapbox",".layers",!0)],domain:M({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:r.styleValuesMapbox.concat(r.styleValuesNonMapbox),dflt:r.styleValueDflt},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},bounds:{west:{valType:"number"},east:{valType:"number"},south:{valType:"number"},north:{valType:"number"}},layers:n("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},sourceattribution:{valType:"string"},type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle"},coordinates:{valType:"any"},below:{valType:"string"},color:{valType:"color",dflt:f},opacity:{valType:"number",min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:f}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},textfont:t,textposition:w.extendFlat({},e,{arrayOk:!1})}})},"plot","from-root");h.uirevision={valType:"any",editType:"none"}},{"../../components/color":367,"../../lib":515,"../../plot_api/edit_types":548,"../../plot_api/plot_template":555,"../../traces/scatter/attributes":936,"../domain":593,"../font_attributes":594,"./constants":620}],625:[function(i,U,V){var w=i("../../lib"),f=i("../subplot_defaults"),M=i("../array_container_defaults"),T=i("./layout_attributes");U.exports=function(r,t,h){f(r,t,h,{type:"mapbox",attributes:T,handleDefaults:e,partition:"y",accessToken:t._mapboxAccessToken})};function e(n,r,t,h){t("accesstoken",h.accessToken),t("style"),t("center.lon"),t("center.lat"),t("zoom"),t("bearing"),t("pitch");var s=t("bounds.west"),o=t("bounds.east"),y=t("bounds.south"),d=t("bounds.north");(s===void 0||o===void 0||y===void 0||d===void 0)&&delete r.bounds,M(n,r,{name:"layers",handleItemDefaults:a}),r._input=n}function a(n,r){function t(p,c){return w.coerce(n,r,T.layers,p,c)}var h=t("visible");if(h){var s=t("sourcetype"),o=s==="raster"||s==="image";t("source"),t("sourceattribution"),s==="vector"&&t("sourcelayer"),s==="image"&&t("coordinates");var y;o&&(y="raster");var d=t("type",y);o&&d!=="raster"&&(d=r.type="raster",w.log("Source types *raster* and *image* must drawn *raster* layer type.")),t("below"),t("color"),t("opacity"),t("minzoom"),t("maxzoom"),d==="circle"&&t("circle.radius"),d==="line"&&(t("line.width"),t("line.dash")),d==="fill"&&t("fill.outlinecolor"),d==="symbol"&&(t("symbol.icon"),t("symbol.iconsize"),t("symbol.text"),w.coerceFont(t,"symbol.textfont"),t("symbol.textposition"),t("symbol.placement"))}}},{"../../lib":515,"../array_container_defaults":561,"../subplot_defaults":641,"./layout_attributes":624}],626:[function(i,U,V){var w=i("mapbox-gl/dist/mapbox-gl-unminified"),f=i("../../lib"),M=i("../../lib/geo_location_utils"),T=i("../../registry"),e=i("../cartesian/axes"),a=i("../../components/dragelement"),n=i("../../components/fx"),r=i("../../components/dragelement/helpers"),t=r.drawMode,h=r.selectMode,s=i("../../components/selections").prepSelect,o=i("../../components/selections").clearOutline,y=i("../../components/selections").clearSelectionsCache,d=i("../../components/selections").selectOnClick,p=i("./constants"),c=i("./layers");function m(g,b){this.id=b,this.gd=g;var v=g._fullLayout,k=g._context;this.container=v._glcontainer.node(),this.isStatic=k.staticPlot,this.uid=v._uid+"-"+this.id,this.div=null,this.xaxis=null,this.yaxis=null,this.createFramework(v),this.map=null,this.accessToken=null,this.styleObj=null,this.traceHash={},this.layerList=[],this.belowLookup={},this.dragging=!1,this.wheeling=!1}var l=m.prototype;l.plot=function(g,b,v){var k=this,S=b[k.id];k.map&&S.accesstoken!==k.accessToken&&(k.map.remove(),k.map=null,k.styleObj=null,k.traceHash={},k.layerList=[]);var E;k.map?E=new Promise(function(C,F){k.updateMap(g,b,C,F)}):E=new Promise(function(C,F){k.createMap(g,b,C,F)}),v.push(E)},l.createMap=function(g,b,v,k){var S=this,E=b[S.id],C=S.styleObj=u(E.style);S.accessToken=E.accesstoken;var F=E.bounds,I=F?[[F.west,F.south],[F.east,F.north]]:null,D=S.map=new w.Map({container:S.div,style:C.style,center:_(E.center),zoom:E.zoom,bearing:E.bearing,pitch:E.pitch,maxBounds:I,interactive:!S.isStatic,preserveDrawingBuffer:S.isStatic,doubleClickZoom:!1,boxZoom:!1,attributionControl:!1}).addControl(new w.AttributionControl({compact:!0}));D._canvas.style.left="0px",D._canvas.style.top="0px",S.rejectOnError(k),S.isStatic||S.initFx(g,b);var R=[];R.push(new Promise(function(O){D.once("load",O)})),R=R.concat(M.fetchTraceGeoData(g)),Promise.all(R).then(function(){S.fillBelowLookup(g,b),S.updateData(g),S.updateLayout(b),S.resolveOnRender(v)}).catch(k)},l.updateMap=function(g,b,v,k){var S=this,E=S.map,C=b[this.id];S.rejectOnError(k);var F=[],I=u(C.style);JSON.stringify(S.styleObj)!==JSON.stringify(I)&&(S.styleObj=I,E.setStyle(I.style),S.traceHash={},F.push(new Promise(function(D){E.once("styledata",D)}))),F=F.concat(M.fetchTraceGeoData(g)),Promise.all(F).then(function(){S.fillBelowLookup(g,b),S.updateData(g),S.updateLayout(b),S.resolveOnRender(v)}).catch(k)},l.fillBelowLookup=function(g,b){var v=b[this.id],k=v.layers,S,E,C=this.belowLookup={},F=!1;for(S=0;S<g.length;S++){var I=g[S][0].trace,D=I._module;typeof I.below=="string"?E=I.below:D.getBelow&&(E=D.getBelow(I,this)),E===""&&(F=!0),C["trace-"+I.uid]=E||""}for(S=0;S<k.length;S++){var R=k[S];typeof R.below=="string"?E=R.below:F?E="traces":E="",C["layout-"+S]=E}var O={},z,B;for(z in C)E=C[z],O[E]?O[E].push(z):O[E]=[z];for(E in O){var G=O[E];if(G.length>1)for(S=0;S<G.length;S++)z=G[S],z.indexOf("trace-")===0?(B=z.split("trace-")[1],this.traceHash[B]&&(this.traceHash[B].below=null)):z.indexOf("layout-")===0&&(B=z.split("layout-")[1],this.layerList[B]&&(this.layerList[B].below=null))}};var x={choroplethmapbox:0,densitymapbox:1,scattermapbox:2};l.updateData=function(g){var b=this.traceHash,v,k,S,E,C=g.slice().sort(function(O,z){return x[O[0].trace.type]-x[z[0].trace.type]});for(S=0;S<C.length;S++){var F=C[S];k=F[0].trace,v=b[k.uid];var I=!1;v&&(v.type===k.type?(v.update(F),I=!0):v.dispose()),!I&&k._module&&(b[k.uid]=k._module.plot(this,F))}var D=Object.keys(b);e:for(S=0;S<D.length;S++){var R=D[S];for(E=0;E<g.length;E++)if(k=g[E][0].trace,R===k.uid)continue e;v=b[R],v.dispose(),delete b[R]}},l.updateLayout=function(g){var b=this.map,v=g[this.id];!this.dragging&&!this.wheeling&&(b.setCenter(_(v.center)),b.setZoom(v.zoom),b.setBearing(v.bearing),b.setPitch(v.pitch)),this.updateLayers(g),this.updateFramework(g),this.updateFx(g),this.map.resize(),this.gd._context._scrollZoom.mapbox?b.scrollZoom.enable():b.scrollZoom.disable()},l.resolveOnRender=function(g){var b=this.map;b.on("render",function v(){b.loaded()&&(b.off("render",v),setTimeout(g,10))})},l.rejectOnError=function(g){var b=this.map;function v(){g(new Error(p.mapOnErrorMsg))}b.once("error",v),b.once("style.error",v),b.once("source.error",v),b.once("tile.error",v),b.once("layer.error",v)},l.createFramework=function(g){var b=this,v=b.div=document.createElement("div");v.id=b.uid,v.style.position="absolute",b.container.appendChild(v),b.xaxis={_id:"x",c2p:function(k){return b.project(k).x}},b.yaxis={_id:"y",c2p:function(k){return b.project(k).y}},b.updateFramework(g),b.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},e.setConvert(b.mockAxis,g)},l.initFx=function(g,b){var v=this,k=v.gd,S=v.map;S.on("moveend",function(F){if(!!v.map){var I=k._fullLayout;if(F.originalEvent||v.wheeling){var D=I[v.id];T.call("_storeDirectGUIEdit",k.layout,I._preGUI,v.getViewEdits(D));var R=v.getView();D._input.center=D.center=R.center,D._input.zoom=D.zoom=R.zoom,D._input.bearing=D.bearing=R.bearing,D._input.pitch=D.pitch=R.pitch,k.emit("plotly_relayout",v.getViewEditsWithDerived(R))}F.originalEvent&&F.originalEvent.type==="mouseup"?v.dragging=!1:v.wheeling&&(v.wheeling=!1),I._rehover&&I._rehover()}}),S.on("wheel",function(){v.wheeling=!0}),S.on("mousemove",function(F){var I=v.div.getBoundingClientRect(),D=[F.originalEvent.offsetX,F.originalEvent.offsetY];F.target.getBoundingClientRect=function(){return I},v.xaxis.p2c=function(){return S.unproject(D).lng},v.yaxis.p2c=function(){return S.unproject(D).lat},k._fullLayout._rehover=function(){k._fullLayout._hoversubplot===v.id&&k._fullLayout[v.id]&&n.hover(k,F,v.id)},n.hover(k,F,v.id),k._fullLayout._hoversubplot=v.id});function E(){n.loneUnhover(b._hoverlayer)}S.on("dragstart",function(){v.dragging=!0,E()}),S.on("zoomstart",E),S.on("mouseout",function(){k._fullLayout._hoversubplot=null});function C(){var F=v.getView();k.emit("plotly_relayouting",v.getViewEditsWithDerived(F))}S.on("drag",C),S.on("zoom",C),S.on("dblclick",function(){var F=k._fullLayout[v.id];T.call("_storeDirectGUIEdit",k.layout,k._fullLayout._preGUI,v.getViewEdits(F));var I=v.viewInitial;S.setCenter(_(I.center)),S.setZoom(I.zoom),S.setBearing(I.bearing),S.setPitch(I.pitch);var D=v.getView();F._input.center=F.center=D.center,F._input.zoom=F.zoom=D.zoom,F._input.bearing=F.bearing=D.bearing,F._input.pitch=F.pitch=D.pitch,k.emit("plotly_doubleclick",null),k.emit("plotly_relayout",v.getViewEditsWithDerived(D))}),v.clearOutline=function(){y(v.dragOptions),o(v.dragOptions.gd)},v.onClickInPanFn=function(F){return function(I){var D=k._fullLayout.clickmode;D.indexOf("select")>-1&&d(I.originalEvent,k,[v.xaxis],[v.yaxis],v.id,F),D.indexOf("event")>-1&&n.click(k,I.originalEvent)}}},l.updateFx=function(g){var b=this,v=b.map,k=b.gd;if(b.isStatic)return;function S(I){var D=b.map.unproject(I);return[D.lng,D.lat]}var E=g.dragmode,C;C=function(I,D){if(D.isRect){var R=I.range={};R[b.id]=[S([D.xmin,D.ymin]),S([D.xmax,D.ymax])]}else{var O=I.lassoPoints={};O[b.id]=D.map(S)}};var F=b.dragOptions;b.dragOptions=f.extendDeep(F||{},{dragmode:g.dragmode,element:b.div,gd:k,plotinfo:{id:b.id,domain:g[b.id].domain,xaxis:b.xaxis,yaxis:b.yaxis,fillRangeItems:C},xaxes:[b.xaxis],yaxes:[b.yaxis],subplot:b.id}),v.off("click",b.onClickInPanHandler),h(E)||t(E)?(v.dragPan.disable(),v.on("zoomstart",b.clearSelect),b.dragOptions.prepFn=function(I,D,R){s(I,D,R,b.dragOptions,E)},a.init(b.dragOptions)):(v.dragPan.enable(),v.off("zoomstart",b.clearSelect),b.div.onmousedown=null,b.div.ontouchstart=null,b.div.removeEventListener("touchstart",b.div._ontouchstart),b.onClickInPanHandler=b.onClickInPanFn(b.dragOptions),v.on("click",b.onClickInPanHandler))},l.updateFramework=function(g){var b=g[this.id].domain,v=g._size,k=this.div.style;k.width=v.w*(b.x[1]-b.x[0])+"px",k.height=v.h*(b.y[1]-b.y[0])+"px",k.left=v.l+b.x[0]*v.w+"px",k.top=v.t+(1-b.y[1])*v.h+"px",this.xaxis._offset=v.l+b.x[0]*v.w,this.xaxis._length=v.w*(b.x[1]-b.x[0]),this.yaxis._offset=v.t+(1-b.y[1])*v.h,this.yaxis._length=v.h*(b.y[1]-b.y[0])},l.updateLayers=function(g){var b=g[this.id],v=b.layers,k=this.layerList,S;if(v.length!==k.length){for(S=0;S<k.length;S++)k[S].dispose();for(k=this.layerList=[],S=0;S<v.length;S++)k.push(c(this,S,v[S]))}else for(S=0;S<v.length;S++)k[S].update(v[S])},l.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))},l.toImage=function(){return this.map.stop(),this.map.getCanvas().toDataURL()},l.setOptions=function(g,b,v){for(var k in v)this.map[b](g,k,v[k])},l.getMapLayers=function(){return this.map.getStyle().layers},l.addLayer=function(g,b){var v=this.map;if(typeof b=="string"){if(b===""){v.addLayer(g,b);return}for(var k=this.getMapLayers(),S=0;S<k.length;S++)if(b===k[S].id){v.addLayer(g,b);return}f.warn(["Trying to add layer with *below* value",b,"referencing a layer that does not exist","or that does not yet exist."].join(" "))}v.addLayer(g)},l.project=function(g){return this.map.project(new w.LngLat(g[0],g[1]))},l.getView=function(){var g=this.map,b=g.getCenter(),v=b.lng,k=b.lat,S={lon:v,lat:k},E=g.getCanvas(),C=parseInt(E.style.width),F=parseInt(E.style.height);return{center:S,zoom:g.getZoom(),bearing:g.getBearing(),pitch:g.getPitch(),_derived:{coordinates:[g.unproject([0,0]).toArray(),g.unproject([C,0]).toArray(),g.unproject([C,F]).toArray(),g.unproject([0,F]).toArray()]}}},l.getViewEdits=function(g){for(var b=this.id,v=["center","zoom","bearing","pitch"],k={},S=0;S<v.length;S++){var E=v[S];k[b+"."+E]=g[E]}return k},l.getViewEditsWithDerived=function(g){var b=this.id,v=this.getViewEdits(g);return v[b+"._derived"]=g._derived,v};function u(g){var b={};return f.isPlainObject(g)?(b.id=g.id,b.style=g):typeof g=="string"?(b.id=g,p.styleValuesMapbox.indexOf(g)!==-1?b.style=A(g):p.stylesNonMapbox[g]?b.style=p.stylesNonMapbox[g]:b.style=g):(b.id=p.styleValueDflt,b.style=A(p.styleValueDflt)),b.transition={duration:0,delay:0},b}function A(g){return p.styleUrlPrefix+g+"-"+p.styleUrlSuffix}function _(g){return[g.lon,g.lat]}U.exports=m},{"../../components/dragelement":386,"../../components/dragelement/helpers":385,"../../components/fx":407,"../../components/selections":455,"../../lib":515,"../../lib/geo_location_utils":508,"../../registry":647,"../cartesian/axes":566,"./constants":620,"./layers":623,"mapbox-gl/dist/mapbox-gl-unminified":239}],627:[function(i,U,V){U.exports=function(w){var f=w.editType;return{t:{valType:"number",dflt:0,editType:f},r:{valType:"number",dflt:0,editType:f},b:{valType:"number",dflt:0,editType:f},l:{valType:"number",dflt:0,editType:f},editType:f}}},{}],628:[function(i,U,V){var w=i("@plotly/d3"),f=i("d3-time-format").timeFormatLocale,M=i("d3-format").formatLocale,T=i("fast-isnumeric"),e=i("../registry"),a=i("../plot_api/plot_schema"),n=i("../plot_api/plot_template"),r=i("../lib"),t=i("../components/color"),h=i("../constants/numerical").BADNUM,s=i("./cartesian/axis_ids"),o=i("../components/shapes/handle_outline").clearOutline,y=i("./animation_attributes"),d=i("./frame_attributes"),p=i("../plots/get_data").getModuleCalcData,c=r.relinkPrivateKeys,m=r._,l=U.exports={};r.extendFlat(l,e),l.attributes=i("./attributes"),l.attributes.type.values=l.allTypes,l.fontAttrs=i("./font_attributes"),l.layoutAttributes=i("./layout_attributes"),l.fontWeight="normal";var x=l.transformsRegistry,u=i("./command");l.executeAPICommand=u.executeAPICommand,l.computeAPICommandBindings=u.computeAPICommandBindings,l.manageCommandObserver=u.manageCommandObserver,l.hasSimpleAPICommandBindings=u.hasSimpleAPICommandBindings,l.redrawText=function(K){return K=r.getGraphDiv(K),new Promise(function(te){setTimeout(function(){!K._fullLayout||(e.getComponentMethod("annotations","draw")(K),e.getComponentMethod("legend","draw")(K),e.getComponentMethod("colorbar","draw")(K),te(l.previousPromises(K)))},300)})},l.resize=function(K){K=r.getGraphDiv(K);var te,Y=new Promise(function(H,ee){(!K||r.isHidden(K))&&ee(new Error("Resize must be passed a displayed plot div element.")),K._redrawTimer&&clearTimeout(K._redrawTimer),K._resolveResize&&(te=K._resolveResize),K._resolveResize=H,K._redrawTimer=setTimeout(function(){if(!K.layout||K.layout.width&&K.layout.height||r.isHidden(K)){H(K);return}delete K.layout.width,delete K.layout.height;var ne=K.changed;K.autoplay=!0,e.call("relayout",K,{autosize:!0}).then(function(){K.changed=ne,K._resolveResize===H&&(delete K._resolveResize,H(K))})},100)});return te&&te(Y),Y},l.previousPromises=function(K){if((K._promises||[]).length)return Promise.all(K._promises).then(function(){K._promises=[]})},l.addLinks=function(K){if(!(!K._context.showLink&&!K._context.showSources)){var te=K._fullLayout,Y=r.ensureSingle(te._paper,"text","js-plot-link-container",function(ie){ie.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:t.defaultLine,"pointer-events":"all"}).each(function(){var se=w.select(this);se.append("tspan").classed("js-link-to-tool",!0),se.append("tspan").classed("js-link-spacer",!0),se.append("tspan").classed("js-sourcelinks",!0)})}),H=Y.node(),ee={y:te._paper.attr("height")-9};document.body.contains(H)&&H.getComputedTextLength()>=te.width-20?(ee["text-anchor"]="start",ee.x=5):(ee["text-anchor"]="end",ee.x=te._paper.attr("width")-7),Y.attr(ee);var ne=Y.select(".js-link-to-tool"),Z=Y.select(".js-link-spacer"),q=Y.select(".js-sourcelinks");K._context.showSources&&K._context.showSources(K),K._context.showLink&&A(K,ne),Z.text(ne.text()&&q.text()?" - ":"")}};function A(K,te){te.text("");var Y=te.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(K._context.linkText+" "+String.fromCharCode(187));if(K._context.sendData)Y.on("click",function(){l.sendDataToCloud(K)});else{var H=window.location.pathname.split("/"),ee=window.location.search;Y.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+H[2].split(".")[0]+"/"+H[1]+ee})}}l.sendDataToCloud=function(K){var te=(window.PLOTLYENV||{}).BASE_URL||K._context.plotlyServerURL;if(!!te){K.emit("plotly_beforeexport");var Y=w.select(K).append("div").attr("id","hiddenform").style("display","none"),H=Y.append("form").attr({action:te+"/external",method:"post",target:"_blank"}),ee=H.append("input").attr({type:"text",name:"data"});return ee.node().value=l.graphJson(K,!1,"keepdata"),H.node().submit(),Y.remove(),K.emit("plotly_afterexport"),!1}};var _=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],g=["year","month","dayMonth","dayMonthYear"];l.supplyDefaults=function(K,te){var Y=te&&te.skipUpdateCalc,H=K._fullLayout||{};if(H._skipDefaults){delete H._skipDefaults;return}var ee=K._fullLayout={},ne=K.layout||{},Z=K._fullData||[],q=K._fullData=[],ie=K.data||[],se=K.calcdata||[],ae=K._context||{},oe;K._transitionData||l.createTransitionData(K),ee._dfltTitle={plot:m(K,"Click to enter Plot title"),x:m(K,"Click to enter X axis title"),y:m(K,"Click to enter Y axis title"),colorbar:m(K,"Click to enter Colorscale title"),annotation:m(K,"new text")},ee._traceWord=m(K,"trace");var be=k(K,_);if(ee._mapboxAccessToken=ae.mapboxAccessToken,H._initialAutoSizeIsDone){var ce=H.width,de=H.height;l.supplyLayoutGlobalDefaults(ne,ee,be),ne.width||(ee.width=ce),ne.height||(ee.height=de),l.sanitizeMargins(ee)}else{l.supplyLayoutGlobalDefaults(ne,ee,be);var ye=!ne.width||!ne.height,ge=ee.autosize,me=ae.autosizable,Se=ye&&(ge||me);Se?l.plotAutoSize(K,ne,ee):ye&&l.sanitizeMargins(ee),!ge&&ye&&(ne.width=ee.width,ne.height=ee.height)}ee._d3locale=S(be,ee.separators),ee._extraFormat=k(K,g),ee._initialAutoSizeIsDone=!0,ee._dataLength=ie.length,ee._modules=[],ee._visibleModules=[],ee._basePlotModules=[];var Le=ee._subplots=v(),Oe=ee._splomAxes={x:{},y:{}},we=ee._splomSubplots={};ee._splomGridDflt={},ee._scatterStackOpts={},ee._firstScatter={},ee._alignmentOpts={},ee._colorAxes={},ee._requestRangeslider={},ee._traceUids=b(Z,ie),ee._globalTransforms=(K._context||{}).globalTransforms,l.supplyDataDefaults(ie,q,ne,ee);var Ce=Object.keys(Oe.x),Ke=Object.keys(Oe.y);if(Ce.length>1&&Ke.length>1){for(e.getComponentMethod("grid","sizeDefaults")(ne,ee),oe=0;oe<Ce.length;oe++)r.pushUnique(Le.xaxis,Ce[oe]);for(oe=0;oe<Ke.length;oe++)r.pushUnique(Le.yaxis,Ke[oe]);for(var Ye in we)r.pushUnique(Le.cartesian,Ye)}if(ee._has=l._hasPlotType.bind(ee),Z.length===q.length)for(oe=0;oe<q.length;oe++)c(q[oe],Z[oe]);l.supplyLayoutModuleDefaults(ne,ee,q,K._transitionData);var Fe=ee._visibleModules,Re=[];for(oe=0;oe<Fe.length;oe++){var je=Fe[oe].crossTraceDefaults;je&&r.pushUnique(Re,je)}for(oe=0;oe<Re.length;oe++)Re[oe](q,ee);ee._hasOnlyLargeSploms=ee._basePlotModules.length===1&&ee._basePlotModules[0].name==="splom"&&Ce.length>15&&Ke.length>15&&ee.shapes.length===0&&ee.images.length===0,l.linkSubplots(q,ee,Z,H),l.cleanPlot(q,ee,Z,H);var xt=!!(H._has&&H._has("gl2d")),Nt=!!(ee._has&&ee._has("gl2d")),tr=!!(H._has&&H._has("cartesian")),Ht=!!(ee._has&&ee._has("cartesian")),Pt=tr||xt,$t=Ht||Nt;Pt&&!$t?H._bgLayer.remove():$t&&!Pt&&(ee._shouldCreateBgLayer=!0),H._zoomlayer&&!K._dragging&&o({_fullLayout:H}),E(q,ee),c(ee,H),e.getComponentMethod("colorscale","crossTraceDefaults")(q,ee),ee._preGUI||(ee._preGUI={}),ee._tracePreGUI||(ee._tracePreGUI={});var Ut=ee._tracePreGUI,Lt={},We;for(We in Ut)Lt[We]="old";for(oe=0;oe<q.length;oe++)We=q[oe]._fullInput.uid,Lt[We]||(Ut[We]={}),Lt[We]="new";for(We in Lt)Lt[We]==="old"&&delete Ut[We];R(ee),e.getComponentMethod("rangeslider","makeData")(ee),!Y&&se.length===q.length&&l.supplyDefaultsUpdateCalc(se,q)},l.supplyDefaultsUpdateCalc=function(K,te){for(var Y=0;Y<te.length;Y++){var H=te[Y],ee=(K[Y]||[])[0];if(ee&&ee.trace){var ne=ee.trace;if(ne._hasCalcTransform){var Z=ne._arrayAttrs,q,ie,se;for(q=0;q<Z.length;q++)ie=Z[q],se=r.nestedProperty(ne,ie).get().slice(),r.nestedProperty(H,ie).set(se)}ee.trace=H}}};function b(K,te){var Y=te.length,H=[],ee,ne;for(ee=0;ee<K.length;ee++){var Z=K[ee]._fullInput;Z!==ne&&H.push(Z),ne=Z}var q=H.length,ie=new Array(Y),se={};function ae(ce,de){ie[de]=ce,se[ce]=1}function oe(ce,de){if(ce&&typeof ce=="string"&&!se[ce])return ae(ce,de),!0}for(ee=0;ee<Y;ee++){var be=te[ee].uid;typeof be=="number"&&(be=String(be)),!oe(be,ee)&&(ee<q&&oe(H[ee].uid,ee)||ae(r.randstr(se),ee))}return ie}function v(){var K=e.collectableSubplotTypes,te={},Y,H;if(!K){K=[];var ee=e.subplotsRegistry;for(var ne in ee){var Z=ee[ne],q=Z.attr;if(q&&(K.push(ne),Array.isArray(q)))for(H=0;H<q.length;H++)r.pushUnique(K,q[H])}}for(Y=0;Y<K.length;Y++)te[K[Y]]=[];return te}function k(K,te){var Y=K._context.locale;Y||(Y="en-US");var H=!1,ee={};function ne(oe){for(var be=!0,ce=0;ce<te.length;ce++){var de=te[ce];ee[de]||(oe[de]?ee[de]=oe[de]:be=!1)}be&&(H=!0)}for(var Z=0;Z<2;Z++){for(var q=K._context.locales,ie=0;ie<2;ie++){var se=(q[Y]||{}).format;if(se&&(ne(se),H))break;q=e.localeRegistry}var ae=Y.split("-")[0];if(H||ae===Y)break;Y=ae}return H||ne(e.localeRegistry.en.format),ee}function S(K,te){return K.decimal=te.charAt(0),K.thousands=te.charAt(1),{numberFormat:function(Y){try{Y=M(K).format(r.adjustFormat(Y))}catch{return r.warnBadFormat(Y),r.noFormat}return Y},timeFormat:f(K).utcFormat}}function E(K,te){var Y,H=[];te.meta&&(Y=te._meta={meta:te.meta,layout:{meta:te.meta}});for(var ee=0;ee<K.length;ee++){var ne=K[ee];ne.meta?H[ne.index]=ne._meta={meta:ne.meta}:te.meta&&(ne._meta={meta:te.meta}),te.meta&&(ne._meta.layout={meta:te.meta})}H.length&&(Y||(Y=te._meta={}),Y.data=H)}l.createTransitionData=function(K){K._transitionData||(K._transitionData={}),K._transitionData._frames||(K._transitionData._frames=[]),K._transitionData._frameHash||(K._transitionData._frameHash={}),K._transitionData._counter||(K._transitionData._counter=0),K._transitionData._interruptCallbacks||(K._transitionData._interruptCallbacks=[])},l._hasPlotType=function(K){var te,Y=this._basePlotModules||[];for(te=0;te<Y.length;te++)if(Y[te].name===K)return!0;var H=this._modules||[];for(te=0;te<H.length;te++){var ee=H[te].name;if(ee===K)return!0;var ne=e.modules[ee];if(ne&&ne.categories[K])return!0}return!1},l.cleanPlot=function(K,te,Y,H){var ee,ne,Z=H._basePlotModules||[];for(ee=0;ee<Z.length;ee++){var q=Z[ee];q.clean&&q.clean(K,te,Y,H)}var ie=H._has&&H._has("gl"),se=te._has&&te._has("gl");ie&&!se&&H._glcontainer!==void 0&&(H._glcontainer.selectAll(".gl-canvas").remove(),H._glcontainer.selectAll(".no-webgl").remove(),H._glcanvas=null);var ae=!!H._infolayer;e:for(ee=0;ee<Y.length;ee++){var oe=Y[ee],be=oe.uid;for(ne=0;ne<K.length;ne++){var ce=K[ne];if(be===ce.uid)continue e}ae&&H._infolayer.select(".cb"+be).remove()}},l.linkSubplots=function(K,te,Y,H){var ee,ne,Z=H._plots||{},q=te._plots={},ie=te._subplots,se={_fullData:K,_fullLayout:te},ae=ie.cartesian.concat(ie.gl2d||[]);for(ee=0;ee<ae.length;ee++){var oe=ae[ee],be=Z[oe],ce=s.getFromId(se,oe,"x"),de=s.getFromId(se,oe,"y"),ye;for(be?ye=q[oe]=be:(ye=q[oe]={},ye.id=oe),ce._counterAxes.push(de._id),de._counterAxes.push(ce._id),ce._subplotsWith.push(oe),de._subplotsWith.push(oe),ye.xaxis=ce,ye.yaxis=de,ye._hasClipOnAxisFalse=!1,ne=0;ne<K.length;ne++){var ge=K[ne];if(ge.xaxis===ye.xaxis._id&&ge.yaxis===ye.yaxis._id&&ge.cliponaxis===!1){ye._hasClipOnAxisFalse=!0;break}}}var me=s.list(se,null,!0),Se;for(ee=0;ee<me.length;ee++){Se=me[ee];var Le=null;Se.overlaying&&(Le=s.getFromId(se,Se.overlaying),Le&&Le.overlaying&&(Se.overlaying=!1,Le=null)),Se._mainAxis=Le||Se,Le&&(Se.domain=Le.domain.slice()),Se._anchorAxis=Se.anchor==="free"?null:s.getFromId(se,Se.anchor)}for(ee=0;ee<me.length;ee++)if(Se=me[ee],Se._counterAxes.sort(s.idSort),Se._subplotsWith.sort(r.subplotSort),Se._mainSubplot=C(Se,te),Se._counterAxes.length&&(Se.spikemode&&Se.spikemode.indexOf("across")!==-1||Se.automargin&&Se.mirror&&Se.anchor!=="free"||e.getComponentMethod("rangeslider","isVisible")(Se))){var Oe=1,we=0;for(ne=0;ne<Se._counterAxes.length;ne++){var Ce=s.getFromId(se,Se._counterAxes[ne]);Oe=Math.min(Oe,Ce.domain[0]),we=Math.max(we,Ce.domain[1])}Oe<we&&(Se._counterDomainMin=Oe,Se._counterDomainMax=we)}};function C(K,te){var Y={_fullLayout:te},H=K._id.charAt(0)==="x",ee=K._mainAxis._anchorAxis,ne="",Z="",q="";if(ee&&(q=ee._mainAxis._id,ne=H?K._id+q:q+K._id),!ne||!te._plots[ne]){ne="";for(var ie=K._counterAxes,se=0;se<ie.length;se++){var ae=ie[se],oe=H?K._id+ae:ae+K._id;Z||(Z=oe);var be=s.getFromId(Y,ae);if(q&&be.overlaying===q){ne=oe;break}}}return ne||Z}l.clearExpandedTraceDefaultColors=function(K){var te,Y,H;function ee(Z,q,ie,se){Y[se]=q,Y.length=se+1,Z.valType==="color"&&Z.dflt===void 0&&te.push(Y.join("."))}for(Y=[],te=K._module._colorAttrs,te||(K._module._colorAttrs=te=[],a.crawl(K._module.attributes,ee)),H=0;H<te.length;H++){var ne=r.nestedProperty(K,"_input."+te[H]);ne.get()||r.nestedProperty(K,te[H]).set(null)}},l.supplyDataDefaults=function(K,te,Y,H){var ee=H._modules,ne=H._visibleModules,Z=H._basePlotModules,q=0,ie=0,se,ae,oe;H._transformModules=[];function be(Ke){te.push(Ke);var Ye=Ke._module;!Ye||(r.pushUnique(ee,Ye),Ke.visible===!0&&r.pushUnique(ne,Ye),r.pushUnique(Z,Ke._module.basePlotModule),q++,Ke._input.visible!==!1&&ie++)}var ce={},de=[],ye=(Y.template||{}).data||{},ge=n.traceTemplater(ye);for(se=0;se<K.length;se++){if(oe=K[se],ae=ge.newTrace(oe),ae.uid=H._traceUids[se],l.supplyTraceDefaults(oe,ae,ie,H,se),ae.index=se,ae._input=oe,ae._expandedIndex=q,ae.transforms&&ae.transforms.length)for(var me=oe.visible!==!1&&ae.visible===!1,Se=I(ae,te,Y,H),Le=0;Le<Se.length;Le++){var Oe=Se[Le],we={_template:ae._template,type:ae.type,uid:ae.uid+Le};me&&Oe.visible===!1&&delete Oe.visible,l.supplyTraceDefaults(Oe,we,q,H,se),c(we,Oe),we.index=se,we._input=oe,we._fullInput=ae,we._expandedIndex=q,we._expandedInput=Oe,be(we)}else ae._fullInput=ae,ae._expandedInput=ae,be(ae);e.traceIs(ae,"carpetAxis")&&(ce[ae.carpet]=ae),e.traceIs(ae,"carpetDependent")&&de.push(se)}for(se=0;se<de.length;se++)if(ae=te[de[se]],!!ae.visible){var Ce=ce[ae.carpet];if(ae._carpet=Ce,!Ce||!Ce.visible){ae.visible=!1;continue}ae.xaxis=Ce.xaxis,ae.yaxis=Ce.yaxis}},l.supplyAnimationDefaults=function(K){K=K||{};var te,Y={};function H(ee,ne){return r.coerce(K||{},Y,y,ee,ne)}if(H("mode"),H("direction"),H("fromcurrent"),Array.isArray(K.frame))for(Y.frame=[],te=0;te<K.frame.length;te++)Y.frame[te]=l.supplyAnimationFrameDefaults(K.frame[te]||{});else Y.frame=l.supplyAnimationFrameDefaults(K.frame||{});if(Array.isArray(K.transition))for(Y.transition=[],te=0;te<K.transition.length;te++)Y.transition[te]=l.supplyAnimationTransitionDefaults(K.transition[te]||{});else Y.transition=l.supplyAnimationTransitionDefaults(K.transition||{});return Y},l.supplyAnimationFrameDefaults=function(K){var te={};function Y(H,ee){return r.coerce(K||{},te,y.frame,H,ee)}return Y("duration"),Y("redraw"),te},l.supplyAnimationTransitionDefaults=function(K){var te={};function Y(H,ee){return r.coerce(K||{},te,y.transition,H,ee)}return Y("duration"),Y("easing"),te},l.supplyFrameDefaults=function(K){var te={};function Y(H,ee){return r.coerce(K,te,d,H,ee)}return Y("group"),Y("name"),Y("traces"),Y("baseframe"),Y("data"),Y("layout"),te},l.supplyTraceDefaults=function(K,te,Y,H,ee){var ne=H.colorway||t.defaults,Z=ne[Y%ne.length],q;function ie(Se,Le){return r.coerce(K,te,l.attributes,Se,Le)}var se=ie("visible");ie("type"),ie("name",H._traceWord+" "+ee),ie("uirevision",H.uirevision);var ae=l.getModule(te);if(te._module=ae,ae){var oe=ae.basePlotModule,be=oe.attr,ce=oe.attributes;if(be&&ce){var de=H._subplots,ye="";if(se||oe.name!=="gl2d"){if(Array.isArray(be))for(q=0;q<be.length;q++){var ge=be[q],me=r.coerce(K,te,ce,ge);de[ge]&&r.pushUnique(de[ge],me),ye+=me}else ye=r.coerce(K,te,ce,be);de[oe.name]&&r.pushUnique(de[oe.name],ye)}}}return se&&(ie("customdata"),ie("ids"),ie("meta"),e.traceIs(te,"showLegend")?(r.coerce(K,te,ae.attributes.showlegend?ae.attributes:l.attributes,"showlegend"),ie("legendwidth"),ie("legendgroup"),ie("legendgrouptitle.text"),ie("legendrank"),te._dfltShowLegend=!0):te._dfltShowLegend=!1,ae&&ae.supplyDefaults(K,te,Z,H),e.traceIs(te,"noOpacity")||ie("opacity"),e.traceIs(te,"notLegendIsolatable")&&(te.visible=!!te.visible),e.traceIs(te,"noHover")||(te.hovertemplate||r.coerceHoverinfo(K,te,H),te.type!=="parcats"&&e.getComponentMethod("fx","supplyDefaults")(K,te,Z,H)),ae&&ae.selectPoints&&ie("selectedpoints"),l.supplyTransformDefaults(K,te,H)),te};function F(K){var te=K.transforms;if(Array.isArray(te)&&te.length)for(var Y=0;Y<te.length;Y++){var H=te[Y],ee=H._module||x[H.type];if(ee&&ee.makesData)return!0}return!1}l.hasMakesDataTransform=F,l.supplyTransformDefaults=function(K,te,Y){if(!!(te._length||F(K))){var H=Y._globalTransforms||[],ee=Y._transformModules||[];if(!(!Array.isArray(K.transforms)&&H.length===0))for(var ne=K.transforms||[],Z=H.concat(ne),q=te.transforms=[],ie=0;ie<Z.length;ie++){var se=Z[ie],ae=se.type,oe=x[ae],be,ce=!(se._module&&se._module===oe),de=oe&&typeof oe.transform=="function";oe||r.warn("Unrecognized transform type "+ae+"."),oe&&oe.supplyDefaults&&(ce||de)?(be=oe.supplyDefaults(se,te,Y,K),be.type=ae,be._module=oe,r.pushUnique(ee,oe)):be=r.extendFlat({},se),q.push(be)}}};function I(K,te,Y,H){for(var ee=K.transforms,ne=[K],Z=0;Z<ee.length;Z++){var q=ee[Z],ie=x[q.type];ie&&ie.transform&&(ne=ie.transform(ne,{transform:q,fullTrace:K,fullData:te,layout:Y,fullLayout:H,transformIndex:Z}))}return ne}l.supplyLayoutGlobalDefaults=function(K,te,Y){function H(se,ae){return r.coerce(K,te,l.layoutAttributes,se,ae)}var ee=K.template;r.isPlainObject(ee)&&(te.template=ee,te._template=ee.layout,te._dataTemplate=ee.data),H("autotypenumbers");var ne=r.coerceFont(H,"font"),Z=ne.size;r.coerceFont(H,"title.font",r.extendFlat({},ne,{size:Math.round(Z*1.4)})),H("title.text",te._dfltTitle.plot),H("title.xref"),H("title.yref"),H("title.x"),H("title.y"),H("title.xanchor"),H("title.yanchor"),H("title.pad.t"),H("title.pad.r"),H("title.pad.b"),H("title.pad.l");var q=H("uniformtext.mode");q&&H("uniformtext.minsize"),H("autosize",!(K.width&&K.height)),H("width"),H("height"),H("minreducedwidth"),H("minreducedheight"),H("margin.l"),H("margin.r"),H("margin.t"),H("margin.b"),H("margin.pad"),H("margin.autoexpand"),K.width&&K.height&&l.sanitizeMargins(te),e.getComponentMethod("grid","sizeDefaults")(K,te),H("paper_bgcolor"),H("separators",Y.decimal+Y.thousands),H("hidesources"),H("colorway"),H("datarevision");var ie=H("uirevision");H("editrevision",ie),H("selectionrevision",ie),e.getComponentMethod("modebar","supplyLayoutDefaults")(K,te),e.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(K,te,H),e.getComponentMethod("selections","supplyDrawNewSelectionDefaults")(K,te,H),H("meta"),r.isPlainObject(K.transition)&&(H("transition.duration"),H("transition.easing"),H("transition.ordering")),e.getComponentMethod("calendars","handleDefaults")(K,te,"calendar"),e.getComponentMethod("fx","supplyLayoutGlobalDefaults")(K,te,H)};function D(K){return typeof K=="string"&&K.substr(K.length-2)==="px"&&parseFloat(K)}l.plotAutoSize=function(te,Y,H){var ee=te._context||{},ne=ee.frameMargins,Z,q,ie=r.isPlotDiv(te);if(ie&&te.emit("plotly_autosize"),ee.fillFrame)Z=window.innerWidth,q=window.innerHeight,document.body.style.overflow="hidden";else{var se=ie?window.getComputedStyle(te):{};if(Z=D(se.width)||D(se.maxWidth)||H.width,q=D(se.height)||D(se.maxHeight)||H.height,T(ne)&&ne>0){var ae=1-2*ne;Z=Math.round(ae*Z),q=Math.round(ae*q)}}var oe=l.layoutAttributes.width.min,be=l.layoutAttributes.height.min;Z<oe&&(Z=oe),q<be&&(q=be);var ce=!Y.width&&Math.abs(H.width-Z)>1,de=!Y.height&&Math.abs(H.height-q)>1;(de||ce)&&(ce&&(H.width=Z),de&&(H.height=q)),te._initialAutoSize||(te._initialAutoSize={width:Z,height:q}),l.sanitizeMargins(H)},l.supplyLayoutModuleDefaults=function(K,te,Y,H){var ee=e.componentsRegistry,ne=te._basePlotModules,Z,q,ie,se=e.subplotsRegistry.cartesian;for(Z in ee)ie=ee[Z],ie.includeBasePlot&&ie.includeBasePlot(K,te);ne.length||ne.push(se),te._has("cartesian")&&(e.getComponentMethod("grid","contentDefaults")(K,te),se.finalizeSubplots(K,te));for(var ae in te._subplots)te._subplots[ae].sort(r.subplotSort);for(q=0;q<ne.length;q++)ie=ne[q],ie.supplyLayoutDefaults&&ie.supplyLayoutDefaults(K,te,Y);var oe=te._modules;for(q=0;q<oe.length;q++)ie=oe[q],ie.supplyLayoutDefaults&&ie.supplyLayoutDefaults(K,te,Y);var be=te._transformModules;for(q=0;q<be.length;q++)ie=be[q],ie.supplyLayoutDefaults&&ie.supplyLayoutDefaults(K,te,Y,H);for(Z in ee)ie=ee[Z],ie.supplyLayoutDefaults&&ie.supplyLayoutDefaults(K,te,Y)},l.purge=function(K){var te=K._fullLayout||{};te._glcontainer!==void 0&&(te._glcontainer.selectAll(".gl-canvas").remove(),te._glcontainer.remove(),te._glcanvas=null),te._modeBar&&te._modeBar.destroy(),K._transitionData&&(K._transitionData._interruptCallbacks&&(K._transitionData._interruptCallbacks.length=0),K._transitionData._animationRaf&&window.cancelAnimationFrame(K._transitionData._animationRaf)),r.clearThrottle(),r.clearResponsive(K),delete K.data,delete K.layout,delete K._fullData,delete K._fullLayout,delete K.calcdata,delete K.empty,delete K.fid,delete K.undoqueue,delete K.undonum,delete K.autoplay,delete K.changed,delete K._promises,delete K._redrawTimer,delete K._hmlumcount,delete K._hmpixcount,delete K._transitionData,delete K._transitioning,delete K._initialAutoSize,delete K._transitioningWithDuration,delete K._dragging,delete K._dragged,delete K._dragdata,delete K._hoverdata,delete K._snapshotInProgress,delete K._editing,delete K._mouseDownTime,delete K._legendMouseDownTime,K.removeAllListeners&&K.removeAllListeners()},l.style=function(K){var te=K._fullLayout._visibleModules,Y=[],H;for(H=0;H<te.length;H++){var ee=te[H];ee.style&&r.pushUnique(Y,ee.style)}for(H=0;H<Y.length;H++)Y[H](K)},l.sanitizeMargins=function(K){if(!(!K||!K.margin)){var te=K.width,Y=K.height,H=K.margin,ee=te-(H.l+H.r),ne=Y-(H.t+H.b),Z;ee<0&&(Z=(te-1)/(H.l+H.r),H.l=Math.floor(Z*H.l),H.r=Math.floor(Z*H.r)),ne<0&&(Z=(Y-1)/(H.t+H.b),H.t=Math.floor(Z*H.t),H.b=Math.floor(Z*H.b))}},l.clearAutoMarginIds=function(K){K._fullLayout._pushmarginIds={}},l.allowAutoMargin=function(K,te){K._fullLayout._pushmarginIds[te]=1};function R(K){var te=K.margin;if(!K._size){var Y=K._size={l:Math.round(te.l),r:Math.round(te.r),t:Math.round(te.t),b:Math.round(te.b),p:Math.round(te.pad)};Y.w=Math.round(K.width)-Y.l-Y.r,Y.h=Math.round(K.height)-Y.t-Y.b}K._pushmargin||(K._pushmargin={}),K._pushmarginIds||(K._pushmarginIds={})}var O=2,z=2;l.autoMargin=function(K,te,Y){var H=K._fullLayout,ee=H.width,ne=H.height,Z=H.margin,q=H.minreducedwidth,ie=H.minreducedheight,se=r.constrain(ee-Z.l-Z.r,O,q),ae=r.constrain(ne-Z.t-Z.b,z,ie),oe=Math.max(0,ee-se),be=Math.max(0,ne-ae),ce=H._pushmargin,de=H._pushmarginIds;if(Z.autoexpand!==!1){if(!Y)delete ce[te],delete de[te];else{var ye=Y.pad;if(ye===void 0&&(ye=Math.min(12,Z.l,Z.r,Z.t,Z.b)),oe){var ge=(Y.l+Y.r)/oe;ge>1&&(Y.l/=ge,Y.r/=ge)}if(be){var me=(Y.t+Y.b)/be;me>1&&(Y.t/=me,Y.b/=me)}var Se=Y.xl!==void 0?Y.xl:Y.x,Le=Y.xr!==void 0?Y.xr:Y.x,Oe=Y.yt!==void 0?Y.yt:Y.y,we=Y.yb!==void 0?Y.yb:Y.y;ce[te]={l:{val:Se,size:Y.l+ye},r:{val:Le,size:Y.r+ye},b:{val:we,size:Y.b+ye},t:{val:Oe,size:Y.t+ye}},de[te]=1}if(!H._replotting)return l.doAutoMargin(K)}},l.doAutoMargin=function(K){var te=K._fullLayout,Y=te.width,H=te.height;te._size||(te._size={}),R(te);var ee=te._size,ne=te.margin,Z=r.extendFlat({},ee),q=ne.l,ie=ne.r,se=ne.t,ae=ne.b,oe=te._pushmargin,be=te._pushmarginIds,ce=te.minreducedwidth,de=te.minreducedheight;if(te.margin.autoexpand!==!1){for(var ye in oe)be[ye]||delete oe[ye];oe.base={l:{val:0,size:q},r:{val:1,size:ie},t:{val:1,size:se},b:{val:0,size:ae}};for(var ge in oe){var me=oe[ge].l||{},Se=oe[ge].b||{},Le=me.val,Oe=me.size,we=Se.val,Ce=Se.size;for(var Ke in oe){if(T(Oe)&&oe[Ke].r){var Ye=oe[Ke].r.val,Fe=oe[Ke].r.size;if(Ye>Le){var Re=(Oe*Ye+(Fe-Y)*Le)/(Ye-Le),je=(Fe*(1-Le)+(Oe-Y)*(1-Ye))/(Ye-Le);Re+je>q+ie&&(q=Re,ie=je)}}if(T(Ce)&&oe[Ke].t){var xt=oe[Ke].t.val,Nt=oe[Ke].t.size;if(xt>we){var tr=(Ce*xt+(Nt-H)*we)/(xt-we),Ht=(Nt*(1-we)+(Ce-H)*(1-xt))/(xt-we);tr+Ht>ae+se&&(ae=tr,se=Ht)}}}}}var Pt=r.constrain(Y-ne.l-ne.r,O,ce),$t=r.constrain(H-ne.t-ne.b,z,de),Ut=Math.max(0,Y-Pt),Lt=Math.max(0,H-$t);if(Ut){var We=(q+ie)/Ut;We>1&&(q/=We,ie/=We)}if(Lt){var ot=(ae+se)/Lt;ot>1&&(ae/=ot,se/=ot)}if(ee.l=Math.round(q),ee.r=Math.round(ie),ee.t=Math.round(se),ee.b=Math.round(ae),ee.p=Math.round(ne.pad),ee.w=Math.round(Y)-ee.l-ee.r,ee.h=Math.round(H)-ee.t-ee.b,!te._replotting&&l.didMarginChange(Z,ee)){"_redrawFromAutoMarginCount"in te?te._redrawFromAutoMarginCount++:te._redrawFromAutoMarginCount=1;var Ge=3*(1+Object.keys(be).length);if(te._redrawFromAutoMarginCount<Ge)return e.call("_doPlot",K);te._size=Z,r.warn("Too many auto-margin redraws.")}B(K)};function B(K){var te=s.list(K,"",!0);["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(Y){for(var H=0;H<te.length;H++){var ee=te[H][Y];ee&&ee()}})}var G=["l","r","t","b","p","w","h"];l.didMarginChange=function(K,te){for(var Y=0;Y<G.length;Y++){var H=G[Y],ee=K[H],ne=te[H];if(!T(ee)||Math.abs(ne-ee)>1)return!0}return!1},l.graphJson=function(K,te,Y,H,ee,ne){(ee&&te&&!K._fullData||ee&&!te&&!K._fullLayout)&&l.supplyDefaults(K);var Z=ee?K._fullData:K.data,q=ee?K._fullLayout:K.layout,ie=(K._transitionData||{})._frames;function se(be,ce){if(typeof be=="function")return ce?"_function_":null;if(r.isPlainObject(be)){var de={},ye;return Object.keys(be).sort().forEach(function(ge){if(["_","["].indexOf(ge.charAt(0))===-1){if(typeof be[ge]=="function"){ce&&(de[ge]="_function");return}if(Y==="keepdata"){if(ge.substr(ge.length-3)==="src")return}else if(Y==="keepstream"){if(ye=be[ge+"src"],typeof ye=="string"&&ye.indexOf(":")>0&&!r.isPlainObject(be.stream))return}else if(Y!=="keepall"&&(ye=be[ge+"src"],typeof ye=="string"&&ye.indexOf(":")>0))return;de[ge]=se(be[ge],ce)}}),de}return Array.isArray(be)?be.map(function(ge){return se(ge,ce)}):r.isTypedArray(be)?r.simpleMap(be,r.identity):r.isJSDate(be)?r.ms2DateTimeLocal(+be):be}var ae={data:(Z||[]).map(function(be){var ce=se(be);return te&&delete ce.fit,ce})};if(!te&&(ae.layout=se(q),ee)){var oe=q._size;ae.layout.computed={margin:{b:oe.b,l:oe.l,r:oe.r,t:oe.t}}}return ie&&(ae.frames=se(ie)),ne&&(ae.config=se(K._context,!0)),H==="object"?ae:JSON.stringify(ae)},l.modifyFrames=function(K,te){var Y,H,ee,ne=K._transitionData._frames,Z=K._transitionData._frameHash;for(Y=0;Y<te.length;Y++)switch(H=te[Y],H.type){case"replace":ee=H.value;var q=(ne[H.index]||{}).name,ie=ee.name;ne[H.index]=Z[ie]=ee,ie!==q&&(delete Z[q],Z[ie]=ee);break;case"insert":ee=H.value,Z[ee.name]=ee,ne.splice(H.index,0,ee);break;case"delete":ee=ne[H.index],delete Z[ee.name],ne.splice(H.index,1);break}return Promise.resolve()},l.computeFrame=function(K,te){var Y=K._transitionData._frameHash,H,ee,ne,Z;if(!te)throw new Error("computeFrame must be given a string frame name");var q=Y[te.toString()];if(!q)return!1;for(var ie=[q],se=[q.name];q.baseframe&&(q=Y[q.baseframe.toString()])&&se.indexOf(q.name)===-1;)ie.push(q),se.push(q.name);for(var ae={};q=ie.pop();)if(q.layout&&(ae.layout=l.extendLayout(ae.layout,q.layout)),q.data){if(ae.data||(ae.data=[]),ee=q.traces,!ee)for(ee=[],H=0;H<q.data.length;H++)ee[H]=H;for(ae.traces||(ae.traces=[]),H=0;H<q.data.length;H++)ne=ee[H],ne!=null&&(Z=ae.traces.indexOf(ne),Z===-1&&(Z=ae.data.length,ae.traces[Z]=ne),ae.data[Z]=l.extendTrace(ae.data[Z],q.data[H]))}return ae},l.recomputeFrameHash=function(K){for(var te=K._transitionData._frameHash={},Y=K._transitionData._frames,H=0;H<Y.length;H++){var ee=Y[H];ee&&ee.name&&(te[ee.name]=ee)}},l.extendObjectWithContainers=function(K,te,Y){var H,ee,ne,Z,q,ie,se,ae,oe=r.extendDeepNoArrays({},te||{}),be=r.expandObjectPaths(oe),ce={};if(Y&&Y.length)for(ne=0;ne<Y.length;ne++)H=r.nestedProperty(be,Y[ne]),ee=H.get(),ee===void 0?r.nestedProperty(ce,Y[ne]).set(null):(H.set(null),r.nestedProperty(ce,Y[ne]).set(ee));if(K=r.extendDeepNoArrays(K||{},be),Y&&Y.length){for(ne=0;ne<Y.length;ne++)if(q=r.nestedProperty(ce,Y[ne]),se=q.get(),!!se){for(ie=r.nestedProperty(K,Y[ne]),ae=ie.get(),Array.isArray(ae)||(ae=[],ie.set(ae)),Z=0;Z<se.length;Z++){var de=se[Z];de===null?ae[Z]=null:ae[Z]=l.extendObjectWithContainers(ae[Z],de)}ie.set(ae)}}return K},l.dataArrayContainers=["transforms","dimensions"],l.layoutArrayContainers=e.layoutArrayContainers,l.extendTrace=function(K,te){return l.extendObjectWithContainers(K,te,l.dataArrayContainers)},l.extendLayout=function(K,te){return l.extendObjectWithContainers(K,te,l.layoutArrayContainers)},l.transition=function(K,te,Y,H,ee,ne){var Z={redraw:ee.redraw},q={},ie=[];return Z.prepareFn=function(){for(var se=Array.isArray(te)?te.length:0,ae=H.slice(0,se),oe=0;oe<ae.length;oe++){var be=ae[oe],ce=K._fullData[be],de=ce._module;if(!!de){if(de.animatable){var ye=de.basePlotModule.name;q[ye]||(q[ye]=[]),q[ye].push(be)}K.data[ae[oe]]=l.extendTrace(K.data[ae[oe]],te[oe])}}var ge=r.expandObjectPaths(r.extendDeepNoArrays({},Y)),me=/^[xy]axis[0-9]*$/;for(var Se in ge)!me.test(Se)||delete ge[Se].range;l.extendLayout(K.layout,ge),delete K.calcdata,l.supplyDefaults(K),l.doCalcdata(K);var Le=r.expandObjectPaths(Y);if(Le){var Oe=K._fullLayout._plots;for(var we in Oe){var Ce=Oe[we],Ke=Ce.xaxis,Ye=Ce.yaxis,Fe=Ke.range.slice(),Re=Ye.range.slice(),je=null,xt=null,Nt=null,tr=null;Array.isArray(Le[Ke._name+".range"])?je=Le[Ke._name+".range"].slice():Array.isArray((Le[Ke._name]||{}).range)&&(je=Le[Ke._name].range.slice()),Array.isArray(Le[Ye._name+".range"])?xt=Le[Ye._name+".range"].slice():Array.isArray((Le[Ye._name]||{}).range)&&(xt=Le[Ye._name].range.slice()),Fe&&je&&(Ke.r2l(Fe[0])!==Ke.r2l(je[0])||Ke.r2l(Fe[1])!==Ke.r2l(je[1]))&&(Nt={xr0:Fe,xr1:je}),Re&&xt&&(Ye.r2l(Re[0])!==Ye.r2l(xt[0])||Ye.r2l(Re[1])!==Ye.r2l(xt[1]))&&(tr={yr0:Re,yr1:xt}),(Nt||tr)&&ie.push(r.extendFlat({plotinfo:Ce},Nt,tr))}}return Promise.resolve()},Z.runFn=function(se){var ae,oe=K._fullLayout._basePlotModules,be=ie.length,ce;if(Y)for(ce=0;ce<oe.length;ce++)oe[ce].transitionAxes&&oe[ce].transitionAxes(K,ie,ne,se);be?(ae=r.extendFlat({},ne),ae.duration=0,delete q.cartesian):ae=ne;for(var de in q){var ye=q[de],ge=K._fullData[ye[0]]._module;ge.basePlotModule.plot(K,ye,ae,se)}},Q(K,ne,Z)},l.transitionFromReact=function(K,te,Y,H){var ee=K._fullLayout,ne=ee.transition,Z={},q=[];return Z.prepareFn=function(){var ie=ee._plots;Z.redraw=!1,te.anim==="some"&&(Z.redraw=!0),Y.anim==="some"&&(Z.redraw=!0);for(var se in ie){var ae=ie[se],oe=ae.xaxis,be=ae.yaxis,ce=H[oe._name].range.slice(),de=H[be._name].range.slice(),ye=oe.range.slice(),ge=be.range.slice();oe.setScale(),be.setScale();var me=null,Se=null;(oe.r2l(ce[0])!==oe.r2l(ye[0])||oe.r2l(ce[1])!==oe.r2l(ye[1]))&&(me={xr0:ce,xr1:ye}),(be.r2l(de[0])!==be.r2l(ge[0])||be.r2l(de[1])!==be.r2l(ge[1]))&&(Se={yr0:de,yr1:ge}),(me||Se)&&q.push(r.extendFlat({plotinfo:ae},me,Se))}return Promise.resolve()},Z.runFn=function(ie){for(var se=K._fullData,ae=K._fullLayout,oe=ae._basePlotModules,be,ce,de,ye=[],ge=0;ge<se.length;ge++)ye.push(ge);function me(){if(!!K._fullLayout)for(var Le=0;Le<oe.length;Le++)oe[Le].transitionAxes&&oe[Le].transitionAxes(K,q,be,ie)}function Se(){if(!!K._fullLayout)for(var Le=0;Le<oe.length;Le++)oe[Le].plot(K,de,ce,ie)}q.length&&te.anim?ne.ordering==="traces first"?(be=r.extendFlat({},ne,{duration:0}),de=ye,ce=ne,setTimeout(me,ne.duration),Se()):(be=ne,de=null,ce=r.extendFlat({},ne,{duration:0}),setTimeout(Se,be.duration),me()):q.length?(be=ne,me()):te.anim&&(de=ye,ce=ne,Se())},Q(K,ne,Z)};function Q(K,te,Y){var H=!1;function ee(oe){var be=Promise.resolve();if(!oe)return be;for(;oe.length;)be=be.then(oe.shift());return be}function ne(oe){if(!!oe)for(;oe.length;)oe.shift()}function Z(){return K.emit("plotly_transitioning",[]),new Promise(function(oe){K._transitioning=!0,te.duration>0&&(K._transitioningWithDuration=!0),K._transitionData._interruptCallbacks.push(function(){H=!0}),Y.redraw&&K._transitionData._interruptCallbacks.push(function(){return e.call("redraw",K)}),K._transitionData._interruptCallbacks.push(function(){K.emit("plotly_transitioninterrupted",[])});var be=0,ce=0;function de(){return be++,function(){ce++,!H&&ce===be&&q(oe)}}Y.runFn(de),setTimeout(de())})}function q(oe){if(!!K._transitionData)return ne(K._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(Y.redraw)return e.call("redraw",K)}).then(function(){K._transitioning=!1,K._transitioningWithDuration=!1,K.emit("plotly_transitioned",[])}).then(oe)}function ie(){if(!!K._transitionData)return K._transitioning=!1,ee(K._transitionData._interruptCallbacks)}var se=[l.previousPromises,ie,Y.prepareFn,l.rehover,l.reselect,Z],ae=r.syncOrAsync(se,K);return(!ae||!ae.then)&&(ae=Promise.resolve()),ae.then(function(){return K})}l.doCalcdata=function(K,te){var Y=s.list(K),H=K._fullData,ee=K._fullLayout,ne,Z,q,ie,se=new Array(H.length),ae=(K.calcdata||[]).slice();for(K.calcdata=se,ee._numBoxes=0,ee._numViolins=0,ee._violinScaleGroupStats={},K._hmpixcount=0,K._hmlumcount=0,ee._piecolormap={},ee._sunburstcolormap={},ee._treemapcolormap={},ee._iciclecolormap={},ee._funnelareacolormap={},q=0;q<H.length;q++)if(Array.isArray(te)&&te.indexOf(q)===-1){se[q]=ae[q];continue}for(q=0;q<H.length;q++)ne=H[q],ne._arrayAttrs=a.findArrayAttributes(ne),ne._extremes={};var oe=ee._subplots.polar||[];for(q=0;q<oe.length;q++)Y.push(ee[oe[q]].radialaxis,ee[oe[q]].angularaxis);for(var be in ee._colorAxes){var ce=ee[be];ce.cauto!==!1&&(delete ce.cmin,delete ce.cmax)}var de=!1;function ye(Se){if(ne=H[Se],Z=ne._module,ne.visible===!0&&ne.transforms){if(Z&&Z.calc){var Le=Z.calc(K,ne);Le[0]&&Le[0].t&&Le[0].t._scene&&delete Le[0].t._scene.dirty}for(ie=0;ie<ne.transforms.length;ie++){var Oe=ne.transforms[ie];Z=x[Oe.type],Z&&Z.calcTransform&&(ne._hasCalcTransform=!0,de=!0,Z.calcTransform(K,ne,Oe))}}}function ge(Se,Le){if(ne=H[Se],Z=ne._module,!!Z.isContainer===Le){var Oe=[];if(ne.visible===!0&&ne._length!==0){delete ne._indexToPoints;var we=ne.transforms||[];for(ie=we.length-1;ie>=0;ie--)if(we[ie].enabled){ne._indexToPoints=we[ie]._indexToPoints;break}Z&&Z.calc&&(Oe=Z.calc(K,ne))}(!Array.isArray(Oe)||!Oe[0])&&(Oe=[{x:h,y:h}]),Oe[0].t||(Oe[0].t={}),Oe[0].trace=ne,se[Se]=Oe}}for(re(Y,H,ee),q=0;q<H.length;q++)ge(q,!0);for(q=0;q<H.length;q++)ye(q);for(de&&re(Y,H,ee),q=0;q<H.length;q++)ge(q,!0);for(q=0;q<H.length;q++)ge(q,!1);ue(K);var me=j(Y,K);if(me.length){for(ee._numBoxes=0,ee._numViolins=0,q=0;q<me.length;q++)ge(me[q],!0);for(q=0;q<me.length;q++)ge(me[q],!1);ue(K)}e.getComponentMethod("fx","calc")(K),e.getComponentMethod("errorbars","calc")(K)};var X=/(total|sum|min|max|mean|median) (ascending|descending)/;function j(K,te){var Y=[],H,ee,ne,Z,q;function ie(Pt,$t,Ut){var Lt=$t._id.charAt(0);if(Pt==="histogram2dcontour"){var We=$t._counterAxes[0],ot=s.getFromId(te,We),Ge=Lt==="x"||We==="x"&&ot.type==="category",Me=Lt==="y"||We==="y"&&ot.type==="category";return function(Ve,Qe){return Ve===0||Qe===0||Ge&&Ve===Ut[Qe].length-1||Me&&Qe===Ut.length-1?-1:(Lt==="y"?Qe:Ve)-1}}else return function(Ve,Qe){return Lt==="y"?Qe:Ve}}var se={min:function(Pt){return r.aggNums(Math.min,null,Pt)},max:function(Pt){return r.aggNums(Math.max,null,Pt)},sum:function(Pt){return r.aggNums(function($t,Ut){return $t+Ut},null,Pt)},total:function(Pt){return r.aggNums(function($t,Ut){return $t+Ut},null,Pt)},mean:function(Pt){return r.mean(Pt)},median:function(Pt){return r.median(Pt)}};for(H=0;H<K.length;H++){var ae=K[H];if(ae.type==="category"){var oe=ae.categoryorder.match(X);if(oe){var be=oe[1],ce=oe[2],de=ae._id.charAt(0),ye=de==="x",ge=[];for(ee=0;ee<ae._categories.length;ee++)ge.push([ae._categories[ee],[]]);for(ee=0;ee<ae._traceIndices.length;ee++){var me=ae._traceIndices[ee],Se=te._fullData[me];if(Se.visible===!0){var Le=Se.type;e.traceIs(Se,"histogram")&&(delete Se._xautoBinFinished,delete Se._yautoBinFinished);var Oe=Le==="splom",we=Le==="scattergl",Ce=te.calcdata[me];for(ne=0;ne<Ce.length;ne++){var Ke=Ce[ne],Ye,Fe;if(Oe){var Re=Se._axesDim[ae._id];if(!ye){var je=Se._diag[Re][0];je&&(ae=te._fullLayout[s.id2name(je)])}var xt=Ke.trace.dimensions[Re].values;for(Z=0;Z<xt.length;Z++)for(Ye=ae._categoriesMap[xt[Z]],q=0;q<Ke.trace.dimensions.length;q++)if(q!==Re){var Nt=Ke.trace.dimensions[q];ge[Ye][1].push(Nt.values[Z])}}else if(we){for(Z=0;Z<Ke.t.x.length;Z++)ye?(Ye=Ke.t.x[Z],Fe=Ke.t.y[Z]):(Ye=Ke.t.y[Z],Fe=Ke.t.x[Z]),ge[Ye][1].push(Fe);Ke.t&&Ke.t._scene&&delete Ke.t._scene.dirty}else if(Ke.hasOwnProperty("z")){Fe=Ke.z;var tr=ie(Se.type,ae,Fe);for(Z=0;Z<Fe.length;Z++)for(q=0;q<Fe[Z].length;q++)Ye=tr(q,Z),Ye+1&&ge[Ye][1].push(Fe[Z][q])}else for(Ye=Ke.p,Ye===void 0&&(Ye=Ke[de]),Fe=Ke.s,Fe===void 0&&(Fe=Ke.v),Fe===void 0&&(Fe=ye?Ke.y:Ke.x),Array.isArray(Fe)||(Fe===void 0?Fe=[]:Fe=[Fe]),Z=0;Z<Fe.length;Z++)ge[Ye][1].push(Fe[Z])}}}ae._categoriesValue=ge;var Ht=[];for(ee=0;ee<ge.length;ee++)Ht.push([ge[ee][0],se[be](ge[ee][1])]);Ht.sort(function(Pt,$t){return Pt[1]-$t[1]}),ae._categoriesAggregatedValue=Ht,ae._initialCategories=Ht.map(function(Pt){return Pt[0]}),ce==="descending"&&ae._initialCategories.reverse(),Y=Y.concat(ae.sortByInitialCategories())}}}return Y}function re(K,te,Y){var H={};function ee(ie){ie.clearCalc(),ie.type==="multicategory"&&ie.setupMultiCategory(te),H[ie._id]=1}r.simpleMap(K,ee);for(var ne=Y._axisMatchGroups||[],Z=0;Z<ne.length;Z++)for(var q in ne[Z])H[q]||ee(Y[s.id2name(q)])}function ue(K){var te=K._fullLayout,Y=te._visibleModules,H={},ee,ne,Z;for(ne=0;ne<Y.length;ne++){var q=Y[ne],ie=q.crossTraceCalc;if(ie){var se=q.basePlotModule.name;H[se]?r.pushUnique(H[se],ie):H[se]=[ie]}}for(Z in H){var ae=H[Z],oe=te._subplots[Z];if(Array.isArray(oe))for(ee=0;ee<oe.length;ee++){var be=oe[ee],ce=Z==="cartesian"?te._plots[be]:te[be];for(ne=0;ne<ae.length;ne++)ae[ne](K,ce,be)}else for(ne=0;ne<ae.length;ne++)ae[ne](K)}}l.rehover=function(K){K._fullLayout._rehover&&K._fullLayout._rehover()},l.redrag=function(K){K._fullLayout._redrag&&K._fullLayout._redrag()},l.reselect=function(K){var te=K._fullLayout,Y=(K.layout||{}).selections,H=te._previousSelections;te._previousSelections=Y;var ee=te._reselect||JSON.stringify(Y)!==JSON.stringify(H);e.getComponentMethod("selections","reselect")(K,ee)},l.generalUpdatePerTraceModule=function(K,te,Y,H){var ee=te.traceHash,ne={},Z;for(Z=0;Z<Y.length;Z++){var q=Y[Z],ie=q[0].trace;ie.visible&&(ne[ie.type]=ne[ie.type]||[],ne[ie.type].push(q))}for(var se in ee)if(!ne[se]){var ae=ee[se][0],oe=ae[0].trace;oe.visible=!1,ne[se]=[ae]}for(var be in ne){var ce=ne[be],de=ce[0][0].trace._module;de.plot(K,te,r.filterVisible(ce),H)}te.traceHash=ne},l.plotBasePlot=function(K,te,Y,H,ee){var ne=e.getModule(K),Z=p(te.calcdata,ne)[0];ne.plot(te,Z,H,ee)},l.cleanBasePlot=function(K,te,Y,H,ee){var ne=ee._has&&ee._has(K),Z=Y._has&&Y._has(K);ne&&!Z&&ee["_"+K+"layer"].selectAll("g.trace").remove()}},{"../components/color":367,"../components/shapes/handle_outline":468,"../constants/numerical":491,"../lib":515,"../plot_api/plot_schema":554,"../plot_api/plot_template":555,"../plots/get_data":602,"../registry":647,"./animation_attributes":560,"./attributes":562,"./cartesian/axis_ids":570,"./command":592,"./font_attributes":594,"./frame_attributes":595,"./layout_attributes":619,"@plotly/d3":58,"d3-format":112,"d3-time-format":120,"fast-isnumeric":190}],629:[function(i,U,V){U.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:["draglayer","plotbg","backplot","angular-grid","radial-grid","frontplot","angular-line","radial-line","angular-axis","radial-axis"],radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}},{}],630:[function(i,U,V){var w=i("../../lib"),f=i("../../lib/polygon").tester,M=w.findIndexOfMin,T=w.isAngleInsideSector,e=w.angleDelta,a=w.angleDist;function n(x,u,A,_,g){if(!T(u,_))return!1;var b,v;A[0]<A[1]?(b=A[0],v=A[1]):(b=A[1],v=A[0]);var k=f(o(b,_[0],_[1],g)),S=f(o(v,_[0],_[1],g)),E=[x*Math.cos(u),x*Math.sin(u)];return S.contains(E)&&!k.contains(E)}function r(x,u,A,_){var g,b,v=_[0],k=_[1],S=p(Math.sin(u)-Math.sin(x)),E=p(Math.cos(u)-Math.cos(x)),C=Math.tan(A),F=p(1/C),I=S/E,D=k-I*v;return F?S&&E?(g=D/(C-I),b=C*g):E?(g=k*F,b=k):(g=v,b=v*C):S&&E?(g=0,b=D):E?(g=0,b=k):g=b=NaN,[g,b]}function t(x,u,A,_){var g=-u*A,b=u*u+1,v=2*(u*g-A),k=g*g+A*A-x*x,S=Math.sqrt(v*v-4*b*k),E=(-v+S)/(2*b),C=(-v-S)/(2*b);return[[E,u*E+g+_],[C,u*C+g+_]]}function h(x,u){var A=u.length,_=new Array(A+1),g;for(g=0;g<A;g++){var b=u[g];_[g]=[x*Math.cos(b),x*Math.sin(b)]}return _[g]=_[0].slice(),_}function s(x,u,A,_){var g=_.length,b=[],v,k;function S(B){return[x*Math.cos(B),x*Math.sin(B)]}function E(B,G,Q){return r(B,G,Q,S(B))}function C(B){return w.mod(B,g)}function F(B){return T(B,[u,A])}var I=M(_,function(B){return F(B)?a(B,u):1/0}),D=E(_[I],_[C(I-1)],u);for(b.push(D),v=I,k=0;k<g;v++,k++){var R=_[C(v)];if(!F(R))break;b.push(S(R))}var O=M(_,function(B){return F(B)?a(B,A):1/0}),z=E(_[O],_[C(O+1)],A);return b.push(z),b.push([0,0]),b.push(b[0].slice()),b}function o(x,u,A,_){return w.isFullCircle([u,A])?h(x,_):s(x,u,A,_)}function y(x,u,A,_){for(var g=1/0,b=1/0,v=o(x,u,A,_),k=0;k<v.length;k++){var S=v[k];g=Math.min(g,S[0]),b=Math.min(b,-S[1])}return[g,b]}function d(x,u){var A=function(b){var v=e(b,x);return v>0?v:1/0},_=M(u,A),g=w.mod(_+1,u.length);return[u[_],u[g]]}function p(x){return Math.abs(x)>1e-10?x:0}function c(x,u,A){u=u||0,A=A||0;for(var _=x.length,g=new Array(_),b=0;b<_;b++){var v=x[b];g[b]=[u+v[0],A-v[1]]}return g}function m(x,u,A,_,g,b){var v=o(x,u,A,_);return"M"+c(v,g,b).join("L")}function l(x,u,A,_,g,b,v){var k,S;x<u?(k=x,S=u):(k=u,S=x);var E=c(o(k,A,_,g),b,v),C=c(o(S,A,_,g),b,v);return"M"+C.reverse().join("L")+"M"+E.join("L")}U.exports={isPtInsidePolygon:n,findPolygonOffset:y,findEnclosingVertexAngles:d,findIntersectionXY:r,findXYatLength:t,clampTiny:p,pathPolygon:m,pathPolygonAnnulus:l}},{"../../lib":515,"../../lib/polygon":527}],631:[function(i,U,V){var w=i("../get_data").getSubplotCalcData,f=i("../../lib").counterRegex,M=i("./polar"),T=i("./constants"),e=T.attr,a=T.name,n=f(a),r={};r[e]={valType:"subplotid",dflt:a,editType:"calc"};function t(s){for(var o=s._fullLayout,y=s.calcdata,d=o._subplots[a],p=0;p<d.length;p++){var c=d[p],m=w(y,a,c),l=o[c]._subplot;l||(l=M(s,c),o[c]._subplot=l),l.plot(m,o,s._promises)}}function h(s,o,y,d){for(var p=d._subplots[a]||[],c=d._has&&d._has("gl"),m=o._has&&o._has("gl"),l=c&&!m,x=0;x<p.length;x++){var u=p[x],A=d[u]._subplot;if(!o[u]&&!!A){A.framework.remove(),A.layers["radial-axis-title"].remove();for(var _ in A.clipPaths)A.clipPaths[_].remove()}l&&A._scene&&(A._scene.destroy(),A._scene=null)}}U.exports={attr:e,name:a,idRoot:a,idRegex:n,attrRegex:n,attributes:r,layoutAttributes:i("./layout_attributes"),supplyLayoutDefaults:i("./layout_defaults"),plot:t,clean:h,toSVG:i("../cartesian").toSVG}},{"../../lib":515,"../cartesian":578,"../get_data":602,"./constants":629,"./layout_attributes":632,"./layout_defaults":633,"./polar":634}],632:[function(i,U,V){var w=i("../../components/color/attributes"),f=i("../cartesian/layout_attributes"),M=i("../domain").attributes,T=i("../../lib").extendFlat,e=i("../../plot_api/edit_types").overrideAll,a=e({color:f.color,showline:T({},f.showline,{dflt:!0}),linecolor:f.linecolor,linewidth:f.linewidth,showgrid:T({},f.showgrid,{dflt:!0}),gridcolor:f.gridcolor,gridwidth:f.gridwidth,griddash:f.griddash},"plot","from-root"),n=e({tickmode:f.tickmode,nticks:f.nticks,tick0:f.tick0,dtick:f.dtick,tickvals:f.tickvals,ticktext:f.ticktext,ticks:f.ticks,ticklen:f.ticklen,tickwidth:f.tickwidth,tickcolor:f.tickcolor,ticklabelstep:f.ticklabelstep,showticklabels:f.showticklabels,showtickprefix:f.showtickprefix,tickprefix:f.tickprefix,showticksuffix:f.showticksuffix,ticksuffix:f.ticksuffix,showexponent:f.showexponent,exponentformat:f.exponentformat,minexponent:f.minexponent,separatethousands:f.separatethousands,tickfont:f.tickfont,tickangle:f.tickangle,tickformat:f.tickformat,tickformatstops:f.tickformatstops,layer:f.layer},"plot","from-root"),r={visible:T({},f.visible,{dflt:!0}),type:T({},f.type,{values:["-","linear","log","date","category"]}),autotypenumbers:f.autotypenumbers,autorange:T({},f.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc"},range:T({},f.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:f.categoryorder,categoryarray:f.categoryarray,angle:{valType:"angle",editType:"plot"},side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot"},title:{text:T({},f.title.text,{editType:"plot",dflt:""}),font:T({},f.title.font,{editType:"plot"}),editType:"plot"},hoverformat:f.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{title:f._deprecated.title,titlefont:f._deprecated.titlefont}};T(r,a,n);var t={visible:T({},f.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:f.autotypenumbers,categoryorder:f.categoryorder,categoryarray:f.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc"},period:{valType:"number",editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},hoverformat:f.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc"};T(t,a,n),U.exports={domain:M({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot"},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:w.background},radialaxis:r,angularaxis:t,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot"},uirevision:{valType:"any",editType:"none"},editType:"calc"}},{"../../components/color/attributes":366,"../../lib":515,"../../plot_api/edit_types":548,"../cartesian/layout_attributes":579,"../domain":593}],633:[function(i,U,V){var w=i("../../lib"),f=i("../../components/color"),M=i("../../plot_api/plot_template"),T=i("../subplot_defaults"),e=i("../get_data").getSubplotData,a=i("../cartesian/tick_value_defaults"),n=i("../cartesian/tick_mark_defaults"),r=i("../cartesian/tick_label_defaults"),t=i("../cartesian/prefix_suffix_defaults"),h=i("../cartesian/category_order_defaults"),s=i("../cartesian/line_grid_defaults"),o=i("../cartesian/axis_autotype"),y=i("./layout_attributes"),d=i("./set_convert"),p=i("./constants"),c=p.axisNames;function m(x,u,A,_){var g=A("bgcolor");_.bgColor=f.combine(g,_.paper_bgcolor);var b=A("sector");A("hole");var v=e(_.fullData,p.name,_.id),k=_.layoutOut,S;function E(K,te){return A(S+"."+K,te)}for(var C=0;C<c.length;C++){S=c[C],w.isPlainObject(x[S])||(x[S]={});var F=x[S],I=M.newContainer(u,S);I._id=I._name=S,I._attr=_.id+"."+S,I._traceIndices=v.map(function(K){return K._expandedIndex});var D=p.axisName2dataArray[S],R=l(F,I,E,v,D,_);h(F,I,E,{axData:v,dataAttr:D});var O=E("visible");switch(d(I,u,k),E("uirevision",u.uirevision),I._m=1,S){case"radialaxis":var z=E("autorange",!I.isValidRange(F.range));F.autorange=z,z&&(R==="linear"||R==="-")&&E("rangemode"),z==="reversed"&&(I._m=-1),E("range"),I.cleanRange("range",{dfltRange:[0,1]});break;case"angularaxis":if(R==="date"){w.log("Polar plots do not support date angular axes yet.");for(var B=0;B<v.length;B++)v[B].visible=!1;R=F.type=I.type="linear"}E(R==="linear"?"thetaunit":"period");var G=E("direction");E("rotation",{counterclockwise:0,clockwise:90}[G]);break}if(t(F,I,E,I.type,{tickSuffixDflt:I.thetaunit==="degrees"?"\xB0":void 0}),O){var Q,X,j,re,ue=_.font||{};Q=E("color"),X=Q===F.color?Q:ue.color,j=ue.size,re=ue.family,a(F,I,E,I.type),r(F,I,E,I.type,{font:{color:X,size:j,family:re}}),n(F,I,E,{outerTicks:!0}),s(F,I,E,{dfltColor:Q,bgColor:_.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:y[S]}),E("layer"),S==="radialaxis"&&(E("side"),E("angle",b[0]),E("title.text"),w.coerceFont(E,"title.font",{color:X,size:w.bigFont(j),family:re}))}R!=="category"&&E("hoverformat"),I._input=F}u.angularaxis.type==="category"&&A("gridshape")}function l(x,u,A,_,g,b){var v=A("autotypenumbers",b.autotypenumbersDflt),k=A("type");if(k==="-"){for(var S,E=0;E<_.length;E++)if(_[E].visible){S=_[E];break}S&&S[g]&&(u.type=o(S[g],"gregorian",{noMultiCategory:!0,autotypenumbers:v})),u.type==="-"?u.type="linear":x.type=u.type}return u.type}U.exports=function(u,A,_){T(u,A,_,{type:p.name,attributes:y,handleDefaults:m,font:A.font,autotypenumbersDflt:A.autotypenumbers,paper_bgcolor:A.paper_bgcolor,fullData:_,layoutOut:A})}},{"../../components/color":367,"../../lib":515,"../../plot_api/plot_template":555,"../cartesian/axis_autotype":567,"../cartesian/category_order_defaults":571,"../cartesian/line_grid_defaults":581,"../cartesian/prefix_suffix_defaults":583,"../cartesian/tick_label_defaults":587,"../cartesian/tick_mark_defaults":588,"../cartesian/tick_value_defaults":589,"../get_data":602,"../subplot_defaults":641,"./constants":629,"./layout_attributes":632,"./set_convert":635}],634:[function(i,U,V){var w=i("@plotly/d3"),f=i("tinycolor2"),M=i("../../registry"),T=i("../../lib"),e=T.strRotate,a=T.strTranslate,n=i("../../components/color"),r=i("../../components/drawing"),t=i("../plots"),h=i("../../plots/cartesian/axes"),s=i("../cartesian/set_convert"),o=i("./set_convert"),y=i("../cartesian/autorange").doAutoRange,d=i("../cartesian/dragbox"),p=i("../../components/dragelement"),c=i("../../components/fx"),m=i("../../components/titles"),l=i("../../components/selections").prepSelect,x=i("../../components/selections").selectOnClick,u=i("../../components/selections").clearOutline,A=i("../../lib/setcursor"),_=i("../../lib/clear_gl_canvases"),g=i("../../plot_api/subroutines").redrawReglTraces,b=i("../../constants/alignment").MID_SHIFT,v=i("./constants"),k=i("./helpers"),S=i("../smith/helpers"),E=S.smith,C=S.reactanceArc,F=S.resistanceArc,I=S.smithTransform,D=T._,R=T.mod,O=T.deg2rad,z=T.rad2deg;function B(ue,K,te){this.isSmith=te||!1,this.id=K,this.gd=ue,this._hasClipOnAxisFalse=null,this.vangles=null,this.radialAxisAngle=null,this.traceHash={},this.layers={},this.clipPaths={},this.clipIds={},this.viewInitial={};var Y=ue._fullLayout,H="clip"+Y._uid+K;this.clipIds.forTraces=H+"-for-traces",this.clipPaths.forTraces=Y._clips.append("clipPath").attr("id",this.clipIds.forTraces),this.clipPaths.forTraces.append("path"),this.framework=Y["_"+(te?"smith":"polar")+"layer"].append("g").attr("class",K),this.getHole=function(ee){return this.isSmith?0:ee.hole},this.getSector=function(ee){return this.isSmith?[0,360]:ee.sector},this.getRadial=function(ee){return this.isSmith?ee.realaxis:ee.radialaxis},this.getAngular=function(ee){return this.isSmith?ee.imaginaryaxis:ee.angularaxis},te||(this.radialTickLayout=null,this.angularTickLayout=null)}var G=B.prototype;U.exports=function(K,te,Y){return new B(K,te,Y)},G.plot=function(ue,K){for(var te=this,Y=K[te.id],H=!1,ee=0;ee<ue.length;ee++){var ne=ue[ee][0].trace;if(ne.cliponaxis===!1){H=!0;break}}te._hasClipOnAxisFalse=H,te.updateLayers(K,Y),te.updateLayout(K,Y),t.generalUpdatePerTraceModule(te.gd,te,ue,Y),te.updateFx(K,Y),te.isSmith&&(delete Y.realaxis.range,delete Y.imaginaryaxis.range)},G.updateLayers=function(ue,K){var te=this,Y=te.isSmith,H=te.layers,ee=te.getRadial(K),ne=te.getAngular(K),Z=v.layerNames,q=Z.indexOf("frontplot"),ie=Z.slice(0,q),se=ne.layer==="below traces",ae=ee.layer==="below traces";se&&ie.push("angular-line"),ae&&ie.push("radial-line"),se&&ie.push("angular-axis"),ae&&ie.push("radial-axis"),ie.push("frontplot"),se||ie.push("angular-line"),ae||ie.push("radial-line"),se||ie.push("angular-axis"),ae||ie.push("radial-axis");var oe=(Y?"smith":"polar")+"sublayer",be=te.framework.selectAll("."+oe).data(ie,String);be.enter().append("g").attr("class",function(ce){return oe+" "+ce}).each(function(ce){var de=H[ce]=w.select(this);switch(ce){case"frontplot":Y||de.append("g").classed("barlayer",!0),de.append("g").classed("scatterlayer",!0);break;case"backplot":de.append("g").classed("maplayer",!0);break;case"plotbg":H.bg=de.append("path");break;case"radial-grid":de.style("fill","none");break;case"angular-grid":de.style("fill","none");break;case"radial-line":de.append("line").style("fill","none");break;case"angular-line":de.append("path").style("fill","none");break}}),be.order()},G.updateLayout=function(ue,K){var te=this,Y=te.layers,H=ue._size,ee=te.getRadial(K),ne=te.getAngular(K),Z=K.domain.x,q=K.domain.y;te.xOffset=H.l+H.w*Z[0],te.yOffset=H.t+H.h*(1-q[1]);var ie=te.xLength=H.w*(Z[1]-Z[0]),se=te.yLength=H.h*(q[1]-q[0]),ae=te.getSector(K);te.sectorInRad=ae.map(O);var oe=te.sectorBBox=X(ae),be=oe[2]-oe[0],ce=oe[3]-oe[1],de=se/ie,ye=Math.abs(ce/be),ge,me,Se,Le,Oe;de>ye?(ge=ie,me=ie*ye,Oe=(se-me)/H.h/2,Se=[Z[0],Z[1]],Le=[q[0]+Oe,q[1]-Oe]):(ge=se/ye,me=se,Oe=(ie-ge)/H.w/2,Se=[Z[0]+Oe,Z[1]-Oe],Le=[q[0],q[1]]),te.xLength2=ge,te.yLength2=me,te.xDomain2=Se,te.yDomain2=Le;var we=te.xOffset2=H.l+H.w*Se[0],Ce=te.yOffset2=H.t+H.h*(1-Le[1]),Ke=te.radius=ge/be,Ye=te.innerRadius=te.getHole(K)*Ke,Fe=te.cx=we-Ke*oe[0],Re=te.cy=Ce+Ke*oe[3],je=te.cxx=Fe-we,xt=te.cyy=Re-Ce,Nt=ee.side,tr;Nt==="counterclockwise"?(tr=Nt,Nt="top"):Nt==="clockwise"&&(tr=Nt,Nt="bottom"),te.radialAxis=te.mockAxis(ue,K,ee,{_id:"x",side:Nt,_trueSide:tr,domain:[Ye/H.w,Ke/H.w]}),te.angularAxis=te.mockAxis(ue,K,ne,{side:"right",domain:[0,Math.PI],autorange:!1}),te.doAutoRange(ue,K),te.updateAngularAxis(ue,K),te.updateRadialAxis(ue,K),te.updateRadialAxisTitle(ue,K),te.xaxis=te.mockCartesianAxis(ue,K,{_id:"x",domain:Se}),te.yaxis=te.mockCartesianAxis(ue,K,{_id:"y",domain:Le});var Ht=te.pathSubplot();te.clipPaths.forTraces.select("path").attr("d",Ht).attr("transform",a(je,xt)),Y.frontplot.attr("transform",a(we,Ce)).call(r.setClipUrl,te._hasClipOnAxisFalse?null:te.clipIds.forTraces,te.gd),Y.bg.attr("d",Ht).attr("transform",a(Fe,Re)).call(n.fill,K.bgcolor)},G.mockAxis=function(ue,K,te,Y){var H=T.extendFlat({},te,Y);return o(H,K,ue),H},G.mockCartesianAxis=function(ue,K,te){var Y=this,H=Y.isSmith,ee=te._id,ne=T.extendFlat({type:"linear"},te);s(ne,ue);var Z={x:[0,2],y:[1,3]};return ne.setRange=function(){var q=Y.sectorBBox,ie=Z[ee],se=Y.radialAxis._rl,ae=(se[1]-se[0])/(1-Y.getHole(K));ne.range=[q[ie[0]]*ae,q[ie[1]]*ae]},ne.isPtWithinRange=ee==="x"&&!H?function(q){return Y.isPtInside(q)}:function(){return!0},ne.setRange(),ne.setScale(),ne},G.doAutoRange=function(ue,K){var te=this,Y=te.gd,H=te.radialAxis,ee=te.getRadial(K);y(Y,H);var ne=H.range;ee.range=ne.slice(),ee._input.range=ne.slice(),H._rl=[H.r2l(ne[0],null,"gregorian"),H.r2l(ne[1],null,"gregorian")]},G.updateRadialAxis=function(ue,K){var te=this,Y=te.gd,H=te.layers,ee=te.radius,ne=te.innerRadius,Z=te.cx,q=te.cy,ie=te.getRadial(K),se=R(te.getSector(K)[0],360),ae=te.radialAxis,oe=ne<ee,be=te.isSmith;be||(te.fillViewInitialKey("radialaxis.angle",ie.angle),te.fillViewInitialKey("radialaxis.range",ae.range.slice()),ae.setGeometry()),ae.tickangle==="auto"&&se>90&&se<=270&&(ae.tickangle=180);var ce=be?function(Ke){var Ye=I(te,E([Ke.x,0]));return a(Ye[0]-Z,Ye[1]-q)}:function(Ke){return a(ae.l2p(Ke.x)+ne,0)},de=be?function(Ke){return F(te,Ke.x,-1/0,1/0)}:function(Ke){return te.pathArc(ae.r2p(Ke.x)+ne)},ye=Q(ie);if(te.radialTickLayout!==ye&&(H["radial-axis"].selectAll(".xtick").remove(),te.radialTickLayout=ye),oe){ae.setScale();var ge=0,me=be?(ae.tickvals||[]).filter(function(Ke){return Ke>=0}).map(function(Ke){return h.tickText(ae,Ke,!0,!1)}):h.calcTicks(ae),Se=be?me:h.clipEnds(ae,me),Le=h.getTickSigns(ae)[2];be&&((ae.ticks==="top"&&ae.side==="bottom"||ae.ticks==="bottom"&&ae.side==="top")&&(Le=-Le),ae.ticks==="top"&&ae.side==="top"&&(ge=-ae.ticklen),ae.ticks==="bottom"&&ae.side==="bottom"&&(ge=ae.ticklen)),h.drawTicks(Y,ae,{vals:me,layer:H["radial-axis"],path:h.makeTickPath(ae,0,Le),transFn:ce,crisp:!1}),h.drawGrid(Y,ae,{vals:Se,layer:H["radial-grid"],path:de,transFn:T.noop,crisp:!1}),h.drawLabels(Y,ae,{vals:me,layer:H["radial-axis"],transFn:ce,labelFns:h.makeLabelFns(ae,ge)})}var Oe=te.radialAxisAngle=te.vangles?z(j(O(ie.angle),te.vangles)):ie.angle,we=a(Z,q),Ce=we+e(-Oe);re(H["radial-axis"],oe&&(ie.showticklabels||ie.ticks),{transform:Ce}),re(H["radial-grid"],oe&&ie.showgrid,{transform:be?"":we}),re(H["radial-line"].select("line"),oe&&ie.showline,{x1:be?-ee:ne,y1:0,x2:ee,y2:0,transform:Ce}).attr("stroke-width",ie.linewidth).call(n.stroke,ie.linecolor)},G.updateRadialAxisTitle=function(ue,K,te){if(!this.isSmith){var Y=this,H=Y.gd,ee=Y.radius,ne=Y.cx,Z=Y.cy,q=Y.getRadial(K),ie=Y.id+"title",se=0;if(q.title){var ae=r.bBox(Y.layers["radial-axis"].node()).height,oe=q.title.font.size,be=q.side;se=be==="top"?oe:be==="counterclockwise"?-(ae+oe*.4):ae+oe*.8}var ce=te!==void 0?te:Y.radialAxisAngle,de=O(ce),ye=Math.cos(de),ge=Math.sin(de),me=ne+ee/2*ye+se*ge,Se=Z-ee/2*ge+se*ye;Y.layers["radial-axis-title"]=m.draw(H,ie,{propContainer:q,propName:Y.id+".radialaxis.title",placeholder:D(H,"Click to enter radial axis title"),attributes:{x:me,y:Se,"text-anchor":"middle"},transform:{rotate:-ce}})}},G.updateAngularAxis=function(ue,K){var te=this,Y=te.gd,H=te.layers,ee=te.radius,ne=te.innerRadius,Z=te.cx,q=te.cy,ie=te.getAngular(K),se=te.angularAxis,ae=te.isSmith;ae||(te.fillViewInitialKey("angularaxis.rotation",ie.rotation),se.setGeometry(),se.setScale());var oe=ae?function(Ye){var Fe=I(te,E([0,Ye.x]));return Math.atan2(Fe[0]-Z,Fe[1]-q)-Math.PI/2}:function(Ye){return se.t2g(Ye.x)};se.type==="linear"&&se.thetaunit==="radians"&&(se.tick0=z(se.tick0),se.dtick=z(se.dtick));var be=function(Ye){return a(Z+ee*Math.cos(Ye),q-ee*Math.sin(Ye))},ce=ae?function(Ye){var Fe=I(te,E([0,Ye.x]));return a(Fe[0],Fe[1])}:function(Ye){return be(oe(Ye))},de=ae?function(Ye){var Fe=I(te,E([0,Ye.x])),Re=Math.atan2(Fe[0]-Z,Fe[1]-q)-Math.PI/2;return a(Fe[0],Fe[1])+e(-z(Re))}:function(Ye){var Fe=oe(Ye);return be(Fe)+e(-z(Fe))},ye=ae?function(Ye){return C(te,Ye.x,0,1/0)}:function(Ye){var Fe=oe(Ye),Re=Math.cos(Fe),je=Math.sin(Fe);return"M"+[Z+ne*Re,q-ne*je]+"L"+[Z+ee*Re,q-ee*je]},ge=h.makeLabelFns(se,0),me=ge.labelStandoff,Se={};Se.xFn=function(Ye){var Fe=oe(Ye);return Math.cos(Fe)*me},Se.yFn=function(Ye){var Fe=oe(Ye),Re=Math.sin(Fe)>0?.2:1;return-Math.sin(Fe)*(me+Ye.fontSize*Re)+Math.abs(Math.cos(Fe))*(Ye.fontSize*b)},Se.anchorFn=function(Ye){var Fe=oe(Ye),Re=Math.cos(Fe);return Math.abs(Re)<.1?"middle":Re>0?"start":"end"},Se.heightFn=function(Ye,Fe,Re){var je=oe(Ye);return-.5*(1+Math.sin(je))*Re};var Le=Q(ie);te.angularTickLayout!==Le&&(H["angular-axis"].selectAll("."+se._id+"tick").remove(),te.angularTickLayout=Le);var Oe=ae?[1/0].concat(se.tickvals||[]).map(function(Ye){return h.tickText(se,Ye,!0,!1)}):h.calcTicks(se);ae&&(Oe[0].text="\u221E",Oe[0].fontSize*=1.75);var we;if(K.gridshape==="linear"?(we=Oe.map(oe),T.angleDelta(we[0],we[1])<0&&(we=we.slice().reverse())):we=null,te.vangles=we,se.type==="category"&&(Oe=Oe.filter(function(Ye){return T.isAngleInsideSector(oe(Ye),te.sectorInRad)})),se.visible){var Ce=se.ticks==="inside"?-1:1,Ke=(se.linewidth||1)/2;h.drawTicks(Y,se,{vals:Oe,layer:H["angular-axis"],path:"M"+Ce*Ke+",0h"+Ce*se.ticklen,transFn:de,crisp:!1}),h.drawGrid(Y,se,{vals:Oe,layer:H["angular-grid"],path:ye,transFn:T.noop,crisp:!1}),h.drawLabels(Y,se,{vals:Oe,layer:H["angular-axis"],repositionOnUpdate:!0,transFn:ce,labelFns:Se})}re(H["angular-line"].select("path"),ie.showline,{d:te.pathSubplot(),transform:a(Z,q)}).attr("stroke-width",ie.linewidth).call(n.stroke,ie.linecolor)},G.updateFx=function(ue,K){if(!this.gd._context.staticPlot){var te=!this.isSmith;te&&(this.updateAngularDrag(ue),this.updateRadialDrag(ue,K,0),this.updateRadialDrag(ue,K,1)),this.updateHoverAndMainDrag(ue)}},G.updateHoverAndMainDrag=function(ue){var K=this,te=K.isSmith,Y=K.gd,H=K.layers,ee=ue._zoomlayer,ne=v.MINZOOM,Z=v.OFFEDGE,q=K.radius,ie=K.innerRadius,se=K.cx,ae=K.cy,oe=K.cxx,be=K.cyy,ce=K.sectorInRad,de=K.vangles,ye=K.radialAxis,ge=k.clampTiny,me=k.findXYatLength,Se=k.findEnclosingVertexAngles,Le=v.cornerHalfWidth,Oe=v.cornerLen/2,we,Ce,Ke=d.makeDragger(H,"path","maindrag",ue.dragmode===!1?"none":"crosshair");w.select(Ke).attr("d",K.pathSubplot()).attr("transform",a(se,ae)),Ke.onmousemove=function(Qt){c.hover(Y,Qt,K.id),Y._fullLayout._lasthover=Ke,Y._fullLayout._hoversubplot=K.id},Ke.onmouseout=function(Qt){Y._dragging||p.unhover(Y,Qt)};var Ye={element:Ke,gd:Y,subplot:K.id,plotinfo:{id:K.id,xaxis:K.xaxis,yaxis:K.yaxis},xaxes:[K.xaxis],yaxes:[K.yaxis]},Fe,Re,je,xt,Nt,tr,Ht,Pt,$t;function Ut(Qt,Zt){return Math.sqrt(Qt*Qt+Zt*Zt)}function Lt(Qt,Zt){return Ut(Qt-oe,Zt-be)}function We(Qt,Zt){return Math.atan2(be-Zt,Qt-oe)}function ot(Qt,Zt){return[Qt*Math.cos(Zt),Qt*Math.sin(-Zt)]}function Ge(Qt,Zt){if(Qt===0)return K.pathSector(2*Le);var cr=Oe/Qt,Xr=Zt-cr,vn=Zt+cr,en=Math.max(0,Math.min(Qt,q)),ut=en-Le,ar=en+Le;return"M"+ot(ut,Xr)+"A"+[ut,ut]+" 0,0,0 "+ot(ut,vn)+"L"+ot(ar,vn)+"A"+[ar,ar]+" 0,0,1 "+ot(ar,Xr)+"Z"}function Me(Qt,Zt,cr){if(Qt===0)return K.pathSector(2*Le);var Xr=ot(Qt,Zt),vn=ot(Qt,cr),en=ge((Xr[0]+vn[0])/2),ut=ge((Xr[1]+vn[1])/2),ar,rr;if(en&&ut){var Kt=ut/en,Er=-1/Kt,st=me(Le,Kt,en,ut);ar=me(Oe,Er,st[0][0],st[0][1]),rr=me(Oe,Er,st[1][0],st[1][1])}else{var et,ht;ut?(et=Oe,ht=Le):(et=Le,ht=Oe),ar=[[en-et,ut-ht],[en+et,ut-ht]],rr=[[en-et,ut+ht],[en+et,ut+ht]]}return"M"+ar.join("L")+"L"+rr.reverse().join("L")+"Z"}function Ve(){je=null,xt=null,Nt=K.pathSubplot(),tr=!1;var Qt=Y._fullLayout[K.id];Ht=f(Qt.bgcolor).getLuminance(),Pt=d.makeZoombox(ee,Ht,se,ae,Nt),Pt.attr("fill-rule","evenodd"),$t=d.makeCorners(ee,se,ae),u(Y)}function Qe(Qt,Zt){return Zt=Math.max(Math.min(Zt,q),ie),Qt<Z?Qt=0:q-Qt<Z?Qt=q:Zt<Z?Zt=0:q-Zt<Z&&(Zt=q),Math.abs(Zt-Qt)>ne?(Qt<Zt?(je=Qt,xt=Zt):(je=Zt,xt=Qt),!0):(je=null,xt=null,!1)}function tt(Qt,Zt){Qt=Qt||Nt,Zt=Zt||"M0,0Z",Pt.attr("d",Qt),$t.attr("d",Zt),d.transitionZoombox(Pt,$t,tr,Ht),tr=!0;var cr={};Bt(cr),Y.emit("plotly_relayouting",cr)}function St(Qt,Zt){Qt=Qt*we,Zt=Zt*Ce;var cr=Fe+Qt,Xr=Re+Zt,vn=Lt(Fe,Re),en=Math.min(Lt(cr,Xr),q),ut=We(Fe,Re),ar,rr;Qe(vn,en)&&(ar=Nt+K.pathSector(xt),je&&(ar+=K.pathSector(je)),rr=Ge(je,ut)+Ge(xt,ut)),tt(ar,rr)}function wt(Qt,Zt,cr,Xr){var vn=k.findIntersectionXY(cr,Xr,cr,[Qt-oe,be-Zt]);return Ut(vn[0],vn[1])}function Ct(Qt,Zt){var cr=Fe+Qt,Xr=Re+Zt,vn=We(Fe,Re),en=We(cr,Xr),ut=Se(vn,de),ar=Se(en,de),rr=wt(Fe,Re,ut[0],ut[1]),Kt=Math.min(wt(cr,Xr,ar[0],ar[1]),q),Er,st;Qe(rr,Kt)&&(Er=Nt+K.pathSector(xt),je&&(Er+=K.pathSector(je)),st=[Me(je,ut[0],ut[1]),Me(xt,ut[0],ut[1])].join(" ")),tt(Er,st)}function jt(){if(d.removeZoombox(Y),!(je===null||xt===null)){var Qt={};Bt(Qt),d.showDoubleClickNotifier(Y),M.call("_guiRelayout",Y,Qt)}}function Bt(Qt){var Zt=ye._rl,cr=(Zt[1]-Zt[0])/(1-ie/q)/q,Xr=[Zt[0]+(je-ie)*cr,Zt[0]+(xt-ie)*cr];Qt[K.id+".radialaxis.range"]=Xr}function Wt(Qt,Zt){var cr=Y._fullLayout.clickmode;if(d.removeZoombox(Y),Qt===2){var Xr={};for(var vn in K.viewInitial)Xr[K.id+"."+vn]=K.viewInitial[vn];Y.emit("plotly_doubleclick",null),M.call("_guiRelayout",Y,Xr)}cr.indexOf("select")>-1&&Qt===1&&x(Zt,Y,[K.xaxis],[K.yaxis],K.id,Ye),cr.indexOf("event")>-1&&c.click(Y,Zt,K.id)}Ye.prepFn=function(Qt,Zt,cr){var Xr=Y._fullLayout.dragmode,vn=Ke.getBoundingClientRect();Y._fullLayout._calcInverseTransform(Y);var en=Y._fullLayout._invTransform;we=Y._fullLayout._invScaleX,Ce=Y._fullLayout._invScaleY;var ut=T.apply3DTransform(en)(Zt-vn.left,cr-vn.top);if(Fe=ut[0],Re=ut[1],de){var ar=k.findPolygonOffset(q,ce[0],ce[1],de);Fe+=oe+ar[0],Re+=be+ar[1]}switch(Xr){case"zoom":Ye.clickFn=Wt,te||(de?Ye.moveFn=Ct:Ye.moveFn=St,Ye.doneFn=jt,Ve());break;case"select":case"lasso":l(Qt,Zt,cr,Ye,Xr);break}},p.init(Ye)},G.updateRadialDrag=function(ue,K,te){var Y=this,H=Y.gd,ee=Y.layers,ne=Y.radius,Z=Y.innerRadius,q=Y.cx,ie=Y.cy,se=Y.radialAxis,ae=v.radialDragBoxSize,oe=ae/2;if(!se.visible)return;var be=O(Y.radialAxisAngle),ce=se._rl,de=ce[0],ye=ce[1],ge=ce[te],me=.75*(ce[1]-ce[0])/(1-Y.getHole(K))/ne,Se,Le,Oe;te?(Se=q+(ne+oe)*Math.cos(be),Le=ie-(ne+oe)*Math.sin(be),Oe="radialdrag"):(Se=q+(Z-oe)*Math.cos(be),Le=ie-(Z-oe)*Math.sin(be),Oe="radialdrag-inner");var we=d.makeRectDragger(ee,Oe,"crosshair",-oe,-oe,ae,ae),Ce={element:we,gd:H};ue.dragmode===!1&&(Ce.dragmode=!1),re(w.select(we),se.visible&&Z<ne,{transform:a(Se,Le)});var Ke,Ye,Fe;function Re(Ht,Pt){if(Ke)Ke(Ht,Pt);else{var $t=[Ht,-Pt],Ut=[Math.cos(be),Math.sin(be)],Lt=Math.abs(T.dot($t,Ut)/Math.sqrt(T.dot($t,$t)));isNaN(Lt)||(Ke=Lt<.5?Nt:tr)}var We={};je(We),H.emit("plotly_relayouting",We)}function je(Ht){Ye!==null?Ht[Y.id+".radialaxis.angle"]=Ye:Fe!==null&&(Ht[Y.id+".radialaxis.range["+te+"]"]=Fe)}function xt(){Ye!==null?M.call("_guiRelayout",H,Y.id+".radialaxis.angle",Ye):Fe!==null&&M.call("_guiRelayout",H,Y.id+".radialaxis.range["+te+"]",Fe)}function Nt(Ht,Pt){if(te!==0){var $t=Se+Ht,Ut=Le+Pt;Ye=Math.atan2(ie-Ut,$t-q),Y.vangles&&(Ye=j(Ye,Y.vangles)),Ye=z(Ye);var Lt=a(q,ie)+e(-Ye);ee["radial-axis"].attr("transform",Lt),ee["radial-line"].select("line").attr("transform",Lt);var We=Y.gd._fullLayout,ot=We[Y.id];Y.updateRadialAxisTitle(We,ot,Ye)}}function tr(Ht,Pt){var $t=T.dot([Ht,-Pt],[Math.cos(be),Math.sin(be)]);if(Fe=ge-me*$t,me>0!=(te?Fe>de:Fe<ye)){Fe=null;return}var Ut=H._fullLayout,Lt=Ut[Y.id];se.range[te]=Fe,se._rl[te]=Fe,Y.updateRadialAxis(Ut,Lt),Y.xaxis.setRange(),Y.xaxis.setScale(),Y.yaxis.setRange(),Y.yaxis.setScale();var We=!1;for(var ot in Y.traceHash){var Ge=Y.traceHash[ot],Me=T.filterVisible(Ge),Ve=Ge[0][0].trace._module;Ve.plot(H,Y,Me,Lt),M.traceIs(ot,"gl")&&Me.length&&(We=!0)}We&&(_(H),g(H))}Ce.prepFn=function(){Ke=null,Ye=null,Fe=null,Ce.moveFn=Re,Ce.doneFn=xt,u(H)},Ce.clampFn=function(Ht,Pt){return Math.sqrt(Ht*Ht+Pt*Pt)<v.MINDRAG&&(Ht=0,Pt=0),[Ht,Pt]},p.init(Ce)},G.updateAngularDrag=function(ue){var K=this,te=K.gd,Y=K.layers,H=K.radius,ee=K.angularAxis,ne=K.cx,Z=K.cy,q=K.cxx,ie=K.cyy,se=v.angularDragBoxSize,ae=d.makeDragger(Y,"path","angulardrag",ue.dragmode===!1?"none":"move"),oe={element:ae,gd:te};ue.dragmode===!1?oe.dragmode=!1:w.select(ae).attr("d",K.pathAnnulus(H,H+se)).attr("transform",a(ne,Z)).call(A,"move");function be(Fe,Re){return Math.atan2(ie+se-Re,Fe-q-se)}var ce=Y.frontplot.select(".scatterlayer").selectAll(".trace"),de=ce.selectAll(".point"),ye=ce.selectAll(".textpoint"),ge,me,Se,Le,Oe,we;function Ce(Fe,Re){var je=K.gd._fullLayout,xt=je[K.id],Nt=ge+Fe*ue._invScaleX,tr=me+Re*ue._invScaleY,Ht=be(Nt,tr),Pt=z(Ht-we);if(Le=Se+Pt,Y.frontplot.attr("transform",a(K.xOffset2,K.yOffset2)+e([-Pt,q,ie])),K.vangles){Oe=K.radialAxisAngle+Pt;var $t=a(ne,Z)+e(-Pt),Ut=a(ne,Z)+e(-Oe);Y.bg.attr("transform",$t),Y["radial-grid"].attr("transform",$t),Y["radial-axis"].attr("transform",Ut),Y["radial-line"].select("line").attr("transform",Ut),K.updateRadialAxisTitle(je,xt,Oe)}else K.clipPaths.forTraces.select("path").attr("transform",a(q,ie)+e(Pt));de.each(function(){var Qe=w.select(this),tt=r.getTranslate(Qe);Qe.attr("transform",a(tt.x,tt.y)+e([Pt]))}),ye.each(function(){var Qe=w.select(this),tt=Qe.select("text"),St=r.getTranslate(Qe);Qe.attr("transform",e([Pt,tt.attr("x"),tt.attr("y")])+a(St.x,St.y))}),ee.rotation=T.modHalf(Le,360),K.updateAngularAxis(je,xt),K._hasClipOnAxisFalse&&!T.isFullCircle(K.sectorInRad)&&ce.call(r.hideOutsideRangePoints,K);var Lt=!1;for(var We in K.traceHash)if(M.traceIs(We,"gl")){var ot=K.traceHash[We],Ge=T.filterVisible(ot),Me=ot[0][0].trace._module;Me.plot(te,K,Ge,xt),Ge.length&&(Lt=!0)}Lt&&(_(te),g(te));var Ve={};Ke(Ve),te.emit("plotly_relayouting",Ve)}function Ke(Fe){Fe[K.id+".angularaxis.rotation"]=Le,K.vangles&&(Fe[K.id+".radialaxis.angle"]=Oe)}function Ye(){ye.select("text").attr("transform",null);var Fe={};Ke(Fe),M.call("_guiRelayout",te,Fe)}oe.prepFn=function(Fe,Re,je){var xt=ue[K.id];Se=xt.angularaxis.rotation;var Nt=ae.getBoundingClientRect();ge=Re-Nt.left,me=je-Nt.top,te._fullLayout._calcInverseTransform(te);var tr=T.apply3DTransform(ue._invTransform)(ge,me);ge=tr[0],me=tr[1],we=be(ge,me),oe.moveFn=Ce,oe.doneFn=Ye,u(te)},K.vangles&&!T.isFullCircle(K.sectorInRad)&&(oe.prepFn=T.noop,A(w.select(ae),null)),p.init(oe)},G.isPtInside=function(ue){if(this.isSmith)return!0;var K=this.sectorInRad,te=this.vangles,Y=this.angularAxis.c2g(ue.theta),H=this.radialAxis,ee=H.c2l(ue.r),ne=H._rl,Z=te?k.isPtInsidePolygon:T.isPtInsideSector;return Z(ee,Y,ne,K,te)},G.pathArc=function(ue){var K=this.sectorInRad,te=this.vangles,Y=te?k.pathPolygon:T.pathArc;return Y(ue,K[0],K[1],te)},G.pathSector=function(ue){var K=this.sectorInRad,te=this.vangles,Y=te?k.pathPolygon:T.pathSector;return Y(ue,K[0],K[1],te)},G.pathAnnulus=function(ue,K){var te=this.sectorInRad,Y=this.vangles,H=Y?k.pathPolygonAnnulus:T.pathAnnulus;return H(ue,K,te[0],te[1],Y)},G.pathSubplot=function(){var ue=this.innerRadius,K=this.radius;return ue?this.pathAnnulus(ue,K):this.pathSector(K)},G.fillViewInitialKey=function(ue,K){ue in this.viewInitial||(this.viewInitial[ue]=K)};function Q(ue){var K=ue.ticks+String(ue.ticklen)+String(ue.showticklabels);return"side"in ue&&(K+=ue.side),K}function X(ue){var K=ue[0],te=ue[1],Y=te-K,H=R(K,360),ee=H+Y,ne=Math.cos(O(H)),Z=Math.sin(O(H)),q=Math.cos(O(ee)),ie=Math.sin(O(ee)),se,ae,oe,be;return H<=90&&ee>=90||H>90&&ee>=450?be=1:Z<=0&&ie<=0?be=0:be=Math.max(Z,ie),H<=180&&ee>=180||H>180&&ee>=540?se=-1:ne>=0&&q>=0?se=0:se=Math.min(ne,q),H<=270&&ee>=270||H>270&&ee>=630?ae=-1:Z>=0&&ie>=0?ae=0:ae=Math.min(Z,ie),ee>=360?oe=1:ne<=0&&q<=0?oe=0:oe=Math.max(ne,q),[se,ae,oe,be]}function j(ue,K){var te=function(H){return T.angleDist(ue,H)},Y=T.findIndexOfMin(K,te);return K[Y]}function re(ue,K,te){return K?(ue.attr("display",null),ue.attr(te)):ue&&ue.attr("display","none"),ue}},{"../../components/color":367,"../../components/dragelement":386,"../../components/drawing":389,"../../components/fx":407,"../../components/selections":455,"../../components/titles":476,"../../constants/alignment":483,"../../lib":515,"../../lib/clear_gl_canvases":499,"../../lib/setcursor":536,"../../plot_api/subroutines":556,"../../plots/cartesian/axes":566,"../../registry":647,"../cartesian/autorange":565,"../cartesian/dragbox":575,"../cartesian/set_convert":585,"../plots":628,"../smith/helpers":637,"./constants":629,"./helpers":630,"./set_convert":635,"@plotly/d3":58,tinycolor2:313}],635:[function(i,U,V){var w=i("../../lib"),f=i("../cartesian/set_convert"),M=w.deg2rad,T=w.rad2deg;U.exports=function(h,s,o){switch(f(h,o),h._id){case"x":case"radialaxis":e(h,s);break;case"angularaxis":r(h,s);break}};function e(t,h){var s=h._subplot;t.setGeometry=function(){var o=t._rl[0],y=t._rl[1],d=s.innerRadius,p=(s.radius-d)/(y-o),c=d/p,m=o>y?function(l){return l<=0}:function(l){return l>=0};t.c2g=function(l){var x=t.c2l(l)-o;return(m(x)?x:0)+c},t.g2c=function(l){return t.l2c(l+o-c)},t.g2p=function(l){return l*p},t.c2p=function(l){return t.g2p(t.c2g(l))}}}function a(t,h){return h==="degrees"?M(t):t}function n(t,h){return h==="degrees"?T(t):t}function r(t,h){var s=t.type;if(s==="linear"){var o=t.d2c,y=t.c2d;t.d2c=function(d,p){return a(o(d),p)},t.c2d=function(d,p){return y(n(d,p))}}t.makeCalcdata=function(d,p){var c=d[p],m=d._length,l,x,u=function(v){return t.d2c(v,d.thetaunit)};if(c){if(w.isTypedArray(c)&&s==="linear"){if(m===c.length)return c;if(c.subarray)return c.subarray(0,m)}for(l=new Array(m),x=0;x<m;x++)l[x]=u(c[x])}else{var A=p+"0",_="d"+p,g=A in d?u(d[A]):0,b=d[_]?u(d[_]):(t.period||2*Math.PI)/m;for(l=new Array(m),x=0;x<m;x++)l[x]=g+x*b}return l},t.setGeometry=function(){var d=h.sector,p=d.map(M),c={clockwise:-1,counterclockwise:1}[t.direction],m=M(t.rotation),l=function(k){return c*k+m},x=function(k){return(k-m)/c},u,A,_,g;switch(s){case"linear":A=u=w.identity,g=M,_=T,t.range=w.isFullCircle(p)?[d[0],d[0]+360]:p.map(x).map(T);break;case"category":var b=t._categories.length,v=t.period?Math.max(t.period,b):b;v===0&&(v=1),A=g=function(k){return k*2*Math.PI/v},u=_=function(k){return k*v/Math.PI/2},t.range=[0,v];break}t.c2g=function(k){return l(A(k))},t.g2c=function(k){return u(x(k))},t.t2g=function(k){return l(g(k))},t.g2t=function(k){return _(x(k))}}}},{"../../lib":515,"../cartesian/set_convert":585}],636:[function(i,U,V){U.exports={attr:"subplot",name:"smith",axisNames:["realaxis","imaginaryaxis"],axisName2dataArray:{imaginaryaxis:"imag",realaxis:"real"}}},{}],637:[function(i,U,V){function w(n){return n<0?-1:n>0?1:0}function f(n){var r=n[0],t=n[1];if(!isFinite(r)||!isFinite(t))return[1,0];var h=(r+1)*(r+1)+t*t;return[(r*r+t*t-1)/h,2*t/h]}function M(n,r){var t=r[0],h=r[1];return[t*n.radius+n.cx,-h*n.radius+n.cy]}function T(n,r){return r*n.radius}function e(n,r,t,h){var s=M(n,f([t,r])),o=s[0],y=s[1],d=M(n,f([h,r])),p=d[0],c=d[1];if(r===0)return["M"+o+","+y,"L"+p+","+c].join(" ");var m=T(n,1/Math.abs(r));return["M"+o+","+y,"A"+m+","+m+" 0 0,"+(r<0?1:0)+" "+p+","+c].join(" ")}function a(n,r,t,h){var s=T(n,1/(r+1)),o=M(n,f([r,t])),y=o[0],d=o[1],p=M(n,f([r,h])),c=p[0],m=p[1];if(w(t)!==w(h)){var l=M(n,f([r,0])),x=l[0],u=l[1];return["M"+y+","+d,"A"+s+","+s+" 0 0,"+(0<t?0:1)+" "+x+","+u,"A"+s+","+s+" 0 0,"+(h<0?0:1)+c+","+m].join(" ")}return["M"+y+","+d,"A"+s+","+s+" 0 0,"+(h<t?0:1)+" "+c+","+m].join(" ")}U.exports={smith:f,reactanceArc:e,resistanceArc:a,smithTransform:M}},{}],638:[function(i,U,V){var w=i("../get_data").getSubplotCalcData,f=i("../../lib").counterRegex,M=i("../polar/polar"),T=i("./constants"),e=T.attr,a=T.name,n=f(a),r={};r[e]={valType:"subplotid",dflt:a,editType:"calc"};function t(s){for(var o=s._fullLayout,y=s.calcdata,d=o._subplots[a],p=0;p<d.length;p++){var c=d[p],m=w(y,a,c),l=o[c]._subplot;l||(l=M(s,c,!0),o[c]._subplot=l),l.plot(m,o,s._promises)}}function h(s,o,y,d){for(var p=d._subplots[a]||[],c=0;c<p.length;c++){var m=p[c],l=d[m]._subplot;if(!o[m]&&!!l){l.framework.remove();for(var x in l.clipPaths)l.clipPaths[x].remove()}}}U.exports={attr:e,name:a,idRoot:a,idRegex:n,attrRegex:n,attributes:r,layoutAttributes:i("./layout_attributes"),supplyLayoutDefaults:i("./layout_defaults"),plot:t,clean:h,toSVG:i("../cartesian").toSVG}},{"../../lib":515,"../cartesian":578,"../get_data":602,"../polar/polar":634,"./constants":636,"./layout_attributes":639,"./layout_defaults":640}],639:[function(i,U,V){var w=i("../../components/color/attributes"),f=i("../cartesian/layout_attributes"),M=i("../domain").attributes,T=i("../../lib").extendFlat,e=i("../../plot_api/edit_types").overrideAll,a=e({color:f.color,showline:T({},f.showline,{dflt:!0}),linecolor:f.linecolor,linewidth:f.linewidth,showgrid:T({},f.showgrid,{dflt:!0}),gridcolor:f.gridcolor,gridwidth:f.gridwidth,griddash:f.griddash},"plot","from-root"),n=e({ticklen:f.ticklen,tickwidth:T({},f.tickwidth,{dflt:2}),tickcolor:f.tickcolor,showticklabels:f.showticklabels,showtickprefix:f.showtickprefix,tickprefix:f.tickprefix,showticksuffix:f.showticksuffix,ticksuffix:f.ticksuffix,tickfont:f.tickfont,tickformat:f.tickformat,hoverformat:f.hoverformat,layer:f.layer},"plot","from-root"),r=T({visible:T({},f.visible,{dflt:!0}),tickvals:{dflt:[.2,.5,1,2,5],valType:"data_array",editType:"plot"},tickangle:T({},f.tickangle,{dflt:90}),ticks:{valType:"enumerated",values:["top","bottom",""],editType:"ticks"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},editType:"calc"},a,n),t=T({visible:T({},f.visible,{dflt:!0}),tickvals:{valType:"data_array",editType:"plot"},ticks:f.ticks,editType:"calc"},a,n);U.exports={domain:M({name:"smith",editType:"plot"}),bgcolor:{valType:"color",editType:"plot",dflt:w.background},realaxis:r,imaginaryaxis:t,editType:"calc"}},{"../../components/color/attributes":366,"../../lib":515,"../../plot_api/edit_types":548,"../cartesian/layout_attributes":579,"../domain":593}],640:[function(i,U,V){var w=i("../../lib"),f=i("../../components/color"),M=i("../../plot_api/plot_template"),T=i("../subplot_defaults"),e=i("../get_data").getSubplotData,a=i("../cartesian/prefix_suffix_defaults"),n=i("../cartesian/tick_label_defaults"),r=i("../cartesian/line_grid_defaults"),t=i("../cartesian/set_convert"),h=i("./layout_attributes"),s=i("./constants"),o=s.axisNames,y=p(function(c){return c.slice().reverse().map(function(m){return-m}).concat([0]).concat(c)},String);function d(c,m,l,x){var u=l("bgcolor");x.bgColor=f.combine(u,x.paper_bgcolor);var A=e(x.fullData,s.name,x.id),_=x.layoutOut,g;function b(G,Q){return l(g+"."+G,Q)}for(var v=0;v<o.length;v++){g=o[v],w.isPlainObject(c[g])||(c[g]={});var k=c[g],S=M.newContainer(m,g);S._id=S._name=g,S._attr=x.id+"."+g,S._traceIndices=A.map(function(G){return G._expandedIndex});var E=b("visible");if(S.type="linear",t(S,_),a(k,S,b,S.type),E){var C=g==="realaxis";if(C&&b("side"),C)b("tickvals");else{var F=y(m.realaxis.tickvals||h.realaxis.tickvals.dflt);b("tickvals",F)}var I,D,R,O,z=x.font||{};E&&(I=b("color"),D=I===k.color?I:z.color,R=z.size,O=z.family),n(k,S,b,S.type,{noTicklabelstep:!0,noAng:!C,noExp:!0,font:{color:D,size:R,family:O}}),w.coerce2(c,m,h,g+".ticklen"),w.coerce2(c,m,h,g+".tickwidth"),w.coerce2(c,m,h,g+".tickcolor",m.color);var B=b("ticks");B||(delete m[g].ticklen,delete m[g].tickwidth,delete m[g].tickcolor),r(k,S,b,{dfltColor:I,bgColor:x.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:h[g]}),b("layer")}b("hoverformat"),delete S.type,S._input=k}}U.exports=function(m,l,x){T(m,l,x,{noUirevision:!0,type:s.name,attributes:h,handleDefaults:d,font:l.font,paper_bgcolor:l.paper_bgcolor,fullData:x,layoutOut:l})};function p(c,m){var l={};return function(x){var u=m?m(x):x;if(u in l)return l[u];var A=c(x);return l[u]=A,A}}},{"../../components/color":367,"../../lib":515,"../../plot_api/plot_template":555,"../cartesian/line_grid_defaults":581,"../cartesian/prefix_suffix_defaults":583,"../cartesian/set_convert":585,"../cartesian/tick_label_defaults":587,"../get_data":602,"../subplot_defaults":641,"./constants":636,"./layout_attributes":639}],641:[function(i,U,V){var w=i("../lib"),f=i("../plot_api/plot_template"),M=i("./domain").defaults;U.exports=function(e,a,n,r){var t=r.type,h=r.attributes,s=r.handleDefaults,o=r.partition||"x",y=a._subplots[t],d=y.length,p=d&&y[0].replace(/\d+$/,""),c,m;function l(_,g){return w.coerce(c,m,h,_,g)}for(var x=0;x<d;x++){var u=y[x];e[u]?c=e[u]:c=e[u]={},m=f.newContainer(a,u,p),r.noUirevision||l("uirevision",a.uirevision);var A={};A[o]=[x/d,(x+1)/d],M(m,a,l,A),r.id=u,s(c,m,l,r)}}},{"../lib":515,"../plot_api/plot_template":555,"./domain":593}],642:[function(i,U,V){var w=i("../constants/docs");w.FORMAT_LINK,w.DATE_FORMAT_LINK;function f(M){var T=M.description?" "+M.description:"",e=M.keys||[];if(e.length>0){for(var a=[],n=0;n<e.length;n++)a[n]="`"+e[n]+"`";T=T+"Finally, the template string has access to ",e.length===1?T="variable "+a[0]:T="variables "+a.slice(0,-1).join(", ")+" and "+a.slice(-1)+"."}return T}V.hovertemplateAttrs=function(M,T){M=M||{},T=T||{},f(T);var e={valType:"string",dflt:"",editType:M.editType||"none"};return M.arrayOk!==!1&&(e.arrayOk=!0),e},V.texttemplateAttrs=function(M,T){M=M||{},T=T||{},f(T);var e={valType:"string",dflt:"",editType:M.editType||"calc"};return M.arrayOk!==!1&&(e.arrayOk=!0),e}},{"../constants/docs":486}],643:[function(i,U,V){var w=i("./ternary"),f=i("../../plots/get_data").getSubplotCalcData,M=i("../../lib").counterRegex,T="ternary";V.name=T;var e=V.attr="subplot";V.idRoot=T,V.idRegex=V.attrRegex=M(T);var a=V.attributes={};a[e]={valType:"subplotid",dflt:"ternary",editType:"calc"},V.layoutAttributes=i("./layout_attributes"),V.supplyLayoutDefaults=i("./layout_defaults"),V.plot=function(r){for(var t=r._fullLayout,h=r.calcdata,s=t._subplots[T],o=0;o<s.length;o++){var y=s[o],d=f(h,T,y),p=t[y]._subplot;p||(p=new w({id:y,graphDiv:r,container:t._ternarylayer.node()},t),t[y]._subplot=p),p.plot(d,t,r._promises)}},V.clean=function(n,r,t,h){for(var s=h._subplots[T]||[],o=0;o<s.length;o++){var y=s[o],d=h[y]._subplot;!r[y]&&!!d&&(d.plotContainer.remove(),d.clipDef.remove(),d.clipDefRelative.remove(),d.layers["a-title"].remove(),d.layers["b-title"].remove(),d.layers["c-title"].remove())}}},{"../../lib":515,"../../plots/get_data":602,"./layout_attributes":644,"./layout_defaults":645,"./ternary":646}],644:[function(i,U,V){var w=i("../../components/color/attributes"),f=i("../domain").attributes,M=i("../cartesian/layout_attributes"),T=i("../../plot_api/edit_types").overrideAll,e=i("../../lib/extend").extendFlat,a={title:{text:M.title.text,font:M.title.font},color:M.color,tickmode:M.tickmode,nticks:e({},M.nticks,{dflt:6,min:1}),tick0:M.tick0,dtick:M.dtick,tickvals:M.tickvals,ticktext:M.ticktext,ticks:M.ticks,ticklen:M.ticklen,tickwidth:M.tickwidth,tickcolor:M.tickcolor,ticklabelstep:M.ticklabelstep,showticklabels:M.showticklabels,showtickprefix:M.showtickprefix,tickprefix:M.tickprefix,showticksuffix:M.showticksuffix,ticksuffix:M.ticksuffix,showexponent:M.showexponent,exponentformat:M.exponentformat,minexponent:M.minexponent,separatethousands:M.separatethousands,tickfont:M.tickfont,tickangle:M.tickangle,tickformat:M.tickformat,tickformatstops:M.tickformatstops,hoverformat:M.hoverformat,showline:e({},M.showline,{dflt:!0}),linecolor:M.linecolor,linewidth:M.linewidth,showgrid:e({},M.showgrid,{dflt:!0}),gridcolor:M.gridcolor,gridwidth:M.gridwidth,griddash:M.griddash,layer:M.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:M._deprecated.title,titlefont:M._deprecated.titlefont}},n=U.exports=T({domain:f({name:"ternary"}),bgcolor:{valType:"color",dflt:w.background},sum:{valType:"number",dflt:1,min:0},aaxis:a,baxis:a,caxis:a},"plot","from-root");n.uirevision={valType:"any",editType:"none"},n.aaxis.uirevision=n.baxis.uirevision=n.caxis.uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":366,"../../lib/extend":505,"../../plot_api/edit_types":548,"../cartesian/layout_attributes":579,"../domain":593}],645:[function(i,U,V){var w=i("../../components/color"),f=i("../../plot_api/plot_template"),M=i("../../lib"),T=i("../subplot_defaults"),e=i("../cartesian/tick_label_defaults"),a=i("../cartesian/prefix_suffix_defaults"),n=i("../cartesian/tick_mark_defaults"),r=i("../cartesian/tick_value_defaults"),t=i("../cartesian/line_grid_defaults"),h=i("./layout_attributes"),s=["aaxis","baxis","caxis"];U.exports=function(p,c,m){T(p,c,m,{type:"ternary",attributes:h,handleDefaults:o,font:c.font,paper_bgcolor:c.paper_bgcolor})};function o(d,p,c,m){var l=c("bgcolor"),x=c("sum");m.bgColor=w.combine(l,m.paper_bgcolor);for(var u,A,_,g=0;g<s.length;g++)u=s[g],A=d[u]||{},_=f.newContainer(p,u),_._name=u,y(A,_,m,p);var b=p.aaxis,v=p.baxis,k=p.caxis;b.min+v.min+k.min>=x&&(b.min=0,v.min=0,k.min=0,d.aaxis&&delete d.aaxis.min,d.baxis&&delete d.baxis.min,d.caxis&&delete d.caxis.min)}function y(d,p,c,m){var l=h[p._name];function x(S,E){return M.coerce(d,p,l,S,E)}x("uirevision",m.uirevision),p.type="linear";var u=x("color"),A=u!==l.color.dflt?u:c.font.color,_=p._name,g=_.charAt(0).toUpperCase(),b="Component "+g,v=x("title.text",b);p._hovertitle=v===b?v:g,M.coerceFont(x,"title.font",{family:c.font.family,size:M.bigFont(c.font.size),color:A}),x("min"),r(d,p,x,"linear"),a(d,p,x,"linear"),e(d,p,x,"linear"),n(d,p,x,{outerTicks:!0});var k=x("showticklabels");k&&(M.coerceFont(x,"tickfont",{family:c.font.family,size:c.font.size,color:A}),x("tickangle"),x("tickformat")),t(d,p,x,{dfltColor:u,bgColor:c.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:l}),x("hoverformat"),x("layer")}},{"../../components/color":367,"../../lib":515,"../../plot_api/plot_template":555,"../cartesian/line_grid_defaults":581,"../cartesian/prefix_suffix_defaults":583,"../cartesian/tick_label_defaults":587,"../cartesian/tick_mark_defaults":588,"../cartesian/tick_value_defaults":589,"../subplot_defaults":641,"./layout_attributes":644}],646:[function(i,U,V){var w=i("@plotly/d3"),f=i("tinycolor2"),M=i("../../registry"),T=i("../../lib"),e=T.strTranslate,a=T._,n=i("../../components/color"),r=i("../../components/drawing"),t=i("../cartesian/set_convert"),h=i("../../lib/extend").extendFlat,s=i("../plots"),o=i("../cartesian/axes"),y=i("../../components/dragelement"),d=i("../../components/fx"),p=i("../../components/dragelement/helpers"),c=p.freeMode,m=p.rectMode,l=i("../../components/titles"),x=i("../../components/selections").prepSelect,u=i("../../components/selections").selectOnClick,A=i("../../components/selections").clearOutline,_=i("../../components/selections").clearSelectionsCache,g=i("../cartesian/constants");function b(z,B){this.id=z.id,this.graphDiv=z.graphDiv,this.init(B),this.makeFramework(B),this.aTickLayout=null,this.bTickLayout=null,this.cTickLayout=null}U.exports=b;var v=b.prototype;v.init=function(z){this.container=z._ternarylayer,this.defs=z._defs,this.layoutId=z._uid,this.traceHash={},this.layers={}},v.plot=function(z,B){var G=this,Q=B[G.id],X=B._size;G._hasClipOnAxisFalse=!1;for(var j=0;j<z.length;j++){var re=z[j][0].trace;if(re.cliponaxis===!1){G._hasClipOnAxisFalse=!0;break}}G.updateLayers(Q),G.adjustLayout(Q,X),s.generalUpdatePerTraceModule(G.graphDiv,G,z,Q),G.layers.plotbg.select("path").call(n.fill,Q.bgcolor)},v.makeFramework=function(z){var B=this,G=B.graphDiv,Q=z[B.id],X=B.clipId="clip"+B.layoutId+B.id,j=B.clipIdRelative="clip-relative"+B.layoutId+B.id;B.clipDef=T.ensureSingleById(z._clips,"clipPath",X,function(re){re.append("path").attr("d","M0,0Z")}),B.clipDefRelative=T.ensureSingleById(z._clips,"clipPath",j,function(re){re.append("path").attr("d","M0,0Z")}),B.plotContainer=T.ensureSingle(B.container,"g",B.id),B.updateLayers(Q),r.setClipUrl(B.layers.backplot,X,G),r.setClipUrl(B.layers.grids,X,G)},v.updateLayers=function(z){var B=this,G=B.layers,Q=["draglayer","plotbg","backplot","grids"];z.aaxis.layer==="below traces"&&Q.push("aaxis","aline"),z.baxis.layer==="below traces"&&Q.push("baxis","bline"),z.caxis.layer==="below traces"&&Q.push("caxis","cline"),Q.push("frontplot"),z.aaxis.layer==="above traces"&&Q.push("aaxis","aline"),z.baxis.layer==="above traces"&&Q.push("baxis","bline"),z.caxis.layer==="above traces"&&Q.push("caxis","cline");var X=B.plotContainer.selectAll("g.toplevel").data(Q,String),j=["agrid","bgrid","cgrid"];X.enter().append("g").attr("class",function(re){return"toplevel "+re}).each(function(re){var ue=w.select(this);G[re]=ue,re==="frontplot"?ue.append("g").classed("scatterlayer",!0):re==="backplot"?ue.append("g").classed("maplayer",!0):re==="plotbg"?ue.append("path").attr("d","M0,0Z"):re==="aline"||re==="bline"||re==="cline"?ue.append("path"):re==="grids"&&j.forEach(function(K){G[K]=ue.append("g").classed("grid "+K,!0)})}),X.order()};var k=Math.sqrt(4/3);v.adjustLayout=function(z,B){var G=this,Q=z.domain,X=(Q.x[0]+Q.x[1])/2,j=(Q.y[0]+Q.y[1])/2,re=Q.x[1]-Q.x[0],ue=Q.y[1]-Q.y[0],K=re*B.w,te=ue*B.h,Y=z.sum,H=z.aaxis.min,ee=z.baxis.min,ne=z.caxis.min,Z,q,ie,se,ae,oe;K>k*te?(se=te,ie=se*k):(ie=K,se=ie/k),ae=re*ie/K,oe=ue*se/te,Z=B.l+B.w*X-ie/2,q=B.t+B.h*(1-j)-se/2,G.x0=Z,G.y0=q,G.w=ie,G.h=se,G.sum=Y,G.xaxis={type:"linear",range:[H+2*ne-Y,Y-H-2*ee],domain:[X-ae/2,X+ae/2],_id:"x"},t(G.xaxis,G.graphDiv._fullLayout),G.xaxis.setScale(),G.xaxis.isPtWithinRange=function(Ce){return Ce.a>=G.aaxis.range[0]&&Ce.a<=G.aaxis.range[1]&&Ce.b>=G.baxis.range[1]&&Ce.b<=G.baxis.range[0]&&Ce.c>=G.caxis.range[1]&&Ce.c<=G.caxis.range[0]},G.yaxis={type:"linear",range:[H,Y-ee-ne],domain:[j-oe/2,j+oe/2],_id:"y"},t(G.yaxis,G.graphDiv._fullLayout),G.yaxis.setScale(),G.yaxis.isPtWithinRange=function(){return!0};var be=G.yaxis.domain[0],ce=G.aaxis=h({},z.aaxis,{range:[H,Y-ee-ne],side:"left",tickangle:(+z.aaxis.tickangle||0)-30,domain:[be,be+oe*k],anchor:"free",position:0,_id:"y",_length:ie});t(ce,G.graphDiv._fullLayout),ce.setScale();var de=G.baxis=h({},z.baxis,{range:[Y-H-ne,ee],side:"bottom",domain:G.xaxis.domain,anchor:"free",position:0,_id:"x",_length:ie});t(de,G.graphDiv._fullLayout),de.setScale();var ye=G.caxis=h({},z.caxis,{range:[Y-H-ee,ne],side:"right",tickangle:(+z.caxis.tickangle||0)+30,domain:[be,be+oe*k],anchor:"free",position:0,_id:"y",_length:ie});t(ye,G.graphDiv._fullLayout),ye.setScale();var ge="M"+Z+","+(q+se)+"h"+ie+"l-"+ie/2+",-"+se+"Z";G.clipDef.select("path").attr("d",ge),G.layers.plotbg.select("path").attr("d",ge);var me="M0,"+se+"h"+ie+"l-"+ie/2+",-"+se+"Z";G.clipDefRelative.select("path").attr("d",me);var Se=e(Z,q);G.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",Se),G.clipDefRelative.select("path").attr("transform",null);var Le=e(Z-de._offset,q+se);G.layers.baxis.attr("transform",Le),G.layers.bgrid.attr("transform",Le);var Oe=e(Z+ie/2,q)+"rotate(30)"+e(0,-ce._offset);G.layers.aaxis.attr("transform",Oe),G.layers.agrid.attr("transform",Oe);var we=e(Z+ie/2,q)+"rotate(-30)"+e(0,-ye._offset);G.layers.caxis.attr("transform",we),G.layers.cgrid.attr("transform",we),G.drawAxes(!0),G.layers.aline.select("path").attr("d",ce.showline?"M"+Z+","+(q+se)+"l"+ie/2+",-"+se:"M0,0").call(n.stroke,ce.linecolor||"#000").style("stroke-width",(ce.linewidth||0)+"px"),G.layers.bline.select("path").attr("d",de.showline?"M"+Z+","+(q+se)+"h"+ie:"M0,0").call(n.stroke,de.linecolor||"#000").style("stroke-width",(de.linewidth||0)+"px"),G.layers.cline.select("path").attr("d",ye.showline?"M"+(Z+ie/2)+","+q+"l"+ie/2+","+se:"M0,0").call(n.stroke,ye.linecolor||"#000").style("stroke-width",(ye.linewidth||0)+"px"),G.graphDiv._context.staticPlot||G.initInteractions(),r.setClipUrl(G.layers.frontplot,G._hasClipOnAxisFalse?null:G.clipId,G.graphDiv)},v.drawAxes=function(z){var B=this,G=B.graphDiv,Q=B.id.substr(7)+"title",X=B.layers,j=B.aaxis,re=B.baxis,ue=B.caxis;if(B.drawAx(j),B.drawAx(re),B.drawAx(ue),z){var K=Math.max(j.showticklabels?j.tickfont.size/2:0,(ue.showticklabels?ue.tickfont.size*.75:0)+(ue.ticks==="outside"?ue.ticklen*.87:0)),te=(re.showticklabels?re.tickfont.size:0)+(re.ticks==="outside"?re.ticklen:0)+3;X["a-title"]=l.draw(G,"a"+Q,{propContainer:j,propName:B.id+".aaxis.title",placeholder:a(G,"Click to enter Component A title"),attributes:{x:B.x0+B.w/2,y:B.y0-j.title.font.size/3-K,"text-anchor":"middle"}}),X["b-title"]=l.draw(G,"b"+Q,{propContainer:re,propName:B.id+".baxis.title",placeholder:a(G,"Click to enter Component B title"),attributes:{x:B.x0-te,y:B.y0+B.h+re.title.font.size*.83+te,"text-anchor":"middle"}}),X["c-title"]=l.draw(G,"c"+Q,{propContainer:ue,propName:B.id+".caxis.title",placeholder:a(G,"Click to enter Component C title"),attributes:{x:B.x0+B.w+te,y:B.y0+B.h+ue.title.font.size*.83+te,"text-anchor":"middle"}})}},v.drawAx=function(z){var B=this,G=B.graphDiv,Q=z._name,X=Q.charAt(0),j=z._id,re=B.layers[Q],ue=30,K=X+"tickLayout",te=S(z);B[K]!==te&&(re.selectAll("."+j+"tick").remove(),B[K]=te),z.setScale();var Y=o.calcTicks(z),H=o.clipEnds(z,Y),ee=o.makeTransTickFn(z),ne=o.getTickSigns(z)[2],Z=T.deg2rad(ue),q=ne*(z.linewidth||1)/2,ie=ne*z.ticklen,se=B.w,ae=B.h,oe=X==="b"?"M0,"+q+"l"+Math.sin(Z)*ie+","+Math.cos(Z)*ie:"M"+q+",0l"+Math.cos(Z)*ie+","+-Math.sin(Z)*ie,be={a:"M0,0l"+ae+",-"+se/2,b:"M0,0l-"+se/2+",-"+ae,c:"M0,0l-"+ae+","+se/2}[X];o.drawTicks(G,z,{vals:z.ticks==="inside"?H:Y,layer:re,path:oe,transFn:ee,crisp:!1}),o.drawGrid(G,z,{vals:H,layer:B.layers[X+"grid"],path:be,transFn:ee,crisp:!1}),o.drawLabels(G,z,{vals:Y,layer:re,transFn:ee,labelFns:o.makeLabelFns(z,0,ue)})};function S(z){return z.ticks+String(z.ticklen)+String(z.showticklabels)}var E=g.MINZOOM/2+.87,C="m-0.87,.5h"+E+"v3h-"+(E+5.2)+"l"+(E/2+2.6)+",-"+(E*.87+4.5)+"l2.6,1.5l-"+E/2+","+E*.87+"Z",F="m0.87,.5h-"+E+"v3h"+(E+5.2)+"l-"+(E/2+2.6)+",-"+(E*.87+4.5)+"l-2.6,1.5l"+E/2+","+E*.87+"Z",I="m0,1l"+E/2+","+E*.87+"l2.6,-1.5l-"+(E/2+2.6)+",-"+(E*.87+4.5)+"l-"+(E/2+2.6)+","+(E*.87+4.5)+"l2.6,1.5l"+E/2+",-"+E*.87+"Z",D="m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2Z",R=!0;v.clearOutline=function(){_(this.dragOptions),A(this.dragOptions.gd)},v.initInteractions=function(){var z=this,B=z.layers.plotbg.select("path").node(),G=z.graphDiv,Q=G._fullLayout._zoomlayer,X,j;this.dragOptions={element:B,gd:G,plotinfo:{id:z.id,domain:G._fullLayout[z.id].domain,xaxis:z.xaxis,yaxis:z.yaxis},subplot:z.id,prepFn:function(Le,Oe,we){z.dragOptions.xaxes=[z.xaxis],z.dragOptions.yaxes=[z.yaxis],X=G._fullLayout._invScaleX,j=G._fullLayout._invScaleY;var Ce=z.dragOptions.dragmode=G._fullLayout.dragmode;c(Ce)?z.dragOptions.minDrag=1:z.dragOptions.minDrag=void 0,Ce==="zoom"?(z.dragOptions.moveFn=de,z.dragOptions.clickFn=se,z.dragOptions.doneFn=ye,ae(Le,Oe,we)):Ce==="pan"?(z.dragOptions.moveFn=me,z.dragOptions.clickFn=se,z.dragOptions.doneFn=Se,ge(),z.clearOutline(G)):(m(Ce)||c(Ce))&&x(Le,Oe,we,z.dragOptions,Ce)}};var re,ue,K,te,Y,H,ee,ne,Z,q;function ie(Le){var Oe={};return Oe[z.id+".aaxis.min"]=Le.a,Oe[z.id+".baxis.min"]=Le.b,Oe[z.id+".caxis.min"]=Le.c,Oe}function se(Le,Oe){var we=G._fullLayout.clickmode;O(G),Le===2&&(G.emit("plotly_doubleclick",null),M.call("_guiRelayout",G,ie({a:0,b:0,c:0}))),we.indexOf("select")>-1&&Le===1&&u(Oe,G,[z.xaxis],[z.yaxis],z.id,z.dragOptions),we.indexOf("event")>-1&&d.click(G,Oe,z.id)}function ae(Le,Oe,we){var Ce=B.getBoundingClientRect();re=Oe-Ce.left,ue=we-Ce.top,G._fullLayout._calcInverseTransform(G);var Ke=G._fullLayout._invTransform,Ye=T.apply3DTransform(Ke)(re,ue);re=Ye[0],ue=Ye[1],K={a:z.aaxis.range[0],b:z.baxis.range[1],c:z.caxis.range[1]},Y=K,te=z.aaxis.range[1]-K.a,H=f(z.graphDiv._fullLayout[z.id].bgcolor).getLuminance(),ee="M0,"+z.h+"L"+z.w/2+", 0L"+z.w+","+z.h+"Z",ne=!1,Z=Q.append("path").attr("class","zoombox").attr("transform",e(z.x0,z.y0)).style({fill:H>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",ee),q=Q.append("path").attr("class","zoombox-corners").attr("transform",e(z.x0,z.y0)).style({fill:n.background,stroke:n.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),z.clearOutline(G)}function oe(Le,Oe){return 1-Oe/z.h}function be(Le,Oe){return 1-(Le+(z.h-Oe)/Math.sqrt(3))/z.w}function ce(Le,Oe){return(Le-(z.h-Oe)/Math.sqrt(3))/z.w}function de(Le,Oe){var we=re+Le*X,Ce=ue+Oe*j,Ke=Math.max(0,Math.min(1,oe(re,ue),oe(we,Ce))),Ye=Math.max(0,Math.min(1,be(re,ue),be(we,Ce))),Fe=Math.max(0,Math.min(1,ce(re,ue),ce(we,Ce))),Re=(Ke/2+Fe)*z.w,je=(1-Ke/2-Ye)*z.w,xt=(Re+je)/2,Nt=je-Re,tr=(1-Ke)*z.h,Ht=tr-Nt/k;Nt<g.MINZOOM?(Y=K,Z.attr("d",ee),q.attr("d","M0,0Z")):(Y={a:K.a+Ke*te,b:K.b+Ye*te,c:K.c+Fe*te},Z.attr("d",ee+"M"+Re+","+tr+"H"+je+"L"+xt+","+Ht+"L"+Re+","+tr+"Z"),q.attr("d","M"+re+","+ue+D+"M"+Re+","+tr+C+"M"+je+","+tr+F+"M"+xt+","+Ht+I)),ne||(Z.transition().style("fill",H>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),q.transition().style("opacity",1).duration(200),ne=!0),G.emit("plotly_relayouting",ie(Y))}function ye(){O(G),Y!==K&&(M.call("_guiRelayout",G,ie(Y)),R&&G.data&&G._context.showTips&&(T.notifier(a(G,"Double-click to zoom back out"),"long"),R=!1))}function ge(){K={a:z.aaxis.range[0],b:z.baxis.range[1],c:z.caxis.range[1]},Y=K}function me(Le,Oe){var we=Le/z.xaxis._m,Ce=Oe/z.yaxis._m;Y={a:K.a-Ce,b:K.b+(we+Ce)/2,c:K.c-(we-Ce)/2};var Ke=[Y.a,Y.b,Y.c].sort(T.sorterAsc),Ye={a:Ke.indexOf(Y.a),b:Ke.indexOf(Y.b),c:Ke.indexOf(Y.c)};Ke[0]<0&&(Ke[1]+Ke[0]/2<0?(Ke[2]+=Ke[0]+Ke[1],Ke[0]=Ke[1]=0):(Ke[2]+=Ke[0]/2,Ke[1]+=Ke[0]/2,Ke[0]=0),Y={a:Ke[Ye.a],b:Ke[Ye.b],c:Ke[Ye.c]},Oe=(K.a-Y.a)*z.yaxis._m,Le=(K.c-Y.c-K.b+Y.b)*z.xaxis._m);var Fe=e(z.x0+Le,z.y0+Oe);z.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",Fe);var Re=e(-Le,-Oe);z.clipDefRelative.select("path").attr("transform",Re),z.aaxis.range=[Y.a,z.sum-Y.b-Y.c],z.baxis.range=[z.sum-Y.a-Y.c,Y.b],z.caxis.range=[z.sum-Y.a-Y.b,Y.c],z.drawAxes(!1),z._hasClipOnAxisFalse&&z.plotContainer.select(".scatterlayer").selectAll(".trace").call(r.hideOutsideRangePoints,z),G.emit("plotly_relayouting",ie(Y))}function Se(){M.call("_guiRelayout",G,ie(Y))}B.onmousemove=function(Le){d.hover(G,Le,z.id),G._fullLayout._lasthover=B,G._fullLayout._hoversubplot=z.id},B.onmouseout=function(Le){G._dragging||y.unhover(G,Le)},y.init(this.dragOptions)};function O(z){w.select(z).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}},{"../../components/color":367,"../../components/dragelement":386,"../../components/dragelement/helpers":385,"../../components/drawing":389,"../../components/fx":407,"../../components/selections":455,"../../components/titles":476,"../../lib":515,"../../lib/extend":505,"../../registry":647,"../cartesian/axes":566,"../cartesian/constants":573,"../cartesian/set_convert":585,"../plots":628,"@plotly/d3":58,tinycolor2:313}],647:[function(i,U,V){var w=i("./lib/loggers"),f=i("./lib/noop"),M=i("./lib/push_unique"),T=i("./lib/is_plain_object"),e=i("./lib/dom").addStyleRule,a=i("./lib/extend"),n=i("./plots/attributes"),r=i("./plots/layout_attributes"),t=a.extendFlat,h=a.extendDeepAll;V.modules={},V.allCategories={},V.allTypes=[],V.subplotsRegistry={},V.transformsRegistry={},V.componentsRegistry={},V.layoutArrayContainers=[],V.layoutArrayRegexes=[],V.traceLayoutAttributes={},V.localeRegistry={},V.apiMethodRegistry={},V.collectableSubplotTypes=null,V.register=function(_){if(V.collectableSubplotTypes=null,_)_&&!Array.isArray(_)&&(_=[_]);else throw new Error("No argument passed to Plotly.register.");for(var g=0;g<_.length;g++){var b=_[g];if(!b)throw new Error("Invalid module was attempted to be registered!");switch(b.moduleType){case"trace":s(b);break;case"transform":d(b);break;case"component":y(b);break;case"locale":p(b);break;case"apiMethod":var v=b.name;V.apiMethodRegistry[v]=b.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},V.getModule=function(A){var _=V.modules[u(A)];return _?_._module:!1},V.traceIs=function(A,_){if(A=u(A),A==="various")return!1;var g=V.modules[A];return g||(A&&w.log("Unrecognized trace type "+A+"."),g=V.modules[n.type.dflt]),!!g.categories[_]},V.getTransformIndices=function(A,_){for(var g=[],b=A.transforms||[],v=0;v<b.length;v++)b[v].type===_&&g.push(v);return g},V.hasTransform=function(A,_){for(var g=A.transforms||[],b=0;b<g.length;b++)if(g[b].type===_)return!0;return!1},V.getComponentMethod=function(A,_){var g=V.componentsRegistry[A];return g&&g[_]||f},V.call=function(){var A=arguments[0],_=[].slice.call(arguments,1);return V.apiMethodRegistry[A].apply(null,_)};function s(A){var _=A.name,g=A.categories,b=A.meta;if(V.modules[_]){w.log("Type "+_+" already registered");return}V.subplotsRegistry[A.basePlotModule.name]||o(A.basePlotModule);for(var v={},k=0;k<g.length;k++)v[g[k]]=!0,V.allCategories[g[k]]=!0;V.modules[_]={_module:A,categories:v},b&&Object.keys(b).length&&(V.modules[_].meta=b),V.allTypes.push(_);for(var S in V.componentsRegistry)m(S,_);A.layoutAttributes&&t(V.traceLayoutAttributes,A.layoutAttributes);var E=A.basePlotModule,C=E.name;if(C==="mapbox"){var F=E.constants.styleRules;for(var I in F)e(".js-plotly-plot .plotly .mapboxgl-"+I,F[I])}(C==="geo"||C==="mapbox")&&window.PlotlyGeoAssets===void 0&&(window.PlotlyGeoAssets={topojson:{}})}function o(A){var _=A.name;if(V.subplotsRegistry[_]){w.log("Plot type "+_+" already registered.");return}c(A),V.subplotsRegistry[_]=A;for(var g in V.componentsRegistry)x(g,A.name)}function y(A){if(typeof A.name!="string")throw new Error("Component module *name* must be a string.");var _=A.name;V.componentsRegistry[_]=A,A.layoutAttributes&&(A.layoutAttributes._isLinkedToArray&&M(V.layoutArrayContainers,_),c(A));for(var g in V.modules)m(_,g);for(var b in V.subplotsRegistry)x(_,b);for(var v in V.transformsRegistry)l(_,v);A.schema&&A.schema.layout&&h(r,A.schema.layout)}function d(A){if(typeof A.name!="string")throw new Error("Transform module *name* must be a string.");var _="Transform module "+A.name,g=typeof A.transform=="function",b=typeof A.calcTransform=="function";if(!g&&!b)throw new Error(_+" is missing a *transform* or *calcTransform* method.");g&&b&&w.log([_+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),T(A.attributes)||w.log(_+" registered without an *attributes* object."),typeof A.supplyDefaults!="function"&&w.log(_+" registered without a *supplyDefaults* method."),V.transformsRegistry[A.name]=A;for(var v in V.componentsRegistry)l(v,A.name)}function p(A){var _=A.name,g=_.split("-")[0],b=A.dictionary,v=A.format,k=b&&Object.keys(b).length,S=v&&Object.keys(v).length,E=V.localeRegistry,C=E[_];if(C||(E[_]=C={}),g!==_){var F=E[g];F||(E[g]=F={}),k&&F.dictionary===C.dictionary&&(F.dictionary=b),S&&F.format===C.format&&(F.format=v)}k&&(C.dictionary=b),S&&(C.format=v)}function c(A){if(A.layoutAttributes){var _=A.layoutAttributes._arrayAttrRegexps;if(_)for(var g=0;g<_.length;g++)M(V.layoutArrayRegexes,_[g])}}function m(A,_){var g=V.componentsRegistry[A].schema;if(!(!g||!g.traces)){var b=g.traces[_];b&&h(V.modules[_]._module.attributes,b)}}function l(A,_){var g=V.componentsRegistry[A].schema;if(!(!g||!g.transforms)){var b=g.transforms[_];b&&h(V.transformsRegistry[_].attributes,b)}}function x(A,_){var g=V.componentsRegistry[A].schema;if(!(!g||!g.subplots)){var b=V.subplotsRegistry[_],v=b.layoutAttributes,k=b.attr==="subplot"?b.name:b.attr;Array.isArray(k)&&(k=k[0]);var S=g.subplots[k];v&&S&&h(v,S)}}function u(A){return typeof A=="object"&&(A=A.type),A}},{"./lib/dom":503,"./lib/extend":505,"./lib/is_plain_object":516,"./lib/loggers":519,"./lib/noop":524,"./lib/push_unique":530,"./plots/attributes":562,"./plots/layout_attributes":619}],648:[function(i,U,V){var w=i("../registry"),f=i("../lib"),M=f.extendFlat,T=f.extendDeep;function e(n){var r;switch(n){case"themes__thumb":r={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":r={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:r={}}return r}function a(n){var r=["xaxis","yaxis","zaxis"];return r.indexOf(n.slice(0,5))>-1}U.exports=function(r,t){var h,s=r.data,o=r.layout,y=T([],s),d=T({},o,e(t.tileClass)),p=r._context||{};if(t.width&&(d.width=t.width),t.height&&(d.height=t.height),t.tileClass==="thumbnail"||t.tileClass==="themes__thumb"){d.annotations=[];var c=Object.keys(d);for(h=0;h<c.length;h++)a(c[h])&&(d[c[h]].title={text:""});for(h=0;h<y.length;h++){var m=y[h];m.showscale=!1,m.marker&&(m.marker.showscale=!1),w.traceIs(m,"pie-like")&&(m.textposition="none")}}if(Array.isArray(t.annotations))for(h=0;h<t.annotations.length;h++)d.annotations.push(t.annotations[h]);var l=Object.keys(d).filter(function(g){return g.match(/^scene\d*$/)});if(l.length){var x={};for(t.tileClass==="thumbnail"&&(x={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),h=0;h<l.length;h++){var u=d[l[h]];u.xaxis||(u.xaxis={}),u.yaxis||(u.yaxis={}),u.zaxis||(u.zaxis={}),M(u.xaxis,x),M(u.yaxis,x),M(u.zaxis,x),u._scene=null}}var A=document.createElement("div");t.tileClass&&(A.className=t.tileClass);var _={gd:A,td:A,layout:d,data:y,config:{staticPlot:t.staticPlot===void 0?!0:t.staticPlot,plotGlPixelRatio:t.plotGlPixelRatio===void 0?2:t.plotGlPixelRatio,displaylogo:t.displaylogo||!1,showLink:t.showLink||!1,showTips:t.showTips||!1,mapboxAccessToken:p.mapboxAccessToken}};return t.setBackground!=="transparent"&&(_.config.setBackground=t.setBackground||"opaque"),_.gd.defaultLayout=e(t.tileClass),_}},{"../lib":515,"../registry":647}],649:[function(i,U,V){var w=i("../lib"),f=i("../plot_api/to_image"),M=i("./filesaver"),T=i("./helpers");function e(a,n){var r;return w.isPlainObject(a)||(r=w.getGraphDiv(a)),n=n||{},n.format=n.format||"png",n.width=n.width||null,n.height=n.height||null,n.imageDataOnly=!0,new Promise(function(t,h){r&&r._snapshotInProgress&&h(new Error("Snapshotting already in progress.")),w.isIE()&&n.format!=="svg"&&h(new Error(T.MSG_IE_BAD_FORMAT)),r&&(r._snapshotInProgress=!0);var s=f(a,n),o=n.filename||a.fn||"newplot";o+="."+n.format.replace("-","."),s.then(function(y){return r&&(r._snapshotInProgress=!1),M(y,o,n.format)}).then(function(y){t(y)}).catch(function(y){r&&(r._snapshotInProgress=!1),h(y)})})}U.exports=e},{"../lib":515,"../plot_api/to_image":558,"./filesaver":650,"./helpers":651}],650:[function(i,U,V){var w=i("../lib"),f=i("./helpers");function M(T,e,a){var n=document.createElement("a"),r="download"in n,t=new Promise(function(h,s){var o,y;if(w.isIE())return o=f.createBlob(T,"svg"),window.navigator.msSaveBlob(o,e),o=null,h(e);if(r)return o=f.createBlob(T,a),y=f.createObjectURL(o),n.href=y,n.download=e,document.body.appendChild(n),n.click(),document.body.removeChild(n),f.revokeObjectURL(y),o=null,h(e);if(w.isSafari()){var d=a==="svg"?",":";base64,";return f.octetStream(d+encodeURIComponent(T)),h(e)}s(new Error("download error"))});return t}U.exports=M},{"../lib":515,"./helpers":651}],651:[function(i,U,V){var w=i("../registry");V.getDelay=function(T){return T._has&&(T._has("gl3d")||T._has("gl2d")||T._has("mapbox"))?500:0},V.getRedrawFunc=function(T){return function(){w.getComponentMethod("colorbar","draw")(T)}},V.encodeSVG=function(T){return"data:image/svg+xml,"+encodeURIComponent(T)},V.encodeJSON=function(T){return"data:application/json,"+encodeURIComponent(T)};var f=window.URL||window.webkitURL;V.createObjectURL=function(T){return f.createObjectURL(T)},V.revokeObjectURL=function(T){return f.revokeObjectURL(T)},V.createBlob=function(T,e){if(e==="svg")return new window.Blob([T],{type:"image/svg+xml;charset=utf-8"});if(e==="full-json")return new window.Blob([T],{type:"application/json;charset=utf-8"});var a=M(window.atob(T));return new window.Blob([a],{type:"image/"+e})},V.octetStream=function(T){document.location.href="data:application/octet-stream"+T};function M(T){for(var e=T.length,a=new ArrayBuffer(e),n=new Uint8Array(a),r=0;r<e;r++)n[r]=T.charCodeAt(r);return a}V.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,V.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},{"../registry":647}],652:[function(i,U,V){var w=i("./helpers"),f={getDelay:w.getDelay,getRedrawFunc:w.getRedrawFunc,clone:i("./cloneplot"),toSVG:i("./tosvg"),svgToImg:i("./svgtoimg"),toImage:i("./toimage"),downloadImage:i("./download")};U.exports=f},{"./cloneplot":648,"./download":649,"./helpers":651,"./svgtoimg":653,"./toimage":654,"./tosvg":655}],653:[function(i,U,V){var w=i("../lib"),f=i("events").EventEmitter,M=i("./helpers");function T(e){var a=e.emitter||new f,n=new Promise(function(r,t){var h=window.Image,s=e.svg,o=e.format||"png";if(w.isIE()&&o!=="svg"){var y=new Error(M.MSG_IE_BAD_FORMAT);return t(y),e.promise?n:a.emit("error",y)}var d=e.canvas,p=e.scale||1,c=e.width||300,m=e.height||150,l=p*c,x=p*m,u=d.getContext("2d",{willReadFrequently:!0}),A=new h,_,g;o==="svg"||w.isSafari()?g=M.encodeSVG(s):(_=M.createBlob(s,"svg"),g=M.createObjectURL(_)),d.width=l,d.height=x,A.onload=function(){var b;switch(_=null,M.revokeObjectURL(g),o!=="svg"&&u.drawImage(A,0,0,l,x),o){case"jpeg":b=d.toDataURL("image/jpeg");break;case"png":b=d.toDataURL("image/png");break;case"webp":b=d.toDataURL("image/webp");break;case"svg":b=g;break;default:var v="Image format is not jpeg, png, svg or webp.";if(t(new Error(v)),!e.promise)return a.emit("error",v)}r(b),e.promise||a.emit("success",b)},A.onerror=function(b){if(_=null,M.revokeObjectURL(g),t(b),!e.promise)return a.emit("error",b)},A.src=g});return e.promise?n:a}U.exports=T},{"../lib":515,"./helpers":651,events:84}],654:[function(i,U,V){var w=i("events").EventEmitter,f=i("../registry"),M=i("../lib"),T=i("./helpers"),e=i("./cloneplot"),a=i("./tosvg"),n=i("./svgtoimg");function r(t,h){var s=new w,o=e(t,{format:"png"}),y=o.gd;y.style.position="absolute",y.style.left="-5000px",document.body.appendChild(y);function d(){var c=T.getDelay(y._fullLayout);setTimeout(function(){var m=a(y),l=document.createElement("canvas");l.id=M.randstr(),s=n({format:h.format,width:y._fullLayout.width,height:y._fullLayout.height,canvas:l,emitter:s,svg:m}),s.clean=function(){y&&document.body.removeChild(y)}},c)}var p=T.getRedrawFunc(y);return f.call("_doPlot",y,o.data,o.layout,o.config).then(p).then(d).catch(function(c){s.emit("error",c)}),s}U.exports=r},{"../lib":515,"../registry":647,"./cloneplot":648,"./helpers":651,"./svgtoimg":653,"./tosvg":655,events:84}],655:[function(i,U,V){var w=i("@plotly/d3"),f=i("../lib"),M=i("../components/drawing"),T=i("../components/color"),e=i("../constants/xmlns_namespaces"),a=/"/g,n="TOBESTRIPPED",r=new RegExp('("'+n+")|("+n+'")',"g");function t(s){var o=w.select("body").append("div").style({display:"none"}).html(""),y=s.replace(/(&[^;]*;)/gi,function(d){return d==="&lt;"?"&#60;":d==="&rt;"?"&#62;":d.indexOf("<")!==-1||d.indexOf(">")!==-1?"":o.html(d).text()});return o.remove(),y}function h(s){return s.replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")}U.exports=function(o,y,d){var p=o._fullLayout,c=p._paper,m=p._toppaper,l=p.width,x=p.height,u;c.insert("rect",":first-child").call(M.setRect,0,0,l,x).call(T.fill,p.paper_bgcolor);var A=p._basePlotModules||[];for(u=0;u<A.length;u++){var _=A[u];_.toSVG&&_.toSVG(o)}if(m){var g=m.node().childNodes,b=Array.prototype.slice.call(g);for(u=0;u<b.length;u++){var v=b[u];v.childNodes.length&&c.node().appendChild(v)}}p._draggers&&p._draggers.remove(),c.node().style.background="",c.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var S=w.select(this);if(this.style.visibility==="hidden"||this.style.display==="none"){S.remove();return}else S.style({visibility:null,display:null});var E=this.style.fontFamily;E&&E.indexOf('"')!==-1&&S.style("font-family",E.replace(a,n))}),c.selectAll(".gradient_filled,.pattern_filled").each(function(){var S=w.select(this),E=this.style.fill;E&&E.indexOf("url(")!==-1&&S.style("fill",E.replace(a,n));var C=this.style.stroke;C&&C.indexOf("url(")!==-1&&S.style("stroke",C.replace(a,n))}),(y==="pdf"||y==="eps")&&c.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),c.node().setAttributeNS(e.xmlns,"xmlns",e.svg),c.node().setAttributeNS(e.xmlns,"xmlns:xlink",e.xlink),y==="svg"&&d&&(c.attr("width",d*l),c.attr("height",d*x),c.attr("viewBox","0 0 "+l+" "+x));var k=new window.XMLSerializer().serializeToString(c.node());return k=t(k),k=h(k),k=k.replace(r,"'"),f.isIE()&&(k=k.replace(/"/gi,"'"),k=k.replace(/(\('#)([^']*)('\))/gi,'("#$2")'),k=k.replace(/(\\')/gi,'"')),k}},{"../components/color":367,"../components/drawing":389,"../constants/xmlns_namespaces":492,"../lib":515,"@plotly/d3":58}],656:[function(i,U,V){var w=i("../../lib");U.exports=function(M,T){for(var e=0;e<M.length;e++)M[e].i=e;w.mergeArray(T.text,M,"tx"),w.mergeArray(T.hovertext,M,"htx");var a=T.marker;if(a){w.mergeArray(a.opacity,M,"mo",!0),w.mergeArray(a.color,M,"mc");var n=a.line;n&&(w.mergeArray(n.color,M,"mlc"),w.mergeArrayCastPositive(n.width,M,"mlw"))}}},{"../../lib":515}],657:[function(i,U,V){var w=i("../scatter/attributes"),f=i("../../plots/cartesian/axis_format_attributes").axisHoverFormat,M=i("../../plots/template_attributes").hovertemplateAttrs,T=i("../../plots/template_attributes").texttemplateAttrs,e=i("../../components/colorscale/attributes"),a=i("../../plots/font_attributes"),n=i("./constants"),r=i("../../components/drawing/attributes").pattern,t=i("../../lib/extend").extendFlat,h=a({editType:"calc",arrayOk:!0,colorEditType:"style"}),s=w.marker,o=s.line,y=t({},o.width,{dflt:0}),d=t({width:y,editType:"calc"},e("marker.line")),p=t({line:d,editType:"calc"},e("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:r});U.exports={x:w.x,x0:w.x0,dx:w.dx,y:w.y,y0:w.y0,dy:w.dy,xperiod:w.xperiod,yperiod:w.yperiod,xperiod0:w.xperiod0,yperiod0:w.yperiod0,xperiodalignment:w.xperiodalignment,yperiodalignment:w.yperiodalignment,xhoverformat:f("x"),yhoverformat:f("y"),text:w.text,texttemplate:T({editType:"plot"},{keys:n.eventDataKeys}),hovertext:w.hovertext,hovertemplate:M({},{keys:n.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:t({},h,{}),insidetextfont:t({},h,{}),outsidetextfont:t({},h,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:t({},w.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:p,offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},selected:{marker:{opacity:w.selected.marker.opacity,color:w.selected.marker.color,editType:"style"},textfont:w.selected.textfont,editType:"style"},unselected:{marker:{opacity:w.unselected.marker.opacity,color:w.unselected.marker.color,editType:"style"},textfont:w.unselected.textfont,editType:"style"},_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},{"../../components/colorscale/attributes":374,"../../components/drawing/attributes":388,"../../lib/extend":505,"../../plots/cartesian/axis_format_attributes":569,"../../plots/font_attributes":594,"../../plots/template_attributes":642,"../scatter/attributes":936,"./constants":659}],658:[function(i,U,V){var w=i("../../plots/cartesian/axes"),f=i("../../plots/cartesian/align_period"),M=i("../../components/colorscale/helpers").hasColorscale,T=i("../../components/colorscale/calc"),e=i("./arrays_to_calcdata"),a=i("../scatter/calc_selection");U.exports=function(r,t){var h=w.getFromId(r,t.xaxis||"x"),s=w.getFromId(r,t.yaxis||"y"),o,y,d,p,c,m,l={msUTC:!!(t.base||t.base===0)};t.orientation==="h"?(o=h.makeCalcdata(t,"x",l),d=s.makeCalcdata(t,"y"),p=f(t,s,"y",d),c=!!t.yperiodalignment,m="y"):(o=s.makeCalcdata(t,"y",l),d=h.makeCalcdata(t,"x"),p=f(t,h,"x",d),c=!!t.xperiodalignment,m="x"),y=p.vals;for(var x=Math.min(y.length,o.length),u=new Array(x),A=0;A<x;A++)u[A]={p:y[A],s:o[A]},c&&(u[A].orig_p=d[A],u[A][m+"End"]=p.ends[A],u[A][m+"Start"]=p.starts[A]),t.ids&&(u[A].id=String(t.ids[A]));return M(t,"marker")&&T(r,t,{vals:t.marker.color,containerStr:"marker",cLetter:"c"}),M(t,"marker.line")&&T(r,t,{vals:t.marker.line.color,containerStr:"marker.line",cLetter:"c"}),e(u,t),a(u,t),u}},{"../../components/colorscale/calc":375,"../../components/colorscale/helpers":378,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566,"../scatter/calc_selection":938,"./arrays_to_calcdata":656}],659:[function(i,U,V){U.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},{}],660:[function(i,U,V){var w=i("fast-isnumeric"),f=i("../../lib").isArrayOrTypedArray,M=i("../../constants/numerical").BADNUM,T=i("../../registry"),e=i("../../plots/cartesian/axes"),a=i("../../plots/cartesian/constraints").getAxisGroup,n=i("./sieve.js");function r(k,S){for(var E=S.xaxis,C=S.yaxis,F=k._fullLayout,I=k._fullData,D=k.calcdata,R=[],O=[],z=0;z<I.length;z++){var B=I[z];if(B.visible===!0&&T.traceIs(B,"bar")&&B.xaxis===E._id&&B.yaxis===C._id&&(B.orientation==="h"?R.push(D[z]):O.push(D[z]),B._computePh))for(var G=k.calcdata[z],Q=0;Q<G.length;Q++)typeof G[Q].ph0=="function"&&(G[Q].ph0=G[Q].ph0()),typeof G[Q].ph1=="function"&&(G[Q].ph1=G[Q].ph1())}var X={xCat:E.type==="category"||E.type==="multicategory",yCat:C.type==="category"||C.type==="multicategory",mode:F.barmode,norm:F.barnorm,gap:F.bargap,groupgap:F.bargroupgap};t(k,E,C,O,X),t(k,C,E,R,X)}function t(k,S,E,C,F){if(!!C.length){var I,D,R,O,z;switch(h(E,C),F.mode){case"overlay":s(S,E,C,F);break;case"group":for(I=[],D=[],R=0;R<C.length;R++)O=C[R],z=O[0].trace,z.offset===void 0?D.push(O):I.push(O);D.length&&o(k,S,E,D,F),I.length&&s(S,E,I,F);break;case"stack":case"relative":for(I=[],D=[],R=0;R<C.length;R++)O=C[R],z=O[0].trace,z.base===void 0?D.push(O):I.push(O);D.length&&y(k,S,E,D,F),I.length&&s(S,E,I,F);break}b(C,S)}}function h(k,S){var E,C;for(E=0;E<S.length;E++){var F=S[E],I=F[0].trace,D=I.type==="funnel"?I._base:I.base,R,O=I.orientation==="h"?I.xcalendar:I.ycalendar,z=k.type==="category"||k.type==="multicategory"?function(){return null}:k.d2c;if(f(D)){for(C=0;C<Math.min(D.length,F.length);C++)R=z(D[C],0,O),w(R)?(F[C].b=+R,F[C].hasB=1):F[C].b=0;for(;C<F.length;C++)F[C].b=0}else{R=z(D,0,O);var B=w(R);for(R=B?R:0,C=0;C<F.length;C++)F[C].b=R,B&&(F[C].hasB=1)}}}function s(k,S,E,C){for(var F=0;F<E.length;F++){var I=E[F],D=new n([I],{posAxis:k,sepNegVal:!1,overlapNoMerge:!C.norm});d(k,D,C),C.norm?(A(D),g(S,D,C)):x(S,D)}}function o(k,S,E,C,F){var I=new n(C,{posAxis:S,sepNegVal:!1,overlapNoMerge:!F.norm});p(k,S,I,F),_(I,S),F.norm?(A(I),g(E,I,F)):x(E,I)}function y(k,S,E,C,F){var I=new n(C,{posAxis:S,sepNegVal:F.mode==="relative",overlapNoMerge:!(F.norm||F.mode==="stack"||F.mode==="relative")});d(S,I,F),u(E,I,F);for(var D=0;D<C.length;D++)for(var R=C[D],O=0;O<R.length;O++){var z=R[O];if(z.s!==M){var B=z.b+z.s===I.get(z.p,z.s);B&&(z._outmost=!0)}}F.norm&&g(E,I,F)}function d(k,S,E){for(var C=S.minDiff,F=S.traces,I=C*(1-E.gap),D=I,R=D*(1-(E.groupgap||0)),O=-R/2,z=0;z<F.length;z++){var B=F[z],G=B[0].t;G.barwidth=R,G.poffset=O,G.bargroupwidth=I,G.bardelta=C}S.binWidth=F[0][0].t.barwidth/100,c(S),m(k,S),l(k,S)}function p(k,S,E,C){for(var F=k._fullLayout,I=E.positions,D=E.distinctPositions,R=E.minDiff,O=E.traces,z=O.length,B=I.length!==D.length,G=R*(1-C.gap),Q=a(F,S._id)+O[0][0].trace.orientation,X=F._alignmentOpts[Q]||{},j=0;j<z;j++){var re=O[j],ue=re[0].trace,K=X[ue.alignmentgroup]||{},te=Object.keys(K.offsetGroups||{}).length,Y;te?Y=G/te:Y=B?G/z:G;var H=Y*(1-(C.groupgap||0)),ee;te?ee=((2*ue._offsetIndex+1-te)*Y-H)/2:ee=B?((2*j+1-z)*Y-H)/2:-H/2;var ne=re[0].t;ne.barwidth=H,ne.poffset=ee,ne.bargroupwidth=G,ne.bardelta=R}E.binWidth=O[0][0].t.barwidth/100,c(E),m(S,E),l(S,E,B)}function c(k){var S=k.traces,E,C;for(E=0;E<S.length;E++){var F=S[E],I=F[0],D=I.trace,R=I.t,O=D._offset||D.offset,z=R.poffset,B;if(f(O)){for(B=Array.prototype.slice.call(O,0,F.length),C=0;C<B.length;C++)w(B[C])||(B[C]=z);for(C=B.length;C<F.length;C++)B.push(z);R.poffset=B}else O!==void 0&&(R.poffset=O);var G=D._width||D.width,Q=R.barwidth;if(f(G)){var X=Array.prototype.slice.call(G,0,F.length);for(C=0;C<X.length;C++)w(X[C])||(X[C]=Q);for(C=X.length;C<F.length;C++)X.push(Q);if(R.barwidth=X,O===void 0){for(B=[],C=0;C<F.length;C++)B.push(z+(Q-X[C])/2);R.poffset=B}}else G!==void 0&&(R.barwidth=G,O===void 0&&(R.poffset=z+(Q-G)/2))}}function m(k,S){for(var E=S.traces,C=v(k),F=0;F<E.length;F++)for(var I=E[F],D=I[0].t,R=D.poffset,O=Array.isArray(R),z=D.barwidth,B=Array.isArray(z),G=0;G<I.length;G++){var Q=I[G],X=Q.w=B?z[G]:z;Q[C]=Q.p+(O?R[G]:R)+X/2}}function l(k,S,E){var C=S.traces,F=S.minDiff,I=F/2;e.minDtick(k,S.minDiff,S.distinctPositions[0],E);for(var D=0;D<C.length;D++){var R=C[D],O=R[0],z=O.trace,B=[],G,Q,X,j;for(j=0;j<R.length;j++)G=R[j],Q=G.p-I,X=G.p+I,B.push(Q,X);if(z.width||z.offset){var re=O.t,ue=re.poffset,K=re.barwidth,te=Array.isArray(ue),Y=Array.isArray(K);for(j=0;j<R.length;j++){G=R[j];var H=te?ue[j]:ue,ee=Y?K[j]:K;Q=G.p+H,X=Q+ee,B.push(Q,X)}}z._extremes[k._id]=e.findExtremes(k,B,{padded:!1})}}function x(k,S){for(var E=S.traces,C=v(k),F=0;F<E.length;F++){for(var I=E[F],D=I[0].trace,R=[],O=!1,z=0;z<I.length;z++){var B=I[z],G=B.b,Q=G+B.s;B[C]=Q,R.push(Q),B.hasB&&R.push(G),(!B.hasB||!B.b)&&(O=!0)}D._extremes[k._id]=e.findExtremes(k,R,{tozero:O,padded:!0})}}function u(k,S,E){var C=v(k),F=S.traces,I,D,R,O,z,B;for(O=0;O<F.length;O++)if(I=F[O],D=I[0].trace,D.type==="funnel")for(z=0;z<I.length;z++)B=I[z],B.s!==M&&S.put(B.p,-.5*B.s);for(O=0;O<F.length;O++){I=F[O],D=I[0].trace,R=D.type==="funnel";var G=[];for(z=0;z<I.length;z++)if(B=I[z],B.s!==M){var Q;R?Q=B.s:Q=B.s+B.b;var X=S.put(B.p,Q),j=X+Q;B.b=X,B[C]=j,E.norm||(G.push(j),B.hasB&&G.push(X))}E.norm||(D._extremes[k._id]=e.findExtremes(k,G,{tozero:!0,padded:!0}))}}function A(k){for(var S=k.traces,E=0;E<S.length;E++)for(var C=S[E],F=0;F<C.length;F++){var I=C[F];I.s!==M&&k.put(I.p,I.b+I.s)}}function _(k,S){for(var E=k.traces,C=0;C<E.length;C++){var F=E[C],I=F[0].trace;if(I.base===void 0)for(var D=new n([F],{posAxis:S,sepNegVal:!0,overlapNoMerge:!0}),R=0;R<F.length;R++){var O=F[R];if(O.p!==M){var z=D.put(O.p,O.b+O.s);z&&(O.b=z)}}}}function g(k,S,E){var C=S.traces,F=v(k),I=E.norm==="fraction"?1:100,D=I/1e9,R=k.l2c(k.c2l(0)),O=E.mode==="stack"?I:R;function z(ee){return w(k.c2l(ee))&&(ee<R-D||ee>O+D||!w(R))}for(var B=0;B<C.length;B++){for(var G=C[B],Q=G[0].trace,X=[],j=!1,re=!1,ue=0;ue<G.length;ue++){var K=G[ue];if(K.s!==M){var te=Math.abs(I/S.get(K.p,K.s));K.b*=te,K.s*=te;var Y=K.b,H=Y+K.s;K[F]=H,X.push(H),re=re||z(H),K.hasB&&(X.push(Y),re=re||z(Y)),(!K.hasB||!K.b)&&(j=!0)}}Q._extremes[k._id]=e.findExtremes(k,X,{tozero:j,padded:re})}}function b(k,S){var E=v(S),C={},F,I,D,R=1/0,O=-1/0;for(F=0;F<k.length;F++)for(D=k[F],I=0;I<D.length;I++){var z=D[I].p;w(z)&&(R=Math.min(R,z),O=Math.max(O,z))}var B=1e4/(O-R),G=C.round=function(te){return String(Math.round(B*(te-R)))};for(F=0;F<k.length;F++){D=k[F],D[0].t.extents=C;var Q=D[0].t.poffset,X=Array.isArray(Q);for(I=0;I<D.length;I++){var j=D[I],re=j[E]-j.w/2;if(w(re)){var ue=j[E]+j.w/2,K=G(j.p);C[K]?C[K]=[Math.min(re,C[K][0]),Math.max(ue,C[K][1])]:C[K]=[re,ue]}j.p0=j.p+(X?Q[I]:Q),j.p1=j.p0+j.w,j.s0=j.b,j.s1=j.s0+j.s}}}function v(k){return k._id.charAt(0)}U.exports={crossTraceCalc:r,setGroupPositions:t}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/axes":566,"../../plots/cartesian/constraints":574,"../../registry":647,"./sieve.js":670,"fast-isnumeric":190}],661:[function(i,U,V){var w=i("../../lib"),f=i("../../components/color"),M=i("../../registry"),T=i("../scatter/xy_defaults"),e=i("../scatter/period_defaults"),a=i("./style_defaults"),n=i("../../plots/cartesian/constraints").getAxisGroup,r=i("./attributes"),t=w.coerceFont;function h(d,p,c,m){function l(g,b){return w.coerce(d,p,r,g,b)}var x=T(d,p,m,l);if(!x){p.visible=!1;return}e(d,p,m,l),l("xhoverformat"),l("yhoverformat"),l("orientation",p.x&&!p.y?"h":"v"),l("base"),l("offset"),l("width"),l("text"),l("hovertext"),l("hovertemplate");var u=l("textposition");y(d,p,m,l,u,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),a(d,p,l,c,m);var A=(p.marker.line||{}).color,_=M.getComponentMethod("errorbars","supplyDefaults");_(d,p,A||f.defaultLine,{axis:"y"}),_(d,p,A||f.defaultLine,{axis:"x",inherit:"y"}),w.coerceSelectionMarkerOpacity(p,l)}function s(d,p,c,m){var l=p.orientation,x=p[{v:"x",h:"y"}[l]+"axis"],u=n(c,x)+l,A=c._alignmentOpts||{},_=m("alignmentgroup"),g=A[u];g||(g=A[u]={});var b=g[_];b?b.traces.push(p):b=g[_]={traces:[p],alignmentIndex:Object.keys(g).length,offsetGroups:{}};var v=m("offsetgroup"),k=b.offsetGroups,S=k[v];v&&(S||(S=k[v]={offsetIndex:Object.keys(k).length}),p._offsetIndex=S.offsetIndex)}function o(d,p){var c,m;function l(u){return w.coerce(m._input,m,r,u)}if(p.barmode==="group")for(var x=0;x<d.length;x++)m=d[x],m.type==="bar"&&(c=m._input,s(c,m,p,l))}function y(d,p,c,m,l,x){x=x||{};var u=x.moduleHasSelected!==!1,A=x.moduleHasUnselected!==!1,_=x.moduleHasConstrain!==!1,g=x.moduleHasCliponaxis!==!1,b=x.moduleHasTextangle!==!1,v=x.moduleHasInsideanchor!==!1,k=!!x.hasPathbar,S=Array.isArray(l)||l==="auto",E=S||l==="inside",C=S||l==="outside";if(E||C){var F=t(m,"textfont",c.font),I=w.extendFlat({},F),D=d.textfont&&d.textfont.color,R=!D;if(R&&delete I.color,t(m,"insidetextfont",I),k){var O=w.extendFlat({},F);R&&delete O.color,t(m,"pathbar.textfont",O)}C&&t(m,"outsidetextfont",F),u&&m("selected.textfont.color"),A&&m("unselected.textfont.color"),_&&m("constraintext"),g&&m("cliponaxis"),b&&m("textangle"),m("texttemplate")}E&&v&&m("insidetextanchor")}U.exports={supplyDefaults:h,crossTraceDefaults:o,handleGroupingDefaults:s,handleText:y}},{"../../components/color":367,"../../lib":515,"../../plots/cartesian/constraints":574,"../../registry":647,"../scatter/period_defaults":956,"../scatter/xy_defaults":963,"./attributes":657,"./style_defaults":672}],662:[function(i,U,V){U.exports=function(f,M,T){return f.x="xVal"in M?M.xVal:M.x,f.y="yVal"in M?M.yVal:M.y,M.xa&&(f.xaxis=M.xa),M.ya&&(f.yaxis=M.ya),T.orientation==="h"?(f.label=f.y,f.value=f.x):(f.label=f.x,f.value=f.y),f}},{}],663:[function(i,U,V){var w=i("fast-isnumeric"),f=i("tinycolor2"),M=i("../../lib").isArrayOrTypedArray;V.coerceString=function(T,e,a){if(typeof e=="string"){if(e||!T.noBlank)return e}else if((typeof e=="number"||e===!0)&&!T.strict)return String(e);return a!==void 0?a:T.dflt},V.coerceNumber=function(T,e,a){if(w(e)){e=+e;var n=T.min,r=T.max,t=n!==void 0&&e<n||r!==void 0&&e>r;if(!t)return e}return a!==void 0?a:T.dflt},V.coerceColor=function(T,e,a){return f(e).isValid()?e:a!==void 0?a:T.dflt},V.coerceEnumerated=function(T,e,a){return T.coerceNumber&&(e=+e),T.values.indexOf(e)!==-1?e:a!==void 0?a:T.dflt},V.getValue=function(T,e){var a;return Array.isArray(T)?e<T.length&&(a=T[e]):a=T,a},V.getLineWidth=function(T,e){var a=0<e.mlw?e.mlw:M(T.marker.line.width)?0:T.marker.line.width;return a}},{"../../lib":515,"fast-isnumeric":190,tinycolor2:313}],664:[function(i,U,V){var w=i("../../components/fx"),f=i("../../registry"),M=i("../../components/color"),T=i("../../lib").fillText,e=i("./helpers").getLineWidth,a=i("../../plots/cartesian/axes").hoverLabelText,n=i("../../constants/numerical").BADNUM;function r(s,o,y,d,p){var c=t(s,o,y,d,p);if(c){var m=c.cd,l=m[0].trace,x=m[c.index];return c.color=h(l,x),f.getComponentMethod("errorbars","hoverInfo")(x,l,c),[c]}}function t(s,o,y,d,p){var c=s.cd,m=c[0].trace,l=c[0].t,x=d==="closest",u=m.type==="waterfall",A=s.maxHoverDistance,_=s.maxSpikeDistance,g,b,v,k,S,E,C;m.orientation==="h"?(g=y,b=o,v="y",k="x",S=ue,E=X):(g=o,b=y,v="x",k="y",E=ue,S=X);var F=m[v+"period"],I=x||F;function D(ae){return O(ae,-1)}function R(ae){return O(ae,1)}function O(ae,oe){var be=ae.w;return ae[v]+oe*be/2}function z(ae){return ae[v+"End"]-ae[v+"Start"]}var B=x?D:F?function(ae){return ae.p-z(ae)/2}:function(ae){return Math.min(D(ae),ae.p-l.bardelta/2)},G=x?R:F?function(ae){return ae.p+z(ae)/2}:function(ae){return Math.max(R(ae),ae.p+l.bardelta/2)};function Q(ae,oe,be){return p.finiteRange&&(be=0),w.inbox(ae-g,oe-g,be+Math.min(1,Math.abs(oe-ae)/C)-1)}function X(ae){return Q(B(ae),G(ae),A)}function j(ae){return Q(D(ae),R(ae),_)}function re(ae){var oe=ae[k];if(u){var be=Math.abs(ae.rawS)||0;b>0?oe+=be:b<0&&(oe-=be)}return oe}function ue(ae){var oe=b,be=ae.b,ce=re(ae);return w.inbox(be-oe,ce-oe,A+(ce-oe)/(ce-be)-1)}function K(ae){var oe=b,be=ae.b,ce=re(ae);return w.inbox(be-oe,ce-oe,_+(ce-oe)/(ce-be)-1)}var te=s[v+"a"],Y=s[k+"a"];C=Math.abs(te.r2c(te.range[1])-te.r2c(te.range[0]));function H(ae){return(S(ae)+E(ae))/2}var ee=w.getDistanceFunction(d,S,E,H);if(w.getClosest(c,ee,s),s.index!==!1&&c[s.index].p!==n){I||(B=function(ae){return Math.min(D(ae),ae.p-l.bargroupwidth/2)},G=function(ae){return Math.max(R(ae),ae.p+l.bargroupwidth/2)});var ne=s.index,Z=c[ne],q=m.base?Z.b+Z.s:Z.s;s[k+"0"]=s[k+"1"]=Y.c2p(Z[k],!0),s[k+"LabelVal"]=q;var ie=l.extents[l.extents.round(Z.p)];s[v+"0"]=te.c2p(x?B(Z):ie[0],!0),s[v+"1"]=te.c2p(x?G(Z):ie[1],!0);var se=Z.orig_p!==void 0;return s[v+"LabelVal"]=se?Z.orig_p:Z.p,s.labelLabel=a(te,s[v+"LabelVal"],m[v+"hoverformat"]),s.valueLabel=a(Y,s[k+"LabelVal"],m[k+"hoverformat"]),s.baseLabel=a(Y,Z.b,m[k+"hoverformat"]),s.spikeDistance=(K(Z)+j(Z))/2,s[v+"Spike"]=te.c2p(Z.p,!0),T(Z,m,s),s.hovertemplate=m.hovertemplate,s}}function h(s,o){var y=o.mcc||s.marker.color,d=o.mlcc||s.marker.line.color,p=e(s,o);if(M.opacity(y))return y;if(M.opacity(d)&&p)return d}U.exports={hoverPoints:r,hoverOnBars:t,getTraceColor:h}},{"../../components/color":367,"../../components/fx":407,"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/axes":566,"../../registry":647,"./helpers":663}],665:[function(i,U,V){U.exports={attributes:i("./attributes"),layoutAttributes:i("./layout_attributes"),supplyDefaults:i("./defaults").supplyDefaults,crossTraceDefaults:i("./defaults").crossTraceDefaults,supplyLayoutDefaults:i("./layout_defaults"),calc:i("./calc"),crossTraceCalc:i("./cross_trace_calc").crossTraceCalc,colorbar:i("../scatter/marker_colorbar"),arraysToCalcdata:i("./arrays_to_calcdata"),plot:i("./plot").plot,style:i("./style").style,styleOnSelect:i("./style").styleOnSelect,hoverPoints:i("./hover").hoverPoints,eventData:i("./event_data"),selectPoints:i("./select"),moduleType:"trace",name:"bar",basePlotModule:i("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}},{"../../plots/cartesian":578,"../scatter/marker_colorbar":954,"./arrays_to_calcdata":656,"./attributes":657,"./calc":658,"./cross_trace_calc":660,"./defaults":661,"./event_data":662,"./hover":664,"./layout_attributes":666,"./layout_defaults":667,"./plot":668,"./select":669,"./style":671}],666:[function(i,U,V){U.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],667:[function(i,U,V){var w=i("../../registry"),f=i("../../plots/cartesian/axes"),M=i("../../lib"),T=i("./layout_attributes");U.exports=function(e,a,n){function r(l,x){return M.coerce(e,a,T,l,x)}for(var t=!1,h=!1,s=!1,o={},y=r("barmode"),d=0;d<n.length;d++){var p=n[d];if(w.traceIs(p,"bar")&&p.visible)t=!0;else continue;if(y==="group"){var c=p.xaxis+p.yaxis;o[c]&&(s=!0),o[c]=!0}if(p.visible&&p.type==="histogram"){var m=f.getFromId({_fullLayout:a},p[p.orientation==="v"?"xaxis":"yaxis"]);m.type!=="category"&&(h=!0)}}if(!t){delete a.barmode;return}y!=="overlay"&&r("barnorm"),r("bargap",h&&!s?0:.2),r("bargroupgap")}},{"../../lib":515,"../../plots/cartesian/axes":566,"../../registry":647,"./layout_attributes":666}],668:[function(i,U,V){var w=i("@plotly/d3"),f=i("fast-isnumeric"),M=i("../../lib"),T=i("../../lib/svg_text_utils"),e=i("../../components/color"),a=i("../../components/drawing"),n=i("../../registry"),r=i("../../plots/cartesian/axes").tickText,t=i("./uniform_text"),h=t.recordMinTextSize,s=t.clearMinTextSize,o=i("./style"),y=i("./helpers"),d=i("./constants"),p=i("./attributes"),c=p.text,m=p.textposition,l=i("../../components/fx/helpers").appendArrayPointValue,x=d.TEXTPAD;function u(B){return B.id}function A(B){if(B.ids)return u}function _(B,G){return B<G?1:-1}function g(B,G,Q,X){var j=[],re=[],ue=X?G:Q,K=X?Q:G;return j[0]=ue.c2p(B.s0,!0),re[0]=K.c2p(B.p0,!0),j[1]=ue.c2p(B.s1,!0),re[1]=K.c2p(B.p1,!0),X?[j,re]:[re,j]}function b(B,G,Q,X){if(!G.uniformtext.mode&&v(Q)){var j;return X&&(j=X()),B.transition().duration(Q.duration).ease(Q.easing).each("end",function(){j&&j()}).each("interrupt",function(){j&&j()})}else return B}function v(B){return B&&B.duration>0}function k(B,G,Q,X,j,re){var ue=G.xaxis,K=G.yaxis,te=B._fullLayout;j||(j={mode:te.barmode,norm:te.barmode,gap:te.bargap,groupgap:te.bargroupgap},s("bar",te));var Y=M.makeTraceGroups(X,Q,"trace bars").each(function(H){var ee=w.select(this),ne=H[0].trace,Z=ne.type==="waterfall",q=ne.type==="funnel",ie=ne.type==="bar",se=ie||q,ae=0;Z&&ne.connector.visible&&ne.connector.mode==="between"&&(ae=ne.connector.line.width/2);var oe=ne.orientation==="h",be=v(j),ce=M.ensureSingle(ee,"g","points"),de=A(ne),ye=ce.selectAll("g.point").data(M.identity,de);ye.enter().append("g").classed("point",!0),ye.exit().remove(),ye.each(function(me,Se){var Le=w.select(this),Oe=g(me,ue,K,oe),we=Oe[0][0],Ce=Oe[0][1],Ke=Oe[1][0],Ye=Oe[1][1],Fe=(oe?Ce-we:Ye-Ke)===0;Fe&&se&&y.getLineWidth(ne,me)&&(Fe=!1),Fe||(Fe=!f(we)||!f(Ce)||!f(Ke)||!f(Ye)),me.isBlank=Fe,Fe&&(oe?Ce=we:Ye=Ke),ae&&!Fe&&(oe?(we-=_(we,Ce)*ae,Ce+=_(we,Ce)*ae):(Ke-=_(Ke,Ye)*ae,Ye+=_(Ke,Ye)*ae));var Re,je;if(ne.type==="waterfall"){if(!Fe){var xt=ne[me.dir].marker;Re=xt.line.width,je=xt.color}}else Re=y.getLineWidth(ne,me),je=me.mc||ne.marker.color;function Nt(Lt){var We=w.round(Re/2%1,2);return j.gap===0&&j.groupgap===0?w.round(Math.round(Lt)-We,2):Lt}function tr(Lt,We,ot){return ot&&Lt===We?Lt:Math.abs(Lt-We)>=2?Nt(Lt):Lt>We?Math.ceil(Lt):Math.floor(Lt)}if(!B._context.staticPlot){var Ht=e.opacity(je),Pt=Ht<1||Re>.01?Nt:tr;we=Pt(we,Ce,oe),Ce=Pt(Ce,we,oe),Ke=Pt(Ke,Ye,!oe),Ye=Pt(Ye,Ke,!oe)}var $t=b(M.ensureSingle(Le,"path"),te,j,re);if($t.style("vector-effect","non-scaling-stroke").attr("d",isNaN((Ce-we)*(Ye-Ke))||Fe&&B._context.staticPlot?"M0,0Z":"M"+we+","+Ke+"V"+Ye+"H"+Ce+"V"+Ke+"Z").call(a.setClipUrl,G.layerClipId,B),!te.uniformtext.mode&&be){var Ut=a.makePointStyleFns(ne);a.singlePointStyle(me,$t,ne,Ut,B)}S(B,G,Le,H,Se,we,Ce,Ke,Ye,j,re),G.layerClipId&&a.hideOutsideRangePoint(me,Le.select("text"),ue,K,ne.xcalendar,ne.ycalendar)});var ge=ne.cliponaxis===!1;a.setClipUrl(ee,ge?null:G.layerClipId,B)});n.getComponentMethod("errorbars","plot")(B,Y,G,j)}function S(B,G,Q,X,j,re,ue,K,te,Y,H){var ee=G.xaxis,ne=G.yaxis,Z=B._fullLayout,q;function ie(We,ot,Ge){var Me=M.ensureSingle(We,"text").text(ot).attr({class:"bartext bartext-"+q,"text-anchor":"middle","data-notex":1}).call(a.font,Ge).call(T.convertToTspans,B);return Me}var se=X[0].trace,ae=se.orientation==="h",oe=D(Z,X,j,ee,ne);q=R(se,j);var be=Y.mode==="stack"||Y.mode==="relative",ce=X[j],de=!be||ce._outmost;if(!oe||q==="none"||(ce.isBlank||re===ue||K===te)&&(q==="auto"||q==="inside")){Q.select("text").remove();return}var ye=Z.font,ge=o.getBarColor(X[j],se),me=o.getInsideTextFont(se,j,ye,ge),Se=o.getOutsideTextFont(se,j,ye),Le=Q.datum();ae?ee.type==="log"&&Le.s0<=0&&(ee.range[0]<ee.range[1]?re=0:re=ee._length):ne.type==="log"&&Le.s0<=0&&(ne.range[0]<ne.range[1]?K=ne._length:K=0);var Oe=Math.abs(ue-re)-2*x,we=Math.abs(te-K)-2*x,Ce,Ke,Ye,Fe,Re;if(q==="outside"&&!de&&!ce.hasB&&(q="inside"),q==="auto")if(de){q="inside",Re=M.ensureUniformFontSize(B,me),Ce=ie(Q,oe,Re),Ke=a.bBox(Ce.node()),Ye=Ke.width,Fe=Ke.height;var je=Ye>0&&Fe>0,xt=Ye<=Oe&&Fe<=we,Nt=Ye<=we&&Fe<=Oe,tr=ae?Oe>=Ye*(we/Fe):we>=Fe*(Oe/Ye);je&&(xt||Nt||tr)?q="inside":(q="outside",Ce.remove(),Ce=null)}else q="inside";if(!Ce){Re=M.ensureUniformFontSize(B,q==="outside"?Se:me),Ce=ie(Q,oe,Re);var Ht=Ce.attr("transform");if(Ce.attr("transform",""),Ke=a.bBox(Ce.node()),Ye=Ke.width,Fe=Ke.height,Ce.attr("transform",Ht),Ye<=0||Fe<=0){Ce.remove();return}}var Pt=se.textangle,$t,Ut;q==="outside"?(Ut=se.constraintext==="both"||se.constraintext==="outside",$t=I(re,ue,K,te,Ke,{isHorizontal:ae,constrained:Ut,angle:Pt})):(Ut=se.constraintext==="both"||se.constraintext==="inside",$t=F(re,ue,K,te,Ke,{isHorizontal:ae,constrained:Ut,angle:Pt,anchor:se.insidetextanchor})),$t.fontSize=Re.size,h(se.type==="histogram"?"bar":se.type,$t,Z),ce.transform=$t;var Lt=b(Ce,Z,Y,H);M.setTransormAndDisplay(Lt,$t)}function E(B){return B==="auto"?0:B}function C(B,G){var Q=Math.PI/180*G,X=Math.abs(Math.sin(Q)),j=Math.abs(Math.cos(Q));return{x:B.width*j+B.height*X,y:B.width*X+B.height*j}}function F(B,G,Q,X,j,re){var ue=!!re.isHorizontal,K=!!re.constrained,te=re.angle||0,Y=re.anchor||"end",H=Y==="end",ee=Y==="start",ne=re.leftToRight||0,Z=(ne+1)/2,q=1-Z,ie=j.width,se=j.height,ae=Math.abs(G-B),oe=Math.abs(X-Q),be=ae>2*x&&oe>2*x?x:0;ae-=2*be,oe-=2*be;var ce=E(te);te==="auto"&&!(ie<=ae&&se<=oe)&&(ie>ae||se>oe)&&(!(ie>oe||se>ae)||ie<se!=ae<oe)&&(ce+=90);var de=C(j,ce),ye=1;K&&(ye=Math.min(1,ae/de.x,oe/de.y));var ge=j.left*q+j.right*Z,me=(j.top+j.bottom)/2,Se=(B+x)*q+(G-x)*Z,Le=(Q+X)/2,Oe=0,we=0;if(ee||H){var Ce=(ue?de.x:de.y)/2,Ke=ue?_(B,G):_(Q,X);ue?ee?(Se=B+Ke*be,Oe=-Ke*Ce):(Se=G-Ke*be,Oe=Ke*Ce):ee?(Le=Q+Ke*be,we=-Ke*Ce):(Le=X-Ke*be,we=Ke*Ce)}return{textX:ge,textY:me,targetX:Se,targetY:Le,anchorX:Oe,anchorY:we,scale:ye,rotate:ce}}function I(B,G,Q,X,j,re){var ue=!!re.isHorizontal,K=!!re.constrained,te=re.angle||0,Y=j.width,H=j.height,ee=Math.abs(G-B),ne=Math.abs(X-Q),Z;ue?Z=ne>2*x?x:0:Z=ee>2*x?x:0;var q=1;K&&(q=ue?Math.min(1,ne/H):Math.min(1,ee/Y));var ie=E(te),se=C(j,ie),ae=(ue?se.x:se.y)/2,oe=(j.left+j.right)/2,be=(j.top+j.bottom)/2,ce=(B+G)/2,de=(Q+X)/2,ye=0,ge=0,me=ue?_(G,B):_(Q,X);return ue?(ce=G-me*Z,ye=me*ae):(de=X+me*Z,ge=-me*ae),{textX:oe,textY:be,targetX:ce,targetY:de,anchorX:ye,anchorY:ge,scale:q,rotate:ie}}function D(B,G,Q,X,j){var re=G[0].trace,ue=re.texttemplate,K;return ue?K=O(B,G,Q,X,j):re.textinfo?K=z(G,Q,X,j):K=y.getValue(re.text,Q),y.coerceString(c,K)}function R(B,G){var Q=y.getValue(B.textposition,G);return y.coerceEnumerated(m,Q)}function O(B,G,Q,X,j){var re=G[0].trace,ue=M.castOption(re,Q,"texttemplate");if(!ue)return"";var K=re.type==="histogram",te=re.type==="waterfall",Y=re.type==="funnel",H=re.orientation==="h",ee,ne,Z,q;H?(ee="y",ne=j,Z="x",q=X):(ee="x",ne=X,Z="y",q=j);function ie(ye){return r(ne,ne.c2l(ye),!0).text}function se(ye){return r(q,q.c2l(ye),!0).text}var ae=G[Q],oe={};oe.label=ae.p,oe.labelLabel=oe[ee+"Label"]=ie(ae.p);var be=M.castOption(re,ae.i,"text");(be===0||be)&&(oe.text=be),oe.value=ae.s,oe.valueLabel=oe[Z+"Label"]=se(ae.s);var ce={};l(ce,re,ae.i),(K||ce.x===void 0)&&(ce.x=H?oe.value:oe.label),(K||ce.y===void 0)&&(ce.y=H?oe.label:oe.value),(K||ce.xLabel===void 0)&&(ce.xLabel=H?oe.valueLabel:oe.labelLabel),(K||ce.yLabel===void 0)&&(ce.yLabel=H?oe.labelLabel:oe.valueLabel),te&&(oe.delta=+ae.rawS||ae.s,oe.deltaLabel=se(oe.delta),oe.final=ae.v,oe.finalLabel=se(oe.final),oe.initial=oe.final-oe.delta,oe.initialLabel=se(oe.initial)),Y&&(oe.value=ae.s,oe.valueLabel=se(oe.value),oe.percentInitial=ae.begR,oe.percentInitialLabel=M.formatPercent(ae.begR),oe.percentPrevious=ae.difR,oe.percentPreviousLabel=M.formatPercent(ae.difR),oe.percentTotal=ae.sumR,oe.percenTotalLabel=M.formatPercent(ae.sumR));var de=M.castOption(re,ae.i,"customdata");return de&&(oe.customdata=de),M.texttemplateString(ue,oe,B._d3locale,ce,oe,re._meta||{})}function z(B,G,Q,X){var j=B[0].trace,re=j.orientation==="h",ue=j.type==="waterfall",K=j.type==="funnel";function te(de){var ye=re?X:Q;return r(ye,de,!0).text}function Y(de){var ye=re?Q:X;return r(ye,+de,!0).text}var H=j.textinfo,ee=B[G],ne=H.split("+"),Z=[],q,ie=function(de){return ne.indexOf(de)!==-1};if(ie("label")&&Z.push(te(B[G].p)),ie("text")&&(q=M.castOption(j,ee.i,"text"),(q===0||q)&&Z.push(q)),ue){var se=+ee.rawS||ee.s,ae=ee.v,oe=ae-se;ie("initial")&&Z.push(Y(oe)),ie("delta")&&Z.push(Y(se)),ie("final")&&Z.push(Y(ae))}if(K){ie("value")&&Z.push(Y(ee.s));var be=0;ie("percent initial")&&be++,ie("percent previous")&&be++,ie("percent total")&&be++;var ce=be>1;ie("percent initial")&&(q=M.formatPercent(ee.begR),ce&&(q+=" of initial"),Z.push(q)),ie("percent previous")&&(q=M.formatPercent(ee.difR),ce&&(q+=" of previous"),Z.push(q)),ie("percent total")&&(q=M.formatPercent(ee.sumR),ce&&(q+=" of total"),Z.push(q))}return Z.join("<br>")}U.exports={plot:k,toMoveInsideBar:F}},{"../../components/color":367,"../../components/drawing":389,"../../components/fx/helpers":403,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/cartesian/axes":566,"../../registry":647,"./attributes":657,"./constants":659,"./helpers":663,"./style":671,"./uniform_text":673,"@plotly/d3":58,"fast-isnumeric":190}],669:[function(i,U,V){U.exports=function(M,T){var e=M.cd,a=M.xaxis,n=M.yaxis,r=e[0].trace,t=r.type==="funnel",h=r.orientation==="h",s=[],o;if(T===!1)for(o=0;o<e.length;o++)e[o].selected=0;else for(o=0;o<e.length;o++){var y=e[o],d="ct"in y?y.ct:w(y,a,n,h,t);T.contains(d,!1,o,M)?(s.push({pointNumber:o,x:a.c2d(y.x),y:n.c2d(y.y)}),y.selected=1):y.selected=0}return s};function w(f,M,T,e,a){var n=M.c2p(e?f.s0:f.p0,!0),r=M.c2p(e?f.s1:f.p1,!0),t=T.c2p(e?f.p0:f.s0,!0),h=T.c2p(e?f.p1:f.s1,!0);return a?[(n+r)/2,(t+h)/2]:e?[r,(t+h)/2]:[(n+r)/2,h]}},{}],670:[function(i,U,V){U.exports=M;var w=i("../../lib").distinctVals,f=i("../../constants/numerical").BADNUM;function M(T,e){this.traces=T,this.sepNegVal=e.sepNegVal,this.overlapNoMerge=e.overlapNoMerge;for(var a=1/0,n=[],r=0;r<T.length;r++){for(var t=T[r],h=0;h<t.length;h++){var s=t[h];s.p!==f&&n.push(s.p)}t[0]&&t[0].width1&&(a=Math.min(t[0].width1,a))}this.positions=n;var o=w(n);this.distinctPositions=o.vals,o.vals.length===1&&a!==1/0?this.minDiff=a:this.minDiff=Math.min(o.minDiff,a);var y=(e.posAxis||{}).type;(y==="category"||y==="multicategory")&&(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}M.prototype.put=function(e,a){var n=this.getLabel(e,a),r=this.bins[n]||0;return this.bins[n]=r+a,r},M.prototype.get=function(e,a){var n=this.getLabel(e,a);return this.bins[n]||0},M.prototype.getLabel=function(e,a){var n=a<0&&this.sepNegVal?"v":"^",r=this.overlapNoMerge?e:Math.round(e/this.binWidth);return n+r}},{"../../constants/numerical":491,"../../lib":515}],671:[function(i,U,V){var w=i("@plotly/d3"),f=i("../../components/color"),M=i("../../components/drawing"),T=i("../../lib"),e=i("../../registry"),a=i("./uniform_text").resizeText,n=i("./attributes"),r=n.textfont,t=n.insidetextfont,h=n.outsidetextfont,s=i("./helpers");function o(b){var v=w.select(b).selectAll("g.barlayer").selectAll("g.trace");a(b,v,"bar");var k=v.size(),S=b._fullLayout;v.style("opacity",function(E){return E[0].trace.opacity}).each(function(E){(S.barmode==="stack"&&k>1||S.bargap===0&&S.bargroupgap===0&&!E[0].trace.marker.line.width)&&w.select(this).attr("shape-rendering","crispEdges")}),v.selectAll("g.points").each(function(E){var C=w.select(this),F=E[0].trace;y(C,F,b)}),e.getComponentMethod("errorbars","style")(v)}function y(b,v,k){M.pointStyle(b.selectAll("path"),v,k),d(b,v,k)}function d(b,v,k){b.selectAll("text").each(function(S){var E=w.select(this),C=T.ensureUniformFontSize(k,l(E,S,v,k));M.font(E,C)})}function p(b,v,k){var S=v[0].trace;S.selectedpoints?c(k,S,b):(y(k,S,b),e.getComponentMethod("errorbars","style")(k))}function c(b,v,k){M.selectedPointStyle(b.selectAll("path"),v),m(b.selectAll("text"),v,k)}function m(b,v,k){b.each(function(S){var E=w.select(this),C;if(S.selected){C=T.ensureUniformFontSize(k,l(E,S,v,k));var F=v.selected.textfont&&v.selected.textfont.color;F&&(C.color=F),M.font(E,C)}else M.selectedTextStyle(E,v)})}function l(b,v,k,S){var E=S._fullLayout.font,C=k.textfont;if(b.classed("bartext-inside")){var F=g(v,k);C=u(k,v.i,E,F)}else b.classed("bartext-outside")&&(C=A(k,v.i,E));return C}function x(b,v,k){return _(r,b.textfont,v,k)}function u(b,v,k,S){var E=x(b,v,k),C=b._input.textfont===void 0||b._input.textfont.color===void 0||Array.isArray(b.textfont.color)&&b.textfont.color[v]===void 0;return C&&(E={color:f.contrast(S),family:E.family,size:E.size}),_(t,b.insidetextfont,v,E)}function A(b,v,k){var S=x(b,v,k);return _(h,b.outsidetextfont,v,S)}function _(b,v,k,S){v=v||{};var E=s.getValue(v.family,k),C=s.getValue(v.size,k),F=s.getValue(v.color,k);return{family:s.coerceString(b.family,E,S.family),size:s.coerceNumber(b.size,C,S.size),color:s.coerceColor(b.color,F,S.color)}}function g(b,v){return v.type==="waterfall"?v[b.dir].marker.color:b.mcc||b.mc||v.marker.color}U.exports={style:o,styleTextPoints:d,styleOnSelect:p,getInsideTextFont:u,getOutsideTextFont:A,getBarColor:g,resizeText:a}},{"../../components/color":367,"../../components/drawing":389,"../../lib":515,"../../registry":647,"./attributes":657,"./helpers":663,"./uniform_text":673,"@plotly/d3":58}],672:[function(i,U,V){var w=i("../../components/color"),f=i("../../components/colorscale/helpers").hasColorscale,M=i("../../components/colorscale/defaults"),T=i("../../lib").coercePattern;U.exports=function(a,n,r,t,h){var s=r("marker.color",t),o=f(a,"marker");o&&M(a,n,h,r,{prefix:"marker.",cLetter:"c"}),r("marker.line.color",w.defaultLine),f(a,"marker.line")&&M(a,n,h,r,{prefix:"marker.line.",cLetter:"c"}),r("marker.line.width"),r("marker.opacity"),T(r,"marker.pattern",s,o),r("selected.marker.color"),r("unselected.marker.color")}},{"../../components/color":367,"../../components/colorscale/defaults":377,"../../components/colorscale/helpers":378,"../../lib":515}],673:[function(i,U,V){var w=i("@plotly/d3"),f=i("../../lib");function M(n,r,t){var h=n._fullLayout,s=h["_"+t+"Text_minsize"];if(s){var o=h.uniformtext.mode==="hide",y;switch(t){case"funnelarea":case"pie":case"sunburst":y="g.slice";break;case"treemap":case"icicle":y="g.slice, g.pathbar";break;default:y="g.points > g.point"}r.selectAll(y).each(function(d){var p=d.transform;if(p){p.scale=o&&p.hide?0:s/p.fontSize;var c=w.select(this).select("text");f.setTransormAndDisplay(c,p)}})}}function T(n,r,t){if(t.uniformtext.mode){var h=a(n),s=t.uniformtext.minsize,o=r.scale*r.fontSize;r.hide=o<s,t[h]=t[h]||1/0,r.hide||(t[h]=Math.min(t[h],Math.max(o,s)))}}function e(n,r){var t=a(n);r[t]=void 0}function a(n){return"_"+n+"Text_minsize"}U.exports={recordMinTextSize:T,clearMinTextSize:e,resizeText:M}},{"../../lib":515,"@plotly/d3":58}],674:[function(i,U,V){var w=i("../../plots/template_attributes").hovertemplateAttrs,f=i("../../lib/extend").extendFlat,M=i("../scatterpolar/attributes"),T=i("../bar/attributes");U.exports={r:M.r,theta:M.theta,r0:M.r0,dr:M.dr,theta0:M.theta0,dtheta:M.dtheta,thetaunit:M.thetaunit,base:f({},T.base,{}),offset:f({},T.offset,{}),width:f({},T.width,{}),text:f({},T.text,{}),hovertext:f({},T.hovertext,{}),marker:T.marker,hoverinfo:M.hoverinfo,hovertemplate:w(),selected:T.selected,unselected:T.unselected}},{"../../lib/extend":505,"../../plots/template_attributes":642,"../bar/attributes":657,"../scatterpolar/attributes":1011}],675:[function(i,U,V){var w=i("../../components/colorscale/helpers").hasColorscale,f=i("../../components/colorscale/calc"),M=i("../bar/arrays_to_calcdata"),T=i("../bar/cross_trace_calc").setGroupPositions,e=i("../scatter/calc_selection"),a=i("../../registry").traceIs,n=i("../../lib").extendFlat;function r(h,s){for(var o=h._fullLayout,y=s.subplot,d=o[y].radialaxis,p=o[y].angularaxis,c=d.makeCalcdata(s,"r"),m=p.makeCalcdata(s,"theta"),l=s._length,x=new Array(l),u=c,A=m,_=0;_<l;_++)x[_]={p:A[_],s:u[_]};function g(b){var v=s[b];v!==void 0&&(s["_"+b]=Array.isArray(v)?p.makeCalcdata(s,b):p.d2c(v,s.thetaunit))}return p.type==="linear"&&(g("width"),g("offset")),w(s,"marker")&&f(h,s,{vals:s.marker.color,containerStr:"marker",cLetter:"c"}),w(s,"marker.line")&&f(h,s,{vals:s.marker.line.color,containerStr:"marker.line",cLetter:"c"}),M(x,s),e(x,s),x}function t(h,s,o){for(var y=h.calcdata,d=[],p=0;p<y.length;p++){var c=y[p],m=c[0].trace;m.visible===!0&&a(m,"bar")&&m.subplot===o&&d.push(c)}var l=n({},s.radialaxis,{_id:"x"}),x=s.angularaxis;T(h,x,l,d,{mode:s.barmode,norm:s.barnorm,gap:s.bargap,groupgap:s.bargroupgap})}U.exports={calc:r,crossTraceCalc:t}},{"../../components/colorscale/calc":375,"../../components/colorscale/helpers":378,"../../lib":515,"../../registry":647,"../bar/arrays_to_calcdata":656,"../bar/cross_trace_calc":660,"../scatter/calc_selection":938}],676:[function(i,U,V){var w=i("../../lib"),f=i("../scatterpolar/defaults").handleRThetaDefaults,M=i("../bar/style_defaults"),T=i("./attributes");U.exports=function(a,n,r,t){function h(o,y){return w.coerce(a,n,T,o,y)}var s=f(a,n,t,h);if(!s){n.visible=!1;return}h("thetaunit"),h("base"),h("offset"),h("width"),h("text"),h("hovertext"),h("hovertemplate"),M(a,n,h,r,t),w.coerceSelectionMarkerOpacity(n,h)}},{"../../lib":515,"../bar/style_defaults":672,"../scatterpolar/defaults":1013,"./attributes":674}],677:[function(i,U,V){var w=i("../../components/fx"),f=i("../../lib"),M=i("../bar/hover").getTraceColor,T=f.fillText,e=i("../scatterpolar/hover").makeHoverPointText,a=i("../../plots/polar/helpers").isPtInsidePolygon;U.exports=function(r,t,h){var s=r.cd,o=s[0].trace,y=r.subplot,d=y.radialAxis,p=y.angularAxis,c=y.vangles,m=c?a:f.isPtInsideSector,l=r.maxHoverDistance,x=p._period||2*Math.PI,u=Math.abs(d.g2p(Math.sqrt(t*t+h*h))),A=Math.atan2(h,t);d.range[0]>d.range[1]&&(A+=Math.PI);var _=function(k){return m(u,A,[k.rp0,k.rp1],[k.thetag0,k.thetag1],c)?l+Math.min(1,Math.abs(k.thetag1-k.thetag0)/x)-1+(k.rp1-u)/(k.rp1-k.rp0)-1:1/0};if(w.getClosest(s,_,r),r.index!==!1){var g=r.index,b=s[g];r.x0=r.x1=b.ct[0],r.y0=r.y1=b.ct[1];var v=f.extendFlat({},b,{r:b.s,theta:b.p});return T(b,o,r),e(v,o,y,r),r.hovertemplate=o.hovertemplate,r.color=M(o,b),r.xLabelVal=r.yLabelVal=void 0,b.s<0&&(r.idealAlign="left"),[r]}}},{"../../components/fx":407,"../../lib":515,"../../plots/polar/helpers":630,"../bar/hover":664,"../scatterpolar/hover":1015}],678:[function(i,U,V){U.exports={moduleType:"trace",name:"barpolar",basePlotModule:i("../../plots/polar"),categories:["polar","bar","showLegend"],attributes:i("./attributes"),layoutAttributes:i("./layout_attributes"),supplyDefaults:i("./defaults"),supplyLayoutDefaults:i("./layout_defaults"),calc:i("./calc").calc,crossTraceCalc:i("./calc").crossTraceCalc,plot:i("./plot"),colorbar:i("../scatter/marker_colorbar"),formatLabels:i("../scatterpolar/format_labels"),style:i("../bar/style").style,styleOnSelect:i("../bar/style").styleOnSelect,hoverPoints:i("./hover"),selectPoints:i("../bar/select"),meta:{}}},{"../../plots/polar":631,"../bar/select":669,"../bar/style":671,"../scatter/marker_colorbar":954,"../scatterpolar/format_labels":1014,"./attributes":674,"./calc":675,"./defaults":676,"./hover":677,"./layout_attributes":679,"./layout_defaults":680,"./plot":681}],679:[function(i,U,V){U.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",editType:"calc"},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc"}}},{}],680:[function(i,U,V){var w=i("../../lib"),f=i("./layout_attributes");U.exports=function(M,T,e){var a={},n;function r(s,o){return w.coerce(M[n]||{},T[n],f,s,o)}for(var t=0;t<e.length;t++){var h=e[t];h.type==="barpolar"&&h.visible===!0&&(n=h.subplot,a[n]||(r("barmode"),r("bargap"),a[n]=1))}}},{"../../lib":515,"./layout_attributes":679}],681:[function(i,U,V){var w=i("@plotly/d3"),f=i("fast-isnumeric"),M=i("../../lib"),T=i("../../components/drawing"),e=i("../../plots/polar/helpers");U.exports=function(r,t,h){var s=t.xaxis,o=t.yaxis,y=t.radialAxis,d=t.angularAxis,p=a(t),c=t.layers.frontplot.select("g.barlayer");M.makeTraceGroups(c,h,"trace bars").each(function(){var m=w.select(this),l=M.ensureSingle(m,"g","points"),x=l.selectAll("g.point").data(M.identity);x.enter().append("g").style("vector-effect","non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0),x.exit().remove(),x.each(function(u){var A=w.select(this),_=u.rp0=y.c2p(u.s0),g=u.rp1=y.c2p(u.s1),b=u.thetag0=d.c2g(u.p0),v=u.thetag1=d.c2g(u.p1),k;if(!f(_)||!f(g)||!f(b)||!f(v)||_===g||b===v)k="M0,0Z";else{var S=y.c2g(u.s1),E=(b+v)/2;u.ct=[s.c2p(S*Math.cos(E)),o.c2p(S*Math.sin(E))],k=p(_,g,b,v)}M.ensureSingle(A,"path").attr("d",k)}),T.setClipUrl(m,t._hasClipOnAxisFalse?t.clipIds.forTraces:null,r)})};function a(n){var r=n.cxx,t=n.cyy;return n.vangles?function(h,s,o,y){var d,p;M.angleDelta(o,y)>0?(d=o,p=y):(d=y,p=o);var c=e.findEnclosingVertexAngles(d,n.vangles)[0],m=e.findEnclosingVertexAngles(p,n.vangles)[1],l=[c,(d+p)/2,m];return e.pathPolygonAnnulus(h,s,d,p,l,r,t)}:function(h,s,o,y){return M.pathAnnulus(h,s,o,y,r,t)}}},{"../../components/drawing":389,"../../lib":515,"../../plots/polar/helpers":630,"@plotly/d3":58,"fast-isnumeric":190}],682:[function(i,U,V){var w=i("../scatter/attributes"),f=i("../bar/attributes"),M=i("../../components/color/attributes"),T=i("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=i("../../plots/template_attributes").hovertemplateAttrs,a=i("../../lib/extend").extendFlat,n=w.marker,r=n.line;U.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",editType:"calc"},xperiod:w.xperiod,yperiod:w.yperiod,xperiod0:w.xperiod0,yperiod0:w.yperiod0,xperiodalignment:w.xperiodalignment,yperiodalignment:w.yperiodalignment,xhoverformat:T("x"),yhoverformat:T("y"),name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},lowerfence:{valType:"data_array",editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],editType:"calc"},mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:a({},n.symbol,{arrayOk:!1,editType:"plot"}),opacity:a({},n.opacity,{arrayOk:!1,dflt:1,editType:"style"}),angle:a({},n.angle,{arrayOk:!1,editType:"calc"}),size:a({},n.size,{arrayOk:!1,editType:"calc"}),color:a({},n.color,{arrayOk:!1,editType:"style"}),line:{color:a({},r.color,{arrayOk:!1,dflt:M.defaultLine,editType:"style"}),width:a({},r.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:w.fillcolor,whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},offsetgroup:f.offsetgroup,alignmentgroup:f.alignmentgroup,selected:{marker:w.selected.marker,editType:"style"},unselected:{marker:w.unselected.marker,editType:"style"},text:a({},w.text,{}),hovertext:a({},w.hovertext,{}),hovertemplate:e({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"}}},{"../../components/color/attributes":366,"../../lib/extend":505,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../bar/attributes":657,"../scatter/attributes":936}],683:[function(i,U,V){var w=i("fast-isnumeric"),f=i("../../plots/cartesian/axes"),M=i("../../plots/cartesian/align_period"),T=i("../../lib"),e=i("../../constants/numerical").BADNUM,a=T._;U.exports=function(A,_){var g=A._fullLayout,b=f.getFromId(A,_.xaxis||"x"),v=f.getFromId(A,_.yaxis||"y"),k=[],S=_.type==="violin"?"_numViolins":"_numBoxes",E,C,F,I,D,R,O;_.orientation==="h"?(F=b,I="x",D=v,R="y",O=!!_.yperiodalignment):(F=v,I="y",D=b,R="x",O=!!_.xperiodalignment);var z=n(_,R,D,g[S]),B=z[0],G=z[1],Q=T.distinctVals(B,D),X=Q.vals,j=Q.minDiff/2,re,ue,K,te,Y,H,ee=(_.boxpoints||_.points)==="all"?T.identity:function(Ht){return Ht.v<re.lf||Ht.v>re.uf};if(_._hasPreCompStats){var ne=_[I],Z=function(Ht){return F.d2c((_[Ht]||[])[E])},q=1/0,ie=-1/0;for(E=0;E<_._length;E++){var se=B[E];if(!!w(se)){if(re={},re.pos=re[R]=se,O&&G&&(re.orig_p=G[E]),re.q1=Z("q1"),re.med=Z("median"),re.q3=Z("q3"),ue=[],ne&&T.isArrayOrTypedArray(ne[E]))for(C=0;C<ne[E].length;C++)H=F.d2c(ne[E][C]),H!==e&&(Y={v:H,i:[E,C]},s(Y,_,[E,C]),ue.push(Y));if(re.pts=ue.sort(y),K=re[I]=ue.map(d),te=K.length,re.med!==e&&re.q1!==e&&re.q3!==e&&re.med>=re.q1&&re.q3>=re.med){var ae=Z("lowerfence");re.lf=ae!==e&&ae<=re.q1?ae:p(re,K,te);var oe=Z("upperfence");re.uf=oe!==e&&oe>=re.q3?oe:c(re,K,te);var be=Z("mean");re.mean=be!==e?be:te?T.mean(K,te):(re.q1+re.q3)/2;var ce=Z("sd");re.sd=be!==e&&ce>=0?ce:te?T.stdev(K,te,re.mean):re.q3-re.q1,re.lo=m(re),re.uo=l(re);var de=Z("notchspan");de=de!==e&&de>0?de:x(re,te),re.ln=re.med-de,re.un=re.med+de;var ye=re.lf,ge=re.uf;_.boxpoints&&K.length&&(ye=Math.min(ye,K[0]),ge=Math.max(ge,K[te-1])),_.notched&&(ye=Math.min(ye,re.ln),ge=Math.max(ge,re.un)),re.min=ye,re.max=ge}else{T.warn(["Invalid input - make sure that q1 <= median <= q3","q1 = "+re.q1,"median = "+re.med,"q3 = "+re.q3].join(`
`));var me;re.med!==e?me=re.med:re.q1!==e?re.q3!==e?me=(re.q1+re.q3)/2:me=re.q1:re.q3!==e?me=re.q3:me=0,re.med=me,re.q1=re.q3=me,re.lf=re.uf=me,re.mean=re.sd=me,re.ln=re.un=me,re.min=re.max=me}q=Math.min(q,re.min),ie=Math.max(ie,re.max),re.pts2=ue.filter(ee),k.push(re)}}_._extremes[F._id]=f.findExtremes(F,[q,ie],{padded:!0})}else{var Se=F.makeCalcdata(_,I),Le=r(X,j),Oe=X.length,we=t(Oe);for(E=0;E<_._length;E++)if(H=Se[E],!!w(H)){var Ce=T.findBin(B[E],Le);Ce>=0&&Ce<Oe&&(Y={v:H,i:E},s(Y,_,E),we[Ce].push(Y))}var Ke=1/0,Ye=-1/0,Fe=_.quartilemethod,Re=Fe==="exclusive",je=Fe==="inclusive";for(E=0;E<Oe;E++)if(we[E].length>0){if(re={},re.pos=re[R]=X[E],ue=re.pts=we[E].sort(y),K=re[I]=ue.map(d),te=K.length,re.min=K[0],re.max=K[te-1],re.mean=T.mean(K,te),re.sd=T.stdev(K,te,re.mean),re.med=T.interp(K,.5),te%2&&(Re||je)){var xt,Nt;Re?(xt=K.slice(0,te/2),Nt=K.slice(te/2+1)):je&&(xt=K.slice(0,te/2+1),Nt=K.slice(te/2)),re.q1=T.interp(xt,.5),re.q3=T.interp(Nt,.5)}else re.q1=T.interp(K,.25),re.q3=T.interp(K,.75);re.lf=p(re,K,te),re.uf=c(re,K,te),re.lo=m(re),re.uo=l(re);var tr=x(re,te);re.ln=re.med-tr,re.un=re.med+tr,Ke=Math.min(Ke,re.ln),Ye=Math.max(Ye,re.un),re.pts2=ue.filter(ee),k.push(re)}_._extremes[F._id]=f.findExtremes(F,_.notched?Se.concat([Ke,Ye]):Se,{padded:!0})}return o(k,_),k.length>0?(k[0].t={num:g[S],dPos:j,posLetter:R,valLetter:I,labels:{med:a(A,"median:"),min:a(A,"min:"),q1:a(A,"q1:"),q3:a(A,"q3:"),max:a(A,"max:"),mean:_.boxmean==="sd"?a(A,"mean \xB1 \u03C3:"):a(A,"mean:"),lf:a(A,"lower fence:"),uf:a(A,"upper fence:")}},g[S]++,k):[{t:{empty:!0}}]};function n(u,A,_,g){var b=A in u,v=A+"0"in u,k="d"+A in u;if(b||v&&k){var S=_.makeCalcdata(u,A),E=M(u,_,A,S).vals;return[E,S]}var C;v?C=u[A+"0"]:"name"in u&&(_.type==="category"||w(u.name)&&["linear","log"].indexOf(_.type)!==-1||T.isDateTime(u.name)&&_.type==="date")?C=u.name:C=g;for(var F=_.type==="multicategory"?_.r2c_just_indices(C):_.d2c(C,0,u[A+"calendar"]),I=u._length,D=new Array(I),R=0;R<I;R++)D[R]=F;return[D]}function r(u,A){for(var _=u.length,g=new Array(_+1),b=0;b<_;b++)g[b]=u[b]-A;return g[_]=u[_-1]+A,g}function t(u){for(var A=new Array(u),_=0;_<u;_++)A[_]=[];return A}var h={text:"tx",hovertext:"htx"};function s(u,A,_){for(var g in h)T.isArrayOrTypedArray(A[g])&&(Array.isArray(_)?T.isArrayOrTypedArray(A[g][_[0]])&&(u[h[g]]=A[g][_[0]][_[1]]):u[h[g]]=A[g][_])}function o(u,A){if(T.isArrayOrTypedArray(A.selectedpoints))for(var _=0;_<u.length;_++){for(var g=u[_].pts||[],b={},v=0;v<g.length;v++)b[g[v].i]=v;T.tagSelected(g,A,b)}}function y(u,A){return u.v-A.v}function d(u){return u.v}function p(u,A,_){return _===0?u.q1:Math.min(u.q1,A[Math.min(T.findBin(2.5*u.q1-1.5*u.q3,A,!0)+1,_-1)])}function c(u,A,_){return _===0?u.q3:Math.max(u.q3,A[Math.max(T.findBin(2.5*u.q3-1.5*u.q1,A),0)])}function m(u){return 4*u.q1-3*u.q3}function l(u){return 4*u.q3-3*u.q1}function x(u,A){return A===0?0:1.57*(u.q3-u.q1)/Math.sqrt(A)}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566,"fast-isnumeric":190}],684:[function(i,U,V){var w=i("../../plots/cartesian/axes"),f=i("../../lib"),M=i("../../plots/cartesian/constraints").getAxisGroup,T=["v","h"];function e(n,r){for(var t=n.calcdata,h=r.xaxis,s=r.yaxis,o=0;o<T.length;o++){for(var y=T[o],d=y==="h"?s:h,p=[],c=0;c<t.length;c++){var m=t[c],l=m[0].t,x=m[0].trace;x.visible===!0&&(x.type==="box"||x.type==="candlestick")&&!l.empty&&(x.orientation||"v")===y&&x.xaxis===h._id&&x.yaxis===s._id&&p.push(c)}a("box",n,p,d)}}function a(n,r,t,h){var s=r.calcdata,o=r._fullLayout,y=h._id,d=y.charAt(0),p,c,m,l=[],x=0;for(p=0;p<t.length;p++)for(m=s[t[p]],c=0;c<m.length;c++)l.push(h.c2l(m[c].pos,!0)),x+=(m[c].pts2||[]).length;if(!!l.length){var u=f.distinctVals(l);(h.type==="category"||h.type==="multicategory")&&(u.minDiff=1);var A=u.minDiff/2;w.minDtick(h,u.minDiff,u.vals[0],!0);var _=n==="violin"?"_numViolins":"_numBoxes",g=o[_],b=o[n+"mode"]==="group"&&g>1,v=1-o[n+"gap"],k=1-o[n+"groupgap"];for(p=0;p<t.length;p++){m=s[t[p]];var S=m[0].trace,E=m[0].t,C=S.width,F=S.side,I,D,R,O;if(C)I=D=O=C/2,R=0;else if(I=A,b){var z=M(o,h._id)+S.orientation,B=o._alignmentOpts[z]||{},G=B[S.alignmentgroup]||{},Q=Object.keys(G.offsetGroups||{}).length,X=Q||g,j=Q?S._offsetIndex:E.num;D=I*v*k/X,R=2*I*(-.5+(j+.5)/X)*v,O=I*v/X}else D=I*v*k,R=0,O=I;E.dPos=I,E.bPos=R,E.bdPos=D,E.wHover=O;var re,ue,K=R+D,te,Y,H,ee,ne,Z,q=Boolean(C),ie=(S.boxpoints||S.points)&&x>0;if(F==="positive"?(re=I*(C?1:.5),te=K,ue=te=R):F==="negative"?(re=te=R,ue=I*(C?1:.5),Y=K):(re=ue=I,te=Y=K),ie){var se=S.pointpos,ae=S.jitter,oe=S.marker.size/2,be=0;se+ae>=0&&(be=K*(se+ae),be>re?(q=!0,ne=oe,H=be):be>te&&(ne=oe,H=re)),be<=re&&(H=re);var ce=0;se-ae<=0&&(ce=-K*(se-ae),ce>ue?(q=!0,Z=oe,ee=ce):ce>Y&&(Z=oe,ee=ue)),ce<=ue&&(ee=ue)}else H=re,ee=ue;var de=new Array(m.length);for(c=0;c<m.length;c++)de[c]=m[c].pos;S._extremes[y]=w.findExtremes(h,de,{padded:q,vpadminus:ee,vpadplus:H,vpadLinearized:!0,ppadminus:{x:Z,y:ne}[d],ppadplus:{x:ne,y:Z}[d]})}}}U.exports={crossTraceCalc:e,setPositionOffset:a}},{"../../lib":515,"../../plots/cartesian/axes":566,"../../plots/cartesian/constraints":574}],685:[function(i,U,V){var w=i("../../lib"),f=i("../../registry"),M=i("../../components/color"),T=i("../scatter/period_defaults"),e=i("../bar/defaults").handleGroupingDefaults,a=i("../../plots/cartesian/axis_autotype"),n=i("./attributes");function r(o,y,d,p){function c(b,v){return w.coerce(o,y,n,b,v)}if(t(o,y,c,p),y.visible!==!1){T(o,y,p,c),c("xhoverformat"),c("yhoverformat");var m=y._hasPreCompStats;m&&(c("lowerfence"),c("upperfence")),c("line.color",(o.marker||{}).color||d),c("line.width"),c("fillcolor",M.addOpacity(y.line.color,.5));var l=!1;if(m){var x=c("mean"),u=c("sd");x&&x.length&&(l=!0,u&&u.length&&(l="sd"))}c("boxmean",l),c("whiskerwidth"),c("width"),c("quartilemethod");var A=!1;if(m){var _=c("notchspan");_&&_.length&&(A=!0)}else w.validate(o.notchwidth,n.notchwidth)&&(A=!0);var g=c("notched",A);g&&c("notchwidth"),h(o,y,c,{prefix:"box"})}}function t(o,y,d,p){function c(Q){var X=0;return Q&&Q.length&&(X+=1,w.isArrayOrTypedArray(Q[0])&&Q[0].length&&(X+=1)),X}function m(Q){return w.validate(o[Q],n[Q])}var l=d("y"),x=d("x"),u;if(y.type==="box"){var A=d("q1"),_=d("median"),g=d("q3");y._hasPreCompStats=A&&A.length&&_&&_.length&&g&&g.length,u=Math.min(w.minRowLength(A),w.minRowLength(_),w.minRowLength(g))}var b=c(l),v=c(x),k=b&&w.minRowLength(l),S=v&&w.minRowLength(x),E=p.calendar,C={autotypenumbers:p.autotypenumbers},F,I;if(y._hasPreCompStats)switch(String(v)+String(b)){case"00":var D=m("x0")||m("dx"),R=m("y0")||m("dy");R&&!D?F="h":F="v",I=u;break;case"10":F="v",I=Math.min(u,S);break;case"20":F="h",I=Math.min(u,x.length);break;case"01":F="h",I=Math.min(u,k);break;case"02":F="v",I=Math.min(u,l.length);break;case"12":F="v",I=Math.min(u,S,l.length);break;case"21":F="h",I=Math.min(u,x.length,k);break;case"11":I=0;break;case"22":var O=!1,z;for(z=0;z<x.length;z++)if(a(x[z],E,C)==="category"){O=!0;break}if(O)F="v",I=Math.min(u,S,l.length);else{for(z=0;z<l.length;z++)if(a(l[z],E,C)==="category"){O=!0;break}O?(F="h",I=Math.min(u,x.length,k)):(F="v",I=Math.min(u,S,l.length))}break}else b>0?(F="v",v>0?I=Math.min(S,k):I=Math.min(k)):v>0?(F="h",I=Math.min(S)):I=0;if(!I){y.visible=!1;return}y._length=I;var B=d("orientation",F);y._hasPreCompStats?B==="v"&&v===0?(d("x0",0),d("dx",1)):B==="h"&&b===0&&(d("y0",0),d("dy",1)):B==="v"&&v===0?d("x0"):B==="h"&&b===0&&d("y0");var G=f.getComponentMethod("calendars","handleTraceDefaults");G(o,y,["x","y"],p)}function h(o,y,d,p){var c=p.prefix,m=w.coerce2(o,y,n,"marker.outliercolor"),l=d("marker.line.outliercolor"),x="outliers";y._hasPreCompStats?x="all":(m||l)&&(x="suspectedoutliers");var u=d(c+"points",x);u?(d("jitter",u==="all"?.3:0),d("pointpos",u==="all"?-1.5:0),d("marker.symbol"),d("marker.opacity"),d("marker.size"),d("marker.angle"),d("marker.color",y.line.color),d("marker.line.color"),d("marker.line.width"),u==="suspectedoutliers"&&(d("marker.line.outliercolor",y.marker.color),d("marker.line.outlierwidth")),d("selected.marker.color"),d("unselected.marker.color"),d("selected.marker.size"),d("unselected.marker.size"),d("text"),d("hovertext")):delete y.marker;var A=d("hoveron");(A==="all"||A.indexOf("points")!==-1)&&d("hovertemplate"),w.coerceSelectionMarkerOpacity(y,d)}function s(o,y){var d,p;function c(x){return w.coerce(p._input,p,n,x)}for(var m=0;m<o.length;m++){p=o[m];var l=p.type;(l==="box"||l==="violin")&&(d=p._input,y[l+"mode"]==="group"&&e(d,p,y,c))}}U.exports={supplyDefaults:r,crossTraceDefaults:s,handleSampleDefaults:t,handlePointsDefaults:h}},{"../../components/color":367,"../../lib":515,"../../plots/cartesian/axis_autotype":567,"../../registry":647,"../bar/defaults":661,"../scatter/period_defaults":956,"./attributes":682}],686:[function(i,U,V){U.exports=function(f,M){return M.hoverOnBox&&(f.hoverOnBox=M.hoverOnBox),"xVal"in M&&(f.x=M.xVal),"yVal"in M&&(f.y=M.yVal),M.xa&&(f.xaxis=M.xa),M.ya&&(f.yaxis=M.ya),f}},{}],687:[function(i,U,V){var w=i("../../plots/cartesian/axes"),f=i("../../lib"),M=i("../../components/fx"),T=i("../../components/color"),e=f.fillText;function a(t,h,s,o){var y=t.cd,d=y[0].trace,p=d.hoveron,c=[],m;return p.indexOf("boxes")!==-1&&(c=c.concat(n(t,h,s,o))),p.indexOf("points")!==-1&&(m=r(t,h,s)),o==="closest"?m?[m]:c:(m&&c.push(m),c)}function n(t,h,s,o){var y=t.cd,d=t.xa,p=t.ya,c=y[0].trace,m=y[0].t,l=c.type==="violin",x,u,A,_,g,b,v,k,S,E,C,F=m.bdPos,I,D,R=m.wHover,O=function(ce){return A.c2l(ce.pos)+m.bPos-A.c2l(b)};l&&c.side!=="both"?(c.side==="positive"&&(S=function(ce){var de=O(ce);return M.inbox(de,de+R,E)},I=F,D=0),c.side==="negative"&&(S=function(ce){var de=O(ce);return M.inbox(de-R,de,E)},I=0,D=F)):(S=function(ce){var de=O(ce);return M.inbox(de-R,de+R,E)},I=D=F);var z;l?z=function(ce){return M.inbox(ce.span[0]-g,ce.span[1]-g,E)}:z=function(ce){return M.inbox(ce.min-g,ce.max-g,E)},c.orientation==="h"?(g=h,b=s,v=z,k=S,x="y",A=p,u="x",_=d):(g=s,b=h,v=S,k=z,x="x",A=d,u="y",_=p);var B=Math.min(1,F/Math.abs(A.r2c(A.range[1])-A.r2c(A.range[0])));E=t.maxHoverDistance-B,C=t.maxSpikeDistance-B;function G(ce){return(v(ce)+k(ce))/2}var Q=M.getDistanceFunction(o,v,k,G);if(M.getClosest(y,Q,t),t.index===!1)return[];var X=y[t.index],j=c.line.color,re=(c.marker||{}).color;T.opacity(j)&&c.line.width?t.color=j:T.opacity(re)&&c.boxpoints?t.color=re:t.color=c.fillcolor,t[x+"0"]=A.c2p(X.pos+m.bPos-D,!0),t[x+"1"]=A.c2p(X.pos+m.bPos+I,!0),t[x+"LabelVal"]=X.orig_p!==void 0?X.orig_p:X.pos;var ue=x+"Spike";t.spikeDistance=G(X)*C/E,t[ue]=A.c2p(X.pos,!0);var K=c.boxmean||(c.meanline||{}).visible,te=c.boxpoints||c.points,Y=te&&K?["max","uf","q3","med","mean","q1","lf","min"]:te&&!K?["max","uf","q3","med","q1","lf","min"]:!te&&K?["max","q3","med","mean","q1","min"]:["max","q3","med","q1","min"],H=_.range[1]<_.range[0];c.orientation===(H?"v":"h")&&Y.reverse();for(var ee=t.spikeDistance,ne=t[ue],Z=[],q=0;q<Y.length;q++){var ie=Y[q];if(ie in X){var se=X[ie],ae=_.c2p(se,!0),oe=f.extendFlat({},t);oe.attr=ie,oe[u+"0"]=oe[u+"1"]=ae,oe[u+"LabelVal"]=se,oe[u+"Label"]=(m.labels?m.labels[ie]+" ":"")+w.hoverLabelText(_,se,c[u+"hoverformat"]),oe.hoverOnBox=!0,ie==="mean"&&"sd"in X&&c.boxmean==="sd"&&(oe[u+"err"]=X.sd),oe.hovertemplate=!1,Z.push(oe)}}t.name="",t.spikeDistance=void 0,t[ue]=void 0;for(var be=0;be<Z.length;be++)Z[be].attr!=="med"?(Z[be].name="",Z[be].spikeDistance=void 0,Z[be][ue]=void 0):(Z[be].spikeDistance=ee,Z[be][ue]=ne);return Z}function r(t,h,s){for(var o=t.cd,y=t.xa,d=t.ya,p=o[0].trace,c=y.c2p(h),m=d.c2p(s),l,x=function(z){var B=Math.max(3,z.mrc||0);return Math.max(Math.abs(y.c2p(z.x)-c)-B,1-3/B)},u=function(z){var B=Math.max(3,z.mrc||0);return Math.max(Math.abs(d.c2p(z.y)-m)-B,1-3/B)},A=M.quadrature(x,u),_=!1,g,b,v=0;v<o.length;v++){g=o[v];for(var k=0;k<(g.pts||[]).length;k++){b=g.pts[k];var S=A(b);S<=t.distance&&(t.distance=S,_=[v,k])}}if(!_)return!1;g=o[_[0]],b=g.pts[_[1]];var E=y.c2p(b.x,!0),C=d.c2p(b.y,!0),F=b.mrc||1;l=f.extendFlat({},t,{index:b.i,color:(p.marker||{}).color,name:p.name,x0:E-F,x1:E+F,y0:C-F,y1:C+F,spikeDistance:t.distance,hovertemplate:p.hovertemplate});var I=g.orig_p,D=I!==void 0?I:g.pos,R;p.orientation==="h"?(R=d,l.xLabelVal=b.x,l.yLabelVal=D):(R=y,l.xLabelVal=D,l.yLabelVal=b.y);var O=R._id.charAt(0);return l[O+"Spike"]=R.c2p(g.pos,!0),e(b,p,l),l}U.exports={hoverPoints:a,hoverOnBoxes:n,hoverOnPoints:r}},{"../../components/color":367,"../../components/fx":407,"../../lib":515,"../../plots/cartesian/axes":566}],688:[function(i,U,V){U.exports={attributes:i("./attributes"),layoutAttributes:i("./layout_attributes"),supplyDefaults:i("./defaults").supplyDefaults,crossTraceDefaults:i("./defaults").crossTraceDefaults,supplyLayoutDefaults:i("./layout_defaults").supplyLayoutDefaults,calc:i("./calc"),crossTraceCalc:i("./cross_trace_calc").crossTraceCalc,plot:i("./plot").plot,style:i("./style").style,styleOnSelect:i("./style").styleOnSelect,hoverPoints:i("./hover").hoverPoints,eventData:i("./event_data"),selectPoints:i("./select"),moduleType:"trace",name:"box",basePlotModule:i("../../plots/cartesian"),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","boxLayout","zoomScale"],meta:{}}},{"../../plots/cartesian":578,"./attributes":682,"./calc":683,"./cross_trace_calc":684,"./defaults":685,"./event_data":686,"./hover":687,"./layout_attributes":689,"./layout_defaults":690,"./plot":691,"./select":692,"./style":693}],689:[function(i,U,V){U.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},{}],690:[function(i,U,V){var w=i("../../registry"),f=i("../../lib"),M=i("./layout_attributes");function T(a,n,r,t,h){for(var s=h+"Layout",o=!1,y=0;y<r.length;y++){var d=r[y];if(w.traceIs(d,s)){o=!0;break}}!o||(t(h+"mode"),t(h+"gap"),t(h+"groupgap"))}function e(a,n,r){function t(h,s){return f.coerce(a,n,M,h,s)}T(a,n,r,t,"box")}U.exports={supplyLayoutDefaults:e,_supply:T}},{"../../lib":515,"../../registry":647,"./layout_attributes":689}],691:[function(i,U,V){var w=i("@plotly/d3"),f=i("../../lib"),M=i("../../components/drawing"),T=5,e=.01;function a(h,s,o,y){var d=s.xaxis,p=s.yaxis;f.makeTraceGroups(y,o,"trace boxes").each(function(c){var m=w.select(this),l=c[0],x=l.t,u=l.trace;if(x.wdPos=x.bdPos*u.whiskerwidth,u.visible!==!0||x.empty){m.remove();return}var A,_;u.orientation==="h"?(A=p,_=d):(A=d,_=p),n(m,{pos:A,val:_},u,x),r(m,{x:d,y:p},u,x),t(m,{pos:A,val:_},u,x)})}function n(h,s,o,y){var d=o.orientation==="h",p=s.val,c=s.pos,m=!!c.rangebreaks,l=y.bPos,x=y.wdPos||0,u=y.bPosPxOffset||0,A=o.whiskerwidth||0,_=o.notched||!1,g=_?1-2*o.notchwidth:1,b,v;Array.isArray(y.bdPos)?(b=y.bdPos[0],v=y.bdPos[1]):(b=y.bdPos,v=y.bdPos);var k=h.selectAll("path.box").data(o.type!=="violin"||o.box.visible?f.identity:[]);k.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","box"),k.exit().remove(),k.each(function(S){if(S.empty)return"M0,0Z";var E=c.c2l(S.pos+l,!0),C=c.l2p(E-b)+u,F=c.l2p(E+v)+u,I=m?(C+F)/2:c.l2p(E)+u,D=o.whiskerwidth,R=m?C*D+(1-D)*I:c.l2p(E-x)+u,O=m?F*D+(1-D)*I:c.l2p(E+x)+u,z=c.l2p(E-b*g)+u,B=c.l2p(E+v*g)+u,G=p.c2p(S.q1,!0),Q=p.c2p(S.q3,!0),X=f.constrain(p.c2p(S.med,!0),Math.min(G,Q)+1,Math.max(G,Q)-1),j=S.lf===void 0||o.boxpoints===!1,re=p.c2p(j?S.min:S.lf,!0),ue=p.c2p(j?S.max:S.uf,!0),K=p.c2p(S.ln,!0),te=p.c2p(S.un,!0);d?w.select(this).attr("d","M"+X+","+z+"V"+B+"M"+G+","+C+"V"+F+(_?"H"+K+"L"+X+","+B+"L"+te+","+F:"")+"H"+Q+"V"+C+(_?"H"+te+"L"+X+","+z+"L"+K+","+C:"")+"ZM"+G+","+I+"H"+re+"M"+Q+","+I+"H"+ue+(A===0?"":"M"+re+","+R+"V"+O+"M"+ue+","+R+"V"+O)):w.select(this).attr("d","M"+z+","+X+"H"+B+"M"+C+","+G+"H"+F+(_?"V"+K+"L"+B+","+X+"L"+F+","+te:"")+"V"+Q+"H"+C+(_?"V"+te+"L"+z+","+X+"L"+C+","+K:"")+"ZM"+I+","+G+"V"+re+"M"+I+","+Q+"V"+ue+(A===0?"":"M"+R+","+re+"H"+O+"M"+R+","+ue+"H"+O))})}function r(h,s,o,y){var d=s.x,p=s.y,c=y.bdPos,m=y.bPos,l=o.boxpoints||o.points;f.seedPseudoRandom();var x=function(_){return _.forEach(function(g){g.t=y,g.trace=o}),_},u=h.selectAll("g.points").data(l?x:[]);u.enter().append("g").attr("class","points"),u.exit().remove();var A=u.selectAll("path").data(function(_){var g,b=_.pts2,v=Math.max((_.max-_.min)/10,_.q3-_.q1),k=v*1e-9,S=v*e,E=[],C=0,F;if(o.jitter){if(v===0)for(C=1,E=new Array(b.length),g=0;g<b.length;g++)E[g]=1;else for(g=0;g<b.length;g++){var I=Math.max(0,g-T),D=b[I].v,R=Math.min(b.length-1,g+T),O=b[R].v;l!=="all"&&(b[g].v<_.lf?O=Math.min(O,_.lf):D=Math.max(D,_.uf));var z=Math.sqrt(S*(R-I)/(O-D+k))||0;z=f.constrain(Math.abs(z),0,1),E.push(z),C=Math.max(z,C)}F=o.jitter*2/(C||1)}for(g=0;g<b.length;g++){var B=b[g],G=B.v,Q=o.jitter?F*E[g]*(f.pseudoRandom()-.5):0,X=_.pos+m+c*(o.pointpos+Q);o.orientation==="h"?(B.y=X,B.x=G):(B.x=X,B.y=G),l==="suspectedoutliers"&&G<_.uo&&G>_.lo&&(B.so=!0)}return b});A.enter().append("path").classed("point",!0),A.exit().remove(),A.call(M.translatePoints,d,p)}function t(h,s,o,y){var d=s.val,p=s.pos,c=!!p.rangebreaks,m=y.bPos,l=y.bPosPxOffset||0,x=o.boxmean||(o.meanline||{}).visible,u,A;Array.isArray(y.bdPos)?(u=y.bdPos[0],A=y.bdPos[1]):(u=y.bdPos,A=y.bdPos);var _=h.selectAll("path.mean").data(o.type==="box"&&o.boxmean||o.type==="violin"&&o.box.visible&&o.meanline.visible?f.identity:[]);_.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"}),_.exit().remove(),_.each(function(g){var b=p.c2l(g.pos+m,!0),v=p.l2p(b-u)+l,k=p.l2p(b+A)+l,S=c?(v+k)/2:p.l2p(b)+l,E=d.c2p(g.mean,!0),C=d.c2p(g.mean-g.sd,!0),F=d.c2p(g.mean+g.sd,!0);o.orientation==="h"?w.select(this).attr("d","M"+E+","+v+"V"+k+(x==="sd"?"m0,0L"+C+","+S+"L"+E+","+v+"L"+F+","+S+"Z":"")):w.select(this).attr("d","M"+v+","+E+"H"+k+(x==="sd"?"m0,0L"+S+","+C+"L"+v+","+E+"L"+S+","+F+"Z":""))})}U.exports={plot:a,plotBoxAndWhiskers:n,plotPoints:r,plotBoxMean:t}},{"../../components/drawing":389,"../../lib":515,"@plotly/d3":58}],692:[function(i,U,V){U.exports=function(f,M){var T=f.cd,e=f.xaxis,a=f.yaxis,n=[],r,t;if(M===!1)for(r=0;r<T.length;r++)for(t=0;t<(T[r].pts||[]).length;t++)T[r].pts[t].selected=0;else for(r=0;r<T.length;r++)for(t=0;t<(T[r].pts||[]).length;t++){var h=T[r].pts[t],s=e.c2p(h.x),o=a.c2p(h.y);M.contains([s,o],null,h.i,f)?(n.push({pointNumber:h.i,x:e.c2d(h.x),y:a.c2d(h.y)}),h.selected=1):h.selected=0}return n}},{}],693:[function(i,U,V){var w=i("@plotly/d3"),f=i("../../components/color"),M=i("../../components/drawing");function T(a,n,r){var t=r||w.select(a).selectAll("g.trace.boxes");t.style("opacity",function(h){return h[0].trace.opacity}),t.each(function(h){var s=w.select(this),o=h[0].trace,y=o.line.width;function d(m,l,x,u){m.style("stroke-width",l+"px").call(f.stroke,x).call(f.fill,u)}var p=s.selectAll("path.box");if(o.type==="candlestick")p.each(function(m){if(!m.empty){var l=w.select(this),x=o[m.dir];d(l,x.line.width,x.line.color,x.fillcolor),l.style("opacity",o.selectedpoints&&!m.selected?.3:1)}});else{d(p,y,o.line.color,o.fillcolor),s.selectAll("path.mean").style({"stroke-width":y,"stroke-dasharray":2*y+"px,"+y+"px"}).call(f.stroke,o.line.color);var c=s.selectAll("path.point");M.pointStyle(c,o,a)}})}function e(a,n,r){var t=n[0].trace,h=r.selectAll("path.point");t.selectedpoints?M.selectedPointStyle(h,t):M.pointStyle(h,t,a)}U.exports={style:T,styleOnSelect:e}},{"../../components/color":367,"../../components/drawing":389,"@plotly/d3":58}],694:[function(i,U,V){var w=i("../../lib").extendFlat,f=i("../../plots/cartesian/axis_format_attributes").axisHoverFormat,M=i("../ohlc/attributes"),T=i("../box/attributes");function e(a){return{line:{color:w({},T.line.color,{dflt:a}),width:T.line.width,editType:"style"},fillcolor:T.fillcolor,editType:"style"}}U.exports={xperiod:M.xperiod,xperiod0:M.xperiod0,xperiodalignment:M.xperiodalignment,xhoverformat:f("x"),yhoverformat:f("y"),x:M.x,open:M.open,high:M.high,low:M.low,close:M.close,line:{width:w({},T.line.width,{}),editType:"style"},increasing:e(M.increasing.line.color.dflt),decreasing:e(M.decreasing.line.color.dflt),text:M.text,hovertext:M.hovertext,whiskerwidth:w({},T.whiskerwidth,{dflt:0}),hoverlabel:M.hoverlabel}},{"../../lib":515,"../../plots/cartesian/axis_format_attributes":569,"../box/attributes":682,"../ohlc/attributes":881}],695:[function(i,U,V){var w=i("../../lib"),f=i("../../plots/cartesian/axes"),M=i("../../plots/cartesian/align_period"),T=i("../ohlc/calc").calcCommon;U.exports=function(a,n){var r=a._fullLayout,t=f.getFromId(a,n.xaxis),h=f.getFromId(a,n.yaxis),s=t.makeCalcdata(n,"x"),o=M(n,t,"x",s).vals,y=T(a,n,s,o,h,e);return y.length?(w.extendFlat(y[0].t,{num:r._numBoxes,dPos:w.distinctVals(o).minDiff/2,posLetter:"x",valLetter:"y"}),r._numBoxes++,y):[{t:{empty:!0}}]};function e(a,n,r,t){return{min:r,q1:Math.min(a,t),med:t,q3:Math.max(a,t),max:n}}},{"../../lib":515,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566,"../ohlc/calc":882}],696:[function(i,U,V){var w=i("../../lib"),f=i("../../components/color"),M=i("../ohlc/ohlc_defaults"),T=i("../scatter/period_defaults"),e=i("./attributes");U.exports=function(r,t,h,s){function o(d,p){return w.coerce(r,t,e,d,p)}var y=M(r,t,o,s);if(!y){t.visible=!1;return}T(r,t,s,o,{x:!0}),o("xhoverformat"),o("yhoverformat"),o("line.width"),a(r,t,o,"increasing"),a(r,t,o,"decreasing"),o("text"),o("hovertext"),o("whiskerwidth"),s._requestRangeslider[t.xaxis]=!0};function a(n,r,t,h){var s=t(h+".line.color");t(h+".line.width",r.line.width),t(h+".fillcolor",f.addOpacity(s,.5))}},{"../../components/color":367,"../../lib":515,"../ohlc/ohlc_defaults":886,"../scatter/period_defaults":956,"./attributes":694}],697:[function(i,U,V){U.exports={moduleType:"trace",name:"candlestick",basePlotModule:i("../../plots/cartesian"),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{},attributes:i("./attributes"),layoutAttributes:i("../box/layout_attributes"),supplyLayoutDefaults:i("../box/layout_defaults").supplyLayoutDefaults,crossTraceCalc:i("../box/cross_trace_calc").crossTraceCalc,supplyDefaults:i("./defaults"),calc:i("./calc"),plot:i("../box/plot").plot,layerName:"boxlayer",style:i("../box/style").style,hoverPoints:i("../ohlc/hover").hoverPoints,selectPoints:i("../ohlc/select")}},{"../../plots/cartesian":578,"../box/cross_trace_calc":684,"../box/layout_attributes":689,"../box/layout_defaults":690,"../box/plot":691,"../box/style":693,"../ohlc/hover":884,"../ohlc/select":888,"./attributes":694,"./calc":695,"./defaults":696}],698:[function(i,U,V){var w=i("./axis_defaults"),f=i("../../plot_api/plot_template");U.exports=function(e,a,n,r,t){var h=r("a");h||(r("da"),r("a0"));var s=r("b");s||(r("db"),r("b0")),M(e,a,n,t)};function M(T,e,a,n){var r=["aaxis","baxis"];r.forEach(function(t){var h=t.charAt(0),s=T[t]||{},o=f.newContainer(e,t),y={noTicklabelstep:!0,tickfont:"x",id:h+"axis",letter:h,font:e.font,name:t,data:T[h],calendar:e.calendar,dfltColor:n,bgColor:a.paper_bgcolor,autotypenumbersDflt:a.autotypenumbers,fullLayout:a};w(s,o,y),o._categories=o._categories||[],!T[t]&&s.type!=="-"&&(T[t]={type:s.type})})}},{"../../plot_api/plot_template":555,"./axis_defaults":703}],699:[function(i,U,V){var w=i("../../lib").isArrayOrTypedArray;U.exports=function(M){return f(M,0)};function f(M,T){if(!w(M)||T>=10)return null;for(var e=1/0,a=-1/0,n=M.length,r=0;r<n;r++){var t=M[r];if(w(t)){var h=f(t,T+1);h&&(e=Math.min(h[0],e),a=Math.max(h[1],a))}else e=Math.min(t,e),a=Math.max(t,a)}return[e,a]}},{"../../lib":515}],700:[function(i,U,V){var w=i("../../plots/font_attributes"),f=i("./axis_attributes"),M=i("../../components/color/attributes"),T=w({editType:"calc"});T.family.dflt='"Open Sans", verdana, arial, sans-serif',T.size.dflt=12,T.color.dflt=M.defaultLine,U.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",dflt:1,editType:"calc"},cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:f,baxis:f,font:T,color:{valType:"color",dflt:M.defaultLine,editType:"plot"},transforms:void 0}},{"../../components/color/attributes":366,"../../plots/font_attributes":594,"./axis_attributes":702}],701:[function(i,U,V){var w=i("../../lib").isArrayOrTypedArray;U.exports=function(f,M,T,e){var a,n,r,t,h,s,o,y,d,p,c,m,l,x=w(T)?"a":"b",u=x==="a"?f.aaxis:f.baxis,A=u.smoothing,_=x==="a"?f.a2i:f.b2j,g=x==="a"?T:e,b=x==="a"?e:T,v=x==="a"?M.a.length:M.b.length,k=x==="a"?M.b.length:M.a.length,S=Math.floor(x==="a"?f.b2j(b):f.a2i(b)),E=x==="a"?function(j){return f.evalxy([],j,S)}:function(j){return f.evalxy([],S,j)};A&&(r=Math.max(0,Math.min(k-2,S)),t=S-r,n=x==="a"?function(j,re){return f.dxydi([],j,r,re,t)}:function(j,re){return f.dxydj([],r,j,t,re)});var C=_(g[0]),F=_(g[1]),I=C<F?1:-1,D=(F-C)*1e-8,R=I>0?Math.floor:Math.ceil,O=I>0?Math.ceil:Math.floor,z=I>0?Math.min:Math.max,B=I>0?Math.max:Math.min,G=R(C+D),Q=O(F-D);o=E(C);var X=[[o]];for(a=G;a*I<Q*I;a+=I)h=[],c=B(C,a),m=z(F,a+I),l=m-c,s=Math.max(0,Math.min(v-2,Math.floor(.5*(c+m)))),y=E(m),A&&(d=n(s,c-s),p=n(s,m-s),h.push([o[0]+d[0]/3*l,o[1]+d[1]/3*l]),h.push([y[0]-p[0]/3*l,y[1]-p[1]/3*l])),h.push(y),X.push(h),o=y;return X}},{"../../lib":515}],702:[function(i,U,V){var w=i("../../plots/font_attributes"),f=i("../../components/color/attributes"),M=i("../../plots/cartesian/layout_attributes"),T=i("../../plots/cartesian/axis_format_attributes").descriptionWithDates,e=i("../../plot_api/edit_types").overrideAll,a=i("../../components/drawing/attributes").dash,n=i("../../lib/extend").extendFlat;U.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc"},font:w({editType:"calc"}),offset:{valType:"number",dflt:10,editType:"calc"},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autotypenumbers:M.autotypenumbers,autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},tickfont:w({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"calc"},minexponent:{valType:"number",dflt:3,min:0,editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc",description:T("tick label")},tickformatstops:e(M.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:f.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},griddash:n({},a,{editType:"calc"}),showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgriddash:n({},a,{editType:"calc"}),minorgridcolor:{valType:"color",dflt:f.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},_deprecated:{title:{valType:"string",editType:"calc"},titlefont:w({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"}},editType:"calc"}},{"../../components/color/attributes":366,"../../components/drawing/attributes":388,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/cartesian/axis_format_attributes":569,"../../plots/cartesian/layout_attributes":579,"../../plots/font_attributes":594}],703:[function(i,U,V){var w=i("./attributes"),f=i("../../components/color").addOpacity,M=i("../../registry"),T=i("../../lib"),e=i("../../plots/cartesian/tick_value_defaults"),a=i("../../plots/cartesian/tick_label_defaults"),n=i("../../plots/cartesian/prefix_suffix_defaults"),r=i("../../plots/cartesian/category_order_defaults"),t=i("../../plots/cartesian/set_convert"),h=i("../../plots/cartesian/axis_autotype");U.exports=function(y,d,p){var c=p.letter,m=p.font||{},l=w[c+"axis"];function x(G,Q){return T.coerce(y,d,l,G,Q)}function u(G,Q){return T.coerce2(y,d,l,G,Q)}p.name&&(d._name=p.name,d._id=p.name),x("autotypenumbers",p.autotypenumbersDflt);var A=x("type");if(A==="-"&&(p.data&&s(d,p.data),d.type==="-"?d.type="linear":A=y.type=d.type),x("smoothing"),x("cheatertype"),x("showticklabels"),x("labelprefix",c+" = "),x("labelsuffix"),x("showtickprefix"),x("showticksuffix"),x("separatethousands"),x("tickformat"),x("exponentformat"),x("minexponent"),x("showexponent"),x("categoryorder"),x("tickmode"),x("tickvals"),x("ticktext"),x("tick0"),x("dtick"),d.tickmode==="array"&&(x("arraytick0"),x("arraydtick")),x("labelpadding"),d._hovertitle=c,A==="date"){var _=M.getComponentMethod("calendars","handleDefaults");_(y,d,"calendar",p.calendar)}t(d,p.fullLayout),d.c2p=T.identity;var g=x("color",p.dfltColor),b=g===y.color?g:m.color,v=x("title.text");v&&(T.coerceFont(x,"title.font",{family:m.family,size:T.bigFont(m.size),color:b}),x("title.offset")),x("tickangle");var k=x("autorange",!d.isValidRange(y.range));k&&x("rangemode"),x("range"),d.cleanRange(),x("fixedrange"),e(y,d,x,A),n(y,d,x,A,p),a(y,d,x,A,p),r(y,d,x,{data:p.data,dataAttr:c});var S=u("gridcolor",f(g,.3)),E=u("gridwidth"),C=u("griddash"),F=x("showgrid");F||(delete d.gridcolor,delete d.gridwidth,delete d.griddash);var I=u("startlinecolor",g),D=u("startlinewidth",E),R=x("startline",d.showgrid||!!I||!!D);R||(delete d.startlinecolor,delete d.startlinewidth);var O=u("endlinecolor",g),z=u("endlinewidth",E),B=x("endline",d.showgrid||!!O||!!z);return B||(delete d.endlinecolor,delete d.endlinewidth),F?(x("minorgridcount"),x("minorgridwidth",E),x("minorgriddash",C),x("minorgridcolor",f(S,.06)),d.minorgridcount||(delete d.minorgridwidth,delete d.minorgriddash,delete d.minorgridcolor)):(delete d.gridcolor,delete d.gridwidth,delete d.griddash),d.showticklabels==="none"&&(delete d.tickfont,delete d.tickangle,delete d.showexponent,delete d.exponentformat,delete d.minexponent,delete d.tickformat,delete d.showticksuffix,delete d.showtickprefix),d.showticksuffix||delete d.ticksuffix,d.showtickprefix||delete d.tickprefix,x("tickmode"),d};function s(o,y){if(o.type==="-"){var d=o._id,p=d.charAt(0),c=p+"calendar",m=o[c];o.type=h(y,m,{autotypenumbers:o.autotypenumbers})}}},{"../../components/color":367,"../../lib":515,"../../plots/cartesian/axis_autotype":567,"../../plots/cartesian/category_order_defaults":571,"../../plots/cartesian/prefix_suffix_defaults":583,"../../plots/cartesian/set_convert":585,"../../plots/cartesian/tick_label_defaults":587,"../../plots/cartesian/tick_value_defaults":589,"../../registry":647,"./attributes":700}],704:[function(i,U,V){var w=i("../../plots/cartesian/axes"),f=i("../../lib").isArray1D,M=i("./cheater_basis"),T=i("./array_minmax"),e=i("./calc_gridlines"),a=i("./calc_labels"),n=i("./calc_clippath"),r=i("../heatmap/clean_2d_array"),t=i("./smooth_fill_2d_array"),h=i("../heatmap/convert_column_xyz"),s=i("./set_convert");U.exports=function(y,d){var p=w.getFromId(y,d.xaxis),c=w.getFromId(y,d.yaxis),m=d.aaxis,l=d.baxis,x=d.x,u=d.y,A=[];x&&f(x)&&A.push("x"),u&&f(u)&&A.push("y"),A.length&&h(d,m,l,"a","b",A);var _=d._a=d._a||d.a,g=d._b=d._b||d.b;x=d._x||d.x,u=d._y||d.y;var b={};if(d._cheater){var v=m.cheatertype==="index"?_.length:_,k=l.cheatertype==="index"?g.length:g;x=M(v,k,d.cheaterslope)}d._x=x=r(x),d._y=u=r(u),t(x,_,g),t(u,_,g),s(d),d.setScale();var S=T(x),E=T(u),C=.5*(S[1]-S[0]),F=.5*(S[1]+S[0]),I=.5*(E[1]-E[0]),D=.5*(E[1]+E[0]),R=1.3;return S=[F-C*R,F+C*R],E=[D-I*R,D+I*R],d._extremes[p._id]=w.findExtremes(p,S,{padded:!0}),d._extremes[c._id]=w.findExtremes(c,E,{padded:!0}),e(d,"a","b"),e(d,"b","a"),a(d,m),a(d,l),b.clipsegments=n(d._xctrl,d._yctrl,m,l),b.x=x,b.y=u,b.a=_,b.b=g,[b]}},{"../../lib":515,"../../plots/cartesian/axes":566,"../heatmap/clean_2d_array":803,"../heatmap/convert_column_xyz":805,"./array_minmax":699,"./calc_clippath":705,"./calc_gridlines":706,"./calc_labels":707,"./cheater_basis":709,"./set_convert":722,"./smooth_fill_2d_array":723}],705:[function(i,U,V){U.exports=function(f,M,T,e){var a,n,r,t=[],h=!!T.smoothing,s=!!e.smoothing,o=f[0].length-1,y=f.length-1;for(a=0,n=[],r=[];a<=o;a++)n[a]=f[0][a],r[a]=M[0][a];for(t.push({x:n,y:r,bicubic:h}),a=0,n=[],r=[];a<=y;a++)n[a]=f[a][o],r[a]=M[a][o];for(t.push({x:n,y:r,bicubic:s}),a=o,n=[],r=[];a>=0;a--)n[o-a]=f[y][a],r[o-a]=M[y][a];for(t.push({x:n,y:r,bicubic:h}),a=y,n=[],r=[];a>=0;a--)n[y-a]=f[a][0],r[y-a]=M[a][0];return t.push({x:n,y:r,bicubic:s}),t}},{}],706:[function(i,U,V){var w=i("../../plots/cartesian/axes"),f=i("../../lib/extend").extendFlat;U.exports=function(T,e,a){var n,r,t,h,s,o,y,d,p,c,m,l,x,u,A=T["_"+e],_=T[e+"axis"],g=_._gridlines=[],b=_._minorgridlines=[],v=_._boundarylines=[],k=T["_"+a],S=T[a+"axis"];_.tickmode==="array"&&(_.tickvals=A.slice());var E=T._xctrl,C=T._yctrl,F=E[0].length,I=E.length,D=T._a.length,R=T._b.length;w.prepTicks(_),_.tickmode==="array"&&delete _.tickvals;var O=_.smoothing?3:1;function z(G){var Q,X,j,re,ue,K,te,Y,H,ee,ne,Z,q=[],ie=[],se={};if(e==="b")for(X=T.b2j(G),j=Math.floor(Math.max(0,Math.min(R-2,X))),re=X-j,se.length=R,se.crossLength=D,se.xy=function(ae){return T.evalxy([],ae,X)},se.dxy=function(ae,oe){return T.dxydi([],ae,j,oe,re)},Q=0;Q<D;Q++)K=Math.min(D-2,Q),te=Q-K,Y=T.evalxy([],Q,X),S.smoothing&&Q>0&&(H=T.dxydi([],Q-1,j,0,re),q.push(ue[0]+H[0]/3),ie.push(ue[1]+H[1]/3),ee=T.dxydi([],Q-1,j,1,re),q.push(Y[0]-ee[0]/3),ie.push(Y[1]-ee[1]/3)),q.push(Y[0]),ie.push(Y[1]),ue=Y;else for(Q=T.a2i(G),K=Math.floor(Math.max(0,Math.min(D-2,Q))),te=Q-K,se.length=D,se.crossLength=R,se.xy=function(ae){return T.evalxy([],Q,ae)},se.dxy=function(ae,oe){return T.dxydj([],K,ae,te,oe)},X=0;X<R;X++)j=Math.min(R-2,X),re=X-j,Y=T.evalxy([],Q,X),S.smoothing&&X>0&&(ne=T.dxydj([],K,X-1,te,0),q.push(ue[0]+ne[0]/3),ie.push(ue[1]+ne[1]/3),Z=T.dxydj([],K,X-1,te,1),q.push(Y[0]-Z[0]/3),ie.push(Y[1]-Z[1]/3)),q.push(Y[0]),ie.push(Y[1]),ue=Y;return se.axisLetter=e,se.axis=_,se.crossAxis=S,se.value=G,se.constvar=a,se.index=d,se.x=q,se.y=ie,se.smoothing=S.smoothing,se}function B(G){var Q,X,j,re,ue,K=[],te=[],Y={};if(Y.length=A.length,Y.crossLength=k.length,e==="b")for(j=Math.max(0,Math.min(R-2,G)),ue=Math.min(1,Math.max(0,G-j)),Y.xy=function(H){return T.evalxy([],H,G)},Y.dxy=function(H,ee){return T.dxydi([],H,j,ee,ue)},Q=0;Q<F;Q++)K[Q]=E[G*O][Q],te[Q]=C[G*O][Q];else for(X=Math.max(0,Math.min(D-2,G)),re=Math.min(1,Math.max(0,G-X)),Y.xy=function(H){return T.evalxy([],G,H)},Y.dxy=function(H,ee){return T.dxydj([],X,H,re,ee)},Q=0;Q<I;Q++)K[Q]=E[Q][G*O],te[Q]=C[Q][G*O];return Y.axisLetter=e,Y.axis=_,Y.crossAxis=S,Y.value=A[G],Y.constvar=a,Y.index=G,Y.x=K,Y.y=te,Y.smoothing=S.smoothing,Y}if(_.tickmode==="array"){for(h=5e-15,s=[Math.floor((A.length-1-_.arraytick0)/_.arraydtick*(1+h)),Math.ceil(-_.arraytick0/_.arraydtick/(1+h))].sort(function(G,Q){return G-Q}),o=s[0]-1,y=s[1]+1,d=o;d<y;d++)r=_.arraytick0+_.arraydtick*d,!(r<0||r>A.length-1)&&g.push(f(B(r),{color:_.gridcolor,width:_.gridwidth,dash:_.griddash}));for(d=o;d<y;d++)if(t=_.arraytick0+_.arraydtick*d,m=Math.min(t+_.arraydtick,A.length-1),!(t<0||t>A.length-1)&&!(m<0||m>A.length-1))for(l=A[t],x=A[m],n=0;n<_.minorgridcount;n++)u=m-t,!(u<=0)&&(c=l+(x-l)*(n+1)/(_.minorgridcount+1)*(_.arraydtick/u),!(c<A[0]||c>A[A.length-1])&&b.push(f(z(c),{color:_.minorgridcolor,width:_.minorgridwidth,dash:_.minorgriddash})));_.startline&&v.push(f(B(0),{color:_.startlinecolor,width:_.startlinewidth})),_.endline&&v.push(f(B(A.length-1),{color:_.endlinecolor,width:_.endlinewidth}))}else{for(h=5e-15,s=[Math.floor((A[A.length-1]-_.tick0)/_.dtick*(1+h)),Math.ceil((A[0]-_.tick0)/_.dtick/(1+h))].sort(function(G,Q){return G-Q}),o=s[0],y=s[1],d=o;d<=y;d++)p=_.tick0+_.dtick*d,g.push(f(z(p),{color:_.gridcolor,width:_.gridwidth,dash:_.griddash}));for(d=o-1;d<y+1;d++)for(p=_.tick0+_.dtick*d,n=0;n<_.minorgridcount;n++)c=p+_.dtick*(n+1)/(_.minorgridcount+1),!(c<A[0]||c>A[A.length-1])&&b.push(f(z(c),{color:_.minorgridcolor,width:_.minorgridwidth,dash:_.minorgriddash}));_.startline&&v.push(f(z(A[0]),{color:_.startlinecolor,width:_.startlinewidth})),_.endline&&v.push(f(z(A[A.length-1]),{color:_.endlinecolor,width:_.endlinewidth}))}}},{"../../lib/extend":505,"../../plots/cartesian/axes":566}],707:[function(i,U,V){var w=i("../../plots/cartesian/axes"),f=i("../../lib/extend").extendFlat;U.exports=function(T,e){var a,n,r,t,h,s=e._labels=[],o=e._gridlines;for(a=0;a<o.length;a++)h=o[a],["start","both"].indexOf(e.showticklabels)!==-1&&(n=w.tickText(e,h.value),f(n,{prefix:r,suffix:t,endAnchor:!0,xy:h.xy(0),dxy:h.dxy(0,0),axis:h.axis,length:h.crossAxis.length,font:h.axis.tickfont,isFirst:a===0,isLast:a===o.length-1}),s.push(n)),["end","both"].indexOf(e.showticklabels)!==-1&&(n=w.tickText(e,h.value),f(n,{endAnchor:!1,xy:h.xy(h.crossLength-1),dxy:h.dxy(h.crossLength-2,1),axis:h.axis,length:h.crossAxis.length,font:h.axis.tickfont,isFirst:a===0,isLast:a===o.length-1}),s.push(n))}},{"../../lib/extend":505,"../../plots/cartesian/axes":566}],708:[function(i,U,V){var w=.5;U.exports=function(M,T,e,a){var n=M[0]-T[0],r=M[1]-T[1],t=e[0]-T[0],h=e[1]-T[1],s=Math.pow(n*n+r*r,w/2),o=Math.pow(t*t+h*h,w/2),y=(o*o*n-s*s*t)*a,d=(o*o*r-s*s*h)*a,p=o*(s+o)*3,c=s*(s+o)*3;return[[T[0]+(p&&y/p),T[1]+(p&&d/p)],[T[0]-(c&&y/c),T[1]-(c&&d/c)]]}},{}],709:[function(i,U,V){var w=i("../../lib").isArrayOrTypedArray;U.exports=function(f,M,T){var e,a,n,r,t,h,s=[],o=w(f)?f.length:f,y=w(M)?M.length:M,d=w(f)?f:null,p=w(M)?M:null;d&&(n=(d.length-1)/(d[d.length-1]-d[0])/(o-1)),p&&(r=(p.length-1)/(p[p.length-1]-p[0])/(y-1));var c,m=1/0,l=-1/0;for(a=0;a<y;a++)for(s[a]=[],h=p?(p[a]-p[0])*r:a/(y-1),e=0;e<o;e++)t=d?(d[e]-d[0])*n:e/(o-1),c=t-h*T,m=Math.min(c,m),l=Math.max(c,l),s[a][e]=c;var x=1/(l-m),u=-m*x;for(a=0;a<y;a++)for(e=0;e<o;e++)s[a][e]=x*s[a][e]+u;return s}},{"../../lib":515}],710:[function(i,U,V){var w=i("./catmull_rom"),f=i("../../lib").ensureArray;function M(T,e,a){var n=-.5*a[0]+1.5*e[0],r=-.5*a[1]+1.5*e[1];return[(2*n+T[0])/3,(2*r+T[1])/3]}U.exports=function(e,a,n,r,t,h){var s,o,y,d,p,c,m,l,x,u,A=n[0].length,_=n.length,g=t?3*A-2:A,b=h?3*_-2:_;for(e=f(e,b),a=f(a,b),y=0;y<b;y++)e[y]=f(e[y],g),a[y]=f(a[y],g);for(o=0,d=0;o<_;o++,d+=h?3:1)for(p=e[d],c=a[d],m=n[o],l=r[o],s=0,y=0;s<A;s++,y+=t?3:1)p[y]=m[s],c[y]=l[s];if(t)for(o=0,d=0;o<_;o++,d+=h?3:1){for(s=1,y=3;s<A-1;s++,y+=3)x=w([n[o][s-1],r[o][s-1]],[n[o][s],r[o][s]],[n[o][s+1],r[o][s+1]],t),e[d][y-1]=x[0][0],a[d][y-1]=x[0][1],e[d][y+1]=x[1][0],a[d][y+1]=x[1][1];u=M([e[d][0],a[d][0]],[e[d][2],a[d][2]],[e[d][3],a[d][3]]),e[d][1]=u[0],a[d][1]=u[1],u=M([e[d][g-1],a[d][g-1]],[e[d][g-3],a[d][g-3]],[e[d][g-4],a[d][g-4]]),e[d][g-2]=u[0],a[d][g-2]=u[1]}if(h)for(y=0;y<g;y++){for(d=3;d<b-3;d+=3)x=w([e[d-3][y],a[d-3][y]],[e[d][y],a[d][y]],[e[d+3][y],a[d+3][y]],h),e[d-1][y]=x[0][0],a[d-1][y]=x[0][1],e[d+1][y]=x[1][0],a[d+1][y]=x[1][1];u=M([e[0][y],a[0][y]],[e[2][y],a[2][y]],[e[3][y],a[3][y]]),e[1][y]=u[0],a[1][y]=u[1],u=M([e[b-1][y],a[b-1][y]],[e[b-3][y],a[b-3][y]],[e[b-4][y],a[b-4][y]]),e[b-2][y]=u[0],a[b-2][y]=u[1]}if(t&&h)for(d=1;d<b;d+=(d+1)%3===0?2:1){for(y=3;y<g-3;y+=3)x=w([e[d][y-3],a[d][y-3]],[e[d][y],a[d][y]],[e[d][y+3],a[d][y+3]],t),e[d][y-1]=.5*(e[d][y-1]+x[0][0]),a[d][y-1]=.5*(a[d][y-1]+x[0][1]),e[d][y+1]=.5*(e[d][y+1]+x[1][0]),a[d][y+1]=.5*(a[d][y+1]+x[1][1]);u=M([e[d][0],a[d][0]],[e[d][2],a[d][2]],[e[d][3],a[d][3]]),e[d][1]=.5*(e[d][1]+u[0]),a[d][1]=.5*(a[d][1]+u[1]),u=M([e[d][g-1],a[d][g-1]],[e[d][g-3],a[d][g-3]],[e[d][g-4],a[d][g-4]]),e[d][g-2]=.5*(e[d][g-2]+u[0]),a[d][g-2]=.5*(a[d][g-2]+u[1])}return[e,a]}},{"../../lib":515,"./catmull_rom":708}],711:[function(i,U,V){U.exports={RELATIVE_CULL_TOLERANCE:1e-6}},{}],712:[function(i,U,V){U.exports=function(w,f,M){return f&&M?function(T,e,a,n,r){T||(T=[]);var t,h,s,o,y,d;e*=3,a*=3;var p=n*n,c=1-n,m=c*c,l=c*n*2,x=-3*m,u=3*(m-l),A=3*(l-p),_=3*p,g=r*r,b=g*r,v=1-r,k=v*v,S=k*v;for(d=0;d<w.length;d++)y=w[d],t=x*y[a][e]+u*y[a][e+1]+A*y[a][e+2]+_*y[a][e+3],h=x*y[a+1][e]+u*y[a+1][e+1]+A*y[a+1][e+2]+_*y[a+1][e+3],s=x*y[a+2][e]+u*y[a+2][e+1]+A*y[a+2][e+2]+_*y[a+2][e+3],o=x*y[a+3][e]+u*y[a+3][e+1]+A*y[a+3][e+2]+_*y[a+3][e+3],T[d]=S*t+3*(k*r*h+v*g*s)+b*o;return T}:f?function(T,e,a,n,r){T||(T=[]);var t,h,s,o;e*=3;var y=n*n,d=1-n,p=d*d,c=d*n*2,m=-3*p,l=3*(p-c),x=3*(c-y),u=3*y,A=1-r;for(s=0;s<w.length;s++)o=w[s],t=m*o[a][e]+l*o[a][e+1]+x*o[a][e+2]+u*o[a][e+3],h=m*o[a+1][e]+l*o[a+1][e+1]+x*o[a+1][e+2]+u*o[a+1][e+3],T[s]=A*t+r*h;return T}:M?function(T,e,a,n,r){T||(T=[]);var t,h,s,o,y,d;a*=3;var p=r*r,c=p*r,m=1-r,l=m*m,x=l*m;for(y=0;y<w.length;y++)d=w[y],t=d[a][e+1]-d[a][e],h=d[a+1][e+1]-d[a+1][e],s=d[a+2][e+1]-d[a+2][e],o=d[a+3][e+1]-d[a+3][e],T[y]=x*t+3*(l*r*h+m*p*s)+c*o;return T}:function(T,e,a,n,r){T||(T=[]);var t,h,s,o,y=1-r;for(s=0;s<w.length;s++)o=w[s],t=o[a][e+1]-o[a][e],h=o[a+1][e+1]-o[a+1][e],T[s]=y*t+r*h;return T}}},{}],713:[function(i,U,V){U.exports=function(w,f,M){return f&&M?function(T,e,a,n,r){T||(T=[]);var t,h,s,o,y,d;e*=3,a*=3;var p=n*n,c=p*n,m=1-n,l=m*m,x=l*m,u=r*r,A=1-r,_=A*A,g=A*r*2,b=-3*_,v=3*(_-g),k=3*(g-u),S=3*u;for(d=0;d<w.length;d++)y=w[d],t=b*y[a][e]+v*y[a+1][e]+k*y[a+2][e]+S*y[a+3][e],h=b*y[a][e+1]+v*y[a+1][e+1]+k*y[a+2][e+1]+S*y[a+3][e+1],s=b*y[a][e+2]+v*y[a+1][e+2]+k*y[a+2][e+2]+S*y[a+3][e+2],o=b*y[a][e+3]+v*y[a+1][e+3]+k*y[a+2][e+3]+S*y[a+3][e+3],T[d]=x*t+3*(l*n*h+m*p*s)+c*o;return T}:f?function(T,e,a,n,r){T||(T=[]);var t,h,s,o,y,d;e*=3;var p=r*r,c=p*r,m=1-r,l=m*m,x=l*m;for(y=0;y<w.length;y++)d=w[y],t=d[a+1][e]-d[a][e],h=d[a+1][e+1]-d[a][e+1],s=d[a+1][e+2]-d[a][e+2],o=d[a+1][e+3]-d[a][e+3],T[y]=x*t+3*(l*r*h+m*p*s)+c*o;return T}:M?function(T,e,a,n,r){T||(T=[]);var t,h,s,o;a*=3;var y=1-n,d=r*r,p=1-r,c=p*p,m=p*r*2,l=-3*c,x=3*(c-m),u=3*(m-d),A=3*d;for(s=0;s<w.length;s++)o=w[s],t=l*o[a][e]+x*o[a+1][e]+u*o[a+2][e]+A*o[a+3][e],h=l*o[a][e+1]+x*o[a+1][e+1]+u*o[a+2][e+1]+A*o[a+3][e+1],T[s]=y*t+n*h;return T}:function(T,e,a,n,r){T||(T=[]);var t,h,s,o,y=1-n;for(s=0;s<w.length;s++)o=w[s],t=o[a+1][e]-o[a][e],h=o[a+1][e+1]-o[a][e+1],T[s]=y*t+n*h;return T}}},{}],714:[function(i,U,V){U.exports=function(w,f,M,T,e){var a=f-2,n=M-2;return T&&e?function(r,t,h){r||(r=[]);var s,o,y,d,p,c,m=Math.max(0,Math.min(Math.floor(t),a)),l=Math.max(0,Math.min(Math.floor(h),n)),x=Math.max(0,Math.min(1,t-m)),u=Math.max(0,Math.min(1,h-l));m*=3,l*=3;var A=x*x,_=A*x,g=1-x,b=g*g,v=b*g,k=u*u,S=k*u,E=1-u,C=E*E,F=C*E;for(c=0;c<w.length;c++)p=w[c],s=v*p[l][m]+3*(b*x*p[l][m+1]+g*A*p[l][m+2])+_*p[l][m+3],o=v*p[l+1][m]+3*(b*x*p[l+1][m+1]+g*A*p[l+1][m+2])+_*p[l+1][m+3],y=v*p[l+2][m]+3*(b*x*p[l+2][m+1]+g*A*p[l+2][m+2])+_*p[l+2][m+3],d=v*p[l+3][m]+3*(b*x*p[l+3][m+1]+g*A*p[l+3][m+2])+_*p[l+3][m+3],r[c]=F*s+3*(C*u*o+E*k*y)+S*d;return r}:T?function(r,t,h){r||(r=[]);var s=Math.max(0,Math.min(Math.floor(t),a)),o=Math.max(0,Math.min(Math.floor(h),n)),y=Math.max(0,Math.min(1,t-s)),d=Math.max(0,Math.min(1,h-o)),p,c,m,l,x,u;s*=3;var A=y*y,_=A*y,g=1-y,b=g*g,v=b*g,k=1-d;for(x=0;x<w.length;x++)u=w[x],p=k*u[o][s]+d*u[o+1][s],c=k*u[o][s+1]+d*u[o+1][s+1],m=k*u[o][s+2]+d*u[o+1][s+1],l=k*u[o][s+3]+d*u[o+1][s+1],r[x]=v*p+3*(b*y*c+g*A*m)+_*l;return r}:e?function(r,t,h){r||(r=[]);var s=Math.max(0,Math.min(Math.floor(t),a)),o=Math.max(0,Math.min(Math.floor(h),n)),y=Math.max(0,Math.min(1,t-s)),d=Math.max(0,Math.min(1,h-o)),p,c,m,l,x,u;o*=3;var A=d*d,_=A*d,g=1-d,b=g*g,v=b*g,k=1-y;for(x=0;x<w.length;x++)u=w[x],p=k*u[o][s]+y*u[o][s+1],c=k*u[o+1][s]+y*u[o+1][s+1],m=k*u[o+2][s]+y*u[o+2][s+1],l=k*u[o+3][s]+y*u[o+3][s+1],r[x]=v*p+3*(b*d*c+g*A*m)+_*l;return r}:function(r,t,h){r||(r=[]);var s=Math.max(0,Math.min(Math.floor(t),a)),o=Math.max(0,Math.min(Math.floor(h),n)),y=Math.max(0,Math.min(1,t-s)),d=Math.max(0,Math.min(1,h-o)),p,c,m,l,x=1-d,u=1-y;for(m=0;m<w.length;m++)l=w[m],p=u*l[o][s]+y*l[o][s+1],c=u*l[o+1][s]+y*l[o+1][s+1],r[m]=x*p+d*c;return r}}},{}],715:[function(i,U,V){var w=i("../../lib"),f=i("./xy_defaults"),M=i("./ab_defaults"),T=i("./attributes"),e=i("../../components/color/attributes");U.exports=function(n,r,t,h){function s(d,p){return w.coerce(n,r,T,d,p)}r._clipPathId="clip"+r.uid+"carpet";var o=s("color",e.defaultLine);if(w.coerceFont(s,"font"),s("carpet"),M(n,r,h,s,o),!r.a||!r.b){r.visible=!1;return}r.a.length<3&&(r.aaxis.smoothing=0),r.b.length<3&&(r.baxis.smoothing=0);var y=f(n,r,s);y||(r.visible=!1),r._cheater&&s("cheaterslope")}},{"../../components/color/attributes":366,"../../lib":515,"./ab_defaults":698,"./attributes":700,"./xy_defaults":724}],716:[function(i,U,V){U.exports={attributes:i("./attributes"),supplyDefaults:i("./defaults"),plot:i("./plot"),calc:i("./calc"),animatable:!0,isContainer:!0,moduleType:"trace",name:"carpet",basePlotModule:i("../../plots/cartesian"),categories:["cartesian","svg","carpet","carpetAxis","notLegendIsolatable","noMultiCategory","noHover","noSortingByValue"],meta:{}}},{"../../plots/cartesian":578,"./attributes":700,"./calc":704,"./defaults":715,"./plot":721}],717:[function(i,U,V){U.exports=function(w,f){for(var M=w._fullData.length,T,e=0;e<M;e++){var a=w._fullData[e];if(a.index!==f.index&&a.type==="carpet"&&(T||(T=a),a.carpet===f.carpet))return a}return T}},{}],718:[function(i,U,V){U.exports=function(f,M,T){if(f.length===0)return"";var e,a=[],n=T?3:1;for(e=0;e<f.length;e+=n)a.push(f[e]+","+M[e]),T&&e<f.length-n&&(a.push("C"),a.push([f[e+1]+","+M[e+1],f[e+2]+","+M[e+2]+" "].join(" ")));return a.join(T?"":"L")}},{}],719:[function(i,U,V){var w=i("../../lib").isArrayOrTypedArray;U.exports=function(M,T,e){var a;for(w(M)?M.length>T.length&&(M=M.slice(0,T.length)):M=[],a=0;a<T.length;a++)M[a]=e(T[a]);return M}},{"../../lib":515}],720:[function(i,U,V){U.exports=function(f,M,T,e,a,n){var r=a[0]*f.dpdx(M),t=a[1]*f.dpdy(T),h=1,s=1;if(n){var o=Math.sqrt(a[0]*a[0]+a[1]*a[1]),y=Math.sqrt(n[0]*n[0]+n[1]*n[1]),d=(a[0]*n[0]+a[1]*n[1])/o/y;s=Math.max(0,d)}var p=Math.atan2(t,r)*180/Math.PI;return p<-90?(p+=180,h=-h):p>90&&(p-=180,h=-h),{angle:p,flip:h,p:f.c2p(e,M,T),offsetMultplier:s}}},{}],721:[function(i,U,V){var w=i("@plotly/d3"),f=i("../../components/drawing"),M=i("./map_1d_array"),T=i("./makepath"),e=i("./orient_text"),a=i("../../lib/svg_text_utils"),n=i("../../lib"),r=n.strRotate,t=n.strTranslate,h=i("../../constants/alignment");U.exports=function(x,u,A,_){var g=u.xaxis,b=u.yaxis,v=x._fullLayout,k=v._clips;n.makeTraceGroups(_,A,"trace").each(function(S){var E=w.select(this),C=S[0],F=C.trace,I=F.aaxis,D=F.baxis,R=n.ensureSingle(E,"g","minorlayer"),O=n.ensureSingle(E,"g","majorlayer"),z=n.ensureSingle(E,"g","boundarylayer"),B=n.ensureSingle(E,"g","labellayer");E.style("opacity",F.opacity),o(g,b,O,I,"a",I._gridlines),o(g,b,O,D,"b",D._gridlines),o(g,b,R,I,"a",I._minorgridlines),o(g,b,R,D,"b",D._minorgridlines),o(g,b,z,I,"a-boundary",I._boundarylines),o(g,b,z,D,"b-boundary",D._boundarylines);var G=y(x,g,b,F,C,B,I._labels,"a-label"),Q=y(x,g,b,F,C,B,D._labels,"b-label");d(x,B,F,C,g,b,G,Q),s(F,C,k,g,b)})};function s(l,x,u,A,_){var g,b,v,k,S=u.select("#"+l._clipPathId);S.size()||(S=u.append("clipPath").classed("carpetclip",!0));var E=n.ensureSingle(S,"path","carpetboundary"),C=x.clipsegments,F=[];for(k=0;k<C.length;k++)g=C[k],b=M([],g.x,A.c2p),v=M([],g.y,_.c2p),F.push(T(b,v,g.bicubic));var I="M"+F.join("L")+"Z";S.attr("id",l._clipPathId),E.attr("d",I)}function o(l,x,u,A,_,g){var b="const-"+_+"-lines",v=u.selectAll("."+b).data(g);v.enter().append("path").classed(b,!0).style("vector-effect","non-scaling-stroke"),v.each(function(k){var S=k,E=S.x,C=S.y,F=M([],E,l.c2p),I=M([],C,x.c2p),D="M"+T(F,I,S.smoothing),R=w.select(this);R.attr("d",D).style("stroke-width",S.width).style("stroke",S.color).style("stroke-dasharray",f.dashStyle(S.dash,S.width)).style("fill","none")}),v.exit().remove()}function y(l,x,u,A,_,g,b,v){var k=g.selectAll("text."+v).data(b);k.enter().append("text").classed(v,!0);var S=0,E={};return k.each(function(C,F){var I;if(C.axis.tickangle==="auto")I=e(A,x,u,C.xy,C.dxy);else{var D=(C.axis.tickangle+180)*Math.PI/180;I=e(A,x,u,C.xy,[Math.cos(D),Math.sin(D)])}F||(E={angle:I.angle,flip:I.flip});var R=(C.endAnchor?-1:1)*I.flip,O=w.select(this).attr({"text-anchor":R>0?"start":"end","data-notex":1}).call(f.font,C.font).text(C.text).call(a.convertToTspans,l),z=f.bBox(this);O.attr("transform",t(I.p[0],I.p[1])+r(I.angle)+t(C.axis.labelpadding*R,z.height*.3)),S=Math.max(S,z.width+C.axis.labelpadding)}),k.exit().remove(),E.maxExtent=S,E}function d(l,x,u,A,_,g,b,v){var k,S,E,C,F=n.aggNums(Math.min,null,u.a),I=n.aggNums(Math.max,null,u.a),D=n.aggNums(Math.min,null,u.b),R=n.aggNums(Math.max,null,u.b);k=.5*(F+I),S=D,E=u.ab2xy(k,S,!0),C=u.dxyda_rough(k,S),b.angle===void 0&&n.extendFlat(b,e(u,_,g,E,u.dxydb_rough(k,S))),m(l,x,u,A,E,C,u.aaxis,_,g,b,"a-title"),k=F,S=.5*(D+R),E=u.ab2xy(k,S,!0),C=u.dxydb_rough(k,S),v.angle===void 0&&n.extendFlat(v,e(u,_,g,E,u.dxyda_rough(k,S))),m(l,x,u,A,E,C,u.baxis,_,g,v,"b-title")}var p=h.LINE_SPACING,c=(1-h.MID_SHIFT)/p+1;function m(l,x,u,A,_,g,b,v,k,S,E){var C=[];b.title.text&&C.push(b.title.text);var F=x.selectAll("text."+E).data(C),I=S.maxExtent;F.enter().append("text").classed(E,!0),F.each(function(){var D=e(u,v,k,_,g);["start","both"].indexOf(b.showticklabels)===-1&&(I=0);var R=b.title.font.size;I+=R+b.title.offset;var O=S.angle+(S.flip<0?180:0),z=(O-D.angle+450)%360,B=z>90&&z<270,G=w.select(this);G.text(b.title.text).call(a.convertToTspans,l),B&&(I=(-a.lineCount(G)+c)*p*R-I),G.attr("transform",t(D.p[0],D.p[1])+r(D.angle)+t(0,I)).attr("text-anchor","middle").call(f.font,b.title.font)}),F.exit().remove()}},{"../../components/drawing":389,"../../constants/alignment":483,"../../lib":515,"../../lib/svg_text_utils":541,"./makepath":718,"./map_1d_array":719,"./orient_text":720,"@plotly/d3":58}],722:[function(i,U,V){var w=i("./constants"),f=i("../../lib/search").findBin,M=i("./compute_control_points"),T=i("./create_spline_evaluator"),e=i("./create_i_derivative_evaluator"),a=i("./create_j_derivative_evaluator");U.exports=function(r){var t=r._a,h=r._b,s=t.length,o=h.length,y=r.aaxis,d=r.baxis,p=t[0],c=t[s-1],m=h[0],l=h[o-1],x=t[t.length-1]-t[0],u=h[h.length-1]-h[0],A=x*w.RELATIVE_CULL_TOLERANCE,_=u*w.RELATIVE_CULL_TOLERANCE;p-=A,c+=A,m-=_,l+=_,r.isVisible=function(g,b){return g>p&&g<c&&b>m&&b<l},r.isOccluded=function(g,b){return g<p||g>c||b<m||b>l},r.setScale=function(){var g=r._x,b=r._y,v=M(r._xctrl,r._yctrl,g,b,y.smoothing,d.smoothing);r._xctrl=v[0],r._yctrl=v[1],r.evalxy=T([r._xctrl,r._yctrl],s,o,y.smoothing,d.smoothing),r.dxydi=e([r._xctrl,r._yctrl],y.smoothing,d.smoothing),r.dxydj=a([r._xctrl,r._yctrl],y.smoothing,d.smoothing)},r.i2a=function(g){var b=Math.max(0,Math.floor(g[0]),s-2),v=g[0]-b;return(1-v)*t[b]+v*t[b+1]},r.j2b=function(g){var b=Math.max(0,Math.floor(g[1]),s-2),v=g[1]-b;return(1-v)*h[b]+v*h[b+1]},r.ij2ab=function(g){return[r.i2a(g[0]),r.j2b(g[1])]},r.a2i=function(g){var b=Math.max(0,Math.min(f(g,t),s-2)),v=t[b],k=t[b+1];return Math.max(0,Math.min(s-1,b+(g-v)/(k-v)))},r.b2j=function(g){var b=Math.max(0,Math.min(f(g,h),o-2)),v=h[b],k=h[b+1];return Math.max(0,Math.min(o-1,b+(g-v)/(k-v)))},r.ab2ij=function(g){return[r.a2i(g[0]),r.b2j(g[1])]},r.i2c=function(g,b){return r.evalxy([],g,b)},r.ab2xy=function(g,b,v){if(!v&&(g<t[0]||g>t[s-1]|b<h[0]||b>h[o-1]))return[!1,!1];var k=r.a2i(g),S=r.b2j(b),E=r.evalxy([],k,S);if(v){var C=0,F=0,I=[],D,R,O,z;g<t[0]?(D=0,R=0,C=(g-t[0])/(t[1]-t[0])):g>t[s-1]?(D=s-2,R=1,C=(g-t[s-1])/(t[s-1]-t[s-2])):(D=Math.max(0,Math.min(s-2,Math.floor(k))),R=k-D),b<h[0]?(O=0,z=0,F=(b-h[0])/(h[1]-h[0])):b>h[o-1]?(O=o-2,z=1,F=(b-h[o-1])/(h[o-1]-h[o-2])):(O=Math.max(0,Math.min(o-2,Math.floor(S))),z=S-O),C&&(r.dxydi(I,D,O,R,z),E[0]+=I[0]*C,E[1]+=I[1]*C),F&&(r.dxydj(I,D,O,R,z),E[0]+=I[0]*F,E[1]+=I[1]*F)}return E},r.c2p=function(g,b,v){return[b.c2p(g[0]),v.c2p(g[1])]},r.p2x=function(g,b,v){return[b.p2c(g[0]),v.p2c(g[1])]},r.dadi=function(g){var b=Math.max(0,Math.min(t.length-2,g));return t[b+1]-t[b]},r.dbdj=function(g){var b=Math.max(0,Math.min(h.length-2,g));return h[b+1]-h[b]},r.dxyda=function(g,b,v,k){var S=r.dxydi(null,g,b,v,k),E=r.dadi(g,v);return[S[0]/E,S[1]/E]},r.dxydb=function(g,b,v,k){var S=r.dxydj(null,g,b,v,k),E=r.dbdj(b,k);return[S[0]/E,S[1]/E]},r.dxyda_rough=function(g,b,v){var k=x*(v||.1),S=r.ab2xy(g+k,b,!0),E=r.ab2xy(g-k,b,!0);return[(S[0]-E[0])*.5/k,(S[1]-E[1])*.5/k]},r.dxydb_rough=function(g,b,v){var k=u*(v||.1),S=r.ab2xy(g,b+k,!0),E=r.ab2xy(g,b-k,!0);return[(S[0]-E[0])*.5/k,(S[1]-E[1])*.5/k]},r.dpdx=function(g){return g._m},r.dpdy=function(g){return g._m}}},{"../../lib/search":535,"./compute_control_points":710,"./constants":711,"./create_i_derivative_evaluator":712,"./create_j_derivative_evaluator":713,"./create_spline_evaluator":714}],723:[function(i,U,V){var w=i("../../lib");U.exports=function(M,T,e){var a,n,r,t=[],h=[],s=M[0].length,o=M.length;function y(X,j){var re=0,ue,K=0;return X>0&&(ue=M[j][X-1])!==void 0&&(K++,re+=ue),X<s-1&&(ue=M[j][X+1])!==void 0&&(K++,re+=ue),j>0&&(ue=M[j-1][X])!==void 0&&(K++,re+=ue),j<o-1&&(ue=M[j+1][X])!==void 0&&(K++,re+=ue),re/Math.max(1,K)}var d=0;for(a=0;a<s;a++)for(n=0;n<o;n++)M[n][a]===void 0&&(t.push(a),h.push(n),M[n][a]=y(a,n)),d=Math.max(d,Math.abs(M[n][a]));if(!t.length)return M;var p,c,m,l,x,u,A,_,g,b,v,k=1e-5,S=0,E=100,C=0,F=t.length;do{for(S=0,r=0;r<F;r++){a=t[r],n=h[r];var I=0,D=0,R,O,z,B,G,Q;a===0?(G=Math.min(s-1,2),z=T[G],B=T[1],R=M[n][G],O=M[n][1],D+=O+(O-R)*(T[0]-B)/(B-z),I++):a===s-1&&(G=Math.max(0,s-3),z=T[G],B=T[s-2],R=M[n][G],O=M[n][s-2],D+=O+(O-R)*(T[s-1]-B)/(B-z),I++),(a===0||a===s-1)&&n>0&&n<o-1&&(p=e[n+1]-e[n],c=e[n]-e[n-1],D+=(c*M[n+1][a]+p*M[n-1][a])/(c+p),I++),n===0?(Q=Math.min(o-1,2),z=e[Q],B=e[1],R=M[Q][a],O=M[1][a],D+=O+(O-R)*(e[0]-B)/(B-z),I++):n===o-1&&(Q=Math.max(0,o-3),z=e[Q],B=e[o-2],R=M[Q][a],O=M[o-2][a],D+=O+(O-R)*(e[o-1]-B)/(B-z),I++),(n===0||n===o-1)&&a>0&&a<s-1&&(p=T[a+1]-T[a],c=T[a]-T[a-1],D+=(c*M[n][a+1]+p*M[n][a-1])/(c+p),I++),I?D/=I:(m=T[a+1]-T[a],l=T[a]-T[a-1],x=e[n+1]-e[n],u=e[n]-e[n-1],A=m*l*(m+l),_=x*u*(x+u),D=(A*(u*M[n+1][a]+x*M[n-1][a])+_*(l*M[n][a+1]+m*M[n][a-1]))/(_*(l+m)+A*(u+x))),g=D-M[n][a],b=g/d,S+=b*b,v=I?0:.85,M[n][a]+=g*(1+v)}S=Math.sqrt(S)}while(C++<E&&S>k);return w.log("Smoother converged to",S,"after",C,"iterations"),M}},{"../../lib":515}],724:[function(i,U,V){var w=i("../../lib").isArray1D;U.exports=function(M,T,e){var a=e("x"),n=a&&a.length,r=e("y"),t=r&&r.length;if(!n&&!t)return!1;if(T._cheater=!a,(!n||w(a))&&(!t||w(r))){var h=n?a.length:1/0;t&&(h=Math.min(h,r.length)),T.a&&T.a.length&&(h=Math.min(h,T.a.length)),T.b&&T.b.length&&(h=Math.min(h,T.b.length)),T._length=h}else T._length=null;return!0}},{"../../lib":515}],725:[function(i,U,V){var w=i("../../plots/template_attributes").hovertemplateAttrs,f=i("../scattergeo/attributes"),M=i("../../components/colorscale/attributes"),T=i("../../plots/attributes"),e=i("../../components/color/attributes").defaultLine,a=i("../../lib/extend").extendFlat,n=f.marker.line;U.exports=a({locations:{valType:"data_array",editType:"calc"},locationmode:f.locationmode,z:{valType:"data_array",editType:"calc"},geojson:a({},f.geojson,{}),featureidkey:f.featureidkey,text:a({},f.text,{}),hovertext:a({},f.hovertext,{}),marker:{line:{color:a({},n.color,{dflt:e}),width:a({},n.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:f.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:f.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:a({},T.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:w(),showlegend:a({},T.showlegend,{dflt:!1})},M("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/color/attributes":366,"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"../scattergeo/attributes":978}],726:[function(i,U,V){var w=i("fast-isnumeric"),f=i("../../constants/numerical").BADNUM,M=i("../../components/colorscale/calc"),T=i("../scatter/arrays_to_calcdata"),e=i("../scatter/calc_selection");function a(n){return n&&typeof n=="string"}U.exports=function(r,t){var h=t._length,s=new Array(h),o;t.geojson?o=function(m){return a(m)||w(m)}:o=a;for(var y=0;y<h;y++){var d=s[y]={},p=t.locations[y],c=t.z[y];o(p)&&w(c)?(d.loc=p,d.z=c):(d.loc=null,d.z=f),d.index=y}return T(s,t),M(r,t,{vals:t.z,containerStr:"",cLetter:"z"}),e(s,t),s}},{"../../components/colorscale/calc":375,"../../constants/numerical":491,"../scatter/arrays_to_calcdata":935,"../scatter/calc_selection":938,"fast-isnumeric":190}],727:[function(i,U,V){var w=i("../../lib"),f=i("../../components/colorscale/defaults"),M=i("./attributes");U.exports=function(e,a,n,r){function t(c,m){return w.coerce(e,a,M,c,m)}var h=t("locations"),s=t("z");if(!(h&&h.length&&w.isArrayOrTypedArray(s)&&s.length)){a.visible=!1;return}a._length=Math.min(h.length,s.length);var o=t("geojson"),y;(typeof o=="string"&&o!==""||w.isPlainObject(o))&&(y="geojson-id");var d=t("locationmode",y);d==="geojson-id"&&t("featureidkey"),t("text"),t("hovertext"),t("hovertemplate");var p=t("marker.line.width");p&&t("marker.line.color"),t("marker.opacity"),f(e,a,r,t,{prefix:"",cLetter:"z"}),w.coerceSelectionMarkerOpacity(a,t)}},{"../../components/colorscale/defaults":377,"../../lib":515,"./attributes":725}],728:[function(i,U,V){U.exports=function(f,M,T,e,a){f.location=M.location,f.z=M.z;var n=e[a];return n.fIn&&n.fIn.properties&&(f.properties=n.fIn.properties),f.ct=n.ct,f}},{}],729:[function(i,U,V){var w=i("../../plots/cartesian/axes"),f=i("./attributes"),M=i("../../lib").fillText;U.exports=function(a,n,r){var t=a.cd,h=t[0].trace,s=a.subplot,o,y,d,p,c=[n,r],m=[n+360,r];for(y=0;y<t.length;y++)if(o=t[y],p=!1,o._polygons){for(d=0;d<o._polygons.length;d++)o._polygons[d].contains(c)&&(p=!p),o._polygons[d].contains(m)&&(p=!p);if(p)break}if(!(!p||!o))return a.x0=a.x1=a.xa.c2p(o.ct),a.y0=a.y1=a.ya.c2p(o.ct),a.index=o.index,a.location=o.loc,a.z=o.z,a.zLabel=w.tickText(s.mockAxis,s.mockAxis.c2l(o.z),"hover").text,a.hovertemplate=o.hovertemplate,T(a,h,o),[a]};function T(e,a,n){if(!a.hovertemplate){var r=n.hi||a.hoverinfo,t=String(n.loc),h=r==="all"?f.hoverinfo.flags:r.split("+"),s=h.indexOf("name")!==-1,o=h.indexOf("location")!==-1,y=h.indexOf("z")!==-1,d=h.indexOf("text")!==-1,p=!s&&o,c=[];p?e.nameOverride=t:(s&&(e.nameOverride=a.name),o&&c.push(t)),y&&c.push(e.zLabel),d&&M(n,a,c),e.extraText=c.join("<br>")}}},{"../../lib":515,"../../plots/cartesian/axes":566,"./attributes":725}],730:[function(i,U,V){U.exports={attributes:i("./attributes"),supplyDefaults:i("./defaults"),colorbar:i("../heatmap/colorbar"),calc:i("./calc"),calcGeoJSON:i("./plot").calcGeoJSON,plot:i("./plot").plot,style:i("./style").style,styleOnSelect:i("./style").styleOnSelect,hoverPoints:i("./hover"),eventData:i("./event_data"),selectPoints:i("./select"),moduleType:"trace",name:"choropleth",basePlotModule:i("../../plots/geo"),categories:["geo","noOpacity","showLegend"],meta:{}}},{"../../plots/geo":598,"../heatmap/colorbar":804,"./attributes":725,"./calc":726,"./defaults":727,"./event_data":728,"./hover":729,"./plot":731,"./select":732,"./style":733}],731:[function(i,U,V){var w=i("@plotly/d3"),f=i("../../lib"),M=i("../../lib/geo_location_utils"),T=i("../../lib/topojson_utils").getTopojsonFeatures,e=i("../../plots/cartesian/autorange").findExtremes,a=i("./style").style;function n(t,h,s){var o=h.layers.backplot.select(".choroplethlayer");f.makeTraceGroups(o,s,"trace choropleth").each(function(y){var d=w.select(this),p=d.selectAll("path.choroplethlocation").data(f.identity);p.enter().append("path").classed("choroplethlocation",!0),p.exit().remove(),a(t,y)})}function r(t,h){for(var s=t[0].trace,o=h[s.geo],y=o._subplot,d=s.locationmode,p=s._length,c=d==="geojson-id"?M.extractTraceFeature(t):T(s,y.topojson),m=[],l=[],x=0;x<p;x++){var u=t[x],A=d==="geojson-id"?u.fOut:M.locationToFeature(d,u.loc,c);if(A){u.geojson=A,u.ct=A.properties.ct,u._polygons=M.feature2polygons(A);var _=M.computeBbox(A);m.push(_[0],_[2]),l.push(_[1],_[3])}else u.geojson=null}if(o.fitbounds==="geojson"&&d==="geojson-id"){var g=M.computeBbox(M.getTraceGeojson(s));m=[g[0],g[2]],l=[g[1],g[3]]}var b={padded:!0};s._extremes.lon=e(o.lonaxis._ax,m,b),s._extremes.lat=e(o.lataxis._ax,l,b)}U.exports={calcGeoJSON:r,plot:n}},{"../../lib":515,"../../lib/geo_location_utils":508,"../../lib/topojson_utils":544,"../../plots/cartesian/autorange":565,"./style":733,"@plotly/d3":58}],732:[function(i,U,V){U.exports=function(f,M){var T=f.cd,e=f.xaxis,a=f.yaxis,n=[],r,t,h,s,o;if(M===!1)for(r=0;r<T.length;r++)T[r].selected=0;else for(r=0;r<T.length;r++)t=T[r],h=t.ct,h&&(s=e.c2p(h),o=a.c2p(h),M.contains([s,o],null,r,f)?(n.push({pointNumber:r,lon:h[0],lat:h[1]}),t.selected=1):t.selected=0);return n}},{}],733:[function(i,U,V){var w=i("@plotly/d3"),f=i("../../components/color"),M=i("../../components/drawing"),T=i("../../components/colorscale");function e(r,t){t&&a(r,t)}function a(r,t){var h=t[0].trace,s=t[0].node3,o=s.selectAll(".choroplethlocation"),y=h.marker||{},d=y.line||{},p=T.makeColorScaleFuncFromTrace(h);o.each(function(c){w.select(this).attr("fill",p(c.z)).call(f.stroke,c.mlc||d.color).call(M.dashLine,"",c.mlw||d.width||0).style("opacity",y.opacity)}),M.selectedPointStyle(o,h)}function n(r,t){var h=t[0].node3,s=t[0].trace;s.selectedpoints?M.selectedPointStyle(h.selectAll(".choroplethlocation"),s):a(r,t)}U.exports={style:e,styleOnSelect:n}},{"../../components/color":367,"../../components/colorscale":379,"../../components/drawing":389,"@plotly/d3":58}],734:[function(i,U,V){var w=i("../choropleth/attributes"),f=i("../../components/colorscale/attributes"),M=i("../../plots/template_attributes").hovertemplateAttrs,T=i("../../plots/attributes"),e=i("../../lib/extend").extendFlat;U.exports=e({locations:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},geojson:{valType:"any",editType:"calc"},featureidkey:e({},w.featureidkey,{}),below:{valType:"string",editType:"plot"},text:w.text,hovertext:w.hovertext,marker:{line:{color:e({},w.marker.line.color,{editType:"plot"}),width:e({},w.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:e({},w.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:e({},w.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:e({},w.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:w.hoverinfo,hovertemplate:M({},{keys:["properties"]}),showlegend:e({},T.showlegend,{dflt:!1})},f("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"../choropleth/attributes":725}],735:[function(i,U,V){var w=i("fast-isnumeric"),f=i("../../lib"),M=i("../../components/colorscale"),T=i("../../components/drawing"),e=i("../../lib/geojson_utils").makeBlank,a=i("../../lib/geo_location_utils");function n(t){var h=t[0].trace,s=h.visible===!0&&h._length!==0,o={layout:{visibility:"none"},paint:{}},y={layout:{visibility:"none"},paint:{}},d=h._opts={fill:o,line:y,geojson:e()};if(!s)return d;var p=a.extractTraceFeature(t);if(!p)return d;var c=M.makeColorScaleFuncFromTrace(h),m=h.marker,l=m.line||{},x;f.isArrayOrTypedArray(m.opacity)&&(x=function(S){var E=S.mo;return w(E)?+f.constrain(E,0,1):0});var u;f.isArrayOrTypedArray(l.color)&&(u=function(S){return S.mlc});var A;f.isArrayOrTypedArray(l.width)&&(A=function(S){return S.mlw});for(var _=0;_<t.length;_++){var g=t[_],b=g.fOut;if(b){var v=b.properties;v.fc=c(g.z),x&&(v.mo=x(g)),u&&(v.mlc=u(g)),A&&(v.mlw=A(g)),g.ct=v.ct,g._polygons=a.feature2polygons(b)}}var k=x?{type:"identity",property:"mo"}:m.opacity;return f.extendFlat(o.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":k}),f.extendFlat(y.paint,{"line-color":u?{type:"identity",property:"mlc"}:l.color,"line-width":A?{type:"identity",property:"mlw"}:l.width,"line-opacity":k}),o.layout.visibility="visible",y.layout.visibility="visible",d.geojson={type:"FeatureCollection",features:p},r(t),d}function r(t){var h=t[0].trace,s=h._opts,o;if(h.selectedpoints){for(var y=T.makeSelectedPointStyleFns(h),d=0;d<t.length;d++){var p=t[d];p.fOut&&(p.fOut.properties.mo2=y.selectedOpacityFn(p))}o={type:"identity",property:"mo2"}}else o=f.isArrayOrTypedArray(h.marker.opacity)?{type:"identity",property:"mo"}:h.marker.opacity;return f.extendFlat(s.fill.paint,{"fill-opacity":o}),f.extendFlat(s.line.paint,{"line-opacity":o}),s}U.exports={convert:n,convertOnSelect:r}},{"../../components/colorscale":379,"../../components/drawing":389,"../../lib":515,"../../lib/geo_location_utils":508,"../../lib/geojson_utils":509,"fast-isnumeric":190}],736:[function(i,U,V){var w=i("../../lib"),f=i("../../components/colorscale/defaults"),M=i("./attributes");U.exports=function(e,a,n,r){function t(d,p){return w.coerce(e,a,M,d,p)}var h=t("locations"),s=t("z"),o=t("geojson");if(!w.isArrayOrTypedArray(h)||!h.length||!w.isArrayOrTypedArray(s)||!s.length||!(typeof o=="string"&&o!==""||w.isPlainObject(o))){a.visible=!1;return}t("featureidkey"),a._length=Math.min(h.length,s.length),t("below"),t("text"),t("hovertext"),t("hovertemplate");var y=t("marker.line.width");y&&t("marker.line.color"),t("marker.opacity"),f(e,a,r,t,{prefix:"",cLetter:"z"}),w.coerceSelectionMarkerOpacity(a,t)}},{"../../components/colorscale/defaults":377,"../../lib":515,"./attributes":734}],737:[function(i,U,V){U.exports={attributes:i("./attributes"),supplyDefaults:i("./defaults"),colorbar:i("../heatmap/colorbar"),calc:i("../choropleth/calc"),plot:i("./plot"),hoverPoints:i("../choropleth/hover"),eventData:i("../choropleth/event_data"),selectPoints:i("../choropleth/select"),styleOnSelect:function(w,f){if(f){var M=f[0].trace;M._glTrace.updateOnSelect(f)}},getBelow:function(w,f){for(var M=f.getMapLayers(),T=M.length-2;T>=0;T--){var e=M[T].id;if(typeof e=="string"&&e.indexOf("water")===0){for(var a=T+1;a<M.length;a++)if(e=M[a].id,typeof e=="string"&&e.indexOf("plotly-")===-1)return e}}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:i("../../plots/mapbox"),categories:["mapbox","gl","noOpacity","showLegend"],meta:{hr_name:"choropleth_mapbox"}}},{"../../plots/mapbox":622,"../choropleth/calc":726,"../choropleth/event_data":728,"../choropleth/hover":729,"../choropleth/select":732,"../heatmap/colorbar":804,"./attributes":734,"./defaults":736,"./plot":738}],738:[function(i,U,V){var w=i("./convert").convert,f=i("./convert").convertOnSelect,M=i("../../plots/mapbox/constants").traceLayerPrefix;function T(a,n){this.type="choroplethmapbox",this.subplot=a,this.uid=n,this.sourceId="source-"+n,this.layerList=[["fill",M+n+"-fill"],["line",M+n+"-line"]],this.below=null}var e=T.prototype;e.update=function(a){this._update(w(a)),a[0].trace._glTrace=this},e.updateOnSelect=function(a){this._update(f(a))},e._update=function(a){var n=this.subplot,r=this.layerList,t=n.belowLookup["trace-"+this.uid];n.map.getSource(this.sourceId).setData(a.geojson),t!==this.below&&(this._removeLayers(),this._addLayers(a,t),this.below=t);for(var h=0;h<r.length;h++){var s=r[h],o=s[0],y=s[1],d=a[o];n.setOptions(y,"setLayoutProperty",d.layout),d.layout.visibility==="visible"&&n.setOptions(y,"setPaintProperty",d.paint)}},e._addLayers=function(a,n){for(var r=this.subplot,t=this.layerList,h=this.sourceId,s=0;s<t.length;s++){var o=t[s],y=o[0],d=a[y];r.addLayer({type:y,id:o[1],source:h,layout:d.layout,paint:d.paint},n)}},e._removeLayers=function(){for(var a=this.subplot.map,n=this.layerList,r=n.length-1;r>=0;r--)a.removeLayer(n[r][1])},e.dispose=function(){var a=this.subplot.map;this._removeLayers(),a.removeSource(this.sourceId)},U.exports=function(n,r){var t=r[0].trace,h=new T(n,t.uid),s=h.sourceId,o=w(r),y=h.below=n.belowLookup["trace-"+t.uid];return n.map.addSource(s,{type:"geojson",data:o.geojson}),h._addLayers(o,y),r[0].trace._glTrace=h,h}},{"../../plots/mapbox/constants":620,"./convert":735}],739:[function(i,U,V){var w=i("../../components/colorscale/attributes"),f=i("../../plots/cartesian/axis_format_attributes").axisHoverFormat,M=i("../../plots/template_attributes").hovertemplateAttrs,T=i("../mesh3d/attributes"),e=i("../../plots/attributes"),a=i("../../lib/extend").extendFlat,n={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute"],editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:M({editType:"calc"},{keys:["norm"]}),uhoverformat:f("u",1),vhoverformat:f("v",1),whoverformat:f("w",1),xhoverformat:f("x"),yhoverformat:f("y"),zhoverformat:f("z"),showlegend:a({},e.showlegend,{dflt:!1})};a(n,w("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"}));var r=["opacity","lightposition","lighting"];r.forEach(function(t){n[t]=T[t]}),n.hoverinfo=a({},e.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","text","name"],dflt:"x+y+z+norm+text+name"}),n.transforms=void 0,U.exports=n},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../mesh3d/attributes":876}],740:[function(i,U,V){var w=i("../../components/colorscale/calc");U.exports=function(M,T){for(var e=T.u,a=T.v,n=T.w,r=Math.min(T.x.length,T.y.length,T.z.length,e.length,a.length,n.length),t=-1/0,h=1/0,s=0;s<r;s++){var o=e[s],y=a[s],d=n[s],p=Math.sqrt(o*o+y*y+d*d);t=Math.max(t,p),h=Math.min(h,p)}T._len=r,T._normMax=t,w(M,T,{vals:[h,t],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":375}],741:[function(i,U,V){var w=i("../../../stackgl_modules").gl_cone3d,f=i("../../../stackgl_modules").gl_cone3d.createConeMesh,M=i("../../lib").simpleMap,T=i("../../lib/gl_format_color").parseColorScale,e=i("../../components/colorscale").extractOpts,a=i("../../plots/gl3d/zip3");function n(d,p){this.scene=d,this.uid=p,this.mesh=null,this.data=null}var r=n.prototype;r.handlePick=function(d){if(d.object===this.mesh){var p=d.index=d.data.index,c=this.data.x[p],m=this.data.y[p],l=this.data.z[p],x=this.data.u[p],u=this.data.v[p],A=this.data.w[p];d.traceCoordinate=[c,m,l,x,u,A,Math.sqrt(x*x+u*u+A*A)];var _=this.data.hovertext||this.data.text;return Array.isArray(_)&&_[p]!==void 0?d.textLabel=_[p]:_&&(d.textLabel=_),!0}};var t={xaxis:0,yaxis:1,zaxis:2},h={tip:1,tail:0,cm:.25,center:.5},s={tip:1,tail:1,cm:.75,center:.5};function o(d,p){var c=d.fullSceneLayout,m=d.dataScale,l={};function x(g,b){var v=c[b],k=m[t[b]];return M(g,function(S){return v.d2l(S)*k})}l.vectors=a(x(p.u,"xaxis"),x(p.v,"yaxis"),x(p.w,"zaxis"),p._len),l.positions=a(x(p.x,"xaxis"),x(p.y,"yaxis"),x(p.z,"zaxis"),p._len);var u=e(p);l.colormap=T(p),l.vertexIntensityBounds=[u.min/p._normMax,u.max/p._normMax],l.coneOffset=h[p.anchor],p.sizemode==="scaled"?l.coneSize=p.sizeref||.5:l.coneSize=p.sizeref&&p._normMax?p.sizeref/p._normMax:.5;var A=w(l),_=p.lightposition;return A.lightPosition=[_.x,_.y,_.z],A.ambient=p.lighting.ambient,A.diffuse=p.lighting.diffuse,A.specular=p.lighting.specular,A.roughness=p.lighting.roughness,A.fresnel=p.lighting.fresnel,A.opacity=p.opacity,p._pad=s[p.anchor]*A.vectorScale*A.coneScale*p._normMax,A}r.update=function(d){this.data=d;var p=o(this.scene,d);this.mesh.update(p)},r.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function y(d,p){var c=d.glplot.gl,m=o(d,p),l=f(c,m),x=new n(d,p.uid);return x.mesh=l,x.data=p,l._trace=x,d.glplot.add(l),x}U.exports=y},{"../../../stackgl_modules":1133,"../../components/colorscale":379,"../../lib":515,"../../lib/gl_format_color":511,"../../plots/gl3d/zip3":618}],742:[function(i,U,V){var w=i("../../lib"),f=i("../../components/colorscale/defaults"),M=i("./attributes");U.exports=function(e,a,n,r){function t(c,m){return w.coerce(e,a,M,c,m)}var h=t("u"),s=t("v"),o=t("w"),y=t("x"),d=t("y"),p=t("z");if(!h||!h.length||!s||!s.length||!o||!o.length||!y||!y.length||!d||!d.length||!p||!p.length){a.visible=!1;return}t("sizeref"),t("sizemode"),t("anchor"),t("lighting.ambient"),t("lighting.diffuse"),t("lighting.specular"),t("lighting.roughness"),t("lighting.fresnel"),t("lightposition.x"),t("lightposition.y"),t("lightposition.z"),f(e,a,r,t,{prefix:"",cLetter:"c"}),t("text"),t("hovertext"),t("hovertemplate"),t("uhoverformat"),t("vhoverformat"),t("whoverformat"),t("xhoverformat"),t("yhoverformat"),t("zhoverformat"),a._length=null}},{"../../components/colorscale/defaults":377,"../../lib":515,"./attributes":739}],743:[function(i,U,V){U.exports={moduleType:"trace",name:"cone",basePlotModule:i("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:i("./attributes"),supplyDefaults:i("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:i("./calc"),plot:i("./convert"),eventData:function(w,f){return w.norm=f.traceCoordinate[6],w},meta:{}}},{"../../plots/gl3d":607,"./attributes":739,"./calc":740,"./convert":741,"./defaults":742}],744:[function(i,U,V){var w=i("../heatmap/attributes"),f=i("../scatter/attributes"),M=i("../../plots/cartesian/axis_format_attributes"),T=M.axisHoverFormat,e=M.descriptionOnlyNumbers,a=i("../../components/colorscale/attributes"),n=i("../../components/drawing/attributes").dash,r=i("../../plots/font_attributes"),t=i("../../lib/extend").extendFlat,h=i("../../constants/filter_ops"),s=h.COMPARISON_OPS2,o=h.INTERVAL_OPS,y=f.line;U.exports=t({z:w.z,x:w.x,x0:w.x0,dx:w.dx,y:w.y,y0:w.y0,dy:w.dy,xperiod:w.xperiod,yperiod:w.yperiod,xperiod0:f.xperiod0,yperiod0:f.yperiod0,xperiodalignment:w.xperiodalignment,yperiodalignment:w.yperiodalignment,text:w.text,hovertext:w.hovertext,transpose:w.transpose,xtype:w.xtype,ytype:w.ytype,xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z",1),hovertemplate:w.hovertemplate,texttemplate:t({},w.texttemplate,{}),textfont:t({},w.textfont,{}),hoverongaps:w.hoverongaps,connectgaps:t({},w.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:r({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot",description:e("contour label")},operation:{valType:"enumerated",values:[].concat(s).concat(o),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:t({},y.color,{editType:"style+colorbars"}),width:{valType:"number",min:0,editType:"style+colorbars"},dash:n,smoothing:t({},y.smoothing,{}),editType:"plot"}},a("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":374,"../../components/drawing/attributes":388,"../../constants/filter_ops":487,"../../lib/extend":505,"../../plots/cartesian/axis_format_attributes":569,"../../plots/font_attributes":594,"../heatmap/attributes":801,"../scatter/attributes":936}],745:[function(i,U,V){var w=i("../../components/colorscale"),f=i("../heatmap/calc"),M=i("./set_contours"),T=i("./end_plus");U.exports=function(a,n){var r=f(a,n),t=r[0].z;M(n,t);var h=n.contours,s=w.extractOpts(n),o;if(h.coloring==="heatmap"&&s.auto&&n.autocontour===!1){var y=h.start,d=T(h),p=h.size||1,c=Math.floor((d-y)/p)+1;isFinite(p)||(p=1,c=1);var m=y-p/2,l=m+c*p;o=[m,l]}else o=t;return w.calc(a,n,{vals:o,cLetter:"z"}),r}},{"../../components/colorscale":379,"../heatmap/calc":802,"./end_plus":755,"./set_contours":763}],746:[function(i,U,V){U.exports=function(w,f){var M=w[0],T=M.z,e;switch(f.type){case"levels":var a=Math.min(T[0][0],T[0][1]);for(e=0;e<w.length;e++){var n=w[e];n.prefixBoundary=!n.edgepaths.length&&(a>n.level||n.starts.length&&a===n.level)}break;case"constraint":if(M.prefixBoundary=!1,M.edgepaths.length)return;var r=M.x.length,t=M.y.length,h=-1/0,s=1/0;for(e=0;e<t;e++)s=Math.min(s,T[e][0]),s=Math.min(s,T[e][r-1]),h=Math.max(h,T[e][0]),h=Math.max(h,T[e][r-1]);for(e=1;e<r-1;e++)s=Math.min(s,T[0][e]),s=Math.min(s,T[t-1][e]),h=Math.max(h,T[0][e]),h=Math.max(h,T[t-1][e]);var o=f.value,y,d;switch(f._operation){case">":o>h&&(M.prefixBoundary=!0);break;case"<":(o<s||M.starts.length&&o===s)&&(M.prefixBoundary=!0);break;case"[]":y=Math.min(o[0],o[1]),d=Math.max(o[0],o[1]),(d<s||y>h||M.starts.length&&d===s)&&(M.prefixBoundary=!0);break;case"][":y=Math.min(o[0],o[1]),d=Math.max(o[0],o[1]),y<s&&d>h&&(M.prefixBoundary=!0);break}break}}},{}],747:[function(i,U,V){var w=i("../../components/colorscale"),f=i("./make_color_map"),M=i("./end_plus");function T(e,a,n){var r=a.contours,t=a.line,h=r.size||1,s=r.coloring,o=f(a,{isColorbar:!0});if(s==="heatmap"){var y=w.extractOpts(a);n._fillgradient=y.reversescale?w.flipScale(y.colorscale):y.colorscale,n._zrange=[y.min,y.max]}else s==="fill"&&(n._fillcolor=o);n._line={color:s==="lines"?o:t.color,width:r.showlines!==!1?t.width:0,dash:t.dash},n._levels={start:r.start,end:M(r),size:h}}U.exports={min:"zmin",max:"zmax",calc:T}},{"../../components/colorscale":379,"./end_plus":755,"./make_color_map":760}],748:[function(i,U,V){U.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},{}],749:[function(i,U,V){var w=i("fast-isnumeric"),f=i("./label_defaults"),M=i("../../components/color"),T=M.addOpacity,e=M.opacity,a=i("../../constants/filter_ops"),n=a.CONSTRAINT_REDUCTION,r=a.COMPARISON_OPS2;U.exports=function(s,o,y,d,p,c){var m=o.contours,l,x,u,A=y("contours.operation");if(m._operation=n[A],t(y,m),A==="="?l=m.showlines=!0:(l=y("contours.showlines"),u=y("fillcolor",T((s.line||{}).color||p,.5))),l){var _=u&&e(u)?T(o.fillcolor,1):p;x=y("line.color",_),y("line.width",2),y("line.dash")}y("line.smoothing"),f(y,d,x,c)};function t(h,s){var o;r.indexOf(s.operation)===-1?(h("contours.value",[0,1]),Array.isArray(s.value)?s.value.length>2?s.value=s.value.slice(2):s.length===0?s.value=[0,1]:s.length<2?(o=parseFloat(s.value[0]),s.value=[o,o+1]):s.value=[parseFloat(s.value[0]),parseFloat(s.value[1])]:w(s.value)&&(o=parseFloat(s.value),s.value=[o,o+1])):(h("contours.value",0),w(s.value)||(Array.isArray(s.value)?s.value=parseFloat(s.value[0]):s.value=0))}},{"../../components/color":367,"../../constants/filter_ops":487,"./label_defaults":759,"fast-isnumeric":190}],750:[function(i,U,V){var w=i("../../constants/filter_ops"),f=i("fast-isnumeric");U.exports={"[]":T("[]"),"][":T("]["),">":e(">"),"<":e("<"),"=":e("=")};function M(a,n){var r=Array.isArray(n),t;function h(s){return f(s)?+s:null}return w.COMPARISON_OPS2.indexOf(a)!==-1?t=h(r?n[0]:n):w.INTERVAL_OPS.indexOf(a)!==-1?t=r?[h(n[0]),h(n[1])]:[h(n),h(n)]:w.SET_OPS.indexOf(a)!==-1&&(t=r?n.map(h):[h(n)]),t}function T(a){return function(n){n=M(a,n);var r=Math.min(n[0],n[1]),t=Math.max(n[0],n[1]);return{start:r,end:t,size:t-r}}}function e(a){return function(n){return n=M(a,n),{start:n,end:1/0,size:1/0}}}},{"../../constants/filter_ops":487,"fast-isnumeric":190}],751:[function(i,U,V){U.exports=function(f,M,T,e){var a=e("contours.start"),n=e("contours.end"),r=a===!1||n===!1,t=T("contours.size"),h;r?h=M.autocontour=!0:h=T("autocontour",!1),(h||!t)&&T("ncontours")}},{}],752:[function(i,U,V){var w=i("../../lib");U.exports=function(M,T){var e,a,n,r=function(s){return s.reverse()},t=function(s){return s};switch(T){case"=":case"<":return M;case">":for(M.length!==1&&w.warn("Contour data invalid for the specified inequality operation."),a=M[0],e=0;e<a.edgepaths.length;e++)a.edgepaths[e]=r(a.edgepaths[e]);for(e=0;e<a.paths.length;e++)a.paths[e]=r(a.paths[e]);for(e=0;e<a.starts.length;e++)a.starts[e]=r(a.starts[e]);return M;case"][":var h=r;r=t,t=h;case"[]":for(M.length!==2&&w.warn("Contour data invalid for the specified inequality range operation."),a=f(M[0]),n=f(M[1]),e=0;e<a.edgepaths.length;e++)a.edgepaths[e]=r(a.edgepaths[e]);for(e=0;e<a.paths.length;e++)a.paths[e]=r(a.paths[e]);for(e=0;e<a.starts.length;e++)a.starts[e]=r(a.starts[e]);for(;n.edgepaths.length;)a.edgepaths.push(t(n.edgepaths.shift()));for(;n.paths.length;)a.paths.push(t(n.paths.shift()));for(;n.starts.length;)a.starts.push(t(n.starts.shift()));return[a]}};function f(M){return w.extendFlat({},M,{edgepaths:w.extendDeep([],M.edgepaths),paths:w.extendDeep([],M.paths),starts:w.extendDeep([],M.starts)})}},{"../../lib":515}],753:[function(i,U,V){var w=i("../../lib"),f=i("../heatmap/xyz_defaults"),M=i("../scatter/period_defaults"),T=i("./constraint_defaults"),e=i("./contours_defaults"),a=i("./style_defaults"),n=i("../heatmap/label_defaults"),r=i("./attributes");U.exports=function(h,s,o,y){function d(l,x){return w.coerce(h,s,r,l,x)}function p(l){return w.coerce2(h,s,r,l)}var c=f(h,s,d,y);if(!c){s.visible=!1;return}M(h,s,y,d),d("xhoverformat"),d("yhoverformat"),d("text"),d("hovertext"),d("hoverongaps"),d("hovertemplate");var m=d("contours.type")==="constraint";d("connectgaps",w.isArray1D(s.z)),m?T(h,s,d,y,o):(e(h,s,d,p),a(h,s,d,y)),s.contours&&s.contours.coloring==="heatmap"&&n(d,y)}},{"../../lib":515,"../heatmap/label_defaults":811,"../heatmap/xyz_defaults":816,"../scatter/period_defaults":956,"./attributes":744,"./constraint_defaults":749,"./contours_defaults":751,"./style_defaults":765}],754:[function(i,U,V){var w=i("../../lib"),f=i("./constraint_mapping"),M=i("./end_plus");U.exports=function(e,a,n){for(var r=e.type==="constraint"?f[e._operation](e.value):e,t=r.size,h=[],s=M(r),o=n.trace._carpetTrace,y=o?{xaxis:o.aaxis,yaxis:o.baxis,x:n.a,y:n.b}:{xaxis:a.xaxis,yaxis:a.yaxis,x:n.x,y:n.y},d=r.start;d<s;d+=t)if(h.push(w.extendFlat({level:d,crossings:{},starts:[],edgepaths:[],paths:[],z:n.z,smoothing:n.trace.line.smoothing},y)),h.length>1e3){w.warn("Too many contours, clipping at 1000",e);break}return h}},{"../../lib":515,"./constraint_mapping":750,"./end_plus":755}],755:[function(i,U,V){U.exports=function(f){return f.end+f.size/1e6}},{}],756:[function(i,U,V){var w=i("../../lib"),f=i("./constants");U.exports=function(t,h,s){var o,y,d,p,c;for(h=h||.01,s=s||.01,d=0;d<t.length;d++){for(p=t[d],c=0;c<p.starts.length;c++)y=p.starts[c],e(p,y,"edge",h,s);for(o=0;Object.keys(p.crossings).length&&o<1e4;)o++,y=Object.keys(p.crossings)[0].split(",").map(Number),e(p,y,void 0,h,s);o===1e4&&w.log("Infinite loop in contour?")}};function M(r,t,h,s){return Math.abs(r[0]-t[0])<h&&Math.abs(r[1]-t[1])<s}function T(r,t){var h=r[2]-t[2],s=r[3]-t[3];return Math.sqrt(h*h+s*s)}function e(r,t,h,s,o){var y=t.join(","),d=r.crossings[y],p=a(d,h,t),c=[n(r,t,[-p[0],-p[1]])],m=r.z.length,l=r.z[0].length,x=t.slice(),u=p.slice(),A;for(A=0;A<1e4;A++){if(d>20?(d=f.CHOOSESADDLE[d][(p[0]||p[1])<0?0:1],r.crossings[y]=f.SADDLEREMAINDER[d]):delete r.crossings[y],p=f.NEWDELTA[d],!p){w.log("Found bad marching index:",d,t,r.level);break}c.push(n(r,t,p)),t[0]+=p[0],t[1]+=p[1],y=t.join(","),M(c[c.length-1],c[c.length-2],s,o)&&c.pop();var _=p[0]&&(t[0]<0||t[0]>l-2)||p[1]&&(t[1]<0||t[1]>m-2),g=t[0]===x[0]&&t[1]===x[1]&&p[0]===u[0]&&p[1]===u[1];if(g||h&&_)break;d=r.crossings[y]}A===1e4&&w.log("Infinite loop in contour?");var b=M(c[0],c[c.length-1],s,o),v=0,k=.2*r.smoothing,S=[],E=0,C,F,I,D,R,O,z,B,G,Q,X;for(A=1;A<c.length;A++)z=T(c[A],c[A-1]),v+=z,S.push(z);var j=v/S.length*k;function re(te){return c[te%c.length]}for(A=c.length-2;A>=E;A--)if(C=S[A],C<j){for(I=0,F=A-1;F>=E&&C+S[F]<j;F--)C+=S[F];if(b&&A===c.length-2)for(I=0;I<F&&C+S[I]<j;I++)C+=S[I];R=A-F+I+1,O=Math.floor((A+F+I+2)/2),!b&&A===c.length-2?D=c[c.length-1]:!b&&F===-1?D=c[0]:R%2?D=re(O):D=[(re(O)[0]+re(O+1)[0])/2,(re(O)[1]+re(O+1)[1])/2],c.splice(F+1,A-F+1,D),A=F+1,I&&(E=I),b&&(A===c.length-2?c[I]=c[c.length-1]:A===0&&(c[c.length-1]=c[0]))}for(c.splice(0,E),A=0;A<c.length;A++)c[A].length=2;if(!(c.length<2))if(b)c.pop(),r.paths.push(c);else{h||w.log("Unclosed interior contour?",r.level,x.join(","),c.join("L"));var ue=!1;for(B=0;B<r.edgepaths.length;B++)if(Q=r.edgepaths[B],!ue&&M(Q[0],c[c.length-1],s,o)){c.pop(),ue=!0;var K=!1;for(G=0;G<r.edgepaths.length;G++)if(X=r.edgepaths[G],M(X[X.length-1],c[0],s,o)){K=!0,c.shift(),r.edgepaths.splice(B,1),G===B?r.paths.push(c.concat(X)):(G>B&&G--,r.edgepaths[G]=X.concat(c,Q));break}K||(r.edgepaths[B]=c.concat(Q))}for(B=0;B<r.edgepaths.length&&!ue;B++)Q=r.edgepaths[B],M(Q[Q.length-1],c[0],s,o)&&(c.shift(),r.edgepaths[B]=Q.concat(c),ue=!0);ue||r.edgepaths.push(c)}}function a(r,t,h){var s=0,o=0;return r>20&&t?r===208||r===1114?s=h[0]===0?1:-1:o=h[1]===0?1:-1:f.BOTTOMSTART.indexOf(r)!==-1?o=1:f.LEFTSTART.indexOf(r)!==-1?s=1:f.TOPSTART.indexOf(r)!==-1?o=-1:s=-1,[s,o]}function n(r,t,h){var s=t[0]+Math.max(h[0],0),o=t[1]+Math.max(h[1],0),y=r.z[o][s],d=r.xaxis,p=r.yaxis;if(h[1]){var c=(r.level-y)/(r.z[o][s+1]-y),m=(c!==1?(1-c)*d.c2l(r.x[s]):0)+(c!==0?c*d.c2l(r.x[s+1]):0);return[d.c2p(d.l2c(m),!0),p.c2p(r.y[o],!0),s+c,o]}else{var l=(r.level-y)/(r.z[o+1][s]-y),x=(l!==1?(1-l)*p.c2l(r.y[o]):0)+(l!==0?l*p.c2l(r.y[o+1]):0);return[d.c2p(r.x[s],!0),p.c2p(p.l2c(x),!0),s,o+l]}}},{"../../lib":515,"./constants":748}],757:[function(i,U,V){var w=i("../../components/color"),f=i("../heatmap/hover");U.exports=function(T,e,a,n,r){r||(r={}),r.isContour=!0;var t=f(T,e,a,n,r);return t&&t.forEach(function(h){var s=h.trace;s.contours.type==="constraint"&&(s.fillcolor&&w.opacity(s.fillcolor)?h.color=w.addOpacity(s.fillcolor,1):s.contours.showlines&&w.opacity(s.line.color)&&(h.color=w.addOpacity(s.line.color,1)))}),t}},{"../../components/color":367,"../heatmap/hover":808}],758:[function(i,U,V){U.exports={attributes:i("./attributes"),supplyDefaults:i("./defaults"),calc:i("./calc"),plot:i("./plot").plot,style:i("./style"),colorbar:i("./colorbar"),hoverPoints:i("./hover"),moduleType:"trace",name:"contour",basePlotModule:i("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}},{"../../plots/cartesian":578,"./attributes":744,"./calc":745,"./colorbar":747,"./defaults":753,"./hover":757,"./plot":762,"./style":764}],759:[function(i,U,V){var w=i("../../lib");U.exports=function(M,T,e,a){a||(a={});var n=M("contours.showlabels");if(n){var r=T.font;w.coerceFont(M,"contours.labelfont",{family:r.family,size:r.size,color:e}),M("contours.labelformat")}a.hasHover!==!1&&M("zhoverformat")}},{"../../lib":515}],760:[function(i,U,V){var w=i("@plotly/d3"),f=i("../../components/colorscale"),M=i("./end_plus");U.exports=function(e){var a=e.contours,n=a.start,r=M(a),t=a.size||1,h=Math.floor((r-n)/t)+1,s=a.coloring==="lines"?0:1,o=f.extractOpts(e);isFinite(t)||(t=1,h=1);var y=o.reversescale?f.flipScale(o.colorscale):o.colorscale,d=y.length,p=new Array(d),c=new Array(d),m,l;if(a.coloring==="heatmap"){var x=o.min,u=o.max;for(l=0;l<d;l++)m=y[l],p[l]=m[0]*(u-x)+x,c[l]=m[1];var A=w.extent([x,u,a.start,a.start+t*(h-1)]),_=A[x<u?0:1],g=A[x<u?1:0];_!==x&&(p.splice(0,0,_),c.splice(0,0,c[0])),g!==u&&(p.push(g),c.push(c[c.length-1]))}else for(l=0;l<d;l++)m=y[l],p[l]=(m[0]*(h+s-1)-s/2)*t+n,c[l]=m[1];return f.makeColorScaleFunc({domain:p,range:c},{noNumericCheck:!0})}},{"../../components/colorscale":379,"./end_plus":755,"@plotly/d3":58}],761:[function(i,U,V){var w=i("./constants");U.exports=function(T){var e=T[0].z,a=e.length,n=e[0].length,r=a===2||n===2,t,h,s,o,y,d,p,c,m;for(h=0;h<a-1;h++)for(o=[],h===0&&(o=o.concat(w.BOTTOMSTART)),h===a-2&&(o=o.concat(w.TOPSTART)),t=0;t<n-1;t++)for(s=o.slice(),t===0&&(s=s.concat(w.LEFTSTART)),t===n-2&&(s=s.concat(w.RIGHTSTART)),y=t+","+h,d=[[e[h][t],e[h][t+1]],[e[h+1][t],e[h+1][t+1]]],m=0;m<T.length;m++)c=T[m],p=f(c.level,d),p&&(c.crossings[y]=p,s.indexOf(p)!==-1&&(c.starts.push([t,h]),r&&s.indexOf(p,s.indexOf(p)+1)!==-1&&c.starts.push([t,h])))};function f(M,T){var e=(T[0][0]>M?0:1)+(T[0][1]>M?0:2)+(T[1][1]>M?0:4)+(T[1][0]>M?0:8);if(e===5||e===10){var a=(T[0][0]+T[0][1]+T[1][0]+T[1][1])/4;return M>a?e===5?713:1114:e===5?104:208}return e===15?0:e}},{"./constants":748}],762:[function(i,U,V){var w=i("@plotly/d3"),f=i("../../lib"),M=i("../../components/drawing"),T=i("../../components/colorscale"),e=i("../../lib/svg_text_utils"),a=i("../../plots/cartesian/axes"),n=i("../../plots/cartesian/set_convert"),r=i("../heatmap/plot"),t=i("./make_crossings"),h=i("./find_all_paths"),s=i("./empty_pathinfo"),o=i("./convert_to_constraints"),y=i("./close_boundaries"),d=i("./constants"),p=d.LABELOPTIMIZER;V.plot=function(b,v,k,S){var E=v.xaxis,C=v.yaxis;f.makeTraceGroups(S,k,"contour").each(function(F){var I=w.select(this),D=F[0],R=D.trace,O=D.x,z=D.y,B=R.contours,G=s(B,v,D),Q=f.ensureSingle(I,"g","heatmapcoloring"),X=[];B.coloring==="heatmap"&&(X=[F]),r(b,v,X,Q),t(G),h(G);var j=E.c2p(O[0],!0),re=E.c2p(O[O.length-1],!0),ue=C.c2p(z[0],!0),K=C.c2p(z[z.length-1],!0),te=[[j,K],[re,K],[re,ue],[j,ue]],Y=G;B.type==="constraint"&&(Y=o(G,B._operation)),c(I,te,B),m(I,Y,te,B),x(I,G,b,D,B),A(I,v,b,D,te)})};function c(g,b,v){var k=f.ensureSingle(g,"g","contourbg"),S=k.selectAll("path").data(v.coloring==="fill"?[0]:[]);S.enter().append("path"),S.exit().remove(),S.attr("d","M"+b.join("L")+"Z").style("stroke","none")}function m(g,b,v,k){var S=k.coloring==="fill"||k.type==="constraint"&&k._operation!=="=",E="M"+v.join("L")+"Z";S&&y(b,k);var C=f.ensureSingle(g,"g","contourfill"),F=C.selectAll("path").data(S?b:[]);F.enter().append("path"),F.exit().remove(),F.each(function(I){var D=(I.prefixBoundary?E:"")+l(I,v);D?w.select(this).attr("d",D).style("stroke","none"):w.select(this).remove()})}function l(g,b){var v="",k=0,S=g.edgepaths.map(function(j,re){return re}),E=!0,C,F,I,D,R,O;function z(j){return Math.abs(j[1]-b[0][1])<.01}function B(j){return Math.abs(j[1]-b[2][1])<.01}function G(j){return Math.abs(j[0]-b[0][0])<.01}function Q(j){return Math.abs(j[0]-b[2][0])<.01}for(;S.length;){for(O=M.smoothopen(g.edgepaths[k],g.smoothing),v+=E?O:O.replace(/^M/,"L"),S.splice(S.indexOf(k),1),C=g.edgepaths[k][g.edgepaths[k].length-1],D=-1,I=0;I<4;I++){if(!C){f.log("Missing end?",k,g);break}for(z(C)&&!Q(C)?F=b[1]:G(C)?F=b[0]:B(C)?F=b[3]:Q(C)&&(F=b[2]),R=0;R<g.edgepaths.length;R++){var X=g.edgepaths[R][0];Math.abs(C[0]-F[0])<.01?Math.abs(C[0]-X[0])<.01&&(X[1]-C[1])*(F[1]-X[1])>=0&&(F=X,D=R):Math.abs(C[1]-F[1])<.01?Math.abs(C[1]-X[1])<.01&&(X[0]-C[0])*(F[0]-X[0])>=0&&(F=X,D=R):f.log("endpt to newendpt is not vert. or horz.",C,F,X)}if(C=F,D>=0)break;v+="L"+F}if(D===g.edgepaths.length){f.log("unclosed perimeter path");break}k=D,E=S.indexOf(k)===-1,E&&(k=S[0],v+="Z")}for(k=0;k<g.paths.length;k++)v+=M.smoothclosed(g.paths[k],g.smoothing);return v}function x(g,b,v,k,S){var E=f.ensureSingle(g,"g","contourlines"),C=S.showlines!==!1,F=S.showlabels,I=C&&F,D=V.createLines(E,C||F,b),R=V.createLineClip(E,I,v,k.trace.uid),O=g.selectAll("g.contourlabels").data(F?[0]:[]);if(O.exit().remove(),O.enter().append("g").classed("contourlabels",!0),F){var z=[],B=[];f.clearLocationCache();var G=V.labelFormatter(v,k),Q=M.tester.append("text").attr("data-notex",1).call(M.font,S.labelfont),X=b[0].xaxis,j=b[0].yaxis,re=X._length,ue=j._length,K=X.range,te=j.range,Y=f.aggNums(Math.min,null,k.x),H=f.aggNums(Math.max,null,k.x),ee=f.aggNums(Math.min,null,k.y),ne=f.aggNums(Math.max,null,k.y),Z=Math.max(X.c2p(Y,!0),0),q=Math.min(X.c2p(H,!0),re),ie=Math.max(j.c2p(ne,!0),0),se=Math.min(j.c2p(ee,!0),ue),ae={};K[0]<K[1]?(ae.left=Z,ae.right=q):(ae.left=q,ae.right=Z),te[0]<te[1]?(ae.top=ie,ae.bottom=se):(ae.top=se,ae.bottom=ie),ae.middle=(ae.top+ae.bottom)/2,ae.center=(ae.left+ae.right)/2,z.push([[ae.left,ae.top],[ae.right,ae.top],[ae.right,ae.bottom],[ae.left,ae.bottom]]);var oe=Math.sqrt(re*re+ue*ue),be=d.LABELDISTANCE*oe/Math.max(1,b.length/d.LABELINCREASE);D.each(function(ce){var de=V.calcTextOpts(ce.level,G,Q,v);w.select(this).selectAll("path").each(function(){var ye=this,ge=f.getVisibleSegment(ye,ae,de.height/2);if(!!ge&&!(ge.len<(de.width+de.height)*d.LABELMIN))for(var me=Math.min(Math.ceil(ge.len/be),d.LABELMAX),Se=0;Se<me;Se++){var Le=V.findBestTextLocation(ye,ge,de,B,ae);if(!Le)break;V.addLabelData(Le,de,B,z)}})}),Q.remove(),V.drawLabels(O,B,v,R,I?z:null)}F&&!C&&D.remove()}V.createLines=function(g,b,v){var k=v[0].smoothing,S=g.selectAll("g.contourlevel").data(b?v:[]);if(S.exit().remove(),S.enter().append("g").classed("contourlevel",!0),b){var E=S.selectAll("path.openline").data(function(F){return F.pedgepaths||F.edgepaths});E.exit().remove(),E.enter().append("path").classed("openline",!0),E.attr("d",function(F){return M.smoothopen(F,k)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke");var C=S.selectAll("path.closedline").data(function(F){return F.ppaths||F.paths});C.exit().remove(),C.enter().append("path").classed("closedline",!0),C.attr("d",function(F){return M.smoothclosed(F,k)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke")}return S},V.createLineClip=function(g,b,v,k){var S=v._fullLayout._clips,E=b?"clipline"+k:null,C=S.selectAll("#"+E).data(b?[0]:[]);return C.exit().remove(),C.enter().append("clipPath").classed("contourlineclip",!0).attr("id",E),M.setClipUrl(g,E,v),C},V.labelFormatter=function(g,b){var v=g._fullLayout,k=b.trace,S=k.contours,E={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};if(S.labelformat)E.tickformat=S.labelformat,n(E,v);else{var C=T.extractOpts(k);if(C&&C.colorbar&&C.colorbar._axis)E=C.colorbar._axis;else{if(S.type==="constraint"){var F=S.value;Array.isArray(F)?E.range=[F[0],F[F.length-1]]:E.range=[F,F]}else E.range=[S.start,S.end],E.nticks=(S.end-S.start)/S.size;E.range[0]===E.range[1]&&(E.range[1]+=E.range[0]||1),E.nticks||(E.nticks=1e3),n(E,v),a.prepTicks(E),E._tmin=null,E._tmax=null}}return function(I){return a.tickText(E,I).text}},V.calcTextOpts=function(g,b,v,k){var S=b(g);v.text(S).call(e.convertToTspans,k);var E=v.node(),C=M.bBox(E,!0);return{text:S,width:C.width,height:C.height,fontSize:+E.style["font-size"].replace("px",""),level:g,dy:(C.top+C.bottom)/2}},V.findBestTextLocation=function(g,b,v,k,S){var E=v.width,C,F,I,D,R;b.isClosed?(F=b.len/p.INITIALSEARCHPOINTS,C=b.min+F/2,I=b.max):(F=(b.len-E)/(p.INITIALSEARCHPOINTS+1),C=b.min+F+E/2,I=b.max-(F+E)/2);for(var O=1/0,z=0;z<p.ITERATIONS;z++){for(var B=C;B<I;B+=F){var G=f.getTextLocation(g,b.total,B,E),Q=u(G,v,k,S);Q<O&&(O=Q,R=G,D=B)}if(O>p.MAXCOST*2)break;z&&(F/=2),C=D-F/2,I=C+F*1.5}if(O<=p.MAXCOST)return R};function u(g,b,v,k){var S=b.width/2,E=b.height/2,C=g.x,F=g.y,I=g.theta,D=Math.cos(I)*S,R=Math.sin(I)*S,O=(C>k.center?k.right-C:C-k.left)/(D+Math.abs(Math.sin(I)*E)),z=(F>k.middle?k.bottom-F:F-k.top)/(Math.abs(R)+Math.cos(I)*E);if(O<1||z<1)return 1/0;var B=p.EDGECOST*(1/(O-1)+1/(z-1));B+=p.ANGLECOST*I*I;for(var G=C-D,Q=F-R,X=C+D,j=F+R,re=0;re<v.length;re++){var ue=v[re],K=Math.cos(ue.theta)*ue.width/2,te=Math.sin(ue.theta)*ue.width/2,Y=f.segmentDistance(G,Q,X,j,ue.x-K,ue.y-te,ue.x+K,ue.y+te)*2/(b.height+ue.height),H=ue.level===b.level,ee=H?p.SAMELEVELDISTANCE:1;if(Y<=ee)return 1/0;var ne=p.NEIGHBORCOST*(H?p.SAMELEVELFACTOR:1);B+=ne/(Y-ee)}return B}V.addLabelData=function(g,b,v,k){var S=b.fontSize,E=b.width+S/3,C=Math.max(0,b.height-S/3),F=g.x,I=g.y,D=g.theta,R=Math.sin(D),O=Math.cos(D),z=function(G,Q){return[F+G*O-Q*R,I+G*R+Q*O]},B=[z(-E/2,-C/2),z(-E/2,C/2),z(E/2,C/2),z(E/2,-C/2)];v.push({text:b.text,x:F,y:I,dy:b.dy,theta:D,level:b.level,width:E,height:C}),k.push(B)},V.drawLabels=function(g,b,v,k,S){var E=g.selectAll("text").data(b,function(D){return D.text+","+D.x+","+D.y+","+D.theta});if(E.exit().remove(),E.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(D){var R=D.x+Math.sin(D.theta)*D.dy,O=D.y-Math.cos(D.theta)*D.dy;w.select(this).text(D.text).attr({x:R,y:O,transform:"rotate("+180*D.theta/Math.PI+" "+R+" "+O+")"}).call(e.convertToTspans,v)}),S){for(var C="",F=0;F<S.length;F++)C+="M"+S[F].join("L")+"Z";var I=f.ensureSingle(k,"path","");I.attr("d",C)}};function A(g,b,v,k,S){var E=k.trace,C=v._fullLayout._clips,F="clip"+E.uid,I=C.selectAll("#"+F).data(E.connectgaps?[]:[0]);if(I.enter().append("clipPath").classed("contourclip",!0).attr("id",F),I.exit().remove(),E.connectgaps===!1){var D={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:b.xaxis,yaxis:b.yaxis,x:k.x,y:k.y,z:_(k),smoothing:0};t([D]),h([D]),y([D],{type:"levels"});var R=f.ensureSingle(I,"path","");R.attr("d",(D.prefixBoundary?"M"+S.join("L")+"Z":"")+l(D,S))}else F=null;M.setClipUrl(g,F,v)}function _(g){var b=g.trace._emptypoints,v=[],k=g.z.length,S=g.z[0].length,E,C=[],F;for(E=0;E<S;E++)C.push(1);for(E=0;E<k;E++)v.push(C.slice());for(E=0;E<b.length;E++)F=b[E],v[F[0]][F[1]]=0;return g.zmask=v,v}},{"../../components/colorscale":379,"../../components/drawing":389,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/cartesian/axes":566,"../../plots/cartesian/set_convert":585,"../heatmap/plot":813,"./close_boundaries":746,"./constants":748,"./convert_to_constraints":752,"./empty_pathinfo":754,"./find_all_paths":756,"./make_crossings":761,"@plotly/d3":58}],763:[function(i,U,V){var w=i("../../plots/cartesian/axes"),f=i("../../lib");U.exports=function(e,a){var n=e.contours;if(e.autocontour){var r=e.zmin,t=e.zmax;(e.zauto||r===void 0)&&(r=f.aggNums(Math.min,null,a)),(e.zauto||t===void 0)&&(t=f.aggNums(Math.max,null,a));var h=M(r,t,e.ncontours);n.size=h.dtick,n.start=w.tickFirst(h),h.range.reverse(),n.end=w.tickFirst(h),n.start===r&&(n.start+=n.size),n.end===t&&(n.end-=n.size),n.start>n.end&&(n.start=n.end=(n.start+n.end)/2),e._input.contours||(e._input.contours={}),f.extendFlat(e._input.contours,{start:n.start,end:n.end,size:n.size}),e._input.autocontour=!0}else if(n.type!=="constraint"){var s=n.start,o=n.end,y=e._input.contours;if(s>o&&(n.start=y.start=o,o=n.end=y.end=s,s=n.start),!(n.size>0)){var d;s===o?d=1:d=M(s,o,e.ncontours).dtick,y.size=n.size=d}}};function M(T,e,a){var n={type:"linear",range:[T,e]};return w.autoTicks(n,(e-T)/(a||15)),n}},{"../../lib":515,"../../plots/cartesian/axes":566}],764:[function(i,U,V){var w=i("@plotly/d3"),f=i("../../components/drawing"),M=i("../heatmap/style"),T=i("./make_color_map");U.exports=function(a){var n=w.select(a).selectAll("g.contour");n.style("opacity",function(r){return r[0].trace.opacity}),n.each(function(r){var t=w.select(this),h=r[0].trace,s=h.contours,o=h.line,y=s.size||1,d=s.start,p=s.type==="constraint",c=!p&&s.coloring==="lines",m=!p&&s.coloring==="fill",l=c||m?T(h):null;t.selectAll("g.contourlevel").each(function(A){w.select(this).selectAll("path").call(f.lineGroupStyle,o.width,c?l(A.level):o.color,o.dash)});var x=s.labelfont;if(t.selectAll("g.contourlabels text").each(function(A){f.font(w.select(this),{family:x.family,size:x.size,color:x.color||(c?l(A.level):o.color)})}),p)t.selectAll("g.contourfill path").style("fill",h.fillcolor);else if(m){var u;t.selectAll("g.contourfill path").style("fill",function(A){return u===void 0&&(u=A.level),l(A.level+.5*y)}),u===void 0&&(u=d),t.selectAll("g.contourbg path").style("fill",l(u-.5*y))}}),M(a)}},{"../../components/drawing":389,"../heatmap/style":814,"./make_color_map":760,"@plotly/d3":58}],765:[function(i,U,V){var w=i("../../components/colorscale/defaults"),f=i("./label_defaults");U.exports=function(T,e,a,n,r){var t=a("contours.coloring"),h,s="";t==="fill"&&(h=a("contours.showlines")),h!==!1&&(t!=="lines"&&(s=a("line.color","#000")),a("line.width",.5),a("line.dash")),t!=="none"&&(T.showlegend!==!0&&(e.showlegend=!1),e._dfltShowLegend=!1,w(T,e,n,a,{prefix:"",cLetter:"z"})),a("line.smoothing"),f(a,n,s,r)}},{"../../components/colorscale/defaults":377,"./label_defaults":759}],766:[function(i,U,V){var w=i("../heatmap/attributes"),f=i("../contour/attributes"),M=i("../../components/colorscale/attributes"),T=i("../../lib/extend").extendFlat,e=f.contours;U.exports=T({carpet:{valType:"string",editType:"calc"},z:w.z,a:w.x,a0:w.x0,da:w.dx,b:w.y,b0:w.y0,db:w.dy,text:w.text,hovertext:w.hovertext,transpose:w.transpose,atype:w.xtype,btype:w.ytype,fillcolor:f.fillcolor,autocontour:f.autocontour,ncontours:f.ncontours,contours:{type:e.type,start:e.start,end:e.end,size:e.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},showlines:e.showlines,showlabels:e.showlabels,labelfont:e.labelfont,labelformat:e.labelformat,operation:e.operation,value:e.value,editType:"calc",impliedEdits:{autocontour:!1}},line:{color:f.line.color,width:f.line.width,dash:f.line.dash,smoothing:f.line.smoothing,editType:"plot"},transforms:void 0},M("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../contour/attributes":744,"../heatmap/attributes":801}],767:[function(i,U,V){var w=i("../../components/colorscale/calc"),f=i("../../lib"),M=i("../heatmap/convert_column_xyz"),T=i("../heatmap/clean_2d_array"),e=i("../heatmap/interp2d"),a=i("../heatmap/find_empties"),n=i("../heatmap/make_bound_array"),r=i("./defaults"),t=i("../carpet/lookup_carpetid"),h=i("../contour/set_contours");U.exports=function(y,d){var p=d._carpetTrace=t(y,d);if(!(!p||!p.visible||p.visible==="legendonly")){if(!d.a||!d.b){var c=y.data[p.index],m=y.data[d.index];m.a||(m.a=c.a),m.b||(m.b=c.b),r(m,d,d._defaultColor,y._fullLayout)}var l=s(y,d);return h(d,d._z),l}};function s(o,y){var d=y._carpetTrace,p=d.aaxis,c=d.baxis,m,l,x,u,A,_,g;p._minDtick=0,c._minDtick=0,f.isArray1D(y.z)&&M(y,p,c,"a","b",["z"]),m=y._a=y._a||y.a,u=y._b=y._b||y.b,m=m?p.makeCalcdata(y,"_a"):[],u=u?c.makeCalcdata(y,"_b"):[],l=y.a0||0,x=y.da||1,A=y.b0||0,_=y.db||1,g=y._z=T(y._z||y.z,y.transpose),y._emptypoints=a(g),e(g,y._emptypoints);var b=f.maxRowLength(g),v=y.xtype==="scaled"?"":m,k=n(y,v,l,x,b,p),S=y.ytype==="scaled"?"":u,E=n(y,S,A,_,g.length,c),C={a:k,b:E,z:g};return y.contours.type==="levels"&&y.contours.coloring!=="none"&&w(o,y,{vals:g,containerStr:"",cLetter:"z"}),[C]}},{"../../components/colorscale/calc":375,"../../lib":515,"../carpet/lookup_carpetid":717,"../contour/set_contours":763,"../heatmap/clean_2d_array":803,"../heatmap/convert_column_xyz":805,"../heatmap/find_empties":807,"../heatmap/interp2d":810,"../heatmap/make_bound_array":812,"./defaults":768}],768:[function(i,U,V){var w=i("../../lib"),f=i("../heatmap/xyz_defaults"),M=i("./attributes"),T=i("../contour/constraint_defaults"),e=i("../contour/contours_defaults"),a=i("../contour/style_defaults");U.exports=function(r,t,h,s){function o(c,m){return w.coerce(r,t,M,c,m)}function y(c){return w.coerce2(r,t,M,c)}if(o("carpet"),r.a&&r.b){var d=f(r,t,o,s,"a","b");if(!d){t.visible=!1;return}o("text");var p=o("contours.type")==="constraint";p?T(r,t,o,s,h,{hasHover:!1}):(e(r,t,o,y),a(r,t,o,s,{hasHover:!1}))}else t._defaultColor=h,t._length=null}},{"../../lib":515,"../contour/constraint_defaults":749,"../contour/contours_defaults":751,"../contour/style_defaults":765,"../heatmap/xyz_defaults":816,"./attributes":766}],769:[function(i,U,V){U.exports={attributes:i("./attributes"),supplyDefaults:i("./defaults"),colorbar:i("../contour/colorbar"),calc:i("./calc"),plot:i("./plot"),style:i("../contour/style"),moduleType:"trace",name:"contourcarpet",basePlotModule:i("../../plots/cartesian"),categories:["cartesian","svg","carpet","contour","symbols","showLegend","hasLines","carpetDependent","noHover","noSortingByValue"],meta:{}}},{"../../plots/cartesian":578,"../contour/colorbar":747,"../contour/style":764,"./attributes":766,"./calc":767,"./defaults":768,"./plot":770}],770:[function(i,U,V){var w=i("@plotly/d3"),f=i("../carpet/map_1d_array"),M=i("../carpet/makepath"),T=i("../../components/drawing"),e=i("../../lib"),a=i("../contour/make_crossings"),n=i("../contour/find_all_paths"),r=i("../contour/plot"),t=i("../contour/constants"),h=i("../contour/convert_to_constraints"),s=i("../contour/empty_pathinfo"),o=i("../contour/close_boundaries"),y=i("../carpet/lookup_carpetid"),d=i("../carpet/axis_aligned_line");U.exports=function(v,k,S,E){var C=k.xaxis,F=k.yaxis;e.makeTraceGroups(E,S,"contour").each(function(I){var D=w.select(this),R=I[0],O=R.trace,z=O._carpetTrace=y(v,O),B=v.calcdata[z.index][0];if(!z.visible||z.visible==="legendonly")return;var G=R.a,Q=R.b,X=O.contours,j=s(X,k,R),re=X.type==="constraint",ue=X._operation,K=re?ue==="="?"lines":"fill":X.coloring;function te(be){var ce=z.ab2xy(be[0],be[1],!0);return[C.c2p(ce[0]),F.c2p(ce[1])]}var Y=[[G[0],Q[Q.length-1]],[G[G.length-1],Q[Q.length-1]],[G[G.length-1],Q[0]],[G[0],Q[0]]];a(j);var H=(G[G.length-1]-G[0])*1e-8,ee=(Q[Q.length-1]-Q[0])*1e-8;n(j,H,ee);var ne=j;X.type==="constraint"&&(ne=h(j,ue)),p(j,te);var Z,q,ie,se,ae=[];for(se=B.clipsegments.length-1;se>=0;se--)Z=B.clipsegments[se],q=f([],Z.x,C.c2p),ie=f([],Z.y,F.c2p),q.reverse(),ie.reverse(),ae.push(M(q,ie,Z.bicubic));var oe="M"+ae.join("L")+"Z";A(D,B.clipsegments,C,F,re,K),_(O,D,C,F,ne,Y,te,z,B,K,oe),c(D,j,v,R,X,k,z),T.setClipUrl(D,z._clipPathId,v)})};function p(b,v){var k,S,E,C,F,I,D,R,O;for(k=0;k<b.length;k++){for(C=b[k],F=C.pedgepaths=[],I=C.ppaths=[],S=0;S<C.edgepaths.length;S++){for(O=C.edgepaths[S],D=[],E=0;E<O.length;E++)D[E]=v(O[E]);F.push(D)}for(S=0;S<C.paths.length;S++){for(O=C.paths[S],R=[],E=0;E<O.length;E++)R[E]=v(O[E]);I.push(R)}}}function c(b,v,k,S,E,C,F){var I=e.ensureSingle(b,"g","contourlines"),D=E.showlines!==!1,R=E.showlabels,O=D&&R,z=r.createLines(I,D||R,v),B=r.createLineClip(I,O,k,S.trace.uid),G=b.selectAll("g.contourlabels").data(R?[0]:[]);if(G.exit().remove(),G.enter().append("g").classed("contourlabels",!0),R){var Q=C.xaxis,X=C.yaxis,j=Q._length,re=X._length,ue=[[[0,0],[j,0],[j,re],[0,re]]],K=[];e.clearLocationCache();var te=r.labelFormatter(k,S),Y=T.tester.append("text").attr("data-notex",1).call(T.font,E.labelfont),H={left:0,right:j,center:j/2,top:0,bottom:re,middle:re/2},ee=Math.sqrt(j*j+re*re),ne=t.LABELDISTANCE*ee/Math.max(1,v.length/t.LABELINCREASE);z.each(function(Z){var q=r.calcTextOpts(Z.level,te,Y,k);w.select(this).selectAll("path").each(function(ie){var se=this,ae=e.getVisibleSegment(se,H,q.height/2);if(!!ae&&(m(se,ie,Z,ae,F,q.height),!(ae.len<(q.width+q.height)*t.LABELMIN)))for(var oe=Math.min(Math.ceil(ae.len/ne),t.LABELMAX),be=0;be<oe;be++){var ce=r.findBestTextLocation(se,ae,q,K,H);if(!ce)break;r.addLabelData(ce,q,K,ue)}})}),Y.remove(),r.drawLabels(G,K,k,B,O?ue:null)}R&&!D&&z.remove()}function m(b,v,k,S,E,C){for(var F,I=0;I<k.pedgepaths.length;I++)v===k.pedgepaths[I]&&(F=k.edgepaths[I]);if(!F)return;var D=E.a[0],R=E.a[E.a.length-1],O=E.b[0],z=E.b[E.b.length-1];function B(re,ue){var K=0,te,Y=.1;return(Math.abs(re[0]-D)<Y||Math.abs(re[0]-R)<Y)&&(te=x(E.dxydb_rough(re[0],re[1],Y)),K=Math.max(K,C*u(ue,te)/2)),(Math.abs(re[1]-O)<Y||Math.abs(re[1]-z)<Y)&&(te=x(E.dxyda_rough(re[0],re[1],Y)),K=Math.max(K,C*u(ue,te)/2)),K}var G=l(b,0,1),Q=l(b,S.total,S.total-1),X=B(F[0],G),j=S.total-B(F[F.length-1],Q);S.min<X&&(S.min=X),S.max>j&&(S.max=j),S.len=S.max-S.min}function l(b,v,k){var S=b.getPointAtLength(v),E=b.getPointAtLength(k),C=E.x-S.x,F=E.y-S.y,I=Math.sqrt(C*C+F*F);return[C/I,F/I]}function x(b){var v=Math.sqrt(b[0]*b[0]+b[1]*b[1]);return[b[0]/v,b[1]/v]}function u(b,v){var k=Math.abs(b[0]*v[0]+b[1]*v[1]),S=Math.sqrt(1-k*k);return S/k}function A(b,v,k,S,E,C){var F,I,D,R,O=e.ensureSingle(b,"g","contourbg"),z=O.selectAll("path").data(C==="fill"&&!E?[0]:[]);z.enter().append("path"),z.exit().remove();var B=[];for(R=0;R<v.length;R++)F=v[R],I=f([],F.x,k.c2p),D=f([],F.y,S.c2p),B.push(M(I,D,F.bicubic));z.attr("d","M"+B.join("L")+"Z").style("stroke","none")}function _(b,v,k,S,E,C,F,I,D,R,O){var z=R==="fill";z&&o(E,b.contours);var B=e.ensureSingle(v,"g","contourfill"),G=B.selectAll("path").data(z?E:[]);G.enter().append("path"),G.exit().remove(),G.each(function(Q){var X=(Q.prefixBoundary?O:"")+g(b,Q,C,F,I,D,k,S);X?w.select(this).attr("d",X).style("stroke","none"):w.select(this).remove()})}function g(b,v,k,S,E,C,F,I){var D,R="",O=v.edgepaths.map(function(ie,se){return se}),z=!0,B,G,Q,X,j,re,ue=Math.abs(k[0][0]-k[2][0])*1e-4,K=Math.abs(k[0][1]-k[2][1])*1e-4;function te(ie){return Math.abs(ie[1]-k[0][1])<K}function Y(ie){return Math.abs(ie[1]-k[2][1])<K}function H(ie){return Math.abs(ie[0]-k[0][0])<ue}function ee(ie){return Math.abs(ie[0]-k[2][0])<ue}function ne(ie,se){var ae,oe,be,ce,de="";for(te(ie)&&!ee(ie)||Y(ie)&&!H(ie)?(ce=E.aaxis,be=d(E,C,[ie[0],se[0]],.5*(ie[1]+se[1]))):(ce=E.baxis,be=d(E,C,.5*(ie[0]+se[0]),[ie[1],se[1]])),ae=1;ae<be.length;ae++)for(de+=ce.smoothing?"C":"L",oe=0;oe<be[ae].length;oe++){var ye=be[ae][oe];de+=[F.c2p(ye[0]),I.c2p(ye[1])]+" "}return de}for(D=0,B=null;O.length;){var Z=v.edgepaths[D][0];for(B&&(R+=ne(B,Z)),re=T.smoothopen(v.edgepaths[D].map(S),v.smoothing),R+=z?re:re.replace(/^M/,"L"),O.splice(O.indexOf(D),1),B=v.edgepaths[D][v.edgepaths[D].length-1],X=-1,Q=0;Q<4;Q++){if(!B){e.log("Missing end?",D,v);break}for(te(B)&&!ee(B)?G=k[1]:H(B)?G=k[0]:Y(B)?G=k[3]:ee(B)&&(G=k[2]),j=0;j<v.edgepaths.length;j++){var q=v.edgepaths[j][0];Math.abs(B[0]-G[0])<ue?Math.abs(B[0]-q[0])<ue&&(q[1]-B[1])*(G[1]-q[1])>=0&&(G=q,X=j):Math.abs(B[1]-G[1])<K?Math.abs(B[1]-q[1])<K&&(q[0]-B[0])*(G[0]-q[0])>=0&&(G=q,X=j):e.log("endpt to newendpt is not vert. or horz.",B,G,q)}if(X>=0)break;R+=ne(B,G),B=G}if(X===v.edgepaths.length){e.log("unclosed perimeter path");break}D=X,z=O.indexOf(D)===-1,z&&(D=O[0],R+=ne(B,G)+"Z",B=null)}for(D=0;D<v.paths.length;D++)R+=T.smoothclosed(v.paths[D].map(S),v.smoothing);return R}},{"../../components/drawing":389,"../../lib":515,"../carpet/axis_aligned_line":701,"../carpet/lookup_carpetid":717,"../carpet/makepath":718,"../carpet/map_1d_array":719,"../contour/close_boundaries":746,"../contour/constants":748,"../contour/convert_to_constraints":752,"../contour/empty_pathinfo":754,"../contour/find_all_paths":756,"../contour/make_crossings":761,"../contour/plot":762,"@plotly/d3":58}],771:[function(i,U,V){var w=i("../../components/colorscale/attributes"),f=i("../../plots/template_attributes").hovertemplateAttrs,M=i("../../plots/attributes"),T=i("../scattermapbox/attributes"),e=i("../../lib/extend").extendFlat;U.exports=e({lon:T.lon,lat:T.lat,z:{valType:"data_array",editType:"calc"},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30},below:{valType:"string",editType:"plot"},text:T.text,hovertext:T.hovertext,hoverinfo:e({},M.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:f(),showlegend:e({},M.showlegend,{dflt:!1})},w("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"../scattermapbox/attributes":1002}],772:[function(i,U,V){var w=i("fast-isnumeric"),f=i("../../lib").isArrayOrTypedArray,M=i("../../constants/numerical").BADNUM,T=i("../../components/colorscale/calc"),e=i("../../lib")._;U.exports=function(n,r){for(var t=r._length,h=new Array(t),s=r.z,o=f(s)&&s.length,y=0;y<t;y++){var d=h[y]={},p=r.lon[y],c=r.lat[y];if(d.lonlat=w(p)&&w(c)?[+p,+c]:[M,M],o){var m=s[y];d.z=w(m)?m:M}}return T(n,r,{vals:o?s:[0,1],containerStr:"",cLetter:"z"}),t&&(h[0].t={labels:{lat:e(n,"lat:")+" ",lon:e(n,"lon:")+" "}}),h}},{"../../components/colorscale/calc":375,"../../constants/numerical":491,"../../lib":515,"fast-isnumeric":190}],773:[function(i,U,V){var w=i("fast-isnumeric"),f=i("../../lib"),M=i("../../components/color"),T=i("../../components/colorscale"),e=i("../../constants/numerical").BADNUM,a=i("../../lib/geojson_utils").makeBlank;U.exports=function(r){var t=r[0].trace,h=t.visible===!0&&t._length!==0,s={layout:{visibility:"none"},paint:{}},o=t._opts={heatmap:s,geojson:a()};if(!h)return o;var y=[],d,p=t.z,c=t.radius,m=f.isArrayOrTypedArray(p)&&p.length,l=f.isArrayOrTypedArray(c);for(d=0;d<r.length;d++){var x=r[d],u=x.lonlat;if(u[0]!==e){var A={};if(m){var _=x.z;A.z=_!==e?_:0}l&&(A.r=w(c[d])&&c[d]>0?+c[d]:0),y.push({type:"Feature",geometry:{type:"Point",coordinates:u},properties:A})}}var g=T.extractOpts(t),b=g.reversescale?T.flipScale(g.colorscale):g.colorscale,v=b[0][1],k=M.opacity(v)<1?v:M.addOpacity(v,0),S=["interpolate",["linear"],["heatmap-density"],0,k];for(d=1;d<b.length;d++)S.push(b[d][0],b[d][1]);var E=["interpolate",["linear"],["get","z"],g.min,0,g.max,1];return f.extendFlat(o.heatmap.paint,{"heatmap-weight":m?E:1/(g.max-g.min),"heatmap-color":S,"heatmap-radius":l?{type:"identity",property:"r"}:t.radius,"heatmap-opacity":t.opacity}),o.geojson={type:"FeatureCollection",features:y},o.heatmap.layout.visibility="visible",o}},{"../../components/color":367,"../../components/colorscale":379,"../../constants/numerical":491,"../../lib":515,"../../lib/geojson_utils":509,"fast-isnumeric":190}],774:[function(i,U,V){var w=i("../../lib"),f=i("../../components/colorscale/defaults"),M=i("./attributes");U.exports=function(e,a,n,r){function t(y,d){return w.coerce(e,a,M,y,d)}var h=t("lon")||[],s=t("lat")||[],o=Math.min(h.length,s.length);if(!o){a.visible=!1;return}a._length=o,t("z"),t("radius"),t("below"),t("text"),t("hovertext"),t("hovertemplate"),f(e,a,r,t,{prefix:"",cLetter:"z"})}},{"../../components/colorscale/defaults":377,"../../lib":515,"./attributes":771}],775:[function(i,U,V){U.exports=function(f,M){return f.lon=M.lon,f.lat=M.lat,f.z=M.z,f}},{}],776:[function(i,U,V){var w=i("../../plots/cartesian/axes"),f=i("../scattermapbox/hover").hoverPoints,M=i("../scattermapbox/hover").getExtraText;U.exports=function(e,a,n){var r=f(e,a,n);if(!!r){var t=r[0],h=t.cd,s=h[0].trace,o=h[t.index];if(delete t.color,"z"in o){var y=t.subplot.mockAxis;t.z=o.z,t.zLabel=w.tickText(y,y.c2l(o.z),"hover").text}return t.extraText=M(s,o,h[0].t.labels),[t]}}},{"../../plots/cartesian/axes":566,"../scattermapbox/hover":1007}],777:[function(i,U,V){U.exports={attributes:i("./attributes"),supplyDefaults:i("./defaults"),colorbar:i("../heatmap/colorbar"),formatLabels:i("../scattermapbox/format_labels"),calc:i("./calc"),plot:i("./plot"),hoverPoints:i("./hover"),eventData:i("./event_data"),getBelow:function(w,f){for(var M=f.getMapLayers(),T=0;T<M.length;T++){var e=M[T],a=e.id;if(e.type==="symbol"&&typeof a=="string"&&a.indexOf("plotly-")===-1)return a}},moduleType:"trace",name:"densitymapbox",basePlotModule:i("../../plots/mapbox"),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox"}}},{"../../plots/mapbox":622,"../heatmap/colorbar":804,"../scattermapbox/format_labels":1006,"./attributes":771,"./calc":772,"./defaults":774,"./event_data":775,"./hover":776,"./plot":778}],778:[function(i,U,V){var w=i("./convert"),f=i("../../plots/mapbox/constants").traceLayerPrefix;function M(e,a){this.type="densitymapbox",this.subplot=e,this.uid=a,this.sourceId="source-"+a,this.layerList=[["heatmap",f+a+"-heatmap"]],this.below=null}var T=M.prototype;T.update=function(e){var a=this.subplot,n=this.layerList,r=w(e),t=a.belowLookup["trace-"+this.uid];a.map.getSource(this.sourceId).setData(r.geojson),t!==this.below&&(this._removeLayers(),this._addLayers(r,t),this.below=t);for(var h=0;h<n.length;h++){var s=n[h],o=s[0],y=s[1],d=r[o];a.setOptions(y,"setLayoutProperty",d.layout),d.layout.visibility==="visible"&&a.setOptions(y,"setPaintProperty",d.paint)}},T._addLayers=function(e,a){for(var n=this.subplot,r=this.layerList,t=this.sourceId,h=0;h<r.length;h++){var s=r[h],o=s[0],y=e[o];n.addLayer({type:o,id:s[1],source:t,layout:y.layout,paint:y.paint},a)}},T._removeLayers=function(){for(var e=this.subplot.map,a=this.layerList,n=a.length-1;n>=0;n--)e.removeLayer(a[n][1])},T.dispose=function(){var e=this.subplot.map;this._removeLayers(),e.removeSource(this.sourceId)},U.exports=function(a,n){var r=n[0].trace,t=new M(a,r.uid),h=t.sourceId,s=w(n),o=t.below=a.belowLookup["trace-"+r.uid];return a.map.addSource(h,{type:"geojson",data:s.geojson}),t._addLayers(s,o),t}},{"../../plots/mapbox/constants":620,"./convert":773}],779:[function(i,U,V){var w=i("../../lib");U.exports=function(M,T){for(var e=0;e<M.length;e++)M[e].i=e;w.mergeArray(T.text,M,"tx"),w.mergeArray(T.hovertext,M,"htx");var a=T.marker;if(a){w.mergeArray(a.opacity,M,"mo"),w.mergeArray(a.color,M,"mc");var n=a.line;n&&(w.mergeArray(n.color,M,"mlc"),w.mergeArrayCastPositive(n.width,M,"mlw"))}}},{"../../lib":515}],780:[function(i,U,V){var w=i("../bar/attributes"),f=i("../scatter/attributes").line,M=i("../../plots/attributes"),T=i("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=i("../../plots/template_attributes").hovertemplateAttrs,a=i("../../plots/template_attributes").texttemplateAttrs,n=i("./constants"),r=i("../../lib/extend").extendFlat,t=i("../../components/color");U.exports={x:w.x,x0:w.x0,dx:w.dx,y:w.y,y0:w.y0,dy:w.dy,xperiod:w.xperiod,yperiod:w.yperiod,xperiod0:w.xperiod0,yperiod0:w.yperiod0,xperiodalignment:w.xperiodalignment,yperiodalignment:w.yperiodalignment,xhoverformat:T("x"),yhoverformat:T("y"),hovertext:w.hovertext,hovertemplate:e({},{keys:n.eventDataKeys}),hoverinfo:r({},M.hoverinfo,{flags:["name","x","y","text","percent initial","percent previous","percent total"]}),textinfo:{valType:"flaglist",flags:["label","text","percent initial","percent previous","percent total","value"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:a({editType:"plot"},{keys:n.eventDataKeys.concat(["label","value"])}),text:w.text,textposition:w.textposition,insidetextanchor:r({},w.insidetextanchor,{dflt:"middle"}),textangle:r({},w.textangle,{dflt:0}),textfont:w.textfont,insidetextfont:w.insidetextfont,outsidetextfont:w.outsidetextfont,constraintext:w.constraintext,cliponaxis:w.cliponaxis,orientation:r({},w.orientation,{}),offset:r({},w.offset,{arrayOk:!1}),width:r({},w.width,{arrayOk:!1}),marker:h(),connector:{fillcolor:{valType:"color",editType:"style"},line:{color:r({},f.color,{dflt:t.defaultLine}),width:r({},f.width,{dflt:0,editType:"plot"}),dash:f.dash,editType:"style"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:w.offsetgroup,alignmentgroup:w.alignmentgroup};function h(){var s=r({},w.marker);return delete s.pattern,s}},{"../../components/color":367,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../bar/attributes":657,"../scatter/attributes":936,"./constants":782}],781:[function(i,U,V){var w=i("../../plots/cartesian/axes"),f=i("../../plots/cartesian/align_period"),M=i("./arrays_to_calcdata"),T=i("../scatter/calc_selection"),e=i("../../constants/numerical").BADNUM;U.exports=function(r,t){var h=w.getFromId(r,t.xaxis||"x"),s=w.getFromId(r,t.yaxis||"y"),o,y,d,p,c,m,l,x;t.orientation==="h"?(o=h.makeCalcdata(t,"x"),d=s.makeCalcdata(t,"y"),p=f(t,s,"y",d),c=!!t.yperiodalignment,m="y"):(o=s.makeCalcdata(t,"y"),d=h.makeCalcdata(t,"x"),p=f(t,h,"x",d),c=!!t.xperiodalignment,m="x"),y=p.vals;var u=Math.min(y.length,o.length),A=new Array(u);for(t._base=[],l=0;l<u;l++){o[l]<0&&(o[l]=e);var _=!1;o[l]!==e&&l+1<u&&o[l+1]!==e&&(_=!0),x=A[l]={p:y[l],s:o[l],cNext:_},t._base[l]=-.5*x.s,c&&(A[l].orig_p=d[l],A[l][m+"End"]=p.ends[l],A[l][m+"Start"]=p.starts[l]),t.ids&&(x.id=String(t.ids[l])),l===0&&(A[0].vTotal=0),A[0].vTotal+=a(x.s),x.begR=a(x.s)/a(A[0].s)}var g;for(l=0;l<u;l++)x=A[l],x.s!==e&&(x.sumR=x.s/A[0].vTotal,x.difR=g!==void 0?x.s/g:1,g=x.s);return M(A,t),T(A,t),A};function a(n){return n===e?0:n}},{"../../constants/numerical":491,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566,"../scatter/calc_selection":938,"./arrays_to_calcdata":779}],782:[function(i,U,V){U.exports={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]}},{}],783:[function(i,U,V){var w=i("../bar/cross_trace_calc").setGroupPositions;U.exports=function(M,T){var e=M._fullLayout,a=M._fullData,n=M.calcdata,r=T.xaxis,t=T.yaxis,h=[],s=[],o=[],y,d;for(d=0;d<a.length;d++){var p=a[d],c=p.orientation==="h";p.visible===!0&&p.xaxis===r._id&&p.yaxis===t._id&&p.type==="funnel"&&(y=n[d],c?o.push(y):s.push(y),h.push(y))}var m={mode:e.funnelmode,norm:e.funnelnorm,gap:e.funnelgap,groupgap:e.funnelgroupgap};for(w(M,r,t,s,m),w(M,t,r,o,m),d=0;d<h.length;d++){y=h[d];for(var l=0;l<y.length;l++)l+1<y.length&&(y[l].nextP0=y[l+1].p0,y[l].nextS0=y[l+1].s0,y[l].nextP1=y[l+1].p1,y[l].nextS1=y[l+1].s1)}}},{"../bar/cross_trace_calc":660}],784:[function(i,U,V){var w=i("../../lib"),f=i("../bar/defaults").handleGroupingDefaults,M=i("../bar/defaults").handleText,T=i("../scatter/xy_defaults"),e=i("../scatter/period_defaults"),a=i("./attributes"),n=i("../../components/color");function r(s,o,y,d){function p(_,g){return w.coerce(s,o,a,_,g)}var c=T(s,o,d,p);if(!c){o.visible=!1;return}e(s,o,d,p),p("xhoverformat"),p("yhoverformat"),p("orientation",o.y&&!o.x?"v":"h"),p("offset"),p("width");var m=p("text");p("hovertext"),p("hovertemplate");var l=p("textposition");M(s,o,d,p,l,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),o.textposition!=="none"&&!o.texttemplate&&p("textinfo",Array.isArray(m)?"text+value":"value");var x=p("marker.color",y);p("marker.line.color",n.defaultLine),p("marker.line.width");var u=p("connector.visible");if(u){p("connector.fillcolor",t(x));var A=p("connector.line.width");A&&(p("connector.line.color"),p("connector.line.dash"))}}function t(s){var o=w.isArrayOrTypedArray(s)?"#000":s;return n.addOpacity(o,.5*n.opacity(o))}function h(s,o){var y,d;function p(m){return w.coerce(d._input,d,a,m)}if(o.funnelmode==="group")for(var c=0;c<s.length;c++)d=s[c],y=d._input,f(y,d,o,p)}U.exports={supplyDefaults:r,crossTraceDefaults:h}},{"../../components/color":367,"../../lib":515,"../bar/defaults":661,"../scatter/period_defaults":956,"../scatter/xy_defaults":963,"./attributes":780}],785:[function(i,U,V){U.exports=function(f,M){return f.x="xVal"in M?M.xVal:M.x,f.y="yVal"in M?M.yVal:M.y,"percentInitial"in M&&(f.percentInitial=M.percentInitial),"percentPrevious"in M&&(f.percentPrevious=M.percentPrevious),"percentTotal"in M&&(f.percentTotal=M.percentTotal),M.xa&&(f.xaxis=M.xa),M.ya&&(f.yaxis=M.ya),f}},{}],786:[function(i,U,V){var w=i("../../components/color").opacity,f=i("../bar/hover").hoverOnBars,M=i("../../lib").formatPercent;U.exports=function(a,n,r,t,h){var s=f(a,n,r,t,h);if(!!s){var o=s.cd,y=o[0].trace,d=y.orientation==="h",p=s.index,c=o[p],m=d?"x":"y";s[m+"LabelVal"]=c.s,s.percentInitial=c.begR,s.percentInitialLabel=M(c.begR,1),s.percentPrevious=c.difR,s.percentPreviousLabel=M(c.difR,1),s.percentTotal=c.sumR,s.percentTotalLabel=M(c.sumR,1);var l=c.hi||y.hoverinfo,x=[];if(l&&l!=="none"&&l!=="skip"){var u=l==="all",A=l.split("+"),_=function(g){return u||A.indexOf(g)!==-1};_("percent initial")&&x.push(s.percentInitialLabel+" of initial"),_("percent previous")&&x.push(s.percentPreviousLabel+" of previous"),_("percent total")&&x.push(s.percentTotalLabel+" of total")}return s.extraText=x.join("<br>"),s.color=T(y,c),[s]}};function T(e,a){var n=e.marker,r=a.mc||n.color,t=a.mlc||n.line.color,h=a.mlw||n.line.width;if(w(r))return r;if(w(t)&&h)return t}},{"../../components/color":367,"../../lib":515,"../bar/hover":664}],787:[function(i,U,V){U.exports={attributes:i("./attributes"),layoutAttributes:i("./layout_attributes"),supplyDefaults:i("./defaults").supplyDefaults,crossTraceDefaults:i("./defaults").crossTraceDefaults,supplyLayoutDefaults:i("./layout_defaults"),calc:i("./calc"),crossTraceCalc:i("./cross_trace_calc"),plot:i("./plot"),style:i("./style").style,hoverPoints:i("./hover"),eventData:i("./event_data"),selectPoints:i("../bar/select"),moduleType:"trace",name:"funnel",basePlotModule:i("../../plots/cartesian"),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},{"../../plots/cartesian":578,"../bar/select":669,"./attributes":780,"./calc":781,"./cross_trace_calc":783,"./defaults":784,"./event_data":785,"./hover":786,"./layout_attributes":788,"./layout_defaults":789,"./plot":790,"./style":791}],788:[function(i,U,V){U.exports={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",editType:"calc"},funnelgap:{valType:"number",min:0,max:1,editType:"calc"},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],789:[function(i,U,V){var w=i("../../lib"),f=i("./layout_attributes");U.exports=function(M,T,e){var a=!1;function n(h,s){return w.coerce(M,T,f,h,s)}for(var r=0;r<e.length;r++){var t=e[r];if(t.visible&&t.type==="funnel"){a=!0;break}}a&&(n("funnelmode"),n("funnelgap",.2),n("funnelgroupgap"))}},{"../../lib":515,"./layout_attributes":788}],790:[function(i,U,V){var w=i("@plotly/d3"),f=i("../../lib"),M=i("../../components/drawing"),T=i("../../constants/numerical").BADNUM,e=i("../bar/plot"),a=i("../bar/uniform_text").clearMinTextSize;U.exports=function(s,o,y,d){var p=s._fullLayout;a("funnel",p),n(s,o,y,d),r(s,o,y,d),e.plot(s,o,y,d,{mode:p.funnelmode,norm:p.funnelmode,gap:p.funnelgap,groupgap:p.funnelgroupgap})};function n(h,s,o,y){var d=s.xaxis,p=s.yaxis;f.makeTraceGroups(y,o,"trace bars").each(function(c){var m=w.select(this),l=c[0].trace,x=f.ensureSingle(m,"g","regions");if(!l.connector||!l.connector.visible){x.remove();return}var u=l.orientation==="h",A=x.selectAll("g.region").data(f.identity);A.enter().append("g").classed("region",!0),A.exit().remove();var _=A.size();A.each(function(g,b){if(!(b!==_-1&&!g.cNext)){var v=t(g,d,p,u),k=v[0],S=v[1],E="";k[0]!==T&&S[0]!==T&&k[1]!==T&&S[1]!==T&&k[2]!==T&&S[2]!==T&&k[3]!==T&&S[3]!==T&&(u?E+="M"+k[0]+","+S[1]+"L"+k[2]+","+S[2]+"H"+k[3]+"L"+k[1]+","+S[1]+"Z":E+="M"+k[1]+","+S[1]+"L"+k[2]+","+S[3]+"V"+S[2]+"L"+k[1]+","+S[0]+"Z"),E===""&&(E="M0,0Z"),f.ensureSingle(w.select(this),"path").attr("d",E).call(M.setClipUrl,s.layerClipId,h)}})})}function r(h,s,o,y){var d=s.xaxis,p=s.yaxis;f.makeTraceGroups(y,o,"trace bars").each(function(c){var m=w.select(this),l=c[0].trace,x=f.ensureSingle(m,"g","lines");if(!l.connector||!l.connector.visible||!l.connector.line.width){x.remove();return}var u=l.orientation==="h",A=x.selectAll("g.line").data(f.identity);A.enter().append("g").classed("line",!0),A.exit().remove();var _=A.size();A.each(function(g,b){if(!(b!==_-1&&!g.cNext)){var v=t(g,d,p,u),k=v[0],S=v[1],E="";k[3]!==void 0&&S[3]!==void 0&&(u?(E+="M"+k[0]+","+S[1]+"L"+k[2]+","+S[2],E+="M"+k[1]+","+S[1]+"L"+k[3]+","+S[2]):(E+="M"+k[1]+","+S[1]+"L"+k[2]+","+S[3],E+="M"+k[1]+","+S[0]+"L"+k[2]+","+S[2])),E===""&&(E="M0,0Z"),f.ensureSingle(w.select(this),"path").attr("d",E).call(M.setClipUrl,s.layerClipId,h)}})})}function t(h,s,o,y){var d=[],p=[],c=y?s:o,m=y?o:s;return d[0]=c.c2p(h.s0,!0),p[0]=m.c2p(h.p0,!0),d[1]=c.c2p(h.s1,!0),p[1]=m.c2p(h.p1,!0),d[2]=c.c2p(h.nextS0,!0),p[2]=m.c2p(h.nextP0,!0),d[3]=c.c2p(h.nextS1,!0),p[3]=m.c2p(h.nextP1,!0),y?[d,p]:[p,d]}},{"../../components/drawing":389,"../../constants/numerical":491,"../../lib":515,"../bar/plot":668,"../bar/uniform_text":673,"@plotly/d3":58}],791:[function(i,U,V){var w=i("@plotly/d3"),f=i("../../components/drawing"),M=i("../../components/color"),T=i("../../constants/interactions").DESELECTDIM,e=i("../bar/style"),a=i("../bar/uniform_text").resizeText,n=e.styleTextPoints;function r(t,h,s){var o=s||w.select(t).selectAll("g.funnellayer").selectAll("g.trace");a(t,o,"funnel"),o.style("opacity",function(y){return y[0].trace.opacity}),o.each(function(y){var d=w.select(this),p=y[0].trace;d.selectAll(".point > path").each(function(c){if(!c.isBlank){var m=p.marker;w.select(this).call(M.fill,c.mc||m.color).call(M.stroke,c.mlc||m.line.color).call(f.dashLine,m.line.dash,c.mlw||m.line.width).style("opacity",p.selectedpoints&&!c.selected?T:1)}}),n(d,p,t),d.selectAll(".regions").each(function(){w.select(this).selectAll("path").style("stroke-width",0).call(M.fill,p.connector.fillcolor)}),d.selectAll(".lines").each(function(){var c=p.connector.line;f.lineGroupStyle(w.select(this).selectAll("path"),c.width,c.color,c.dash)})})}U.exports={style:r}},{"../../components/color":367,"../../components/drawing":389,"../../constants/interactions":490,"../bar/style":671,"../bar/uniform_text":673,"@plotly/d3":58}],792:[function(i,U,V){var w=i("../pie/attributes"),f=i("../../plots/attributes"),M=i("../../plots/domain").attributes,T=i("../../plots/template_attributes").hovertemplateAttrs,e=i("../../plots/template_attributes").texttemplateAttrs,a=i("../../lib/extend").extendFlat;U.exports={labels:w.labels,label0:w.label0,dlabel:w.dlabel,values:w.values,marker:{colors:w.marker.colors,line:{color:a({},w.marker.line.color,{dflt:null}),width:a({},w.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},text:w.text,hovertext:w.hovertext,scalegroup:a({},w.scalegroup,{}),textinfo:a({},w.textinfo,{flags:["label","text","value","percent"]}),texttemplate:e({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:a({},f.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:T({},{keys:["label","color","value","text","percent"]}),textposition:a({},w.textposition,{values:["inside","none"],dflt:"inside"}),textfont:w.textfont,insidetextfont:w.insidetextfont,title:{text:w.title.text,font:w.title.font,position:a({},w.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:M({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",min:0,dflt:1,editType:"plot"},baseratio:{valType:"number",min:0,max:1,dflt:.333,editType:"plot"}}},{"../../lib/extend":505,"../../plots/attributes":562,"../../plots/domain":593,"../../plots/template_attributes":642,"../pie/attributes":910}],793:[function(i,U,V){var w=i("../../plots/plots");V.name="funnelarea",V.plot=function(f,M,T,e){w.plotBasePlot(V.name,f,M,T,e)},V.clean=function(f,M,T,e){w.cleanBasePlot(V.name,f,M,T,e)}},{"../../plots/plots":628}],794:[function(i,U,V){var w=i("../pie/calc");function f(T,e){return w.calc(T,e)}function M(T){w.crossTraceCalc(T,{type:"funnelarea"})}U.exports={calc:f,crossTraceCalc:M}},{"../pie/calc":912}],795:[function(i,U,V){var w=i("../../lib"),f=i("./attributes"),M=i("../../plots/domain").defaults,T=i("../bar/defaults").handleText,e=i("../pie/defaults").handleLabelsAndValues;U.exports=function(n,r,t,h){function s(_,g){return w.coerce(n,r,f,_,g)}var o=s("labels"),y=s("values"),d=e(o,y),p=d.len;if(r._hasLabels=d.hasLabels,r._hasValues=d.hasValues,!r._hasLabels&&r._hasValues&&(s("label0"),s("dlabel")),!p){r.visible=!1;return}r._length=p;var c=s("marker.line.width");c&&s("marker.line.color",h.paper_bgcolor),s("marker.colors"),s("scalegroup");var m=s("text"),l=s("texttemplate"),x;if(l||(x=s("textinfo",Array.isArray(m)?"text+percent":"percent")),s("hovertext"),s("hovertemplate"),l||x&&x!=="none"){var u=s("textposition");T(n,r,h,s,u,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1})}M(r,h,s);var A=s("title.text");A&&(s("title.position"),w.coerceFont(s,"title.font",h.font)),s("aspectratio"),s("baseratio")}},{"../../lib":515,"../../plots/domain":593,"../bar/defaults":661,"../pie/defaults":913,"./attributes":792}],796:[function(i,U,V){U.exports={moduleType:"trace",name:"funnelarea",basePlotModule:i("./base_plot"),categories:["pie-like","funnelarea","showLegend"],attributes:i("./attributes"),layoutAttributes:i("./layout_attributes"),supplyDefaults:i("./defaults"),supplyLayoutDefaults:i("./layout_defaults"),calc:i("./calc").calc,crossTraceCalc:i("./calc").crossTraceCalc,plot:i("./plot"),style:i("./style"),styleOne:i("../pie/style_one"),meta:{}}},{"../pie/style_one":921,"./attributes":792,"./base_plot":793,"./calc":794,"./defaults":795,"./layout_attributes":797,"./layout_defaults":798,"./plot":799,"./style":800}],797:[function(i,U,V){var w=i("../pie/layout_attributes").hiddenlabels;U.exports={hiddenlabels:w,funnelareacolorway:{valType:"colorlist",editType:"calc"},extendfunnelareacolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{"../pie/layout_attributes":917}],798:[function(i,U,V){var w=i("../../lib"),f=i("./layout_attributes");U.exports=function(T,e){function a(n,r){return w.coerce(T,e,f,n,r)}a("hiddenlabels"),a("funnelareacolorway",e.colorway),a("extendfunnelareacolors")}},{"../../lib":515,"./layout_attributes":797}],799:[function(i,U,V){var w=i("@plotly/d3"),f=i("../../components/drawing"),M=i("../../lib"),T=M.strScale,e=M.strTranslate,a=i("../../lib/svg_text_utils"),n=i("../bar/plot"),r=n.toMoveInsideBar,t=i("../bar/uniform_text"),h=t.recordMinTextSize,s=t.clearMinTextSize,o=i("../pie/helpers"),y=i("../pie/plot"),d=y.attachFxHandlers,p=y.determineInsideTextFont,c=y.layoutAreas,m=y.prerenderTitles,l=y.positionTitleOutside,x=y.formatSliceLabel;U.exports=function(b,v){var k=b._context.staticPlot,S=b._fullLayout;s("funnelarea",S),m(v,b),c(v,S._size),M.makeTraceGroups(S._funnelarealayer,v,"trace").each(function(E){var C=w.select(this),F=E[0],I=F.trace;_(E),C.each(function(){var D=w.select(this).selectAll("g.slice").data(E);D.enter().append("g").classed("slice",!0),D.exit().remove(),D.each(function(O,z){if(O.hidden){w.select(this).selectAll("path,g").remove();return}O.pointNumber=O.i,O.curveNumber=I.index;var B=F.cx,G=F.cy,Q=w.select(this),X=Q.selectAll("path.surface").data([O]);X.enter().append("path").classed("surface",!0).style({"pointer-events":k?"none":"all"}),Q.call(d,b,E);var j="M"+(B+O.TR[0])+","+(G+O.TR[1])+u(O.TR,O.BR)+u(O.BR,O.BL)+u(O.BL,O.TL)+"Z";X.attr("d",j),x(b,O,F);var re=o.castOption(I.textposition,O.pts),ue=Q.selectAll("g.slicetext").data(O.text&&re!=="none"?[0]:[]);ue.enter().append("g").classed("slicetext",!0),ue.exit().remove(),ue.each(function(){var K=M.ensureSingle(w.select(this),"text","",function(ie){ie.attr("data-notex",1)}),te=M.ensureUniformFontSize(b,p(I,O,S.font));K.text(O.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(f.font,te).call(a.convertToTspans,b);var Y=f.bBox(K.node()),H,ee,ne,Z=Math.min(O.BL[1],O.BR[1])+G,q=Math.max(O.TL[1],O.TR[1])+G;ee=Math.max(O.TL[0],O.BL[0])+B,ne=Math.min(O.TR[0],O.BR[0])+B,H=r(ee,ne,Z,q,Y,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"}),H.fontSize=te.size,h(I.type,H,S),E[z].transform=H,M.setTransormAndDisplay(K,H)})});var R=w.select(this).selectAll("g.titletext").data(I.title.text?[0]:[]);R.enter().append("g").classed("titletext",!0),R.exit().remove(),R.each(function(){var O=M.ensureSingle(w.select(this),"text","",function(G){G.attr("data-notex",1)}),z=I.title.text;I._meta&&(z=M.templateString(z,I._meta)),O.text(z).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(f.font,I.title.font).call(a.convertToTspans,b);var B=l(F,S._size);O.attr("transform",e(B.x,B.y)+T(Math.min(1,B.scale))+e(B.tx,B.ty))})})})};function u(g,b){var v=b[0]-g[0],k=b[1]-g[1];return"l"+v+","+k}function A(g,b){return[.5*(g[0]+b[0]),.5*(g[1]+b[1])]}function _(g){if(!g.length)return;var b=g[0],v=b.trace,k=v.aspectratio,S=v.baseratio;S>.999&&(S=.999);var E=Math.pow(S,2),C=b.vTotal,F=C*E/(1-E),I=C,D=F/C;function R(){var se=Math.sqrt(D);return{x:se,y:-se}}function O(){var se=R();return[se.x,se.y]}var z,B=[];B.push(O());var G,Q;for(G=g.length-1;G>-1;G--)if(Q=g[G],!Q.hidden){var X=Q.v/I;D+=X,B.push(O())}var j=1/0,re=-1/0;for(G=0;G<B.length;G++)z=B[G],j=Math.min(j,z[1]),re=Math.max(re,z[1]);for(G=0;G<B.length;G++)B[G][1]-=(re+j)/2;var ue=B[B.length-1][0],K=b.r,te=(re-j)/2,Y=K/ue,H=K/te*k;for(b.r=H*te,G=0;G<B.length;G++)B[G][0]*=Y,B[G][1]*=H;z=B[0];var ee=[-z[0],z[1]],ne=[z[0],z[1]],Z=0;for(G=g.length-1;G>-1;G--)if(Q=g[G],!Q.hidden){Z+=1;var q=B[Z][0],ie=B[Z][1];Q.TL=[-q,ie],Q.TR=[q,ie],Q.BL=ee,Q.BR=ne,Q.pxmid=A(Q.TR,Q.BR),ee=Q.TL,ne=Q.TR}}},{"../../components/drawing":389,"../../lib":515,"../../lib/svg_text_utils":541,"../bar/plot":668,"../bar/uniform_text":673,"../pie/helpers":915,"../pie/plot":919,"@plotly/d3":58}],800:[function(i,U,V){var w=i("@plotly/d3"),f=i("../pie/style_one"),M=i("../bar/uniform_text").resizeText;U.exports=function(e){var a=e._fullLayout._funnelarealayer.selectAll(".trace");M(e,a,"funnelarea"),a.each(function(n){var r=n[0],t=r.trace,h=w.select(this);h.style({opacity:t.opacity}),h.selectAll("path.surface").each(function(s){w.select(this).call(f,s,t)})})}},{"../bar/uniform_text":673,"../pie/style_one":921,"@plotly/d3":58}],801:[function(i,U,V){var w=i("../scatter/attributes"),f=i("../../plots/attributes"),M=i("../../plots/font_attributes"),T=i("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=i("../../plots/template_attributes").hovertemplateAttrs,a=i("../../plots/template_attributes").texttemplateAttrs,n=i("../../components/colorscale/attributes"),r=i("../../lib/extend").extendFlat;U.exports=r({z:{valType:"data_array",editType:"calc"},x:r({},w.x,{impliedEdits:{xtype:"array"}}),x0:r({},w.x0,{impliedEdits:{xtype:"scaled"}}),dx:r({},w.dx,{impliedEdits:{xtype:"scaled"}}),y:r({},w.y,{impliedEdits:{ytype:"array"}}),y0:r({},w.y0,{impliedEdits:{ytype:"scaled"}}),dy:r({},w.dy,{impliedEdits:{ytype:"scaled"}}),xperiod:r({},w.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:r({},w.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:r({},w.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:r({},w.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:r({},w.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:r({},w.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},hoverongaps:{valType:"boolean",dflt:!0,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z",1),hovertemplate:e(),texttemplate:a({arrayOk:!1,editType:"plot"},{keys:["x","y","z","text"]}),textfont:M({editType:"plot",autoSize:!0,autoColor:!0,colorEditType:"style"}),showlegend:r({},f.showlegend,{dflt:!1})},{transforms:void 0},n("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/font_attributes":594,"../../plots/template_attributes":642,"../scatter/attributes":936}],802:[function(i,U,V){var w=i("../../registry"),f=i("../../lib"),M=i("../../plots/cartesian/axes"),T=i("../../plots/cartesian/align_period"),e=i("../histogram2d/calc"),a=i("../../components/colorscale/calc"),n=i("./convert_column_xyz"),r=i("./clean_2d_array"),t=i("./interp2d"),h=i("./find_empties"),s=i("./make_bound_array"),o=i("../../constants/numerical").BADNUM;U.exports=function(c,m){var l=M.getFromId(c,m.xaxis||"x"),x=M.getFromId(c,m.yaxis||"y"),u=w.traceIs(m,"contour"),A=w.traceIs(m,"histogram"),_=w.traceIs(m,"gl2d"),g=u?"best":m.zsmooth,b,v,k,S,E,C,F,I,D,R,O;if(l._minDtick=0,x._minDtick=0,A)O=e(c,m),S=O.orig_x,b=O.x,v=O.x0,k=O.dx,I=O.orig_y,E=O.y,C=O.y0,F=O.dy,D=O.z;else{var z=m.z;f.isArray1D(z)?(n(m,l,x,"x","y",["z"]),b=m._x,E=m._y,z=m._z):(S=m.x?l.makeCalcdata(m,"x"):[],I=m.y?x.makeCalcdata(m,"y"):[],b=T(m,l,"x",S).vals,E=T(m,x,"y",I).vals,m._x=b,m._y=E),v=m.x0,k=m.dx,C=m.y0,F=m.dy,D=r(z,m,l,x)}(l.rangebreaks||x.rangebreaks)&&(D=d(b,E,D),A||(b=y(b),E=y(E),m._x=b,m._y=E)),!A&&(u||m.connectgaps)&&(m._emptypoints=h(D),t(D,m._emptypoints));function B(ne){g=m._input.zsmooth=m.zsmooth=!1,f.warn('cannot use zsmooth: "fast": '+ne)}if(g==="fast"){if(l.type==="log"||x.type==="log")B("log axis found");else if(!A){if(b.length){var G=(b[b.length-1]-b[0])/(b.length-1),Q=Math.abs(G/100);for(R=0;R<b.length-1;R++)if(Math.abs(b[R+1]-b[R]-G)>Q){B("x scale is not linear");break}}if(E.length&&g==="fast"){var X=(E[E.length-1]-E[0])/(E.length-1),j=Math.abs(X/100);for(R=0;R<E.length-1;R++)if(Math.abs(E[R+1]-E[R]-X)>j){B("y scale is not linear");break}}}}var re=f.maxRowLength(D),ue=m.xtype==="scaled"?"":b,K=s(m,ue,v,k,re,l),te=m.ytype==="scaled"?"":E,Y=s(m,te,C,F,D.length,x);_||(m._extremes[l._id]=M.findExtremes(l,K),m._extremes[x._id]=M.findExtremes(x,Y));var H={x:K,y:Y,z:D,text:m._text||m.text,hovertext:m._hovertext||m.hovertext};if(m.xperiodalignment&&S&&(H.orig_x=S),m.yperiodalignment&&I&&(H.orig_y=I),ue&&ue.length===K.length-1&&(H.xCenter=ue),te&&te.length===Y.length-1&&(H.yCenter=te),A&&(H.xRanges=O.xRanges,H.yRanges=O.yRanges,H.pts=O.pts),u||a(c,m,{vals:D,cLetter:"z"}),u&&m.contours&&m.contours.coloring==="heatmap"){var ee={type:m.type==="contour"?"heatmap":"histogram2d",xcalendar:m.xcalendar,ycalendar:m.ycalendar};H.xfill=s(ee,ue,v,k,re,l),H.yfill=s(ee,te,C,F,D.length,x)}return[H]};function y(p){for(var c=[],m=p.length,l=0;l<m;l++){var x=p[l];x!==o&&c.push(x)}return c}function d(p,c,m){for(var l=[],x=-1,u=0;u<m.length;u++)if(c[u]!==o){x++,l[x]=[];for(var A=0;A<m[u].length;A++)p[A]!==o&&l[x].push(m[u][A])}return l}},{"../../components/colorscale/calc":375,"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566,"../../registry":647,"../histogram2d/calc":835,"./clean_2d_array":803,"./convert_column_xyz":805,"./find_empties":807,"./interp2d":810,"./make_bound_array":812}],803:[function(i,U,V){var w=i("fast-isnumeric"),f=i("../../lib"),M=i("../../constants/numerical").BADNUM;U.exports=function(e,a,n,r){var t,h,s,o,y,d;function p(A){if(!!w(A))return+A}if(a&&a.transpose){for(t=0,y=0;y<e.length;y++)t=Math.max(t,e[y].length);if(t===0)return!1;s=function(A){return A.length},o=function(A,_,g){return(A[g]||[])[_]}}else t=e.length,s=function(A,_){return A[_].length},o=function(A,_,g){return(A[_]||[])[g]};var c=function(A,_,g){return _===M||g===M?M:o(A,_,g)};function m(A){if(a&&a.type!=="carpet"&&a.type!=="contourcarpet"&&A&&A.type==="category"&&a["_"+A._id.charAt(0)].length){var _=A._id.charAt(0),g={},b=a["_"+_+"CategoryMap"]||a[_];for(y=0;y<b.length;y++)g[b[y]]=y;return function(v){var k=g[A._categories[v]];return k+1?k:M}}else return f.identity}var l=m(n),x=m(r);r&&r.type==="category"&&(t=r._categories.length);var u=new Array(t);for(y=0;y<t;y++)for(n&&n.type==="category"?h=n._categories.length:h=s(e,y),u[y]=new Array(h),d=0;d<h;d++)u[y][d]=p(c(e,x(y),l(d)));return u}},{"../../constants/numerical":491,"../../lib":515,"fast-isnumeric":190}],804:[function(i,U,V){U.exports={min:"zmin",max:"zmax"}},{}],805:[function(i,U,V){var w=i("../../lib"),f=i("../../constants/numerical").BADNUM,M=i("../../plots/cartesian/align_period");U.exports=function(e,a,n,r,t,h){var s=e._length,o=a.makeCalcdata(e,r),y=n.makeCalcdata(e,t);o=M(e,a,r,o).vals,y=M(e,n,t,y).vals;var d=e.text,p=d!==void 0&&w.isArray1D(d),c=e.hovertext,m=c!==void 0&&w.isArray1D(c),l,x,u=w.distinctVals(o),A=u.vals,_=w.distinctVals(y),g=_.vals,b=[],v,k,S=g.length,E=A.length;for(l=0;l<h.length;l++)b[l]=w.init2dArray(S,E);p&&(v=w.init2dArray(S,E)),m&&(k=w.init2dArray(S,E));var C=w.init2dArray(S,E);for(l=0;l<s;l++)if(o[l]!==f&&y[l]!==f){var F=w.findBin(o[l]+u.minDiff/2,A),I=w.findBin(y[l]+_.minDiff/2,g);for(x=0;x<h.length;x++){var D=h[x],R=e[D],O=b[x];O[I][F]=R[l],C[I][F]=l}p&&(v[I][F]=d[l]),m&&(k[I][F]=c[l])}for(e["_"+r]=A,e["_"+t]=g,x=0;x<h.length;x++)e["_"+h[x]]=b[x];p&&(e._text=v),m&&(e._hovertext=k),a&&a.type==="category"&&(e["_"+r+"CategoryMap"]=A.map(function(z){return a._categories[z]})),n&&n.type==="category"&&(e["_"+t+"CategoryMap"]=g.map(function(z){return n._categories[z]})),e._after2before=C}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/align_period":563}],806:[function(i,U,V){var w=i("../../lib"),f=i("./xyz_defaults"),M=i("./label_defaults"),T=i("../scatter/period_defaults"),e=i("./style_defaults"),a=i("../../components/colorscale/defaults"),n=i("./attributes");U.exports=function(t,h,s,o){function y(p,c){return w.coerce(t,h,n,p,c)}var d=f(t,h,y,o);if(!d){h.visible=!1;return}T(t,h,o,y),y("xhoverformat"),y("yhoverformat"),y("text"),y("hovertext"),y("hovertemplate"),M(y,o),e(t,h,y,o),y("hoverongaps"),y("connectgaps",w.isArray1D(h.z)&&h.zsmooth!==!1),a(t,h,o,y,{prefix:"",cLetter:"z"})}},{"../../components/colorscale/defaults":377,"../../lib":515,"../scatter/period_defaults":956,"./attributes":801,"./label_defaults":811,"./style_defaults":815,"./xyz_defaults":816}],807:[function(i,U,V){var w=i("../../lib").maxRowLength;U.exports=function(M){var T=[],e={},a=[],n=M[0],r=[],t=[0,0,0],h=w(M),s,o,y,d,p,c,m,l;for(o=0;o<M.length;o++)for(s=r,r=n,n=M[o+1]||[],y=0;y<h;y++)r[y]===void 0&&(c=(r[y-1]!==void 0?1:0)+(r[y+1]!==void 0?1:0)+(s[y]!==void 0?1:0)+(n[y]!==void 0?1:0),c?(o===0&&c++,y===0&&c++,o===M.length-1&&c++,y===r.length-1&&c++,c<4&&(e[[o,y]]=[o,y,c]),T.push([o,y,c])):a.push([o,y]));for(;a.length;){for(m={},l=!1,p=a.length-1;p>=0;p--)d=a[p],o=d[0],y=d[1],c=((e[[o-1,y]]||t)[2]+(e[[o+1,y]]||t)[2]+(e[[o,y-1]]||t)[2]+(e[[o,y+1]]||t)[2])/20,c&&(m[d]=[o,y,c],a.splice(p,1),l=!0);if(!l)throw"findEmpties iterated with no new neighbors";for(d in m)e[d]=m[d],T.push(m[d])}return T.sort(function(x,u){return u[2]-x[2]})}},{"../../lib":515}],808:[function(i,U,V){var w=i("../../components/fx"),f=i("../../lib"),M=i("../../plots/cartesian/axes"),T=i("../../components/colorscale").extractOpts;U.exports=function(a,n,r,t,h){h||(h={});var s=h.isContour,o=a.cd[0],y=o.trace,d=a.xa,p=a.ya,c=o.x,m=o.y,l=o.z,x=o.xCenter,u=o.yCenter,A=o.zmask,_=y.zhoverformat,g=c,b=m,v,k,S,E;if(a.index!==!1){try{S=Math.round(a.index[1]),E=Math.round(a.index[0])}catch{f.error("Error hovering on heatmap, pointNumber must be [row,col], found:",a.index);return}if(S<0||S>=l[0].length||E<0||E>l.length)return}else{if(w.inbox(n-c[0],n-c[c.length-1],0)>0||w.inbox(r-m[0],r-m[m.length-1],0)>0)return;if(s){var C;for(g=[2*c[0]-c[1]],C=1;C<c.length;C++)g.push((c[C]+c[C-1])/2);for(g.push([2*c[c.length-1]-c[c.length-2]]),b=[2*m[0]-m[1]],C=1;C<m.length;C++)b.push((m[C]+m[C-1])/2);b.push([2*m[m.length-1]-m[m.length-2]])}S=Math.max(0,Math.min(g.length-2,f.findBin(n,g))),E=Math.max(0,Math.min(b.length-2,f.findBin(r,b)))}var F=d.c2p(c[S]),I=d.c2p(c[S+1]),D=p.c2p(m[E]),R=p.c2p(m[E+1]),O,z;s?(O=o.orig_x||c,z=o.orig_y||m,I=F,v=O[S],R=D,k=z[E]):(O=o.orig_x||x||c,z=o.orig_y||u||m,v=x?O[S]:(O[S]+O[S+1])/2,k=u?z[E]:(z[E]+z[E+1])/2,d&&d.type==="category"&&(v=c[S]),p&&p.type==="category"&&(k=m[E]),y.zsmooth&&(F=I=d.c2p(v),D=R=p.c2p(k)));var B=l[E][S];if(A&&!A[E][S]&&(B=void 0),!(B===void 0&&!y.hoverongaps)){var G;Array.isArray(o.hovertext)&&Array.isArray(o.hovertext[E])?G=o.hovertext[E][S]:Array.isArray(o.text)&&Array.isArray(o.text[E])&&(G=o.text[E][S]);var Q=T(y),X={type:"linear",range:[Q.min,Q.max],hoverformat:_,_separators:d._separators,_numFormat:d._numFormat},j=M.tickText(X,B,"hover").text;return[f.extendFlat(a,{index:y._after2before?y._after2before[E][S]:[E,S],distance:a.maxHoverDistance,spikeDistance:a.maxSpikeDistance,x0:F,x1:I,y0:D,y1:R,xLabelVal:v,yLabelVal:k,zLabelVal:B,zLabel:j,text:G})]}}},{"../../components/colorscale":379,"../../components/fx":407,"../../lib":515,"../../plots/cartesian/axes":566}],809:[function(i,U,V){U.exports={attributes:i("./attributes"),supplyDefaults:i("./defaults"),calc:i("./calc"),plot:i("./plot"),colorbar:i("./colorbar"),style:i("./style"),hoverPoints:i("./hover"),moduleType:"trace",name:"heatmap",basePlotModule:i("../../plots/cartesian"),categories:["cartesian","svg","2dMap","showLegend"],meta:{}}},{"../../plots/cartesian":578,"./attributes":801,"./calc":802,"./colorbar":804,"./defaults":806,"./hover":808,"./plot":813,"./style":814}],810:[function(i,U,V){var w=i("../../lib"),f=.01,M=[[-1,0],[1,0],[0,-1],[0,1]];function T(a){return .5-.25*Math.min(1,a*.5)}U.exports=function(n,r){var t=1,h;for(e(n,r),h=0;h<r.length&&!(r[h][2]<4);h++);for(r=r.slice(h),h=0;h<100&&t>f;h++)t=e(n,r,T(t));return t>f&&w.log("interp2d didn't converge quickly",t),n};function e(a,n,r){var t=0,h,s,o,y,d,p,c,m,l,x,u,A,_;for(y=0;y<n.length;y++){for(h=n[y],s=h[0],o=h[1],u=a[s][o],x=0,l=0,d=0;d<4;d++)p=M[d],c=a[s+p[0]],c&&(m=c[o+p[1]],m!==void 0&&(x===0?A=_=m:(A=Math.min(A,m),_=Math.max(_,m)),l++,x+=m));if(l===0)throw"iterateInterp2d order is wrong: no defined neighbors";a[s][o]=x/l,u===void 0?l<4&&(t=1):(a[s][o]=(1+r)*a[s][o]-r*u,_>A&&(t=Math.max(t,Math.abs(a[s][o]-u)/(_-A))))}return t}},{"../../lib":515}],811:[function(i,U,V){var w=i("../../lib");U.exports=function(M,T){M("texttemplate");var e=w.extendFlat({},T.font,{color:"auto",size:"auto"});w.coerceFont(M,"textfont",e)}},{"../../lib":515}],812:[function(i,U,V){var w=i("../../registry"),f=i("../../lib").isArrayOrTypedArray;U.exports=function(T,e,a,n,r,t){var h=[],s=w.traceIs(T,"contour"),o=w.traceIs(T,"histogram"),y=w.traceIs(T,"gl2d"),d,p,c,m=f(e)&&e.length>1;if(m&&!o&&t.type!=="category"){var l=e.length;if(l<=r){if(s||y)h=e.slice(0,r);else if(r===1)h=[e[0]-.5,e[0]+.5];else{for(h=[1.5*e[0]-.5*e[1]],c=1;c<l;c++)h.push((e[c-1]+e[c])*.5);h.push(1.5*e[l-1]-.5*e[l-2])}if(l<r){var x=h[h.length-1],u=x-h[h.length-2];for(c=l;c<r;c++)x+=u,h.push(x)}}else return s?e.slice(0,r):e.slice(0,r+1)}else{var A=T[t._id.charAt(0)+"calendar"];if(o)d=t.r2c(a,0,A);else if(f(e)&&e.length===1)d=e[0];else if(a===void 0)d=0;else{var _=t.type==="log"?t.d2c:t.r2c;d=_(a,0,A)}for(p=n||1,c=s||y?0:-.5;c<r;c++)h.push(d+p*c)}return h}},{"../../lib":515,"../../registry":647}],813:[function(i,U,V){var w=i("@plotly/d3"),f=i("tinycolor2"),M=i("../../registry"),T=i("../../components/drawing"),e=i("../../plots/cartesian/axes"),a=i("../../lib"),n=i("../../lib/svg_text_utils"),r=i("../scatter/format_labels"),t=i("../../components/color"),h=i("../../components/colorscale").extractOpts,s=i("../../components/colorscale").makeColorScaleFuncFromTrace,o=i("../../constants/xmlns_namespaces"),y=i("../../constants/alignment"),d=y.LINE_SPACING,p="heatmap-label";function c(A){return A.selectAll("g."+p)}function m(A){c(A).remove()}U.exports=function(A,_,g,b){var v=_.xaxis,k=_.yaxis;a.makeTraceGroups(b,g,"hm").each(function(S){var E=w.select(this),C=S[0],F=C.trace,I=F.xgap||0,D=F.ygap||0,R=C.z,O=C.x,z=C.y,B=C.xCenter,G=C.yCenter,Q=M.traceIs(F,"contour"),X=Q?"best":F.zsmooth,j=R.length,re=a.maxRowLength(R),ue=!1,K=!1,te,Y,H,ee,ne,Z,q,ie;for(Z=0;te===void 0&&Z<O.length-1;)te=v.c2p(O[Z]),Z++;for(Z=O.length-1;Y===void 0&&Z>0;)Y=v.c2p(O[Z]),Z--;for(Y<te&&(H=Y,Y=te,te=H,ue=!0),Z=0;ee===void 0&&Z<z.length-1;)ee=k.c2p(z[Z]),Z++;for(Z=z.length-1;ne===void 0&&Z>0;)ne=k.c2p(z[Z]),Z--;if(ne<ee&&(H=ee,ee=ne,ne=H,K=!0),Q&&(B=O,G=z,O=C.xfill,z=C.yfill),X!=="fast"){var se=X==="best"?0:.5;te=Math.max(-se*v._length,te),Y=Math.min((1+se)*v._length,Y),ee=Math.max(-se*k._length,ee),ne=Math.min((1+se)*k._length,ne)}var ae=Math.round(Y-te),oe=Math.round(ne-ee),be=ae<=0||oe<=0;if(be){var ce=E.selectAll("image").data([]);ce.exit().remove(),m(E);return}var de,ye;X==="fast"?(de=re,ye=j):(de=ae,ye=oe);var ge=document.createElement("canvas");ge.width=de,ge.height=ye;var me=ge.getContext("2d"),Se=s(F,{noNumericCheck:!0,returnArray:!0}),Le,Oe;X==="fast"?(Le=ue?function(Ir){return re-1-Ir}:a.identity,Oe=K?function(Ir){return j-1-Ir}:a.identity):(Le=function(Ir){return a.constrain(Math.round(v.c2p(O[Ir])-te),0,ae)},Oe=function(Ir){return a.constrain(Math.round(k.c2p(z[Ir])-ee),0,oe)});var we=Oe(0),Ce=[we,we],Ke=ue?0:1,Ye=K?0:1,Fe=0,Re=0,je=0,xt=0,Nt,tr,Ht,Pt,$t;function Ut(Ir,Cr){if(Ir!==void 0){var Kr=Se(Ir);return Kr[0]=Math.round(Kr[0]),Kr[1]=Math.round(Kr[1]),Kr[2]=Math.round(Kr[2]),Fe+=Cr,Re+=Kr[0]*Cr,je+=Kr[1]*Cr,xt+=Kr[2]*Cr,Kr}return[0,0,0,0]}function Lt(Ir,Cr,Kr,Cn){var yn=Ir[Kr.bin0];if(yn===void 0)return Ut(void 0,1);var Yn=Ir[Kr.bin1],In=Cr[Kr.bin0],Jn=Cr[Kr.bin1],Zn=Yn-yn||0,ba=In-yn||0,Pa;return Yn===void 0?Jn===void 0?Pa=0:In===void 0?Pa=2*(Jn-yn):Pa=(2*Jn-In-yn)*2/3:Jn===void 0?In===void 0?Pa=0:Pa=(2*yn-Yn-In)*2/3:In===void 0?Pa=(2*Jn-Yn-yn)*2/3:Pa=Jn+yn-Yn-In,Ut(yn+Kr.frac*Zn+Cn.frac*(ba+Kr.frac*Pa))}if(X){var We=0,ot;try{ot=new Uint8Array(ae*oe*4)}catch{ot=new Array(ae*oe*4)}if(X==="best"){var Ge=B||O,Me=G||z,Ve=new Array(Ge.length),Qe=new Array(Me.length),tt=new Array(ae),St=B?x:l,wt=G?x:l,Ct,jt,Bt;for(Z=0;Z<Ge.length;Z++)Ve[Z]=Math.round(v.c2p(Ge[Z])-te);for(Z=0;Z<Me.length;Z++)Qe[Z]=Math.round(k.c2p(Me[Z])-ee);for(Z=0;Z<ae;Z++)tt[Z]=St(Z,Ve);for(q=0;q<oe;q++)for(Ct=wt(q,Qe),jt=R[Ct.bin0],Bt=R[Ct.bin1],Z=0;Z<ae;Z++,We+=4)$t=Lt(jt,Bt,tt[Z],Ct),u(ot,We,$t)}else for(q=0;q<j;q++)for(Pt=R[q],Ce=Oe(q),Z=0;Z<ae;Z++)$t=Ut(Pt[Z],1),We=(Ce*ae+Le(Z))*4,u(ot,We,$t);var Wt=me.createImageData(ae,oe);try{Wt.data.set(ot)}catch{var Qt=Wt.data,Zt=Qt.length;for(q=0;q<Zt;q++)Qt[q]=ot[q]}me.putImageData(Wt,0,0)}else{var cr=Math.floor(I/2),Xr=Math.floor(D/2);for(q=0;q<j;q++)if(Pt=R[q],Ce.reverse(),Ce[Ye]=Oe(q+1),!(Ce[0]===Ce[1]||Ce[0]===void 0||Ce[1]===void 0))for(tr=Le(0),Nt=[tr,tr],Z=0;Z<re;Z++)Nt.reverse(),Nt[Ke]=Le(Z+1),!(Nt[0]===Nt[1]||Nt[0]===void 0||Nt[1]===void 0)&&(Ht=Pt[Z],$t=Ut(Ht,(Nt[1]-Nt[0])*(Ce[1]-Ce[0])),me.fillStyle="rgba("+$t.join(",")+")",me.fillRect(Nt[0]+cr,Ce[0]+Xr,Nt[1]-Nt[0]-I,Ce[1]-Ce[0]-D))}Re=Math.round(Re/Fe),je=Math.round(je/Fe),xt=Math.round(xt/Fe);var vn=f("rgb("+Re+","+je+","+xt+")");A._hmpixcount=(A._hmpixcount||0)+Fe,A._hmlumcount=(A._hmlumcount||0)+Fe*vn.getLuminance();var en=E.selectAll("image").data(S);en.enter().append("svg:image").attr({xmlns:o.svg,preserveAspectRatio:"none"}),en.attr({height:oe,width:ae,x:te,y:ee,"xlink:href":ge.toDataURL("image/png")}),m(E);var ut=F.texttemplate;if(ut){var ar=h(F),rr={type:"linear",range:[ar.min,ar.max],_separators:v._separators,_numFormat:v._numFormat},Kt=F.type==="histogram2dcontour",Er=F.type==="contour",st=Er?1:0,et=Er?j-1:j,ht=Er?1:0,vt=Er?re-1:re,kt=[];for(Z=st;Z<et;Z++){var Vt;if(Er)Vt=C.y[Z];else if(Kt){if(Z===0||Z===j-1)continue;Vt=C.y[Z]}else if(C.yCenter)Vt=C.yCenter[Z];else{if(Z+1===j&&C.y[Z+1]===void 0)continue;Vt=(C.y[Z]+C.y[Z+1])/2}var Pe=Math.round(k.c2p(Vt));if(!(0>Pe||Pe>k._length))for(q=ht;q<vt;q++){var ke;if(Er)ke=C.x[q];else if(Kt){if(q===0||q===re-1)continue;ke=C.x[q]}else if(C.xCenter)ke=C.xCenter[q];else{if(q+1===re&&C.x[q+1]===void 0)continue;ke=(C.x[q]+C.x[q+1])/2}var lt=Math.round(v.c2p(ke));if(!(0>lt||lt>v._length)){var ft=r({x:ke,y:Vt},F,A._fullLayout);ft.x=ke,ft.y=Vt;var yt=C.z[Z][q];yt===void 0?(ft.z="",ft.zLabel=""):(ft.z=yt,ft.zLabel=e.tickText(rr,yt,"hover").text);var Rt=C.text&&C.text[Z]&&C.text[Z][q];(Rt===void 0||Rt===!1)&&(Rt=""),ft.text=Rt;var _t=a.texttemplateString(ut,ft,A._fullLayout._d3locale,ft,F._meta||{});if(!!_t){var Dt=_t.split("<br>"),Jt=Dt.length,fr=0;for(ie=0;ie<Jt;ie++)fr=Math.max(fr,Dt[ie].length);kt.push({l:Jt,c:fr,t:_t,x:lt,y:Pe,z:yt})}}}}var Rr=F.textfont,Sr=Rr.family,Pr=Rr.size,Jr=A._fullLayout.font.size;if(!Pr||Pr==="auto"){var ur=1/0,_r=1/0,Br=0,Yr=0;for(ie=0;ie<kt.length;ie++){var Dr=kt[ie];if(Br=Math.max(Br,Dr.l),Yr=Math.max(Yr,Dr.c),ie<kt.length-1){var it=kt[ie+1],zt=Math.abs(it.x-Dr.x),qt=Math.abs(it.y-Dr.y);zt&&(ur=Math.min(ur,zt)),qt&&(_r=Math.min(_r,qt))}}!isFinite(ur)||!isFinite(_r)?Pr=Jr:(ur-=I,_r-=D,ur/=Yr,_r/=Br,ur/=d/2,_r/=d,Pr=Math.min(Math.floor(ur),Math.floor(_r),Jr))}if(Pr<=0||!isFinite(Pr))return;var hr=function(Ir){return Ir.x},Ur=function(Ir){return Ir.y-Pr*(Ir.l*d/2-1)},Gr=c(E).data(kt);Gr.enter().append("g").classed(p,1).append("text").attr("text-anchor","middle").each(function(Ir){var Cr=w.select(this),Kr=Rr.color;(!Kr||Kr==="auto")&&(Kr=t.contrast("rgba("+Se(Ir.z).join()+")")),Cr.attr("data-notex",1).call(n.positionText,hr(Ir),Ur(Ir)).call(T.font,Sr,Pr,Kr).text(Ir.t).call(n.convertToTspans,A)})}})};function l(A,_){var g=_.length-2,b=a.constrain(a.findBin(A,_),0,g),v=_[b],k=_[b+1],S=a.constrain(b+(A-v)/(k-v)-.5,0,g),E=Math.round(S),C=Math.abs(S-E);return!S||S===g||!C?{bin0:E,bin1:E,frac:0}:{bin0:E,frac:C,bin1:Math.round(E+C/(S-E))}}function x(A,_){var g=_.length-1,b=a.constrain(a.findBin(A,_),0,g),v=_[b],k=_[b+1],S=(A-v)/(k-v)||0;return S<=0?{bin0:b,bin1:b,frac:0}:S<.5?{bin0:b,bin1:b+1,frac:S}:{bin0:b+1,bin1:b,frac:1-S}}function u(A,_,g){A[_]=g[0],A[_+1]=g[1],A[_+2]=g[2],A[_+3]=Math.round(g[3]*255)}},{"../../components/color":367,"../../components/colorscale":379,"../../components/drawing":389,"../../constants/alignment":483,"../../constants/xmlns_namespaces":492,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/cartesian/axes":566,"../../registry":647,"../scatter/format_labels":945,"@plotly/d3":58,tinycolor2:313}],814:[function(i,U,V){var w=i("@plotly/d3");U.exports=function(M){w.select(M).selectAll(".hm image").style("opacity",function(T){return T.trace.opacity})}},{"@plotly/d3":58}],815:[function(i,U,V){U.exports=function(f,M,T){var e=T("zsmooth");e===!1&&(T("xgap"),T("ygap")),T("zhoverformat")}},{}],816:[function(i,U,V){var w=i("fast-isnumeric"),f=i("../../lib"),M=i("../../registry");U.exports=function(n,r,t,h,s,o){var y=t("z");s=s||"x",o=o||"y";var d,p;if(y===void 0||!y.length)return 0;if(f.isArray1D(n.z)){d=t(s),p=t(o);var c=f.minRowLength(d),m=f.minRowLength(p);if(c===0||m===0)return 0;r._length=Math.min(c,m,y.length)}else{if(d=T(s,t),p=T(o,t),!e(y))return 0;t("transpose"),r._length=null}if(n.type==="heatmapgl")return!0;var l=M.getComponentMethod("calendars","handleTraceDefaults");return l(n,r,[s,o],h),!0};function T(a,n){var r=n(a),t=r?n(a+"type","array"):"scaled";return t==="scaled"&&(n(a+"0"),n("d"+a)),r}function e(a){for(var n=!0,r=!1,t=!1,h,s=0;s<a.length;s++){if(h=a[s],!f.isArrayOrTypedArray(h)){n=!1;break}h.length>0&&(r=!0);for(var o=0;o<h.length;o++)if(w(h[o])){t=!0;break}}return n&&r&&t}},{"../../lib":515,"../../registry":647,"fast-isnumeric":190}],817:[function(i,U,V){for(var w=i("../heatmap/attributes"),f=i("../../components/colorscale/attributes"),M=i("../../lib/extend").extendFlat,T=i("../../plot_api/edit_types").overrideAll,e=["z","x","x0","dx","y","y0","dy","text","transpose","xtype","ytype"],a={},n=0;n<e.length;n++){var r=e[n];a[r]=w[r]}a.zsmooth={valType:"enumerated",values:["fast",!1],dflt:"fast",editType:"calc"},M(a,f("",{cLetter:"z",autoColorDflt:!1})),U.exports=T(a,"calc","nested")},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plot_api/edit_types":548,"../heatmap/attributes":801}],818:[function(i,U,V){var w=i("../../../stackgl_modules").gl_heatmap2d,f=i("../../plots/cartesian/axes"),M=i("../../lib/str2rgbarray");function T(r,t){this.scene=r,this.uid=t,this.type="heatmapgl",this.name="",this.hoverinfo="all",this.xData=[],this.yData=[],this.zData=[],this.textLabels=[],this.idToIndex=[],this.bounds=[0,0,0,0],this.options={zsmooth:"fast",z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]},this.heatmap=w(r.glplot,this.options),this.heatmap._trace=this}var e=T.prototype;e.handlePick=function(r){var t=this.options,h=t.shape,s=r.pointId,o=s%h[0],y=Math.floor(s/h[0]),d=s;return{trace:this,dataCoord:r.dataCoord,traceCoord:[t.x[o],t.y[y],t.z[d]],textLabel:this.textLabels[s],name:this.name,pointIndex:[y,o],hoverinfo:this.hoverinfo}},e.update=function(r,t){var h=t[0];this.index=r.index,this.name=r.name,this.hoverinfo=r.hoverinfo;var s=h.z;this.options.z=[].concat.apply([],s);var o=s[0].length,y=s.length;this.options.shape=[o,y],this.options.x=h.x,this.options.y=h.y,this.options.zsmooth=r.zsmooth;var d=a(r);this.options.colorLevels=d.colorLevels,this.options.colorValues=d.colorValues,this.textLabels=[].concat.apply([],r.text),this.heatmap.update(this.options);var p=this.scene.xaxis,c=this.scene.yaxis,m,l;r.zsmooth===!1&&(m={ppad:h.x[1]-h.x[0]},l={ppad:h.y[1]-h.y[0]}),r._extremes[p._id]=f.findExtremes(p,h.x,m),r._extremes[c._id]=f.findExtremes(c,h.y,l)},e.dispose=function(){this.heatmap.dispose()};function a(r){for(var t=r.colorscale,h=r.zmin,s=r.zmax,o=t.length,y=new Array(o),d=new Array(4*o),p=0;p<o;p++){var c=t[p],m=M(c[1]);y[p]=h+c[0]*(s-h);for(var l=0;l<4;l++)d[4*p+l]=m[l]}return{colorLevels:y,colorValues:d}}function n(r,t,h){var s=new T(r,t.uid);return s.update(t,h),s}U.exports=n},{"../../../stackgl_modules":1133,"../../lib/str2rgbarray":540,"../../plots/cartesian/axes":566}],819:[function(i,U,V){var w=i("../../lib"),f=i("../heatmap/xyz_defaults"),M=i("../../components/colorscale/defaults"),T=i("./attributes");U.exports=function(a,n,r,t){function h(o,y){return w.coerce(a,n,T,o,y)}var s=f(a,n,h,t);if(!s){n.visible=!1;return}h("text"),h("zsmooth"),M(a,n,t,h,{prefix:"",cLetter:"z"})}},{"../../components/colorscale/defaults":377,"../../lib":515,"../heatmap/xyz_defaults":816,"./attributes":817}],820:[function(i,U,V){U.exports={attributes:i("./attributes"),supplyDefaults:i("./defaults"),colorbar:i("../heatmap/colorbar"),calc:i("../heatmap/calc"),plot:i("./convert"),moduleType:"trace",name:"heatmapgl",basePlotModule:i("../../plots/gl2d"),categories:["gl","gl2d","2dMap"],meta:{}}},{"../../plots/gl2d":605,"../heatmap/calc":802,"../heatmap/colorbar":804,"./attributes":817,"./convert":818,"./defaults":819}],821:[function(i,U,V){var w=i("../bar/attributes"),f=i("../../plots/cartesian/axis_format_attributes").axisHoverFormat,M=i("../../plots/template_attributes").hovertemplateAttrs,T=i("../../plots/template_attributes").texttemplateAttrs,e=i("../../plots/font_attributes"),a=i("./bin_attributes"),n=i("./constants"),r=i("../../lib/extend").extendFlat;U.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},xhoverformat:f("x"),yhoverformat:f("y"),text:r({},w.text,{}),hovertext:r({},w.hovertext,{}),orientation:w.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:a("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:a("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:M({},{keys:n.eventDataKeys}),texttemplate:T({arrayOk:!1,editType:"plot"},{keys:["label","value"]}),textposition:r({},w.textposition,{arrayOk:!1}),textfont:e({arrayOk:!1,editType:"plot",colorEditType:"style"}),outsidetextfont:e({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextfont:e({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextanchor:w.insidetextanchor,textangle:w.textangle,cliponaxis:w.cliponaxis,constraintext:w.constraintext,marker:w.marker,offsetgroup:w.offsetgroup,alignmentgroup:w.alignmentgroup,selected:w.selected,unselected:w.unselected,_deprecated:{bardir:w._deprecated.bardir}}},{"../../lib/extend":505,"../../plots/cartesian/axis_format_attributes":569,"../../plots/font_attributes":594,"../../plots/template_attributes":642,"../bar/attributes":657,"./bin_attributes":823,"./constants":827}],822:[function(i,U,V){U.exports=function(f,M){for(var T=f.length,e=0,a=0;a<T;a++)M[a]?(f[a]/=M[a],e+=f[a]):f[a]=null;return e}},{}],823:[function(i,U,V){U.exports=function(f,M){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}},{}],824:[function(i,U,V){var w=i("fast-isnumeric");U.exports={count:function(f,M,T){return T[f]++,1},sum:function(f,M,T,e){var a=e[M];return w(a)?(a=Number(a),T[f]+=a,a):0},avg:function(f,M,T,e,a){var n=e[M];return w(n)&&(n=Number(n),T[f]+=n,a[f]++),0},min:function(f,M,T,e){var a=e[M];if(w(a))if(a=Number(a),w(T[f])){if(T[f]>a){var n=a-T[f];return T[f]=a,n}}else return T[f]=a,a;return 0},max:function(f,M,T,e){var a=e[M];if(w(a))if(a=Number(a),w(T[f])){if(T[f]<a){var n=a-T[f];return T[f]=a,n}}else return T[f]=a,a;return 0}}},{"fast-isnumeric":190}],825:[function(i,U,V){var w=i("../../constants/numerical"),f=w.ONEAVGYEAR,M=w.ONEAVGMONTH,T=w.ONEDAY,e=w.ONEHOUR,a=w.ONEMIN,n=w.ONESEC,r=i("../../plots/cartesian/axes").tickIncrement;U.exports=function(d,p,c,m,l){var x=-1.1*p,u=-.1*p,A=d-u,_=c[0],g=c[1],b=Math.min(t(_+u,_+A,m,l),t(g+u,g+A,m,l)),v=Math.min(t(_+x,_+u,m,l),t(g+x,g+u,m,l)),k,S;if(b>v&&v<Math.abs(g-_)/4e3?(k=b,S=!1):(k=Math.min(b,v),S=!0),m.type==="date"&&k>T){var E=k===f?1:6,C=k===f?"M12":"M1";return function(F,I){var D=m.c2d(F,f,l),R=D.indexOf("-",E);R>0&&(D=D.substr(0,R));var O=m.d2c(D,0,l);if(O<F){var z=r(O,C,!1,l);(O+z)/2<F+d&&(O=z)}return I&&S?r(O,C,!0,l):O}}return function(F,I){var D=k*Math.round(F/k);return D+k/10<F&&D+k*.9<F+d&&(D+=k),I&&S&&(D-=k),D}};function t(y,d,p,c){if(y*d<=0)return 1/0;for(var m=Math.abs(d-y),l=p.type==="date",x=h(m,l),u=0;u<10;u++){var A=h(x*80,l);if(x===A)break;if(s(A,y,d,l,p,c))x=A;else break}return x}function h(y,d){return d&&y>n?y>T?y>f*1.1?f:y>M*1.1?M:T:y>e?e:y>a?a:n:Math.pow(10,Math.floor(Math.log(y)/Math.LN10))}function s(y,d,p,c,m,l){if(c&&y>T){var x=o(d,m,l),u=o(p,m,l),A=y===f?0:1;return x[A]!==u[A]}return Math.floor(p/y)-Math.floor(d/y)>.1}function o(y,d,p){var c=d.c2d(y,f,p).split("-");return c[0]===""&&(c.unshift(),c[0]="-"+c[0]),c}},{"../../constants/numerical":491,"../../plots/cartesian/axes":566}],826:[function(i,U,V){var w=i("fast-isnumeric"),f=i("../../lib"),M=i("../../registry"),T=i("../../plots/cartesian/axes"),e=i("../bar/arrays_to_calcdata"),a=i("./bin_functions"),n=i("./norm_functions"),r=i("./average"),t=i("./bin_label_vals");function h(p,c){var m=[],l=[],x=c.orientation==="h",u=T.getFromId(p,x?c.yaxis:c.xaxis),A=x?"y":"x",_={x:"y",y:"x"}[A],g=c[A+"calendar"],b=c.cumulative,v,k=s(p,c,u,A),S=k[0],E=k[1],C=typeof S.size=="string",F=[],I=C?F:S,D=[],R=[],O=[],z=0,B=c.histnorm,G=c.histfunc,Q=B.indexOf("density")!==-1,X,j,re;b.enabled&&Q&&(B=B.replace(/ ?density$/,""),Q=!1);var ue=G==="max"||G==="min",K=ue?null:0,te=a.count,Y=n[B],H=!1,ee=function(Oe){return u.r2c(Oe,0,g)},ne;for(f.isArrayOrTypedArray(c[_])&&G!=="count"&&(ne=c[_],H=G==="avg",te=a[G]),v=ee(S.start),j=ee(S.end)+(v-T.tickIncrement(v,S.size,!1,g))/1e6;v<j&&m.length<1e6&&(X=T.tickIncrement(v,S.size,!1,g),m.push((v+X)/2),l.push(K),O.push([]),F.push(v),Q&&D.push(1/(X-v)),H&&R.push(0),!(X<=v));)v=X;F.push(v),!C&&u.type==="date"&&(I={start:ee(I.start),end:ee(I.end),size:I.size}),p._fullLayout._roundFnOpts||(p._fullLayout._roundFnOpts={});var Z=c["_"+A+"bingroup"],q={leftGap:1/0,rightGap:1/0};Z&&(p._fullLayout._roundFnOpts[Z]||(p._fullLayout._roundFnOpts[Z]=q),q=p._fullLayout._roundFnOpts[Z]);var ie=l.length,se=!0,ae=q.leftGap,oe=q.rightGap,be={};for(v=0;v<E.length;v++){var ce=E[v];re=f.findBin(ce,I),re>=0&&re<ie&&(z+=te(re,v,l,ne,R),se&&O[re].length&&ce!==E[O[re][0]]&&(se=!1),O[re].push(v),be[v]=re,ae=Math.min(ae,ce-F[re]),oe=Math.min(oe,F[re+1]-ce))}q.leftGap=ae,q.rightGap=oe;var de;se||(de=function(Oe,we){return function(){var Ce=p._fullLayout._roundFnOpts[Z];return t(Ce.leftGap,Ce.rightGap,F,u,g)(Oe,we)}}),H&&(z=r(l,R)),Y&&Y(l,z,D),b.enabled&&d(l,b.direction,b.currentbin);var ye=Math.min(m.length,l.length),ge=[],me=0,Se=ye-1;for(v=0;v<ye;v++)if(l[v]){me=v;break}for(v=ye-1;v>=me;v--)if(l[v]){Se=v;break}for(v=me;v<=Se;v++)if(w(m[v])&&w(l[v])){var Le={p:m[v],s:l[v],b:0};b.enabled||(Le.pts=O[v],se?Le.ph0=Le.ph1=O[v].length?E[O[v][0]]:m[v]:(c._computePh=!0,Le.ph0=de(F[v]),Le.ph1=de(F[v+1],!0))),ge.push(Le)}return ge.length===1&&(ge[0].width1=T.tickIncrement(ge[0].p,S.size,!1,g)-ge[0].p),e(ge,c),f.isArrayOrTypedArray(c.selectedpoints)&&f.tagSelected(ge,c,be),ge}function s(p,c,m,l,x){var u=l+"bins",A=p._fullLayout,_=c["_"+l+"bingroup"],g=A._histogramBinOpts[_],b=A.barmode==="overlay",v,k,S,E,C,F,I,D=function(ce){return m.r2c(ce,0,E)},R=function(ce){return m.c2r(ce,0,E)},O=m.type==="date"?function(ce){return ce||ce===0?f.cleanDate(ce,null,E):null}:function(ce){return w(ce)?Number(ce):null};function z(ce,de,ye){de[ce+"Found"]?(de[ce]=O(de[ce]),de[ce]===null&&(de[ce]=ye[ce])):(F[ce]=de[ce]=ye[ce],f.nestedProperty(k[0],u+"."+ce).set(ye[ce]))}if(c["_"+l+"autoBinFinished"])delete c["_"+l+"autoBinFinished"];else{k=g.traces;var B=[],G=!0,Q=!1,X=!1;for(v=0;v<k.length;v++)if(S=k[v],S.visible){var j=g.dirs[v];C=S["_"+j+"pos0"]=m.makeCalcdata(S,j),B=f.concat(B,C),delete S["_"+l+"autoBinFinished"],c.visible===!0&&(G?G=!1:(delete S._autoBin,S["_"+l+"autoBinFinished"]=1),M.traceIs(S,"2dMap")&&(Q=!0),S.type==="histogram2dcontour"&&(X=!0))}E=k[0][l+"calendar"];var re=T.autoBin(B,m,g.nbins,Q,E,g.sizeFound&&g.size),ue=k[0]._autoBin={};if(F=ue[g.dirs[0]]={},X&&(g.size||(re.start=R(T.tickIncrement(D(re.start),re.size,!0,E))),g.end===void 0&&(re.end=R(T.tickIncrement(D(re.end),re.size,!1,E)))),b&&!M.traceIs(c,"2dMap")&&re._dataSpan===0&&m.type!=="category"&&m.type!=="multicategory"){if(x)return[re,C,!0];re=o(p,c,m,l,u)}I=S.cumulative||{},I.enabled&&I.currentbin!=="include"&&(I.direction==="decreasing"?re.start=R(T.tickIncrement(D(re.start),re.size,!0,E)):re.end=R(T.tickIncrement(D(re.end),re.size,!1,E))),g.size=re.size,g.sizeFound||(F.size=re.size,f.nestedProperty(k[0],u+".size").set(re.size)),z("start",g,re),z("end",g,re)}C=c["_"+l+"pos0"],delete c["_"+l+"pos0"];var K=c._input[u]||{},te=f.extendFlat({},g),Y=g.start,H=m.r2l(K.start),ee=H!==void 0;if((g.startFound||ee)&&H!==m.r2l(Y)){var ne=ee?H:f.aggNums(Math.min,null,C),Z={type:m.type==="category"||m.type==="multicategory"?"linear":m.type,r2l:m.r2l,dtick:g.size,tick0:Y,calendar:E,range:[ne,T.tickIncrement(ne,g.size,!1,E)].map(m.l2r)},q=T.tickFirst(Z);q>m.r2l(ne)&&(q=T.tickIncrement(q,g.size,!0,E)),te.start=m.l2r(q),ee||f.nestedProperty(c,u+".start").set(te.start)}var ie=g.end,se=m.r2l(K.end),ae=se!==void 0;if((g.endFound||ae)&&se!==m.r2l(ie)){var oe=ae?se:f.aggNums(Math.max,null,C);te.end=m.l2r(oe),ae||f.nestedProperty(c,u+".start").set(te.end)}var be="autobin"+l;return c._input[be]===!1&&(c._input[u]=f.extendFlat({},c[u]||{}),delete c._input[be],delete c[be]),[te,C]}function o(p,c,m,l,x){var u=p._fullLayout,A=y(p,c),_=!1,g=1/0,b=[c],v,k,S;for(v=0;v<A.length;v++)if(k=A[v],k===c)_=!0;else if(!_)S=u._histogramBinOpts[k["_"+l+"bingroup"]],g=Math.min(g,S.size||k[x].size);else{var E=s(p,k,m,l,!0),C=E[0],F=E[2];k["_"+l+"autoBinFinished"]=1,k["_"+l+"pos0"]=E[1],F?b.push(k):g=Math.min(g,C.size)}var I=new Array(b.length);for(v=0;v<b.length;v++)for(var D=b[v]["_"+l+"pos0"],R=0;R<D.length;R++)if(D[R]!==void 0){I[v]=D[R];break}for(isFinite(g)||(g=f.distinctVals(I).minDiff),v=0;v<b.length;v++){k=b[v];var O=k[l+"calendar"],z={start:m.c2r(I[v]-g/2,0,O),end:m.c2r(I[v]+g/2,0,O),size:g};k._input[x]=k[x]=z,S=u._histogramBinOpts[k["_"+l+"bingroup"]],S&&f.extendFlat(S,z)}return c[x]}function y(p,c){for(var m=c.xaxis,l=c.yaxis,x=c.orientation,u=[],A=p._fullData,_=0;_<A.length;_++){var g=A[_];g.type==="histogram"&&g.visible===!0&&g.orientation===x&&g.xaxis===m&&g.yaxis===l&&u.push(g)}return u}function d(p,c,m){var l,x,u;function A(g){u=p[g],p[g]/=2}function _(g){x=p[g],p[g]=u+x/2,u+=x}if(m==="half")if(c==="increasing")for(A(0),l=1;l<p.length;l++)_(l);else for(A(p.length-1),l=p.length-2;l>=0;l--)_(l);else if(c==="increasing"){for(l=1;l<p.length;l++)p[l]+=p[l-1];m==="exclude"&&(p.unshift(0),p.pop())}else{for(l=p.length-2;l>=0;l--)p[l]+=p[l+1];m==="exclude"&&(p.push(0),p.shift())}}U.exports={calc:h,calcAllAutoBins:s}},{"../../lib":515,"../../plots/cartesian/axes":566,"../../registry":647,"../bar/arrays_to_calcdata":656,"./average":822,"./bin_functions":824,"./bin_label_vals":825,"./norm_functions":833,"fast-isnumeric":190}],827:[function(i,U,V){U.exports={eventDataKeys:["binNumber"]}},{}],828:[function(i,U,V){var w=i("../../lib"),f=i("../../plots/cartesian/axis_ids"),M=i("../../registry").traceIs,T=i("../bar/defaults").handleGroupingDefaults,e=w.nestedProperty,a=i("../../plots/cartesian/constraints").getAxisGroup,n=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],r=["x","y"];U.exports=function(h,s){var o=s._histogramBinOpts={},y=[],d={},p=[],c,m,l,x,u,A,_;function g(X,j){return w.coerce(c._input,c,c._module.attributes,X,j)}function b(X){return X.orientation==="v"?"x":"y"}function v(X,j){var re=f.getFromTrace({_fullLayout:s},X,j);return re.type}function k(X,j,re){var ue=X.uid+"__"+re;j||(j=ue);var K=v(X,re),te=X[re+"calendar"]||"",Y=o[j],H=!0;Y&&(K===Y.axType&&te===Y.calendar?(H=!1,Y.traces.push(X),Y.dirs.push(re)):(j=ue,K!==Y.axType&&w.warn(["Attempted to group the bins of trace",X.index,"set on a","type:"+K,"axis","with bins on","type:"+Y.axType,"axis."].join(" ")),te!==Y.calendar&&w.warn(["Attempted to group the bins of trace",X.index,"set with a",te,"calendar","with bins",Y.calendar?"on a "+Y.calendar+" calendar":"w/o a set calendar"].join(" ")))),H&&(o[j]={traces:[X],dirs:[re],axType:K,calendar:X[re+"calendar"]||""}),X["_"+re+"bingroup"]=j}for(u=0;u<h.length;u++)c=h[u],M(c,"histogram")&&(y.push(c),delete c._xautoBinFinished,delete c._yautoBinFinished,M(c,"2dMap")||T(c._input,c,s,g));var S=s._alignmentOpts||{};for(u=0;u<y.length;u++){if(c=y[u],l="",!M(c,"2dMap")){if(x=b(c),s.barmode==="group"&&c.alignmentgroup){var E=c[x+"axis"],C=a(s,E)+c.orientation;(S[C]||{})[c.alignmentgroup]&&(l=C)}!l&&s.barmode!=="overlay"&&(l=a(s,c.xaxis)+a(s,c.yaxis)+b(c))}l?(d[l]||(d[l]=[]),d[l].push(c)):p.push(c)}for(l in d){if(m=d[l],m.length===1){p.push(m[0]);continue}var F=!1;for(m.length&&(c=m[0],F=g("bingroup")),l=F||l,u=0;u<m.length;u++){c=m[u];var I=c._input.bingroup;I&&I!==l&&w.warn(["Trace",c.index,"must match","within bingroup",l+".","Ignoring its bingroup:",I,"setting."].join(" ")),c.bingroup=l,k(c,l,b(c))}}for(u=0;u<p.length;u++){c=p[u];var D=g("bingroup");if(M(c,"2dMap"))for(_=0;_<2;_++){x=r[_];var R=g(x+"bingroup",D?D+"__"+x:null);k(c,R,x)}else k(c,D,b(c))}for(l in o){var O=o[l];for(m=O.traces,A=0;A<n.length;A++){var z=n[A],B=z.name,G,Q;if(!(B==="nbins"&&O.sizeFound)){for(u=0;u<m.length;u++){if(c=m[u],x=O.dirs[u],G=z.aStr[x],e(c._input,G).get()!==void 0){O[B]=g(G),O[B+"Found"]=!0;break}Q=(c._autoBin||{})[x]||{},Q[B]&&e(c,G).set(Q[B])}if(B==="start"||B==="end")for(;u<m.length;u++)c=m[u],c["_"+x+"bingroup"]&&(Q=(c._autoBin||{})[x]||{},g(G,Q[B]));B==="nbins"&&!O.sizeFound&&!O.nbinsFound&&(c=m[0],O[B]=g(G))}}}}},{"../../lib":515,"../../plots/cartesian/axis_ids":570,"../../plots/cartesian/constraints":574,"../../registry":647,"../bar/defaults":661}],829:[function(i,U,V){var w=i("../../registry"),f=i("../../lib"),M=i("../../components/color"),T=i("../bar/defaults").handleText,e=i("../bar/style_defaults"),a=i("./attributes");U.exports=function(r,t,h,s){function o(v,k){return f.coerce(r,t,a,v,k)}var y=o("x"),d=o("y"),p=o("cumulative.enabled");p&&(o("cumulative.direction"),o("cumulative.currentbin")),o("text");var c=o("textposition");T(r,t,s,o,c,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),o("hovertext"),o("hovertemplate"),o("xhoverformat"),o("yhoverformat");var m=o("orientation",d&&!y?"h":"v"),l=m==="v"?"x":"y",x=m==="v"?"y":"x",u=y&&d?Math.min(f.minRowLength(y)&&f.minRowLength(d)):f.minRowLength(t[l]||[]);if(!u){t.visible=!1;return}t._length=u;var A=w.getComponentMethod("calendars","handleTraceDefaults");A(r,t,["x","y"],s);var _=t[x];_&&o("histfunc"),o("histnorm"),o("autobin"+l),e(r,t,o,h,s),f.coerceSelectionMarkerOpacity(t,o);var g=(t.marker.line||{}).color,b=w.getComponentMethod("errorbars","supplyDefaults");b(r,t,g||M.defaultLine,{axis:"y"}),b(r,t,g||M.defaultLine,{axis:"x",inherit:"y"})}},{"../../components/color":367,"../../lib":515,"../../registry":647,"../bar/defaults":661,"../bar/style_defaults":672,"./attributes":821}],830:[function(i,U,V){U.exports=function(f,M,T,e,a){if(f.x="xVal"in M?M.xVal:M.x,f.y="yVal"in M?M.yVal:M.y,"zLabelVal"in M&&(f.z=M.zLabelVal),M.xa&&(f.xaxis=M.xa),M.ya&&(f.yaxis=M.ya),!(T.cumulative||{}).enabled){var n=Array.isArray(a)?e[0].pts[a[0]][a[1]]:e[a].pts;f.pointNumbers=n,f.binNumber=f.pointNumber,delete f.pointNumber,delete f.pointIndex;var r;if(T._indexToPoints){r=[];for(var t=0;t<n.length;t++)r=r.concat(T._indexToPoints[n[t]])}else r=n;f.pointIndices=r}return f}},{}],831:[function(i,U,V){var w=i("../bar/hover").hoverPoints,f=i("../../plots/cartesian/axes").hoverLabelText;U.exports=function(T,e,a,n,r){var t=w(T,e,a,n,r);if(!!t){T=t[0];var h=T.cd[T.index],s=T.cd[0].trace;if(!s.cumulative.enabled){var o=s.orientation==="h"?"y":"x";T[o+"Label"]=f(T[o+"a"],[h.ph0,h.ph1],s[o+"hoverformat"])}return t}}},{"../../plots/cartesian/axes":566,"../bar/hover":664}],832:[function(i,U,V){U.exports={attributes:i("./attributes"),layoutAttributes:i("../bar/layout_attributes"),supplyDefaults:i("./defaults"),crossTraceDefaults:i("./cross_trace_defaults"),supplyLayoutDefaults:i("../bar/layout_defaults"),calc:i("./calc").calc,crossTraceCalc:i("../bar/cross_trace_calc").crossTraceCalc,plot:i("../bar/plot").plot,layerName:"barlayer",style:i("../bar/style").style,styleOnSelect:i("../bar/style").styleOnSelect,colorbar:i("../scatter/marker_colorbar"),hoverPoints:i("./hover"),selectPoints:i("../bar/select"),eventData:i("./event_data"),moduleType:"trace",name:"histogram",basePlotModule:i("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{}}},{"../../plots/cartesian":578,"../bar/cross_trace_calc":660,"../bar/layout_attributes":666,"../bar/layout_defaults":667,"../bar/plot":668,"../bar/select":669,"../bar/style":671,"../scatter/marker_colorbar":954,"./attributes":821,"./calc":826,"./cross_trace_defaults":828,"./defaults":829,"./event_data":830,"./hover":831}],833:[function(i,U,V){U.exports={percent:function(w,f){for(var M=w.length,T=100/f,e=0;e<M;e++)w[e]*=T},probability:function(w,f){for(var M=w.length,T=0;T<M;T++)w[T]/=f},density:function(w,f,M,T){var e=w.length;T=T||1;for(var a=0;a<e;a++)w[a]*=M[a]*T},"probability density":function(w,f,M,T){var e=w.length;T&&(f/=T);for(var a=0;a<e;a++)w[a]*=M[a]/f}}},{}],834:[function(i,U,V){var w=i("../histogram/attributes"),f=i("../histogram/bin_attributes"),M=i("../heatmap/attributes"),T=i("../../plots/attributes"),e=i("../../plots/cartesian/axis_format_attributes").axisHoverFormat,a=i("../../plots/template_attributes").hovertemplateAttrs,n=i("../../plots/template_attributes").texttemplateAttrs,r=i("../../components/colorscale/attributes"),t=i("../../lib/extend").extendFlat;U.exports=t({x:w.x,y:w.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:w.histnorm,histfunc:w.histfunc,nbinsx:w.nbinsx,xbins:f("x"),nbinsy:w.nbinsy,ybins:f("y"),autobinx:w.autobinx,autobiny:w.autobiny,bingroup:t({},w.bingroup,{}),xbingroup:t({},w.bingroup,{}),ybingroup:t({},w.bingroup,{}),xgap:M.xgap,ygap:M.ygap,zsmooth:M.zsmooth,xhoverformat:e("x"),yhoverformat:e("y"),zhoverformat:e("z",1),hovertemplate:a({},{keys:"z"}),texttemplate:n({arrayOk:!1,editType:"plot"},{keys:"z"}),textfont:M.textfont,showlegend:t({},T.showlegend,{dflt:!1})},r("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../heatmap/attributes":801,"../histogram/attributes":821,"../histogram/bin_attributes":823}],835:[function(i,U,V){var w=i("../../lib"),f=i("../../plots/cartesian/axes"),M=i("../histogram/bin_functions"),T=i("../histogram/norm_functions"),e=i("../histogram/average"),a=i("../histogram/bin_label_vals"),n=i("../histogram/calc").calcAllAutoBins;U.exports=function(o,y){var d=f.getFromId(o,y.xaxis),p=f.getFromId(o,y.yaxis),c=y.xcalendar,m=y.ycalendar,l=function(We){return d.r2c(We,0,c)},x=function(We){return p.r2c(We,0,m)},u=function(We){return d.c2r(We,0,c)},A=function(We){return p.c2r(We,0,m)},_,g,b,v,k=n(o,y,d,"x"),S=k[0],E=k[1],C=n(o,y,p,"y"),F=C[0],I=C[1],D=y._length;E.length>D&&E.splice(D,E.length-D),I.length>D&&I.splice(D,I.length-D);var R=[],O=[],z=[],B=typeof S.size=="string",G=typeof F.size=="string",Q=[],X=[],j=B?Q:S,re=G?X:F,ue=0,K=[],te=[],Y=y.histnorm,H=y.histfunc,ee=Y.indexOf("density")!==-1,ne=H==="max"||H==="min",Z=ne?null:0,q=M.count,ie=T[Y],se=!1,ae=[],oe=[],be="z"in y?y.z:"marker"in y&&Array.isArray(y.marker.color)?y.marker.color:"";be&&H!=="count"&&(se=H==="avg",q=M[H]);var ce=S.size,de=l(S.start),ye=l(S.end)+(de-f.tickIncrement(de,ce,!1,c))/1e6;for(_=de;_<ye;_=f.tickIncrement(_,ce,!1,c))O.push(Z),Q.push(_),se&&z.push(0);Q.push(_);var ge=O.length,me=(_-de)/ge,Se=u(de+me/2),Le=F.size,Oe=x(F.start),we=x(F.end)+(Oe-f.tickIncrement(Oe,Le,!1,m))/1e6;for(_=Oe;_<we;_=f.tickIncrement(_,Le,!1,m)){R.push(O.slice()),X.push(_);var Ce=new Array(ge);for(g=0;g<ge;g++)Ce[g]=[];te.push(Ce),se&&K.push(z.slice())}X.push(_);var Ke=R.length,Ye=(_-Oe)/Ke,Fe=A(Oe+Ye/2);ee&&(ae=r(O.length,j,me,B),oe=r(R.length,re,Ye,G)),!B&&d.type==="date"&&(j=t(l,j)),!G&&p.type==="date"&&(re=t(x,re));var Re=!0,je=!0,xt=new Array(ge),Nt=new Array(Ke),tr=1/0,Ht=1/0,Pt=1/0,$t=1/0;for(_=0;_<D;_++){var Ut=E[_],Lt=I[_];b=w.findBin(Ut,j),v=w.findBin(Lt,re),b>=0&&b<ge&&v>=0&&v<Ke&&(ue+=q(b,_,R[v],be,K[v]),te[v][b].push(_),Re&&(xt[b]===void 0?xt[b]=Ut:xt[b]!==Ut&&(Re=!1)),je&&(Nt[v]===void 0?Nt[v]=Lt:Nt[v]!==Lt&&(je=!1)),tr=Math.min(tr,Ut-Q[b]),Ht=Math.min(Ht,Q[b+1]-Ut),Pt=Math.min(Pt,Lt-X[v]),$t=Math.min($t,X[v+1]-Lt))}if(se)for(v=0;v<Ke;v++)ue+=e(R[v],K[v]);if(ie)for(v=0;v<Ke;v++)ie(R[v],ue,ae,oe[v]);return{x:E,xRanges:h(Q,Re&&xt,tr,Ht,d,c),x0:Se,dx:me,y:I,yRanges:h(X,je&&Nt,Pt,$t,p,m),y0:Fe,dy:Ye,z:R,pts:te}};function r(s,o,y,d){var p=new Array(s),c;if(d)for(c=0;c<s;c++)p[c]=1/(o[c+1]-o[c]);else{var m=1/y;for(c=0;c<s;c++)p[c]=m}return p}function t(s,o){return{start:s(o.start),end:s(o.end),size:o.size}}function h(s,o,y,d,p,c){var m,l=s.length-1,x=new Array(l),u=a(y,d,s,p,c);for(m=0;m<l;m++){var A=(o||[])[m];x[m]=A===void 0?[u(s[m]),u(s[m+1],!0)]:[A,A]}return x}},{"../../lib":515,"../../plots/cartesian/axes":566,"../histogram/average":822,"../histogram/bin_functions":824,"../histogram/bin_label_vals":825,"../histogram/calc":826,"../histogram/norm_functions":833}],836:[function(i,U,V){var w=i("../../lib"),f=i("./sample_defaults"),M=i("../heatmap/style_defaults"),T=i("../../components/colorscale/defaults"),e=i("../heatmap/label_defaults"),a=i("./attributes");U.exports=function(r,t,h,s){function o(y,d){return w.coerce(r,t,a,y,d)}f(r,t,o,s),t.visible!==!1&&(M(r,t,o,s),T(r,t,s,o,{prefix:"",cLetter:"z"}),o("hovertemplate"),e(o,s),o("xhoverformat"),o("yhoverformat"))}},{"../../components/colorscale/defaults":377,"../../lib":515,"../heatmap/label_defaults":811,"../heatmap/style_defaults":815,"./attributes":834,"./sample_defaults":839}],837:[function(i,U,V){var w=i("../heatmap/hover"),f=i("../../plots/cartesian/axes").hoverLabelText;U.exports=function(T,e,a,n,r){var t=w(T,e,a,n,r);if(!!t){T=t[0];var h=T.index,s=h[0],o=h[1],y=T.cd[0],d=y.trace,p=y.xRanges[o],c=y.yRanges[s];return T.xLabel=f(T.xa,[p[0],p[1]],d.xhoverformat),T.yLabel=f(T.ya,[c[0],c[1]],d.yhoverformat),t}}},{"../../plots/cartesian/axes":566,"../heatmap/hover":808}],838:[function(i,U,V){U.exports={attributes:i("./attributes"),supplyDefaults:i("./defaults"),crossTraceDefaults:i("../histogram/cross_trace_defaults"),calc:i("../heatmap/calc"),plot:i("../heatmap/plot"),layerName:"heatmaplayer",colorbar:i("../heatmap/colorbar"),style:i("../heatmap/style"),hoverPoints:i("./hover"),eventData:i("../histogram/event_data"),moduleType:"trace",name:"histogram2d",basePlotModule:i("../../plots/cartesian"),categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":578,"../heatmap/calc":802,"../heatmap/colorbar":804,"../heatmap/plot":813,"../heatmap/style":814,"../histogram/cross_trace_defaults":828,"../histogram/event_data":830,"./attributes":834,"./defaults":836,"./hover":837}],839:[function(i,U,V){var w=i("../../registry"),f=i("../../lib");U.exports=function(T,e,a,n){var r=a("x"),t=a("y"),h=f.minRowLength(r),s=f.minRowLength(t);if(!h||!s){e.visible=!1;return}e._length=Math.min(h,s);var o=w.getComponentMethod("calendars","handleTraceDefaults");o(T,e,["x","y"],n);var y=a("z")||a("marker.color");y&&a("histfunc"),a("histnorm"),a("autobinx"),a("autobiny")}},{"../../lib":515,"../../registry":647}],840:[function(i,U,V){var w=i("../histogram2d/attributes"),f=i("../contour/attributes"),M=i("../../components/colorscale/attributes"),T=i("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=i("../../lib/extend").extendFlat;U.exports=e({x:w.x,y:w.y,z:w.z,marker:w.marker,histnorm:w.histnorm,histfunc:w.histfunc,nbinsx:w.nbinsx,xbins:w.xbins,nbinsy:w.nbinsy,ybins:w.ybins,autobinx:w.autobinx,autobiny:w.autobiny,bingroup:w.bingroup,xbingroup:w.xbingroup,ybingroup:w.ybingroup,autocontour:f.autocontour,ncontours:f.ncontours,contours:f.contours,line:{color:f.line.color,width:e({},f.line.width,{dflt:.5}),dash:f.line.dash,smoothing:f.line.smoothing,editType:"plot"},xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z",1),hovertemplate:w.hovertemplate,texttemplate:f.texttemplate,textfont:f.textfont},M("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/cartesian/axis_format_attributes":569,"../contour/attributes":744,"../histogram2d/attributes":834}],841:[function(i,U,V){var w=i("../../lib"),f=i("../histogram2d/sample_defaults"),M=i("../contour/contours_defaults"),T=i("../contour/style_defaults"),e=i("../heatmap/label_defaults"),a=i("./attributes");U.exports=function(r,t,h,s){function o(d,p){return w.coerce(r,t,a,d,p)}function y(d){return w.coerce2(r,t,a,d)}f(r,t,o,s),t.visible!==!1&&(M(r,t,o,y),T(r,t,o,s),o("xhoverformat"),o("yhoverformat"),o("hovertemplate"),t.contours&&t.contours.coloring==="heatmap"&&e(o,s))}},{"../../lib":515,"../contour/contours_defaults":751,"../contour/style_defaults":765,"../heatmap/label_defaults":811,"../histogram2d/sample_defaults":839,"./attributes":840}],842:[function(i,U,V){U.exports={attributes:i("./attributes"),supplyDefaults:i("./defaults"),crossTraceDefaults:i("../histogram/cross_trace_defaults"),calc:i("../contour/calc"),plot:i("../contour/plot").plot,layerName:"contourlayer",style:i("../contour/style"),colorbar:i("../contour/colorbar"),hoverPoints:i("../contour/hover"),moduleType:"trace",name:"histogram2dcontour",basePlotModule:i("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":578,"../contour/calc":745,"../contour/colorbar":747,"../contour/hover":757,"../contour/plot":762,"../contour/style":764,"../histogram/cross_trace_defaults":828,"./attributes":840,"./defaults":841}],843:[function(i,U,V){var w=i("../../plots/template_attributes").hovertemplateAttrs,f=i("../../plots/template_attributes").texttemplateAttrs,M=i("../../components/colorscale/attributes"),T=i("../../plots/domain").attributes,e=i("../pie/attributes"),a=i("../sunburst/attributes"),n=i("../treemap/attributes"),r=i("../treemap/constants"),t=i("../../lib/extend").extendFlat;U.exports={labels:a.labels,parents:a.parents,values:a.values,branchvalues:a.branchvalues,count:a.count,level:a.level,maxdepth:a.maxdepth,tiling:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"plot"},flip:n.tiling.flip,pad:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},marker:t({colors:a.marker.colors,line:a.marker.line,editType:"calc"},M("marker",{colorAttr:"colors",anim:!1})),leaf:a.leaf,pathbar:n.pathbar,text:e.text,textinfo:a.textinfo,texttemplate:f({editType:"plot"},{keys:r.eventDataKeys.concat(["label","value"])}),hovertext:e.hovertext,hoverinfo:a.hoverinfo,hovertemplate:w({},{keys:r.eventDataKeys}),textfont:e.textfont,insidetextfont:e.insidetextfont,outsidetextfont:n.outsidetextfont,textposition:n.textposition,sort:e.sort,root:a.root,domain:T({name:"icicle",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/domain":593,"../../plots/template_attributes":642,"../pie/attributes":910,"../sunburst/attributes":1058,"../treemap/attributes":1084,"../treemap/constants":1087}],844:[function(i,U,V){var w=i("../../plots/plots");V.name="icicle",V.plot=function(f,M,T,e){w.plotBasePlot(V.name,f,M,T,e)},V.clean=function(f,M,T,e){w.cleanBasePlot(V.name,f,M,T,e)}},{"../../plots/plots":628}],845:[function(i,U,V){var w=i("../sunburst/calc");V.calc=function(f,M){return w.calc(f,M)},V.crossTraceCalc=function(f){return w._runCrossTraceCalc("icicle",f)}},{"../sunburst/calc":1060}],846:[function(i,U,V){var w=i("../../lib"),f=i("./attributes"),M=i("../../components/color"),T=i("../../plots/domain").defaults,e=i("../bar/defaults").handleText,a=i("../bar/constants").TEXTPAD,n=i("../../components/colorscale"),r=n.hasColorscale,t=n.handleDefaults;U.exports=function(s,o,y,d){function p(b,v){return w.coerce(s,o,f,b,v)}var c=p("labels"),m=p("parents");if(!c||!c.length||!m||!m.length){o.visible=!1;return}var l=p("values");l&&l.length?p("branchvalues"):p("count"),p("level"),p("maxdepth"),p("tiling.orientation"),p("tiling.flip"),p("tiling.pad");var x=p("text");p("texttemplate"),o.texttemplate||p("textinfo",Array.isArray(x)?"text+label":"label"),p("hovertext"),p("hovertemplate");var u=p("pathbar.visible"),A="auto";e(s,o,d,p,A,{hasPathbar:u,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),p("textposition");var _=p("marker.line.width");_&&p("marker.line.color",d.paper_bgcolor),p("marker.colors");var g=o._hasColorscale=r(s,"marker","colors")||(s.marker||{}).coloraxis;g&&t(s,o,d,p,{prefix:"marker.",cLetter:"c"}),p("leaf.opacity",g?1:.7),o._hovered={marker:{line:{width:2,color:M.contrast(d.paper_bgcolor)}}},u&&(p("pathbar.thickness",o.pathbar.textfont.size+2*a),p("pathbar.side"),p("pathbar.edgeshape")),p("sort"),p("root.color"),T(o,d,p),o._length=null}},{"../../components/color":367,"../../components/colorscale":379,"../../lib":515,"../../plots/domain":593,"../bar/constants":659,"../bar/defaults":661,"./attributes":843}],847:[function(i,U,V){var w=i("@plotly/d3"),f=i("../../lib"),M=i("../../components/drawing"),T=i("../../lib/svg_text_utils"),e=i("./partition"),a=i("./style").styleOne,n=i("../treemap/constants"),r=i("../sunburst/helpers"),t=i("../sunburst/fx"),h=i("../sunburst/plot").formatSliceLabel,s=!1;U.exports=function(y,d,p,c,m){var l=m.width,x=m.height,u=m.viewX,A=m.viewY,_=m.pathSlice,g=m.toMoveInsideSlice,b=m.strTransform,v=m.hasTransition,k=m.handleSlicesExit,S=m.makeUpdateSliceInterpolator,E=m.makeUpdateTextInterpolator,C=m.prevEntry,F={},I=y._context.staticPlot,D=y._fullLayout,R=d[0],O=R.trace,z=O.textposition.indexOf("left")!==-1,B=O.textposition.indexOf("right")!==-1,G=O.textposition.indexOf("bottom")!==-1,Q=e(p,[l,x],{flipX:O.tiling.flip.indexOf("x")>-1,flipY:O.tiling.flip.indexOf("y")>-1,orientation:O.tiling.orientation,pad:{inner:O.tiling.pad},maxDepth:O._maxDepth}),X=Q.descendants(),j=1/0,re=-1/0;X.forEach(function(H){var ee=H.depth;ee>=O._maxDepth?(H.x0=H.x1=(H.x0+H.x1)/2,H.y0=H.y1=(H.y0+H.y1)/2):(j=Math.min(j,ee),re=Math.max(re,ee))}),c=c.data(X,r.getPtId),O._maxVisibleLayers=isFinite(re)?re-j+1:0,c.enter().append("g").classed("slice",!0),k(c,s,F,[l,x],_),c.order();var ue=null;if(v&&C){var K=r.getPtId(C);c.each(function(H){ue===null&&r.getPtId(H)===K&&(ue={x0:H.x0,x1:H.x1,y0:H.y0,y1:H.y1})})}var te=function(){return ue||{x0:0,x1:l,y0:0,y1:x}},Y=c;return v&&(Y=Y.transition().each("end",function(){var H=w.select(this);r.setSliceCursor(H,y,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),Y.each(function(H){H._x0=u(H.x0),H._x1=u(H.x1),H._y0=A(H.y0),H._y1=A(H.y1),H._hoverX=u(H.x1-O.tiling.pad),H._hoverY=A(G?H.y1-O.tiling.pad/2:H.y0+O.tiling.pad/2);var ee=w.select(this),ne=f.ensureSingle(ee,"path","surface",function(se){se.style("pointer-events",I?"none":"all")});v?ne.transition().attrTween("d",function(se){var ae=S(se,s,te(),[l,x],{orientation:O.tiling.orientation,flipX:O.tiling.flip.indexOf("x")>-1,flipY:O.tiling.flip.indexOf("y")>-1});return function(oe){return _(ae(oe))}}):ne.attr("d",_),ee.call(t,p,y,d,{styleOne:a,eventDataKeys:n.eventDataKeys,transitionTime:n.CLICK_TRANSITION_TIME,transitionEasing:n.CLICK_TRANSITION_EASING}).call(r.setSliceCursor,y,{isTransitioning:y._transitioning}),ne.call(a,H,O,{hovered:!1}),H.x0===H.x1||H.y0===H.y1?H._text="":H._text=h(H,p,O,d,D)||"";var Z=f.ensureSingle(ee,"g","slicetext"),q=f.ensureSingle(Z,"text","",function(se){se.attr("data-notex",1)}),ie=f.ensureUniformFontSize(y,r.determineTextFont(O,H,D.font));q.text(H._text||" ").classed("slicetext",!0).attr("text-anchor",B?"end":z?"start":"middle").call(M.font,ie).call(T.convertToTspans,y),H.textBB=M.bBox(q.node()),H.transform=g(H,{fontSize:ie.size}),H.transform.fontSize=ie.size,v?q.transition().attrTween("transform",function(se){var ae=E(se,s,te(),[l,x]);return function(oe){return b(ae(oe))}}):q.attr("transform",b(H))}),ue}},{"../../components/drawing":389,"../../lib":515,"../../lib/svg_text_utils":541,"../sunburst/fx":1063,"../sunburst/helpers":1064,"../sunburst/plot":1068,"../treemap/constants":1087,"./partition":851,"./style":853,"@plotly/d3":58}],848:[function(i,U,V){U.exports={moduleType:"trace",name:"icicle",basePlotModule:i("./base_plot"),categories:[],animatable:!0,attributes:i("./attributes"),layoutAttributes:i("./layout_attributes"),supplyDefaults:i("./defaults"),supplyLayoutDefaults:i("./layout_defaults"),calc:i("./calc").calc,crossTraceCalc:i("./calc").crossTraceCalc,plot:i("./plot"),style:i("./style").style,colorbar:i("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":954,"./attributes":843,"./base_plot":844,"./calc":845,"./defaults":846,"./layout_attributes":849,"./layout_defaults":850,"./plot":852,"./style":853}],849:[function(i,U,V){U.exports={iciclecolorway:{valType:"colorlist",editType:"calc"},extendiciclecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],850:[function(i,U,V){var w=i("../../lib"),f=i("./layout_attributes");U.exports=function(T,e){function a(n,r){return w.coerce(T,e,f,n,r)}a("iciclecolorway",e.colorway),a("extendiciclecolors")}},{"../../lib":515,"./layout_attributes":849}],851:[function(i,U,V){var w=i("d3-hierarchy"),f=i("../treemap/flip_tree");U.exports=function(T,e,a){var n=a.flipX,r=a.flipY,t=a.orientation==="h",h=a.maxDepth,s=e[0],o=e[1];h&&(s=(T.height+1)*e[0]/Math.min(T.height+1,h),o=(T.height+1)*e[1]/Math.min(T.height+1,h));var y=w.partition().padding(a.pad.inner).size(t?[e[1],s]:[e[0],o])(T);return(t||n||r)&&f(y,e,{swapXY:t,flipX:n,flipY:r}),y}},{"../treemap/flip_tree":1092,"d3-hierarchy":115}],852:[function(i,U,V){var w=i("../treemap/draw"),f=i("./draw_descendants");U.exports=function(T,e,a,n){return w(T,e,a,n,{type:"icicle",drawDescendants:f})}},{"../treemap/draw":1089,"./draw_descendants":847}],853:[function(i,U,V){var w=i("@plotly/d3"),f=i("../../components/color"),M=i("../../lib"),T=i("../bar/uniform_text").resizeText;function e(n){var r=n._fullLayout._iciclelayer.selectAll(".trace");T(n,r,"icicle"),r.each(function(t){var h=w.select(this),s=t[0],o=s.trace;h.style("opacity",o.opacity),h.selectAll("path.surface").each(function(y){w.select(this).call(a,y,o)})})}function a(n,r,t){var h=r.data.data,s=!r.children,o=h.i,y=M.castOption(t,o,"marker.line.color")||f.defaultLine,d=M.castOption(t,o,"marker.line.width")||0;n.style("stroke-width",d).call(f.fill,h.color).call(f.stroke,y).style("opacity",s?t.leaf.opacity:null)}U.exports={style:e,styleOne:a}},{"../../components/color":367,"../../lib":515,"../bar/uniform_text":673,"@plotly/d3":58}],854:[function(i,U,V){for(var w=i("../../plots/attributes"),f=i("../../plots/template_attributes").hovertemplateAttrs,M=i("../../lib/extend").extendFlat,T=i("./constants").colormodel,e=["rgb","rgba","rgba256","hsl","hsla"],a=[],n=[],r=0;r<e.length;r++){var t=T[e[r]];a.push("For the `"+e[r]+"` colormodel, it is ["+(t.zminDflt||t.min).join(", ")+"]."),n.push("For the `"+e[r]+"` colormodel, it is ["+(t.zmaxDflt||t.max).join(", ")+"].")}U.exports=M({source:{valType:"string",editType:"calc"},z:{valType:"data_array",editType:"calc"},colormodel:{valType:"enumerated",values:e,editType:"calc"},zsmooth:{valType:"enumerated",values:["fast",!1],dflt:!1,editType:"plot"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:M({},w.hoverinfo,{flags:["x","y","z","color","name","text"],dflt:"x+y+z+text+name"}),hovertemplate:f({},{keys:["z","color","colormodel"]}),transforms:void 0})},{"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"./constants":856}],855:[function(i,U,V){var w=i("../../lib"),f=i("./constants"),M=i("fast-isnumeric"),T=i("../../plots/cartesian/axes"),e=i("../../lib").maxRowLength,a=i("./helpers").getImageSize;U.exports=function(s,o){var y,d;if(o._hasZ)y=o.z.length,d=e(o.z);else if(o._hasSource){var p=a(o.source);y=p.height,d=p.width}var c=T.getFromId(s,o.xaxis||"x"),m=T.getFromId(s,o.yaxis||"y"),l=c.d2c(o.x0)-o.dx/2,x=m.d2c(o.y0)-o.dy/2,u,A=[l,l+d*o.dx],_=[x,x+y*o.dy];if(c&&c.type==="log")for(u=0;u<d;u++)A.push(l+u*o.dx);if(m&&m.type==="log")for(u=0;u<y;u++)_.push(x+u*o.dy);o._extremes[c._id]=T.findExtremes(c,A),o._extremes[m._id]=T.findExtremes(m,_),o._scaler=t(o);var g={x0:l,y0:x,z:o.z,w:d,h:y};return[g]};function n(h,s,o,y){return function(d){return w.constrain((d-h)*s,o,y)}}function r(h,s){return function(o){return w.constrain(o,h,s)}}function t(h){var s=f.colormodel[h.colormodel],o=s.colormodel||h.colormodel,y=o.length;h._sArray=[];for(var d=0;d<y;d++)s.min[d]!==h.zmin[d]||s.max[d]!==h.zmax[d]?h._sArray.push(n(h.zmin[d],(s.max[d]-s.min[d])/(h.zmax[d]-h.zmin[d]),s.min[d],s.max[d])):h._sArray.push(r(s.min[d],s.max[d]));return function(p){for(var c=p.slice(0,y),m=0;m<y;m++){var l=c[m];if(!M(l))return!1;c[m]=h._sArray[m](l)}return c}}},{"../../lib":515,"../../plots/cartesian/axes":566,"./constants":856,"./helpers":859,"fast-isnumeric":190}],856:[function(i,U,V){U.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(w){return w.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(w){return w.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(w){return w.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(w){var f=w.slice(0,3);return f[1]=f[1]+"%",f[2]=f[2]+"%",f},suffix:["\xB0","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(w){var f=w.slice(0,4);return f[1]=f[1]+"%",f[2]=f[2]+"%",f},suffix:["\xB0","%","%",""]}},pixelatedStyle:["image-rendering: optimizeSpeed","image-rendering: -moz-crisp-edges","image-rendering: -o-crisp-edges","image-rendering: -webkit-optimize-contrast","image-rendering: optimize-contrast","image-rendering: crisp-edges","image-rendering: pixelated",""].join("; ")}},{}],857:[function(i,U,V){var w=i("../../lib"),f=i("./attributes"),M=i("./constants"),T=i("../../snapshot/helpers").IMAGE_URL_PREFIX;U.exports=function(a,n){function r(s,o){return w.coerce(a,n,f,s,o)}r("source"),n.source&&!n.source.match(T)&&delete n.source,n._hasSource=!!n.source;var t=r("z");if(n._hasZ=!(t===void 0||!t.length||!t[0]||!t[0].length),!n._hasZ&&!n._hasSource){n.visible=!1;return}r("x0"),r("y0"),r("dx"),r("dy");var h;n._hasZ?(r("colormodel","rgb"),h=M.colormodel[n.colormodel],r("zmin",h.zminDflt||h.min),r("zmax",h.zmaxDflt||h.max)):n._hasSource&&(n.colormodel="rgba256",h=M.colormodel[n.colormodel],n.zmin=h.zminDflt,n.zmax=h.zmaxDflt),r("zsmooth"),r("text"),r("hovertext"),r("hovertemplate"),n._length=null}},{"../../lib":515,"../../snapshot/helpers":651,"./attributes":854,"./constants":856}],858:[function(i,U,V){U.exports=function(f,M){return"xVal"in M&&(f.x=M.xVal),"yVal"in M&&(f.y=M.yVal),M.xa&&(f.xaxis=M.xa),M.ya&&(f.yaxis=M.ya),f.color=M.color,f.colormodel=M.trace.colormodel,f.z||(f.z=M.color),f}},{}],859:[function(i,U,V){var w=i("probe-image-size/sync"),f=i("../../snapshot/helpers").IMAGE_URL_PREFIX,M=i("buffer/").Buffer;V.getImageSize=function(T){var e=T.replace(f,""),a=new M(e,"base64");return w(a)}},{"../../snapshot/helpers":651,"buffer/":85,"probe-image-size/sync":277}],860:[function(i,U,V){var w=i("../../components/fx"),f=i("../../lib"),M=i("./constants");U.exports=function(e,a,n){var r=e.cd[0],t=r.trace,h=e.xa,s=e.ya;if(!(w.inbox(a-r.x0,a-(r.x0+r.w*t.dx),0)>0||w.inbox(n-r.y0,n-(r.y0+r.h*t.dy),0)>0)){var o=Math.floor((a-r.x0)/t.dx),y=Math.floor(Math.abs(n-r.y0)/t.dy),d;if(t._hasZ?d=r.z[y][o]:t._hasSource&&(d=t._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(o,y,1,1).data),!!d){var p=r.hi||t.hoverinfo,c;if(p){var m=p.split("+");m.indexOf("all")!==-1&&(m=["color"]),m.indexOf("color")!==-1&&(c=!0)}var l=M.colormodel[t.colormodel],x=l.colormodel||t.colormodel,u=x.length,A=t._scaler(d),_=l.suffix,g=[];(t.hovertemplate||c)&&(g.push("["+[A[0]+_[0],A[1]+_[1],A[2]+_[2]].join(", ")),u===4&&g.push(", "+A[3]+_[3]),g.push("]"),g=g.join(""),e.extraText=x.toUpperCase()+": "+g);var b;Array.isArray(t.hovertext)&&Array.isArray(t.hovertext[y])?b=t.hovertext[y][o]:Array.isArray(t.text)&&Array.isArray(t.text[y])&&(b=t.text[y][o]);var v=s.c2p(r.y0+(y+.5)*t.dy),k=r.x0+(o+.5)*t.dx,S=r.y0+(y+.5)*t.dy,E="["+d.slice(0,t.colormodel.length).join(", ")+"]";return[f.extendFlat(e,{index:[y,o],x0:h.c2p(r.x0+o*t.dx),x1:h.c2p(r.x0+(o+1)*t.dx),y0:v,y1:v,color:A,xVal:k,xLabelVal:k,yVal:S,yLabelVal:S,zLabelVal:E,text:b,hovertemplateLabels:{zLabel:E,colorLabel:g,"color[0]Label":A[0]+_[0],"color[1]Label":A[1]+_[1],"color[2]Label":A[2]+_[2],"color[3]Label":A[3]+_[3]}})]}}}},{"../../components/fx":407,"../../lib":515,"./constants":856}],861:[function(i,U,V){U.exports={attributes:i("./attributes"),supplyDefaults:i("./defaults"),calc:i("./calc"),plot:i("./plot"),style:i("./style"),hoverPoints:i("./hover"),eventData:i("./event_data"),moduleType:"trace",name:"image",basePlotModule:i("../../plots/cartesian"),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:!1,meta:{}}},{"../../plots/cartesian":578,"./attributes":854,"./calc":855,"./defaults":857,"./event_data":858,"./hover":860,"./plot":862,"./style":863}],862:[function(i,U,V){var w=i("@plotly/d3"),f=i("../../lib"),M=f.strTranslate,T=i("../../constants/xmlns_namespaces"),e=i("./constants"),a=f.isIOS()||f.isSafari()||f.isIE();U.exports=function(r,t,h,s){var o=t.xaxis,y=t.yaxis,d=!(a||r._context._exportedPlot);f.makeTraceGroups(s,h,"im").each(function(p){var c=w.select(this),m=p[0],l=m.trace,x=(l.zsmooth==="fast"||l.zsmooth===!1&&d)&&!l._hasZ&&l._hasSource&&o.type==="linear"&&y.type==="linear";l._realImage=x;var u=m.z,A=m.x0,_=m.y0,g=m.w,b=m.h,v=l.dx,k=l.dy,S,E,C,F,I,D;for(D=0;S===void 0&&D<g;)S=o.c2p(A+D*v),D++;for(D=g;E===void 0&&D>0;)E=o.c2p(A+D*v),D--;for(D=0;F===void 0&&D<b;)F=y.c2p(_+D*k),D++;for(D=b;I===void 0&&D>0;)I=y.c2p(_+D*k),D--;if(E<S&&(C=E,E=S,S=C),I<F&&(C=F,F=I,I=C),!x){var R=.5;S=Math.max(-R*o._length,S),E=Math.min((1+R)*o._length,E),F=Math.max(-R*y._length,F),I=Math.min((1+R)*y._length,I)}var O=Math.round(E-S),z=Math.round(I-F),B=O<=0||z<=0;if(B){var G=c.selectAll("image").data([]);G.exit().remove();return}function Q(ne){var Z=document.createElement("canvas");Z.width=O,Z.height=z;var q=Z.getContext("2d",{willReadFrequently:!0}),ie=function(Le){return f.constrain(Math.round(o.c2p(A+Le*v)-S),0,O)},se=function(Le){return f.constrain(Math.round(y.c2p(_+Le*k)-F),0,z)},ae=e.colormodel[l.colormodel],oe=ae.colormodel||l.colormodel,be=ae.fmt,ce;for(D=0;D<m.w;D++){var de=ie(D),ye=ie(D+1);if(!(ye===de||isNaN(ye)||isNaN(de)))for(var ge=0;ge<m.h;ge++){var me=se(ge),Se=se(ge+1);Se===me||isNaN(Se)||isNaN(me)||!ne(D,ge)||(ce=l._scaler(ne(D,ge)),ce?q.fillStyle=oe+"("+be(ce).join(",")+")":q.fillStyle="rgba(0,0,0,0)",q.fillRect(de,me,ye-de,Se-me))}}return Z}var X=c.selectAll("image").data([p]);X.enter().append("svg:image").attr({xmlns:T.svg,preserveAspectRatio:"none"}),X.exit().remove();var j=l.zsmooth===!1?e.pixelatedStyle:"";if(x){var re=f.simpleMap(o.range,o.r2l),ue=f.simpleMap(y.range,y.r2l),K=re[1]<re[0],te=ue[1]>ue[0];if(K||te){var Y=S+O/2,H=F+z/2;j+="transform:"+M(Y+"px",H+"px")+"scale("+(K?-1:1)+","+(te?-1:1)+")"+M(-Y+"px",-H+"px")+";"}}X.attr("style",j);var ee=new Promise(function(ne){if(l._hasZ)ne();else if(l._hasSource)if(l._canvas&&l._canvas.el.width===g&&l._canvas.el.height===b&&l._canvas.source===l.source)ne();else{var Z=document.createElement("canvas");Z.width=g,Z.height=b;var q=Z.getContext("2d",{willReadFrequently:!0});l._image=l._image||new Image;var ie=l._image;ie.onload=function(){q.drawImage(ie,0,0),l._canvas={el:Z,source:l.source},ne()},ie.setAttribute("src",l.source)}}).then(function(){var ne,Z;if(l._hasZ)Z=Q(function(se,ae){return u[ae][se]}),ne=Z.toDataURL("image/png");else if(l._hasSource)if(x)ne=l.source;else{var q=l._canvas.el.getContext("2d",{willReadFrequently:!0}),ie=q.getImageData(0,0,g,b).data;Z=Q(function(se,ae){var oe=4*(ae*g+se);return[ie[oe],ie[oe+1],ie[oe+2],ie[oe+3]]}),ne=Z.toDataURL("image/png")}X.attr({"xlink:href":ne,height:z,width:O,x:S,y:F})});r._promises.push(ee)})}},{"../../constants/xmlns_namespaces":492,"../../lib":515,"./constants":856,"@plotly/d3":58}],863:[function(i,U,V){var w=i("@plotly/d3");U.exports=function(M){w.select(M).selectAll(".im image").style("opacity",function(T){return T[0].trace.opacity})}},{"@plotly/d3":58}],864:[function(i,U,V){var w=i("../../lib/extend").extendFlat,f=i("../../lib/extend").extendDeep,M=i("../../plot_api/edit_types").overrideAll,T=i("../../plots/font_attributes"),e=i("../../components/color/attributes"),a=i("../../plots/domain").attributes,n=i("../../plots/cartesian/layout_attributes"),r=i("../../plot_api/plot_template").templatedArray,t=i("../../constants/delta.js"),h=i("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers,s=T({editType:"plot",colorEditType:"plot"}),o={color:{valType:"color",editType:"plot"},line:{color:{valType:"color",dflt:e.defaultLine,editType:"plot"},width:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},thickness:{valType:"number",min:0,max:1,dflt:1,editType:"plot"},editType:"calc"},y={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},d=r("step",f({},o,{range:y}));U.exports={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number"},value:{valType:"number",editType:"calc",anim:!0},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},domain:a({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",editType:"plot"},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},font:w({},s,{}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",editType:"plot",description:h("value")},font:w({},s,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"plot"},delta:{reference:{valType:"number",editType:"calc"},position:{valType:"enumerated",values:["top","bottom","left","right"],dflt:"bottom",editType:"plot"},relative:{valType:"boolean",editType:"plot",dflt:!1},valueformat:{valType:"string",editType:"plot",description:h("value")},increasing:{symbol:{valType:"string",dflt:t.INCREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:t.INCREASING.COLOR,editType:"plot"},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:t.DECREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:t.DECREASING.COLOR,editType:"plot"},editType:"plot"},font:w({},s,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular","bullet"]},bar:f({},o,{color:{dflt:"green"}}),bgcolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:e.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot"},axis:M({range:y,visible:w({},n.visible,{dflt:!0}),tickmode:n.tickmode,nticks:n.nticks,tick0:n.tick0,dtick:n.dtick,tickvals:n.tickvals,ticktext:n.ticktext,ticks:w({},n.ticks,{dflt:"outside"}),ticklen:n.ticklen,tickwidth:n.tickwidth,tickcolor:n.tickcolor,ticklabelstep:n.ticklabelstep,showticklabels:n.showticklabels,tickfont:T({}),tickangle:n.tickangle,tickformat:n.tickformat,tickformatstops:n.tickformatstops,tickprefix:n.tickprefix,showtickprefix:n.showtickprefix,ticksuffix:n.ticksuffix,showticksuffix:n.showticksuffix,separatethousands:n.separatethousands,exponentformat:n.exponentformat,minexponent:n.minexponent,showexponent:n.showexponent,editType:"plot"},"plot"),steps:d,threshold:{line:{color:w({},o.line.color,{}),width:w({},o.line.width,{dflt:1}),editType:"plot"},thickness:w({},o.thickness,{dflt:.85}),value:{valType:"number",editType:"calc",dflt:!1},editType:"plot"},editType:"plot"}}},{"../../components/color/attributes":366,"../../constants/delta.js":485,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plot_api/plot_template":555,"../../plots/cartesian/axis_format_attributes":569,"../../plots/cartesian/layout_attributes":579,"../../plots/domain":593,"../../plots/font_attributes":594}],865:[function(i,U,V){var w=i("../../plots/plots");V.name="indicator",V.plot=function(f,M,T,e){w.plotBasePlot(V.name,f,M,T,e)},V.clean=function(f,M,T,e){w.cleanBasePlot(V.name,f,M,T,e)}},{"../../plots/plots":628}],866:[function(i,U,V){function w(f,M){var T=[],e=M.value;typeof M._lastValue!="number"&&(M._lastValue=M.value);var a=M._lastValue,n=a;return M._hasDelta&&typeof M.delta.reference=="number"&&(n=M.delta.reference),T[0]={y:e,lastY:a,delta:e-n,relativeDelta:(e-n)/n},T}U.exports={calc:w}},{}],867:[function(i,U,V){U.exports={defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}},{}],868:[function(i,U,V){var w=i("../../lib"),f=i("./attributes"),M=i("../../plots/domain").defaults,T=i("../../plot_api/plot_template"),e=i("../../plots/array_container_defaults"),a=i("./constants.js"),n=i("../../plots/cartesian/tick_value_defaults"),r=i("../../plots/cartesian/tick_mark_defaults"),t=i("../../plots/cartesian/tick_label_defaults"),h=i("../../plots/cartesian/prefix_suffix_defaults");function s(y,d,p,c){function m(D,R){return w.coerce(y,d,f,D,R)}M(d,c,m),m("mode"),d._hasNumber=d.mode.indexOf("number")!==-1,d._hasDelta=d.mode.indexOf("delta")!==-1,d._hasGauge=d.mode.indexOf("gauge")!==-1;var l=m("value");d._range=[0,typeof l=="number"?1.5*l:1];var x=new Array(2),u;d._hasNumber&&(m("number.valueformat"),m("number.font.color",c.font.color),m("number.font.family",c.font.family),m("number.font.size"),d.number.font.size===void 0&&(d.number.font.size=a.defaultNumberFontSize,x[0]=!0),m("number.prefix"),m("number.suffix"),u=d.number.font.size);var A;d._hasDelta&&(m("delta.font.color",c.font.color),m("delta.font.family",c.font.family),m("delta.font.size"),d.delta.font.size===void 0&&(d.delta.font.size=(d._hasNumber?.5:1)*(u||a.defaultNumberFontSize),x[1]=!0),m("delta.reference",d.value),m("delta.relative"),m("delta.valueformat",d.delta.relative?"2%":""),m("delta.increasing.symbol"),m("delta.increasing.color"),m("delta.decreasing.symbol"),m("delta.decreasing.color"),m("delta.position"),m("delta.prefix"),m("delta.suffix"),A=d.delta.font.size),d._scaleNumbers=(!d._hasNumber||x[0])&&(!d._hasDelta||x[1])||!1,m("title.font.color",c.font.color),m("title.font.family",c.font.family),m("title.font.size",.25*(u||A||a.defaultNumberFontSize)),m("title.text");var _,g,b,v;function k(D,R){return w.coerce(_,g,f.gauge,D,R)}function S(D,R){return w.coerce(b,v,f.gauge.axis,D,R)}if(d._hasGauge){_=y.gauge,_||(_={}),g=T.newContainer(d,"gauge"),k("shape");var E=d._isBullet=d.gauge.shape==="bullet";E||m("title.align","center");var C=d._isAngular=d.gauge.shape==="angular";C||m("align","center"),k("bgcolor",c.paper_bgcolor),k("borderwidth"),k("bordercolor"),k("bar.color"),k("bar.line.color"),k("bar.line.width");var F=a.valueThickness*(d.gauge.shape==="bullet"?.5:1);k("bar.thickness",F),e(_,g,{name:"steps",handleItemDefaults:o}),k("threshold.value"),k("threshold.thickness"),k("threshold.line.width"),k("threshold.line.color"),b={},_&&(b=_.axis||{}),v=T.newContainer(g,"axis"),S("visible"),d._range=S("range",d._range);var I={outerTicks:!0};n(b,v,S,"linear"),h(b,v,S,"linear",I),t(b,v,S,"linear",I),r(b,v,S,I)}else m("title.align","center"),m("align","center"),d._isAngular=d._isBullet=!1;d._length=null}function o(y,d){function p(c,m){return w.coerce(y,d,f.gauge.steps,c,m)}p("color"),p("line.color"),p("line.width"),p("range"),p("thickness")}U.exports={supplyDefaults:s}},{"../../lib":515,"../../plot_api/plot_template":555,"../../plots/array_container_defaults":561,"../../plots/cartesian/prefix_suffix_defaults":583,"../../plots/cartesian/tick_label_defaults":587,"../../plots/cartesian/tick_mark_defaults":588,"../../plots/cartesian/tick_value_defaults":589,"../../plots/domain":593,"./attributes":864,"./constants.js":867}],869:[function(i,U,V){U.exports={moduleType:"trace",name:"indicator",basePlotModule:i("./base_plot"),categories:["svg","noOpacity","noHover"],animatable:!0,attributes:i("./attributes"),supplyDefaults:i("./defaults").supplyDefaults,calc:i("./calc").calc,plot:i("./plot"),meta:{}}},{"./attributes":864,"./base_plot":865,"./calc":866,"./defaults":868,"./plot":870}],870:[function(i,U,V){var w=i("@plotly/d3"),f=i("d3-interpolate").interpolate,M=i("d3-interpolate").interpolateNumber,T=i("../../lib"),e=T.strScale,a=T.strTranslate,n=T.rad2deg,r=i("../../constants/alignment").MID_SHIFT,t=i("../../components/drawing"),h=i("./constants"),s=i("../../lib/svg_text_utils"),o=i("../../plots/cartesian/axes"),y=i("../../plots/cartesian/axis_defaults"),d=i("../../plots/cartesian/position_defaults"),p=i("../../plots/cartesian/layout_attributes"),c=i("../../components/color"),m={left:"start",center:"middle",right:"end"},l={left:0,center:.5,right:1},x=/[yzafpnµmkMGTPEZY]/;function u(I){return I&&I.duration>0}U.exports=function(D,R,O,z){var B=D._fullLayout,G;u(O)&&z&&(G=z()),T.makeTraceGroups(B._indicatorlayer,R,"trace").each(function(Q){var X=Q[0],j=X.trace,re=w.select(this),ue=j._hasGauge,K=j._isAngular,te=j._isBullet,Y=j.domain,H={w:B._size.w*(Y.x[1]-Y.x[0]),h:B._size.h*(Y.y[1]-Y.y[0]),l:B._size.l+B._size.w*Y.x[0],r:B._size.r+B._size.w*(1-Y.x[1]),t:B._size.t+B._size.h*(1-Y.y[1]),b:B._size.b+B._size.h*Y.y[0]},ee=H.l+H.w/2,ne=H.t+H.h/2,Z=Math.min(H.w/2,H.h),q=h.innerRadius*Z,ie,se,ae,oe=j.align||"center";if(se=ne,!ue)ie=H.l+l[oe]*H.w,ae=function(we){return S(we,H.w,H.h)};else if(K&&(ie=ee,se=ne+Z/2,ae=function(we){return E(we,.9*q)}),te){var be=h.bulletPadding,ce=1-h.bulletNumberDomainSize+be;ie=H.l+(ce+(1-ce)*l[oe])*H.w,ae=function(we){return S(we,(h.bulletNumberDomainSize-be)*H.w,H.h)}}g(D,re,Q,{numbersX:ie,numbersY:se,numbersScaler:ae,transitionOpts:O,onComplete:G});var de,ye;ue&&(de={range:j.gauge.axis.range,color:j.gauge.bgcolor,line:{color:j.gauge.bordercolor,width:0},thickness:1},ye={range:j.gauge.axis.range,color:"rgba(0, 0, 0, 0)",line:{color:j.gauge.bordercolor,width:j.gauge.borderwidth},thickness:1});var ge=re.selectAll("g.angular").data(K?Q:[]);ge.exit().remove();var me=re.selectAll("g.angularaxis").data(K?Q:[]);me.exit().remove(),K&&_(D,re,Q,{radius:Z,innerRadius:q,gauge:ge,layer:me,size:H,gaugeBg:de,gaugeOutline:ye,transitionOpts:O,onComplete:G});var Se=re.selectAll("g.bullet").data(te?Q:[]);Se.exit().remove();var Le=re.selectAll("g.bulletaxis").data(te?Q:[]);Le.exit().remove(),te&&A(D,re,Q,{gauge:Se,layer:Le,size:H,gaugeBg:de,gaugeOutline:ye,transitionOpts:O,onComplete:G});var Oe=re.selectAll("text.title").data(Q);Oe.exit().remove(),Oe.enter().append("text").classed("title",!0),Oe.attr("text-anchor",function(){return te?m.right:m[j.title.align]}).text(j.title.text).call(t.font,j.title.font).call(s.convertToTspans,D),Oe.attr("transform",function(){var we=H.l+H.w*l[j.title.align],Ce,Ke=h.titlePadding,Ye=t.bBox(Oe.node());if(ue){if(K)if(j.gauge.axis.visible){var Fe=t.bBox(me.node());Ce=Fe.top-Ke-Ye.bottom}else Ce=H.t+H.h/2-Z/2-Ye.bottom-Ke;te&&(Ce=se-(Ye.top+Ye.bottom)/2,we=H.l-h.bulletPadding*H.w)}else Ce=j._numbersTop-Ke-Ye.bottom;return a(we,Ce)})})};function A(I,D,R,O){var z=R[0].trace,B=O.gauge,G=O.layer,Q=O.gaugeBg,X=O.gaugeOutline,j=O.size,re=z.domain,ue=O.transitionOpts,K=O.onComplete,te,Y,H,ee,ne;B.enter().append("g").classed("bullet",!0),B.attr("transform",a(j.l,j.t)),G.enter().append("g").classed("bulletaxis",!0).classed("crisp",!0),G.selectAll("g.xbulletaxistick,path,text").remove();var Z=j.h,q=z.gauge.bar.thickness*Z,ie=re.x[0],se=re.x[0]+(re.x[1]-re.x[0])*(z._hasNumber||z._hasDelta?1-h.bulletNumberDomainSize:1);te=k(I,z.gauge.axis),te._id="xbulletaxis",te.domain=[ie,se],te.setScale(),Y=o.calcTicks(te),H=o.makeTransTickFn(te),ee=o.getTickSigns(te)[2],ne=j.t+j.h,te.visible&&(o.drawTicks(I,te,{vals:te.ticks==="inside"?o.clipEnds(te,Y):Y,layer:G,path:o.makeTickPath(te,ne,ee),transFn:H}),o.drawLabels(I,te,{vals:Y,layer:G,transFn:H,labelFns:o.makeLabelFns(te,ne)}));function ae(me){me.attr("width",function(Se){return Math.max(0,te.c2p(Se.range[1])-te.c2p(Se.range[0]))}).attr("x",function(Se){return te.c2p(Se.range[0])}).attr("y",function(Se){return .5*(1-Se.thickness)*Z}).attr("height",function(Se){return Se.thickness*Z})}var oe=[Q].concat(z.gauge.steps),be=B.selectAll("g.bg-bullet").data(oe);be.enter().append("g").classed("bg-bullet",!0).append("rect"),be.select("rect").call(ae).call(b),be.exit().remove();var ce=B.selectAll("g.value-bullet").data([z.gauge.bar]);ce.enter().append("g").classed("value-bullet",!0).append("rect"),ce.select("rect").attr("height",q).attr("y",(Z-q)/2).call(b),u(ue)?ce.select("rect").transition().duration(ue.duration).ease(ue.easing).each("end",function(){K&&K()}).each("interrupt",function(){K&&K()}).attr("width",Math.max(0,te.c2p(Math.min(z.gauge.axis.range[1],R[0].y)))):ce.select("rect").attr("width",typeof R[0].y=="number"?Math.max(0,te.c2p(Math.min(z.gauge.axis.range[1],R[0].y))):0),ce.exit().remove();var de=R.filter(function(){return z.gauge.threshold.value||z.gauge.threshold.value===0}),ye=B.selectAll("g.threshold-bullet").data(de);ye.enter().append("g").classed("threshold-bullet",!0).append("line"),ye.select("line").attr("x1",te.c2p(z.gauge.threshold.value)).attr("x2",te.c2p(z.gauge.threshold.value)).attr("y1",(1-z.gauge.threshold.thickness)/2*Z).attr("y2",(1-(1-z.gauge.threshold.thickness)/2)*Z).call(c.stroke,z.gauge.threshold.line.color).style("stroke-width",z.gauge.threshold.line.width),ye.exit().remove();var ge=B.selectAll("g.gauge-outline").data([X]);ge.enter().append("g").classed("gauge-outline",!0).append("rect"),ge.select("rect").call(ae).call(b),ge.exit().remove()}function _(I,D,R,O){var z=R[0].trace,B=O.size,G=O.radius,Q=O.innerRadius,X=O.gaugeBg,j=O.gaugeOutline,re=[B.l+B.w/2,B.t+B.h/2+G/2],ue=O.gauge,K=O.layer,te=O.transitionOpts,Y=O.onComplete,H=Math.PI/2;function ee(Re){var je=z.gauge.axis.range[0],xt=z.gauge.axis.range[1],Nt=(Re-je)/(xt-je)*Math.PI-H;return Nt<-H?-H:Nt>H?H:Nt}function ne(Re){return w.svg.arc().innerRadius((Q+G)/2-Re/2*(G-Q)).outerRadius((Q+G)/2+Re/2*(G-Q)).startAngle(-H)}function Z(Re){Re.attr("d",function(je){return ne(je.thickness).startAngle(ee(je.range[0])).endAngle(ee(je.range[1]))()})}var q,ie,se,ae;ue.enter().append("g").classed("angular",!0),ue.attr("transform",a(re[0],re[1])),K.enter().append("g").classed("angularaxis",!0).classed("crisp",!0),K.selectAll("g.xangularaxistick,path,text").remove(),q=k(I,z.gauge.axis),q.type="linear",q.range=z.gauge.axis.range,q._id="xangularaxis",q.ticklabeloverflow="allow",q.setScale();var oe=function(Re){return(q.range[0]-Re.x)/(q.range[1]-q.range[0])*Math.PI+Math.PI},be={},ce=o.makeLabelFns(q,0),de=ce.labelStandoff;be.xFn=function(Re){var je=oe(Re);return Math.cos(je)*de},be.yFn=function(Re){var je=oe(Re),xt=Math.sin(je)>0?.2:1;return-Math.sin(je)*(de+Re.fontSize*xt)+Math.abs(Math.cos(je))*(Re.fontSize*r)},be.anchorFn=function(Re){var je=oe(Re),xt=Math.cos(je);return Math.abs(xt)<.1?"middle":xt>0?"start":"end"},be.heightFn=function(Re,je,xt){var Nt=oe(Re);return-.5*(1+Math.sin(Nt))*xt};var ye=function(Re){return a(re[0]+G*Math.cos(Re),re[1]-G*Math.sin(Re))};se=function(Re){return ye(oe(Re))};var ge=function(Re){var je=oe(Re);return ye(je)+"rotate("+-n(je)+")"};if(ie=o.calcTicks(q),ae=o.getTickSigns(q)[2],q.visible){ae=q.ticks==="inside"?-1:1;var me=(q.linewidth||1)/2;o.drawTicks(I,q,{vals:ie,layer:K,path:"M"+ae*me+",0h"+ae*q.ticklen,transFn:ge}),o.drawLabels(I,q,{vals:ie,layer:K,transFn:se,labelFns:be})}var Se=[X].concat(z.gauge.steps),Le=ue.selectAll("g.bg-arc").data(Se);Le.enter().append("g").classed("bg-arc",!0).append("path"),Le.select("path").call(Z).call(b),Le.exit().remove();var Oe=ne(z.gauge.bar.thickness),we=ue.selectAll("g.value-arc").data([z.gauge.bar]);we.enter().append("g").classed("value-arc",!0).append("path");var Ce=we.select("path");u(te)?(Ce.transition().duration(te.duration).ease(te.easing).each("end",function(){Y&&Y()}).each("interrupt",function(){Y&&Y()}).attrTween("d",v(Oe,ee(R[0].lastY),ee(R[0].y))),z._lastValue=R[0].y):Ce.attr("d",typeof R[0].y=="number"?Oe.endAngle(ee(R[0].y)):"M0,0Z"),Ce.call(b),we.exit().remove(),Se=[];var Ke=z.gauge.threshold.value;(Ke||Ke===0)&&Se.push({range:[Ke,Ke],color:z.gauge.threshold.color,line:{color:z.gauge.threshold.line.color,width:z.gauge.threshold.line.width},thickness:z.gauge.threshold.thickness});var Ye=ue.selectAll("g.threshold-arc").data(Se);Ye.enter().append("g").classed("threshold-arc",!0).append("path"),Ye.select("path").call(Z).call(b),Ye.exit().remove();var Fe=ue.selectAll("g.gauge-outline").data([j]);Fe.enter().append("g").classed("gauge-outline",!0).append("path"),Fe.select("path").call(Z).call(b),Fe.exit().remove()}function g(I,D,R,O){var z=R[0].trace,B=O.numbersX,G=O.numbersY,Q=z.align||"center",X=m[Q],j=O.transitionOpts,re=O.onComplete,ue=T.ensureSingle(D,"g","numbers"),K,te,Y,H=[];z._hasNumber&&H.push("number"),z._hasDelta&&(H.push("delta"),z.delta.position==="left"&&H.reverse());var ee=ue.selectAll("text").data(H);ee.enter().append("text"),ee.attr("text-anchor",function(){return X}).attr("class",function(ye){return ye}).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null),ee.exit().remove();function ne(ye,ge,me,Se){if(ye.match("s")&&me>=0!=Se>=0&&!ge(me).slice(-1).match(x)&&!ge(Se).slice(-1).match(x)){var Le=ye.slice().replace("s","f").replace(/\d+/,function(we){return parseInt(we)-1}),Oe=k(I,{tickformat:Le});return function(we){return Math.abs(we)<1?o.tickText(Oe,we).text:ge(we)}}else return ge}function Z(){var ye=k(I,{tickformat:z.number.valueformat},z._range);ye.setScale(),o.prepTicks(ye);var ge=function(we){return o.tickText(ye,we).text},me=z.number.suffix,Se=z.number.prefix,Le=ue.select("text.number");function Oe(){var we=typeof R[0].y=="number"?Se+ge(R[0].y)+me:"-";Le.text(we).call(t.font,z.number.font).call(s.convertToTspans,I)}return u(j)?Le.transition().duration(j.duration).ease(j.easing).each("end",function(){Oe(),re&&re()}).each("interrupt",function(){Oe(),re&&re()}).attrTween("text",function(){var we=w.select(this),Ce=M(R[0].lastY,R[0].y);z._lastValue=R[0].y;var Ke=ne(z.number.valueformat,ge,R[0].lastY,R[0].y);return function(Ye){we.text(Se+Ke(Ce(Ye))+me)}}):Oe(),K=C(Se+ge(R[0].y)+me,z.number.font,X,I),Le}function q(){var ye=k(I,{tickformat:z.delta.valueformat},z._range);ye.setScale(),o.prepTicks(ye);var ge=function(Ye){return o.tickText(ye,Ye).text},me=z.delta.suffix,Se=z.delta.prefix,Le=function(Ye){var Fe=z.delta.relative?Ye.relativeDelta:Ye.delta;return Fe},Oe=function(Ye,Fe){return Ye===0||typeof Ye!="number"||isNaN(Ye)?"-":(Ye>0?z.delta.increasing.symbol:z.delta.decreasing.symbol)+Se+Fe(Ye)+me},we=function(Ye){return Ye.delta>=0?z.delta.increasing.color:z.delta.decreasing.color};z._deltaLastValue===void 0&&(z._deltaLastValue=Le(R[0]));var Ce=ue.select("text.delta");Ce.call(t.font,z.delta.font).call(c.fill,we({delta:z._deltaLastValue}));function Ke(){Ce.text(Oe(Le(R[0]),ge)).call(c.fill,we(R[0])).call(s.convertToTspans,I)}return u(j)?Ce.transition().duration(j.duration).ease(j.easing).tween("text",function(){var Ye=w.select(this),Fe=Le(R[0]),Re=z._deltaLastValue,je=ne(z.delta.valueformat,ge,Re,Fe),xt=M(Re,Fe);return z._deltaLastValue=Fe,function(Nt){Ye.text(Oe(xt(Nt),je)),Ye.call(c.fill,we({delta:xt(Nt)}))}}).each("end",function(){Ke(),re&&re()}).each("interrupt",function(){Ke(),re&&re()}):Ke(),te=C(Oe(Le(R[0]),ge),z.delta.font,X,I),Ce}var ie=z.mode+z.align,se;if(z._hasDelta&&(se=q(),ie+=z.delta.position+z.delta.font.size+z.delta.font.family+z.delta.valueformat,ie+=z.delta.increasing.symbol+z.delta.decreasing.symbol,Y=te),z._hasNumber&&(Z(),ie+=z.number.font.size+z.number.font.family+z.number.valueformat+z.number.suffix+z.number.prefix,Y=K),z._hasDelta&&z._hasNumber){var ae=[(K.left+K.right)/2,(K.top+K.bottom)/2],oe=[(te.left+te.right)/2,(te.top+te.bottom)/2],be,ce,de=.75*z.delta.font.size;z.delta.position==="left"&&(be=F(z,"deltaPos",0,-1*(K.width*l[z.align]+te.width*(1-l[z.align])+de),ie,Math.min),ce=ae[1]-oe[1],Y={width:K.width+te.width+de,height:Math.max(K.height,te.height),left:te.left+be,right:K.right,top:Math.min(K.top,te.top+ce),bottom:Math.max(K.bottom,te.bottom+ce)}),z.delta.position==="right"&&(be=F(z,"deltaPos",0,K.width*(1-l[z.align])+te.width*l[z.align]+de,ie,Math.max),ce=ae[1]-oe[1],Y={width:K.width+te.width+de,height:Math.max(K.height,te.height),left:K.left,right:te.right+be,top:Math.min(K.top,te.top+ce),bottom:Math.max(K.bottom,te.bottom+ce)}),z.delta.position==="bottom"&&(be=null,ce=te.height,Y={width:Math.max(K.width,te.width),height:K.height+te.height,left:Math.min(K.left,te.left),right:Math.max(K.right,te.right),top:K.bottom-K.height,bottom:K.bottom+te.height}),z.delta.position==="top"&&(be=null,ce=K.top,Y={width:Math.max(K.width,te.width),height:K.height+te.height,left:Math.min(K.left,te.left),right:Math.max(K.right,te.right),top:K.bottom-K.height-te.height,bottom:K.bottom}),se.attr({dx:be,dy:ce})}(z._hasNumber||z._hasDelta)&&ue.attr("transform",function(){var ye=O.numbersScaler(Y);ie+=ye[2];var ge=F(z,"numbersScale",1,ye[0],ie,Math.min),me;z._scaleNumbers||(ge=1),z._isAngular?me=G-ge*Y.bottom:me=G-ge*(Y.top+Y.bottom)/2,z._numbersTop=ge*Y.top+me;var Se=Y[Q];Q==="center"&&(Se=(Y.left+Y.right)/2);var Le=B-ge*Se;return Le=F(z,"numbersTranslate",0,Le,ie,Math.max),a(Le,me)+e(ge)})}function b(I){I.each(function(D){c.stroke(w.select(this),D.line.color)}).each(function(D){c.fill(w.select(this),D.color)}).style("stroke-width",function(D){return D.line.width})}function v(I,D,R){return function(){var O=f(D,R);return function(z){return I.endAngle(O(z))()}}}function k(I,D,R){var O=I._fullLayout,z=T.extendFlat({type:"linear",ticks:"outside",range:R,showline:!0},D),B={type:"linear",_id:"x"+D._id},G={letter:"x",font:O.font,noHover:!0,noTickson:!0};function Q(X,j){return T.coerce(z,B,p,X,j)}return y(z,B,Q,G,O),d(z,B,Q,G),B}function S(I,D,R){var O=Math.min(D/I.width,R/I.height);return[O,I,D+"x"+R]}function E(I,D){var R=Math.sqrt(I.width/2*(I.width/2)+I.height*I.height),O=D/R;return[O,I,D]}function C(I,D,R,O){var z=document.createElementNS("http://www.w3.org/2000/svg","text"),B=w.select(z);return B.text(I).attr("x",0).attr("y",0).attr("text-anchor",R).attr("data-unformatted",I).call(s.convertToTspans,O).call(t.font,D),t.bBox(B.node())}function F(I,D,R,O,z,B){var G="_cache"+D;I[G]&&I[G].key===z||(I[G]={key:z,value:R});var Q=T.aggNums(B,null,[I[G].value,O],2);return I[G].value=Q,Q}},{"../../components/color":367,"../../components/drawing":389,"../../constants/alignment":483,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/cartesian/axes":566,"../../plots/cartesian/axis_defaults":568,"../../plots/cartesian/layout_attributes":579,"../../plots/cartesian/position_defaults":582,"./constants":867,"@plotly/d3":58,"d3-interpolate":116}],871:[function(i,U,V){var w=i("../../components/colorscale/attributes"),f=i("../../plots/cartesian/axis_format_attributes").axisHoverFormat,M=i("../../plots/template_attributes").hovertemplateAttrs,T=i("../mesh3d/attributes"),e=i("../../plots/attributes"),a=i("../../lib/extend").extendFlat,n=i("../../plot_api/edit_types").overrideAll;function r(s){return{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}}function t(s){return{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}}}var h=U.exports=n(a({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",dflt:2,min:1},fill:{valType:"number",min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:r(),y:r(),z:r()},caps:{x:t(),y:t(),z:t()},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:M(),xhoverformat:f("x"),yhoverformat:f("y"),zhoverformat:f("z"),valuehoverformat:f("value",1),showlegend:a({},e.showlegend,{dflt:!1})},w("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:T.opacity,lightposition:T.lightposition,lighting:T.lighting,flatshading:T.flatshading,contour:T.contour,hoverinfo:a({},e.hoverinfo)}),"calc","nested");h.flatshading.dflt=!0,h.lighting.facenormalsepsilon.dflt=0,h.x.editType=h.y.editType=h.z.editType=h.value.editType="calc+clearAxisTypes",h.transforms=void 0},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../mesh3d/attributes":876}],872:[function(i,U,V){var w=i("../../components/colorscale/calc"),f=i("../streamtube/calc").processGrid,M=i("../streamtube/calc").filter;U.exports=function(e,a){a._len=Math.min(a.x.length,a.y.length,a.z.length,a.value.length),a._x=M(a.x,a._len),a._y=M(a.y,a._len),a._z=M(a.z,a._len),a._value=M(a.value,a._len);var n=f(a);a._gridFill=n.fill,a._Xs=n.Xs,a._Ys=n.Ys,a._Zs=n.Zs,a._len=n.len;for(var r=1/0,t=-1/0,h=0;h<a._len;h++){var s=a._value[h];r=Math.min(r,s),t=Math.max(t,s)}a._minValues=r,a._maxValues=t,a._vMin=a.isomin===void 0||a.isomin===null?r:a.isomin,a._vMax=a.isomax===void 0||a.isomin===null?t:a.isomax,w(e,a,{vals:[a._vMin,a._vMax],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":375,"../streamtube/calc":1054}],873:[function(i,U,V){var w=i("../../../stackgl_modules").gl_mesh3d,f=i("../../lib/gl_format_color").parseColorScale,M=i("../../lib/str2rgbarray"),T=i("../../components/colorscale").extractOpts,e=i("../../plots/gl3d/zip3"),a=function(o,y){for(var d=y.length-1;d>0;d--){var p=Math.min(y[d],y[d-1]),c=Math.max(y[d],y[d-1]);if(c>p&&p<o&&o<=c)return{id:d,distRatio:(c-o)/(c-p)}}return{id:0,distRatio:0}};function n(o,y,d){this.scene=o,this.uid=d,this.mesh=y,this.name="",this.data=null,this.showContour=!1}var r=n.prototype;r.handlePick=function(o){if(o.object===this.mesh){var y=o.data.index,d=this.data._meshX[y],p=this.data._meshY[y],c=this.data._meshZ[y],m=this.data._Ys.length,l=this.data._Zs.length,x=a(d,this.data._Xs).id,u=a(p,this.data._Ys).id,A=a(c,this.data._Zs).id,_=o.index=A+l*u+l*m*x;o.traceCoordinate=[this.data._meshX[_],this.data._meshY[_],this.data._meshZ[_],this.data._value[_]];var g=this.data.hovertext||this.data.text;return Array.isArray(g)&&g[_]!==void 0?o.textLabel=g[_]:g&&(o.textLabel=g),!0}},r.update=function(o){var y=this.scene,d=y.fullSceneLayout;this.data=h(o);function p(u,A,_,g){return A.map(function(b){return u.d2l(b,0,g)*_})}var c=e(p(d.xaxis,o._meshX,y.dataScale[0],o.xcalendar),p(d.yaxis,o._meshY,y.dataScale[1],o.ycalendar),p(d.zaxis,o._meshZ,y.dataScale[2],o.zcalendar)),m=e(o._meshI,o._meshJ,o._meshK),l={positions:c,cells:m,lightPosition:[o.lightposition.x,o.lightposition.y,o.lightposition.z],ambient:o.lighting.ambient,diffuse:o.lighting.diffuse,specular:o.lighting.specular,roughness:o.lighting.roughness,fresnel:o.lighting.fresnel,vertexNormalsEpsilon:o.lighting.vertexnormalsepsilon,faceNormalsEpsilon:o.lighting.facenormalsepsilon,opacity:o.opacity,contourEnable:o.contour.show,contourColor:M(o.contour.color).slice(0,3),contourWidth:o.contour.width,useFacetNormals:o.flatshading},x=T(o);l.vertexIntensity=o._meshIntensity,l.vertexIntensityBounds=[x.min,x.max],l.colormap=f(o),this.mesh.update(l)},r.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};var t=["xyz","xzy","yxz","yzx","zxy","zyx"];function h(o){o._meshI=[],o._meshJ=[],o._meshK=[];var y=o.surface.show,d=o.spaceframe.show,p=o.surface.fill,c=o.spaceframe.fill,m=!1,l=!1,x=0,u,A,_=o._Xs,g=o._Ys,b=o._Zs,v=_.length,k=g.length,S=b.length,E=t.indexOf(o._gridFill.replace(/-/g,"").replace(/\+/g,"")),C=function(Ut,Lt,We){switch(E){case 5:return We+S*Lt+S*k*Ut;case 4:return We+S*Ut+S*v*Lt;case 3:return Lt+k*We+k*S*Ut;case 2:return Lt+k*Ut+k*v*We;case 1:return Ut+v*We+v*S*Lt;default:return Ut+v*Lt+v*k*We}},F=o._minValues,I=o._maxValues,D=o._vMin,R=o._vMax,O,z,B,G;function Q(Ut,Lt,We){for(var ot=G.length,Ge=A;Ge<ot;Ge++)if(Ut===O[Ge]&&Lt===z[Ge]&&We===B[Ge])return Ge;return-1}function X(){A=u}function j(){O=[],z=[],B=[],G=[],u=0,X()}function re(Ut,Lt,We,ot){return O.push(Ut),z.push(Lt),B.push(We),G.push(ot),u++,u-1}function ue(Ut,Lt,We){return o._meshI.push(Ut),o._meshJ.push(Lt),o._meshK.push(We),x++,x-1}function K(Ut,Lt,We){for(var ot=[],Ge=0;Ge<Ut.length;Ge++)ot[Ge]=(Ut[Ge]+Lt[Ge]+We[Ge])/3;return ot}function te(Ut,Lt,We){for(var ot=[],Ge=0;Ge<Ut.length;Ge++)ot[Ge]=Ut[Ge]*(1-We)+We*Lt[Ge];return ot}var Y;function H(Ut){Y=Ut}function ee(Ut,Lt){var We=Ut[0],ot=Ut[1],Ge=Ut[2],Me=K(We,ot,Ge),Ve=Math.sqrt(1-Y),Qe=te(Me,We,Ve),tt=te(Me,ot,Ve),St=te(Me,Ge,Ve),wt=Lt[0],Ct=Lt[1],jt=Lt[2];return{xyzv:[[We,ot,tt],[tt,Qe,We],[ot,Ge,St],[St,tt,ot],[Ge,We,Qe],[Qe,St,Ge]],abc:[[wt,Ct,-1],[-1,-1,wt],[Ct,jt,-1],[-1,-1,Ct],[jt,wt,-1],[-1,-1,jt]]}}function ne(Ut,Lt){return Ut==="all"||Ut===null?!0:Ut.indexOf(Lt)>-1}function Z(Ut,Lt){return Ut===null?Lt:Ut}function q(Ut,Lt,We){X();var ot=[Lt],Ge=[We];if(Y>=1)ot=[Lt],Ge=[We];else if(Y>0){var Me=ee(Lt,We);ot=Me.xyzv,Ge=Me.abc}for(var Ve=0;Ve<ot.length;Ve++){Lt=ot[Ve],We=Ge[Ve];for(var Qe=[],tt=0;tt<3;tt++){var St=Lt[tt][0],wt=Lt[tt][1],Ct=Lt[tt][2],jt=Lt[tt][3],Bt=We[tt]>-1?We[tt]:Q(St,wt,Ct);Bt>-1?Qe[tt]=Bt:Qe[tt]=re(St,wt,Ct,Z(Ut,jt))}ue(Qe[0],Qe[1],Qe[2])}}function ie(Ut,Lt,We){var ot=function(Ge,Me,Ve){q(Ut,[Lt[Ge],Lt[Me],Lt[Ve]],[We[Ge],We[Me],We[Ve]])};ot(0,1,2),ot(2,3,0)}function se(Ut,Lt,We){var ot=function(Ge,Me,Ve){q(Ut,[Lt[Ge],Lt[Me],Lt[Ve]],[We[Ge],We[Me],We[Ve]])};ot(0,1,2),ot(3,0,1),ot(2,3,0),ot(1,2,3)}function ae(Ut,Lt,We,ot){var Ge=Ut[3];Ge<We&&(Ge=We),Ge>ot&&(Ge=ot);for(var Me=(Ut[3]-Ge)/(Ut[3]-Lt[3]+1e-9),Ve=[],Qe=0;Qe<4;Qe++)Ve[Qe]=(1-Me)*Ut[Qe]+Me*Lt[Qe];return Ve}function oe(Ut,Lt,We){return Ut>=Lt&&Ut<=We}function be(Ut){var Lt=.001*(R-D);return Ut>=D-Lt&&Ut<=R+Lt}function ce(Ut){for(var Lt=[],We=0;We<4;We++){var ot=Ut[We];Lt.push([o._x[ot],o._y[ot],o._z[ot],o._value[ot]])}return Lt}var de=3;function ye(Ut,Lt,We,ot,Ge,Me){Me||(Me=1),We=[-1,-1,-1];var Ve=!1,Qe=[oe(Lt[0][3],ot,Ge),oe(Lt[1][3],ot,Ge),oe(Lt[2][3],ot,Ge)];if(!Qe[0]&&!Qe[1]&&!Qe[2])return!1;var tt=function(wt,Ct,jt){return be(Ct[0][3])&&be(Ct[1][3])&&be(Ct[2][3])?(q(wt,Ct,jt),!0):Me<de?ye(wt,Ct,jt,D,R,++Me):!1};if(Qe[0]&&Qe[1]&&Qe[2])return tt(Ut,Lt,We)||Ve;var St=!1;return[[0,1,2],[2,0,1],[1,2,0]].forEach(function(wt){if(Qe[wt[0]]&&Qe[wt[1]]&&!Qe[wt[2]]){var Ct=Lt[wt[0]],jt=Lt[wt[1]],Bt=Lt[wt[2]],Wt=ae(Bt,Ct,ot,Ge),Qt=ae(Bt,jt,ot,Ge);Ve=tt(Ut,[Qt,Wt,Ct],[-1,-1,We[wt[0]]])||Ve,Ve=tt(Ut,[Ct,jt,Qt],[We[wt[0]],We[wt[1]],-1])||Ve,St=!0}}),St||[[0,1,2],[1,2,0],[2,0,1]].forEach(function(wt){if(Qe[wt[0]]&&!Qe[wt[1]]&&!Qe[wt[2]]){var Ct=Lt[wt[0]],jt=Lt[wt[1]],Bt=Lt[wt[2]],Wt=ae(jt,Ct,ot,Ge),Qt=ae(Bt,Ct,ot,Ge);Ve=tt(Ut,[Qt,Wt,Ct],[-1,-1,We[wt[0]]])||Ve,St=!0}}),Ve}function ge(Ut,Lt,We,ot){var Ge=!1,Me=ce(Lt),Ve=[oe(Me[0][3],We,ot),oe(Me[1][3],We,ot),oe(Me[2][3],We,ot),oe(Me[3][3],We,ot)];if(!Ve[0]&&!Ve[1]&&!Ve[2]&&!Ve[3])return Ge;if(Ve[0]&&Ve[1]&&Ve[2]&&Ve[3])return l&&(Ge=se(Ut,Me,Lt)||Ge),Ge;var Qe=!1;return[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(tt){if(Ve[tt[0]]&&Ve[tt[1]]&&Ve[tt[2]]&&!Ve[tt[3]]){var St=Me[tt[0]],wt=Me[tt[1]],Ct=Me[tt[2]],jt=Me[tt[3]];if(l)Ge=q(Ut,[St,wt,Ct],[Lt[tt[0]],Lt[tt[1]],Lt[tt[2]]])||Ge;else{var Bt=ae(jt,St,We,ot),Wt=ae(jt,wt,We,ot),Qt=ae(jt,Ct,We,ot);Ge=q(null,[Bt,Wt,Qt],[-1,-1,-1])||Ge}Qe=!0}}),Qe||([[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(tt){if(Ve[tt[0]]&&Ve[tt[1]]&&!Ve[tt[2]]&&!Ve[tt[3]]){var St=Me[tt[0]],wt=Me[tt[1]],Ct=Me[tt[2]],jt=Me[tt[3]],Bt=ae(Ct,St,We,ot),Wt=ae(Ct,wt,We,ot),Qt=ae(jt,wt,We,ot),Zt=ae(jt,St,We,ot);l?(Ge=q(Ut,[St,Zt,Bt],[Lt[tt[0]],-1,-1])||Ge,Ge=q(Ut,[wt,Wt,Qt],[Lt[tt[1]],-1,-1])||Ge):Ge=ie(null,[Bt,Wt,Qt,Zt],[-1,-1,-1,-1])||Ge,Qe=!0}}),Qe)||[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(tt){if(Ve[tt[0]]&&!Ve[tt[1]]&&!Ve[tt[2]]&&!Ve[tt[3]]){var St=Me[tt[0]],wt=Me[tt[1]],Ct=Me[tt[2]],jt=Me[tt[3]],Bt=ae(wt,St,We,ot),Wt=ae(Ct,St,We,ot),Qt=ae(jt,St,We,ot);l?(Ge=q(Ut,[St,Bt,Wt],[Lt[tt[0]],-1,-1])||Ge,Ge=q(Ut,[St,Wt,Qt],[Lt[tt[0]],-1,-1])||Ge,Ge=q(Ut,[St,Qt,Bt],[Lt[tt[0]],-1,-1])||Ge):Ge=q(null,[Bt,Wt,Qt],[-1,-1,-1])||Ge,Qe=!0}}),Ge}function me(Ut,Lt,We,ot,Ge,Me,Ve,Qe,tt,St,wt){var Ct=!1;return m&&(ne(Ut,"A")&&(Ct=ge(null,[Lt,We,ot,Me],St,wt)||Ct),ne(Ut,"B")&&(Ct=ge(null,[We,ot,Ge,tt],St,wt)||Ct),ne(Ut,"C")&&(Ct=ge(null,[We,Me,Ve,tt],St,wt)||Ct),ne(Ut,"D")&&(Ct=ge(null,[ot,Me,Qe,tt],St,wt)||Ct),ne(Ut,"E")&&(Ct=ge(null,[We,ot,Me,tt],St,wt)||Ct)),l&&(Ct=ge(Ut,[We,ot,Me,tt],St,wt)||Ct),Ct}function Se(Ut,Lt,We,ot,Ge,Me,Ve,Qe){return[Qe[0]===!0?!0:ye(Ut,ce([Lt,We,ot]),[Lt,We,ot],Me,Ve),Qe[1]===!0?!0:ye(Ut,ce([ot,Ge,Lt]),[ot,Ge,Lt],Me,Ve)]}function Le(Ut,Lt,We,ot,Ge,Me,Ve,Qe,tt){return Qe?Se(Ut,Lt,We,Ge,ot,Me,Ve,tt):Se(Ut,We,Ge,ot,Lt,Me,Ve,tt)}function Oe(Ut,Lt,We,ot,Ge,Me,Ve){var Qe=!1,tt,St,wt,Ct,jt=function(){Qe=ye(Ut,[tt,St,wt],[-1,-1,-1],Ge,Me)||Qe,Qe=ye(Ut,[wt,Ct,tt],[-1,-1,-1],Ge,Me)||Qe},Bt=Ve[0],Wt=Ve[1],Qt=Ve[2];return Bt&&(tt=te(ce([C(Lt,We-0,ot-0)])[0],ce([C(Lt-1,We-0,ot-0)])[0],Bt),St=te(ce([C(Lt,We-0,ot-1)])[0],ce([C(Lt-1,We-0,ot-1)])[0],Bt),wt=te(ce([C(Lt,We-1,ot-1)])[0],ce([C(Lt-1,We-1,ot-1)])[0],Bt),Ct=te(ce([C(Lt,We-1,ot-0)])[0],ce([C(Lt-1,We-1,ot-0)])[0],Bt),jt()),Wt&&(tt=te(ce([C(Lt-0,We,ot-0)])[0],ce([C(Lt-0,We-1,ot-0)])[0],Wt),St=te(ce([C(Lt-0,We,ot-1)])[0],ce([C(Lt-0,We-1,ot-1)])[0],Wt),wt=te(ce([C(Lt-1,We,ot-1)])[0],ce([C(Lt-1,We-1,ot-1)])[0],Wt),Ct=te(ce([C(Lt-1,We,ot-0)])[0],ce([C(Lt-1,We-1,ot-0)])[0],Wt),jt()),Qt&&(tt=te(ce([C(Lt-0,We-0,ot)])[0],ce([C(Lt-0,We-0,ot-1)])[0],Qt),St=te(ce([C(Lt-0,We-1,ot)])[0],ce([C(Lt-0,We-1,ot-1)])[0],Qt),wt=te(ce([C(Lt-1,We-1,ot)])[0],ce([C(Lt-1,We-1,ot-1)])[0],Qt),Ct=te(ce([C(Lt-1,We-0,ot)])[0],ce([C(Lt-1,We-0,ot-1)])[0],Qt),jt()),Qe}function we(Ut,Lt,We,ot,Ge,Me,Ve,Qe,tt,St,wt,Ct){var jt=Ut;return Ct?(m&&Ut==="even"&&(jt=null),me(jt,Lt,We,ot,Ge,Me,Ve,Qe,tt,St,wt)):(m&&Ut==="odd"&&(jt=null),me(jt,tt,Qe,Ve,Me,Ge,ot,We,Lt,St,wt))}function Ce(Ut,Lt,We,ot,Ge){for(var Me=[],Ve=0,Qe=0;Qe<Lt.length;Qe++)for(var tt=Lt[Qe],St=1;St<S;St++)for(var wt=1;wt<k;wt++)Me.push(Le(Ut,C(tt,wt-1,St-1),C(tt,wt-1,St),C(tt,wt,St-1),C(tt,wt,St),We,ot,(tt+wt+St)%2,Ge&&Ge[Ve]?Ge[Ve]:[])),Ve++;return Me}function Ke(Ut,Lt,We,ot,Ge){for(var Me=[],Ve=0,Qe=0;Qe<Lt.length;Qe++)for(var tt=Lt[Qe],St=1;St<v;St++)for(var wt=1;wt<S;wt++)Me.push(Le(Ut,C(St-1,tt,wt-1),C(St,tt,wt-1),C(St-1,tt,wt),C(St,tt,wt),We,ot,(St+tt+wt)%2,Ge&&Ge[Ve]?Ge[Ve]:[])),Ve++;return Me}function Ye(Ut,Lt,We,ot,Ge){for(var Me=[],Ve=0,Qe=0;Qe<Lt.length;Qe++)for(var tt=Lt[Qe],St=1;St<k;St++)for(var wt=1;wt<v;wt++)Me.push(Le(Ut,C(wt-1,St-1,tt),C(wt-1,St,tt),C(wt,St-1,tt),C(wt,St,tt),We,ot,(wt+St+tt)%2,Ge&&Ge[Ve]?Ge[Ve]:[])),Ve++;return Me}function Fe(Ut,Lt,We){for(var ot=1;ot<S;ot++)for(var Ge=1;Ge<k;Ge++)for(var Me=1;Me<v;Me++)we(Ut,C(Me-1,Ge-1,ot-1),C(Me-1,Ge-1,ot),C(Me-1,Ge,ot-1),C(Me-1,Ge,ot),C(Me,Ge-1,ot-1),C(Me,Ge-1,ot),C(Me,Ge,ot-1),C(Me,Ge,ot),Lt,We,(Me+Ge+ot)%2)}function Re(Ut,Lt,We){l=!0,Fe(Ut,Lt,We),l=!1}function je(Ut,Lt,We){m=!0,Fe(Ut,Lt,We),m=!1}function xt(Ut,Lt,We,ot,Ge,Me){for(var Ve=[],Qe=0,tt=0;tt<Lt.length;tt++)for(var St=Lt[tt],wt=1;wt<S;wt++)for(var Ct=1;Ct<k;Ct++)Ve.push(Oe(Ut,St,Ct,wt,We,ot,Ge[tt],Me&&Me[Qe]?Me[Qe]:[])),Qe++;return Ve}function Nt(Ut,Lt,We,ot,Ge,Me){for(var Ve=[],Qe=0,tt=0;tt<Lt.length;tt++)for(var St=Lt[tt],wt=1;wt<v;wt++)for(var Ct=1;Ct<S;Ct++)Ve.push(Oe(Ut,wt,St,Ct,We,ot,Ge[tt],Me&&Me[Qe]?Me[Qe]:[])),Qe++;return Ve}function tr(Ut,Lt,We,ot,Ge,Me){for(var Ve=[],Qe=0,tt=0;tt<Lt.length;tt++)for(var St=Lt[tt],wt=1;wt<k;wt++)for(var Ct=1;Ct<v;Ct++)Ve.push(Oe(Ut,Ct,wt,St,We,ot,Ge[tt],Me&&Me[Qe]?Me[Qe]:[])),Qe++;return Ve}function Ht(Ut,Lt){for(var We=[],ot=Ut;ot<Lt;ot++)We.push(ot);return We}function Pt(){for(var Ut=0;Ut<v;Ut++)for(var Lt=0;Lt<k;Lt++)for(var We=0;We<S;We++){var ot=C(Ut,Lt,We);re(o._x[ot],o._y[ot],o._z[ot],o._value[ot])}}function $t(){j(),Pt();var Ut=null;if(d&&c&&(H(c),Re(Ut,D,R)),y&&p){H(p);for(var Lt=o.surface.pattern,We=o.surface.count,ot=0;ot<We;ot++){var Ge=We===1?.5:ot/(We-1),Me=(1-Ge)*D+Ge*R,Ve=Math.abs(Me-F),Qe=Math.abs(Me-I),tt=Ve>Qe?[F,Me]:[Me,I];je(Lt,tt[0],tt[1])}}var St=[[Math.min(D,I),Math.max(D,I)],[Math.min(F,R),Math.max(F,R)]];["x","y","z"].forEach(function(wt){for(var Ct=[],jt=0;jt<St.length;jt++){var Bt=0,Wt=St[jt][0],Qt=St[jt][1],Zt=o.slices[wt];if(Zt.show&&Zt.fill){H(Zt.fill);var cr=[],Xr=[],vn=[];if(Zt.locations.length)for(var en=0;en<Zt.locations.length;en++){var ut=a(Zt.locations[en],wt==="x"?_:wt==="y"?g:b);ut.distRatio===0?cr.push(ut.id):ut.id>0&&(Xr.push(ut.id),wt==="x"?vn.push([ut.distRatio,0,0]):wt==="y"?vn.push([0,ut.distRatio,0]):vn.push([0,0,ut.distRatio]))}else wt==="x"?cr=Ht(1,v-1):wt==="y"?cr=Ht(1,k-1):cr=Ht(1,S-1);Xr.length>0&&(wt==="x"?Ct[Bt]=xt(Ut,Xr,Wt,Qt,vn,Ct[Bt]):wt==="y"?Ct[Bt]=Nt(Ut,Xr,Wt,Qt,vn,Ct[Bt]):Ct[Bt]=tr(Ut,Xr,Wt,Qt,vn,Ct[Bt]),Bt++),cr.length>0&&(wt==="x"?Ct[Bt]=Ce(Ut,cr,Wt,Qt,Ct[Bt]):wt==="y"?Ct[Bt]=Ke(Ut,cr,Wt,Qt,Ct[Bt]):Ct[Bt]=Ye(Ut,cr,Wt,Qt,Ct[Bt]),Bt++)}var ar=o.caps[wt];ar.show&&ar.fill&&(H(ar.fill),wt==="x"?Ct[Bt]=Ce(Ut,[0,v-1],Wt,Qt,Ct[Bt]):wt==="y"?Ct[Bt]=Ke(Ut,[0,k-1],Wt,Qt,Ct[Bt]):Ct[Bt]=Ye(Ut,[0,S-1],Wt,Qt,Ct[Bt]),Bt++)}}),x===0&&j(),o._meshX=O,o._meshY=z,o._meshZ=B,o._meshIntensity=G,o._Xs=_,o._Ys=g,o._Zs=b}return $t(),o}function s(o,y){var d=o.glplot.gl,p=w({gl:d}),c=new n(o,p,y.uid);return p._trace=c,c.update(y),o.glplot.add(p),c}U.exports={findNearestOnAxis:a,generateIsoMeshes:h,createIsosurfaceTrace:s}},{"../../../stackgl_modules":1133,"../../components/colorscale":379,"../../lib/gl_format_color":511,"../../lib/str2rgbarray":540,"../../plots/gl3d/zip3":618}],874:[function(i,U,V){var w=i("../../lib"),f=i("../../registry"),M=i("./attributes"),T=i("../../components/colorscale/defaults");function e(n,r,t,h){function s(o,y){return w.coerce(n,r,M,o,y)}a(n,r,t,h,s)}function a(n,r,t,h,s){var o=s("isomin"),y=s("isomax");y!=null&&o!==void 0&&o!==null&&o>y&&(r.isomin=null,r.isomax=null);var d=s("x"),p=s("y"),c=s("z"),m=s("value");if(!d||!d.length||!p||!p.length||!c||!c.length||!m||!m.length){r.visible=!1;return}var l=f.getComponentMethod("calendars","handleTraceDefaults");l(n,r,["x","y","z"],h),s("valuehoverformat"),["x","y","z"].forEach(function(_){s(_+"hoverformat");var g="caps."+_,b=s(g+".show");b&&s(g+".fill");var v="slices."+_,k=s(v+".show");k&&(s(v+".fill"),s(v+".locations"))});var x=s("spaceframe.show");x&&s("spaceframe.fill");var u=s("surface.show");u&&(s("surface.count"),s("surface.fill"),s("surface.pattern"));var A=s("contour.show");A&&(s("contour.color"),s("contour.width")),["text","hovertext","hovertemplate","lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","opacity"].forEach(function(_){s(_)}),T(n,r,h,s,{prefix:"",cLetter:"c"}),r._length=null}U.exports={supplyDefaults:e,supplyIsoDefaults:a}},{"../../components/colorscale/defaults":377,"../../lib":515,"../../registry":647,"./attributes":871}],875:[function(i,U,V){U.exports={attributes:i("./attributes"),supplyDefaults:i("./defaults").supplyDefaults,calc:i("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:i("./convert").createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:i("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":607,"./attributes":871,"./calc":872,"./convert":873,"./defaults":874}],876:[function(i,U,V){var w=i("../../components/colorscale/attributes"),f=i("../../plots/cartesian/axis_format_attributes").axisHoverFormat,M=i("../../plots/template_attributes").hovertemplateAttrs,T=i("../surface/attributes"),e=i("../../plots/attributes"),a=i("../../lib/extend").extendFlat;U.exports=a({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:M({editType:"calc"}),xhoverformat:f("x"),yhoverformat:f("y"),zhoverformat:f("z"),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},w("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:T.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:a({},T.contours.x.show,{}),color:T.contours.x.color,width:T.contours.x.width,editType:"calc"},lightposition:{x:a({},T.lightposition.x,{dflt:1e5}),y:a({},T.lightposition.y,{dflt:1e5}),z:a({},T.lightposition.z,{dflt:0}),editType:"calc"},lighting:a({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc"},editType:"calc"},T.lighting),hoverinfo:a({},e.hoverinfo,{editType:"calc"}),showlegend:a({},e.showlegend,{dflt:!1})})},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../surface/attributes":1070}],877:[function(i,U,V){var w=i("../../components/colorscale/calc");U.exports=function(M,T){T.intensity&&w(M,T,{vals:T.intensity,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":375}],878:[function(i,U,V){var w=i("../../../stackgl_modules").gl_mesh3d,f=i("../../../stackgl_modules").delaunay_triangulate,M=i("../../../stackgl_modules").alpha_shape,T=i("../../../stackgl_modules").convex_hull,e=i("../../lib/gl_format_color").parseColorScale,a=i("../../lib/str2rgbarray"),n=i("../../components/colorscale").extractOpts,r=i("../../plots/gl3d/zip3");function t(m,l,x){this.scene=m,this.uid=x,this.mesh=l,this.name="",this.color="#fff",this.data=null,this.showContour=!1}var h=t.prototype;h.handlePick=function(m){if(m.object===this.mesh){var l=m.index=m.data.index;m.data._cellCenter?m.traceCoordinate=m.data.dataCoordinate:m.traceCoordinate=[this.data.x[l],this.data.y[l],this.data.z[l]];var x=this.data.hovertext||this.data.text;return Array.isArray(x)&&x[l]!==void 0?m.textLabel=x[l]:x&&(m.textLabel=x),!0}};function s(m){for(var l=[],x=m.length,u=0;u<x;u++)l[u]=a(m[u]);return l}function o(m,l,x,u){for(var A=[],_=l.length,g=0;g<_;g++)A[g]=m.d2l(l[g],0,u)*x;return A}function y(m){for(var l=[],x=m.length,u=0;u<x;u++)l[u]=Math.round(m[u]);return l}function d(m,l){for(var x=["x","y","z"].indexOf(m),u=[],A=l.length,_=0;_<A;_++)u[_]=[l[_][(x+1)%3],l[_][(x+2)%3]];return f(u)}function p(m,l){for(var x=m.length,u=0;u<x;u++)if(m[u]<=-.5||m[u]>=l-.5)return!1;return!0}h.update=function(m){var l=this.scene,x=l.fullSceneLayout;this.data=m;var u=m.x.length,A=r(o(x.xaxis,m.x,l.dataScale[0],m.xcalendar),o(x.yaxis,m.y,l.dataScale[1],m.ycalendar),o(x.zaxis,m.z,l.dataScale[2],m.zcalendar)),_;if(m.i&&m.j&&m.k){if(m.i.length!==m.j.length||m.j.length!==m.k.length||!p(m.i,u)||!p(m.j,u)||!p(m.k,u))return;_=r(y(m.i),y(m.j),y(m.k))}else m.alphahull===0?_=T(A):m.alphahull>0?_=M(m.alphahull,A):_=d(m.delaunayaxis,A);var g={positions:A,cells:_,lightPosition:[m.lightposition.x,m.lightposition.y,m.lightposition.z],ambient:m.lighting.ambient,diffuse:m.lighting.diffuse,specular:m.lighting.specular,roughness:m.lighting.roughness,fresnel:m.lighting.fresnel,vertexNormalsEpsilon:m.lighting.vertexnormalsepsilon,faceNormalsEpsilon:m.lighting.facenormalsepsilon,opacity:m.opacity,contourEnable:m.contour.show,contourColor:a(m.contour.color).slice(0,3),contourWidth:m.contour.width,useFacetNormals:m.flatshading};if(m.intensity){var b=n(m);this.color="#fff";var v=m.intensitymode;g[v+"Intensity"]=m.intensity,g[v+"IntensityBounds"]=[b.min,b.max],g.colormap=e(m)}else m.vertexcolor?(this.color=m.vertexcolor[0],g.vertexColors=s(m.vertexcolor)):m.facecolor?(this.color=m.facecolor[0],g.cellColors=s(m.facecolor)):(this.color=m.color,g.meshColor=a(m.color));this.mesh.update(g)},h.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function c(m,l){var x=m.glplot.gl,u=w({gl:x}),A=new t(m,u,l.uid);return u._trace=A,A.update(l),m.glplot.add(u),A}U.exports=c},{"../../../stackgl_modules":1133,"../../components/colorscale":379,"../../lib/gl_format_color":511,"../../lib/str2rgbarray":540,"../../plots/gl3d/zip3":618}],879:[function(i,U,V){var w=i("../../registry"),f=i("../../lib"),M=i("../../components/colorscale/defaults"),T=i("./attributes");U.exports=function(a,n,r,t){function h(p,c){return f.coerce(a,n,T,p,c)}function s(p){var c=p.map(function(m){var l=h(m);return l&&f.isArrayOrTypedArray(l)?l:null});return c.every(function(m){return m&&m.length===c[0].length})&&c}var o=s(["x","y","z"]);if(!o){n.visible=!1;return}if(s(["i","j","k"]),n.i&&(!n.j||!n.k)||n.j&&(!n.k||!n.i)||n.k&&(!n.i||!n.j)){n.visible=!1;return}var y=w.getComponentMethod("calendars","handleTraceDefaults");y(a,n,["x","y","z"],t),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(p){h(p)});var d=h("contour.show");d&&(h("contour.color"),h("contour.width")),"intensity"in a?(h("intensity"),h("intensitymode"),M(a,n,t,h,{prefix:"",cLetter:"c"})):(n.showscale=!1,"facecolor"in a?h("facecolor"):"vertexcolor"in a?h("vertexcolor"):h("color",r)),h("text"),h("hovertext"),h("hovertemplate"),h("xhoverformat"),h("yhoverformat"),h("zhoverformat"),n._length=null}},{"../../components/colorscale/defaults":377,"../../lib":515,"../../registry":647,"./attributes":876}],880:[function(i,U,V){U.exports={attributes:i("./attributes"),supplyDefaults:i("./defaults"),calc:i("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:i("./convert"),moduleType:"trace",name:"mesh3d",basePlotModule:i("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":607,"./attributes":876,"./calc":877,"./convert":878,"./defaults":879}],881:[function(i,U,V){var w=i("../../lib").extendFlat,f=i("../scatter/attributes"),M=i("../../plots/cartesian/axis_format_attributes").axisHoverFormat,T=i("../../components/drawing/attributes").dash,e=i("../../components/fx/attributes"),a=i("../../constants/delta.js"),n=a.INCREASING.COLOR,r=a.DECREASING.COLOR,t=f.line;function h(s){return{line:{color:w({},t.color,{dflt:s}),width:t.width,dash:T,editType:"style"},editType:"style"}}U.exports={xperiod:f.xperiod,xperiod0:f.xperiod0,xperiodalignment:f.xperiodalignment,xhoverformat:M("x"),yhoverformat:M("y"),x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",editType:"calc"},high:{valType:"data_array",editType:"calc"},low:{valType:"data_array",editType:"calc"},close:{valType:"data_array",editType:"calc"},line:{width:w({},t.width,{}),dash:w({},T,{}),editType:"style"},increasing:h(n),decreasing:h(r),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc"},hoverlabel:w({},e.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style"}})}},{"../../components/drawing/attributes":388,"../../components/fx/attributes":398,"../../constants/delta.js":485,"../../lib":515,"../../plots/cartesian/axis_format_attributes":569,"../scatter/attributes":936}],882:[function(i,U,V){var w=i("../../lib"),f=w._,M=i("../../plots/cartesian/axes"),T=i("../../plots/cartesian/align_period"),e=i("../../constants/numerical").BADNUM;function a(h,s){var o=M.getFromId(h,s.xaxis),y=M.getFromId(h,s.yaxis),d=t(h,o,s),p=s._minDiff;s._minDiff=null;var c=s._origX;s._origX=null;var m=s._xcalc;s._xcalc=null;var l=r(h,s,c,m,y,n);return s._extremes[o._id]=M.findExtremes(o,m,{vpad:p/2}),l.length?(w.extendFlat(l[0].t,{wHover:p/2,tickLen:d}),l):[{t:{empty:!0}}]}function n(h,s,o,y){return{o:h,h:s,l:o,c:y}}function r(h,s,o,y,d,p){for(var c=d.makeCalcdata(s,"open"),m=d.makeCalcdata(s,"high"),l=d.makeCalcdata(s,"low"),x=d.makeCalcdata(s,"close"),u=Array.isArray(s.text),A=Array.isArray(s.hovertext),_=!0,g=null,b=!!s.xperiodalignment,v=[],k=0;k<y.length;k++){var S=y[k],E=c[k],C=m[k],F=l[k],I=x[k];if(S!==e&&E!==e&&C!==e&&F!==e&&I!==e){I===E?g!==null&&I!==g&&(_=I>g):_=I>E,g=I;var D=p(E,C,F,I);D.pos=S,D.yc=(E+I)/2,D.i=k,D.dir=_?"increasing":"decreasing",D.x=D.pos,D.y=[F,C],b&&(D.orig_p=o[k]),u&&(D.tx=s.text[k]),A&&(D.htx=s.hovertext[k]),v.push(D)}else v.push({pos:S,empty:!0})}return s._extremes[d._id]=M.findExtremes(d,w.concat(l,m),{padded:!0}),v.length&&(v[0].t={labels:{open:f(h,"open:")+" ",high:f(h,"high:")+" ",low:f(h,"low:")+" ",close:f(h,"close:")+" "}}),v}function t(h,s,o){var y=o._minDiff;if(!y){var d=h._fullData,p=[];y=1/0;var c;for(c=0;c<d.length;c++){var m=d[c];if(m.type==="ohlc"&&m.visible===!0&&m.xaxis===s._id){p.push(m);var l=s.makeCalcdata(m,"x");m._origX=l;var x=T(o,s,"x",l).vals;m._xcalc=x;var u=w.distinctVals(x).minDiff;u&&isFinite(u)&&(y=Math.min(y,u))}}for(y===1/0&&(y=1),c=0;c<p.length;c++)p[c]._minDiff=y}return y*o.tickwidth}U.exports={calc:a,calcCommon:r}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566}],883:[function(i,U,V){var w=i("../../lib"),f=i("./ohlc_defaults"),M=i("../scatter/period_defaults"),T=i("./attributes");U.exports=function(n,r,t,h){function s(y,d){return w.coerce(n,r,T,y,d)}var o=f(n,r,s,h);if(!o){r.visible=!1;return}M(n,r,h,s,{x:!0}),s("xhoverformat"),s("yhoverformat"),s("line.width"),s("line.dash"),e(n,r,s,"increasing"),e(n,r,s,"decreasing"),s("text"),s("hovertext"),s("tickwidth"),h._requestRangeslider[r.xaxis]=!0};function e(a,n,r,t){r(t+".line.color"),r(t+".line.width",n.line.width),r(t+".line.dash",n.line.dash)}},{"../../lib":515,"../scatter/period_defaults":956,"./attributes":881,"./ohlc_defaults":886}],884:[function(i,U,V){var w=i("../../plots/cartesian/axes"),f=i("../../lib"),M=i("../../components/fx"),T=i("../../components/color"),e=i("../../lib").fillText,a=i("../../constants/delta.js"),n={increasing:a.INCREASING.SYMBOL,decreasing:a.DECREASING.SYMBOL};function r(o,y,d,p){var c=o.cd,m=c[0].trace;return m.hoverlabel.split?h(o,y,d,p):s(o,y,d,p)}function t(o,y,d,p){var c=o.cd,m=o.xa,l=c[0].trace,x=c[0].t,u=l.type,A=u==="ohlc"?"l":"min",_=u==="ohlc"?"h":"max",g,b,v=x.bPos||0,k=function(Q){return Q.pos+v-y},S=x.bdPos||x.tickLen,E=x.wHover,C=Math.min(1,S/Math.abs(m.r2c(m.range[1])-m.r2c(m.range[0])));g=o.maxHoverDistance-C,b=o.maxSpikeDistance-C;function F(Q){var X=k(Q);return M.inbox(X-E,X+E,g)}function I(Q){var X=Q[A],j=Q[_];return X===j||M.inbox(X-d,j-d,g)}function D(Q){return(F(Q)+I(Q))/2}var R=M.getDistanceFunction(p,F,I,D);if(M.getClosest(c,R,o),o.index===!1)return null;var O=c[o.index];if(O.empty)return null;var z=O.dir,B=l[z],G=B.line.color;return T.opacity(G)&&B.line.width?o.color=G:o.color=B.fillcolor,o.x0=m.c2p(O.pos+v-S,!0),o.x1=m.c2p(O.pos+v+S,!0),o.xLabelVal=O.orig_p!==void 0?O.orig_p:O.pos,o.spikeDistance=D(O)*b/g,o.xSpike=m.c2p(O.pos,!0),o}function h(o,y,d,p){var c=o.cd,m=o.ya,l=c[0].trace,x=c[0].t,u=[],A=t(o,y,d,p);if(!A)return[];var _=A.index,g=c[_],b=g.hi||l.hoverinfo,v=b.split("+"),k=b==="all",S=k||v.indexOf("y")!==-1;if(!S)return[];for(var E=["high","open","close","low"],C={},F=0;F<E.length;F++){var I=E[F],D=l[I][A.index],R=m.c2p(D,!0),O;D in C?(O=C[D],O.yLabel+="<br>"+x.labels[I]+w.hoverLabelText(m,D,l.yhoverformat)):(O=f.extendFlat({},A),O.y0=O.y1=R,O.yLabelVal=D,O.yLabel=x.labels[I]+w.hoverLabelText(m,D,l.yhoverformat),O.name="",u.push(O),C[D]=O)}return u}function s(o,y,d,p){var c=o.cd,m=o.ya,l=c[0].trace,x=c[0].t,u=t(o,y,d,p);if(!u)return[];var A=u.index,_=c[A],g=u.index=_.i,b=_.dir;function v(D){return x.labels[D]+w.hoverLabelText(m,l[D][g],l.yhoverformat)}var k=_.hi||l.hoverinfo,S=k.split("+"),E=k==="all",C=E||S.indexOf("y")!==-1,F=E||S.indexOf("text")!==-1,I=C?[v("open"),v("high"),v("low"),v("close")+"  "+n[b]]:[];return F&&e(_,l,I),u.extraText=I.join("<br>"),u.y0=u.y1=m.c2p(_.yc,!0),[u]}U.exports={hoverPoints:r,hoverSplit:h,hoverOnPoints:s}},{"../../components/color":367,"../../components/fx":407,"../../constants/delta.js":485,"../../lib":515,"../../plots/cartesian/axes":566}],885:[function(i,U,V){U.exports={moduleType:"trace",name:"ohlc",basePlotModule:i("../../plots/cartesian"),categories:["cartesian","svg","showLegend"],meta:{},attributes:i("./attributes"),supplyDefaults:i("./defaults"),calc:i("./calc").calc,plot:i("./plot"),style:i("./style"),hoverPoints:i("./hover").hoverPoints,selectPoints:i("./select")}},{"../../plots/cartesian":578,"./attributes":881,"./calc":882,"./defaults":883,"./hover":884,"./plot":887,"./select":888,"./style":889}],886:[function(i,U,V){var w=i("../../registry"),f=i("../../lib");U.exports=function(T,e,a,n){var r=a("x"),t=a("open"),h=a("high"),s=a("low"),o=a("close");a("hoverlabel.split");var y=w.getComponentMethod("calendars","handleTraceDefaults");if(y(T,e,["x"],n),!!(t&&h&&s&&o)){var d=Math.min(t.length,h.length,s.length,o.length);return r&&(d=Math.min(d,f.minRowLength(r))),e._length=d,d}}},{"../../lib":515,"../../registry":647}],887:[function(i,U,V){var w=i("@plotly/d3"),f=i("../../lib");U.exports=function(T,e,a,n){var r=e.yaxis,t=e.xaxis,h=!!t.rangebreaks;f.makeTraceGroups(n,a,"trace ohlc").each(function(s){var o=w.select(this),y=s[0],d=y.t,p=y.trace;if(p.visible!==!0||d.empty){o.remove();return}var c=d.tickLen,m=o.selectAll("path").data(f.identity);m.enter().append("path"),m.exit().remove(),m.attr("d",function(l){if(l.empty)return"M0,0Z";var x=t.c2p(l.pos-c,!0),u=t.c2p(l.pos+c,!0),A=h?(x+u)/2:t.c2p(l.pos,!0),_=r.c2p(l.o,!0),g=r.c2p(l.h,!0),b=r.c2p(l.l,!0),v=r.c2p(l.c,!0);return"M"+x+","+_+"H"+A+"M"+A+","+g+"V"+b+"M"+u+","+v+"H"+A})})}},{"../../lib":515,"@plotly/d3":58}],888:[function(i,U,V){U.exports=function(f,M){var T=f.cd,e=f.xaxis,a=f.yaxis,n=[],r,t=T[0].t.bPos||0;if(M===!1)for(r=0;r<T.length;r++)T[r].selected=0;else for(r=0;r<T.length;r++){var h=T[r];M.contains([e.c2p(h.pos+t),a.c2p(h.yc)],null,h.i,f)?(n.push({pointNumber:h.i,x:e.c2d(h.pos),y:a.c2d(h.yc)}),h.selected=1):h.selected=0}return n}},{}],889:[function(i,U,V){var w=i("@plotly/d3"),f=i("../../components/drawing"),M=i("../../components/color");U.exports=function(e,a,n){var r=n||w.select(e).selectAll("g.ohlclayer").selectAll("g.trace");r.style("opacity",function(t){return t[0].trace.opacity}),r.each(function(t){var h=t[0].trace;w.select(this).selectAll("path").each(function(s){if(!s.empty){var o=h[s.dir].line;w.select(this).style("fill","none").call(M.stroke,o.color).call(f.dashLine,o.dash,o.width).style("opacity",h.selectedpoints&&!s.selected?.3:1)}})})}},{"../../components/color":367,"../../components/drawing":389,"@plotly/d3":58}],890:[function(i,U,V){var w=i("../../lib/extend").extendFlat,f=i("../../plots/attributes"),M=i("../../plots/font_attributes"),T=i("../../components/colorscale/attributes"),e=i("../../plots/template_attributes").hovertemplateAttrs,a=i("../../plots/domain").attributes,n=w({editType:"calc"},T("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot"},hovertemplate:e({editType:"plot",arrayOk:!1},{keys:["count","probability"]})});U.exports={domain:a({name:"parcats",trace:!0,editType:"calc"}),hoverinfo:w({},f.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot"},hovertemplate:e({editType:"plot",arrayOk:!1},{keys:["count","probability","category","categorycount","colorcount","bandcolorcount"]}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot"},bundlecolors:{valType:"boolean",dflt:!0,editType:"plot"},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot"},labelfont:M({editType:"calc"}),tickfont:M({editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},values:{valType:"data_array",dflt:[],editType:"calc"},displayindex:{valType:"integer",editType:"calc"},editType:"calc",visible:{valType:"boolean",dflt:!0,editType:"calc"}},line:n,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,editType:"calc"},customdata:void 0,hoverlabel:void 0,ids:void 0,legendgroup:void 0,legendrank:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0}},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/domain":593,"../../plots/font_attributes":594,"../../plots/template_attributes":642}],891:[function(i,U,V){var w=i("../../plots/get_data").getModuleCalcData,f=i("./plot"),M="parcats";V.name=M,V.plot=function(T,e,a,n){var r=w(T.calcdata,M);if(r.length){var t=r[0];f(T,t,a,n)}},V.clean=function(T,e,a,n){var r=n._has&&n._has("parcats"),t=e._has&&e._has("parcats");r&&!t&&n._paperdiv.selectAll(".parcats").remove()}},{"../../plots/get_data":602,"./plot":896}],892:[function(i,U,V){var w=i("../../lib/gup").wrap,f=i("../../components/colorscale/helpers").hasColorscale,M=i("../../components/colorscale/calc"),T=i("../../lib/filter_unique.js"),e=i("../../components/drawing"),a=i("../../lib"),n=i("fast-isnumeric");U.exports=function(x,u){var A=a.filterVisible(u.dimensions);if(A.length===0)return[];var _=A.map(function(K){var te;if(K.categoryorder==="trace")te=null;else if(K.categoryorder==="array")te=K.categoryarray;else{te=T(K.values);for(var Y=!0,H=0;H<te.length;H++)if(!n(te[H])){Y=!1;break}te.sort(Y?a.sorterAsc:void 0),K.categoryorder==="category descending"&&(te=te.reverse())}return d(K.values,te)}),g,b,v;a.isArrayOrTypedArray(u.counts)?g=u.counts:g=[u.counts],p(A),A.forEach(function(K,te){c(K,_[te])});var k=u.line,S;k?(f(u,"line")&&M(x,u,{vals:u.line.color,containerStr:"line",cLetter:"c"}),S=e.tryColorscale(k)):S=a.identity;function E(K){var te,Y;return a.isArrayOrTypedArray(k.color)?(te=k.color[K%k.color.length],Y=te):te=k.color,{color:S(te),rawColor:Y}}var C=A[0].values.length,F={},I=_.map(function(K){return K.inds});v=0;var D,R;for(D=0;D<C;D++){var O=[];for(R=0;R<I.length;R++)O.push(I[R][D]);b=g[D%g.length],v+=b;var z=E(D),B=O+"-"+z.rawColor;F[B]===void 0&&(F[B]=o(O,z.color,z.rawColor)),y(F[B],D,b)}var G=A.map(function(K,te){return t(te,K._index,K._displayindex,K.label,v)});for(D=0;D<C;D++)for(b=g[D%g.length],R=0;R<G.length;R++){var Q=G[R].containerInd,X=_[R].inds[D],j=G[R].categories;if(j[X]===void 0){var re=u.dimensions[Q]._categoryarray[X],ue=u.dimensions[Q]._ticktext[X];j[X]=h(R,X,re,ue)}s(j[X],D,b)}return w(r(G,F,v))};function r(l,x,u){var A=l.map(function(_){return _.categories.length}).reduce(function(_,g){return Math.max(_,g)});return{dimensions:l,paths:x,trace:void 0,maxCats:A,count:u}}function t(l,x,u,A,_){return{dimensionInd:l,containerInd:x,displayInd:u,dimensionLabel:A,count:_,categories:[],dragX:null}}function h(l,x,u,A){return{dimensionInd:l,categoryInd:x,categoryValue:u,displayInd:x,categoryLabel:A,valueInds:[],count:0,dragY:null}}function s(l,x,u){l.valueInds.push(x),l.count+=u}function o(l,x,u){return{categoryInds:l,color:x,rawColor:u,valueInds:[],count:0}}function y(l,x,u){l.valueInds.push(x),l.count+=u}function d(l,x){x==null?x=[]:x=x.map(function(S){return S});var u={},A={},_=[];x.forEach(function(S,E){u[S]=0,A[S]=E});for(var g=0;g<l.length;g++){var b=l[g],v;u[b]===void 0?(u[b]=1,v=x.push(b)-1,A[b]=v):(u[b]++,v=A[b]),_.push(v)}var k=x.map(function(S){return u[S]});return{uniqueValues:x,uniqueCounts:k,inds:_}}function p(l){var x=l.map(function(A){return A.displayindex}),u;if(m(x))for(u=0;u<l.length;u++)l[u]._displayindex=l[u].displayindex;else for(u=0;u<l.length;u++)l[u]._displayindex=u}function c(l,x){l._categoryarray=x.uniqueValues,l.ticktext===null||l.ticktext===void 0?l._ticktext=[]:l._ticktext=l.ticktext.slice();for(var u=l._ticktext.length;u<x.uniqueValues.length;u++)l._ticktext.push(x.uniqueValues[u])}function m(l){for(var x=new Array(l.length),u=0;u<l.length;u++){if(l[u]<0||l[u]>=l.length||x[l[u]]!==void 0)return!1;x[l[u]]=!0}return!0}},{"../../components/colorscale/calc":375,"../../components/colorscale/helpers":378,"../../components/drawing":389,"../../lib":515,"../../lib/filter_unique.js":506,"../../lib/gup":512,"fast-isnumeric":190}],893:[function(i,U,V){var w=i("../../lib"),f=i("../../components/colorscale/helpers").hasColorscale,M=i("../../components/colorscale/defaults"),T=i("../../plots/domain").defaults,e=i("../../plots/array_container_defaults"),a=i("./attributes"),n=i("../parcoords/merge_length");function r(h,s,o,y,d){d("line.shape"),d("line.hovertemplate");var p=d("line.color",y.colorway[0]);if(f(h,"line")&&w.isArrayOrTypedArray(p)){if(p.length)return d("line.colorscale"),M(h,s,y,d,{prefix:"line.",cLetter:"c"}),p.length;s.line.color=o}return 1/0}function t(h,s){function o(x,u){return w.coerce(h,s,a.dimensions,x,u)}var y=o("values"),d=o("visible");if(y&&y.length||(d=s.visible=!1),d){o("label"),o("displayindex",s._index);var p=h.categoryarray,c=Array.isArray(p)&&p.length>0,m;c&&(m="array");var l=o("categoryorder",m);l==="array"?(o("categoryarray"),o("ticktext")):(delete h.categoryarray,delete h.ticktext),!c&&l==="array"&&(s.categoryorder="trace")}}U.exports=function(s,o,y,d){function p(u,A){return w.coerce(s,o,a,u,A)}var c=e(s,o,{name:"dimensions",handleItemDefaults:t}),m=r(s,o,y,d,p);T(o,d,p),(!Array.isArray(c)||!c.length)&&(o.visible=!1),n(o,c,"values",m),p("hoveron"),p("hovertemplate"),p("arrangement"),p("bundlecolors"),p("sortpaths"),p("counts");var l={family:d.font.family,size:Math.round(d.font.size),color:d.font.color};w.coerceFont(p,"labelfont",l);var x={family:d.font.family,size:Math.round(d.font.size/1.2),color:d.font.color};w.coerceFont(p,"tickfont",x)}},{"../../components/colorscale/defaults":377,"../../components/colorscale/helpers":378,"../../lib":515,"../../plots/array_container_defaults":561,"../../plots/domain":593,"../parcoords/merge_length":907,"./attributes":890}],894:[function(i,U,V){U.exports={attributes:i("./attributes"),supplyDefaults:i("./defaults"),calc:i("./calc"),plot:i("./plot"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcats",basePlotModule:i("./base_plot"),categories:["noOpacity"],meta:{}}},{"./attributes":890,"./base_plot":891,"./calc":892,"./defaults":893,"./plot":896}],895:[function(i,U,V){var w=i("@plotly/d3"),f=i("d3-interpolate").interpolateNumber,M=i("../../plot_api/plot_api"),T=i("../../components/fx"),e=i("../../lib"),a=e.strTranslate,n=i("../../components/drawing"),r=i("tinycolor2"),t=i("../../lib/svg_text_utils");function h(H,ee,ne,Z){var q=ee._context.staticPlot,ie=H.map(re.bind(0,ee,ne)),se=Z.selectAll("g.parcatslayer").data([null]);se.enter().append("g").attr("class","parcatslayer").style("pointer-events",q?"none":"all");var ae=se.selectAll("g.trace.parcats").data(ie,s),oe=ae.enter().append("g").attr("class","trace parcats");ae.attr("transform",function(Ce){return a(Ce.x,Ce.y)}),oe.append("g").attr("class","paths");var be=ae.select("g.paths"),ce=be.selectAll("path.path").data(function(Ce){return Ce.paths},s);ce.attr("fill",function(Ce){return Ce.model.color});var de=ce.enter().append("path").attr("class","path").attr("stroke-opacity",0).attr("fill",function(Ce){return Ce.model.color}).attr("fill-opacity",0);x(de),ce.attr("d",function(Ce){return Ce.svgD}),de.empty()||ce.sort(y),ce.exit().remove(),ce.on("mouseover",d).on("mouseout",p).on("click",l),oe.append("g").attr("class","dimensions");var ye=ae.select("g.dimensions"),ge=ye.selectAll("g.dimension").data(function(Ce){return Ce.dimensions},s);ge.enter().append("g").attr("class","dimension"),ge.attr("transform",function(Ce){return a(Ce.x,0)}),ge.exit().remove();var me=ge.selectAll("g.category").data(function(Ce){return Ce.categories},s),Se=me.enter().append("g").attr("class","category");me.attr("transform",function(Ce){return a(0,Ce.y)}),Se.append("rect").attr("class","catrect").attr("pointer-events","none"),me.select("rect.catrect").attr("fill","none").attr("width",function(Ce){return Ce.width}).attr("height",function(Ce){return Ce.height}),_(Se);var Le=me.selectAll("rect.bandrect").data(function(Ce){return Ce.bands},s);Le.each(function(){e.raiseToTop(this)}),Le.attr("fill",function(Ce){return Ce.color});var Oe=Le.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(Ce){return Ce.color}).attr("fill-opacity",0);Le.attr("fill",function(Ce){return Ce.color}).attr("width",function(Ce){return Ce.width}).attr("height",function(Ce){return Ce.height}).attr("y",function(Ce){return Ce.y}).attr("cursor",function(Ce){return Ce.parcatsViewModel.arrangement==="fixed"?"default":Ce.parcatsViewModel.arrangement==="perpendicular"?"ns-resize":"move"}),b(Oe),Le.exit().remove(),Se.append("text").attr("class","catlabel").attr("pointer-events","none");var we=ee._fullLayout.paper_bgcolor;me.select("text.catlabel").attr("text-anchor",function(Ce){return o(Ce)?"start":"end"}).attr("alignment-baseline","middle").style("text-shadow",t.makeTextShadow(we)).style("fill","rgb(0, 0, 0)").attr("x",function(Ce){return o(Ce)?Ce.width+5:-5}).attr("y",function(Ce){return Ce.height/2}).text(function(Ce){return Ce.model.categoryLabel}).each(function(Ce){n.font(w.select(this),Ce.parcatsViewModel.categorylabelfont),t.convertToTspans(w.select(this),ee)}),Se.append("text").attr("class","dimlabel"),me.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",function(Ce){return Ce.parcatsViewModel.arrangement==="fixed"?"default":"ew-resize"}).attr("x",function(Ce){return Ce.width/2}).attr("y",-5).text(function(Ce,Ke){return Ke===0?Ce.parcatsViewModel.model.dimensions[Ce.model.dimensionInd].dimensionLabel:null}).each(function(Ce){n.font(w.select(this),Ce.parcatsViewModel.labelfont)}),me.selectAll("rect.bandrect").on("mouseover",R).on("mouseout",O),me.exit().remove(),ge.call(w.behavior.drag().origin(function(Ce){return{x:Ce.x,y:0}}).on("dragstart",z).on("drag",B).on("dragend",G)),ae.each(function(Ce){Ce.traceSelection=w.select(this),Ce.pathSelection=w.select(this).selectAll("g.paths").selectAll("path.path"),Ce.dimensionSelection=w.select(this).selectAll("g.dimensions").selectAll("g.dimension")}),ae.exit().remove()}U.exports=function(H,ee,ne,Z){h(ne,H,Z,ee)};function s(H){return H.key}function o(H){var ee=H.parcatsViewModel.dimensions.length,ne=H.parcatsViewModel.dimensions[ee-1].model.dimensionInd;return H.model.dimensionInd===ne}function y(H,ee){return H.model.rawColor>ee.model.rawColor?1:H.model.rawColor<ee.model.rawColor?-1:0}function d(H){if(!H.parcatsViewModel.dragDimension&&H.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){e.raiseToTop(this),u(w.select(this));var ee=c(H),ne=m(H);if(H.parcatsViewModel.graphDiv.emit("plotly_hover",{points:ee,event:w.event,constraints:ne}),H.parcatsViewModel.hoverinfoItems.indexOf("none")===-1){var Z=w.mouse(this)[0],q=H.parcatsViewModel.graphDiv,ie=H.parcatsViewModel.trace,se=q._fullLayout,ae=se._paperdiv.node().getBoundingClientRect(),oe=H.parcatsViewModel.graphDiv.getBoundingClientRect(),be,ce,de;for(de=0;de<H.leftXs.length-1;de++)if(H.leftXs[de]+H.dimWidths[de]-2<=Z&&Z<=H.leftXs[de+1]+2){var ye=H.parcatsViewModel.dimensions[de],ge=H.parcatsViewModel.dimensions[de+1];be=(ye.x+ye.width+ge.x)/2,ce=(H.topYs[de]+H.topYs[de+1]+H.height)/2;break}var me=H.parcatsViewModel.x+be,Se=H.parcatsViewModel.y+ce,Le=r.mostReadable(H.model.color,["black","white"]),Oe=H.model.count,we=Oe/H.parcatsViewModel.model.count,Ce={countLabel:Oe,probabilityLabel:we.toFixed(3)},Ke=[];H.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&Ke.push(["Count:",Ce.countLabel].join(" ")),H.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&Ke.push(["P:",Ce.probabilityLabel].join(" "));var Ye=Ke.join("<br>"),Fe=w.mouse(q)[0];T.loneHover({trace:ie,x:me-ae.left+oe.left,y:Se-ae.top+oe.top,text:Ye,color:H.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:Le,idealAlign:Fe<me?"right":"left",hovertemplate:(ie.line||{}).hovertemplate,hovertemplateLabels:Ce,eventData:[{data:ie._input,fullData:ie,count:Oe,probability:we}]},{container:se._hoverlayer.node(),outerContainer:se._paper.node(),gd:q})}}}function p(H){if(!H.parcatsViewModel.dragDimension&&(x(w.select(this)),T.loneUnhover(H.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),H.parcatsViewModel.pathSelection.sort(y),H.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1)){var ee=c(H),ne=m(H);H.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:ee,event:w.event,constraints:ne})}}function c(H){for(var ee=[],ne=Q(H.parcatsViewModel),Z=0;Z<H.model.valueInds.length;Z++){var q=H.model.valueInds[Z];ee.push({curveNumber:ne,pointNumber:q})}return ee}function m(H){for(var ee={},ne=H.parcatsViewModel.model.dimensions,Z=0;Z<ne.length;Z++){var q=ne[Z],ie=q.categories[H.model.categoryInds[Z]];ee[q.containerInd]=ie.categoryValue}return H.model.rawColor!==void 0&&(ee.color=H.model.rawColor),ee}function l(H){if(H.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){var ee=c(H),ne=m(H);H.parcatsViewModel.graphDiv.emit("plotly_click",{points:ee,event:w.event,constraints:ne})}}function x(H){H.attr("fill",function(ee){return ee.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function u(H){H.attr("fill-opacity",.8).attr("stroke",function(ee){return r.mostReadable(ee.model.color,["black","white"])}).attr("stroke-width",.3)}function A(H){H.select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5)}function _(H){H.select("rect.catrect").attr("stroke","black").attr("stroke-width",1).attr("stroke-opacity",1)}function g(H){H.attr("stroke","black").attr("stroke-width",1.5)}function b(H){H.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function v(H){var ee=H.parcatsViewModel.pathSelection,ne=H.categoryViewModel.model.dimensionInd,Z=H.categoryViewModel.model.categoryInd;return ee.filter(function(q){return q.model.categoryInds[ne]===Z&&q.model.color===H.color})}function k(H){var ee=w.select(H.parentNode).selectAll("rect.bandrect");ee.each(function(ne){var Z=v(ne);u(Z),Z.each(function(){e.raiseToTop(this)})}),A(w.select(H.parentNode))}function S(H){var ee=w.select(H).datum(),ne=v(ee);u(ne),ne.each(function(){e.raiseToTop(this)}),w.select(H.parentNode).selectAll("rect.bandrect").filter(function(Z){return Z.color===ee.color}).each(function(){e.raiseToTop(this),g(w.select(this))})}function E(H,ee,ne){var Z=w.select(H).datum(),q=Z.categoryViewModel.model,ie=Z.parcatsViewModel.graphDiv,se=w.select(H.parentNode).selectAll("rect.bandrect"),ae=[];se.each(function(be){var ce=v(be);ce.each(function(de){Array.prototype.push.apply(ae,c(de))})});var oe={};oe[q.dimensionInd]=q.categoryValue,ie.emit(ee,{points:ae,event:ne,constraints:oe})}function C(H,ee,ne){var Z=w.select(H).datum(),q=Z.categoryViewModel.model,ie=Z.parcatsViewModel.graphDiv,se=v(Z),ae=[];se.each(function(be){Array.prototype.push.apply(ae,c(be))});var oe={};oe[q.dimensionInd]=q.categoryValue,Z.rawColor!==void 0&&(oe.color=Z.rawColor),ie.emit(ee,{points:ae,event:ne,constraints:oe})}function F(H,ee,ne){H._fullLayout._calcInverseTransform(H);var Z=H._fullLayout._invScaleX,q=H._fullLayout._invScaleY,ie=w.select(ne.parentNode).select("rect.catrect"),se=ie.node().getBoundingClientRect(),ae=ie.datum(),oe=ae.parcatsViewModel,be=oe.model.dimensions[ae.model.dimensionInd],ce=oe.trace,de=se.top+se.height/2,ye,ge;oe.dimensions.length>1&&be.displayInd===oe.dimensions.length-1?(ye=se.left,ge="left"):(ye=se.left+se.width,ge="right");var me=ae.model.count,Se=ae.model.categoryLabel,Le=me/ae.parcatsViewModel.model.count,Oe={countLabel:me,categoryLabel:Se,probabilityLabel:Le.toFixed(3)},we=[];ae.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&we.push(["Count:",Oe.countLabel].join(" ")),ae.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&we.push(["P("+Oe.categoryLabel+"):",Oe.probabilityLabel].join(" "));var Ce=we.join("<br>");return{trace:ce,x:Z*(ye-ee.left),y:q*(de-ee.top),text:Ce,color:"lightgray",borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:ge,hovertemplate:ce.hovertemplate,hovertemplateLabels:Oe,eventData:[{data:ce._input,fullData:ce,count:me,category:Se,probability:Le}]}}function I(H,ee,ne){var Z=[];return w.select(ne.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){var q=this;Z.push(F(H,ee,q))}),Z}function D(H,ee,ne){H._fullLayout._calcInverseTransform(H);var Z=H._fullLayout._invScaleX,q=H._fullLayout._invScaleY,ie=ne.getBoundingClientRect(),se=w.select(ne).datum(),ae=se.categoryViewModel,oe=ae.parcatsViewModel,be=oe.model.dimensions[ae.model.dimensionInd],ce=oe.trace,de=ie.y+ie.height/2,ye,ge;oe.dimensions.length>1&&be.displayInd===oe.dimensions.length-1?(ye=ie.left,ge="left"):(ye=ie.left+ie.width,ge="right");var me=ae.model.categoryLabel,Se=se.parcatsViewModel.model.count,Le=0;se.categoryViewModel.bands.forEach(function(Nt){Nt.color===se.color&&(Le+=Nt.count)});var Oe=ae.model.count,we=0;oe.pathSelection.each(function(Nt){Nt.model.color===se.color&&(we+=Nt.model.count)});var Ce=Le/Se,Ke=Le/we,Ye=Le/Oe,Fe={countLabel:Se,categoryLabel:me,probabilityLabel:Ce.toFixed(3)},Re=[];ae.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&Re.push(["Count:",Fe.countLabel].join(" ")),ae.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&(Re.push("P(color \u2229 "+me+"): "+Fe.probabilityLabel),Re.push("P("+me+" | color): "+Ke.toFixed(3)),Re.push("P(color | "+me+"): "+Ye.toFixed(3)));var je=Re.join("<br>"),xt=r.mostReadable(se.color,["black","white"]);return{trace:ce,x:Z*(ye-ee.left),y:q*(de-ee.top),text:je,color:se.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:xt,fontSize:10,idealAlign:ge,hovertemplate:ce.hovertemplate,hovertemplateLabels:Fe,eventData:[{data:ce._input,fullData:ce,category:me,count:Se,probability:Ce,categorycount:Oe,colorcount:we,bandcolorcount:Le}]}}function R(H){if(!H.parcatsViewModel.dragDimension&&H.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){var ee=w.mouse(this)[1];if(ee<-1)return;var ne=H.parcatsViewModel.graphDiv,Z=ne._fullLayout,q=Z._paperdiv.node().getBoundingClientRect(),ie=H.parcatsViewModel.hoveron,se=this;if(ie==="color"?(S(se),C(se,"plotly_hover",w.event)):(k(se),E(se,"plotly_hover",w.event)),H.parcatsViewModel.hoverinfoItems.indexOf("none")===-1){var ae;ie==="category"?ae=F(ne,q,se):ie==="color"?ae=D(ne,q,se):ie==="dimension"&&(ae=I(ne,q,se)),ae&&T.loneHover(ae,{container:Z._hoverlayer.node(),outerContainer:Z._paper.node(),gd:ne})}}}function O(H){var ee=H.parcatsViewModel;if(!ee.dragDimension&&(x(ee.pathSelection),_(ee.dimensionSelection.selectAll("g.category")),b(ee.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),T.loneUnhover(ee.graphDiv._fullLayout._hoverlayer.node()),ee.pathSelection.sort(y),ee.hoverinfoItems.indexOf("skip")===-1)){var ne=H.parcatsViewModel.hoveron,Z=this;ne==="color"?C(Z,"plotly_unhover",w.event):E(Z,"plotly_unhover",w.event)}}function z(H){H.parcatsViewModel.arrangement!=="fixed"&&(H.dragDimensionDisplayInd=H.model.displayInd,H.initialDragDimensionDisplayInds=H.parcatsViewModel.model.dimensions.map(function(ee){return ee.displayInd}),H.dragHasMoved=!1,H.dragCategoryDisplayInd=null,w.select(this).selectAll("g.category").select("rect.catrect").each(function(ee){var ne=w.mouse(this)[0],Z=w.mouse(this)[1];-2<=ne&&ne<=ee.width+2&&-2<=Z&&Z<=ee.height+2&&(H.dragCategoryDisplayInd=ee.model.displayInd,H.initialDragCategoryDisplayInds=H.model.categories.map(function(q){return q.displayInd}),ee.model.dragY=ee.y,e.raiseToTop(this.parentNode),w.select(this.parentNode).selectAll("rect.bandrect").each(function(q){q.y<Z&&Z<=q.y+q.height&&(H.potentialClickBand=this)}))}),H.parcatsViewModel.dragDimension=H,T.loneUnhover(H.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function B(H){if(H.parcatsViewModel.arrangement!=="fixed"&&(H.dragHasMoved=!0,H.dragDimensionDisplayInd!==null)){var ee=H.dragDimensionDisplayInd,ne=ee-1,Z=ee+1,q=H.parcatsViewModel.dimensions[ee];if(H.dragCategoryDisplayInd!==null){var ie=q.categories[H.dragCategoryDisplayInd];ie.model.dragY+=w.event.dy;var se=ie.model.dragY,ae=ie.model.displayInd,oe=q.categories,be=oe[ae-1],ce=oe[ae+1];be!==void 0&&se<be.y+be.height/2&&(ie.model.displayInd=be.model.displayInd,be.model.displayInd=ae),ce!==void 0&&se+ie.height>ce.y+ce.height/2&&(ie.model.displayInd=ce.model.displayInd,ce.model.displayInd=ae),H.dragCategoryDisplayInd=ie.model.displayInd}if(H.dragCategoryDisplayInd===null||H.parcatsViewModel.arrangement==="freeform"){q.model.dragX=w.event.x;var de=H.parcatsViewModel.dimensions[ne],ye=H.parcatsViewModel.dimensions[Z];de!==void 0&&q.model.dragX<de.x+de.width&&(q.model.displayInd=de.model.displayInd,de.model.displayInd=ee),ye!==void 0&&q.model.dragX+q.width>ye.x&&(q.model.displayInd=ye.model.displayInd,ye.model.displayInd=H.dragDimensionDisplayInd),H.dragDimensionDisplayInd=q.model.displayInd}te(H.parcatsViewModel),K(H.parcatsViewModel),j(H.parcatsViewModel),X(H.parcatsViewModel)}}function G(H){if(H.parcatsViewModel.arrangement!=="fixed"&&H.dragDimensionDisplayInd!==null){w.select(this).selectAll("text").attr("font-weight","normal");var ee={},ne=Q(H.parcatsViewModel),Z=H.parcatsViewModel.model.dimensions.map(function(ye){return ye.displayInd}),q=H.initialDragDimensionDisplayInds.some(function(ye,ge){return ye!==Z[ge]});q&&Z.forEach(function(ye,ge){var me=H.parcatsViewModel.model.dimensions[ge].containerInd;ee["dimensions["+me+"].displayindex"]=ye});var ie=!1;if(H.dragCategoryDisplayInd!==null){var se=H.model.categories.map(function(ye){return ye.displayInd});if(ie=H.initialDragCategoryDisplayInds.some(function(ye,ge){return ye!==se[ge]}),ie){var ae=H.model.categories.slice().sort(function(ye,ge){return ye.displayInd-ge.displayInd}),oe=ae.map(function(ye){return ye.categoryValue}),be=ae.map(function(ye){return ye.categoryLabel});ee["dimensions["+H.model.containerInd+"].categoryarray"]=[oe],ee["dimensions["+H.model.containerInd+"].ticktext"]=[be],ee["dimensions["+H.model.containerInd+"].categoryorder"]="array"}}if(H.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1&&!H.dragHasMoved&&H.potentialClickBand&&(H.parcatsViewModel.hoveron==="color"?C(H.potentialClickBand,"plotly_click",w.event.sourceEvent):E(H.potentialClickBand,"plotly_click",w.event.sourceEvent)),H.model.dragX=null,H.dragCategoryDisplayInd!==null){var ce=H.parcatsViewModel.dimensions[H.dragDimensionDisplayInd].categories[H.dragCategoryDisplayInd];ce.model.dragY=null,H.dragCategoryDisplayInd=null}H.dragDimensionDisplayInd=null,H.parcatsViewModel.dragDimension=null,H.dragHasMoved=null,H.potentialClickBand=null,te(H.parcatsViewModel),K(H.parcatsViewModel);var de=w.transition().duration(300).ease("cubic-in-out");de.each(function(){j(H.parcatsViewModel,!0),X(H.parcatsViewModel,!0)}).each("end",function(){(q||ie)&&M.restyle(H.parcatsViewModel.graphDiv,ee,[ne])})}}function Q(H){for(var ee,ne=H.graphDiv._fullData,Z=0;Z<ne.length;Z++)if(H.key===ne[Z].uid){ee=Z;break}return ee}function X(H,ee){ee===void 0&&(ee=!1);function ne(Z){return ee?Z.transition():Z}H.pathSelection.data(function(Z){return Z.paths},s),ne(H.pathSelection).attr("d",function(Z){return Z.svgD})}function j(H,ee){ee===void 0&&(ee=!1);function ne(oe){return ee?oe.transition():oe}H.dimensionSelection.data(function(oe){return oe.dimensions},s);var Z=H.dimensionSelection.selectAll("g.category").data(function(oe){return oe.categories},s);ne(H.dimensionSelection).attr("transform",function(oe){return a(oe.x,0)}),ne(Z).attr("transform",function(oe){return a(0,oe.y)});var q=Z.select(".dimlabel");q.text(function(oe,be){return be===0?oe.parcatsViewModel.model.dimensions[oe.model.dimensionInd].dimensionLabel:null});var ie=Z.select(".catlabel");ie.attr("text-anchor",function(oe){return o(oe)?"start":"end"}).attr("x",function(oe){return o(oe)?oe.width+5:-5}).each(function(oe){var be,ce;o(oe)?(be=oe.width+5,ce="start"):(be=-5,ce="end"),w.select(this).selectAll("tspan").attr("x",be).attr("text-anchor",ce)});var se=Z.selectAll("rect.bandrect").data(function(oe){return oe.bands},s),ae=se.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",function(oe){return oe.color}).attr("fill-opacity",0);se.attr("fill",function(oe){return oe.color}).attr("width",function(oe){return oe.width}).attr("height",function(oe){return oe.height}).attr("y",function(oe){return oe.y}),b(ae),se.each(function(){e.raiseToTop(this)}),se.exit().remove()}function re(H,ee,ne){var Z=ne[0],q=ee.margin||{l:80,r:80,t:100,b:80},ie=Z.trace,se=ie.domain,ae=ee.width,oe=ee.height,be=Math.floor(ae*(se.x[1]-se.x[0])),ce=Math.floor(oe*(se.y[1]-se.y[0])),de=se.x[0]*ae+q.l,ye=ee.height-se.y[1]*ee.height+q.t,ge=ie.line.shape,me;ie.hoverinfo==="all"?me=["count","probability"]:me=(ie.hoverinfo||"").split("+");var Se={trace:ie,key:ie.uid,model:Z,x:de,y:ye,width:be,height:ce,hoveron:ie.hoveron,hoverinfoItems:me,arrangement:ie.arrangement,bundlecolors:ie.bundlecolors,sortpaths:ie.sortpaths,labelfont:ie.labelfont,categorylabelfont:ie.tickfont,pathShape:ge,dragDimension:null,margin:q,paths:[],dimensions:[],graphDiv:H,traceSelection:null,pathSelection:null,dimensionSelection:null};return Z.dimensions&&(te(Se),K(Se)),Se}function ue(H,ee,ne,Z,q){var ie=[],se=[],ae,oe;for(oe=0;oe<ne.length-1;oe++)ae=f(ne[oe]+H[oe],H[oe+1]),ie.push(ae(q)),se.push(ae(1-q));var be="M "+H[0]+","+ee[0];for(be+="l"+ne[0]+",0 ",oe=1;oe<ne.length;oe++)be+="C"+ie[oe-1]+","+ee[oe-1]+" "+se[oe-1]+","+ee[oe]+" "+H[oe]+","+ee[oe],be+="l"+ne[oe]+",0 ";for(be+="l0,"+Z+" ",be+="l -"+ne[ne.length-1]+",0 ",oe=ne.length-2;oe>=0;oe--)be+="C"+se[oe]+","+(ee[oe+1]+Z)+" "+ie[oe]+","+(ee[oe]+Z)+" "+(H[oe]+ne[oe])+","+(ee[oe]+Z),be+="l-"+ne[oe]+",0 ";return be+="Z",be}function K(H){var ee=H.dimensions,ne=H.model,Z=ee.map(function(Pt){return Pt.categories.map(function($t){return $t.y})}),q=H.model.dimensions.map(function(Pt){return Pt.categories.map(function($t){return $t.displayInd})}),ie=H.model.dimensions.map(function(Pt){return Pt.displayInd}),se=H.dimensions.map(function(Pt){return Pt.model.dimensionInd}),ae=ee.map(function(Pt){return Pt.x}),oe=ee.map(function(Pt){return Pt.width}),be=[];for(var ce in ne.paths)ne.paths.hasOwnProperty(ce)&&be.push(ne.paths[ce]);function de(Pt){var $t=Pt.categoryInds.map(function(Lt,We){return q[We][Lt]}),Ut=se.map(function(Lt){return $t[Lt]});return Ut}be.sort(function(Pt,$t){var Ut=de(Pt),Lt=de($t);return H.sortpaths==="backward"&&(Ut.reverse(),Lt.reverse()),Ut.push(Pt.valueInds[0]),Lt.push($t.valueInds[0]),H.bundlecolors&&(Ut.unshift(Pt.rawColor),Lt.unshift($t.rawColor)),Ut<Lt?-1:Ut>Lt?1:0});for(var ye=new Array(be.length),ge=ee[0].model.count,me=ee[0].categories.map(function(Pt){return Pt.height}).reduce(function(Pt,$t){return Pt+$t}),Se=0;Se<be.length;Se++){var Le=be[Se],Oe;ge>0?Oe=me*(Le.count/ge):Oe=0;for(var we=new Array(Z.length),Ce=0;Ce<Le.categoryInds.length;Ce++){var Ke=Le.categoryInds[Ce],Ye=q[Ce][Ke],Fe=ie[Ce];we[Fe]=Z[Fe][Ye],Z[Fe][Ye]+=Oe;var Re=H.dimensions[Fe].categories[Ye],je=Re.bands.length,xt=Re.bands[je-1];if(xt===void 0||Le.rawColor!==xt.rawColor){var Nt=xt===void 0?0:xt.y+xt.height;Re.bands.push({key:Nt,color:Le.color,rawColor:Le.rawColor,height:Oe,width:Re.width,count:Le.count,y:Nt,categoryViewModel:Re,parcatsViewModel:H})}else{var tr=Re.bands[je-1];tr.height+=Oe,tr.count+=Le.count}}var Ht;H.pathShape==="hspline"?Ht=ue(ae,we,oe,Oe,.5):Ht=ue(ae,we,oe,Oe,0),ye[Se]={key:Le.valueInds[0],model:Le,height:Oe,leftXs:ae,topYs:we,dimWidths:oe,svgD:Ht,parcatsViewModel:H}}H.paths=ye}function te(H){var ee=H.model.dimensions.map(function(se){return{displayInd:se.displayInd,dimensionInd:se.dimensionInd}});ee.sort(function(se,ae){return se.displayInd-ae.displayInd});var ne=[];for(var Z in ee){var q=ee[Z].dimensionInd,ie=H.model.dimensions[q];ne.push(Y(H,ie))}H.dimensions=ne}function Y(H,ee){var ne=40,Z=16,q=H.model.dimensions.length,ie=ee.displayInd,se,ae,oe;q>1?se=(H.width-2*ne-Z)/(q-1):se=0,ae=ne,oe=ae+se*ie;var be=[],ce=H.model.maxCats,de=ee.categories.length,ye=8,ge=ee.count,me=H.height-ye*(ce-1),Se,Le,Oe,we,Ce,Ke=(ce-de)*ye/2,Ye=ee.categories.map(function(Fe){return{displayInd:Fe.displayInd,categoryInd:Fe.categoryInd}});for(Ye.sort(function(Fe,Re){return Fe.displayInd-Re.displayInd}),Ce=0;Ce<de;Ce++)we=Ye[Ce].categoryInd,Le=ee.categories[we],ge>0?Se=Le.count/ge*me:Se=0,Oe={key:Le.valueInds[0],model:Le,width:Z,height:Se,y:Le.dragY!==null?Le.dragY:Ke,bands:[],parcatsViewModel:H},Ke=Ke+Se+ye,be.push(Oe);return{key:ee.dimensionInd,x:ee.dragX!==null?ee.dragX:oe,y:0,width:Z,model:ee,categories:be,parcatsViewModel:H,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,dragHasMoved:null,potentialClickBand:null}}},{"../../components/drawing":389,"../../components/fx":407,"../../lib":515,"../../lib/svg_text_utils":541,"../../plot_api/plot_api":552,"@plotly/d3":58,"d3-interpolate":116,tinycolor2:313}],896:[function(i,U,V){var w=i("./parcats");U.exports=function(M,T,e,a){var n=M._fullLayout,r=n._paper,t=n._size;w(M,r,T,{width:t.w,height:t.h,margin:{t:t.t,r:t.r,b:t.b,l:t.l}},e,a)}},{"./parcats":895}],897:[function(i,U,V){var w=i("../../components/colorscale/attributes"),f=i("../../plots/cartesian/layout_attributes"),M=i("../../plots/font_attributes"),T=i("../../plots/domain").attributes,e=i("../../lib/extend").extendFlat,a=i("../../plot_api/plot_template").templatedArray;U.exports={domain:T({name:"parcoords",trace:!0,editType:"plot"}),labelangle:{valType:"angle",dflt:0,editType:"plot"},labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},labelfont:M({editType:"plot"}),tickfont:M({editType:"plot"}),rangefont:M({editType:"plot"}),dimensions:a("dimension",{label:{valType:"string",editType:"plot"},tickvals:e({},f.tickvals,{editType:"plot"}),ticktext:e({},f.ticktext,{editType:"plot"}),tickformat:e({},f.tickformat,{editType:"plot"}),visible:{valType:"boolean",dflt:!0,editType:"plot"},range:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},multiselect:{valType:"boolean",dflt:!0,editType:"plot"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:e({editType:"calc"},w("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"})),unselected:{line:{color:{valType:"color",dflt:"#7f7f7f",editType:"plot"},opacity:{valType:"number",min:0,max:1,dflt:"auto",editType:"plot"},editType:"plot"},editType:"plot"}}},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plot_api/plot_template":555,"../../plots/cartesian/layout_attributes":579,"../../plots/domain":593,"../../plots/font_attributes":594}],898:[function(i,U,V){var w=i("./constants"),f=i("@plotly/d3"),M=i("../../lib/gup").keyFun,T=i("../../lib/gup").repeat,e=i("../../lib").sorterAsc,a=i("../../lib").strTranslate,n=w.bar.snapRatio;function r(G,Q){return G*(1-n)+Q*n}var t=w.bar.snapClose;function h(G,Q){return G*(1-t)+Q*t}function s(G,Q,X,j){if(o(X,j))return X;var re=G?-1:1,ue=0,K=Q.length-1;if(re<0){var te=ue;ue=K,K=te}for(var Y=Q[ue],H=Y,ee=ue;re*ee<re*K;ee+=re){var ne=ee+re,Z=Q[ne];if(re*X<re*h(Y,Z))return r(Y,H);if(re*X<re*Z||ne===K)return r(Z,Y);H=Y,Y=Z}}function o(G,Q){for(var X=0;X<Q.length;X++)if(G>=Q[X][0]&&G<=Q[X][1])return!0;return!1}function y(G){G.attr("x",-w.bar.captureWidth/2).attr("width",w.bar.captureWidth)}function d(G){G.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function p(G){if(!G.brush.filterSpecified)return"0,"+G.height;for(var Q=c(G.brush.filter.getConsolidated(),G.height),X=[0],j,re,ue,K=Q.length?Q[0][0]:null,te=0;te<Q.length;te++)j=Q[te],re=j[1]-j[0],X.push(K),X.push(re),ue=te+1,ue<Q.length&&(K=Q[ue][0]-j[1]);return X.push(G.height),X}function c(G,Q){return G.map(function(X){return X.map(function(j){return Math.max(0,j*Q)}).sort(e)})}function m(G,Q){var X=w.bar.handleHeight;if(!(Q>G[1]+X||Q<G[0]-X))return Q>=.9*G[1]+.1*G[0]?"n":Q<=.9*G[0]+.1*G[1]?"s":"ns"}function l(){f.select(document.body).style("cursor",null)}function x(G){G.attr("stroke-dasharray",p)}function u(G,Q){var X=f.select(G).selectAll(".highlight, .highlight-shadow"),j=Q?X.transition().duration(w.bar.snapDuration).each("end",Q):X;x(j)}function A(G,Q){var X=G.brush,j=X.filterSpecified,re=NaN,ue={},K;if(j){var te=G.height,Y=X.filter.getConsolidated(),H=c(Y,te),ee=NaN,ne=NaN,Z=NaN;for(K=0;K<=H.length;K++){var q=H[K];if(q&&q[0]<=Q&&Q<=q[1]){ee=K;break}else if(ne=K?K-1:NaN,q&&q[0]>Q){Z=K;break}}if(re=ee,isNaN(re)&&(isNaN(ne)||isNaN(Z)?re=isNaN(ne)?Z:ne:re=Q-H[ne][1]<H[Z][0]-Q?ne:Z),!isNaN(re)){var ie=H[re],se=m(ie,Q);se&&(ue.interval=Y[re],ue.intervalPix=ie,ue.region=se)}}if(G.ordinal&&!ue.region){var ae=G.unitTickvals,oe=G.unitToPaddedPx.invert(Q);for(K=0;K<ae.length;K++){var be=[ae[Math.max(K-1,0)]*.25+ae[K]*.75,ae[Math.min(K+1,ae.length-1)]*.25+ae[K]*.75];if(oe>=be[0]&&oe<=be[1]){ue.clickableOrdinalRange=be;break}}}return ue}function _(G,Q){f.event.sourceEvent.stopPropagation();var X=Q.height-f.mouse(G)[1]-2*w.verticalPadding,j=Q.unitToPaddedPx.invert(X),re=Q.brush,ue=A(Q,X),K=ue.interval,te=re.svgBrush;if(te.wasDragged=!1,te.grabbingBar=ue.region==="ns",te.grabbingBar){var Y=K.map(Q.unitToPaddedPx);te.grabPoint=X-Y[0]-w.verticalPadding,te.barLength=Y[1]-Y[0]}te.clickableOrdinalRange=ue.clickableOrdinalRange,te.stayingIntervals=Q.multiselect&&re.filterSpecified?re.filter.getConsolidated():[],K&&(te.stayingIntervals=te.stayingIntervals.filter(function(H){return H[0]!==K[0]&&H[1]!==K[1]})),te.startExtent=ue.region?K[ue.region==="s"?1:0]:j,Q.parent.inBrushDrag=!0,te.brushStartCallback()}function g(G,Q){f.event.sourceEvent.stopPropagation();var X=Q.height-f.mouse(G)[1]-2*w.verticalPadding,j=Q.brush.svgBrush;j.wasDragged=!0,j._dragging=!0,j.grabbingBar?j.newExtent=[X-j.grabPoint,X+j.barLength-j.grabPoint].map(Q.unitToPaddedPx.invert):j.newExtent=[j.startExtent,Q.unitToPaddedPx.invert(X)].sort(e),Q.brush.filterSpecified=!0,j.extent=j.stayingIntervals.concat([j.newExtent]),j.brushCallback(Q),u(G.parentNode)}function b(G,Q){var X=Q.brush,j=X.filter,re=X.svgBrush;re._dragging||(v(G,Q),g(G,Q),Q.brush.svgBrush.wasDragged=!1),re._dragging=!1;var ue=f.event;ue.sourceEvent.stopPropagation();var K=re.grabbingBar;if(re.grabbingBar=!1,re.grabLocation=void 0,Q.parent.inBrushDrag=!1,l(),!re.wasDragged){re.wasDragged=void 0,re.clickableOrdinalRange?X.filterSpecified&&Q.multiselect?re.extent.push(re.clickableOrdinalRange):(re.extent=[re.clickableOrdinalRange],X.filterSpecified=!0):K?(re.extent=re.stayingIntervals,re.extent.length===0&&I(X)):I(X),re.brushCallback(Q),u(G.parentNode),re.brushEndCallback(X.filterSpecified?j.getConsolidated():[]);return}var te=function(){j.set(j.getConsolidated())};if(Q.ordinal){var Y=Q.unitTickvals;Y[Y.length-1]<Y[0]&&Y.reverse(),re.newExtent=[s(0,Y,re.newExtent[0],re.stayingIntervals),s(1,Y,re.newExtent[1],re.stayingIntervals)];var H=re.newExtent[1]>re.newExtent[0];re.extent=re.stayingIntervals.concat(H?[re.newExtent]:[]),re.extent.length||I(X),re.brushCallback(Q),H?u(G.parentNode,te):(te(),u(G.parentNode))}else te();re.brushEndCallback(X.filterSpecified?j.getConsolidated():[])}function v(G,Q){var X=Q.height-f.mouse(G)[1]-2*w.verticalPadding,j=A(Q,X),re="crosshair";j.clickableOrdinalRange?re="pointer":j.region&&(re=j.region+"-resize"),f.select(document.body).style("cursor",re)}function k(G){G.on("mousemove",function(Q){f.event.preventDefault(),Q.parent.inBrushDrag||v(this,Q)}).on("mouseleave",function(Q){Q.parent.inBrushDrag||l()}).call(f.behavior.drag().on("dragstart",function(Q){_(this,Q)}).on("drag",function(Q){g(this,Q)}).on("dragend",function(Q){b(this,Q)}))}function S(G,Q){return G[0]-Q[0]}function E(G,Q,X){var j=X._context.staticPlot,re=G.selectAll(".background").data(T);re.enter().append("rect").classed("background",!0).call(y).call(d).style("pointer-events",j?"none":"auto").attr("transform",a(0,w.verticalPadding)),re.call(k).attr("height",function(te){return te.height-w.verticalPadding});var ue=G.selectAll(".highlight-shadow").data(T);ue.enter().append("line").classed("highlight-shadow",!0).attr("x",-w.bar.width/2).attr("stroke-width",w.bar.width+w.bar.strokeWidth).attr("stroke",Q).attr("opacity",w.bar.strokeOpacity).attr("stroke-linecap","butt"),ue.attr("y1",function(te){return te.height}).call(x);var K=G.selectAll(".highlight").data(T);K.enter().append("line").classed("highlight",!0).attr("x",-w.bar.width/2).attr("stroke-width",w.bar.width-w.bar.strokeWidth).attr("stroke",w.bar.fillColor).attr("opacity",w.bar.fillOpacity).attr("stroke-linecap","butt"),K.attr("y1",function(te){return te.height}).call(x)}function C(G,Q,X){var j=G.selectAll("."+w.cn.axisBrush).data(T,M);j.enter().append("g").classed(w.cn.axisBrush,!0),E(j,Q,X)}function F(G){return G.svgBrush.extent.map(function(Q){return Q.slice()})}function I(G){G.filterSpecified=!1,G.svgBrush.extent=[[-1/0,1/0]]}function D(G){return function(X){var j=X.brush,re=F(j),ue=re.slice();j.filter.set(ue),G()}}function R(G){for(var Q=G.slice(),X=[],j,re=Q.shift();re;){for(j=re.slice();(re=Q.shift())&&re[0]<=j[1];)j[1]=Math.max(j[1],re[1]);X.push(j)}return X.length===1&&X[0][0]>X[0][1]&&(X=[]),X}function O(){var G=[],Q,X;return{set:function(j){G=j.map(function(re){return re.slice().sort(e)}).sort(S),G.length===1&&G[0][0]===-1/0&&G[0][1]===1/0&&(G=[[0,-1]]),Q=R(G),X=G.reduce(function(re,ue){return[Math.min(re[0],ue[0]),Math.max(re[1],ue[1])]},[1/0,-1/0])},get:function(){return G.slice()},getConsolidated:function(){return Q},getBounds:function(){return X}}}function z(G,Q,X,j,re,ue){var K=O();return K.set(X),{filter:K,filterSpecified:Q,svgBrush:{extent:[],brushStartCallback:j,brushCallback:D(re),brushEndCallback:ue}}}function B(G,Q){if(Array.isArray(G[0])?(G=G.map(function(j){return j.sort(e)}),Q.multiselect?G=R(G.sort(S)):G=[G[0]]):G=[G.sort(e)],Q.tickvals){var X=Q.tickvals.slice().sort(e);if(G=G.map(function(j){var re=[s(0,X,j[0],[]),s(1,X,j[1],[])];if(re[1]>re[0])return re}).filter(function(j){return j}),!G.length)return}return G.length>1?G:G[0]}U.exports={makeBrush:z,ensureAxisBrush:C,cleanRanges:B}},{"../../lib":515,"../../lib/gup":512,"./constants":902,"@plotly/d3":58}],899:[function(i,U,V){U.exports={attributes:i("./attributes"),supplyDefaults:i("./defaults"),calc:i("./calc"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:i("./base_plot"),categories:["gl","regl","noOpacity","noHover"],meta:{}}},{"./attributes":897,"./base_plot":900,"./calc":901,"./defaults":903}],900:[function(i,U,V){var w=i("@plotly/d3"),f=i("../../plots/get_data").getModuleCalcData,M=i("./plot"),T=i("../../constants/xmlns_namespaces");V.name="parcoords",V.plot=function(e){var a=f(e.calcdata,"parcoords")[0];a.length&&M(e,a)},V.clean=function(e,a,n,r){var t=r._has&&r._has("parcoords"),h=a._has&&a._has("parcoords");t&&!h&&(r._paperdiv.selectAll(".parcoords").remove(),r._glimages.selectAll("*").remove())},V.toSVG=function(e){var a=e._fullLayout._glimages,n=w.select(e).selectAll(".svg-container"),r=n.filter(function(h,s){return s===n.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus");function t(){var h=this,s=h.toDataURL("image/png"),o=a.append("svg:image");o.attr({xmlns:T.svg,"xlink:href":s,preserveAspectRatio:"none",x:0,y:0,width:h.style.width,height:h.style.height})}r.each(t),window.setTimeout(function(){w.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},{"../../constants/xmlns_namespaces":492,"../../plots/get_data":602,"./plot":909,"@plotly/d3":58}],901:[function(i,U,V){var w=i("../../lib").isArrayOrTypedArray,f=i("../../components/colorscale"),M=i("../../lib/gup").wrap;U.exports=function(a,n){var r,t;return f.hasColorscale(n,"line")&&w(n.line.color)?(r=n.line.color,t=f.extractOpts(n.line).colorscale,f.calc(a,n,{vals:r,containerStr:"line",cLetter:"c"})):(r=T(n._length),t=[[0,n.line.color],[1,n.line.color]]),M({lineColor:r,cscale:t})};function T(e){for(var a=new Array(e),n=0;n<e;n++)a[n]=.5;return a}},{"../../components/colorscale":379,"../../lib":515,"../../lib/gup":512}],902:[function(i,U,V){U.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5e3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},{}],903:[function(i,U,V){var w=i("../../lib"),f=i("../../components/colorscale/helpers").hasColorscale,M=i("../../components/colorscale/defaults"),T=i("../../plots/domain").defaults,e=i("../../plots/array_container_defaults"),a=i("../../plots/cartesian/axes"),n=i("./attributes"),r=i("./axisbrush"),t=i("./constants").maxDimensionCount,h=i("./merge_length");function s(y,d,p,c,m){var l=m("line.color",p);if(f(y,"line")&&w.isArrayOrTypedArray(l)){if(l.length)return m("line.colorscale"),M(y,d,c,m,{prefix:"line.",cLetter:"c"}),l.length;d.line.color=p}return 1/0}function o(y,d,p,c){function m(_,g){return w.coerce(y,d,n.dimensions,_,g)}var l=m("values"),x=m("visible");if(l&&l.length||(x=d.visible=!1),x){m("label"),m("tickvals"),m("ticktext"),m("tickformat");var u=m("range");d._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",range:u},a.setConvert(d._ax,c.layout),m("multiselect");var A=m("constraintrange");A&&(d.constraintrange=r.cleanRanges(A,d))}}U.exports=function(d,p,c,m){function l(g,b){return w.coerce(d,p,n,g,b)}var x=d.dimensions;Array.isArray(x)&&x.length>t&&(w.log("parcoords traces support up to "+t+" dimensions at the moment"),x.splice(t));var u=e(d,p,{name:"dimensions",layout:m,handleItemDefaults:o}),A=s(d,p,c,m,l);T(p,m,l),(!Array.isArray(u)||!u.length)&&(p.visible=!1),h(p,u,"values",A);var _={family:m.font.family,size:Math.round(m.font.size/1.2),color:m.font.color};w.coerceFont(l,"labelfont",_),w.coerceFont(l,"tickfont",_),w.coerceFont(l,"rangefont",_),l("labelangle"),l("labelside"),l("unselected.line.color"),l("unselected.line.opacity")}},{"../../components/colorscale/defaults":377,"../../components/colorscale/helpers":378,"../../lib":515,"../../plots/array_container_defaults":561,"../../plots/cartesian/axes":566,"../../plots/domain":593,"./attributes":897,"./axisbrush":898,"./constants":902,"./merge_length":907}],904:[function(i,U,V){var w=i("../../lib").isTypedArray;V.convertTypedArray=function(f){return w(f)?Array.prototype.slice.call(f):f},V.isOrdinal=function(f){return!!f.tickvals},V.isVisible=function(f){return f.visible||!("visible"in f)}},{"../../lib":515}],905:[function(i,U,V){var w=i("./base_index");w.plot=i("./plot"),U.exports=w},{"./base_index":899,"./plot":909}],906:[function(i,U,V){var w=i("glslify"),f=w([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

attribute vec4 p01_04, p05_08, p09_12, p13_16,
               p17_20, p21_24, p25_28, p29_32,
               p33_36, p37_40, p41_44, p45_48,
               p49_52, p53_56, p57_60, colors;

uniform mat4 dim0A, dim1A, dim0B, dim1B, dim0C, dim1C, dim0D, dim1D,
             loA, hiA, loB, hiB, loC, hiC, loD, hiD;

uniform vec2 resolution, viewBoxPos, viewBoxSize;
uniform float maskHeight;
uniform float drwLayer; // 0: context, 1: focus, 2: pick
uniform vec4 contextColor;
uniform sampler2D maskTexture, palette;

bool isPick    = (drwLayer > 1.5);
bool isContext = (drwLayer < 0.5);

const vec4 ZEROS = vec4(0.0, 0.0, 0.0, 0.0);
const vec4 UNITS = vec4(1.0, 1.0, 1.0, 1.0);

float val(mat4 p, mat4 v) {
    return dot(matrixCompMult(p, v) * UNITS, UNITS);
}

float axisY(float ratio, mat4 A, mat4 B, mat4 C, mat4 D) {
    float y1 = val(A, dim0A) + val(B, dim0B) + val(C, dim0C) + val(D, dim0D);
    float y2 = val(A, dim1A) + val(B, dim1B) + val(C, dim1C) + val(D, dim1D);
    return y1 * (1.0 - ratio) + y2 * ratio;
}

int iMod(int a, int b) {
    return a - b * (a / b);
}

bool fOutside(float p, float lo, float hi) {
    return (lo < hi) && (lo > p || p > hi);
}

bool vOutside(vec4 p, vec4 lo, vec4 hi) {
    return (
        fOutside(p[0], lo[0], hi[0]) ||
        fOutside(p[1], lo[1], hi[1]) ||
        fOutside(p[2], lo[2], hi[2]) ||
        fOutside(p[3], lo[3], hi[3])
    );
}

bool mOutside(mat4 p, mat4 lo, mat4 hi) {
    return (
        vOutside(p[0], lo[0], hi[0]) ||
        vOutside(p[1], lo[1], hi[1]) ||
        vOutside(p[2], lo[2], hi[2]) ||
        vOutside(p[3], lo[3], hi[3])
    );
}

bool outsideBoundingBox(mat4 A, mat4 B, mat4 C, mat4 D) {
    return mOutside(A, loA, hiA) ||
           mOutside(B, loB, hiB) ||
           mOutside(C, loC, hiC) ||
           mOutside(D, loD, hiD);
}

bool outsideRasterMask(mat4 A, mat4 B, mat4 C, mat4 D) {
    mat4 pnts[4];
    pnts[0] = A;
    pnts[1] = B;
    pnts[2] = C;
    pnts[3] = D;

    for(int i = 0; i < 4; ++i) {
        for(int j = 0; j < 4; ++j) {
            for(int k = 0; k < 4; ++k) {
                if(0 == iMod(
                    int(255.0 * texture2D(maskTexture,
                        vec2(
                            (float(i * 2 + j / 2) + 0.5) / 8.0,
                            (pnts[i][j][k] * (maskHeight - 1.0) + 1.0) / maskHeight
                        ))[3]
                    ) / int(pow(2.0, float(iMod(j * 4 + k, 8)))),
                    2
                )) return true;
            }
        }
    }
    return false;
}

vec4 position(bool isContext, float v, mat4 A, mat4 B, mat4 C, mat4 D) {
    float x = 0.5 * sign(v) + 0.5;
    float y = axisY(x, A, B, C, D);
    float z = 1.0 - abs(v);

    z += isContext ? 0.0 : 2.0 * float(
        outsideBoundingBox(A, B, C, D) ||
        outsideRasterMask(A, B, C, D)
    );

    return vec4(
        2.0 * (vec2(x, y) * viewBoxSize + viewBoxPos) / resolution - 1.0,
        z,
        1.0
    );
}

void main() {
    mat4 A = mat4(p01_04, p05_08, p09_12, p13_16);
    mat4 B = mat4(p17_20, p21_24, p25_28, p29_32);
    mat4 C = mat4(p33_36, p37_40, p41_44, p45_48);
    mat4 D = mat4(p49_52, p53_56, p57_60, ZEROS);

    float v = colors[3];

    gl_Position = position(isContext, v, A, B, C, D);

    fragColor =
        isContext ? vec4(contextColor) :
        isPick ? vec4(colors.rgb, 1.0) : texture2D(palette, vec2(abs(v), 0.5));
}
`]),M=w([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
    gl_FragColor = fragColor;
}
`]),T=i("./constants").maxDimensionCount,e=i("../../lib"),a=1e-6,n=2048,r=new Uint8Array(4),t=new Uint8Array(4),h={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};function s(v){v.read({x:0,y:0,width:1,height:1,data:r})}function o(v,k,S,E,C){var F=v._gl;F.enable(F.SCISSOR_TEST),F.scissor(k,S,E,C),v.clear({color:[0,0,0,0],depth:1})}function y(v,k,S,E,C,F){var I=F.key;function D(R){var O=Math.min(E,C-R*E);R===0&&(window.cancelAnimationFrame(S.currentRafs[I]),delete S.currentRafs[I],o(v,F.scissorX,F.scissorY,F.scissorWidth,F.viewBoxSize[1])),!S.clearOnly&&(F.count=2*O,F.offset=2*R*E,k(F),R*E+O<C&&(S.currentRafs[I]=window.requestAnimationFrame(function(){D(R+1)})),S.drawCompleted=!1)}S.drawCompleted||(s(v),S.drawCompleted=!0),D(0)}function d(v){return Math.max(a,Math.min(1-a,v))}function p(v,k){for(var S=new Array(256),E=0;E<256;E++)S[E]=v(E/255).concat(k);return S}function c(v,k){return(v>>>8*k)%256/255}function m(v,k,S){for(var E=new Array(v*(T+4)),C=0,F=0;F<v;F++){for(var I=0;I<T;I++)E[C++]=I<k.length?k[I].paddedUnitValues[F]:.5;E[C++]=c(F,2),E[C++]=c(F,1),E[C++]=c(F,0),E[C++]=d(S[F])}return E}function l(v,k,S){for(var E=new Array(k*8),C=0,F=0;F<k;F++)for(var I=0;I<2;I++)for(var D=0;D<4;D++){var R=v*4+D,O=S[F*64+R];R===63&&I===0&&(O*=-1),E[C++]=O}return E}function x(v){var k="0"+v;return k.substr(k.length-2)}function u(v){return v<T?"p"+x(v+1)+"_"+x(v+4):"colors"}function A(v,k,S){for(var E=0;E<=T;E+=4)v[u(E)](l(E/4,k,S))}function _(v){for(var k={},S=0;S<=T;S+=4)k[u(S)]=v.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return k}function g(v,k,S,E,C,F,I,D,R,O,z,B,G,Q){for(var X=[[],[]],j=0;j<64;j++)X[0][j]=j===C?1:0,X[1][j]=j===F?1:0;I*=Q,D*=Q,R*=Q,O*=Q;var re=v.lines.canvasOverdrag*Q,ue=v.domain,K=v.canvasWidth*Q,te=v.canvasHeight*Q,Y=v.pad.l*Q,H=v.pad.b*Q,ee=v.layoutHeight*Q,ne=v.layoutWidth*Q,Z=v.deselectedLines.color,q=v.deselectedLines.opacity,ie=e.extendFlat({key:z,resolution:[K,te],viewBoxPos:[I+re,D],viewBoxSize:[R,O],i0:C,i1:F,dim0A:X[0].slice(0,16),dim0B:X[0].slice(16,32),dim0C:X[0].slice(32,48),dim0D:X[0].slice(48,64),dim1A:X[1].slice(0,16),dim1B:X[1].slice(16,32),dim1C:X[1].slice(32,48),dim1D:X[1].slice(48,64),drwLayer:B,contextColor:[Z[0]/255,Z[1]/255,Z[2]/255,q!=="auto"?Z[3]*q:Math.max(1/255,Math.pow(1/v.lines.color.length,1/3))],scissorX:(E===k?0:I+re)+(Y-re)+ne*ue.x[0],scissorWidth:(E===S?K-I+re:R+.5)+(E===k?I+re:0),scissorY:D+H+ee*ue.y[0],scissorHeight:O,viewportX:Y-re+ne*ue.x[0],viewportY:H+ee*ue.y[0],viewportWidth:K,viewportHeight:te},G);return ie}function b(v){var k=n-1,S=Math.max(0,Math.floor(v[0]*k),0),E=Math.min(k,Math.ceil(v[1]*k),k);return[Math.min(S,E),Math.max(S,E)]}U.exports=function(v,k){var S=k.context,E=k.pick,C=k.regl,F=C._gl,I=F.getParameter(F.ALIASED_LINE_WIDTH_RANGE),D=Math.max(I[0],Math.min(I[1],k.viewModel.plotGlPixelRatio)),R={currentRafs:{},drawCompleted:!0,clearOnly:!1},O,z,B,G,Q=_(C),X,j=C.texture(h),re=[];K(k);var ue=C({profile:!1,blend:{enable:S,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!S,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:C.prop("scissorX"),y:C.prop("scissorY"),width:C.prop("scissorWidth"),height:C.prop("scissorHeight")}},viewport:{x:C.prop("viewportX"),y:C.prop("viewportY"),width:C.prop("viewportWidth"),height:C.prop("viewportHeight")},dither:!1,vert:f,frag:M,primitive:"lines",lineWidth:D,attributes:Q,uniforms:{resolution:C.prop("resolution"),viewBoxPos:C.prop("viewBoxPos"),viewBoxSize:C.prop("viewBoxSize"),dim0A:C.prop("dim0A"),dim1A:C.prop("dim1A"),dim0B:C.prop("dim0B"),dim1B:C.prop("dim1B"),dim0C:C.prop("dim0C"),dim1C:C.prop("dim1C"),dim0D:C.prop("dim0D"),dim1D:C.prop("dim1D"),loA:C.prop("loA"),hiA:C.prop("hiA"),loB:C.prop("loB"),hiB:C.prop("hiB"),loC:C.prop("loC"),hiC:C.prop("hiC"),loD:C.prop("loD"),hiD:C.prop("hiD"),palette:j,contextColor:C.prop("contextColor"),maskTexture:C.prop("maskTexture"),drwLayer:C.prop("drwLayer"),maskHeight:C.prop("maskHeight")},offset:C.prop("offset"),count:C.prop("count")});function K(Z){O=Z.model,z=Z.viewModel,B=z.dimensions.slice(),G=B[0]?B[0].values.length:0;var q=O.lines,ie=E?q.color.map(function(ae,oe){return oe/q.color.length}):q.color,se=m(G,B,ie);A(Q,G,se),!S&&!E&&(j=C.texture(e.extendFlat({data:p(O.unitToColor,255)},h)))}function te(Z){var q,ie,se,ae=[[],[]];for(se=0;se<64;se++){var oe=!Z&&se<B.length?B[se].brush.filter.getBounds():[-1/0,1/0];ae[0][se]=oe[0],ae[1][se]=oe[1]}var be=n*8,ce=new Array(be);for(q=0;q<be;q++)ce[q]=255;if(!Z)for(q=0;q<B.length;q++){var de=q%8,ye=(q-de)/8,ge=Math.pow(2,de),me=B[q],Se=me.brush.filter.get();if(!(Se.length<2)){var Le=b(Se[0])[1];for(ie=1;ie<Se.length;ie++){var Oe=b(Se[ie]);for(se=Le+1;se<Oe[0];se++)ce[se*8+ye]&=~ge;Le=Math.max(Le,Oe[1])}}}var we={shape:[8,n],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:ce};return X?X(we):X=C.texture(we),{maskTexture:X,maskHeight:n,loA:ae[0].slice(0,16),loB:ae[0].slice(16,32),loC:ae[0].slice(32,48),loD:ae[0].slice(48,64),hiA:ae[1].slice(0,16),hiB:ae[1].slice(16,32),hiC:ae[1].slice(32,48),hiD:ae[1].slice(48,64)}}function Y(Z,q,ie){var se=Z.length,ae,oe,be,ce=1/0,de=-1/0;for(ae=0;ae<se;ae++)Z[ae].dim0.canvasX<ce&&(ce=Z[ae].dim0.canvasX,oe=ae),Z[ae].dim1.canvasX>de&&(de=Z[ae].dim1.canvasX,be=ae);se===0&&o(C,0,0,O.canvasWidth,O.canvasHeight);var ye=te(S);for(ae=0;ae<se;ae++){var ge=Z[ae],me=ge.dim0.crossfilterDimensionIndex,Se=ge.dim1.crossfilterDimensionIndex,Le=ge.canvasX,Oe=ge.canvasY,we=Le+ge.panelSizeX,Ce=ge.plotGlPixelRatio;if(q||!re[me]||re[me][0]!==Le||re[me][1]!==we){re[me]=[Le,we];var Ke=g(O,oe,be,ae,me,Se,Le,Oe,ge.panelSizeX,ge.panelSizeY,ge.dim0.crossfilterDimensionIndex,S?0:E?2:1,ye,Ce);R.clearOnly=ie;var Ye=q?O.lines.blockLineCount:G;y(C,ue,R,Ye,G,Ke)}}}function H(Z,q){return C.read({x:Z,y:q,width:1,height:1,data:t}),t}function ee(Z,q,ie,se){var ae=new Uint8Array(4*ie*se);return C.read({x:Z,y:q,width:ie,height:se,data:ae}),ae}function ne(){v.style["pointer-events"]="none",j.destroy(),X&&X.destroy();for(var Z in Q)Q[Z].destroy()}return{render:Y,readPixel:H,readPixels:ee,destroy:ne,update:K}}},{"../../lib":515,"./constants":902,glslify:227}],907:[function(i,U,V){U.exports=function(w,f,M,T){T||(T=1/0);var e,a;for(e=0;e<f.length;e++)a=f[e],a.visible&&(T=Math.min(T,a[M].length));for(T===1/0&&(T=0),w._length=T,e=0;e<f.length;e++)a=f[e],a.visible&&(a._length=T);return T}},{}],908:[function(i,U,V){var w=i("@plotly/d3"),f=i("../../lib"),M=f.numberFormat,T=i("color-rgba"),e=i("../../plots/cartesian/axes"),a=f.strRotate,n=f.strTranslate,r=i("../../lib/svg_text_utils"),t=i("../../components/drawing"),h=i("../../components/colorscale"),s=i("../../lib/gup"),o=s.keyFun,y=s.repeat,d=s.unwrap,p=i("./helpers"),c=i("./constants"),m=i("./axisbrush"),l=i("./lines");function x(X,j,re){return f.aggNums(X,null,j,re)}function u(X,j){return _(x(Math.min,X,j),x(Math.max,X,j))}function A(X){var j=X.range;return j?_(j[0],j[1]):u(X.values,X._length)}function _(X,j){return(isNaN(X)||!isFinite(X))&&(X=0),(isNaN(j)||!isFinite(j))&&(j=0),X===j&&(X===0?(X-=1,j+=1):(X*=.9,j*=1.1)),[X,j]}function g(X,j){return j?function(re,ue){var K=j[ue];return K==null?X(re):K}:X}function b(X,j,re,ue,K){var te=A(re);return ue?w.scale.ordinal().domain(ue.map(g(M(re.tickformat),K))).range(ue.map(function(Y){var H=(Y-te[0])/(te[1]-te[0]);return X-j+H*(2*j-X)})):w.scale.linear().domain(te).range([X-j,j])}function v(X,j){return w.scale.linear().range([j,X-j])}function k(X,j){return w.scale.linear().domain(A(X)).range([j,1-j])}function S(X){if(!!X.tickvals){var j=A(X);return w.scale.ordinal().domain(X.tickvals).range(X.tickvals.map(function(re){return(re-j[0])/(j[1]-j[0])}))}}function E(X){var j=X.map(function(te){return te[0]}),re=X.map(function(te){var Y=T(te[1]);return w.rgb("rgb("+Y[0]+","+Y[1]+","+Y[2]+")")}),ue=function(te){return function(Y){return Y[te]}},K="rgb".split("").map(function(te){return w.scale.linear().clamp(!0).domain(j).range(re.map(ue(te)))});return function(te){return K.map(function(Y){return Y(te)})}}function C(X){return X.dimensions.some(function(j){return j.brush.filterSpecified})}function F(X,j,re){var ue=d(j),K=ue.trace,te=p.convertTypedArray(ue.lineColor),Y=K.line,H={color:T(K.unselected.line.color),opacity:K.unselected.line.opacity},ee=h.extractOpts(Y),ne=ee.reversescale?h.flipScale(ue.cscale):ue.cscale,Z=K.domain,q=K.dimensions,ie=X.width,se=K.labelangle,ae=K.labelside,oe=K.labelfont,be=K.tickfont,ce=K.rangefont,de=f.extendDeepNoArrays({},Y,{color:te.map(w.scale.linear().domain(A({values:te,range:[ee.min,ee.max],_length:K._length}))),blockLineCount:c.blockLineCount,canvasOverdrag:c.overdrag*c.canvasPixelRatio}),ye=Math.floor(ie*(Z.x[1]-Z.x[0])),ge=Math.floor(X.height*(Z.y[1]-Z.y[0])),me=X.margin||{l:80,r:80,t:100,b:80},Se=ye,Le=ge;return{key:re,colCount:q.filter(p.isVisible).length,dimensions:q,tickDistance:c.tickDistance,unitToColor:E(ne),lines:de,deselectedLines:H,labelAngle:se,labelSide:ae,labelFont:oe,tickFont:be,rangeFont:ce,layoutWidth:ie,layoutHeight:X.height,domain:Z,translateX:Z.x[0]*ie,translateY:X.height-Z.y[1]*X.height,pad:me,canvasWidth:Se*c.canvasPixelRatio+2*de.canvasOverdrag,canvasHeight:Le*c.canvasPixelRatio,width:Se,height:Le,canvasPixelRatio:c.canvasPixelRatio}}function I(X,j,re){var ue=re.width,K=re.height,te=re.dimensions,Y=re.canvasPixelRatio,H=function(ie){return ue*ie/Math.max(1,re.colCount-1)},ee=c.verticalPadding/K,ne=v(K,c.verticalPadding),Z={key:re.key,xScale:H,model:re,inBrushDrag:!1},q={};return Z.dimensions=te.filter(p.isVisible).map(function(ie,se){var ae=k(ie,ee),oe=q[ie.label];q[ie.label]=(oe||0)+1;var be=ie.label+(oe?"__"+oe:""),ce=ie.constraintrange,de=ce&&ce.length;de&&!Array.isArray(ce[0])&&(ce=[ce]);var ye=de?ce.map(function(Fe){return Fe.map(ae)}):[[-1/0,1/0]],ge=function(){var Fe=Z;Fe.focusLayer&&Fe.focusLayer.render(Fe.panels,!0);var Re=C(Fe);!X.contextShown()&&Re?(Fe.contextLayer&&Fe.contextLayer.render(Fe.panels,!0),X.contextShown(!0)):X.contextShown()&&!Re&&(Fe.contextLayer&&Fe.contextLayer.render(Fe.panels,!0,!0),X.contextShown(!1))},me=ie.values;me.length>ie._length&&(me=me.slice(0,ie._length));var Se=ie.tickvals,Le;function Oe(Fe,Re){return{val:Fe,text:Le[Re]}}function we(Fe,Re){return Fe.val-Re.val}if(Array.isArray(Se)&&Se.length){Le=ie.ticktext,!Array.isArray(Le)||!Le.length?Le=Se.map(M(ie.tickformat)):Le.length>Se.length?Le=Le.slice(0,Se.length):Se.length>Le.length&&(Se=Se.slice(0,Le.length));for(var Ce=1;Ce<Se.length;Ce++)if(Se[Ce]<Se[Ce-1]){for(var Ke=Se.map(Oe).sort(we),Ye=0;Ye<Se.length;Ye++)Se[Ye]=Ke[Ye].val,Le[Ye]=Ke[Ye].text;break}}else Se=void 0;return me=p.convertTypedArray(me),{key:be,label:ie.label,tickFormat:ie.tickformat,tickvals:Se,ticktext:Le,ordinal:p.isOrdinal(ie),multiselect:ie.multiselect,xIndex:se,crossfilterDimensionIndex:se,visibleIndex:ie._index,height:K,values:me,paddedUnitValues:me.map(ae),unitTickvals:Se&&Se.map(ae),xScale:H,x:H(se),canvasX:H(se)*Y,unitToPaddedPx:ne,domainScale:b(K,c.verticalPadding,ie,Se,Le),ordinalScale:S(ie),parent:Z,model:re,brush:m.makeBrush(X,de,ye,function(){X.linePickActive(!1)},ge,function(Fe){if(Z.focusLayer.render(Z.panels,!0),Z.pickLayer&&Z.pickLayer.render(Z.panels,!0),X.linePickActive(!0),j&&j.filterChanged){var Re=ae.invert,je=Fe.map(function(xt){return xt.map(Re).sort(f.sorterAsc)}).sort(function(xt,Nt){return xt[0]-Nt[0]});j.filterChanged(Z.key,ie._index,je)}})}}),Z}function D(X){X.classed(c.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default")}function R(){var X=!0,j=!1;return{linePickActive:function(re){return arguments.length?X=!!re:X},contextShown:function(re){return arguments.length?j=!!re:j}}}function O(X,j){var re=j==="top"?1:-1,ue=X*Math.PI/180,K=Math.sin(ue),te=Math.cos(ue);return{dir:re,dx:K,dy:te,degrees:X}}function z(X,j,re){for(var ue=j.panels||(j.panels=[]),K=X.data(),te=0;te<K.length-1;te++){var Y=ue[te]||(ue[te]={}),H=K[te],ee=K[te+1];Y.dim0=H,Y.dim1=ee,Y.canvasX=H.canvasX,Y.panelSizeX=ee.canvasX-H.canvasX,Y.panelSizeY=j.model.canvasHeight,Y.y=0,Y.canvasY=0,Y.plotGlPixelRatio=re}}function B(X){for(var j=0;j<X.length;j++)for(var re=0;re<X[j].length;re++)for(var ue=X[j][re].trace,K=ue.dimensions,te=0;te<K.length;te++){var Y=K[te].values,H=K[te]._ax;H&&(H.range?H.range=_(H.range[0],H.range[1]):H.range=u(Y,ue._length),H.dtick||(H.dtick=.01*(Math.abs(H.range[1]-H.range[0])||1)),H.tickformat=K[te].tickformat,e.calcTicks(H),H.cleanRange())}}function G(X,j){return e.tickText(X._ax,j,!1).text}function Q(X,j){if(X.ordinal)return"";var re=X.domainScale.domain(),ue=re[j?re.length-1:0];return G(X.model.dimensions[X.visibleIndex],ue)}U.exports=function(j,re,ue,K){var te=j._context.staticPlot,Y=j._fullLayout,H=Y._toppaper,ee=Y._glcontainer,ne=j._context.plotGlPixelRatio,Z=j._fullLayout.paper_bgcolor;B(re);var q=R(),ie=re.filter(function(Ye){return d(Ye).trace.visible}).map(F.bind(0,ue)).map(I.bind(0,q,K));ee.each(function(Ye,Fe){return f.extendFlat(Ye,ie[Fe])});var se=ee.selectAll(".gl-canvas").each(function(Ye){Ye.viewModel=ie[0],Ye.viewModel.plotGlPixelRatio=ne,Ye.viewModel.paperColor=Z,Ye.model=Ye.viewModel?Ye.viewModel.model:null}),ae=null,oe=se.filter(function(Ye){return Ye.pick});oe.style("pointer-events",te?"none":"auto").on("mousemove",function(Ye){if(q.linePickActive()&&Ye.lineLayer&&K&&K.hover){var Fe=w.event,Re=this.width,je=this.height,xt=w.mouse(this),Nt=xt[0],tr=xt[1];if(Nt<0||tr<0||Nt>=Re||tr>=je)return;var Ht=Ye.lineLayer.readPixel(Nt,je-1-tr),Pt=Ht[3]!==0,$t=Pt?Ht[2]+256*(Ht[1]+256*Ht[0]):null,Ut={x:Nt,y:tr,clientX:Fe.clientX,clientY:Fe.clientY,dataIndex:Ye.model.key,curveNumber:$t};$t!==ae&&(Pt?K.hover(Ut):K.unhover&&K.unhover(Ut),ae=$t)}}),se.style("opacity",function(Ye){return Ye.pick?0:1}),H.style("background","rgba(255, 255, 255, 0)");var be=H.selectAll("."+c.cn.parcoords).data(ie,o);be.exit().remove(),be.enter().append("g").classed(c.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events","none"),be.attr("transform",function(Ye){return n(Ye.model.translateX,Ye.model.translateY)});var ce=be.selectAll("."+c.cn.parcoordsControlView).data(y,o);ce.enter().append("g").classed(c.cn.parcoordsControlView,!0),ce.attr("transform",function(Ye){return n(Ye.model.pad.l,Ye.model.pad.t)});var de=ce.selectAll("."+c.cn.yAxis).data(function(Ye){return Ye.dimensions},o);de.enter().append("g").classed(c.cn.yAxis,!0),ce.each(function(Ye){z(de,Ye,ne)}),se.each(function(Ye){if(Ye.viewModel){!Ye.lineLayer||K?Ye.lineLayer=l(this,Ye):Ye.lineLayer.update(Ye),(Ye.key||Ye.key===0)&&(Ye.viewModel[Ye.key]=Ye.lineLayer);var Fe=!Ye.context||K;Ye.lineLayer.render(Ye.viewModel.panels,Fe)}}),de.attr("transform",function(Ye){return n(Ye.xScale(Ye.xIndex),0)}),de.call(w.behavior.drag().origin(function(Ye){return Ye}).on("drag",function(Ye){var Fe=Ye.parent;q.linePickActive(!1),Ye.x=Math.max(-c.overdrag,Math.min(Ye.model.width+c.overdrag,w.event.x)),Ye.canvasX=Ye.x*Ye.model.canvasPixelRatio,de.sort(function(Re,je){return Re.x-je.x}).each(function(Re,je){Re.xIndex=je,Re.x=Ye===Re?Re.x:Re.xScale(Re.xIndex),Re.canvasX=Re.x*Re.model.canvasPixelRatio}),z(de,Fe,ne),de.filter(function(Re){return Math.abs(Ye.xIndex-Re.xIndex)!==0}).attr("transform",function(Re){return n(Re.xScale(Re.xIndex),0)}),w.select(this).attr("transform",n(Ye.x,0)),de.each(function(Re,je,xt){xt===Ye.parent.key&&(Fe.dimensions[je]=Re)}),Fe.contextLayer&&Fe.contextLayer.render(Fe.panels,!1,!C(Fe)),Fe.focusLayer.render&&Fe.focusLayer.render(Fe.panels)}).on("dragend",function(Ye){var Fe=Ye.parent;Ye.x=Ye.xScale(Ye.xIndex),Ye.canvasX=Ye.x*Ye.model.canvasPixelRatio,z(de,Fe,ne),w.select(this).attr("transform",function(Re){return n(Re.x,0)}),Fe.contextLayer&&Fe.contextLayer.render(Fe.panels,!1,!C(Fe)),Fe.focusLayer&&Fe.focusLayer.render(Fe.panels),Fe.pickLayer&&Fe.pickLayer.render(Fe.panels,!0),q.linePickActive(!0),K&&K.axesMoved&&K.axesMoved(Fe.key,Fe.dimensions.map(function(Re){return Re.crossfilterDimensionIndex}))})),de.exit().remove();var ye=de.selectAll("."+c.cn.axisOverlays).data(y,o);ye.enter().append("g").classed(c.cn.axisOverlays,!0),ye.selectAll("."+c.cn.axis).remove();var ge=ye.selectAll("."+c.cn.axis).data(y,o);ge.enter().append("g").classed(c.cn.axis,!0),ge.each(function(Ye){var Fe=Ye.model.height/Ye.model.tickDistance,Re=Ye.domainScale,je=Re.domain();w.select(this).call(w.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(Fe,Ye.tickFormat).tickValues(Ye.ordinal?je:null).tickFormat(function(xt){return p.isOrdinal(Ye)?xt:G(Ye.model.dimensions[Ye.visibleIndex],xt)}).scale(Re)),t.font(ge.selectAll("text"),Ye.model.tickFont)}),ge.selectAll(".domain, .tick>line").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px"),ge.selectAll("text").style("text-shadow",r.makeTextShadow(Z)).style("cursor","default");var me=ye.selectAll("."+c.cn.axisHeading).data(y,o);me.enter().append("g").classed(c.cn.axisHeading,!0);var Se=me.selectAll("."+c.cn.axisTitle).data(y,o);Se.enter().append("text").classed(c.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("pointer-events",te?"none":"auto"),Se.text(function(Ye){return Ye.label}).each(function(Ye){var Fe=w.select(this);t.font(Fe,Ye.model.labelFont),r.convertToTspans(Fe,j)}).attr("transform",function(Ye){var Fe=O(Ye.model.labelAngle,Ye.model.labelSide),Re=c.axisTitleOffset;return(Fe.dir>0?"":n(0,2*Re+Ye.model.height))+a(Fe.degrees)+n(-Re*Fe.dx,-Re*Fe.dy)}).attr("text-anchor",function(Ye){var Fe=O(Ye.model.labelAngle,Ye.model.labelSide),Re=Math.abs(Fe.dx),je=Math.abs(Fe.dy);return 2*Re>je?Fe.dir*Fe.dx<0?"start":"end":"middle"});var Le=ye.selectAll("."+c.cn.axisExtent).data(y,o);Le.enter().append("g").classed(c.cn.axisExtent,!0);var Oe=Le.selectAll("."+c.cn.axisExtentTop).data(y,o);Oe.enter().append("g").classed(c.cn.axisExtentTop,!0),Oe.attr("transform",n(0,-c.axisExtentOffset));var we=Oe.selectAll("."+c.cn.axisExtentTopText).data(y,o);we.enter().append("text").classed(c.cn.axisExtentTopText,!0).call(D),we.text(function(Ye){return Q(Ye,!0)}).each(function(Ye){t.font(w.select(this),Ye.model.rangeFont)});var Ce=Le.selectAll("."+c.cn.axisExtentBottom).data(y,o);Ce.enter().append("g").classed(c.cn.axisExtentBottom,!0),Ce.attr("transform",function(Ye){return n(0,Ye.model.height+c.axisExtentOffset)});var Ke=Ce.selectAll("."+c.cn.axisExtentBottomText).data(y,o);Ke.enter().append("text").classed(c.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(D),Ke.text(function(Ye){return Q(Ye,!1)}).each(function(Ye){t.font(w.select(this),Ye.model.rangeFont)}),m.ensureAxisBrush(ye,Z,j)}},{"../../components/colorscale":379,"../../components/drawing":389,"../../lib":515,"../../lib/gup":512,"../../lib/svg_text_utils":541,"../../plots/cartesian/axes":566,"./axisbrush":898,"./constants":902,"./helpers":904,"./lines":906,"@plotly/d3":58,"color-rgba":91}],909:[function(i,U,n){var w=i("./parcoords"),f=i("../../lib/prepare_regl"),M=i("./helpers").isVisible,T={};function e(r,t,h){var s=t.indexOf(h),o=r.indexOf(s);return o===-1&&(o+=t.length),o}function a(r,t){return function(s,o){return e(r,t,s)-e(r,t,o)}}var n=U.exports=function(t,h){var s=t._fullLayout,o=f(t,[],T);if(!!o){var y={},d={},p={},c={},m=s._size;h.forEach(function(_,g){var b=_[0].trace;p[g]=b.index;var v=c[g]=b._fullInput.index;y[g]=t.data[v].dimensions,d[g]=t.data[v].dimensions.slice()});var l=function(_,g,b){var v=d[_][g],k=b.map(function(D){return D.slice()}),S="dimensions["+g+"].constraintrange",E=s._tracePreGUI[t._fullData[p[_]]._fullInput.uid];if(E[S]===void 0){var C=v.constraintrange;E[S]=C||null}var F=t._fullData[p[_]].dimensions[g];k.length?(k.length===1&&(k=k[0]),v.constraintrange=k,F.constraintrange=k.slice(),k=[k]):(delete v.constraintrange,delete F.constraintrange,k=null);var I={};I[S]=k,t.emit("plotly_restyle",[I,[c[_]]])},x=function(_){t.emit("plotly_hover",_)},u=function(_){t.emit("plotly_unhover",_)},A=function(_,g){var b=a(g,d[_].filter(M));y[_].sort(b),d[_].filter(function(v){return!M(v)}).sort(function(v){return d[_].indexOf(v)}).forEach(function(v){y[_].splice(y[_].indexOf(v),1),y[_].splice(d[_].indexOf(v),0,v)}),t.emit("plotly_restyle",[{dimensions:[y[_]]},[c[_]]])};w(t,h,{width:m.w,height:m.h,margin:{t:m.t,r:m.r,b:m.b,l:m.l}},{filterChanged:l,hover:x,unhover:u,axesMoved:A})}};n.reglPrecompiled=T},{"../../lib/prepare_regl":528,"./helpers":904,"./parcoords":908}],910:[function(i,U,V){var w=i("../../plots/attributes"),f=i("../../plots/domain").attributes,M=i("../../plots/font_attributes"),T=i("../../components/color/attributes"),e=i("../../plots/template_attributes").hovertemplateAttrs,a=i("../../plots/template_attributes").texttemplateAttrs,n=i("../../lib/extend").extendFlat,r=M({editType:"plot",arrayOk:!0,colorEditType:"plot"});U.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:T.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:n({},w.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:e({},{keys:["label","color","value","percent","text"]}),texttemplate:a({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:n({},r,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:n({},r,{}),outsidetextfont:n({},r,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:n({},r,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:f({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:n({},r,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}},{"../../components/color/attributes":366,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/domain":593,"../../plots/font_attributes":594,"../../plots/template_attributes":642}],911:[function(i,U,V){var w=i("../../plots/plots");V.name="pie",V.plot=function(f,M,T,e){w.plotBasePlot(V.name,f,M,T,e)},V.clean=function(f,M,T,e){w.cleanBasePlot(V.name,f,M,T,e)}},{"../../plots/plots":628}],912:[function(i,U,V){var w=i("fast-isnumeric"),f=i("tinycolor2"),M=i("../../components/color"),T={};function e(t,h){var s=[],o=t._fullLayout,y=o.hiddenlabels||[],d=h.labels,p=h.marker.colors||[],c=h.values,m=h._length,l=h._hasValues&&m,x,u;if(h.dlabel)for(d=new Array(m),x=0;x<m;x++)d[x]=String(h.label0+x*h.dlabel);var A={},_=a(o["_"+h.type+"colormap"]),g=0,b=!1;for(x=0;x<m;x++){var v,k,S;if(l){if(v=c[x],!w(v))continue;v=+v}else v=1;k=d[x],(k===void 0||k==="")&&(k=x),k=String(k);var E=A[k];E===void 0?(A[k]=s.length,S=y.indexOf(k)!==-1,S||(g+=v),s.push({v,label:k,color:_(p[x],k),i:x,pts:[x],hidden:S})):(b=!0,u=s[E],u.v+=v,u.pts.push(x),u.hidden||(g+=v),u.color===!1&&p[x]&&(u.color=_(p[x],k)))}s=s.filter(function(F){return F.v>=0});var C=h.type==="funnelarea"?b:h.sort;return C&&s.sort(function(F,I){return I.v-F.v}),s[0]&&(s[0].vTotal=g),s}function a(t){return function(s,o){return!s||(s=f(s),!s.isValid())?!1:(s=M.addOpacity(s,s.getAlpha()),t[o]||(t[o]=s),s)}}function n(t,h){var s=(h||{}).type;s||(s="pie");var o=t._fullLayout,y=t.calcdata,d=o[s+"colorway"],p=o["_"+s+"colormap"];o["extend"+s+"colors"]&&(d=r(d,T));for(var c=0,m=0;m<y.length;m++){var l=y[m],x=l[0].trace.type;if(x===s)for(var u=0;u<l.length;u++){var A=l[u];A.color===!1&&(p[A.label]?A.color=p[A.label]:(p[A.label]=A.color=d[c%d.length],c++))}}}function r(t,h){var s,o=JSON.stringify(t),y=h[o];if(!y){for(y=t.slice(),s=0;s<t.length;s++)y.push(f(t[s]).lighten(20).toHexString());for(s=0;s<t.length;s++)y.push(f(t[s]).darken(20).toHexString());h[o]=y}return y}U.exports={calc:e,crossTraceCalc:n,makePullColorFn:a,generateExtendedColors:r}},{"../../components/color":367,"fast-isnumeric":190,tinycolor2:313}],913:[function(i,U,V){var w=i("fast-isnumeric"),f=i("../../lib"),M=i("./attributes"),T=i("../../plots/domain").defaults,e=i("../bar/defaults").handleText;function a(r,t){var h=Array.isArray(r),s=f.isArrayOrTypedArray(t),o=Math.min(h?r.length:1/0,s?t.length:1/0);if(isFinite(o)||(o=0),o&&s){for(var y,d=0;d<o;d++){var p=t[d];if(w(p)&&p>0){y=!0;break}}y||(o=0)}return{hasLabels:h,hasValues:s,len:o}}function n(r,t,h,s){function o(S,E){return f.coerce(r,t,M,S,E)}var y=o("labels"),d=o("values"),p=a(y,d),c=p.len;if(t._hasLabels=p.hasLabels,t._hasValues=p.hasValues,!t._hasLabels&&t._hasValues&&(o("label0"),o("dlabel")),!c){t.visible=!1;return}t._length=c;var m=o("marker.line.width");m&&o("marker.line.color"),o("marker.colors"),o("scalegroup");var l=o("text"),x=o("texttemplate"),u;if(x||(u=o("textinfo",Array.isArray(l)?"text+percent":"percent")),o("hovertext"),o("hovertemplate"),x||u&&u!=="none"){var A=o("textposition");e(r,t,s,o,A,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1});var _=Array.isArray(A)||A==="auto",g=_||A==="outside";g&&o("automargin"),(A==="inside"||A==="auto"||Array.isArray(A))&&o("insidetextorientation")}T(t,s,o);var b=o("hole"),v=o("title.text");if(v){var k=o("title.position",b?"middle center":"top center");!b&&k==="middle center"&&(t.title.position="top center"),f.coerceFont(o,"title.font",s.font)}o("sort"),o("direction"),o("rotation"),o("pull")}U.exports={handleLabelsAndValues:a,supplyDefaults:n}},{"../../lib":515,"../../plots/domain":593,"../bar/defaults":661,"./attributes":910,"fast-isnumeric":190}],914:[function(i,U,V){var w=i("../../components/fx/helpers").appendArrayMultiPointValues;U.exports=function(M,T){var e={curveNumber:T.index,pointNumbers:M.pts,data:T._input,fullData:T,label:M.label,color:M.color,value:M.v,percent:M.percent,text:M.text,bbox:M.bbox,v:M.v};return M.pts.length===1&&(e.pointNumber=e.i=M.pts[0]),w(e,T,M.pts),T.type==="funnelarea"&&(delete e.v,delete e.i),e}},{"../../components/fx/helpers":403}],915:[function(i,U,V){var w=i("../../lib");function f(M){return M.indexOf("e")!==-1?M.replace(/[.]?0+e/,"e"):M.indexOf(".")!==-1?M.replace(/[.]?0+$/,""):M}V.formatPiePercent=function(T,e){var a=f((T*100).toPrecision(3));return w.numSeparate(a,e)+"%"},V.formatPieValue=function(T,e){var a=f(T.toPrecision(10));return w.numSeparate(a,e)},V.getFirstFilled=function(T,e){if(!!Array.isArray(T))for(var a=0;a<e.length;a++){var n=T[e[a]];if(n||n===0||n==="")return n}},V.castOption=function(T,e){if(Array.isArray(T))return V.getFirstFilled(T,e);if(T)return T},V.getRotationAngle=function(M){return(M==="auto"?0:M)*Math.PI/180}},{"../../lib":515}],916:[function(i,U,V){U.exports={attributes:i("./attributes"),supplyDefaults:i("./defaults").supplyDefaults,supplyLayoutDefaults:i("./layout_defaults"),layoutAttributes:i("./layout_attributes"),calc:i("./calc").calc,crossTraceCalc:i("./calc").crossTraceCalc,plot:i("./plot").plot,style:i("./style"),styleOne:i("./style_one"),moduleType:"trace",name:"pie",basePlotModule:i("./base_plot"),categories:["pie-like","pie","showLegend"],meta:{}}},{"./attributes":910,"./base_plot":911,"./calc":912,"./defaults":913,"./layout_attributes":917,"./layout_defaults":918,"./plot":919,"./style":920,"./style_one":921}],917:[function(i,U,V){U.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],918:[function(i,U,V){var w=i("../../lib"),f=i("./layout_attributes");U.exports=function(T,e){function a(n,r){return w.coerce(T,e,f,n,r)}a("hiddenlabels"),a("piecolorway",e.colorway),a("extendpiecolors")}},{"../../lib":515,"./layout_attributes":917}],919:[function(i,U,V){var w=i("@plotly/d3"),f=i("../../plots/plots"),M=i("../../components/fx"),T=i("../../components/color"),e=i("../../components/drawing"),a=i("../../lib"),n=a.strScale,r=a.strTranslate,t=i("../../lib/svg_text_utils"),h=i("../bar/uniform_text"),s=h.recordMinTextSize,o=h.clearMinTextSize,y=i("../bar/constants").TEXTPAD,d=i("./helpers"),p=i("./event_data"),c=i("../../lib").isValidTextValue;function m(te,Y){var H=te._context.staticPlot,ee=te._fullLayout,ne=ee._size;o("pie",ee),_(Y,te),Q(Y,ne);var Z=a.makeTraceGroups(ee._pielayer,Y,"trace").each(function(q){var ie=w.select(this),se=q[0],ae=se.trace;j(q),ie.attr("stroke-linejoin","round"),ie.each(function(){var oe=w.select(this).selectAll("g.slice").data(q);oe.enter().append("g").classed("slice",!0),oe.exit().remove();var be=[[[],[]],[[],[]]],ce=!1;oe.each(function(we,Ce){if(we.hidden){w.select(this).selectAll("path,g").remove();return}we.pointNumber=we.i,we.curveNumber=ae.index,be[we.pxmid[1]<0?0:1][we.pxmid[0]<0?0:1].push(we);var Ke=se.cx,Ye=se.cy,Fe=w.select(this),Re=Fe.selectAll("path.surface").data([we]);if(Re.enter().append("path").classed("surface",!0).style({"pointer-events":H?"none":"all"}),Fe.call(x,te,q),ae.pull){var je=+d.castOption(ae.pull,we.pts)||0;je>0&&(Ke+=je*we.pxmid[0],Ye+=je*we.pxmid[1])}we.cxFinal=Ke,we.cyFinal=Ye;function xt(Lt,We,ot,Ge){var Me=Ge*(We[0]-Lt[0]),Ve=Ge*(We[1]-Lt[1]);return"a"+Ge*se.r+","+Ge*se.r+" 0 "+we.largeArc+(ot?" 1 ":" 0 ")+Me+","+Ve}var Nt=ae.hole;if(we.v===se.vTotal){var tr="M"+(Ke+we.px0[0])+","+(Ye+we.px0[1])+xt(we.px0,we.pxmid,!0,1)+xt(we.pxmid,we.px0,!0,1)+"Z";Nt?Re.attr("d","M"+(Ke+Nt*we.px0[0])+","+(Ye+Nt*we.px0[1])+xt(we.px0,we.pxmid,!1,Nt)+xt(we.pxmid,we.px0,!1,Nt)+"Z"+tr):Re.attr("d",tr)}else{var Ht=xt(we.px0,we.px1,!0,1);if(Nt){var Pt=1-Nt;Re.attr("d","M"+(Ke+Nt*we.px1[0])+","+(Ye+Nt*we.px1[1])+xt(we.px1,we.px0,!1,Nt)+"l"+Pt*we.px0[0]+","+Pt*we.px0[1]+Ht+"Z")}else Re.attr("d","M"+Ke+","+Ye+"l"+we.px0[0]+","+we.px0[1]+Ht+"Z")}ue(te,we,se);var $t=d.castOption(ae.textposition,we.pts),Ut=Fe.selectAll("g.slicetext").data(we.text&&$t!=="none"?[0]:[]);Ut.enter().append("g").classed("slicetext",!0),Ut.exit().remove(),Ut.each(function(){var Lt=a.ensureSingle(w.select(this),"text","",function(St){St.attr("data-notex",1)}),We=a.ensureUniformFontSize(te,$t==="outside"?u(ae,we,ee.font):A(ae,we,ee.font));Lt.text(we.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(e.font,We).call(t.convertToTspans,te);var ot=e.bBox(Lt.node()),Ge;if($t==="outside")Ge=I(ot,we);else if(Ge=g(ot,we,se),$t==="auto"&&Ge.scale<1){var Me=a.ensureUniformFontSize(te,ae.outsidetextfont);Lt.call(e.font,Me),ot=e.bBox(Lt.node()),Ge=I(ot,we)}var Ve=Ge.textPosAngle,Qe=Ve===void 0?we.pxmid:re(se.r,Ve);if(Ge.targetX=Ke+Qe[0]*Ge.rCenter+(Ge.x||0),Ge.targetY=Ye+Qe[1]*Ge.rCenter+(Ge.y||0),K(Ge,ot),Ge.outside){var tt=Ge.targetY;we.yLabelMin=tt-ot.height/2,we.yLabelMid=tt,we.yLabelMax=tt+ot.height/2,we.labelExtraX=0,we.labelExtraY=0,ce=!0}Ge.fontSize=We.size,s(ae.type,Ge,ee),q[Ce].transform=Ge,a.setTransormAndDisplay(Lt,Ge)})});var de=w.select(this).selectAll("g.titletext").data(ae.title.text?[0]:[]);if(de.enter().append("g").classed("titletext",!0),de.exit().remove(),de.each(function(){var we=a.ensureSingle(w.select(this),"text","",function(Ye){Ye.attr("data-notex",1)}),Ce=ae.title.text;ae._meta&&(Ce=a.templateString(Ce,ae._meta)),we.text(Ce).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(e.font,ae.title.font).call(t.convertToTspans,te);var Ke;ae.title.position==="middle center"?Ke=D(se):Ke=R(se,ne),we.attr("transform",r(Ke.x,Ke.y)+n(Math.min(1,Ke.scale))+r(Ke.tx,Ke.ty))}),ce&&G(be,ae),l(oe,ae),ce&&ae.automargin){var ye=e.bBox(ie.node()),ge=ae.domain,me=ne.w*(ge.x[1]-ge.x[0]),Se=ne.h*(ge.y[1]-ge.y[0]),Le=(.5*me-se.r)/ne.w,Oe=(.5*Se-se.r)/ne.h;f.autoMargin(te,"pie."+ae.uid+".automargin",{xl:ge.x[0]-Le,xr:ge.x[1]+Le,yb:ge.y[0]-Oe,yt:ge.y[1]+Oe,l:Math.max(se.cx-se.r-ye.left,0),r:Math.max(ye.right-(se.cx+se.r),0),b:Math.max(ye.bottom-(se.cy+se.r),0),t:Math.max(se.cy-se.r-ye.top,0),pad:5})}})});setTimeout(function(){Z.selectAll("tspan").each(function(){var q=w.select(this);q.attr("dy")&&q.attr("dy",q.attr("dy"))})},0)}function l(te,Y){te.each(function(H){var ee=w.select(this);if(!H.labelExtraX&&!H.labelExtraY){ee.select("path.textline").remove();return}var ne=ee.select("g.slicetext text");H.transform.targetX+=H.labelExtraX,H.transform.targetY+=H.labelExtraY,a.setTransormAndDisplay(ne,H.transform);var Z=H.cxFinal+H.pxmid[0],q=H.cyFinal+H.pxmid[1],ie="M"+Z+","+q,se=(H.yLabelMax-H.yLabelMin)*(H.pxmid[0]<0?-1:1)/4;if(H.labelExtraX){var ae=H.labelExtraX*H.pxmid[1]/H.pxmid[0],oe=H.yLabelMid+H.labelExtraY-(H.cyFinal+H.pxmid[1]);Math.abs(ae)>Math.abs(oe)?ie+="l"+oe*H.pxmid[0]/H.pxmid[1]+","+oe+"H"+(Z+H.labelExtraX+se):ie+="l"+H.labelExtraX+","+ae+"v"+(oe-ae)+"h"+se}else ie+="V"+(H.yLabelMid+H.labelExtraY)+"h"+se;a.ensureSingle(ee,"path","textline").call(T.stroke,Y.outsidetextfont.color).attr({"stroke-width":Math.min(2,Y.outsidetextfont.size/8),d:ie,fill:"none"})})}function x(te,Y,H){var ee=H[0],ne=ee.cx,Z=ee.cy,q=ee.trace,ie=q.type==="funnelarea";"_hasHoverLabel"in q||(q._hasHoverLabel=!1),"_hasHoverEvent"in q||(q._hasHoverEvent=!1),te.on("mouseover",function(se){var ae=Y._fullLayout,oe=Y._fullData[q.index];if(!(Y._dragging||ae.hovermode===!1)){var be=oe.hoverinfo;if(Array.isArray(be)&&(be=M.castHoverinfo({hoverinfo:[d.castOption(be,se.pts)],_module:q._module},ae,0)),be==="all"&&(be="label+text+value+percent+name"),oe.hovertemplate||be!=="none"&&be!=="skip"&&be){var ce=se.rInscribed||0,de=ne+se.pxmid[0]*(1-ce),ye=Z+se.pxmid[1]*(1-ce),ge=ae.separators,me=[];if(be&&be.indexOf("label")!==-1&&me.push(se.label),se.text=d.castOption(oe.hovertext||oe.text,se.pts),be&&be.indexOf("text")!==-1){var Se=se.text;a.isValidTextValue(Se)&&me.push(Se)}se.value=se.v,se.valueLabel=d.formatPieValue(se.v,ge),be&&be.indexOf("value")!==-1&&me.push(se.valueLabel),se.percent=se.v/ee.vTotal,se.percentLabel=d.formatPiePercent(se.percent,ge),be&&be.indexOf("percent")!==-1&&me.push(se.percentLabel);var Le=oe.hoverlabel,Oe=Le.font,we=[];M.loneHover({trace:q,x0:de-ce*ee.r,x1:de+ce*ee.r,y:ye,_x0:ie?ne+se.TL[0]:de-ce*ee.r,_x1:ie?ne+se.TR[0]:de+ce*ee.r,_y0:ie?Z+se.TL[1]:ye-ce*ee.r,_y1:ie?Z+se.BL[1]:ye+ce*ee.r,text:me.join("<br>"),name:oe.hovertemplate||be.indexOf("name")!==-1?oe.name:void 0,idealAlign:se.pxmid[0]<0?"left":"right",color:d.castOption(Le.bgcolor,se.pts)||se.color,borderColor:d.castOption(Le.bordercolor,se.pts),fontFamily:d.castOption(Oe.family,se.pts),fontSize:d.castOption(Oe.size,se.pts),fontColor:d.castOption(Oe.color,se.pts),nameLength:d.castOption(Le.namelength,se.pts),textAlign:d.castOption(Le.align,se.pts),hovertemplate:d.castOption(oe.hovertemplate,se.pts),hovertemplateLabels:se,eventData:[p(se,oe)]},{container:ae._hoverlayer.node(),outerContainer:ae._paper.node(),gd:Y,inOut_bbox:we}),se.bbox=we[0],q._hasHoverLabel=!0}q._hasHoverEvent=!0,Y.emit("plotly_hover",{points:[p(se,oe)],event:w.event})}}),te.on("mouseout",function(se){var ae=Y._fullLayout,oe=Y._fullData[q.index],be=w.select(this).datum();q._hasHoverEvent&&(se.originalEvent=w.event,Y.emit("plotly_unhover",{points:[p(be,oe)],event:w.event}),q._hasHoverEvent=!1),q._hasHoverLabel&&(M.loneUnhover(ae._hoverlayer.node()),q._hasHoverLabel=!1)}),te.on("click",function(se){var ae=Y._fullLayout,oe=Y._fullData[q.index];Y._dragging||ae.hovermode===!1||(Y._hoverdata=[p(se,oe)],M.click(Y,w.event))})}function u(te,Y,H){var ee=d.castOption(te.outsidetextfont.color,Y.pts)||d.castOption(te.textfont.color,Y.pts)||H.color,ne=d.castOption(te.outsidetextfont.family,Y.pts)||d.castOption(te.textfont.family,Y.pts)||H.family,Z=d.castOption(te.outsidetextfont.size,Y.pts)||d.castOption(te.textfont.size,Y.pts)||H.size;return{color:ee,family:ne,size:Z}}function A(te,Y,H){var ee=d.castOption(te.insidetextfont.color,Y.pts);!ee&&te._input.textfont&&(ee=d.castOption(te._input.textfont.color,Y.pts));var ne=d.castOption(te.insidetextfont.family,Y.pts)||d.castOption(te.textfont.family,Y.pts)||H.family,Z=d.castOption(te.insidetextfont.size,Y.pts)||d.castOption(te.textfont.size,Y.pts)||H.size;return{color:ee||T.contrast(Y.color),family:ne,size:Z}}function _(te,Y){for(var H,ee,ne=0;ne<te.length;ne++)if(H=te[ne][0],ee=H.trace,ee.title.text){var Z=ee.title.text;ee._meta&&(Z=a.templateString(Z,ee._meta));var q=e.tester.append("text").attr("data-notex",1).text(Z).call(e.font,ee.title.font).call(t.convertToTspans,Y),ie=e.bBox(q.node(),!0);H.titleBox={width:ie.width,height:ie.height},q.remove()}}function g(te,Y,H){var ee=H.r||Y.rpx1,ne=Y.rInscribed,Z=Y.startangle===Y.stopangle;if(Z)return{rCenter:1-ne,scale:0,rotate:0,textPosAngle:0};var q=Y.ring,ie=q===1&&Math.abs(Y.startangle-Y.stopangle)===Math.PI*2,se=Y.halfangle,ae=Y.midangle,oe=H.trace.insidetextorientation,be=oe==="horizontal",ce=oe==="tangential",de=oe==="radial",ye=oe==="auto",ge=[],me;if(!ye){var Se=function(Fe,Re){if(b(Y,Fe)){var je=Math.abs(Fe-Y.startangle),xt=Math.abs(Fe-Y.stopangle),Nt=je<xt?je:xt;Re==="tan"?me=k(te,ee,q,Nt,0):me=v(te,ee,q,Nt,Math.PI/2),me.textPosAngle=Fe,ge.push(me)}},Le;if(be||ce){for(Le=4;Le>=-4;Le-=2)Se(Math.PI*Le,"tan");for(Le=4;Le>=-4;Le-=2)Se(Math.PI*(Le+1),"tan")}if(be||de){for(Le=4;Le>=-4;Le-=2)Se(Math.PI*(Le+1.5),"rad");for(Le=4;Le>=-4;Le-=2)Se(Math.PI*(Le+.5),"rad")}}if(ie||ye||be){var Oe=Math.sqrt(te.width*te.width+te.height*te.height);if(me={scale:ne*ee*2/Oe,rCenter:1-ne,rotate:0},me.textPosAngle=(Y.startangle+Y.stopangle)/2,me.scale>=1)return me;ge.push(me)}(ye||de)&&(me=v(te,ee,q,se,ae),me.textPosAngle=(Y.startangle+Y.stopangle)/2,ge.push(me)),(ye||ce)&&(me=k(te,ee,q,se,ae),me.textPosAngle=(Y.startangle+Y.stopangle)/2,ge.push(me));for(var we=0,Ce=0,Ke=0;Ke<ge.length;Ke++){var Ye=ge[Ke].scale;if(Ce<Ye&&(Ce=Ye,we=Ke),!ye&&Ce>=1)break}return ge[we]}function b(te,Y){var H=te.startangle,ee=te.stopangle;return H>Y&&Y>ee||H<Y&&Y<ee}function v(te,Y,H,ee,ne){Y=Math.max(0,Y-2*y);var Z=te.width/te.height,q=C(Z,ee,Y,H);return{scale:q*2/te.height,rCenter:S(Z,q/Y),rotate:E(ne)}}function k(te,Y,H,ee,ne){Y=Math.max(0,Y-2*y);var Z=te.height/te.width,q=C(Z,ee,Y,H);return{scale:q*2/te.width,rCenter:S(Z,q/Y),rotate:E(ne+Math.PI/2)}}function S(te,Y){return Math.cos(Y)-te*Y}function E(te){return(180/Math.PI*te+720)%180-90}function C(te,Y,H,ee){var ne=te+1/(2*Math.tan(Y));return H*Math.min(1/(Math.sqrt(ne*ne+.5)+ne),ee/(Math.sqrt(te*te+ee/2)+te))}function F(te,Y){return te.v===Y.vTotal&&!Y.trace.hole?1:Math.min(1/(1+1/Math.sin(te.halfangle)),te.ring/2)}function I(te,Y){var H=Y.pxmid[0],ee=Y.pxmid[1],ne=te.width/2,Z=te.height/2;return H<0&&(ne*=-1),ee<0&&(Z*=-1),{scale:1,rCenter:1,rotate:0,x:ne+Math.abs(Z)*(ne>0?1:-1)/2,y:Z/(1+H*H/(ee*ee)),outside:!0}}function D(te){var Y=Math.sqrt(te.titleBox.width*te.titleBox.width+te.titleBox.height*te.titleBox.height);return{x:te.cx,y:te.cy,scale:te.trace.hole*te.r*2/Y,tx:0,ty:-te.titleBox.height/2+te.trace.title.font.size}}function R(te,Y){var H=1,ee=1,ne,Z=te.trace,q={x:te.cx,y:te.cy},ie={tx:0,ty:0};ie.ty+=Z.title.font.size,ne=B(Z),Z.title.position.indexOf("top")!==-1?(q.y-=(1+ne)*te.r,ie.ty-=te.titleBox.height):Z.title.position.indexOf("bottom")!==-1&&(q.y+=(1+ne)*te.r);var se=O(te.r,te.trace.aspectratio),ae=Y.w*(Z.domain.x[1]-Z.domain.x[0])/2;return Z.title.position.indexOf("left")!==-1?(ae=ae+se,q.x-=(1+ne)*se,ie.tx+=te.titleBox.width/2):Z.title.position.indexOf("center")!==-1?ae*=2:Z.title.position.indexOf("right")!==-1&&(ae=ae+se,q.x+=(1+ne)*se,ie.tx-=te.titleBox.width/2),H=ae/te.titleBox.width,ee=z(te,Y)/te.titleBox.height,{x:q.x,y:q.y,scale:Math.min(H,ee),tx:ie.tx,ty:ie.ty}}function O(te,Y){return te/(Y===void 0?1:Y)}function z(te,Y){var H=te.trace,ee=Y.h*(H.domain.y[1]-H.domain.y[0]);return Math.min(te.titleBox.height,ee/2)}function B(te){var Y=te.pull;if(!Y)return 0;var H;if(Array.isArray(Y))for(Y=0,H=0;H<te.pull.length;H++)te.pull[H]>Y&&(Y=te.pull[H]);return Y}function G(te,Y){var H,ee,ne,Z,q,ie,se,ae,oe,be,ce,de,ye;function ge(Oe,we){return Oe.pxmid[1]-we.pxmid[1]}function me(Oe,we){return we.pxmid[1]-Oe.pxmid[1]}function Se(Oe,we){we||(we={});var Ce=we.labelExtraY+(ee?we.yLabelMax:we.yLabelMin),Ke=ee?Oe.yLabelMin:Oe.yLabelMax,Ye=ee?Oe.yLabelMax:Oe.yLabelMin,Fe=Oe.cyFinal+q(Oe.px0[1],Oe.px1[1]),Re=Ce-Ke,je,xt,Nt,tr,Ht,Pt;if(Re*se>0&&(Oe.labelExtraY=Re),!!Array.isArray(Y.pull))for(xt=0;xt<be.length;xt++)Nt=be[xt],!(Nt===Oe||(d.castOption(Y.pull,Oe.pts)||0)>=(d.castOption(Y.pull,Nt.pts)||0))&&((Oe.pxmid[1]-Nt.pxmid[1])*se>0?(tr=Nt.cyFinal+q(Nt.px0[1],Nt.px1[1]),Re=tr-Ke-Oe.labelExtraY,Re*se>0&&(Oe.labelExtraY+=Re)):(Ye+Oe.labelExtraY-Fe)*se>0&&(je=3*ie*Math.abs(xt-be.indexOf(Oe)),Ht=Nt.cxFinal+Z(Nt.px0[0],Nt.px1[0]),Pt=Ht+je-(Oe.cxFinal+Oe.pxmid[0])-Oe.labelExtraX,Pt*ie>0&&(Oe.labelExtraX+=Pt)))}for(ee=0;ee<2;ee++)for(ne=ee?ge:me,q=ee?Math.max:Math.min,se=ee?1:-1,H=0;H<2;H++){for(Z=H?Math.max:Math.min,ie=H?1:-1,ae=te[ee][H],ae.sort(ne),oe=te[1-ee][H],be=oe.concat(ae),de=[],ce=0;ce<ae.length;ce++)ae[ce].yLabelMid!==void 0&&de.push(ae[ce]);for(ye=!1,ce=0;ee&&ce<oe.length;ce++)if(oe[ce].yLabelMid!==void 0){ye=oe[ce];break}for(ce=0;ce<de.length;ce++){var Le=ce&&de[ce-1];ye&&!ce&&(Le=ye),Se(de[ce],Le)}}}function Q(te,Y){for(var H=[],ee=0;ee<te.length;ee++){var ne=te[ee][0],Z=ne.trace,q=Z.domain,ie=Y.w*(q.x[1]-q.x[0]),se=Y.h*(q.y[1]-q.y[0]);Z.title.text&&Z.title.position!=="middle center"&&(se-=z(ne,Y));var ae=ie/2,oe=se/2;Z.type==="funnelarea"&&!Z.scalegroup&&(oe/=Z.aspectratio),ne.r=Math.min(ae,oe)/(1+B(Z)),ne.cx=Y.l+Y.w*(Z.domain.x[1]+Z.domain.x[0])/2,ne.cy=Y.t+Y.h*(1-Z.domain.y[0])-se/2,Z.title.text&&Z.title.position.indexOf("bottom")!==-1&&(ne.cy-=z(ne,Y)),Z.scalegroup&&H.indexOf(Z.scalegroup)===-1&&H.push(Z.scalegroup)}X(te,H)}function X(te,Y){for(var H,ee,ne,Z=0;Z<Y.length;Z++){var q=1/0,ie=Y[Z];for(ee=0;ee<te.length;ee++)if(H=te[ee][0],ne=H.trace,ne.scalegroup===ie){var se;if(ne.type==="pie")se=H.r*H.r;else if(ne.type==="funnelarea"){var ae,oe;ne.aspectratio>1?(ae=H.r,oe=ae/ne.aspectratio):(oe=H.r,ae=oe*ne.aspectratio),ae*=(1+ne.baseratio)/2,se=ae*oe}q=Math.min(q,se/H.vTotal)}for(ee=0;ee<te.length;ee++)if(H=te[ee][0],ne=H.trace,ne.scalegroup===ie){var be=q*H.vTotal;ne.type==="funnelarea"&&(be/=(1+ne.baseratio)/2,be/=ne.aspectratio),H.r=Math.sqrt(be)}}}function j(te){var Y=te[0],H=Y.r,ee=Y.trace,ne=d.getRotationAngle(ee.rotation),Z=2*Math.PI/Y.vTotal,q="px0",ie="px1",se,ae,oe;if(ee.direction==="counterclockwise"){for(se=0;se<te.length&&te[se].hidden;se++);if(se===te.length)return;ne+=Z*te[se].v,Z*=-1,q="px1",ie="px0"}for(oe=re(H,ne),se=0;se<te.length;se++)ae=te[se],!ae.hidden&&(ae[q]=oe,ae.startangle=ne,ne+=Z*ae.v/2,ae.pxmid=re(H,ne),ae.midangle=ne,ne+=Z*ae.v/2,oe=re(H,ne),ae.stopangle=ne,ae[ie]=oe,ae.largeArc=ae.v>Y.vTotal/2?1:0,ae.halfangle=Math.PI*Math.min(ae.v/Y.vTotal,.5),ae.ring=1-ee.hole,ae.rInscribed=F(ae,Y))}function re(te,Y){return[te*Math.sin(Y),-te*Math.cos(Y)]}function ue(te,Y,H){var ee=te._fullLayout,ne=H.trace,Z=ne.texttemplate,q=ne.textinfo;if(!Z&&q&&q!=="none"){var ie=q.split("+"),se=function(we){return ie.indexOf(we)!==-1},ae=se("label"),oe=se("text"),be=se("value"),ce=se("percent"),de=ee.separators,ye;if(ye=ae?[Y.label]:[],oe){var ge=d.getFirstFilled(ne.text,Y.pts);c(ge)&&ye.push(ge)}be&&ye.push(d.formatPieValue(Y.v,de)),ce&&ye.push(d.formatPiePercent(Y.v/H.vTotal,de)),Y.text=ye.join("<br>")}function me(we){return{label:we.label,value:we.v,valueLabel:d.formatPieValue(we.v,ee.separators),percent:we.v/H.vTotal,percentLabel:d.formatPiePercent(we.v/H.vTotal,ee.separators),color:we.color,text:we.text,customdata:a.castOption(ne,we.i,"customdata")}}if(Z){var Se=a.castOption(ne,Y.i,"texttemplate");if(!Se)Y.text="";else{var Le=me(Y),Oe=d.getFirstFilled(ne.text,Y.pts);(c(Oe)||Oe==="")&&(Le.text=Oe),Y.text=a.texttemplateString(Se,Le,te._fullLayout._d3locale,Le,ne._meta||{})}}}function K(te,Y){var H=te.rotate*Math.PI/180,ee=Math.cos(H),ne=Math.sin(H),Z=(Y.left+Y.right)/2,q=(Y.top+Y.bottom)/2;te.textX=Z*ee-q*ne,te.textY=Z*ne+q*ee,te.noCenter=!0}U.exports={plot:m,formatSliceLabel:ue,transformInsideText:g,determineInsideTextFont:A,positionTitleOutside:R,prerenderTitles:_,layoutAreas:Q,attachFxHandlers:x,computeTransform:K}},{"../../components/color":367,"../../components/drawing":389,"../../components/fx":407,"../../lib":515,"../../lib/svg_text_utils":541,"../../plots/plots":628,"../bar/constants":659,"../bar/uniform_text":673,"./event_data":914,"./helpers":915,"@plotly/d3":58}],920:[function(i,U,V){var w=i("@plotly/d3"),f=i("./style_one"),M=i("../bar/uniform_text").resizeText;U.exports=function(e){var a=e._fullLayout._pielayer.selectAll(".trace");M(e,a,"pie"),a.each(function(n){var r=n[0],t=r.trace,h=w.select(this);h.style({opacity:t.opacity}),h.selectAll("path.surface").each(function(s){w.select(this).call(f,s,t)})})}},{"../bar/uniform_text":673,"./style_one":921,"@plotly/d3":58}],921:[function(i,U,V){var w=i("../../components/color"),f=i("./helpers").castOption;U.exports=function(T,e,a){var n=a.marker.line,r=f(n.color,e.pts)||w.defaultLine,t=f(n.width,e.pts)||0;T.style("stroke-width",t).call(w.fill,e.color).call(w.stroke,r)}},{"../../components/color":367,"./helpers":915}],922:[function(i,U,V){var w=i("../scatter/attributes");U.exports={x:w.x,y:w.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:w.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"},transforms:void 0}},{"../scatter/attributes":936}],923:[function(i,U,V){var w=i("../../../stackgl_modules").gl_pointcloud2d,f=i("../../lib/str2rgbarray"),M=i("../../plots/cartesian/autorange").findExtremes,T=i("../scatter/get_trace_color");function e(r,t){this.scene=r,this.uid=t,this.type="pointcloud",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.idToIndex=new Int32Array(0),this.bounds=[0,0,0,0],this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]},this.pointcloud=w(r.glplot,this.pointcloudOptions),this.pointcloud._trace=this}var a=e.prototype;a.handlePick=function(r){var t=this.idToIndex[r.pointId];return{trace:this,dataCoord:r.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[t*2],this.pickXYData[t*2+1]]:[this.pickXData[t],this.pickYData[t]],textLabel:Array.isArray(this.textLabels)?this.textLabels[t]:this.textLabels,color:this.color,name:this.name,pointIndex:t,hoverinfo:this.hoverinfo}},a.update=function(r){this.index=r.index,this.textLabels=r.text,this.name=r.name,this.hoverinfo=r.hoverinfo,this.bounds=[1/0,1/0,-1/0,-1/0],this.updateFast(r),this.color=T(r,{})},a.updateFast=function(r){var t=this.xData=this.pickXData=r.x,h=this.yData=this.pickYData=r.y,s=this.pickXYData=r.xy,o=r.xbounds&&r.ybounds,y=r.indices,d,p,c,m=this.bounds,l,x,u;if(s){if(c=s,d=s.length>>>1,o)m[0]=r.xbounds[0],m[2]=r.xbounds[1],m[1]=r.ybounds[0],m[3]=r.ybounds[1];else for(u=0;u<d;u++)l=c[u*2],x=c[u*2+1],l<m[0]&&(m[0]=l),l>m[2]&&(m[2]=l),x<m[1]&&(m[1]=x),x>m[3]&&(m[3]=x);if(y)p=y;else for(p=new Int32Array(d),u=0;u<d;u++)p[u]=u}else for(d=t.length,c=new Float32Array(2*d),p=new Int32Array(d),u=0;u<d;u++)l=t[u],x=h[u],p[u]=u,c[u*2]=l,c[u*2+1]=x,l<m[0]&&(m[0]=l),l>m[2]&&(m[2]=l),x<m[1]&&(m[1]=x),x>m[3]&&(m[3]=x);this.idToIndex=p,this.pointcloudOptions.idToIndex=p,this.pointcloudOptions.positions=c;var A=f(r.marker.color),_=f(r.marker.border.color),g=r.opacity*r.marker.opacity;A[3]*=g,this.pointcloudOptions.color=A;var b=r.marker.blend;if(b===null){var v=100;b=t.length<v||h.length<v}this.pointcloudOptions.blend=b,_[3]*=g,this.pointcloudOptions.borderColor=_;var k=r.marker.sizemin,S=Math.max(r.marker.sizemax,r.marker.sizemin);this.pointcloudOptions.sizeMin=k,this.pointcloudOptions.sizeMax=S,this.pointcloudOptions.areaRatio=r.marker.border.arearatio,this.pointcloud.update(this.pointcloudOptions);var E=this.scene.xaxis,C=this.scene.yaxis,F=S/2||.5;r._extremes[E._id]=M(E,[m[0],m[2]],{ppad:F}),r._extremes[C._id]=M(C,[m[1],m[3]],{ppad:F})},a.dispose=function(){this.pointcloud.dispose()};function n(r,t){var h=new e(r,t.uid);return h.update(t),h}U.exports=n},{"../../../stackgl_modules":1133,"../../lib/str2rgbarray":540,"../../plots/cartesian/autorange":565,"../scatter/get_trace_color":946}],924:[function(i,U,V){var w=i("../../lib"),f=i("./attributes");U.exports=function(T,e,a){function n(r,t){return w.coerce(T,e,f,r,t)}n("x"),n("y"),n("xbounds"),n("ybounds"),T.xy&&T.xy instanceof Float32Array&&(e.xy=T.xy),T.indices&&T.indices instanceof Int32Array&&(e.indices=T.indices),n("text"),n("marker.color",a),n("marker.opacity"),n("marker.blend"),n("marker.sizemin"),n("marker.sizemax"),n("marker.border.color",a),n("marker.border.arearatio"),e._length=null}},{"../../lib":515,"./attributes":922}],925:[function(i,U,V){U.exports={attributes:i("./attributes"),supplyDefaults:i("./defaults"),calc:i("../scatter3d/calc"),plot:i("./convert"),moduleType:"trace",name:"pointcloud",basePlotModule:i("../../plots/gl2d"),categories:["gl","gl2d","showLegend"],meta:{}}},{"../../plots/gl2d":605,"../scatter3d/calc":965,"./attributes":922,"./convert":923,"./defaults":924}],926:[function(i,U,V){var w=i("../../plots/font_attributes"),f=i("../../plots/attributes"),M=i("../../components/color/attributes"),T=i("../../components/fx/attributes"),e=i("../../plots/domain").attributes,a=i("../../plots/template_attributes").hovertemplateAttrs,n=i("../../components/colorscale/attributes"),r=i("../../plot_api/plot_template").templatedArray,t=i("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers,h=i("../../lib/extend").extendFlat,s=i("../../plot_api/edit_types").overrideAll,o=U.exports=s({hoverinfo:h({},f.hoverinfo,{flags:[],arrayOk:!1}),hoverlabel:T.hoverlabel,domain:e({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s",description:t("value")},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:w({}),customdata:void 0,node:{label:{valType:"data_array",dflt:[]},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"}},x:{valType:"data_array",dflt:[]},y:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:M.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:T.hoverlabel,hovertemplate:a({},{keys:["value","label"]})},link:{arrowlen:{valType:"number",min:0,dflt:0},label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:M.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:T.hoverlabel,hovertemplate:a({},{keys:["value","label"]}),colorscales:r("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",dflt:""},cmax:{valType:"number",editType:"calc",dflt:1},cmin:{valType:"number",editType:"calc",dflt:0},colorscale:h(n().colorscale,{dflt:[[0,"white"],[1,"black"]]})})}},"calc","nested");o.transforms=void 0},{"../../components/color/attributes":366,"../../components/colorscale/attributes":374,"../../components/fx/attributes":398,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plot_api/plot_template":555,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/domain":593,"../../plots/font_attributes":594,"../../plots/template_attributes":642}],927:[function(i,U,V){var w=i("../../plot_api/edit_types").overrideAll,f=i("../../plots/get_data").getModuleCalcData,M=i("./plot"),T=i("../../components/fx/layout_attributes"),e=i("../../lib/setcursor"),a=i("../../components/dragelement"),n=i("../../components/selections").prepSelect,r=i("../../lib"),t=i("../../registry"),h="sankey";V.name=h,V.baseLayoutAttrOverrides=w({hoverlabel:T.hoverlabel},"plot","nested"),V.plot=function(o){var y=f(o.calcdata,h)[0];M(o,y),V.updateFx(o)},V.clean=function(o,y,d,p){var c=p._has&&p._has(h),m=y._has&&y._has(h);c&&!m&&(p._paperdiv.selectAll(".sankey").remove(),p._paperdiv.selectAll(".bgsankey").remove())},V.updateFx=function(o){for(var y=0;y<o._fullData.length;y++)s(o,y)};function s(o,y){var d=o._fullData[y],p=o._fullLayout,c=p.dragmode,m=p.dragmode==="pan"?"move":"crosshair",l=d._bgRect;if(!!l&&!(c==="pan"||c==="zoom")){e(l,m);var x={_id:"x",c2p:r.identity,_offset:d._sankey.translateX,_length:d._sankey.width},u={_id:"y",c2p:r.identity,_offset:d._sankey.translateY,_length:d._sankey.height},A={gd:o,element:l.node(),plotinfo:{id:y,xaxis:x,yaxis:u,fillRangeItems:r.noop},subplot:y,xaxes:[x],yaxes:[u],doneFnCompleted:function(_){var g=o._fullData[y],b,v=g.node.groups.slice(),k=[];function S(I){for(var D=g._sankey.graph.nodes,R=0;R<D.length;R++)if(D[R].pointNumber===I)return D[R]}for(var E=0;E<_.length;E++){var C=S(_[E].pointNumber);if(!!C)if(C.group){for(var F=0;F<C.childrenNodes.length;F++)k.push(C.childrenNodes[F].pointNumber);v[C.pointNumber-g.node._count]=!1}else k.push(C.pointNumber)}b=v.filter(Boolean).concat([k]),t.call("_guiRestyle",o,{"node.groups":[b]},y)}};A.prepFn=function(_,g,b){n(_,g,b,A,c)},a.init(A)}}},{"../../components/dragelement":386,"../../components/fx/layout_attributes":408,"../../components/selections":455,"../../lib":515,"../../lib/setcursor":536,"../../plot_api/edit_types":548,"../../plots/get_data":602,"../../registry":647,"./plot":932}],928:[function(i,U,V){var w=i("strongly-connected-components"),f=i("../../lib"),M=i("../../lib/gup").wrap,T=f.isArrayOrTypedArray,e=f.isIndex,a=i("../../components/colorscale");function n(t){var h=t.node,s=t.link,o=[],y=T(s.color),d=T(s.customdata),p={},c={},m=s.colorscales.length,l;for(l=0;l<m;l++){var x=s.colorscales[l],u=a.extractScale(x,{cLetter:"c"}),A=a.makeColorScaleFunc(u);c[x.label]=A}var _=0;for(l=0;l<s.value.length;l++)s.source[l]>_&&(_=s.source[l]),s.target[l]>_&&(_=s.target[l]);var g=_+1;t.node._count=g;var b,v=t.node.groups,k={};for(l=0;l<v.length;l++){var S=v[l];for(b=0;b<S.length;b++){var E=S[b],C=g+l;k.hasOwnProperty(E)?f.warn("Node "+E+" is already part of a group."):k[E]=C}}var F={source:[],target:[]};for(l=0;l<s.value.length;l++){var I=s.value[l],D=s.source[l],R=s.target[l];if(!!(I>0&&e(D,g)&&e(R,g))&&!(k.hasOwnProperty(D)&&k.hasOwnProperty(R)&&k[D]===k[R])){k.hasOwnProperty(R)&&(R=k[R]),k.hasOwnProperty(D)&&(D=k[D]),D=+D,R=+R,p[D]=p[R]=!0;var O="";s.label&&s.label[l]&&(O=s.label[l]);var z=null;O&&c.hasOwnProperty(O)&&(z=c[O]),o.push({pointNumber:l,label:O,color:y?s.color[l]:s.color,customdata:d?s.customdata[l]:s.customdata,concentrationscale:z,source:D,target:R,value:+I}),F.source.push(D),F.target.push(R)}}var B=g+v.length,G=T(h.color),Q=T(h.customdata),X=[];for(l=0;l<B;l++)if(!!p[l]){var j=h.label[l];X.push({group:l>g-1,childrenNodes:[],pointNumber:l,label:j,color:G?h.color[l]:h.color,customdata:Q?h.customdata[l]:h.customdata})}var re=!1;return r(B,F.source,F.target)&&(re=!0),{circular:re,links:o,nodes:X,groups:v,groupLookup:k}}function r(t,h,s){for(var o=f.init2dArray(t,0),y=0;y<Math.min(h.length,s.length);y++)if(f.isIndex(h[y],t)&&f.isIndex(s[y],t)){if(h[y]===s[y])return!0;o[h[y]].push(s[y])}var d=w(o);return d.components.some(function(p){return p.length>1})}U.exports=function(h,s){var o=n(s);return M({circular:o.circular,_nodes:o.nodes,_links:o.links,_groups:o.groups,_groupLookup:o.groupLookup})}},{"../../components/colorscale":379,"../../lib":515,"../../lib/gup":512,"strongly-connected-components":307}],929:[function(i,U,V){U.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeLabel:"node-label"}}},{}],930:[function(i,U,V){var w=i("../../lib"),f=i("./attributes"),M=i("../../components/color"),T=i("tinycolor2"),e=i("../../plots/domain").defaults,a=i("../../components/fx/hoverlabel_defaults"),n=i("../../plot_api/plot_template"),r=i("../../plots/array_container_defaults");U.exports=function(s,o,y,d){function p(S,E){return w.coerce(s,o,f,S,E)}var c=w.extendDeep(d.hoverlabel,s.hoverlabel),m=s.node,l=n.newContainer(o,"node");function x(S,E){return w.coerce(m,l,f.node,S,E)}x("label"),x("groups"),x("x"),x("y"),x("pad"),x("thickness"),x("line.color"),x("line.width"),x("hoverinfo",s.hoverinfo),a(m,l,x,c),x("hovertemplate");var u=d.colorway,A=function(S){return u[S%u.length]};x("color",l.label.map(function(S,E){return M.addOpacity(A(E),.8)})),x("customdata");var _=s.link||{},g=n.newContainer(o,"link");function b(S,E){return w.coerce(_,g,f.link,S,E)}b("label"),b("arrowlen"),b("source"),b("target"),b("value"),b("line.color"),b("line.width"),b("hoverinfo",s.hoverinfo),a(_,g,b,c),b("hovertemplate");var v=T(d.paper_bgcolor).getLuminance()<.333?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)";b("color",w.repeat(v,g.value.length)),b("customdata"),r(_,g,{name:"colorscales",handleItemDefaults:t}),e(o,d,p),p("orientation"),p("valueformat"),p("valuesuffix");var k;l.x.length&&l.y.length&&(k="freeform"),p("arrangement",k),w.coerceFont(p,"textfont",w.extendFlat({},d.font)),o._length=null};function t(h,s){function o(y,d){return w.coerce(h,s,f.link.colorscales,y,d)}o("label"),o("cmin"),o("cmax"),o("colorscale")}},{"../../components/color":367,"../../components/fx/hoverlabel_defaults":405,"../../lib":515,"../../plot_api/plot_template":555,"../../plots/array_container_defaults":561,"../../plots/domain":593,"./attributes":926,tinycolor2:313}],931:[function(i,U,V){U.exports={attributes:i("./attributes"),supplyDefaults:i("./defaults"),calc:i("./calc"),plot:i("./plot"),moduleType:"trace",name:"sankey",basePlotModule:i("./base_plot"),selectPoints:i("./select.js"),categories:["noOpacity"],meta:{}}},{"./attributes":926,"./base_plot":927,"./calc":928,"./defaults":930,"./plot":932,"./select.js":934}],932:[function(i,U,V){var w=i("@plotly/d3"),f=i("../../lib"),M=f.numberFormat,T=i("./render"),e=i("../../components/fx"),a=i("../../components/color"),n=i("./constants").cn,r=f._;function t(u){return u!==""}function h(u,A){return u.filter(function(_){return _.key===A.traceId})}function s(u,A){w.select(u).select("path").style("fill-opacity",A),w.select(u).select("rect").style("fill-opacity",A)}function o(u){w.select(u).select("text.name").style("fill","black")}function y(u){return function(A){return u.node.sourceLinks.indexOf(A.link)!==-1||u.node.targetLinks.indexOf(A.link)!==-1}}function d(u){return function(A){return A.node.sourceLinks.indexOf(u.link)!==-1||A.node.targetLinks.indexOf(u.link)!==-1}}function p(u,A,_){A&&_&&h(_,A).selectAll("."+n.sankeyLink).filter(y(A)).call(m.bind(0,A,_,!1))}function c(u,A,_){A&&_&&h(_,A).selectAll("."+n.sankeyLink).filter(y(A)).call(l.bind(0,A,_,!1))}function m(u,A,_,g){var b=g.datum().link.label;g.style("fill-opacity",function(v){if(!v.link.concentrationscale)return .4}),b&&h(A,u).selectAll("."+n.sankeyLink).filter(function(v){return v.link.label===b}).style("fill-opacity",function(v){if(!v.link.concentrationscale)return .4}),_&&h(A,u).selectAll("."+n.sankeyNode).filter(d(u)).call(p)}function l(u,A,_,g){var b=g.datum().link.label;g.style("fill-opacity",function(v){return v.tinyColorAlpha}),b&&h(A,u).selectAll("."+n.sankeyLink).filter(function(v){return v.link.label===b}).style("fill-opacity",function(v){return v.tinyColorAlpha}),_&&h(A,u).selectAll(n.sankeyNode).filter(d(u)).call(c)}function x(u,A){var _=u.hoverlabel||{},g=f.nestedProperty(_,A).get();return Array.isArray(g)?!1:g}U.exports=function(A,_){for(var g=A._fullLayout,b=g._paper,v=g._size,k=0;k<A._fullData.length;k++)if(!!A._fullData[k].visible&&A._fullData[k].type===n.sankey&&!A._fullData[k]._viewInitial){var S=A._fullData[k].node;A._fullData[k]._viewInitial={node:{groups:S.groups.slice(),x:S.x.slice(),y:S.y.slice()}}}var E=function(re,ue){var K=ue.link;K.originalEvent=w.event,A._hoverdata=[K],e.click(A,{target:!0})},C=function(re,ue,K){A._fullLayout.hovermode!==!1&&(w.select(re).call(m.bind(0,ue,K,!0)),ue.link.trace.link.hoverinfo!=="skip"&&(ue.link.fullData=ue.link.trace,A.emit("plotly_hover",{event:w.event,points:[ue.link]})))},F=r(A,"source:")+" ",I=r(A,"target:")+" ",D=r(A,"concentration:")+" ",R=r(A,"incoming flow count:")+" ",O=r(A,"outgoing flow count:")+" ",z=function(re,ue){if(A._fullLayout.hovermode===!1)return;var K=ue.link.trace.link;if(K.hoverinfo==="none"||K.hoverinfo==="skip")return;var te=[];function Y(se){var ae,oe;se.circular?(ae=(se.circularPathData.leftInnerExtent+se.circularPathData.rightInnerExtent)/2,oe=se.circularPathData.verticalFullExtent):(ae=(se.source.x1+se.target.x0)/2,oe=(se.y0+se.y1)/2);var be=[ae,oe];return se.trace.orientation==="v"&&be.reverse(),be[0]+=ue.parent.translateX,be[1]+=ue.parent.translateY,be}for(var H=0,ee=0;ee<ue.flow.links.length;ee++){var ne=ue.flow.links[ee];if(!(A._fullLayout.hovermode==="closest"&&ue.link.pointNumber!==ne.pointNumber)){ue.link.pointNumber===ne.pointNumber&&(H=ee),ne.fullData=ne.trace,K=ue.link.trace.link;var Z=Y(ne),q={valueLabel:M(ue.valueFormat)(ne.value)+ue.valueSuffix};te.push({x:Z[0],y:Z[1],name:q.valueLabel,text:[ne.label||"",F+ne.source.label,I+ne.target.label,ne.concentrationscale?D+M("%0.2f")(ne.flow.labelConcentration):""].filter(t).join("<br>"),color:x(K,"bgcolor")||a.addOpacity(ne.color,1),borderColor:x(K,"bordercolor"),fontFamily:x(K,"font.family"),fontSize:x(K,"font.size"),fontColor:x(K,"font.color"),nameLength:x(K,"namelength"),textAlign:x(K,"align"),idealAlign:w.event.x<Z[0]?"right":"left",hovertemplate:K.hovertemplate,hovertemplateLabels:q,eventData:[ne]})}}var ie=e.loneHover(te,{container:g._hoverlayer.node(),outerContainer:g._paper.node(),gd:A,anchorIndex:H});ie.each(function(){var se=this;ue.link.concentrationscale||s(se,.65),o(se)})},B=function(re,ue,K){A._fullLayout.hovermode!==!1&&(w.select(re).call(l.bind(0,ue,K,!0)),ue.link.trace.link.hoverinfo!=="skip"&&(ue.link.fullData=ue.link.trace,A.emit("plotly_unhover",{event:w.event,points:[ue.link]})),e.loneUnhover(g._hoverlayer.node()))},G=function(re,ue,K){var te=ue.node;te.originalEvent=w.event,A._hoverdata=[te],w.select(re).call(c,ue,K),e.click(A,{target:!0})},Q=function(re,ue,K){A._fullLayout.hovermode!==!1&&(w.select(re).call(p,ue,K),ue.node.trace.node.hoverinfo!=="skip"&&(ue.node.fullData=ue.node.trace,A.emit("plotly_hover",{event:w.event,points:[ue.node]})))},X=function(re,ue){if(A._fullLayout.hovermode!==!1){var K=ue.node.trace.node;if(!(K.hoverinfo==="none"||K.hoverinfo==="skip")){var te=w.select(re).select("."+n.nodeRect),Y=A._fullLayout._paperdiv.node().getBoundingClientRect(),H=te.node().getBoundingClientRect(),ee=H.left-2-Y.left,ne=H.right+2-Y.left,Z=H.top+H.height/4-Y.top,q={valueLabel:M(ue.valueFormat)(ue.node.value)+ue.valueSuffix};ue.node.fullData=ue.node.trace,A._fullLayout._calcInverseTransform(A);var ie=A._fullLayout._invScaleX,se=A._fullLayout._invScaleY,ae=e.loneHover({x0:ie*ee,x1:ie*ne,y:se*Z,name:M(ue.valueFormat)(ue.node.value)+ue.valueSuffix,text:[ue.node.label,R+ue.node.targetLinks.length,O+ue.node.sourceLinks.length].filter(t).join("<br>"),color:x(K,"bgcolor")||ue.tinyColorHue,borderColor:x(K,"bordercolor"),fontFamily:x(K,"font.family"),fontSize:x(K,"font.size"),fontColor:x(K,"font.color"),nameLength:x(K,"namelength"),textAlign:x(K,"align"),idealAlign:"left",hovertemplate:K.hovertemplate,hovertemplateLabels:q,eventData:[ue.node]},{container:g._hoverlayer.node(),outerContainer:g._paper.node(),gd:A});s(ae,.85),o(ae)}}},j=function(re,ue,K){A._fullLayout.hovermode!==!1&&(w.select(re).call(c,ue,K),ue.node.trace.node.hoverinfo!=="skip"&&(ue.node.fullData=ue.node.trace,A.emit("plotly_unhover",{event:w.event,points:[ue.node]})),e.loneUnhover(g._hoverlayer.node()))};T(A,b,_,{width:v.w,height:v.h,margin:{t:v.t,r:v.r,b:v.b,l:v.l}},{linkEvents:{hover:C,follow:z,unhover:B,select:E},nodeEvents:{hover:Q,follow:X,unhover:j,select:G}})}},{"../../components/color":367,"../../components/fx":407,"../../lib":515,"./constants":929,"./render":933,"@plotly/d3":58}],933:[function(i,U,V){var w=i("d3-force"),f=i("d3-interpolate").interpolateNumber,M=i("@plotly/d3"),T=i("@plotly/d3-sankey"),e=i("@plotly/d3-sankey-circular"),a=i("./constants"),n=i("tinycolor2"),r=i("../../components/color"),t=i("../../components/drawing"),h=i("../../lib"),s=h.strTranslate,o=h.strRotate,y=i("../../lib/gup"),d=y.keyFun,p=y.repeat,c=y.unwrap,m=i("../../lib/svg_text_utils"),l=i("../../registry"),x=i("../../constants/alignment"),u=x.CAP_SHIFT,A=x.LINE_SPACING,_=3;function g(Y,H,ee){var ne=c(H),Z=ne.trace,q=Z.domain,ie=Z.orientation==="h",se=Z.node.pad,ae=Z.node.thickness,oe=Y.width*(q.x[1]-q.x[0]),be=Y.height*(q.y[1]-q.y[0]),ce=ne._nodes,de=ne._links,ye=ne.circular,ge;ye?ge=e.sankeyCircular().circularLinkGap(0):ge=T.sankey(),ge.iterations(a.sankeyIterations).size(ie?[oe,be]:[be,oe]).nodeWidth(ae).nodePadding(se).nodeId(function(Ht){return Ht.pointNumber}).nodes(ce).links(de);var me=ge();ge.nodePadding()<se&&h.warn("node.pad was reduced to ",ge.nodePadding()," to fit within the figure.");var Se,Le,Oe;for(var we in ne._groupLookup){var Ce=parseInt(ne._groupLookup[we]),Ke;for(Se=0;Se<me.nodes.length;Se++)if(me.nodes[Se].pointNumber===Ce){Ke=me.nodes[Se];break}if(!!Ke){var Ye={pointNumber:parseInt(we),x0:Ke.x0,x1:Ke.x1,y0:Ke.y0,y1:Ke.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]};me.nodes.unshift(Ye),Ke.childrenNodes.unshift(Ye)}}function Fe(){for(Se=0;Se<me.nodes.length;Se++){var Ht=me.nodes[Se],Pt={},$t,Ut;for(Le=0;Le<Ht.targetLinks.length;Le++)Ut=Ht.targetLinks[Le],$t=Ut.source.pointNumber+":"+Ut.target.pointNumber,Pt.hasOwnProperty($t)||(Pt[$t]=[]),Pt[$t].push(Ut);var Lt=Object.keys(Pt);for(Le=0;Le<Lt.length;Le++){$t=Lt[Le];var We=Pt[$t],ot=0,Ge={};for(Oe=0;Oe<We.length;Oe++)Ut=We[Oe],Ge[Ut.label]||(Ge[Ut.label]=0),Ge[Ut.label]+=Ut.value,ot+=Ut.value;for(Oe=0;Oe<We.length;Oe++)Ut=We[Oe],Ut.flow={value:ot,labelConcentration:Ge[Ut.label]/ot,concentration:Ut.value/ot,links:We},Ut.concentrationscale&&(Ut.color=n(Ut.concentrationscale(Ut.flow.labelConcentration)))}var Me=0;for(Le=0;Le<Ht.sourceLinks.length;Le++)Me+=Ht.sourceLinks[Le].value;for(Le=0;Le<Ht.sourceLinks.length;Le++)Ut=Ht.sourceLinks[Le],Ut.concentrationOut=Ut.value/Me;var Ve=0;for(Le=0;Le<Ht.targetLinks.length;Le++)Ve+=Ht.targetLinks[Le].value;for(Le=0;Le<Ht.targetLinks.length;Le++)Ut=Ht.targetLinks[Le],Ut.concenrationIn=Ut.value/Ve}}Fe();function Re(Ht){Ht.forEach(function(Pt){var $t,Ut,Lt=0,We=Pt.length,ot;for(Pt.sort(function(Ge,Me){return Ge.y0-Me.y0}),ot=0;ot<We;++ot)$t=Pt[ot],$t.y0>=Lt||(Ut=Lt-$t.y0,Ut>1e-6&&($t.y0+=Ut,$t.y1+=Ut)),Lt=$t.y1+se})}function je(Ht){var Pt=Ht.map(function(Me,Ve){return{x0:Me.x0,index:Ve}}).sort(function(Me,Ve){return Me.x0-Ve.x0}),$t=[],Ut=-1,Lt,We=-1/0,ot;for(Se=0;Se<Pt.length;Se++){var Ge=Ht[Pt[Se].index];Ge.x0>We+ae&&(Ut+=1,Lt=Ge.x0),We=Ge.x0,$t[Ut]||($t[Ut]=[]),$t[Ut].push(Ge),ot=Lt-Ge.x0,Ge.x0+=ot,Ge.x1+=ot}return $t}if(Z.node.x.length&&Z.node.y.length){for(Se=0;Se<Math.min(Z.node.x.length,Z.node.y.length,me.nodes.length);Se++)if(Z.node.x[Se]&&Z.node.y[Se]){var xt=[Z.node.x[Se]*oe,Z.node.y[Se]*be];me.nodes[Se].x0=xt[0]-ae/2,me.nodes[Se].x1=xt[0]+ae/2;var Nt=me.nodes[Se].y1-me.nodes[Se].y0;me.nodes[Se].y0=xt[1]-Nt/2,me.nodes[Se].y1=xt[1]+Nt/2}if(Z.arrangement==="snap"){ce=me.nodes;var tr=je(ce);Re(tr)}ge.update(me)}return{circular:ye,key:ee,trace:Z,guid:h.randstr(),horizontal:ie,width:oe,height:be,nodePad:Z.node.pad,nodeLineColor:Z.node.line.color,nodeLineWidth:Z.node.line.width,linkLineColor:Z.link.line.color,linkLineWidth:Z.link.line.width,linkArrowLength:Z.link.arrowlen,valueFormat:Z.valueformat,valueSuffix:Z.valuesuffix,textFont:Z.textfont,translateX:q.x[0]*Y.width+Y.margin.l,translateY:Y.height-q.y[1]*Y.height+Y.margin.t,dragParallel:ie?be:oe,dragPerpendicular:ie?oe:be,arrangement:Z.arrangement,sankey:ge,graph:me,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function b(Y,H,ee){var ne=n(H.color),Z=H.source.label+"|"+H.target.label,q=Z+"__"+ee;return H.trace=Y.trace,H.curveNumber=Y.trace.index,{circular:Y.circular,key:q,traceId:Y.key,pointNumber:H.pointNumber,link:H,tinyColorHue:r.tinyRGB(ne),tinyColorAlpha:ne.getAlpha(),linkPath:k,linkLineColor:Y.linkLineColor,linkLineWidth:Y.linkLineWidth,linkArrowLength:Y.linkArrowLength,valueFormat:Y.valueFormat,valueSuffix:Y.valueSuffix,sankey:Y.sankey,parent:Y,interactionState:Y.interactionState,flow:H.flow}}function v(Y,H){var ee="",ne=Y.width/2,Z=Y.circularPathData;return Y.circularLinkType==="top"?ee="M "+(Z.targetX-H)+" "+(Z.targetY+ne)+" L"+(Z.rightInnerExtent-H)+" "+(Z.targetY+ne)+"A"+(Z.rightLargeArcRadius+ne)+" "+(Z.rightSmallArcRadius+ne)+" 0 0 1 "+(Z.rightFullExtent-ne-H)+" "+(Z.targetY-Z.rightSmallArcRadius)+"L"+(Z.rightFullExtent-ne-H)+" "+Z.verticalRightInnerExtent+"A"+(Z.rightLargeArcRadius+ne)+" "+(Z.rightLargeArcRadius+ne)+" 0 0 1 "+(Z.rightInnerExtent-H)+" "+(Z.verticalFullExtent-ne)+"L"+Z.leftInnerExtent+" "+(Z.verticalFullExtent-ne)+"A"+(Z.leftLargeArcRadius+ne)+" "+(Z.leftLargeArcRadius+ne)+" 0 0 1 "+(Z.leftFullExtent+ne)+" "+Z.verticalLeftInnerExtent+"L"+(Z.leftFullExtent+ne)+" "+(Z.sourceY-Z.leftSmallArcRadius)+"A"+(Z.leftLargeArcRadius+ne)+" "+(Z.leftSmallArcRadius+ne)+" 0 0 1 "+Z.leftInnerExtent+" "+(Z.sourceY+ne)+"L"+Z.sourceX+" "+(Z.sourceY+ne)+"L"+Z.sourceX+" "+(Z.sourceY-ne)+"L"+Z.leftInnerExtent+" "+(Z.sourceY-ne)+"A"+(Z.leftLargeArcRadius-ne)+" "+(Z.leftSmallArcRadius-ne)+" 0 0 0 "+(Z.leftFullExtent-ne)+" "+(Z.sourceY-Z.leftSmallArcRadius)+"L"+(Z.leftFullExtent-ne)+" "+Z.verticalLeftInnerExtent+"A"+(Z.leftLargeArcRadius-ne)+" "+(Z.leftLargeArcRadius-ne)+" 0 0 0 "+Z.leftInnerExtent+" "+(Z.verticalFullExtent+ne)+"L"+(Z.rightInnerExtent-H)+" "+(Z.verticalFullExtent+ne)+"A"+(Z.rightLargeArcRadius-ne)+" "+(Z.rightLargeArcRadius-ne)+" 0 0 0 "+(Z.rightFullExtent+ne-H)+" "+Z.verticalRightInnerExtent+"L"+(Z.rightFullExtent+ne-H)+" "+(Z.targetY-Z.rightSmallArcRadius)+"A"+(Z.rightLargeArcRadius-ne)+" "+(Z.rightSmallArcRadius-ne)+" 0 0 0 "+(Z.rightInnerExtent-H)+" "+(Z.targetY-ne)+"L"+(Z.targetX-H)+" "+(Z.targetY-ne)+(H>0?"L"+Z.targetX+" "+Z.targetY:"")+"Z":ee="M "+(Z.targetX-H)+" "+(Z.targetY-ne)+" L"+(Z.rightInnerExtent-H)+" "+(Z.targetY-ne)+"A"+(Z.rightLargeArcRadius+ne)+" "+(Z.rightSmallArcRadius+ne)+" 0 0 0 "+(Z.rightFullExtent-ne-H)+" "+(Z.targetY+Z.rightSmallArcRadius)+"L"+(Z.rightFullExtent-ne-H)+" "+Z.verticalRightInnerExtent+"A"+(Z.rightLargeArcRadius+ne)+" "+(Z.rightLargeArcRadius+ne)+" 0 0 0 "+(Z.rightInnerExtent-H)+" "+(Z.verticalFullExtent+ne)+"L"+Z.leftInnerExtent+" "+(Z.verticalFullExtent+ne)+"A"+(Z.leftLargeArcRadius+ne)+" "+(Z.leftLargeArcRadius+ne)+" 0 0 0 "+(Z.leftFullExtent+ne)+" "+Z.verticalLeftInnerExtent+"L"+(Z.leftFullExtent+ne)+" "+(Z.sourceY+Z.leftSmallArcRadius)+"A"+(Z.leftLargeArcRadius+ne)+" "+(Z.leftSmallArcRadius+ne)+" 0 0 0 "+Z.leftInnerExtent+" "+(Z.sourceY-ne)+"L"+Z.sourceX+" "+(Z.sourceY-ne)+"L"+Z.sourceX+" "+(Z.sourceY+ne)+"L"+Z.leftInnerExtent+" "+(Z.sourceY+ne)+"A"+(Z.leftLargeArcRadius-ne)+" "+(Z.leftSmallArcRadius-ne)+" 0 0 1 "+(Z.leftFullExtent-ne)+" "+(Z.sourceY+Z.leftSmallArcRadius)+"L"+(Z.leftFullExtent-ne)+" "+Z.verticalLeftInnerExtent+"A"+(Z.leftLargeArcRadius-ne)+" "+(Z.leftLargeArcRadius-ne)+" 0 0 1 "+Z.leftInnerExtent+" "+(Z.verticalFullExtent-ne)+"L"+(Z.rightInnerExtent-H)+" "+(Z.verticalFullExtent-ne)+"A"+(Z.rightLargeArcRadius-ne)+" "+(Z.rightLargeArcRadius-ne)+" 0 0 1 "+(Z.rightFullExtent+ne-H)+" "+Z.verticalRightInnerExtent+"L"+(Z.rightFullExtent+ne-H)+" "+(Z.targetY+Z.rightSmallArcRadius)+"A"+(Z.rightLargeArcRadius-ne)+" "+(Z.rightSmallArcRadius-ne)+" 0 0 1 "+(Z.rightInnerExtent-H)+" "+(Z.targetY+ne)+"L"+(Z.targetX-H)+" "+(Z.targetY+ne)+(H>0?"L"+Z.targetX+" "+Z.targetY:"")+"Z",ee}function k(){var Y=.5;function H(ee){var ne=ee.linkArrowLength;if(ee.link.circular)return v(ee.link,ne);var Z=Math.abs((ee.link.target.x0-ee.link.source.x1)/2);ne>Z&&(ne=Z);var q=ee.link.source.x1,ie=ee.link.target.x0-ne,se=f(q,ie),ae=se(Y),oe=se(1-Y),be=ee.link.y0-ee.link.width/2,ce=ee.link.y0+ee.link.width/2,de=ee.link.y1-ee.link.width/2,ye=ee.link.y1+ee.link.width/2,ge="M"+q+","+be,me="C"+ae+","+be+" "+oe+","+de+" "+ie+","+de,Se="C"+oe+","+ye+" "+ae+","+ce+" "+q+","+ce,Le=ne>0?"L"+(ie+ne)+","+(de+ee.link.width/2):"";return Le+="L"+ie+","+ye,ge+me+Le+Se+"Z"}return H}function S(Y,H){var ee=n(H.color),ne=a.nodePadAcross,Z=Y.nodePad/2;H.dx=H.x1-H.x0,H.dy=H.y1-H.y0;var q=H.dx,ie=Math.max(.5,H.dy),se="node_"+H.pointNumber;return H.group&&(se=h.randstr()),H.trace=Y.trace,H.curveNumber=Y.trace.index,{index:H.pointNumber,key:se,partOfGroup:H.partOfGroup||!1,group:H.group,traceId:Y.key,trace:Y.trace,node:H,nodePad:Y.nodePad,nodeLineColor:Y.nodeLineColor,nodeLineWidth:Y.nodeLineWidth,textFont:Y.textFont,size:Y.horizontal?Y.height:Y.width,visibleWidth:Math.ceil(q),visibleHeight:ie,zoneX:-ne,zoneY:-Z,zoneWidth:q+2*ne,zoneHeight:ie+2*Z,labelY:Y.horizontal?H.dy/2+1:H.dx/2+1,left:H.originalLayer===1,sizeAcross:Y.width,forceLayouts:Y.forceLayouts,horizontal:Y.horizontal,darkBackground:ee.getBrightness()<=128,tinyColorHue:r.tinyRGB(ee),tinyColorAlpha:ee.getAlpha(),valueFormat:Y.valueFormat,valueSuffix:Y.valueSuffix,sankey:Y.sankey,graph:Y.graph,arrangement:Y.arrangement,uniqueNodeLabelPathId:[Y.guid,Y.key,se].join("_"),interactionState:Y.interactionState,figure:Y}}function E(Y){Y.attr("transform",function(H){return s(H.node.x0.toFixed(3),H.node.y0.toFixed(3))})}function C(Y){Y.call(E)}function F(Y,H){Y.call(C),H.attr("d",k())}function I(Y){Y.attr("width",function(H){return H.node.x1-H.node.x0}).attr("height",function(H){return H.visibleHeight})}function D(Y){return Y.link.width>1||Y.linkLineWidth>0}function R(Y){var H=s(Y.translateX,Y.translateY);return H+(Y.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function O(Y,H,ee){Y.on(".basic",null).on("mouseover.basic",function(ne){!ne.interactionState.dragInProgress&&!ne.partOfGroup&&(ee.hover(this,ne,H),ne.interactionState.hovered=[this,ne])}).on("mousemove.basic",function(ne){!ne.interactionState.dragInProgress&&!ne.partOfGroup&&(ee.follow(this,ne),ne.interactionState.hovered=[this,ne])}).on("mouseout.basic",function(ne){!ne.interactionState.dragInProgress&&!ne.partOfGroup&&(ee.unhover(this,ne,H),ne.interactionState.hovered=!1)}).on("click.basic",function(ne){ne.interactionState.hovered&&(ee.unhover(this,ne,H),ne.interactionState.hovered=!1),!ne.interactionState.dragInProgress&&!ne.partOfGroup&&ee.select(this,ne,H)})}function z(Y,H,ee,ne){var Z=M.behavior.drag().origin(function(q){return{x:q.node.x0+q.visibleWidth/2,y:q.node.y0+q.visibleHeight/2}}).on("dragstart",function(q){if(q.arrangement!=="fixed"&&(h.ensureSingle(ne._fullLayout._infolayer,"g","dragcover",function(se){ne._fullLayout._dragCover=se}),h.raiseToTop(this),q.interactionState.dragInProgress=q.node,re(q.node),q.interactionState.hovered&&(ee.nodeEvents.unhover.apply(0,q.interactionState.hovered),q.interactionState.hovered=!1),q.arrangement==="snap")){var ie=q.traceId+"|"+q.key;q.forceLayouts[ie]?q.forceLayouts[ie].alpha(1):B(Y,ie,q),G(Y,H,q,ie,ne)}}).on("drag",function(q){if(q.arrangement!=="fixed"){var ie=M.event.x,se=M.event.y;q.arrangement==="snap"?(q.node.x0=ie-q.visibleWidth/2,q.node.x1=ie+q.visibleWidth/2,q.node.y0=se-q.visibleHeight/2,q.node.y1=se+q.visibleHeight/2):(q.arrangement==="freeform"&&(q.node.x0=ie-q.visibleWidth/2,q.node.x1=ie+q.visibleWidth/2),se=Math.max(0,Math.min(q.size-q.visibleHeight/2,se)),q.node.y0=se-q.visibleHeight/2,q.node.y1=se+q.visibleHeight/2),re(q.node),q.arrangement!=="snap"&&(q.sankey.update(q.graph),F(Y.filter(ue(q)),H))}}).on("dragend",function(q){if(q.arrangement!=="fixed"){q.interactionState.dragInProgress=!1;for(var ie=0;ie<q.node.childrenNodes.length;ie++)q.node.childrenNodes[ie].x=q.node.x,q.node.childrenNodes[ie].y=q.node.y;q.arrangement!=="snap"&&X(q,ne)}});Y.on(".drag",null).call(Z)}function B(Y,H,ee,ne){K(ee.graph.nodes);var Z=ee.graph.nodes.filter(function(q){return q.originalX===ee.node.originalX}).filter(function(q){return!q.partOfGroup});ee.forceLayouts[H]=w.forceSimulation(Z).alphaDecay(0).force("collide",w.forceCollide().radius(function(q){return q.dy/2+ee.nodePad/2}).strength(1).iterations(a.forceIterations)).force("constrain",Q(Y,H,Z,ee)).stop()}function G(Y,H,ee,ne,Z){window.requestAnimationFrame(function q(){var ie;for(ie=0;ie<a.forceTicksPerFrame;ie++)ee.forceLayouts[ne].tick();var se=ee.graph.nodes;if(te(se),ee.sankey.update(ee.graph),F(Y.filter(ue(ee)),H),ee.forceLayouts[ne].alpha()>0)window.requestAnimationFrame(q);else{var ae=ee.node.originalX;ee.node.x0=ae-ee.visibleWidth/2,ee.node.x1=ae+ee.visibleWidth/2,X(ee,Z)}})}function Q(Y,H,ee,ne){return function(){for(var q=0,ie=0;ie<ee.length;ie++){var se=ee[ie];se===ne.interactionState.dragInProgress?(se.x=se.lastDraggedX,se.y=se.lastDraggedY):(se.vx=(se.originalX-se.x)/a.forceTicksPerFrame,se.y=Math.min(ne.size-se.dy/2,Math.max(se.dy/2,se.y))),q=Math.max(q,Math.abs(se.vx),Math.abs(se.vy))}!ne.interactionState.dragInProgress&&q<.1&&ne.forceLayouts[H].alpha()>0&&ne.forceLayouts[H].alpha(0)}}function X(Y,H){for(var ee=[],ne=[],Z=0;Z<Y.graph.nodes.length;Z++){var q=(Y.graph.nodes[Z].x0+Y.graph.nodes[Z].x1)/2,ie=(Y.graph.nodes[Z].y0+Y.graph.nodes[Z].y1)/2;ee.push(q/Y.figure.width),ne.push(ie/Y.figure.height)}l.call("_guiRestyle",H,{"node.x":[ee],"node.y":[ne]},Y.trace.index).then(function(){H._fullLayout._dragCover&&H._fullLayout._dragCover.remove()})}function j(Y){var H=[],ee;for(ee=0;ee<Y.length;ee++)Y[ee].originalX=(Y[ee].x0+Y[ee].x1)/2,Y[ee].originalY=(Y[ee].y0+Y[ee].y1)/2,H.indexOf(Y[ee].originalX)===-1&&H.push(Y[ee].originalX);for(H.sort(function(ne,Z){return ne-Z}),ee=0;ee<Y.length;ee++)Y[ee].originalLayerIndex=H.indexOf(Y[ee].originalX),Y[ee].originalLayer=Y[ee].originalLayerIndex/(H.length-1)}function re(Y){Y.lastDraggedX=Y.x0+Y.dx/2,Y.lastDraggedY=Y.y0+Y.dy/2}function ue(Y){return function(H){return H.node.originalX===Y.node.originalX}}function K(Y){for(var H=0;H<Y.length;H++)Y[H].y=(Y[H].y0+Y[H].y1)/2,Y[H].x=(Y[H].x0+Y[H].x1)/2}function te(Y){for(var H=0;H<Y.length;H++)Y[H].y0=Y[H].y-Y[H].dy/2,Y[H].y1=Y[H].y0+Y[H].dy,Y[H].x0=Y[H].x-Y[H].dx/2,Y[H].x1=Y[H].x0+Y[H].dx}U.exports=function(Y,H,ee,ne,Z){var q=Y._context.staticPlot,ie=!1;h.ensureSingle(Y._fullLayout._infolayer,"g","first-render",function(){ie=!0});var se=Y._fullLayout._dragCover,ae=ee.filter(function(Se){return c(Se).trace.visible}).map(g.bind(null,ne)),oe=H.selectAll("."+a.cn.sankey).data(ae,d);oe.exit().remove(),oe.enter().append("g").classed(a.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events",q?"none":"auto").attr("transform",R),oe.each(function(Se,Le){Y._fullData[Le]._sankey=Se;var Oe="bgsankey-"+Se.trace.uid+"-"+Le;h.ensureSingle(Y._fullLayout._draggers,"rect",Oe),Y._fullData[Le]._bgRect=M.select("."+Oe),Y._fullData[Le]._bgRect.style("pointer-events",q?"none":"all").attr("width",Se.width).attr("height",Se.height).attr("x",Se.translateX).attr("y",Se.translateY).classed("bgsankey",!0).style({fill:"transparent","stroke-width":0})}),oe.transition().ease(a.ease).duration(a.duration).attr("transform",R);var be=oe.selectAll("."+a.cn.sankeyLinks).data(p,d);be.enter().append("g").classed(a.cn.sankeyLinks,!0).style("fill","none");var ce=be.selectAll("."+a.cn.sankeyLink).data(function(Se){var Le=Se.graph.links;return Le.filter(function(Oe){return Oe.value}).map(b.bind(null,Se))},d);ce.enter().append("path").classed(a.cn.sankeyLink,!0).call(O,oe,Z.linkEvents),ce.style("stroke",function(Se){return D(Se)?r.tinyRGB(n(Se.linkLineColor)):Se.tinyColorHue}).style("stroke-opacity",function(Se){return D(Se)?r.opacity(Se.linkLineColor):Se.tinyColorAlpha}).style("fill",function(Se){return Se.tinyColorHue}).style("fill-opacity",function(Se){return Se.tinyColorAlpha}).style("stroke-width",function(Se){return D(Se)?Se.linkLineWidth:1}).attr("d",k()),ce.style("opacity",function(){return Y._context.staticPlot||ie||se?1:0}).transition().ease(a.ease).duration(a.duration).style("opacity",1),ce.exit().transition().ease(a.ease).duration(a.duration).style("opacity",0).remove();var de=oe.selectAll("."+a.cn.sankeyNodeSet).data(p,d);de.enter().append("g").classed(a.cn.sankeyNodeSet,!0),de.style("cursor",function(Se){switch(Se.arrangement){case"fixed":return"default";case"perpendicular":return"ns-resize";default:return"move"}});var ye=de.selectAll("."+a.cn.sankeyNode).data(function(Se){var Le=Se.graph.nodes;return j(Le),Le.map(S.bind(null,Se))},d);ye.enter().append("g").classed(a.cn.sankeyNode,!0).call(E).style("opacity",function(Se){return(Y._context.staticPlot||ie)&&!Se.partOfGroup?1:0}),ye.call(O,oe,Z.nodeEvents).call(z,ce,Z,Y),ye.transition().ease(a.ease).duration(a.duration).call(E).style("opacity",function(Se){return Se.partOfGroup?0:1}),ye.exit().transition().ease(a.ease).duration(a.duration).style("opacity",0).remove();var ge=ye.selectAll("."+a.cn.nodeRect).data(p);ge.enter().append("rect").classed(a.cn.nodeRect,!0).call(I),ge.style("stroke-width",function(Se){return Se.nodeLineWidth}).style("stroke",function(Se){return r.tinyRGB(n(Se.nodeLineColor))}).style("stroke-opacity",function(Se){return r.opacity(Se.nodeLineColor)}).style("fill",function(Se){return Se.tinyColorHue}).style("fill-opacity",function(Se){return Se.tinyColorAlpha}),ge.transition().ease(a.ease).duration(a.duration).call(I);var me=ye.selectAll("."+a.cn.nodeLabel).data(p);me.enter().append("text").classed(a.cn.nodeLabel,!0).style("cursor","default"),me.attr("data-notex",1).text(function(Se){return Se.node.label}).each(function(Se){var Le=M.select(this);t.font(Le,Se.textFont),m.convertToTspans(Le,Y)}).style("text-shadow",m.makeTextShadow(Y._fullLayout.paper_bgcolor)).attr("text-anchor",function(Se){return Se.horizontal&&Se.left?"end":"start"}).attr("transform",function(Se){var Le=M.select(this),Oe=m.lineCount(Le),we=Se.textFont.size*((Oe-1)*A-u),Ce=Se.nodeLineWidth/2+_,Ke=((Se.horizontal?Se.visibleHeight:Se.visibleWidth)-we)/2;Se.horizontal&&(Se.left?Ce=-Ce:Ce+=Se.visibleWidth);var Ye=Se.horizontal?"":"scale(-1,1)"+o(90);return s(Se.horizontal?Ce:Ke,Se.horizontal?Ke:Ce)+Ye}),me.transition().ease(a.ease).duration(a.duration)}},{"../../components/color":367,"../../components/drawing":389,"../../constants/alignment":483,"../../lib":515,"../../lib/gup":512,"../../lib/svg_text_utils":541,"../../registry":647,"./constants":929,"@plotly/d3":58,"@plotly/d3-sankey":57,"@plotly/d3-sankey-circular":56,"d3-force":111,"d3-interpolate":116,tinycolor2:313}],934:[function(i,U,V){U.exports=function(f,M){for(var T=f.cd,e=[],a=T[0].trace,n=a._sankey.graph.nodes,r=0;r<n.length;r++){var t=n[r];if(!t.partOfGroup){var h=[(t.x0+t.x1)/2,(t.y0+t.y1)/2];a.orientation==="v"&&h.reverse(),M&&M.contains(h,!1,r,f)&&e.push({pointNumber:t.pointNumber})}}return e}},{}],935:[function(i,U,V){var w=i("../../lib");U.exports=function(M,T){for(var e=0;e<M.length;e++)M[e].i=e;w.mergeArray(T.text,M,"tx"),w.mergeArray(T.texttemplate,M,"txt"),w.mergeArray(T.hovertext,M,"htx"),w.mergeArray(T.customdata,M,"data"),w.mergeArray(T.textposition,M,"tp"),T.textfont&&(w.mergeArrayCastPositive(T.textfont.size,M,"ts"),w.mergeArray(T.textfont.color,M,"tc"),w.mergeArray(T.textfont.family,M,"tf"));var a=T.marker;if(a){w.mergeArrayCastPositive(a.size,M,"ms"),w.mergeArrayCastPositive(a.opacity,M,"mo"),w.mergeArray(a.symbol,M,"mx"),w.mergeArray(a.angle,M,"ma"),w.mergeArray(a.standoff,M,"mf"),w.mergeArray(a.color,M,"mc");var n=a.line;a.line&&(w.mergeArray(n.color,M,"mlc"),w.mergeArrayCastPositive(n.width,M,"mlw"));var r=a.gradient;r&&r.type!=="none"&&(w.mergeArray(r.type,M,"mgt"),w.mergeArray(r.color,M,"mgc"))}}},{"../../lib":515}],936:[function(i,U,V){var w=i("../../plots/cartesian/axis_format_attributes").axisHoverFormat,f=i("../../plots/template_attributes").texttemplateAttrs,M=i("../../plots/template_attributes").hovertemplateAttrs,T=i("../../components/colorscale/attributes"),e=i("../../plots/font_attributes"),a=i("../../components/drawing/attributes").dash,n=i("../../components/drawing/attributes").pattern,r=i("../../components/drawing"),t=i("./constants"),h=i("../../lib/extend").extendFlat;function s(d){return{valType:"any",dflt:0,editType:"calc"}}function o(d){return{valType:"any",editType:"calc"}}function y(d){return{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"}}U.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:s(),yperiod:s(),xperiod0:o(),yperiod0:o(),xperiodalignment:y(),yperiodalignment:y(),xhoverformat:w("x"),yhoverformat:w("y"),stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:f({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:M({},{keys:t.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:h({},a,{editType:"style"}),backoff:{valType:"number",min:0,dflt:"auto",arrayOk:!0,editType:"plot"},simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:{valType:"color",editType:"style",anim:!0},fillpattern:n,marker:h({symbol:{valType:"enumerated",values:r.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},angle:{valType:"angle",dflt:0,arrayOk:!0,editType:"plot",anim:!1},angleref:{valType:"enumerated",values:["previous","up"],dflt:"up",editType:"plot",anim:!1},standoff:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"plot",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:h({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},T("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},T("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:e({editType:"calc",colorEditType:"style",arrayOk:!0})}},{"../../components/colorscale/attributes":374,"../../components/drawing":389,"../../components/drawing/attributes":388,"../../lib/extend":505,"../../plots/cartesian/axis_format_attributes":569,"../../plots/font_attributes":594,"../../plots/template_attributes":642,"./constants":940}],937:[function(i,U,V){var w=i("fast-isnumeric"),f=i("../../lib"),M=i("../../plots/cartesian/axes"),T=i("../../plots/cartesian/align_period"),e=i("../../constants/numerical").BADNUM,a=i("./subtypes"),n=i("./colorscale_calc"),r=i("./arrays_to_calcdata"),t=i("./calc_selection");function h(c,m){var l=c._fullLayout,x=m._xA=M.getFromId(c,m.xaxis||"x","x"),u=m._yA=M.getFromId(c,m.yaxis||"y","y"),A=x.makeCalcdata(m,"x"),_=u.makeCalcdata(m,"y"),g=T(m,x,"x",A),b=T(m,u,"y",_),v=g.vals,k=b.vals,S=m._length,E=new Array(S),C=m.ids,F=p(m,l,x,u),I=!1,D,R,O,z,B,G;y(l,m);var Q="x",X="y",j;if(F)f.pushUnique(F.traceIndices,m._expandedIndex),D=F.orientation==="v",D?(X="s",j="x"):(Q="s",j="y"),B=F.stackgaps==="interpolate";else{var re=o(m,S);s(c,m,x,u,v,k,re)}var ue=!!m.xperiodalignment,K=!!m.yperiodalignment;for(R=0;R<S;R++){var te=E[R]={},Y=w(v[R]),H=w(k[R]);Y&&H?(te[Q]=v[R],te[X]=k[R],ue&&(te.orig_x=A[R],te.xEnd=g.ends[R],te.xStart=g.starts[R]),K&&(te.orig_y=_[R],te.yEnd=b.ends[R],te.yStart=b.starts[R])):F&&(D?Y:H)?(te[j]=D?v[R]:k[R],te.gap=!0,B?(te.s=e,I=!0):te.s=0):te[Q]=te[X]=e,C&&(te.id=String(C[R]))}if(r(E,m),n(c,m),t(E,m),F){for(R=0;R<E.length;)E[R][j]===e?E.splice(R,1):R++;if(f.sort(E,function(q,ie){return q[j]-ie[j]||q.i-ie.i}),I){for(R=0;R<E.length-1&&E[R].gap;)R++;for(G=E[R].s,G||(G=E[R].s=0),O=0;O<R;O++)E[O].s=G;for(z=E.length-1;z>R&&E[z].gap;)z--;for(G=E[z].s,O=E.length-1;O>z;O--)E[O].s=G;for(;R<z;)if(R++,E[R].gap){for(O=R+1;E[O].gap;)O++;for(var ee=E[R-1][j],ne=E[R-1].s,Z=(E[O].s-ne)/(E[O][j]-ee);R<O;)E[R].s=ne+(E[R][j]-ee)*Z,R++}}}return E}function s(c,m,l,x,u,A,_){var g=m._length,b=c._fullLayout,v=l._id,k=x._id,S=b._firstScatter[d(m)]===m.uid,E=(p(m,b,l,x)||{}).orientation,C=m.fill;l._minDtick=0,x._minDtick=0;var F={padded:!0},I={padded:!0};_&&(F.ppad=I.ppad=_);var D=g<2||u[0]!==u[g-1]||A[0]!==A[g-1];D&&(C==="tozerox"||C==="tonextx"&&(S||E==="h"))?F.tozero=!0:!(m.error_y||{}).visible&&(C==="tonexty"||C==="tozeroy"||!a.hasMarkers(m)&&!a.hasText(m))&&(F.padded=!1,F.ppad=0),D&&(C==="tozeroy"||C==="tonexty"&&(S||E==="v"))?I.tozero=!0:(C==="tonextx"||C==="tozerox")&&(I.padded=!1),v&&(m._extremes[v]=M.findExtremes(l,u,F)),k&&(m._extremes[k]=M.findExtremes(x,A,I))}function o(c,m){if(!!a.hasMarkers(c)){var l=c.marker,x=1.6*(c.marker.sizeref||1),u;if(c.marker.sizemode==="area"?u=function(v){return Math.max(Math.sqrt((v||0)/x),3)}:u=function(v){return Math.max((v||0)/x,3)},f.isArrayOrTypedArray(l.size)){var A={type:"linear"};M.setConvert(A);for(var _=A.makeCalcdata(c.marker,"size"),g=new Array(m),b=0;b<m;b++)g[b]=u(_[b]);return g}else return u(l.size)}}function y(c,m){var l=d(m),x=c._firstScatter;x[l]||(x[l]=m.uid)}function d(c){var m=c.stackgroup;return c.xaxis+c.yaxis+c.type+(m?"-"+m:"")}function p(c,m,l,x){var u=c.stackgroup;if(!!u){var A=m._scatterStackOpts[l._id+x._id][u],_=A.orientation==="v"?x:l;if(_.type==="linear"||_.type==="log")return A}}U.exports={calc:h,calcMarkerSize:o,calcAxisExpansion:s,setFirstScatter:y,getStackOpts:p}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566,"./arrays_to_calcdata":935,"./calc_selection":938,"./colorscale_calc":939,"./subtypes":961,"fast-isnumeric":190}],938:[function(i,U,V){var w=i("../../lib");U.exports=function(M,T){w.isArrayOrTypedArray(T.selectedpoints)&&w.tagSelected(M,T)}},{"../../lib":515}],939:[function(i,U,V){var w=i("../../components/colorscale/helpers").hasColorscale,f=i("../../components/colorscale/calc"),M=i("./subtypes");U.exports=function(e,a){M.hasLines(a)&&w(a,"line")&&f(e,a,{vals:a.line.color,containerStr:"line",cLetter:"c"}),M.hasMarkers(a)&&(w(a,"marker")&&f(e,a,{vals:a.marker.color,containerStr:"marker",cLetter:"c"}),w(a,"marker.line")&&f(e,a,{vals:a.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},{"../../components/colorscale/calc":375,"../../components/colorscale/helpers":378,"./subtypes":961}],940:[function(i,U,V){U.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},{}],941:[function(i,U,V){var w=i("./calc");U.exports=function(e,a){var n=a.xaxis,r=a.yaxis,t=n._id+r._id,h=e._fullLayout._scatterStackOpts[t];if(!!h){var s=e.calcdata,o,y,d,p,c,m,l,x,u,A,_,g,b,v,k;for(var S in h){A=h[S];var E=A.traceIndices;if(!!E.length){for(_=A.stackgaps==="interpolate",g=A.groupnorm,A.orientation==="v"?(b="x",v="y"):(b="y",v="x"),k=new Array(E.length),o=0;o<k.length;o++)k[o]=!1;m=s[E[0]];var C=new Array(m.length);for(o=0;o<m.length;o++)C[o]=m[o][b];for(o=1;o<E.length;o++){for(c=s[E[o]],y=d=0;y<c.length;y++){for(l=c[y][b];l>C[d]&&d<C.length;d++)f(c,y,C[d],o,k,_,b),y++;if(l!==C[d]){for(p=0;p<o;p++)f(s[E[p]],d,l,p,k,_,b);C.splice(d,0,l)}d++}for(;d<C.length;d++)f(c,y,C[d],o,k,_,b),y++}var F=C.length;for(y=0;y<m.length;y++){for(x=m[y][v]=m[y].s,o=1;o<E.length;o++)c=s[E[o]],c[0].trace._rawLength=c[0].trace._length,c[0].trace._length=F,x+=c[y].s,c[y][v]=x;if(g)for(u=(g==="fraction"?x:x/100)||1,o=0;o<E.length;o++){var I=s[E[o]][y];I[v]/=u,I.sNorm=I.s/u}}for(o=0;o<E.length;o++){c=s[E[o]];var D=c[0].trace,R=w.calcMarkerSize(D,D._rawLength),O=Array.isArray(R);if(R&&k[o]||O){var z=R;for(R=new Array(F),y=0;y<F;y++)R[y]=c[y].gap?0:O?z[c[y].i]:z}var B=new Array(F),G=new Array(F);for(y=0;y<F;y++)B[y]=c[y].x,G[y]=c[y].y;w.calcAxisExpansion(e,D,n,r,B,G,R),c[0].t.orientation=A.orientation}}}}};function f(T,e,a,n,r,t,h){r[n]=!0;var s={i:null,gap:!0,s:0};if(s[h]=a,T.splice(e,0,s),e&&a===T[e-1][h]){var o=T[e-1];s.s=o.s,s.i=o.i,s.gap=o.gap}else t&&(s.s=M(T,e,a,h));e||(T[0].t=T[1].t,T[0].trace=T[1].trace,delete T[1].t,delete T[1].trace)}function M(T,e,a,n){var r=T[e-1],t=T[e+1];return t?r?r.s+(t.s-r.s)*(a-r[n])/(t[n]-r[n]):t.s:r.s}},{"./calc":937}],942:[function(i,U,V){U.exports=function(f){for(var M=0;M<f.length;M++){var T=f[M];if(T.type==="scatter"){var e=T.fill;if(!(e==="none"||e==="toself")&&(T.opacity=void 0,e==="tonexty"||e==="tonextx"))for(var a=M-1;a>=0;a--){var n=f[a];if(n.type==="scatter"&&n.xaxis===T.xaxis&&n.yaxis===T.yaxis){n.opacity=void 0;break}}}}}},{}],943:[function(i,U,V){var w=i("../../lib"),f=i("../../registry"),M=i("./attributes"),T=i("./constants"),e=i("./subtypes"),a=i("./xy_defaults"),n=i("./period_defaults"),r=i("./stack_defaults"),t=i("./marker_defaults"),h=i("./line_defaults"),s=i("./line_shape_defaults"),o=i("./text_defaults"),y=i("./fillcolor_defaults"),d=i("../../lib").coercePattern;U.exports=function(c,m,l,x){function u(E,C){return w.coerce(c,m,M,E,C)}var A=a(c,m,x,u);if(A||(m.visible=!1),!!m.visible){n(c,m,x,u),u("xhoverformat"),u("yhoverformat");var _=r(c,m,x,u),g=!_&&A<T.PTS_LINESONLY?"lines+markers":"lines";u("text"),u("hovertext"),u("mode",g),e.hasLines(m)&&(h(c,m,l,x,u,{backoff:!0}),s(c,m,u),u("connectgaps"),u("line.simplify")),e.hasMarkers(m)&&t(c,m,l,x,u,{gradient:!0}),e.hasText(m)&&(u("texttemplate"),o(c,m,x,u));var b=[];(e.hasMarkers(m)||e.hasText(m))&&(u("cliponaxis"),u("marker.maxdisplayed"),b.push("points")),u("fill",_?_.fillDflt:"none"),m.fill!=="none"&&(y(c,m,l,u),e.hasLines(m)||s(c,m,u),d(u,"fillpattern",m.fillcolor,!1));var v=(m.line||{}).color,k=(m.marker||{}).color;(m.fill==="tonext"||m.fill==="toself")&&b.push("fills"),u("hoveron",b.join("+")||"points"),m.hoveron!=="fills"&&u("hovertemplate");var S=f.getComponentMethod("errorbars","supplyDefaults");S(c,m,v||k||l,{axis:"y"}),S(c,m,v||k||l,{axis:"x",inherit:"y"}),w.coerceSelectionMarkerOpacity(m,u)}}},{"../../lib":515,"../../registry":647,"./attributes":936,"./constants":940,"./fillcolor_defaults":944,"./line_defaults":949,"./line_shape_defaults":951,"./marker_defaults":955,"./period_defaults":956,"./stack_defaults":959,"./subtypes":961,"./text_defaults":962,"./xy_defaults":963}],944:[function(i,U,V){var w=i("../../components/color"),f=i("../../lib").isArrayOrTypedArray;U.exports=function(T,e,a,n){var r=!1;if(e.marker){var t=e.marker.color,h=(e.marker.line||{}).color;t&&!f(t)?r=t:h&&!f(h)&&(r=h)}n("fillcolor",w.addOpacity((e.line||{}).color||r||a,.5))}},{"../../components/color":367,"../../lib":515}],945:[function(i,U,V){var w=i("../../plots/cartesian/axes");U.exports=function(M,T,e){var a={},n={_fullLayout:e},r=w.getFromTrace(n,T,"x"),t=w.getFromTrace(n,T,"y");return a.xLabel=w.tickText(r,r.c2l(M.x),!0).text,a.yLabel=w.tickText(t,t.c2l(M.y),!0).text,a}},{"../../plots/cartesian/axes":566}],946:[function(i,U,V){var w=i("../../components/color"),f=i("./subtypes");U.exports=function(T,e){var a,n;if(T.mode==="lines")return a=T.line.color,a&&w.opacity(a)?a:T.fillcolor;if(T.mode==="none")return T.fill?T.fillcolor:"";var r=e.mcc||(T.marker||{}).color,t=e.mlcc||((T.marker||{}).line||{}).color;return n=r&&w.opacity(r)?r:t&&w.opacity(t)&&(e.mlw||((T.marker||{}).line||{}).width)?t:"",n?w.opacity(n)<.3?w.addOpacity(n,.3):n:(a=(T.line||{}).color,a&&w.opacity(a)&&f.hasLines(T)&&T.line.width?a:T.fillcolor)}},{"../../components/color":367,"./subtypes":961}],947:[function(i,U,V){var w=i("../../lib"),f=i("../../components/fx"),M=i("../../registry"),T=i("./get_trace_color"),e=i("../../components/color"),a=w.fillText;U.exports=function(r,t,h,s){var o=r.cd,y=o[0].trace,d=r.xa,p=r.ya,c=d.c2p(t),m=p.c2p(h),l=[c,m],x=y.hoveron||"",u=y.mode.indexOf("markers")!==-1?3:.5,A=!!y.xperiodalignment,_=!!y.yperiodalignment;if(x.indexOf("points")!==-1){var g=function(ae){if(A){var oe=d.c2p(ae.xStart),be=d.c2p(ae.xEnd);return c>=Math.min(oe,be)&&c<=Math.max(oe,be)?0:1/0}var ce=Math.max(3,ae.mrc||0),de=1-1/ce,ye=Math.abs(d.c2p(ae.x)-c);return ye<ce?de*ye/ce:ye-ce+de},b=function(ae){if(_){var oe=p.c2p(ae.yStart),be=p.c2p(ae.yEnd);return m>=Math.min(oe,be)&&m<=Math.max(oe,be)?0:1/0}var ce=Math.max(3,ae.mrc||0),de=1-1/ce,ye=Math.abs(p.c2p(ae.y)-m);return ye<ce?de*ye/ce:ye-ce+de},v=function(ae){var oe=Math.max(u,ae.mrc||0),be=d.c2p(ae.x)-c,ce=p.c2p(ae.y)-m;return Math.max(Math.sqrt(be*be+ce*ce)-oe,1-u/oe)},k=f.getDistanceFunction(s,g,b,v);if(f.getClosest(o,k,r),r.index!==!1){var S=o[r.index],E=d.c2p(S.x,!0),C=p.c2p(S.y,!0),F=S.mrc||1;r.index=S.i;var I=o[0].t.orientation,D=I&&(S.sNorm||S.s),R=I==="h"?D:S.orig_x!==void 0?S.orig_x:S.x,O=I==="v"?D:S.orig_y!==void 0?S.orig_y:S.y;return w.extendFlat(r,{color:T(y,S),x0:E-F,x1:E+F,xLabelVal:R,y0:C-F,y1:C+F,yLabelVal:O,spikeDistance:v(S),hovertemplate:y.hovertemplate}),a(S,y,r),M.getComponentMethod("errorbars","hoverInfo")(S,y,r),[r]}}if(x.indexOf("fills")!==-1&&y._polygons){var z=y._polygons,B=[],G=!1,Q=1/0,X=-1/0,j=1/0,re=-1/0,ue,K,te,Y,H,ee,ne,Z,q;for(ue=0;ue<z.length;ue++)te=z[ue],te.contains(l)&&(G=!G,B.push(te),j=Math.min(j,te.ymin),re=Math.max(re,te.ymax));if(G){j=Math.max(j,0),re=Math.min(re,p._length);var ie=(j+re)/2;for(ue=0;ue<B.length;ue++)for(Y=B[ue].pts,K=1;K<Y.length;K++)Z=Y[K-1][1],q=Y[K][1],Z>ie!=q>=ie&&(ee=Y[K-1][0],ne=Y[K][0],q-Z&&(H=ee+(ne-ee)*(ie-Z)/(q-Z),Q=Math.min(Q,H),X=Math.max(X,H)));Q=Math.max(Q,0),X=Math.min(X,d._length);var se=e.defaultLine;return e.opacity(y.fillcolor)?se=y.fillcolor:e.opacity((y.line||{}).color)&&(se=y.line.color),w.extendFlat(r,{distance:r.maxHoverDistance,x0:Q,x1:X,y0:ie,y1:ie,color:se,hovertemplate:!1}),delete r.index,y.text&&!Array.isArray(y.text)?r.text=String(y.text):r.text=y.name,[r]}}}},{"../../components/color":367,"../../components/fx":407,"../../lib":515,"../../registry":647,"./get_trace_color":946}],948:[function(i,U,V){var w=i("./subtypes");U.exports={hasLines:w.hasLines,hasMarkers:w.hasMarkers,hasText:w.hasText,isBubble:w.isBubble,attributes:i("./attributes"),supplyDefaults:i("./defaults"),crossTraceDefaults:i("./cross_trace_defaults"),calc:i("./calc").calc,crossTraceCalc:i("./cross_trace_calc"),arraysToCalcdata:i("./arrays_to_calcdata"),plot:i("./plot"),colorbar:i("./marker_colorbar"),formatLabels:i("./format_labels"),style:i("./style").style,styleOnSelect:i("./style").styleOnSelect,hoverPoints:i("./hover"),selectPoints:i("./select"),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:i("../../plots/cartesian"),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},{"../../plots/cartesian":578,"./arrays_to_calcdata":935,"./attributes":936,"./calc":937,"./cross_trace_calc":941,"./cross_trace_defaults":942,"./defaults":943,"./format_labels":945,"./hover":947,"./marker_colorbar":954,"./plot":957,"./select":958,"./style":960,"./subtypes":961}],949:[function(i,U,V){var w=i("../../lib").isArrayOrTypedArray,f=i("../../components/colorscale/helpers").hasColorscale,M=i("../../components/colorscale/defaults");U.exports=function(e,a,n,r,t,h){h||(h={});var s=(e.marker||{}).color;if(t("line.color",n),f(e,"line"))M(e,a,r,t,{prefix:"line.",cLetter:"c"});else{var o=(w(s)?!1:s)||n;t("line.color",o)}t("line.width"),h.noDash||t("line.dash"),h.backoff&&t("line.backoff")}},{"../../components/colorscale/defaults":377,"../../components/colorscale/helpers":378,"../../lib":515}],950:[function(i,U,V){var w=i("../../components/drawing"),f=i("../../constants/numerical"),M=f.BADNUM,T=f.LOG_CLIP,e=T+.5,a=T-.5,n=i("../../lib"),r=n.segmentsIntersect,t=n.constrain,h=i("./constants");U.exports=function(o,y){var d=y.trace||{},p=y.xaxis,c=y.yaxis,m=p.type==="log",l=c.type==="log",x=p._length,u=c._length,A=y.backoff,_=d.marker,g=y.connectGaps,b=y.baseTolerance,v=y.shape,k=v==="linear",S=d.fill&&d.fill!=="none",E=[],C=h.minTolerance,F=o.length,I=new Array(F),D=0,R,O,z,B,G,Q,X,j,re,ue,K,te,Y,H,ee,ne;function Z(Ct){var jt=o[Ct];if(!jt)return!1;var Bt=y.linearized?p.l2p(jt.x):p.c2p(jt.x),Wt=y.linearized?c.l2p(jt.y):c.c2p(jt.y);if(Bt===M){if(m&&(Bt=p.c2p(jt.x,!0)),Bt===M)return!1;l&&Wt===M&&(Bt*=Math.abs(p._m*u*(p._m>0?e:a)/(c._m*x*(c._m>0?e:a)))),Bt*=1e3}if(Wt===M){if(l&&(Wt=c.c2p(jt.y,!0)),Wt===M)return!1;Wt*=1e3}return[Bt,Wt]}function q(Ct,jt,Bt,Wt){var Qt=Bt-Ct,Zt=Wt-jt,cr=.5-Ct,Xr=.5-jt,vn=Qt*Qt+Zt*Zt,en=Qt*cr+Zt*Xr;if(en>0&&en<vn){var ut=cr*Zt-Xr*Qt;if(ut*ut<vn)return!0}}var ie,se;function ae(Ct,jt){var Bt=Ct[0]/x,Wt=Ct[1]/u,Qt=Math.max(0,-Bt,Bt-1,-Wt,Wt-1);return Qt&&ie!==void 0&&q(Bt,Wt,ie,se)&&(Qt=0),Qt&&jt&&q(Bt,Wt,jt[0]/x,jt[1]/u)&&(Qt=0),(1+h.toleranceGrowth*Qt)*b}function oe(Ct,jt){var Bt=Ct[0]-jt[0],Wt=Ct[1]-jt[1];return Math.sqrt(Bt*Bt+Wt*Wt)}var be=h.maxScreensAway,ce=-x*be,de=x*(1+be),ye=-u*be,ge=u*(1+be),me=[[ce,ye,de,ye],[de,ye,de,ge],[de,ge,ce,ge],[ce,ge,ce,ye]],Se,Le,Oe,we,Ce,Ke;function Ye(Ct,jt){for(var Bt=[],Wt=0,Qt=0;Qt<4;Qt++){var Zt=me[Qt],cr=r(Ct[0],Ct[1],jt[0],jt[1],Zt[0],Zt[1],Zt[2],Zt[3]);cr&&(!Wt||Math.abs(cr.x-Bt[0][0])>1||Math.abs(cr.y-Bt[0][1])>1)&&(cr=[cr.x,cr.y],Wt&&oe(cr,Ct)<oe(Bt[0],Ct)?Bt.unshift(cr):Bt.push(cr),Wt++)}return Bt}function Fe(Ct){if(Ct[0]<ce||Ct[0]>de||Ct[1]<ye||Ct[1]>ge)return[t(Ct[0],ce,de),t(Ct[1],ye,ge)]}function Re(Ct,jt){if(Ct[0]===jt[0]&&(Ct[0]===ce||Ct[0]===de)||Ct[1]===jt[1]&&(Ct[1]===ye||Ct[1]===ge))return!0}function je(Ct,jt){var Bt=[],Wt=Fe(Ct),Qt=Fe(jt);return Wt&&Qt&&Re(Wt,Qt)||(Wt&&Bt.push(Wt),Qt&&Bt.push(Qt)),Bt}function xt(Ct,jt,Bt){return function(Wt,Qt){var Zt=Fe(Wt),cr=Fe(Qt),Xr=[];if(Zt&&cr&&Re(Zt,cr))return Xr;Zt&&Xr.push(Zt),cr&&Xr.push(cr);var vn=2*n.constrain((Wt[Ct]+Qt[Ct])/2,jt,Bt)-((Zt||Wt)[Ct]+(cr||Qt)[Ct]);if(vn){var en;Zt&&cr?en=vn>0==Zt[Ct]>cr[Ct]?Zt:cr:en=Zt||cr,en[Ct]+=vn}return Xr}}var Nt;v==="linear"||v==="spline"?Nt=Ye:v==="hv"||v==="vh"?Nt=je:v==="hvh"?Nt=xt(0,ce,de):v==="vhv"&&(Nt=xt(1,ye,ge));function tr(Ct,jt){var Bt=jt[0]-Ct[0],Wt=(jt[1]-Ct[1])/Bt,Qt=(Ct[1]*jt[0]-jt[1]*Ct[0])/Bt;return Qt>0?[Wt>0?ce:de,ge]:[Wt>0?de:ce,ye]}function Ht(Ct){var jt=Ct[0],Bt=Ct[1],Wt=jt===I[D-1][0],Qt=Bt===I[D-1][1];if(!(Wt&&Qt))if(D>1){var Zt=jt===I[D-2][0],cr=Bt===I[D-2][1];Wt&&(jt===ce||jt===de)&&Zt?cr?D--:I[D-1]=Ct:Qt&&(Bt===ye||Bt===ge)&&cr?Zt?D--:I[D-1]=Ct:I[D++]=Ct}else I[D++]=Ct}function Pt(Ct){I[D-1][0]!==Ct[0]&&I[D-1][1]!==Ct[1]&&Ht([Oe,we]),Ht(Ct),Ce=null,Oe=we=0}var $t=n.isArrayOrTypedArray(_);function Ut(Ct){if(Ct&&A&&(Ct.i=R,Ct.d=o,Ct.trace=d,Ct.marker=$t?_[Ct.i]:_,Ct.backoff=A),ie=Ct[0]/x,se=Ct[1]/u,Se=Ct[0]<ce?ce:Ct[0]>de?de:0,Le=Ct[1]<ye?ye:Ct[1]>ge?ge:0,Se||Le){if(!D)I[D++]=[Se||Ct[0],Le||Ct[1]];else if(Ce){var jt=Nt(Ce,Ct);jt.length>1&&(Pt(jt[0]),I[D++]=jt[1])}else Ke=Nt(I[D-1],Ct)[0],I[D++]=Ke;var Bt=I[D-1];Se&&Le&&(Bt[0]!==Se||Bt[1]!==Le)?(Ce&&(Oe!==Se&&we!==Le?Ht(Oe&&we?tr(Ce,Ct):[Oe||Se,we||Le]):Oe&&we&&Ht([Oe,we])),Ht([Se,Le])):Oe-Se&&we-Le&&Ht([Se||Oe,Le||we]),Ce=Ct,Oe=Se,we=Le}else Ce&&Pt(Nt(Ce,Ct)[0]),I[D++]=Ct}for(R=0;R<F;R++)if(O=Z(R),!!O){for(D=0,Ce=null,Ut(O),R++;R<F;R++){if(B=Z(R),!B){if(g)continue;break}if(!k||!y.simplify){Ut(B);continue}var Lt=Z(R+1);if(ue=oe(B,O),!(!(S&&(D===0||D===F-1))&&ue<ae(B,Lt)*C)){for(j=[(B[0]-O[0])/ue,(B[1]-O[1])/ue],G=O,K=ue,te=H=ee=0,X=!1,z=B,R++;R<o.length;R++){if(Q=Lt,Lt=Z(R+1),!Q){if(g)continue;break}if(re=[Q[0]-O[0],Q[1]-O[1]],ne=re[0]*j[1]-re[1]*j[0],H=Math.min(H,ne),ee=Math.max(ee,ne),ee-H>ae(Q,Lt))break;z=Q,Y=re[0]*j[0]+re[1]*j[1],Y>K?(K=Y,B=Q,X=!1):Y<te&&(te=Y,G=Q,X=!0)}if(X?(Ut(B),z!==G&&Ut(G)):(G!==O&&Ut(G),z!==B&&Ut(B)),Ut(z),R>=o.length||!Q)break;Ut(Q),O=Q}}Ce&&Ht([Oe||Ce[0],we||Ce[1]]),E.push(I.slice(0,D))}var We=v.slice(v.length-1);if(A&&We!=="h"&&We!=="v"){for(var ot=!1,Ge=-1,Me=[],Ve=0;Ve<E.length;Ve++)for(var Qe=0;Qe<E[Ve].length-1;Qe++){var tt=E[Ve][Qe],St=E[Ve][Qe+1],wt=w.applyBackoff(St,tt);(wt[0]!==St[0]||wt[1]!==St[1])&&(ot=!0),Me[Ge+1]||(Ge++,Me[Ge]=[tt,[wt[0],wt[1]]])}return ot?Me:E}return E}},{"../../components/drawing":389,"../../constants/numerical":491,"../../lib":515,"./constants":940}],951:[function(i,U,V){U.exports=function(f,M,T){var e=T("line.shape");e==="spline"&&T("line.smoothing")}},{}],952:[function(i,U,V){var w={tonextx:1,tonexty:1,tonext:1};U.exports=function(M,T,e){var a,n,r,t,h,s={},o=!1,y=-1,d=0,p=-1;for(n=0;n<e.length;n++)a=e[n][0].trace,r=a.stackgroup||"",r?r in s?h=s[r]:(h=s[r]=d,d++):a.fill in w&&p>=0?h=p:(h=p=d,d++),h<y&&(o=!0),a._groupIndex=y=h;var c=e.slice();o&&c.sort(function(l,x){var u=l[0].trace,A=x[0].trace;return u._groupIndex-A._groupIndex||u.index-A.index});var m={};for(n=0;n<c.length;n++)a=c[n][0].trace,r=a.stackgroup||"",a.visible===!0?(a._nexttrace=null,a.fill in w&&(t=m[r],a._prevtrace=t||null,t&&(t._nexttrace=a)),a._ownfill=a.fill&&(a.fill.substr(0,6)==="tozero"||a.fill==="toself"||a.fill.substr(0,2)==="to"&&!a._prevtrace),m[r]=a):a._prevtrace=a._nexttrace=a._ownfill=null;return c}},{}],953:[function(i,U,V){var w=i("fast-isnumeric");U.exports=function(M,T){T||(T=2);var e=M.marker,a=e.sizeref||1,n=e.sizemin||0,r=e.sizemode==="area"?function(t){return Math.sqrt(t/a)}:function(t){return t/a};return function(t){var h=r(t/T);return w(h)&&h>0?Math.max(h,n):0}}},{"fast-isnumeric":190}],954:[function(i,U,V){U.exports={container:"marker",min:"cmin",max:"cmax"}},{}],955:[function(i,U,V){var w=i("../../components/color"),f=i("../../components/colorscale/helpers").hasColorscale,M=i("../../components/colorscale/defaults"),T=i("./subtypes");U.exports=function(a,n,r,t,h,s){var o=T.isBubble(a),y=(a.line||{}).color,d;if(s=s||{},y&&(r=y),h("marker.symbol"),h("marker.opacity",o?.7:1),h("marker.size"),s.noAngle||(h("marker.angle"),s.noAngleRef||h("marker.angleref"),s.noStandOff||h("marker.standoff")),h("marker.color",r),f(a,"marker")&&M(a,n,t,h,{prefix:"marker.",cLetter:"c"}),s.noSelect||(h("selected.marker.color"),h("unselected.marker.color"),h("selected.marker.size"),h("unselected.marker.size")),s.noLine||(y&&!Array.isArray(y)&&n.marker.color!==y?d=y:o?d=w.background:d=w.defaultLine,h("marker.line.color",d),f(a,"marker.line")&&M(a,n,t,h,{prefix:"marker.line.",cLetter:"c"}),h("marker.line.width",o?1:0)),o&&(h("marker.sizeref"),h("marker.sizemin"),h("marker.sizemode")),s.gradient){var p=h("marker.gradient.type");p!=="none"&&h("marker.gradient.color")}}},{"../../components/color":367,"../../components/colorscale/defaults":377,"../../components/colorscale/helpers":378,"./subtypes":961}],956:[function(i,U,V){var w=i("../../lib").dateTick0,f=i("../../constants/numerical"),M=f.ONEWEEK;function T(e,a){return e%M===0?w(a,1):w(a,0)}U.exports=function(a,n,r,t,h){if(h||(h={x:!0,y:!0}),h.x){var s=t("xperiod");s&&(t("xperiod0",T(s,n.xcalendar)),t("xperiodalignment"))}if(h.y){var o=t("yperiod");o&&(t("yperiod0",T(o,n.ycalendar)),t("yperiodalignment"))}}},{"../../constants/numerical":491,"../../lib":515}],957:[function(i,U,V){var w=i("@plotly/d3"),f=i("../../registry"),M=i("../../lib"),T=M.ensureSingle,e=M.identity,a=i("../../components/drawing"),n=i("./subtypes"),r=i("./line_points"),t=i("./link_traces"),h=i("../../lib/polygon").tester;U.exports=function(p,c,m,l,x,u){var A,_,g=!x,b=!!x&&x.duration>0,v=t(p,c,m);if(A=l.selectAll("g.trace").data(v,function(S){return S[0].trace.uid}),A.enter().append("g").attr("class",function(S){return"trace scatter trace"+S[0].trace.uid}).style("stroke-miterlimit",2),A.order(),s(p,A,c),b){u&&(_=u());var k=w.transition().duration(x.duration).ease(x.easing).each("end",function(){_&&_()}).each("interrupt",function(){_&&_()});k.each(function(){l.selectAll("g.trace").each(function(S,E){o(p,E,c,S,v,this,x)})})}else A.each(function(S,E){o(p,E,c,S,v,this,x)});g&&A.exit().remove(),l.selectAll("path:not([d])").remove()};function s(d,p,c){p.each(function(m){var l=T(w.select(this),"g","fills");a.setClipUrl(l,c.layerClipId,d);var x=m[0].trace,u=[];x._ownfill&&u.push("_ownFill"),x._nexttrace&&u.push("_nextFill");var A=l.selectAll("g").data(u,e);A.enter().append("g"),A.exit().each(function(_){x[_]=null}).remove(),A.order().each(function(_){x[_]=T(w.select(this),"path","js-fill")})})}function o(d,p,c,m,l,x,u){var A;y(d,p,c,m,l);var _=!!u&&u.duration>0;function g(Oe){return _?Oe.transition():Oe}var b=c.xaxis,v=c.yaxis,k=m[0].trace,S=k.line,E=w.select(x),C=T(E,"g","errorbars"),F=T(E,"g","lines"),I=T(E,"g","points"),D=T(E,"g","text");if(f.getComponentMethod("errorbars","plot")(d,C,c,u),k.visible!==!0)return;g(E).style("opacity",k.opacity);var R,O,z=k.fill.charAt(k.fill.length-1);z!=="x"&&z!=="y"&&(z=""),m[0][c.isRangePlot?"nodeRangePlot3":"node3"]=E;var B="",G=[],Q=k._prevtrace;Q&&(B=Q._prevRevpath||"",O=Q._nextFill,G=Q._polygons);var X,j,re="",ue="",K,te,Y,H,ee,ne,Z,q=[],ie=M.noop;if(R=k._ownFill,n.hasLines(k)||k.fill!=="none"){for(O&&O.datum(m),["hv","vh","hvh","vhv"].indexOf(S.shape)!==-1?(K=a.steps(S.shape),te=a.steps(S.shape.split("").reverse().join(""))):S.shape==="spline"?K=te=function(Oe){var we=Oe[Oe.length-1];return Oe.length>1&&Oe[0][0]===we[0]&&Oe[0][1]===we[1]?a.smoothclosed(Oe.slice(1),S.smoothing):a.smoothopen(Oe,S.smoothing)}:K=te=function(Oe){return"M"+Oe.join("L")},Y=function(Oe){return te(Oe.reverse())},q=r(m,{xaxis:b,yaxis:v,trace:k,connectGaps:k.connectgaps,baseTolerance:Math.max(S.width||1,3)/4,shape:S.shape,backoff:S.backoff,simplify:S.simplify,fill:k.fill}),Z=k._polygons=new Array(q.length),A=0;A<q.length;A++)k._polygons[A]=h(q[A]);q.length&&(H=q[0][0],ee=q[q.length-1],ne=ee[ee.length-1]),ie=function(Oe){return function(we){if(X=K(we),j=Y(we),re?z?(re+="L"+X.substr(1),ue=j+("L"+ue.substr(1))):(re+="Z"+X,ue=j+"Z"+ue):(re=X,ue=j),n.hasLines(k)&&we.length>1){var Ce=w.select(this);if(Ce.datum(m),Oe)g(Ce.style("opacity",0).attr("d",X).call(a.lineGroupStyle)).style("opacity",1);else{var Ke=g(Ce);Ke.attr("d",X),a.singleLineStyle(m,Ke)}}}}}var se=F.selectAll(".js-line").data(q);g(se.exit()).style("opacity",0).remove(),se.each(ie(!1)),se.enter().append("path").classed("js-line",!0).style("vector-effect","non-scaling-stroke").call(a.lineGroupStyle).each(ie(!0)),a.setClipUrl(se,c.layerClipId,d);function ae(Oe){g(Oe).attr("d","M0,0Z")}q.length?(R?(R.datum(m),H&&ne&&(z?(z==="y"?H[1]=ne[1]=v.c2p(0,!0):z==="x"&&(H[0]=ne[0]=b.c2p(0,!0)),g(R).attr("d","M"+ne+"L"+H+"L"+re.substr(1)).call(a.singleFillStyle,d)):g(R).attr("d",re+"Z").call(a.singleFillStyle,d))):O&&(k.fill.substr(0,6)==="tonext"&&re&&B?(k.fill==="tonext"?g(O).attr("d",re+"Z"+B+"Z").call(a.singleFillStyle,d):g(O).attr("d",re+"L"+B.substr(1)+"Z").call(a.singleFillStyle,d),k._polygons=k._polygons.concat(G)):(ae(O),k._polygons=null)),k._prevRevpath=ue,k._prevPolygons=Z):(R?ae(R):O&&ae(O),k._polygons=k._prevRevpath=k._prevPolygons=null);function oe(Oe){return Oe.filter(function(we){return!we.gap&&we.vis})}function be(Oe){return Oe.filter(function(we){return we.vis})}function ce(Oe){return Oe.filter(function(we){return!we.gap})}function de(Oe){return Oe.id}function ye(Oe){if(Oe.ids)return de}function ge(){return!1}function me(Oe,we,Ce){var Ke,Ye,Fe,Re=Ce[0].trace,je=n.hasMarkers(Re),xt=n.hasText(Re),Nt=ye(Re),tr=ge,Ht=ge;if(je||xt){var Pt=e,$t=Re.stackgroup,Ut=$t&&d._fullLayout._scatterStackOpts[b._id+v._id][$t].stackgaps==="infer zero";Re.marker.maxdisplayed||Re._needsCull?Pt=Ut?be:oe:$t&&!Ut&&(Pt=ce),je&&(tr=Pt),xt&&(Ht=Pt)}Ye=Oe.selectAll("path.point"),Ke=Ye.data(tr,Nt);var Lt=Ke.enter().append("path").classed("point",!0);_&&Lt.call(a.pointStyle,Re,d).call(a.translatePoints,b,v).style("opacity",0).transition().style("opacity",1),Ke.order();var We;je&&(We=a.makePointStyleFns(Re)),Ke.each(function(ot){var Ge=w.select(this),Me=g(Ge);Fe=a.translatePoint(ot,Me,b,v),Fe?(a.singlePointStyle(ot,Me,Re,We,d),c.layerClipId&&a.hideOutsideRangePoint(ot,Me,b,v,Re.xcalendar,Re.ycalendar),Re.customdata&&Ge.classed("plotly-customdata",ot.data!==null&&ot.data!==void 0)):Me.remove()}),_?Ke.exit().transition().style("opacity",0).remove():Ke.exit().remove(),Ye=we.selectAll("g"),Ke=Ye.data(Ht,Nt),Ke.enter().append("g").classed("textpoint",!0).append("text"),Ke.order(),Ke.each(function(ot){var Ge=w.select(this),Me=g(Ge.select("text"));Fe=a.translatePoint(ot,Me,b,v),Fe?c.layerClipId&&a.hideOutsideRangePoint(ot,Ge,b,v,Re.xcalendar,Re.ycalendar):Ge.remove()}),Ke.selectAll("text").call(a.textPointStyle,Re,d).each(function(ot){var Ge=b.c2p(ot.x),Me=v.c2p(ot.y);w.select(this).selectAll("tspan.line").each(function(){g(w.select(this)).attr({x:Ge,y:Me})})}),Ke.exit().remove()}I.datum(m),D.datum(m),me(I,D,m);var Se=k.cliponaxis===!1,Le=Se?null:c.layerClipId;a.setClipUrl(I,Le,d),a.setClipUrl(D,Le,d)}function y(d,p,c,m,l){var x=c.xaxis,u=c.yaxis,A=w.extent(M.simpleMap(x.range,x.r2c)),_=w.extent(M.simpleMap(u.range,u.r2c)),g=m[0].trace;if(!!n.hasMarkers(g)){var b=g.marker.maxdisplayed;if(b!==0){var v=m.filter(function(C){return C.x>=A[0]&&C.x<=A[1]&&C.y>=_[0]&&C.y<=_[1]}),k=Math.ceil(v.length/b),S=0;l.forEach(function(C,F){var I=C[0].trace;n.hasMarkers(I)&&I.marker.maxdisplayed>0&&F<p&&S++});var E=Math.round(S*k/3+Math.floor(S/3)*k/7.1);m.forEach(function(C){delete C.vis}),v.forEach(function(C,F){Math.round((F+E)%k)===0&&(C.vis=!0)})}}}},{"../../components/drawing":389,"../../lib":515,"../../lib/polygon":527,"../../registry":647,"./line_points":950,"./link_traces":952,"./subtypes":961,"@plotly/d3":58}],958:[function(i,U,V){var w=i("./subtypes");U.exports=function(M,T){var e=M.cd,a=M.xaxis,n=M.yaxis,r=[],t=e[0].trace,h,s,o,y,d=!w.hasMarkers(t)&&!w.hasText(t);if(d)return[];if(T===!1)for(h=0;h<e.length;h++)e[h].selected=0;else for(h=0;h<e.length;h++)s=e[h],o=a.c2p(s.x),y=n.c2p(s.y),s.i!==null&&T.contains([o,y],!1,h,M)?(r.push({pointNumber:s.i,x:a.c2d(s.x),y:n.c2d(s.y)}),s.selected=1):s.selected=0;return r}},{"./subtypes":961}],959:[function(i,U,V){var w=["orientation","groupnorm","stackgaps"];U.exports=function(M,T,e,a){var n=e._scatterStackOpts,r=a("stackgroup");if(r){var t=T.xaxis+T.yaxis,h=n[t];h||(h=n[t]={});var s=h[r],o=!1;s?s.traces.push(T):(s=h[r]={traceIndices:[],traces:[T]},o=!0);for(var y={orientation:T.x&&!T.y?"h":"v"},d=0;d<w.length;d++){var p=w[d],c=p+"Found";if(!s[c]){var m=M[p]!==void 0,l=p==="orientation";if((m||o)&&(s[p]=a(p,y[p]),l&&(s.fillDflt=s[p]==="h"?"tonextx":"tonexty"),m&&(s[c]=!0,!o&&(delete s.traces[0][p],l))))for(var x=0;x<s.traces.length-1;x++){var u=s.traces[x];u._input.fill!==u.fill&&(u.fill=s.fillDflt)}}}return s}}},{}],960:[function(i,U,V){var w=i("@plotly/d3"),f=i("../../components/drawing"),M=i("../../registry");function T(r){var t=w.select(r).selectAll("g.trace.scatter");t.style("opacity",function(h){return h[0].trace.opacity}),t.selectAll("g.points").each(function(h){var s=w.select(this),o=h.trace||h[0].trace;e(s,o,r)}),t.selectAll("g.text").each(function(h){var s=w.select(this),o=h.trace||h[0].trace;a(s,o,r)}),t.selectAll("g.trace path.js-line").call(f.lineGroupStyle),t.selectAll("g.trace path.js-fill").call(f.fillGroupStyle,r),M.getComponentMethod("errorbars","style")(t)}function e(r,t,h){f.pointStyle(r.selectAll("path.point"),t,h)}function a(r,t,h){f.textPointStyle(r.selectAll("text"),t,h)}function n(r,t,h){var s=t[0].trace;s.selectedpoints?(f.selectedPointStyle(h.selectAll("path.point"),s),f.selectedTextStyle(h.selectAll("text"),s)):(e(h,s,r),a(h,s,r))}U.exports={style:T,stylePoints:e,styleText:a,styleOnSelect:n}},{"../../components/drawing":389,"../../registry":647,"@plotly/d3":58}],961:[function(i,U,V){var w=i("../../lib");U.exports={hasLines:function(f){return f.visible&&f.mode&&f.mode.indexOf("lines")!==-1},hasMarkers:function(f){return f.visible&&(f.mode&&f.mode.indexOf("markers")!==-1||f.type==="splom")},hasText:function(f){return f.visible&&f.mode&&f.mode.indexOf("text")!==-1},isBubble:function(f){return w.isPlainObject(f.marker)&&w.isArrayOrTypedArray(f.marker.size)}}},{"../../lib":515}],962:[function(i,U,V){var w=i("../../lib");U.exports=function(f,M,T,e,a){a=a||{},e("textposition"),w.coerceFont(e,"textfont",T.font),a.noSelect||(e("selected.textfont.color"),e("unselected.textfont.color"))}},{"../../lib":515}],963:[function(i,U,V){var w=i("../../lib"),f=i("../../registry");U.exports=function(T,e,a,n){var r=n("x"),t=n("y"),h,s=f.getComponentMethod("calendars","handleTraceDefaults");if(s(T,e,["x","y"],a),r){var o=w.minRowLength(r);t?h=Math.min(o,w.minRowLength(t)):(h=o,n("y0"),n("dy"))}else{if(!t)return 0;h=w.minRowLength(t),n("x0"),n("dx")}return e._length=h,h}},{"../../lib":515,"../../registry":647}],964:[function(i,U,V){var w=i("../scatter/attributes"),f=i("../../components/colorscale/attributes"),M=i("../../plots/cartesian/axis_format_attributes").axisHoverFormat,T=i("../../plots/template_attributes").hovertemplateAttrs,e=i("../../plots/template_attributes").texttemplateAttrs,a=i("../../plots/attributes"),n=i("../../constants/gl3d_dashes"),r=i("../../constants/gl3d_markers"),t=i("../../lib/extend").extendFlat,h=i("../../plot_api/edit_types").overrideAll,s=i("../../lib/sort_object_keys"),o=w.line,y=w.marker,d=y.line,p=t({width:o.width,dash:{valType:"enumerated",values:s(n),dflt:"solid"}},f("line"));function c(l){return{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}}var m=U.exports=h({x:w.x,y:w.y,z:{valType:"data_array"},text:t({},w.text,{}),texttemplate:e({},{}),hovertext:t({},w.hovertext,{}),hovertemplate:T(),xhoverformat:M("x"),yhoverformat:M("y"),zhoverformat:M("z"),mode:t({},w.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:c(),y:c(),z:c()},connectgaps:w.connectgaps,line:p,marker:t({symbol:{valType:"enumerated",values:s(r),dflt:"circle",arrayOk:!0},size:t({},y.size,{dflt:8}),sizeref:y.sizeref,sizemin:y.sizemin,sizemode:y.sizemode,opacity:t({},y.opacity,{arrayOk:!1}),colorbar:y.colorbar,line:t({width:t({},d.width,{arrayOk:!1})},f("marker.line"))},f("marker")),textposition:t({},w.textposition,{dflt:"top center"}),textfont:{color:w.textfont.color,size:w.textfont.size,family:t({},w.textfont.family,{arrayOk:!1})},opacity:a.opacity,hoverinfo:t({},a.hoverinfo)},"calc","nested");m.x.editType=m.y.editType=m.z.editType="calc+clearAxisTypes"},{"../../components/colorscale/attributes":374,"../../constants/gl3d_dashes":488,"../../constants/gl3d_markers":489,"../../lib/extend":505,"../../lib/sort_object_keys":538,"../../plot_api/edit_types":548,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../scatter/attributes":936}],965:[function(i,U,V){var w=i("../scatter/arrays_to_calcdata"),f=i("../scatter/colorscale_calc");U.exports=function(T,e){var a=[{x:!1,y:!1,trace:e,t:{}}];return w(a,e),f(T,e),a}},{"../scatter/arrays_to_calcdata":935,"../scatter/colorscale_calc":939}],966:[function(i,U,V){var w=i("../../registry");function f(e,a,n,r){if(!a||!a.visible)return null;for(var t=w.getComponentMethod("errorbars","makeComputeError")(a),h=new Array(e.length),s=0;s<e.length;s++){var o=t(+e[s],s);if(r.type==="log"){var y=r.c2l(e[s]),d=e[s]-o[0],p=e[s]+o[1];if(h[s]=[(r.c2l(d,!0)-y)*n,(r.c2l(p,!0)-y)*n],d>0){var c=r.c2l(d);r._lowerLogErrorBound||(r._lowerLogErrorBound=c),r._lowerErrorBound=Math.min(r._lowerLogErrorBound,c)}}else h[s]=[-o[0]*n,o[1]*n]}return h}function M(e){for(var a=0;a<e.length;a++)if(e[a])return e[a].length;return 0}function T(e,a,n){var r=[f(e.x,e.error_x,a[0],n.xaxis),f(e.y,e.error_y,a[1],n.yaxis),f(e.z,e.error_z,a[2],n.zaxis)],t=M(r);if(t===0)return null;for(var h=new Array(t),s=0;s<t;s++){for(var o=[[0,0,0],[0,0,0]],y=0;y<3;y++)if(r[y])for(var d=0;d<2;d++)o[d][y]=r[y][s][d];h[s]=o}return h}U.exports=T},{"../../registry":647}],967:[function(i,U,V){var w=i("../../../stackgl_modules").gl_line3d,f=i("../../../stackgl_modules").gl_scatter3d,M=i("../../../stackgl_modules").gl_error3d,T=i("../../../stackgl_modules").gl_mesh3d,e=i("../../../stackgl_modules").delaunay_triangulate,a=i("../../lib"),n=i("../../lib/str2rgbarray"),r=i("../../lib/gl_format_color").formatColor,t=i("../scatter/make_bubble_size_func"),h=i("../../constants/gl3d_dashes"),s=i("../../constants/gl3d_markers"),o=i("../../plots/cartesian/axes"),y=i("../../components/fx/helpers").appendArrayPointValue,d=i("./calc_errors");function p(C,F){this.scene=C,this.uid=F,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}var c=p.prototype;c.handlePick=function(C){if(C.object&&(C.object===this.linePlot||C.object===this.delaunayMesh||C.object===this.textMarkers||C.object===this.scatterPlot)){var F=C.index=C.data.index;return C.object.highlight&&C.object.highlight(null),this.scatterPlot&&(C.object=this.scatterPlot,this.scatterPlot.highlight(C.data)),C.textLabel="",this.textLabels&&(Array.isArray(this.textLabels)?(this.textLabels[F]||this.textLabels[F]===0)&&(C.textLabel=this.textLabels[F]):C.textLabel=this.textLabels),C.traceCoordinate=[this.data.x[F],this.data.y[F],this.data.z[F]],!0}};function m(C,F,I){var D=(I+1)%3,R=(I+2)%3,O=[],z=[],B;for(B=0;B<C.length;++B){var G=C[B];isNaN(G[D])||!isFinite(G[D])||isNaN(G[R])||!isFinite(G[R])||(O.push([G[D],G[R]]),z.push(B))}var Q=e(O);for(B=0;B<Q.length;++B)for(var X=Q[B],j=0;j<X.length;++j)X[j]=z[X[j]];return{positions:C,cells:Q,meshColor:F}}function l(C){for(var F=[0,0,0],I=[[0,0,0],[0,0,0],[0,0,0]],D=[1,1,1],R=0;R<3;R++){var O=C[R];O&&O.copy_zstyle!==!1&&C[2].visible!==!1&&(O=C[2]),!(!O||!O.visible)&&(F[R]=O.width/2,I[R]=n(O.color),D[R]=O.thickness)}return{capSize:F,color:I,lineWidth:D}}function x(C){return C==null?0:C.indexOf("left")>-1?-1:C.indexOf("right")>-1?1:0}function u(C){return C==null?0:C.indexOf("top")>-1?-1:C.indexOf("bottom")>-1?1:0}function A(C){var F=0,I=0,D=[F,I];if(Array.isArray(C))for(var R=0;R<C.length;R++)D[R]=[F,I],C[R]&&(D[R][0]=x(C[R]),D[R][1]=u(C[R]));else D[0]=x(C),D[1]=u(C);return D}function _(C,F){return F(C*4)}function g(C){return s[C]}function b(C,F,I,D,R){var O=null;if(a.isArrayOrTypedArray(C)){O=[];for(var z=0;z<F;z++)C[z]===void 0?O[z]=D:O[z]=I(C[z],R)}else O=I(C,a.identity);return O}function v(C,F){var I=[],D=C.fullSceneLayout,R=C.dataScale,O=D.xaxis,z=D.yaxis,B=D.zaxis,G=F.marker,Q=F.line,X=F.x||[],j=F.y||[],re=F.z||[],ue=X.length,K=F.xcalendar,te=F.ycalendar,Y=F.zcalendar,H,ee,ne,Z,q,ie;for(q=0;q<ue;q++)H=O.d2l(X[q],0,K)*R[0],ee=z.d2l(j[q],0,te)*R[1],ne=B.d2l(re[q],0,Y)*R[2],I[q]=[H,ee,ne];if(Array.isArray(F.text))ie=F.text;else if(F.text!==void 0)for(ie=new Array(ue),q=0;q<ue;q++)ie[q]=F.text;function se(Ye,Fe){var Re=D[Ye];return o.tickText(Re,Re.d2l(Fe),!0).text}var ae=F.texttemplate;if(ae){var oe=C.fullLayout,be=oe._d3locale,ce=Array.isArray(ae),de=ce?Math.min(ae.length,ue):ue,ye=ce?function(Ye){return ae[Ye]}:function(){return ae};for(ie=new Array(de),q=0;q<de;q++){var ge={x:X[q],y:j[q],z:re[q]},me={xLabel:se("xaxis",X[q]),yLabel:se("yaxis",j[q]),zLabel:se("zaxis",re[q])},Se={};y(Se,F,q);var Le=F._meta||{};ie[q]=a.texttemplateString(ye(q),me,be,Se,ge,Le)}}if(Z={position:I,mode:F.mode,text:ie},"line"in F&&(Z.lineColor=r(Q,1,ue),Z.lineWidth=Q.width,Z.lineDashes=Q.dash),"marker"in F){var Oe=t(F);Z.scatterColor=r(G,1,ue),Z.scatterSize=b(G.size,ue,_,20,Oe),Z.scatterMarker=b(G.symbol,ue,g,"\u25CF"),Z.scatterLineWidth=G.line.width,Z.scatterLineColor=r(G.line,1,ue),Z.scatterAngle=0}"textposition"in F&&(Z.textOffset=A(F.textposition),Z.textColor=r(F.textfont,1,ue),Z.textSize=b(F.textfont.size,ue,a.identity,12),Z.textFont=F.textfont.family,Z.textAngle=0);var we=["x","y","z"];for(Z.project=[!1,!1,!1],Z.projectScale=[1,1,1],Z.projectOpacity=[1,1,1],q=0;q<3;++q){var Ce=F.projection[we[q]];(Z.project[q]=Ce.show)&&(Z.projectOpacity[q]=Ce.opacity,Z.projectScale[q]=Ce.scale)}Z.errorBounds=d(F,R,D);var Ke=l([F.error_x,F.error_y,F.error_z]);return Z.errorColor=Ke.color,Z.errorLineWidth=Ke.lineWidth,Z.errorCapSize=Ke.capSize,Z.delaunayAxis=F.surfaceaxis,Z.delaunayColor=n(F.surfacecolor),Z}function k(C){if(a.isArrayOrTypedArray(C)){var F=C[0];return a.isArrayOrTypedArray(F)&&(C=F),"rgb("+C.slice(0,3).map(function(I){return Math.round(I*255)})+")"}return null}function S(C){return a.isArrayOrTypedArray(C)?C.length===4&&typeof C[0]=="number"?k(C):C.map(k):null}c.update=function(C){var F=this.scene.glplot.gl,I,D,R,O,z=h.solid;this.data=C;var B=v(this.scene,C);"mode"in B&&(this.mode=B.mode),"lineDashes"in B&&B.lineDashes in h&&(z=h[B.lineDashes]),this.color=S(B.scatterColor)||S(B.lineColor),this.dataPoints=B.position,I={gl:this.scene.glplot.gl,position:B.position,color:B.lineColor,lineWidth:B.lineWidth||1,dashes:z[0],dashScale:z[1],opacity:C.opacity,connectGaps:C.connectgaps},this.mode.indexOf("lines")!==-1?this.linePlot?this.linePlot.update(I):(this.linePlot=w(I),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var G=C.opacity;if(C.marker&&C.marker.opacity&&(G*=C.marker.opacity),D={gl:this.scene.glplot.gl,position:B.position,color:B.scatterColor,size:B.scatterSize,glyph:B.scatterMarker,opacity:G,orthographic:!0,lineWidth:B.scatterLineWidth,lineColor:B.scatterLineColor,project:B.project,projectScale:B.projectScale,projectOpacity:B.projectOpacity},this.mode.indexOf("markers")!==-1?this.scatterPlot?this.scatterPlot.update(D):(this.scatterPlot=f(D),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),O={gl:this.scene.glplot.gl,position:B.position,glyph:B.text,color:B.textColor,size:B.textSize,angle:B.textAngle,alignment:B.textOffset,font:B.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:C.opacity},this.textLabels=C.hovertext||C.text,this.mode.indexOf("text")!==-1?this.textMarkers?this.textMarkers.update(O):(this.textMarkers=f(O),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),R={gl:this.scene.glplot.gl,position:B.position,color:B.errorColor,error:B.errorBounds,lineWidth:B.errorLineWidth,capSize:B.errorCapSize,opacity:C.opacity},this.errorBars?B.errorBounds?this.errorBars.update(R):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):B.errorBounds&&(this.errorBars=M(R),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),B.delaunayAxis>=0){var Q=m(B.position,B.delaunayColor,B.delaunayAxis);Q.opacity=C.opacity,this.delaunayMesh?this.delaunayMesh.update(Q):(Q.gl=F,this.delaunayMesh=T(Q),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},c.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())};function E(C,F){var I=new p(C,F.uid);return I.update(F),I}U.exports=E},{"../../../stackgl_modules":1133,"../../components/fx/helpers":403,"../../constants/gl3d_dashes":488,"../../constants/gl3d_markers":489,"../../lib":515,"../../lib/gl_format_color":511,"../../lib/str2rgbarray":540,"../../plots/cartesian/axes":566,"../scatter/make_bubble_size_func":953,"./calc_errors":966}],968:[function(i,U,V){var w=i("../../registry"),f=i("../../lib"),M=i("../scatter/subtypes"),T=i("../scatter/marker_defaults"),e=i("../scatter/line_defaults"),a=i("../scatter/text_defaults"),n=i("./attributes");U.exports=function(h,s,o,y){function d(_,g){return f.coerce(h,s,n,_,g)}var p=r(h,s,d,y);if(!p){s.visible=!1;return}d("text"),d("hovertext"),d("hovertemplate"),d("xhoverformat"),d("yhoverformat"),d("zhoverformat"),d("mode"),M.hasLines(s)&&(d("connectgaps"),e(h,s,o,y,d)),M.hasMarkers(s)&&T(h,s,o,y,d,{noSelect:!0,noAngle:!0}),M.hasText(s)&&(d("texttemplate"),a(h,s,y,d,{noSelect:!0}));var c=(s.line||{}).color,m=(s.marker||{}).color;d("surfaceaxis")>=0&&d("surfacecolor",c||m);for(var l=["x","y","z"],x=0;x<3;++x){var u="projection."+l[x];d(u+".show")&&(d(u+".opacity"),d(u+".scale"))}var A=w.getComponentMethod("errorbars","supplyDefaults");A(h,s,c||m||o,{axis:"z"}),A(h,s,c||m||o,{axis:"y",inherit:"z"}),A(h,s,c||m||o,{axis:"x",inherit:"z"})};function r(t,h,s,o){var y=0,d=s("x"),p=s("y"),c=s("z"),m=w.getComponentMethod("calendars","handleTraceDefaults");return m(t,h,["x","y","z"],o),d&&p&&c&&(y=Math.min(d.length,p.length,c.length),h._length=h._xlength=h._ylength=h._zlength=y),y}},{"../../lib":515,"../../registry":647,"../scatter/line_defaults":949,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"./attributes":964}],969:[function(i,U,V){U.exports={plot:i("./convert"),attributes:i("./attributes"),markerSymbols:i("../../constants/gl3d_markers"),supplyDefaults:i("./defaults"),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:i("./calc"),moduleType:"trace",name:"scatter3d",basePlotModule:i("../../plots/gl3d"),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{}}},{"../../constants/gl3d_markers":489,"../../plots/gl3d":607,"./attributes":964,"./calc":965,"./convert":967,"./defaults":968}],970:[function(i,U,V){var w=i("../scatter/attributes"),f=i("../../plots/attributes"),M=i("../../plots/template_attributes").hovertemplateAttrs,T=i("../../plots/template_attributes").texttemplateAttrs,e=i("../../components/colorscale/attributes"),a=i("../../lib/extend").extendFlat,n=w.marker,r=w.line,t=n.line;U.exports={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:a({},w.mode,{dflt:"markers"}),text:a({},w.text,{}),texttemplate:T({editType:"plot"},{keys:["a","b","text"]}),hovertext:a({},w.hovertext,{}),line:{color:r.color,width:r.width,dash:r.dash,backoff:r.backoff,shape:a({},r.shape,{values:["linear","spline"]}),smoothing:r.smoothing,editType:"calc"},connectgaps:w.connectgaps,fill:a({},w.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:w.fillcolor,marker:a({symbol:n.symbol,opacity:n.opacity,maxdisplayed:n.maxdisplayed,angle:n.angle,angleref:n.angleref,standoff:n.standoff,size:n.size,sizeref:n.sizeref,sizemin:n.sizemin,sizemode:n.sizemode,line:a({width:t.width,editType:"calc"},e("marker.line")),gradient:n.gradient,editType:"calc"},e("marker")),textfont:w.textfont,textposition:w.textposition,selected:w.selected,unselected:w.unselected,hoverinfo:a({},f.hoverinfo,{flags:["a","b","text","name"]}),hoveron:w.hoveron,hovertemplate:M()}},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"../scatter/attributes":936}],971:[function(i,U,V){var w=i("fast-isnumeric"),f=i("../scatter/colorscale_calc"),M=i("../scatter/arrays_to_calcdata"),T=i("../scatter/calc_selection"),e=i("../scatter/calc").calcMarkerSize,a=i("../carpet/lookup_carpetid");U.exports=function(r,t){var h=t._carpetTrace=a(r,t);if(!(!h||!h.visible||h.visible==="legendonly")){var s;t.xaxis=h.xaxis,t.yaxis=h.yaxis;var o=t._length,y=new Array(o),d,p,c=!1;for(s=0;s<o;s++)if(d=t.a[s],p=t.b[s],w(d)&&w(p)){var m=h.ab2xy(+d,+p,!0),l=h.isVisible(+d,+p);l||(c=!0),y[s]={x:m[0],y:m[1],a:d,b:p,vis:l}}else y[s]={x:!1,y:!1};return t._needsCull=c,y[0].carpet=h,y[0].trace=t,e(t,o),f(r,t),M(y,t),T(y,t),y}}},{"../carpet/lookup_carpetid":717,"../scatter/arrays_to_calcdata":935,"../scatter/calc":937,"../scatter/calc_selection":938,"../scatter/colorscale_calc":939,"fast-isnumeric":190}],972:[function(i,U,V){var w=i("../../lib"),f=i("../scatter/constants"),M=i("../scatter/subtypes"),T=i("../scatter/marker_defaults"),e=i("../scatter/line_defaults"),a=i("../scatter/line_shape_defaults"),n=i("../scatter/text_defaults"),r=i("../scatter/fillcolor_defaults"),t=i("./attributes");U.exports=function(s,o,y,d){function p(_,g){return w.coerce(s,o,t,_,g)}p("carpet"),o.xaxis="x",o.yaxis="y";var c=p("a"),m=p("b"),l=Math.min(c.length,m.length);if(!l){o.visible=!1;return}o._length=l,p("text"),p("texttemplate"),p("hovertext");var x=l<f.PTS_LINESONLY?"lines+markers":"lines";p("mode",x),M.hasLines(o)&&(e(s,o,y,d,p,{backoff:!0}),a(s,o,p),p("connectgaps")),M.hasMarkers(o)&&T(s,o,y,d,p,{gradient:!0}),M.hasText(o)&&n(s,o,d,p);var u=[];(M.hasMarkers(o)||M.hasText(o))&&(p("marker.maxdisplayed"),u.push("points")),p("fill"),o.fill!=="none"&&(r(s,o,y,p),M.hasLines(o)||a(s,o,p)),(o.fill==="tonext"||o.fill==="toself")&&u.push("fills");var A=p("hoveron",u.join("+")||"points");A!=="fills"&&p("hovertemplate"),w.coerceSelectionMarkerOpacity(o,p)}},{"../../lib":515,"../scatter/constants":940,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/line_shape_defaults":951,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"./attributes":970}],973:[function(i,U,V){U.exports=function(f,M,T,e,a){var n=e[a];return f.a=n.a,f.b=n.b,f.y=n.y,f}},{}],974:[function(i,U,V){U.exports=function(f,M){var T={},e=M._carpet,a=e.ab2ij([f.a,f.b]),n=Math.floor(a[0]),r=a[0]-n,t=Math.floor(a[1]),h=a[1]-t,s=e.evalxy([],n,t,r,h);return T.yLabel=s[1].toFixed(3),T}},{}],975:[function(i,U,V){var w=i("../scatter/hover"),f=i("../../lib").fillText;U.exports=function(T,e,a,n){var r=w(T,e,a,n);if(!r||r[0].index===!1)return;var t=r[0];if(t.index===void 0){var h=1-t.y0/T.ya._length,s=T.xa._length,o=s*h/2,y=s-o;return t.x0=Math.max(Math.min(t.x0,y),o),t.x1=Math.max(Math.min(t.x1,y),o),r}var d=t.cd[t.index];t.a=d.a,t.b=d.b,t.xLabelVal=void 0,t.yLabelVal=void 0;var p=t.trace,c=p._carpet,m=p._module.formatLabels(d,p);t.yLabel=m.yLabel,delete t.text;var l=[];function x(_,g){var b;_.labelprefix&&_.labelprefix.length>0?b=_.labelprefix.replace(/ = $/,""):b=_._hovertitle,l.push(b+": "+g.toFixed(3)+_.labelsuffix)}if(!p.hovertemplate){var u=d.hi||p.hoverinfo,A=u.split("+");A.indexOf("all")!==-1&&(A=["a","b","text"]),A.indexOf("a")!==-1&&x(c.aaxis,d.a),A.indexOf("b")!==-1&&x(c.baxis,d.b),l.push("y: "+t.yLabel),A.indexOf("text")!==-1&&f(d,p,l),t.extraText=l.join("<br>")}return r}},{"../../lib":515,"../scatter/hover":947}],976:[function(i,U,V){U.exports={attributes:i("./attributes"),supplyDefaults:i("./defaults"),colorbar:i("../scatter/marker_colorbar"),formatLabels:i("./format_labels"),calc:i("./calc"),plot:i("./plot"),style:i("../scatter/style").style,styleOnSelect:i("../scatter/style").styleOnSelect,hoverPoints:i("./hover"),selectPoints:i("../scatter/select"),eventData:i("./event_data"),moduleType:"trace",name:"scattercarpet",basePlotModule:i("../../plots/cartesian"),categories:["svg","carpet","symbols","showLegend","carpetDependent","zoomScale"],meta:{}}},{"../../plots/cartesian":578,"../scatter/marker_colorbar":954,"../scatter/select":958,"../scatter/style":960,"./attributes":970,"./calc":971,"./defaults":972,"./event_data":973,"./format_labels":974,"./hover":975,"./plot":977}],977:[function(i,U,V){var w=i("../scatter/plot"),f=i("../../plots/cartesian/axes"),M=i("../../components/drawing");U.exports=function(e,a,n,r){var t,h,s,o=n[0][0].carpet,y=f.getFromId(e,o.xaxis||"x"),d=f.getFromId(e,o.yaxis||"y"),p={xaxis:y,yaxis:d,plot:a.plot};for(t=0;t<n.length;t++)h=n[t][0].trace,h._xA=y,h._yA=d;for(w(e,p,n,r),t=0;t<n.length;t++)h=n[t][0].trace,s=r.selectAll("g.trace"+h.uid+" .js-line"),M.setClipUrl(s,n[t][0].carpet._clipPathId,e)}},{"../../components/drawing":389,"../../plots/cartesian/axes":566,"../scatter/plot":957}],978:[function(i,U,V){var w=i("../../plots/template_attributes").hovertemplateAttrs,f=i("../../plots/template_attributes").texttemplateAttrs,M=i("../scatter/attributes"),T=i("../../plots/attributes"),e=i("../../components/colorscale/attributes"),a=i("../../components/drawing/attributes").dash,n=i("../../lib/extend").extendFlat,r=i("../../plot_api/edit_types").overrideAll,t=M.marker,h=M.line,s=t.line;U.exports=r({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3"},geojson:{valType:"any",editType:"calc"},featureidkey:{valType:"string",editType:"calc",dflt:"id"},mode:n({},M.mode,{dflt:"markers"}),text:n({},M.text,{}),texttemplate:f({editType:"plot"},{keys:["lat","lon","location","text"]}),hovertext:n({},M.hovertext,{}),textfont:M.textfont,textposition:M.textposition,line:{color:h.color,width:h.width,dash:a},connectgaps:M.connectgaps,marker:n({symbol:t.symbol,opacity:t.opacity,angle:t.angle,angleref:n({},t.angleref,{values:["previous","up","north"]}),standoff:t.standoff,size:t.size,sizeref:t.sizeref,sizemin:t.sizemin,sizemode:t.sizemode,colorbar:t.colorbar,line:n({width:s.width},e("marker.line")),gradient:t.gradient},e("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:M.fillcolor,selected:M.selected,unselected:M.unselected,hoverinfo:n({},T.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:w()},"calc","nested")},{"../../components/colorscale/attributes":374,"../../components/drawing/attributes":388,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/attributes":562,"../../plots/template_attributes":642,"../scatter/attributes":936}],979:[function(i,U,V){var w=i("fast-isnumeric"),f=i("../../constants/numerical").BADNUM,M=i("../scatter/colorscale_calc"),T=i("../scatter/arrays_to_calcdata"),e=i("../scatter/calc_selection"),a=i("../../lib")._;function n(r){return r&&typeof r=="string"}U.exports=function(t,h){var s=Array.isArray(h.locations),o=s?h.locations.length:h._length,y=new Array(o),d;h.geojson?d=function(u){return n(u)||w(u)}:d=n;for(var p=0;p<o;p++){var c=y[p]={};if(s){var m=h.locations[p];c.loc=d(m)?m:null}else{var l=h.lon[p],x=h.lat[p];w(l)&&w(x)?c.lonlat=[+l,+x]:c.lonlat=[f,f]}}return T(y,h),M(t,h),e(y,h),o&&(y[0].t={labels:{lat:a(t,"lat:")+" ",lon:a(t,"lon:")+" "}}),y}},{"../../constants/numerical":491,"../../lib":515,"../scatter/arrays_to_calcdata":935,"../scatter/calc_selection":938,"../scatter/colorscale_calc":939,"fast-isnumeric":190}],980:[function(i,U,V){var w=i("../../lib"),f=i("../scatter/subtypes"),M=i("../scatter/marker_defaults"),T=i("../scatter/line_defaults"),e=i("../scatter/text_defaults"),a=i("../scatter/fillcolor_defaults"),n=i("./attributes");U.exports=function(t,h,s,o){function y(A,_){return w.coerce(t,h,n,A,_)}var d=y("locations"),p;if(d&&d.length){var c=y("geojson"),m;(typeof c=="string"&&c!==""||w.isPlainObject(c))&&(m="geojson-id");var l=y("locationmode",m);l==="geojson-id"&&y("featureidkey"),p=d.length}else{var x=y("lon")||[],u=y("lat")||[];p=Math.min(x.length,u.length)}if(!p){h.visible=!1;return}h._length=p,y("text"),y("hovertext"),y("hovertemplate"),y("mode"),f.hasLines(h)&&(T(t,h,s,o,y),y("connectgaps")),f.hasMarkers(h)&&M(t,h,s,o,y,{gradient:!0}),f.hasText(h)&&(y("texttemplate"),e(t,h,o,y)),y("fill"),h.fill!=="none"&&a(t,h,s,y),w.coerceSelectionMarkerOpacity(h,y)}},{"../../lib":515,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"./attributes":978}],981:[function(i,U,V){U.exports=function(f,M,T,e,a){f.lon=M.lon,f.lat=M.lat,f.location=M.loc?M.loc:null;var n=e[a];return n.fIn&&n.fIn.properties&&(f.properties=n.fIn.properties),f}},{}],982:[function(i,U,V){var w=i("../../plots/cartesian/axes");U.exports=function(M,T,e){var a={},n=e[T.geo]._subplot,r=n.mockAxis,t=M.lonlat;return a.lonLabel=w.tickText(r,r.c2l(t[0]),!0).text,a.latLabel=w.tickText(r,r.c2l(t[1]),!0).text,a}},{"../../plots/cartesian/axes":566}],983:[function(i,U,V){var w=i("../../components/fx"),f=i("../../constants/numerical").BADNUM,M=i("../scatter/get_trace_color"),T=i("../../lib").fillText,e=i("./attributes");U.exports=function(r,t,h){var s=r.cd,o=s[0].trace,y=r.xa,d=r.ya,p=r.subplot,c=p.projection.isLonLatOverEdges,m=p.project;function l(v){var k=v.lonlat;if(k[0]===f||c(k))return 1/0;var S=m(k),E=m([t,h]),C=Math.abs(S[0]-E[0]),F=Math.abs(S[1]-E[1]),I=Math.max(3,v.mrc||0);return Math.max(Math.sqrt(C*C+F*F)-I,1-3/I)}if(w.getClosest(s,l,r),r.index!==!1){var x=s[r.index],u=x.lonlat,A=[y.c2p(u),d.c2p(u)],_=x.mrc||1;r.x0=A[0]-_,r.x1=A[0]+_,r.y0=A[1]-_,r.y1=A[1]+_,r.loc=x.loc,r.lon=u[0],r.lat=u[1];var g={};g[o.geo]={_subplot:p};var b=o._module.formatLabels(x,o,g);return r.lonLabel=b.lonLabel,r.latLabel=b.latLabel,r.color=M(o,x),r.extraText=a(o,x,r,s[0].t.labels),r.hovertemplate=o.hovertemplate,[r]}};function a(n,r,t,h){if(n.hovertemplate)return;var s=r.hi||n.hoverinfo,o=s==="all"?e.hoverinfo.flags:s.split("+"),y=o.indexOf("location")!==-1&&Array.isArray(n.locations),d=o.indexOf("lon")!==-1,p=o.indexOf("lat")!==-1,c=o.indexOf("text")!==-1,m=[];function l(x){return x+"\xB0"}return y?m.push(r.loc):d&&p?m.push("("+l(t.latLabel)+", "+l(t.lonLabel)+")"):d?m.push(h.lon+l(t.lonLabel)):p&&m.push(h.lat+l(t.latLabel)),c&&T(r,n,m),m.join("<br>")}},{"../../components/fx":407,"../../constants/numerical":491,"../../lib":515,"../scatter/get_trace_color":946,"./attributes":978}],984:[function(i,U,V){U.exports={attributes:i("./attributes"),supplyDefaults:i("./defaults"),colorbar:i("../scatter/marker_colorbar"),formatLabels:i("./format_labels"),calc:i("./calc"),calcGeoJSON:i("./plot").calcGeoJSON,plot:i("./plot").plot,style:i("./style"),styleOnSelect:i("../scatter/style").styleOnSelect,hoverPoints:i("./hover"),eventData:i("./event_data"),selectPoints:i("./select"),moduleType:"trace",name:"scattergeo",basePlotModule:i("../../plots/geo"),categories:["geo","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/geo":598,"../scatter/marker_colorbar":954,"../scatter/style":960,"./attributes":978,"./calc":979,"./defaults":980,"./event_data":981,"./format_labels":982,"./hover":983,"./plot":985,"./select":986,"./style":987}],985:[function(i,U,V){var w=i("@plotly/d3"),f=i("../../lib"),M=i("../../lib/topojson_utils").getTopojsonFeatures,T=i("../../lib/geojson_utils"),e=i("../../lib/geo_location_utils"),a=i("../../plots/cartesian/autorange").findExtremes,n=i("../../constants/numerical").BADNUM,r=i("../scatter/calc").calcMarkerSize,t=i("../scatter/subtypes"),h=i("./style");function s(y,d,p){var c=d.layers.frontplot.select(".scatterlayer"),m=f.makeTraceGroups(c,p,"trace scattergeo");function l(x,u){x.lonlat[0]===n&&w.select(u).remove()}m.selectAll("*").remove(),m.each(function(x){var u=w.select(this),A=x[0].trace;if(t.hasLines(A)||A.fill!=="none"){var _=T.calcTraceToLineCoords(x),g=A.fill!=="none"?T.makePolygon(_):T.makeLine(_);u.selectAll("path.js-line").data([{geojson:g,trace:A}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}t.hasMarkers(A)&&u.selectAll("path.point").data(f.identity).enter().append("path").classed("point",!0).each(function(b){l(b,this)}),t.hasText(A)&&u.selectAll("g").data(f.identity).enter().append("g").append("text").each(function(b){l(b,this)}),h(y,x)})}function o(y,d){var p=y[0].trace,c=d[p.geo],m=c._subplot,l=p._length,x,u;if(Array.isArray(p.locations)){var A=p.locationmode,_=A==="geojson-id"?e.extractTraceFeature(y):M(p,m.topojson);for(x=0;x<l;x++){u=y[x];var g=A==="geojson-id"?u.fOut:e.locationToFeature(A,u.loc,_);u.lonlat=g?g.properties.ct:[n,n]}}var b={padded:!0},v,k;if(c.fitbounds==="geojson"&&p.locationmode==="geojson-id"){var S=e.computeBbox(e.getTraceGeojson(p));v=[S[0],S[2]],k=[S[1],S[3]]}else{for(v=new Array(l),k=new Array(l),x=0;x<l;x++)u=y[x],v[x]=u.lonlat[0],k[x]=u.lonlat[1];b.ppad=r(p,l)}p._extremes.lon=a(c.lonaxis._ax,v,b),p._extremes.lat=a(c.lataxis._ax,k,b)}U.exports={calcGeoJSON:o,plot:s}},{"../../constants/numerical":491,"../../lib":515,"../../lib/geo_location_utils":508,"../../lib/geojson_utils":509,"../../lib/topojson_utils":544,"../../plots/cartesian/autorange":565,"../scatter/calc":937,"../scatter/subtypes":961,"./style":987,"@plotly/d3":58}],986:[function(i,U,V){var w=i("../scatter/subtypes"),f=i("../../constants/numerical").BADNUM;U.exports=function(T,e){var a=T.cd,n=T.xaxis,r=T.yaxis,t=[],h=a[0].trace,s,o,y,d,p,c=!w.hasMarkers(h)&&!w.hasText(h);if(c)return[];if(e===!1)for(p=0;p<a.length;p++)a[p].selected=0;else for(p=0;p<a.length;p++)s=a[p],o=s.lonlat,o[0]!==f&&(y=n.c2p(o),d=r.c2p(o),e.contains([y,d],null,p,T)?(t.push({pointNumber:p,lon:o[0],lat:o[1]}),s.selected=1):s.selected=0);return t}},{"../../constants/numerical":491,"../scatter/subtypes":961}],987:[function(i,U,V){var w=i("@plotly/d3"),f=i("../../components/drawing"),M=i("../../components/color"),T=i("../scatter/style"),e=T.stylePoints,a=T.styleText;U.exports=function(t,h){h&&n(t,h)};function n(r,t){var h=t[0].trace,s=t[0].node3;s.style("opacity",t[0].trace.opacity),e(s,h,r),a(s,h,r),s.selectAll("path.js-line").style("fill","none").each(function(o){var y=w.select(this),d=o.trace,p=d.line||{};y.call(M.stroke,p.color).call(f.dashLine,p.dash||"",p.width||0),d.fill!=="none"&&y.call(M.fill,d.fillcolor)})}},{"../../components/color":367,"../../components/drawing":389,"../scatter/style":960,"@plotly/d3":58}],988:[function(i,U,V){var w=i("../../plots/attributes"),f=i("../scatter/attributes"),M=i("../../plots/cartesian/axis_format_attributes").axisHoverFormat,T=i("../../components/colorscale/attributes"),e=i("../../lib/sort_object_keys"),a=i("../../lib/extend").extendFlat,n=i("../../plot_api/edit_types").overrideAll,r=i("./constants").DASHES,t=f.line,h=f.marker,s=h.line,o=U.exports=n({x:f.x,x0:f.x0,dx:f.dx,y:f.y,y0:f.y0,dy:f.dy,xperiod:f.xperiod,yperiod:f.yperiod,xperiod0:f.xperiod0,yperiod0:f.yperiod0,xperiodalignment:f.xperiodalignment,yperiodalignment:f.yperiodalignment,xhoverformat:M("x"),yhoverformat:M("y"),text:f.text,hovertext:f.hovertext,textposition:f.textposition,textfont:f.textfont,mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:t.color,width:t.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:e(r),dflt:"solid"}},marker:a({},T("marker"),{symbol:h.symbol,angle:h.angle,size:h.size,sizeref:h.sizeref,sizemin:h.sizemin,sizemode:h.sizemode,opacity:h.opacity,colorbar:h.colorbar,line:a({},T("marker.line"),{width:s.width})}),connectgaps:f.connectgaps,fill:a({},f.fill,{dflt:"none"}),fillcolor:f.fillcolor,selected:{marker:f.selected.marker,textfont:f.selected.textfont},unselected:{marker:f.unselected.marker,textfont:f.unselected.textfont},opacity:w.opacity},"calc","nested");o.x.editType=o.y.editType=o.x0.editType=o.y0.editType="calc+clearAxisTypes",o.hovertemplate=f.hovertemplate,o.texttemplate=f.texttemplate},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../lib/sort_object_keys":538,"../../plot_api/edit_types":548,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../scatter/attributes":936,"./constants":991}],989:[function(i,U,V){var w=i("./hover");U.exports={moduleType:"trace",name:"scattergl",basePlotModule:i("../../plots/cartesian"),categories:["gl","regl","cartesian","symbols","errorBarsOK","showLegend","scatter-like"],attributes:i("./attributes"),supplyDefaults:i("./defaults"),crossTraceDefaults:i("../scatter/cross_trace_defaults"),colorbar:i("../scatter/marker_colorbar"),formatLabels:i("./format_labels"),calc:i("./calc"),hoverPoints:w.hoverPoints,selectPoints:i("./select"),meta:{}}},{"../../plots/cartesian":578,"../scatter/cross_trace_defaults":942,"../scatter/marker_colorbar":954,"./attributes":988,"./calc":990,"./defaults":993,"./format_labels":995,"./hover":997,"./select":1001}],990:[function(i,U,V){var w=i("@plotly/point-cluster"),f=i("../../lib"),M=i("../../plots/cartesian/axis_ids"),T=i("../../plots/cartesian/autorange").findExtremes,e=i("../../plots/cartesian/align_period"),a=i("../scatter/calc"),n=a.calcMarkerSize,r=a.calcAxisExpansion,t=a.setFirstScatter,h=i("../scatter/colorscale_calc"),s=i("./convert"),o=i("./scene_update"),y=i("../../constants/numerical").BADNUM,d=i("./constants").TOO_MANY_POINTS;U.exports=function(l,x){var u=l._fullLayout,A=x._xA=M.getFromId(l,x.xaxis,"x"),_=x._yA=M.getFromId(l,x.yaxis,"y"),g=u._plots[x.xaxis+x.yaxis],b=x._length,v=b>=d,k=b*2,S={},E,C=A.makeCalcdata(x,"x"),F=_.makeCalcdata(x,"y"),I=e(x,A,"x",C),D=e(x,_,"y",F),R=I.vals,O=D.vals;x._x=R,x._y=O,x.xperiodalignment&&(x._origX=C,x._xStarts=I.starts,x._xEnds=I.ends),x.yperiodalignment&&(x._origY=F,x._yStarts=D.starts,x._yEnds=D.ends);var z=new Array(k),B=new Array(b);for(E=0;E<b;E++)z[E*2]=R[E]===y?NaN:R[E],z[E*2+1]=O[E]===y?NaN:O[E],B[E]=E;if(A.type==="log")for(E=0;E<k;E+=2)z[E]=A.c2l(z[E]);if(_.type==="log")for(E=1;E<k;E+=2)z[E]=_.c2l(z[E]);v&&A.type!=="log"&&_.type!=="log"?S.tree=w(z):S.ids=B,h(l,x);var G=c(l,g,x,z,R,O),Q=o(l,g);t(u,x);var X;return v?G.marker&&(X=G.marker.sizeAvg||Math.max(G.marker.size,3)):X=n(x,b),r(l,x,A,_,R,O,X),G.errorX&&p(x,A,G.errorX),G.errorY&&p(x,_,G.errorY),G.fill&&!Q.fill2d&&(Q.fill2d=!0),G.marker&&!Q.scatter2d&&(Q.scatter2d=!0),G.line&&!Q.line2d&&(Q.line2d=!0),(G.errorX||G.errorY)&&!Q.error2d&&(Q.error2d=!0),G.text&&!Q.glText&&(Q.glText=!0),G.marker&&(G.marker.snap=b),Q.lineOptions.push(G.line),Q.errorXOptions.push(G.errorX),Q.errorYOptions.push(G.errorY),Q.fillOptions.push(G.fill),Q.markerOptions.push(G.marker),Q.markerSelectedOptions.push(G.markerSel),Q.markerUnselectedOptions.push(G.markerUnsel),Q.textOptions.push(G.text),Q.textSelectedOptions.push(G.textSel),Q.textUnselectedOptions.push(G.textUnsel),Q.selectBatch.push([]),Q.unselectBatch.push([]),S._scene=Q,S.index=Q.count,S.x=R,S.y=O,S.positions=z,Q.count++,[{x:!1,y:!1,t:S,trace:x}]};function p(m,l,x){var u=m._extremes[l._id],A=T(l,x._bnds,{padded:!0});u.min=u.min.concat(A.min),u.max=u.max.concat(A.max)}function c(m,l,x,u,A,_){var g=s.style(m,x);if(g.marker&&(g.marker.positions=u),g.line&&u.length>1&&f.extendFlat(g.line,s.linePositions(m,x,u)),g.errorX||g.errorY){var b=s.errorBarPositions(m,x,u,A,_);g.errorX&&f.extendFlat(g.errorX,b.x),g.errorY&&f.extendFlat(g.errorY,b.y)}return g.text&&(f.extendFlat(g.text,{positions:u},s.textPosition(m,x,g.text,g.marker)),f.extendFlat(g.textSel,{positions:u},s.textPosition(m,x,g.text,g.markerSel)),f.extendFlat(g.textUnsel,{positions:u},s.textPosition(m,x,g.text,g.markerUnsel))),g}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/align_period":563,"../../plots/cartesian/autorange":565,"../../plots/cartesian/axis_ids":570,"../scatter/calc":937,"../scatter/colorscale_calc":939,"./constants":991,"./convert":992,"./scene_update":1e3,"@plotly/point-cluster":59}],991:[function(i,U,V){var w=20;U.exports={TOO_MANY_POINTS:1e5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:w,SYMBOL_STROKE:w/20,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},{}],992:[function(i,U,V){var w=i("fast-isnumeric"),f=i("svg-path-sdf"),M=i("color-normalize"),T=i("../../registry"),e=i("../../lib"),a=i("../../components/drawing"),n=i("../../plots/cartesian/axis_ids"),r=i("../../lib/gl_format_color").formatColor,t=i("../scatter/subtypes"),h=i("../scatter/make_bubble_size_func"),s=i("./helpers"),o=i("./constants"),y=i("../../constants/interactions").DESELECTDIM,d={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},p=i("../../components/fx/helpers").appendArrayPointValue;function c(I,D){var R,O={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0},z=I._context.plotGlPixelRatio;if(D.visible!==!0)return O;if(t.hasText(D)&&(O.text=m(I,D),O.textSel=u(I,D,D.selected),O.textUnsel=u(I,D,D.unselected)),t.hasMarkers(D)&&(O.marker=l(I,D),O.markerSel=x(I,D,D.selected),O.markerUnsel=x(I,D,D.unselected),!D.unselected&&e.isArrayOrTypedArray(D.marker.opacity))){var B=D.marker.opacity;for(O.markerUnsel.opacity=new Array(B.length),R=0;R<B.length;R++)O.markerUnsel.opacity[R]=y*B[R]}if(t.hasLines(D)){O.line={overlay:!0,thickness:D.line.width*z,color:D.line.color,opacity:D.opacity};var G=(o.DASHES[D.line.dash]||[1]).slice();for(R=0;R<G.length;++R)G[R]*=D.line.width*z;O.line.dashes=G}return D.error_x&&D.error_x.visible&&(O.errorX=A(D,D.error_x,z)),D.error_y&&D.error_y.visible&&(O.errorY=A(D,D.error_y,z)),!!D.fill&&D.fill!=="none"&&(O.fill={closed:!0,fill:D.fillcolor,thickness:0}),O}function m(I,D){var R=I._fullLayout,O=D._length,z=D.textfont,B=D.textposition,G=Array.isArray(B)?B:[B],Q=z.color,X=z.size,j=z.family,re={},ue,K=I._context.plotGlPixelRatio,te=D.texttemplate;if(te){re.text=[];var Y=R._d3locale,H=Array.isArray(te),ee=H?Math.min(te.length,O):O,ne=H?function(be){return te[be]}:function(){return te};for(ue=0;ue<ee;ue++){var Z={i:ue},q=D._module.formatLabels(Z,D,R),ie={};p(ie,D,ue);var se=D._meta||{};re.text.push(e.texttemplateString(ne(ue),q,Y,ie,Z,se))}}else Array.isArray(D.text)&&D.text.length<O?re.text=D.text.slice():re.text=D.text;if(Array.isArray(re.text))for(ue=re.text.length;ue<O;ue++)re.text[ue]="";for(re.opacity=D.opacity,re.font={},re.align=[],re.baseline=[],ue=0;ue<G.length;ue++){var ae=G[ue].split(/\s+/);switch(ae[1]){case"left":re.align.push("right");break;case"right":re.align.push("left");break;default:re.align.push(ae[1])}switch(ae[0]){case"top":re.baseline.push("bottom");break;case"bottom":re.baseline.push("top");break;default:re.baseline.push(ae[0])}}if(Array.isArray(Q))for(re.color=new Array(O),ue=0;ue<O;ue++)re.color[ue]=Q[ue];else re.color=Q;if(e.isArrayOrTypedArray(X)||Array.isArray(j))for(re.font=new Array(O),ue=0;ue<O;ue++){var oe=re.font[ue]={};oe.size=(e.isTypedArray(X)?X[ue]:Array.isArray(X)?w(X[ue])?X[ue]:0:X)*K,oe.family=Array.isArray(j)?j[ue]:j}else re.font={size:X*K,family:j};return re}function l(I,D){var R=D._length,O=D.marker,z={},B,G=e.isArrayOrTypedArray(O.symbol),Q=e.isArrayOrTypedArray(O.angle),X=e.isArrayOrTypedArray(O.color),j=e.isArrayOrTypedArray(O.line.color),re=e.isArrayOrTypedArray(O.opacity),ue=e.isArrayOrTypedArray(O.size),K=e.isArrayOrTypedArray(O.line.width),te;if(G||(te=s.isOpenSymbol(O.symbol)),G||X||j||re||Q){z.symbols=new Array(R),z.angles=new Array(R),z.colors=new Array(R),z.borderColors=new Array(R);var Y=O.symbol,H=O.angle,ee=r(O,O.opacity,R),ne=r(O.line,O.opacity,R);if(!Array.isArray(ne[0])){var Z=ne;for(ne=Array(R),B=0;B<R;B++)ne[B]=Z}if(!Array.isArray(ee[0])){var q=ee;for(ee=Array(R),B=0;B<R;B++)ee[B]=q}if(!Array.isArray(Y)){var ie=Y;for(Y=Array(R),B=0;B<R;B++)Y[B]=ie}if(!Array.isArray(H)){var se=H;for(H=Array(R),B=0;B<R;B++)H[B]=se}for(z.symbols=Y,z.angles=H,z.colors=ee,z.borderColors=ne,B=0;B<R;B++)G&&(te=s.isOpenSymbol(O.symbol[B])),te&&(ne[B]=ee[B].slice(),ee[B]=ee[B].slice(),ee[B][3]=0);for(z.opacity=D.opacity,z.markers=new Array(R),B=0;B<R;B++)z.markers[B]=S({mx:z.symbols[B],ma:z.angles[B]},D)}else te?(z.color=M(O.color,"uint8"),z.color[3]=0,z.borderColor=M(O.color,"uint8")):(z.color=M(O.color,"uint8"),z.borderColor=M(O.line.color,"uint8")),z.opacity=D.opacity*O.opacity,z.marker=S({mx:O.symbol,ma:O.angle},D);var ae=1,oe=h(D,ae),be;if(ue||K){var ce=z.sizes=new Array(R),de=z.borderSizes=new Array(R),ye=0,ge;if(ue){for(B=0;B<R;B++)ce[B]=oe(O.size[B]),ye+=ce[B];ge=ye/R}else for(be=oe(O.size),B=0;B<R;B++)ce[B]=be;if(K)for(B=0;B<R;B++)de[B]=O.line.width[B];else for(be=O.line.width,B=0;B<R;B++)de[B]=be;z.sizeAvg=ge}else z.size=oe(O&&O.size||10),z.borderSizes=oe(O.line.width);return z}function x(I,D,R){var O=D.marker,z={};return R&&(R.marker&&R.marker.symbol?z=l(I,e.extendFlat({},O,R.marker)):R.marker&&(R.marker.size&&(z.size=R.marker.size),R.marker.color&&(z.colors=R.marker.color),R.marker.opacity!==void 0&&(z.opacity=R.marker.opacity))),z}function u(I,D,R){var O={};if(!R)return O;if(R.textfont){var z={opacity:1,text:D.text,texttemplate:D.texttemplate,textposition:D.textposition,textfont:e.extendFlat({},D.textfont)};R.textfont&&e.extendFlat(z.textfont,R.textfont),O=m(I,z)}return O}function A(I,D,R){var O={capSize:D.width*2*R,lineWidth:D.thickness*R,color:D.color};return D.copy_ystyle&&(O=I.error_y),O}var _=o.SYMBOL_SDF_SIZE,g=o.SYMBOL_SIZE,b=o.SYMBOL_STROKE,v={},k=a.symbolFuncs[0](g*.05);function S(I,D){var R=I.mx;if(R==="circle")return null;var O,z,B=a.symbolNumber(R),G=a.symbolFuncs[B%100],Q=!!a.symbolNoDot[B%100],X=!!a.symbolNoFill[B%100],j=s.isDotSymbol(R);if(I.ma&&(R+="_"+I.ma),v[R])return v[R];var re=a.getMarkerAngle(I,D);return j&&!Q?O=G(g*1.1,re)+k:O=G(g,re),z=f(O,{w:_,h:_,viewBox:[-g,-g,g,g],stroke:X?b:-b}),v[R]=z,z||null}function E(I,D,R){var O=R.length,z=O/2,B,G;if(t.hasLines(D)&&z)if(D.line.shape==="hv"){for(B=[],G=0;G<z-1;G++)isNaN(R[G*2])||isNaN(R[G*2+1])?B.push(NaN,NaN,NaN,NaN):(B.push(R[G*2],R[G*2+1]),!isNaN(R[G*2+2])&&!isNaN(R[G*2+3])?B.push(R[G*2+2],R[G*2+1]):B.push(NaN,NaN));B.push(R[O-2],R[O-1])}else if(D.line.shape==="hvh"){for(B=[],G=0;G<z-1;G++)if(isNaN(R[G*2])||isNaN(R[G*2+1])||isNaN(R[G*2+2])||isNaN(R[G*2+3]))!isNaN(R[G*2])&&!isNaN(R[G*2+1])?B.push(R[G*2],R[G*2+1]):B.push(NaN,NaN),B.push(NaN,NaN);else{var Q=(R[G*2]+R[G*2+2])/2;B.push(R[G*2],R[G*2+1],Q,R[G*2+1],Q,R[G*2+3])}B.push(R[O-2],R[O-1])}else if(D.line.shape==="vhv"){for(B=[],G=0;G<z-1;G++)if(isNaN(R[G*2])||isNaN(R[G*2+1])||isNaN(R[G*2+2])||isNaN(R[G*2+3]))!isNaN(R[G*2])&&!isNaN(R[G*2+1])?B.push(R[G*2],R[G*2+1]):B.push(NaN,NaN),B.push(NaN,NaN);else{var X=(R[G*2+1]+R[G*2+3])/2;B.push(R[G*2],R[G*2+1],R[G*2],X,R[G*2+2],X)}B.push(R[O-2],R[O-1])}else if(D.line.shape==="vh"){for(B=[],G=0;G<z-1;G++)isNaN(R[G*2])||isNaN(R[G*2+1])?B.push(NaN,NaN,NaN,NaN):(B.push(R[G*2],R[G*2+1]),!isNaN(R[G*2+2])&&!isNaN(R[G*2+3])?B.push(R[G*2],R[G*2+3]):B.push(NaN,NaN));B.push(R[O-2],R[O-1])}else B=R;var j=!1;for(G=0;G<B.length;G++)if(isNaN(B[G])){j=!0;break}var re=j||B.length>o.TOO_MANY_POINTS||t.hasMarkers(D)?"rect":"round";if(j&&D.connectgaps){var ue=B[0],K=B[1];for(G=0;G<B.length;G+=2)isNaN(B[G])||isNaN(B[G+1])?(B[G]=ue,B[G+1]=K):(ue=B[G],K=B[G+1])}return{join:re,positions:B}}function C(I,D,R,O,z){var B=T.getComponentMethod("errorbars","makeComputeError"),G=n.getFromId(I,D.xaxis,"x"),Q=n.getFromId(I,D.yaxis,"y"),X=R.length/2,j={};function re(ue,K){var te=K._id.charAt(0),Y=D["error_"+te];if(Y&&Y.visible&&(K.type==="linear"||K.type==="log")){for(var H=B(Y),ee={x:0,y:1}[te],ne={x:[0,1,2,3],y:[2,3,0,1]}[te],Z=new Float64Array(4*X),q=1/0,ie=-1/0,se=0,ae=0;se<X;se++,ae+=4){var oe=ue[se];if(w(oe)){var be=R[se*2+ee],ce=H(oe,se),de=ce[0],ye=ce[1];if(w(de)&&w(ye)){var ge=oe-de,me=oe+ye;Z[ae+ne[0]]=be-K.c2l(ge),Z[ae+ne[1]]=K.c2l(me)-be,Z[ae+ne[2]]=0,Z[ae+ne[3]]=0,q=Math.min(q,oe-de),ie=Math.max(ie,oe+ye)}}}j[te]={positions:R,errors:Z,_bnds:[q,ie]}}}return re(O,G),re(z,Q),j}function F(I,D,R,O){var z=D._length,B={},G;if(t.hasMarkers(D)){var Q=R.font,X=R.align,j=R.baseline;for(B.offset=new Array(z),G=0;G<z;G++){var re=O.sizes?O.sizes[G]:O.size,ue=Array.isArray(Q)?Q[G].size:Q.size,K=Array.isArray(X)?X.length>1?X[G]:X[0]:X,te=Array.isArray(j)?j.length>1?j[G]:j[0]:j,Y=d[K],H=d[te],ee=re?re/.8+1:0,ne=-H*ee-H*.5;B.offset[G]=[Y*ee/ue,ne/ue]}}return B}U.exports={style:c,markerStyle:l,markerSelection:x,linePositions:E,errorBarPositions:C,textPosition:F}},{"../../components/drawing":389,"../../components/fx/helpers":403,"../../constants/interactions":490,"../../lib":515,"../../lib/gl_format_color":511,"../../plots/cartesian/axis_ids":570,"../../registry":647,"../scatter/make_bubble_size_func":953,"../scatter/subtypes":961,"./constants":991,"./helpers":996,"color-normalize":89,"fast-isnumeric":190,"svg-path-sdf":311}],993:[function(i,U,V){var w=i("../../lib"),f=i("../../registry"),M=i("./helpers"),T=i("./attributes"),e=i("../scatter/constants"),a=i("../scatter/subtypes"),n=i("../scatter/xy_defaults"),r=i("../scatter/period_defaults"),t=i("../scatter/marker_defaults"),h=i("../scatter/line_defaults"),s=i("../scatter/fillcolor_defaults"),o=i("../scatter/text_defaults");U.exports=function(d,p,c,m){function l(k,S){return w.coerce(d,p,T,k,S)}var x=d.marker?M.isOpenSymbol(d.marker.symbol):!1,u=a.isBubble(d),A=n(d,p,m,l);if(!A){p.visible=!1;return}r(d,p,m,l),l("xhoverformat"),l("yhoverformat");var _=A<e.PTS_LINESONLY?"lines+markers":"lines";l("text"),l("hovertext"),l("hovertemplate"),l("mode",_),a.hasLines(p)&&(l("connectgaps"),h(d,p,c,m,l),l("line.shape")),a.hasMarkers(p)&&(t(d,p,c,m,l,{noAngleRef:!0,noStandOff:!0}),l("marker.line.width",x||u?1:0)),a.hasText(p)&&(l("texttemplate"),o(d,p,m,l));var g=(p.line||{}).color,b=(p.marker||{}).color;l("fill"),p.fill!=="none"&&s(d,p,c,l);var v=f.getComponentMethod("errorbars","supplyDefaults");v(d,p,g||b||c,{axis:"y"}),v(d,p,g||b||c,{axis:"x",inherit:"y"}),w.coerceSelectionMarkerOpacity(p,l)}},{"../../lib":515,"../../registry":647,"../scatter/constants":940,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/marker_defaults":955,"../scatter/period_defaults":956,"../scatter/subtypes":961,"../scatter/text_defaults":962,"../scatter/xy_defaults":963,"./attributes":988,"./helpers":996}],994:[function(i,U,V){var w=i("../../lib"),f=i("../../components/color"),M=i("../../constants/interactions").DESELECTDIM;function T(e){var a=e[0],n=a.trace,r=a.t,t=r._scene,h=r.index,s=t.selectBatch[h],o=t.unselectBatch[h],y=t.textOptions[h],d=t.textSelectedOptions[h]||{},p=t.textUnselectedOptions[h]||{},c=w.extendFlat({},y),m,l;if(s.length||o.length){var x=d.color,u=p.color,A=y.color,_=Array.isArray(A);for(c.color=new Array(n._length),m=0;m<s.length;m++)l=s[m],c.color[l]=x||(_?A[l]:A);for(m=0;m<o.length;m++){l=o[m];var g=_?A[l]:A;c.color[l]=u||(x?g:f.addOpacity(g,M))}}t.glText[h].update(c)}U.exports={styleTextSelection:T}},{"../../components/color":367,"../../constants/interactions":490,"../../lib":515}],995:[function(i,U,V){var w=i("../scatter/format_labels");U.exports=function(M,T,e){var a=M.i;return"x"in M||(M.x=T._x[a]),"y"in M||(M.y=T._y[a]),w(M,T,e)}},{"../scatter/format_labels":945}],996:[function(i,U,V){var w=i("./constants");V.isOpenSymbol=function(f){return typeof f=="string"?w.OPEN_RE.test(f):f%200>100},V.isDotSymbol=function(f){return typeof f=="string"?w.DOT_RE.test(f):f>200}},{"./constants":991}],997:[function(i,U,V){var w=i("../../registry"),f=i("../../lib"),M=i("../scatter/get_trace_color");function T(a,n,r,t){var h=a.cd,s=h[0].t,o=h[0].trace,y=a.xa,d=a.ya,p=s.x,c=s.y,m=y.c2p(n),l=d.c2p(r),x=a.distance,u;if(s.tree){var A=y.p2c(m-x),_=y.p2c(m+x),g=d.p2c(l-x),b=d.p2c(l+x);t==="x"?u=s.tree.range(Math.min(A,_),Math.min(d._rl[0],d._rl[1]),Math.max(A,_),Math.max(d._rl[0],d._rl[1])):u=s.tree.range(Math.min(A,_),Math.min(g,b),Math.max(A,_),Math.max(g,b))}else u=s.ids;var v,k,S,E,C,F,I,D,R,O=x;if(t==="x"){var z=!!o.xperiodalignment,B=!!o.yperiodalignment;for(C=0;C<u.length;C++){if(v=u[C],S=p[v],F=Math.abs(y.c2p(S)-m),z){var G=y.c2p(o._xStarts[v]),Q=y.c2p(o._xEnds[v]);F=m>=Math.min(G,Q)&&m<=Math.max(G,Q)?0:1/0}if(F<O){if(O=F,E=c[v],I=d.c2p(E)-l,B){var X=d.c2p(o._yStarts[v]),j=d.c2p(o._yEnds[v]);I=l>=Math.min(X,j)&&l<=Math.max(X,j)?0:1/0}R=Math.sqrt(F*F+I*I),k=u[C]}}}else for(C=u.length-1;C>-1;C--)v=u[C],S=p[v],E=c[v],F=y.c2p(S)-m,I=d.c2p(E)-l,D=Math.sqrt(F*F+I*I),D<O&&(O=R=D,k=v);return a.index=k,a.distance=O,a.dxy=R,k===void 0?[a]:[e(a,p,c,o)]}function e(a,n,r,t){var h=a.xa,s=a.ya,o=a.distance,y=a.dxy,d=a.index,p={pointNumber:d,x:n[d],y:r[d]};p.tx=Array.isArray(t.text)?t.text[d]:t.text,p.htx=Array.isArray(t.hovertext)?t.hovertext[d]:t.hovertext,p.data=Array.isArray(t.customdata)?t.customdata[d]:t.customdata,p.tp=Array.isArray(t.textposition)?t.textposition[d]:t.textposition;var c=t.textfont;c&&(p.ts=f.isArrayOrTypedArray(c.size)?c.size[d]:c.size,p.tc=Array.isArray(c.color)?c.color[d]:c.color,p.tf=Array.isArray(c.family)?c.family[d]:c.family);var m=t.marker;m&&(p.ms=f.isArrayOrTypedArray(m.size)?m.size[d]:m.size,p.mo=f.isArrayOrTypedArray(m.opacity)?m.opacity[d]:m.opacity,p.mx=f.isArrayOrTypedArray(m.symbol)?m.symbol[d]:m.symbol,p.ma=f.isArrayOrTypedArray(m.angle)?m.angle[d]:m.angle,p.mc=f.isArrayOrTypedArray(m.color)?m.color[d]:m.color);var l=m&&m.line;l&&(p.mlc=Array.isArray(l.color)?l.color[d]:l.color,p.mlw=f.isArrayOrTypedArray(l.width)?l.width[d]:l.width);var x=m&&m.gradient;x&&x.type!=="none"&&(p.mgt=Array.isArray(x.type)?x.type[d]:x.type,p.mgc=Array.isArray(x.color)?x.color[d]:x.color);var u=h.c2p(p.x,!0),A=s.c2p(p.y,!0),_=p.mrc||1,g=t.hoverlabel;g&&(p.hbg=Array.isArray(g.bgcolor)?g.bgcolor[d]:g.bgcolor,p.hbc=Array.isArray(g.bordercolor)?g.bordercolor[d]:g.bordercolor,p.hts=f.isArrayOrTypedArray(g.font.size)?g.font.size[d]:g.font.size,p.htc=Array.isArray(g.font.color)?g.font.color[d]:g.font.color,p.htf=Array.isArray(g.font.family)?g.font.family[d]:g.font.family,p.hnl=f.isArrayOrTypedArray(g.namelength)?g.namelength[d]:g.namelength);var b=t.hoverinfo;b&&(p.hi=Array.isArray(b)?b[d]:b);var v=t.hovertemplate;v&&(p.ht=Array.isArray(v)?v[d]:v);var k={};k[a.index]=p;var S=t._origX,E=t._origY,C=f.extendFlat({},a,{color:M(t,p),x0:u-_,x1:u+_,xLabelVal:S?S[d]:p.x,y0:A-_,y1:A+_,yLabelVal:E?E[d]:p.y,cd:k,distance:o,spikeDistance:y,hovertemplate:p.ht});return p.htx?C.text=p.htx:p.tx?C.text=p.tx:t.text&&(C.text=t.text),f.fillText(p,t,C),w.getComponentMethod("errorbars","hoverInfo")(p,t,C),C}U.exports={hoverPoints:T,calcHover:e}},{"../../lib":515,"../../registry":647,"../scatter/get_trace_color":946}],998:[function(i,U,V){arguments[4][905][0].apply(V,arguments)},{"./base_index":989,"./plot":999,dup:905}],999:[function(i,U,y){var w=i("regl-scatter2d"),f=i("regl-line2d"),M=i("regl-error2d"),T=i("gl-text"),e=i("../../lib"),a=i("../../components/dragelement/helpers").selectMode,n=i("../../lib/prepare_regl"),r=i("../scatter/subtypes"),t=i("../scatter/link_traces"),h=i("./edit_style").styleTextSelection,s={};function o(d,p,c,m){var l=d._size,x=d.width*m,u=d.height*m,A=l.l*m,_=l.b*m,g=l.r*m,b=l.t*m,v=l.w*m,k=l.h*m;return[A+p.domain[0]*v,_+c.domain[0]*k,x-g-(1-p.domain[1])*v,u-b-(1-c.domain[1])*k]}var y=U.exports=function(p,c,m){if(!!m.length){var l=p._fullLayout,x=c._scene,u=c.xaxis,A=c.yaxis,_,g;if(!!x){var b=n(p,["ANGLE_instanced_arrays","OES_element_index_uint"],s);if(!b){x.init();return}var v=x.count,k=l._glcanvas.data()[0].regl;if(t(p,c,m),x.dirty){if(x.error2d===!0&&(x.error2d=M(k)),x.line2d===!0&&(x.line2d=f(k)),x.scatter2d===!0&&(x.scatter2d=w(k)),x.fill2d===!0&&(x.fill2d=f(k)),x.glText===!0)for(x.glText=new Array(v),_=0;_<v;_++)x.glText[_]=new T(k);if(x.glText){if(v>x.glText.length){var S=v-x.glText.length;for(_=0;_<S;_++)x.glText.push(new T(k))}else if(v<x.glText.length){var E=x.glText.length-v,C=x.glText.splice(v,E);C.forEach(function(Z){Z.destroy()})}for(_=0;_<v;_++)x.glText[_].update(x.textOptions[_])}if(x.line2d&&(x.line2d.update(x.lineOptions),x.lineOptions=x.lineOptions.map(function(Z){if(Z&&Z.positions){for(var q=Z.positions,ie=0;ie<q.length&&(isNaN(q[ie])||isNaN(q[ie+1]));)ie+=2;for(var se=q.length-2;se>ie&&(isNaN(q[se])||isNaN(q[se+1]));)se-=2;Z.positions=q.slice(ie,se+2)}return Z}),x.line2d.update(x.lineOptions)),x.error2d){var F=(x.errorXOptions||[]).concat(x.errorYOptions||[]);x.error2d.update(F)}x.scatter2d&&x.scatter2d.update(x.markerOptions),x.fillOrder=e.repeat(null,v),x.fill2d&&(x.fillOptions=x.fillOptions.map(function(Z,q){var ie=m[q];if(!(!Z||!ie||!ie[0]||!ie[0].trace)){var se=ie[0],ae=se.trace,oe=se.t,be=x.lineOptions[q],ce,de,ye=[];ae._ownfill&&ye.push(q),ae._nexttrace&&ye.push(q+1),ye.length&&(x.fillOrder[q]=ye);var ge=[],me=be&&be.positions||oe.positions,Se,Le;if(ae.fill==="tozeroy"){for(Se=0;Se<me.length&&isNaN(me[Se+1]);)Se+=2;for(Le=me.length-2;Le>Se&&isNaN(me[Le+1]);)Le-=2;me[Se+1]!==0&&(ge=[me[Se],0]),ge=ge.concat(me.slice(Se,Le+2)),me[Le+1]!==0&&(ge=ge.concat([me[Le],0]))}else if(ae.fill==="tozerox"){for(Se=0;Se<me.length&&isNaN(me[Se]);)Se+=2;for(Le=me.length-2;Le>Se&&isNaN(me[Le]);)Le-=2;me[Se]!==0&&(ge=[0,me[Se+1]]),ge=ge.concat(me.slice(Se,Le+2)),me[Le]!==0&&(ge=ge.concat([0,me[Le+1]]))}else if(ae.fill==="toself"||ae.fill==="tonext"){for(ge=[],ce=0,Z.splitNull=!0,de=0;de<me.length;de+=2)(isNaN(me[de])||isNaN(me[de+1]))&&(ge=ge.concat(me.slice(ce,de)),ge.push(me[ce],me[ce+1]),ge.push(null,null),ce=de+2);ge=ge.concat(me.slice(ce)),ce&&ge.push(me[ce],me[ce+1])}else{var Oe=ae._nexttrace;if(Oe){var we=x.lineOptions[q+1];if(we){var Ce=we.positions;if(ae.fill==="tonexty"){for(ge=me.slice(),q=Math.floor(Ce.length/2);q--;){var Ke=Ce[q*2],Ye=Ce[q*2+1];isNaN(Ke)||isNaN(Ye)||ge.push(Ke,Ye)}Z.fill=Oe.fillcolor}}}}if(ae._prevtrace&&ae._prevtrace.fill==="tonext"){var Fe=x.lineOptions[q-1].positions,Re=ge.length/2;ce=Re;var je=[ce];for(de=0;de<Fe.length;de+=2)(isNaN(Fe[de])||isNaN(Fe[de+1]))&&(je.push(de/2+Re+1),ce=de+2);ge=ge.concat(Fe),Z.hole=je}return Z.fillmode=ae.fill,Z.opacity=ae.opacity,Z.positions=ge,Z}}),x.fill2d.update(x.fillOptions))}var I=l.dragmode,D=a(I),R=l.clickmode.indexOf("select")>-1;for(_=0;_<v;_++){var O=m[_][0],z=O.trace,B=O.t,G=B.index,Q=z._length,X=B.x,j=B.y;if(z.selectedpoints||D||R){if(D||(D=!0),z.selectedpoints){var re=x.selectBatch[G]=e.selIndices2selPoints(z),ue={};for(g=0;g<re.length;g++)ue[re[g]]=1;var K=[];for(g=0;g<Q;g++)ue[g]||K.push(g);x.unselectBatch[G]=K}var te=B.xpx=new Array(Q),Y=B.ypx=new Array(Q);for(g=0;g<Q;g++)te[g]=u.c2p(X[g]),Y[g]=A.c2p(j[g])}else B.xpx=B.ypx=null}if(D){if(x.select2d||(x.select2d=w(l._glcanvas.data()[1].regl)),x.scatter2d){var H=new Array(v);for(_=0;_<v;_++)H[_]=x.selectBatch[_].length||x.unselectBatch[_].length?x.markerUnselectedOptions[_]:{};x.scatter2d.update(H)}x.select2d&&(x.select2d.update(x.markerOptions),x.select2d.update(x.markerSelectedOptions)),x.glText&&m.forEach(function(Z){var q=((Z||[])[0]||{}).trace||{};r.hasText(q)&&h(Z)})}else x.scatter2d&&x.scatter2d.update(x.markerOptions);var ee={viewport:o(l,u,A,p._context.plotGlPixelRatio),range:[(u._rl||u.range)[0],(A._rl||A.range)[0],(u._rl||u.range)[1],(A._rl||A.range)[1]]},ne=e.repeat(ee,x.count);x.fill2d&&x.fill2d.update(ne),x.line2d&&x.line2d.update(ne),x.error2d&&x.error2d.update(ne.concat(ne)),x.scatter2d&&x.scatter2d.update(ne),x.select2d&&x.select2d.update(ne),x.glText&&x.glText.forEach(function(Z){Z.update(ee)})}}};y.reglPrecompiled=s},{"../../components/dragelement/helpers":385,"../../lib":515,"../../lib/prepare_regl":528,"../scatter/link_traces":952,"../scatter/subtypes":961,"./edit_style":994,"gl-text":225,"regl-error2d":280,"regl-line2d":281,"regl-scatter2d":282}],1e3:[function(i,U,V){var w=i("../../lib");U.exports=function(M,T){var e=T._scene,a={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],unselectBatch:[]},n={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};return T._scene||(e=T._scene={},e.init=function(){w.extendFlat(e,n,a)},e.init(),e.update=function(t){var h=w.repeat(t,e.count);if(e.fill2d&&e.fill2d.update(h),e.scatter2d&&e.scatter2d.update(h),e.line2d&&e.line2d.update(h),e.error2d&&e.error2d.update(h.concat(h)),e.select2d&&e.select2d.update(h),e.glText)for(var s=0;s<e.count;s++)e.glText[s].update(t)},e.draw=function(){for(var t=e.count,h=e.fill2d,s=e.error2d,o=e.line2d,y=e.scatter2d,d=e.glText,p=e.select2d,c=e.selectBatch,m=e.unselectBatch,l=0;l<t;l++){if(h&&e.fillOrder[l]&&h.draw(e.fillOrder[l]),o&&e.lineOptions[l]&&o.draw(l),s&&(e.errorXOptions[l]&&s.draw(l),e.errorYOptions[l]&&s.draw(l+t)),y&&e.markerOptions[l])if(m[l].length){var x=w.repeat([],e.count);x[l]=m[l],y.draw(x)}else c[l].length||y.draw(l);d[l]&&e.textOptions[l]&&d[l].render()}p&&p.draw(c),e.dirty=!1},e.destroy=function(){e.fill2d&&e.fill2d.destroy&&e.fill2d.destroy(),e.scatter2d&&e.scatter2d.destroy&&e.scatter2d.destroy(),e.error2d&&e.error2d.destroy&&e.error2d.destroy(),e.line2d&&e.line2d.destroy&&e.line2d.destroy(),e.select2d&&e.select2d.destroy&&e.select2d.destroy(),e.glText&&e.glText.forEach(function(t){t.destroy&&t.destroy()}),e.lineOptions=null,e.fillOptions=null,e.markerOptions=null,e.markerSelectedOptions=null,e.markerUnselectedOptions=null,e.errorXOptions=null,e.errorYOptions=null,e.textOptions=null,e.textSelectedOptions=null,e.textUnselectedOptions=null,e.selectBatch=null,e.unselectBatch=null,T._scene=null}),e.dirty||w.extendFlat(e,a),e}},{"../../lib":515}],1001:[function(i,U,V){var w=i("../scatter/subtypes"),f=i("./edit_style").styleTextSelection;U.exports=function(T,e){var a=T.cd,n=T.xaxis,r=T.yaxis,t=[],h=a[0].trace,s=a[0].t,o=h._length,y=s.x,d=s.y,p=s._scene,c=s.index;if(!p)return t;var m=w.hasText(h),l=w.hasMarkers(h),x=!l&&!m;if(h.visible!==!0||x)return t;var u=[],A=[];if(e!==!1&&!e.degenerate)for(var _=0;_<o;_++)e.contains([s.xpx[_],s.ypx[_]],!1,_,T)?(u.push(_),t.push({pointNumber:_,x:n.c2d(y[_]),y:r.c2d(d[_])})):A.push(_);if(l){var g=p.scatter2d;if(!u.length&&!A.length){var b=new Array(p.count);b[c]=p.markerOptions[c],g.update.apply(g,b)}else if(!p.selectBatch[c].length&&!p.unselectBatch[c].length){var v=new Array(p.count);v[c]=p.markerUnselectedOptions[c],g.update.apply(g,v)}}return p.selectBatch[c]=u,p.unselectBatch[c]=A,m&&f(a),t}},{"../scatter/subtypes":961,"./edit_style":994}],1002:[function(i,U,V){var w=i("../../plots/template_attributes").hovertemplateAttrs,f=i("../../plots/template_attributes").texttemplateAttrs,M=i("../scattergeo/attributes"),T=i("../scatter/attributes"),e=i("../../plots/mapbox/layout_attributes"),a=i("../../plots/attributes"),n=i("../../components/colorscale/attributes"),r=i("../../lib/extend").extendFlat,t=i("../../plot_api/edit_types").overrideAll,h=i("../../plots/mapbox/layout_attributes"),s=M.line,o=M.marker;U.exports=t({lon:M.lon,lat:M.lat,cluster:{enabled:{valType:"boolean"},maxzoom:r({},h.layers.maxzoom,{}),step:{valType:"number",arrayOk:!0,dflt:-1,min:-1},size:{valType:"number",arrayOk:!0,dflt:20,min:0},color:{valType:"color",arrayOk:!0},opacity:r({},o.opacity,{dflt:1})},mode:r({},T.mode,{dflt:"markers"}),text:r({},T.text,{}),texttemplate:f({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:r({},T.hovertext,{}),line:{color:s.color,width:s.width},connectgaps:T.connectgaps,marker:r({symbol:{valType:"string",dflt:"circle",arrayOk:!0},angle:{valType:"number",dflt:"auto",arrayOk:!0},allowoverlap:{valType:"boolean",dflt:!1},opacity:o.opacity,size:o.size,sizeref:o.sizeref,sizemin:o.sizemin,sizemode:o.sizemode},n("marker")),fill:M.fill,fillcolor:T.fillcolor,textfont:e.layers.symbol.textfont,textposition:e.layers.symbol.textposition,below:{valType:"string"},selected:{marker:T.selected.marker},unselected:{marker:T.unselected.marker},hoverinfo:r({},a.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:w()},"calc","nested")},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/attributes":562,"../../plots/mapbox/layout_attributes":624,"../../plots/template_attributes":642,"../scatter/attributes":936,"../scattergeo/attributes":978}],1003:[function(i,U,V){var w=i("fast-isnumeric"),f=i("../../lib"),M=i("../../constants/numerical").BADNUM,T=i("../../lib/geojson_utils"),e=i("../../components/colorscale"),a=i("../../components/drawing"),n=i("../scatter/make_bubble_size_func"),r=i("../scatter/subtypes"),t=i("../../plots/mapbox/convert_text_opts"),h=i("../../components/fx/helpers").appendArrayPointValue,s=i("../../lib/svg_text_utils").NEWLINES,o=i("../../lib/svg_text_utils").BR_TAG_ALL;U.exports=function(A,_){var g=_[0].trace,b=g.visible===!0&&g._length!==0,v=g.fill!=="none",k=r.hasLines(g),S=r.hasMarkers(g),E=r.hasText(g),C=S&&g.marker.symbol==="circle",F=S&&g.marker.symbol!=="circle",I=g.cluster&&g.cluster.enabled,D=y("fill"),R=y("line"),O=y("circle"),z=y("symbol"),B={fill:D,line:R,circle:O,symbol:z};if(!b)return B;var G;if((v||k)&&(G=T.calcTraceToLineCoords(_)),v&&(D.geojson=T.makePolygon(G),D.layout.visibility="visible",f.extendFlat(D.paint,{"fill-color":g.fillcolor})),k&&(R.geojson=T.makeLine(G),R.layout.visibility="visible",f.extendFlat(R.paint,{"line-width":g.line.width,"line-color":g.line.color,"line-opacity":g.opacity})),C){var Q=d(_);O.geojson=Q.geojson,O.layout.visibility="visible",I&&(O.filter=["!",["has","point_count"]],B.cluster={type:"circle",filter:["has","point_count"],layout:{visibility:"visible"},paint:{"circle-color":x(g.cluster.color,g.cluster.step),"circle-radius":x(g.cluster.size,g.cluster.step),"circle-opacity":x(g.cluster.opacity,g.cluster.step)}},B.clusterCount={type:"symbol",filter:["has","point_count"],paint:{},layout:{"text-field":"{point_count_abbreviated}","text-font":["Open Sans Regular","Arial Unicode MS Regular"],"text-size":12}}),f.extendFlat(O.paint,{"circle-color":Q.mcc,"circle-radius":Q.mrc,"circle-opacity":Q.mo})}if(C&&I&&(O.filter=["!",["has","point_count"]]),(F||E)&&(z.geojson=p(_,A),f.extendFlat(z.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"}),F&&(f.extendFlat(z.layout,{"icon-size":g.marker.size/10}),"angle"in g.marker&&g.marker.angle!=="auto"&&f.extendFlat(z.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),z.layout["icon-allow-overlap"]=g.marker.allowoverlap,f.extendFlat(z.paint,{"icon-opacity":g.opacity*g.marker.opacity,"icon-color":g.marker.color})),E)){var X=(g.marker||{}).size,j=t(g.textposition,X);f.extendFlat(z.layout,{"text-size":g.textfont.size,"text-anchor":j.anchor,"text-offset":j.offset}),f.extendFlat(z.paint,{"text-color":g.textfont.color,"text-opacity":g.opacity})}return B};function y(u){return{type:u,geojson:T.makeBlank(),layout:{visibility:"none"},filter:null,paint:{}}}function d(u){var A=u[0].trace,_=A.marker,g=A.selectedpoints,b=f.isArrayOrTypedArray(_.color),v=f.isArrayOrTypedArray(_.size),k=f.isArrayOrTypedArray(_.opacity),S;function E(X){return A.opacity*X}function C(X){return X/2}var F;b&&(e.hasColorscale(A,"marker")?F=e.makeColorScaleFuncFromTrace(_):F=f.identity);var I;v&&(I=n(A));var D;k&&(D=function(X){var j=w(X)?+f.constrain(X,0,1):0;return E(j)});var R=[];for(S=0;S<u.length;S++){var O=u[S],z=O.lonlat;if(!l(z)){var B={};F&&(B.mcc=O.mcc=F(O.mc)),I&&(B.mrc=O.mrc=I(O.ms)),D&&(B.mo=D(O.mo)),g&&(B.selected=O.selected||0),R.push({type:"Feature",id:S+1,geometry:{type:"Point",coordinates:z},properties:B})}}var G;if(g)for(G=a.makeSelectedPointStyleFns(A),S=0;S<R.length;S++){var Q=R[S].properties;G.selectedOpacityFn&&(Q.mo=E(G.selectedOpacityFn(Q))),G.selectedColorFn&&(Q.mcc=G.selectedColorFn(Q)),G.selectedSizeFn&&(Q.mrc=G.selectedSizeFn(Q))}return{geojson:{type:"FeatureCollection",features:R},mcc:b||G&&G.selectedColorFn?{type:"identity",property:"mcc"}:_.color,mrc:v||G&&G.selectedSizeFn?{type:"identity",property:"mrc"}:C(_.size),mo:k||G&&G.selectedOpacityFn?{type:"identity",property:"mo"}:E(_.opacity)}}function p(u,A){for(var _=A._fullLayout,g=u[0].trace,b=g.marker||{},v=b.symbol,k=b.angle,S=v!=="circle"?c(v):m,E=k!=="auto"?c(k,!0):m,C=r.hasText(g)?c(g.text):m,F=[],I=0;I<u.length;I++){var D=u[I];if(!l(D.lonlat)){var R=g.texttemplate,O;if(R){var z=Array.isArray(R)?R[I]||"":R,B=g._module.formatLabels(D,g,_),G={};h(G,g,D.i);var Q=g._meta||{};O=f.texttemplateString(z,B,_._d3locale,G,D,Q)}else O=C(I);O&&(O=O.replace(s,"").replace(o,`
`)),F.push({type:"Feature",geometry:{type:"Point",coordinates:D.lonlat},properties:{symbol:S(I),angle:E(I),text:O}})}}return{type:"FeatureCollection",features:F}}function c(u,A){return f.isArrayOrTypedArray(u)?A?function(_){return w(u[_])?+u[_]:0}:function(_){return u[_]}:u?function(){return u}:m}function m(){return""}function l(u){return u[0]===M}function x(u,A){var _;if(f.isArrayOrTypedArray(u)&&f.isArrayOrTypedArray(A)){_=["step",["get","point_count"],u[0]];for(var g=1;g<u.length;g++)_.push(A[g-1],u[g])}else _=u;return _}},{"../../components/colorscale":379,"../../components/drawing":389,"../../components/fx/helpers":403,"../../constants/numerical":491,"../../lib":515,"../../lib/geojson_utils":509,"../../lib/svg_text_utils":541,"../../plots/mapbox/convert_text_opts":621,"../scatter/make_bubble_size_func":953,"../scatter/subtypes":961,"fast-isnumeric":190}],1004:[function(i,U,V){var w=i("../../lib"),f=i("../scatter/subtypes"),M=i("../scatter/marker_defaults"),T=i("../scatter/line_defaults"),e=i("../scatter/text_defaults"),a=i("../scatter/fillcolor_defaults"),n=i("./attributes");U.exports=function(h,s,o,y){function d(b,v){return w.coerce(h,s,n,b,v)}function p(b,v){return w.coerce2(h,s,n,b,v)}var c=r(h,s,d);if(!c){s.visible=!1;return}if(d("text"),d("texttemplate"),d("hovertext"),d("hovertemplate"),d("mode"),d("below"),f.hasLines(s)&&(T(h,s,o,y,d,{noDash:!0}),d("connectgaps")),f.hasMarkers(s)){M(h,s,o,y,d,{noLine:!0,noAngle:!0}),d("marker.allowoverlap"),d("marker.angle");var m=s.marker;m.symbol!=="circle"&&(w.isArrayOrTypedArray(m.size)&&(m.size=m.size[0]),w.isArrayOrTypedArray(m.color)&&(m.color=m.color[0]))}var l=p("cluster.maxzoom"),x=p("cluster.step"),u=p("cluster.color",s.marker&&s.marker.color||o),A=p("cluster.size"),_=p("cluster.opacity"),g=l!==!1||x!==!1||u!==!1||A!==!1||_!==!1;d("cluster.enabled",g),f.hasText(s)&&e(h,s,y,d,{noSelect:!0}),d("fill"),s.fill!=="none"&&a(h,s,o,d),w.coerceSelectionMarkerOpacity(s,d)};function r(t,h,s){var o=s("lon")||[],y=s("lat")||[],d=Math.min(o.length,y.length);return h._length=d,d}},{"../../lib":515,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"./attributes":1002}],1005:[function(i,U,V){U.exports=function(f,M){return f.lon=M.lon,f.lat=M.lat,f}},{}],1006:[function(i,U,V){var w=i("../../plots/cartesian/axes");U.exports=function(M,T,e){var a={},n=e[T.subplot]._subplot,r=n.mockAxis,t=M.lonlat;return a.lonLabel=w.tickText(r,r.c2l(t[0]),!0).text,a.latLabel=w.tickText(r,r.c2l(t[1]),!0).text,a}},{"../../plots/cartesian/axes":566}],1007:[function(i,U,V){var w=i("../../components/fx"),f=i("../../lib"),M=i("../scatter/get_trace_color"),T=f.fillText,e=i("../../constants/numerical").BADNUM,a=i("../../plots/mapbox/constants").traceLayerPrefix;function n(t,h,s){var o=t.cd,y=o[0].trace,d=t.xa,p=t.ya,c=t.subplot,m=[],l=a+y.uid+"-circle",x=y.cluster&&y.cluster.enabled;if(x){var u=c.map.queryRenderedFeatures(null,{layers:[l]});m=u.map(function(R){return R.id})}var A=h>=0?Math.floor((h+180)/360):Math.ceil((h-180)/360),_=A*360,g=h-_;function b(R){var O=R.lonlat;if(O[0]===e||x&&m.indexOf(R.i+1)===-1)return 1/0;var z=f.modHalf(O[0],360),B=O[1],G=c.project([z,B]),Q=G.x-d.c2p([g,B]),X=G.y-p.c2p([z,s]),j=Math.max(3,R.mrc||0);return Math.max(Math.sqrt(Q*Q+X*X)-j,1-3/j)}if(w.getClosest(o,b,t),t.index!==!1){var v=o[t.index],k=v.lonlat,S=[f.modHalf(k[0],360)+_,k[1]],E=d.c2p(S),C=p.c2p(S),F=v.mrc||1;t.x0=E-F,t.x1=E+F,t.y0=C-F,t.y1=C+F;var I={};I[y.subplot]={_subplot:c};var D=y._module.formatLabels(v,y,I);return t.lonLabel=D.lonLabel,t.latLabel=D.latLabel,t.color=M(y,v),t.extraText=r(y,v,o[0].t.labels),t.hovertemplate=y.hovertemplate,[t]}}function r(t,h,s){if(t.hovertemplate)return;var o=h.hi||t.hoverinfo,y=o.split("+"),d=y.indexOf("all")!==-1,p=y.indexOf("lon")!==-1,c=y.indexOf("lat")!==-1,m=h.lonlat,l=[];function x(u){return u+"\xB0"}return d||p&&c?l.push("("+x(m[1])+", "+x(m[0])+")"):p?l.push(s.lon+x(m[0])):c&&l.push(s.lat+x(m[1])),(d||y.indexOf("text")!==-1)&&T(h,t,l),l.join("<br>")}U.exports={hoverPoints:n,getExtraText:r}},{"../../components/fx":407,"../../constants/numerical":491,"../../lib":515,"../../plots/mapbox/constants":620,"../scatter/get_trace_color":946}],1008:[function(i,U,V){U.exports={attributes:i("./attributes"),supplyDefaults:i("./defaults"),colorbar:i("../scatter/marker_colorbar"),formatLabels:i("./format_labels"),calc:i("../scattergeo/calc"),plot:i("./plot"),hoverPoints:i("./hover").hoverPoints,eventData:i("./event_data"),selectPoints:i("./select"),styleOnSelect:function(w,f){if(f){var M=f[0].trace;M._glTrace.update(f)}},moduleType:"trace",name:"scattermapbox",basePlotModule:i("../../plots/mapbox"),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/mapbox":622,"../scatter/marker_colorbar":954,"../scattergeo/calc":979,"./attributes":1002,"./defaults":1004,"./event_data":1005,"./format_labels":1006,"./hover":1007,"./plot":1009,"./select":1010}],1009:[function(i,U,V){var w=i("../../lib"),f=i("./convert"),M=i("../../plots/mapbox/constants").traceLayerPrefix,T={cluster:["cluster","clusterCount","circle"],nonCluster:["fill","line","circle","symbol"]};function e(n,r,t){this.type="scattermapbox",this.subplot=n,this.uid=r,this.clusterEnabled=t,this.sourceIds={fill:"source-"+r+"-fill",line:"source-"+r+"-line",circle:"source-"+r+"-circle",symbol:"source-"+r+"-symbol",cluster:"source-"+r+"-circle",clusterCount:"source-"+r+"-circle"},this.layerIds={fill:M+r+"-fill",line:M+r+"-line",circle:M+r+"-circle",symbol:M+r+"-symbol",cluster:M+r+"-cluster",clusterCount:M+r+"-cluster-count"},this.below=null}var a=e.prototype;a.addSource=function(n,r,t){var h={type:"geojson",data:r.geojson};t&&t.enabled&&w.extendFlat(h,{cluster:!0,clusterMaxZoom:t.maxzoom}),this.subplot.map.addSource(this.sourceIds[n],h)},a.setSourceData=function(n,r){this.subplot.map.getSource(this.sourceIds[n]).setData(r.geojson)},a.addLayer=function(n,r,t){var h={type:r.type,id:this.layerIds[n],source:this.sourceIds[n],layout:r.layout,paint:r.paint};r.filter&&(h.filter=r.filter),this.subplot.addLayer(h,t)},a.update=function(r){var t=r[0].trace,h=this.subplot,s=h.map,o=f(h.gd,r),y=h.belowLookup["trace-"+this.uid],d,p,c,m=!!(t.cluster&&t.cluster.enabled),l=!!this.clusterEnabled;if(y!==this.below){var x=T.nonCluster;for(d=x.length-1;d>=0;d--)p=x[d],s.removeLayer(this.layerIds[p]);for(d=0;d<x.length;d++)p=x[d],c=o[p],this.addLayer(p,c,y);this.below=y}else if(m&&!l){for(d=T.nonCluster.length-1;d>=0;d--)p=T.nonCluster[d],s.removeLayer(this.layerIds[p]),s.removeSource(this.sourceIds[p]);for(this.addSource("circle",o.circle,t.cluster),d=0;d<T.cluster.length;d++)p=T.cluster[d],c=o[p],this.addLayer(p,c,y);this.clusterEnabled=m}else if(!m&&l){for(d=0;d<T.cluster.length;d++)p=T.cluster[d],s.removeLayer(this.layerIds[p]);for(s.removeSource(this.sourceIds.circle),d=0;d<T.nonCluster.length;d++)p=T.nonCluster[d],c=o[p],this.addSource(p,c,t.cluster),this.addLayer(p,c,y);this.clusterEnabled=m}r[0].trace._glTrace=this},a.dispose=function(){for(var r=this.subplot.map,t=this.clusterEnabled?T.cluster:T.nonCluster,h=t.length-1;h>=0;h--){var s=t[h];r.removeLayer(this.layerIds[s]),r.removeSource(this.sourceIds[s])}},U.exports=function(r,t){var h=t[0].trace,s=h.cluster&&h.cluster.enabled,o=new e(r,h.uid,s),y=f(r.gd,t),d=o.below=r.belowLookup["trace-"+h.uid],p,c,m;if(s)for(o.addSource("circle",y.circle,h.cluster),p=0;p<T.cluster.length;p++)c=T.cluster[p],m=y[c],o.addLayer(c,m,d);else for(p=0;p<T.nonCluster.length;p++)c=T.nonCluster[p],m=y[c],o.addSource(c,m,h.cluster),o.addLayer(c,m,d);return t[0].trace._glTrace=o,o}},{"../../lib":515,"../../plots/mapbox/constants":620,"./convert":1003}],1010:[function(i,U,V){var w=i("../../lib"),f=i("../scatter/subtypes"),M=i("../../constants/numerical").BADNUM;U.exports=function(e,a){var n=e.cd,r=e.xaxis,t=e.yaxis,h=[],s=n[0].trace,o;if(!f.hasMarkers(s))return[];if(a===!1)for(o=0;o<n.length;o++)n[o].selected=0;else for(o=0;o<n.length;o++){var y=n[o],d=y.lonlat;if(d[0]!==M){var p=[w.modHalf(d[0],360),d[1]],c=[r.c2p(p),t.c2p(p)];a.contains(c,null,o,e)?(h.push({pointNumber:o,lon:d[0],lat:d[1]}),y.selected=1):y.selected=0}}return h}},{"../../constants/numerical":491,"../../lib":515,"../scatter/subtypes":961}],1011:[function(i,U,V){var w=i("../../plots/template_attributes").hovertemplateAttrs,f=i("../../plots/template_attributes").texttemplateAttrs,M=i("../../lib/extend").extendFlat,T=i("../scatter/attributes"),e=i("../../plots/attributes"),a=T.line;U.exports={mode:T.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dr:{valType:"number",dflt:1,editType:"calc"},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dtheta:{valType:"number",editType:"calc"},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:T.text,texttemplate:f({editType:"plot"},{keys:["r","theta","text"]}),hovertext:T.hovertext,line:{color:a.color,width:a.width,dash:a.dash,backoff:a.backoff,shape:M({},a.shape,{values:["linear","spline"]}),smoothing:a.smoothing,editType:"calc"},connectgaps:T.connectgaps,marker:T.marker,cliponaxis:M({},T.cliponaxis,{dflt:!1}),textposition:T.textposition,textfont:T.textfont,fill:M({},T.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:T.fillcolor,hoverinfo:M({},e.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:T.hoveron,hovertemplate:w(),selected:T.selected,unselected:T.unselected}},{"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"../scatter/attributes":936}],1012:[function(i,U,V){var w=i("fast-isnumeric"),f=i("../../constants/numerical").BADNUM,M=i("../../plots/cartesian/axes"),T=i("../scatter/colorscale_calc"),e=i("../scatter/arrays_to_calcdata"),a=i("../scatter/calc_selection"),n=i("../scatter/calc").calcMarkerSize;U.exports=function(t,h){for(var s=t._fullLayout,o=h.subplot,y=s[o].radialaxis,d=s[o].angularaxis,p=y.makeCalcdata(h,"r"),c=d.makeCalcdata(h,"theta"),m=h._length,l=new Array(m),x=0;x<m;x++){var u=p[x],A=c[x],_=l[x]={};w(u)&&w(A)?(_.r=u,_.theta=A):_.r=f}var g=n(h,m);return h._extremes.x=M.findExtremes(y,p,{ppad:g}),T(t,h),e(l,h),a(l,h),l}},{"../../constants/numerical":491,"../../plots/cartesian/axes":566,"../scatter/arrays_to_calcdata":935,"../scatter/calc":937,"../scatter/calc_selection":938,"../scatter/colorscale_calc":939,"fast-isnumeric":190}],1013:[function(i,U,V){var w=i("../../lib"),f=i("../scatter/subtypes"),M=i("../scatter/marker_defaults"),T=i("../scatter/line_defaults"),e=i("../scatter/line_shape_defaults"),a=i("../scatter/text_defaults"),n=i("../scatter/fillcolor_defaults"),r=i("../scatter/constants").PTS_LINESONLY,t=i("./attributes");function h(o,y,d,p){function c(x,u){return w.coerce(o,y,t,x,u)}var m=s(o,y,p,c);if(!m){y.visible=!1;return}c("thetaunit"),c("mode",m<r?"lines+markers":"lines"),c("text"),c("hovertext"),y.hoveron!=="fills"&&c("hovertemplate"),f.hasLines(y)&&(T(o,y,d,p,c,{backoff:!0}),e(o,y,c),c("connectgaps")),f.hasMarkers(y)&&M(o,y,d,p,c,{gradient:!0}),f.hasText(y)&&(c("texttemplate"),a(o,y,p,c));var l=[];(f.hasMarkers(y)||f.hasText(y))&&(c("cliponaxis"),c("marker.maxdisplayed"),l.push("points")),c("fill"),y.fill!=="none"&&(n(o,y,d,c),f.hasLines(y)||e(o,y,c)),(y.fill==="tonext"||y.fill==="toself")&&l.push("fills"),c("hoveron",l.join("+")||"points"),w.coerceSelectionMarkerOpacity(y,c)}function s(o,y,d,p){var c=p("r"),m=p("theta"),l;if(c)m?l=Math.min(c.length,m.length):(l=c.length,p("theta0"),p("dtheta"));else{if(!m)return 0;l=y.theta.length,p("r0"),p("dr")}return y._length=l,l}U.exports={handleRThetaDefaults:s,supplyDefaults:h}},{"../../lib":515,"../scatter/constants":940,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/line_shape_defaults":951,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"./attributes":1011}],1014:[function(i,U,V){var w=i("../../lib"),f=i("../../plots/cartesian/axes");U.exports=function(T,e,a){var n={},r=a[e.subplot]._subplot,t,h;r?(t=r.radialAxis,h=r.angularAxis):(r=a[e.subplot],t=r.radialaxis,h=r.angularaxis);var s=t.c2l(T.r);n.rLabel=f.tickText(t,s,!0).text;var o=h.thetaunit==="degrees"?w.rad2deg(T.theta):T.theta;return n.thetaLabel=f.tickText(h,o,!0).text,n}},{"../../lib":515,"../../plots/cartesian/axes":566}],1015:[function(i,U,V){var w=i("../scatter/hover");function f(T,e,a,n){var r=w(T,e,a,n);if(!(!r||r[0].index===!1)){var t=r[0];if(t.index===void 0)return r;var h=T.subplot,s=t.cd[t.index],o=t.trace;if(!!h.isPtInside(s))return t.xLabelVal=void 0,t.yLabelVal=void 0,M(s,o,h,t),t.hovertemplate=o.hovertemplate,r}}function M(T,e,a,n){var r=a.radialAxis,t=a.angularAxis;r._hovertitle="r",t._hovertitle="\u03B8";var h={};h[e.subplot]={_subplot:a};var s=e._module.formatLabels(T,e,h);n.rLabel=s.rLabel,n.thetaLabel=s.thetaLabel;var o=T.hi||e.hoverinfo,y=[];function d(c,m){y.push(c._hovertitle+": "+m)}if(!e.hovertemplate){var p=o.split("+");p.indexOf("all")!==-1&&(p=["r","theta","text"]),p.indexOf("r")!==-1&&d(r,n.rLabel),p.indexOf("theta")!==-1&&d(t,n.thetaLabel),p.indexOf("text")!==-1&&n.text&&(y.push(n.text),delete n.text),n.extraText=y.join("<br>")}}U.exports={hoverPoints:f,makeHoverPointText:M}},{"../scatter/hover":947}],1016:[function(i,U,V){U.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:i("../../plots/polar"),categories:["polar","symbols","showLegend","scatter-like"],attributes:i("./attributes"),supplyDefaults:i("./defaults").supplyDefaults,colorbar:i("../scatter/marker_colorbar"),formatLabels:i("./format_labels"),calc:i("./calc"),plot:i("./plot"),style:i("../scatter/style").style,styleOnSelect:i("../scatter/style").styleOnSelect,hoverPoints:i("./hover").hoverPoints,selectPoints:i("../scatter/select"),meta:{}}},{"../../plots/polar":631,"../scatter/marker_colorbar":954,"../scatter/select":958,"../scatter/style":960,"./attributes":1011,"./calc":1012,"./defaults":1013,"./format_labels":1014,"./hover":1015,"./plot":1017}],1017:[function(i,U,V){var w=i("../scatter/plot"),f=i("../../constants/numerical").BADNUM;U.exports=function(T,e,a){for(var n=e.layers.frontplot.select("g.scatterlayer"),r=e.xaxis,t=e.yaxis,h={xaxis:r,yaxis:t,plot:e.framework,layerClipId:e._hasClipOnAxisFalse?e.clipIds.forTraces:null},s=e.radialAxis,o=e.angularAxis,y=0;y<a.length;y++)for(var d=a[y],p=0;p<d.length;p++){p===0&&(d[0].trace._xA=r,d[0].trace._yA=t);var c=d[p],m=c.r;if(m===f)c.x=c.y=f;else{var l=s.c2g(m),x=o.c2g(c.theta);c.x=l*Math.cos(x),c.y=l*Math.sin(x)}}w(T,h,a,n)}},{"../../constants/numerical":491,"../scatter/plot":957}],1018:[function(i,U,V){var w=i("../scatterpolar/attributes"),f=i("../scattergl/attributes"),M=i("../../plots/template_attributes").texttemplateAttrs;U.exports={mode:w.mode,r:w.r,theta:w.theta,r0:w.r0,dr:w.dr,theta0:w.theta0,dtheta:w.dtheta,thetaunit:w.thetaunit,text:w.text,texttemplate:M({editType:"plot"},{keys:["r","theta","text"]}),hovertext:w.hovertext,hovertemplate:w.hovertemplate,line:f.line,connectgaps:f.connectgaps,marker:f.marker,fill:f.fill,fillcolor:f.fillcolor,textposition:f.textposition,textfont:f.textfont,hoverinfo:w.hoverinfo,selected:w.selected,unselected:w.unselected}},{"../../plots/template_attributes":642,"../scattergl/attributes":988,"../scatterpolar/attributes":1011}],1019:[function(i,U,V){U.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:i("../../plots/polar"),categories:["gl","regl","polar","symbols","showLegend","scatter-like"],attributes:i("./attributes"),supplyDefaults:i("./defaults"),colorbar:i("../scatter/marker_colorbar"),formatLabels:i("./format_labels"),calc:i("./calc"),hoverPoints:i("./hover").hoverPoints,selectPoints:i("../scattergl/select"),meta:{}}},{"../../plots/polar":631,"../scatter/marker_colorbar":954,"../scattergl/select":1001,"./attributes":1018,"./calc":1020,"./defaults":1021,"./format_labels":1022,"./hover":1023}],1020:[function(i,U,V){var w=i("../scatter/colorscale_calc"),f=i("../scatter/calc").calcMarkerSize,M=i("../scattergl/convert"),T=i("../../plots/cartesian/axes"),e=i("../scattergl/constants").TOO_MANY_POINTS;U.exports=function(n,r){var t=n._fullLayout,h=r.subplot,s=t[h].radialaxis,o=t[h].angularaxis,y=r._r=s.makeCalcdata(r,"r"),d=r._theta=o.makeCalcdata(r,"theta"),p=r._length,c={};p<y.length&&(y=y.slice(0,p)),p<d.length&&(d=d.slice(0,p)),c.r=y,c.theta=d,w(n,r);var m=c.opts=M.style(n,r),l;return p<e?l=f(r,p):m.marker&&(l=2*(m.marker.sizeAvg||Math.max(m.marker.size,3))),r._extremes.x=T.findExtremes(s,y,{ppad:l}),[{x:!1,y:!1,t:c,trace:r}]}},{"../../plots/cartesian/axes":566,"../scatter/calc":937,"../scatter/colorscale_calc":939,"../scattergl/constants":991,"../scattergl/convert":992}],1021:[function(i,U,V){var w=i("../../lib"),f=i("../scatter/subtypes"),M=i("../scatterpolar/defaults").handleRThetaDefaults,T=i("../scatter/marker_defaults"),e=i("../scatter/line_defaults"),a=i("../scatter/text_defaults"),n=i("../scatter/fillcolor_defaults"),r=i("../scatter/constants").PTS_LINESONLY,t=i("./attributes");U.exports=function(s,o,y,d){function p(m,l){return w.coerce(s,o,t,m,l)}var c=M(s,o,d,p);if(!c){o.visible=!1;return}p("thetaunit"),p("mode",c<r?"lines+markers":"lines"),p("text"),p("hovertext"),o.hoveron!=="fills"&&p("hovertemplate"),f.hasLines(o)&&(e(s,o,y,d,p),p("connectgaps")),f.hasMarkers(o)&&T(s,o,y,d,p,{noAngleRef:!0,noStandOff:!0}),f.hasText(o)&&(p("texttemplate"),a(s,o,d,p)),p("fill"),o.fill!=="none"&&n(s,o,y,p),w.coerceSelectionMarkerOpacity(o,p)}},{"../../lib":515,"../scatter/constants":940,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"../scatterpolar/defaults":1013,"./attributes":1018}],1022:[function(i,U,V){var w=i("../scatterpolar/format_labels");U.exports=function(M,T,e){var a=M.i;return"r"in M||(M.r=T._r[a]),"theta"in M||(M.theta=T._theta[a]),w(M,T,e)}},{"../scatterpolar/format_labels":1014}],1023:[function(i,U,V){var w=i("../scattergl/hover"),f=i("../scatterpolar/hover").makeHoverPointText;function M(T,e,a,n){var r=T.cd,t=r[0].t,h=t.r,s=t.theta,o=w.hoverPoints(T,e,a,n);if(!(!o||o[0].index===!1)){var y=o[0];if(y.index===void 0)return o;var d=T.subplot,p=y.cd[y.index],c=y.trace;if(p.r=h[y.index],p.theta=s[y.index],!!d.isPtInside(p))return y.xLabelVal=void 0,y.yLabelVal=void 0,f(p,c,d,y),o}}U.exports={hoverPoints:M}},{"../scattergl/hover":997,"../scatterpolar/hover":1015}],1024:[function(i,U,V){arguments[4][905][0].apply(V,arguments)},{"./base_index":1019,"./plot":1025,dup:905}],1025:[function(i,U,V){var w=i("@plotly/point-cluster"),f=i("fast-isnumeric"),M=i("../scattergl/plot"),T=i("../scattergl/scene_update"),e=i("../scattergl/convert"),a=i("../../lib"),n=i("../scattergl/constants").TOO_MANY_POINTS,r={};U.exports=function(h,s,o){if(!!o.length){var y=s.radialAxis,d=s.angularAxis,p=T(h,s);return o.forEach(function(c){if(!(!c||!c[0]||!c[0].trace)){var m=c[0],l=m.trace,x=m.t,u=l._length,A=x.r,_=x.theta,g=x.opts,b,v=A.slice(),k=_.slice();for(b=0;b<A.length;b++)s.isPtInside({r:A[b],theta:_[b]})||(v[b]=NaN,k[b]=NaN);var S=new Array(u*2),E=Array(u),C=Array(u);for(b=0;b<u;b++){var F=v[b],I,D;if(f(F)){var R=y.c2g(F),O=d.c2g(k[b],l.thetaunit);I=R*Math.cos(O),D=R*Math.sin(O)}else I=D=NaN;E[b]=S[b*2]=I,C[b]=S[b*2+1]=D}x.tree=w(S),g.marker&&u>=n&&(g.marker.cluster=x.tree),g.marker&&(g.markerSel.positions=g.markerUnsel.positions=g.marker.positions=S),g.line&&S.length>1&&a.extendFlat(g.line,e.linePositions(h,l,S)),g.text&&(a.extendFlat(g.text,{positions:S},e.textPosition(h,l,g.text,g.marker)),a.extendFlat(g.textSel,{positions:S},e.textPosition(h,l,g.text,g.markerSel)),a.extendFlat(g.textUnsel,{positions:S},e.textPosition(h,l,g.text,g.markerUnsel))),g.fill&&!p.fill2d&&(p.fill2d=!0),g.marker&&!p.scatter2d&&(p.scatter2d=!0),g.line&&!p.line2d&&(p.line2d=!0),g.text&&!p.glText&&(p.glText=!0),p.lineOptions.push(g.line),p.fillOptions.push(g.fill),p.markerOptions.push(g.marker),p.markerSelectedOptions.push(g.markerSel),p.markerUnselectedOptions.push(g.markerUnsel),p.textOptions.push(g.text),p.textSelectedOptions.push(g.textSel),p.textUnselectedOptions.push(g.textUnsel),p.selectBatch.push([]),p.unselectBatch.push([]),x.x=E,x.y=C,x.rawx=E,x.rawy=C,x.r=A,x.theta=_,x.positions=S,x._scene=p,x.index=p.count,p.count++}}),M(h,s,o)}},U.exports.reglPrecompiled=r},{"../../lib":515,"../scattergl/constants":991,"../scattergl/convert":992,"../scattergl/plot":999,"../scattergl/scene_update":1e3,"@plotly/point-cluster":59,"fast-isnumeric":190}],1026:[function(i,U,V){var w=i("../../plots/template_attributes").hovertemplateAttrs,f=i("../../plots/template_attributes").texttemplateAttrs,M=i("../../lib/extend").extendFlat,T=i("../scatter/attributes"),e=i("../../plots/attributes"),a=T.line;U.exports={mode:T.mode,real:{valType:"data_array",editType:"calc+clearAxisTypes"},imag:{valType:"data_array",editType:"calc+clearAxisTypes"},text:T.text,texttemplate:f({editType:"plot"},{keys:["real","imag","text"]}),hovertext:T.hovertext,line:{color:a.color,width:a.width,dash:a.dash,backoff:a.backoff,shape:M({},a.shape,{values:["linear","spline"]}),smoothing:a.smoothing,editType:"calc"},connectgaps:T.connectgaps,marker:T.marker,cliponaxis:M({},T.cliponaxis,{dflt:!1}),textposition:T.textposition,textfont:T.textfont,fill:M({},T.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:T.fillcolor,hoverinfo:M({},e.hoverinfo,{flags:["real","imag","text","name"]}),hoveron:T.hoveron,hovertemplate:w(),selected:T.selected,unselected:T.unselected}},{"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"../scatter/attributes":936}],1027:[function(i,U,V){var w=i("fast-isnumeric"),f=i("../../constants/numerical").BADNUM,M=i("../scatter/colorscale_calc"),T=i("../scatter/arrays_to_calcdata"),e=i("../scatter/calc_selection"),a=i("../scatter/calc").calcMarkerSize;U.exports=function(r,t){for(var h=r._fullLayout,s=t.subplot,o=h[s].realaxis,y=h[s].imaginaryaxis,d=o.makeCalcdata(t,"real"),p=y.makeCalcdata(t,"imag"),c=t._length,m=new Array(c),l=0;l<c;l++){var x=d[l],u=p[l],A=m[l]={};w(x)&&w(u)?(A.real=x,A.imag=u):A.real=f}return a(t,c),M(r,t),T(m,t),e(m,t),m}},{"../../constants/numerical":491,"../scatter/arrays_to_calcdata":935,"../scatter/calc":937,"../scatter/calc_selection":938,"../scatter/colorscale_calc":939,"fast-isnumeric":190}],1028:[function(i,U,V){var w=i("../../lib"),f=i("../scatter/subtypes"),M=i("../scatter/marker_defaults"),T=i("../scatter/line_defaults"),e=i("../scatter/line_shape_defaults"),a=i("../scatter/text_defaults"),n=i("../scatter/fillcolor_defaults"),r=i("../scatter/constants").PTS_LINESONLY,t=i("./attributes");U.exports=function(o,y,d,p){function c(x,u){return w.coerce(o,y,t,x,u)}var m=h(o,y,p,c);if(!m){y.visible=!1;return}c("mode",m<r?"lines+markers":"lines"),c("text"),c("hovertext"),y.hoveron!=="fills"&&c("hovertemplate"),f.hasLines(y)&&(T(o,y,d,p,c,{backoff:!0}),e(o,y,c),c("connectgaps")),f.hasMarkers(y)&&M(o,y,d,p,c,{gradient:!0}),f.hasText(y)&&(c("texttemplate"),a(o,y,p,c));var l=[];(f.hasMarkers(y)||f.hasText(y))&&(c("cliponaxis"),c("marker.maxdisplayed"),l.push("points")),c("fill"),y.fill!=="none"&&(n(o,y,d,c),f.hasLines(y)||e(o,y,c)),(y.fill==="tonext"||y.fill==="toself")&&l.push("fills"),c("hoveron",l.join("+")||"points"),w.coerceSelectionMarkerOpacity(y,c)};function h(s,o,y,d){var p=d("real"),c=d("imag"),m;return p&&c&&(m=Math.min(p.length,c.length)),o._length=m,m}},{"../../lib":515,"../scatter/constants":940,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/line_shape_defaults":951,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"./attributes":1026}],1029:[function(i,U,V){var w=i("../../plots/cartesian/axes");U.exports=function(M,T,e){var a={},n=e[T.subplot]._subplot;return a.realLabel=w.tickText(n.radialAxis,M.real,!0).text,a.imagLabel=w.tickText(n.angularAxis,M.imag,!0).text,a}},{"../../plots/cartesian/axes":566}],1030:[function(i,U,V){var w=i("../scatter/hover");function f(T,e,a,n){var r=w(T,e,a,n);if(!(!r||r[0].index===!1)){var t=r[0];if(t.index===void 0)return r;var h=T.subplot,s=t.cd[t.index],o=t.trace;if(!!h.isPtInside(s))return t.xLabelVal=void 0,t.yLabelVal=void 0,M(s,o,h,t),t.hovertemplate=o.hovertemplate,r}}function M(T,e,a,n){var r=a.radialAxis,t=a.angularAxis;r._hovertitle="real",t._hovertitle="imag";var h={};h[e.subplot]={_subplot:a};var s=e._module.formatLabels(T,e,h);n.realLabel=s.realLabel,n.imagLabel=s.imagLabel;var o=T.hi||e.hoverinfo,y=[];function d(c,m){y.push(c._hovertitle+": "+m)}if(!e.hovertemplate){var p=o.split("+");p.indexOf("all")!==-1&&(p=["real","imag","text"]),p.indexOf("real")!==-1&&d(r,n.realLabel),p.indexOf("imag")!==-1&&d(t,n.imagLabel),p.indexOf("text")!==-1&&n.text&&(y.push(n.text),delete n.text),n.extraText=y.join("<br>")}}U.exports={hoverPoints:f,makeHoverPointText:M}},{"../scatter/hover":947}],1031:[function(i,U,V){U.exports={moduleType:"trace",name:"scattersmith",basePlotModule:i("../../plots/smith"),categories:["smith","symbols","showLegend","scatter-like"],attributes:i("./attributes"),supplyDefaults:i("./defaults"),colorbar:i("../scatter/marker_colorbar"),formatLabels:i("./format_labels"),calc:i("./calc"),plot:i("./plot"),style:i("../scatter/style").style,styleOnSelect:i("../scatter/style").styleOnSelect,hoverPoints:i("./hover").hoverPoints,selectPoints:i("../scatter/select"),meta:{}}},{"../../plots/smith":638,"../scatter/marker_colorbar":954,"../scatter/select":958,"../scatter/style":960,"./attributes":1026,"./calc":1027,"./defaults":1028,"./format_labels":1029,"./hover":1030,"./plot":1032}],1032:[function(i,U,V){var w=i("../scatter/plot"),f=i("../../constants/numerical").BADNUM,M=i("../../plots/smith/helpers"),T=M.smith;U.exports=function(a,n,r){for(var t=n.layers.frontplot.select("g.scatterlayer"),h=n.xaxis,s=n.yaxis,o={xaxis:h,yaxis:s,plot:n.framework,layerClipId:n._hasClipOnAxisFalse?n.clipIds.forTraces:null},y=0;y<r.length;y++)for(var d=r[y],p=0;p<d.length;p++){p===0&&(d[0].trace._xA=h,d[0].trace._yA=s);var c=d[p],m=c.real;if(m===f)c.x=c.y=f;else{var l=T([m,c.imag]);c.x=l[0],c.y=l[1]}}w(a,o,r,t)}},{"../../constants/numerical":491,"../../plots/smith/helpers":637,"../scatter/plot":957}],1033:[function(i,U,V){var w=i("../../plots/template_attributes").hovertemplateAttrs,f=i("../../plots/template_attributes").texttemplateAttrs,M=i("../scatter/attributes"),T=i("../../plots/attributes"),e=i("../../components/colorscale/attributes"),a=i("../../components/drawing/attributes").dash,n=i("../../lib/extend").extendFlat,r=M.marker,t=M.line,h=r.line;U.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:n({},M.mode,{dflt:"markers"}),text:n({},M.text,{}),texttemplate:f({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:n({},M.hovertext,{}),line:{color:t.color,width:t.width,dash:a,backoff:t.backoff,shape:n({},t.shape,{values:["linear","spline"]}),smoothing:t.smoothing,editType:"calc"},connectgaps:M.connectgaps,cliponaxis:M.cliponaxis,fill:n({},M.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:M.fillcolor,marker:n({symbol:r.symbol,opacity:r.opacity,angle:r.angle,angleref:r.angleref,standoff:r.standoff,maxdisplayed:r.maxdisplayed,size:r.size,sizeref:r.sizeref,sizemin:r.sizemin,sizemode:r.sizemode,line:n({width:h.width,editType:"calc"},e("marker.line")),gradient:r.gradient,editType:"calc"},e("marker")),textfont:M.textfont,textposition:M.textposition,selected:M.selected,unselected:M.unselected,hoverinfo:n({},T.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:M.hoveron,hovertemplate:w()}},{"../../components/colorscale/attributes":374,"../../components/drawing/attributes":388,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/template_attributes":642,"../scatter/attributes":936}],1034:[function(i,U,V){var w=i("fast-isnumeric"),f=i("../scatter/colorscale_calc"),M=i("../scatter/arrays_to_calcdata"),T=i("../scatter/calc_selection"),e=i("../scatter/calc").calcMarkerSize,a=["a","b","c"],n={a:["b","c"],b:["a","c"],c:["a","b"]};U.exports=function(t,h){var s=t._fullLayout[h.subplot],o=s.sum,y=h.sum||o,d={a:h.a,b:h.b,c:h.c},p,c,m,l,x,u;for(p=0;p<a.length;p++)if(m=a[p],!d[m]){for(x=d[n[m][0]],u=d[n[m][1]],l=new Array(x.length),c=0;c<x.length;c++)l[c]=y-x[c]-u[c];d[m]=l}var A=h._length,_=new Array(A),g,b,v,k,S,E;for(p=0;p<A;p++)g=d.a[p],b=d.b[p],v=d.c[p],w(g)&&w(b)&&w(v)?(g=+g,b=+b,v=+v,k=o/(g+b+v),k!==1&&(g*=k,b*=k,v*=k),E=g,S=v-b,_[p]={x:S,y:E,a:g,b,c:v}):_[p]={x:!1,y:!1};return e(h,A),f(t,h),M(_,h),T(_,h),_}},{"../scatter/arrays_to_calcdata":935,"../scatter/calc":937,"../scatter/calc_selection":938,"../scatter/colorscale_calc":939,"fast-isnumeric":190}],1035:[function(i,U,V){var w=i("../../lib"),f=i("../scatter/constants"),M=i("../scatter/subtypes"),T=i("../scatter/marker_defaults"),e=i("../scatter/line_defaults"),a=i("../scatter/line_shape_defaults"),n=i("../scatter/text_defaults"),r=i("../scatter/fillcolor_defaults"),t=i("./attributes");U.exports=function(s,o,y,d){function p(_,g){return w.coerce(s,o,t,_,g)}var c=p("a"),m=p("b"),l=p("c"),x;if(c?(x=c.length,m?(x=Math.min(x,m.length),l&&(x=Math.min(x,l.length))):l?x=Math.min(x,l.length):x=0):m&&l&&(x=Math.min(m.length,l.length)),!x){o.visible=!1;return}o._length=x,p("sum"),p("text"),p("hovertext"),o.hoveron!=="fills"&&p("hovertemplate");var u=x<f.PTS_LINESONLY?"lines+markers":"lines";p("mode",u),M.hasLines(o)&&(e(s,o,y,d,p,{backoff:!0}),a(s,o,p),p("connectgaps")),M.hasMarkers(o)&&T(s,o,y,d,p,{gradient:!0}),M.hasText(o)&&(p("texttemplate"),n(s,o,d,p));var A=[];(M.hasMarkers(o)||M.hasText(o))&&(p("cliponaxis"),p("marker.maxdisplayed"),A.push("points")),p("fill"),o.fill!=="none"&&(r(s,o,y,p),M.hasLines(o)||a(s,o,p)),(o.fill==="tonext"||o.fill==="toself")&&A.push("fills"),p("hoveron",A.join("+")||"points"),w.coerceSelectionMarkerOpacity(o,p)}},{"../../lib":515,"../scatter/constants":940,"../scatter/fillcolor_defaults":944,"../scatter/line_defaults":949,"../scatter/line_shape_defaults":951,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scatter/text_defaults":962,"./attributes":1033}],1036:[function(i,U,V){U.exports=function(f,M,T,e,a){if(M.xa&&(f.xaxis=M.xa),M.ya&&(f.yaxis=M.ya),e[a]){var n=e[a];f.a=n.a,f.b=n.b,f.c=n.c}else f.a=M.a,f.b=M.b,f.c=M.c;return f}},{}],1037:[function(i,U,V){var w=i("../../plots/cartesian/axes");U.exports=function(M,T,e){var a={},n=e[T.subplot]._subplot;return a.aLabel=w.tickText(n.aaxis,M.a,!0).text,a.bLabel=w.tickText(n.baxis,M.b,!0).text,a.cLabel=w.tickText(n.caxis,M.c,!0).text,a}},{"../../plots/cartesian/axes":566}],1038:[function(i,U,V){var w=i("../scatter/hover");U.exports=function(M,T,e,a){var n=w(M,T,e,a);if(!n||n[0].index===!1)return;var r=n[0];if(r.index===void 0){var t=1-r.y0/M.ya._length,h=M.xa._length,s=h*t/2,o=h-s;return r.x0=Math.max(Math.min(r.x0,o),s),r.x1=Math.max(Math.min(r.x1,o),s),n}var y=r.cd[r.index],d=r.trace,p=r.subplot;r.a=y.a,r.b=y.b,r.c=y.c,r.xLabelVal=void 0,r.yLabelVal=void 0;var c={};c[d.subplot]={_subplot:p};var m=d._module.formatLabels(y,d,c);r.aLabel=m.aLabel,r.bLabel=m.bLabel,r.cLabel=m.cLabel;var l=y.hi||d.hoverinfo,x=[];function u(_,g){x.push(_._hovertitle+": "+g)}if(!d.hovertemplate){var A=l.split("+");A.indexOf("all")!==-1&&(A=["a","b","c"]),A.indexOf("a")!==-1&&u(p.aaxis,r.aLabel),A.indexOf("b")!==-1&&u(p.baxis,r.bLabel),A.indexOf("c")!==-1&&u(p.caxis,r.cLabel)}return r.extraText=x.join("<br>"),r.hovertemplate=d.hovertemplate,n}},{"../scatter/hover":947}],1039:[function(i,U,V){U.exports={attributes:i("./attributes"),supplyDefaults:i("./defaults"),colorbar:i("../scatter/marker_colorbar"),formatLabels:i("./format_labels"),calc:i("./calc"),plot:i("./plot"),style:i("../scatter/style").style,styleOnSelect:i("../scatter/style").styleOnSelect,hoverPoints:i("./hover"),selectPoints:i("../scatter/select"),eventData:i("./event_data"),moduleType:"trace",name:"scatterternary",basePlotModule:i("../../plots/ternary"),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/ternary":643,"../scatter/marker_colorbar":954,"../scatter/select":958,"../scatter/style":960,"./attributes":1033,"./calc":1034,"./defaults":1035,"./event_data":1036,"./format_labels":1037,"./hover":1038,"./plot":1040}],1040:[function(i,U,V){var w=i("../scatter/plot");U.exports=function(M,T,e){var a=T.plotContainer;a.select(".scatterlayer").selectAll("*").remove();for(var n=T.xaxis,r=T.yaxis,t={xaxis:n,yaxis:r,plot:a,layerClipId:T._hasClipOnAxisFalse?T.clipIdRelative:null},h=T.layers.frontplot.select("g.scatterlayer"),s=0;s<e.length;s++){var o=e[s];o.length&&(o[0].trace._xA=n,o[0].trace._yA=r)}w(M,t,e,h)}},{"../scatter/plot":957}],1041:[function(i,U,V){var w=i("../scatter/attributes"),f=i("../../components/colorscale/attributes"),M=i("../../plots/cartesian/axis_format_attributes").axisHoverFormat,T=i("../../plots/template_attributes").hovertemplateAttrs,e=i("../scattergl/attributes"),a=i("../../plots/cartesian/constants").idRegex,n=i("../../plot_api/plot_template").templatedArray,r=i("../../lib/extend").extendFlat,t=w.marker,h=t.line,s=r(f("marker.line",{editTypeOverride:"calc"}),{width:r({},h.width,{editType:"calc"}),editType:"calc"}),o=r(f("marker"),{symbol:t.symbol,angle:t.angle,size:r({},t.size,{editType:"markerSize"}),sizeref:t.sizeref,sizemin:t.sizemin,sizemode:t.sizemode,opacity:t.opacity,colorbar:t.colorbar,line:s,editType:"calc"});o.color.editType=o.cmin.editType=o.cmax.editType="style";function y(d){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",regex:a[d],editType:"plot"}}}U.exports={dimensions:n("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes"},matches:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:r({},e.text,{}),hovertext:r({},e.hovertext,{}),hovertemplate:T(),xhoverformat:M("x"),yhoverformat:M("y"),marker:o,xaxes:y("x"),yaxes:y("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:e.selected.marker,editType:"calc"},unselected:{marker:e.unselected.marker,editType:"calc"},opacity:e.opacity}},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plot_api/plot_template":555,"../../plots/cartesian/axis_format_attributes":569,"../../plots/cartesian/constants":573,"../../plots/template_attributes":642,"../scatter/attributes":936,"../scattergl/attributes":988}],1042:[function(i,U,V){var w=i("../../registry"),f=i("../../components/grid");U.exports={moduleType:"trace",name:"splom",categories:["gl","regl","cartesian","symbols","showLegend","scatter-like"],attributes:i("./attributes"),supplyDefaults:i("./defaults"),colorbar:i("../scatter/marker_colorbar"),calc:i("./calc"),plot:i("./plot"),hoverPoints:i("./hover").hoverPoints,selectPoints:i("./select"),editStyle:i("./edit_style"),meta:{}},w.register(f)},{"../../components/grid":411,"../../registry":647,"../scatter/marker_colorbar":954,"./attributes":1041,"./calc":1044,"./defaults":1045,"./edit_style":1046,"./hover":1048,"./plot":1050,"./select":1052}],1043:[function(i,U,V){var w=i("regl-line2d"),f=i("../../registry"),M=i("../../lib/prepare_regl"),T=i("../../plots/get_data").getModuleCalcData,e=i("../../plots/cartesian"),a=i("../../plots/cartesian/axis_ids").getFromId,n=i("../../plots/cartesian/axes").shouldShowZeroLine,r="splom",t={};function h(c){var m=c._fullLayout,l=f.getModule(r),x=T(c.calcdata,l)[0],u=M(c,["ANGLE_instanced_arrays","OES_element_index_uint"],t);!u||(m._hasOnlyLargeSploms&&y(c),l.plot(c,{},x))}function s(c){var m=c.calcdata,l=c._fullLayout;l._hasOnlyLargeSploms&&y(c);for(var x=0;x<m.length;x++){var u=m[x][0],A=u.trace,_=l._splomScenes[A.uid];A.type==="splom"&&_&&_.matrix&&o(c,A,_)}}function o(c,m,l){for(var x=l.matrixOptions.data.length,u=m._visibleDims,A=l.viewOpts.ranges=new Array(x),_=0;_<u.length;_++){var g=u[_],b=A[_]=new Array(4),v=a(c,m._diag[g][0]);v&&(b[0]=v.r2l(v.range[0]),b[2]=v.r2l(v.range[1]));var k=a(c,m._diag[g][1]);k&&(b[1]=k.r2l(k.range[0]),b[3]=k.r2l(k.range[1]))}l.selectBatch.length||l.unselectBatch.length?l.matrix.update({ranges:A},{ranges:A}):l.matrix.update({ranges:A})}function y(c){var m=c._fullLayout,l=m._glcanvas.data()[0].regl,x=m._splomGrid;x||(x=m._splomGrid=w(l)),x.update(d(c))}function d(c){var m=c._context.plotGlPixelRatio,l=c._fullLayout,x=l._size,u=[0,0,l.width*m,l.height*m],A={},_;function g(Q,X,j,re,ue,K){j*=m,re*=m,ue*=m,K*=m;var te=X[Q+"color"],Y=X[Q+"width"],H=String(te+Y);H in A?A[H].data.push(NaN,NaN,j,re,ue,K):A[H]={data:[j,re,ue,K],join:"rect",thickness:Y*m,color:te,viewport:u,range:u,overlay:!1}}for(_ in l._splomSubplots){var b=l._plots[_],v=b.xaxis,k=b.yaxis,S=v._gridVals,E=k._gridVals,C=v._offset,F=v._length,I=k._length,D=x.b+k.domain[0]*x.h,R=-k._m,O=-R*k.r2l(k.range[0],k.calendar),z,B;if(v.showgrid)for(_=0;_<S.length;_++)z=C+v.l2p(S[_].x),g("grid",v,z,D,z,D+I);if(k.showgrid)for(_=0;_<E.length;_++)B=D+O+R*E[_].x,g("grid",k,C,B,C+F,B);n(c,v,k)&&(z=C+v.l2p(0),g("zeroline",v,z,D,z,D+I)),n(c,k,v)&&(B=D+O+0,g("zeroline",k,C,B,C+F,B))}var G=[];for(_ in A)G.push(A[_]);return G}function p(c,m,l,x){var u={},A;if(x._splomScenes){for(A=0;A<c.length;A++){var _=c[A];_.type==="splom"&&(u[_.uid]=1)}for(A=0;A<l.length;A++){var g=l[A];if(!u[g.uid]){var b=x._splomScenes[g.uid];b&&b.destroy&&b.destroy(),x._splomScenes[g.uid]=null,delete x._splomScenes[g.uid]}}}Object.keys(x._splomScenes||{}).length===0&&delete x._splomScenes,x._splomGrid&&!m._hasOnlyLargeSploms&&x._hasOnlyLargeSploms&&(x._splomGrid.destroy(),x._splomGrid=null,delete x._splomGrid),e.clean(c,m,l,x)}U.exports={name:r,attr:e.attr,attrRegex:e.attrRegex,layoutAttributes:e.layoutAttributes,supplyLayoutDefaults:e.supplyLayoutDefaults,drawFramework:e.drawFramework,plot:h,drag:s,updateGrid:y,clean:p,updateFx:e.updateFx,toSVG:e.toSVG,reglPrecompiled:t}},{"../../lib/prepare_regl":528,"../../plots/cartesian":578,"../../plots/cartesian/axes":566,"../../plots/cartesian/axis_ids":570,"../../plots/get_data":602,"../../registry":647,"regl-line2d":281}],1044:[function(i,U,V){var w=i("../../lib"),f=i("../../plots/cartesian/axis_ids"),M=i("../scatter/calc").calcMarkerSize,T=i("../scatter/calc").calcAxisExpansion,e=i("../scatter/colorscale_calc"),a=i("../scattergl/convert").markerSelection,n=i("../scattergl/convert").markerStyle,r=i("./scene_update"),t=i("../../constants/numerical").BADNUM,h=i("../scattergl/constants").TOO_MANY_POINTS;U.exports=function(o,y){var d=y.dimensions,p=y._length,c={},m=c.cdata=[],l=c.data=[],x=y._visibleDims=[],u,A,_,g,b;function v(F,I){for(var D=F.makeCalcdata({v:I.values,vcalendar:y.calendar},"v"),R=0;R<D.length;R++)D[R]=D[R]===t?NaN:D[R];m.push(D),l.push(F.type==="log"?w.simpleMap(D,F.c2l):D)}for(u=0;u<d.length;u++)if(_=d[u],_.visible){if(g=f.getFromId(o,y._diag[u][0]),b=f.getFromId(o,y._diag[u][1]),g&&b&&g.type!==b.type){w.log("Skipping splom dimension "+u+" with conflicting axis types");continue}g?(v(g,_),b&&b.type==="category"&&(b._categories=g._categories.slice())):v(b,_),x.push(u)}e(o,y),w.extendFlat(c,n(o,y));var k=m.length,S=k*p>h,E;for(S?E=c.sizeAvg||Math.max(c.size,3):E=M(y,p),A=0;A<x.length;A++)u=x[A],_=d[u],g=f.getFromId(o,y._diag[u][0])||{},b=f.getFromId(o,y._diag[u][1])||{},T(o,y,g,b,m[A],m[A],E);var C=r(o,y);return C.matrix||(C.matrix=!0),C.matrixOptions=c,C.selectedOptions=a(o,y,y.selected),C.unselectedOptions=a(o,y,y.unselected),[{x:!1,y:!1,t:{},trace:y}]}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/axis_ids":570,"../scatter/calc":937,"../scatter/colorscale_calc":939,"../scattergl/constants":991,"../scattergl/convert":992,"./scene_update":1051}],1045:[function(i,U,V){var w=i("../../lib"),f=i("../../plots/array_container_defaults"),M=i("./attributes"),T=i("../scatter/subtypes"),e=i("../scatter/marker_defaults"),a=i("../parcoords/merge_length"),n=i("../scattergl/helpers").isOpenSymbol;U.exports=function(s,o,y,d){function p(g,b){return w.coerce(s,o,M,g,b)}var c=f(s,o,{name:"dimensions",handleItemDefaults:r}),m=p("diagonal.visible"),l=p("showupperhalf"),x=p("showlowerhalf"),u=a(o,c,"values");if(!u||!m&&!l&&!x){o.visible=!1;return}p("text"),p("hovertext"),p("hovertemplate"),p("xhoverformat"),p("yhoverformat"),e(s,o,y,d,p,{noAngleRef:!0,noStandOff:!0});var A=n(o.marker.symbol),_=T.isBubble(o);p("marker.line.width",A||_?1:0),t(s,o,d,p),w.coerceSelectionMarkerOpacity(o,p)};function r(h,s){function o(d,p){return w.coerce(h,s,M.dimensions,d,p)}o("label");var y=o("values");y&&y.length?o("visible"):s.visible=!1,o("axis.type"),o("axis.matches")}function t(h,s,o,y){var d=s.dimensions,p=d.length,c=s.showupperhalf,m=s.showlowerhalf,l=s.diagonal.visible,x,u,A=new Array(p),_=new Array(p);for(x=0;x<p;x++){var g=x?x+1:"";A[x]="x"+g,_[x]="y"+g}var b=y("xaxes",A),v=y("yaxes",_),k=s._diag=new Array(p);s._xaxes={},s._yaxes={};var S=[],E=[];function C(Q,X,j,re){if(!!Q){var ue=Q.charAt(0),K=o._splomAxes[ue];if(s["_"+ue+"axes"][Q]=1,re.push(Q),!(Q in K)){var te=K[Q]={};j&&(te.label=j.label||"",j.visible&&j.axis&&(j.axis.type&&(te.type=j.axis.type),j.axis.matches&&(te.matches=X)))}}}var F=!l&&!m,I=!l&&!c;for(s._axesDim={},x=0;x<p;x++){var D=d[x],R=x===0,O=x===p-1,z=R&&F||O&&I?void 0:b[x],B=R&&I||O&&F?void 0:v[x];C(z,B,D,S),C(B,z,D,E),k[x]=[z,B],s._axesDim[z]=x,s._axesDim[B]=x}for(x=0;x<S.length;x++)for(u=0;u<E.length;u++){var G=S[x]+E[u];(x>u&&c||x<u&&m||x===u&&(l||!m||!c))&&(o._splomSubplots[G]=1)}(!m||!l&&c&&m)&&(o._splomGridDflt.xside="bottom",o._splomGridDflt.yside="left")}},{"../../lib":515,"../../plots/array_container_defaults":561,"../parcoords/merge_length":907,"../scatter/marker_defaults":955,"../scatter/subtypes":961,"../scattergl/helpers":996,"./attributes":1041}],1046:[function(i,U,V){var w=i("../../lib"),f=i("../scatter/colorscale_calc"),M=i("../scattergl/convert").markerStyle;U.exports=function(e,a){var n=a.trace,r=e._fullLayout._splomScenes[n.uid];if(r){f(e,n),w.extendFlat(r.matrixOptions,M(e,n));var t=w.extendFlat({},r.matrixOptions,r.viewOpts);r.matrix.update(t,null)}}},{"../../lib":515,"../scatter/colorscale_calc":939,"../scattergl/convert":992}],1047:[function(i,U,V){V.getDimIndex=function(f,M){for(var T=M._id,e=T.charAt(0),a={x:0,y:1}[e],n=f._visibleDims,r=0;r<n.length;r++){var t=n[r];if(f._diag[t][a]===T)return r}return!1}},{}],1048:[function(i,U,V){var w=i("./helpers"),f=i("../scattergl/hover").calcHover;function M(T,e,a){var n=T.cd,r=n[0].trace,t=T.scene,h=t.matrixOptions.cdata,s=T.xa,o=T.ya,y=s.c2p(e),d=o.c2p(a),p=T.distance,c=w.getDimIndex(r,s),m=w.getDimIndex(r,o);if(c===!1||m===!1)return[T];for(var l=h[c],x=h[m],u,A,_=p,g=0;g<l.length;g++){var b=l[g],v=x[g],k=s.c2p(b)-y,S=o.c2p(v)-d,E=Math.sqrt(k*k+S*S);E<_&&(_=A=E,u=g)}return T.index=u,T.distance=_,T.dxy=A,u===void 0?[T]:[f(T,l,x,r)]}U.exports={hoverPoints:M}},{"../scattergl/hover":997,"./helpers":1047}],1049:[function(i,U,V){var w=i("./base_index");w.basePlotModule=i("./base_plot"),U.exports=w},{"./base_index":1042,"./base_plot":1043}],1050:[function(i,U,V){var w=i("regl-splom"),f=i("../../lib"),M=i("../../plots/cartesian/axis_ids"),T=i("../../components/dragelement/helpers").selectMode;U.exports=function(n,r,t){if(!!t.length)for(var h=0;h<t.length;h++)e(n,t[h][0])};function e(a,n){var r=a._fullLayout,t=r._size,h=n.trace,s=n.t,o=r._splomScenes[h.uid],y=o.matrixOptions,d=y.cdata,p=r._glcanvas.data()[0].regl,c=r.dragmode,m,l,x,u,A;if(d.length!==0){y.lower=h.showupperhalf,y.upper=h.showlowerhalf,y.diagonal=h.diagonal.visible;var _=h._visibleDims,g=d.length,b=o.viewOpts={};for(b.ranges=new Array(g),b.domains=new Array(g),A=0;A<_.length;A++){x=_[A];var v=b.ranges[A]=new Array(4),k=b.domains[A]=new Array(4);m=M.getFromId(a,h._diag[x][0]),m&&(v[0]=m._rl[0],v[2]=m._rl[1],k[0]=m.domain[0],k[2]=m.domain[1]),l=M.getFromId(a,h._diag[x][1]),l&&(v[1]=l._rl[0],v[3]=l._rl[1],k[1]=l.domain[0],k[3]=l.domain[1])}var S=a._context.plotGlPixelRatio,E=t.l*S,C=t.b*S,F=t.w*S,I=t.h*S;b.viewport=[E,C,F+E,I+C],o.matrix===!0&&(o.matrix=w(p));var D=r.clickmode.indexOf("select")>-1,R=T(c)||!!h.selectedpoints||D,O=!0;if(R){var z=h._length;if(h.selectedpoints){o.selectBatch=h.selectedpoints;var B=h.selectedpoints,G={};for(x=0;x<B.length;x++)G[B[x]]=!0;var Q=[];for(x=0;x<z;x++)G[x]||Q.push(x);o.unselectBatch=Q}var X=s.xpx=new Array(g),j=s.ypx=new Array(g);for(A=0;A<_.length;A++){if(x=_[A],m=M.getFromId(a,h._diag[x][0]),m)for(X[A]=new Array(z),u=0;u<z;u++)X[A][u]=m.c2p(d[A][u]);if(l=M.getFromId(a,h._diag[x][1]),l)for(j[A]=new Array(z),u=0;u<z;u++)j[A][u]=l.c2p(d[A][u])}if(o.selectBatch.length||o.unselectBatch.length){var re=f.extendFlat({},y,o.unselectedOptions,b),ue=f.extendFlat({},y,o.selectedOptions,b);o.matrix.update(re,ue),O=!1}}else s.xpx=s.ypx=null;if(O){var K=f.extendFlat({},y,b);o.matrix.update(K,null)}}}},{"../../components/dragelement/helpers":385,"../../lib":515,"../../plots/cartesian/axis_ids":570,"regl-splom":283}],1051:[function(i,U,V){var w=i("../../lib");U.exports=function(M,T){var e=M._fullLayout,a=T.uid,n=e._splomScenes;n||(n=e._splomScenes={});var r={dirty:!0,selectBatch:[],unselectBatch:[]},t={matrix:!1,selectBatch:[],unselectBatch:[]},h=n[T.uid];return h||(h=n[a]=w.extendFlat({},r,t),h.draw=function(){h.matrix&&h.matrix.draw&&(h.selectBatch.length||h.unselectBatch.length?h.matrix.draw(h.unselectBatch,h.selectBatch):h.matrix.draw()),h.dirty=!1},h.destroy=function(){h.matrix&&h.matrix.destroy&&h.matrix.destroy(),h.matrixOptions=null,h.selectBatch=null,h.unselectBatch=null,h=null}),h.dirty||w.extendFlat(h,r),h}},{"../../lib":515}],1052:[function(i,U,V){var w=i("../../lib"),f=w.pushUnique,M=i("../scatter/subtypes"),T=i("./helpers");U.exports=function(a,n){var r=a.cd,t=r[0].trace,h=r[0].t,s=a.scene,o=s.matrixOptions.cdata,y=a.xaxis,d=a.yaxis,p=[];if(!s)return p;var c=!M.hasMarkers(t)&&!M.hasText(t);if(t.visible!==!0||c)return p;var m=T.getDimIndex(t,y),l=T.getDimIndex(t,d);if(m===!1||l===!1)return p;var x=h.xpx[m],u=h.ypx[l],A=o[m],_=o[l],g=(a.scene.selectBatch||[]).slice(),b=[];if(n!==!1&&!n.degenerate)for(var v=0;v<A.length;v++)n.contains([x[v],u[v]],null,v,a)?(p.push({pointNumber:v,x:A[v],y:_[v]}),f(g,v)):g.indexOf(v)!==-1?f(g,v):b.push(v);var k=s.matrixOptions;return!g.length&&!b.length?s.matrix.update(k,null):!s.selectBatch.length&&!s.unselectBatch.length&&s.matrix.update(s.unselectedOptions,w.extendFlat({},k,s.selectedOptions,s.viewOpts)),s.selectBatch=g,s.unselectBatch=b,p}},{"../../lib":515,"../scatter/subtypes":961,"./helpers":1047}],1053:[function(i,U,V){var w=i("../../components/colorscale/attributes"),f=i("../../plots/cartesian/axis_format_attributes").axisHoverFormat,M=i("../../plots/template_attributes").hovertemplateAttrs,T=i("../mesh3d/attributes"),e=i("../../plots/attributes"),a=i("../../lib/extend").extendFlat,n={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1e3,editType:"calc"},sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"},hovertext:{valType:"string",dflt:"",editType:"calc"},hovertemplate:M({editType:"calc"},{keys:["tubex","tubey","tubez","tubeu","tubev","tubew","norm","divergence"]}),uhoverformat:f("u",1),vhoverformat:f("v",1),whoverformat:f("w",1),xhoverformat:f("x"),yhoverformat:f("y"),zhoverformat:f("z"),showlegend:a({},e.showlegend,{dflt:!1})};a(n,w("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"}));var r=["opacity","lightposition","lighting"];r.forEach(function(t){n[t]=T[t]}),n.hoverinfo=a({},e.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","divergence","text","name"],dflt:"x+y+z+norm+text+name"}),n.transforms=void 0,U.exports=n},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../mesh3d/attributes":876}],1054:[function(i,U,V){var w=i("../../lib"),f=i("../../components/colorscale/calc");function M(n,r){r._len=Math.min(r.u.length,r.v.length,r.w.length,r.x.length,r.y.length,r.z.length),r._u=a(r.u,r._len),r._v=a(r.v,r._len),r._w=a(r.w,r._len),r._x=a(r.x,r._len),r._y=a(r.y,r._len),r._z=a(r.z,r._len);var t=T(r);r._gridFill=t.fill,r._Xs=t.Xs,r._Ys=t.Ys,r._Zs=t.Zs,r._len=t.len;var h=0,s,o,y;r.starts&&(s=a(r.starts.x||[]),o=a(r.starts.y||[]),y=a(r.starts.z||[]),h=Math.min(s.length,o.length,y.length)),r._startsX=s||[],r._startsY=o||[],r._startsZ=y||[];var d=0,p=1/0,c;for(c=0;c<r._len;c++){var m=r._u[c],l=r._v[c],x=r._w[c],u=Math.sqrt(m*m+l*l+x*x);d=Math.max(d,u),p=Math.min(p,u)}for(f(n,r,{vals:[p,d],containerStr:"",cLetter:"c"}),c=0;c<h;c++){var A=s[c];t.xMax=Math.max(t.xMax,A),t.xMin=Math.min(t.xMin,A);var _=o[c];t.yMax=Math.max(t.yMax,_),t.yMin=Math.min(t.yMin,_);var g=y[c];t.zMax=Math.max(t.zMax,g),t.zMin=Math.min(t.zMin,g)}r._slen=h,r._normMax=d,r._xbnds=[t.xMin,t.xMax],r._ybnds=[t.yMin,t.yMax],r._zbnds=[t.zMin,t.zMax]}function T(n){var r=n._x,t=n._y,h=n._z,s=n._len,o,y,d,p=-1/0,c=1/0,m=-1/0,l=1/0,x=-1/0,u=1/0,A="",_,g,b,v,k,S,E,C,F;for(s&&(v=r[0],S=t[0],C=h[0]),s>1&&(k=r[s-1],E=t[s-1],F=h[s-1]),o=0;o<s;o++)p=Math.max(p,r[o]),c=Math.min(c,r[o]),m=Math.max(m,t[o]),l=Math.min(l,t[o]),x=Math.max(x,h[o]),u=Math.min(u,h[o]),!_&&r[o]!==v&&(_=!0,A+="x"),!g&&t[o]!==S&&(g=!0,A+="y"),!b&&h[o]!==C&&(b=!0,A+="z");_||(A+="x"),g||(A+="y"),b||(A+="z");var I=e(n._x),D=e(n._y),R=e(n._z);A=A.replace("x",(v>k?"-":"+")+"x"),A=A.replace("y",(S>E?"-":"+")+"y"),A=A.replace("z",(C>F?"-":"+")+"z");var O=function(){s=0,I=[],D=[],R=[]};(!s||s<I.length*D.length*R.length)&&O();var z=function(ae){return ae==="x"?r:ae==="y"?t:h},B=function(ae){return ae==="x"?I:ae==="y"?D:R},G=function(ae){return ae[s-1]<ae[0]?-1:1},Q=z(A[1]),X=z(A[3]),j=z(A[5]),re=B(A[1]).length,ue=B(A[3]).length,K=B(A[5]).length,te=!1,Y=function(ae,oe,be){return re*(ue*ae+oe)+be},H=G(z(A[1])),ee=G(z(A[3])),ne=G(z(A[5]));for(o=0;o<K-1;o++){for(y=0;y<ue-1;y++){for(d=0;d<re-1;d++){var Z=Y(o,y,d),q=Y(o,y,d+1),ie=Y(o,y+1,d),se=Y(o+1,y,d);if((!(Q[Z]*H<Q[q]*H)||!(X[Z]*ee<X[ie]*ee)||!(j[Z]*ne<j[se]*ne))&&(te=!0),te)break}if(te)break}if(te)break}return te&&(w.warn("Encountered arbitrary coordinates! Unable to input data grid."),O()),{xMin:c,yMin:l,zMin:u,xMax:p,yMax:m,zMax:x,Xs:I,Ys:D,Zs:R,len:s,fill:A}}function e(n){return w.distinctVals(n).vals}function a(n,r){if(r===void 0&&(r=n.length),w.isTypedArray(n))return n.subarray(0,r);for(var t=[],h=0;h<r;h++)t[h]=+n[h];return t}U.exports={calc:M,filter:a,processGrid:T}},{"../../components/colorscale/calc":375,"../../lib":515}],1055:[function(i,U,V){var w=i("../../../stackgl_modules").gl_streamtube3d,f=w.createTubeMesh,M=i("../../lib"),T=i("../../lib/gl_format_color").parseColorScale,e=i("../../components/colorscale").extractOpts,a=i("../../plots/gl3d/zip3"),n={xaxis:0,yaxis:1,zaxis:2};function r(d,p){this.scene=d,this.uid=p,this.mesh=null,this.data=null}var t=r.prototype;t.handlePick=function(d){var p=this.scene.fullSceneLayout,c=this.scene.dataScale;function m(u,A){var _=p[A],g=c[n[A]];return _.l2c(u)/g}if(d.object===this.mesh){var l=d.data.position,x=d.data.velocity;return d.traceCoordinate=[m(l[0],"xaxis"),m(l[1],"yaxis"),m(l[2],"zaxis"),m(x[0],"xaxis"),m(x[1],"yaxis"),m(x[2],"zaxis"),d.data.intensity*this.data._normMax,d.data.divergence],d.textLabel=this.data.hovertext||this.data.text,!0}};function h(d){var p=d.length,c;return p>2?c=d.slice(1,p-1):p===2?c=[(d[0]+d[1])/2]:c=d,c}function s(d){var p=d.length;return p===1?[.5,.5]:[d[1]-d[0],d[p-1]-d[p-2]]}function o(d,p){var c=d.fullSceneLayout,m=d.dataScale,l=p._len,x={};function u(ue,K){var te=c[K],Y=m[n[K]];return M.simpleMap(ue,function(H){return te.d2l(H)*Y})}if(x.vectors=a(u(p._u,"xaxis"),u(p._v,"yaxis"),u(p._w,"zaxis"),l),!l)return{positions:[],cells:[]};var A=u(p._Xs,"xaxis"),_=u(p._Ys,"yaxis"),g=u(p._Zs,"zaxis");x.meshgrid=[A,_,g],x.gridFill=p._gridFill;var b=p._slen;if(b)x.startingPositions=a(u(p._startsX,"xaxis"),u(p._startsY,"yaxis"),u(p._startsZ,"zaxis"));else{for(var v=_[0],k=h(A),S=h(g),E=new Array(k.length*S.length),C=0,F=0;F<k.length;F++)for(var I=0;I<S.length;I++)E[C++]=[k[F],v,S[I]];x.startingPositions=E}x.colormap=T(p),x.tubeSize=p.sizeref,x.maxLength=p.maxdisplayed;var D=u(p._xbnds,"xaxis"),R=u(p._ybnds,"yaxis"),O=u(p._zbnds,"zaxis"),z=s(A),B=s(_),G=s(g),Q=[[D[0]-z[0],R[0]-B[0],O[0]-G[0]],[D[1]+z[1],R[1]+B[1],O[1]+G[1]]],X=w(x,Q),j=e(p);X.vertexIntensityBounds=[j.min/p._normMax,j.max/p._normMax];var re=p.lightposition;return X.lightPosition=[re.x,re.y,re.z],X.ambient=p.lighting.ambient,X.diffuse=p.lighting.diffuse,X.specular=p.lighting.specular,X.roughness=p.lighting.roughness,X.fresnel=p.lighting.fresnel,X.opacity=p.opacity,p._pad=X.tubeScale*p.sizeref*2,X}t.update=function(d){this.data=d;var p=o(this.scene,d);this.mesh.update(p)},t.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function y(d,p){var c=d.glplot.gl,m=o(d,p),l=f(c,m),x=new r(d,p.uid);return x.mesh=l,x.data=p,l._trace=x,d.glplot.add(l),x}U.exports=y},{"../../../stackgl_modules":1133,"../../components/colorscale":379,"../../lib":515,"../../lib/gl_format_color":511,"../../plots/gl3d/zip3":618}],1056:[function(i,U,V){var w=i("../../lib"),f=i("../../components/colorscale/defaults"),M=i("./attributes");U.exports=function(e,a,n,r){function t(c,m){return w.coerce(e,a,M,c,m)}var h=t("u"),s=t("v"),o=t("w"),y=t("x"),d=t("y"),p=t("z");if(!h||!h.length||!s||!s.length||!o||!o.length||!y||!y.length||!d||!d.length||!p||!p.length){a.visible=!1;return}t("starts.x"),t("starts.y"),t("starts.z"),t("maxdisplayed"),t("sizeref"),t("lighting.ambient"),t("lighting.diffuse"),t("lighting.specular"),t("lighting.roughness"),t("lighting.fresnel"),t("lightposition.x"),t("lightposition.y"),t("lightposition.z"),f(e,a,r,t,{prefix:"",cLetter:"c"}),t("text"),t("hovertext"),t("hovertemplate"),t("uhoverformat"),t("vhoverformat"),t("whoverformat"),t("xhoverformat"),t("yhoverformat"),t("zhoverformat"),a._length=null}},{"../../components/colorscale/defaults":377,"../../lib":515,"./attributes":1053}],1057:[function(i,U,V){U.exports={moduleType:"trace",name:"streamtube",basePlotModule:i("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:i("./attributes"),supplyDefaults:i("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:i("./calc").calc,plot:i("./convert"),eventData:function(w,f){return w.tubex=w.x,w.tubey=w.y,w.tubez=w.z,w.tubeu=f.traceCoordinate[3],w.tubev=f.traceCoordinate[4],w.tubew=f.traceCoordinate[5],w.norm=f.traceCoordinate[6],w.divergence=f.traceCoordinate[7],delete w.x,delete w.y,delete w.z,w},meta:{}}},{"../../plots/gl3d":607,"./attributes":1053,"./calc":1054,"./convert":1055,"./defaults":1056}],1058:[function(i,U,V){var w=i("../../plots/attributes"),f=i("../../plots/template_attributes").hovertemplateAttrs,M=i("../../plots/template_attributes").texttemplateAttrs,T=i("../../components/colorscale/attributes"),e=i("../../plots/domain").attributes,a=i("../pie/attributes"),n=i("./constants"),r=i("../../lib/extend").extendFlat;U.exports={labels:{valType:"data_array",editType:"calc"},parents:{valType:"data_array",editType:"calc"},values:{valType:"data_array",editType:"calc"},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc"},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc"},level:{valType:"any",editType:"plot",anim:!0},maxdepth:{valType:"integer",editType:"plot",dflt:-1},marker:r({colors:{valType:"data_array",editType:"calc"},line:{color:r({},a.marker.line.color,{dflt:null}),width:r({},a.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},T("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1},editType:"plot"},text:a.text,textinfo:{valType:"flaglist",flags:["label","text","value","current path","percent root","percent entry","percent parent"],extras:["none"],editType:"plot"},texttemplate:M({editType:"plot"},{keys:n.eventDataKeys.concat(["label","value"])}),hovertext:a.hovertext,hoverinfo:r({},w.hoverinfo,{flags:["label","text","value","name","current path","percent root","percent entry","percent parent"],dflt:"label+text+value+name"}),hovertemplate:f({},{keys:n.eventDataKeys}),textfont:a.textfont,insidetextorientation:a.insidetextorientation,insidetextfont:a.insidetextfont,outsidetextfont:r({},a.outsidetextfont,{}),rotation:{valType:"angle",dflt:0,editType:"plot"},sort:a.sort,root:{color:{valType:"color",editType:"calc",dflt:"rgba(0,0,0,0)"},editType:"calc"},domain:e({name:"sunburst",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/domain":593,"../../plots/template_attributes":642,"../pie/attributes":910,"./constants":1061}],1059:[function(i,U,V){var w=i("../../plots/plots");V.name="sunburst",V.plot=function(f,M,T,e){w.plotBasePlot(V.name,f,M,T,e)},V.clean=function(f,M,T,e){w.cleanBasePlot(V.name,f,M,T,e)}},{"../../plots/plots":628}],1060:[function(i,U,V){var w=i("d3-hierarchy"),f=i("fast-isnumeric"),M=i("../../lib"),T=i("../../components/colorscale").makeColorScaleFuncFromTrace,e=i("../pie/calc").makePullColorFn,a=i("../pie/calc").generateExtendedColors,n=i("../../components/colorscale").calc,r=i("../../constants/numerical").ALMOST_EQUAL,t={},h={},s={};V.calc=function(y,d){var p=y._fullLayout,c=d.ids,m=M.isArrayOrTypedArray(c),l=d.labels,x=d.parents,u=d.values,A=M.isArrayOrTypedArray(u),_=[],g={},b={},v=function(H,ee){g[H]?g[H].push(ee):g[H]=[ee],b[ee]=1},k=function(H){return H||typeof H=="number"},S=function(H){return!A||f(u[H])&&u[H]>=0},E,C,F;m?(E=Math.min(c.length,x.length),C=function(H){return k(c[H])&&S(H)},F=function(H){return String(c[H])}):(E=Math.min(l.length,x.length),C=function(H){return k(l[H])&&S(H)},F=function(H){return String(l[H])}),A&&(E=Math.min(E,u.length));for(var I=0;I<E;I++)if(C(I)){var D=F(I),R=k(x[I])?String(x[I]):"",O={i:I,id:D,pid:R,label:k(l[I])?String(l[I]):""};A&&(O.v=+u[I]),_.push(O),v(R,D)}if(g[""]){if(g[""].length>1){for(var G=M.randstr(),Q=0;Q<_.length;Q++)_[Q].pid===""&&(_[Q].pid=G);_.unshift({hasMultipleRoots:!0,id:G,pid:"",label:""})}}else{var z=[],B;for(B in g)b[B]||z.push(B);if(z.length===1)B=z[0],_.unshift({hasImpliedRoot:!0,id:B,pid:"",label:B});else return M.warn(["Multiple implied roots, cannot build",d.type,"hierarchy of",d.name+".","These roots include:",z.join(", ")].join(" "))}var X;try{X=w.stratify().id(function(H){return H.id}).parentId(function(H){return H.pid})(_)}catch(H){return M.warn(["Failed to build",d.type,"hierarchy of",d.name+".","Error:",H.message].join(" "))}var j=w.hierarchy(X),re=!1;if(A)switch(d.branchvalues){case"remainder":j.sum(function(H){return H.data.v});break;case"total":j.each(function(H){var ee=H.data.data,ne=ee.v;if(H.children){var Z=H.children.reduce(function(q,ie){return q+ie.data.data.v},0);if((ee.hasImpliedRoot||ee.hasMultipleRoots)&&(ne=Z),ne<Z*r)return re=!0,M.warn(["Total value for node",H.data.data.id,"of",d.name,"is smaller than the sum of its children.",`
parent value =`,ne,`
children sum =`,Z].join(" "))}H.value=ne});break}else o(j,d,{branches:d.count.indexOf("branches")!==-1,leaves:d.count.indexOf("leaves")!==-1});if(!re){d.sort&&j.sort(function(H,ee){return ee.value-H.value});var ue,K,te=d.marker.colors||[],Y=!!te.length;return d._hasColorscale?(Y||(te=A?d.values:d._values),n(y,d,{vals:te,containerStr:"marker",cLetter:"c"}),K=T(d.marker)):ue=e(p["_"+d.type+"colormap"]),j.each(function(H){var ee=H.data.data;ee.color=d._hasColorscale?K(te[ee.i]):ue(te[ee.i],ee.id)}),_[0].hierarchy=j,_}},V._runCrossTraceCalc=function(y,d){var p=d._fullLayout,c=d.calcdata,m=p[y+"colorway"],l=p["_"+y+"colormap"];p["extend"+y+"colors"]&&(m=a(m,y==="icicle"?s:y==="treemap"?h:t));var x=0,u;function A(v){var k=v.data.data,S=k.id;k.color===!1&&(l[S]?k.color=l[S]:v.parent?v.parent.parent?k.color=v.parent.data.data.color:(l[S]=k.color=m[x%m.length],x++):k.color=u)}for(var _=0;_<c.length;_++){var g=c[_],b=g[0];b.trace.type===y&&b.hierarchy&&(u=b.trace.root.color,b.hierarchy.each(A))}},V.crossTraceCalc=function(y){return V._runCrossTraceCalc("sunburst",y)};function o(y,d,p){var c=0,m=y.children;if(m){for(var l=m.length,x=0;x<l;x++)c+=o(m[x],d,p);p.branches&&c++}else p.leaves&&c++;return y.value=y.data.data.value=c,d._values||(d._values=[]),d._values[y.data.data.i]=c,c}},{"../../components/colorscale":379,"../../constants/numerical":491,"../../lib":515,"../pie/calc":912,"d3-hierarchy":115,"fast-isnumeric":190}],1061:[function(i,U,V){U.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"]}},{}],1062:[function(i,U,V){var w=i("../../lib"),f=i("./attributes"),M=i("../../plots/domain").defaults,T=i("../bar/defaults").handleText,e=i("../../components/colorscale"),a=e.hasColorscale,n=e.handleDefaults;U.exports=function(t,h,s,o){function y(A,_){return w.coerce(t,h,f,A,_)}var d=y("labels"),p=y("parents");if(!d||!d.length||!p||!p.length){h.visible=!1;return}var c=y("values");c&&c.length?y("branchvalues"):y("count"),y("level"),y("maxdepth");var m=y("marker.line.width");m&&y("marker.line.color",o.paper_bgcolor),y("marker.colors");var l=h._hasColorscale=a(t,"marker","colors")||(t.marker||{}).coloraxis;l&&n(t,h,o,y,{prefix:"marker.",cLetter:"c"}),y("leaf.opacity",l?1:.7);var x=y("text");y("texttemplate"),h.texttemplate||y("textinfo",Array.isArray(x)?"text+label":"label"),y("hovertext"),y("hovertemplate");var u="auto";T(t,h,o,y,u,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),y("insidetextorientation"),y("sort"),y("rotation"),y("root.color"),M(h,o,y),h._length=null}},{"../../components/colorscale":379,"../../lib":515,"../../plots/domain":593,"../bar/defaults":661,"./attributes":1058}],1063:[function(i,U,V){var w=i("@plotly/d3"),f=i("../../registry"),M=i("../../components/fx/helpers").appendArrayPointValue,T=i("../../components/fx"),e=i("../../lib"),a=i("../../lib/events"),n=i("./helpers"),r=i("../pie/helpers"),t=r.formatPieValue;U.exports=function(o,y,d,p,c){var m=p[0],l=m.trace,x=m.hierarchy,u=l.type==="sunburst",A=l.type==="treemap"||l.type==="icicle";"_hasHoverLabel"in l||(l._hasHoverLabel=!1),"_hasHoverEvent"in l||(l._hasHoverEvent=!1);var _=function(v){var k=d._fullLayout;if(!(d._dragging||k.hovermode===!1)){var S=d._fullData[l.index],E=v.data.data,C=E.i,F=n.isHierarchyRoot(v),I=n.getParent(x,v),D=n.getValue(v),R=function(q){return e.castOption(S,C,q)},O=R("hovertemplate"),z=T.castHoverinfo(S,k,C),B=k.separators,G;if(O||z&&z!=="none"&&z!=="skip"){var Q,X;u&&(Q=m.cx+v.pxmid[0]*(1-v.rInscribed),X=m.cy+v.pxmid[1]*(1-v.rInscribed)),A&&(Q=v._hoverX,X=v._hoverY);var j={},re=[],ue=[],K=function(q){return re.indexOf(q)!==-1};z&&(re=z==="all"?S._module.attributes.hoverinfo.flags:z.split("+")),j.label=E.label,K("label")&&j.label&&ue.push(j.label),E.hasOwnProperty("v")&&(j.value=E.v,j.valueLabel=t(j.value,B),K("value")&&ue.push(j.valueLabel)),j.currentPath=v.currentPath=n.getPath(v.data),K("current path")&&!F&&ue.push(j.currentPath);var te,Y=[],H=function(){Y.indexOf(te)===-1&&(ue.push(te),Y.push(te))};j.percentParent=v.percentParent=D/n.getValue(I),j.parent=v.parentString=n.getPtLabel(I),K("percent parent")&&(te=n.formatPercent(j.percentParent,B)+" of "+j.parent,H()),j.percentEntry=v.percentEntry=D/n.getValue(y),j.entry=v.entry=n.getPtLabel(y),K("percent entry")&&!F&&!v.onPathbar&&(te=n.formatPercent(j.percentEntry,B)+" of "+j.entry,H()),j.percentRoot=v.percentRoot=D/n.getValue(x),j.root=v.root=n.getPtLabel(x),K("percent root")&&!F&&(te=n.formatPercent(j.percentRoot,B)+" of "+j.root,H()),j.text=R("hovertext")||R("text"),K("text")&&(te=j.text,e.isValidTextValue(te)&&ue.push(te)),G=[h(v,S,c.eventDataKeys)];var ee={trace:S,y:X,_x0:v._x0,_x1:v._x1,_y0:v._y0,_y1:v._y1,text:ue.join("<br>"),name:O||K("name")?S.name:void 0,color:R("hoverlabel.bgcolor")||E.color,borderColor:R("hoverlabel.bordercolor"),fontFamily:R("hoverlabel.font.family"),fontSize:R("hoverlabel.font.size"),fontColor:R("hoverlabel.font.color"),nameLength:R("hoverlabel.namelength"),textAlign:R("hoverlabel.align"),hovertemplate:O,hovertemplateLabels:j,eventData:G};u&&(ee.x0=Q-v.rInscribed*v.rpx1,ee.x1=Q+v.rInscribed*v.rpx1,ee.idealAlign=v.pxmid[0]<0?"left":"right"),A&&(ee.x=Q,ee.idealAlign=Q<0?"left":"right");var ne=[];T.loneHover(ee,{container:k._hoverlayer.node(),outerContainer:k._paper.node(),gd:d,inOut_bbox:ne}),G[0].bbox=ne[0],l._hasHoverLabel=!0}if(A){var Z=o.select("path.surface");c.styleOne(Z,v,S,{hovered:!0})}l._hasHoverEvent=!0,d.emit("plotly_hover",{points:G||[h(v,S,c.eventDataKeys)],event:w.event})}},g=function(v){var k=d._fullLayout,S=d._fullData[l.index],E=w.select(this).datum();if(l._hasHoverEvent&&(v.originalEvent=w.event,d.emit("plotly_unhover",{points:[h(E,S,c.eventDataKeys)],event:w.event}),l._hasHoverEvent=!1),l._hasHoverLabel&&(T.loneUnhover(k._hoverlayer.node()),l._hasHoverLabel=!1),A){var C=o.select("path.surface");c.styleOne(C,E,S,{hovered:!1})}},b=function(v){var k=d._fullLayout,S=d._fullData[l.index],E=u&&(n.isHierarchyRoot(v)||n.isLeaf(v)),C=n.getPtId(v),F=n.isEntry(v)?n.findEntryWithChild(x,C):n.findEntryWithLevel(x,C),I=n.getPtId(F),D={points:[h(v,S,c.eventDataKeys)],event:w.event};E||(D.nextLevel=I);var R=a.triggerHandler(d,"plotly_"+l.type+"click",D);if(R!==!1&&k.hovermode&&(d._hoverdata=[h(v,S,c.eventDataKeys)],T.click(d,w.event)),!E&&R!==!1&&!d._dragging&&!d._transitioning){f.call("_storeDirectGUIEdit",S,k._tracePreGUI[S.uid],{level:S.level});var O={data:[{level:I}],traces:[l.index]},z={frame:{redraw:!1,duration:c.transitionTime},transition:{duration:c.transitionTime,easing:c.transitionEasing},mode:"immediate",fromcurrent:!0};T.loneUnhover(k._hoverlayer.node()),f.call("animate",d,O,z)}};o.on("mouseover",_),o.on("mouseout",g),o.on("click",b)};function h(s,o,y){for(var d=s.data.data,p={curveNumber:o.index,pointNumber:d.i,data:o._input,fullData:o},c=0;c<y.length;c++){var m=y[c];m in s&&(p[m]=s[m])}return"parentString"in s&&!n.isHierarchyRoot(s)&&(p.parent=s.parentString),M(p,o,d.i),p}},{"../../components/fx":407,"../../components/fx/helpers":403,"../../lib":515,"../../lib/events":504,"../../registry":647,"../pie/helpers":915,"./helpers":1064,"@plotly/d3":58}],1064:[function(i,U,V){var w=i("../../lib"),f=i("../../components/color"),M=i("../../lib/setcursor"),T=i("../pie/helpers");V.findEntryWithLevel=function(r,t){var h;return t&&r.eachAfter(function(s){if(V.getPtId(s)===t)return h=s.copy()}),h||r},V.findEntryWithChild=function(r,t){var h;return r.eachAfter(function(s){for(var o=s.children||[],y=0;y<o.length;y++){var d=o[y];if(V.getPtId(d)===t)return h=s.copy()}}),h||r},V.isEntry=function(r){return!r.parent},V.isLeaf=function(r){return!r.children},V.getPtId=function(r){return r.data.data.id},V.getPtLabel=function(r){return r.data.data.label},V.getValue=function(r){return r.value},V.isHierarchyRoot=function(r){return n(r)===""},V.setSliceCursor=function(r,t,h){var s=h.isTransitioning;if(!s){var o=r.datum();s=h.hideOnRoot&&V.isHierarchyRoot(o)||h.hideOnLeaves&&V.isLeaf(o)}M(r,s?null:"pointer")};function e(r,t,h){return{color:V.getOutsideTextFontKey("color",r,t,h),family:V.getOutsideTextFontKey("family",r,t,h),size:V.getOutsideTextFontKey("size",r,t,h)}}function a(r,t,h,s){var o=(s||{}).onPathbar,y=t.data.data,d=y.i,p=w.castOption(r,d,(o?"pathbar.textfont":"insidetextfont")+".color");return!p&&r._input.textfont&&(p=w.castOption(r._input,d,"textfont.color")),{color:p||f.contrast(y.color),family:V.getInsideTextFontKey("family",r,t,h,s),size:V.getInsideTextFontKey("size",r,t,h,s)}}V.getInsideTextFontKey=function(r,t,h,s,o){var y=(o||{}).onPathbar,d=y?"pathbar.textfont":"insidetextfont",p=h.data.data.i;return w.castOption(t,p,d+"."+r)||w.castOption(t,p,"textfont."+r)||s.size},V.getOutsideTextFontKey=function(r,t,h,s){var o=h.data.data.i;return w.castOption(t,o,"outsidetextfont."+r)||w.castOption(t,o,"textfont."+r)||s.size},V.isOutsideText=function(r,t){return!r._hasColorscale&&V.isHierarchyRoot(t)},V.determineTextFont=function(r,t,h,s){return V.isOutsideText(r,t)?e(r,t,h):a(r,t,h,s)},V.hasTransition=function(r){return!!(r&&r.duration>0)},V.getMaxDepth=function(r){return r.maxdepth>=0?r.maxdepth:1/0},V.isHeader=function(r,t){return!(V.isLeaf(r)||r.depth===t._maxDepth-1)};function n(r){return r.data.data.pid}V.getParent=function(r,t){return V.findEntryWithLevel(r,n(t))},V.listPath=function(r,t){var h=r.parent;if(!h)return[];var s=t?[h.data[t]]:[h];return V.listPath(h,t).concat(s)},V.getPath=function(r){return V.listPath(r,"label").join("/")+"/"},V.formatValue=T.formatPieValue,V.formatPercent=function(r,t){var h=w.formatPercent(r,0);return h==="0%"&&(h=T.formatPiePercent(r,t)),h}},{"../../components/color":367,"../../lib":515,"../../lib/setcursor":536,"../pie/helpers":915}],1065:[function(i,U,V){U.exports={moduleType:"trace",name:"sunburst",basePlotModule:i("./base_plot"),categories:[],animatable:!0,attributes:i("./attributes"),layoutAttributes:i("./layout_attributes"),supplyDefaults:i("./defaults"),supplyLayoutDefaults:i("./layout_defaults"),calc:i("./calc").calc,crossTraceCalc:i("./calc").crossTraceCalc,plot:i("./plot").plot,style:i("./style").style,colorbar:i("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":954,"./attributes":1058,"./base_plot":1059,"./calc":1060,"./defaults":1062,"./layout_attributes":1066,"./layout_defaults":1067,"./plot":1068,"./style":1069}],1066:[function(i,U,V){U.exports={sunburstcolorway:{valType:"colorlist",editType:"calc"},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1067:[function(i,U,V){var w=i("../../lib"),f=i("./layout_attributes");U.exports=function(T,e){function a(n,r){return w.coerce(T,e,f,n,r)}a("sunburstcolorway",e.colorway),a("extendsunburstcolors")}},{"../../lib":515,"./layout_attributes":1066}],1068:[function(i,U,V){var w=i("@plotly/d3"),f=i("d3-hierarchy"),M=i("d3-interpolate").interpolate,T=i("../../components/drawing"),e=i("../../lib"),a=i("../../lib/svg_text_utils"),n=i("../bar/uniform_text"),r=n.recordMinTextSize,t=n.clearMinTextSize,h=i("../pie/plot"),s=i("../pie/helpers").getRotationAngle,o=h.computeTransform,y=h.transformInsideText,d=i("./style").styleOne,p=i("../bar/style").resizeText,c=i("./fx"),m=i("./constants"),l=i("./helpers");V.plot=function(b,v,k,S){var E=b._fullLayout,C=E._sunburstlayer,F,I,D=!k,R=!E.uniformtext.mode&&l.hasTransition(k);if(t("sunburst",E),F=C.selectAll("g.trace.sunburst").data(v,function(z){return z[0].trace.uid}),F.enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round"),F.order(),R){S&&(I=S());var O=w.transition().duration(k.duration).ease(k.easing).each("end",function(){I&&I()}).each("interrupt",function(){I&&I()});O.each(function(){C.selectAll("g.trace").each(function(z){x(b,z,this,k)})})}else F.each(function(z){x(b,z,this,k)}),E.uniformtext.mode&&p(b,E._sunburstlayer.selectAll(".trace"),"sunburst");D&&F.exit().remove()};function x(b,v,k,S){var E=b._context.staticPlot,C=b._fullLayout,F=!C.uniformtext.mode&&l.hasTransition(S),I=w.select(k),D=I.selectAll("g.slice"),R=v[0],O=R.trace,z=R.hierarchy,B=l.findEntryWithLevel(z,O.level),G=l.getMaxDepth(O),Q=C._size,X=O.domain,j=Q.w*(X.x[1]-X.x[0]),re=Q.h*(X.y[1]-X.y[0]),ue=.5*Math.min(j,re),K=R.cx=Q.l+Q.w*(X.x[1]+X.x[0])/2,te=R.cy=Q.t+Q.h*(1-X.y[0])-re/2;if(!B)return D.remove();var Y=null,H={};F&&D.each(function(Ce){H[l.getPtId(Ce)]={rpx0:Ce.rpx0,rpx1:Ce.rpx1,x0:Ce.x0,x1:Ce.x1,transform:Ce.transform},!Y&&l.isEntry(Ce)&&(Y=Ce)});var ee=u(B).descendants(),ne=B.height+1,Z=0,q=G;R.hasMultipleRoots&&l.isHierarchyRoot(B)&&(ee=ee.slice(1),ne-=1,Z=1,q+=1),ee=ee.filter(function(Ce){return Ce.y1<=q});var ie=s(O.rotation);ie&&ee.forEach(function(Ce){Ce.x0+=ie,Ce.x1+=ie});var se=Math.min(ne,G),ae=function(Ce){return(Ce-Z)/se*ue},oe=function(Ce,Ke){return[Ce*Math.cos(Ke),-Ce*Math.sin(Ke)]},be=function(Ce){return e.pathAnnulus(Ce.rpx0,Ce.rpx1,Ce.x0,Ce.x1,K,te)},ce=function(Ce){return K+_(Ce)[0]*(Ce.transform.rCenter||0)+(Ce.transform.x||0)},de=function(Ce){return te+_(Ce)[1]*(Ce.transform.rCenter||0)+(Ce.transform.y||0)};D=D.data(ee,l.getPtId),D.enter().append("g").classed("slice",!0),F?D.exit().transition().each(function(){var Ce=w.select(this),Ke=Ce.select("path.surface");Ke.transition().attrTween("d",function(Fe){var Re=Se(Fe);return function(je){return be(Re(je))}});var Ye=Ce.select("g.slicetext");Ye.attr("opacity",0)}).remove():D.exit().remove(),D.order();var ye=null;if(F&&Y){var ge=l.getPtId(Y);D.each(function(Ce){ye===null&&l.getPtId(Ce)===ge&&(ye=Ce.x1)})}var me=D;F&&(me=me.transition().each("end",function(){var Ce=w.select(this);l.setSliceCursor(Ce,b,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})})),me.each(function(Ce){var Ke=w.select(this),Ye=e.ensureSingle(Ke,"path","surface",function(tr){tr.style("pointer-events",E?"none":"all")});Ce.rpx0=ae(Ce.y0),Ce.rpx1=ae(Ce.y1),Ce.xmid=(Ce.x0+Ce.x1)/2,Ce.pxmid=oe(Ce.rpx1,Ce.xmid),Ce.midangle=-(Ce.xmid-Math.PI/2),Ce.startangle=-(Ce.x0-Math.PI/2),Ce.stopangle=-(Ce.x1-Math.PI/2),Ce.halfangle=.5*Math.min(e.angleDelta(Ce.x0,Ce.x1)||Math.PI,Math.PI),Ce.ring=1-Ce.rpx0/Ce.rpx1,Ce.rInscribed=A(Ce),F?Ye.transition().attrTween("d",function(tr){var Ht=Le(tr);return function(Pt){return be(Ht(Pt))}}):Ye.attr("d",be),Ke.call(c,B,b,v,{eventDataKeys:m.eventDataKeys,transitionTime:m.CLICK_TRANSITION_TIME,transitionEasing:m.CLICK_TRANSITION_EASING}).call(l.setSliceCursor,b,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:b._transitioning}),Ye.call(d,Ce,O);var Fe=e.ensureSingle(Ke,"g","slicetext"),Re=e.ensureSingle(Fe,"text","",function(tr){tr.attr("data-notex",1)}),je=e.ensureUniformFontSize(b,l.determineTextFont(O,Ce,C.font));Re.text(V.formatSliceLabel(Ce,B,O,v,C)).classed("slicetext",!0).attr("text-anchor","middle").call(T.font,je).call(a.convertToTspans,b);var xt=T.bBox(Re.node());Ce.transform=y(xt,Ce,R),Ce.transform.targetX=ce(Ce),Ce.transform.targetY=de(Ce);var Nt=function(tr,Ht){var Pt=tr.transform;return o(Pt,Ht),Pt.fontSize=je.size,r(O.type,Pt,C),e.getTextTransform(Pt)};F?Re.transition().attrTween("transform",function(tr){var Ht=Oe(tr);return function(Pt){return Nt(Ht(Pt),xt)}}):Re.attr("transform",Nt(Ce,xt))});function Se(Ce){var Ke=l.getPtId(Ce),Ye=H[Ke],Fe=H[l.getPtId(B)],Re;if(Fe){var je=(Ce.x1>Fe.x1?2*Math.PI:0)+ie;Re=Ce.rpx1<Fe.rpx1?{x0:Ce.x0,x1:Ce.x1,rpx0:0,rpx1:0}:{x0:je,x1:je,rpx0:Ce.rpx0,rpx1:Ce.rpx1}}else{var xt,Nt=l.getPtId(Ce.parent);D.each(function(Ut){if(l.getPtId(Ut)===Nt)return xt=Ut});var tr=xt.children,Ht;tr.forEach(function(Ut,Lt){if(l.getPtId(Ut)===Ke)return Ht=Lt});var Pt=tr.length,$t=M(xt.x0,xt.x1);Re={rpx0:ue,rpx1:ue,x0:$t(Ht/Pt),x1:$t((Ht+1)/Pt)}}return M(Ye,Re)}function Le(Ce){var Ke=H[l.getPtId(Ce)],Ye,Fe={x0:Ce.x0,x1:Ce.x1,rpx0:Ce.rpx0,rpx1:Ce.rpx1};if(Ke)Ye=Ke;else if(Y)if(Ce.parent)if(ye){var Re=(Ce.x1>ye?2*Math.PI:0)+ie;Ye={x0:Re,x1:Re}}else Ye={rpx0:ue,rpx1:ue},e.extendFlat(Ye,we(Ce));else Ye={rpx0:0,rpx1:0};else Ye={x0:ie,x1:ie};return M(Ye,Fe)}function Oe(Ce){var Ke=H[l.getPtId(Ce)],Ye,Fe=Ce.transform;if(Ke)Ye=Ke;else if(Ye={rpx1:Ce.rpx1,transform:{textPosAngle:Fe.textPosAngle,scale:0,rotate:Fe.rotate,rCenter:Fe.rCenter,x:Fe.x,y:Fe.y}},Y)if(Ce.parent)if(ye){var Re=Ce.x1>ye?2*Math.PI:0;Ye.x0=Ye.x1=Re}else e.extendFlat(Ye,we(Ce));else Ye.x0=Ye.x1=ie;else Ye.x0=Ye.x1=ie;var je=M(Ye.transform.textPosAngle,Ce.transform.textPosAngle),xt=M(Ye.rpx1,Ce.rpx1),Nt=M(Ye.x0,Ce.x0),tr=M(Ye.x1,Ce.x1),Ht=M(Ye.transform.scale,Fe.scale),Pt=M(Ye.transform.rotate,Fe.rotate),$t=Fe.rCenter===0?3:Ye.transform.rCenter===0?1/3:1,Ut=M(Ye.transform.rCenter,Fe.rCenter),Lt=function(We){return Ut(Math.pow(We,$t))};return function(We){var ot=xt(We),Ge=Nt(We),Me=tr(We),Ve=Lt(We),Qe=oe(ot,(Ge+Me)/2),tt=je(We),St={pxmid:Qe,rpx1:ot,transform:{textPosAngle:tt,rCenter:Ve,x:Fe.x,y:Fe.y}};return r(O.type,Fe,C),{transform:{targetX:ce(St),targetY:de(St),scale:Ht(We),rotate:Pt(We),rCenter:Ve}}}}function we(Ce){var Ke=Ce.parent,Ye=H[l.getPtId(Ke)],Fe={};if(Ye){var Re=Ke.children,je=Re.indexOf(Ce),xt=Re.length,Nt=M(Ye.x0,Ye.x1);Fe.x0=Nt(je/xt),Fe.x1=Nt(je/xt)}else Fe.x0=Fe.x1=0;return Fe}}function u(b){return f.partition().size([2*Math.PI,b.height+1])(b)}V.formatSliceLabel=function(b,v,k,S,E){var C=k.texttemplate,F=k.textinfo;if(!C&&(!F||F==="none"))return"";var I=E.separators,D=S[0],R=b.data.data,O=D.hierarchy,z=l.isHierarchyRoot(b),B=l.getParent(O,b),G=l.getValue(b);if(!C){var Q=F.split("+"),X=function(Z){return Q.indexOf(Z)!==-1},j=[],re;if(X("label")&&R.label&&j.push(R.label),R.hasOwnProperty("v")&&X("value")&&j.push(l.formatValue(R.v,I)),!z){X("current path")&&j.push(l.getPath(b.data));var ue=0;X("percent parent")&&ue++,X("percent entry")&&ue++,X("percent root")&&ue++;var K=ue>1;if(ue){var te,Y=function(Z){re=l.formatPercent(te,I),K&&(re+=" of "+Z),j.push(re)};X("percent parent")&&!z&&(te=G/l.getValue(B),Y("parent")),X("percent entry")&&(te=G/l.getValue(v),Y("entry")),X("percent root")&&(te=G/l.getValue(O),Y("root"))}}return X("text")&&(re=e.castOption(k,R.i,"text"),e.isValidTextValue(re)&&j.push(re)),j.join("<br>")}var H=e.castOption(k,R.i,"texttemplate");if(!H)return"";var ee={};R.label&&(ee.label=R.label),R.hasOwnProperty("v")&&(ee.value=R.v,ee.valueLabel=l.formatValue(R.v,I)),ee.currentPath=l.getPath(b.data),z||(ee.percentParent=G/l.getValue(B),ee.percentParentLabel=l.formatPercent(ee.percentParent,I),ee.parent=l.getPtLabel(B)),ee.percentEntry=G/l.getValue(v),ee.percentEntryLabel=l.formatPercent(ee.percentEntry,I),ee.entry=l.getPtLabel(v),ee.percentRoot=G/l.getValue(O),ee.percentRootLabel=l.formatPercent(ee.percentRoot,I),ee.root=l.getPtLabel(O),R.hasOwnProperty("color")&&(ee.color=R.color);var ne=e.castOption(k,R.i,"text");return(e.isValidTextValue(ne)||ne==="")&&(ee.text=ne),ee.customdata=e.castOption(k,R.i,"customdata"),e.texttemplateString(H,ee,E._d3locale,ee,k._meta||{})};function A(b){return b.rpx0===0&&e.isFullCircle([b.x0,b.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(b.halfangle)),b.ring/2))}function _(b){return g(b.rpx1,b.transform.textPosAngle)}function g(b,v){return[b*Math.sin(v),-b*Math.cos(v)]}},{"../../components/drawing":389,"../../lib":515,"../../lib/svg_text_utils":541,"../bar/style":671,"../bar/uniform_text":673,"../pie/helpers":915,"../pie/plot":919,"./constants":1061,"./fx":1063,"./helpers":1064,"./style":1069,"@plotly/d3":58,"d3-hierarchy":115,"d3-interpolate":116}],1069:[function(i,U,V){var w=i("@plotly/d3"),f=i("../../components/color"),M=i("../../lib"),T=i("../bar/uniform_text").resizeText;function e(n){var r=n._fullLayout._sunburstlayer.selectAll(".trace");T(n,r,"sunburst"),r.each(function(t){var h=w.select(this),s=t[0],o=s.trace;h.style("opacity",o.opacity),h.selectAll("path.surface").each(function(y){w.select(this).call(a,y,o)})})}function a(n,r,t){var h=r.data.data,s=!r.children,o=h.i,y=M.castOption(t,o,"marker.line.color")||f.defaultLine,d=M.castOption(t,o,"marker.line.width")||0;n.style("stroke-width",d).call(f.fill,h.color).call(f.stroke,y).style("opacity",s?t.leaf.opacity:null)}U.exports={style:e,styleOne:a}},{"../../components/color":367,"../../lib":515,"../bar/uniform_text":673,"@plotly/d3":58}],1070:[function(i,U,V){var w=i("../../components/color"),f=i("../../components/colorscale/attributes"),M=i("../../plots/cartesian/axis_format_attributes").axisHoverFormat,T=i("../../plots/template_attributes").hovertemplateAttrs,e=i("../../plots/attributes"),a=i("../../lib/extend").extendFlat,n=i("../../plot_api/edit_types").overrideAll;function r(s){return{valType:"boolean",dflt:!1}}function t(s){return{show:{valType:"boolean",dflt:!1},start:{valType:"number",dflt:null,editType:"plot"},end:{valType:"number",dflt:null,editType:"plot"},size:{valType:"number",dflt:null,min:0,editType:"plot"},project:{x:r(),y:r(),z:r()},color:{valType:"color",dflt:w.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:w.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var h=U.exports=n(a({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:T(),xhoverformat:M("x"),yhoverformat:M("y"),zhoverformat:M("z"),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},f("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:t(),y:t(),z:t()},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4},z:{valType:"number",min:-1e5,max:1e5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},opacityscale:{valType:"any",editType:"calc"},_deprecated:{zauto:a({},f.zauto,{}),zmin:a({},f.zmin,{}),zmax:a({},f.zmax,{})},hoverinfo:a({},e.hoverinfo),showlegend:a({},e.showlegend,{dflt:!1})}),"calc","nested");h.x.editType=h.y.editType=h.z.editType="calc+clearAxisTypes",h.transforms=void 0},{"../../components/color":367,"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642}],1071:[function(i,U,V){var w=i("../../components/colorscale/calc");U.exports=function(M,T){T.surfacecolor?w(M,T,{vals:T.surfacecolor,containerStr:"",cLetter:"c"}):w(M,T,{vals:T.z,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":375}],1072:[function(i,U,V){var w=i("../../../stackgl_modules").gl_surface3d,f=i("../../../stackgl_modules").ndarray,M=i("../../../stackgl_modules").ndarray_linear_interpolate.d2,T=i("../heatmap/interp2d"),e=i("../heatmap/find_empties"),a=i("../../lib").isArrayOrTypedArray,n=i("../../lib/gl_format_color").parseColorScale,r=i("../../lib/str2rgbarray"),t=i("../../components/colorscale").extractOpts;function h(S,E,C){this.scene=S,this.uid=C,this.surface=E,this.data=null,this.showContour=[!1,!1,!1],this.contourStart=[null,null,null],this.contourEnd=[null,null,null],this.contourSize=[0,0,0],this.minValues=[1/0,1/0,1/0],this.maxValues=[-1/0,-1/0,-1/0],this.dataScaleX=1,this.dataScaleY=1,this.refineData=!0,this.objectOffset=[0,0,0]}var s=h.prototype;s.getXat=function(S,E,C,F){var I=a(this.data.x)?a(this.data.x[0])?this.data.x[E][S]:this.data.x[S]:S;return C===void 0?I:F.d2l(I,0,C)},s.getYat=function(S,E,C,F){var I=a(this.data.y)?a(this.data.y[0])?this.data.y[E][S]:this.data.y[E]:E;return C===void 0?I:F.d2l(I,0,C)},s.getZat=function(S,E,C,F){var I=this.data.z[E][S];return I===null&&this.data.connectgaps&&this.data._interpolatedZ&&(I=this.data._interpolatedZ[E][S]),C===void 0?I:F.d2l(I,0,C)},s.handlePick=function(S){if(S.object===this.surface){var E=(S.data.index[0]-1)/this.dataScaleX-1,C=(S.data.index[1]-1)/this.dataScaleY-1,F=Math.max(Math.min(Math.round(E),this.data.z[0].length-1),0),I=Math.max(Math.min(Math.round(C),this.data._ylength-1),0);S.index=[F,I],S.traceCoordinate=[this.getXat(F,I),this.getYat(F,I),this.getZat(F,I)],S.dataCoordinate=[this.getXat(F,I,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(F,I,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(F,I,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var D=0;D<3;D++){var R=S.dataCoordinate[D];R!=null&&(S.dataCoordinate[D]*=this.scene.dataScale[D])}var O=this.data.hovertext||this.data.text;return Array.isArray(O)&&O[I]&&O[I][F]!==void 0?S.textLabel=O[I][F]:O?S.textLabel=O:S.textLabel="",S.data.dataCoordinate=S.dataCoordinate.slice(),this.surface.highlight(S.data),this.scene.glplot.spikes.position=S.dataCoordinate,!0}};function o(S){var E=S[0].rgb,C=S[S.length-1].rgb;return E[0]===C[0]&&E[1]===C[1]&&E[2]===C[2]&&E[3]===C[3]}var y=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];function d(S,E){if(S<E)return 0;for(var C=0;Math.floor(S%E)===0;)S/=E,C++;return C}function p(S){for(var E=[],C=0;C<y.length;C++){var F=y[C];E.push(d(S,F))}return E}function c(S){for(var E=p(S),C=S,F=0;F<y.length;F++)if(E[F]>0){C=y[F];break}return C}function m(S,E){if(!(S<1||E<1)){for(var C=p(S),F=p(E),I=1,D=0;D<y.length;D++)I*=Math.pow(y[D],Math.max(C[D],F[D]));return I}}function l(S){if(S.length!==0){for(var E=1,C=0;C<S.length;C++)E=m(E,S[C]);return E}}s.calcXnums=function(S){var E,C=[];for(E=1;E<S;E++){var F=this.getXat(E-1,0),I=this.getXat(E,0);I!==F&&F!==void 0&&F!==null&&I!==void 0&&I!==null?C[E-1]=Math.abs(I-F):C[E-1]=0}var D=0;for(E=1;E<S;E++)D+=C[E-1];for(E=1;E<S;E++)C[E-1]===0?C[E-1]=1:C[E-1]=Math.round(D/C[E-1]);return C},s.calcYnums=function(S){var E,C=[];for(E=1;E<S;E++){var F=this.getYat(0,E-1),I=this.getYat(0,E);I!==F&&F!==void 0&&F!==null&&I!==void 0&&I!==null?C[E-1]=Math.abs(I-F):C[E-1]=0}var D=0;for(E=1;E<S;E++)D+=C[E-1];for(E=1;E<S;E++)C[E-1]===0?C[E-1]=1:C[E-1]=Math.round(D/C[E-1]);return C};var x=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260],u=x[9],A=x[13];s.estimateScale=function(S,E){for(var C=E===0?this.calcXnums(S):this.calcYnums(S),F=1+l(C);F<u;)F*=2;for(;F>A;)F--,F/=c(F),F++,F<u&&(F=A);var I=Math.round(F/S);return I>1?I:1};function _(S,E,C){var F=C[8]+C[2]*E[0]+C[5]*E[1];return S[0]=(C[6]+C[0]*E[0]+C[3]*E[1])/F,S[1]=(C[7]+C[1]*E[0]+C[4]*E[1])/F,S}function g(S,E,C){return b(S,E,_,C),S}function b(S,E,C,F){for(var I=[0,0],D=S.shape[0],R=S.shape[1],O=0;O<D;O++)for(var z=0;z<R;z++)C(I,[O,z],F),S.set(O,z,M(E,I[0],I[1]));return S}s.refineCoords=function(S){for(var E=this.dataScaleX,C=this.dataScaleY,F=S[0].shape[0],I=S[0].shape[1],D=Math.floor(S[0].shape[0]*E+1)|0,R=Math.floor(S[0].shape[1]*C+1)|0,O=1+F+1,z=1+I+1,B=f(new Float32Array(O*z),[O,z]),G=[1/E,0,0,0,1/C,0,0,0,1],Q=0;Q<S.length;++Q){this.surface.padField(B,S[Q]);var X=f(new Float32Array(D*R),[D,R]);g(X,B,G),S[Q]=X}};function v(S,E){for(var C=!1,F=0;F<S.length;F++)if(E===S[F]){C=!0;break}C===!1&&S.push(E)}s.setContourLevels=function(){var S=[[],[],[]],E=[!1,!1,!1],C=!1,F,I,D;for(F=0;F<3;++F)if(this.showContour[F]&&(C=!0,this.contourSize[F]>0&&this.contourStart[F]!==null&&this.contourEnd[F]!==null&&this.contourEnd[F]>this.contourStart[F]))for(E[F]=!0,I=this.contourStart[F];I<this.contourEnd[F];I+=this.contourSize[F])D=I*this.scene.dataScale[F],v(S[F],D);if(C){var R=[[],[],[]];for(F=0;F<3;++F)this.showContour[F]&&(R[F]=E[F]?S[F]:this.scene.contourLevels[F]);this.surface.update({levels:R})}},s.update=function(S){var E=this.scene,C=E.fullSceneLayout,F=this.surface,I=n(S),D=E.dataScale,R=S.z[0].length,O=S._ylength,z=E.contourLevels;this.data=S;var B,G,Q,X,j=[];for(B=0;B<3;B++)for(j[B]=[],G=0;G<R;G++)j[B][G]=[];for(G=0;G<R;G++)for(Q=0;Q<O;Q++)j[0][G][Q]=this.getXat(G,Q,S.xcalendar,C.xaxis),j[1][G][Q]=this.getYat(G,Q,S.ycalendar,C.yaxis),j[2][G][Q]=this.getZat(G,Q,S.zcalendar,C.zaxis);if(S.connectgaps)for(S._emptypoints=e(j[2]),T(j[2],S._emptypoints),S._interpolatedZ=[],G=0;G<R;G++)for(S._interpolatedZ[G]=[],Q=0;Q<O;Q++)S._interpolatedZ[G][Q]=j[2][G][Q];for(B=0;B<3;B++)for(G=0;G<R;G++)for(Q=0;Q<O;Q++)X=j[B][G][Q],X==null?j[B][G][Q]=NaN:X=j[B][G][Q]*=D[B];for(B=0;B<3;B++)for(G=0;G<R;G++)for(Q=0;Q<O;Q++)X=j[B][G][Q],X!=null&&(this.minValues[B]>X&&(this.minValues[B]=X),this.maxValues[B]<X&&(this.maxValues[B]=X));for(B=0;B<3;B++)this.objectOffset[B]=.5*(this.minValues[B]+this.maxValues[B]);for(B=0;B<3;B++)for(G=0;G<R;G++)for(Q=0;Q<O;Q++)X=j[B][G][Q],X!=null&&(j[B][G][Q]-=this.objectOffset[B]);var re=[f(new Float32Array(R*O),[R,O]),f(new Float32Array(R*O),[R,O]),f(new Float32Array(R*O),[R,O])];for(B=0;B<3;B++)for(G=0;G<R;G++)for(Q=0;Q<O;Q++)re[B].set(G,Q,j[B][G][Q]);j=[];var ue={colormap:I,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!S.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:S.opacityscale,opacity:S.opacity},K=t(S);if(ue.intensityBounds=[K.min,K.max],S.surfacecolor){var te=f(new Float32Array(R*O),[R,O]);for(G=0;G<R;G++)for(Q=0;Q<O;Q++)te.set(G,Q,S.surfacecolor[Q][G]);re.push(te)}else ue.intensityBounds[0]*=D[2],ue.intensityBounds[1]*=D[2];(A<re[0].shape[0]||A<re[0].shape[1])&&(this.refineData=!1),this.refineData===!0&&(this.dataScaleX=this.estimateScale(re[0].shape[0],0),this.dataScaleY=this.estimateScale(re[0].shape[1],1),(this.dataScaleX!==1||this.dataScaleY!==1)&&this.refineCoords(re)),S.surfacecolor&&(ue.intensity=re.pop());var Y=[!0,!0,!0],H=["x","y","z"];for(B=0;B<3;++B){var ee=S.contours[H[B]];Y[B]=ee.highlight,ue.showContour[B]=ee.show||ee.highlight,ue.showContour[B]&&(ue.contourProject[B]=[ee.project.x,ee.project.y,ee.project.z],ee.show?(this.showContour[B]=!0,ue.levels[B]=z[B],F.highlightColor[B]=ue.contourColor[B]=r(ee.color),ee.usecolormap?F.highlightTint[B]=ue.contourTint[B]=0:F.highlightTint[B]=ue.contourTint[B]=1,ue.contourWidth[B]=ee.width,this.contourStart[B]=ee.start,this.contourEnd[B]=ee.end,this.contourSize[B]=ee.size):(this.showContour[B]=!1,this.contourStart[B]=null,this.contourEnd[B]=null,this.contourSize[B]=0),ee.highlight&&(ue.dynamicColor[B]=r(ee.highlightcolor),ue.dynamicWidth[B]=ee.highlightwidth))}o(I)&&(ue.vertexColor=!0),ue.objectOffset=this.objectOffset,ue.coords=re,F.update(ue),F.visible=S.visible,F.enableDynamic=Y,F.enableHighlight=Y,F.snapToData=!0,"lighting"in S&&(F.ambientLight=S.lighting.ambient,F.diffuseLight=S.lighting.diffuse,F.specularLight=S.lighting.specular,F.roughness=S.lighting.roughness,F.fresnel=S.lighting.fresnel),"lightposition"in S&&(F.lightPosition=[S.lightposition.x,S.lightposition.y,S.lightposition.z])},s.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()};function k(S,E){var C=S.glplot.gl,F=w({gl:C}),I=new h(S,F,E.uid);return F._trace=I,I.update(E),S.glplot.add(F),I}U.exports=k},{"../../../stackgl_modules":1133,"../../components/colorscale":379,"../../lib":515,"../../lib/gl_format_color":511,"../../lib/str2rgbarray":540,"../heatmap/find_empties":807,"../heatmap/interp2d":810}],1073:[function(i,U,V){var w=i("../../registry"),f=i("../../lib"),M=i("../../components/colorscale/defaults"),T=i("./attributes"),e=.1;function a(s,o){for(var y=[],d=32,p=0;p<d;p++){var c=p/(d-1),m=o+(1-o)*(1-Math.pow(Math.sin(s*c*Math.PI),2));y.push([c,Math.max(0,Math.min(1,m))])}return y}function n(s){var o=0;if(!Array.isArray(s)||s.length<2||!s[0]||!s[s.length-1]||+s[0][0]!=0||+s[s.length-1][0]!=1)return!1;for(var y=0;y<s.length;y++){var d=s[y];if(d.length!==2||+d[0]<o)return!1;o=+d[0]}return!0}function r(s,o,y,d){var p,c;function m(S,E){return f.coerce(s,o,T,S,E)}var l=m("x"),x=m("y"),u=m("z");if(!u||!u.length||(l?l.length<1:!1)||(x?x.length<1:!1)){o.visible=!1;return}o._xlength=Array.isArray(l)&&f.isArrayOrTypedArray(l[0])?u.length:u[0].length,o._ylength=u.length;var A=w.getComponentMethod("calendars","handleTraceDefaults");A(s,o,["x","y","z"],d),m("text"),m("hovertext"),m("hovertemplate"),m("xhoverformat"),m("yhoverformat"),m("zhoverformat"),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","connectgaps","opacity"].forEach(function(S){m(S)});var _=m("surfacecolor"),g=["x","y","z"];for(p=0;p<3;++p){var b="contours."+g[p],v=m(b+".show"),k=m(b+".highlight");if(v||k)for(c=0;c<3;++c)m(b+".project."+g[c]);v&&(m(b+".color"),m(b+".width"),m(b+".usecolormap")),k&&(m(b+".highlightcolor"),m(b+".highlightwidth")),m(b+".start"),m(b+".end"),m(b+".size")}_||(h(s,"zmin","cmin"),h(s,"zmax","cmax"),h(s,"zauto","cauto")),M(s,o,d,m,{prefix:"",cLetter:"c"}),t(s,o,d,m),o._length=null}function t(s,o,y,d){var p=d("opacityscale");p==="max"?o.opacityscale=[[0,e],[1,1]]:p==="min"?o.opacityscale=[[0,1],[1,e]]:p==="extremes"?o.opacityscale=a(1,e):n(p)||(o.opacityscale=void 0)}function h(s,o,y){o in s&&!(y in s)&&(s[y]=s[o])}U.exports={supplyDefaults:r,opacityscaleDefaults:t}},{"../../components/colorscale/defaults":377,"../../lib":515,"../../registry":647,"./attributes":1070}],1074:[function(i,U,V){U.exports={attributes:i("./attributes"),supplyDefaults:i("./defaults").supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:i("./calc"),plot:i("./convert"),moduleType:"trace",name:"surface",basePlotModule:i("../../plots/gl3d"),categories:["gl3d","2dMap","showLegend"],meta:{}}},{"../../plots/gl3d":607,"./attributes":1070,"./calc":1071,"./convert":1072,"./defaults":1073}],1075:[function(i,U,V){var w=i("../../components/annotations/attributes"),f=i("../../lib/extend").extendFlat,M=i("../../plot_api/edit_types").overrideAll,T=i("../../plots/font_attributes"),e=i("../../plots/domain").attributes,a=i("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers,n=U.exports=M({domain:e({name:"table",trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:a("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:28},align:f({},w.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:f({},T({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:a("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:f({},w.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:f({},T({arrayOk:!0}))}},"calc","from-root");n.transforms=void 0},{"../../components/annotations/attributes":350,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/cartesian/axis_format_attributes":569,"../../plots/domain":593,"../../plots/font_attributes":594}],1076:[function(i,U,V){var w=i("../../plots/get_data").getModuleCalcData,f=i("./plot"),M="table";V.name=M,V.plot=function(T){var e=w(T.calcdata,M)[0];e.length&&f(T,e)},V.clean=function(T,e,a,n){var r=n._has&&n._has(M),t=e._has&&e._has(M);r&&!t&&n._paperdiv.selectAll(".table").remove()}},{"../../plots/get_data":602,"./plot":1083}],1077:[function(i,U,V){var w=i("../../lib/gup").wrap;U.exports=function(){return w({})}},{"../../lib/gup":512}],1078:[function(i,U,V){U.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"<br>",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1e3,scrollbarHideDuration:1e3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}},{}],1079:[function(i,U,V){var w=i("./constants"),f=i("../../lib/extend").extendFlat,M=i("fast-isnumeric");U.exports=function(y,d){var p=a(d.cells.values),c=function(G){return G.slice(d.header.values.length,G.length)},m=a(d.header.values);m.length&&!m[0].length&&(m[0]=[""],m=a(m));var l=m.concat(c(p).map(function(){return n((m[0]||[""]).length)})),x=d.domain,u=Math.floor(y._fullLayout._size.w*(x.x[1]-x.x[0])),A=Math.floor(y._fullLayout._size.h*(x.y[1]-x.y[0])),_=d.header.values.length?l[0].map(function(){return d.header.height}):[w.emptyHeaderHeight],g=p.length?p[0].map(function(){return d.cells.height}):[],b=_.reduce(e,0),v=A-b,k=v+w.uplift,S=h(g,k),E=h(_,b),C=t(E,[]),F=t(S,C),I={},D=d._fullInput.columnorder.concat(c(p.map(function(G,Q){return Q}))),R=l.map(function(G,Q){var X=Array.isArray(d.columnwidth)?d.columnwidth[Math.min(Q,d.columnwidth.length-1)]:d.columnwidth;return M(X)?Number(X):1}),O=R.reduce(e,0);R=R.map(function(G){return G/O*u});var z=Math.max(T(d.header.line.width),T(d.cells.line.width)),B={key:d.uid+y._context.staticPlot,translateX:x.x[0]*y._fullLayout._size.w,translateY:y._fullLayout._size.h*(1-x.y[1]),size:y._fullLayout._size,width:u,maxLineWidth:z,height:A,columnOrder:D,groupHeight:A,rowBlocks:F,headerRowBlocks:C,scrollY:0,cells:f({},d.cells,{values:p}),headerCells:f({},d.header,{values:l}),gdColumns:l.map(function(G){return G[0]}),gdColumnsOriginalOrder:l.map(function(G){return G[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:l.map(function(G,Q){var X=I[G];I[G]=(X||0)+1;var j=G+"__"+I[G];return{key:j,label:G,specIndex:Q,xIndex:D[Q],xScale:r,x:void 0,calcdata:void 0,columnWidth:R[Q]}})};return B.columns.forEach(function(G){G.calcdata=B,G.x=r(G)}),B};function T(o){if(Array.isArray(o)){for(var y=0,d=0;d<o.length;d++)y=Math.max(y,T(o[d]));return y}return o}function e(o,y){return o+y}function a(o){var y=o.slice(),d=1/0,p=0,c;for(c=0;c<y.length;c++)Array.isArray(y[c])||(y[c]=[y[c]]),d=Math.min(d,y[c].length),p=Math.max(p,y[c].length);if(d!==p)for(c=0;c<y.length;c++){var m=p-y[c].length;m&&(y[c]=y[c].concat(n(m)))}return y}function n(o){for(var y=new Array(o),d=0;d<o;d++)y[d]="";return y}function r(o){return o.calcdata.columns.reduce(function(y,d){return d.xIndex<o.xIndex?y+d.columnWidth:y},0)}function t(o,y){var d=Object.keys(o);return d.map(function(p){return f({},o[p],{auxiliaryBlocks:y})})}function h(o,y){for(var d={},p,c=0,m=0,l=s(),x=0,u=0,A=0;A<o.length;A++)p=o[A],l.rows.push({rowIndex:A,rowHeight:p}),m+=p,(m>=y||A===o.length-1)&&(d[c]=l,l.key=u++,l.firstRowIndex=x,l.lastRowIndex=A,l=s(),c+=m,x=A+1,m=0);return d}function s(){return{firstRowIndex:null,lastRowIndex:null,rows:[]}}},{"../../lib/extend":505,"./constants":1078,"fast-isnumeric":190}],1080:[function(i,U,V){var w=i("../../lib/extend").extendFlat;V.splitToPanels=function(M){var T=[0,0],e=w({},M,{key:"header",type:"header",page:0,prevPages:T,currentRepaint:[null,null],dragHandle:!0,values:M.calcdata.headerCells.values[M.specIndex],rowBlocks:M.calcdata.headerRowBlocks,calcdata:w({},M.calcdata,{cells:M.calcdata.headerCells})}),a=w({},M,{key:"cells1",type:"cells",page:0,prevPages:T,currentRepaint:[null,null],dragHandle:!1,values:M.calcdata.cells.values[M.specIndex],rowBlocks:M.calcdata.rowBlocks}),n=w({},M,{key:"cells2",type:"cells",page:1,prevPages:T,currentRepaint:[null,null],dragHandle:!1,values:M.calcdata.cells.values[M.specIndex],rowBlocks:M.calcdata.rowBlocks});return[a,n,e]},V.splitToCells=function(M){var T=f(M);return(M.values||[]).slice(T[0],T[1]).map(function(e,a){var n=typeof e=="string"&&e.match(/[<$&> ]/)?"_keybuster_"+Math.random():"";return{keyWithinBlock:a+n,key:T[0]+a,column:M,calcdata:M.calcdata,page:M.page,rowBlocks:M.rowBlocks,value:e}})};function f(M){var T=M.rowBlocks[M.page],e=T?T.rows[0].rowIndex:0,a=T?e+T.rows.length:0;return[e,a]}},{"../../lib/extend":505}],1081:[function(i,U,V){var w=i("../../lib"),f=i("./attributes"),M=i("../../plots/domain").defaults;function T(e,a){for(var n=e.columnorder||[],r=e.header.values.length,t=n.slice(0,r),h=t.slice().sort(function(y,d){return y-d}),s=t.map(function(y){return h.indexOf(y)}),o=s.length;o<r;o++)s.push(o);a("columnorder",s)}U.exports=function(a,n,r,t){function h(s,o){return w.coerce(a,n,f,s,o)}M(n,t,h),h("columnwidth"),h("header.values"),h("header.format"),h("header.align"),h("header.prefix"),h("header.suffix"),h("header.height"),h("header.line.width"),h("header.line.color"),h("header.fill.color"),w.coerceFont(h,"header.font",w.extendFlat({},t.font)),T(n,h),h("cells.values"),h("cells.format"),h("cells.align"),h("cells.prefix"),h("cells.suffix"),h("cells.height"),h("cells.line.width"),h("cells.line.color"),h("cells.fill.color"),w.coerceFont(h,"cells.font",w.extendFlat({},t.font)),n._length=null}},{"../../lib":515,"../../plots/domain":593,"./attributes":1075}],1082:[function(i,U,V){U.exports={attributes:i("./attributes"),supplyDefaults:i("./defaults"),calc:i("./calc"),plot:i("./plot"),moduleType:"trace",name:"table",basePlotModule:i("./base_plot"),categories:["noOpacity"],meta:{}}},{"./attributes":1075,"./base_plot":1076,"./calc":1077,"./defaults":1081,"./plot":1083}],1083:[function(i,U,V){var w=i("./constants"),f=i("@plotly/d3"),M=i("../../lib"),T=M.numberFormat,e=i("../../lib/gup"),a=i("../../components/drawing"),n=i("../../lib/svg_text_utils"),r=i("../../lib").raiseToTop,t=i("../../lib").strTranslate,h=i("../../lib").cancelTransition,s=i("./data_preparation_helper"),o=i("./data_split_helpers"),y=i("../../components/color");U.exports=function(ie,se){var ae=!ie._context.staticPlot,oe=ie._fullLayout._paper.selectAll("."+w.cn.table).data(se.map(function(Fe){var Re=e.unwrap(Fe),je=Re.trace;return s(ie,je)}),e.keyFun);oe.exit().remove(),oe.enter().append("g").classed(w.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all"),oe.attr("width",function(Fe){return Fe.width+Fe.size.l+Fe.size.r}).attr("height",function(Fe){return Fe.height+Fe.size.t+Fe.size.b}).attr("transform",function(Fe){return t(Fe.translateX,Fe.translateY)});var be=oe.selectAll("."+w.cn.tableControlView).data(e.repeat,e.keyFun),ce=be.enter().append("g").classed(w.cn.tableControlView,!0).style("box-sizing","content-box");if(ae){var de="onwheel"in document?"wheel":"mousewheel";ce.on("mousemove",function(Fe){be.filter(function(Re){return Fe===Re}).call(l,ie)}).on(de,function(Fe){if(!Fe.scrollbarState.wheeling){Fe.scrollbarState.wheeling=!0;var Re=Fe.scrollY+f.event.deltaY,je=X(ie,be,null,Re)(Fe);je||(f.event.stopPropagation(),f.event.preventDefault()),Fe.scrollbarState.wheeling=!1}}).call(l,ie,!0)}be.attr("transform",function(Fe){return t(Fe.size.l,Fe.size.t)});var ye=be.selectAll("."+w.cn.scrollBackground).data(e.repeat,e.keyFun);ye.enter().append("rect").classed(w.cn.scrollBackground,!0).attr("fill","none"),ye.attr("width",function(Fe){return Fe.width}).attr("height",function(Fe){return Fe.height}),be.each(function(Fe){a.setClipUrl(f.select(this),p(ie,Fe),ie)});var ge=be.selectAll("."+w.cn.yColumn).data(function(Fe){return Fe.columns},e.keyFun);ge.enter().append("g").classed(w.cn.yColumn,!0),ge.exit().remove(),ge.attr("transform",function(Fe){return t(Fe.x,0)}),ae&&ge.call(f.behavior.drag().origin(function(Fe){var Re=f.select(this);return R(Re,Fe,-w.uplift),r(this),Fe.calcdata.columnDragInProgress=!0,l(be.filter(function(je){return Fe.calcdata.key===je.key}),ie),Fe}).on("drag",function(Fe){var Re=f.select(this),je=function(tr){return(Fe===tr?f.event.x:tr.x)+tr.columnWidth/2};Fe.x=Math.max(-w.overdrag,Math.min(Fe.calcdata.width+w.overdrag-Fe.columnWidth,f.event.x));var xt=m(ge).filter(function(tr){return tr.calcdata.key===Fe.calcdata.key}),Nt=xt.sort(function(tr,Ht){return je(tr)-je(Ht)});Nt.forEach(function(tr,Ht){tr.xIndex=Ht,tr.x=Fe===tr?tr.x:tr.xScale(tr)}),ge.filter(function(tr){return Fe!==tr}).transition().ease(w.transitionEase).duration(w.transitionDuration).attr("transform",function(tr){return t(tr.x,0)}),Re.call(h).attr("transform",t(Fe.x,-w.uplift))}).on("dragend",function(Fe){var Re=f.select(this),je=Fe.calcdata;Fe.x=Fe.xScale(Fe),Fe.calcdata.columnDragInProgress=!1,R(Re,Fe,0),I(ie,je,je.columns.map(function(xt){return xt.xIndex}))})),ge.each(function(Fe){a.setClipUrl(f.select(this),c(ie,Fe),ie)});var me=ge.selectAll("."+w.cn.columnBlock).data(o.splitToPanels,e.keyFun);me.enter().append("g").classed(w.cn.columnBlock,!0).attr("id",function(Fe){return Fe.key}),me.style("cursor",function(Fe){return Fe.dragHandle?"ew-resize":Fe.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var Se=me.filter(z),Le=me.filter(O);ae&&Le.call(f.behavior.drag().origin(function(Fe){return f.event.stopPropagation(),Fe}).on("drag",X(ie,be,-1)).on("dragend",function(){})),x(ie,be,Se,me),x(ie,be,Le,me);var Oe=be.selectAll("."+w.cn.scrollAreaClip).data(e.repeat,e.keyFun);Oe.enter().append("clipPath").classed(w.cn.scrollAreaClip,!0).attr("id",function(Fe){return p(ie,Fe)});var we=Oe.selectAll("."+w.cn.scrollAreaClipRect).data(e.repeat,e.keyFun);we.enter().append("rect").classed(w.cn.scrollAreaClipRect,!0).attr("x",-w.overdrag).attr("y",-w.uplift).attr("fill","none"),we.attr("width",function(Fe){return Fe.width+2*w.overdrag}).attr("height",function(Fe){return Fe.height+w.uplift});var Ce=ge.selectAll("."+w.cn.columnBoundary).data(e.repeat,e.keyFun);Ce.enter().append("g").classed(w.cn.columnBoundary,!0);var Ke=ge.selectAll("."+w.cn.columnBoundaryClippath).data(e.repeat,e.keyFun);Ke.enter().append("clipPath").classed(w.cn.columnBoundaryClippath,!0),Ke.attr("id",function(Fe){return c(ie,Fe)});var Ye=Ke.selectAll("."+w.cn.columnBoundaryRect).data(e.repeat,e.keyFun);Ye.enter().append("rect").classed(w.cn.columnBoundaryRect,!0).attr("fill","none"),Ye.attr("width",function(Fe){return Fe.columnWidth+2*d(Fe)}).attr("height",function(Fe){return Fe.calcdata.height+2*d(Fe)+w.uplift}).attr("x",function(Fe){return-d(Fe)}).attr("y",function(Fe){return-d(Fe)}),Q(null,Le,be)};function d(q){return Math.ceil(q.calcdata.maxLineWidth/2)}function p(q,ie){return"clip"+q._fullLayout._uid+"_scrollAreaBottomClip_"+ie.key}function c(q,ie){return"clip"+q._fullLayout._uid+"_columnBoundaryClippath_"+ie.calcdata.key+"_"+ie.specIndex}function m(q){return[].concat.apply([],q.map(function(ie){return ie})).map(function(ie){return ie.__data__})}function l(q,ie,se){function ae(ge){var me=ge.rowBlocks;return Y(me,me.length-1)+(me.length?H(me[me.length-1],1/0):1)}var oe=q.selectAll("."+w.cn.scrollbarKit).data(e.repeat,e.keyFun);oe.enter().append("g").classed(w.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision"),oe.each(function(ge){var me=ge.scrollbarState;me.totalHeight=ae(ge),me.scrollableAreaHeight=ge.groupHeight-B(ge),me.currentlyVisibleHeight=Math.min(me.totalHeight,me.scrollableAreaHeight),me.ratio=me.currentlyVisibleHeight/me.totalHeight,me.barLength=Math.max(me.ratio*me.currentlyVisibleHeight,w.goldenRatio*w.scrollbarWidth),me.barWiggleRoom=me.currentlyVisibleHeight-me.barLength,me.wiggleRoom=Math.max(0,me.totalHeight-me.scrollableAreaHeight),me.topY=me.barWiggleRoom===0?0:ge.scrollY/me.wiggleRoom*me.barWiggleRoom,me.bottomY=me.topY+me.barLength,me.dragMultiplier=me.wiggleRoom/me.barWiggleRoom}).attr("transform",function(ge){var me=ge.width+w.scrollbarWidth/2+w.scrollbarOffset;return t(me,B(ge))});var be=oe.selectAll("."+w.cn.scrollbar).data(e.repeat,e.keyFun);be.enter().append("g").classed(w.cn.scrollbar,!0);var ce=be.selectAll("."+w.cn.scrollbarSlider).data(e.repeat,e.keyFun);ce.enter().append("g").classed(w.cn.scrollbarSlider,!0),ce.attr("transform",function(ge){return t(0,ge.scrollbarState.topY||0)});var de=ce.selectAll("."+w.cn.scrollbarGlyph).data(e.repeat,e.keyFun);de.enter().append("line").classed(w.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",w.scrollbarWidth).attr("stroke-linecap","round").attr("y1",w.scrollbarWidth/2),de.attr("y2",function(ge){return ge.scrollbarState.barLength-w.scrollbarWidth/2}).attr("stroke-opacity",function(ge){return ge.columnDragInProgress||!ge.scrollbarState.barWiggleRoom||se?0:.4}),de.transition().delay(0).duration(0),de.transition().delay(w.scrollbarHideDelay).duration(w.scrollbarHideDuration).attr("stroke-opacity",0);var ye=be.selectAll("."+w.cn.scrollbarCaptureZone).data(e.repeat,e.keyFun);ye.enter().append("line").classed(w.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",w.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function(ge){var me=f.event.y,Se=this.getBoundingClientRect(),Le=ge.scrollbarState,Oe=me-Se.top,we=f.scale.linear().domain([0,Le.scrollableAreaHeight]).range([0,Le.totalHeight]).clamp(!0);Le.topY<=Oe&&Oe<=Le.bottomY||X(ie,q,null,we(Oe-Le.barLength/2))(ge)}).call(f.behavior.drag().origin(function(ge){return f.event.stopPropagation(),ge.scrollbarState.scrollbarScrollInProgress=!0,ge}).on("drag",X(ie,q)).on("dragend",function(){})),ye.attr("y2",function(ge){return ge.scrollbarState.scrollableAreaHeight}),ie._context.staticPlot&&(de.remove(),ye.remove())}function x(q,ie,se,ae){var oe=u(se),be=A(oe);v(be);var ce=_(be);S(ce);var de=b(be),ye=g(de);k(ye),E(ye,ie,ae,q),te(be)}function u(q){var ie=q.selectAll("."+w.cn.columnCells).data(e.repeat,e.keyFun);return ie.enter().append("g").classed(w.cn.columnCells,!0),ie.exit().remove(),ie}function A(q){var ie=q.selectAll("."+w.cn.columnCell).data(o.splitToCells,function(se){return se.keyWithinBlock});return ie.enter().append("g").classed(w.cn.columnCell,!0),ie.exit().remove(),ie}function _(q){var ie=q.selectAll("."+w.cn.cellRect).data(e.repeat,function(se){return se.keyWithinBlock});return ie.enter().append("rect").classed(w.cn.cellRect,!0),ie}function g(q){var ie=q.selectAll("."+w.cn.cellText).data(e.repeat,function(se){return se.keyWithinBlock});return ie.enter().append("text").classed(w.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){f.event.stopPropagation()}),ie}function b(q){var ie=q.selectAll("."+w.cn.cellTextHolder).data(e.repeat,function(se){return se.keyWithinBlock});return ie.enter().append("g").classed(w.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision"),ie}function v(q){q.each(function(ie,se){var ae=ie.calcdata.cells.font,oe=ie.column.specIndex,be={size:D(ae.size,oe,se),color:D(ae.color,oe,se),family:D(ae.family,oe,se)};ie.rowNumber=ie.key,ie.align=D(ie.calcdata.cells.align,oe,se),ie.cellBorderWidth=D(ie.calcdata.cells.line.width,oe,se),ie.font=be})}function k(q){q.each(function(ie){a.font(f.select(this),ie.font)})}function S(q){q.attr("width",function(ie){return ie.column.columnWidth}).attr("stroke-width",function(ie){return ie.cellBorderWidth}).each(function(ie){var se=f.select(this);y.stroke(se,D(ie.calcdata.cells.line.color,ie.column.specIndex,ie.rowNumber)),y.fill(se,D(ie.calcdata.cells.fill.color,ie.column.specIndex,ie.rowNumber))})}function E(q,ie,se,ae){q.text(function(oe){var be=oe.column.specIndex,ce=oe.rowNumber,de=oe.value,ye=typeof de=="string",ge=ye&&de.match(/<br>/i),me=!ye||ge;oe.mayHaveMarkup=ye&&de.match(/[<&>]/);var Se=C(de);oe.latex=Se;var Le=Se?"":D(oe.calcdata.cells.prefix,be,ce)||"",Oe=Se?"":D(oe.calcdata.cells.suffix,be,ce)||"",we=Se?null:D(oe.calcdata.cells.format,be,ce)||null,Ce=Le+(we?T(we)(oe.value):oe.value)+Oe,Ke;oe.wrappingNeeded=!oe.wrapped&&!me&&!Se&&(Ke=F(Ce)),oe.cellHeightMayIncrease=ge||Se||oe.mayHaveMarkup||(Ke===void 0?F(Ce):Ke),oe.needsConvertToTspans=oe.mayHaveMarkup||oe.wrappingNeeded||oe.latex;var Ye;if(oe.wrappingNeeded){var Fe=w.wrapSplitCharacter===" "?Ce.replace(/<a href=/ig,"<a_href="):Ce,Re=Fe.split(w.wrapSplitCharacter),je=w.wrapSplitCharacter===" "?Re.map(function(xt){return xt.replace(/<a_href=/ig,"<a href=")}):Re;oe.fragments=je.map(function(xt){return{text:xt,width:null}}),oe.fragments.push({fragment:w.wrapSpacer,width:null}),Ye=je.join(w.lineBreaker)+w.lineBreaker+w.wrapSpacer}else delete oe.fragments,Ye=Ce;return Ye}).attr("dy",function(oe){return oe.needsConvertToTspans?0:"0.75em"}).each(function(oe){var be=this,ce=f.select(be),de=oe.wrappingNeeded?re:ue;oe.needsConvertToTspans?n.convertToTspans(ce,ae,de(se,be,ie,ae,oe)):f.select(be.parentNode).attr("transform",function(ye){return t(K(ye),w.cellPad)}).attr("text-anchor",function(ye){return{left:"start",center:"middle",right:"end"}[ye.align]})})}function C(q){return typeof q=="string"&&q.match(w.latexCheck)}function F(q){return q.indexOf(w.wrapSplitCharacter)!==-1}function I(q,ie,se){var ae=ie.gdColumnsOriginalOrder;ie.gdColumns.sort(function(oe,be){return se[ae.indexOf(oe)]-se[ae.indexOf(be)]}),ie.columnorder=se,q.emit("plotly_restyle")}function D(q,ie,se){if(Array.isArray(q)){var ae=q[Math.min(ie,q.length-1)];return Array.isArray(ae)?ae[Math.min(se,ae.length-1)]:ae}else return q}function R(q,ie,se){q.transition().ease(w.releaseTransitionEase).duration(w.releaseTransitionDuration).attr("transform",t(ie.x,se))}function O(q){return q.type==="cells"}function z(q){return q.type==="header"}function B(q){var ie=q.rowBlocks.length?q.rowBlocks[0].auxiliaryBlocks:[];return ie.reduce(function(se,ae){return se+H(ae,1/0)},0)}function G(q,ie,se){for(var ae=[],oe=0,be=0;be<q.length;be++){for(var ce=q[be],de=ce.rows,ye=0,ge=0;ge<de.length;ge++)ye+=de[ge].rowHeight;ce.allRowsHeight=ye;var me=oe+ye,Se=ie,Le=Se+se;Se<me&&Le>oe&&ae.push(be),oe+=ye}return ae}function Q(q,ie,se){var ae=m(ie)[0];if(ae!==void 0){var oe=ae.rowBlocks,be=ae.calcdata,ce=Y(oe,oe.length),de=ae.calcdata.groupHeight-B(ae),ye=be.scrollY=Math.max(0,Math.min(ce-de,be.scrollY)),ge=G(oe,ye,de);ge.length===1&&(ge[0]===oe.length-1?ge.unshift(ge[0]-1):ge.push(ge[0]+1)),ge[0]%2&&ge.reverse(),ie.each(function(me,Se){me.page=ge[Se],me.scrollY=ye}),ie.attr("transform",function(me){var Se=Y(me.rowBlocks,me.page)-me.scrollY;return t(0,Se)}),q&&(j(q,se,ie,ge,ae.prevPages,ae,0),j(q,se,ie,ge,ae.prevPages,ae,1),l(se,q))}}function X(q,ie,se,ae){return function(be){var ce=be.calcdata?be.calcdata:be,de=ie.filter(function(Se){return ce.key===Se.key}),ye=se||ce.scrollbarState.dragMultiplier,ge=ce.scrollY;ce.scrollY=ae===void 0?ce.scrollY+ye*f.event.dy:ae;var me=de.selectAll("."+w.cn.yColumn).selectAll("."+w.cn.columnBlock).filter(O);return Q(q,me,de),ce.scrollY===ge}}function j(q,ie,se,ae,oe,be,ce){var de=ae[ce]!==oe[ce];de&&(clearTimeout(be.currentRepaint[ce]),be.currentRepaint[ce]=setTimeout(function(){var ye=se.filter(function(ge,me){return me===ce&&ae[me]!==oe[me]});x(q,ie,ye,se),oe[ce]=ae[ce]}))}function re(q,ie,se,ae){return function(){var be=f.select(ie.parentNode);be.each(function(ce){var de=ce.fragments;be.selectAll("tspan.line").each(function(Ce,Ke){de[Ke].width=this.getComputedTextLength()});var ye=de[de.length-1].width,ge=de.slice(0,-1),me=[],Se,Le,Oe=0,we=ce.column.columnWidth-2*w.cellPad;for(ce.value="";ge.length;)Se=ge.shift(),Le=Se.width+ye,Oe+Le>we&&(ce.value+=me.join(w.wrapSpacer)+w.lineBreaker,me=[],Oe=0),me.push(Se.text),Oe+=Le;Oe&&(ce.value+=me.join(w.wrapSpacer)),ce.wrapped=!0}),be.selectAll("tspan.line").remove(),E(be.select("."+w.cn.cellText),se,q,ae),f.select(ie.parentNode.parentNode).call(te)}}function ue(q,ie,se,ae,oe){return function(){if(!oe.settledY){var ce=f.select(ie.parentNode),de=ne(oe),ye=oe.key-de.firstRowIndex,ge=de.rows[ye].rowHeight,me=oe.cellHeightMayIncrease?ie.parentNode.getBoundingClientRect().height+2*w.cellPad:ge,Se=Math.max(me,ge),Le=Se-de.rows[ye].rowHeight;Le&&(de.rows[ye].rowHeight=Se,q.selectAll("."+w.cn.columnCell).call(te),Q(null,q.filter(O),0),l(se,ae,!0)),ce.attr("transform",function(){var Oe=this,we=Oe.parentNode,Ce=we.getBoundingClientRect(),Ke=f.select(Oe.parentNode).select("."+w.cn.cellRect).node().getBoundingClientRect(),Ye=Oe.transform.baseVal.consolidate(),Fe=Ke.top-Ce.top+(Ye?Ye.matrix.f:w.cellPad);return t(K(oe,f.select(Oe.parentNode).select("."+w.cn.cellTextHolder).node().getBoundingClientRect().width),Fe)}),oe.settledY=!0}}}function K(q,ie){switch(q.align){case"left":return w.cellPad;case"right":return q.column.columnWidth-(ie||0)-w.cellPad;case"center":return(q.column.columnWidth-(ie||0))/2;default:return w.cellPad}}function te(q){q.attr("transform",function(ie){var se=ie.rowBlocks[0].auxiliaryBlocks.reduce(function(ce,de){return ce+H(de,1/0)},0),ae=ne(ie),oe=H(ae,ie.key),be=oe+se;return t(0,be)}).selectAll("."+w.cn.cellRect).attr("height",function(ie){return Z(ne(ie),ie.key).rowHeight})}function Y(q,ie){for(var se=0,ae=ie-1;ae>=0;ae--)se+=ee(q[ae]);return se}function H(q,ie){for(var se=0,ae=0;ae<q.rows.length&&q.rows[ae].rowIndex<ie;ae++)se+=q.rows[ae].rowHeight;return se}function ee(q){var ie=q.allRowsHeight;if(ie!==void 0)return ie;for(var se=0,ae=0;ae<q.rows.length;ae++)se+=q.rows[ae].rowHeight;return q.allRowsHeight=se,se}function ne(q){return q.rowBlocks[q.page]}function Z(q,ie){return q.rows[ie-q.firstRowIndex]}},{"../../components/color":367,"../../components/drawing":389,"../../lib":515,"../../lib/gup":512,"../../lib/svg_text_utils":541,"./constants":1078,"./data_preparation_helper":1079,"./data_split_helpers":1080,"@plotly/d3":58}],1084:[function(i,U,V){var w=i("../../plots/template_attributes").hovertemplateAttrs,f=i("../../plots/template_attributes").texttemplateAttrs,M=i("../../components/colorscale/attributes"),T=i("../../plots/domain").attributes,e=i("../pie/attributes"),a=i("../sunburst/attributes"),n=i("./constants"),r=i("../../lib/extend").extendFlat;U.exports={labels:a.labels,parents:a.parents,values:a.values,branchvalues:a.branchvalues,count:a.count,level:a.level,maxdepth:a.maxdepth,tiling:{packing:{valType:"enumerated",values:["squarify","binary","dice","slice","slice-dice","dice-slice"],dflt:"squarify",editType:"plot"},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot"},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot"},pad:{valType:"number",min:0,dflt:3,editType:"plot"},editType:"calc"},marker:r({pad:{t:{valType:"number",min:0,editType:"plot"},l:{valType:"number",min:0,editType:"plot"},r:{valType:"number",min:0,editType:"plot"},b:{valType:"number",min:0,editType:"plot"},editType:"calc"},colors:a.marker.colors,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style"},line:a.marker.line,editType:"calc"},M("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},edgeshape:{valType:"enumerated",values:[">","<","|","/","\\"],dflt:">",editType:"plot"},thickness:{valType:"number",min:12,editType:"plot"},textfont:r({},e.textfont,{}),editType:"calc"},text:e.text,textinfo:a.textinfo,texttemplate:f({editType:"plot"},{keys:n.eventDataKeys.concat(["label","value"])}),hovertext:e.hovertext,hoverinfo:a.hoverinfo,hovertemplate:w({},{keys:n.eventDataKeys}),textfont:e.textfont,insidetextfont:e.insidetextfont,outsidetextfont:r({},e.outsidetextfont,{}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"top left",editType:"plot"},sort:e.sort,root:a.root,domain:T({name:"treemap",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plots/domain":593,"../../plots/template_attributes":642,"../pie/attributes":910,"../sunburst/attributes":1058,"./constants":1087}],1085:[function(i,U,V){var w=i("../../plots/plots");V.name="treemap",V.plot=function(f,M,T,e){w.plotBasePlot(V.name,f,M,T,e)},V.clean=function(f,M,T,e){w.cleanBasePlot(V.name,f,M,T,e)}},{"../../plots/plots":628}],1086:[function(i,U,V){var w=i("../sunburst/calc");V.calc=function(f,M){return w.calc(f,M)},V.crossTraceCalc=function(f){return w._runCrossTraceCalc("treemap",f)}},{"../sunburst/calc":1060}],1087:[function(i,U,V){U.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"],gapWithPathbar:1}},{}],1088:[function(i,U,V){var w=i("../../lib"),f=i("./attributes"),M=i("../../components/color"),T=i("../../plots/domain").defaults,e=i("../bar/defaults").handleText,a=i("../bar/constants").TEXTPAD,n=i("../../components/colorscale"),r=n.hasColorscale,t=n.handleDefaults;U.exports=function(s,o,y,d){function p(E,C){return w.coerce(s,o,f,E,C)}var c=p("labels"),m=p("parents");if(!c||!c.length||!m||!m.length){o.visible=!1;return}var l=p("values");l&&l.length?p("branchvalues"):p("count"),p("level"),p("maxdepth");var x=p("tiling.packing");x==="squarify"&&p("tiling.squarifyratio"),p("tiling.flip"),p("tiling.pad");var u=p("text");p("texttemplate"),o.texttemplate||p("textinfo",Array.isArray(u)?"text+label":"label"),p("hovertext"),p("hovertemplate");var A=p("pathbar.visible"),_="auto";e(s,o,d,p,_,{hasPathbar:A,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),p("textposition");var g=o.textposition.indexOf("bottom")!==-1,b=p("marker.line.width");b&&p("marker.line.color",d.paper_bgcolor);var v=p("marker.colors"),k=o._hasColorscale=r(s,"marker","colors")||(s.marker||{}).coloraxis;k?t(s,o,d,p,{prefix:"marker.",cLetter:"c"}):p("marker.depthfade",!(v||[]).length);var S=o.textfont.size*2;p("marker.pad.t",g?S/4:S),p("marker.pad.l",S/4),p("marker.pad.r",S/4),p("marker.pad.b",g?S:S/4),o._hovered={marker:{line:{width:2,color:M.contrast(d.paper_bgcolor)}}},A&&(p("pathbar.thickness",o.pathbar.textfont.size+2*a),p("pathbar.side"),p("pathbar.edgeshape")),p("sort"),p("root.color"),T(o,d,p),o._length=null}},{"../../components/color":367,"../../components/colorscale":379,"../../lib":515,"../../plots/domain":593,"../bar/constants":659,"../bar/defaults":661,"./attributes":1084}],1089:[function(i,U,V){var w=i("@plotly/d3"),f=i("../sunburst/helpers"),M=i("../bar/uniform_text"),T=M.clearMinTextSize,e=i("../bar/style").resizeText,a=i("./plot_one");U.exports=function(r,t,h,s,o){var y=o.type,d=o.drawDescendants,p=r._fullLayout,c=p["_"+y+"layer"],m,l,x=!h;if(T(y,p),m=c.selectAll("g.trace."+y).data(t,function(A){return A[0].trace.uid}),m.enter().append("g").classed("trace",!0).classed(y,!0),m.order(),!p.uniformtext.mode&&f.hasTransition(h)){s&&(l=s());var u=w.transition().duration(h.duration).ease(h.easing).each("end",function(){l&&l()}).each("interrupt",function(){l&&l()});u.each(function(){c.selectAll("g.trace").each(function(A){a(r,A,this,h,d)})})}else m.each(function(A){a(r,A,this,h,d)}),p.uniformtext.mode&&e(r,c.selectAll(".trace"),y);x&&m.exit().remove()}},{"../bar/style":671,"../bar/uniform_text":673,"../sunburst/helpers":1064,"./plot_one":1098,"@plotly/d3":58}],1090:[function(i,U,V){var w=i("@plotly/d3"),f=i("../../lib"),M=i("../../components/drawing"),T=i("../../lib/svg_text_utils"),e=i("./partition"),a=i("./style").styleOne,n=i("./constants"),r=i("../sunburst/helpers"),t=i("../sunburst/fx"),h=!0;U.exports=function(o,y,d,p,c){var m=c.barDifY,l=c.width,x=c.height,u=c.viewX,A=c.viewY,_=c.pathSlice,g=c.toMoveInsideSlice,b=c.strTransform,v=c.hasTransition,k=c.handleSlicesExit,S=c.makeUpdateSliceInterpolator,E=c.makeUpdateTextInterpolator,C={},F=o._context.staticPlot,I=o._fullLayout,D=y[0],R=D.trace,O=D.hierarchy,z=l/R._entryDepth,B=r.listPath(d.data,"id"),G=e(O.copy(),[l,x],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();G=G.filter(function(X){var j=B.indexOf(X.data.id);return j===-1?!1:(X.x0=z*j,X.x1=z*(j+1),X.y0=m,X.y1=m+x,X.onPathbar=!0,!0)}),G.reverse(),p=p.data(G,r.getPtId),p.enter().append("g").classed("pathbar",!0),k(p,h,C,[l,x],_),p.order();var Q=p;v&&(Q=Q.transition().each("end",function(){var X=w.select(this);r.setSliceCursor(X,o,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})})),Q.each(function(X){X._x0=u(X.x0),X._x1=u(X.x1),X._y0=A(X.y0),X._y1=A(X.y1),X._hoverX=u(X.x1-Math.min(l,x)/2),X._hoverY=A(X.y1-x/2);var j=w.select(this),re=f.ensureSingle(j,"path","surface",function(Y){Y.style("pointer-events",F?"none":"all")});v?re.transition().attrTween("d",function(Y){var H=S(Y,h,C,[l,x]);return function(ee){return _(H(ee))}}):re.attr("d",_),j.call(t,d,o,y,{styleOne:a,eventDataKeys:n.eventDataKeys,transitionTime:n.CLICK_TRANSITION_TIME,transitionEasing:n.CLICK_TRANSITION_EASING}).call(r.setSliceCursor,o,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:o._transitioning}),re.call(a,X,R,{hovered:!1}),X._text=(r.getPtLabel(X)||"").split("<br>").join(" ")||"";var ue=f.ensureSingle(j,"g","slicetext"),K=f.ensureSingle(ue,"text","",function(Y){Y.attr("data-notex",1)}),te=f.ensureUniformFontSize(o,r.determineTextFont(R,X,I.font,{onPathbar:!0}));K.text(X._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(M.font,te).call(T.convertToTspans,o),X.textBB=M.bBox(K.node()),X.transform=g(X,{fontSize:te.size,onPathbar:!0}),X.transform.fontSize=te.size,v?K.transition().attrTween("transform",function(Y){var H=E(Y,h,C,[l,x]);return function(ee){return b(H(ee))}}):K.attr("transform",b(X))})}},{"../../components/drawing":389,"../../lib":515,"../../lib/svg_text_utils":541,"../sunburst/fx":1063,"../sunburst/helpers":1064,"./constants":1087,"./partition":1096,"./style":1099,"@plotly/d3":58}],1091:[function(i,U,V){var w=i("@plotly/d3"),f=i("../../lib"),M=i("../../components/drawing"),T=i("../../lib/svg_text_utils"),e=i("./partition"),a=i("./style").styleOne,n=i("./constants"),r=i("../sunburst/helpers"),t=i("../sunburst/fx"),h=i("../sunburst/plot").formatSliceLabel,s=!1;U.exports=function(y,d,p,c,m){var l=m.width,x=m.height,u=m.viewX,A=m.viewY,_=m.pathSlice,g=m.toMoveInsideSlice,b=m.strTransform,v=m.hasTransition,k=m.handleSlicesExit,S=m.makeUpdateSliceInterpolator,E=m.makeUpdateTextInterpolator,C=m.prevEntry,F={},I=y._context.staticPlot,D=y._fullLayout,R=d[0],O=R.trace,z=O.textposition.indexOf("left")!==-1,B=O.textposition.indexOf("right")!==-1,G=O.textposition.indexOf("bottom")!==-1,Q=!G&&!O.marker.pad.t||G&&!O.marker.pad.b,X=e(p,[l,x],{packing:O.tiling.packing,squarifyratio:O.tiling.squarifyratio,flipX:O.tiling.flip.indexOf("x")>-1,flipY:O.tiling.flip.indexOf("y")>-1,pad:{inner:O.tiling.pad,top:O.marker.pad.t,left:O.marker.pad.l,right:O.marker.pad.r,bottom:O.marker.pad.b}}),j=X.descendants(),re=1/0,ue=-1/0;j.forEach(function(ee){var ne=ee.depth;ne>=O._maxDepth?(ee.x0=ee.x1=(ee.x0+ee.x1)/2,ee.y0=ee.y1=(ee.y0+ee.y1)/2):(re=Math.min(re,ne),ue=Math.max(ue,ne))}),c=c.data(j,r.getPtId),O._maxVisibleLayers=isFinite(ue)?ue-re+1:0,c.enter().append("g").classed("slice",!0),k(c,s,F,[l,x],_),c.order();var K=null;if(v&&C){var te=r.getPtId(C);c.each(function(ee){K===null&&r.getPtId(ee)===te&&(K={x0:ee.x0,x1:ee.x1,y0:ee.y0,y1:ee.y1})})}var Y=function(){return K||{x0:0,x1:l,y0:0,y1:x}},H=c;return v&&(H=H.transition().each("end",function(){var ee=w.select(this);r.setSliceCursor(ee,y,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),H.each(function(ee){var ne=r.isHeader(ee,O);ee._x0=u(ee.x0),ee._x1=u(ee.x1),ee._y0=A(ee.y0),ee._y1=A(ee.y1),ee._hoverX=u(ee.x1-O.marker.pad.r),ee._hoverY=A(G?ee.y1-O.marker.pad.b/2:ee.y0+O.marker.pad.t/2);var Z=w.select(this),q=f.ensureSingle(Z,"path","surface",function(oe){oe.style("pointer-events",I?"none":"all")});v?q.transition().attrTween("d",function(oe){var be=S(oe,s,Y(),[l,x]);return function(ce){return _(be(ce))}}):q.attr("d",_),Z.call(t,p,y,d,{styleOne:a,eventDataKeys:n.eventDataKeys,transitionTime:n.CLICK_TRANSITION_TIME,transitionEasing:n.CLICK_TRANSITION_EASING}).call(r.setSliceCursor,y,{isTransitioning:y._transitioning}),q.call(a,ee,O,{hovered:!1}),ee.x0===ee.x1||ee.y0===ee.y1?ee._text="":ne?ee._text=Q?"":r.getPtLabel(ee)||"":ee._text=h(ee,p,O,d,D)||"";var ie=f.ensureSingle(Z,"g","slicetext"),se=f.ensureSingle(ie,"text","",function(oe){oe.attr("data-notex",1)}),ae=f.ensureUniformFontSize(y,r.determineTextFont(O,ee,D.font));se.text(ee._text||" ").classed("slicetext",!0).attr("text-anchor",B?"end":z||ne?"start":"middle").call(M.font,ae).call(T.convertToTspans,y),ee.textBB=M.bBox(se.node()),ee.transform=g(ee,{fontSize:ae.size,isHeader:ne}),ee.transform.fontSize=ae.size,v?se.transition().attrTween("transform",function(oe){var be=E(oe,s,Y(),[l,x]);return function(ce){return b(be(ce))}}):se.attr("transform",b(ee))}),K}},{"../../components/drawing":389,"../../lib":515,"../../lib/svg_text_utils":541,"../sunburst/fx":1063,"../sunburst/helpers":1064,"../sunburst/plot":1068,"./constants":1087,"./partition":1096,"./style":1099,"@plotly/d3":58}],1092:[function(i,U,V){U.exports=function w(f,M,T){var e;T.swapXY&&(e=f.x0,f.x0=f.y0,f.y0=e,e=f.x1,f.x1=f.y1,f.y1=e),T.flipX&&(e=f.x0,f.x0=M[0]-f.x1,f.x1=M[0]-e),T.flipY&&(e=f.y0,f.y0=M[1]-f.y1,f.y1=M[1]-e);var a=f.children;if(a)for(var n=0;n<a.length;n++)w(a[n],M,T)}},{}],1093:[function(i,U,V){U.exports={moduleType:"trace",name:"treemap",basePlotModule:i("./base_plot"),categories:[],animatable:!0,attributes:i("./attributes"),layoutAttributes:i("./layout_attributes"),supplyDefaults:i("./defaults"),supplyLayoutDefaults:i("./layout_defaults"),calc:i("./calc").calc,crossTraceCalc:i("./calc").crossTraceCalc,plot:i("./plot"),style:i("./style").style,colorbar:i("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":954,"./attributes":1084,"./base_plot":1085,"./calc":1086,"./defaults":1088,"./layout_attributes":1094,"./layout_defaults":1095,"./plot":1097,"./style":1099}],1094:[function(i,U,V){U.exports={treemapcolorway:{valType:"colorlist",editType:"calc"},extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1095:[function(i,U,V){var w=i("../../lib"),f=i("./layout_attributes");U.exports=function(T,e){function a(n,r){return w.coerce(T,e,f,n,r)}a("treemapcolorway",e.colorway),a("extendtreemapcolors")}},{"../../lib":515,"./layout_attributes":1094}],1096:[function(i,U,V){var w=i("d3-hierarchy"),f=i("./flip_tree");U.exports=function(e,a,n){var r=n.flipX,t=n.flipY,h=n.packing==="dice-slice",s=n.pad[t?"bottom":"top"],o=n.pad[r?"right":"left"],y=n.pad[r?"left":"right"],d=n.pad[t?"top":"bottom"],p;h&&(p=o,o=s,s=p,p=y,y=d,d=p);var c=w.treemap().tile(M(n.packing,n.squarifyratio)).paddingInner(n.pad.inner).paddingLeft(o).paddingRight(y).paddingTop(s).paddingBottom(d).size(h?[a[1],a[0]]:a)(e);return(h||r||t)&&f(c,a,{swapXY:h,flipX:r,flipY:t}),c};function M(T,e){switch(T){case"squarify":return w.treemapSquarify.ratio(e);case"binary":return w.treemapBinary;case"dice":return w.treemapDice;case"slice":return w.treemapSlice;default:return w.treemapSliceDice}}},{"./flip_tree":1092,"d3-hierarchy":115}],1097:[function(i,U,V){var w=i("./draw"),f=i("./draw_descendants");U.exports=function(T,e,a,n){return w(T,e,a,n,{type:"treemap",drawDescendants:f})}},{"./draw":1089,"./draw_descendants":1091}],1098:[function(i,U,V){var w=i("@plotly/d3"),f=i("d3-interpolate").interpolate,M=i("../sunburst/helpers"),T=i("../../lib"),e=i("../bar/constants").TEXTPAD,a=i("../bar/plot"),n=a.toMoveInsideBar,r=i("../bar/uniform_text"),t=r.recordMinTextSize,h=i("./constants"),s=i("./draw_ancestors");function o(y){return M.isHierarchyRoot(y)?"":M.getPtId(y)}U.exports=function(d,p,c,m,l){var x=d._fullLayout,u=p[0],A=u.trace,_=A.type,g=_==="icicle",b=u.hierarchy,v=M.findEntryWithLevel(b,A.level),k=w.select(c),S=k.selectAll("g.pathbar"),E=k.selectAll("g.slice");if(!v){S.remove(),E.remove();return}var C=M.isHierarchyRoot(v),F=!x.uniformtext.mode&&M.hasTransition(m),I=M.getMaxDepth(A),D=function(je){return je.data.depth-v.data.depth<I},R=x._size,O=A.domain,z=R.w*(O.x[1]-O.x[0]),B=R.h*(O.y[1]-O.y[0]),G=z,Q=A.pathbar.thickness,X=A.marker.line.width+h.gapWithPathbar,j=A.pathbar.visible?A.pathbar.side.indexOf("bottom")>-1?B+X:-(Q+X):0,re={x0:G,x1:G,y0:j,y1:j+Q},ue=function(je,xt,Nt){var tr=A.tiling.pad,Ht=function(Lt){return Lt-tr<=xt.x0},Pt=function(Lt){return Lt+tr>=xt.x1},$t=function(Lt){return Lt-tr<=xt.y0},Ut=function(Lt){return Lt+tr>=xt.y1};return je.x0===xt.x0&&je.x1===xt.x1&&je.y0===xt.y0&&je.y1===xt.y1?{x0:je.x0,x1:je.x1,y0:je.y0,y1:je.y1}:{x0:Ht(je.x0-tr)?0:Pt(je.x0-tr)?Nt[0]:je.x0,x1:Ht(je.x1+tr)?0:Pt(je.x1+tr)?Nt[0]:je.x1,y0:$t(je.y0-tr)?0:Ut(je.y0-tr)?Nt[1]:je.y0,y1:$t(je.y1+tr)?0:Ut(je.y1+tr)?Nt[1]:je.y1}},K=null,te={},Y={},H=null,ee=function(je,xt){return xt?te[o(je)]:Y[o(je)]},ne=function(je,xt,Nt,tr){if(xt)return te[o(b)]||re;var Ht=Y[A.level]||Nt;return D(je)?ue(je,Ht,tr):{}};u.hasMultipleRoots&&C&&I++,A._maxDepth=I,A._backgroundColor=x.paper_bgcolor,A._entryDepth=v.data.depth,A._atRootLevel=C;var Z=-z/2+R.l+R.w*(O.x[1]+O.x[0])/2,q=-B/2+R.t+R.h*(1-(O.y[1]+O.y[0])/2),ie=function(je){return Z+je},se=function(je){return q+je},ae=se(0),oe=ie(0),be=function(je){return oe+je},ce=function(je){return ae+je};function de(je,xt){return je+","+xt}var ye=be(0),ge=function(je){je.x=Math.max(ye,je.x)},me=A.pathbar.edgeshape,Se=function(je){var xt=be(Math.max(Math.min(je.x0,je.x0),0)),Nt=be(Math.min(Math.max(je.x1,je.x1),G)),tr=ce(je.y0),Ht=ce(je.y1),Pt=Q/2,$t={},Ut={};$t.x=xt,Ut.x=Nt,$t.y=Ut.y=(tr+Ht)/2;var Lt={x:xt,y:tr},We={x:Nt,y:tr},ot={x:Nt,y:Ht},Ge={x:xt,y:Ht};return me===">"?(Lt.x-=Pt,We.x-=Pt,ot.x-=Pt,Ge.x-=Pt):me==="/"?(ot.x-=Pt,Ge.x-=Pt,$t.x-=Pt/2,Ut.x-=Pt/2):me==="\\"?(Lt.x-=Pt,We.x-=Pt,$t.x-=Pt/2,Ut.x-=Pt/2):me==="<"&&($t.x-=Pt,Ut.x-=Pt),ge(Lt),ge(Ge),ge($t),ge(We),ge(ot),ge(Ut),"M"+de(Lt.x,Lt.y)+"L"+de(We.x,We.y)+"L"+de(Ut.x,Ut.y)+"L"+de(ot.x,ot.y)+"L"+de(Ge.x,Ge.y)+"L"+de($t.x,$t.y)+"Z"},Le=function(je){var xt=ie(je.x0),Nt=ie(je.x1),tr=se(je.y0),Ht=se(je.y1),Pt=Nt-xt,$t=Ht-tr;if(!Pt||!$t)return"";var Ut=0,Lt=Pt>2*Ut&&$t>2*Ut?Ut:0,We=function(ot,Ge){return Lt?"a"+de(Lt,Lt)+" 0 0 1 "+de(ot,Ge):""};return"M"+de(xt,tr+Lt)+We(Lt,-Lt)+"L"+de(Nt-Lt,tr)+We(Lt,Lt)+"L"+de(Nt,Ht-Lt)+We(-Lt,Lt)+"L"+de(xt+Lt,Ht)+We(-Lt,-Lt)+"Z"},Oe=function(je,xt){var Nt=je.x0,tr=je.x1,Ht=je.y0,Pt=je.y1,$t=je.textBB,Ut=function(Ct){return A.textposition.indexOf(Ct)!==-1},Lt=Ut("bottom"),We=Ut("top")||xt.isHeader&&!Lt,ot=We?"start":Lt?"end":"middle",Ge=Ut("right"),Me=Ut("left")||xt.onPathbar,Ve=Me?-1:Ge?1:0,Qe=A[g?"tiling":"marker"].pad;if(xt.isHeader){if(Nt+=(g?Qe:Qe.l)-e,tr-=(g?Qe:Qe.r)-e,Nt>=tr){var tt=(Nt+tr)/2;Nt=tt,tr=tt}var St;Lt?(St=Pt-(g?Qe:Qe.b),Ht<St&&St<Pt&&(Ht=St)):(St=Ht+(g?Qe:Qe.t),Ht<St&&St<Pt&&(Pt=St))}var wt=n(Nt,tr,Ht,Pt,$t,{isHorizontal:!1,constrained:!0,angle:0,anchor:ot,leftToRight:Ve});return wt.fontSize=xt.fontSize,wt.targetX=ie(wt.targetX),wt.targetY=se(wt.targetY),isNaN(wt.targetX)||isNaN(wt.targetY)?{}:(Nt!==tr&&Ht!==Pt&&t(A.type,wt,x),{scale:wt.scale,rotate:wt.rotate,textX:wt.textX,textY:wt.textY,anchorX:wt.anchorX,anchorY:wt.anchorY,targetX:wt.targetX,targetY:wt.targetY})},we=function(je,xt){for(var Nt,tr=0,Ht=je;!Nt&&tr<I;)tr++,Ht=Ht.parent,Ht?Nt=ee(Ht,xt):tr=I;return Nt||{}},Ce=function(je,xt,Nt,tr){var Ht=ee(je,xt),Pt;if(xt)Pt=re;else{var $t=ee(v,xt);$t?Pt=ue(je,$t,tr):Pt={}}return f(Ht,Pt)},Ke=function(je,xt,Nt,tr,Ht){var Pt=ee(je,xt),$t;if(Pt)$t=Pt;else if(xt)$t=re;else if(K)if(je.parent){var Ut=H||Nt;Ut&&!xt?$t=ue(je,Ut,tr):($t={},T.extendFlat($t,we(je,xt)))}else $t=T.extendFlat({},je),g&&(Ht.orientation==="h"?Ht.flipX?$t.x0=je.x1:$t.x1=0:Ht.flipY?$t.y0=je.y1:$t.y1=0);else $t={};return f($t,{x0:je.x0,x1:je.x1,y0:je.y0,y1:je.y1})},Ye=function(je,xt,Nt,tr){var Ht=ee(je,xt),Pt={},$t=ne(je,xt,Nt,tr);T.extendFlat(Pt,{transform:Oe({x0:$t.x0,x1:$t.x1,y0:$t.y0,y1:$t.y1,textBB:je.textBB,_text:je._text},{isHeader:M.isHeader(je,A)})}),Ht?Pt=Ht:je.parent&&T.extendFlat(Pt,we(je,xt));var Ut=je.transform;return je.x0!==je.x1&&je.y0!==je.y1&&t(A.type,Ut,x),f(Pt,{transform:{scale:Ut.scale,rotate:Ut.rotate,textX:Ut.textX,textY:Ut.textY,anchorX:Ut.anchorX,anchorY:Ut.anchorY,targetX:Ut.targetX,targetY:Ut.targetY}})},Fe=function(je,xt,Nt,tr,Ht){var Pt=tr[0],$t=tr[1];F?je.exit().transition().each(function(){var Ut=w.select(this),Lt=Ut.select("path.surface");Lt.transition().attrTween("d",function(ot){var Ge=Ce(ot,xt,Nt,[Pt,$t]);return function(Me){return Ht(Ge(Me))}});var We=Ut.select("g.slicetext");We.attr("opacity",0)}).remove():je.exit().remove()},Re=function(je){var xt=je.transform;return je.x0!==je.x1&&je.y0!==je.y1&&t(A.type,xt,x),T.getTextTransform({textX:xt.textX,textY:xt.textY,anchorX:xt.anchorX,anchorY:xt.anchorY,targetX:xt.targetX,targetY:xt.targetY,scale:xt.scale,rotate:xt.rotate})};F&&(S.each(function(je){te[o(je)]={x0:je.x0,x1:je.x1,y0:je.y0,y1:je.y1},je.transform&&(te[o(je)].transform={textX:je.transform.textX,textY:je.transform.textY,anchorX:je.transform.anchorX,anchorY:je.transform.anchorY,targetX:je.transform.targetX,targetY:je.transform.targetY,scale:je.transform.scale,rotate:je.transform.rotate})}),E.each(function(je){Y[o(je)]={x0:je.x0,x1:je.x1,y0:je.y0,y1:je.y1},je.transform&&(Y[o(je)].transform={textX:je.transform.textX,textY:je.transform.textY,anchorX:je.transform.anchorX,anchorY:je.transform.anchorY,targetX:je.transform.targetX,targetY:je.transform.targetY,scale:je.transform.scale,rotate:je.transform.rotate}),!K&&M.isEntry(je)&&(K=je)})),H=l(d,p,v,E,{width:z,height:B,viewX:ie,viewY:se,pathSlice:Le,toMoveInsideSlice:Oe,prevEntry:K,makeUpdateSliceInterpolator:Ke,makeUpdateTextInterpolator:Ye,handleSlicesExit:Fe,hasTransition:F,strTransform:Re}),A.pathbar.visible?s(d,p,v,S,{barDifY:j,width:G,height:Q,viewX:be,viewY:ce,pathSlice:Se,toMoveInsideSlice:Oe,makeUpdateSliceInterpolator:Ke,makeUpdateTextInterpolator:Ye,handleSlicesExit:Fe,hasTransition:F,strTransform:Re}):S.remove()}},{"../../lib":515,"../bar/constants":659,"../bar/plot":668,"../bar/uniform_text":673,"../sunburst/helpers":1064,"./constants":1087,"./draw_ancestors":1090,"@plotly/d3":58,"d3-interpolate":116}],1099:[function(i,U,V){var w=i("@plotly/d3"),f=i("../../components/color"),M=i("../../lib"),T=i("../sunburst/helpers"),e=i("../bar/uniform_text").resizeText;function a(r){var t=r._fullLayout._treemaplayer.selectAll(".trace");e(r,t,"treemap"),t.each(function(h){var s=w.select(this),o=h[0],y=o.trace;s.style("opacity",y.opacity),s.selectAll("path.surface").each(function(d){w.select(this).call(n,d,y,{hovered:!1})})})}function n(r,t,h,s){var o=(s||{}).hovered,y=t.data.data,d=y.i,p,c,m=y.color,l=T.isHierarchyRoot(t),x=1;if(o)p=h._hovered.marker.line.color,c=h._hovered.marker.line.width;else if(l&&m===h.root.color)x=100,p="rgba(0,0,0,0)",c=0;else if(p=M.castOption(h,d,"marker.line.color")||f.defaultLine,c=M.castOption(h,d,"marker.line.width")||0,!h._hasColorscale&&!t.onPathbar){var u=h.marker.depthfade;if(u){var A=f.combine(f.addOpacity(h._backgroundColor,.75),m),_;if(u===!0){var g=T.getMaxDepth(h);isFinite(g)?T.isLeaf(t)?_=0:_=h._maxVisibleLayers-(t.data.depth-h._entryDepth):_=t.data.height+1}else _=t.data.depth-h._entryDepth,h._atRootLevel||_++;if(_>0)for(var b=0;b<_;b++){var v=.5*b/_;m=f.combine(f.addOpacity(A,v),m)}}}r.style("stroke-width",c).call(f.fill,m).call(f.stroke,p).style("opacity",x)}U.exports={style:a,styleOne:n}},{"../../components/color":367,"../../lib":515,"../bar/uniform_text":673,"../sunburst/helpers":1064,"@plotly/d3":58}],1100:[function(i,U,V){var w=i("../box/attributes"),f=i("../../lib/extend").extendFlat,M=i("../../plots/cartesian/axis_format_attributes").axisHoverFormat;U.exports={y:w.y,x:w.x,x0:w.x0,y0:w.y0,xhoverformat:M("x"),yhoverformat:M("y"),name:f({},w.name,{}),orientation:f({},w.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:w.fillcolor,points:f({},w.boxpoints,{}),jitter:f({},w.jitter,{}),pointpos:f({},w.pointpos,{}),width:f({},w.width,{}),marker:w.marker,text:w.text,hovertext:w.hovertext,hovertemplate:w.hovertemplate,quartilemethod:w.quartilemethod,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:w.offsetgroup,alignmentgroup:w.alignmentgroup,selected:w.selected,unselected:w.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"}}},{"../../lib/extend":505,"../../plots/cartesian/axis_format_attributes":569,"../box/attributes":682}],1101:[function(i,U,V){var w=i("../../lib"),f=i("../../plots/cartesian/axes"),M=i("../box/calc"),T=i("./helpers"),e=i("../../constants/numerical").BADNUM;U.exports=function(h,s){var o=M(h,s);if(o[0].t.empty)return o;for(var y=h._fullLayout,d=f.getFromId(h,s[s.orientation==="h"?"xaxis":"yaxis"]),p=1/0,c=-1/0,m=0,l=0,x=0;x<o.length;x++){var u=o[x],A=u.pts.map(T.extractVal),_=u.bandwidth=n(s,u,A),g=u.span=r(s,u,d,_);if(u.min===u.max&&_===0)g=u.span=[u.min,u.max],u.density=[{v:1,t:g[0]}],u.bandwidth=_,m=Math.max(m,1);else{var b=g[1]-g[0],v=Math.ceil(b/(_/3)),k=b/v;if(!isFinite(k)||!isFinite(v))return w.error("Something went wrong with computing the violin span"),o[0].t.empty=!0,o;var S=T.makeKDE(u,s,A);u.density=new Array(v);for(var E=0,C=g[0];C<g[1]+k/2;E++,C+=k){var F=S(C);u.density[E]={v:F,t:C},m=Math.max(m,F)}}l=Math.max(l,A.length),p=Math.min(p,g[0]),c=Math.max(c,g[1])}var I=f.findExtremes(d,[p,c],{padded:!0});if(s._extremes[d._id]=I,s.width)o[0].t.maxKDE=m;else{var D=y._violinScaleGroupStats,R=s.scalegroup,O=D[R];O?(O.maxKDE=Math.max(O.maxKDE,m),O.maxCount=Math.max(O.maxCount,l)):D[R]={maxKDE:m,maxCount:l}}return o[0].t.labels.kde=w._(h,"kde:"),o};function a(t,h,s){var o=Math.min(h,s/1.349);return 1.059*o*Math.pow(t,-.2)}function n(t,h,s){var o=h.max-h.min;if(!o)return t.bandwidth?t.bandwidth:0;if(t.bandwidth)return Math.max(t.bandwidth,o/1e4);var y=s.length,d=w.stdev(s,y-1,h.mean);return Math.max(a(y,d,h.q3-h.q1),o/100)}function r(t,h,s,o){var y=t.spanmode,d=t.span||[],p=[h.min,h.max],c=[h.min-2*o,h.max+2*o],m;function l(u){var A=d[u],_=s.type==="multicategory"?s.r2c(A):s.d2c(A,0,t[h.valLetter+"calendar"]);return _===e?c[u]:_}y==="soft"?m=c:y==="hard"?m=p:m=[l(0),l(1)];var x={type:"linear",range:m};return f.setConvert(x),x.cleanRange(),m}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/axes":566,"../box/calc":683,"./helpers":1104}],1102:[function(i,U,V){var w=i("../box/cross_trace_calc").setPositionOffset,f=["v","h"];U.exports=function(T,e){for(var a=T.calcdata,n=e.xaxis,r=e.yaxis,t=0;t<f.length;t++){for(var h=f[t],s=h==="h"?r:n,o=[],y=0;y<a.length;y++){var d=a[y],p=d[0].t,c=d[0].trace;c.visible===!0&&c.type==="violin"&&!p.empty&&c.orientation===h&&c.xaxis===n._id&&c.yaxis===r._id&&o.push(y)}w("violin",T,o,s)}}},{"../box/cross_trace_calc":684}],1103:[function(i,U,V){var w=i("../../lib"),f=i("../../components/color"),M=i("../box/defaults"),T=i("./attributes");U.exports=function(a,n,r,t){function h(k,S){return w.coerce(a,n,T,k,S)}function s(k,S){return w.coerce2(a,n,T,k,S)}if(M.handleSampleDefaults(a,n,h,t),n.visible!==!1){h("bandwidth"),h("side");var o=h("width");o||(h("scalegroup",n.name),h("scalemode"));var y=h("span"),d;Array.isArray(y)&&(d="manual"),h("spanmode",d);var p=h("line.color",(a.marker||{}).color||r),c=h("line.width"),m=h("fillcolor",f.addOpacity(n.line.color,.5));M.handlePointsDefaults(a,n,h,{prefix:""});var l=s("box.width"),x=s("box.fillcolor",m),u=s("box.line.color",p),A=s("box.line.width",c),_=h("box.visible",Boolean(l||x||u||A));_||(n.box={visible:!1});var g=s("meanline.color",p),b=s("meanline.width",c),v=h("meanline.visible",Boolean(g||b));v||(n.meanline={visible:!1}),h("quartilemethod")}}},{"../../components/color":367,"../../lib":515,"../box/defaults":685,"./attributes":1100}],1104:[function(i,U,V){var w=i("../../lib"),f={gaussian:function(M){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*M*M)}};V.makeKDE=function(M,T,e){var a=e.length,n=f.gaussian,r=M.bandwidth,t=1/(a*r);return function(h){for(var s=0,o=0;o<a;o++)s+=n((h-e[o])/r);return t*s}},V.getPositionOnKdePath=function(M,T,e){var a,n;T.orientation==="h"?(a="y",n="x"):(a="x",n="y");var r=w.findPointOnPath(M.path,e,n,{pathLength:M.pathLength}),t=M.posCenterPx,h=r[a],s=T.side==="both"?2*t-h:t;return[h,s]},V.getKdeValue=function(M,T,e){var a=M.pts.map(V.extractVal),n=V.makeKDE(M,T,a);return n(e)/M.posDensityScale},V.extractVal=function(M){return M.v}},{"../../lib":515}],1105:[function(i,U,V){var w=i("../../components/color"),f=i("../../lib"),M=i("../../plots/cartesian/axes"),T=i("../box/hover"),e=i("./helpers");U.exports=function(n,r,t,h,s){s||(s={});var o=s.hoverLayer,y=n.cd,d=y[0].trace,p=d.hoveron,c=p.indexOf("violins")!==-1,m=p.indexOf("kde")!==-1,l=[],x,u;if(c||m){var A=T.hoverOnBoxes(n,r,t,h);if(m&&A.length>0){var _=n.xa,g=n.ya,b,v,k,S,E;d.orientation==="h"?(E=r,b="y",k=g,v="x",S=_):(E=t,b="x",k=_,v="y",S=g);var C=y[n.index];if(E>=C.span[0]&&E<=C.span[1]){var F=f.extendFlat({},n),I=S.c2p(E,!0),D=e.getKdeValue(C,d,E),R=e.getPositionOnKdePath(C,d,I),O=k._offset,z=k._length;F[b+"0"]=R[0],F[b+"1"]=R[1],F[v+"0"]=F[v+"1"]=I,F[v+"Label"]=v+": "+M.hoverLabelText(S,E,d[v+"hoverformat"])+", "+y[0].t.labels.kde+" "+D.toFixed(3);for(var B=0,G=0;G<A.length;G++)if(A[G].attr==="med"){B=G;break}F.spikeDistance=A[B].spikeDistance;var Q=b+"Spike";F[Q]=A[B][Q],A[B].spikeDistance=void 0,A[B][Q]=void 0,F.hovertemplate=!1,l.push(F),u={},u[b+"1"]=f.constrain(O+R[0],O,O+z),u[b+"2"]=f.constrain(O+R[1],O,O+z),u[v+"1"]=u[v+"2"]=S._offset+I}}c&&(l=l.concat(A))}p.indexOf("points")!==-1&&(x=T.hoverOnPoints(n,r,t));var X=o.selectAll(".violinline-"+d.uid).data(u?[0]:[]);return X.enter().append("line").classed("violinline-"+d.uid,!0).attr("stroke-width",1.5),X.exit().remove(),X.attr(u).call(w.stroke,n.color),h==="closest"?x?[x]:l:(x&&l.push(x),l)}},{"../../components/color":367,"../../lib":515,"../../plots/cartesian/axes":566,"../box/hover":687,"./helpers":1104}],1106:[function(i,U,V){U.exports={attributes:i("./attributes"),layoutAttributes:i("./layout_attributes"),supplyDefaults:i("./defaults"),crossTraceDefaults:i("../box/defaults").crossTraceDefaults,supplyLayoutDefaults:i("./layout_defaults"),calc:i("./calc"),crossTraceCalc:i("./cross_trace_calc"),plot:i("./plot"),style:i("./style"),styleOnSelect:i("../scatter/style").styleOnSelect,hoverPoints:i("./hover"),selectPoints:i("../box/select"),moduleType:"trace",name:"violin",basePlotModule:i("../../plots/cartesian"),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","violinLayout","zoomScale"],meta:{}}},{"../../plots/cartesian":578,"../box/defaults":685,"../box/select":692,"../scatter/style":960,"./attributes":1100,"./calc":1101,"./cross_trace_calc":1102,"./defaults":1103,"./hover":1105,"./layout_attributes":1107,"./layout_defaults":1108,"./plot":1109,"./style":1110}],1107:[function(i,U,V){var w=i("../box/layout_attributes"),f=i("../../lib").extendFlat;U.exports={violinmode:f({},w.boxmode,{}),violingap:f({},w.boxgap,{}),violingroupgap:f({},w.boxgroupgap,{})}},{"../../lib":515,"../box/layout_attributes":689}],1108:[function(i,U,V){var w=i("../../lib"),f=i("./layout_attributes"),M=i("../box/layout_defaults");U.exports=function(e,a,n){function r(t,h){return w.coerce(e,a,f,t,h)}M._supply(e,a,n,r,"violin")}},{"../../lib":515,"../box/layout_defaults":690,"./layout_attributes":1107}],1109:[function(i,U,V){var w=i("@plotly/d3"),f=i("../../lib"),M=i("../../components/drawing"),T=i("../box/plot"),e=i("../scatter/line_points"),a=i("./helpers");U.exports=function(r,t,h,s){var o=r._fullLayout,y=t.xaxis,d=t.yaxis;function p(c,m){var l=e(c,{xaxis:y,yaxis:d,trace:m,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return M.smoothopen(l[0],1)}f.makeTraceGroups(s,h,"trace violins").each(function(c){var m=w.select(this),l=c[0],x=l.t,u=l.trace;if(u.visible!==!0||x.empty){m.remove();return}var A=x.bPos,_=x.bdPos,g=t[x.valLetter+"axis"],b=t[x.posLetter+"axis"],v=u.side==="both",k=v||u.side==="positive",S=v||u.side==="negative",E=m.selectAll("path.violin").data(f.identity);E.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","violin"),E.exit().remove(),E.each(function(B){var G=w.select(this),Q=B.density,X=Q.length,j=b.c2l(B.pos+A,!0),re=b.l2p(j),ue;if(u.width)ue=x.maxKDE/_;else{var K=o._violinScaleGroupStats[u.scalegroup];ue=u.scalemode==="count"?K.maxKDE/_*(K.maxCount/B.pts.length):K.maxKDE/_}var te,Y,H,ee,ne,Z,q;if(k){for(Z=new Array(X),ee=0;ee<X;ee++)q=Z[ee]={},q[x.posLetter]=j+Q[ee].v/ue,q[x.valLetter]=g.c2l(Q[ee].t,!0);te=p(Z,u)}if(S){for(Z=new Array(X),ne=0,ee=X-1;ne<X;ne++,ee--)q=Z[ne]={},q[x.posLetter]=j-Q[ee].v/ue,q[x.valLetter]=g.c2l(Q[ee].t,!0);Y=p(Z,u)}if(v)H=te+"L"+Y.substr(1)+"Z";else{var ie=[re,g.c2p(Q[0].t)],se=[re,g.c2p(Q[X-1].t)];u.orientation==="h"&&(ie.reverse(),se.reverse()),k?H="M"+ie+"L"+te.substr(1)+"L"+se:H="M"+se+"L"+Y.substr(1)+"L"+ie}G.attr("d",H),B.posCenterPx=re,B.posDensityScale=ue*_,B.path=G.node(),B.pathLength=B.path.getTotalLength()/(v?2:1)});var C=u.box,F=C.width,I=(C.line||{}).width,D,R;v?(D=_*F,R=0):k?(D=[0,_*F/2],R=I*{x:1,y:-1}[x.posLetter]):(D=[_*F/2,0],R=I*{x:-1,y:1}[x.posLetter]),T.plotBoxAndWhiskers(m,{pos:b,val:g},u,{bPos:A,bdPos:D,bPosPxOffset:R}),T.plotBoxMean(m,{pos:b,val:g},u,{bPos:A,bdPos:D,bPosPxOffset:R});var O;!u.box.visible&&u.meanline.visible&&(O=f.identity);var z=m.selectAll("path.meanline").data(O||[]);z.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect","non-scaling-stroke"),z.exit().remove(),z.each(function(B){var G=g.c2p(B.mean,!0),Q=a.getPositionOnKdePath(B,u,G);w.select(this).attr("d",u.orientation==="h"?"M"+G+","+Q[0]+"V"+Q[1]:"M"+Q[0]+","+G+"H"+Q[1])}),T.plotPoints(m,{x:y,y:d},u,x)})}},{"../../components/drawing":389,"../../lib":515,"../box/plot":691,"../scatter/line_points":950,"./helpers":1104,"@plotly/d3":58}],1110:[function(i,U,V){var w=i("@plotly/d3"),f=i("../../components/color"),M=i("../scatter/style").stylePoints;U.exports=function(e){var a=w.select(e).selectAll("g.trace.violins");a.style("opacity",function(n){return n[0].trace.opacity}),a.each(function(n){var r=n[0].trace,t=w.select(this),h=r.box||{},s=h.line||{},o=r.meanline||{},y=o.width;t.selectAll("path.violin").style("stroke-width",r.line.width+"px").call(f.stroke,r.line.color).call(f.fill,r.fillcolor),t.selectAll("path.box").style("stroke-width",s.width+"px").call(f.stroke,s.color).call(f.fill,h.fillcolor);var d={"stroke-width":y+"px","stroke-dasharray":2*y+"px,"+y+"px"};t.selectAll("path.mean").style(d).call(f.stroke,o.color),t.selectAll("path.meanline").style(d).call(f.stroke,o.color),M(t,r,e)})}},{"../../components/color":367,"../scatter/style":960,"@plotly/d3":58}],1111:[function(i,U,V){var w=i("../../components/colorscale/attributes"),f=i("../isosurface/attributes"),M=i("../surface/attributes"),T=i("../../plots/attributes"),e=i("../../lib/extend").extendFlat,a=i("../../plot_api/edit_types").overrideAll,n=U.exports=a(e({x:f.x,y:f.y,z:f.z,value:f.value,isomin:f.isomin,isomax:f.isomax,surface:f.surface,spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:1}},slices:f.slices,caps:f.caps,text:f.text,hovertext:f.hovertext,xhoverformat:f.xhoverformat,yhoverformat:f.yhoverformat,zhoverformat:f.zhoverformat,valuehoverformat:f.valuehoverformat,hovertemplate:f.hovertemplate},w("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:f.colorbar,opacity:f.opacity,opacityscale:M.opacityscale,lightposition:f.lightposition,lighting:f.lighting,flatshading:f.flatshading,contour:f.contour,hoverinfo:e({},T.hoverinfo),showlegend:e({},T.showlegend,{dflt:!1})}),"calc","nested");n.x.editType=n.y.editType=n.z.editType=n.value.editType="calc+clearAxisTypes",n.transforms=void 0},{"../../components/colorscale/attributes":374,"../../lib/extend":505,"../../plot_api/edit_types":548,"../../plots/attributes":562,"../isosurface/attributes":871,"../surface/attributes":1070}],1112:[function(i,U,V){var w=i("../../../stackgl_modules").gl_mesh3d,f=i("../../lib/gl_format_color").parseColorScale,M=i("../../lib/str2rgbarray"),T=i("../../components/colorscale").extractOpts,e=i("../../plots/gl3d/zip3"),a=i("../isosurface/convert").findNearestOnAxis,n=i("../isosurface/convert").generateIsoMeshes;function r(s,o,y){this.scene=s,this.uid=y,this.mesh=o,this.name="",this.data=null,this.showContour=!1}var t=r.prototype;t.handlePick=function(s){if(s.object===this.mesh){var o=s.data.index,y=this.data._meshX[o],d=this.data._meshY[o],p=this.data._meshZ[o],c=this.data._Ys.length,m=this.data._Zs.length,l=a(y,this.data._Xs).id,x=a(d,this.data._Ys).id,u=a(p,this.data._Zs).id,A=s.index=u+m*x+m*c*l;s.traceCoordinate=[this.data._meshX[A],this.data._meshY[A],this.data._meshZ[A],this.data._value[A]];var _=this.data.hovertext||this.data.text;return Array.isArray(_)&&_[A]!==void 0?s.textLabel=_[A]:_&&(s.textLabel=_),!0}},t.update=function(s){var o=this.scene,y=o.fullSceneLayout;this.data=n(s);function d(x,u,A,_){return u.map(function(g){return x.d2l(g,0,_)*A})}var p=e(d(y.xaxis,s._meshX,o.dataScale[0],s.xcalendar),d(y.yaxis,s._meshY,o.dataScale[1],s.ycalendar),d(y.zaxis,s._meshZ,o.dataScale[2],s.zcalendar)),c=e(s._meshI,s._meshJ,s._meshK),m={positions:p,cells:c,lightPosition:[s.lightposition.x,s.lightposition.y,s.lightposition.z],ambient:s.lighting.ambient,diffuse:s.lighting.diffuse,specular:s.lighting.specular,roughness:s.lighting.roughness,fresnel:s.lighting.fresnel,vertexNormalsEpsilon:s.lighting.vertexnormalsepsilon,faceNormalsEpsilon:s.lighting.facenormalsepsilon,opacity:s.opacity,opacityscale:s.opacityscale,contourEnable:s.contour.show,contourColor:M(s.contour.color).slice(0,3),contourWidth:s.contour.width,useFacetNormals:s.flatshading},l=T(s);m.vertexIntensity=s._meshIntensity,m.vertexIntensityBounds=[l.min,l.max],m.colormap=f(s),this.mesh.update(m)},t.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function h(s,o){var y=s.glplot.gl,d=w({gl:y}),p=new r(s,d,o.uid);return d._trace=p,p.update(o),s.glplot.add(d),p}U.exports=h},{"../../../stackgl_modules":1133,"../../components/colorscale":379,"../../lib/gl_format_color":511,"../../lib/str2rgbarray":540,"../../plots/gl3d/zip3":618,"../isosurface/convert":873}],1113:[function(i,U,V){var w=i("../../lib"),f=i("./attributes"),M=i("../isosurface/defaults").supplyIsoDefaults,T=i("../surface/defaults").opacityscaleDefaults;U.exports=function(a,n,r,t){function h(s,o){return w.coerce(a,n,f,s,o)}M(a,n,r,t,h),T(a,n,t,h)}},{"../../lib":515,"../isosurface/defaults":874,"../surface/defaults":1073,"./attributes":1111}],1114:[function(i,U,V){U.exports={attributes:i("./attributes"),supplyDefaults:i("./defaults"),calc:i("../isosurface/calc"),colorbar:{min:"cmin",max:"cmax"},plot:i("./convert"),moduleType:"trace",name:"volume",basePlotModule:i("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":607,"../isosurface/calc":872,"./attributes":1111,"./convert":1112,"./defaults":1113}],1115:[function(i,U,V){var w=i("../bar/attributes"),f=i("../scatter/attributes").line,M=i("../../plots/attributes"),T=i("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=i("../../plots/template_attributes").hovertemplateAttrs,a=i("../../plots/template_attributes").texttemplateAttrs,n=i("./constants"),r=i("../../lib/extend").extendFlat,t=i("../../components/color");function h(s){return{marker:{color:r({},w.marker.color,{arrayOk:!1,editType:"style"}),line:{color:r({},w.marker.line.color,{arrayOk:!1,editType:"style"}),width:r({},w.marker.line.width,{arrayOk:!1,editType:"style"}),editType:"style"},editType:"style"},editType:"style"}}U.exports={measure:{valType:"data_array",dflt:[],editType:"calc"},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc"},x:w.x,x0:w.x0,dx:w.dx,y:w.y,y0:w.y0,dy:w.dy,xperiod:w.xperiod,yperiod:w.yperiod,xperiod0:w.xperiod0,yperiod0:w.yperiod0,xperiodalignment:w.xperiodalignment,yperiodalignment:w.yperiodalignment,xhoverformat:T("x"),yhoverformat:T("y"),hovertext:w.hovertext,hovertemplate:e({},{keys:n.eventDataKeys}),hoverinfo:r({},M.hoverinfo,{flags:["name","x","y","text","initial","delta","final"]}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:a({editType:"plot"},{keys:n.eventDataKeys.concat(["label"])}),text:w.text,textposition:w.textposition,insidetextanchor:w.insidetextanchor,textangle:w.textangle,textfont:w.textfont,insidetextfont:w.insidetextfont,outsidetextfont:w.outsidetextfont,constraintext:w.constraintext,cliponaxis:w.cliponaxis,orientation:w.orientation,offset:w.offset,width:w.width,increasing:h(),decreasing:h(),totals:h(),connector:{line:{color:r({},f.color,{dflt:t.defaultLine}),width:r({},f.width,{editType:"plot"}),dash:f.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:w.offsetgroup,alignmentgroup:w.alignmentgroup}},{"../../components/color":367,"../../lib/extend":505,"../../plots/attributes":562,"../../plots/cartesian/axis_format_attributes":569,"../../plots/template_attributes":642,"../bar/attributes":657,"../scatter/attributes":936,"./constants":1117}],1116:[function(i,U,V){var w=i("../../plots/cartesian/axes"),f=i("../../plots/cartesian/align_period"),M=i("../../lib").mergeArray,T=i("../scatter/calc_selection"),e=i("../../constants/numerical").BADNUM;function a(r){return r==="a"||r==="absolute"}function n(r){return r==="t"||r==="total"}U.exports=function(t,h){var s=w.getFromId(t,h.xaxis||"x"),o=w.getFromId(t,h.yaxis||"y"),y,d,p,c,m,l;h.orientation==="h"?(y=s.makeCalcdata(h,"x"),p=o.makeCalcdata(h,"y"),c=f(h,o,"y",p),m=!!h.yperiodalignment,l="y"):(y=o.makeCalcdata(h,"y"),p=s.makeCalcdata(h,"x"),c=f(h,s,"x",p),m=!!h.xperiodalignment,l="x"),d=c.vals;for(var x=Math.min(d.length,y.length),u=new Array(x),A=0,_,g=!1,b=0;b<x;b++){var v=y[b]||0,k=!1;(y[b]!==e||n(h.measure[b])||a(h.measure[b]))&&b+1<x&&(y[b+1]!==e||n(h.measure[b+1])||a(h.measure[b+1]))&&(k=!0);var S=u[b]={i:b,p:d[b],s:v,rawS:v,cNext:k};a(h.measure[b])?(A=S.s,S.isSum=!0,S.dir="totals",S.s=A):n(h.measure[b])?(S.isSum=!0,S.dir="totals",S.s=A):(S.isSum=!1,S.dir=S.rawS<0?"decreasing":"increasing",_=S.s,S.s=A+_,A+=_),S.dir==="totals"&&(g=!0),m&&(u[b].orig_p=p[b],u[b][l+"End"]=c.ends[b],u[b][l+"Start"]=c.starts[b]),h.ids&&(S.id=String(h.ids[b])),S.v=(h.base||0)+A}return u.length&&(u[0].hasTotals=g),M(h.text,u,"tx"),M(h.hovertext,u,"htx"),T(u,h),u}},{"../../constants/numerical":491,"../../lib":515,"../../plots/cartesian/align_period":563,"../../plots/cartesian/axes":566,"../scatter/calc_selection":938}],1117:[function(i,U,V){U.exports={eventDataKeys:["initial","delta","final"]}},{}],1118:[function(i,U,V){var w=i("../bar/cross_trace_calc").setGroupPositions;U.exports=function(M,T){var e=M._fullLayout,a=M._fullData,n=M.calcdata,r=T.xaxis,t=T.yaxis,h=[],s=[],o=[],y,d;for(d=0;d<a.length;d++){var p=a[d];p.visible===!0&&p.xaxis===r._id&&p.yaxis===t._id&&p.type==="waterfall"&&(y=n[d],p.orientation==="h"?o.push(y):s.push(y),h.push(y))}var c={mode:e.waterfallmode,norm:e.waterfallnorm,gap:e.waterfallgap,groupgap:e.waterfallgroupgap};for(w(M,r,t,s,c),w(M,t,r,o,c),d=0;d<h.length;d++){y=h[d];for(var m=0;m<y.length;m++){var l=y[m];l.isSum===!1&&(l.s0+=m===0?0:y[m-1].s),m+1<y.length&&(y[m].nextP0=y[m+1].p0,y[m].nextS0=y[m+1].s0)}}}},{"../bar/cross_trace_calc":660}],1119:[function(i,U,V){var w=i("../../lib"),f=i("../bar/defaults").handleGroupingDefaults,M=i("../bar/defaults").handleText,T=i("../scatter/xy_defaults"),e=i("../scatter/period_defaults"),a=i("./attributes"),n=i("../../components/color"),r=i("../../constants/delta.js"),t=r.INCREASING.COLOR,h=r.DECREASING.COLOR,s="#4499FF";function o(p,c,m){p(c+".marker.color",m),p(c+".marker.line.color",n.defaultLine),p(c+".marker.line.width")}function y(p,c,m,l){function x(b,v){return w.coerce(p,c,a,b,v)}var u=T(p,c,l,x);if(!u){c.visible=!1;return}e(p,c,l,x),x("xhoverformat"),x("yhoverformat"),x("measure"),x("orientation",c.x&&!c.y?"h":"v"),x("base"),x("offset"),x("width"),x("text"),x("hovertext"),x("hovertemplate");var A=x("textposition");M(p,c,l,x,A,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),c.textposition!=="none"&&(x("texttemplate"),c.texttemplate||x("textinfo")),o(x,"increasing",t),o(x,"decreasing",h),o(x,"totals",s);var _=x("connector.visible");if(_){x("connector.mode");var g=x("connector.line.width");g&&(x("connector.line.color"),x("connector.line.dash"))}}function d(p,c){var m,l;function x(A){return w.coerce(l._input,l,a,A)}if(c.waterfallmode==="group")for(var u=0;u<p.length;u++)l=p[u],m=l._input,f(m,l,c,x)}U.exports={supplyDefaults:y,crossTraceDefaults:d}},{"../../components/color":367,"../../constants/delta.js":485,"../../lib":515,"../bar/defaults":661,"../scatter/period_defaults":956,"../scatter/xy_defaults":963,"./attributes":1115}],1120:[function(i,U,V){U.exports=function(f,M){return f.x="xVal"in M?M.xVal:M.x,f.y="yVal"in M?M.yVal:M.y,"initial"in M&&(f.initial=M.initial),"delta"in M&&(f.delta=M.delta),"final"in M&&(f.final=M.final),M.xa&&(f.xaxis=M.xa),M.ya&&(f.yaxis=M.ya),f}},{}],1121:[function(i,U,V){var w=i("../../plots/cartesian/axes").hoverLabelText,f=i("../../components/color").opacity,M=i("../bar/hover").hoverOnBars,T=i("../../constants/delta.js"),e={increasing:T.INCREASING.SYMBOL,decreasing:T.DECREASING.SYMBOL};U.exports=function(r,t,h,s,o){var y=M(r,t,h,s,o);if(!y)return;var d=y.cd,p=d[0].trace,c=p.orientation==="h",m=c?"x":"y",l=c?r.xa:r.ya;function x(C){return w(l,C,p[m+"hoverformat"])}var u=y.index,A=d[u],_=A.isSum?A.b+A.s:A.rawS;if(!A.isSum){y.initial=A.b+A.s-_,y.delta=_,y.final=y.initial+y.delta;var g=x(Math.abs(y.delta));y.deltaLabel=_<0?"("+g+")":g,y.finalLabel=x(y.final),y.initialLabel=x(y.initial)}var b=A.hi||p.hoverinfo,v=[];if(b&&b!=="none"&&b!=="skip"){var k=b==="all",S=b.split("+"),E=function(C){return k||S.indexOf(C)!==-1};A.isSum||(E("final")&&(c?!E("x"):!E("y"))&&v.push(y.finalLabel),E("delta")&&(_<0?v.push(y.deltaLabel+" "+e.decreasing):v.push(y.deltaLabel+" "+e.increasing)),E("initial")&&v.push("Initial: "+y.initialLabel))}return v.length&&(y.extraText=v.join("<br>")),y.color=a(p,A),[y]};function a(n,r){var t=n[r.dir].marker,h=t.color,s=t.line.color,o=t.line.width;if(f(h))return h;if(f(s)&&o)return s}},{"../../components/color":367,"../../constants/delta.js":485,"../../plots/cartesian/axes":566,"../bar/hover":664}],1122:[function(i,U,V){U.exports={attributes:i("./attributes"),layoutAttributes:i("./layout_attributes"),supplyDefaults:i("./defaults").supplyDefaults,crossTraceDefaults:i("./defaults").crossTraceDefaults,supplyLayoutDefaults:i("./layout_defaults"),calc:i("./calc"),crossTraceCalc:i("./cross_trace_calc"),plot:i("./plot"),style:i("./style").style,hoverPoints:i("./hover"),eventData:i("./event_data"),selectPoints:i("../bar/select"),moduleType:"trace",name:"waterfall",basePlotModule:i("../../plots/cartesian"),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},{"../../plots/cartesian":578,"../bar/select":669,"./attributes":1115,"./calc":1116,"./cross_trace_calc":1118,"./defaults":1119,"./event_data":1120,"./hover":1121,"./layout_attributes":1123,"./layout_defaults":1124,"./plot":1125,"./style":1126}],1123:[function(i,U,V){U.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc"},waterfallgap:{valType:"number",min:0,max:1,editType:"calc"},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],1124:[function(i,U,V){var w=i("../../lib"),f=i("./layout_attributes");U.exports=function(M,T,e){var a=!1;function n(h,s){return w.coerce(M,T,f,h,s)}for(var r=0;r<e.length;r++){var t=e[r];if(t.visible&&t.type==="waterfall"){a=!0;break}}a&&(n("waterfallmode"),n("waterfallgap",.2),n("waterfallgroupgap"))}},{"../../lib":515,"./layout_attributes":1123}],1125:[function(i,U,V){var w=i("@plotly/d3"),f=i("../../lib"),M=i("../../components/drawing"),T=i("../../constants/numerical").BADNUM,e=i("../bar/plot"),a=i("../bar/uniform_text").clearMinTextSize;U.exports=function(h,s,o,y){var d=h._fullLayout;a("waterfall",d),e.plot(h,s,o,y,{mode:d.waterfallmode,norm:d.waterfallmode,gap:d.waterfallgap,groupgap:d.waterfallgroupgap}),n(h,s,o,y)};function n(t,h,s,o){var y=h.xaxis,d=h.yaxis;f.makeTraceGroups(o,s,"trace bars").each(function(p){var c=w.select(this),m=p[0].trace,l=f.ensureSingle(c,"g","lines");if(!m.connector||!m.connector.visible){l.remove();return}var x=m.orientation==="h",u=m.connector.mode,A=l.selectAll("g.line").data(f.identity);A.enter().append("g").classed("line",!0),A.exit().remove();var _=A.size();A.each(function(g,b){if(!(b!==_-1&&!g.cNext)){var v=r(g,y,d,x),k=v[0],S=v[1],E="";k[0]!==T&&S[0]!==T&&k[1]!==T&&S[1]!==T&&(u==="spanning"&&!g.isSum&&b>0&&(x?E+="M"+k[0]+","+S[1]+"V"+S[0]:E+="M"+k[1]+","+S[0]+"H"+k[0]),u!=="between"&&(g.isSum||b<_-1)&&(x?E+="M"+k[1]+","+S[0]+"V"+S[1]:E+="M"+k[0]+","+S[1]+"H"+k[1]),k[2]!==T&&S[2]!==T&&(x?E+="M"+k[1]+","+S[1]+"V"+S[2]:E+="M"+k[1]+","+S[1]+"H"+k[2])),E===""&&(E="M0,0Z"),f.ensureSingle(w.select(this),"path").attr("d",E).call(M.setClipUrl,h.layerClipId,t)}})})}function r(t,h,s,o){var y=[],d=[],p=o?h:s,c=o?s:h;return y[0]=p.c2p(t.s0,!0),d[0]=c.c2p(t.p0,!0),y[1]=p.c2p(t.s1,!0),d[1]=c.c2p(t.p1,!0),y[2]=p.c2p(t.nextS0,!0),d[2]=c.c2p(t.nextP0,!0),o?[y,d]:[d,y]}},{"../../components/drawing":389,"../../constants/numerical":491,"../../lib":515,"../bar/plot":668,"../bar/uniform_text":673,"@plotly/d3":58}],1126:[function(i,U,V){var w=i("@plotly/d3"),f=i("../../components/drawing"),M=i("../../components/color"),T=i("../../constants/interactions").DESELECTDIM,e=i("../bar/style"),a=i("../bar/uniform_text").resizeText,n=e.styleTextPoints;function r(t,h,s){var o=s||w.select(t).selectAll("g.waterfalllayer").selectAll("g.trace");a(t,o,"waterfall"),o.style("opacity",function(y){return y[0].trace.opacity}),o.each(function(y){var d=w.select(this),p=y[0].trace;d.selectAll(".point > path").each(function(c){if(!c.isBlank){var m=p[c.dir].marker;w.select(this).call(M.fill,m.color).call(M.stroke,m.line.color).call(f.dashLine,m.line.dash,m.line.width).style("opacity",p.selectedpoints&&!c.selected?T:1)}}),n(d,p,t),d.selectAll(".lines").each(function(){var c=p.connector.line;f.lineGroupStyle(w.select(this).selectAll("path"),c.width,c.color,c.dash)})})}U.exports={style:r}},{"../../components/color":367,"../../components/drawing":389,"../../constants/interactions":490,"../bar/style":671,"../bar/uniform_text":673,"@plotly/d3":58}],1127:[function(i,U,V){var w=i("../plots/cartesian/axes"),f=i("../lib"),M=i("../plot_api/plot_schema"),T=i("./helpers").pointsAccessorFunction,e=i("../constants/numerical").BADNUM;V.moduleType="transform",V.name="aggregate";var a=V.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},n=a.aggregations;V.supplyDefaults=function(y,d){var p={},c;function m(C,F){return f.coerce(y,p,a,C,F)}var l=m("enabled");if(!l)return p;var x=M.findArrayAttributes(d),u={};for(c=0;c<x.length;c++)u[x[c]]=1;var A=m("groups");if(!Array.isArray(A)){if(!u[A])return p.enabled=!1,p;u[A]=0}var _=y.aggregations||[],g=p.aggregations=new Array(_.length),b;function v(C,F){return f.coerce(_[c],b,n,C,F)}for(c=0;c<_.length;c++){b={_index:c};var k=v("target"),S=v("func"),E=v("enabled");E&&k&&(u[k]||S==="count"&&u[k]===void 0)?(S==="stddev"&&v("funcmode"),u[k]=0,g[c]=b):g[c]={enabled:!1,_index:c}}for(c=0;c<x.length;c++)u[x[c]]&&g.push({target:x[c],func:n.func.dflt,enabled:!0,_index:-1});return p},V.calcTransform=function(y,d,p){if(!!p.enabled){var c=p.groups,m=f.getTargetArray(d,{target:c});if(!!m){var l,x,u,A,_={},g={},b=[],v=T(d.transforms,p),k=m.length;for(d._length&&(k=Math.min(k,d._length)),l=0;l<k;l++)x=m[l],u=_[x],u===void 0?(_[x]=b.length,A=[l],b.push(A),g[_[x]]=v(l)):(b[u].push(l),g[_[x]]=(g[_[x]]||[]).concat(v(l)));p._indexToPoints=g;var S=p.aggregations;for(l=0;l<S.length;l++)r(y,d,b,S[l]);typeof c=="string"&&r(y,d,b,{target:c,func:"first",enabled:!0}),d._length=b.length}}};function r(y,d,p,c){if(!!c.enabled){for(var m=c.target,l=f.nestedProperty(d,m),x=l.get(),u=w.getDataConversions(y,d,m,x),A=t(c,u),_=new Array(p.length),g=0;g<p.length;g++)_[g]=A(x,p[g]);l.set(_),c.func==="count"&&f.pushUnique(d._arrayAttrs,m)}}function t(y,d){var p=y.func,c=d.d2c,m=d.c2d;switch(p){case"count":return h;case"first":return s;case"last":return o;case"sum":return function(l,x){for(var u=0,A=0;A<x.length;A++){var _=c(l[x[A]]);_!==e&&(u+=_)}return m(u)};case"avg":return function(l,x){for(var u=0,A=0,_=0;_<x.length;_++){var g=c(l[x[_]]);g!==e&&(u+=g,A++)}return A?m(u/A):e};case"min":return function(l,x){for(var u=1/0,A=0;A<x.length;A++){var _=c(l[x[A]]);_!==e&&(u=Math.min(u,_))}return u===1/0?e:m(u)};case"max":return function(l,x){for(var u=-1/0,A=0;A<x.length;A++){var _=c(l[x[A]]);_!==e&&(u=Math.max(u,_))}return u===-1/0?e:m(u)};case"range":return function(l,x){for(var u=1/0,A=-1/0,_=0;_<x.length;_++){var g=c(l[x[_]]);g!==e&&(u=Math.min(u,g),A=Math.max(A,g))}return A===-1/0||u===1/0?e:m(A-u)};case"change":return function(l,x){var u=c(l[x[0]]),A=c(l[x[x.length-1]]);return u===e||A===e?e:m(A-u)};case"median":return function(l,x){for(var u=[],A=0;A<x.length;A++){var _=c(l[x[A]]);_!==e&&u.push(_)}if(!u.length)return e;u.sort(f.sorterAsc);var g=(u.length-1)/2;return m((u[Math.floor(g)]+u[Math.ceil(g)])/2)};case"mode":return function(l,x){for(var u={},A=0,_=e,g=0;g<x.length;g++){var b=c(l[x[g]]);if(b!==e){var v=u[b]=(u[b]||0)+1;v>A&&(A=v,_=b)}}return A?m(_):e};case"rms":return function(l,x){for(var u=0,A=0,_=0;_<x.length;_++){var g=c(l[x[_]]);g!==e&&(u+=g*g,A++)}return A?m(Math.sqrt(u/A)):e};case"stddev":return function(l,x){var u=0,A=0,_=1,g=e,b;for(b=0;b<x.length&&g===e;b++)g=c(l[x[b]]);if(g===e)return e;for(;b<x.length;b++){var v=c(l[x[b]]);if(v!==e){var k=v-g;u+=k,A+=k*k,_++}}var S=y.funcmode==="sample"?_-1:_;return S?Math.sqrt((A-u*u/_)/S):0}}}function h(y,d){return d.length}function s(y,d){return y[d[0]]}function o(y,d){return y[d[d.length-1]]}},{"../constants/numerical":491,"../lib":515,"../plot_api/plot_schema":554,"../plots/cartesian/axes":566,"./helpers":1130}],1128:[function(i,U,V){var w=i("../lib"),f=i("../registry"),M=i("../plots/cartesian/axes"),T=i("./helpers").pointsAccessorFunction,e=i("../constants/filter_ops"),a=e.COMPARISON_OPS,n=e.INTERVAL_OPS,r=e.SET_OPS;V.moduleType="transform",V.name="filter",V.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(a).concat(n).concat(r),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"},V.supplyDefaults=function(h){var s={};function o(c,m){return w.coerce(h,s,V.attributes,c,m)}var y=o("enabled");if(y){var d=o("target");if(w.isArrayOrTypedArray(d)&&d.length===0)return s.enabled=!1,s;o("preservegaps"),o("operation"),o("value");var p=f.getComponentMethod("calendars","handleDefaults");p(h,s,"valuecalendar",null),p(h,s,"targetcalendar",null)}return s},V.calcTransform=function(h,s,o){if(!o.enabled)return;var y=w.getTargetArray(s,o);if(!y)return;var d=o.target,p=y.length;s._length&&(p=Math.min(p,s._length));var c=o.targetcalendar,m=s._arrayAttrs,l=o.preservegaps;if(typeof d=="string"){var x=w.nestedProperty(s,d+"calendar").get();x&&(c=x)}var u=M.getDataToCoordFunc(h,s,d,y),A=t(o,u,c),_={},g={},b=0;function v(I,D){for(var R=0;R<m.length;R++){var O=w.nestedProperty(s,m[R]);I(O,D)}}var k,S;l?(k=function(I){_[I.astr]=w.extendDeep([],I.get()),I.set(new Array(p))},S=function(I,D){var R=_[I.astr][D];I.get()[D]=R}):(k=function(I){_[I.astr]=w.extendDeep([],I.get()),I.set([])},S=function(I,D){var R=_[I.astr][D];I.get().push(R)}),v(k);for(var E=T(s.transforms,o),C=0;C<p;C++){var F=A(y[C]);F?(v(S,C),g[b++]=E(C)):l&&b++}o._indexToPoints=g,s._length=b};function t(h,s,o){var y=h.operation,d=h.value,p=Array.isArray(d);function c(u){return u.indexOf(y)!==-1}var m=function(u){return s(u,0,h.valuecalendar)},l=function(u){return s(u,0,o)},x;switch(c(a)?x=m(p?d[0]:d):c(n)?x=p?[m(d[0]),m(d[1])]:[m(d),m(d)]:c(r)&&(x=p?d.map(m):[m(d)]),y){case"=":return function(u){return l(u)===x};case"!=":return function(u){return l(u)!==x};case"<":return function(u){return l(u)<x};case"<=":return function(u){return l(u)<=x};case">":return function(u){return l(u)>x};case">=":return function(u){return l(u)>=x};case"[]":return function(u){var A=l(u);return A>=x[0]&&A<=x[1]};case"()":return function(u){var A=l(u);return A>x[0]&&A<x[1]};case"[)":return function(u){var A=l(u);return A>=x[0]&&A<x[1]};case"(]":return function(u){var A=l(u);return A>x[0]&&A<=x[1]};case"][":return function(u){var A=l(u);return A<=x[0]||A>=x[1]};case")(":return function(u){var A=l(u);return A<x[0]||A>x[1]};case"](":return function(u){var A=l(u);return A<=x[0]||A>x[1]};case")[":return function(u){var A=l(u);return A<x[0]||A>=x[1]};case"{}":return function(u){return x.indexOf(l(u))!==-1};case"}{":return function(u){return x.indexOf(l(u))===-1}}}},{"../constants/filter_ops":487,"../lib":515,"../plots/cartesian/axes":566,"../registry":647,"./helpers":1130}],1129:[function(i,U,V){var w=i("../lib"),f=i("../plot_api/plot_schema"),M=i("../plots/plots"),T=i("./helpers").pointsAccessorFunction;V.moduleType="transform",V.name="groupby",V.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"},V.supplyDefaults=function(a,n,r){var t,h={};function s(m,l){return w.coerce(a,h,V.attributes,m,l)}var o=s("enabled");if(!o)return h;s("groups"),s("nameformat",r._dataLength>1?"%{group} (%{trace})":"%{group}");var y=a.styles,d=h.styles=[];if(y)for(t=0;t<y.length;t++){var p=d[t]={};w.coerce(y[t],d[t],V.attributes.styles,"target");var c=w.coerce(y[t],d[t],V.attributes.styles,"value");w.isPlainObject(c)?p.value=w.extendDeep({},c):c&&delete p.value}return h},V.transform=function(a,n){var r,t,h,s=[];for(t=0;t<a.length;t++)for(r=e(a[t],n),h=0;h<r.length;h++)s.push(r[h]);return s};function e(a,n){var r,t,h,s,o,y,d,p,c,m,l=n.transform,x=n.transformIndex,u=a.transforms[x].groups,A=T(a.transforms,l);if(!w.isArrayOrTypedArray(u)||u.length===0)return[a];var _=w.filterUnique(u),g=new Array(_.length),b=u.length,v=f.findArrayAttributes(a),k=l.styles||[],S={};for(r=0;r<k.length;r++)S[k[r].target]=k[r].value;l.styles&&(m=w.keyedContainer(l,"styles","target","value.name"));var E={},C={};for(r=0;r<_.length;r++){y=_[r],E[y]=r,C[y]=0,d=g[r]=w.extendDeepNoArrays({},a),d._group=y,d.transforms[x]._indexToPoints={};var F=null;for(m&&(F=m.get(y)),F||F===""?d.name=F:d.name=w.templateString(l.nameformat,{trace:a.name,group:y}),p=d.transforms,d.transforms=[],t=0;t<p.length;t++)d.transforms[t]=w.extendDeepNoArrays({},p[t]);for(t=0;t<v.length;t++)w.nestedProperty(d,v[t]).set([])}for(h=0;h<v.length;h++){for(s=v[h],t=0,c=[];t<_.length;t++)c[t]=w.nestedProperty(g[t],s).get();for(o=w.nestedProperty(a,s).get(),t=0;t<b;t++)c[E[u[t]]].push(o[t])}for(t=0;t<b;t++){d=g[E[u[t]]];var I=d.transforms[x]._indexToPoints;I[C[u[t]]]=A(t),C[u[t]]++}for(r=0;r<_.length;r++)y=_[r],d=g[r],M.clearExpandedTraceDefaultColors(d),d=w.extendDeepNoArrays(d,S[y]||{});return g}},{"../lib":515,"../plot_api/plot_schema":554,"../plots/plots":628,"./helpers":1130}],1130:[function(i,U,V){V.pointsAccessorFunction=function(w,f){for(var M,T,e=0;e<w.length&&(M=w[e],M!==f);e++)!M._indexToPoints||M.enabled===!1||(T=M._indexToPoints);var a=T?function(n){return T[n]}:function(n){return[n]};return a}},{}],1131:[function(i,U,V){var w=i("../lib"),f=i("../plots/cartesian/axes"),M=i("./helpers").pointsAccessorFunction,T=i("../constants/numerical").BADNUM;V.moduleType="transform",V.name="sort",V.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"},V.supplyDefaults=function(n){var r={};function t(s,o){return w.coerce(n,r,V.attributes,s,o)}var h=t("enabled");return h&&(t("target"),t("order")),r},V.calcTransform=function(n,r,t){if(!!t.enabled){var h=w.getTargetArray(r,t);if(!!h){var s=t.target,o=h.length;r._length&&(o=Math.min(o,r._length));var y=r._arrayAttrs,d=f.getDataToCoordFunc(n,r,s,h),p=e(t,h,d,o),c=M(r.transforms,t),m={},l,x;for(l=0;l<y.length;l++){var u=w.nestedProperty(r,y[l]),A=u.get(),_=new Array(o);for(x=0;x<o;x++)_[x]=A[p[x]];u.set(_)}for(x=0;x<o;x++)m[x]=c(p[x]);t._indexToPoints=m,r._length=o}}};function e(n,r,t,h){var s=new Array(h),o=new Array(h),y;for(y=0;y<h;y++)s[y]={v:r[y],i:y};for(s.sort(a(n,t)),y=0;y<h;y++)o[y]=s[y].i;return o}function a(n,r){switch(n.order){case"ascending":return function(t,h){var s=r(t.v),o=r(h.v);return s===T?1:o===T?-1:s-o};case"descending":return function(t,h){var s=r(t.v),o=r(h.v);return s===T?1:o===T?-1:o-s}}}},{"../constants/numerical":491,"../lib":515,"../plots/cartesian/axes":566,"./helpers":1130}],1132:[function(i,U,V){V.version="2.16.1"},{}],1133:[function(i,U,V){(function(w){(function(){(function(f){if(typeof V=="object"&&typeof U<"u")U.exports=f();else{var M;typeof window<"u"?M=window:typeof w<"u"?M=w:typeof self<"u"?M=self:M=this,M.stackgl=f()}})(function(){return function(){function f(M,T,e){function a(t,h){if(!T[t]){if(!M[t]){var s=typeof i=="function"&&i;if(!h&&s)return s(t,!0);if(n)return n(t,!0);var o=new Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}var y=T[t]={exports:{}};M[t][0].call(y.exports,function(d){var p=M[t][1][d];return a(p||d)},y,y.exports,f,M,T,e)}return T[t].exports}for(var n=typeof i=="function"&&i,r=0;r<e.length;r++)a(e[r]);return a}return f}()({1:[function(f,M,T){T.byteLength=o,T.toByteArray=d,T.fromByteArray=m;for(var e=[],a=[],n=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,h=r.length;t<h;++t)e[t]=r[t],a[r.charCodeAt(t)]=t;a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63;function s(l){var x=l.length;if(x%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var u=l.indexOf("=");u===-1&&(u=x);var A=u===x?0:4-u%4;return[u,A]}function o(l){var x=s(l),u=x[0],A=x[1];return(u+A)*3/4-A}function y(l,x,u){return(x+u)*3/4-u}function d(l){var x,u=s(l),A=u[0],_=u[1],g=new n(y(l,A,_)),b=0,v=_>0?A-4:A,k;for(k=0;k<v;k+=4)x=a[l.charCodeAt(k)]<<18|a[l.charCodeAt(k+1)]<<12|a[l.charCodeAt(k+2)]<<6|a[l.charCodeAt(k+3)],g[b++]=x>>16&255,g[b++]=x>>8&255,g[b++]=x&255;return _===2&&(x=a[l.charCodeAt(k)]<<2|a[l.charCodeAt(k+1)]>>4,g[b++]=x&255),_===1&&(x=a[l.charCodeAt(k)]<<10|a[l.charCodeAt(k+1)]<<4|a[l.charCodeAt(k+2)]>>2,g[b++]=x>>8&255,g[b++]=x&255),g}function p(l){return e[l>>18&63]+e[l>>12&63]+e[l>>6&63]+e[l&63]}function c(l,x,u){for(var A,_=[],g=x;g<u;g+=3)A=(l[g]<<16&16711680)+(l[g+1]<<8&65280)+(l[g+2]&255),_.push(p(A));return _.join("")}function m(l){for(var x,u=l.length,A=u%3,_=[],g=16383,b=0,v=u-A;b<v;b+=g)_.push(c(l,b,b+g>v?v:b+g));return A===1?(x=l[u-1],_.push(e[x>>2]+e[x<<4&63]+"==")):A===2&&(x=(l[u-2]<<8)+l[u-1],_.push(e[x>>10]+e[x>>4&63]+e[x<<2&63]+"=")),_.join("")}},{}],2:[function(f,M,T){},{}],3:[function(f,M,T){(function(e){(function(){var a=f("base64-js"),n=f("ieee754");T.Buffer=s,T.SlowBuffer=A,T.INSPECT_MAX_BYTES=50;var r=2147483647;T.kMaxLength=r,s.TYPED_ARRAY_SUPPORT=t(),!s.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function t(){try{var ce=new Uint8Array(1);return ce.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},ce.foo()===42}catch{return!1}}Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(!!s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(!!s.isBuffer(this))return this.byteOffset}});function h(ce){if(ce>r)throw new RangeError('The value "'+ce+'" is invalid for option "size"');var de=new Uint8Array(ce);return de.__proto__=s.prototype,de}function s(ce,de,ye){if(typeof ce=="number"){if(typeof de=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return p(ce)}return o(ce,de,ye)}typeof Symbol<"u"&&Symbol.species!=null&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),s.poolSize=8192;function o(ce,de,ye){if(typeof ce=="string")return c(ce,de);if(ArrayBuffer.isView(ce))return m(ce);if(ce==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ce);if(oe(ce,ArrayBuffer)||ce&&oe(ce.buffer,ArrayBuffer))return l(ce,de,ye);if(typeof ce=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var ge=ce.valueOf&&ce.valueOf();if(ge!=null&&ge!==ce)return s.from(ge,de,ye);var me=x(ce);if(me)return me;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof ce[Symbol.toPrimitive]=="function")return s.from(ce[Symbol.toPrimitive]("string"),de,ye);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ce)}s.from=function(ce,de,ye){return o(ce,de,ye)},s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array;function y(ce){if(typeof ce!="number")throw new TypeError('"size" argument must be of type number');if(ce<0)throw new RangeError('The value "'+ce+'" is invalid for option "size"')}function d(ce,de,ye){return y(ce),ce<=0?h(ce):de!==void 0?typeof ye=="string"?h(ce).fill(de,ye):h(ce).fill(de):h(ce)}s.alloc=function(ce,de,ye){return d(ce,de,ye)};function p(ce){return y(ce),h(ce<0?0:u(ce)|0)}s.allocUnsafe=function(ce){return p(ce)},s.allocUnsafeSlow=function(ce){return p(ce)};function c(ce,de){if((typeof de!="string"||de==="")&&(de="utf8"),!s.isEncoding(de))throw new TypeError("Unknown encoding: "+de);var ye=_(ce,de)|0,ge=h(ye),me=ge.write(ce,de);return me!==ye&&(ge=ge.slice(0,me)),ge}function m(ce){for(var de=ce.length<0?0:u(ce.length)|0,ye=h(de),ge=0;ge<de;ge+=1)ye[ge]=ce[ge]&255;return ye}function l(ce,de,ye){if(de<0||ce.byteLength<de)throw new RangeError('"offset" is outside of buffer bounds');if(ce.byteLength<de+(ye||0))throw new RangeError('"length" is outside of buffer bounds');var ge;return de===void 0&&ye===void 0?ge=new Uint8Array(ce):ye===void 0?ge=new Uint8Array(ce,de):ge=new Uint8Array(ce,de,ye),ge.__proto__=s.prototype,ge}function x(ce){if(s.isBuffer(ce)){var de=u(ce.length)|0,ye=h(de);return ye.length===0||ce.copy(ye,0,0,de),ye}if(ce.length!==void 0)return typeof ce.length!="number"||be(ce.length)?h(0):m(ce);if(ce.type==="Buffer"&&Array.isArray(ce.data))return m(ce.data)}function u(ce){if(ce>=r)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r.toString(16)+" bytes");return ce|0}function A(ce){return+ce!=ce&&(ce=0),s.alloc(+ce)}s.isBuffer=function(de){return de!=null&&de._isBuffer===!0&&de!==s.prototype},s.compare=function(de,ye){if(oe(de,Uint8Array)&&(de=s.from(de,de.offset,de.byteLength)),oe(ye,Uint8Array)&&(ye=s.from(ye,ye.offset,ye.byteLength)),!s.isBuffer(de)||!s.isBuffer(ye))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(de===ye)return 0;for(var ge=de.length,me=ye.length,Se=0,Le=Math.min(ge,me);Se<Le;++Se)if(de[Se]!==ye[Se]){ge=de[Se],me=ye[Se];break}return ge<me?-1:me<ge?1:0},s.isEncoding=function(de){switch(String(de).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(de,ye){if(!Array.isArray(de))throw new TypeError('"list" argument must be an Array of Buffers');if(de.length===0)return s.alloc(0);var ge;if(ye===void 0)for(ye=0,ge=0;ge<de.length;++ge)ye+=de[ge].length;var me=s.allocUnsafe(ye),Se=0;for(ge=0;ge<de.length;++ge){var Le=de[ge];if(oe(Le,Uint8Array)&&(Le=s.from(Le)),!s.isBuffer(Le))throw new TypeError('"list" argument must be an Array of Buffers');Le.copy(me,Se),Se+=Le.length}return me};function _(ce,de){if(s.isBuffer(ce))return ce.length;if(ArrayBuffer.isView(ce)||oe(ce,ArrayBuffer))return ce.byteLength;if(typeof ce!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ce);var ye=ce.length,ge=arguments.length>2&&arguments[2]===!0;if(!ge&&ye===0)return 0;for(var me=!1;;)switch(de){case"ascii":case"latin1":case"binary":return ye;case"utf8":case"utf-8":return Z(ce).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ye*2;case"hex":return ye>>>1;case"base64":return se(ce).length;default:if(me)return ge?-1:Z(ce).length;de=(""+de).toLowerCase(),me=!0}}s.byteLength=_;function g(ce,de,ye){var ge=!1;if((de===void 0||de<0)&&(de=0),de>this.length||((ye===void 0||ye>this.length)&&(ye=this.length),ye<=0)||(ye>>>=0,de>>>=0,ye<=de))return"";for(ce||(ce="utf8");;)switch(ce){case"hex":return X(this,de,ye);case"utf8":case"utf-8":return O(this,de,ye);case"ascii":return G(this,de,ye);case"latin1":case"binary":return Q(this,de,ye);case"base64":return R(this,de,ye);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,de,ye);default:if(ge)throw new TypeError("Unknown encoding: "+ce);ce=(ce+"").toLowerCase(),ge=!0}}s.prototype._isBuffer=!0;function b(ce,de,ye){var ge=ce[de];ce[de]=ce[ye],ce[ye]=ge}s.prototype.swap16=function(){var de=this.length;if(de%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var ye=0;ye<de;ye+=2)b(this,ye,ye+1);return this},s.prototype.swap32=function(){var de=this.length;if(de%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var ye=0;ye<de;ye+=4)b(this,ye,ye+3),b(this,ye+1,ye+2);return this},s.prototype.swap64=function(){var de=this.length;if(de%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var ye=0;ye<de;ye+=8)b(this,ye,ye+7),b(this,ye+1,ye+6),b(this,ye+2,ye+5),b(this,ye+3,ye+4);return this},s.prototype.toString=function(){var de=this.length;return de===0?"":arguments.length===0?O(this,0,de):g.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(de){if(!s.isBuffer(de))throw new TypeError("Argument must be a Buffer");return this===de?!0:s.compare(this,de)===0},s.prototype.inspect=function(){var de="",ye=T.INSPECT_MAX_BYTES;return de=this.toString("hex",0,ye).replace(/(.{2})/g,"$1 ").trim(),this.length>ye&&(de+=" ... "),"<Buffer "+de+">"},s.prototype.compare=function(de,ye,ge,me,Se){if(oe(de,Uint8Array)&&(de=s.from(de,de.offset,de.byteLength)),!s.isBuffer(de))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof de);if(ye===void 0&&(ye=0),ge===void 0&&(ge=de?de.length:0),me===void 0&&(me=0),Se===void 0&&(Se=this.length),ye<0||ge>de.length||me<0||Se>this.length)throw new RangeError("out of range index");if(me>=Se&&ye>=ge)return 0;if(me>=Se)return-1;if(ye>=ge)return 1;if(ye>>>=0,ge>>>=0,me>>>=0,Se>>>=0,this===de)return 0;for(var Le=Se-me,Oe=ge-ye,we=Math.min(Le,Oe),Ce=this.slice(me,Se),Ke=de.slice(ye,ge),Ye=0;Ye<we;++Ye)if(Ce[Ye]!==Ke[Ye]){Le=Ce[Ye],Oe=Ke[Ye];break}return Le<Oe?-1:Oe<Le?1:0};function v(ce,de,ye,ge,me){if(ce.length===0)return-1;if(typeof ye=="string"?(ge=ye,ye=0):ye>2147483647?ye=2147483647:ye<-2147483648&&(ye=-2147483648),ye=+ye,be(ye)&&(ye=me?0:ce.length-1),ye<0&&(ye=ce.length+ye),ye>=ce.length){if(me)return-1;ye=ce.length-1}else if(ye<0)if(me)ye=0;else return-1;if(typeof de=="string"&&(de=s.from(de,ge)),s.isBuffer(de))return de.length===0?-1:k(ce,de,ye,ge,me);if(typeof de=="number")return de=de&255,typeof Uint8Array.prototype.indexOf=="function"?me?Uint8Array.prototype.indexOf.call(ce,de,ye):Uint8Array.prototype.lastIndexOf.call(ce,de,ye):k(ce,[de],ye,ge,me);throw new TypeError("val must be string, number or Buffer")}function k(ce,de,ye,ge,me){var Se=1,Le=ce.length,Oe=de.length;if(ge!==void 0&&(ge=String(ge).toLowerCase(),ge==="ucs2"||ge==="ucs-2"||ge==="utf16le"||ge==="utf-16le")){if(ce.length<2||de.length<2)return-1;Se=2,Le/=2,Oe/=2,ye/=2}function we(Re,je){return Se===1?Re[je]:Re.readUInt16BE(je*Se)}var Ce;if(me){var Ke=-1;for(Ce=ye;Ce<Le;Ce++)if(we(ce,Ce)===we(de,Ke===-1?0:Ce-Ke)){if(Ke===-1&&(Ke=Ce),Ce-Ke+1===Oe)return Ke*Se}else Ke!==-1&&(Ce-=Ce-Ke),Ke=-1}else for(ye+Oe>Le&&(ye=Le-Oe),Ce=ye;Ce>=0;Ce--){for(var Ye=!0,Fe=0;Fe<Oe;Fe++)if(we(ce,Ce+Fe)!==we(de,Fe)){Ye=!1;break}if(Ye)return Ce}return-1}s.prototype.includes=function(de,ye,ge){return this.indexOf(de,ye,ge)!==-1},s.prototype.indexOf=function(de,ye,ge){return v(this,de,ye,ge,!0)},s.prototype.lastIndexOf=function(de,ye,ge){return v(this,de,ye,ge,!1)};function S(ce,de,ye,ge){ye=Number(ye)||0;var me=ce.length-ye;ge?(ge=Number(ge),ge>me&&(ge=me)):ge=me;var Se=de.length;ge>Se/2&&(ge=Se/2);for(var Le=0;Le<ge;++Le){var Oe=parseInt(de.substr(Le*2,2),16);if(be(Oe))return Le;ce[ye+Le]=Oe}return Le}function E(ce,de,ye,ge){return ae(Z(de,ce.length-ye),ce,ye,ge)}function C(ce,de,ye,ge){return ae(q(de),ce,ye,ge)}function F(ce,de,ye,ge){return C(ce,de,ye,ge)}function I(ce,de,ye,ge){return ae(se(de),ce,ye,ge)}function D(ce,de,ye,ge){return ae(ie(de,ce.length-ye),ce,ye,ge)}s.prototype.write=function(de,ye,ge,me){if(ye===void 0)me="utf8",ge=this.length,ye=0;else if(ge===void 0&&typeof ye=="string")me=ye,ge=this.length,ye=0;else if(isFinite(ye))ye=ye>>>0,isFinite(ge)?(ge=ge>>>0,me===void 0&&(me="utf8")):(me=ge,ge=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var Se=this.length-ye;if((ge===void 0||ge>Se)&&(ge=Se),de.length>0&&(ge<0||ye<0)||ye>this.length)throw new RangeError("Attempt to write outside buffer bounds");me||(me="utf8");for(var Le=!1;;)switch(me){case"hex":return S(this,de,ye,ge);case"utf8":case"utf-8":return E(this,de,ye,ge);case"ascii":return C(this,de,ye,ge);case"latin1":case"binary":return F(this,de,ye,ge);case"base64":return I(this,de,ye,ge);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,de,ye,ge);default:if(Le)throw new TypeError("Unknown encoding: "+me);me=(""+me).toLowerCase(),Le=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function R(ce,de,ye){return de===0&&ye===ce.length?a.fromByteArray(ce):a.fromByteArray(ce.slice(de,ye))}function O(ce,de,ye){ye=Math.min(ce.length,ye);for(var ge=[],me=de;me<ye;){var Se=ce[me],Le=null,Oe=Se>239?4:Se>223?3:Se>191?2:1;if(me+Oe<=ye){var we,Ce,Ke,Ye;switch(Oe){case 1:Se<128&&(Le=Se);break;case 2:we=ce[me+1],(we&192)===128&&(Ye=(Se&31)<<6|we&63,Ye>127&&(Le=Ye));break;case 3:we=ce[me+1],Ce=ce[me+2],(we&192)===128&&(Ce&192)===128&&(Ye=(Se&15)<<12|(we&63)<<6|Ce&63,Ye>2047&&(Ye<55296||Ye>57343)&&(Le=Ye));break;case 4:we=ce[me+1],Ce=ce[me+2],Ke=ce[me+3],(we&192)===128&&(Ce&192)===128&&(Ke&192)===128&&(Ye=(Se&15)<<18|(we&63)<<12|(Ce&63)<<6|Ke&63,Ye>65535&&Ye<1114112&&(Le=Ye))}}Le===null?(Le=65533,Oe=1):Le>65535&&(Le-=65536,ge.push(Le>>>10&1023|55296),Le=56320|Le&1023),ge.push(Le),me+=Oe}return B(ge)}var z=4096;function B(ce){var de=ce.length;if(de<=z)return String.fromCharCode.apply(String,ce);for(var ye="",ge=0;ge<de;)ye+=String.fromCharCode.apply(String,ce.slice(ge,ge+=z));return ye}function G(ce,de,ye){var ge="";ye=Math.min(ce.length,ye);for(var me=de;me<ye;++me)ge+=String.fromCharCode(ce[me]&127);return ge}function Q(ce,de,ye){var ge="";ye=Math.min(ce.length,ye);for(var me=de;me<ye;++me)ge+=String.fromCharCode(ce[me]);return ge}function X(ce,de,ye){var ge=ce.length;(!de||de<0)&&(de=0),(!ye||ye<0||ye>ge)&&(ye=ge);for(var me="",Se=de;Se<ye;++Se)me+=ne(ce[Se]);return me}function j(ce,de,ye){for(var ge=ce.slice(de,ye),me="",Se=0;Se<ge.length;Se+=2)me+=String.fromCharCode(ge[Se]+ge[Se+1]*256);return me}s.prototype.slice=function(de,ye){var ge=this.length;de=~~de,ye=ye===void 0?ge:~~ye,de<0?(de+=ge,de<0&&(de=0)):de>ge&&(de=ge),ye<0?(ye+=ge,ye<0&&(ye=0)):ye>ge&&(ye=ge),ye<de&&(ye=de);var me=this.subarray(de,ye);return me.__proto__=s.prototype,me};function re(ce,de,ye){if(ce%1!==0||ce<0)throw new RangeError("offset is not uint");if(ce+de>ye)throw new RangeError("Trying to access beyond buffer length")}s.prototype.readUIntLE=function(de,ye,ge){de=de>>>0,ye=ye>>>0,ge||re(de,ye,this.length);for(var me=this[de],Se=1,Le=0;++Le<ye&&(Se*=256);)me+=this[de+Le]*Se;return me},s.prototype.readUIntBE=function(de,ye,ge){de=de>>>0,ye=ye>>>0,ge||re(de,ye,this.length);for(var me=this[de+--ye],Se=1;ye>0&&(Se*=256);)me+=this[de+--ye]*Se;return me},s.prototype.readUInt8=function(de,ye){return de=de>>>0,ye||re(de,1,this.length),this[de]},s.prototype.readUInt16LE=function(de,ye){return de=de>>>0,ye||re(de,2,this.length),this[de]|this[de+1]<<8},s.prototype.readUInt16BE=function(de,ye){return de=de>>>0,ye||re(de,2,this.length),this[de]<<8|this[de+1]},s.prototype.readUInt32LE=function(de,ye){return de=de>>>0,ye||re(de,4,this.length),(this[de]|this[de+1]<<8|this[de+2]<<16)+this[de+3]*16777216},s.prototype.readUInt32BE=function(de,ye){return de=de>>>0,ye||re(de,4,this.length),this[de]*16777216+(this[de+1]<<16|this[de+2]<<8|this[de+3])},s.prototype.readIntLE=function(de,ye,ge){de=de>>>0,ye=ye>>>0,ge||re(de,ye,this.length);for(var me=this[de],Se=1,Le=0;++Le<ye&&(Se*=256);)me+=this[de+Le]*Se;return Se*=128,me>=Se&&(me-=Math.pow(2,8*ye)),me},s.prototype.readIntBE=function(de,ye,ge){de=de>>>0,ye=ye>>>0,ge||re(de,ye,this.length);for(var me=ye,Se=1,Le=this[de+--me];me>0&&(Se*=256);)Le+=this[de+--me]*Se;return Se*=128,Le>=Se&&(Le-=Math.pow(2,8*ye)),Le},s.prototype.readInt8=function(de,ye){return de=de>>>0,ye||re(de,1,this.length),this[de]&128?(255-this[de]+1)*-1:this[de]},s.prototype.readInt16LE=function(de,ye){de=de>>>0,ye||re(de,2,this.length);var ge=this[de]|this[de+1]<<8;return ge&32768?ge|4294901760:ge},s.prototype.readInt16BE=function(de,ye){de=de>>>0,ye||re(de,2,this.length);var ge=this[de+1]|this[de]<<8;return ge&32768?ge|4294901760:ge},s.prototype.readInt32LE=function(de,ye){return de=de>>>0,ye||re(de,4,this.length),this[de]|this[de+1]<<8|this[de+2]<<16|this[de+3]<<24},s.prototype.readInt32BE=function(de,ye){return de=de>>>0,ye||re(de,4,this.length),this[de]<<24|this[de+1]<<16|this[de+2]<<8|this[de+3]},s.prototype.readFloatLE=function(de,ye){return de=de>>>0,ye||re(de,4,this.length),n.read(this,de,!0,23,4)},s.prototype.readFloatBE=function(de,ye){return de=de>>>0,ye||re(de,4,this.length),n.read(this,de,!1,23,4)},s.prototype.readDoubleLE=function(de,ye){return de=de>>>0,ye||re(de,8,this.length),n.read(this,de,!0,52,8)},s.prototype.readDoubleBE=function(de,ye){return de=de>>>0,ye||re(de,8,this.length),n.read(this,de,!1,52,8)};function ue(ce,de,ye,ge,me,Se){if(!s.isBuffer(ce))throw new TypeError('"buffer" argument must be a Buffer instance');if(de>me||de<Se)throw new RangeError('"value" argument is out of bounds');if(ye+ge>ce.length)throw new RangeError("Index out of range")}s.prototype.writeUIntLE=function(de,ye,ge,me){if(de=+de,ye=ye>>>0,ge=ge>>>0,!me){var Se=Math.pow(2,8*ge)-1;ue(this,de,ye,ge,Se,0)}var Le=1,Oe=0;for(this[ye]=de&255;++Oe<ge&&(Le*=256);)this[ye+Oe]=de/Le&255;return ye+ge},s.prototype.writeUIntBE=function(de,ye,ge,me){if(de=+de,ye=ye>>>0,ge=ge>>>0,!me){var Se=Math.pow(2,8*ge)-1;ue(this,de,ye,ge,Se,0)}var Le=ge-1,Oe=1;for(this[ye+Le]=de&255;--Le>=0&&(Oe*=256);)this[ye+Le]=de/Oe&255;return ye+ge},s.prototype.writeUInt8=function(de,ye,ge){return de=+de,ye=ye>>>0,ge||ue(this,de,ye,1,255,0),this[ye]=de&255,ye+1},s.prototype.writeUInt16LE=function(de,ye,ge){return de=+de,ye=ye>>>0,ge||ue(this,de,ye,2,65535,0),this[ye]=de&255,this[ye+1]=de>>>8,ye+2},s.prototype.writeUInt16BE=function(de,ye,ge){return de=+de,ye=ye>>>0,ge||ue(this,de,ye,2,65535,0),this[ye]=de>>>8,this[ye+1]=de&255,ye+2},s.prototype.writeUInt32LE=function(de,ye,ge){return de=+de,ye=ye>>>0,ge||ue(this,de,ye,4,4294967295,0),this[ye+3]=de>>>24,this[ye+2]=de>>>16,this[ye+1]=de>>>8,this[ye]=de&255,ye+4},s.prototype.writeUInt32BE=function(de,ye,ge){return de=+de,ye=ye>>>0,ge||ue(this,de,ye,4,4294967295,0),this[ye]=de>>>24,this[ye+1]=de>>>16,this[ye+2]=de>>>8,this[ye+3]=de&255,ye+4},s.prototype.writeIntLE=function(de,ye,ge,me){if(de=+de,ye=ye>>>0,!me){var Se=Math.pow(2,8*ge-1);ue(this,de,ye,ge,Se-1,-Se)}var Le=0,Oe=1,we=0;for(this[ye]=de&255;++Le<ge&&(Oe*=256);)de<0&&we===0&&this[ye+Le-1]!==0&&(we=1),this[ye+Le]=(de/Oe>>0)-we&255;return ye+ge},s.prototype.writeIntBE=function(de,ye,ge,me){if(de=+de,ye=ye>>>0,!me){var Se=Math.pow(2,8*ge-1);ue(this,de,ye,ge,Se-1,-Se)}var Le=ge-1,Oe=1,we=0;for(this[ye+Le]=de&255;--Le>=0&&(Oe*=256);)de<0&&we===0&&this[ye+Le+1]!==0&&(we=1),this[ye+Le]=(de/Oe>>0)-we&255;return ye+ge},s.prototype.writeInt8=function(de,ye,ge){return de=+de,ye=ye>>>0,ge||ue(this,de,ye,1,127,-128),de<0&&(de=255+de+1),this[ye]=de&255,ye+1},s.prototype.writeInt16LE=function(de,ye,ge){return de=+de,ye=ye>>>0,ge||ue(this,de,ye,2,32767,-32768),this[ye]=de&255,this[ye+1]=de>>>8,ye+2},s.prototype.writeInt16BE=function(de,ye,ge){return de=+de,ye=ye>>>0,ge||ue(this,de,ye,2,32767,-32768),this[ye]=de>>>8,this[ye+1]=de&255,ye+2},s.prototype.writeInt32LE=function(de,ye,ge){return de=+de,ye=ye>>>0,ge||ue(this,de,ye,4,2147483647,-2147483648),this[ye]=de&255,this[ye+1]=de>>>8,this[ye+2]=de>>>16,this[ye+3]=de>>>24,ye+4},s.prototype.writeInt32BE=function(de,ye,ge){return de=+de,ye=ye>>>0,ge||ue(this,de,ye,4,2147483647,-2147483648),de<0&&(de=4294967295+de+1),this[ye]=de>>>24,this[ye+1]=de>>>16,this[ye+2]=de>>>8,this[ye+3]=de&255,ye+4};function K(ce,de,ye,ge,me,Se){if(ye+ge>ce.length)throw new RangeError("Index out of range");if(ye<0)throw new RangeError("Index out of range")}function te(ce,de,ye,ge,me){return de=+de,ye=ye>>>0,me||K(ce,de,ye,4),n.write(ce,de,ye,ge,23,4),ye+4}s.prototype.writeFloatLE=function(de,ye,ge){return te(this,de,ye,!0,ge)},s.prototype.writeFloatBE=function(de,ye,ge){return te(this,de,ye,!1,ge)};function Y(ce,de,ye,ge,me){return de=+de,ye=ye>>>0,me||K(ce,de,ye,8),n.write(ce,de,ye,ge,52,8),ye+8}s.prototype.writeDoubleLE=function(de,ye,ge){return Y(this,de,ye,!0,ge)},s.prototype.writeDoubleBE=function(de,ye,ge){return Y(this,de,ye,!1,ge)},s.prototype.copy=function(de,ye,ge,me){if(!s.isBuffer(de))throw new TypeError("argument should be a Buffer");if(ge||(ge=0),!me&&me!==0&&(me=this.length),ye>=de.length&&(ye=de.length),ye||(ye=0),me>0&&me<ge&&(me=ge),me===ge||de.length===0||this.length===0)return 0;if(ye<0)throw new RangeError("targetStart out of bounds");if(ge<0||ge>=this.length)throw new RangeError("Index out of range");if(me<0)throw new RangeError("sourceEnd out of bounds");me>this.length&&(me=this.length),de.length-ye<me-ge&&(me=de.length-ye+ge);var Se=me-ge;if(this===de&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(ye,ge,me);else if(this===de&&ge<ye&&ye<me)for(var Le=Se-1;Le>=0;--Le)de[Le+ye]=this[Le+ge];else Uint8Array.prototype.set.call(de,this.subarray(ge,me),ye);return Se},s.prototype.fill=function(de,ye,ge,me){if(typeof de=="string"){if(typeof ye=="string"?(me=ye,ye=0,ge=this.length):typeof ge=="string"&&(me=ge,ge=this.length),me!==void 0&&typeof me!="string")throw new TypeError("encoding must be a string");if(typeof me=="string"&&!s.isEncoding(me))throw new TypeError("Unknown encoding: "+me);if(de.length===1){var Se=de.charCodeAt(0);(me==="utf8"&&Se<128||me==="latin1")&&(de=Se)}}else typeof de=="number"&&(de=de&255);if(ye<0||this.length<ye||this.length<ge)throw new RangeError("Out of range index");if(ge<=ye)return this;ye=ye>>>0,ge=ge===void 0?this.length:ge>>>0,de||(de=0);var Le;if(typeof de=="number")for(Le=ye;Le<ge;++Le)this[Le]=de;else{var Oe=s.isBuffer(de)?de:s.from(de,me),we=Oe.length;if(we===0)throw new TypeError('The value "'+de+'" is invalid for argument "value"');for(Le=0;Le<ge-ye;++Le)this[Le+ye]=Oe[Le%we]}return this};var H=/[^+/0-9A-Za-z-_]/g;function ee(ce){if(ce=ce.split("=")[0],ce=ce.trim().replace(H,""),ce.length<2)return"";for(;ce.length%4!==0;)ce=ce+"=";return ce}function ne(ce){return ce<16?"0"+ce.toString(16):ce.toString(16)}function Z(ce,de){de=de||1/0;for(var ye,ge=ce.length,me=null,Se=[],Le=0;Le<ge;++Le){if(ye=ce.charCodeAt(Le),ye>55295&&ye<57344){if(!me){if(ye>56319){(de-=3)>-1&&Se.push(239,191,189);continue}else if(Le+1===ge){(de-=3)>-1&&Se.push(239,191,189);continue}me=ye;continue}if(ye<56320){(de-=3)>-1&&Se.push(239,191,189),me=ye;continue}ye=(me-55296<<10|ye-56320)+65536}else me&&(de-=3)>-1&&Se.push(239,191,189);if(me=null,ye<128){if((de-=1)<0)break;Se.push(ye)}else if(ye<2048){if((de-=2)<0)break;Se.push(ye>>6|192,ye&63|128)}else if(ye<65536){if((de-=3)<0)break;Se.push(ye>>12|224,ye>>6&63|128,ye&63|128)}else if(ye<1114112){if((de-=4)<0)break;Se.push(ye>>18|240,ye>>12&63|128,ye>>6&63|128,ye&63|128)}else throw new Error("Invalid code point")}return Se}function q(ce){for(var de=[],ye=0;ye<ce.length;++ye)de.push(ce.charCodeAt(ye)&255);return de}function ie(ce,de){for(var ye,ge,me,Se=[],Le=0;Le<ce.length&&!((de-=2)<0);++Le)ye=ce.charCodeAt(Le),ge=ye>>8,me=ye%256,Se.push(me),Se.push(ge);return Se}function se(ce){return a.toByteArray(ee(ce))}function ae(ce,de,ye,ge){for(var me=0;me<ge&&!(me+ye>=de.length||me>=ce.length);++me)de[me+ye]=ce[me];return me}function oe(ce,de){return ce instanceof de||ce!=null&&ce.constructor!=null&&ce.constructor.name!=null&&ce.constructor.name===de.name}function be(ce){return ce!==ce}}).call(this)}).call(this,f("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:4}],4:[function(f,M,T){T.read=function(e,a,n,r,t){var h,s,o=t*8-r-1,y=(1<<o)-1,d=y>>1,p=-7,c=n?t-1:0,m=n?-1:1,l=e[a+c];for(c+=m,h=l&(1<<-p)-1,l>>=-p,p+=o;p>0;h=h*256+e[a+c],c+=m,p-=8);for(s=h&(1<<-p)-1,h>>=-p,p+=r;p>0;s=s*256+e[a+c],c+=m,p-=8);if(h===0)h=1-d;else{if(h===y)return s?NaN:(l?-1:1)*(1/0);s=s+Math.pow(2,r),h=h-d}return(l?-1:1)*s*Math.pow(2,h-r)},T.write=function(e,a,n,r,t,h){var s,o,y,d=h*8-t-1,p=(1<<d)-1,c=p>>1,m=t===23?Math.pow(2,-24)-Math.pow(2,-77):0,l=r?0:h-1,x=r?1:-1,u=a<0||a===0&&1/a<0?1:0;for(a=Math.abs(a),isNaN(a)||a===1/0?(o=isNaN(a)?1:0,s=p):(s=Math.floor(Math.log(a)/Math.LN2),a*(y=Math.pow(2,-s))<1&&(s--,y*=2),s+c>=1?a+=m/y:a+=m*Math.pow(2,1-c),a*y>=2&&(s++,y/=2),s+c>=p?(o=0,s=p):s+c>=1?(o=(a*y-1)*Math.pow(2,t),s=s+c):(o=a*Math.pow(2,c-1)*Math.pow(2,t),s=0));t>=8;e[n+l]=o&255,l+=x,o/=256,t-=8);for(s=s<<t|o,d+=t;d>0;e[n+l]=s&255,l+=x,s/=256,d-=8);e[n+l-x]|=u*128}},{}],5:[function(f,M,T){var e=M.exports={},a,n;function r(){throw new Error("setTimeout has not been defined")}function t(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?a=setTimeout:a=r}catch{a=r}try{typeof clearTimeout=="function"?n=clearTimeout:n=t}catch{n=t}})();function h(u){if(a===setTimeout)return setTimeout(u,0);if((a===r||!a)&&setTimeout)return a=setTimeout,setTimeout(u,0);try{return a(u,0)}catch{try{return a.call(null,u,0)}catch{return a.call(this,u,0)}}}function s(u){if(n===clearTimeout)return clearTimeout(u);if((n===t||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(u);try{return n(u)}catch{try{return n.call(null,u)}catch{return n.call(this,u)}}}var o=[],y=!1,d,p=-1;function c(){!y||!d||(y=!1,d.length?o=d.concat(o):p=-1,o.length&&m())}function m(){if(!y){var u=h(c);y=!0;for(var A=o.length;A;){for(d=o,o=[];++p<A;)d&&d[p].run();p=-1,A=o.length}d=null,y=!1,s(u)}}e.nextTick=function(u){var A=new Array(arguments.length-1);if(arguments.length>1)for(var _=1;_<arguments.length;_++)A[_-1]=arguments[_];o.push(new l(u,A)),o.length===1&&!y&&h(m)};function l(u,A){this.fun=u,this.array=A}l.prototype.run=function(){this.fun.apply(null,this.array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={};function x(){}e.on=x,e.addListener=x,e.once=x,e.off=x,e.removeListener=x,e.removeAllListeners=x,e.emit=x,e.prependListener=x,e.prependOnceListener=x,e.listeners=function(u){return[]},e.binding=function(u){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(u){throw new Error("process.chdir is not supported")},e.umask=function(){return 0}},{}],6:[function(f,M,T){M.exports={alpha_shape:f("alpha-shape"),convex_hull:f("convex-hull"),delaunay_triangulate:f("delaunay-triangulate"),gl_cone3d:f("gl-cone3d"),gl_error3d:f("gl-error3d"),gl_heatmap2d:f("gl-heatmap2d"),gl_line3d:f("gl-line3d"),gl_mesh3d:f("gl-mesh3d"),gl_plot2d:f("gl-plot2d"),gl_plot3d:f("gl-plot3d"),gl_pointcloud2d:f("gl-pointcloud2d"),gl_scatter3d:f("gl-scatter3d"),gl_select_box:f("gl-select-box"),gl_spikes2d:f("gl-spikes2d"),gl_streamtube3d:f("gl-streamtube3d"),gl_surface3d:f("gl-surface3d"),ndarray:f("ndarray"),ndarray_linear_interpolate:f("ndarray-linear-interpolate")}},{"alpha-shape":12,"convex-hull":58,"delaunay-triangulate":63,"gl-cone3d":79,"gl-error3d":84,"gl-heatmap2d":88,"gl-line3d":91,"gl-mesh3d":112,"gl-plot2d":118,"gl-plot3d":121,"gl-pointcloud2d":123,"gl-scatter3d":128,"gl-select-box":130,"gl-spikes2d":139,"gl-streamtube3d":143,"gl-surface3d":145,ndarray:259,"ndarray-linear-interpolate":253}],7:[function(f,M,T){M.exports=h;var e=f("turntable-camera-controller"),a=f("orbit-camera-controller"),n=f("matrix-camera-controller");function r(s,o){this._controllerNames=Object.keys(s),this._controllerList=this._controllerNames.map(function(y){return s[y]}),this._mode=o,this._active=s[o],this._active||(this._mode="turntable",this._active=s.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var t=r.prototype;t.flush=function(s){for(var o=this._controllerList,y=0;y<o.length;++y)o[y].flush(s)},t.idle=function(s){for(var o=this._controllerList,y=0;y<o.length;++y)o[y].idle(s)},t.lookAt=function(s,o,y,d){for(var p=this._controllerList,c=0;c<p.length;++c)p[c].lookAt(s,o,y,d)},t.rotate=function(s,o,y,d){for(var p=this._controllerList,c=0;c<p.length;++c)p[c].rotate(s,o,y,d)},t.pan=function(s,o,y,d){for(var p=this._controllerList,c=0;c<p.length;++c)p[c].pan(s,o,y,d)},t.translate=function(s,o,y,d){for(var p=this._controllerList,c=0;c<p.length;++c)p[c].translate(s,o,y,d)},t.setMatrix=function(s,o){for(var y=this._controllerList,d=0;d<y.length;++d)y[d].setMatrix(s,o)},t.setDistanceLimits=function(s,o){for(var y=this._controllerList,d=0;d<y.length;++d)y[d].setDistanceLimits(s,o)},t.setDistance=function(s,o){for(var y=this._controllerList,d=0;d<y.length;++d)y[d].setDistance(s,o)},t.recalcMatrix=function(s){this._active.recalcMatrix(s)},t.getDistance=function(s){return this._active.getDistance(s)},t.getDistanceLimits=function(s){return this._active.getDistanceLimits(s)},t.lastT=function(){return this._active.lastT()},t.setMode=function(s){if(s!==this._mode){var o=this._controllerNames.indexOf(s);if(!(o<0)){var y=this._active,d=this._controllerList[o],p=Math.max(y.lastT(),d.lastT());y.recalcMatrix(p),d.setMatrix(p,y.computedMatrix),this._active=d,this._mode=s,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},t.getMode=function(){return this._mode};function h(s){s=s||{};var o=s.eye||[0,0,1],y=s.center||[0,0,0],d=s.up||[0,1,0],p=s.distanceLimits||[0,1/0],c=s.mode||"turntable",m=e(),l=a(),x=n();return m.setDistanceLimits(p[0],p[1]),m.lookAt(0,o,y,d),l.setDistanceLimits(p[0],p[1]),l.lookAt(0,o,y,d),x.setDistanceLimits(p[0],p[1]),x.lookAt(0,o,y,d),new r({turntable:m,orbit:l,matrix:x},c)}},{"matrix-camera-controller":245,"orbit-camera-controller":263,"turntable-camera-controller":305}],8:[function(f,M,T){var e=typeof WeakMap>"u"?f("weak-map"):WeakMap,a=f("gl-buffer"),n=f("gl-vao"),r=new e;function t(h){var s=r.get(h),o=s&&(s._triangleBuffer.handle||s._triangleBuffer.buffer);if(!o||!h.isBuffer(o)){var y=a(h,new Float32Array([-1,-1,-1,4,4,-1]));s=n(h,[{buffer:y,type:h.FLOAT,size:2}]),s._triangleBuffer=y,r.set(h,s)}s.bind(),h.drawArrays(h.TRIANGLES,0,3),s.unbind()}M.exports=t},{"gl-buffer":78,"gl-vao":150,"weak-map":313}],9:[function(f,M,T){var e=f("pad-left");M.exports=a;function a(n,r,t){r=typeof r=="number"?r:1,t=t||": ";var h=n.split(/\r?\n/),s=String(h.length+r-1).length;return h.map(function(o,y){var d=y+r,p=String(d).length,c=e(d,s-p);return c+t+o}).join(`
`)}},{"pad-left":264}],10:[function(f,M,T){M.exports=n;var e=f("robust-orientation");function a(r,t){for(var h=new Array(t+1),s=0;s<r.length;++s)h[s]=r[s];for(var s=0;s<=r.length;++s){for(var o=r.length;o<=t;++o){for(var y=new Array(t),d=0;d<t;++d)y[d]=Math.pow(o+1-s,d);h[o]=y}var p=e.apply(void 0,h);if(p)return!0}return!1}function n(r){var t=r.length;if(t===0)return[];if(t===1)return[0];for(var h=r[0].length,s=[r[0]],o=[0],y=1;y<t;++y){if(s.push(r[y]),!a(s,h)){s.pop();continue}if(o.push(y),o.length===h+1)return o}return o}},{"robust-orientation":284}],11:[function(f,M,T){M.exports=n;var e=f("delaunay-triangulate"),a=f("circumradius");function n(r,t){return e(t).filter(function(h){for(var s=new Array(h.length),o=0;o<h.length;++o)s[o]=t[h[o]];return a(s)*r<1})}},{circumradius:49,"delaunay-triangulate":63}],12:[function(f,M,T){M.exports=n;var e=f("alpha-complex"),a=f("simplicial-complex-boundary");function n(r,t){return a(e(r,t))}},{"alpha-complex":11,"simplicial-complex-boundary":290}],13:[function(f,M,T){M.exports=function(a){return atob(a)}},{}],14:[function(f,M,T){M.exports=n;var e=f("robust-linear-solve");function a(r){for(var t=0,h=0;h<r.length;++h)t+=r[h];return t}function n(r,t){for(var h=t.length,s=new Array(h+1),o=0;o<h;++o){for(var y=new Array(h+1),d=0;d<=h;++d)y[d]=r[d][o];s[o]=y}s[h]=new Array(h+1);for(var o=0;o<=h;++o)s[h][o]=1;for(var p=new Array(h+1),o=0;o<h;++o)p[o]=t[o];p[h]=1;var c=e(s,p),m=a(c[h+1]);m===0&&(m=1);for(var l=new Array(h+1),o=0;o<=h;++o)l[o]=a(c[o])/m;return l}},{"robust-linear-solve":283}],15:[function(f,M,T){var e=f("./lib/rationalize");M.exports=a;function a(n,r){return e(n[0].mul(r[1]).add(r[0].mul(n[1])),n[1].mul(r[1]))}},{"./lib/rationalize":25}],16:[function(f,M,T){M.exports=e;function e(a,n){return a[0].mul(n[1]).cmp(n[0].mul(a[1]))}},{}],17:[function(f,M,T){var e=f("./lib/rationalize");M.exports=a;function a(n,r){return e(n[0].mul(r[1]),n[1].mul(r[0]))}},{"./lib/rationalize":25}],18:[function(f,M,T){var e=f("./is-rat"),a=f("./lib/is-bn"),n=f("./lib/num-to-bn"),r=f("./lib/str-to-bn"),t=f("./lib/rationalize"),h=f("./div");M.exports=s;function s(o,y){if(e(o))return y?h(o,s(y)):[o[0].clone(),o[1].clone()];var d=0,p,c;if(a(o))p=o.clone();else if(typeof o=="string")p=r(o);else{if(o===0)return[n(0),n(1)];if(o===Math.floor(o))p=n(o);else{for(;o!==Math.floor(o);)o=o*Math.pow(2,256),d-=256;p=n(o)}}if(e(y))p.mul(y[1]),c=y[0].clone();else if(a(y))c=y.clone();else if(typeof y=="string")c=r(y);else if(!y)c=n(1);else if(y===Math.floor(y))c=n(y);else{for(;y!==Math.floor(y);)y=y*Math.pow(2,256),d+=256;c=n(y)}return d>0?p=p.ushln(d):d<0&&(c=c.ushln(-d)),t(p,c)}},{"./div":17,"./is-rat":19,"./lib/is-bn":23,"./lib/num-to-bn":24,"./lib/rationalize":25,"./lib/str-to-bn":26}],19:[function(f,M,T){var e=f("./lib/is-bn");M.exports=a;function a(n){return Array.isArray(n)&&n.length===2&&e(n[0])&&e(n[1])}},{"./lib/is-bn":23}],20:[function(f,M,T){var e=f("bn.js");M.exports=a;function a(n){return n.cmp(new e(0))}},{"bn.js":33}],21:[function(f,M,T){var e=f("./bn-sign");M.exports=a;function a(n){var r=n.length,t=n.words,h=0;if(r===1)h=t[0];else if(r===2)h=t[0]+t[1]*67108864;else for(var s=0;s<r;s++){var o=t[s];h+=o*Math.pow(67108864,s)}return e(n)*h}},{"./bn-sign":20}],22:[function(f,M,T){var e=f("double-bits"),a=f("bit-twiddle").countTrailingZeros;M.exports=n;function n(r){var t=a(e.lo(r));if(t<32)return t;var h=a(e.hi(r));return h>20?52:h+32}},{"bit-twiddle":32,"double-bits":64}],23:[function(f,M,T){f("bn.js"),M.exports=e;function e(a){return a&&typeof a=="object"&&Boolean(a.words)}},{"bn.js":33}],24:[function(f,M,T){var e=f("bn.js"),a=f("double-bits");M.exports=n;function n(r){var t=a.exponent(r);return t<52?new e(r):new e(r*Math.pow(2,52-t)).ushln(t-52)}},{"bn.js":33,"double-bits":64}],25:[function(f,M,T){var e=f("./num-to-bn"),a=f("./bn-sign");M.exports=n;function n(r,t){var h=a(r),s=a(t);if(h===0)return[e(0),e(1)];if(s===0)return[e(0),e(0)];s<0&&(r=r.neg(),t=t.neg());var o=r.gcd(t);return o.cmpn(1)?[r.div(o),t.div(o)]:[r,t]}},{"./bn-sign":20,"./num-to-bn":24}],26:[function(f,M,T){var e=f("bn.js");M.exports=a;function a(n){return new e(n)}},{"bn.js":33}],27:[function(f,M,T){var e=f("./lib/rationalize");M.exports=a;function a(n,r){return e(n[0].mul(r[0]),n[1].mul(r[1]))}},{"./lib/rationalize":25}],28:[function(f,M,T){var e=f("./lib/bn-sign");M.exports=a;function a(n){return e(n[0])*e(n[1])}},{"./lib/bn-sign":20}],29:[function(f,M,T){var e=f("./lib/rationalize");M.exports=a;function a(n,r){return e(n[0].mul(r[1]).sub(n[1].mul(r[0])),n[1].mul(r[1]))}},{"./lib/rationalize":25}],30:[function(f,M,T){var e=f("./lib/bn-to-num"),a=f("./lib/ctz");M.exports=n;function n(r){var t=r[0],h=r[1];if(t.cmpn(0)===0)return 0;var s=t.abs().divmod(h.abs()),o=s.div,y=e(o),d=s.mod,p=t.negative!==h.negative?-1:1;if(d.cmpn(0)===0)return p*y;if(y){var c=a(y)+4,m=e(d.ushln(c).divRound(h));return p*(y+m*Math.pow(2,-c))}else{var l=h.bitLength()-d.bitLength()+53,m=e(d.ushln(l).divRound(h));return l<1023?p*m*Math.pow(2,-l):(m*=Math.pow(2,-1023),p*m*Math.pow(2,1023-l))}}},{"./lib/bn-to-num":21,"./lib/ctz":22}],31:[function(f,M,T){function e(s,o,y,d,p){for(var c=p+1;d<=p;){var m=d+p>>>1,l=s[m],x=y!==void 0?y(l,o):l-o;x>=0?(c=m,p=m-1):d=m+1}return c}function a(s,o,y,d,p){for(var c=p+1;d<=p;){var m=d+p>>>1,l=s[m],x=y!==void 0?y(l,o):l-o;x>0?(c=m,p=m-1):d=m+1}return c}function n(s,o,y,d,p){for(var c=d-1;d<=p;){var m=d+p>>>1,l=s[m],x=y!==void 0?y(l,o):l-o;x<0?(c=m,d=m+1):p=m-1}return c}function r(s,o,y,d,p){for(var c=d-1;d<=p;){var m=d+p>>>1,l=s[m],x=y!==void 0?y(l,o):l-o;x<=0?(c=m,d=m+1):p=m-1}return c}function t(s,o,y,d,p){for(;d<=p;){var c=d+p>>>1,m=s[c],l=y!==void 0?y(m,o):m-o;if(l===0)return c;l<=0?d=c+1:p=c-1}return-1}function h(s,o,y,d,p,c){return typeof y=="function"?c(s,o,y,d===void 0?0:d|0,p===void 0?s.length-1:p|0):c(s,o,void 0,y===void 0?0:y|0,d===void 0?s.length-1:d|0)}M.exports={ge:function(s,o,y,d,p){return h(s,o,y,d,p,e)},gt:function(s,o,y,d,p){return h(s,o,y,d,p,a)},lt:function(s,o,y,d,p){return h(s,o,y,d,p,n)},le:function(s,o,y,d,p){return h(s,o,y,d,p,r)},eq:function(s,o,y,d,p){return h(s,o,y,d,p,t)}}},{}],32:[function(f,M,T){var e=32;T.INT_BITS=e,T.INT_MAX=2147483647,T.INT_MIN=-1<<e-1,T.sign=function(r){return(r>0)-(r<0)},T.abs=function(r){var t=r>>e-1;return(r^t)-t},T.min=function(r,t){return t^(r^t)&-(r<t)},T.max=function(r,t){return r^(r^t)&-(r<t)},T.isPow2=function(r){return!(r&r-1)&&!!r},T.log2=function(r){var t,h;return t=(r>65535)<<4,r>>>=t,h=(r>255)<<3,r>>>=h,t|=h,h=(r>15)<<2,r>>>=h,t|=h,h=(r>3)<<1,r>>>=h,t|=h,t|r>>1},T.log10=function(r){return r>=1e9?9:r>=1e8?8:r>=1e7?7:r>=1e6?6:r>=1e5?5:r>=1e4?4:r>=1e3?3:r>=100?2:r>=10?1:0},T.popCount=function(r){return r=r-(r>>>1&1431655765),r=(r&858993459)+(r>>>2&858993459),(r+(r>>>4)&252645135)*16843009>>>24};function a(r){var t=32;return r&=-r,r&&t--,r&65535&&(t-=16),r&16711935&&(t-=8),r&252645135&&(t-=4),r&858993459&&(t-=2),r&1431655765&&(t-=1),t}T.countTrailingZeros=a,T.nextPow2=function(r){return r+=r===0,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r+1},T.prevPow2=function(r){return r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r-(r>>>1)},T.parity=function(r){return r^=r>>>16,r^=r>>>8,r^=r>>>4,r&=15,27030>>>r&1};var n=new Array(256);(function(r){for(var t=0;t<256;++t){var h=t,s=t,o=7;for(h>>>=1;h;h>>>=1)s<<=1,s|=h&1,--o;r[t]=s<<o&255}})(n),T.reverse=function(r){return n[r&255]<<24|n[r>>>8&255]<<16|n[r>>>16&255]<<8|n[r>>>24&255]},T.interleave2=function(r,t){return r&=65535,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,t&=65535,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,r|t<<1},T.deinterleave2=function(r,t){return r=r>>>t&1431655765,r=(r|r>>>1)&858993459,r=(r|r>>>2)&252645135,r=(r|r>>>4)&16711935,r=(r|r>>>16)&65535,r<<16>>16},T.interleave3=function(r,t,h){return r&=1023,r=(r|r<<16)&4278190335,r=(r|r<<8)&251719695,r=(r|r<<4)&3272356035,r=(r|r<<2)&1227133513,t&=1023,t=(t|t<<16)&4278190335,t=(t|t<<8)&251719695,t=(t|t<<4)&3272356035,t=(t|t<<2)&1227133513,r|=t<<1,h&=1023,h=(h|h<<16)&4278190335,h=(h|h<<8)&251719695,h=(h|h<<4)&3272356035,h=(h|h<<2)&1227133513,r|h<<2},T.deinterleave3=function(r,t){return r=r>>>t&1227133513,r=(r|r>>>2)&3272356035,r=(r|r>>>4)&251719695,r=(r|r>>>8)&4278190335,r=(r|r>>>16)&1023,r<<22>>22},T.nextCombination=function(r){var t=r|r-1;return t+1|(~t&-~t)-1>>>a(r)+1}},{}],33:[function(f,M,T){(function(e,a){function n(I,D){if(!I)throw new Error(D||"Assertion failed")}function r(I,D){I.super_=D;var R=function(){};R.prototype=D.prototype,I.prototype=new R,I.prototype.constructor=I}function t(I,D,R){if(t.isBN(I))return I;this.negative=0,this.words=null,this.length=0,this.red=null,I!==null&&((D==="le"||D==="be")&&(R=D,D=10),this._init(I||0,D||10,R||"be"))}typeof e=="object"?e.exports=t:a.BN=t,t.BN=t,t.wordSize=26;var h;try{typeof window<"u"&&typeof window.Buffer<"u"?h=window.Buffer:h=f("buffer").Buffer}catch{}t.isBN=function(D){return D instanceof t?!0:D!==null&&typeof D=="object"&&D.constructor.wordSize===t.wordSize&&Array.isArray(D.words)},t.max=function(D,R){return D.cmp(R)>0?D:R},t.min=function(D,R){return D.cmp(R)<0?D:R},t.prototype._init=function(D,R,O){if(typeof D=="number")return this._initNumber(D,R,O);if(typeof D=="object")return this._initArray(D,R,O);R==="hex"&&(R=16),n(R===(R|0)&&R>=2&&R<=36),D=D.toString().replace(/\s+/g,"");var z=0;D[0]==="-"&&(z++,this.negative=1),z<D.length&&(R===16?this._parseHex(D,z,O):(this._parseBase(D,R,z),O==="le"&&this._initArray(this.toArray(),R,O)))},t.prototype._initNumber=function(D,R,O){D<0&&(this.negative=1,D=-D),D<67108864?(this.words=[D&67108863],this.length=1):D<4503599627370496?(this.words=[D&67108863,D/67108864&67108863],this.length=2):(n(D<9007199254740992),this.words=[D&67108863,D/67108864&67108863,1],this.length=3),O==="le"&&this._initArray(this.toArray(),R,O)},t.prototype._initArray=function(D,R,O){if(n(typeof D.length=="number"),D.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(D.length/3),this.words=new Array(this.length);for(var z=0;z<this.length;z++)this.words[z]=0;var B,G,Q=0;if(O==="be")for(z=D.length-1,B=0;z>=0;z-=3)G=D[z]|D[z-1]<<8|D[z-2]<<16,this.words[B]|=G<<Q&67108863,this.words[B+1]=G>>>26-Q&67108863,Q+=24,Q>=26&&(Q-=26,B++);else if(O==="le")for(z=0,B=0;z<D.length;z+=3)G=D[z]|D[z+1]<<8|D[z+2]<<16,this.words[B]|=G<<Q&67108863,this.words[B+1]=G>>>26-Q&67108863,Q+=24,Q>=26&&(Q-=26,B++);return this.strip()};function s(I,D){var R=I.charCodeAt(D);return R>=65&&R<=70?R-55:R>=97&&R<=102?R-87:R-48&15}function o(I,D,R){var O=s(I,R);return R-1>=D&&(O|=s(I,R-1)<<4),O}t.prototype._parseHex=function(D,R,O){this.length=Math.ceil((D.length-R)/6),this.words=new Array(this.length);for(var z=0;z<this.length;z++)this.words[z]=0;var B=0,G=0,Q;if(O==="be")for(z=D.length-1;z>=R;z-=2)Q=o(D,R,z)<<B,this.words[G]|=Q&67108863,B>=18?(B-=18,G+=1,this.words[G]|=Q>>>26):B+=8;else{var X=D.length-R;for(z=X%2===0?R+1:R;z<D.length;z+=2)Q=o(D,R,z)<<B,this.words[G]|=Q&67108863,B>=18?(B-=18,G+=1,this.words[G]|=Q>>>26):B+=8}this.strip()};function y(I,D,R,O){for(var z=0,B=Math.min(I.length,R),G=D;G<B;G++){var Q=I.charCodeAt(G)-48;z*=O,Q>=49?z+=Q-49+10:Q>=17?z+=Q-17+10:z+=Q}return z}t.prototype._parseBase=function(D,R,O){this.words=[0],this.length=1;for(var z=0,B=1;B<=67108863;B*=R)z++;z--,B=B/R|0;for(var G=D.length-O,Q=G%z,X=Math.min(G,G-Q)+O,j=0,re=O;re<X;re+=z)j=y(D,re,re+z,R),this.imuln(B),this.words[0]+j<67108864?this.words[0]+=j:this._iaddn(j);if(Q!==0){var ue=1;for(j=y(D,re,D.length,R),re=0;re<Q;re++)ue*=R;this.imuln(ue),this.words[0]+j<67108864?this.words[0]+=j:this._iaddn(j)}this.strip()},t.prototype.copy=function(D){D.words=new Array(this.length);for(var R=0;R<this.length;R++)D.words[R]=this.words[R];D.length=this.length,D.negative=this.negative,D.red=this.red},t.prototype.clone=function(){var D=new t(null);return this.copy(D),D},t.prototype._expand=function(D){for(;this.length<D;)this.words[this.length++]=0;return this},t.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},t.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},t.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],p=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],c=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];t.prototype.toString=function(D,R){D=D||10,R=R|0||1;var O;if(D===16||D==="hex"){O="";for(var z=0,B=0,G=0;G<this.length;G++){var Q=this.words[G],X=((Q<<z|B)&16777215).toString(16);B=Q>>>24-z&16777215,B!==0||G!==this.length-1?O=d[6-X.length]+X+O:O=X+O,z+=2,z>=26&&(z-=26,G--)}for(B!==0&&(O=B.toString(16)+O);O.length%R!==0;)O="0"+O;return this.negative!==0&&(O="-"+O),O}if(D===(D|0)&&D>=2&&D<=36){var j=p[D],re=c[D];O="";var ue=this.clone();for(ue.negative=0;!ue.isZero();){var K=ue.modn(re).toString(D);ue=ue.idivn(re),ue.isZero()?O=K+O:O=d[j-K.length]+K+O}for(this.isZero()&&(O="0"+O);O.length%R!==0;)O="0"+O;return this.negative!==0&&(O="-"+O),O}n(!1,"Base should be between 2 and 36")},t.prototype.toNumber=function(){var D=this.words[0];return this.length===2?D+=this.words[1]*67108864:this.length===3&&this.words[2]===1?D+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-D:D},t.prototype.toJSON=function(){return this.toString(16)},t.prototype.toBuffer=function(D,R){return n(typeof h<"u"),this.toArrayLike(h,D,R)},t.prototype.toArray=function(D,R){return this.toArrayLike(Array,D,R)},t.prototype.toArrayLike=function(D,R,O){var z=this.byteLength(),B=O||Math.max(1,z);n(z<=B,"byte array longer than desired length"),n(B>0,"Requested array length <= 0"),this.strip();var G=R==="le",Q=new D(B),X,j,re=this.clone();if(G){for(j=0;!re.isZero();j++)X=re.andln(255),re.iushrn(8),Q[j]=X;for(;j<B;j++)Q[j]=0}else{for(j=0;j<B-z;j++)Q[j]=0;for(j=0;!re.isZero();j++)X=re.andln(255),re.iushrn(8),Q[B-j-1]=X}return Q},Math.clz32?t.prototype._countBits=function(D){return 32-Math.clz32(D)}:t.prototype._countBits=function(D){var R=D,O=0;return R>=4096&&(O+=13,R>>>=13),R>=64&&(O+=7,R>>>=7),R>=8&&(O+=4,R>>>=4),R>=2&&(O+=2,R>>>=2),O+R},t.prototype._zeroBits=function(D){if(D===0)return 26;var R=D,O=0;return(R&8191)===0&&(O+=13,R>>>=13),(R&127)===0&&(O+=7,R>>>=7),(R&15)===0&&(O+=4,R>>>=4),(R&3)===0&&(O+=2,R>>>=2),(R&1)===0&&O++,O},t.prototype.bitLength=function(){var D=this.words[this.length-1],R=this._countBits(D);return(this.length-1)*26+R};function m(I){for(var D=new Array(I.bitLength()),R=0;R<D.length;R++){var O=R/26|0,z=R%26;D[R]=(I.words[O]&1<<z)>>>z}return D}t.prototype.zeroBits=function(){if(this.isZero())return 0;for(var D=0,R=0;R<this.length;R++){var O=this._zeroBits(this.words[R]);if(D+=O,O!==26)break}return D},t.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},t.prototype.toTwos=function(D){return this.negative!==0?this.abs().inotn(D).iaddn(1):this.clone()},t.prototype.fromTwos=function(D){return this.testn(D-1)?this.notn(D).iaddn(1).ineg():this.clone()},t.prototype.isNeg=function(){return this.negative!==0},t.prototype.neg=function(){return this.clone().ineg()},t.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},t.prototype.iuor=function(D){for(;this.length<D.length;)this.words[this.length++]=0;for(var R=0;R<D.length;R++)this.words[R]=this.words[R]|D.words[R];return this.strip()},t.prototype.ior=function(D){return n((this.negative|D.negative)===0),this.iuor(D)},t.prototype.or=function(D){return this.length>D.length?this.clone().ior(D):D.clone().ior(this)},t.prototype.uor=function(D){return this.length>D.length?this.clone().iuor(D):D.clone().iuor(this)},t.prototype.iuand=function(D){var R;this.length>D.length?R=D:R=this;for(var O=0;O<R.length;O++)this.words[O]=this.words[O]&D.words[O];return this.length=R.length,this.strip()},t.prototype.iand=function(D){return n((this.negative|D.negative)===0),this.iuand(D)},t.prototype.and=function(D){return this.length>D.length?this.clone().iand(D):D.clone().iand(this)},t.prototype.uand=function(D){return this.length>D.length?this.clone().iuand(D):D.clone().iuand(this)},t.prototype.iuxor=function(D){var R,O;this.length>D.length?(R=this,O=D):(R=D,O=this);for(var z=0;z<O.length;z++)this.words[z]=R.words[z]^O.words[z];if(this!==R)for(;z<R.length;z++)this.words[z]=R.words[z];return this.length=R.length,this.strip()},t.prototype.ixor=function(D){return n((this.negative|D.negative)===0),this.iuxor(D)},t.prototype.xor=function(D){return this.length>D.length?this.clone().ixor(D):D.clone().ixor(this)},t.prototype.uxor=function(D){return this.length>D.length?this.clone().iuxor(D):D.clone().iuxor(this)},t.prototype.inotn=function(D){n(typeof D=="number"&&D>=0);var R=Math.ceil(D/26)|0,O=D%26;this._expand(R),O>0&&R--;for(var z=0;z<R;z++)this.words[z]=~this.words[z]&67108863;return O>0&&(this.words[z]=~this.words[z]&67108863>>26-O),this.strip()},t.prototype.notn=function(D){return this.clone().inotn(D)},t.prototype.setn=function(D,R){n(typeof D=="number"&&D>=0);var O=D/26|0,z=D%26;return this._expand(O+1),R?this.words[O]=this.words[O]|1<<z:this.words[O]=this.words[O]&~(1<<z),this.strip()},t.prototype.iadd=function(D){var R;if(this.negative!==0&&D.negative===0)return this.negative=0,R=this.isub(D),this.negative^=1,this._normSign();if(this.negative===0&&D.negative!==0)return D.negative=0,R=this.isub(D),D.negative=1,R._normSign();var O,z;this.length>D.length?(O=this,z=D):(O=D,z=this);for(var B=0,G=0;G<z.length;G++)R=(O.words[G]|0)+(z.words[G]|0)+B,this.words[G]=R&67108863,B=R>>>26;for(;B!==0&&G<O.length;G++)R=(O.words[G]|0)+B,this.words[G]=R&67108863,B=R>>>26;if(this.length=O.length,B!==0)this.words[this.length]=B,this.length++;else if(O!==this)for(;G<O.length;G++)this.words[G]=O.words[G];return this},t.prototype.add=function(D){var R;return D.negative!==0&&this.negative===0?(D.negative=0,R=this.sub(D),D.negative^=1,R):D.negative===0&&this.negative!==0?(this.negative=0,R=D.sub(this),this.negative=1,R):this.length>D.length?this.clone().iadd(D):D.clone().iadd(this)},t.prototype.isub=function(D){if(D.negative!==0){D.negative=0;var R=this.iadd(D);return D.negative=1,R._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(D),this.negative=1,this._normSign();var O=this.cmp(D);if(O===0)return this.negative=0,this.length=1,this.words[0]=0,this;var z,B;O>0?(z=this,B=D):(z=D,B=this);for(var G=0,Q=0;Q<B.length;Q++)R=(z.words[Q]|0)-(B.words[Q]|0)+G,G=R>>26,this.words[Q]=R&67108863;for(;G!==0&&Q<z.length;Q++)R=(z.words[Q]|0)+G,G=R>>26,this.words[Q]=R&67108863;if(G===0&&Q<z.length&&z!==this)for(;Q<z.length;Q++)this.words[Q]=z.words[Q];return this.length=Math.max(this.length,Q),z!==this&&(this.negative=1),this.strip()},t.prototype.sub=function(D){return this.clone().isub(D)};function l(I,D,R){R.negative=D.negative^I.negative;var O=I.length+D.length|0;R.length=O,O=O-1|0;var z=I.words[0]|0,B=D.words[0]|0,G=z*B,Q=G&67108863,X=G/67108864|0;R.words[0]=Q;for(var j=1;j<O;j++){for(var re=X>>>26,ue=X&67108863,K=Math.min(j,D.length-1),te=Math.max(0,j-I.length+1);te<=K;te++){var Y=j-te|0;z=I.words[Y]|0,B=D.words[te]|0,G=z*B+ue,re+=G/67108864|0,ue=G&67108863}R.words[j]=ue|0,X=re|0}return X!==0?R.words[j]=X|0:R.length--,R.strip()}var x=function(D,R,O){var z=D.words,B=R.words,G=O.words,Q=0,X,j,re,ue=z[0]|0,K=ue&8191,te=ue>>>13,Y=z[1]|0,H=Y&8191,ee=Y>>>13,ne=z[2]|0,Z=ne&8191,q=ne>>>13,ie=z[3]|0,se=ie&8191,ae=ie>>>13,oe=z[4]|0,be=oe&8191,ce=oe>>>13,de=z[5]|0,ye=de&8191,ge=de>>>13,me=z[6]|0,Se=me&8191,Le=me>>>13,Oe=z[7]|0,we=Oe&8191,Ce=Oe>>>13,Ke=z[8]|0,Ye=Ke&8191,Fe=Ke>>>13,Re=z[9]|0,je=Re&8191,xt=Re>>>13,Nt=B[0]|0,tr=Nt&8191,Ht=Nt>>>13,Pt=B[1]|0,$t=Pt&8191,Ut=Pt>>>13,Lt=B[2]|0,We=Lt&8191,ot=Lt>>>13,Ge=B[3]|0,Me=Ge&8191,Ve=Ge>>>13,Qe=B[4]|0,tt=Qe&8191,St=Qe>>>13,wt=B[5]|0,Ct=wt&8191,jt=wt>>>13,Bt=B[6]|0,Wt=Bt&8191,Qt=Bt>>>13,Zt=B[7]|0,cr=Zt&8191,Xr=Zt>>>13,vn=B[8]|0,en=vn&8191,ut=vn>>>13,ar=B[9]|0,rr=ar&8191,Kt=ar>>>13;O.negative=D.negative^R.negative,O.length=19,X=Math.imul(K,tr),j=Math.imul(K,Ht),j=j+Math.imul(te,tr)|0,re=Math.imul(te,Ht);var Er=(Q+X|0)+((j&8191)<<13)|0;Q=(re+(j>>>13)|0)+(Er>>>26)|0,Er&=67108863,X=Math.imul(H,tr),j=Math.imul(H,Ht),j=j+Math.imul(ee,tr)|0,re=Math.imul(ee,Ht),X=X+Math.imul(K,$t)|0,j=j+Math.imul(K,Ut)|0,j=j+Math.imul(te,$t)|0,re=re+Math.imul(te,Ut)|0;var st=(Q+X|0)+((j&8191)<<13)|0;Q=(re+(j>>>13)|0)+(st>>>26)|0,st&=67108863,X=Math.imul(Z,tr),j=Math.imul(Z,Ht),j=j+Math.imul(q,tr)|0,re=Math.imul(q,Ht),X=X+Math.imul(H,$t)|0,j=j+Math.imul(H,Ut)|0,j=j+Math.imul(ee,$t)|0,re=re+Math.imul(ee,Ut)|0,X=X+Math.imul(K,We)|0,j=j+Math.imul(K,ot)|0,j=j+Math.imul(te,We)|0,re=re+Math.imul(te,ot)|0;var et=(Q+X|0)+((j&8191)<<13)|0;Q=(re+(j>>>13)|0)+(et>>>26)|0,et&=67108863,X=Math.imul(se,tr),j=Math.imul(se,Ht),j=j+Math.imul(ae,tr)|0,re=Math.imul(ae,Ht),X=X+Math.imul(Z,$t)|0,j=j+Math.imul(Z,Ut)|0,j=j+Math.imul(q,$t)|0,re=re+Math.imul(q,Ut)|0,X=X+Math.imul(H,We)|0,j=j+Math.imul(H,ot)|0,j=j+Math.imul(ee,We)|0,re=re+Math.imul(ee,ot)|0,X=X+Math.imul(K,Me)|0,j=j+Math.imul(K,Ve)|0,j=j+Math.imul(te,Me)|0,re=re+Math.imul(te,Ve)|0;var ht=(Q+X|0)+((j&8191)<<13)|0;Q=(re+(j>>>13)|0)+(ht>>>26)|0,ht&=67108863,X=Math.imul(be,tr),j=Math.imul(be,Ht),j=j+Math.imul(ce,tr)|0,re=Math.imul(ce,Ht),X=X+Math.imul(se,$t)|0,j=j+Math.imul(se,Ut)|0,j=j+Math.imul(ae,$t)|0,re=re+Math.imul(ae,Ut)|0,X=X+Math.imul(Z,We)|0,j=j+Math.imul(Z,ot)|0,j=j+Math.imul(q,We)|0,re=re+Math.imul(q,ot)|0,X=X+Math.imul(H,Me)|0,j=j+Math.imul(H,Ve)|0,j=j+Math.imul(ee,Me)|0,re=re+Math.imul(ee,Ve)|0,X=X+Math.imul(K,tt)|0,j=j+Math.imul(K,St)|0,j=j+Math.imul(te,tt)|0,re=re+Math.imul(te,St)|0;var vt=(Q+X|0)+((j&8191)<<13)|0;Q=(re+(j>>>13)|0)+(vt>>>26)|0,vt&=67108863,X=Math.imul(ye,tr),j=Math.imul(ye,Ht),j=j+Math.imul(ge,tr)|0,re=Math.imul(ge,Ht),X=X+Math.imul(be,$t)|0,j=j+Math.imul(be,Ut)|0,j=j+Math.imul(ce,$t)|0,re=re+Math.imul(ce,Ut)|0,X=X+Math.imul(se,We)|0,j=j+Math.imul(se,ot)|0,j=j+Math.imul(ae,We)|0,re=re+Math.imul(ae,ot)|0,X=X+Math.imul(Z,Me)|0,j=j+Math.imul(Z,Ve)|0,j=j+Math.imul(q,Me)|0,re=re+Math.imul(q,Ve)|0,X=X+Math.imul(H,tt)|0,j=j+Math.imul(H,St)|0,j=j+Math.imul(ee,tt)|0,re=re+Math.imul(ee,St)|0,X=X+Math.imul(K,Ct)|0,j=j+Math.imul(K,jt)|0,j=j+Math.imul(te,Ct)|0,re=re+Math.imul(te,jt)|0;var kt=(Q+X|0)+((j&8191)<<13)|0;Q=(re+(j>>>13)|0)+(kt>>>26)|0,kt&=67108863,X=Math.imul(Se,tr),j=Math.imul(Se,Ht),j=j+Math.imul(Le,tr)|0,re=Math.imul(Le,Ht),X=X+Math.imul(ye,$t)|0,j=j+Math.imul(ye,Ut)|0,j=j+Math.imul(ge,$t)|0,re=re+Math.imul(ge,Ut)|0,X=X+Math.imul(be,We)|0,j=j+Math.imul(be,ot)|0,j=j+Math.imul(ce,We)|0,re=re+Math.imul(ce,ot)|0,X=X+Math.imul(se,Me)|0,j=j+Math.imul(se,Ve)|0,j=j+Math.imul(ae,Me)|0,re=re+Math.imul(ae,Ve)|0,X=X+Math.imul(Z,tt)|0,j=j+Math.imul(Z,St)|0,j=j+Math.imul(q,tt)|0,re=re+Math.imul(q,St)|0,X=X+Math.imul(H,Ct)|0,j=j+Math.imul(H,jt)|0,j=j+Math.imul(ee,Ct)|0,re=re+Math.imul(ee,jt)|0,X=X+Math.imul(K,Wt)|0,j=j+Math.imul(K,Qt)|0,j=j+Math.imul(te,Wt)|0,re=re+Math.imul(te,Qt)|0;var Vt=(Q+X|0)+((j&8191)<<13)|0;Q=(re+(j>>>13)|0)+(Vt>>>26)|0,Vt&=67108863,X=Math.imul(we,tr),j=Math.imul(we,Ht),j=j+Math.imul(Ce,tr)|0,re=Math.imul(Ce,Ht),X=X+Math.imul(Se,$t)|0,j=j+Math.imul(Se,Ut)|0,j=j+Math.imul(Le,$t)|0,re=re+Math.imul(Le,Ut)|0,X=X+Math.imul(ye,We)|0,j=j+Math.imul(ye,ot)|0,j=j+Math.imul(ge,We)|0,re=re+Math.imul(ge,ot)|0,X=X+Math.imul(be,Me)|0,j=j+Math.imul(be,Ve)|0,j=j+Math.imul(ce,Me)|0,re=re+Math.imul(ce,Ve)|0,X=X+Math.imul(se,tt)|0,j=j+Math.imul(se,St)|0,j=j+Math.imul(ae,tt)|0,re=re+Math.imul(ae,St)|0,X=X+Math.imul(Z,Ct)|0,j=j+Math.imul(Z,jt)|0,j=j+Math.imul(q,Ct)|0,re=re+Math.imul(q,jt)|0,X=X+Math.imul(H,Wt)|0,j=j+Math.imul(H,Qt)|0,j=j+Math.imul(ee,Wt)|0,re=re+Math.imul(ee,Qt)|0,X=X+Math.imul(K,cr)|0,j=j+Math.imul(K,Xr)|0,j=j+Math.imul(te,cr)|0,re=re+Math.imul(te,Xr)|0;var Pe=(Q+X|0)+((j&8191)<<13)|0;Q=(re+(j>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,X=Math.imul(Ye,tr),j=Math.imul(Ye,Ht),j=j+Math.imul(Fe,tr)|0,re=Math.imul(Fe,Ht),X=X+Math.imul(we,$t)|0,j=j+Math.imul(we,Ut)|0,j=j+Math.imul(Ce,$t)|0,re=re+Math.imul(Ce,Ut)|0,X=X+Math.imul(Se,We)|0,j=j+Math.imul(Se,ot)|0,j=j+Math.imul(Le,We)|0,re=re+Math.imul(Le,ot)|0,X=X+Math.imul(ye,Me)|0,j=j+Math.imul(ye,Ve)|0,j=j+Math.imul(ge,Me)|0,re=re+Math.imul(ge,Ve)|0,X=X+Math.imul(be,tt)|0,j=j+Math.imul(be,St)|0,j=j+Math.imul(ce,tt)|0,re=re+Math.imul(ce,St)|0,X=X+Math.imul(se,Ct)|0,j=j+Math.imul(se,jt)|0,j=j+Math.imul(ae,Ct)|0,re=re+Math.imul(ae,jt)|0,X=X+Math.imul(Z,Wt)|0,j=j+Math.imul(Z,Qt)|0,j=j+Math.imul(q,Wt)|0,re=re+Math.imul(q,Qt)|0,X=X+Math.imul(H,cr)|0,j=j+Math.imul(H,Xr)|0,j=j+Math.imul(ee,cr)|0,re=re+Math.imul(ee,Xr)|0,X=X+Math.imul(K,en)|0,j=j+Math.imul(K,ut)|0,j=j+Math.imul(te,en)|0,re=re+Math.imul(te,ut)|0;var ke=(Q+X|0)+((j&8191)<<13)|0;Q=(re+(j>>>13)|0)+(ke>>>26)|0,ke&=67108863,X=Math.imul(je,tr),j=Math.imul(je,Ht),j=j+Math.imul(xt,tr)|0,re=Math.imul(xt,Ht),X=X+Math.imul(Ye,$t)|0,j=j+Math.imul(Ye,Ut)|0,j=j+Math.imul(Fe,$t)|0,re=re+Math.imul(Fe,Ut)|0,X=X+Math.imul(we,We)|0,j=j+Math.imul(we,ot)|0,j=j+Math.imul(Ce,We)|0,re=re+Math.imul(Ce,ot)|0,X=X+Math.imul(Se,Me)|0,j=j+Math.imul(Se,Ve)|0,j=j+Math.imul(Le,Me)|0,re=re+Math.imul(Le,Ve)|0,X=X+Math.imul(ye,tt)|0,j=j+Math.imul(ye,St)|0,j=j+Math.imul(ge,tt)|0,re=re+Math.imul(ge,St)|0,X=X+Math.imul(be,Ct)|0,j=j+Math.imul(be,jt)|0,j=j+Math.imul(ce,Ct)|0,re=re+Math.imul(ce,jt)|0,X=X+Math.imul(se,Wt)|0,j=j+Math.imul(se,Qt)|0,j=j+Math.imul(ae,Wt)|0,re=re+Math.imul(ae,Qt)|0,X=X+Math.imul(Z,cr)|0,j=j+Math.imul(Z,Xr)|0,j=j+Math.imul(q,cr)|0,re=re+Math.imul(q,Xr)|0,X=X+Math.imul(H,en)|0,j=j+Math.imul(H,ut)|0,j=j+Math.imul(ee,en)|0,re=re+Math.imul(ee,ut)|0,X=X+Math.imul(K,rr)|0,j=j+Math.imul(K,Kt)|0,j=j+Math.imul(te,rr)|0,re=re+Math.imul(te,Kt)|0;var lt=(Q+X|0)+((j&8191)<<13)|0;Q=(re+(j>>>13)|0)+(lt>>>26)|0,lt&=67108863,X=Math.imul(je,$t),j=Math.imul(je,Ut),j=j+Math.imul(xt,$t)|0,re=Math.imul(xt,Ut),X=X+Math.imul(Ye,We)|0,j=j+Math.imul(Ye,ot)|0,j=j+Math.imul(Fe,We)|0,re=re+Math.imul(Fe,ot)|0,X=X+Math.imul(we,Me)|0,j=j+Math.imul(we,Ve)|0,j=j+Math.imul(Ce,Me)|0,re=re+Math.imul(Ce,Ve)|0,X=X+Math.imul(Se,tt)|0,j=j+Math.imul(Se,St)|0,j=j+Math.imul(Le,tt)|0,re=re+Math.imul(Le,St)|0,X=X+Math.imul(ye,Ct)|0,j=j+Math.imul(ye,jt)|0,j=j+Math.imul(ge,Ct)|0,re=re+Math.imul(ge,jt)|0,X=X+Math.imul(be,Wt)|0,j=j+Math.imul(be,Qt)|0,j=j+Math.imul(ce,Wt)|0,re=re+Math.imul(ce,Qt)|0,X=X+Math.imul(se,cr)|0,j=j+Math.imul(se,Xr)|0,j=j+Math.imul(ae,cr)|0,re=re+Math.imul(ae,Xr)|0,X=X+Math.imul(Z,en)|0,j=j+Math.imul(Z,ut)|0,j=j+Math.imul(q,en)|0,re=re+Math.imul(q,ut)|0,X=X+Math.imul(H,rr)|0,j=j+Math.imul(H,Kt)|0,j=j+Math.imul(ee,rr)|0,re=re+Math.imul(ee,Kt)|0;var ft=(Q+X|0)+((j&8191)<<13)|0;Q=(re+(j>>>13)|0)+(ft>>>26)|0,ft&=67108863,X=Math.imul(je,We),j=Math.imul(je,ot),j=j+Math.imul(xt,We)|0,re=Math.imul(xt,ot),X=X+Math.imul(Ye,Me)|0,j=j+Math.imul(Ye,Ve)|0,j=j+Math.imul(Fe,Me)|0,re=re+Math.imul(Fe,Ve)|0,X=X+Math.imul(we,tt)|0,j=j+Math.imul(we,St)|0,j=j+Math.imul(Ce,tt)|0,re=re+Math.imul(Ce,St)|0,X=X+Math.imul(Se,Ct)|0,j=j+Math.imul(Se,jt)|0,j=j+Math.imul(Le,Ct)|0,re=re+Math.imul(Le,jt)|0,X=X+Math.imul(ye,Wt)|0,j=j+Math.imul(ye,Qt)|0,j=j+Math.imul(ge,Wt)|0,re=re+Math.imul(ge,Qt)|0,X=X+Math.imul(be,cr)|0,j=j+Math.imul(be,Xr)|0,j=j+Math.imul(ce,cr)|0,re=re+Math.imul(ce,Xr)|0,X=X+Math.imul(se,en)|0,j=j+Math.imul(se,ut)|0,j=j+Math.imul(ae,en)|0,re=re+Math.imul(ae,ut)|0,X=X+Math.imul(Z,rr)|0,j=j+Math.imul(Z,Kt)|0,j=j+Math.imul(q,rr)|0,re=re+Math.imul(q,Kt)|0;var yt=(Q+X|0)+((j&8191)<<13)|0;Q=(re+(j>>>13)|0)+(yt>>>26)|0,yt&=67108863,X=Math.imul(je,Me),j=Math.imul(je,Ve),j=j+Math.imul(xt,Me)|0,re=Math.imul(xt,Ve),X=X+Math.imul(Ye,tt)|0,j=j+Math.imul(Ye,St)|0,j=j+Math.imul(Fe,tt)|0,re=re+Math.imul(Fe,St)|0,X=X+Math.imul(we,Ct)|0,j=j+Math.imul(we,jt)|0,j=j+Math.imul(Ce,Ct)|0,re=re+Math.imul(Ce,jt)|0,X=X+Math.imul(Se,Wt)|0,j=j+Math.imul(Se,Qt)|0,j=j+Math.imul(Le,Wt)|0,re=re+Math.imul(Le,Qt)|0,X=X+Math.imul(ye,cr)|0,j=j+Math.imul(ye,Xr)|0,j=j+Math.imul(ge,cr)|0,re=re+Math.imul(ge,Xr)|0,X=X+Math.imul(be,en)|0,j=j+Math.imul(be,ut)|0,j=j+Math.imul(ce,en)|0,re=re+Math.imul(ce,ut)|0,X=X+Math.imul(se,rr)|0,j=j+Math.imul(se,Kt)|0,j=j+Math.imul(ae,rr)|0,re=re+Math.imul(ae,Kt)|0;var Rt=(Q+X|0)+((j&8191)<<13)|0;Q=(re+(j>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,X=Math.imul(je,tt),j=Math.imul(je,St),j=j+Math.imul(xt,tt)|0,re=Math.imul(xt,St),X=X+Math.imul(Ye,Ct)|0,j=j+Math.imul(Ye,jt)|0,j=j+Math.imul(Fe,Ct)|0,re=re+Math.imul(Fe,jt)|0,X=X+Math.imul(we,Wt)|0,j=j+Math.imul(we,Qt)|0,j=j+Math.imul(Ce,Wt)|0,re=re+Math.imul(Ce,Qt)|0,X=X+Math.imul(Se,cr)|0,j=j+Math.imul(Se,Xr)|0,j=j+Math.imul(Le,cr)|0,re=re+Math.imul(Le,Xr)|0,X=X+Math.imul(ye,en)|0,j=j+Math.imul(ye,ut)|0,j=j+Math.imul(ge,en)|0,re=re+Math.imul(ge,ut)|0,X=X+Math.imul(be,rr)|0,j=j+Math.imul(be,Kt)|0,j=j+Math.imul(ce,rr)|0,re=re+Math.imul(ce,Kt)|0;var _t=(Q+X|0)+((j&8191)<<13)|0;Q=(re+(j>>>13)|0)+(_t>>>26)|0,_t&=67108863,X=Math.imul(je,Ct),j=Math.imul(je,jt),j=j+Math.imul(xt,Ct)|0,re=Math.imul(xt,jt),X=X+Math.imul(Ye,Wt)|0,j=j+Math.imul(Ye,Qt)|0,j=j+Math.imul(Fe,Wt)|0,re=re+Math.imul(Fe,Qt)|0,X=X+Math.imul(we,cr)|0,j=j+Math.imul(we,Xr)|0,j=j+Math.imul(Ce,cr)|0,re=re+Math.imul(Ce,Xr)|0,X=X+Math.imul(Se,en)|0,j=j+Math.imul(Se,ut)|0,j=j+Math.imul(Le,en)|0,re=re+Math.imul(Le,ut)|0,X=X+Math.imul(ye,rr)|0,j=j+Math.imul(ye,Kt)|0,j=j+Math.imul(ge,rr)|0,re=re+Math.imul(ge,Kt)|0;var Dt=(Q+X|0)+((j&8191)<<13)|0;Q=(re+(j>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,X=Math.imul(je,Wt),j=Math.imul(je,Qt),j=j+Math.imul(xt,Wt)|0,re=Math.imul(xt,Qt),X=X+Math.imul(Ye,cr)|0,j=j+Math.imul(Ye,Xr)|0,j=j+Math.imul(Fe,cr)|0,re=re+Math.imul(Fe,Xr)|0,X=X+Math.imul(we,en)|0,j=j+Math.imul(we,ut)|0,j=j+Math.imul(Ce,en)|0,re=re+Math.imul(Ce,ut)|0,X=X+Math.imul(Se,rr)|0,j=j+Math.imul(Se,Kt)|0,j=j+Math.imul(Le,rr)|0,re=re+Math.imul(Le,Kt)|0;var Jt=(Q+X|0)+((j&8191)<<13)|0;Q=(re+(j>>>13)|0)+(Jt>>>26)|0,Jt&=67108863,X=Math.imul(je,cr),j=Math.imul(je,Xr),j=j+Math.imul(xt,cr)|0,re=Math.imul(xt,Xr),X=X+Math.imul(Ye,en)|0,j=j+Math.imul(Ye,ut)|0,j=j+Math.imul(Fe,en)|0,re=re+Math.imul(Fe,ut)|0,X=X+Math.imul(we,rr)|0,j=j+Math.imul(we,Kt)|0,j=j+Math.imul(Ce,rr)|0,re=re+Math.imul(Ce,Kt)|0;var fr=(Q+X|0)+((j&8191)<<13)|0;Q=(re+(j>>>13)|0)+(fr>>>26)|0,fr&=67108863,X=Math.imul(je,en),j=Math.imul(je,ut),j=j+Math.imul(xt,en)|0,re=Math.imul(xt,ut),X=X+Math.imul(Ye,rr)|0,j=j+Math.imul(Ye,Kt)|0,j=j+Math.imul(Fe,rr)|0,re=re+Math.imul(Fe,Kt)|0;var Rr=(Q+X|0)+((j&8191)<<13)|0;Q=(re+(j>>>13)|0)+(Rr>>>26)|0,Rr&=67108863,X=Math.imul(je,rr),j=Math.imul(je,Kt),j=j+Math.imul(xt,rr)|0,re=Math.imul(xt,Kt);var Sr=(Q+X|0)+((j&8191)<<13)|0;return Q=(re+(j>>>13)|0)+(Sr>>>26)|0,Sr&=67108863,G[0]=Er,G[1]=st,G[2]=et,G[3]=ht,G[4]=vt,G[5]=kt,G[6]=Vt,G[7]=Pe,G[8]=ke,G[9]=lt,G[10]=ft,G[11]=yt,G[12]=Rt,G[13]=_t,G[14]=Dt,G[15]=Jt,G[16]=fr,G[17]=Rr,G[18]=Sr,Q!==0&&(G[19]=Q,O.length++),O};Math.imul||(x=l);function u(I,D,R){R.negative=D.negative^I.negative,R.length=I.length+D.length;for(var O=0,z=0,B=0;B<R.length-1;B++){var G=z;z=0;for(var Q=O&67108863,X=Math.min(B,D.length-1),j=Math.max(0,B-I.length+1);j<=X;j++){var re=B-j,ue=I.words[re]|0,K=D.words[j]|0,te=ue*K,Y=te&67108863;G=G+(te/67108864|0)|0,Y=Y+Q|0,Q=Y&67108863,G=G+(Y>>>26)|0,z+=G>>>26,G&=67108863}R.words[B]=Q,O=G,G=z}return O!==0?R.words[B]=O:R.length--,R.strip()}function A(I,D,R){var O=new _;return O.mulp(I,D,R)}t.prototype.mulTo=function(D,R){var O,z=this.length+D.length;return this.length===10&&D.length===10?O=x(this,D,R):z<63?O=l(this,D,R):z<1024?O=u(this,D,R):O=A(this,D,R),O};function _(I,D){this.x=I,this.y=D}_.prototype.makeRBT=function(D){for(var R=new Array(D),O=t.prototype._countBits(D)-1,z=0;z<D;z++)R[z]=this.revBin(z,O,D);return R},_.prototype.revBin=function(D,R,O){if(D===0||D===O-1)return D;for(var z=0,B=0;B<R;B++)z|=(D&1)<<R-B-1,D>>=1;return z},_.prototype.permute=function(D,R,O,z,B,G){for(var Q=0;Q<G;Q++)z[Q]=R[D[Q]],B[Q]=O[D[Q]]},_.prototype.transform=function(D,R,O,z,B,G){this.permute(G,D,R,O,z,B);for(var Q=1;Q<B;Q<<=1)for(var X=Q<<1,j=Math.cos(2*Math.PI/X),re=Math.sin(2*Math.PI/X),ue=0;ue<B;ue+=X)for(var K=j,te=re,Y=0;Y<Q;Y++){var H=O[ue+Y],ee=z[ue+Y],ne=O[ue+Y+Q],Z=z[ue+Y+Q],q=K*ne-te*Z;Z=K*Z+te*ne,ne=q,O[ue+Y]=H+ne,z[ue+Y]=ee+Z,O[ue+Y+Q]=H-ne,z[ue+Y+Q]=ee-Z,Y!==X&&(q=j*K-re*te,te=j*te+re*K,K=q)}},_.prototype.guessLen13b=function(D,R){var O=Math.max(R,D)|1,z=O&1,B=0;for(O=O/2|0;O;O=O>>>1)B++;return 1<<B+1+z},_.prototype.conjugate=function(D,R,O){if(!(O<=1))for(var z=0;z<O/2;z++){var B=D[z];D[z]=D[O-z-1],D[O-z-1]=B,B=R[z],R[z]=-R[O-z-1],R[O-z-1]=-B}},_.prototype.normalize13b=function(D,R){for(var O=0,z=0;z<R/2;z++){var B=Math.round(D[2*z+1]/R)*8192+Math.round(D[2*z]/R)+O;D[z]=B&67108863,B<67108864?O=0:O=B/67108864|0}return D},_.prototype.convert13b=function(D,R,O,z){for(var B=0,G=0;G<R;G++)B=B+(D[G]|0),O[2*G]=B&8191,B=B>>>13,O[2*G+1]=B&8191,B=B>>>13;for(G=2*R;G<z;++G)O[G]=0;n(B===0),n((B&-8192)===0)},_.prototype.stub=function(D){for(var R=new Array(D),O=0;O<D;O++)R[O]=0;return R},_.prototype.mulp=function(D,R,O){var z=2*this.guessLen13b(D.length,R.length),B=this.makeRBT(z),G=this.stub(z),Q=new Array(z),X=new Array(z),j=new Array(z),re=new Array(z),ue=new Array(z),K=new Array(z),te=O.words;te.length=z,this.convert13b(D.words,D.length,Q,z),this.convert13b(R.words,R.length,re,z),this.transform(Q,G,X,j,z,B),this.transform(re,G,ue,K,z,B);for(var Y=0;Y<z;Y++){var H=X[Y]*ue[Y]-j[Y]*K[Y];j[Y]=X[Y]*K[Y]+j[Y]*ue[Y],X[Y]=H}return this.conjugate(X,j,z),this.transform(X,j,te,G,z,B),this.conjugate(te,G,z),this.normalize13b(te,z),O.negative=D.negative^R.negative,O.length=D.length+R.length,O.strip()},t.prototype.mul=function(D){var R=new t(null);return R.words=new Array(this.length+D.length),this.mulTo(D,R)},t.prototype.mulf=function(D){var R=new t(null);return R.words=new Array(this.length+D.length),A(this,D,R)},t.prototype.imul=function(D){return this.clone().mulTo(D,this)},t.prototype.imuln=function(D){n(typeof D=="number"),n(D<67108864);for(var R=0,O=0;O<this.length;O++){var z=(this.words[O]|0)*D,B=(z&67108863)+(R&67108863);R>>=26,R+=z/67108864|0,R+=B>>>26,this.words[O]=B&67108863}return R!==0&&(this.words[O]=R,this.length++),this},t.prototype.muln=function(D){return this.clone().imuln(D)},t.prototype.sqr=function(){return this.mul(this)},t.prototype.isqr=function(){return this.imul(this.clone())},t.prototype.pow=function(D){var R=m(D);if(R.length===0)return new t(1);for(var O=this,z=0;z<R.length&&R[z]===0;z++,O=O.sqr());if(++z<R.length)for(var B=O.sqr();z<R.length;z++,B=B.sqr())R[z]!==0&&(O=O.mul(B));return O},t.prototype.iushln=function(D){n(typeof D=="number"&&D>=0);var R=D%26,O=(D-R)/26,z=67108863>>>26-R<<26-R,B;if(R!==0){var G=0;for(B=0;B<this.length;B++){var Q=this.words[B]&z,X=(this.words[B]|0)-Q<<R;this.words[B]=X|G,G=Q>>>26-R}G&&(this.words[B]=G,this.length++)}if(O!==0){for(B=this.length-1;B>=0;B--)this.words[B+O]=this.words[B];for(B=0;B<O;B++)this.words[B]=0;this.length+=O}return this.strip()},t.prototype.ishln=function(D){return n(this.negative===0),this.iushln(D)},t.prototype.iushrn=function(D,R,O){n(typeof D=="number"&&D>=0);var z;R?z=(R-R%26)/26:z=0;var B=D%26,G=Math.min((D-B)/26,this.length),Q=67108863^67108863>>>B<<B,X=O;if(z-=G,z=Math.max(0,z),X){for(var j=0;j<G;j++)X.words[j]=this.words[j];X.length=G}if(G!==0)if(this.length>G)for(this.length-=G,j=0;j<this.length;j++)this.words[j]=this.words[j+G];else this.words[0]=0,this.length=1;var re=0;for(j=this.length-1;j>=0&&(re!==0||j>=z);j--){var ue=this.words[j]|0;this.words[j]=re<<26-B|ue>>>B,re=ue&Q}return X&&re!==0&&(X.words[X.length++]=re),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},t.prototype.ishrn=function(D,R,O){return n(this.negative===0),this.iushrn(D,R,O)},t.prototype.shln=function(D){return this.clone().ishln(D)},t.prototype.ushln=function(D){return this.clone().iushln(D)},t.prototype.shrn=function(D){return this.clone().ishrn(D)},t.prototype.ushrn=function(D){return this.clone().iushrn(D)},t.prototype.testn=function(D){n(typeof D=="number"&&D>=0);var R=D%26,O=(D-R)/26,z=1<<R;if(this.length<=O)return!1;var B=this.words[O];return!!(B&z)},t.prototype.imaskn=function(D){n(typeof D=="number"&&D>=0);var R=D%26,O=(D-R)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=O)return this;if(R!==0&&O++,this.length=Math.min(O,this.length),R!==0){var z=67108863^67108863>>>R<<R;this.words[this.length-1]&=z}return this.strip()},t.prototype.maskn=function(D){return this.clone().imaskn(D)},t.prototype.iaddn=function(D){return n(typeof D=="number"),n(D<67108864),D<0?this.isubn(-D):this.negative!==0?this.length===1&&(this.words[0]|0)<D?(this.words[0]=D-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(D),this.negative=1,this):this._iaddn(D)},t.prototype._iaddn=function(D){this.words[0]+=D;for(var R=0;R<this.length&&this.words[R]>=67108864;R++)this.words[R]-=67108864,R===this.length-1?this.words[R+1]=1:this.words[R+1]++;return this.length=Math.max(this.length,R+1),this},t.prototype.isubn=function(D){if(n(typeof D=="number"),n(D<67108864),D<0)return this.iaddn(-D);if(this.negative!==0)return this.negative=0,this.iaddn(D),this.negative=1,this;if(this.words[0]-=D,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var R=0;R<this.length&&this.words[R]<0;R++)this.words[R]+=67108864,this.words[R+1]-=1;return this.strip()},t.prototype.addn=function(D){return this.clone().iaddn(D)},t.prototype.subn=function(D){return this.clone().isubn(D)},t.prototype.iabs=function(){return this.negative=0,this},t.prototype.abs=function(){return this.clone().iabs()},t.prototype._ishlnsubmul=function(D,R,O){var z=D.length+O,B;this._expand(z);var G,Q=0;for(B=0;B<D.length;B++){G=(this.words[B+O]|0)+Q;var X=(D.words[B]|0)*R;G-=X&67108863,Q=(G>>26)-(X/67108864|0),this.words[B+O]=G&67108863}for(;B<this.length-O;B++)G=(this.words[B+O]|0)+Q,Q=G>>26,this.words[B+O]=G&67108863;if(Q===0)return this.strip();for(n(Q===-1),Q=0,B=0;B<this.length;B++)G=-(this.words[B]|0)+Q,Q=G>>26,this.words[B]=G&67108863;return this.negative=1,this.strip()},t.prototype._wordDiv=function(D,R){var O=this.length-D.length,z=this.clone(),B=D,G=B.words[B.length-1]|0,Q=this._countBits(G);O=26-Q,O!==0&&(B=B.ushln(O),z.iushln(O),G=B.words[B.length-1]|0);var X=z.length-B.length,j;if(R!=="mod"){j=new t(null),j.length=X+1,j.words=new Array(j.length);for(var re=0;re<j.length;re++)j.words[re]=0}var ue=z.clone()._ishlnsubmul(B,1,X);ue.negative===0&&(z=ue,j&&(j.words[X]=1));for(var K=X-1;K>=0;K--){var te=(z.words[B.length+K]|0)*67108864+(z.words[B.length+K-1]|0);for(te=Math.min(te/G|0,67108863),z._ishlnsubmul(B,te,K);z.negative!==0;)te--,z.negative=0,z._ishlnsubmul(B,1,K),z.isZero()||(z.negative^=1);j&&(j.words[K]=te)}return j&&j.strip(),z.strip(),R!=="div"&&O!==0&&z.iushrn(O),{div:j||null,mod:z}},t.prototype.divmod=function(D,R,O){if(n(!D.isZero()),this.isZero())return{div:new t(0),mod:new t(0)};var z,B,G;return this.negative!==0&&D.negative===0?(G=this.neg().divmod(D,R),R!=="mod"&&(z=G.div.neg()),R!=="div"&&(B=G.mod.neg(),O&&B.negative!==0&&B.iadd(D)),{div:z,mod:B}):this.negative===0&&D.negative!==0?(G=this.divmod(D.neg(),R),R!=="mod"&&(z=G.div.neg()),{div:z,mod:G.mod}):(this.negative&D.negative)!==0?(G=this.neg().divmod(D.neg(),R),R!=="div"&&(B=G.mod.neg(),O&&B.negative!==0&&B.isub(D)),{div:G.div,mod:B}):D.length>this.length||this.cmp(D)<0?{div:new t(0),mod:this}:D.length===1?R==="div"?{div:this.divn(D.words[0]),mod:null}:R==="mod"?{div:null,mod:new t(this.modn(D.words[0]))}:{div:this.divn(D.words[0]),mod:new t(this.modn(D.words[0]))}:this._wordDiv(D,R)},t.prototype.div=function(D){return this.divmod(D,"div",!1).div},t.prototype.mod=function(D){return this.divmod(D,"mod",!1).mod},t.prototype.umod=function(D){return this.divmod(D,"mod",!0).mod},t.prototype.divRound=function(D){var R=this.divmod(D);if(R.mod.isZero())return R.div;var O=R.div.negative!==0?R.mod.isub(D):R.mod,z=D.ushrn(1),B=D.andln(1),G=O.cmp(z);return G<0||B===1&&G===0?R.div:R.div.negative!==0?R.div.isubn(1):R.div.iaddn(1)},t.prototype.modn=function(D){n(D<=67108863);for(var R=(1<<26)%D,O=0,z=this.length-1;z>=0;z--)O=(R*O+(this.words[z]|0))%D;return O},t.prototype.idivn=function(D){n(D<=67108863);for(var R=0,O=this.length-1;O>=0;O--){var z=(this.words[O]|0)+R*67108864;this.words[O]=z/D|0,R=z%D}return this.strip()},t.prototype.divn=function(D){return this.clone().idivn(D)},t.prototype.egcd=function(D){n(D.negative===0),n(!D.isZero());var R=this,O=D.clone();R.negative!==0?R=R.umod(D):R=R.clone();for(var z=new t(1),B=new t(0),G=new t(0),Q=new t(1),X=0;R.isEven()&&O.isEven();)R.iushrn(1),O.iushrn(1),++X;for(var j=O.clone(),re=R.clone();!R.isZero();){for(var ue=0,K=1;(R.words[0]&K)===0&&ue<26;++ue,K<<=1);if(ue>0)for(R.iushrn(ue);ue-- >0;)(z.isOdd()||B.isOdd())&&(z.iadd(j),B.isub(re)),z.iushrn(1),B.iushrn(1);for(var te=0,Y=1;(O.words[0]&Y)===0&&te<26;++te,Y<<=1);if(te>0)for(O.iushrn(te);te-- >0;)(G.isOdd()||Q.isOdd())&&(G.iadd(j),Q.isub(re)),G.iushrn(1),Q.iushrn(1);R.cmp(O)>=0?(R.isub(O),z.isub(G),B.isub(Q)):(O.isub(R),G.isub(z),Q.isub(B))}return{a:G,b:Q,gcd:O.iushln(X)}},t.prototype._invmp=function(D){n(D.negative===0),n(!D.isZero());var R=this,O=D.clone();R.negative!==0?R=R.umod(D):R=R.clone();for(var z=new t(1),B=new t(0),G=O.clone();R.cmpn(1)>0&&O.cmpn(1)>0;){for(var Q=0,X=1;(R.words[0]&X)===0&&Q<26;++Q,X<<=1);if(Q>0)for(R.iushrn(Q);Q-- >0;)z.isOdd()&&z.iadd(G),z.iushrn(1);for(var j=0,re=1;(O.words[0]&re)===0&&j<26;++j,re<<=1);if(j>0)for(O.iushrn(j);j-- >0;)B.isOdd()&&B.iadd(G),B.iushrn(1);R.cmp(O)>=0?(R.isub(O),z.isub(B)):(O.isub(R),B.isub(z))}var ue;return R.cmpn(1)===0?ue=z:ue=B,ue.cmpn(0)<0&&ue.iadd(D),ue},t.prototype.gcd=function(D){if(this.isZero())return D.abs();if(D.isZero())return this.abs();var R=this.clone(),O=D.clone();R.negative=0,O.negative=0;for(var z=0;R.isEven()&&O.isEven();z++)R.iushrn(1),O.iushrn(1);do{for(;R.isEven();)R.iushrn(1);for(;O.isEven();)O.iushrn(1);var B=R.cmp(O);if(B<0){var G=R;R=O,O=G}else if(B===0||O.cmpn(1)===0)break;R.isub(O)}while(!0);return O.iushln(z)},t.prototype.invm=function(D){return this.egcd(D).a.umod(D)},t.prototype.isEven=function(){return(this.words[0]&1)===0},t.prototype.isOdd=function(){return(this.words[0]&1)===1},t.prototype.andln=function(D){return this.words[0]&D},t.prototype.bincn=function(D){n(typeof D=="number");var R=D%26,O=(D-R)/26,z=1<<R;if(this.length<=O)return this._expand(O+1),this.words[O]|=z,this;for(var B=z,G=O;B!==0&&G<this.length;G++){var Q=this.words[G]|0;Q+=B,B=Q>>>26,Q&=67108863,this.words[G]=Q}return B!==0&&(this.words[G]=B,this.length++),this},t.prototype.isZero=function(){return this.length===1&&this.words[0]===0},t.prototype.cmpn=function(D){var R=D<0;if(this.negative!==0&&!R)return-1;if(this.negative===0&&R)return 1;this.strip();var O;if(this.length>1)O=1;else{R&&(D=-D),n(D<=67108863,"Number is too big");var z=this.words[0]|0;O=z===D?0:z<D?-1:1}return this.negative!==0?-O|0:O},t.prototype.cmp=function(D){if(this.negative!==0&&D.negative===0)return-1;if(this.negative===0&&D.negative!==0)return 1;var R=this.ucmp(D);return this.negative!==0?-R|0:R},t.prototype.ucmp=function(D){if(this.length>D.length)return 1;if(this.length<D.length)return-1;for(var R=0,O=this.length-1;O>=0;O--){var z=this.words[O]|0,B=D.words[O]|0;if(z!==B){z<B?R=-1:z>B&&(R=1);break}}return R},t.prototype.gtn=function(D){return this.cmpn(D)===1},t.prototype.gt=function(D){return this.cmp(D)===1},t.prototype.gten=function(D){return this.cmpn(D)>=0},t.prototype.gte=function(D){return this.cmp(D)>=0},t.prototype.ltn=function(D){return this.cmpn(D)===-1},t.prototype.lt=function(D){return this.cmp(D)===-1},t.prototype.lten=function(D){return this.cmpn(D)<=0},t.prototype.lte=function(D){return this.cmp(D)<=0},t.prototype.eqn=function(D){return this.cmpn(D)===0},t.prototype.eq=function(D){return this.cmp(D)===0},t.red=function(D){return new C(D)},t.prototype.toRed=function(D){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),D.convertTo(this)._forceRed(D)},t.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},t.prototype._forceRed=function(D){return this.red=D,this},t.prototype.forceRed=function(D){return n(!this.red,"Already a number in reduction context"),this._forceRed(D)},t.prototype.redAdd=function(D){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,D)},t.prototype.redIAdd=function(D){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,D)},t.prototype.redSub=function(D){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,D)},t.prototype.redISub=function(D){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,D)},t.prototype.redShl=function(D){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,D)},t.prototype.redMul=function(D){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,D),this.red.mul(this,D)},t.prototype.redIMul=function(D){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,D),this.red.imul(this,D)},t.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},t.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},t.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},t.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},t.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},t.prototype.redPow=function(D){return n(this.red&&!D.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,D)};var g={k256:null,p224:null,p192:null,p25519:null};function b(I,D){this.name=I,this.p=new t(D,16),this.n=this.p.bitLength(),this.k=new t(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}b.prototype._tmp=function(){var D=new t(null);return D.words=new Array(Math.ceil(this.n/13)),D},b.prototype.ireduce=function(D){var R=D,O;do this.split(R,this.tmp),R=this.imulK(R),R=R.iadd(this.tmp),O=R.bitLength();while(O>this.n);var z=O<this.n?-1:R.ucmp(this.p);return z===0?(R.words[0]=0,R.length=1):z>0?R.isub(this.p):R.strip!==void 0?R.strip():R._strip(),R},b.prototype.split=function(D,R){D.iushrn(this.n,0,R)},b.prototype.imulK=function(D){return D.imul(this.k)};function v(){b.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}r(v,b),v.prototype.split=function(D,R){for(var O=4194303,z=Math.min(D.length,9),B=0;B<z;B++)R.words[B]=D.words[B];if(R.length=z,D.length<=9){D.words[0]=0,D.length=1;return}var G=D.words[9];for(R.words[R.length++]=G&O,B=10;B<D.length;B++){var Q=D.words[B]|0;D.words[B-10]=(Q&O)<<4|G>>>22,G=Q}G>>>=22,D.words[B-10]=G,G===0&&D.length>10?D.length-=10:D.length-=9},v.prototype.imulK=function(D){D.words[D.length]=0,D.words[D.length+1]=0,D.length+=2;for(var R=0,O=0;O<D.length;O++){var z=D.words[O]|0;R+=z*977,D.words[O]=R&67108863,R=z*64+(R/67108864|0)}return D.words[D.length-1]===0&&(D.length--,D.words[D.length-1]===0&&D.length--),D};function k(){b.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}r(k,b);function S(){b.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}r(S,b);function E(){b.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}r(E,b),E.prototype.imulK=function(D){for(var R=0,O=0;O<D.length;O++){var z=(D.words[O]|0)*19+R,B=z&67108863;z>>>=26,D.words[O]=B,R=z}return R!==0&&(D.words[D.length++]=R),D},t._prime=function(D){if(g[D])return g[D];var R;if(D==="k256")R=new v;else if(D==="p224")R=new k;else if(D==="p192")R=new S;else if(D==="p25519")R=new E;else throw new Error("Unknown prime "+D);return g[D]=R,R};function C(I){if(typeof I=="string"){var D=t._prime(I);this.m=D.p,this.prime=D}else n(I.gtn(1),"modulus must be greater than 1"),this.m=I,this.prime=null}C.prototype._verify1=function(D){n(D.negative===0,"red works only with positives"),n(D.red,"red works only with red numbers")},C.prototype._verify2=function(D,R){n((D.negative|R.negative)===0,"red works only with positives"),n(D.red&&D.red===R.red,"red works only with red numbers")},C.prototype.imod=function(D){return this.prime?this.prime.ireduce(D)._forceRed(this):D.umod(this.m)._forceRed(this)},C.prototype.neg=function(D){return D.isZero()?D.clone():this.m.sub(D)._forceRed(this)},C.prototype.add=function(D,R){this._verify2(D,R);var O=D.add(R);return O.cmp(this.m)>=0&&O.isub(this.m),O._forceRed(this)},C.prototype.iadd=function(D,R){this._verify2(D,R);var O=D.iadd(R);return O.cmp(this.m)>=0&&O.isub(this.m),O},C.prototype.sub=function(D,R){this._verify2(D,R);var O=D.sub(R);return O.cmpn(0)<0&&O.iadd(this.m),O._forceRed(this)},C.prototype.isub=function(D,R){this._verify2(D,R);var O=D.isub(R);return O.cmpn(0)<0&&O.iadd(this.m),O},C.prototype.shl=function(D,R){return this._verify1(D),this.imod(D.ushln(R))},C.prototype.imul=function(D,R){return this._verify2(D,R),this.imod(D.imul(R))},C.prototype.mul=function(D,R){return this._verify2(D,R),this.imod(D.mul(R))},C.prototype.isqr=function(D){return this.imul(D,D.clone())},C.prototype.sqr=function(D){return this.mul(D,D)},C.prototype.sqrt=function(D){if(D.isZero())return D.clone();var R=this.m.andln(3);if(n(R%2===1),R===3){var O=this.m.add(new t(1)).iushrn(2);return this.pow(D,O)}for(var z=this.m.subn(1),B=0;!z.isZero()&&z.andln(1)===0;)B++,z.iushrn(1);n(!z.isZero());var G=new t(1).toRed(this),Q=G.redNeg(),X=this.m.subn(1).iushrn(1),j=this.m.bitLength();for(j=new t(2*j*j).toRed(this);this.pow(j,X).cmp(Q)!==0;)j.redIAdd(Q);for(var re=this.pow(j,z),ue=this.pow(D,z.addn(1).iushrn(1)),K=this.pow(D,z),te=B;K.cmp(G)!==0;){for(var Y=K,H=0;Y.cmp(G)!==0;H++)Y=Y.redSqr();n(H<te);var ee=this.pow(re,new t(1).iushln(te-H-1));ue=ue.redMul(ee),re=ee.redSqr(),K=K.redMul(re),te=H}return ue},C.prototype.invm=function(D){var R=D._invmp(this.m);return R.negative!==0?(R.negative=0,this.imod(R).redNeg()):this.imod(R)},C.prototype.pow=function(D,R){if(R.isZero())return new t(1).toRed(this);if(R.cmpn(1)===0)return D.clone();var O=4,z=new Array(1<<O);z[0]=new t(1).toRed(this),z[1]=D;for(var B=2;B<z.length;B++)z[B]=this.mul(z[B-1],D);var G=z[0],Q=0,X=0,j=R.bitLength()%26;for(j===0&&(j=26),B=R.length-1;B>=0;B--){for(var re=R.words[B],ue=j-1;ue>=0;ue--){var K=re>>ue&1;if(G!==z[0]&&(G=this.sqr(G)),K===0&&Q===0){X=0;continue}Q<<=1,Q|=K,X++,!(X!==O&&(B!==0||ue!==0))&&(G=this.mul(G,z[Q]),X=0,Q=0)}j=26}return G},C.prototype.convertTo=function(D){var R=D.umod(this.m);return R===D?R.clone():R},C.prototype.convertFrom=function(D){var R=D.clone();return R.red=null,R},t.mont=function(D){return new F(D)};function F(I){C.call(this,I),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new t(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}r(F,C),F.prototype.convertTo=function(D){return this.imod(D.ushln(this.shift))},F.prototype.convertFrom=function(D){var R=this.imod(D.mul(this.rinv));return R.red=null,R},F.prototype.imul=function(D,R){if(D.isZero()||R.isZero())return D.words[0]=0,D.length=1,D;var O=D.imul(R),z=O.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),B=O.isub(z).iushrn(this.shift),G=B;return B.cmp(this.m)>=0?G=B.isub(this.m):B.cmpn(0)<0&&(G=B.iadd(this.m)),G._forceRed(this)},F.prototype.mul=function(D,R){if(D.isZero()||R.isZero())return new t(0)._forceRed(this);var O=D.mul(R),z=O.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),B=O.isub(z).iushrn(this.shift),G=B;return B.cmp(this.m)>=0?G=B.isub(this.m):B.cmpn(0)<0&&(G=B.iadd(this.m)),G._forceRed(this)},F.prototype.invm=function(D){var R=this.imod(D._invmp(this.m).mul(this.r2));return R._forceRed(this)}})(typeof M>"u"||M,this)},{buffer:2}],34:[function(f,M,T){M.exports=e;function e(a){var n,r,t,h=a.length,s=0;for(n=0;n<h;++n)s+=a[n].length;var o=new Array(s),y=0;for(n=0;n<h;++n){var d=a[n],p=d.length;for(r=0;r<p;++r){var c=o[y++]=new Array(p-1),m=0;for(t=0;t<p;++t)t!==r&&(c[m++]=d[t]);if(r&1){var l=c[1];c[1]=c[0],c[0]=l}}}return o}},{}],35:[function(f,M,T){M.exports=p;var e=f("typedarray-pool"),a=f("./lib/sweep"),n=f("./lib/intersect");function r(c,m){for(var l=0;l<c;++l)if(!(m[l]<=m[l+c]))return!0;return!1}function t(c,m,l,x){for(var u=0,A=0,_=0,g=c.length;_<g;++_){var b=c[_];if(!r(m,b)){for(var v=0;v<2*m;++v)l[u++]=b[v];x[A++]=_}}return A}function h(c,m,l,x){var u=c.length,A=m.length;if(!(u<=0||A<=0)){var _=c[0].length>>>1;if(!(_<=0)){var g,b=e.mallocDouble(2*_*u),v=e.mallocInt32(u);if(u=t(c,_,b,v),u>0){if(_===1&&x)a.init(u),g=a.sweepComplete(_,l,0,u,b,v,0,u,b,v);else{var k=e.mallocDouble(2*_*A),S=e.mallocInt32(A);A=t(m,_,k,S),A>0&&(a.init(u+A),_===1?g=a.sweepBipartite(_,l,0,u,b,v,0,A,k,S):g=n(_,l,x,u,b,v,A,k,S),e.free(k),e.free(S))}e.free(b),e.free(v)}return g}}}var s;function o(c,m){s.push([c,m])}function y(c){return s=[],h(c,c,o,!0),s}function d(c,m){return s=[],h(c,m,o,!1),s}function p(c,m,l){switch(arguments.length){case 1:return y(c);case 2:return typeof m=="function"?h(c,c,m,!0):d(c,m);case 3:return h(c,m,l,!1);default:throw new Error("box-intersect: Invalid arguments")}}},{"./lib/intersect":37,"./lib/sweep":41,"typedarray-pool":308}],36:[function(f,M,T){function e(){function r(s,o,y,d,p,c,m,l,x,u,A){for(var _=2*s,g=d,b=_*d;g<p;++g,b+=_){var v=c[o+b],k=c[o+b+s],S=m[g];e:for(var E=l,C=_*l;E<x;++E,C+=_){var F=u[o+C],I=u[o+C+s],D=A[E];if(!(I<v||k<F)){for(var R=o+1;R<s;++R){var O=c[R+b],z=c[R+s+b],B=u[R+C],G=u[R+s+C];if(z<B||G<O)continue e}var Q=y(S,D);if(Q!==void 0)return Q}}}}function t(s,o,y,d,p,c,m,l,x,u,A){for(var _=2*s,g=l,b=_*l;g<x;++g,b+=_){var v=u[o+b],k=u[o+b+s],S=A[g];e:for(var E=d,C=_*d;E<p;++E,C+=_){var F=c[o+C],I=c[o+C+s],D=m[E];if(!(k<F||I<v)){for(var R=o+1;R<s;++R){var O=c[R+C],z=c[R+s+C],B=u[R+b],G=u[R+s+b];if(z<B||G<O)continue e}var Q=y(D,S);if(Q!==void 0)return Q}}}}function h(s,o,y,d,p,c,m,l,x,u,A){return p-d>x-l?r(s,o,y,d,p,c,m,l,x,u,A):t(s,o,y,d,p,c,m,l,x,u,A)}return h}function a(){function r(y,d,p,c,m,l,x,u,A,_,g){for(var b=2*y,v=c,k=b*c;v<m;++v,k+=b){var S=l[d+k],E=l[d+k+y],C=x[v];e:for(var F=u,I=b*u;F<A;++F,I+=b){var D=_[d+I],R=g[F];if(!(D<=S||E<D)){for(var O=d+1;O<y;++O){var z=l[O+k],B=l[O+y+k],G=_[O+I],Q=_[O+y+I];if(B<G||Q<z)continue e}var X=p(R,C);if(X!==void 0)return X}}}}function t(y,d,p,c,m,l,x,u,A,_,g){for(var b=2*y,v=c,k=b*c;v<m;++v,k+=b){var S=l[d+k],E=l[d+k+y],C=x[v];e:for(var F=u,I=b*u;F<A;++F,I+=b){var D=_[d+I],R=g[F];if(!(D<S||E<D)){for(var O=d+1;O<y;++O){var z=l[O+k],B=l[O+y+k],G=_[O+I],Q=_[O+y+I];if(B<G||Q<z)continue e}var X=p(C,R);if(X!==void 0)return X}}}}function h(y,d,p,c,m,l,x,u,A,_,g){for(var b=2*y,v=u,k=b*u;v<A;++v,k+=b){var S=_[d+k],E=g[v];e:for(var C=c,F=b*c;C<m;++C,F+=b){var I=l[d+F],D=l[d+F+y],R=x[C];if(!(S<=I||D<S)){for(var O=d+1;O<y;++O){var z=l[O+F],B=l[O+y+F],G=_[O+k],Q=_[O+y+k];if(B<G||Q<z)continue e}var X=p(E,R);if(X!==void 0)return X}}}}function s(y,d,p,c,m,l,x,u,A,_,g){for(var b=2*y,v=u,k=b*u;v<A;++v,k+=b){var S=_[d+k],E=g[v];e:for(var C=c,F=b*c;C<m;++C,F+=b){var I=l[d+F],D=l[d+F+y],R=x[C];if(!(S<I||D<S)){for(var O=d+1;O<y;++O){var z=l[O+F],B=l[O+y+F],G=_[O+k],Q=_[O+y+k];if(B<G||Q<z)continue e}var X=p(R,E);if(X!==void 0)return X}}}}function o(y,d,p,c,m,l,x,u,A,_,g,b){return l-m>_-A?c?r(y,d,p,m,l,x,u,A,_,g,b):t(y,d,p,m,l,x,u,A,_,g,b):c?h(y,d,p,m,l,x,u,A,_,g,b):s(y,d,p,m,l,x,u,A,_,g,b)}return o}function n(r){return r?e():a()}T.partial=n(!1),T.full=n(!0)},{}],37:[function(f,M,T){M.exports=I;var e=f("typedarray-pool"),a=f("bit-twiddle"),n=f("./brute"),r=n.partial,t=n.full,h=f("./sweep"),s=f("./median"),o=f("./partition"),y=128,d=1<<22,p=1<<22,c=o("!(lo>=p0)&&!(p1>=hi)"),m=o("lo===p0"),l=o("lo<p0"),x=o("hi<=p0"),u=o("lo<=p0&&p0<=hi"),A=o("lo<p0&&p0<=hi"),_=6,g=2,b=1024,v=e.mallocInt32(b),k=e.mallocDouble(b);function S(D,R){var O=8*a.log2(R+1)*(D+1)|0,z=a.nextPow2(_*O);v.length<z&&(e.free(v),v=e.mallocInt32(z));var B=a.nextPow2(g*O);k.length<B&&(e.free(k),k=e.mallocDouble(B))}function E(D,R,O,z,B,G,Q,X,j){var re=_*D;v[re]=R,v[re+1]=O,v[re+2]=z,v[re+3]=B,v[re+4]=G,v[re+5]=Q;var ue=g*D;k[ue]=X,k[ue+1]=j}function C(D,R,O,z,B,G,Q,X,j,re,ue){var K=2*D,te=j*K,Y=re[te+R];e:for(var H=B,ee=B*K;H<G;++H,ee+=K){var ne=Q[ee+R],Z=Q[ee+R+D];if(!(Y<ne||Z<Y)&&!(z&&Y===ne)){for(var q=X[H],ie=R+1;ie<D;++ie){var ne=Q[ee+ie],Z=Q[ee+ie+D],se=re[te+ie],ae=re[te+ie+D];if(Z<se||ae<ne)continue e}var oe;if(z?oe=O(ue,q):oe=O(q,ue),oe!==void 0)return oe}}}function F(D,R,O,z,B,G,Q,X,j,re){var ue=2*D,K=X*ue,te=j[K+R];e:for(var Y=z,H=z*ue;Y<B;++Y,H+=ue){var ee=Q[Y];if(ee!==re){var ne=G[H+R],Z=G[H+R+D];if(!(te<ne||Z<te)){for(var q=R+1;q<D;++q){var ne=G[H+q],Z=G[H+q+D],ie=j[K+q],se=j[K+q+D];if(Z<ie||se<ne)continue e}var ae=O(ee,re);if(ae!==void 0)return ae}}}}function I(D,R,O,z,B,G,Q,X,j){S(D,z+Q);var re=0,ue=2*D,K;for(E(re++,0,0,z,0,Q,O?16:0,-1/0,1/0),O||E(re++,0,0,Q,0,z,1,-1/0,1/0);re>0;){re-=1;var te=re*_,Y=v[te],H=v[te+1],ee=v[te+2],ne=v[te+3],Z=v[te+4],q=v[te+5],ie=re*g,se=k[ie],ae=k[ie+1],oe=q&1,be=!!(q&16),ce=B,de=G,ye=X,ge=j;if(oe&&(ce=X,de=j,ye=B,ge=G),!(q&2&&(ee=l(D,Y,H,ee,ce,de,ae),H>=ee))&&!(q&4&&(H=x(D,Y,H,ee,ce,de,se),H>=ee))){var me=ee-H,Se=Z-ne;if(be){if(D*me*(me+Se)<p){if(K=h.scanComplete(D,Y,R,H,ee,ce,de,ne,Z,ye,ge),K!==void 0)return K;continue}}else if(D*Math.min(me,Se)<y){if(K=r(D,Y,R,oe,H,ee,ce,de,ne,Z,ye,ge),K!==void 0)return K;continue}else if(D*me*Se<d){if(K=h.scanBipartite(D,Y,R,oe,H,ee,ce,de,ne,Z,ye,ge),K!==void 0)return K;continue}var Le=c(D,Y,H,ee,ce,de,se,ae);if(H<Le)if(D*(Le-H)<y){if(K=t(D,Y+1,R,H,Le,ce,de,ne,Z,ye,ge),K!==void 0)return K}else if(Y===D-2){if(oe?K=h.sweepBipartite(D,R,ne,Z,ye,ge,H,Le,ce,de):K=h.sweepBipartite(D,R,H,Le,ce,de,ne,Z,ye,ge),K!==void 0)return K}else E(re++,Y+1,H,Le,ne,Z,oe,-1/0,1/0),E(re++,Y+1,ne,Z,H,Le,oe^1,-1/0,1/0);if(Le<ee){var Oe=s(D,Y,ne,Z,ye,ge),we=ye[ue*Oe+Y],Ce=m(D,Y,Oe,Z,ye,ge,we);if(Ce<Z&&E(re++,Y,Le,ee,Ce,Z,(oe|4)+(be?16:0),we,ae),ne<Oe&&E(re++,Y,Le,ee,ne,Oe,(oe|2)+(be?16:0),se,we),Oe+1===Ce){if(be?K=F(D,Y,R,Le,ee,ce,de,Oe,ye,ge[Oe]):K=C(D,Y,R,oe,Le,ee,ce,de,Oe,ye,ge[Oe]),K!==void 0)return K}else if(Oe<Ce){var Ke;if(be){if(Ke=u(D,Y,Le,ee,ce,de,we),Le<Ke){var Ye=m(D,Y,Le,Ke,ce,de,we);if(Y===D-2){if(Le<Ye&&(K=h.sweepComplete(D,R,Le,Ye,ce,de,Oe,Ce,ye,ge),K!==void 0)||Ye<Ke&&(K=h.sweepBipartite(D,R,Ye,Ke,ce,de,Oe,Ce,ye,ge),K!==void 0))return K}else Le<Ye&&E(re++,Y+1,Le,Ye,Oe,Ce,16,-1/0,1/0),Ye<Ke&&(E(re++,Y+1,Ye,Ke,Oe,Ce,0,-1/0,1/0),E(re++,Y+1,Oe,Ce,Ye,Ke,1,-1/0,1/0))}}else oe?Ke=A(D,Y,Le,ee,ce,de,we):Ke=u(D,Y,Le,ee,ce,de,we),Le<Ke&&(Y===D-2?oe?K=h.sweepBipartite(D,R,Oe,Ce,ye,ge,Le,Ke,ce,de):K=h.sweepBipartite(D,R,Le,Ke,ce,de,Oe,Ce,ye,ge):(E(re++,Y+1,Le,Ke,Oe,Ce,oe,-1/0,1/0),E(re++,Y+1,Oe,Ce,Le,Ke,oe^1,-1/0,1/0)))}}}}}},{"./brute":36,"./median":38,"./partition":39,"./sweep":41,"bit-twiddle":32,"typedarray-pool":308}],38:[function(f,M,T){M.exports=t;var e=f("./partition"),a=e("lo<p0"),n=8;function r(h,s,o,y,d,p){for(var c=2*h,m=c*(o+1)+s,l=o+1;l<y;++l,m+=c)for(var x=d[m],u=l,A=c*(l-1);u>o&&d[A+s]>x;--u,A-=c){for(var _=A,g=A+c,b=0;b<c;++b,++_,++g){var v=d[_];d[_]=d[g],d[g]=v}var k=p[u];p[u]=p[u-1],p[u-1]=k}}function t(h,s,o,y,d,p){if(y<=o+1)return o;for(var c=o,m=y,l=y+o>>>1,x=2*h,u=l,A=d[x*l+s];c<m;){if(m-c<n){r(h,s,c,m,d,p),A=d[x*l+s];break}var _=m-c,g=Math.random()*_+c|0,b=d[x*g+s],v=Math.random()*_+c|0,k=d[x*v+s],S=Math.random()*_+c|0,E=d[x*S+s];b<=k?E>=k?(u=v,A=k):b>=E?(u=g,A=b):(u=S,A=E):k>=E?(u=v,A=k):E>=b?(u=g,A=b):(u=S,A=E);for(var I=x*(m-1),D=x*u,C=0;C<x;++C,++I,++D){var F=d[I];d[I]=d[D],d[D]=F}var R=p[m-1];p[m-1]=p[u],p[u]=R,u=a(h,s,c,m-1,d,p,A);for(var I=x*(m-1),D=x*u,C=0;C<x;++C,++I,++D){var F=d[I];d[I]=d[D],d[D]=F}var R=p[m-1];if(p[m-1]=p[u],p[u]=R,l<u){for(m=u-1;c<m&&d[x*(m-1)+s]===A;)m-=1;m+=1}else if(u<l)for(c=u+1;c<m&&d[x*c+s]===A;)c+=1;else break}return a(h,s,o,l,d,p,d[x*l+s])}},{"./partition":39}],39:[function(f,M,T){M.exports=a;var e={"lo===p0":n,"lo<p0":r,"lo<=p0":t,"hi<=p0":h,"lo<p0&&p0<=hi":o,"lo<=p0&&p0<=hi":s,"!(lo>=p0)&&!(p1>=hi)":y};function a(d){return e[d]}function n(d,p,c,m,l,x,u){for(var A=2*d,_=A*c,g=_,b=c,v=p,k=d+p,S=c;m>S;++S,_+=A){var E=l[_+v];if(E===u)if(b===S)b+=1,g+=A;else{for(var C=0;A>C;++C){var F=l[_+C];l[_+C]=l[g],l[g++]=F}var I=x[S];x[S]=x[b],x[b++]=I}}return b}function r(d,p,c,m,l,x,u){for(var A=2*d,_=A*c,g=_,b=c,v=p,k=d+p,S=c;m>S;++S,_+=A){var E=l[_+v];if(E<u)if(b===S)b+=1,g+=A;else{for(var C=0;A>C;++C){var F=l[_+C];l[_+C]=l[g],l[g++]=F}var I=x[S];x[S]=x[b],x[b++]=I}}return b}function t(d,p,c,m,l,x,u){for(var A=2*d,_=A*c,g=_,b=c,v=p,k=d+p,S=c;m>S;++S,_+=A){var E=l[_+k];if(E<=u)if(b===S)b+=1,g+=A;else{for(var C=0;A>C;++C){var F=l[_+C];l[_+C]=l[g],l[g++]=F}var I=x[S];x[S]=x[b],x[b++]=I}}return b}function h(d,p,c,m,l,x,u){for(var A=2*d,_=A*c,g=_,b=c,v=p,k=d+p,S=c;m>S;++S,_+=A){var E=l[_+k];if(E<=u)if(b===S)b+=1,g+=A;else{for(var C=0;A>C;++C){var F=l[_+C];l[_+C]=l[g],l[g++]=F}var I=x[S];x[S]=x[b],x[b++]=I}}return b}function s(d,p,c,m,l,x,u){for(var A=2*d,_=A*c,g=_,b=c,v=p,k=d+p,S=c;m>S;++S,_+=A){var E=l[_+v],C=l[_+k];if(E<=u&&u<=C)if(b===S)b+=1,g+=A;else{for(var F=0;A>F;++F){var I=l[_+F];l[_+F]=l[g],l[g++]=I}var D=x[S];x[S]=x[b],x[b++]=D}}return b}function o(d,p,c,m,l,x,u){for(var A=2*d,_=A*c,g=_,b=c,v=p,k=d+p,S=c;m>S;++S,_+=A){var E=l[_+v],C=l[_+k];if(E<u&&u<=C)if(b===S)b+=1,g+=A;else{for(var F=0;A>F;++F){var I=l[_+F];l[_+F]=l[g],l[g++]=I}var D=x[S];x[S]=x[b],x[b++]=D}}return b}function y(d,p,c,m,l,x,u,A){for(var _=2*d,g=_*c,b=g,v=c,k=p,S=d+p,E=c;m>E;++E,g+=_){var C=l[g+k],F=l[g+S];if(!(C>=u)&&!(A>=F))if(v===E)v+=1,b+=_;else{for(var I=0;_>I;++I){var D=l[g+I];l[g+I]=l[b],l[b++]=D}var R=x[E];x[E]=x[v],x[v++]=R}}return v}},{}],40:[function(f,M,T){M.exports=a;var e=32;function a(p,c){c<=4*e?n(0,c-1,p):d(0,c-1,p)}function n(p,c,m){for(var l=2*(p+1),x=p+1;x<=c;++x){for(var u=m[l++],A=m[l++],_=x,g=l-2;_-- >p;){var b=m[g-2],v=m[g-1];if(b<u)break;if(b===u&&v<A)break;m[g]=b,m[g+1]=v,g-=2}m[g]=u,m[g+1]=A}}function r(p,c,m){p*=2,c*=2;var l=m[p],x=m[p+1];m[p]=m[c],m[p+1]=m[c+1],m[c]=l,m[c+1]=x}function t(p,c,m){p*=2,c*=2,m[p]=m[c],m[p+1]=m[c+1]}function h(p,c,m,l){p*=2,c*=2,m*=2;var x=l[p],u=l[p+1];l[p]=l[c],l[p+1]=l[c+1],l[c]=l[m],l[c+1]=l[m+1],l[m]=x,l[m+1]=u}function s(p,c,m,l,x){p*=2,c*=2,x[p]=x[c],x[c]=m,x[p+1]=x[c+1],x[c+1]=l}function o(p,c,m){p*=2,c*=2;var l=m[p],x=m[c];return l<x?!1:l===x?m[p+1]>m[c+1]:!0}function y(p,c,m,l){p*=2;var x=l[p];return x<c?!0:x===c?l[p+1]<m:!1}function d(p,c,m){var l=(c-p+1)/6|0,x=p+l,u=c-l,A=p+c>>1,_=A-l,g=A+l,b=x,v=_,k=A,S=g,E=u,C=p+1,F=c-1,I=0;o(b,v,m)&&(I=b,b=v,v=I),o(S,E,m)&&(I=S,S=E,E=I),o(b,k,m)&&(I=b,b=k,k=I),o(v,k,m)&&(I=v,v=k,k=I),o(b,S,m)&&(I=b,b=S,S=I),o(k,S,m)&&(I=k,k=S,S=I),o(v,E,m)&&(I=v,v=E,E=I),o(v,k,m)&&(I=v,v=k,k=I),o(S,E,m)&&(I=S,S=E,E=I);for(var D=m[2*v],R=m[2*v+1],O=m[2*S],z=m[2*S+1],B=2*b,G=2*k,Q=2*E,X=2*x,j=2*A,re=2*u,ue=0;ue<2;++ue){var K=m[B+ue],te=m[G+ue],Y=m[Q+ue];m[X+ue]=K,m[j+ue]=te,m[re+ue]=Y}t(_,p,m),t(g,c,m);for(var H=C;H<=F;++H)if(y(H,D,R,m))H!==C&&r(H,C,m),++C;else if(!y(H,O,z,m))for(;;)if(y(F,O,z,m)){y(F,D,R,m)?(h(H,C,F,m),++C,--F):(r(H,F,m),--F);break}else{if(--F<H)break;continue}s(p,C-1,D,R,m),s(c,F+1,O,z,m),C-2-p<=e?n(p,C-2,m):d(p,C-2,m),c-(F+2)<=e?n(F+2,c,m):d(F+2,c,m),F-C<=e?n(C,F,m):d(C,F,m)}},{}],41:[function(f,M,T){M.exports={init:m,sweepBipartite:u,sweepComplete:A,scanBipartite:_,scanComplete:g};var e=f("typedarray-pool"),a=f("bit-twiddle"),n=f("./sort"),r=1<<28,t=1024,h=e.mallocInt32(t),s=e.mallocInt32(t),o=e.mallocInt32(t),y=e.mallocInt32(t),d=e.mallocInt32(t),p=e.mallocInt32(t),c=e.mallocDouble(t*8);function m(b){var v=a.nextPow2(b);h.length<v&&(e.free(h),h=e.mallocInt32(v)),s.length<v&&(e.free(s),s=e.mallocInt32(v)),o.length<v&&(e.free(o),o=e.mallocInt32(v)),y.length<v&&(e.free(y),y=e.mallocInt32(v)),d.length<v&&(e.free(d),d=e.mallocInt32(v)),p.length<v&&(e.free(p),p=e.mallocInt32(v));var k=8*v;c.length<k&&(e.free(c),c=e.mallocDouble(k))}function l(b,v,k,S){var E=v[S],C=b[k-1];b[E]=C,v[C]=E}function x(b,v,k,S){b[k]=S,v[S]=k}function u(b,v,k,S,E,C,F,I,D,R){for(var O=0,z=2*b,B=b-1,G=z-1,Q=k;Q<S;++Q){var X=C[Q],j=z*Q;c[O++]=E[j+B],c[O++]=-(X+1),c[O++]=E[j+G],c[O++]=X}for(var Q=F;Q<I;++Q){var X=R[Q]+r,re=z*Q;c[O++]=D[re+B],c[O++]=-X,c[O++]=D[re+G],c[O++]=X}var ue=O>>>1;n(c,ue);for(var K=0,te=0,Q=0;Q<ue;++Q){var Y=c[2*Q+1]|0;if(Y>=r)Y=Y-r|0,l(o,y,te--,Y);else if(Y>=0)l(h,s,K--,Y);else if(Y<=-r){Y=-Y-r|0;for(var H=0;H<K;++H){var ee=v(h[H],Y);if(ee!==void 0)return ee}x(o,y,te++,Y)}else{Y=-Y-1|0;for(var H=0;H<te;++H){var ee=v(Y,o[H]);if(ee!==void 0)return ee}x(h,s,K++,Y)}}}function A(b,v,k,S,E,C,F,I,D,R){for(var O=0,z=2*b,B=b-1,G=z-1,Q=k;Q<S;++Q){var X=C[Q]+1<<1,j=z*Q;c[O++]=E[j+B],c[O++]=-X,c[O++]=E[j+G],c[O++]=X}for(var Q=F;Q<I;++Q){var X=R[Q]+1<<1,re=z*Q;c[O++]=D[re+B],c[O++]=-X|1,c[O++]=D[re+G],c[O++]=X|1}var ue=O>>>1;n(c,ue);for(var K=0,te=0,Y=0,Q=0;Q<ue;++Q){var H=c[2*Q+1]|0,ee=H&1;if(Q<ue-1&&H>>1===c[2*Q+3]>>1&&(ee=2,Q+=1),H<0){for(var ne=-(H>>1)-1,Z=0;Z<Y;++Z){var q=v(d[Z],ne);if(q!==void 0)return q}if(ee!==0)for(var Z=0;Z<K;++Z){var q=v(h[Z],ne);if(q!==void 0)return q}if(ee!==1)for(var Z=0;Z<te;++Z){var q=v(o[Z],ne);if(q!==void 0)return q}ee===0?x(h,s,K++,ne):ee===1?x(o,y,te++,ne):ee===2&&x(d,p,Y++,ne)}else{var ne=(H>>1)-1;ee===0?l(h,s,K--,ne):ee===1?l(o,y,te--,ne):ee===2&&l(d,p,Y--,ne)}}}function _(b,v,k,S,E,C,F,I,D,R,O,z){var B=0,G=2*b,Q=v,X=v+b,j=1,re=1;S?re=r:j=r;for(var ue=E;ue<C;++ue){var K=ue+j,te=G*ue;c[B++]=F[te+Q],c[B++]=-K,c[B++]=F[te+X],c[B++]=K}for(var ue=D;ue<R;++ue){var K=ue+re,Y=G*ue;c[B++]=O[Y+Q],c[B++]=-K}var H=B>>>1;n(c,H);for(var ee=0,ue=0;ue<H;++ue){var ne=c[2*ue+1]|0;if(ne<0){var K=-ne,Z=!1;if(K>=r?(Z=!S,K-=r):(Z=!!S,K-=1),Z)x(h,s,ee++,K);else{var q=z[K],ie=G*K,se=O[ie+v+1],ae=O[ie+v+1+b];e:for(var oe=0;oe<ee;++oe){var be=h[oe],ce=G*be;if(!(ae<F[ce+v+1]||F[ce+v+1+b]<se)){for(var de=v+2;de<b;++de)if(O[ie+de+b]<F[ce+de]||F[ce+de+b]<O[ie+de])continue e;var ye=I[be],ge;if(S?ge=k(q,ye):ge=k(ye,q),ge!==void 0)return ge}}}}else l(h,s,ee--,ne-j)}}function g(b,v,k,S,E,C,F,I,D,R,O){for(var z=0,B=2*b,G=v,Q=v+b,X=S;X<E;++X){var j=X+r,re=B*X;c[z++]=C[re+G],c[z++]=-j,c[z++]=C[re+Q],c[z++]=j}for(var X=I;X<D;++X){var j=X+1,ue=B*X;c[z++]=R[ue+G],c[z++]=-j}var K=z>>>1;n(c,K);for(var te=0,X=0;X<K;++X){var Y=c[2*X+1]|0;if(Y<0){var j=-Y;if(j>=r)h[te++]=j-r;else{j-=1;var H=O[j],ee=B*j,ne=R[ee+v+1],Z=R[ee+v+1+b];e:for(var q=0;q<te;++q){var ie=h[q],se=F[ie];if(se===H)break;var ae=B*ie;if(!(Z<C[ae+v+1]||C[ae+v+1+b]<ne)){for(var oe=v+2;oe<b;++oe)if(R[ee+oe+b]<C[ae+oe]||C[ae+oe+b]<R[ee+oe])continue e;var be=k(se,H);if(be!==void 0)return be}}}}else{for(var j=Y-r,q=te-1;q>=0;--q)if(h[q]===j){for(var oe=q+1;oe<te;++oe)h[oe-1]=h[oe];break}--te}}}},{"./sort":40,"bit-twiddle":32,"typedarray-pool":308}],42:[function(f,M,T){var e=f("./lib/monotone"),a=f("./lib/triangulation"),n=f("./lib/delaunay"),r=f("./lib/filter");M.exports=y;function t(d){return[Math.min(d[0],d[1]),Math.max(d[0],d[1])]}function h(d,p){return d[0]-p[0]||d[1]-p[1]}function s(d){return d.map(t).sort(h)}function o(d,p,c){return p in d?d[p]:c}function y(d,p,c){Array.isArray(p)?(c=c||{},p=p||[]):(c=p||{},p=[]);var m=!!o(c,"delaunay",!0),l=!!o(c,"interior",!0),x=!!o(c,"exterior",!0),u=!!o(c,"infinity",!1);if(!l&&!x||d.length===0)return[];var A=e(d,p);if(m||l!==x||u){for(var _=a(d.length,s(p)),g=0;g<A.length;++g){var b=A[g];_.addTriangle(b[0],b[1],b[2])}return m&&n(d,_),x?l?u?r(_,0,u):_.cells():r(_,1,u):r(_,-1)}else return A}},{"./lib/delaunay":43,"./lib/filter":44,"./lib/monotone":45,"./lib/triangulation":46}],43:[function(f,M,T){var e=f("robust-in-sphere")[4];f("binary-search-bounds"),M.exports=n;function a(r,t,h,s,o,y){var d=t.opposite(s,o);if(!(d<0)){if(o<s){var p=s;s=o,o=p,p=y,y=d,d=p}t.isConstraint(s,o)||e(r[s],r[o],r[y],r[d])<0&&h.push(s,o)}}function n(r,t){for(var h=[],s=r.length,o=t.stars,y=0;y<s;++y)for(var d=o[y],p=1;p<d.length;p+=2){var c=d[p];if(!(c<y)&&!t.isConstraint(y,c)){for(var m=d[p-1],l=-1,x=1;x<d.length;x+=2)if(d[x-1]===c){l=d[x];break}l<0||e(r[y],r[c],r[m],r[l])<0&&h.push(y,c)}}for(;h.length>0;){for(var c=h.pop(),y=h.pop(),m=-1,l=-1,d=o[y],u=1;u<d.length;u+=2){var A=d[u-1],_=d[u];A===c?l=_:_===c&&(m=A)}m<0||l<0||e(r[y],r[c],r[m],r[l])>=0||(t.flip(y,c),a(r,t,h,m,y,l),a(r,t,h,y,l,m),a(r,t,h,l,c,m),a(r,t,h,c,m,l))}}},{"binary-search-bounds":31,"robust-in-sphere":282}],44:[function(f,M,T){var e=f("binary-search-bounds");M.exports=s;function a(o,y,d,p,c,m,l){this.cells=o,this.neighbor=y,this.flags=p,this.constraint=d,this.active=c,this.next=m,this.boundary=l}var n=a.prototype;function r(o,y){return o[0]-y[0]||o[1]-y[1]||o[2]-y[2]}n.locate=function(){var o=[0,0,0];return function(y,d,p){var c=y,m=d,l=p;return d<p?d<y&&(c=d,m=p,l=y):p<y&&(c=p,m=y,l=d),c<0?-1:(o[0]=c,o[1]=m,o[2]=l,e.eq(this.cells,o,r))}}();function t(o,y){for(var d=o.cells(),p=d.length,c=0;c<p;++c){var m=d[c],l=m[0],x=m[1],u=m[2];x<u?x<l&&(m[0]=x,m[1]=u,m[2]=l):u<l&&(m[0]=u,m[1]=l,m[2]=x)}d.sort(r);for(var A=new Array(p),c=0;c<A.length;++c)A[c]=0;var _=[],g=[],b=new Array(3*p),v=new Array(3*p),k=null;y&&(k=[]);for(var S=new a(d,b,v,A,_,g,k),c=0;c<p;++c)for(var m=d[c],E=0;E<3;++E){var l=m[E],x=m[(E+1)%3],C=b[3*c+E]=S.locate(x,l,o.opposite(x,l)),F=v[3*c+E]=o.isConstraint(l,x);C<0&&(F?g.push(c):(_.push(c),A[c]=1),y&&k.push([x,l,-1]))}return S}function h(o,y,d){for(var p=0,c=0;c<o.length;++c)y[c]===d&&(o[p++]=o[c]);return o.length=p,o}function s(o,y,d){var p=t(o,d);if(y===0)return d?p.cells.concat(p.boundary):p.cells;for(var c=1,m=p.active,l=p.next,x=p.flags,u=p.cells,A=p.constraint,_=p.neighbor;m.length>0||l.length>0;){for(;m.length>0;){var g=m.pop();if(x[g]!==-c){x[g]=c,u[g];for(var b=0;b<3;++b){var v=_[3*g+b];v>=0&&x[v]===0&&(A[3*g+b]?l.push(v):(m.push(v),x[v]=c))}}}var k=l;l=m,m=k,l.length=0,c=-c}var S=h(u,x,y);return d?S.concat(p.boundary):S}},{"binary-search-bounds":31}],45:[function(f,M,T){var e=f("binary-search-bounds"),a=f("robust-orientation")[3],n=0,r=1,t=2;M.exports=l;function h(x,u,A,_,g){this.a=x,this.b=u,this.idx=A,this.lowerIds=_,this.upperIds=g}function s(x,u,A,_){this.a=x,this.b=u,this.type=A,this.idx=_}function o(x,u){var A=x.a[0]-u.a[0]||x.a[1]-u.a[1]||x.type-u.type;return A||x.type!==n&&(A=a(x.a,x.b,u.b),A)?A:x.idx-u.idx}function y(x,u){return a(x.a,x.b,u)}function d(x,u,A,_,g){for(var b=e.lt(u,_,y),v=e.gt(u,_,y),k=b;k<v;++k){for(var S=u[k],E=S.lowerIds,F=E.length;F>1&&a(A[E[F-2]],A[E[F-1]],_)>0;)x.push([E[F-1],E[F-2],g]),F-=1;E.length=F,E.push(g);for(var C=S.upperIds,F=C.length;F>1&&a(A[C[F-2]],A[C[F-1]],_)<0;)x.push([C[F-2],C[F-1],g]),F-=1;C.length=F,C.push(g)}}function p(x,u){var A;return x.a[0]<u.a[0]?A=a(x.a,x.b,u.a):A=a(u.b,u.a,x.a),A||(u.b[0]<x.b[0]?A=a(x.a,x.b,u.b):A=a(u.b,u.a,x.b),A||x.idx-u.idx)}function c(x,u,A){var _=e.le(x,A,p),g=x[_],b=g.upperIds,v=b[b.length-1];g.upperIds=[v],x.splice(_+1,0,new h(A.a,A.b,A.idx,[v],b))}function m(x,u,A){var _=A.a;A.a=A.b,A.b=_;var g=e.eq(x,A,p),b=x[g],v=x[g-1];v.upperIds=b.upperIds,x.splice(g,1)}function l(x,u){for(var A=x.length,_=u.length,g=[],b=0;b<A;++b)g.push(new s(x[b],null,n,b));for(var b=0;b<_;++b){var v=u[b],k=x[v[0]],S=x[v[1]];k[0]<S[0]?g.push(new s(k,S,t,b),new s(S,k,r,b)):k[0]>S[0]&&g.push(new s(S,k,t,b),new s(k,S,r,b))}g.sort(o);for(var E=g[0].a[0]-(1+Math.abs(g[0].a[0]))*Math.pow(2,-52),C=[new h([E,1],[E,0],-1,[],[])],F=[],b=0,I=g.length;b<I;++b){var D=g[b],R=D.type;R===n?d(F,C,x,D.a,D.idx):R===t?c(C,x,D):m(C,x,D)}return F}},{"binary-search-bounds":31,"robust-orientation":284}],46:[function(f,M,T){var e=f("binary-search-bounds");M.exports=t;function a(h,s){this.stars=h,this.edges=s}var n=a.prototype;function r(h,s,o){for(var y=1,d=h.length;y<d;y+=2)if(h[y-1]===s&&h[y]===o){h[y-1]=h[d-2],h[y]=h[d-1],h.length=d-2;return}}n.isConstraint=function(){var h=[0,0];function s(o,y){return o[0]-y[0]||o[1]-y[1]}return function(o,y){return h[0]=Math.min(o,y),h[1]=Math.max(o,y),e.eq(this.edges,h,s)>=0}}(),n.removeTriangle=function(h,s,o){var y=this.stars;r(y[h],s,o),r(y[s],o,h),r(y[o],h,s)},n.addTriangle=function(h,s,o){var y=this.stars;y[h].push(s,o),y[s].push(o,h),y[o].push(h,s)},n.opposite=function(h,s){for(var o=this.stars[s],y=1,d=o.length;y<d;y+=2)if(o[y]===h)return o[y-1];return-1},n.flip=function(h,s){var o=this.opposite(h,s),y=this.opposite(s,h);this.removeTriangle(h,s,o),this.removeTriangle(s,h,y),this.addTriangle(h,y,o),this.addTriangle(s,o,y)},n.edges=function(){for(var h=this.stars,s=[],o=0,y=h.length;o<y;++o)for(var d=h[o],p=0,c=d.length;p<c;p+=2)s.push([d[p],d[p+1]]);return s},n.cells=function(){for(var h=this.stars,s=[],o=0,y=h.length;o<y;++o)for(var d=h[o],p=0,c=d.length;p<c;p+=2){var m=d[p],l=d[p+1];o<Math.min(m,l)&&s.push([o,m,l])}return s};function t(h,s){for(var o=new Array(h),y=0;y<h;++y)o[y]=[];return new a(o,s)}},{"binary-search-bounds":31}],47:[function(f,M,T){M.exports=e;function e(a){for(var n=1,r=1;r<a.length;++r)for(var t=0;t<r;++t)if(a[r]<a[t])n=-n;else if(a[t]===a[r])return 0;return n}},{}],48:[function(f,M,T){var e=f("dup"),a=f("robust-linear-solve");function n(h,s){for(var o=0,y=h.length,d=0;d<y;++d)o+=h[d]*s[d];return o}function r(h){var s=h.length;if(s===0)return[];h[0].length;var o=e([h.length+1,h.length+1],1),y=e([h.length+1],1);o[s][s]=0;for(var d=0;d<s;++d){for(var p=0;p<=d;++p)o[p][d]=o[d][p]=2*n(h[d],h[p]);y[d]=n(h[d],h[d])}for(var c=a(o,y),m=0,l=c[s+1],d=0;d<l.length;++d)m+=l[d];for(var x=new Array(s),d=0;d<s;++d){for(var l=c[d],u=0,p=0;p<l.length;++p)u+=l[p];x[d]=u/m}return x}function t(h){if(h.length===0)return[];for(var s=h[0].length,o=e([s]),y=r(h),d=0;d<h.length;++d)for(var p=0;p<s;++p)o[p]+=h[d][p]*y[d];return o}t.barycenetric=r,M.exports=t},{dup:65,"robust-linear-solve":283}],49:[function(f,M,T){M.exports=a;var e=f("circumcenter");function a(n){for(var r=e(n),t=0,h=0;h<n.length;++h)for(var s=n[h],o=0;o<r.length;++o)t+=Math.pow(s[o]-r[o],2);return Math.sqrt(t/n.length)}},{circumcenter:48}],50:[function(f,M,T){M.exports=k;var e=f("union-find"),a=f("box-intersect"),n=f("robust-segment-intersect"),r=f("big-rat"),t=f("big-rat/cmp"),h=f("big-rat/to-float"),s=f("rat-vec"),o=f("nextafter"),y=f("./lib/rat-seg-intersect");function d(S){var E=h(S);return[o(E,-1/0),o(E,1/0)]}function p(S,E){for(var C=new Array(E.length),F=0;F<E.length;++F){var I=E[F],D=S[I[0]],R=S[I[1]];C[F]=[o(Math.min(D[0],R[0]),-1/0),o(Math.min(D[1],R[1]),-1/0),o(Math.max(D[0],R[0]),1/0),o(Math.max(D[1],R[1]),1/0)]}return C}function c(S){for(var E=new Array(S.length),C=0;C<S.length;++C){var F=S[C];E[C]=[o(F[0],-1/0),o(F[1],-1/0),o(F[0],1/0),o(F[1],1/0)]}return E}function m(S,E,C){var F=[];return a(C,function(I,D){var R=E[I],O=E[D];if(!(R[0]===O[0]||R[0]===O[1]||R[1]===O[0]||R[1]===O[1])){var z=S[R[0]],B=S[R[1]],G=S[O[0]],Q=S[O[1]];n(z,B,G,Q)&&F.push([I,D])}}),F}function l(S,E,C,F){var I=[];return a(C,F,function(D,R){var O=E[D];if(!(O[0]===R||O[1]===R)){var z=S[R],B=S[O[0]],G=S[O[1]];n(B,G,z,z)&&I.push([D,R])}}),I}function x(S,E,C,F,I){var D,R,O=S.map(function(ie){return[r(ie[0]),r(ie[1])]});for(D=0;D<C.length;++D){var z=C[D];R=z[0];var B=z[1],G=E[R],Q=E[B],X=y(s(S[G[0]]),s(S[G[1]]),s(S[Q[0]]),s(S[Q[1]]));if(!!X){var j=S.length;S.push([h(X[0]),h(X[1])]),O.push(X),F.push([R,j],[B,j])}}for(F.sort(function(ie,se){if(ie[0]!==se[0])return ie[0]-se[0];var ae=O[ie[1]],oe=O[se[1]];return t(ae[0],oe[0])||t(ae[1],oe[1])}),D=F.length-1;D>=0;--D){var re=F[D];R=re[0];var ue=E[R],K=ue[0],te=ue[1],Y=S[K],H=S[te];if((Y[0]-H[0]||Y[1]-H[1])<0){var ee=K;K=te,te=ee}ue[0]=K;var ne=ue[1]=re[1],Z;for(I&&(Z=ue[2]);D>0&&F[D-1][0]===R;){var re=F[--D],q=re[1];I?E.push([ne,q,Z]):E.push([ne,q]),ne=q}I?E.push([ne,te,Z]):E.push([ne,te])}return O}function u(S,E,C){for(var F=E.length,I=new e(F),D=[],R=0;R<E.length;++R){var O=E[R],z=d(O[0]),B=d(O[1]);D.push([o(z[0],-1/0),o(B[0],-1/0),o(z[1],1/0),o(B[1],1/0)])}a(D,function(re,ue){I.link(re,ue)});for(var G=!0,Q=new Array(F),R=0;R<F;++R){var X=I.find(R);X!==R&&(G=!1,S[X]=[Math.min(S[R][0],S[X][0]),Math.min(S[R][1],S[X][1])])}if(G)return null;for(var j=0,R=0;R<F;++R){var X=I.find(R);X===R?(Q[R]=j,S[j++]=S[R]):Q[R]=-1}S.length=j;for(var R=0;R<F;++R)Q[R]<0&&(Q[R]=Q[I.find(R)]);return Q}function A(S,E){return S[0]-E[0]||S[1]-E[1]}function _(S,E){var C=S[0]-E[0]||S[1]-E[1];return C||(S[2]<E[2]?-1:S[2]>E[2]?1:0)}function g(S,E,C){if(S.length!==0){if(E)for(var F=0;F<S.length;++F){var I=S[F],D=E[I[0]],R=E[I[1]];I[0]=Math.min(D,R),I[1]=Math.max(D,R)}else for(var F=0;F<S.length;++F){var I=S[F],D=I[0],R=I[1];I[0]=Math.min(D,R),I[1]=Math.max(D,R)}C?S.sort(_):S.sort(A);for(var O=1,F=1;F<S.length;++F){var z=S[F-1],B=S[F];B[0]===z[0]&&B[1]===z[1]&&(!C||B[2]===z[2])||(S[O++]=B)}S.length=O}}function b(S,E,C){var F=u(S,[],c(S));return g(E,F,C),!!F}function v(S,E,C){var F=p(S,E),I=m(S,E,F),D=c(S),R=l(S,E,F,D),O=x(S,E,I,R,C),z=u(S,O);return g(E,z,C),z?!0:I.length>0||R.length>0}function k(S,E,C){var F;if(C){F=E;for(var I=new Array(E.length),D=0;D<E.length;++D){var R=E[D];I[D]=[R[0],R[1],C[D]]}E=I}for(var O=b(S,E,!!C);v(S,E,!!C);)O=!0;if(!!C&&O){F.length=0,C.length=0;for(var D=0;D<E.length;++D){var R=E[D];F.push([R[0],R[1]]),C.push(R[2])}}return O}},{"./lib/rat-seg-intersect":51,"big-rat":18,"big-rat/cmp":16,"big-rat/to-float":30,"box-intersect":35,nextafter:260,"rat-vec":273,"robust-segment-intersect":287,"union-find":309}],51:[function(f,M,T){M.exports=y;var e=f("big-rat/mul"),a=f("big-rat/div"),n=f("big-rat/sub"),r=f("big-rat/sign"),t=f("rat-vec/sub"),h=f("rat-vec/add"),s=f("rat-vec/muls");function o(d,p){return n(e(d[0],p[1]),e(d[1],p[0]))}function y(d,p,c,m){var l=t(p,d),x=t(m,c),u=o(l,x);if(r(u)===0)return null;var A=t(d,c),_=o(x,A),g=a(_,u),b=s(l,g),v=h(d,b);return v}},{"big-rat/div":17,"big-rat/mul":27,"big-rat/sign":28,"big-rat/sub":29,"rat-vec/add":272,"rat-vec/muls":274,"rat-vec/sub":275}],52:[function(f,M,T){M.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},{}],53:[function(f,M,T){var e=f("./colorScale"),a=f("lerp");M.exports=n;function n(s){var o,y,d,p,c,m,l,x,g,u,A;if(s||(s={}),x=(s.nshades||72)-1,l=s.format||"hex",m=s.colormap,m||(m="jet"),typeof m=="string"){if(m=m.toLowerCase(),!e[m])throw Error(m+" not a supported colorscale");c=e[m]}else if(Array.isArray(m))c=m.slice();else throw Error("unsupported colormap option",m);if(c.length>x+1)throw new Error(m+" map requires nshades to be at least size "+c.length);Array.isArray(s.alpha)?s.alpha.length!==2?u=[1,1]:u=s.alpha.slice():typeof s.alpha=="number"?u=[s.alpha,s.alpha]:u=[1,1],o=c.map(function(k){return Math.round(k.index*x)}),u[0]=Math.min(Math.max(u[0],0),1),u[1]=Math.min(Math.max(u[1],0),1);var _=c.map(function(k,S){var E=c[S].index,C=c[S].rgb.slice();return C.length===4&&C[3]>=0&&C[3]<=1||(C[3]=u[0]+(u[1]-u[0])*E),C}),g=[];for(A=0;A<o.length-1;++A){p=o[A+1]-o[A],y=_[A],d=_[A+1];for(var b=0;b<p;b++){var v=b/p;g.push([Math.round(a(y[0],d[0],v)),Math.round(a(y[1],d[1],v)),Math.round(a(y[2],d[2],v)),a(y[3],d[3],v)])}}return g.push(c[c.length-1].rgb.concat(u[1])),l==="hex"?g=g.map(t):l==="rgbaString"?g=g.map(h):l==="float"&&(g=g.map(r)),g}function r(s){return[s[0]/255,s[1]/255,s[2]/255,s[3]]}function t(s){for(var o,y="#",d=0;d<3;++d)o=s[d],o=o.toString(16),y+=("00"+o).substr(o.length);return y}function h(s){return"rgba("+s.join(",")+")"}},{"./colorScale":52,lerp:240}],54:[function(f,M,T){M.exports=s;var e=f("robust-orientation"),a=f("signum"),n=f("two-sum"),r=f("robust-product"),t=f("robust-sum");function h(o,y,d){var p=n(o[0],-y[0]),c=n(o[1],-y[1]),m=n(d[0],-y[0]),l=n(d[1],-y[1]),x=t(r(p,m),r(c,l));return x[x.length-1]>=0}function s(o,y,d,p){var c=e(y,d,p);if(c===0){var m=a(e(o,y,d)),l=a(e(o,y,p));if(m===l){if(m===0){var x=h(o,y,d),u=h(o,y,p);return x===u?0:x?1:-1}return 0}else{if(l===0)return m>0||h(o,y,p)?-1:1;if(m===0)return l>0||h(o,y,d)?1:-1}return a(l-m)}var A=e(o,y,d);if(A>0)return c>0&&e(o,y,p)>0?1:-1;if(A<0)return c>0||e(o,y,p)>0?1:-1;var _=e(o,y,p);return _>0||h(o,y,d)?1:-1}},{"robust-orientation":284,"robust-product":285,"robust-sum":289,signum:55,"two-sum":307}],55:[function(f,M,T){M.exports=function(a){return a<0?-1:a>0?1:0}},{}],56:[function(f,M,T){M.exports=n;var e=Math.min;function a(r,t){return r-t}function n(r,t){var h=r.length,s=r.length-t.length;if(s)return s;switch(h){case 0:return 0;case 1:return r[0]-t[0];case 2:return r[0]+r[1]-t[0]-t[1]||e(r[0],r[1])-e(t[0],t[1]);case 3:var o=r[0]+r[1],y=t[0]+t[1];if(s=o+r[2]-(y+t[2]),s)return s;var d=e(r[0],r[1]),p=e(t[0],t[1]);return e(d,r[2])-e(p,t[2])||e(d+r[2],o)-e(p+t[2],y);case 4:var c=r[0],m=r[1],l=r[2],x=r[3],u=t[0],A=t[1],_=t[2],g=t[3];return c+m+l+x-(u+A+_+g)||e(c,m,l,x)-e(u,A,_,g,u)||e(c+m,c+l,c+x,m+l,m+x,l+x)-e(u+A,u+_,u+g,A+_,A+g,_+g)||e(c+m+l,c+m+x,c+l+x,m+l+x)-e(u+A+_,u+A+g,u+_+g,A+_+g);default:for(var b=r.slice().sort(a),v=t.slice().sort(a),k=0;k<h;++k)if(s=b[k]-v[k],s)return s;return 0}}},{}],57:[function(f,M,T){var e=f("compare-cell"),a=f("cell-orientation");M.exports=n;function n(r,t){return e(r,t)||a(r)-a(t)}},{"cell-orientation":47,"compare-cell":56}],58:[function(f,M,T){var e=f("./lib/ch1d"),a=f("./lib/ch2d"),n=f("./lib/chnd");M.exports=r;function r(t){var h=t.length;if(h===0)return[];if(h===1)return[[0]];var s=t[0].length;return s===0?[]:s===1?e(t):s===2?a(t):n(t,s)}},{"./lib/ch1d":59,"./lib/ch2d":60,"./lib/chnd":61}],59:[function(f,M,T){M.exports=e;function e(a){for(var n=0,r=0,t=1;t<a.length;++t)a[t][0]<a[n][0]&&(n=t),a[t][0]>a[r][0]&&(r=t);return n<r?[[n],[r]]:n>r?[[r],[n]]:[[n]]}},{}],60:[function(f,M,T){M.exports=a;var e=f("monotone-convex-hull-2d");function a(n){var r=e(n),t=r.length;if(t<=2)return[];for(var h=new Array(t),s=r[t-1],o=0;o<t;++o){var y=r[o];h[o]=[s,y],s=y}return h}},{"monotone-convex-hull-2d":246}],61:[function(f,M,T){M.exports=t;var e=f("incremental-convex-hull"),a=f("affine-hull");function n(h,s){for(var o=h.length,y=new Array(o),d=0;d<s.length;++d)y[d]=h[s[d]];for(var p=s.length,d=0;d<o;++d)s.indexOf(d)<0&&(y[p++]=h[d]);return y}function r(h,s){for(var o=h.length,y=s.length,d=0;d<o;++d)for(var p=h[d],c=0;c<p.length;++c){var m=p[c];if(m<y)p[c]=s[m];else{m=m-y;for(var l=0;l<y;++l)m>=s[l]&&(m+=1);p[c]=m}}return h}function t(h,s){try{return e(h,!0)}catch{var o=a(h);if(o.length<=s)return[];var y=n(h,o),d=e(y,!0);return r(d,o)}}},{"affine-hull":10,"incremental-convex-hull":233}],62:[function(f,M,T){function e(n,r,t,h,s,o){var y=6*s*s-6*s,d=3*s*s-4*s+1,p=-6*s*s+6*s,c=3*s*s-2*s;if(n.length){o||(o=new Array(n.length));for(var m=n.length-1;m>=0;--m)o[m]=y*n[m]+d*r[m]+p*t[m]+c*h[m];return o}return y*n+d*r+p*t[m]+c*h}function a(n,r,t,h,s,o){var y=s-1,d=s*s,p=y*y,c=(1+2*s)*p,m=s*p,l=d*(3-2*s),x=d*y;if(n.length){o||(o=new Array(n.length));for(var u=n.length-1;u>=0;--u)o[u]=c*n[u]+m*r[u]+l*t[u]+x*h[u];return o}return c*n+m*r+l*t+x*h}M.exports=a,M.exports.derivative=e},{}],63:[function(f,M,T){var e=f("incremental-convex-hull"),a=f("uniq");M.exports=h;function n(s,o){this.point=s,this.index=o}function r(s,o){for(var y=s.point,d=o.point,p=y.length,c=0;c<p;++c){var m=d[c]-y[c];if(m)return m}return 0}function t(s,o,y){if(s===1)return y?[[-1,0]]:[];var d=o.map(function(x,u){return[x[0],u]});d.sort(function(x,u){return x[0]-u[0]});for(var p=new Array(s-1),c=1;c<s;++c){var m=d[c-1],l=d[c];p[c-1]=[m[1],l[1]]}return y&&p.push([-1,p[0][1]],[p[s-1][1],-1]),p}function h(s,o){var y=s.length;if(y===0)return[];var d=s[0].length;if(d<1)return[];if(d===1)return t(y,s,o);for(var p=new Array(y),c=1,m=0;m<y;++m){for(var l=s[m],x=new Array(d+1),u=0,A=0;A<d;++A){var _=l[A];x[A]=_,u+=_*_}x[d]=u,p[m]=new n(x,m),c=Math.max(u,c)}a(p,r),y=p.length;for(var g=new Array(y+d+1),b=new Array(y+d+1),v=(d+1)*(d+1)*c,k=new Array(d+1),m=0;m<=d;++m)k[m]=0;k[d]=v,g[0]=k.slice(),b[0]=-1;for(var m=0;m<=d;++m){var x=k.slice();x[m]=1,g[m+1]=x,b[m+1]=-1}for(var m=0;m<y;++m){var S=p[m];g[m+d+1]=S.point,b[m+d+1]=S.index}var E=e(g,!1);if(o?E=E.filter(function(C){for(var F=0,I=0;I<=d;++I){var D=b[C[I]];if(D<0&&++F>=2)return!1;C[I]=D}return!0}):E=E.filter(function(C){for(var F=0;F<=d;++F){var I=b[C[F]];if(I<0)return!1;C[F]=I}return!0}),d&1)for(var m=0;m<E.length;++m){var S=E[m],x=S[0];S[0]=S[1],S[1]=x}return E}},{"incremental-convex-hull":233,uniq:310}],64:[function(f,M,T){(function(e){(function(){var a=!1;if(typeof Float64Array<"u"){var n=new Float64Array(1),r=new Uint32Array(n.buffer);if(n[0]=1,a=!0,r[1]===1072693248){let h=function(y,d){return r[0]=y,r[1]=d,n[0]},s=function(y){return n[0]=y,r[0]},o=function(y){return n[0]=y,r[1]};M.exports=function(d){return n[0]=d,[r[0],r[1]]},M.exports.pack=h,M.exports.lo=s,M.exports.hi=o}else if(r[0]===1072693248){let h=function(y,d){return r[1]=y,r[0]=d,n[0]},s=function(y){return n[0]=y,r[1]},o=function(y){return n[0]=y,r[0]};M.exports=function(d){return n[0]=d,[r[1],r[0]]},M.exports.pack=h,M.exports.lo=s,M.exports.hi=o}else a=!1}if(!a){let h=function(y,d){return t.writeUInt32LE(y,0,!0),t.writeUInt32LE(d,4,!0),t.readDoubleLE(0,!0)},s=function(y){return t.writeDoubleLE(y,0,!0),t.readUInt32LE(0,!0)},o=function(y){return t.writeDoubleLE(y,0,!0),t.readUInt32LE(4,!0)};var t=new e(8);M.exports=function(d){return t.writeDoubleLE(d,0,!0),[t.readUInt32LE(0,!0),t.readUInt32LE(4,!0)]},M.exports.pack=h,M.exports.lo=s,M.exports.hi=o}M.exports.sign=function(h){return M.exports.hi(h)>>>31},M.exports.exponent=function(h){var s=M.exports.hi(h);return(s<<1>>>21)-1023},M.exports.fraction=function(h){var s=M.exports.lo(h),o=M.exports.hi(h),y=o&(1<<20)-1;return o&2146435072&&(y+=1<<20),[s,y]},M.exports.denormalized=function(h){var s=M.exports.hi(h);return!(s&2146435072)}}).call(this)}).call(this,f("buffer").Buffer)},{buffer:3}],65:[function(f,M,T){function e(r,t,h){var s=r[h]|0;if(s<=0)return[];var o=new Array(s),y;if(h===r.length-1)for(y=0;y<s;++y)o[y]=t;else for(y=0;y<s;++y)o[y]=e(r,t,h+1);return o}function a(r,t){var h,s;for(h=new Array(r),s=0;s<r;++s)h[s]=t;return h}function n(r,t){switch(typeof t>"u"&&(t=0),typeof r){case"number":if(r>0)return a(r|0,t);break;case"object":if(typeof r.length=="number")return e(r,t,0);break}return[]}M.exports=n},{}],66:[function(f,M,T){M.exports=a;var e=f("uniq");function a(n,r){var t=n.length;if(typeof r!="number"){r=0;for(var h=0;h<t;++h){var s=n[h];r=Math.max(r,s[0],s[1])}r=(r|0)+1}r=r|0;for(var o=new Array(r),h=0;h<r;++h)o[h]=[];for(var h=0;h<t;++h){var s=n[h];o[s[0]].push(s[1]),o[s[1]].push(s[0])}for(var y=0;y<r;++y)e(o[y],function(d,p){return d-p});return o}},{uniq:310}],67:[function(f,M,T){M.exports=e;function e(a,n,r){var t=n||0,h=r||1;return[[a[12]+a[0],a[13]+a[1],a[14]+a[2],a[15]+a[3]],[a[12]-a[0],a[13]-a[1],a[14]-a[2],a[15]-a[3]],[a[12]+a[4],a[13]+a[5],a[14]+a[6],a[15]+a[7]],[a[12]-a[4],a[13]-a[5],a[14]-a[6],a[15]-a[7]],[t*a[12]+a[8],t*a[13]+a[9],t*a[14]+a[10],t*a[15]+a[11]],[h*a[12]-a[8],h*a[13]-a[9],h*a[14]-a[10],h*a[15]-a[11]]]}},{}],68:[function(f,M,T){M.exports=s;var e=f("cubic-hermite"),a=f("binary-search-bounds");function n(o,y,d){return Math.min(y,Math.max(o,d))}function r(o,y,d){this.dimension=o.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var p=0;p<this.dimension;++p)this.bounds[0][p]=-1/0,this.bounds[1][p]=1/0;this._state=o.slice().reverse(),this._velocity=y.slice().reverse(),this._time=[d],this._scratch=[o.slice(),o.slice(),o.slice(),o.slice(),o.slice()]}var t=r.prototype;t.flush=function(o){var y=a.gt(this._time,o)-1;y<=0||(this._time.splice(0,y),this._state.splice(0,y*this.dimension),this._velocity.splice(0,y*this.dimension))},t.curve=function(o){var y=this._time,d=y.length,p=a.le(y,o),c=this._scratch[0],m=this._state,l=this._velocity,x=this.dimension,u=this.bounds;if(p<0)for(var A=x-1,_=0;_<x;++_,--A)c[_]=m[A];else if(p>=d-1)for(var A=m.length-1,g=o-y[d-1],_=0;_<x;++_,--A)c[_]=m[A]+g*l[A];else{for(var A=x*(p+1)-1,b=y[p],v=y[p+1],k=v-b||1,S=this._scratch[1],E=this._scratch[2],C=this._scratch[3],F=this._scratch[4],I=!0,_=0;_<x;++_,--A)S[_]=m[A],C[_]=l[A]*k,E[_]=m[A+x],F[_]=l[A+x]*k,I=I&&S[_]===E[_]&&C[_]===F[_]&&C[_]===0;if(I)for(var _=0;_<x;++_)c[_]=S[_];else e(S,C,E,F,(o-b)/k,c)}for(var D=u[0],R=u[1],_=0;_<x;++_)c[_]=n(D[_],R[_],c[_]);return c},t.dcurve=function(o){var y=this._time,d=y.length,p=a.le(y,o),c=this._scratch[0],m=this._state,l=this._velocity,x=this.dimension;if(p>=d-1){var u=m.length-1;o-y[d-1];for(var A=0;A<x;++A,--u)c[A]=l[u]}else{for(var u=x*(p+1)-1,_=y[p],g=y[p+1],b=g-_||1,v=this._scratch[1],k=this._scratch[2],S=this._scratch[3],E=this._scratch[4],C=!0,A=0;A<x;++A,--u)v[A]=m[u],S[A]=l[u]*b,k[A]=m[u+x],E[A]=l[u+x]*b,C=C&&v[A]===k[A]&&S[A]===E[A]&&S[A]===0;if(C)for(var A=0;A<x;++A)c[A]=0;else{e.derivative(v,S,k,E,(o-_)/b,c);for(var A=0;A<x;++A)c[A]/=b}}return c},t.lastT=function(){var o=this._time;return o[o.length-1]},t.stable=function(){for(var o=this._velocity,y=o.length,d=this.dimension-1;d>=0;--d)if(o[--y])return!1;return!0},t.jump=function(o){var y=this.lastT(),d=this.dimension;if(!(o<y||arguments.length!==d+1)){var p=this._state,c=this._velocity,m=p.length-this.dimension,l=this.bounds,x=l[0],u=l[1];this._time.push(y,o);for(var A=0;A<2;++A)for(var _=0;_<d;++_)p.push(p[m++]),c.push(0);this._time.push(o);for(var _=d;_>0;--_)p.push(n(x[_-1],u[_-1],arguments[_])),c.push(0)}},t.push=function(o){var y=this.lastT(),d=this.dimension;if(!(o<y||arguments.length!==d+1)){var p=this._state,c=this._velocity,m=p.length-this.dimension,l=o-y,x=this.bounds,u=x[0],A=x[1],_=l>1e-6?1/l:0;this._time.push(o);for(var g=d;g>0;--g){var b=n(u[g-1],A[g-1],arguments[g]);p.push(b),c.push((b-p[m++])*_)}}},t.set=function(o){var y=this.dimension;if(!(o<this.lastT()||arguments.length!==y+1)){var d=this._state,p=this._velocity,c=this.bounds,m=c[0],l=c[1];this._time.push(o);for(var x=y;x>0;--x)d.push(n(m[x-1],l[x-1],arguments[x])),p.push(0)}},t.move=function(o){var y=this.lastT(),d=this.dimension;if(!(o<=y||arguments.length!==d+1)){var p=this._state,c=this._velocity,m=p.length-this.dimension,l=this.bounds,x=l[0],u=l[1],A=o-y,_=A>1e-6?1/A:0;this._time.push(o);for(var g=d;g>0;--g){var b=arguments[g];p.push(n(x[g-1],u[g-1],p[m++]+b)),c.push(b*_)}}},t.idle=function(o){var y=this.lastT();if(!(o<y)){var d=this.dimension,p=this._state,c=this._velocity,m=p.length-d,l=this.bounds,x=l[0],u=l[1],A=o-y;this._time.push(o);for(var _=d-1;_>=0;--_)p.push(n(x[_],u[_],p[m]+A*c[m])),c.push(0),m+=1}};function h(o){for(var y=new Array(o),d=0;d<o;++d)y[d]=0;return y}function s(o,y,d){switch(arguments.length){case 0:return new r([0],[0],0);case 1:if(typeof o=="number"){var p=h(o);return new r(p,p,0)}else return new r(o,h(o.length),0);case 2:if(typeof y=="number"){var p=h(o.length);return new r(o,p,+y)}else d=0;case 3:if(o.length!==y.length)throw new Error("state and velocity lengths must match");return new r(o,y,d)}}},{"binary-search-bounds":31,"cubic-hermite":62}],69:[function(f,M,T){M.exports=A;var e=0,a=1;function n(_,g,b,v,k,S){this._color=_,this.key=g,this.value=b,this.left=v,this.right=k,this._count=S}function r(_){return new n(_._color,_.key,_.value,_.left,_.right,_._count)}function t(_,g){return new n(_,g.key,g.value,g.left,g.right,g._count)}function h(_){_._count=1+(_.left?_.left._count:0)+(_.right?_.right._count:0)}function s(_,g){this._compare=_,this.root=g}var o=s.prototype;Object.defineProperty(o,"keys",{get:function(){var _=[];return this.forEach(function(g,b){_.push(g)}),_}}),Object.defineProperty(o,"values",{get:function(){var _=[];return this.forEach(function(g,b){_.push(b)}),_}}),Object.defineProperty(o,"length",{get:function(){return this.root?this.root._count:0}}),o.insert=function(_,g){for(var b=this._compare,v=this.root,k=[],S=[];v;){var E=b(_,v.key);k.push(v),S.push(E),E<=0?v=v.left:v=v.right}k.push(new n(e,_,g,null,null,1));for(var C=k.length-2;C>=0;--C){var v=k[C];S[C]<=0?k[C]=new n(v._color,v.key,v.value,k[C+1],v.right,v._count+1):k[C]=new n(v._color,v.key,v.value,v.left,k[C+1],v._count+1)}for(var C=k.length-1;C>1;--C){var F=k[C-1],v=k[C];if(F._color===a||v._color===a)break;var I=k[C-2];if(I.left===F)if(F.left===v){var D=I.right;if(D&&D._color===e)F._color=a,I.right=t(a,D),I._color=e,C-=1;else{if(I._color=e,I.left=F.right,F._color=a,F.right=I,k[C-2]=F,k[C-1]=v,h(I),h(F),C>=3){var R=k[C-3];R.left===I?R.left=F:R.right=F}break}}else{var D=I.right;if(D&&D._color===e)F._color=a,I.right=t(a,D),I._color=e,C-=1;else{if(F.right=v.left,I._color=e,I.left=v.right,v._color=a,v.left=F,v.right=I,k[C-2]=v,k[C-1]=F,h(I),h(F),h(v),C>=3){var R=k[C-3];R.left===I?R.left=v:R.right=v}break}}else if(F.right===v){var D=I.left;if(D&&D._color===e)F._color=a,I.left=t(a,D),I._color=e,C-=1;else{if(I._color=e,I.right=F.left,F._color=a,F.left=I,k[C-2]=F,k[C-1]=v,h(I),h(F),C>=3){var R=k[C-3];R.right===I?R.right=F:R.left=F}break}}else{var D=I.left;if(D&&D._color===e)F._color=a,I.left=t(a,D),I._color=e,C-=1;else{if(F.left=v.right,I._color=e,I.right=v.left,v._color=a,v.right=F,v.left=I,k[C-2]=v,k[C-1]=F,h(I),h(F),h(v),C>=3){var R=k[C-3];R.right===I?R.right=v:R.left=v}break}}}return k[0]._color=a,new s(b,k[0])};function y(_,g){if(g.left){var b=y(_,g.left);if(b)return b}var b=_(g.key,g.value);if(b)return b;if(g.right)return y(_,g.right)}function d(_,g,b,v){var k=g(_,v.key);if(k<=0){if(v.left){var S=d(_,g,b,v.left);if(S)return S}var S=b(v.key,v.value);if(S)return S}if(v.right)return d(_,g,b,v.right)}function p(_,g,b,v,k){var S=b(_,k.key),E=b(g,k.key),C;if(S<=0&&(k.left&&(C=p(_,g,b,v,k.left),C)||E>0&&(C=v(k.key,k.value),C)))return C;if(E>0&&k.right)return p(_,g,b,v,k.right)}o.forEach=function(g,b,v){if(!!this.root)switch(arguments.length){case 1:return y(g,this.root);case 2:return d(b,this._compare,g,this.root);case 3:return this._compare(b,v)>=0?void 0:p(b,v,this._compare,g,this.root)}},Object.defineProperty(o,"begin",{get:function(){for(var _=[],g=this.root;g;)_.push(g),g=g.left;return new c(this,_)}}),Object.defineProperty(o,"end",{get:function(){for(var _=[],g=this.root;g;)_.push(g),g=g.right;return new c(this,_)}}),o.at=function(_){if(_<0)return new c(this,[]);for(var g=this.root,b=[];;){if(b.push(g),g.left){if(_<g.left._count){g=g.left;continue}_-=g.left._count}if(!_)return new c(this,b);if(_-=1,g.right){if(_>=g.right._count)break;g=g.right}else break}return new c(this,[])},o.ge=function(_){for(var g=this._compare,b=this.root,v=[],k=0;b;){var S=g(_,b.key);v.push(b),S<=0&&(k=v.length),S<=0?b=b.left:b=b.right}return v.length=k,new c(this,v)},o.gt=function(_){for(var g=this._compare,b=this.root,v=[],k=0;b;){var S=g(_,b.key);v.push(b),S<0&&(k=v.length),S<0?b=b.left:b=b.right}return v.length=k,new c(this,v)},o.lt=function(_){for(var g=this._compare,b=this.root,v=[],k=0;b;){var S=g(_,b.key);v.push(b),S>0&&(k=v.length),S<=0?b=b.left:b=b.right}return v.length=k,new c(this,v)},o.le=function(_){for(var g=this._compare,b=this.root,v=[],k=0;b;){var S=g(_,b.key);v.push(b),S>=0&&(k=v.length),S<0?b=b.left:b=b.right}return v.length=k,new c(this,v)},o.find=function(_){for(var g=this._compare,b=this.root,v=[];b;){var k=g(_,b.key);if(v.push(b),k===0)return new c(this,v);k<=0?b=b.left:b=b.right}return new c(this,[])},o.remove=function(_){var g=this.find(_);return g?g.remove():this},o.get=function(_){for(var g=this._compare,b=this.root;b;){var v=g(_,b.key);if(v===0)return b.value;v<=0?b=b.left:b=b.right}};function c(_,g){this.tree=_,this._stack=g}var m=c.prototype;Object.defineProperty(m,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(m,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),m.clone=function(){return new c(this.tree,this._stack.slice())};function l(_,g){_.key=g.key,_.value=g.value,_.left=g.left,_.right=g.right,_._color=g._color,_._count=g._count}function x(_){for(var g,b,v,k,S=_.length-1;S>=0;--S){if(g=_[S],S===0){g._color=a;return}if(b=_[S-1],b.left===g){if(v=b.right,v.right&&v.right._color===e){if(v=b.right=r(v),k=v.right=r(v.right),b.right=v.left,v.left=b,v.right=k,v._color=b._color,g._color=a,b._color=a,k._color=a,h(b),h(v),S>1){var E=_[S-2];E.left===b?E.left=v:E.right=v}_[S-1]=v;return}else if(v.left&&v.left._color===e){if(v=b.right=r(v),k=v.left=r(v.left),b.right=k.left,v.left=k.right,k.left=b,k.right=v,k._color=b._color,b._color=a,v._color=a,g._color=a,h(b),h(v),h(k),S>1){var E=_[S-2];E.left===b?E.left=k:E.right=k}_[S-1]=k;return}if(v._color===a)if(b._color===e){b._color=a,b.right=t(e,v);return}else{b.right=t(e,v);continue}else{if(v=r(v),b.right=v.left,v.left=b,v._color=b._color,b._color=e,h(b),h(v),S>1){var E=_[S-2];E.left===b?E.left=v:E.right=v}_[S-1]=v,_[S]=b,S+1<_.length?_[S+1]=g:_.push(g),S=S+2}}else{if(v=b.left,v.left&&v.left._color===e){if(v=b.left=r(v),k=v.left=r(v.left),b.left=v.right,v.right=b,v.left=k,v._color=b._color,g._color=a,b._color=a,k._color=a,h(b),h(v),S>1){var E=_[S-2];E.right===b?E.right=v:E.left=v}_[S-1]=v;return}else if(v.right&&v.right._color===e){if(v=b.left=r(v),k=v.right=r(v.right),b.left=k.right,v.right=k.left,k.right=b,k.left=v,k._color=b._color,b._color=a,v._color=a,g._color=a,h(b),h(v),h(k),S>1){var E=_[S-2];E.right===b?E.right=k:E.left=k}_[S-1]=k;return}if(v._color===a)if(b._color===e){b._color=a,b.left=t(e,v);return}else{b.left=t(e,v);continue}else{if(v=r(v),b.left=v.right,v.right=b,v._color=b._color,b._color=e,h(b),h(v),S>1){var E=_[S-2];E.right===b?E.right=v:E.left=v}_[S-1]=v,_[S]=b,S+1<_.length?_[S+1]=g:_.push(g),S=S+2}}}}m.remove=function(){var _=this._stack;if(_.length===0)return this.tree;var g=new Array(_.length),b=_[_.length-1];g[g.length-1]=new n(b._color,b.key,b.value,b.left,b.right,b._count);for(var v=_.length-2;v>=0;--v){var b=_[v];b.left===_[v+1]?g[v]=new n(b._color,b.key,b.value,g[v+1],b.right,b._count):g[v]=new n(b._color,b.key,b.value,b.left,g[v+1],b._count)}if(b=g[g.length-1],b.left&&b.right){var k=g.length;for(b=b.left;b.right;)g.push(b),b=b.right;var S=g[k-1];g.push(new n(b._color,S.key,S.value,b.left,b.right,b._count)),g[k-1].key=b.key,g[k-1].value=b.value;for(var v=g.length-2;v>=k;--v)b=g[v],g[v]=new n(b._color,b.key,b.value,b.left,g[v+1],b._count);g[k-1].left=g[k]}if(b=g[g.length-1],b._color===e){var E=g[g.length-2];E.left===b?E.left=null:E.right===b&&(E.right=null),g.pop();for(var v=0;v<g.length;++v)g[v]._count--;return new s(this.tree._compare,g[0])}else if(b.left||b.right){b.left?l(b,b.left):b.right&&l(b,b.right),b._color=a;for(var v=0;v<g.length-1;++v)g[v]._count--;return new s(this.tree._compare,g[0])}else{if(g.length===1)return new s(this.tree._compare,null);for(var v=0;v<g.length;++v)g[v]._count--;var C=g[g.length-2];x(g),C.left===b?C.left=null:C.right=null}return new s(this.tree._compare,g[0])},Object.defineProperty(m,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(m,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(m,"index",{get:function(){var _=0,g=this._stack;if(g.length===0){var b=this.tree.root;return b?b._count:0}else g[g.length-1].left&&(_=g[g.length-1].left._count);for(var v=g.length-2;v>=0;--v)g[v+1]===g[v].right&&(++_,g[v].left&&(_+=g[v].left._count));return _},enumerable:!0}),m.next=function(){var _=this._stack;if(_.length!==0){var g=_[_.length-1];if(g.right)for(g=g.right;g;)_.push(g),g=g.left;else for(_.pop();_.length>0&&_[_.length-1].right===g;)g=_[_.length-1],_.pop()}},Object.defineProperty(m,"hasNext",{get:function(){var _=this._stack;if(_.length===0)return!1;if(_[_.length-1].right)return!0;for(var g=_.length-1;g>0;--g)if(_[g-1].left===_[g])return!0;return!1}}),m.update=function(_){var g=this._stack;if(g.length===0)throw new Error("Can't update empty node!");var b=new Array(g.length),v=g[g.length-1];b[b.length-1]=new n(v._color,v.key,_,v.left,v.right,v._count);for(var k=g.length-2;k>=0;--k)v=g[k],v.left===g[k+1]?b[k]=new n(v._color,v.key,v.value,b[k+1],v.right,v._count):b[k]=new n(v._color,v.key,v.value,v.left,b[k+1],v._count);return new s(this.tree._compare,b[0])},m.prev=function(){var _=this._stack;if(_.length!==0){var g=_[_.length-1];if(g.left)for(g=g.left;g;)_.push(g),g=g.right;else for(_.pop();_.length>0&&_[_.length-1].left===g;)g=_[_.length-1],_.pop()}},Object.defineProperty(m,"hasPrev",{get:function(){var _=this._stack;if(_.length===0)return!1;if(_[_.length-1].left)return!0;for(var g=_.length-1;g>0;--g)if(_[g-1].right===_[g])return!0;return!1}});function u(_,g){return _<g?-1:_>g?1:0}function A(_){return new s(_||u,null)}},{}],70:[function(f,M,T){M.exports=g;var e=f("./lib/text.js"),a=f("./lib/lines.js"),n=f("./lib/background.js"),r=f("./lib/cube.js"),t=f("./lib/ticks.js"),h=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);function s(b,v){return b[0]=v[0],b[1]=v[1],b[2]=v[2],b}function o(b){this.gl=b,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont="sans-serif",this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=n(b)}var y=o.prototype;y.update=function(b){b=b||{};function v(G,Q,X){if(X in b){var j=b[X],re=this[X],ue;(G?Array.isArray(j)&&Array.isArray(j[0]):Array.isArray(j))?this[X]=ue=[Q(j[0]),Q(j[1]),Q(j[2])]:this[X]=ue=[Q(j),Q(j),Q(j)];for(var K=0;K<3;++K)if(ue[K]!==re[K])return!0}return!1}var k=v.bind(this,!1,Number),S=v.bind(this,!1,Boolean),E=v.bind(this,!1,String),C=v.bind(this,!0,function(G){if(Array.isArray(G)){if(G.length===3)return[+G[0],+G[1],+G[2],1];if(G.length===4)return[+G[0],+G[1],+G[2],+G[3]]}return[0,0,0,1]}),F,I=!1,D=!1;if("bounds"in b)for(var R=b.bounds,O=0;O<2;++O)for(var z=0;z<3;++z)R[O][z]!==this.bounds[O][z]&&(D=!0),this.bounds[O][z]=R[O][z];if("ticks"in b){F=b.ticks,I=!0,this.autoTicks=!1;for(var O=0;O<3;++O)this.tickSpacing[O]=0}else k("tickSpacing")&&(this.autoTicks=!0,D=!0);if(this._firstInit&&("ticks"in b||"tickSpacing"in b||(this.autoTicks=!0),D=!0,I=!0,this._firstInit=!1),D&&this.autoTicks&&(F=t.create(this.bounds,this.tickSpacing),I=!0),I){for(var O=0;O<3;++O)F[O].sort(function(Q,X){return Q.x-X.x});t.equal(F,this.ticks)?I=!1:this.ticks=F}S("tickEnable"),E("tickFont")&&(I=!0),k("tickSize"),k("tickAngle"),k("tickPad"),C("tickColor");var B=E("labels");E("labelFont")&&(B=!0),S("labelEnable"),k("labelSize"),k("labelPad"),C("labelColor"),S("lineEnable"),S("lineMirror"),k("lineWidth"),C("lineColor"),S("lineTickEnable"),S("lineTickMirror"),k("lineTickLength"),k("lineTickWidth"),C("lineTickColor"),S("gridEnable"),k("gridWidth"),C("gridColor"),S("zeroEnable"),C("zeroLineColor"),k("zeroLineWidth"),S("backgroundEnable"),C("backgroundColor"),this._text?this._text&&(B||I)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=e(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont),this._lines&&I&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=a(this.gl,this.bounds,this.ticks))};function d(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}var p=[new d,new d,new d];function c(b,v,k,S,E){for(var C=b.primalOffset,F=b.primalMinor,I=b.mirrorOffset,D=b.mirrorMinor,R=S[v],O=0;O<3;++O)if(v!==O){var z=C,B=I,G=F,Q=D;R&1<<O&&(z=I,B=C,G=D,Q=F),z[O]=k[0][O],B[O]=k[1][O],E[O]>0?(G[O]=-1,Q[O]=0):(G[O]=0,Q[O]=1)}}var m=[0,0,0],l={model:h,view:h,projection:h,_ortho:!1};y.isOpaque=function(){return!0},y.isTransparent=function(){return!1},y.drawTransparent=function(b){};var x=0,u=[0,0,0],A=[0,0,0],_=[0,0,0];y.draw=function(b){b=b||l;for(var re=this.gl,v=b.model||h,k=b.view||h,S=b.projection||h,E=this.bounds,C=b._ortho||!1,F=r(v,k,S,E,C),I=F.cubeEdges,D=F.axis,R=k[12],O=k[13],z=k[14],B=k[15],G=C?2:1,Q=G*this.pixelRatio*(S[3]*R+S[7]*O+S[11]*z+S[15]*B)/re.drawingBufferHeight,X=0;X<3;++X)this.lastCubeProps.cubeEdges[X]=I[X],this.lastCubeProps.axis[X]=D[X];for(var j=p,X=0;X<3;++X)c(p[X],X,this.bounds,I,D);for(var re=this.gl,ue=m,X=0;X<3;++X)this.backgroundEnable[X]?ue[X]=D[X]:ue[X]=0;this._background.draw(v,k,S,E,ue,this.backgroundColor),this._lines.bind(v,k,S,this);for(var X=0;X<3;++X){var K=[0,0,0];D[X]>0?K[X]=E[1][X]:K[X]=E[0][X];for(var te=0;te<2;++te){var Y=(X+1+te)%3,H=(X+1+(te^1))%3;this.gridEnable[Y]&&this._lines.drawGrid(Y,H,this.bounds,K,this.gridColor[Y],this.gridWidth[Y]*this.pixelRatio)}for(var te=0;te<2;++te){var Y=(X+1+te)%3,H=(X+1+(te^1))%3;this.zeroEnable[H]&&Math.min(E[0][H],E[1][H])<=0&&Math.max(E[0][H],E[1][H])>=0&&this._lines.drawZero(Y,H,this.bounds,K,this.zeroLineColor[H],this.zeroLineWidth[H]*this.pixelRatio)}}for(var X=0;X<3;++X){this.lineEnable[X]&&this._lines.drawAxisLine(X,this.bounds,j[X].primalOffset,this.lineColor[X],this.lineWidth[X]*this.pixelRatio),this.lineMirror[X]&&this._lines.drawAxisLine(X,this.bounds,j[X].mirrorOffset,this.lineColor[X],this.lineWidth[X]*this.pixelRatio);for(var ee=s(u,j[X].primalMinor),ne=s(A,j[X].mirrorMinor),Z=this.lineTickLength,te=0;te<3;++te){var q=Q/v[5*te];ee[te]*=Z[te]*q,ne[te]*=Z[te]*q}this.lineTickEnable[X]&&this._lines.drawAxisTicks(X,j[X].primalOffset,ee,this.lineTickColor[X],this.lineTickWidth[X]*this.pixelRatio),this.lineTickMirror[X]&&this._lines.drawAxisTicks(X,j[X].mirrorOffset,ne,this.lineTickColor[X],this.lineTickWidth[X]*this.pixelRatio)}this._lines.unbind(),this._text.bind(v,k,S,this.pixelRatio);var ie,se=.5,ae,oe;function be(Se){oe=[0,0,0],oe[Se]=1}function ce(Se,Le,Oe){var we=(Se+1)%3,Ce=(Se+2)%3,Ke=Le[we],Ye=Le[Ce],Fe=Oe[we],Re=Oe[Ce];if(Ke>0&&Re>0){be(we);return}else if(Ke>0&&Re<0){be(we);return}else if(Ke<0&&Re>0){be(we);return}else if(Ke<0&&Re<0){be(we);return}else if(Ye>0&&Fe>0){be(Ce);return}else if(Ye>0&&Fe<0){be(Ce);return}else if(Ye<0&&Fe>0){be(Ce);return}else if(Ye<0&&Fe<0){be(Ce);return}}for(var X=0;X<3;++X){for(var de=j[X].primalMinor,ye=j[X].mirrorMinor,ge=s(_,j[X].primalOffset),te=0;te<3;++te)this.lineTickEnable[X]&&(ge[te]+=Q*de[te]*Math.max(this.lineTickLength[te],0)/v[5*te]);var me=[0,0,0];if(me[X]=1,this.tickEnable[X]){this.tickAngle[X]===-3600?(this.tickAngle[X]=0,this.tickAlign[X]="auto"):this.tickAlign[X]=-1,ae=1,ie=[this.tickAlign[X],se,ae],ie[0]==="auto"?ie[0]=x:ie[0]=parseInt(""+ie[0]),oe=[0,0,0],ce(X,de,ye);for(var te=0;te<3;++te)ge[te]+=Q*de[te]*this.tickPad[te]/v[5*te];this._text.drawTicks(X,this.tickSize[X],this.tickAngle[X],ge,this.tickColor[X],me,oe,ie)}if(this.labelEnable[X]){ae=0,oe=[0,0,0],this.labels[X].length>4&&(be(X),ae=1),ie=[this.labelAlign[X],se,ae],ie[0]==="auto"?ie[0]=x:ie[0]=parseInt(""+ie[0]);for(var te=0;te<3;++te)ge[te]+=Q*de[te]*this.labelPad[te]/v[5*te];ge[X]+=.5*(E[0][X]+E[1][X]),this._text.drawLabel(X,this.labelSize[X],this.labelAngle[X],ge,this.labelColor[X],[0,0,0],oe,ie)}}this._text.unbind()},y.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null};function g(b,v){var k=new o(b);return k.update(v),k}},{"./lib/background.js":71,"./lib/cube.js":72,"./lib/lines.js":73,"./lib/text.js":75,"./lib/ticks.js":76}],71:[function(f,M,T){M.exports=h;var e=f("gl-buffer"),a=f("gl-vao"),n=f("./shaders").bg;function r(s,o,y,d){this.gl=s,this.buffer=o,this.vao=y,this.shader=d}var t=r.prototype;t.draw=function(s,o,y,d,p,c){for(var m=!1,l=0;l<3;++l)m=m||p[l];if(!!m){var x=this.gl;x.enable(x.POLYGON_OFFSET_FILL),x.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:s,view:o,projection:y,bounds:d,enable:p,colors:c},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),x.disable(x.POLYGON_OFFSET_FILL)}},t.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()};function h(s){for(var o=[],y=[],d=0,p=0;p<3;++p)for(var c=(p+1)%3,m=(p+2)%3,l=[0,0,0],x=[0,0,0],u=-1;u<=1;u+=2){y.push(d,d+2,d+1,d+1,d+2,d+3),l[p]=u,x[p]=u;for(var A=-1;A<=1;A+=2){l[c]=A;for(var _=-1;_<=1;_+=2)l[m]=_,o.push(l[0],l[1],l[2],x[0],x[1],x[2]),d+=1}var g=c;c=m,m=g}var b=e(s,new Float32Array(o)),v=e(s,new Uint16Array(y),s.ELEMENT_ARRAY_BUFFER),k=a(s,[{buffer:b,type:s.FLOAT,size:3,offset:0,stride:24},{buffer:b,type:s.FLOAT,size:3,offset:12,stride:24}],v),S=n(s);return S.attributes.position.location=0,S.attributes.normal.location=1,new r(s,b,k,S)}},{"./shaders":74,"gl-buffer":78,"gl-vao":150}],72:[function(f,M,T){M.exports=u;var e=f("bit-twiddle"),a=f("gl-mat4/multiply"),n=f("split-polygon"),r=f("robust-orientation"),t=new Array(16),h=new Array(8),s=new Array(8),o=new Array(3),y=[0,0,0];(function(){for(var A=0;A<8;++A)h[A]=[1,1,1,1],s[A]=[1,1,1]})();function d(A,_,g){for(var b=0;b<4;++b){A[b]=g[12+b];for(var v=0;v<3;++v)A[b]+=_[v]*g[4*v+b]}}var p=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];function c(A){for(var _=0;_<p.length;++_)if(A=n.positive(A,p[_]),A.length<3)return 0;for(var g=A[0],b=g[0]/g[3],v=g[1]/g[3],k=0,_=1;_+1<A.length;++_){var S=A[_],E=A[_+1],C=S[0]/S[3],F=S[1]/S[3],I=E[0]/E[3],D=E[1]/E[3],R=C-b,O=F-v,z=I-b,B=D-v;k+=Math.abs(R*B-O*z)}return k}var m=[1,1,1],l=[0,0,0],x={cubeEdges:m,axis:l};function u(A,_,g,b,v){a(t,_,A),a(t,g,t);for(var k=0,S=0;S<2;++S){o[2]=b[S][2];for(var E=0;E<2;++E){o[1]=b[E][1];for(var C=0;C<2;++C)o[0]=b[C][0],d(h[k],o,t),k+=1}}for(var F=-1,S=0;S<8;++S){for(var I=h[S][3],D=0;D<3;++D)s[S][D]=h[S][D]/I;v&&(s[S][2]*=-1),I<0&&(F<0||s[S][2]<s[F][2])&&(F=S)}if(F<0){F=0;for(var R=0;R<3;++R){for(var O=(R+2)%3,z=(R+1)%3,B=-1,G=-1,Q=0;Q<2;++Q){var X=Q<<R,j=X+(Q<<O)+(1-Q<<z),re=X+(1-Q<<O)+(Q<<z);r(s[X],s[j],s[re],y)<0||(Q?B=1:G=1)}if(B<0||G<0){G>B&&(F|=1<<R);continue}for(var Q=0;Q<2;++Q){var X=Q<<R,j=X+(Q<<O)+(1-Q<<z),re=X+(1-Q<<O)+(Q<<z),ue=c([h[X],h[j],h[re],h[X+(1<<O)+(1<<z)]]);Q?B=ue:G=ue}if(G>B){F|=1<<R;continue}}}for(var K=7^F,te=-1,S=0;S<8;++S)S===F||S===K||(te<0||s[te][1]>s[S][1])&&(te=S);for(var Y=-1,S=0;S<3;++S){var H=te^1<<S;if(!(H===F||H===K)){Y<0&&(Y=H);var z=s[H];z[0]<s[Y][0]&&(Y=H)}}for(var ee=-1,S=0;S<3;++S){var H=te^1<<S;if(!(H===F||H===K||H===Y)){ee<0&&(ee=H);var z=s[H];z[0]>s[ee][0]&&(ee=H)}}var ne=m;ne[0]=ne[1]=ne[2]=0,ne[e.log2(Y^te)]=te&Y,ne[e.log2(te^ee)]=te&ee;var Z=ee^7;Z===F||Z===K?(Z=Y^7,ne[e.log2(ee^Z)]=Z&ee):ne[e.log2(Y^Z)]=Z&Y;for(var q=l,ie=F,R=0;R<3;++R)ie&1<<R?q[R]=-1:q[R]=1;return x}},{"bit-twiddle":32,"gl-mat4/multiply":100,"robust-orientation":284,"split-polygon":300}],73:[function(f,M,T){M.exports=m;var e=f("gl-buffer"),a=f("gl-vao"),n=f("./shaders").line,r=[0,0,0],t=[0,0,0],h=[0,0,0],s=[0,0,0],o=[1,1];function y(l){return l[0]=l[1]=l[2]=0,l}function d(l,x){return l[0]=x[0],l[1]=x[1],l[2]=x[2],l}function p(l,x,u,A,_,g,b,v){this.gl=l,this.vertBuffer=x,this.vao=u,this.shader=A,this.tickCount=_,this.tickOffset=g,this.gridCount=b,this.gridOffset=v}var c=p.prototype;c.bind=function(l,x,u){this.shader.bind(),this.shader.uniforms.model=l,this.shader.uniforms.view=x,this.shader.uniforms.projection=u,o[0]=this.gl.drawingBufferWidth,o[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=o,this.vao.bind()},c.unbind=function(){this.vao.unbind()},c.drawAxisLine=function(l,x,u,A,_){var g=y(t);this.shader.uniforms.majorAxis=t,g[l]=x[1][l]-x[0][l],this.shader.uniforms.minorAxis=g;var b=d(s,u);b[l]+=x[0][l],this.shader.uniforms.offset=b,this.shader.uniforms.lineWidth=_,this.shader.uniforms.color=A;var v=y(h);v[(l+2)%3]=1,this.shader.uniforms.screenAxis=v,this.vao.draw(this.gl.TRIANGLES,6);var v=y(h);v[(l+1)%3]=1,this.shader.uniforms.screenAxis=v,this.vao.draw(this.gl.TRIANGLES,6)},c.drawAxisTicks=function(l,x,u,A,_){if(!!this.tickCount[l]){var g=y(r);g[l]=1,this.shader.uniforms.majorAxis=g,this.shader.uniforms.offset=x,this.shader.uniforms.minorAxis=u,this.shader.uniforms.color=A,this.shader.uniforms.lineWidth=_;var b=y(h);b[l]=1,this.shader.uniforms.screenAxis=b,this.vao.draw(this.gl.TRIANGLES,this.tickCount[l],this.tickOffset[l])}},c.drawGrid=function(l,x,u,A,_,g){if(!!this.gridCount[l]){var b=y(t);b[x]=u[1][x]-u[0][x],this.shader.uniforms.minorAxis=b;var v=d(s,A);v[x]+=u[0][x],this.shader.uniforms.offset=v;var k=y(r);k[l]=1,this.shader.uniforms.majorAxis=k;var S=y(h);S[l]=1,this.shader.uniforms.screenAxis=S,this.shader.uniforms.lineWidth=g,this.shader.uniforms.color=_,this.vao.draw(this.gl.TRIANGLES,this.gridCount[l],this.gridOffset[l])}},c.drawZero=function(l,x,u,A,_,g){var b=y(t);this.shader.uniforms.majorAxis=b,b[l]=u[1][l]-u[0][l],this.shader.uniforms.minorAxis=b;var v=d(s,A);v[l]+=u[0][l],this.shader.uniforms.offset=v;var k=y(h);k[x]=1,this.shader.uniforms.screenAxis=k,this.shader.uniforms.lineWidth=g,this.shader.uniforms.color=_,this.vao.draw(this.gl.TRIANGLES,6)},c.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()};function m(l,x,u){var A=[],_=[0,0,0],g=[0,0,0],b=[0,0,0],v=[0,0,0];A.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var k=0;k<3;++k){for(var C=A.length/3|0,S=0;S<u[k].length;++S){var E=+u[k][S].x;A.push(E,0,1,E,1,1,E,0,-1,E,0,-1,E,1,1,E,1,-1)}var I=A.length/3|0;_[k]=C,g[k]=I-C;for(var C=A.length/3|0,F=0;F<u[k].length;++F){var E=+u[k][F].x;A.push(E,0,1,E,1,1,E,0,-1,E,0,-1,E,1,1,E,1,-1)}var I=A.length/3|0;b[k]=C,v[k]=I-C}var D=e(l,new Float32Array(A)),R=a(l,[{buffer:D,type:l.FLOAT,size:3,stride:0,offset:0}]),O=n(l);return O.attributes.position.location=0,new p(l,D,R,O,g,_,v,b)}},{"./shaders":74,"gl-buffer":78,"gl-vao":150}],74:[function(f,M,T){var e=f("glslify"),a=f("gl-shader"),n=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, majorAxis, minorAxis, screenAxis;
uniform float lineWidth;
uniform vec2 screenShape;

vec3 project(vec3 p) {
  vec4 pp = projection * view * model * vec4(p, 1.0);
  return pp.xyz / max(pp.w, 0.0001);
}

void main() {
  vec3 major = position.x * majorAxis;
  vec3 minor = position.y * minorAxis;

  vec3 vPosition = major + minor + offset;
  vec3 pPosition = project(vPosition);
  vec3 offset = project(vPosition + screenAxis * position.z);

  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;

  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);
}
`]),r=e([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);T.line=function(y){return a(y,n,r,null,[{name:"position",type:"vec3"}])};var t=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, axis, alignDir, alignOpt;
uniform float scale, angle, pixelScale;
uniform vec2 resolution;

vec3 project(vec3 p) {
  vec4 pp = projection * view * model * vec4(p, 1.0);
  return pp.xyz / max(pp.w, 0.0001);
}

float computeViewAngle(vec3 a, vec3 b) {
  vec3 A = project(a);
  vec3 B = project(b);

  return atan(
    (B.y - A.y) * resolution.y,
    (B.x - A.x) * resolution.x
  );
}

const float PI = 3.141592;
const float TWO_PI = 2.0 * PI;
const float HALF_PI = 0.5 * PI;
const float ONE_AND_HALF_PI = 1.5 * PI;

int option = int(floor(alignOpt.x + 0.001));
float hv_ratio =       alignOpt.y;
bool enableAlign =    (alignOpt.z != 0.0);

float mod_angle(float a) {
  return mod(a, PI);
}

float positive_angle(float a) {
  return mod_angle((a < 0.0) ?
    a + TWO_PI :
    a
  );
}

float look_upwards(float a) {
  float b = positive_angle(a);
  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?
    b - PI :
    b;
}

float look_horizontal_or_vertical(float a, float ratio) {
  // ratio controls the ratio between being horizontal to (vertical + horizontal)
  // if ratio is set to 0.5 then it is 50%, 50%.
  // when using a higher ratio e.g. 0.75 the result would
  // likely be more horizontal than vertical.

  float b = positive_angle(a);

  return
    (b < (      ratio) * HALF_PI) ? 0.0 :
    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :
    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :
    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :
                                    0.0;
}

float roundTo(float a, float b) {
  return float(b * floor((a + 0.5 * b) / b));
}

float look_round_n_directions(float a, int n) {
  float b = positive_angle(a);
  float div = TWO_PI / float(n);
  float c = roundTo(b, div);
  return look_upwards(c);
}

float applyAlignOption(float rawAngle, float delta) {
  return
    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions
    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical
    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis
    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards
    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal
                    rawAngle;                // otherwise return back raw input angle
}

bool isAxisTitle = (axis.x == 0.0) &&
                   (axis.y == 0.0) &&
                   (axis.z == 0.0);

void main() {
  //Compute world offset
  float axisDistance = position.z;
  vec3 dataPosition = axisDistance * axis + offset;

  float beta = angle; // i.e. user defined attributes for each tick

  float axisAngle;
  float clipAngle;
  float flip;

  if (enableAlign) {
    axisAngle = (isAxisTitle) ? HALF_PI :
                      computeViewAngle(dataPosition, dataPosition + axis);
    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);

    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;
    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;

    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),
                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;

    beta += applyAlignOption(clipAngle, flip * PI);
  }

  //Compute plane offset
  vec2 planeCoord = position.xy * pixelScale;

  mat2 planeXform = scale * mat2(
     cos(beta), sin(beta),
    -sin(beta), cos(beta)
  );

  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;

  //Compute clip position
  vec3 clipPosition = project(dataPosition);

  //Apply text offset in clip coordinates
  clipPosition += vec3(viewOffset, 0.0);

  //Done
  gl_Position = vec4(clipPosition, 1.0);
}`]),h=e([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);T.text=function(y){return a(y,t,h,null,[{name:"position",type:"vec3"}])};var s=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec3 normal;

uniform mat4 model, view, projection;
uniform vec3 enable;
uniform vec3 bounds[2];

varying vec3 colorChannel;

void main() {

  vec3 signAxis = sign(bounds[1] - bounds[0]);

  vec3 realNormal = signAxis * normal;

  if(dot(realNormal, enable) > 0.0) {
    vec3 minRange = min(bounds[0], bounds[1]);
    vec3 maxRange = max(bounds[0], bounds[1]);
    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));
    gl_Position = projection * view * model * vec4(nPosition, 1.0);
  } else {
    gl_Position = vec4(0,0,0,0);
  }

  colorChannel = abs(realNormal);
}`]),o=e([`precision highp float;
#define GLSLIFY 1

uniform vec4 colors[3];

varying vec3 colorChannel;

void main() {
  gl_FragColor = colorChannel.x * colors[0] +
                 colorChannel.y * colors[1] +
                 colorChannel.z * colors[2];
}`]);T.bg=function(y){return a(y,s,o,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},{"gl-shader":132,glslify:231}],75:[function(f,M,T){(function(e){(function(){M.exports=m;var a=f("gl-buffer"),n=f("gl-vao"),r=f("vectorize-text"),t=f("./shaders").text,h=window||e.global||{},s=h.__TEXT_CACHE||{};h.__TEXT_CACHE={};var o=3;function y(l,x,u,A){this.gl=l,this.shader=x,this.buffer=u,this.vao=A,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}var d=y.prototype,p=[0,0];d.bind=function(l,x,u,A){this.vao.bind(),this.shader.bind();var _=this.shader.uniforms;_.model=l,_.view=x,_.projection=u,_.pixelScale=A,p[0]=this.gl.drawingBufferWidth,p[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=p},d.unbind=function(){this.vao.unbind()},d.update=function(l,x,u,A,_){var g=[];function b(R,O,z,B,G,Q){var X=s[z];X||(X=s[z]={});var j=X[O];j||(j=X[O]=c(O,{triangles:!0,font:z,textAlign:"center",textBaseline:"middle",lineSpacing:G,styletags:Q}));for(var re=(B||12)/12,ue=j.positions,K=j.cells,te=0,Y=K.length;te<Y;++te)for(var H=K[te],ee=2;ee>=0;--ee){var ne=ue[H[ee]];g.push(re*ne[0],-re*ne[1],R)}}for(var v=[0,0,0],k=[0,0,0],S=[0,0,0],E=[0,0,0],C=1.25,F={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},I=0;I<3;++I){S[I]=g.length/o|0,b(.5*(l[0][I]+l[1][I]),x[I],u[I],12,C,F),E[I]=(g.length/o|0)-S[I],v[I]=g.length/o|0;for(var D=0;D<A[I].length;++D)!A[I][D].text||b(A[I][D].x,A[I][D].text,A[I][D].font||_,A[I][D].fontSize||12,C,F);k[I]=(g.length/o|0)-v[I]}this.buffer.update(g),this.tickOffset=v,this.tickCount=k,this.labelOffset=S,this.labelCount=E},d.drawTicks=function(l,x,u,A,_,g,b,v){!this.tickCount[l]||(this.shader.uniforms.axis=g,this.shader.uniforms.color=_,this.shader.uniforms.angle=u,this.shader.uniforms.scale=x,this.shader.uniforms.offset=A,this.shader.uniforms.alignDir=b,this.shader.uniforms.alignOpt=v,this.vao.draw(this.gl.TRIANGLES,this.tickCount[l],this.tickOffset[l]))},d.drawLabel=function(l,x,u,A,_,g,b,v){!this.labelCount[l]||(this.shader.uniforms.axis=g,this.shader.uniforms.color=_,this.shader.uniforms.angle=u,this.shader.uniforms.scale=x,this.shader.uniforms.offset=A,this.shader.uniforms.alignDir=b,this.shader.uniforms.alignOpt=v,this.vao.draw(this.gl.TRIANGLES,this.labelCount[l],this.labelOffset[l]))},d.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()};function c(l,x){try{return r(l,x)}catch(u){return console.warn('error vectorizing text:"'+l+'" error:',u),{cells:[],positions:[]}}}function m(l,x,u,A,_,g){var b=a(l),v=n(l,[{buffer:b,size:3}]),k=t(l);k.attributes.position.location=0;var S=new y(l,k,b,v);return S.update(x,u,A,_,g),S}}).call(this)}).call(this,f("_process"))},{"./shaders":74,_process:5,"gl-buffer":78,"gl-vao":150,"vectorize-text":311}],76:[function(f,M,T){T.create=a,T.equal=n;function e(r,t){var h=r+"",s=h.indexOf("."),o=0;s>=0&&(o=h.length-s-1);var y=Math.pow(10,o),d=Math.round(r*t*y),p=d+"";if(p.indexOf("e")>=0)return p;var c=d/y,m=d%y;d<0?(c=-Math.ceil(c)|0,m=-m|0):(c=Math.floor(c)|0,m=m|0);var l=""+c;if(d<0&&(l="-"+l),o){for(var x=""+m;x.length<o;)x="0"+x;return l+"."+x}else return l}function a(r,t){for(var h=[],s=0;s<3;++s){var o=[];.5*(r[0][s]+r[1][s]);for(var y=0;y*t[s]<=r[1][s];++y)o.push({x:y*t[s],text:e(t[s],y)});for(var y=-1;y*t[s]>=r[0][s];--y)o.push({x:y*t[s],text:e(t[s],y)});h.push(o)}return h}function n(r,t){for(var h=0;h<3;++h){if(r[h].length!==t[h].length)return!1;for(var s=0;s<r[h].length;++s){var o=r[h][s],y=t[h][s];if(o.x!==y.x||o.text!==y.text||o.font!==y.font||o.fontColor!==y.fontColor||o.fontSize!==y.fontSize||o.dx!==y.dx||o.dy!==y.dy)return!1}}return!0}},{}],77:[function(f,M,T){M.exports=x;var e=f("extract-frustum-planes"),a=f("split-polygon"),n=f("./lib/cube.js"),r=f("gl-mat4/multiply"),t=f("gl-mat4/transpose"),h=f("gl-vec4/transformMat4"),s=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),o=new Float32Array(16);function y(u,A,_){this.lo=u,this.hi=A,this.pixelsPerDataUnit=_}var d=[0,0,0,1],p=[0,0,0,1];function c(u,A,_,g,b){for(var v=0;v<3;++v){for(var k=d,S=p,E=0;E<3;++E)S[E]=k[E]=_[E];S[3]=k[3]=1,S[v]+=1,h(S,S,A),S[3]<0&&(u[v]=1/0),k[v]-=1,h(k,k,A),k[3]<0&&(u[v]=1/0);var C=(k[0]/k[3]-S[0]/S[3])*g,F=(k[1]/k[3]-S[1]/S[3])*b;u[v]=.25*Math.sqrt(C*C+F*F)}return u}var m=[new y(1/0,-1/0,1/0),new y(1/0,-1/0,1/0),new y(1/0,-1/0,1/0)],l=[0,0,0];function x(u,A,_,g,F){var v=A.model||s,k=A.view||s,S=A.projection||s,E=A._ortho||!1,C=u.bounds,F=F||n(v,k,S,C,E),I=F.axis;r(o,k,v),r(o,S,o);for(var D=m,R=0;R<3;++R)D[R].lo=1/0,D[R].hi=-1/0,D[R].pixelsPerDataUnit=1/0;var O=e(t(o,o));t(o,o);for(var z=0;z<3;++z){var B=(z+1)%3,G=(z+2)%3,Q=l;e:for(var R=0;R<2;++R){var X=[];if(I[z]<0!=!!R){Q[z]=C[R][z];for(var j=0;j<2;++j){Q[B]=C[j^R][B];for(var re=0;re<2;++re)Q[G]=C[re^j^R][G],X.push(Q.slice())}for(var ue=E?5:4,j=ue;j===ue;++j){if(X.length===0)continue e;X=a.positive(X,O[j])}for(var j=0;j<X.length;++j)for(var G=X[j],K=c(l,o,G,_,g),re=0;re<3;++re)D[re].lo=Math.min(D[re].lo,G[re]),D[re].hi=Math.max(D[re].hi,G[re]),re!==z&&(D[re].pixelsPerDataUnit=Math.min(D[re].pixelsPerDataUnit,Math.abs(K[re])))}}}return D}},{"./lib/cube.js":72,"extract-frustum-planes":67,"gl-mat4/multiply":100,"gl-mat4/transpose":109,"gl-vec4/transformMat4":221,"split-polygon":300}],78:[function(f,M,T){var e=f("typedarray-pool"),a=f("ndarray-ops"),n=f("ndarray"),r=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function t(p,c,m,l,x){this.gl=p,this.type=c,this.handle=m,this.length=l,this.usage=x}var h=t.prototype;h.bind=function(){this.gl.bindBuffer(this.type,this.handle)},h.unbind=function(){this.gl.bindBuffer(this.type,null)},h.dispose=function(){this.gl.deleteBuffer(this.handle)};function s(p,c,m,l,x,u){var A=x.length*x.BYTES_PER_ELEMENT;if(u<0)return p.bufferData(c,x,l),A;if(A+u>m)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return p.bufferSubData(c,u,x),m}function o(p,c){for(var m=e.malloc(p.length,c),l=p.length,x=0;x<l;++x)m[x]=p[x];return m}function y(p,c){for(var m=1,l=c.length-1;l>=0;--l){if(c[l]!==m)return!1;m*=p[l]}return!0}h.update=function(p,c){if(typeof c!="number"&&(c=-1),this.bind(),typeof p=="object"&&typeof p.shape<"u"){var m=p.dtype;if(r.indexOf(m)<0&&(m="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER){var l=gl.getExtension("OES_element_index_uint");l&&m!=="uint16"?m="uint32":m="uint16"}if(m===p.dtype&&y(p.shape,p.stride))p.offset===0&&p.data.length===p.shape[0]?this.length=s(this.gl,this.type,this.length,this.usage,p.data,c):this.length=s(this.gl,this.type,this.length,this.usage,p.data.subarray(p.offset,p.shape[0]),c);else{var x=e.malloc(p.size,m),u=n(x,p.shape);a.assign(u,p),c<0?this.length=s(this.gl,this.type,this.length,this.usage,x,c):this.length=s(this.gl,this.type,this.length,this.usage,x.subarray(0,p.size),c),e.free(x)}}else if(Array.isArray(p)){var A;this.type===this.gl.ELEMENT_ARRAY_BUFFER?A=o(p,"uint16"):A=o(p,"float32"),c<0?this.length=s(this.gl,this.type,this.length,this.usage,A,c):this.length=s(this.gl,this.type,this.length,this.usage,A.subarray(0,p.length),c),e.free(A)}else if(typeof p=="object"&&typeof p.length=="number")this.length=s(this.gl,this.type,this.length,this.usage,p,c);else if(typeof p=="number"||p===void 0){if(c>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");p=p|0,p<=0&&(p=1),this.gl.bufferData(this.type,p|0,this.usage),this.length=p}else throw new Error("gl-buffer: Invalid data type")};function d(p,c,m,l){if(m=m||p.ARRAY_BUFFER,l=l||p.DYNAMIC_DRAW,m!==p.ARRAY_BUFFER&&m!==p.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(l!==p.DYNAMIC_DRAW&&l!==p.STATIC_DRAW&&l!==p.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var x=p.createBuffer(),u=new t(p,m,x,0,l);return u.update(c),u}M.exports=d},{ndarray:259,"ndarray-ops":254,"typedarray-pool":308}],79:[function(f,M,T){var e=f("gl-vec3");M.exports=function(n,r){var t=n.positions,h=n.vectors,s={positions:[],vertexIntensity:[],vertexIntensityBounds:n.vertexIntensityBounds,vectors:[],cells:[],coneOffset:n.coneOffset,colormap:n.colormap};if(n.positions.length===0)return r&&(r[0]=[0,0,0],r[1]=[0,0,0]),s;for(var o=0,y=1/0,d=-1/0,p=1/0,c=-1/0,m=1/0,l=-1/0,x=null,u=null,A=[],_=1/0,g=!1,b=0;b<t.length;b++){var v=t[b];y=Math.min(v[0],y),d=Math.max(v[0],d),p=Math.min(v[1],p),c=Math.max(v[1],c),m=Math.min(v[2],m),l=Math.max(v[2],l);var k=h[b];if(e.length(k)>o&&(o=e.length(k)),b){var S=2*e.distance(x,v)/(e.length(u)+e.length(k));S?(_=Math.min(_,S),g=!1):g=!0}g||(x=v,u=k),A.push(k)}var E=[y,p,m],C=[d,c,l];r&&(r[0]=E,r[1]=C),o===0&&(o=1);var F=1/o;isFinite(_)||(_=1),s.vectorScale=_;var I=n.coneSize||.5;n.absoluteConeSize&&(I=n.absoluteConeSize*F),s.coneScale=I;for(var b=0,D=0;b<t.length;b++)for(var v=t[b],R=v[0],O=v[1],z=v[2],B=A[b],G=e.length(B)*F,Q=0,X=8;Q<X;Q++){s.positions.push([R,O,z,D++]),s.positions.push([R,O,z,D++]),s.positions.push([R,O,z,D++]),s.positions.push([R,O,z,D++]),s.positions.push([R,O,z,D++]),s.positions.push([R,O,z,D++]),s.vectors.push(B),s.vectors.push(B),s.vectors.push(B),s.vectors.push(B),s.vectors.push(B),s.vectors.push(B),s.vertexIntensity.push(G,G,G),s.vertexIntensity.push(G,G,G);var j=s.positions.length;s.cells.push([j-6,j-5,j-4],[j-3,j-2,j-1])}return s};var a=f("./lib/shaders");M.exports.createMesh=f("./create_mesh"),M.exports.createConeMesh=function(n,r){return M.exports.createMesh(n,r,{shaders:a,traceType:"cone"})}},{"./create_mesh":80,"./lib/shaders":81,"gl-vec3":169}],80:[function(f,M,T){var e=f("gl-shader"),a=f("gl-buffer"),n=f("gl-vao"),r=f("gl-texture2d"),t=f("gl-mat4/multiply"),h=f("gl-mat4/invert"),s=f("ndarray"),o=f("colormap"),y=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function d(A,_,g,b,v,k,S,E,C,F,I){this.gl=A,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=_,this.dirty=!0,this.triShader=g,this.pickShader=b,this.trianglePositions=v,this.triangleVectors=k,this.triangleColors=E,this.triangleUVs=C,this.triangleIds=S,this.triangleVAO=F,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=I,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=y,this._view=y,this._projection=y,this._resolution=[1,1]}var p=d.prototype;p.isOpaque=function(){return this.opacity>=1},p.isTransparent=function(){return this.opacity<1},p.pickSlots=1,p.setPickBase=function(A){this.pickId=A};function c(A){for(var _=o({colormap:A,nshades:256,format:"rgba"}),g=new Uint8Array(256*4),b=0;b<256;++b){for(var v=_[b],k=0;k<3;++k)g[4*b+k]=v[k];g[4*b+3]=v[3]*255}return s(g,[256,256,4],[4,0,1])}function m(A){for(var _=A.length,g=new Array(_),b=0;b<_;++b)g[b]=A[b][2];return g}p.update=function(A){A=A||{};var _=this.gl;this.dirty=!0,"lightPosition"in A&&(this.lightPosition=A.lightPosition),"opacity"in A&&(this.opacity=A.opacity),"ambient"in A&&(this.ambientLight=A.ambient),"diffuse"in A&&(this.diffuseLight=A.diffuse),"specular"in A&&(this.specularLight=A.specular),"roughness"in A&&(this.roughness=A.roughness),"fresnel"in A&&(this.fresnel=A.fresnel),A.tubeScale!==void 0&&(this.tubeScale=A.tubeScale),A.vectorScale!==void 0&&(this.vectorScale=A.vectorScale),A.coneScale!==void 0&&(this.coneScale=A.coneScale),A.coneOffset!==void 0&&(this.coneOffset=A.coneOffset),A.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=_.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=_.LINEAR,this.texture.setPixels(c(A.colormap)),this.texture.generateMipmap());var g=A.cells,b=A.positions,v=A.vectors;if(!b||!g||!v)return;var k=[],S=[],E=[],C=[],F=[];this.cells=g,this.positions=b,this.vectors=v;var I=A.meshColor||[1,1,1,1],D=A.vertexIntensity,R=1/0,O=-1/0;if(D)if(A.vertexIntensityBounds)R=+A.vertexIntensityBounds[0],O=+A.vertexIntensityBounds[1];else for(var z=0;z<D.length;++z){var B=D[z];R=Math.min(R,B),O=Math.max(O,B)}else for(var z=0;z<b.length;++z){var B=b[z][2];R=Math.min(R,B),O=Math.max(O,B)}D?this.intensity=D:this.intensity=m(b),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(var z=0;z<b.length;++z)for(var G=b[z],Q=0;Q<3;++Q)isNaN(G[Q])||!isFinite(G[Q])||(this.bounds[0][Q]=Math.min(this.bounds[0][Q],G[Q]),this.bounds[1][Q]=Math.max(this.bounds[1][Q],G[Q]));var X=0;e:for(var z=0;z<g.length;++z){var j=g[z];switch(j.length){case 3:for(var Q=0;Q<3;++Q)for(var re=j[Q],G=b[re],ue=0;ue<3;++ue)if(isNaN(G[ue])||!isFinite(G[ue]))continue e;for(var Q=0;Q<3;++Q){var re=j[2-Q],G=b[re];k.push(G[0],G[1],G[2],G[3]);var K=v[re];S.push(K[0],K[1],K[2],K[3]||0);var te=I;te.length===3?E.push(te[0],te[1],te[2],1):E.push(te[0],te[1],te[2],te[3]);var Y;D?Y=[(D[re]-R)/(O-R),0]:Y=[(G[2]-R)/(O-R),0],C.push(Y[0],Y[1]),F.push(z)}X+=1;break}}this.triangleCount=X,this.trianglePositions.update(k),this.triangleVectors.update(S),this.triangleColors.update(E),this.triangleUVs.update(C),this.triangleIds.update(new Uint32Array(F))},p.drawTransparent=p.draw=function(A){A=A||{};for(var _=this.gl,g=A.model||y,b=A.view||y,v=A.projection||y,k=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],S=0;S<3;++S)k[0][S]=Math.max(k[0][S],this.clipBounds[0][S]),k[1][S]=Math.min(k[1][S],this.clipBounds[1][S]);var E={model:g,view:b,projection:v,inverseModel:y.slice(),clipBounds:k,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};E.inverseModel=h(E.inverseModel,E.model),_.disable(_.CULL_FACE),this.texture.bind(0);var C=new Array(16);t(C,E.view,E.model),t(C,E.projection,C),h(C,C);for(var S=0;S<3;++S)E.eyePosition[S]=C[12+S]/C[15];for(var F=C[15],S=0;S<3;++S)F+=this.lightPosition[S]*C[4*S+3];for(var S=0;S<3;++S){for(var I=C[12+S],D=0;D<3;++D)I+=C[4*D+S]*this.lightPosition[D];E.lightPosition[S]=I/F}if(this.triangleCount>0){var R=this.triShader;R.bind(),R.uniforms=E,this.triangleVAO.bind(),_.drawArrays(_.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()}},p.drawPick=function(A){A=A||{};for(var _=this.gl,g=A.model||y,b=A.view||y,v=A.projection||y,k=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],S=0;S<3;++S)k[0][S]=Math.max(k[0][S],this.clipBounds[0][S]),k[1][S]=Math.min(k[1][S],this.clipBounds[1][S]);this._model=[].slice.call(g),this._view=[].slice.call(b),this._projection=[].slice.call(v),this._resolution=[_.drawingBufferWidth,_.drawingBufferHeight];var E={model:g,view:b,projection:v,clipBounds:k,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},C=this.pickShader;C.bind(),C.uniforms=E,this.triangleCount>0&&(this.triangleVAO.bind(),_.drawArrays(_.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind())},p.pick=function(A){if(!A||A.id!==this.pickId)return null;var _=A.value[0]+256*A.value[1]+65536*A.value[2],g=this.cells[_],b=this.positions[g[1]].slice(0,3),v={position:b,dataCoordinate:b,index:Math.floor(g[1]/48)};return this.traceType==="cone"?v.index=Math.floor(g[1]/48):this.traceType==="streamtube"&&(v.intensity=this.intensity[g[1]],v.velocity=this.vectors[g[1]].slice(0,3),v.divergence=this.vectors[g[1]][3],v.index=_),v},p.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()};function l(A,_){var g=e(A,_.meshShader.vertex,_.meshShader.fragment,null,_.meshShader.attributes);return g.attributes.position.location=0,g.attributes.color.location=2,g.attributes.uv.location=3,g.attributes.vector.location=4,g}function x(A,_){var g=e(A,_.pickShader.vertex,_.pickShader.fragment,null,_.pickShader.attributes);return g.attributes.position.location=0,g.attributes.id.location=1,g.attributes.vector.location=4,g}function u(A,_,g){var b=g.shaders;arguments.length===1&&(_=A,A=_.gl);var v=l(A,b),k=x(A,b),S=r(A,s(new Uint8Array([255,255,255,255]),[1,1,4]));S.generateMipmap(),S.minFilter=A.LINEAR_MIPMAP_LINEAR,S.magFilter=A.LINEAR;var E=a(A),C=a(A),F=a(A),I=a(A),D=a(A),R=n(A,[{buffer:E,type:A.FLOAT,size:4},{buffer:D,type:A.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:F,type:A.FLOAT,size:4},{buffer:I,type:A.FLOAT,size:2},{buffer:C,type:A.FLOAT,size:4}]),O=new d(A,S,v,k,E,C,D,F,I,R,g.traceType||"cone");return O.update(_),O}M.exports=u},{colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-shader":132,"gl-texture2d":146,"gl-vao":150,ndarray:259}],81:[function(f,M,T){var e=f("glslify"),a=e([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec3 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, coneScale, coneOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * conePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(conePosition, 1.0);
  vec4 t_position  = view * conePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = conePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),n=e([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),r=e([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float vectorScale, coneScale, coneOffset;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);
  gl_Position = projection * view * conePosition;
  f_id        = id;
  f_position  = position.xyz;
}
`]),t=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);T.meshShader={vertex:a,fragment:n,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},T.pickShader={vertex:r,fragment:t,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},{glslify:231}],82:[function(f,M,T){M.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},{}],83:[function(f,M,T){var e=f("./1.0/numbers");M.exports=function(n){return e[n]}},{"./1.0/numbers":82}],84:[function(f,M,T){M.exports=d;var e=f("gl-buffer"),a=f("gl-vao"),n=f("./shaders/index"),r=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function t(p,c,m,l){this.gl=p,this.shader=l,this.buffer=c,this.vao=m,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}var h=t.prototype;h.isOpaque=function(){return!this.hasAlpha},h.isTransparent=function(){return this.hasAlpha},h.drawTransparent=h.draw=function(p){var c=this.gl,m=this.shader.uniforms;this.shader.bind();var l=m.view=p.view||r,x=m.projection=p.projection||r;m.model=p.model||r,m.clipBounds=this.clipBounds,m.opacity=this.opacity;var u=l[12],A=l[13],_=l[14],g=l[15],b=p._ortho||!1,v=b?2:1,k=v*this.pixelRatio*(x[3]*u+x[7]*A+x[11]*_+x[15]*g)/c.drawingBufferHeight;this.vao.bind();for(var S=0;S<3;++S)c.lineWidth(this.lineWidth[S]*this.pixelRatio),m.capSize=this.capSize[S]*k,this.lineCount[S]&&c.drawArrays(c.LINES,this.lineOffset[S],this.lineCount[S]);this.vao.unbind()};function s(p,c){for(var m=0;m<3;++m)p[0][m]=Math.min(p[0][m],c[m]),p[1][m]=Math.max(p[1][m],c[m])}var o=function(){for(var p=new Array(3),c=0;c<3;++c){for(var m=[],l=1;l<=2;++l)for(var x=-1;x<=1;x+=2){var u=(l+c)%3,A=[0,0,0];A[u]=x,m.push(A)}p[c]=m}return p}();function y(p,c,m,l){for(var x=o[l],u=0;u<x.length;++u){var A=x[u];p.push(c[0],c[1],c[2],m[0],m[1],m[2],m[3],A[0],A[1],A[2])}return x.length}h.update=function(p){p=p||{},"lineWidth"in p&&(this.lineWidth=p.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in p&&(this.capSize=p.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in p&&(this.opacity=+p.opacity,this.opacity<1&&(this.hasAlpha=!0));var c=p.color||[[0,0,0],[0,0,0],[0,0,0]],m=p.position,l=p.error;if(Array.isArray(c[0])||(c=[c,c,c]),m&&l){var x=[],u=m.length,A=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var _=0;_<3;++_){this.lineOffset[_]=A;e:for(var g=0;g<u;++g){for(var b=m[g],v=0;v<3;++v)if(isNaN(b[v])||!isFinite(b[v]))continue e;var k=l[g],S=c[_];if(Array.isArray(S[0])&&(S=c[g]),S.length===3?S=[S[0],S[1],S[2],1]:S.length===4&&(S=[S[0],S[1],S[2],S[3]],!this.hasAlpha&&S[3]<1&&(this.hasAlpha=!0)),!(isNaN(k[0][_])||isNaN(k[1][_]))){if(k[0][_]<0){var E=b.slice();E[_]+=k[0][_],x.push(b[0],b[1],b[2],S[0],S[1],S[2],S[3],0,0,0,E[0],E[1],E[2],S[0],S[1],S[2],S[3],0,0,0),s(this.bounds,E),A+=2+y(x,E,S,_)}if(k[1][_]>0){var E=b.slice();E[_]+=k[1][_],x.push(b[0],b[1],b[2],S[0],S[1],S[2],S[3],0,0,0,E[0],E[1],E[2],S[0],S[1],S[2],S[3],0,0,0),s(this.bounds,E),A+=2+y(x,E,S,_)}}}this.lineCount[_]=A-this.lineOffset[_]}this.buffer.update(x)}},h.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()};function d(p){var c=p.gl,m=e(c),l=a(c,[{buffer:m,type:c.FLOAT,size:3,offset:0,stride:40},{buffer:m,type:c.FLOAT,size:4,offset:12,stride:40},{buffer:m,type:c.FLOAT,size:3,offset:28,stride:40}]),x=n(c);x.attributes.position.location=0,x.attributes.color.location=1,x.attributes.offset.location=2;var u=new t(c,m,l,x);return u.update(p),u}},{"./shaders/index":85,"gl-buffer":78,"gl-vao":150}],85:[function(f,M,T){var e=f("glslify"),a=f("gl-shader"),n=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, offset;
attribute vec4 color;
uniform mat4 model, view, projection;
uniform float capSize;
varying vec4 fragColor;
varying vec3 fragPosition;

void main() {
  vec4 worldPosition  = model * vec4(position, 1.0);
  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);
  gl_Position         = projection * view * worldPosition;
  fragColor           = color;
  fragPosition        = position;
}`]),r=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float opacity;
varying vec3 fragPosition;
varying vec4 fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  gl_FragColor = opacity * fragColor;
}`]);M.exports=function(t){return a(t,n,r,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},{"gl-shader":132,glslify:231}],86:[function(f,M,T){var e=f("gl-texture2d");M.exports=A;var a=null,n,r,t,h;function s(_){var g=_.getParameter(_.FRAMEBUFFER_BINDING),b=_.getParameter(_.RENDERBUFFER_BINDING),v=_.getParameter(_.TEXTURE_BINDING_2D);return[g,b,v]}function o(_,g){_.bindFramebuffer(_.FRAMEBUFFER,g[0]),_.bindRenderbuffer(_.RENDERBUFFER,g[1]),_.bindTexture(_.TEXTURE_2D,g[2])}function y(_,g){var b=_.getParameter(g.MAX_COLOR_ATTACHMENTS_WEBGL);a=new Array(b+1);for(var v=0;v<=b;++v){for(var k=new Array(b),S=0;S<v;++S)k[S]=_.COLOR_ATTACHMENT0+S;for(var S=v;S<b;++S)k[S]=_.NONE;a[v]=k}}function d(_){switch(_){case n:throw new Error("gl-fbo: Framebuffer unsupported");case r:throw new Error("gl-fbo: Framebuffer incomplete attachment");case t:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case h:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function p(_,g,b,v,k,S){if(!v)return null;var E=e(_,g,b,k,v);return E.magFilter=_.NEAREST,E.minFilter=_.NEAREST,E.mipSamples=1,E.bind(),_.framebufferTexture2D(_.FRAMEBUFFER,S,_.TEXTURE_2D,E.handle,0),E}function c(_,g,b,v,k){var S=_.createRenderbuffer();return _.bindRenderbuffer(_.RENDERBUFFER,S),_.renderbufferStorage(_.RENDERBUFFER,v,g,b),_.framebufferRenderbuffer(_.FRAMEBUFFER,k,_.RENDERBUFFER,S),S}function m(_){var g=s(_.gl),b=_.gl,v=_.handle=b.createFramebuffer(),k=_._shape[0],S=_._shape[1],E=_.color.length,C=_._ext,F=_._useStencil,I=_._useDepth,D=_._colorType;b.bindFramebuffer(b.FRAMEBUFFER,v);for(var R=0;R<E;++R)_.color[R]=p(b,k,S,D,b.RGBA,b.COLOR_ATTACHMENT0+R);E===0?(_._color_rb=c(b,k,S,b.RGBA4,b.COLOR_ATTACHMENT0),C&&C.drawBuffersWEBGL(a[0])):E>1&&C.drawBuffersWEBGL(a[E]);var O=b.getExtension("WEBGL_depth_texture");O?F?_.depth=p(b,k,S,O.UNSIGNED_INT_24_8_WEBGL,b.DEPTH_STENCIL,b.DEPTH_STENCIL_ATTACHMENT):I&&(_.depth=p(b,k,S,b.UNSIGNED_SHORT,b.DEPTH_COMPONENT,b.DEPTH_ATTACHMENT)):I&&F?_._depth_rb=c(b,k,S,b.DEPTH_STENCIL,b.DEPTH_STENCIL_ATTACHMENT):I?_._depth_rb=c(b,k,S,b.DEPTH_COMPONENT16,b.DEPTH_ATTACHMENT):F&&(_._depth_rb=c(b,k,S,b.STENCIL_INDEX,b.STENCIL_ATTACHMENT));var z=b.checkFramebufferStatus(b.FRAMEBUFFER);if(z!==b.FRAMEBUFFER_COMPLETE){_._destroyed=!0,b.bindFramebuffer(b.FRAMEBUFFER,null),b.deleteFramebuffer(_.handle),_.handle=null,_.depth&&(_.depth.dispose(),_.depth=null),_._depth_rb&&(b.deleteRenderbuffer(_._depth_rb),_._depth_rb=null);for(var R=0;R<_.color.length;++R)_.color[R].dispose(),_.color[R]=null;_._color_rb&&(b.deleteRenderbuffer(_._color_rb),_._color_rb=null),o(b,g),d(z)}o(b,g)}function l(_,g,b,v,k,S,E,C){this.gl=_,this._shape=[g|0,b|0],this._destroyed=!1,this._ext=C,this.color=new Array(k);for(var F=0;F<k;++F)this.color[F]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=v,this._useDepth=S,this._useStencil=E;var I=this,D=[g|0,b|0];Object.defineProperties(D,{0:{get:function(){return I._shape[0]},set:function(R){return I.width=R}},1:{get:function(){return I._shape[1]},set:function(R){return I.height=R}}}),this._shapeVector=D,m(this)}var x=l.prototype;function u(_,g,b){if(_._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(!(_._shape[0]===g&&_._shape[1]===b)){var v=_.gl,k=v.getParameter(v.MAX_RENDERBUFFER_SIZE);if(g<0||g>k||b<0||b>k)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");_._shape[0]=g,_._shape[1]=b;for(var S=s(v),E=0;E<_.color.length;++E)_.color[E].shape=_._shape;_._color_rb&&(v.bindRenderbuffer(v.RENDERBUFFER,_._color_rb),v.renderbufferStorage(v.RENDERBUFFER,v.RGBA4,_._shape[0],_._shape[1])),_.depth&&(_.depth.shape=_._shape),_._depth_rb&&(v.bindRenderbuffer(v.RENDERBUFFER,_._depth_rb),_._useDepth&&_._useStencil?v.renderbufferStorage(v.RENDERBUFFER,v.DEPTH_STENCIL,_._shape[0],_._shape[1]):_._useDepth?v.renderbufferStorage(v.RENDERBUFFER,v.DEPTH_COMPONENT16,_._shape[0],_._shape[1]):_._useStencil&&v.renderbufferStorage(v.RENDERBUFFER,v.STENCIL_INDEX,_._shape[0],_._shape[1])),v.bindFramebuffer(v.FRAMEBUFFER,_.handle);var C=v.checkFramebufferStatus(v.FRAMEBUFFER);C!==v.FRAMEBUFFER_COMPLETE&&(_.dispose(),o(v,S),d(C)),o(v,S)}}Object.defineProperties(x,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(_){if(Array.isArray(_)||(_=[_|0,_|0]),_.length!==2)throw new Error("gl-fbo: Shape vector must be length 2");var g=_[0]|0,b=_[1]|0;return u(this,g,b),[g,b]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(_){return _=_|0,u(this,_,this._shape[1]),_},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(_){return _=_|0,u(this,this._shape[0],_),_},enumerable:!1}}),x.bind=function(){if(!this._destroyed){var _=this.gl;_.bindFramebuffer(_.FRAMEBUFFER,this.handle),_.viewport(0,0,this._shape[0],this._shape[1])}},x.dispose=function(){if(!this._destroyed){this._destroyed=!0;var _=this.gl;_.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(_.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var g=0;g<this.color.length;++g)this.color[g].dispose(),this.color[g]=null;this._color_rb&&(_.deleteRenderbuffer(this._color_rb),this._color_rb=null)}};function A(_,g,b,v){n||(n=_.FRAMEBUFFER_UNSUPPORTED,r=_.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,t=_.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,h=_.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var k=_.getExtension("WEBGL_draw_buffers");if(!a&&k&&y(_,k),Array.isArray(g)&&(v=b,b=g[1]|0,g=g[0]|0),typeof g!="number")throw new Error("gl-fbo: Missing shape parameter");var S=_.getParameter(_.MAX_RENDERBUFFER_SIZE);if(g<0||g>S||b<0||b>S)throw new Error("gl-fbo: Parameters are too large for FBO");v=v||{};var E=1;if("color"in v){if(E=Math.max(v.color|0,0),E<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(E>1)if(k){if(E>_.getParameter(k.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+E+" draw buffers")}else throw new Error("gl-fbo: Multiple draw buffer extension not supported")}var C=_.UNSIGNED_BYTE,F=_.getExtension("OES_texture_float");if(v.float&&E>0){if(!F)throw new Error("gl-fbo: Context does not support floating point textures");C=_.FLOAT}else v.preferFloat&&E>0&&F&&(C=_.FLOAT);var I=!0;"depth"in v&&(I=!!v.depth);var D=!1;return"stencil"in v&&(D=!!v.stencil),new l(_,g,b,C,E,I,D,k)}},{"gl-texture2d":146}],87:[function(f,M,T){var e=f("sprintf-js").sprintf,a=f("gl-constants/lookup"),n=f("glsl-shader-name"),r=f("add-line-numbers");M.exports=t;function t(h,s,o){var y=n(s)||"of unknown name (see npm glsl-shader-name)",d="unknown type";o!==void 0&&(d=o===a.FRAGMENT_SHADER?"fragment":"vertex");for(var p=e(`Error compiling %s shader %s:
`,d,y),c=e("%s%s",p,h),m=h.split(`
`),l={},x=0;x<m.length;x++){var u=m[x];if(!(u===""||u==="\0")){var A=parseInt(u.split(":")[2]);if(isNaN(A))throw new Error(e("Could not parse error: %s",u));l[A]=u}}for(var _=r(s).split(`
`),x=0;x<_.length;x++)if(!(!l[x+3]&&!l[x+2]&&!l[x+1])){var g=_[x];if(p+=g+`
`,l[x+1]){var b=l[x+1];b=b.substr(b.split(":",3).join(":").length+1).trim(),p+=e(`^^^ %s

`,b)}}return{long:p.trim(),short:c.trim()}}},{"add-line-numbers":9,"gl-constants/lookup":83,"glsl-shader-name":223,"sprintf-js":301}],88:[function(f,M,T){M.exports=d;var e=f("binary-search-bounds"),a=f("iota-array"),n=f("typedarray-pool"),r=f("gl-shader"),t=f("gl-buffer"),h=f("./lib/shaders");function s(p,c,m,l,x,u,A){this.plot=p,this.shader=c,this.pickShader=m,this.positionBuffer=l,this.weightBuffer=x,this.colorBuffer=u,this.idBuffer=A,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var o=s.prototype,y=[0,0,1,0,0,1,1,0,1,1,0,1];o.draw=function(){var p=[1,0,0,0,1,0,0,0,1];return function(){var c=this.plot,m=this.shader,l=this.bounds,x=this.numVertices;if(!(x<=0)){var u=c.gl,A=c.dataBox,_=l[2]-l[0],g=l[3]-l[1],b=A[2]-A[0],v=A[3]-A[1];p[0]=2*_/b,p[4]=2*g/v,p[6]=2*(l[0]-A[0])/b-1,p[7]=2*(l[1]-A[1])/v-1,m.bind();var k=m.uniforms;k.viewTransform=p,k.shape=this.shape;var S=m.attributes;this.positionBuffer.bind(),S.position.pointer(),this.weightBuffer.bind(),S.weight.pointer(u.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),S.color.pointer(u.UNSIGNED_BYTE,!0),u.drawArrays(u.TRIANGLES,0,x)}}}(),o.drawPick=function(){var p=[1,0,0,0,1,0,0,0,1],c=[0,0,0,0];return function(m){var l=this.plot,x=this.pickShader,u=this.bounds,A=this.numVertices;if(!(A<=0)){var _=l.gl,g=l.dataBox,b=u[2]-u[0],v=u[3]-u[1],k=g[2]-g[0],S=g[3]-g[1];p[0]=2*b/k,p[4]=2*v/S,p[6]=2*(u[0]-g[0])/k-1,p[7]=2*(u[1]-g[1])/S-1;for(var E=0;E<4;++E)c[E]=m>>E*8&255;this.pickOffset=m,x.bind();var C=x.uniforms;C.viewTransform=p,C.pickOffset=c,C.shape=this.shape;var F=x.attributes;return this.positionBuffer.bind(),F.position.pointer(),this.weightBuffer.bind(),F.weight.pointer(_.UNSIGNED_BYTE,!1),this.idBuffer.bind(),F.pickId.pointer(_.UNSIGNED_BYTE,!1),_.drawArrays(_.TRIANGLES,0,A),m+this.shape[0]*this.shape[1]}}}(),o.pick=function(p,c,m){var l=this.pickOffset,x=this.shape[0]*this.shape[1];if(m<l||m>=l+x)return null;var u=m-l,A=this.xData,_=this.yData;return{object:this,pointId:u,dataCoord:[A[u%this.shape[0]],_[u/this.shape[0]|0]]}},o.update=function(p){p=p||{};var c=p.shape||[0,0],m=p.x||a(c[0]),l=p.y||a(c[1]),x=p.z||new Float32Array(c[0]*c[1]),u=p.zsmooth!==!1;this.xData=m,this.yData=l;var A=p.colorLevels||[0],_=p.colorValues||[0,0,0,1],g=A.length,b=this.bounds,v,k,S,E;u?(v=b[0]=m[0],k=b[1]=l[0],S=b[2]=m[m.length-1],E=b[3]=l[l.length-1]):(v=b[0]=m[0]+(m[1]-m[0])/2,k=b[1]=l[0]+(l[1]-l[0])/2,S=b[2]=m[m.length-1]+(m[m.length-1]-m[m.length-2])/2,E=b[3]=l[l.length-1]+(l[l.length-1]-l[l.length-2])/2);var C=1/(S-v),F=1/(E-k),I=c[0],D=c[1];this.shape=[I,D];var R=(u?(I-1)*(D-1):I*D)*(y.length>>>1);this.numVertices=R;for(var O=n.mallocUint8(R*4),z=n.mallocFloat32(R*2),B=n.mallocUint8(R*2),G=n.mallocUint32(R),Q=0,X=u?I-1:I,j=u?D-1:D,re=0;re<j;++re){var ue,K;u?(ue=F*(l[re]-k),K=F*(l[re+1]-k)):(ue=re<D-1?F*(l[re]-(l[re+1]-l[re])/2-k):F*(l[re]-(l[re]-l[re-1])/2-k),K=re<D-1?F*(l[re]+(l[re+1]-l[re])/2-k):F*(l[re]+(l[re]-l[re-1])/2-k));for(var te=0;te<X;++te){var Y,H;u?(Y=C*(m[te]-v),H=C*(m[te+1]-v)):(Y=te<I-1?C*(m[te]-(m[te+1]-m[te])/2-v):C*(m[te]-(m[te]-m[te-1])/2-v),H=te<I-1?C*(m[te]+(m[te+1]-m[te])/2-v):C*(m[te]+(m[te]-m[te-1])/2-v));for(var ee=0;ee<y.length;ee+=2){var ne=y[ee],Z=y[ee+1],q=u?(re+Z)*I+(te+ne):re*I+te,ie=x[q],se=e.le(A,ie),ae,oe,be,ce;if(se<0)ae=_[0],oe=_[1],be=_[2],ce=_[3];else if(se===g-1)ae=_[4*g-4],oe=_[4*g-3],be=_[4*g-2],ce=_[4*g-1];else{var de=(ie-A[se])/(A[se+1]-A[se]),ye=1-de,ge=4*se,me=4*(se+1);ae=ye*_[ge]+de*_[me],oe=ye*_[ge+1]+de*_[me+1],be=ye*_[ge+2]+de*_[me+2],ce=ye*_[ge+3]+de*_[me+3]}O[4*Q]=255*ae,O[4*Q+1]=255*oe,O[4*Q+2]=255*be,O[4*Q+3]=255*ce,z[2*Q]=Y*.5+H*.5,z[2*Q+1]=ue*.5+K*.5,B[2*Q]=ne,B[2*Q+1]=Z,G[Q]=re*I+te,Q+=1}}}this.positionBuffer.update(z),this.weightBuffer.update(B),this.colorBuffer.update(O),this.idBuffer.update(G),n.free(z),n.free(O),n.free(B),n.free(G)},o.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)};function d(p,c){var m=p.gl,l=r(m,h.vertex,h.fragment),x=r(m,h.pickVertex,h.pickFragment),u=t(m),A=t(m),_=t(m),g=t(m),b=new s(p,l,x,u,A,_,g);return b.update(c),p.addObject(b),b}},{"./lib/shaders":89,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132,"iota-array":235,"typedarray-pool":308}],89:[function(f,M,T){var e=f("glslify");M.exports={fragment:e([`precision lowp float;
#define GLSLIFY 1
varying vec4 fragColor;
void main() {
  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);
}
`]),vertex:e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 color;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragColor;

void main() {
  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  fragColor = color;
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`]),pickFragment:e([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;
varying vec2 vWeight;

uniform vec2 shape;
uniform vec4 pickOffset;

void main() {
  vec2 d = step(.5, vWeight);
  vec4 id = fragId + pickOffset;
  id.x += d.x + d.y*shape.x;

  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  gl_FragColor = id/255.;
}
`]),pickVertex:e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragId;
varying vec2 vWeight;

void main() {
  vWeight = weight;

  fragId = pickId;

  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`])}},{glslify:231}],90:[function(f,M,T){var e=f("glslify"),a=f("gl-shader"),n=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, nextPosition;
attribute float arcLength, lineWidth;
attribute vec4 color;

uniform vec2 screenShape;
uniform float pixelRatio;
uniform mat4 model, view, projection;

varying vec4 fragColor;
varying vec3 worldPosition;
varying float pixelArcLength;

vec4 project(vec3 p) {
  return projection * view * model * vec4(p, 1.0);
}

void main() {
  vec4 startPoint = project(position);
  vec4 endPoint   = project(nextPosition);

  vec2 A = startPoint.xy / startPoint.w;
  vec2 B =   endPoint.xy /   endPoint.w;

  float clipAngle = atan(
    (B.y - A.y) * screenShape.y,
    (B.x - A.x) * screenShape.x
  );

  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(
    sin(clipAngle),
    -cos(clipAngle)
  ) / screenShape;

  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);

  worldPosition = position;
  pixelArcLength = arcLength;
  fragColor = color;
}
`]),r=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3      clipBounds[2];
uniform sampler2D dashTexture;
uniform float     dashScale;
uniform float     opacity;

varying vec3    worldPosition;
varying float   pixelArcLength;
varying vec4    fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;
  if(dashWeight < 0.5) {
    discard;
  }
  gl_FragColor = fragColor * opacity;
}
`]),t=e([`precision highp float;
#define GLSLIFY 1

#define FLOAT_MAX  1.70141184e38
#define FLOAT_MIN  1.17549435e-38

// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl
vec4 packFloat(float v) {
  float av = abs(v);

  //Handle special cases
  if(av < FLOAT_MIN) {
    return vec4(0.0, 0.0, 0.0, 0.0);
  } else if(v > FLOAT_MAX) {
    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;
  } else if(v < -FLOAT_MAX) {
    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;
  }

  vec4 c = vec4(0,0,0,0);

  //Compute exponent and mantissa
  float e = floor(log2(av));
  float m = av * pow(2.0, -e) - 1.0;

  //Unpack mantissa
  c[1] = floor(128.0 * m);
  m -= c[1] / 128.0;
  c[2] = floor(32768.0 * m);
  m -= c[2] / 32768.0;
  c[3] = floor(8388608.0 * m);

  //Unpack exponent
  float ebias = e + 127.0;
  c[0] = floor(ebias / 2.0);
  ebias -= c[0] * 2.0;
  c[1] += floor(ebias) * 128.0;

  //Unpack sign bit
  c[0] += 128.0 * step(0.0, -v);

  //Scale back to range
  return c / 255.0;
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform float pickId;
uniform vec3 clipBounds[2];

varying vec3 worldPosition;
varying float pixelArcLength;
varying vec4 fragColor;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;

  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);
}`]),h=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];T.createShader=function(s){return a(s,n,r,null,h)},T.createPickShader=function(s){return a(s,n,t,null,h)}},{"gl-shader":132,glslify:231}],91:[function(f,M,T){M.exports=_;var e=f("gl-buffer"),a=f("gl-vao"),n=f("gl-texture2d"),r=new Uint8Array(4),t=new Float32Array(r.buffer);function h(g,b,v,k){return r[0]=k,r[1]=v,r[2]=b,r[3]=g,t[0]}var s=f("binary-search-bounds"),o=f("ndarray"),y=f("./lib/shaders"),d=y.createShader,p=y.createPickShader,c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function m(g,b){for(var v=0,k=0;k<3;++k){var S=g[k]-b[k];v+=S*S}return Math.sqrt(v)}function l(g){for(var b=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],v=0;v<3;++v)b[0][v]=Math.max(g[0][v],b[0][v]),b[1][v]=Math.min(g[1][v],b[1][v]);return b}function x(g,b,v,k){this.arcLength=g,this.position=b,this.index=v,this.dataCoordinate=k}function u(g,b,v,k,S,E){this.gl=g,this.shader=b,this.pickShader=v,this.buffer=k,this.vao=S,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=E,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}var A=u.prototype;A.isTransparent=function(){return this.hasAlpha},A.isOpaque=function(){return!this.hasAlpha},A.pickSlots=1,A.setPickBase=function(g){this.pickId=g},A.drawTransparent=A.draw=function(g){if(!!this.vertexCount){var b=this.gl,v=this.shader,k=this.vao;v.bind(),v.uniforms={model:g.model||c,view:g.view||c,projection:g.projection||c,clipBounds:l(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[b.drawingBufferWidth,b.drawingBufferHeight],pixelRatio:this.pixelRatio},k.bind(),k.draw(b.TRIANGLE_STRIP,this.vertexCount),k.unbind()}},A.drawPick=function(g){if(!!this.vertexCount){var b=this.gl,v=this.pickShader,k=this.vao;v.bind(),v.uniforms={model:g.model||c,view:g.view||c,projection:g.projection||c,pickId:this.pickId,clipBounds:l(this.clipBounds),screenShape:[b.drawingBufferWidth,b.drawingBufferHeight],pixelRatio:this.pixelRatio},k.bind(),k.draw(b.TRIANGLE_STRIP,this.vertexCount),k.unbind()}},A.update=function(g){var b,v;this.dirty=!0;var k=!!g.connectGaps;"dashScale"in g&&(this.dashScale=g.dashScale),this.hasAlpha=!1,"opacity"in g&&(this.opacity=+g.opacity,this.opacity<1&&(this.hasAlpha=!0));var S=[],E=[],C=[],F=0,I=0,D=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],R=g.position||g.positions;if(R){var O=g.color||g.colors||[0,0,0,1],z=g.lineWidth||1,B=!1;e:for(b=1;b<R.length;++b){var G=R[b-1],Q=R[b];for(E.push(F),C.push(G.slice()),v=0;v<3;++v){if(isNaN(G[v])||isNaN(Q[v])||!isFinite(G[v])||!isFinite(Q[v])){if(!k&&S.length>0){for(var X=0;X<24;++X)S.push(S[S.length-12]);I+=2,B=!0}continue e}D[0][v]=Math.min(D[0][v],G[v],Q[v]),D[1][v]=Math.max(D[1][v],G[v],Q[v])}var j,re;Array.isArray(O[0])?(j=O.length>b-1?O[b-1]:O.length>0?O[O.length-1]:[0,0,0,1],re=O.length>b?O[b]:O.length>0?O[O.length-1]:[0,0,0,1]):j=re=O,j.length===3&&(j=[j[0],j[1],j[2],1]),re.length===3&&(re=[re[0],re[1],re[2],1]),!this.hasAlpha&&j[3]<1&&(this.hasAlpha=!0);var ue;Array.isArray(z)?ue=z.length>b-1?z[b-1]:z.length>0?z[z.length-1]:[0,0,0,1]:ue=z;var K=F;if(F+=m(G,Q),B){for(v=0;v<2;++v)S.push(G[0],G[1],G[2],Q[0],Q[1],Q[2],K,ue,j[0],j[1],j[2],j[3]);I+=2,B=!1}S.push(G[0],G[1],G[2],Q[0],Q[1],Q[2],K,ue,j[0],j[1],j[2],j[3],G[0],G[1],G[2],Q[0],Q[1],Q[2],K,-ue,j[0],j[1],j[2],j[3],Q[0],Q[1],Q[2],G[0],G[1],G[2],F,-ue,re[0],re[1],re[2],re[3],Q[0],Q[1],Q[2],G[0],G[1],G[2],F,ue,re[0],re[1],re[2],re[3]),I+=4}}if(this.buffer.update(S),E.push(F),C.push(R[R.length-1].slice()),this.bounds=D,this.vertexCount=I,this.points=C,this.arcLength=E,"dashes"in g){var te=g.dashes,Y=te.slice();for(Y.unshift(0),b=1;b<Y.length;++b)Y[b]=Y[b-1]+Y[b];var H=o(new Array(256*4),[256,1,4]);for(b=0;b<256;++b){for(v=0;v<4;++v)H.set(b,0,v,0);s.le(Y,Y[Y.length-1]*b/255)&1?H.set(b,0,0,0):H.set(b,0,0,255)}this.texture.setPixels(H)}},A.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},A.pick=function(g){if(!g||g.id!==this.pickId)return null;var b=h(g.value[0],g.value[1],g.value[2],0),v=s.le(this.arcLength,b);if(v<0)return null;if(v===this.arcLength.length-1)return new x(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),v);for(var k=this.points[v],S=this.points[Math.min(v+1,this.points.length-1)],E=(b-this.arcLength[v])/(this.arcLength[v+1]-this.arcLength[v]),C=1-E,F=[0,0,0],I=0;I<3;++I)F[I]=C*k[I]+E*S[I];var D=Math.min(E<.5?v:v+1,this.points.length-1);return new x(b,F,D,this.points[D])};function _(g){var b=g.gl||g.scene&&g.scene.gl,v=d(b);v.attributes.position.location=0,v.attributes.nextPosition.location=1,v.attributes.arcLength.location=2,v.attributes.lineWidth.location=3,v.attributes.color.location=4;var k=p(b);k.attributes.position.location=0,k.attributes.nextPosition.location=1,k.attributes.arcLength.location=2,k.attributes.lineWidth.location=3,k.attributes.color.location=4;for(var S=e(b),E=a(b,[{buffer:S,size:3,offset:0,stride:48},{buffer:S,size:3,offset:12,stride:48},{buffer:S,size:1,offset:24,stride:48},{buffer:S,size:1,offset:28,stride:48},{buffer:S,size:4,offset:32,stride:48}]),C=o(new Array(256*4),[256,1,4]),F=0;F<256*4;++F)C.data[F]=255;var I=n(b,C);I.wrap=b.REPEAT;var D=new u(b,v,k,S,E,I);return D.update(g),D}},{"./lib/shaders":90,"binary-search-bounds":31,"gl-buffer":78,"gl-texture2d":146,"gl-vao":150,ndarray:259}],92:[function(f,M,T){M.exports=e;function e(a){var n=new Float32Array(16);return n[0]=a[0],n[1]=a[1],n[2]=a[2],n[3]=a[3],n[4]=a[4],n[5]=a[5],n[6]=a[6],n[7]=a[7],n[8]=a[8],n[9]=a[9],n[10]=a[10],n[11]=a[11],n[12]=a[12],n[13]=a[13],n[14]=a[14],n[15]=a[15],n}},{}],93:[function(f,M,T){M.exports=e;function e(){var a=new Float32Array(16);return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}},{}],94:[function(f,M,T){M.exports=e;function e(a){var n=a[0],r=a[1],t=a[2],h=a[3],s=a[4],o=a[5],y=a[6],d=a[7],p=a[8],c=a[9],m=a[10],l=a[11],x=a[12],u=a[13],A=a[14],_=a[15],g=n*o-r*s,b=n*y-t*s,v=n*d-h*s,k=r*y-t*o,S=r*d-h*o,E=t*d-h*y,C=p*u-c*x,F=p*A-m*x,I=p*_-l*x,D=c*A-m*u,R=c*_-l*u,O=m*_-l*A;return g*O-b*R+v*D+k*I-S*F+E*C}},{}],95:[function(f,M,T){M.exports=e;function e(a,n){var r=n[0],t=n[1],h=n[2],s=n[3],o=r+r,y=t+t,d=h+h,p=r*o,c=t*o,m=t*y,l=h*o,x=h*y,u=h*d,A=s*o,_=s*y,g=s*d;return a[0]=1-m-u,a[1]=c+g,a[2]=l-_,a[3]=0,a[4]=c-g,a[5]=1-p-u,a[6]=x+A,a[7]=0,a[8]=l+_,a[9]=x-A,a[10]=1-p-m,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}},{}],96:[function(f,M,T){M.exports=e;function e(a,n,r){var t=n[0],h=n[1],s=n[2],o=n[3],y=t+t,d=h+h,p=s+s,c=t*y,m=t*d,l=t*p,x=h*d,u=h*p,A=s*p,_=o*y,g=o*d,b=o*p;return a[0]=1-(x+A),a[1]=m+b,a[2]=l-g,a[3]=0,a[4]=m-b,a[5]=1-(c+A),a[6]=u+_,a[7]=0,a[8]=l+g,a[9]=u-_,a[10]=1-(c+x),a[11]=0,a[12]=r[0],a[13]=r[1],a[14]=r[2],a[15]=1,a}},{}],97:[function(f,M,T){M.exports=e;function e(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}},{}],98:[function(f,M,T){M.exports=e;function e(a,n){var r=n[0],t=n[1],h=n[2],s=n[3],o=n[4],y=n[5],d=n[6],p=n[7],c=n[8],m=n[9],l=n[10],x=n[11],u=n[12],A=n[13],_=n[14],g=n[15],b=r*y-t*o,v=r*d-h*o,k=r*p-s*o,S=t*d-h*y,E=t*p-s*y,C=h*p-s*d,F=c*A-m*u,I=c*_-l*u,D=c*g-x*u,R=m*_-l*A,O=m*g-x*A,z=l*g-x*_,B=b*z-v*O+k*R+S*D-E*I+C*F;return B?(B=1/B,a[0]=(y*z-d*O+p*R)*B,a[1]=(h*O-t*z-s*R)*B,a[2]=(A*C-_*E+g*S)*B,a[3]=(l*E-m*C-x*S)*B,a[4]=(d*D-o*z-p*I)*B,a[5]=(r*z-h*D+s*I)*B,a[6]=(_*k-u*C-g*v)*B,a[7]=(c*C-l*k+x*v)*B,a[8]=(o*O-y*D+p*F)*B,a[9]=(t*D-r*O-s*F)*B,a[10]=(u*E-A*k+g*b)*B,a[11]=(m*k-c*E-x*b)*B,a[12]=(y*I-o*R-d*F)*B,a[13]=(r*R-t*I+h*F)*B,a[14]=(A*v-u*S-_*b)*B,a[15]=(c*S-m*v+l*b)*B,a):null}},{}],99:[function(f,M,T){var e=f("./identity");M.exports=a;function a(n,r,t,h){var s,o,y,d,p,c,m,l,x,u,A=r[0],_=r[1],g=r[2],b=h[0],v=h[1],k=h[2],S=t[0],E=t[1],C=t[2];return Math.abs(A-S)<1e-6&&Math.abs(_-E)<1e-6&&Math.abs(g-C)<1e-6?e(n):(m=A-S,l=_-E,x=g-C,u=1/Math.sqrt(m*m+l*l+x*x),m*=u,l*=u,x*=u,s=v*x-k*l,o=k*m-b*x,y=b*l-v*m,u=Math.sqrt(s*s+o*o+y*y),u?(u=1/u,s*=u,o*=u,y*=u):(s=0,o=0,y=0),d=l*y-x*o,p=x*s-m*y,c=m*o-l*s,u=Math.sqrt(d*d+p*p+c*c),u?(u=1/u,d*=u,p*=u,c*=u):(d=0,p=0,c=0),n[0]=s,n[1]=d,n[2]=m,n[3]=0,n[4]=o,n[5]=p,n[6]=l,n[7]=0,n[8]=y,n[9]=c,n[10]=x,n[11]=0,n[12]=-(s*A+o*_+y*g),n[13]=-(d*A+p*_+c*g),n[14]=-(m*A+l*_+x*g),n[15]=1,n)}},{"./identity":97}],100:[function(f,M,T){M.exports=e;function e(a,n,r){var t=n[0],h=n[1],s=n[2],o=n[3],y=n[4],d=n[5],p=n[6],c=n[7],m=n[8],l=n[9],x=n[10],u=n[11],A=n[12],_=n[13],g=n[14],b=n[15],v=r[0],k=r[1],S=r[2],E=r[3];return a[0]=v*t+k*y+S*m+E*A,a[1]=v*h+k*d+S*l+E*_,a[2]=v*s+k*p+S*x+E*g,a[3]=v*o+k*c+S*u+E*b,v=r[4],k=r[5],S=r[6],E=r[7],a[4]=v*t+k*y+S*m+E*A,a[5]=v*h+k*d+S*l+E*_,a[6]=v*s+k*p+S*x+E*g,a[7]=v*o+k*c+S*u+E*b,v=r[8],k=r[9],S=r[10],E=r[11],a[8]=v*t+k*y+S*m+E*A,a[9]=v*h+k*d+S*l+E*_,a[10]=v*s+k*p+S*x+E*g,a[11]=v*o+k*c+S*u+E*b,v=r[12],k=r[13],S=r[14],E=r[15],a[12]=v*t+k*y+S*m+E*A,a[13]=v*h+k*d+S*l+E*_,a[14]=v*s+k*p+S*x+E*g,a[15]=v*o+k*c+S*u+E*b,a}},{}],101:[function(f,M,T){M.exports=e;function e(a,n,r,t,h,s,o){var y=1/(n-r),d=1/(t-h),p=1/(s-o);return a[0]=-2*y,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*d,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*p,a[11]=0,a[12]=(n+r)*y,a[13]=(h+t)*d,a[14]=(o+s)*p,a[15]=1,a}},{}],102:[function(f,M,T){M.exports=e;function e(a,n,r,t,h){var s=1/Math.tan(n/2),o=1/(t-h);return a[0]=s/r,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=s,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=(h+t)*o,a[11]=-1,a[12]=0,a[13]=0,a[14]=2*h*t*o,a[15]=0,a}},{}],103:[function(f,M,T){M.exports=e;function e(a,n,r,t){var h=t[0],s=t[1],o=t[2],y=Math.sqrt(h*h+s*s+o*o),d,p,c,m,l,x,u,A,_,g,b,v,k,S,E,C,F,I,D,R,O,z,B,G;return Math.abs(y)<1e-6?null:(y=1/y,h*=y,s*=y,o*=y,d=Math.sin(r),p=Math.cos(r),c=1-p,m=n[0],l=n[1],x=n[2],u=n[3],A=n[4],_=n[5],g=n[6],b=n[7],v=n[8],k=n[9],S=n[10],E=n[11],C=h*h*c+p,F=s*h*c+o*d,I=o*h*c-s*d,D=h*s*c-o*d,R=s*s*c+p,O=o*s*c+h*d,z=h*o*c+s*d,B=s*o*c-h*d,G=o*o*c+p,a[0]=m*C+A*F+v*I,a[1]=l*C+_*F+k*I,a[2]=x*C+g*F+S*I,a[3]=u*C+b*F+E*I,a[4]=m*D+A*R+v*O,a[5]=l*D+_*R+k*O,a[6]=x*D+g*R+S*O,a[7]=u*D+b*R+E*O,a[8]=m*z+A*B+v*G,a[9]=l*z+_*B+k*G,a[10]=x*z+g*B+S*G,a[11]=u*z+b*B+E*G,n!==a&&(a[12]=n[12],a[13]=n[13],a[14]=n[14],a[15]=n[15]),a)}},{}],104:[function(f,M,T){M.exports=e;function e(a,n,r){var t=Math.sin(r),h=Math.cos(r),s=n[4],o=n[5],y=n[6],d=n[7],p=n[8],c=n[9],m=n[10],l=n[11];return n!==a&&(a[0]=n[0],a[1]=n[1],a[2]=n[2],a[3]=n[3],a[12]=n[12],a[13]=n[13],a[14]=n[14],a[15]=n[15]),a[4]=s*h+p*t,a[5]=o*h+c*t,a[6]=y*h+m*t,a[7]=d*h+l*t,a[8]=p*h-s*t,a[9]=c*h-o*t,a[10]=m*h-y*t,a[11]=l*h-d*t,a}},{}],105:[function(f,M,T){M.exports=e;function e(a,n,r){var t=Math.sin(r),h=Math.cos(r),s=n[0],o=n[1],y=n[2],d=n[3],p=n[8],c=n[9],m=n[10],l=n[11];return n!==a&&(a[4]=n[4],a[5]=n[5],a[6]=n[6],a[7]=n[7],a[12]=n[12],a[13]=n[13],a[14]=n[14],a[15]=n[15]),a[0]=s*h-p*t,a[1]=o*h-c*t,a[2]=y*h-m*t,a[3]=d*h-l*t,a[8]=s*t+p*h,a[9]=o*t+c*h,a[10]=y*t+m*h,a[11]=d*t+l*h,a}},{}],106:[function(f,M,T){M.exports=e;function e(a,n,r){var t=Math.sin(r),h=Math.cos(r),s=n[0],o=n[1],y=n[2],d=n[3],p=n[4],c=n[5],m=n[6],l=n[7];return n!==a&&(a[8]=n[8],a[9]=n[9],a[10]=n[10],a[11]=n[11],a[12]=n[12],a[13]=n[13],a[14]=n[14],a[15]=n[15]),a[0]=s*h+p*t,a[1]=o*h+c*t,a[2]=y*h+m*t,a[3]=d*h+l*t,a[4]=p*h-s*t,a[5]=c*h-o*t,a[6]=m*h-y*t,a[7]=l*h-d*t,a}},{}],107:[function(f,M,T){M.exports=e;function e(a,n,r){var t=r[0],h=r[1],s=r[2];return a[0]=n[0]*t,a[1]=n[1]*t,a[2]=n[2]*t,a[3]=n[3]*t,a[4]=n[4]*h,a[5]=n[5]*h,a[6]=n[6]*h,a[7]=n[7]*h,a[8]=n[8]*s,a[9]=n[9]*s,a[10]=n[10]*s,a[11]=n[11]*s,a[12]=n[12],a[13]=n[13],a[14]=n[14],a[15]=n[15],a}},{}],108:[function(f,M,T){M.exports=e;function e(a,n,r){var t=r[0],h=r[1],s=r[2],o,y,d,p,c,m,l,x,u,A,_,g;return n===a?(a[12]=n[0]*t+n[4]*h+n[8]*s+n[12],a[13]=n[1]*t+n[5]*h+n[9]*s+n[13],a[14]=n[2]*t+n[6]*h+n[10]*s+n[14],a[15]=n[3]*t+n[7]*h+n[11]*s+n[15]):(o=n[0],y=n[1],d=n[2],p=n[3],c=n[4],m=n[5],l=n[6],x=n[7],u=n[8],A=n[9],_=n[10],g=n[11],a[0]=o,a[1]=y,a[2]=d,a[3]=p,a[4]=c,a[5]=m,a[6]=l,a[7]=x,a[8]=u,a[9]=A,a[10]=_,a[11]=g,a[12]=o*t+c*h+u*s+n[12],a[13]=y*t+m*h+A*s+n[13],a[14]=d*t+l*h+_*s+n[14],a[15]=p*t+x*h+g*s+n[15]),a}},{}],109:[function(f,M,T){M.exports=e;function e(a,n){if(a===n){var r=n[1],t=n[2],h=n[3],s=n[6],o=n[7],y=n[11];a[1]=n[4],a[2]=n[8],a[3]=n[12],a[4]=r,a[6]=n[9],a[7]=n[13],a[8]=t,a[9]=s,a[11]=n[14],a[12]=h,a[13]=o,a[14]=y}else a[0]=n[0],a[1]=n[4],a[2]=n[8],a[3]=n[12],a[4]=n[1],a[5]=n[5],a[6]=n[9],a[7]=n[13],a[8]=n[2],a[9]=n[6],a[10]=n[10],a[11]=n[14],a[12]=n[3],a[13]=n[7],a[14]=n[11],a[15]=n[15];return a}},{}],110:[function(f,M,T){var e=f("barycentric"),a=f("polytope-closest-point/lib/closest_point_2d.js");M.exports=s;function n(o,y){for(var d=[0,0,0,0],p=0;p<4;++p)for(var c=0;c<4;++c)d[c]+=o[4*p+c]*y[p];return d}function r(o,y,d,p,c){for(var m=n(p,n(d,n(y,[o[0],o[1],o[2],1]))),l=0;l<3;++l)m[l]/=m[3];return[.5*c[0]*(1+m[0]),.5*c[1]*(1-m[1])]}function t(o,y){if(o.length===2){for(var d=0,p=0,c=0;c<2;++c)d+=Math.pow(y[c]-o[0][c],2),p+=Math.pow(y[c]-o[1][c],2);return d=Math.sqrt(d),p=Math.sqrt(p),d+p<1e-6?[1,0]:[p/(d+p),d/(p+d)]}else if(o.length===3){var m=[0,0];return a(o[0],o[1],o[2],y,m),e(o,m)}return[]}function h(o,y){for(var d=[0,0,0],p=0;p<o.length;++p)for(var c=o[p],m=y[p],l=0;l<3;++l)d[l]+=m*c[l];return d}function s(o,y,d,p,c,m){if(o.length===1)return[0,o[0].slice()];for(var l=new Array(o.length),x=0;x<o.length;++x)l[x]=r(o[x],d,p,c,m);for(var u=0,A=1/0,x=0;x<l.length;++x){for(var _=0,g=0;g<2;++g)_+=Math.pow(l[x][g]-y[g],2);_<A&&(A=_,u=x)}for(var b=t(l,y),v=0,x=0;x<3;++x){if(b[x]<-.001||b[x]>1.0001)return null;v+=b[x]}return Math.abs(v-1)>.001?null:[u,h(o,b),b]}},{barycentric:14,"polytope-closest-point/lib/closest_point_2d.js":270}],111:[function(f,M,T){var e=f("glslify"),a=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, normal;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model
           , view
           , projection
           , inverseModel;
uniform vec3 eyePosition
           , lightPosition;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

vec4 project(vec3 p) {
  return projection * view * model * vec4(p, 1.0);
}

void main() {
  gl_Position      = project(position);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * vec4(position , 1.0);
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  f_color          = color;
  f_data           = position;
  f_uv             = uv;
}
`]),n=e([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness
            , fresnel
            , kambient
            , kdiffuse
            , kspecular;
uniform sampler2D texture;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (f_color.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], f_data)
  ) discard;

  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d

  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * f_color.a;
}
`]),r=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model, view, projection;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
  f_color = color;
  f_data  = position;
  f_uv    = uv;
}`]),t=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;

  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),h=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;
attribute float pointSize;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);
  } else {
    gl_Position = projection * view * model * vec4(position, 1.0);
  }
  gl_PointSize = pointSize;
  f_color = color;
  f_uv = uv;
}`]),s=e([`precision highp float;
#define GLSLIFY 1

uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);
  if(dot(pointR, pointR) > 0.25) {
    discard;
  }
  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),o=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 id;

uniform mat4 model, view, projection;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
  f_id        = id;
  f_position  = position;
}`]),y=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]),d=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3  position;
attribute float pointSize;
attribute vec4  id;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);
  } else {
    gl_Position  = projection * view * model * vec4(position, 1.0);
    gl_PointSize = pointSize;
  }
  f_id         = id;
  f_position   = position;
}`]),p=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
}`]),c=e([`precision highp float;
#define GLSLIFY 1

uniform vec3 contourColor;

void main() {
  gl_FragColor = vec4(contourColor, 1.0);
}
`]);T.meshShader={vertex:a,fragment:n,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},T.wireShader={vertex:r,fragment:t,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},T.pointShader={vertex:h,fragment:s,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},T.pickShader={vertex:o,fragment:y,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},T.pointPickShader={vertex:d,fragment:y,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},T.contourShader={vertex:p,fragment:c,attributes:[{name:"position",type:"vec3"}]}},{glslify:231}],112:[function(f,M,T){var e=1e-6,a=1e-6,n=f("gl-shader"),r=f("gl-buffer"),t=f("gl-vao"),h=f("gl-texture2d"),s=f("normals"),o=f("gl-mat4/multiply"),y=f("gl-mat4/invert"),d=f("ndarray"),p=f("colormap"),c=f("simplicial-complex-contour"),m=f("typedarray-pool"),l=f("./lib/shaders"),x=f("./lib/closest-point"),u=l.meshShader,A=l.wireShader,_=l.pointShader,g=l.pickShader,b=l.pointPickShader,v=l.contourShader,k=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function S(X,j,re,ue,K,te,Y,H,ee,ne,Z,q,ie,se,ae,oe,be,ce,de,ye,ge,me,Se,Le,Oe,we,Ce){this.gl=X,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=j,this.dirty=!0,this.triShader=re,this.lineShader=ue,this.pointShader=K,this.pickShader=te,this.pointPickShader=Y,this.contourShader=H,this.trianglePositions=ee,this.triangleColors=Z,this.triangleNormals=ie,this.triangleUVs=q,this.triangleIds=ne,this.triangleVAO=se,this.triangleCount=0,this.lineWidth=1,this.edgePositions=ae,this.edgeColors=be,this.edgeUVs=ce,this.edgeIds=oe,this.edgeVAO=de,this.edgeCount=0,this.pointPositions=ye,this.pointColors=me,this.pointUVs=Se,this.pointSizes=Le,this.pointIds=ge,this.pointVAO=Oe,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=we,this.contourVAO=Ce,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=k,this._view=k,this._projection=k,this._resolution=[1,1]}var E=S.prototype;E.isOpaque=function(){return!this.hasAlpha},E.isTransparent=function(){return this.hasAlpha},E.pickSlots=1,E.setPickBase=function(X){this.pickId=X};function C(X,j){if(!j||!j.length)return 1;for(var re=0;re<j.length;++re){if(j.length<2)return 1;if(j[re][0]===X)return j[re][1];if(j[re][0]>X&&re>0){var ue=(j[re][0]-X)/(j[re][0]-j[re-1][0]);return j[re][1]*(1-ue)+ue*j[re-1][1]}}return 1}function F(X,j){for(var re=p({colormap:X,nshades:256,format:"rgba"}),ue=new Uint8Array(256*4),K=0;K<256;++K){for(var te=re[K],Y=0;Y<3;++Y)ue[4*K+Y]=te[Y];j?ue[4*K+3]=255*C(K/255,j):ue[4*K+3]=255*te[3]}return d(ue,[256,256,4],[4,0,1])}function I(X){for(var j=X.length,re=new Array(j),ue=0;ue<j;++ue)re[ue]=X[ue][2];return re}E.highlight=function(X){if(!X||!this.contourEnable){this.contourCount=0;return}for(var j=c(this.cells,this.intensity,X.intensity),re=j.cells,ue=j.vertexIds,K=j.vertexWeights,te=re.length,Y=m.mallocFloat32(2*3*te),H=0,ee=0;ee<te;++ee)for(var ne=re[ee],Z=0;Z<2;++Z){var q=ne[0];ne.length===2&&(q=ne[Z]);for(var ie=ue[q][0],se=ue[q][1],ae=K[q],oe=1-ae,be=this.positions[ie],ce=this.positions[se],de=0;de<3;++de)Y[H++]=ae*be[de]+oe*ce[de]}this.contourCount=H/3|0,this.contourPositions.update(Y.subarray(0,H)),m.free(Y)},E.update=function(X){X=X||{};var j=this.gl;this.dirty=!0,"contourEnable"in X&&(this.contourEnable=X.contourEnable),"contourColor"in X&&(this.contourColor=X.contourColor),"lineWidth"in X&&(this.lineWidth=X.lineWidth),"lightPosition"in X&&(this.lightPosition=X.lightPosition),this.hasAlpha=!1,"opacity"in X&&(this.opacity=X.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in X&&(this.opacityscale=X.opacityscale,this.hasAlpha=!0),"ambient"in X&&(this.ambientLight=X.ambient),"diffuse"in X&&(this.diffuseLight=X.diffuse),"specular"in X&&(this.specularLight=X.specular),"roughness"in X&&(this.roughness=X.roughness),"fresnel"in X&&(this.fresnel=X.fresnel),X.texture?(this.texture.dispose(),this.texture=h(j,X.texture)):X.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=j.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=j.LINEAR,this.texture.setPixels(F(X.colormap,this.opacityscale)),this.texture.generateMipmap());var re=X.cells,ue=X.positions;if(!ue||!re)return;var K=[],te=[],Y=[],H=[],ee=[],ne=[],Z=[],q=[],ie=[],se=[],ae=[],oe=[],be=[],ce=[];this.cells=re,this.positions=ue;var de=X.vertexNormals,ye=X.cellNormals,ge=X.vertexNormalsEpsilon===void 0?e:X.vertexNormalsEpsilon,me=X.faceNormalsEpsilon===void 0?a:X.faceNormalsEpsilon;X.useFacetNormals&&!ye&&(ye=s.faceNormals(re,ue,me)),!ye&&!de&&(de=s.vertexNormals(re,ue,ge));var Se=X.vertexColors,Le=X.cellColors,Oe=X.meshColor||[1,1,1,1],we=X.vertexUVs,Ce=X.vertexIntensity,Ke=X.cellUVs,Ye=X.cellIntensity,Fe=1/0,Re=-1/0;if(!we&&!Ke)if(Ce)if(X.vertexIntensityBounds)Fe=+X.vertexIntensityBounds[0],Re=+X.vertexIntensityBounds[1];else for(var je=0;je<Ce.length;++je){var xt=Ce[je];Fe=Math.min(Fe,xt),Re=Math.max(Re,xt)}else if(Ye)if(X.cellIntensityBounds)Fe=+X.cellIntensityBounds[0],Re=+X.cellIntensityBounds[1];else for(var je=0;je<Ye.length;++je){var xt=Ye[je];Fe=Math.min(Fe,xt),Re=Math.max(Re,xt)}else for(var je=0;je<ue.length;++je){var xt=ue[je][2];Fe=Math.min(Fe,xt),Re=Math.max(Re,xt)}Ce?this.intensity=Ce:Ye?this.intensity=Ye:this.intensity=I(ue),this.pickVertex=!(Ye||Le);var Nt=X.pointSizes,tr=X.pointSize||1;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(var je=0;je<ue.length;++je)for(var Ht=ue[je],Pt=0;Pt<3;++Pt)isNaN(Ht[Pt])||!isFinite(Ht[Pt])||(this.bounds[0][Pt]=Math.min(this.bounds[0][Pt],Ht[Pt]),this.bounds[1][Pt]=Math.max(this.bounds[1][Pt],Ht[Pt]));var $t=0,Ut=0,Lt=0;e:for(var je=0;je<re.length;++je){var We=re[je];switch(We.length){case 1:for(var ot=We[0],Ht=ue[ot],Pt=0;Pt<3;++Pt)if(isNaN(Ht[Pt])||!isFinite(Ht[Pt]))continue e;se.push(Ht[0],Ht[1],Ht[2]);var Ge;Se?Ge=Se[ot]:Le?Ge=Le[je]:Ge=Oe,this.opacityscale&&Ce?te.push(Ge[0],Ge[1],Ge[2],this.opacity*C((Ce[ot]-Fe)/(Re-Fe),this.opacityscale)):Ge.length===3?ae.push(Ge[0],Ge[1],Ge[2],this.opacity):(ae.push(Ge[0],Ge[1],Ge[2],Ge[3]*this.opacity),Ge[3]<1&&(this.hasAlpha=!0));var Me;we?Me=we[ot]:Ce?Me=[(Ce[ot]-Fe)/(Re-Fe),0]:Ke?Me=Ke[je]:Ye?Me=[(Ye[je]-Fe)/(Re-Fe),0]:Me=[(Ht[2]-Fe)/(Re-Fe),0],oe.push(Me[0],Me[1]),Nt?be.push(Nt[ot]):be.push(tr),ce.push(je),Lt+=1;break;case 2:for(var Pt=0;Pt<2;++Pt)for(var ot=We[Pt],Ht=ue[ot],Ve=0;Ve<3;++Ve)if(isNaN(Ht[Ve])||!isFinite(Ht[Ve]))continue e;for(var Pt=0;Pt<2;++Pt){var ot=We[Pt],Ht=ue[ot];ne.push(Ht[0],Ht[1],Ht[2]);var Ge;Se?Ge=Se[ot]:Le?Ge=Le[je]:Ge=Oe,this.opacityscale&&Ce?te.push(Ge[0],Ge[1],Ge[2],this.opacity*C((Ce[ot]-Fe)/(Re-Fe),this.opacityscale)):Ge.length===3?Z.push(Ge[0],Ge[1],Ge[2],this.opacity):(Z.push(Ge[0],Ge[1],Ge[2],Ge[3]*this.opacity),Ge[3]<1&&(this.hasAlpha=!0));var Me;we?Me=we[ot]:Ce?Me=[(Ce[ot]-Fe)/(Re-Fe),0]:Ke?Me=Ke[je]:Ye?Me=[(Ye[je]-Fe)/(Re-Fe),0]:Me=[(Ht[2]-Fe)/(Re-Fe),0],q.push(Me[0],Me[1]),ie.push(je)}Ut+=1;break;case 3:for(var Pt=0;Pt<3;++Pt)for(var ot=We[Pt],Ht=ue[ot],Ve=0;Ve<3;++Ve)if(isNaN(Ht[Ve])||!isFinite(Ht[Ve]))continue e;for(var Pt=0;Pt<3;++Pt){var ot=We[2-Pt],Ht=ue[ot];K.push(Ht[0],Ht[1],Ht[2]);var Ge;Se?Ge=Se[ot]:Le?Ge=Le[je]:Ge=Oe,Ge?this.opacityscale&&Ce?te.push(Ge[0],Ge[1],Ge[2],this.opacity*C((Ce[ot]-Fe)/(Re-Fe),this.opacityscale)):Ge.length===3?te.push(Ge[0],Ge[1],Ge[2],this.opacity):(te.push(Ge[0],Ge[1],Ge[2],Ge[3]*this.opacity),Ge[3]<1&&(this.hasAlpha=!0)):te.push(.5,.5,.5,1);var Me;we?Me=we[ot]:Ce?Me=[(Ce[ot]-Fe)/(Re-Fe),0]:Ke?Me=Ke[je]:Ye?Me=[(Ye[je]-Fe)/(Re-Fe),0]:Me=[(Ht[2]-Fe)/(Re-Fe),0],H.push(Me[0],Me[1]);var Qe;de?Qe=de[ot]:Qe=ye[je],Y.push(Qe[0],Qe[1],Qe[2]),ee.push(je)}$t+=1;break}}this.pointCount=Lt,this.edgeCount=Ut,this.triangleCount=$t,this.pointPositions.update(se),this.pointColors.update(ae),this.pointUVs.update(oe),this.pointSizes.update(be),this.pointIds.update(new Uint32Array(ce)),this.edgePositions.update(ne),this.edgeColors.update(Z),this.edgeUVs.update(q),this.edgeIds.update(new Uint32Array(ie)),this.trianglePositions.update(K),this.triangleColors.update(te),this.triangleUVs.update(H),this.triangleNormals.update(Y),this.triangleIds.update(new Uint32Array(ee))},E.drawTransparent=E.draw=function(X){X=X||{};for(var j=this.gl,re=X.model||k,ue=X.view||k,K=X.projection||k,te=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],Y=0;Y<3;++Y)te[0][Y]=Math.max(te[0][Y],this.clipBounds[0][Y]),te[1][Y]=Math.min(te[1][Y],this.clipBounds[1][Y]);var H={model:re,view:ue,projection:K,inverseModel:k.slice(),clipBounds:te,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};H.inverseModel=y(H.inverseModel,H.model),j.disable(j.CULL_FACE),this.texture.bind(0);var ee=new Array(16);o(ee,H.view,H.model),o(ee,H.projection,ee),y(ee,ee);for(var Y=0;Y<3;++Y)H.eyePosition[Y]=ee[12+Y]/ee[15];for(var ne=ee[15],Y=0;Y<3;++Y)ne+=this.lightPosition[Y]*ee[4*Y+3];for(var Y=0;Y<3;++Y){for(var Z=ee[12+Y],q=0;q<3;++q)Z+=ee[4*q+Y]*this.lightPosition[q];H.lightPosition[Y]=Z/ne}if(this.triangleCount>0){var ie=this.triShader;ie.bind(),ie.uniforms=H,this.triangleVAO.bind(),j.drawArrays(j.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()}if(this.edgeCount>0&&this.lineWidth>0){var ie=this.lineShader;ie.bind(),ie.uniforms=H,this.edgeVAO.bind(),j.lineWidth(this.lineWidth*this.pixelRatio),j.drawArrays(j.LINES,0,this.edgeCount*2),this.edgeVAO.unbind()}if(this.pointCount>0){var ie=this.pointShader;ie.bind(),ie.uniforms=H,this.pointVAO.bind(),j.drawArrays(j.POINTS,0,this.pointCount),this.pointVAO.unbind()}if(this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0){var ie=this.contourShader;ie.bind(),ie.uniforms=H,this.contourVAO.bind(),j.drawArrays(j.LINES,0,this.contourCount),this.contourVAO.unbind()}},E.drawPick=function(X){X=X||{};for(var j=this.gl,re=X.model||k,ue=X.view||k,K=X.projection||k,te=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],Y=0;Y<3;++Y)te[0][Y]=Math.max(te[0][Y],this.clipBounds[0][Y]),te[1][Y]=Math.min(te[1][Y],this.clipBounds[1][Y]);this._model=[].slice.call(re),this._view=[].slice.call(ue),this._projection=[].slice.call(K),this._resolution=[j.drawingBufferWidth,j.drawingBufferHeight];var H={model:re,view:ue,projection:K,clipBounds:te,pickId:this.pickId/255},ee=this.pickShader;if(ee.bind(),ee.uniforms=H,this.triangleCount>0&&(this.triangleVAO.bind(),j.drawArrays(j.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),j.lineWidth(this.lineWidth*this.pixelRatio),j.drawArrays(j.LINES,0,this.edgeCount*2),this.edgeVAO.unbind()),this.pointCount>0){var ee=this.pointPickShader;ee.bind(),ee.uniforms=H,this.pointVAO.bind(),j.drawArrays(j.POINTS,0,this.pointCount),this.pointVAO.unbind()}},E.pick=function(X){if(!X||X.id!==this.pickId)return null;for(var j=X.value[0]+256*X.value[1]+65536*X.value[2],re=this.cells[j],ue=this.positions,K=new Array(re.length),te=0;te<re.length;++te)K[te]=ue[re[te]];var Y=X.coord[0],H=X.coord[1];if(!this.pickVertex){var ee=this.positions[re[0]],ne=this.positions[re[1]],Z=this.positions[re[2]],q=[(ee[0]+ne[0]+Z[0])/3,(ee[1]+ne[1]+Z[1])/3,(ee[2]+ne[2]+Z[2])/3];return{_cellCenter:!0,position:[Y,H],index:j,cell:re,cellId:j,intensity:this.intensity[j],dataCoordinate:q}}var ie=x(K,[Y*this.pixelRatio,this._resolution[1]-H*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!ie)return null;for(var se=ie[2],ae=0,te=0;te<re.length;++te)ae+=se[te]*this.intensity[re[te]];return{position:ie[1],index:re[ie[0]],cell:re,cellId:j,intensity:ae,dataCoordinate:this.positions[re[ie[0]]]}},E.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()};function D(X){var j=n(X,u.vertex,u.fragment);return j.attributes.position.location=0,j.attributes.color.location=2,j.attributes.uv.location=3,j.attributes.normal.location=4,j}function R(X){var j=n(X,A.vertex,A.fragment);return j.attributes.position.location=0,j.attributes.color.location=2,j.attributes.uv.location=3,j}function O(X){var j=n(X,_.vertex,_.fragment);return j.attributes.position.location=0,j.attributes.color.location=2,j.attributes.uv.location=3,j.attributes.pointSize.location=4,j}function z(X){var j=n(X,g.vertex,g.fragment);return j.attributes.position.location=0,j.attributes.id.location=1,j}function B(X){var j=n(X,b.vertex,b.fragment);return j.attributes.position.location=0,j.attributes.id.location=1,j.attributes.pointSize.location=4,j}function G(X){var j=n(X,v.vertex,v.fragment);return j.attributes.position.location=0,j}function Q(X,j){arguments.length===1&&(j=X,X=j.gl);var re=X.getExtension("OES_standard_derivatives")||X.getExtension("MOZ_OES_standard_derivatives")||X.getExtension("WEBKIT_OES_standard_derivatives");if(!re)throw new Error("derivatives not supported");var ue=D(X),K=R(X),te=O(X),Y=z(X),H=B(X),ee=G(X),ne=h(X,d(new Uint8Array([255,255,255,255]),[1,1,4]));ne.generateMipmap(),ne.minFilter=X.LINEAR_MIPMAP_LINEAR,ne.magFilter=X.LINEAR;var Z=r(X),q=r(X),ie=r(X),se=r(X),ae=r(X),oe=t(X,[{buffer:Z,type:X.FLOAT,size:3},{buffer:ae,type:X.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:q,type:X.FLOAT,size:4},{buffer:ie,type:X.FLOAT,size:2},{buffer:se,type:X.FLOAT,size:3}]),be=r(X),ce=r(X),de=r(X),ye=r(X),ge=t(X,[{buffer:be,type:X.FLOAT,size:3},{buffer:ye,type:X.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:ce,type:X.FLOAT,size:4},{buffer:de,type:X.FLOAT,size:2}]),me=r(X),Se=r(X),Le=r(X),Oe=r(X),we=r(X),Ce=t(X,[{buffer:me,type:X.FLOAT,size:3},{buffer:we,type:X.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:Se,type:X.FLOAT,size:4},{buffer:Le,type:X.FLOAT,size:2},{buffer:Oe,type:X.FLOAT,size:1}]),Ke=r(X),Ye=t(X,[{buffer:Ke,type:X.FLOAT,size:3}]),Fe=new S(X,ne,ue,K,te,Y,H,ee,Z,ae,q,ie,se,oe,be,ye,ce,de,ge,me,we,Se,Le,Oe,Ce,Ke,Ye);return Fe.update(j),Fe}M.exports=Q},{"./lib/closest-point":110,"./lib/shaders":111,colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-shader":132,"gl-texture2d":146,"gl-vao":150,ndarray:259,normals:261,"simplicial-complex-contour":291,"typedarray-pool":308}],113:[function(f,M,T){M.exports=h;var e=f("gl-buffer"),a=f("gl-shader"),n=f("./shaders");function r(s,o,y){this.plot=s,this.vbo=o,this.shader=y}var t=r.prototype;t.bind=function(){var s=this.shader;this.vbo.bind(),this.shader.bind(),s.attributes.coord.pointer(),s.uniforms.screenBox=this.plot.screenBox},t.drawBox=function(){var s=[0,0],o=[0,0];return function(y,d,p,c,m){var l=this.plot,x=this.shader,u=l.gl;s[0]=y,s[1]=d,o[0]=p,o[1]=c,x.uniforms.lo=s,x.uniforms.hi=o,x.uniforms.color=m,u.drawArrays(u.TRIANGLE_STRIP,0,4)}}(),t.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function h(s){var o=s.gl,y=e(o,[0,0,0,1,1,0,1,1]),d=a(o,n.boxVert,n.lineFrag);return new r(s,y,d)}},{"./shaders":116,"gl-buffer":78,"gl-shader":132}],114:[function(f,M,T){M.exports=o;var e=f("gl-buffer"),a=f("gl-shader"),n=f("binary-search-bounds"),r=f("./shaders");function t(y,d,p,c){this.plot=y,this.vbo=d,this.shader=p,this.tickShader=c,this.ticks=[[],[]]}function h(y,d){return y-d}var s=t.prototype;s.draw=function(){var y=[0,0],d=[0,0],p=[0,0];return function(){for(var c=this.plot,m=this.vbo,l=this.shader,x=this.ticks,u=c.gl,A=c._tickBounds,_=c.dataBox,g=c.viewBox,b=c.gridLineWidth,v=c.gridLineColor,k=c.gridLineEnable,S=c.pixelRatio,E=0;E<2;++E){var C=A[E],F=A[E+2],I=F-C,D=.5*(_[E+2]+_[E]),R=_[E+2]-_[E];d[E]=2*I/R,y[E]=2*(C-D)/R}l.bind(),m.bind(),l.attributes.dataCoord.pointer(),l.uniforms.dataShift=y,l.uniforms.dataScale=d;for(var O=0,E=0;E<2;++E){p[0]=p[1]=0,p[E]=1,l.uniforms.dataAxis=p,l.uniforms.lineWidth=b[E]/(g[E+2]-g[E])*S,l.uniforms.color=v[E];var z=x[E].length*6;k[E]&&z&&u.drawArrays(u.TRIANGLES,O,z),O+=z}}}(),s.drawTickMarks=function(){var y=[0,0],d=[0,0],p=[1,0],c=[0,1],m=[0,0],l=[0,0];return function(){for(var x=this.plot,u=this.vbo,A=this.tickShader,_=this.ticks,g=x.gl,b=x._tickBounds,v=x.dataBox,k=x.viewBox,S=x.pixelRatio,E=x.screenBox,C=E[2]-E[0],F=E[3]-E[1],I=k[2]-k[0],D=k[3]-k[1],R=0;R<2;++R){var O=b[R],z=b[R+2],B=z-O,G=.5*(v[R+2]+v[R]),Q=v[R+2]-v[R];d[R]=2*B/Q,y[R]=2*(O-G)/Q}d[0]*=I/C,y[0]*=I/C,d[1]*=D/F,y[1]*=D/F,A.bind(),u.bind(),A.attributes.dataCoord.pointer();var X=A.uniforms;X.dataShift=y,X.dataScale=d;var j=x.tickMarkLength,re=x.tickMarkWidth,ue=x.tickMarkColor,K=0,te=_[0].length*6,Y=Math.min(n.ge(_[0],(v[0]-b[0])/(b[2]-b[0]),h),_[0].length),H=Math.min(n.gt(_[0],(v[2]-b[0])/(b[2]-b[0]),h),_[0].length),ee=K+6*Y,ne=6*Math.max(0,H-Y),Z=Math.min(n.ge(_[1],(v[1]-b[1])/(b[3]-b[1]),h),_[1].length),q=Math.min(n.gt(_[1],(v[3]-b[1])/(b[3]-b[1]),h),_[1].length),ie=te+6*Z,se=6*Math.max(0,q-Z);m[0]=2*(k[0]-j[1])/C-1,m[1]=(k[3]+k[1])/F-1,l[0]=j[1]*S/C,l[1]=re[1]*S/F,se&&(X.color=ue[1],X.tickScale=l,X.dataAxis=c,X.screenOffset=m,g.drawArrays(g.TRIANGLES,ie,se)),m[0]=(k[2]+k[0])/C-1,m[1]=2*(k[1]-j[0])/F-1,l[0]=re[0]*S/C,l[1]=j[0]*S/F,ne&&(X.color=ue[0],X.tickScale=l,X.dataAxis=p,X.screenOffset=m,g.drawArrays(g.TRIANGLES,ee,ne)),m[0]=2*(k[2]+j[3])/C-1,m[1]=(k[3]+k[1])/F-1,l[0]=j[3]*S/C,l[1]=re[3]*S/F,se&&(X.color=ue[3],X.tickScale=l,X.dataAxis=c,X.screenOffset=m,g.drawArrays(g.TRIANGLES,ie,se)),m[0]=(k[2]+k[0])/C-1,m[1]=2*(k[3]+j[2])/F-1,l[0]=re[2]*S/C,l[1]=j[2]*S/F,ne&&(X.color=ue[2],X.tickScale=l,X.dataAxis=p,X.screenOffset=m,g.drawArrays(g.TRIANGLES,ee,ne))}}(),s.update=function(){var y=[1,1,-1,-1,1,-1],d=[1,-1,1,1,-1,-1];return function(p){var c=p.ticks,m=p.bounds,l=new Float32Array(6*3*(c[0].length+c[1].length));this.plot.zeroLineEnable;for(var x=0,u=[[],[]],A=0;A<2;++A)for(var _=u[A],g=c[A],b=m[A],v=m[A+2],k=0;k<g.length;++k){var S=(g[k].x-b)/(v-b);_.push(S);for(var E=0;E<6;++E)l[x++]=S,l[x++]=y[E],l[x++]=d[E]}this.ticks=u,this.vbo.update(l)}}(),s.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()};function o(y){var d=y.gl,p=e(d),c=a(d,r.gridVert,r.gridFrag),m=a(d,r.tickVert,r.gridFrag),l=new t(y,p,c,m);return l}},{"./shaders":116,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132}],115:[function(f,M,T){M.exports=h;var e=f("gl-buffer"),a=f("gl-shader"),n=f("./shaders");function r(s,o,y){this.plot=s,this.vbo=o,this.shader=y}var t=r.prototype;t.bind=function(){var s=this.shader;this.vbo.bind(),this.shader.bind(),s.attributes.coord.pointer(),s.uniforms.screenBox=this.plot.screenBox},t.drawLine=function(){var s=[0,0],o=[0,0];return function(y,d,p,c,m,l){var x=this.plot,u=this.shader,A=x.gl;s[0]=y,s[1]=d,o[0]=p,o[1]=c,u.uniforms.start=s,u.uniforms.end=o,u.uniforms.width=m*x.pixelRatio,u.uniforms.color=l,A.drawArrays(A.TRIANGLE_STRIP,0,4)}}(),t.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function h(s){var o=s.gl,y=e(o,[-1,-1,-1,1,1,-1,1,1]),d=a(o,n.lineVert,n.lineFrag),p=new r(s,y,d);return p}},{"./shaders":116,"gl-buffer":78,"gl-shader":132}],116:[function(f,M,T){var e=f("glslify"),a=e([`precision lowp float;
#define GLSLIFY 1
uniform vec4 color;
void main() {
  gl_FragColor = vec4(color.xyz * color.w, color.w);
}
`]);M.exports={lineVert:e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 start, end;
uniform float width;

vec2 perp(vec2 v) {
  return vec2(v.y, -v.x);
}

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  vec2 delta = normalize(perp(start - end));
  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));
  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);
}
`]),lineFrag:a,textVert:e([`#define GLSLIFY 1
attribute vec3 textCoordinate;

uniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;
uniform float angle;

void main() {
  float dataOffset  = textCoordinate.z;
  vec2 glyphOffset  = textCoordinate.xy;
  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));
  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +
    glyphMatrix * glyphOffset * textScale + screenOffset;
  gl_Position = vec4(screenCoordinate, 0, 1);
}
`]),textFrag:a,gridVert:e([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale;
uniform float lineWidth;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;
  gl_Position = vec4(pos, 0, 1);
}
`]),gridFrag:a,boxVert:e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 lo, hi;

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);
}
`]),tickVert:e([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);
}
`])}},{glslify:231}],117:[function(f,M,T){M.exports=o;var e=f("gl-buffer"),a=f("gl-shader"),n=f("text-cache"),r=f("binary-search-bounds"),t=f("./shaders");function h(y,d,p){this.plot=y,this.vbo=d,this.shader=p,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}var s=h.prototype;s.drawTicks=function(){var y=[0,0],d=[0,0],p=[0,0];return function(c){var m=this.plot,l=this.shader,x=this.tickX[c],u=this.tickOffset[c],A=m.gl,_=m.viewBox,g=m.dataBox,b=m.screenBox,v=m.pixelRatio,k=m.tickEnable,S=m.tickPad,E=m.tickColor,C=m.tickAngle,F=m.labelEnable,I=m.labelPad,D=m.labelColor,R=m.labelAngle,O=this.labelOffset[c],z=this.labelCount[c],B=r.lt(x,g[c]),G=r.le(x,g[c+2]);y[0]=y[1]=0,y[c]=1,d[c]=(_[2+c]+_[c])/(b[2+c]-b[c])-1;var Q=2/b[2+(c^1)]-b[c^1];d[c^1]=Q*_[c^1]-1,k[c]&&(d[c^1]-=Q*v*S[c],B<G&&u[G]>u[B]&&(l.uniforms.dataAxis=y,l.uniforms.screenOffset=d,l.uniforms.color=E[c],l.uniforms.angle=C[c],A.drawArrays(A.TRIANGLES,u[B],u[G]-u[B]))),F[c]&&z&&(d[c^1]-=Q*v*I[c],l.uniforms.dataAxis=p,l.uniforms.screenOffset=d,l.uniforms.color=D[c],l.uniforms.angle=R[c],A.drawArrays(A.TRIANGLES,O,z)),d[c^1]=Q*_[2+(c^1)]-1,k[c+2]&&(d[c^1]+=Q*v*S[c+2],B<G&&u[G]>u[B]&&(l.uniforms.dataAxis=y,l.uniforms.screenOffset=d,l.uniforms.color=E[c+2],l.uniforms.angle=C[c+2],A.drawArrays(A.TRIANGLES,u[B],u[G]-u[B]))),F[c+2]&&z&&(d[c^1]+=Q*v*I[c+2],l.uniforms.dataAxis=p,l.uniforms.screenOffset=d,l.uniforms.color=D[c+2],l.uniforms.angle=R[c+2],A.drawArrays(A.TRIANGLES,O,z))}}(),s.drawTitle=function(){var y=[0,0],d=[0,0];return function(){var p=this.plot,c=this.shader,m=p.gl,l=p.screenBox,x=p.titleCenter,u=p.titleAngle,A=p.titleColor,_=p.pixelRatio;if(!!this.titleCount){for(var g=0;g<2;++g)d[g]=2*(x[g]*_-l[g])/(l[2+g]-l[g])-1;c.bind(),c.uniforms.dataAxis=y,c.uniforms.screenOffset=d,c.uniforms.angle=u,c.uniforms.color=A,m.drawArrays(m.TRIANGLES,this.titleOffset,this.titleCount)}}}(),s.bind=function(){var y=[0,0],d=[0,0],p=[0,0];return function(){var c=this.plot,m=this.shader,l=c._tickBounds,x=c.dataBox,u=c.screenBox,A=c.viewBox;m.bind();for(var _=0;_<2;++_){var g=l[_],b=l[_+2],v=b-g,k=.5*(x[_+2]+x[_]),S=x[_+2]-x[_],E=A[_],C=A[_+2],F=C-E,I=u[_],D=u[_+2],R=D-I;d[_]=2*v/S*F/R,y[_]=2*(g-k)/S*F/R}p[1]=2*c.pixelRatio/(u[3]-u[1]),p[0]=p[1]*(u[3]-u[1])/(u[2]-u[0]),m.uniforms.dataScale=d,m.uniforms.dataShift=y,m.uniforms.textScale=p,this.vbo.bind(),m.attributes.textCoordinate.pointer()}}(),s.update=function(y){var d=[],p=y.ticks,c=y.bounds,m,l,x,u,A;for(A=0;A<2;++A){var _=[Math.floor(d.length/3)],g=[-1/0],b=p[A];for(m=0;m<b.length;++m){var v=b[m],k=v.x,S=v.text,E=v.font||"sans-serif";u=v.fontSize||12;for(var C=1/(c[A+2]-c[A]),F=c[A],I=S.split(`
`),D=0;D<I.length;D++)for(x=n(E,I[D]).data,l=0;l<x.length;l+=2)d.push(x[l]*u,-x[l+1]*u-D*u*1.2,(k-F)*C);_.push(Math.floor(d.length/3)),g.push(k)}this.tickOffset[A]=_,this.tickX[A]=g}for(A=0;A<2;++A){for(this.labelOffset[A]=Math.floor(d.length/3),x=n(y.labelFont[A],y.labels[A],{textAlign:"center"}).data,u=y.labelSize[A],m=0;m<x.length;m+=2)d.push(x[m]*u,-x[m+1]*u,0);this.labelCount[A]=Math.floor(d.length/3)-this.labelOffset[A]}for(this.titleOffset=Math.floor(d.length/3),x=n(y.titleFont,y.title).data,u=y.titleSize,m=0;m<x.length;m+=2)d.push(x[m]*u,-x[m+1]*u,0);this.titleCount=Math.floor(d.length/3)-this.titleOffset,this.vbo.update(d)},s.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function o(y){var d=y.gl,p=e(d),c=a(d,t.textVert,t.textFrag),m=new h(y,p,c);return m}},{"./shaders":116,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132,"text-cache":303}],118:[function(f,M,T){M.exports=d;var e=f("gl-select-static"),a=f("./lib/grid"),n=f("./lib/text"),r=f("./lib/line"),t=f("./lib/box");function h(p,c){this.gl=p,this.pickBuffer=c,this.screenBox=[0,0,p.drawingBufferWidth,p.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}var s=h.prototype;s.setDirty=function(){this.dirty=this.pickDirty=!0},s.setOverlayDirty=function(){this.dirty=!0},s.nextDepthValue=function(){return this._depthCounter++/65536},s.draw=function(){return function(){var p=this.gl,c=this.screenBox,m=this.viewBox,l=this.dataBox,x=this.pixelRatio,u=this.grid,A=this.line,_=this.text,g=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),!!this.dirty){if(this.dirty=!1,p.bindFramebuffer(p.FRAMEBUFFER,null),p.enable(p.SCISSOR_TEST),p.disable(p.DEPTH_TEST),p.depthFunc(p.LESS),p.depthMask(!1),p.enable(p.BLEND),p.blendEquation(p.FUNC_ADD,p.FUNC_ADD),p.blendFunc(p.ONE,p.ONE_MINUS_SRC_ALPHA),this.borderColor){p.scissor(c[0],c[1],c[2]-c[0],c[3]-c[1]);var b=this.borderColor;p.clearColor(b[0]*b[3],b[1]*b[3],b[2]*b[3],b[3]),p.clear(p.COLOR_BUFFER_BIT|p.DEPTH_BUFFER_BIT)}p.scissor(m[0],m[1],m[2]-m[0],m[3]-m[1]),p.viewport(m[0],m[1],m[2]-m[0],m[3]-m[1]);var v=this.backgroundColor;p.clearColor(v[0]*v[3],v[1]*v[3],v[2]*v[3],v[3]),p.clear(p.COLOR_BUFFER_BIT),u.draw();var k=this.zeroLineEnable,S=this.zeroLineColor,E=this.zeroLineWidth;if(k[0]||k[1]){A.bind();for(var C=0;C<2;++C)if(!(!k[C]||!(l[C]<=0&&l[C+2]>=0))){var F=c[C]-l[C]*(c[C+2]-c[C])/(l[C+2]-l[C]);C===0?A.drawLine(F,c[1],F,c[3],E[C],S[C]):A.drawLine(c[0],F,c[2],F,E[C],S[C])}}for(var C=0;C<g.length;++C)g[C].draw();p.viewport(c[0],c[1],c[2]-c[0],c[3]-c[1]),p.scissor(c[0],c[1],c[2]-c[0],c[3]-c[1]),this.grid.drawTickMarks(),A.bind();var I=this.borderLineEnable,D=this.borderLineWidth,R=this.borderLineColor;I[1]&&A.drawLine(m[0],m[1]-.5*D[1]*x,m[0],m[3]+.5*D[3]*x,D[1],R[1]),I[0]&&A.drawLine(m[0]-.5*D[0]*x,m[1],m[2]+.5*D[2]*x,m[1],D[0],R[0]),I[3]&&A.drawLine(m[2],m[1]-.5*D[1]*x,m[2],m[3]+.5*D[3]*x,D[3],R[3]),I[2]&&A.drawLine(m[0]-.5*D[0]*x,m[3],m[2]+.5*D[2]*x,m[3],D[2],R[2]),_.bind();for(var C=0;C<2;++C)_.drawTicks(C);this.titleEnable&&_.drawTitle();for(var O=this.overlays,C=0;C<O.length;++C)O[C].draw();p.disable(p.SCISSOR_TEST),p.disable(p.BLEND),p.depthMask(!0)}}}(),s.drawPick=function(){return function(){if(!this.static){var p=this.pickBuffer;this.gl,this._pickTimeout=null,p.begin();for(var c=1,m=this.objects,l=0;l<m.length;++l)c=m[l].drawPick(c);p.end()}}}(),s.pick=function(){return function(p,c){if(!this.static){var m=this.pixelRatio,l=this.pickPixelRatio,x=this.viewBox,u=Math.round((p-x[0]/m)*l)|0,A=Math.round((c-x[1]/m)*l)|0,_=this.pickBuffer.query(u,A,this.pickRadius);if(!_)return null;for(var g=_.id+(_.value[0]<<8)+(_.value[1]<<16)+(_.value[2]<<24),b=this.objects,v=0;v<b.length;++v){var k=b[v].pick(u,A,g);if(k)return k}return null}}}();function o(p){for(var c=p.slice(),m=0;m<c.length;++m)c[m]=c[m].slice();return c}function y(p,c){return p.x-c.x}s.setScreenBox=function(p){var c=this.screenBox,m=this.pixelRatio;c[0]=Math.round(p[0]*m)|0,c[1]=Math.round(p[1]*m)|0,c[2]=Math.round(p[2]*m)|0,c[3]=Math.round(p[3]*m)|0,this.setDirty()},s.setDataBox=function(p){var c=this.dataBox,m=c[0]!==p[0]||c[1]!==p[1]||c[2]!==p[2]||c[3]!==p[3];m&&(c[0]=p[0],c[1]=p[1],c[2]=p[2],c[3]=p[3],this.setDirty())},s.setViewBox=function(p){var c=this.pixelRatio,m=this.viewBox;m[0]=Math.round(p[0]*c)|0,m[1]=Math.round(p[1]*c)|0,m[2]=Math.round(p[2]*c)|0,m[3]=Math.round(p[3]*c)|0;var l=this.pickPixelRatio;this.pickBuffer.shape=[Math.round((p[2]-p[0])*l)|0,Math.round((p[3]-p[1])*l)|0],this.setDirty()},s.update=function(p){p=p||{};var c=this.gl;this.pixelRatio=p.pixelRatio||1;var m=this.pixelRatio;this.pickPixelRatio=Math.max(m,1),this.setScreenBox(p.screenBox||[0,0,c.drawingBufferWidth/m,c.drawingBufferHeight/m]),this.screenBox,this.setViewBox(p.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/m,.125*(this.screenBox[3]-this.screenBox[1])/m,.875*(this.screenBox[2]-this.screenBox[0])/m,.875*(this.screenBox[3]-this.screenBox[1])/m]);var l=this.viewBox,x=(l[2]-l[0])/(l[3]-l[1]);this.setDataBox(p.dataBox||[-10,-10/x,10,10/x]),this.borderColor=p.borderColor!==!1?(p.borderColor||[0,0,0,0]).slice():!1,this.backgroundColor=(p.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(p.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(p.gridLineWidth||[1,1]).slice(),this.gridLineColor=o(p.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(p.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(p.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=o(p.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(p.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(p.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=o(p.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(p.titleCenter||[.5*(l[0]+l[2])/m,(l[3]+120)/m]).slice(),this.titleEnable=!("titleEnable"in p)||!!p.titleEnable,this.titleAngle=p.titleAngle||0,this.titleColor=(p.titleColor||[0,0,0,1]).slice(),this.labelPad=(p.labelPad||[15,15,15,15]).slice(),this.labelAngle=(p.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(p.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=o(p.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(p.tickPad||[15,15,15,15]).slice(),this.tickAngle=(p.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(p.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=o(p.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(p.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(p.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=o(p.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var u=p.ticks||[[],[]],A=this._tickBounds;A[0]=A[1]=1/0,A[2]=A[3]=-1/0;for(var _=0;_<2;++_){var g=u[_].slice(0);g.length!==0&&(g.sort(y),A[_]=Math.min(A[_],g[0].x),A[_+2]=Math.max(A[_+2],g[g.length-1].x))}this.grid.update({bounds:A,ticks:u}),this.text.update({bounds:A,ticks:u,labels:p.labels||["x","y"],labelSize:p.labelSize||[12,12],labelFont:p.labelFont||["sans-serif","sans-serif"],title:p.title||"",titleSize:p.titleSize||18,titleFont:p.titleFont||"sans-serif"}),this.static=!!p.static,this.setDirty()},s.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var p=this.objects.length-1;p>=0;--p)this.objects[p].dispose();this.objects.length=0;for(var p=this.overlays.length-1;p>=0;--p)this.overlays[p].dispose();this.overlays.length=0,this.gl=null},s.addObject=function(p){this.objects.indexOf(p)<0&&(this.objects.push(p),this.setDirty())},s.removeObject=function(p){for(var c=this.objects,m=0;m<c.length;++m)if(c[m]===p){c.splice(m,1),this.setDirty();break}},s.addOverlay=function(p){this.overlays.indexOf(p)<0&&(this.overlays.push(p),this.setOverlayDirty())},s.removeOverlay=function(p){for(var c=this.overlays,m=0;m<c.length;++m)if(c[m]===p){c.splice(m,1),this.setOverlayDirty();break}};function d(p){var c=p.gl,m=e(c,[c.drawingBufferWidth,c.drawingBufferHeight]),l=new h(c,m);return l.grid=a(l),l.text=n(l),l.line=r(l),l.box=t(l),l.update(p),l}},{"./lib/box":113,"./lib/grid":114,"./lib/line":115,"./lib/text":117,"gl-select-static":131}],119:[function(f,M,T){M.exports=s;var e=f("right-now"),a=f("3d-view"),n=f("mouse-change"),r=f("mouse-wheel"),t=f("mouse-event-offset"),h=f("has-passive-events");function s(o,y){o=o||document.body,y=y||{};var d=[.01,1/0];"distanceLimits"in y&&(d[0]=y.distanceLimits[0],d[1]=y.distanceLimits[1]),"zoomMin"in y&&(d[0]=y.zoomMin),"zoomMax"in y&&(d[1]=y.zoomMax);var p=a({center:y.center||[0,0,0],up:y.up||[0,1,0],eye:y.eye||[0,0,10],mode:y.mode||"orbit",distanceLimits:d}),c=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],m=0,l=o.clientWidth,x=o.clientHeight,u={keyBindingMode:"rotate",enableWheel:!0,view:p,element:o,delay:y.delay||16,rotateSpeed:y.rotateSpeed||1,zoomSpeed:y.zoomSpeed||1,translateSpeed:y.translateSpeed||1,flipX:!!y.flipX,flipY:!!y.flipY,modes:p.modes,_ortho:y._ortho||y.projection&&y.projection.type==="orthographic"||!1,tick:function(){var A=e(),_=this.delay,g=A-2*_;p.idle(A-_),p.recalcMatrix(g),p.flush(A-(100+_*2));for(var b=!0,v=p.computedMatrix,k=0;k<16;++k)b=b&&c[k]===v[k],c[k]=v[k];var S=o.clientWidth===l&&o.clientHeight===x;return l=o.clientWidth,x=o.clientHeight,b?!S:(m=Math.exp(p.computedRadius[0]),!0)},lookAt:function(A,_,g){p.lookAt(p.lastT(),A,_,g)},rotate:function(A,_,g){p.rotate(p.lastT(),A,_,g)},pan:function(A,_,g){p.pan(p.lastT(),A,_,g)},translate:function(A,_,g){p.translate(p.lastT(),A,_,g)}};return Object.defineProperties(u,{matrix:{get:function(){return p.computedMatrix},set:function(A){return p.setMatrix(p.lastT(),A),p.computedMatrix},enumerable:!0},mode:{get:function(){return p.getMode()},set:function(A){var _=p.computedUp.slice(),g=p.computedEye.slice(),b=p.computedCenter.slice();if(p.setMode(A),A==="turntable"){var v=e();p._active.lookAt(v,g,b,_),p._active.lookAt(v+500,g,b,[0,0,1]),p._active.flush(v)}return p.getMode()},enumerable:!0},center:{get:function(){return p.computedCenter},set:function(A){return p.lookAt(p.lastT(),null,A),p.computedCenter},enumerable:!0},eye:{get:function(){return p.computedEye},set:function(A){return p.lookAt(p.lastT(),A),p.computedEye},enumerable:!0},up:{get:function(){return p.computedUp},set:function(A){return p.lookAt(p.lastT(),null,null,A),p.computedUp},enumerable:!0},distance:{get:function(){return m},set:function(A){return p.setDistance(p.lastT(),A),A},enumerable:!0},distanceLimits:{get:function(){return p.getDistanceLimits(d)},set:function(A){return p.setDistanceLimits(A),A},enumerable:!0}}),o.addEventListener("contextmenu",function(A){return A.preventDefault(),!1}),u._lastX=-1,u._lastY=-1,u._lastMods={shift:!1,control:!1,alt:!1,meta:!1},u.enableMouseListeners=function(){u.mouseListener=n(o,A),o.addEventListener("touchstart",function(_){var g=t(_.changedTouches[0],o);A(0,g[0],g[1],u._lastMods),A(1,g[0],g[1],u._lastMods)},h?{passive:!0}:!1),o.addEventListener("touchmove",function(_){var g=t(_.changedTouches[0],o);A(1,g[0],g[1],u._lastMods),_.preventDefault()},h?{passive:!1}:!1),o.addEventListener("touchend",function(_){A(0,u._lastX,u._lastY,u._lastMods)},h?{passive:!0}:!1);function A(_,g,b,v){var k=u.keyBindingMode;if(k!==!1){var S=k==="rotate",E=k==="pan",C=k==="zoom",F=!!v.control,I=!!v.alt,D=!!v.shift,R=!!(_&1),O=!!(_&2),z=!!(_&4),B=1/o.clientHeight,G=B*(g-u._lastX),Q=B*(b-u._lastY),X=u.flipX?1:-1,j=u.flipY?1:-1,re=Math.PI*u.rotateSpeed,ue=e();if(u._lastX!==-1&&u._lastY!==-1&&((S&&R&&!F&&!I&&!D||R&&!F&&!I&&D)&&p.rotate(ue,X*re*G,-j*re*Q,0),(E&&R&&!F&&!I&&!D||O||R&&F&&!I&&!D)&&p.pan(ue,-u.translateSpeed*G*m,u.translateSpeed*Q*m,0),C&&R&&!F&&!I&&!D||z||R&&!F&&I&&!D)){var K=-u.zoomSpeed*Q/window.innerHeight*(ue-p.lastT())*100;p.pan(ue,0,0,m*(Math.exp(K)-1))}return u._lastX=g,u._lastY=b,u._lastMods=v,!0}}u.wheelListener=r(o,function(_,g){if(u.keyBindingMode!==!1&&!!u.enableWheel){var b=u.flipX?1:-1,v=u.flipY?1:-1,k=e();if(Math.abs(_)>Math.abs(g))p.rotate(k,0,0,-_*b*Math.PI*u.rotateSpeed/window.innerWidth);else if(!u._ortho){var S=-u.zoomSpeed*v*g/window.innerHeight*(k-p.lastT())/20;p.pan(k,0,0,m*(Math.exp(S)-1))}}},!0)},u.enableMouseListeners(),u}},{"3d-view":7,"has-passive-events":232,"mouse-change":247,"mouse-event-offset":248,"mouse-wheel":250,"right-now":278}],120:[function(f,M,T){var e=f("glslify"),a=f("gl-shader"),n=e([`precision mediump float;
#define GLSLIFY 1
attribute vec2 position;
varying vec2 uv;
void main() {
  uv = position;
  gl_Position = vec4(position, 0, 1);
}`]),r=e([`precision mediump float;
#define GLSLIFY 1

uniform sampler2D accumBuffer;
varying vec2 uv;

void main() {
  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));
  gl_FragColor = min(vec4(1,1,1,1), accum);
}`]);M.exports=function(t){return a(t,n,r,null,[{name:"position",type:"vec2"}])}},{"gl-shader":132,glslify:231}],121:[function(f,M,T){var e=f("./camera.js"),a=f("gl-axes3d"),n=f("gl-axes3d/properties"),r=f("gl-spikes3d"),t=f("gl-select-static"),h=f("gl-fbo"),s=f("a-big-triangle"),o=f("mouse-change"),y=f("gl-mat4/perspective"),d=f("gl-mat4/ortho"),p=f("./lib/shader"),c=f("is-mobile")({tablet:!0,featureDetect:!0});M.exports={createScene:A,createCamera:e};function m(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function l(g,b){var v=null;try{v=g.getContext("webgl",b),v||(v=g.getContext("experimental-webgl",b))}catch{return null}return v}function x(g){var b=Math.round(Math.log(Math.abs(g))/Math.log(10));if(b<0){var v=Math.round(Math.pow(10,-b));return Math.ceil(g*v)/v}else if(b>0){var v=Math.round(Math.pow(10,b));return Math.ceil(g/v)*v}return Math.ceil(g)}function u(g){return typeof g=="boolean"?g:!0}function A(g){g=g||{},g.camera=g.camera||{};var b=g.canvas;if(!b)if(b=document.createElement("canvas"),g.container){var v=g.container;v.appendChild(b)}else document.body.appendChild(b);var k=g.gl;if(k||(g.glOptions&&(c=!!g.glOptions.preserveDrawingBuffer),k=l(b,g.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:c})),!k)throw new Error("webgl not supported");var S=g.bounds||[[-10,-10,-10],[10,10,10]],E=new m,C=h(k,k.drawingBufferWidth,k.drawingBufferHeight,{preferFloat:!c}),F=p(k),I=g.cameraObject&&g.cameraObject._ortho===!0||g.camera.projection&&g.camera.projection.type==="orthographic"||!1,D={eye:g.camera.eye||[2,0,0],center:g.camera.center||[0,0,0],up:g.camera.up||[0,1,0],zoomMin:g.camera.zoomMax||.1,zoomMax:g.camera.zoomMin||100,mode:g.camera.mode||"turntable",_ortho:I},R=g.axes||{},O=a(k,R);O.enable=!R.disable;var z=g.spikes||{},B=r(k,z),G=[],Q=[],X=[],j=[],re=!0,Y=!0,ue=new Array(16),K=new Array(16),te={view:null,projection:ue,model:K,_ortho:!1},Y=!0,H=[k.drawingBufferWidth,k.drawingBufferHeight],ee=g.cameraObject||e(b,D),ne={gl:k,contextLost:!1,pixelRatio:g.pixelRatio||1,canvas:b,selection:E,camera:ee,axes:O,axesPixels:null,spikes:B,bounds:S,objects:G,shape:H,aspect:g.aspectRatio||[1,1,1],pickRadius:g.pickRadius||10,zNear:g.zNear||.01,zFar:g.zFar||1e3,fovy:g.fovy||Math.PI/4,clearColor:g.clearColor||[0,0,0,0],autoResize:u(g.autoResize),autoBounds:u(g.autoBounds),autoScale:!!g.autoScale,autoCenter:u(g.autoCenter),clipToBounds:u(g.clipToBounds),snapToData:!!g.snapToData,onselect:g.onselect||null,onrender:g.onrender||null,onclick:g.onclick||null,cameraParams:te,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(ye){this.aspect[0]=ye.x,this.aspect[1]=ye.y,this.aspect[2]=ye.z,Y=!0},setBounds:function(ye,ge){this.bounds[0][ye]=ge.min,this.bounds[1][ye]=ge.max},setClearColor:function(ye){this.clearColor=ye},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},Z=[k.drawingBufferWidth/ne.pixelRatio|0,k.drawingBufferHeight/ne.pixelRatio|0];function q(){if(!ne._stopped&&!!ne.autoResize){var ye=b.parentNode,ge=1,me=1;ye&&ye!==document.body?(ge=ye.clientWidth,me=ye.clientHeight):(ge=window.innerWidth,me=window.innerHeight);var Se=Math.ceil(ge*ne.pixelRatio)|0,Le=Math.ceil(me*ne.pixelRatio)|0;if(Se!==b.width||Le!==b.height){b.width=Se,b.height=Le;var Oe=b.style;Oe.position=Oe.position||"absolute",Oe.left="0px",Oe.top="0px",Oe.width=ge+"px",Oe.height=me+"px",re=!0}}}ne.autoResize&&q(),window.addEventListener("resize",q);function ie(){for(var ye=G.length,ge=j.length,me=0;me<ge;++me)X[me]=0;e:for(var me=0;me<ye;++me){var Se=G[me],Le=Se.pickSlots;if(!Le){Q[me]=-1;continue}for(var Oe=0;Oe<ge;++Oe)if(X[Oe]+Le<255){Q[me]=Oe,Se.setPickBase(X[Oe]+1),X[Oe]+=Le;continue e}var we=t(k,H);Q[me]=ge,j.push(we),X.push(Le),Se.setPickBase(1),ge+=1}for(;ge>0&&X[ge-1]===0;)X.pop(),j.pop().dispose()}ne.update=function(ye){ne._stopped||(re=!0,Y=!0)},ne.add=function(ye){ne._stopped||(ye.axes=O,G.push(ye),Q.push(-1),re=!0,Y=!0,ie())},ne.remove=function(ye){if(!ne._stopped){var ge=G.indexOf(ye);ge<0||(G.splice(ge,1),Q.pop(),re=!0,Y=!0,ie())}},ne.dispose=function(){if(!ne._stopped&&(ne._stopped=!0,window.removeEventListener("resize",q),b.removeEventListener("webglcontextlost",se),ne.mouseListener.enabled=!1,!ne.contextLost)){O.dispose(),B.dispose();for(var ye=0;ye<G.length;++ye)G[ye].dispose();C.dispose();for(var ye=0;ye<j.length;++ye)j[ye].dispose();F.dispose(),k=null,O=null,B=null,G=[]}},ne._mouseRotating=!1,ne._prevButtons=0,ne.enableMouseListeners=function(){ne.mouseListener=o(b,function(ye,ge,me){if(!ne._stopped){var Se=j.length,Le=G.length,Oe=E.object;E.distance=1/0,E.mouse[0]=ge,E.mouse[1]=me,E.object=null,E.screen=null,E.dataCoordinate=E.dataPosition=null;var we=!1;if(ye&&ne._prevButtons)ne._mouseRotating=!0;else{ne._mouseRotating&&(Y=!0),ne._mouseRotating=!1;for(var Ce=0;Ce<Se;++Ce){var Ke=j[Ce].query(ge,Z[1]-me-1,ne.pickRadius);if(Ke){if(Ke.distance>E.distance)continue;for(var Ye=0;Ye<Le;++Ye){var Fe=G[Ye];if(Q[Ye]===Ce){var Re=Fe.pick(Ke);Re&&(E.buttons=ye,E.screen=Ke.coord,E.distance=Ke.distance,E.object=Fe,E.index=Re.distance,E.dataPosition=Re.position,E.dataCoordinate=Re.dataCoordinate,E.data=Re,we=!0)}}}}}Oe&&Oe!==E.object&&(Oe.highlight&&Oe.highlight(null),re=!0),E.object&&(E.object.highlight&&E.object.highlight(E.data),re=!0),we=we||E.object!==Oe,we&&ne.onselect&&ne.onselect(E),ye&1&&!(ne._prevButtons&1)&&ne.onclick&&ne.onclick(E),ne._prevButtons=ye}})};function se(){if(ne.contextLost)return!0;k.isContextLost()&&(ne.contextLost=!0,ne.mouseListener.enabled=!1,ne.selection.object=null,ne.oncontextloss&&ne.oncontextloss())}b.addEventListener("webglcontextlost",se);function ae(){if(!se()){k.colorMask(!0,!0,!0,!0),k.depthMask(!0),k.disable(k.BLEND),k.enable(k.DEPTH_TEST),k.depthFunc(k.LEQUAL);for(var ye=G.length,ge=j.length,me=0;me<ge;++me){var Se=j[me];Se.shape=Z,Se.begin();for(var Le=0;Le<ye;++Le)if(Q[Le]===me){var Oe=G[Le];Oe.drawPick&&(Oe.pixelRatio=1,Oe.drawPick(te))}Se.end()}}}var oe=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],be=[oe[0].slice(),oe[1].slice()];function ce(){if(!se()){q();var ye=ne.camera.tick();te.view=ne.camera.matrix,re=re||ye,Y=Y||ye,O.pixelRatio=ne.pixelRatio,B.pixelRatio=ne.pixelRatio;var ge=G.length,me=oe[0],Se=oe[1];me[0]=me[1]=me[2]=1/0,Se[0]=Se[1]=Se[2]=-1/0;for(var Le=0;Le<ge;++Le){var Oe=G[Le];Oe.pixelRatio=ne.pixelRatio,Oe.axes=ne.axes,re=re||!!Oe.dirty,Y=Y||!!Oe.dirty;var we=Oe.bounds;if(we)for(var Ce=we[0],Ke=we[1],Ye=0;Ye<3;++Ye)me[Ye]=Math.min(me[Ye],Ce[Ye]),Se[Ye]=Math.max(Se[Ye],Ke[Ye])}var Fe=ne.bounds;if(ne.autoBounds)for(var Ye=0;Ye<3;++Ye){if(Se[Ye]<me[Ye])me[Ye]=-1,Se[Ye]=1;else{me[Ye]===Se[Ye]&&(me[Ye]-=1,Se[Ye]+=1);var Re=.05*(Se[Ye]-me[Ye]);me[Ye]=me[Ye]-Re,Se[Ye]=Se[Ye]+Re}Fe[0][Ye]=me[Ye],Fe[1][Ye]=Se[Ye]}for(var je=!1,Ye=0;Ye<3;++Ye)je=je||be[0][Ye]!==Fe[0][Ye]||be[1][Ye]!==Fe[1][Ye],be[0][Ye]=Fe[0][Ye],be[1][Ye]=Fe[1][Ye];if(Y=Y||je,re=re||je,!!re){if(je){for(var xt=[0,0,0],Le=0;Le<3;++Le)xt[Le]=x((Fe[1][Le]-Fe[0][Le])/10);O.autoTicks?O.update({bounds:Fe,tickSpacing:xt}):O.update({bounds:Fe})}var Nt=k.drawingBufferWidth,tr=k.drawingBufferHeight;H[0]=Nt,H[1]=tr,Z[0]=Math.max(Nt/ne.pixelRatio,1)|0,Z[1]=Math.max(tr/ne.pixelRatio,1)|0,_(ne,I);for(var Le=0;Le<ge;++Le){var Oe=G[Le];Oe.axesBounds=Fe,ne.clipToBounds&&(Oe.clipBounds=Fe)}E.object&&(ne.snapToData?B.position=E.dataCoordinate:B.position=E.dataPosition,B.bounds=Fe),Y&&(Y=!1,ae()),ne.axesPixels=n(ne.axes,te,Nt,tr),ne.onrender&&ne.onrender(),k.bindFramebuffer(k.FRAMEBUFFER,null),k.viewport(0,0,Nt,tr),ne.clearRGBA(),k.depthMask(!0),k.colorMask(!0,!0,!0,!0),k.enable(k.DEPTH_TEST),k.depthFunc(k.LEQUAL),k.disable(k.BLEND),k.disable(k.CULL_FACE);var Ht=!1;O.enable&&(Ht=Ht||O.isTransparent(),O.draw(te)),B.axes=O,E.object&&B.draw(te),k.disable(k.CULL_FACE);for(var Le=0;Le<ge;++Le){var Oe=G[Le];Oe.axes=O,Oe.pixelRatio=ne.pixelRatio,Oe.isOpaque&&Oe.isOpaque()&&Oe.draw(te),Oe.isTransparent&&Oe.isTransparent()&&(Ht=!0)}if(Ht){C.shape=H,C.bind(),k.clear(k.DEPTH_BUFFER_BIT),k.colorMask(!1,!1,!1,!1),k.depthMask(!0),k.depthFunc(k.LESS),O.enable&&O.isTransparent()&&O.drawTransparent(te);for(var Le=0;Le<ge;++Le){var Oe=G[Le];Oe.isOpaque&&Oe.isOpaque()&&Oe.draw(te)}k.enable(k.BLEND),k.blendEquation(k.FUNC_ADD),k.blendFunc(k.ONE,k.ONE_MINUS_SRC_ALPHA),k.colorMask(!0,!0,!0,!0),k.depthMask(!1),k.clearColor(0,0,0,0),k.clear(k.COLOR_BUFFER_BIT),O.isTransparent()&&O.drawTransparent(te);for(var Le=0;Le<ge;++Le){var Oe=G[Le];Oe.isTransparent&&Oe.isTransparent()&&Oe.drawTransparent(te)}k.bindFramebuffer(k.FRAMEBUFFER,null),k.blendFunc(k.ONE,k.ONE_MINUS_SRC_ALPHA),k.disable(k.DEPTH_TEST),F.bind(),C.color[0].bind(0),F.uniforms.accumBuffer=0,s(k),k.disable(k.BLEND)}re=!1;for(var Le=0;Le<ge;++Le)G[Le].dirty=!1}}}function de(){ne._stopped||ne.contextLost||(ce(),requestAnimationFrame(de))}return ne.enableMouseListeners(),de(),ne.redraw=function(){ne._stopped||(re=!0,ce())},ne}function _(g,b){var v=g.bounds,k=g.cameraParams,S=k.projection,E=k.model,C=g.gl.drawingBufferWidth,F=g.gl.drawingBufferHeight,I=g.zNear,D=g.zFar,R=g.fovy,O=C/F;b?(d(S,-O,O,-1,1,I,D),k._ortho=!0):(y(S,R,O,I,D),k._ortho=!1);for(var z=0;z<16;++z)E[z]=0;E[15]=1;for(var B=0,z=0;z<3;++z)B=Math.max(B,v[1][z]-v[0][z]);for(var z=0;z<3;++z)g.autoScale?E[5*z]=g.aspect[z]/(v[1][z]-v[0][z]):E[5*z]=1/B,g.autoCenter&&(E[12+z]=-E[5*z]*.5*(v[0][z]+v[1][z]))}},{"./camera.js":119,"./lib/shader":120,"a-big-triangle":8,"gl-axes3d":70,"gl-axes3d/properties":77,"gl-fbo":86,"gl-mat4/ortho":101,"gl-mat4/perspective":102,"gl-select-static":131,"gl-spikes3d":141,"is-mobile":238,"mouse-change":247}],122:[function(f,M,T){var e=f("glslify");T.pointVertex=e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;

uniform mat3 matrix;
uniform float pointSize;
uniform float pointCloud;

highp float rand(vec2 co) {
  highp float a = 12.9898;
  highp float b = 78.233;
  highp float c = 43758.5453;
  highp float d = dot(co.xy, vec2(a, b));
  highp float e = mod(d, 3.14);
  return fract(sin(e) * c);
}

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
    // if we don't jitter the point size a bit, overall point cloud
    // saturation 'jumps' on zooming, which is disturbing and confusing
  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);
  if(pointCloud != 0.0) { // pointCloud is truthy
    // get the same square surface as circle would be
    gl_PointSize *= 0.886;
  }
}`]),T.pointFragment=e([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color, borderColor;
uniform float centerFraction;
uniform float pointCloud;

void main() {
  float radius;
  vec4 baseColor;
  if(pointCloud != 0.0) { // pointCloud is truthy
    if(centerFraction == 1.0) {
      gl_FragColor = color;
    } else {
      gl_FragColor = mix(borderColor, color, centerFraction);
    }
  } else {
    radius = length(2.0 * gl_PointCoord.xy - 1.0);
    if(radius > 1.0) {
      discard;
    }
    baseColor = mix(borderColor, color, step(radius, centerFraction));
    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);
  }
}
`]),T.pickVertex=e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;

uniform mat3 matrix;
uniform float pointSize;
uniform vec4 pickOffset;

varying vec4 fragId;

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
  gl_PointSize = pointSize;

  vec4 id = pickId + pickOffset;
  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  fragId = id;
}
`]),T.pickFragment=e([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;

void main() {
  float radius = length(2.0 * gl_PointCoord.xy - 1.0);
  if(radius > 1.0) {
    discard;
  }
  gl_FragColor = fragId / 255.0;
}
`])},{glslify:231}],123:[function(f,M,T){var e=f("gl-shader"),a=f("gl-buffer"),n=f("typedarray-pool"),r=f("./lib/shader");M.exports=o;function t(y,d,p,c,m){this.plot=y,this.offsetBuffer=d,this.pickBuffer=p,this.shader=c,this.pickShader=m,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}var h=t.prototype;h.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},h.update=function(y){var d;y=y||{};function p(_,g){return _ in y?y[_]:g}this.sizeMin=p("sizeMin",.5),this.sizeMax=p("sizeMax",20),this.color=p("color",[1,0,0,1]).slice(),this.areaRatio=p("areaRatio",1),this.borderColor=p("borderColor",[0,0,0,1]).slice(),this.blend=p("blend",!1);var c=y.positions.length>>>1,m=y.positions instanceof Float32Array,l=y.idToIndex instanceof Int32Array&&y.idToIndex.length>=c,x=y.positions,u=m?x:n.mallocFloat32(x.length),A=l?y.idToIndex:n.mallocInt32(c);if(m||u.set(x),!l)for(u.set(x),d=0;d<c;d++)A[d]=d;this.points=x,this.offsetBuffer.update(u),this.pickBuffer.update(A),m||n.free(u),l||n.free(A),this.pointCount=c,this.pickOffset=0};function s(y,d){var p=0,c=y.length>>>1,m;for(m=0;m<c;m++){var l=y[m*2],x=y[m*2+1];l>=d[0]&&l<=d[2]&&x>=d[1]&&x<=d[3]&&p++}return p}h.unifiedDraw=function(){var y=[1,0,0,0,1,0,0,0,1],d=[0,0,0,0];return function(p){var c=p!==void 0,m=c?this.pickShader:this.shader,l=this.plot.gl,x=this.plot.dataBox;if(this.pointCount===0)return p;var u=x[2]-x[0],A=x[3]-x[1],_=s(this.points,x),g=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(_,.33333)));y[0]=2/u,y[4]=2/A,y[6]=-2*x[0]/u-1,y[7]=-2*x[1]/A-1,this.offsetBuffer.bind(),m.bind(),m.attributes.position.pointer(),m.uniforms.matrix=y,m.uniforms.color=this.color,m.uniforms.borderColor=this.borderColor,m.uniforms.pointCloud=g<5,m.uniforms.pointSize=g,m.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),c&&(d[0]=p&255,d[1]=p>>8&255,d[2]=p>>16&255,d[3]=p>>24&255,this.pickBuffer.bind(),m.attributes.pickId.pointer(l.UNSIGNED_BYTE),m.uniforms.pickOffset=d,this.pickOffset=p);var b=l.getParameter(l.BLEND),v=l.getParameter(l.DITHER);return b&&!this.blend&&l.disable(l.BLEND),v&&l.disable(l.DITHER),l.drawArrays(l.POINTS,0,this.pointCount),b&&!this.blend&&l.enable(l.BLEND),v&&l.enable(l.DITHER),p+this.pointCount}}(),h.draw=h.unifiedDraw,h.drawPick=h.unifiedDraw,h.pick=function(y,d,p){var c=this.pickOffset,m=this.pointCount;if(p<c||p>=c+m)return null;var l=p-c,x=this.points;return{object:this,pointId:l,dataCoord:[x[2*l],x[2*l+1]]}};function o(y,d){var p=y.gl,c=a(p),m=a(p),l=e(p,r.pointVertex,r.pointFragment),x=e(p,r.pickVertex,r.pickFragment),u=new t(y,c,m,l,x);return u.update(d),y.addObject(u),u}},{"./lib/shader":122,"gl-buffer":78,"gl-shader":132,"typedarray-pool":308}],124:[function(f,M,T){M.exports=e;function e(a,n,r,t){var h=n[0],s=n[1],o=n[2],y=n[3],d=r[0],p=r[1],c=r[2],m=r[3],l,x,u,A,_;return x=h*d+s*p+o*c+y*m,x<0&&(x=-x,d=-d,p=-p,c=-c,m=-m),1-x>1e-6?(l=Math.acos(x),u=Math.sin(l),A=Math.sin((1-t)*l)/u,_=Math.sin(t*l)/u):(A=1-t,_=t),a[0]=A*h+_*d,a[1]=A*s+_*p,a[2]=A*o+_*c,a[3]=A*y+_*m,a}},{}],125:[function(f,M,T){M.exports=function(e){return!e&&e!==0?"":e.toString()}},{}],126:[function(f,M,T){var e=f("vectorize-text");M.exports=n;var a={};function n(r,t,h){var s=a[t];if(s||(s=a[t]={}),r in s)return s[r];var o={textAlign:"center",textBaseline:"middle",lineHeight:1,font:t,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}};o.triangles=!0;var y=e(r,o);o.triangles=!1;var d=e(r,o),p,c;if(h&&h!==1){for(p=0;p<y.positions.length;++p)for(c=0;c<y.positions[p].length;++c)y.positions[p][c]/=h;for(p=0;p<d.positions.length;++p)for(c=0;c<d.positions[p].length;++c)d.positions[p][c]/=h}var m=[[1/0,1/0],[-1/0,-1/0]],l=d.positions.length;for(p=0;p<l;++p){var x=d.positions[p];for(c=0;c<2;++c)m[0][c]=Math.min(m[0][c],x[c]),m[1][c]=Math.max(m[1][c],x[c])}return s[r]=[y,d,m]}},{"vectorize-text":311}],127:[function(f,M,T){var e=f("gl-shader"),a=f("glslify"),n=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform vec4 highlightId;
uniform float highlightScale;
uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = 1.0;
    if(distance(highlightId, id) < 0.0001) {
      scale = highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1);
    vec4 viewPosition = view * worldPosition;
    viewPosition = viewPosition / viewPosition.w;
    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),r=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float highlightScale, pixelRatio;
uniform vec4 highlightId;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = pixelRatio;
    if(distance(highlightId.bgr, id.bgr) < 0.001) {
      scale *= highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1.0);
    vec4 viewPosition = view * worldPosition;
    vec4 clipPosition = projection * viewPosition;
    clipPosition /= clipPosition.w;

    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),t=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform float highlightScale;
uniform vec4 highlightId;
uniform vec3 axes[2];
uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float scale, pixelRatio;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float lscale = pixelRatio * scale;
    if(distance(highlightId, id) < 0.0001) {
      lscale *= highlightScale;
    }

    vec4 clipCenter   = projection * view * model * vec4(position, 1);
    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;
    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = dataPosition;
  }
}
`]),h=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float opacity;

varying vec4 interpColor;
varying vec3 dataCoordinate;

void main() {
  if (
    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||
    interpColor.a * opacity == 0.
  ) discard;
  gl_FragColor = interpColor * opacity;
}
`]),s=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float pickGroup;

varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;

  gl_FragColor = vec4(pickGroup, pickId.bgr);
}`]),o=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],y={vertex:n,fragment:h,attributes:o},d={vertex:r,fragment:h,attributes:o},p={vertex:t,fragment:h,attributes:o},c={vertex:n,fragment:s,attributes:o},m={vertex:r,fragment:s,attributes:o},l={vertex:t,fragment:s,attributes:o};function x(u,A){var _=e(u,A),g=_.attributes;return g.position.location=0,g.color.location=1,g.glyph.location=2,g.id.location=3,_}T.createPerspective=function(u){return x(u,y)},T.createOrtho=function(u){return x(u,d)},T.createProject=function(u){return x(u,p)},T.createPickPerspective=function(u){return x(u,c)},T.createPickOrtho=function(u){return x(u,m)},T.createPickProject=function(u){return x(u,l)}},{"gl-shader":132,glslify:231}],128:[function(f,M,T){var e=f("is-string-blank"),a=f("gl-buffer"),n=f("gl-vao"),r=f("typedarray-pool"),t=f("gl-mat4/multiply"),h=f("./lib/shaders"),s=f("./lib/glyphs"),o=f("./lib/get-simple-string"),y=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];M.exports=Q;function d(X,j){var re=X[0],ue=X[1],K=X[2],te=X[3];return X[0]=j[0]*re+j[4]*ue+j[8]*K+j[12]*te,X[1]=j[1]*re+j[5]*ue+j[9]*K+j[13]*te,X[2]=j[2]*re+j[6]*ue+j[10]*K+j[14]*te,X[3]=j[3]*re+j[7]*ue+j[11]*K+j[15]*te,X}function p(X,j,re,ue){return d(ue,ue),d(ue,ue),d(ue,ue)}function c(X,j){this.index=X,this.dataCoordinate=this.position=j}function m(X){return X===!0||X>1?1:X}function l(X,j,re,ue,K,te,Y,H,ee,ne,Z,q){this.gl=X,this.pixelRatio=1,this.shader=j,this.orthoShader=re,this.projectShader=ue,this.pointBuffer=K,this.colorBuffer=te,this.glyphBuffer=Y,this.idBuffer=H,this.vao=ee,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[2/3,2/3,2/3],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=ne,this.pickOrthoShader=Z,this.pickProjectShader=q,this.points=[],this._selectResult=new c(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}var x=l.prototype;x.pickSlots=1,x.setPickBase=function(X){this.pickId=X},x.isTransparent=function(){if(this.hasAlpha)return!0;for(var X=0;X<3;++X)if(this.axesProject[X]&&this.projectHasAlpha)return!0;return!1},x.isOpaque=function(){if(!this.hasAlpha)return!0;for(var X=0;X<3;++X)if(this.axesProject[X]&&!this.projectHasAlpha)return!0;return!1};var u=[0,0],A=[0,0,0],_=[0,0,0],g=[0,0,0,1],b=[0,0,0,1],v=y.slice(),k=[0,0,0],S=[[0,0,0],[0,0,0]];function E(X){return X[0]=X[1]=X[2]=0,X}function C(X,j){return X[0]=j[0],X[1]=j[1],X[2]=j[2],X[3]=1,X}function F(X,j,re,ue){return X[0]=j[0],X[1]=j[1],X[2]=j[2],X[re]=ue,X}function I(X){for(var j=S,re=0;re<2;++re)for(var ue=0;ue<3;++ue)j[re][ue]=Math.max(Math.min(X[re][ue],1e8),-1e8);return j}function D(X,j,re,ue){var K=j.axesProject,te=j.gl,Y=X.uniforms,H=re.model||y,ee=re.view||y,ne=re.projection||y,Z=j.axesBounds,q=I(j.clipBounds),ie;j.axes&&j.axes.lastCubeProps?ie=j.axes.lastCubeProps.axis:ie=[1,1,1],u[0]=2/te.drawingBufferWidth,u[1]=2/te.drawingBufferHeight,X.bind(),Y.view=ee,Y.projection=ne,Y.screenSize=u,Y.highlightId=j.highlightId,Y.highlightScale=j.highlightScale,Y.clipBounds=q,Y.pickGroup=j.pickId/255,Y.pixelRatio=ue;for(var se=0;se<3;++se)if(!!K[se]){Y.scale=j.projectScale[se],Y.opacity=j.projectOpacity[se];for(var ae=v,oe=0;oe<16;++oe)ae[oe]=0;for(var oe=0;oe<4;++oe)ae[5*oe]=1;ae[5*se]=0,ie[se]<0?ae[12+se]=Z[0][se]:ae[12+se]=Z[1][se],t(ae,H,ae),Y.model=ae;var be=(se+1)%3,ce=(se+2)%3,de=E(A),ye=E(_);de[be]=1,ye[ce]=1;var ge=p(ne,ee,H,C(g,de)),me=p(ne,ee,H,C(b,ye));if(Math.abs(ge[1])>Math.abs(me[1])){var Se=ge;ge=me,me=Se,Se=de,de=ye,ye=Se;var Le=be;be=ce,ce=Le}ge[0]<0&&(de[be]=-1),me[1]>0&&(ye[ce]=-1);for(var Oe=0,we=0,oe=0;oe<4;++oe)Oe+=Math.pow(H[4*be+oe],2),we+=Math.pow(H[4*ce+oe],2);de[be]/=Math.sqrt(Oe),ye[ce]/=Math.sqrt(we),Y.axes[0]=de,Y.axes[1]=ye,Y.fragClipBounds[0]=F(k,q[0],se,-1e8),Y.fragClipBounds[1]=F(k,q[1],se,1e8),j.vao.bind(),j.vao.draw(te.TRIANGLES,j.vertexCount),j.lineWidth>0&&(te.lineWidth(j.lineWidth*ue),j.vao.draw(te.LINES,j.lineVertexCount,j.vertexCount)),j.vao.unbind()}}var R=[-1e8,-1e8,-1e8],O=[1e8,1e8,1e8],z=[R,O];function B(X,j,re,ue,K,te,Y){var H=re.gl;if((te===re.projectHasAlpha||Y)&&D(j,re,ue,K),te===re.hasAlpha||Y){X.bind();var ee=X.uniforms;ee.model=ue.model||y,ee.view=ue.view||y,ee.projection=ue.projection||y,u[0]=2/H.drawingBufferWidth,u[1]=2/H.drawingBufferHeight,ee.screenSize=u,ee.highlightId=re.highlightId,ee.highlightScale=re.highlightScale,ee.fragClipBounds=z,ee.clipBounds=re.axes.bounds,ee.opacity=re.opacity,ee.pickGroup=re.pickId/255,ee.pixelRatio=K,re.vao.bind(),re.vao.draw(H.TRIANGLES,re.vertexCount),re.lineWidth>0&&(H.lineWidth(re.lineWidth*K),re.vao.draw(H.LINES,re.lineVertexCount,re.vertexCount)),re.vao.unbind()}}x.draw=function(X){var j=this.useOrtho?this.orthoShader:this.shader;B(j,this.projectShader,this,X,this.pixelRatio,!1,!1)},x.drawTransparent=function(X){var j=this.useOrtho?this.orthoShader:this.shader;B(j,this.projectShader,this,X,this.pixelRatio,!0,!1)},x.drawPick=function(X){var j=this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader;B(j,this.pickProjectShader,this,X,1,!0,!0)},x.pick=function(X){if(!X||X.id!==this.pickId)return null;var j=X.value[2]+(X.value[1]<<8)+(X.value[0]<<16);if(j>=this.pointCount||j<0)return null;var re=this.points[j],ue=this._selectResult;ue.index=j;for(var K=0;K<3;++K)ue.position[K]=ue.dataCoordinate[K]=re[K];return ue},x.highlight=function(X){if(!X)this.highlightId=[1,1,1,1];else{var j=X.index,re=j&255,ue=j>>8&255,K=j>>16&255;this.highlightId=[re/255,ue/255,K/255,0]}};function G(X,j,re,ue){var K;Array.isArray(X)?j<X.length?K=X[j]:K=void 0:K=X,K=o(K);var te=!0;e(K)&&(K="\u25BC",te=!1);var Y=s(K,re,ue);return{mesh:Y[0],lines:Y[1],bounds:Y[2],visible:te}}x.update=function(X){if(X=X||{},"perspective"in X&&(this.useOrtho=!X.perspective),"orthographic"in X&&(this.useOrtho=!!X.orthographic),"lineWidth"in X&&(this.lineWidth=X.lineWidth),"project"in X)if(Array.isArray(X.project))this.axesProject=X.project;else{var j=!!X.project;this.axesProject=[j,j,j]}if("projectScale"in X)if(Array.isArray(X.projectScale))this.projectScale=X.projectScale.slice();else{var re=+X.projectScale;this.projectScale=[re,re,re]}if(this.projectHasAlpha=!1,"projectOpacity"in X){if(Array.isArray(X.projectOpacity))this.projectOpacity=X.projectOpacity.slice();else{var re=+X.projectOpacity;this.projectOpacity=[re,re,re]}for(var ue=0;ue<3;++ue)this.projectOpacity[ue]=m(this.projectOpacity[ue]),this.projectOpacity[ue]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in X&&(this.opacity=m(X.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var K=X.position,te=X.font||"normal",Y=X.alignment||[0,0],H,ee;if(Y.length===2)H=Y[0],ee=Y[1];else{H=[],ee=[];for(var ue=0;ue<Y.length;++ue)H[ue]=Y[ue][0],ee[ue]=Y[ue][1]}var ne=[1/0,1/0,1/0],Z=[-1/0,-1/0,-1/0],q=X.glyph,ie=X.color,se=X.size,ae=X.angle,oe=X.lineColor,be=-1,ce=0,de=0,ye=0;if(K.length){ye=K.length;e:for(var ue=0;ue<ye;++ue){for(var ge=K[ue],me=0;me<3;++me)if(isNaN(ge[me])||!isFinite(ge[me]))continue e;var Se=G(q,ue,te,this.pixelRatio),Le=Se.mesh,Oe=Se.lines,we=Se.bounds;ce+=Le.cells.length*3,de+=Oe.edges.length*2}}var Ce=ce+de,Ke=r.mallocFloat(3*Ce),Ye=r.mallocFloat(4*Ce),Fe=r.mallocFloat(2*Ce),Re=r.mallocUint32(Ce);if(Ce>0){var je=0,xt=ce,Nt=[0,0,0,1],tr=[0,0,0,1],Ht=Array.isArray(ie)&&Array.isArray(ie[0]),Pt=Array.isArray(oe)&&Array.isArray(oe[0]);e:for(var ue=0;ue<ye;++ue){be+=1;for(var ge=K[ue],me=0;me<3;++me){if(isNaN(ge[me])||!isFinite(ge[me]))continue e;Z[me]=Math.max(Z[me],ge[me]),ne[me]=Math.min(ne[me],ge[me])}var Se=G(q,ue,te,this.pixelRatio),Le=Se.mesh,Oe=Se.lines,we=Se.bounds,$t=Se.visible;if(!$t)Nt=[1,1,1,0];else if(Array.isArray(ie)){var Ut;if(Ht?ue<ie.length?Ut=ie[ue]:Ut=[0,0,0,0]:Ut=ie,Ut.length===3){for(var me=0;me<3;++me)Nt[me]=Ut[me];Nt[3]=1}else if(Ut.length===4){for(var me=0;me<4;++me)Nt[me]=Ut[me];!this.hasAlpha&&Ut[3]<1&&(this.hasAlpha=!0)}}else Nt[0]=Nt[1]=Nt[2]=0,Nt[3]=1;if(!$t)tr=[1,1,1,0];else if(Array.isArray(oe)){var Ut;if(Pt?ue<oe.length?Ut=oe[ue]:Ut=[0,0,0,0]:Ut=oe,Ut.length===3){for(var me=0;me<3;++me)tr[me]=Ut[me];tr[me]=1}else if(Ut.length===4){for(var me=0;me<4;++me)tr[me]=Ut[me];!this.hasAlpha&&Ut[3]<1&&(this.hasAlpha=!0)}}else tr[0]=tr[1]=tr[2]=0,tr[3]=1;var Lt=.5;$t?Array.isArray(se)?ue<se.length?Lt=+se[ue]:Lt=12:se?Lt=+se:this.useOrtho&&(Lt=12):Lt=0;var We=0;Array.isArray(ae)?ue<ae.length?We=+ae[ue]:We=0:ae&&(We=+ae);for(var ot=Math.cos(We),Ge=Math.sin(We),ge=K[ue],me=0;me<3;++me)Z[me]=Math.max(Z[me],ge[me]),ne[me]=Math.min(ne[me],ge[me]);var Me=H,Ve=ee,Me=0;Array.isArray(H)?ue<H.length?Me=H[ue]:Me=0:H&&(Me=H);var Ve=0;Array.isArray(ee)?ue<ee.length?Ve=ee[ue]:Ve=0:ee&&(Ve=ee),Me*=Me>0?1-we[0][0]:Me<0?1+we[1][0]:1,Ve*=Ve>0?1-we[0][1]:Ve<0?1+we[1][1]:1;for(var Qe=[Me,Ve],jt=Le.cells||[],Bt=Le.positions||[],me=0;me<jt.length;++me)for(var tt=jt[me],St=0;St<3;++St){for(var wt=0;wt<3;++wt)Ke[3*je+wt]=ge[wt];for(var wt=0;wt<4;++wt)Ye[4*je+wt]=Nt[wt];Re[je]=be;var Ct=Bt[tt[St]];Fe[2*je]=Lt*(ot*Ct[0]-Ge*Ct[1]+Qe[0]),Fe[2*je+1]=Lt*(Ge*Ct[0]+ot*Ct[1]+Qe[1]),je+=1}for(var jt=Oe.edges,Bt=Oe.positions,me=0;me<jt.length;++me)for(var tt=jt[me],St=0;St<2;++St){for(var wt=0;wt<3;++wt)Ke[3*xt+wt]=ge[wt];for(var wt=0;wt<4;++wt)Ye[4*xt+wt]=tr[wt];Re[xt]=be;var Ct=Bt[tt[St]];Fe[2*xt]=Lt*(ot*Ct[0]-Ge*Ct[1]+Qe[0]),Fe[2*xt+1]=Lt*(Ge*Ct[0]+ot*Ct[1]+Qe[1]),xt+=1}}}this.bounds=[ne,Z],this.points=K,this.pointCount=K.length,this.vertexCount=ce,this.lineVertexCount=de,this.pointBuffer.update(Ke),this.colorBuffer.update(Ye),this.glyphBuffer.update(Fe),this.idBuffer.update(Re),r.free(Ke),r.free(Ye),r.free(Fe),r.free(Re)},x.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()};function Q(X){var j=X.gl,re=h.createPerspective(j),ue=h.createOrtho(j),K=h.createProject(j),te=h.createPickPerspective(j),Y=h.createPickOrtho(j),H=h.createPickProject(j),ee=a(j),ne=a(j),Z=a(j),q=a(j),ie=n(j,[{buffer:ee,size:3,type:j.FLOAT},{buffer:ne,size:4,type:j.FLOAT},{buffer:Z,size:2,type:j.FLOAT},{buffer:q,size:4,type:j.UNSIGNED_BYTE,normalized:!0}]),se=new l(j,re,ue,K,ee,ne,Z,q,ie,te,Y,H);return se.update(X),se}},{"./lib/get-simple-string":125,"./lib/glyphs":126,"./lib/shaders":127,"gl-buffer":78,"gl-mat4/multiply":100,"gl-vao":150,"is-string-blank":239,"typedarray-pool":308}],129:[function(f,M,T){var e=f("glslify");T.boxVertex=e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 vertex;

uniform vec2 cornerA, cornerB;

void main() {
  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);
}
`]),T.boxFragment=e([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color;

void main() {
  gl_FragColor = color;
}
`])},{glslify:231}],130:[function(f,M,T){var e=f("gl-shader"),a=f("gl-buffer"),n=f("./lib/shaders");M.exports=h;function r(s,o,y){this.plot=s,this.boxBuffer=o,this.boxShader=y,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}var t=r.prototype;t.draw=function(){if(!!this.enabled){var s=this.plot,o=this.selectBox,y=this.borderWidth;this.innerFill;var d=this.innerColor;this.outerFill;var p=this.outerColor,c=this.borderColor,m=s.box,l=s.screenBox,x=s.dataBox,u=s.viewBox,A=s.pixelRatio,_=(o[0]-x[0])*(u[2]-u[0])/(x[2]-x[0])+u[0],g=(o[1]-x[1])*(u[3]-u[1])/(x[3]-x[1])+u[1],b=(o[2]-x[0])*(u[2]-u[0])/(x[2]-x[0])+u[0],v=(o[3]-x[1])*(u[3]-u[1])/(x[3]-x[1])+u[1];if(_=Math.max(_,u[0]),g=Math.max(g,u[1]),b=Math.min(b,u[2]),v=Math.min(v,u[3]),!(b<_||v<g)){m.bind();var k=l[2]-l[0],S=l[3]-l[1];if(this.outerFill&&(m.drawBox(0,0,k,g,p),m.drawBox(0,g,_,v,p),m.drawBox(0,v,k,S,p),m.drawBox(b,g,k,v,p)),this.innerFill&&m.drawBox(_,g,b,v,d),y>0){var E=y*A;m.drawBox(_-E,g-E,b+E,g+E,c),m.drawBox(_-E,v-E,b+E,v+E,c),m.drawBox(_-E,g-E,_+E,v+E,c),m.drawBox(b-E,g-E,b+E,v+E,c)}}}},t.update=function(s){s=s||{},this.innerFill=!!s.innerFill,this.outerFill=!!s.outerFill,this.innerColor=(s.innerColor||[0,0,0,.5]).slice(),this.outerColor=(s.outerColor||[0,0,0,.5]).slice(),this.borderColor=(s.borderColor||[0,0,0,1]).slice(),this.borderWidth=s.borderWidth||0,this.selectBox=(s.selectBox||this.selectBox).slice()},t.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)};function h(s,o){var y=s.gl,d=a(y,[0,0,0,1,1,0,1,1]),p=e(y,n.boxVertex,n.boxFragment),c=new r(s,d,p);return c.update(o),s.addOverlay(c),c}},{"./lib/shaders":129,"gl-buffer":78,"gl-shader":132}],131:[function(f,M,T){M.exports=y;var e=f("gl-fbo"),a=f("typedarray-pool"),n=f("ndarray"),r=f("bit-twiddle").nextPow2,t=function(d,p,c){for(var m=1e8,l=-1,x=-1,u=d.shape[0],A=d.shape[1],_=0;_<u;_++)for(var g=0;g<A;g++){var b=d.get(_,g,0),v=d.get(_,g,1),k=d.get(_,g,2),S=d.get(_,g,3);if(b<255||v<255||k<255||S<255){var E=p-_,C=c-g,F=E*E+C*C;F<m&&(m=F,l=_,x=g)}}return[l,x,m]};function h(d,p,c,m,l){this.coord=[d,p],this.id=c,this.value=m,this.distance=l}function s(d,p,c){this.gl=d,this.fbo=p,this.buffer=c,this._readTimeout=null;var m=this;this._readCallback=function(){!m.gl||(p.bind(),d.readPixels(0,0,p.shape[0],p.shape[1],d.RGBA,d.UNSIGNED_BYTE,m.buffer),m._readTimeout=null)}}var o=s.prototype;Object.defineProperty(o,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(d){if(!!this.gl){this.fbo.shape=d;var p=this.fbo.shape[0],c=this.fbo.shape[1];if(c*p*4>this.buffer.length){a.free(this.buffer);for(var m=this.buffer=a.mallocUint8(r(c*p*4)),l=0;l<c*p*4;++l)m[l]=255}return d}}}),o.begin=function(){var d=this.gl;this.shape,d&&(this.fbo.bind(),d.clearColor(1,1,1,1),d.clear(d.COLOR_BUFFER_BIT|d.DEPTH_BUFFER_BIT))},o.end=function(){var d=this.gl;!d||(d.bindFramebuffer(d.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},o.query=function(d,p,c){if(!this.gl)return null;var m=this.fbo.shape.slice();d=d|0,p=p|0,typeof c!="number"&&(c=1);var l=Math.min(Math.max(d-c,0),m[0])|0,x=Math.min(Math.max(d+c,0),m[0])|0,u=Math.min(Math.max(p-c,0),m[1])|0,A=Math.min(Math.max(p+c,0),m[1])|0;if(x<=l||A<=u)return null;var _=[x-l,A-u],g=n(this.buffer,[_[0],_[1],4],[4,m[0]*4,1],4*(l+m[0]*u)),b=t(g.hi(_[0],_[1],1),c,c),v=b[0],k=b[1];if(v<0||Math.pow(this.radius,2)<b[2])return null;var S=g.get(v,k,0),E=g.get(v,k,1),C=g.get(v,k,2),F=g.get(v,k,3);return new h(v+l|0,k+u|0,S,[E,C,F],Math.sqrt(b[2]))},o.dispose=function(){!this.gl||(this.fbo.dispose(),a.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))};function y(d,p){var c=p[0],m=p[1],l={},x=e(d,c,m,l),u=a.mallocUint8(c*m*4);return new s(d,x,u)}},{"bit-twiddle":32,"gl-fbo":86,ndarray:259,"typedarray-pool":308}],132:[function(f,M,T){var e=f("./lib/create-uniforms"),a=f("./lib/create-attributes"),n=f("./lib/reflect"),r=f("./lib/shader-cache"),t=f("./lib/runtime-reflect"),h=f("./lib/GLError");function s(p){this.gl=p,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var o=s.prototype;o.bind=function(){this.program||this._relink();var p,c=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),m=this.gl.lastAttribCount;if(c>m)for(p=m;p<c;p++)this.gl.enableVertexAttribArray(p);else if(m>c)for(p=c;p<m;p++)this.gl.disableVertexAttribArray(p);this.gl.lastAttribCount=c,this.gl.useProgram(this.program)},o.dispose=function(){for(var p=this.gl.lastAttribCount,c=0;c<p;c++)this.gl.disableVertexAttribArray(c);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null};function y(p,c){return p.name<c.name?-1:1}o.update=function(p,c,m,l){if(!c||arguments.length===1){var x=p;p=x.vertex,c=x.fragment,m=x.uniforms,l=x.attributes}var u=this,A=u.gl,_=u._vref;u._vref=r.shader(A,A.VERTEX_SHADER,p),_&&_.dispose(),u.vertShader=u._vref.shader;var g=this._fref;if(u._fref=r.shader(A,A.FRAGMENT_SHADER,c),g&&g.dispose(),u.fragShader=u._fref.shader,!m||!l){var b=A.createProgram();if(A.attachShader(b,u.fragShader),A.attachShader(b,u.vertShader),A.linkProgram(b),!A.getProgramParameter(b,A.LINK_STATUS)){var v=A.getProgramInfoLog(b);throw new h(v,"Error linking program:"+v)}m=m||t.uniforms(A,b),l=l||t.attributes(A,b),A.deleteProgram(b)}l=l.slice(),l.sort(y);var k=[],S=[],E=[],C;for(C=0;C<l.length;++C){var F=l[C];if(F.type.indexOf("mat")>=0){for(var I=F.type.charAt(F.type.length-1)|0,D=new Array(I),R=0;R<I;++R)D[R]=E.length,S.push(F.name+"["+R+"]"),typeof F.location=="number"?E.push(F.location+R):Array.isArray(F.location)&&F.location.length===I&&typeof F.location[R]=="number"?E.push(F.location[R]|0):E.push(-1);k.push({name:F.name,type:F.type,locations:D})}else k.push({name:F.name,type:F.type,locations:[E.length]}),S.push(F.name),typeof F.location=="number"?E.push(F.location|0):E.push(-1)}var O=0;for(C=0;C<E.length;++C)if(E[C]<0){for(;E.indexOf(O)>=0;)O+=1;E[C]=O}var z=new Array(m.length);function B(){u.program=r.program(A,u._vref,u._fref,S,E);for(var G=0;G<m.length;++G)z[G]=A.getUniformLocation(u.program,m[G].name)}B(),u._relink=B,u.types={uniforms:n(m),attributes:n(l)},u.attributes=a(A,u,k,E),Object.defineProperty(u,"uniforms",e(A,u,m,z))};function d(p,c,m,l,x){var u=new s(p);return u.update(c,m,l,x),u}M.exports=d},{"./lib/GLError":133,"./lib/create-attributes":134,"./lib/create-uniforms":135,"./lib/reflect":136,"./lib/runtime-reflect":137,"./lib/shader-cache":138}],133:[function(f,M,T){function e(a,n,r){this.shortMessage=n||"",this.longMessage=r||"",this.rawError=a||"",this.message="gl-shader: "+(n||a||"")+(r?`
`+r:""),this.stack=new Error().stack}e.prototype=new Error,e.prototype.name="GLError",e.prototype.constructor=e,M.exports=e},{}],134:[function(f,M,T){M.exports=s;var e=f("./GLError");function a(o,y,d,p,c,m){this._gl=o,this._wrapper=y,this._index=d,this._locations=p,this._dimension=c,this._constFunc=m}var n=a.prototype;n.pointer=function(y,d,p,c){var m=this,l=m._gl,x=m._locations[m._index];l.vertexAttribPointer(x,m._dimension,y||l.FLOAT,!!d,p||0,c||0),l.enableVertexAttribArray(x)},n.set=function(o,y,d,p){return this._constFunc(this._locations[this._index],o,y,d,p)},Object.defineProperty(n,"location",{get:function(){return this._locations[this._index]},set:function(o){return o!==this._locations[this._index]&&(this._locations[this._index]=o|0,this._wrapper.program=null),o|0}});var r=[function(o,y,d){return d.length===void 0?o.vertexAttrib1f(y,d):o.vertexAttrib1fv(y,d)},function(o,y,d,p){return d.length===void 0?o.vertexAttrib2f(y,d,p):o.vertexAttrib2fv(y,d)},function(o,y,d,p,c){return d.length===void 0?o.vertexAttrib3f(y,d,p,c):o.vertexAttrib3fv(y,d)},function(o,y,d,p,c,m){return d.length===void 0?o.vertexAttrib4f(y,d,p,c,m):o.vertexAttrib4fv(y,d)}];function t(o,y,d,p,c,m,l){var x=r[c],u=new a(o,y,d,p,c,x);Object.defineProperty(m,l,{set:function(A){return o.disableVertexAttribArray(p[d]),x(o,p[d],A),A},get:function(){return u},enumerable:!0})}function h(o,y,d,p,c,m,l){for(var x=new Array(c),u=new Array(c),A=0;A<c;++A)t(o,y,d[A],p,c,x,A),u[A]=x[A];Object.defineProperty(x,"location",{set:function(b){if(Array.isArray(b))for(var v=0;v<c;++v)u[v].location=b[v];else for(var v=0;v<c;++v)u[v].location=b+v;return b},get:function(){for(var b=new Array(c),v=0;v<c;++v)b[v]=p[d[v]];return b},enumerable:!0}),x.pointer=function(b,v,k,S){b=b||o.FLOAT,v=!!v,k=k||c*c,S=S||0;for(var E=0;E<c;++E){var C=p[d[E]];o.vertexAttribPointer(C,c,b,v,k,S+E*c),o.enableVertexAttribArray(C)}};var _=new Array(c),g=o["vertexAttrib"+c+"fv"];Object.defineProperty(m,l,{set:function(b){for(var v=0;v<c;++v){var k=p[d[v]];if(o.disableVertexAttribArray(k),Array.isArray(b[0]))g.call(o,k,b[v]);else{for(var S=0;S<c;++S)_[S]=b[c*v+S];g.call(o,k,_)}}return b},get:function(){return x},enumerable:!0})}function s(o,y,d,p){for(var c={},m=0,l=d.length;m<l;++m){var x=d[m],u=x.name,A=x.type,_=x.locations;switch(A){case"bool":case"int":case"float":t(o,y,_[0],p,1,c,u);break;default:if(A.indexOf("vec")>=0){var g=A.charCodeAt(A.length-1)-48;if(g<2||g>4)throw new e("","Invalid data type for attribute "+u+": "+A);t(o,y,_[0],p,g,c,u)}else if(A.indexOf("mat")>=0){var g=A.charCodeAt(A.length-1)-48;if(g<2||g>4)throw new e("","Invalid data type for attribute "+u+": "+A);h(o,y,_,p,g,c,u)}else throw new e("","Unknown data type for attribute "+u+": "+A);break}}return c}},{"./GLError":133}],135:[function(f,M,T){var e=f("./reflect"),a=f("./GLError");M.exports=t;function n(h){return function(){return h}}function r(h,s){for(var o=new Array(h),y=0;y<h;++y)o[y]=s;return o}function t(h,s,o,y){function d(A){return function(_,g,b){return _.getUniform(g.program,b[A])}}function p(A){return function(g){for(var b=c("",A),v=0;v<b.length;++v){var k=b[v],S=k[0],E=k[1];if(y[E]){var C=g;if(typeof S=="string"&&(S.indexOf(".")===0||S.indexOf("[")===0)){var F=S;if(S.indexOf(".")===0&&(F=S.slice(1)),F.indexOf("]")===F.length-1){var I=F.indexOf("["),D=F.slice(0,I),R=F.slice(I+1,F.length-1);C=D?g[D][R]:g[R]}else C=g[F]}var O=o[E].type,z;switch(O){case"bool":case"int":case"sampler2D":case"samplerCube":h.uniform1i(y[E],C);break;case"float":h.uniform1f(y[E],C);break;default:var B=O.indexOf("vec");if(0<=B&&B<=1&&O.length===4+B){if(z=O.charCodeAt(O.length-1)-48,z<2||z>4)throw new a("","Invalid data type");switch(O.charAt(0)){case"b":case"i":h["uniform"+z+"iv"](y[E],C);break;case"v":h["uniform"+z+"fv"](y[E],C);break;default:throw new a("","Unrecognized data type for vector "+name+": "+O)}}else if(O.indexOf("mat")===0&&O.length===4){if(z=O.charCodeAt(O.length-1)-48,z<2||z>4)throw new a("","Invalid uniform dimension type for matrix "+name+": "+O);h["uniformMatrix"+z+"fv"](y[E],!1,C);break}else throw new a("","Unknown uniform data type for "+name+": "+O)}}}}}function c(A,_){if(typeof _!="object")return[[A,_]];var g=[];for(var b in _){var v=_[b],k=A;parseInt(b)+""===b?k+="["+b+"]":k+="."+b,typeof v=="object"?g.push.apply(g,c(k,v)):g.push([k,v])}return g}function m(A){switch(A){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":return 0;case"float":return 0;default:var _=A.indexOf("vec");if(0<=_&&_<=1&&A.length===4+_){var g=A.charCodeAt(A.length-1)-48;if(g<2||g>4)throw new a("","Invalid data type");return A.charAt(0)==="b"?r(g,!1):r(g,0)}else if(A.indexOf("mat")===0&&A.length===4){var g=A.charCodeAt(A.length-1)-48;if(g<2||g>4)throw new a("","Invalid uniform dimension type for matrix "+name+": "+A);return r(g*g,0)}else throw new a("","Unknown uniform data type for "+name+": "+A)}}function l(A,_,g){if(typeof g=="object"){var b=x(g);Object.defineProperty(A,_,{get:n(b),set:p(g),enumerable:!0,configurable:!1})}else y[g]?Object.defineProperty(A,_,{get:d(g),set:p(g),enumerable:!0,configurable:!1}):A[_]=m(o[g].type)}function x(A){var _;if(Array.isArray(A)){_=new Array(A.length);for(var g=0;g<A.length;++g)l(_,g,A[g])}else{_={};for(var b in A)l(_,b,A[b])}return _}var u=e(o,!0);return{get:n(x(u)),set:p(u),enumerable:!0,configurable:!0}}},{"./GLError":133,"./reflect":136}],136:[function(f,M,T){M.exports=e;function e(a,n){for(var r={},t=0;t<a.length;++t)for(var h=a[t].name,s=h.split("."),o=r,y=0;y<s.length;++y){var d=s[y].split("[");if(d.length>1){d[0]in o||(o[d[0]]=[]),o=o[d[0]];for(var p=1;p<d.length;++p){var c=parseInt(d[p]);p<d.length-1||y<s.length-1?(c in o||(p<d.length-1?o[c]=[]:o[c]={}),o=o[c]):n?o[c]=t:o[c]=a[t].type}}else y<s.length-1?(d[0]in o||(o[d[0]]={}),o=o[d[0]]):n?o[d[0]]=t:o[d[0]]=a[t].type}return r}},{}],137:[function(f,M,T){T.uniforms=r,T.attributes=t;var e={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},a=null;function n(h,s){if(!a){var o=Object.keys(e);a={};for(var y=0;y<o.length;++y){var d=o[y];a[h[d]]=e[d]}}return a[s]}function r(h,s){for(var o=h.getProgramParameter(s,h.ACTIVE_UNIFORMS),y=[],d=0;d<o;++d){var p=h.getActiveUniform(s,d);if(p){var c=n(h,p.type);if(p.size>1)for(var m=0;m<p.size;++m)y.push({name:p.name.replace("[0]","["+m+"]"),type:c});else y.push({name:p.name,type:c})}}return y}function t(h,s){for(var o=h.getProgramParameter(s,h.ACTIVE_ATTRIBUTES),y=[],d=0;d<o;++d){var p=h.getActiveAttrib(s,d);p&&y.push({name:p.name,type:n(h,p.type)})}return y}},{}],138:[function(f,M,T){T.shader=c,T.program=m;var e=f("./GLError"),a=f("gl-format-compiler-error"),n=typeof WeakMap>"u"?f("weakmap-shim"):WeakMap,r=new n,t=0;function h(l,x,u,A,_,g,b){this.id=l,this.src=x,this.type=u,this.shader=A,this.count=g,this.programs=[],this.cache=b}h.prototype.dispose=function(){if(--this.count===0){for(var l=this.cache,x=l.gl,u=this.programs,A=0,_=u.length;A<_;++A){var g=l.programs[u[A]];g&&(delete l.programs[A],x.deleteProgram(g))}x.deleteShader(this.shader),delete l.shaders[this.type===x.FRAGMENT_SHADER|0][this.src]}};function s(l){this.gl=l,this.shaders=[{},{}],this.programs={}}var o=s.prototype;function y(l,x,u){var A=l.createShader(x);if(l.shaderSource(A,u),l.compileShader(A),!l.getShaderParameter(A,l.COMPILE_STATUS)){var _=l.getShaderInfoLog(A);try{var g=a(_,u,x)}catch(b){throw console.warn("Failed to format compiler error: "+b),new e(_,`Error compiling shader:
`+_)}throw new e(_,g.short,g.long)}return A}o.getShaderReference=function(l,x){var u=this.gl,A=this.shaders[l===u.FRAGMENT_SHADER|0],_=A[x];if(!_||!u.isShader(_.shader)){var g=y(u,l,x);_=A[x]=new h(t++,x,l,g,[],1,this)}else _.count+=1;return _};function d(l,x,u,A,_){var g=l.createProgram();l.attachShader(g,x),l.attachShader(g,u);for(var b=0;b<A.length;++b)l.bindAttribLocation(g,_[b],A[b]);if(l.linkProgram(g),!l.getProgramParameter(g,l.LINK_STATUS)){var v=l.getProgramInfoLog(g);throw new e(v,"Error linking program: "+v)}return g}o.getProgram=function(l,x,u,A){var _=[l.id,x.id,u.join(":"),A.join(":")].join("@"),g=this.programs[_];return(!g||!this.gl.isProgram(g))&&(this.programs[_]=g=d(this.gl,l.shader,x.shader,u,A),l.programs.push(_),x.programs.push(_)),g};function p(l){var x=r.get(l);return x||(x=new s(l),r.set(l,x)),x}function c(l,x,u){return p(l).getShaderReference(x,u)}function m(l,x,u,A,_){return p(l).getProgram(x,u,A,_)}},{"./GLError":133,"gl-format-compiler-error":87,"weakmap-shim":316}],139:[function(f,M,T){M.exports=n;function e(r){this.plot=r,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}var a=e.prototype;a.update=function(r){r=r||{},this.enable=(r.enable||[!0,!0,!1,!1]).slice(),this.width=(r.width||[1,1,1,1]).slice(),this.color=(r.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(t){return t.slice()}),this.center=(r.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},a.draw=function(){var r=this.enable,t=this.width,h=this.color,s=this.center,o=this.plot,y=o.line,d=o.dataBox,p=o.viewBox;if(y.bind(),d[0]<=s[0]&&s[0]<=d[2]&&d[1]<=s[1]&&s[1]<=d[3]){var c=p[0]+(s[0]-d[0])/(d[2]-d[0])*(p[2]-p[0]),m=p[1]+(s[1]-d[1])/(d[3]-d[1])*(p[3]-p[1]);r[0]&&y.drawLine(c,m,p[0],m,t[0],h[0]),r[1]&&y.drawLine(c,m,c,p[1],t[1],h[1]),r[2]&&y.drawLine(c,m,p[2],m,t[2],h[2]),r[3]&&y.drawLine(c,m,c,p[3],t[3],h[3])}},a.dispose=function(){this.plot.removeOverlay(this)};function n(r,t){var h=new e(r);return h.update(t),r.addOverlay(h),h}},{}],140:[function(f,M,T){var e=f("glslify"),a=f("gl-shader"),n=e([`precision mediump float;
#define GLSLIFY 1

attribute vec3 position, color;
attribute float weight;

uniform mat4 model, view, projection;
uniform vec3 coordinates[3];
uniform vec4 colors[3];
uniform vec2 screenShape;
uniform float lineWidth;

varying vec4 fragColor;

void main() {
  vec3 vertexPosition = mix(coordinates[0],
    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));

  vec4 clipPos = projection * view * model * vec4(vertexPosition, 1.0);
  vec2 clipOffset = (projection * view * model * vec4(color, 0.0)).xy;
  vec2 delta = weight * clipOffset * screenShape;
  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;

  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);
  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];
}
`]),r=e([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
  gl_FragColor = fragColor;
}`]);M.exports=function(t){return a(t,n,r,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},{"gl-shader":132,glslify:231}],141:[function(f,M,T){var e=f("gl-buffer"),a=f("gl-vao"),n=f("./shaders/index");M.exports=d;var r=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function t(p,c,m,l){this.gl=p,this.buffer=c,this.vao=m,this.shader=l,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var h=t.prototype,s=[0,0,0],o=[0,0,0],y=[0,0];h.isTransparent=function(){return!1},h.drawTransparent=function(p){},h.draw=function(p){var c=this.gl,m=this.vao,l=this.shader;m.bind(),l.bind();var x=p.model||r,u=p.view||r,A=p.projection||r,_;this.axes&&(_=this.axes.lastCubeProps.axis);for(var g=s,b=o,v=0;v<3;++v)_&&_[v]<0?(g[v]=this.bounds[0][v],b[v]=this.bounds[1][v]):(g[v]=this.bounds[1][v],b[v]=this.bounds[0][v]);y[0]=c.drawingBufferWidth,y[1]=c.drawingBufferHeight,l.uniforms.model=x,l.uniforms.view=u,l.uniforms.projection=A,l.uniforms.coordinates=[this.position,g,b],l.uniforms.colors=this.colors,l.uniforms.screenShape=y;for(var v=0;v<3;++v)l.uniforms.lineWidth=this.lineWidth[v]*this.pixelRatio,this.enabled[v]&&(m.draw(c.TRIANGLES,6,6*v),this.drawSides[v]&&m.draw(c.TRIANGLES,12,18+12*v));m.unbind()},h.update=function(p){!p||("bounds"in p&&(this.bounds=p.bounds),"position"in p&&(this.position=p.position),"lineWidth"in p&&(this.lineWidth=p.lineWidth),"colors"in p&&(this.colors=p.colors),"enabled"in p&&(this.enabled=p.enabled),"drawSides"in p&&(this.drawSides=p.drawSides))},h.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()};function d(p,c){var m=[];function l(g,b,v,k,S,E){var C=[g,b,v,0,0,0,1];C[k+3]=1,C[k]=S,m.push.apply(m,C),C[6]=-1,m.push.apply(m,C),C[k]=E,m.push.apply(m,C),m.push.apply(m,C),C[6]=1,m.push.apply(m,C),C[k]=S,m.push.apply(m,C)}l(0,0,0,0,0,1),l(0,0,0,1,0,1),l(0,0,0,2,0,1),l(1,0,0,1,-1,1),l(1,0,0,2,-1,1),l(0,1,0,0,-1,1),l(0,1,0,2,-1,1),l(0,0,1,0,-1,1),l(0,0,1,1,-1,1);var x=e(p,m),u=a(p,[{type:p.FLOAT,buffer:x,size:3,offset:0,stride:28},{type:p.FLOAT,buffer:x,size:3,offset:12,stride:28},{type:p.FLOAT,buffer:x,size:1,offset:24,stride:28}]),A=n(p);A.attributes.position.location=0,A.attributes.color.location=1,A.attributes.weight.location=2;var _=new t(p,x,u,A);return _.update(c),_}},{"./shaders/index":140,"gl-buffer":78,"gl-vao":150}],142:[function(f,M,T){var e=f("glslify"),a=e([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, tubeScale;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * tubePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(tubePosition, 1.0);
  vec4 t_position  = view * tubePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = tubePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),n=e([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),r=e([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float tubeScale;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  gl_Position = projection * view * tubePosition;
  f_id        = id;
  f_position  = position.xyz;
}
`]),t=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);T.meshShader={vertex:a,fragment:n,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},T.pickShader={vertex:r,fragment:t,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},{glslify:231}],143:[function(f,M,T){var e=f("gl-vec3"),a=f("gl-vec4"),n=["xyz","xzy","yxz","yzx","zxy","zyx"],r=function(m,l,x,u){for(var A=m.points,_=m.velocities,g=m.divergences,b=[],v=[],k=[],S=[],E=[],C=[],F=0,I=0,D=a.create(),R=a.create(),O=8,z=0;z<A.length;z++){var B=A[z],G=_[z],Q=g[z];l===0&&(Q=x*.05),I=e.length(G)/u,D=a.create(),e.copy(D,G),D[3]=Q;for(var X=0;X<O;X++)E[X]=[B[0],B[1],B[2],X];if(S.length>0)for(var X=0;X<O;X++){var j=(X+1)%O;b.push(S[X],E[X],E[j],E[j],S[j],S[X]),k.push(R,D,D,D,R,R),C.push(F,I,I,I,F,F);var re=b.length;v.push([re-6,re-5,re-4],[re-3,re-2,re-1])}var ue=S;S=E,E=ue;var K=R;R=D,D=K;var te=F;F=I,I=te}return{positions:b,cells:v,vectors:k,vertexIntensity:C}},t=function(m,l,x,u){for(var A=0,_=0;_<m.length;_++)for(var g=m[_].velocities,b=0;b<g.length;b++)A=Math.max(A,e.length(g[b]));for(var v=m.map(function(z){return r(z,x,u,A)}),k=[],S=[],E=[],C=[],_=0;_<v.length;_++){var F=v[_],I=k.length;k=k.concat(F.positions),E=E.concat(F.vectors),C=C.concat(F.vertexIntensity);for(var b=0;b<F.cells.length;b++){var D=F.cells[b],R=[];S.push(R);for(var O=0;O<D.length;O++)R.push(D[O]+I)}}return{positions:k,cells:S,vectors:E,vertexIntensity:C,colormap:l}},h=function(m,l){var x=m.length,u;for(u=0;u<x;u++){var A=m[u];if(A===l)return u;if(A>l)return u-1}return u},s=function(m,l,x){return m<l?l:m>x?x:m},o=function(m,l,x){var u=l.vectors,A=l.meshgrid,_=m[0],g=m[1],b=m[2],v=A[0].length,k=A[1].length,S=A[2].length,E=h(A[0],_),C=h(A[1],g),F=h(A[2],b),I=E+1,D=C+1,R=F+1;if(E=s(E,0,v-1),I=s(I,0,v-1),C=s(C,0,k-1),D=s(D,0,k-1),F=s(F,0,S-1),R=s(R,0,S-1),E<0||C<0||F<0||I>v-1||D>k-1||R>S-1)return e.create();var O=A[0][E],z=A[0][I],B=A[1][C],G=A[1][D],Q=A[2][F],X=A[2][R],j=(_-O)/(z-O),re=(g-B)/(G-B),ue=(b-Q)/(X-Q);isFinite(j)||(j=.5),isFinite(re)||(re=.5),isFinite(ue)||(ue=.5);var K,te,Y,H,ee,ne;switch(x.reversedX&&(E=v-1-E,I=v-1-I),x.reversedY&&(C=k-1-C,D=k-1-D),x.reversedZ&&(F=S-1-F,R=S-1-R),x.filled){case 5:ee=F,ne=R,Y=C*S,H=D*S,K=E*S*k,te=I*S*k;break;case 4:ee=F,ne=R,K=E*S,te=I*S,Y=C*S*v,H=D*S*v;break;case 3:Y=C,H=D,ee=F*k,ne=R*k,K=E*k*S,te=I*k*S;break;case 2:Y=C,H=D,K=E*k,te=I*k,ee=F*k*v,ne=R*k*v;break;case 1:K=E,te=I,ee=F*v,ne=R*v,Y=C*v*S,H=D*v*S;break;default:K=E,te=I,Y=C*v,H=D*v,ee=F*v*k,ne=R*v*k;break}var Z=u[K+Y+ee],q=u[K+Y+ne],ie=u[K+H+ee],se=u[K+H+ne],ae=u[te+Y+ee],oe=u[te+Y+ne],be=u[te+H+ee],ce=u[te+H+ne],de=e.create(),ye=e.create(),ge=e.create(),me=e.create();e.lerp(de,Z,ae,j),e.lerp(ye,q,oe,j),e.lerp(ge,ie,be,j),e.lerp(me,se,ce,j);var Se=e.create(),Le=e.create();e.lerp(Se,de,ge,re),e.lerp(Le,ye,me,re);var Oe=e.create();return e.lerp(Oe,Se,Le,ue),Oe},y=function(m){var l=1/0;m.sort(function(_,g){return _-g});for(var x=m.length,u=1;u<x;u++){var A=Math.abs(m[u]-m[u-1]);A<l&&(l=A)}return l},d=function(m){for(var l=[],x=[],u=[],A={},_={},g={},b=m.length,v=0;v<b;v++){var k=m[v],S=k[0],E=k[1],C=k[2];A[S]||(l.push(S),A[S]=!0),_[E]||(x.push(E),_[E]=!0),g[C]||(u.push(C),g[C]=!0)}var F=y(l),I=y(x),D=y(u),R=Math.min(F,I,D);return isFinite(R)?R:1};M.exports=function(m,l){var x=m.startingPositions,u=m.maxLength||1e3,A=m.tubeSize||1,_=m.absoluteTubeSize,g=m.gridFill||"+x+y+z",b={};g.indexOf("-x")!==-1&&(b.reversedX=!0),g.indexOf("-y")!==-1&&(b.reversedY=!0),g.indexOf("-z")!==-1&&(b.reversedZ=!0),b.filled=n.indexOf(g.replace(/-/g,"").replace(/\+/g,""));var v=m.getVelocity||function(oe){return o(oe,m,b)},k=m.getDivergence||function(oe,be){var ce=e.create(),de=1e-4;e.add(ce,oe,[de,0,0]);var ye=v(ce);e.subtract(ye,ye,be),e.scale(ye,ye,1/de),e.add(ce,oe,[0,de,0]);var ge=v(ce);e.subtract(ge,ge,be),e.scale(ge,ge,1/de),e.add(ce,oe,[0,0,de]);var me=v(ce);return e.subtract(me,me,be),e.scale(me,me,1/de),e.add(ce,ye,ge),e.add(ce,ce,me),ce},S=[],E=l[0][0],C=l[0][1],F=l[0][2],I=l[1][0],D=l[1][1],R=l[1][2],O=function(oe){var be=oe[0],ce=oe[1],de=oe[2];return!(be<E||be>I||ce<C||ce>D||de<F||de>R)},z=e.distance(l[0],l[1]),B=10*z/u,G=B*B,Q=1,X=0,j=x.length;j>1&&(Q=d(x));for(var re=0;re<j;re++){var ue=e.create();e.copy(ue,x[re]);var K=[ue],te=[],Y=v(ue),H=ue;te.push(Y);var ee=[],ne=k(ue,Y),Z=e.length(ne);isFinite(Z)&&Z>X&&(X=Z),ee.push(Z),S.push({points:K,velocities:te,divergences:ee});for(var q=0;q<u*100&&K.length<u&&O(ue);){q++;var ie=e.clone(Y),se=e.squaredLength(ie);if(se===0)break;if(se>G&&e.scale(ie,ie,B/Math.sqrt(se)),e.add(ie,ie,ue),Y=v(ie),e.squaredDistance(H,ie)-G>-1e-4*G){K.push(ie),H=ie,te.push(Y);var ne=k(ie,Y),Z=e.length(ne);isFinite(Z)&&Z>X&&(X=Z),ee.push(Z)}ue=ie}}var ae=t(S,m.colormap,X,Q);return _?ae.tubeScale=_:(X===0&&(X=1),ae.tubeScale=A*.5*Q/X),ae};var p=f("./lib/shaders"),c=f("gl-cone3d").createMesh;M.exports.createTubeMesh=function(m,l){return c(m,l,{shaders:p,traceType:"streamtube"})}},{"./lib/shaders":142,"gl-cone3d":79,"gl-vec3":169,"gl-vec4":205}],144:[function(f,M,T){var e=f("gl-shader"),a=f("glslify"),n=a([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute vec3 f;
attribute vec3 normal;

uniform vec3 objectOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 lightPosition, eyePosition;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 localCoordinate = vec3(uv.zw, f.x);
  worldCoordinate = objectOffset + localCoordinate;
  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);
  vec4 clipPosition = projection * view * worldPosition;
  gl_Position = clipPosition;
  kill = f.y;
  value = f.z;
  planeCoordinate = uv.xy;

  vColor = texture2D(colormap, vec2(value, value));

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * worldPosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  lightDirection = lightPosition - cameraCoordinate.xyz;
  eyeDirection   = eyePosition - cameraCoordinate.xyz;
  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);
}
`]),r=a([`precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float beckmannSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness) {
  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 lowerBound, upperBound;
uniform float contourTint;
uniform vec4 contourColor;
uniform sampler2D colormap;
uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform float vertexColor;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  if (
    kill > 0.0 ||
    vColor.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)
  ) discard;

  vec3 N = normalize(surfaceNormal);
  vec3 V = normalize(eyeDirection);
  vec3 L = normalize(lightDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  //decide how to interpolate color \u2014 in vertex or in fragment
  vec4 surfaceColor =
    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +
    step(.5, vertexColor) * vColor;

  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;
}
`]),t=a([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute float f;

uniform vec3 objectOffset;
uniform mat3 permutation;
uniform mat4 model, view, projection;
uniform float height, zOffset;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 dataCoordinate = permutation * vec3(uv.xy, height);
  worldCoordinate = objectOffset + dataCoordinate;
  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);

  vec4 clipPosition = projection * view * worldPosition;
  clipPosition.z += zOffset;

  gl_Position = clipPosition;
  value = f + objectOffset.z;
  kill = -1.0;
  planeCoordinate = uv.zw;

  vColor = texture2D(colormap, vec2(value, value));

  //Don't do lighting for contours
  surfaceNormal   = vec3(1,0,0);
  eyeDirection    = vec3(0,1,0);
  lightDirection  = vec3(0,0,1);
}
`]),h=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec2 shape;
uniform vec3 clipBounds[2];
uniform float pickId;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 surfaceNormal;

vec2 splitFloat(float v) {
  float vh = 255.0 * v;
  float upper = floor(vh);
  float lower = fract(vh);
  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);
}

void main() {
  if ((kill > 0.0) ||
      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;

  vec2 ux = splitFloat(planeCoordinate.x / shape.x);
  vec2 uy = splitFloat(planeCoordinate.y / shape.y);
  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));
}
`]);T.createShader=function(s){var o=e(s,n,r,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return o.attributes.uv.location=0,o.attributes.f.location=1,o.attributes.normal.location=2,o},T.createPickShader=function(s){var o=e(s,n,h,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return o.attributes.uv.location=0,o.attributes.f.location=1,o.attributes.normal.location=2,o},T.createContourShader=function(s){var o=e(s,t,r,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return o.attributes.uv.location=0,o.attributes.f.location=1,o},T.createPickContourShader=function(s){var o=e(s,t,h,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return o.attributes.uv.location=0,o.attributes.f.location=1,o}},{"gl-shader":132,glslify:231}],145:[function(f,M,T){M.exports=te;var e=f("bit-twiddle"),a=f("gl-buffer"),n=f("gl-vao"),r=f("gl-texture2d"),t=f("typedarray-pool"),h=f("colormap"),s=f("ndarray-ops"),o=f("ndarray-pack"),y=f("ndarray"),d=f("surface-nets"),p=f("gl-mat4/multiply"),c=f("gl-mat4/invert"),m=f("binary-search-bounds"),l=f("ndarray-gradient"),x=f("./lib/shaders"),u=x.createShader,A=x.createContourShader,_=x.createPickShader,g=x.createPickContourShader,b=4*(4+3+3),v=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],k=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],S=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];(function(){for(var Y=0;Y<3;++Y){var H=S[Y],ee=(Y+1)%3,ne=(Y+2)%3;H[ee+0]=1,H[ne+3]=1,H[Y+6]=1}})();function E(Y,H,ee,ne,Z){this.position=Y,this.index=H,this.uv=ee,this.level=ne,this.dataCoordinate=Z}var C=256;function F(Y,H,ee,ne,Z,q,ie,se,ae,oe,be,ce,de,ye,ge){this.gl=Y,this.shape=H,this.bounds=ee,this.objectOffset=ge,this.intensityBounds=[],this._shader=ne,this._pickShader=Z,this._coordinateBuffer=q,this._vao=ie,this._colorMap=se,this._contourShader=ae,this._contourPickShader=oe,this._contourBuffer=be,this._contourVAO=ce,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new E([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=de,this._dynamicVAO=ye,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[y(t.mallocFloat(1024),[0,0]),y(t.mallocFloat(1024),[0,0]),y(t.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}var I=F.prototype;I.genColormap=function(Y,H){var ee=!1,ne=o([h({colormap:Y,nshades:C,format:"rgba"}).map(function(Z,q){var ie=H?D(q/255,H):Z[3];return ie<1&&(ee=!0),[Z[0],Z[1],Z[2],255*ie]})]);return s.divseq(ne,255),this.hasAlphaScale=ee,ne},I.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},I.isOpaque=function(){return!this.isTransparent()},I.pickSlots=1,I.setPickBase=function(Y){this.pickId=Y};function D(Y,H){if(!H||!H.length)return 1;for(var ee=0;ee<H.length;++ee){if(H.length<2)return 1;if(H[ee][0]===Y)return H[ee][1];if(H[ee][0]>Y&&ee>0){var ne=(H[ee][0]-Y)/(H[ee][0]-H[ee-1][0]);return H[ee][1]*(1-ne)+ne*H[ee-1][1]}}return 1}var R=[0,0,0],O={showSurface:!1,showContour:!1,projections:[v.slice(),v.slice(),v.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function z(Y,H){var ee,ne,Z,q=H.axes&&H.axes.lastCubeProps.axis||R,ie=H.showSurface,se=H.showContour;for(ee=0;ee<3;++ee)for(ie=ie||H.surfaceProject[ee],ne=0;ne<3;++ne)se=se||H.contourProject[ee][ne];for(ee=0;ee<3;++ee){var ae=O.projections[ee];for(ne=0;ne<16;++ne)ae[ne]=0;for(ne=0;ne<4;++ne)ae[5*ne]=1;ae[5*ee]=0,ae[12+ee]=H.axesBounds[+(q[ee]>0)][ee],p(ae,Y.model,ae);var oe=O.clipBounds[ee];for(Z=0;Z<2;++Z)for(ne=0;ne<3;++ne)oe[Z][ne]=Y.clipBounds[Z][ne];oe[0][ee]=-1e8,oe[1][ee]=1e8}return O.showSurface=ie,O.showContour=se,O}var B={model:v,view:v,projection:v,inverseModel:v.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},G=v.slice(),Q=[1,0,0,0,1,0,0,0,1];function X(Y,H){Y=Y||{};var ee=this.gl;ee.disable(ee.CULL_FACE),this._colorMap.bind(0);var ne=B;ne.model=Y.model||v,ne.view=Y.view||v,ne.projection=Y.projection||v,ne.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],ne.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],ne.objectOffset=this.objectOffset,ne.contourColor=this.contourColor[0],ne.inverseModel=c(ne.inverseModel,ne.model);for(var Z=0;Z<2;++Z)for(var q=ne.clipBounds[Z],ie=0;ie<3;++ie)q[ie]=Math.min(Math.max(this.clipBounds[Z][ie],-1e8),1e8);ne.kambient=this.ambientLight,ne.kdiffuse=this.diffuseLight,ne.kspecular=this.specularLight,ne.roughness=this.roughness,ne.fresnel=this.fresnel,ne.opacity=this.opacity,ne.height=0,ne.permutation=Q,ne.vertexColor=this.vertexColor;var se=G;for(p(se,ne.view,ne.model),p(se,ne.projection,se),c(se,se),Z=0;Z<3;++Z)ne.eyePosition[Z]=se[12+Z]/se[15];var ae=se[15];for(Z=0;Z<3;++Z)ae+=this.lightPosition[Z]*se[4*Z+3];for(Z=0;Z<3;++Z){var oe=se[12+Z];for(ie=0;ie<3;++ie)oe+=se[4*ie+Z]*this.lightPosition[ie];ne.lightPosition[Z]=oe/ae}var be=z(ne,this);if(be.showSurface){for(this._shader.bind(),this._shader.uniforms=ne,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(ee.TRIANGLES,this._vertexCount),Z=0;Z<3;++Z)!this.surfaceProject[Z]||!this.vertexCount||(this._shader.uniforms.model=be.projections[Z],this._shader.uniforms.clipBounds=be.clipBounds[Z],this._vao.draw(ee.TRIANGLES,this._vertexCount));this._vao.unbind()}if(be.showContour){var ce=this._contourShader;ne.kambient=1,ne.kdiffuse=0,ne.kspecular=0,ne.opacity=1,ce.bind(),ce.uniforms=ne;var de=this._contourVAO;for(de.bind(),Z=0;Z<3;++Z)for(ce.uniforms.permutation=S[Z],ee.lineWidth(this.contourWidth[Z]*this.pixelRatio),ie=0;ie<this.contourLevels[Z].length;++ie)ie===this.highlightLevel[Z]?(ce.uniforms.contourColor=this.highlightColor[Z],ce.uniforms.contourTint=this.highlightTint[Z]):(ie===0||ie-1===this.highlightLevel[Z])&&(ce.uniforms.contourColor=this.contourColor[Z],ce.uniforms.contourTint=this.contourTint[Z]),this._contourCounts[Z][ie]&&(ce.uniforms.height=this.contourLevels[Z][ie],de.draw(ee.LINES,this._contourCounts[Z][ie],this._contourOffsets[Z][ie]));for(Z=0;Z<3;++Z)for(ce.uniforms.model=be.projections[Z],ce.uniforms.clipBounds=be.clipBounds[Z],ie=0;ie<3;++ie)if(!!this.contourProject[Z][ie]){ce.uniforms.permutation=S[ie],ee.lineWidth(this.contourWidth[ie]*this.pixelRatio);for(var ye=0;ye<this.contourLevels[ie].length;++ye)ye===this.highlightLevel[ie]?(ce.uniforms.contourColor=this.highlightColor[ie],ce.uniforms.contourTint=this.highlightTint[ie]):(ye===0||ye-1===this.highlightLevel[ie])&&(ce.uniforms.contourColor=this.contourColor[ie],ce.uniforms.contourTint=this.contourTint[ie]),this._contourCounts[ie][ye]&&(ce.uniforms.height=this.contourLevels[ie][ye],de.draw(ee.LINES,this._contourCounts[ie][ye],this._contourOffsets[ie][ye]))}for(de.unbind(),de=this._dynamicVAO,de.bind(),Z=0;Z<3;++Z)if(this._dynamicCounts[Z]!==0)for(ce.uniforms.model=ne.model,ce.uniforms.clipBounds=ne.clipBounds,ce.uniforms.permutation=S[Z],ee.lineWidth(this.dynamicWidth[Z]*this.pixelRatio),ce.uniforms.contourColor=this.dynamicColor[Z],ce.uniforms.contourTint=this.dynamicTint[Z],ce.uniforms.height=this.dynamicLevel[Z],de.draw(ee.LINES,this._dynamicCounts[Z],this._dynamicOffsets[Z]),ie=0;ie<3;++ie)!this.contourProject[ie][Z]||(ce.uniforms.model=be.projections[ie],ce.uniforms.clipBounds=be.clipBounds[ie],de.draw(ee.LINES,this._dynamicCounts[Z],this._dynamicOffsets[Z]));de.unbind()}}I.draw=function(Y){return X.call(this,Y,!1)},I.drawTransparent=function(Y){return X.call(this,Y,!0)};var j={model:v,view:v,projection:v,inverseModel:v,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};I.drawPick=function(Y){Y=Y||{};var H=this.gl;H.disable(H.CULL_FACE);var ee=j;ee.model=Y.model||v,ee.view=Y.view||v,ee.projection=Y.projection||v,ee.shape=this._field[2].shape,ee.pickId=this.pickId/255,ee.lowerBound=this.bounds[0],ee.upperBound=this.bounds[1],ee.objectOffset=this.objectOffset,ee.permutation=Q;for(var ne=0;ne<2;++ne)for(var Z=ee.clipBounds[ne],q=0;q<3;++q)Z[q]=Math.min(Math.max(this.clipBounds[ne][q],-1e8),1e8);var ie=z(ee,this);if(ie.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=ee,this._vao.bind(),this._vao.draw(H.TRIANGLES,this._vertexCount),ne=0;ne<3;++ne)!this.surfaceProject[ne]||(this._pickShader.uniforms.model=ie.projections[ne],this._pickShader.uniforms.clipBounds=ie.clipBounds[ne],this._vao.draw(H.TRIANGLES,this._vertexCount));this._vao.unbind()}if(ie.showContour){var se=this._contourPickShader;se.bind(),se.uniforms=ee;var ae=this._contourVAO;for(ae.bind(),q=0;q<3;++q)for(H.lineWidth(this.contourWidth[q]*this.pixelRatio),se.uniforms.permutation=S[q],ne=0;ne<this.contourLevels[q].length;++ne)this._contourCounts[q][ne]&&(se.uniforms.height=this.contourLevels[q][ne],ae.draw(H.LINES,this._contourCounts[q][ne],this._contourOffsets[q][ne]));for(ne=0;ne<3;++ne)for(se.uniforms.model=ie.projections[ne],se.uniforms.clipBounds=ie.clipBounds[ne],q=0;q<3;++q)if(!!this.contourProject[ne][q]){se.uniforms.permutation=S[q],H.lineWidth(this.contourWidth[q]*this.pixelRatio);for(var oe=0;oe<this.contourLevels[q].length;++oe)this._contourCounts[q][oe]&&(se.uniforms.height=this.contourLevels[q][oe],ae.draw(H.LINES,this._contourCounts[q][oe],this._contourOffsets[q][oe]))}ae.unbind()}},I.pick=function(Y){if(!Y||Y.id!==this.pickId)return null;var H=this._field[2].shape,ee=this._pickResult,ne=H[0]*(Y.value[0]+(Y.value[2]>>4)/16)/255,Z=Math.floor(ne),q=ne-Z,ie=H[1]*(Y.value[1]+(Y.value[2]&15)/16)/255,se=Math.floor(ie),ae=ie-se;Z+=1,se+=1;var oe=ee.position;oe[0]=oe[1]=oe[2]=0;for(var be=0;be<2;++be)for(var ce=be?q:1-q,de=0;de<2;++de)for(var ye=de?ae:1-ae,ge=Z+be,me=se+de,Se=ce*ye,Le=0;Le<3;++Le)oe[Le]+=this._field[Le].get(ge,me)*Se;for(var Oe=this._pickResult.level,we=0;we<3;++we)if(Oe[we]=m.le(this.contourLevels[we],oe[we]),Oe[we]<0)this.contourLevels[we].length>0&&(Oe[we]=0);else if(Oe[we]<this.contourLevels[we].length-1){var Ce=this.contourLevels[we][Oe[we]],Ke=this.contourLevels[we][Oe[we]+1];Math.abs(Ce-oe[we])>Math.abs(Ke-oe[we])&&(Oe[we]+=1)}for(ee.index[0]=q<.5?Z:Z+1,ee.index[1]=ae<.5?se:se+1,ee.uv[0]=ne/H[0],ee.uv[1]=ie/H[1],Le=0;Le<3;++Le)ee.dataCoordinate[Le]=this._field[Le].get(ee.index[0],ee.index[1]);return ee},I.padField=function(Y,H){var ee=H.shape.slice(),ne=Y.shape.slice();s.assign(Y.lo(1,1).hi(ee[0],ee[1]),H),s.assign(Y.lo(1).hi(ee[0],1),H.hi(ee[0],1)),s.assign(Y.lo(1,ne[1]-1).hi(ee[0],1),H.lo(0,ee[1]-1).hi(ee[0],1)),s.assign(Y.lo(0,1).hi(1,ee[1]),H.hi(1)),s.assign(Y.lo(ne[0]-1,1).hi(1,ee[1]),H.lo(ee[0]-1)),Y.set(0,0,H.get(0,0)),Y.set(0,ne[1]-1,H.get(0,ee[1]-1)),Y.set(ne[0]-1,0,H.get(ee[0]-1,0)),Y.set(ne[0]-1,ne[1]-1,H.get(ee[0]-1,ee[1]-1))};function re(Y,H){return Array.isArray(Y)?[H(Y[0]),H(Y[1]),H(Y[2])]:[H(Y),H(Y),H(Y)]}function ue(Y){return Array.isArray(Y)?Y.length===3?[Y[0],Y[1],Y[2],1]:[Y[0],Y[1],Y[2],Y[3]]:[0,0,0,1]}function K(Y){if(Array.isArray(Y)){if(Array.isArray(Y))return[ue(Y[0]),ue(Y[1]),ue(Y[2])];var H=ue(Y);return[H.slice(),H.slice(),H.slice()]}}I.update=function(Y){Y=Y||{},this.objectOffset=Y.objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in Y&&(this.contourWidth=re(Y.contourWidth,Number)),"showContour"in Y&&(this.showContour=re(Y.showContour,Boolean)),"showSurface"in Y&&(this.showSurface=!!Y.showSurface),"contourTint"in Y&&(this.contourTint=re(Y.contourTint,Boolean)),"contourColor"in Y&&(this.contourColor=K(Y.contourColor)),"contourProject"in Y&&(this.contourProject=re(Y.contourProject,function(ft){return re(ft,Boolean)})),"surfaceProject"in Y&&(this.surfaceProject=Y.surfaceProject),"dynamicColor"in Y&&(this.dynamicColor=K(Y.dynamicColor)),"dynamicTint"in Y&&(this.dynamicTint=re(Y.dynamicTint,Number)),"dynamicWidth"in Y&&(this.dynamicWidth=re(Y.dynamicWidth,Number)),"opacity"in Y&&(this.opacity=Y.opacity),"opacityscale"in Y&&(this.opacityscale=Y.opacityscale),"colorBounds"in Y&&(this.colorBounds=Y.colorBounds),"vertexColor"in Y&&(this.vertexColor=Y.vertexColor?1:0),"colormap"in Y&&this._colorMap.setPixels(this.genColormap(Y.colormap,this.opacityscale));var H=Y.field||Y.coords&&Y.coords[2]||null,ee=!1;if(H||(this._field[2].shape[0]||this._field[2].shape[2]?H=this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):H=this._field[2].hi(0,0)),"field"in Y||"coords"in Y){var ne=(H.shape[0]+2)*(H.shape[1]+2);ne>this._field[2].data.length&&(t.freeFloat(this._field[2].data),this._field[2].data=t.mallocFloat(e.nextPow2(ne))),this._field[2]=y(this._field[2].data,[H.shape[0]+2,H.shape[1]+2]),this.padField(this._field[2],H),this.shape=H.shape.slice();for(var Z=this.shape,q=0;q<2;++q)this._field[2].size>this._field[q].data.length&&(t.freeFloat(this._field[q].data),this._field[q].data=t.mallocFloat(this._field[2].size)),this._field[q]=y(this._field[q].data,[Z[0]+2,Z[1]+2]);if(Y.coords){var ie=Y.coords;if(!Array.isArray(ie)||ie.length!==3)throw new Error("gl-surface: invalid coordinates for x/y");for(q=0;q<2;++q){var se=ie[q];for(de=0;de<2;++de)if(se.shape[de]!==Z[de])throw new Error("gl-surface: coords have incorrect shape");this.padField(this._field[q],se)}}else if(Y.ticks){var ae=Y.ticks;if(!Array.isArray(ae)||ae.length!==2)throw new Error("gl-surface: invalid ticks");for(q=0;q<2;++q){var oe=ae[q];if((Array.isArray(oe)||oe.length)&&(oe=y(oe)),oe.shape[0]!==Z[q])throw new Error("gl-surface: invalid tick length");var be=y(oe.data,Z);be.stride[q]=oe.stride[0],be.stride[q^1]=0,this.padField(this._field[q],be)}}else{for(q=0;q<2;++q){var ce=[0,0];ce[q]=1,this._field[q]=y(this._field[q].data,[Z[0]+2,Z[1]+2],ce,0)}this._field[0].set(0,0,0);for(var de=0;de<Z[0];++de)this._field[0].set(de+1,0,de);for(this._field[0].set(Z[0]+1,0,Z[0]-1),this._field[1].set(0,0,0),de=0;de<Z[1];++de)this._field[1].set(0,de+1,de);this._field[1].set(0,Z[1]+1,Z[1]-1)}var ye=this._field,ge=y(t.mallocFloat(ye[2].size*3*2),[3,Z[0]+2,Z[1]+2,2]);for(q=0;q<3;++q)l(ge.pick(q),ye[q],"mirror");var me=y(t.mallocFloat(ye[2].size*3),[Z[0]+2,Z[1]+2,3]);for(q=0;q<Z[0]+2;++q)for(de=0;de<Z[1]+2;++de){var Se=ge.get(0,q,de,0),Le=ge.get(0,q,de,1),Oe=ge.get(1,q,de,0),we=ge.get(1,q,de,1),Ce=ge.get(2,q,de,0),Ke=ge.get(2,q,de,1),Ye=Oe*Ke-we*Ce,Fe=Ce*Le-Ke*Se,Re=Se*we-Le*Oe,je=Math.sqrt(Ye*Ye+Fe*Fe+Re*Re);je<1e-8?(je=Math.max(Math.abs(Ye),Math.abs(Fe),Math.abs(Re)),je<1e-8?(Re=1,Fe=Ye=0,je=1):je=1/je):je=1/Math.sqrt(je),me.set(q,de,0,Ye*je),me.set(q,de,1,Fe*je),me.set(q,de,2,Re*je)}t.free(ge.data);var xt=[1/0,1/0,1/0],Nt=[-1/0,-1/0,-1/0],tr=1/0,Ht=-1/0,Pt=(Z[0]-1)*(Z[1]-1)*6,$t=t.mallocFloat(e.nextPow2(10*Pt)),Ut=0,Lt=0;for(q=0;q<Z[0]-1;++q){e:for(de=0;de<Z[1]-1;++de){for(var We=0;We<2;++We)for(var ot=0;ot<2;++ot)for(var Ge=0;Ge<3;++Ge){var Me=this._field[Ge].get(1+q+We,1+de+ot);if(isNaN(Me)||!isFinite(Me))continue e}for(Ge=0;Ge<6;++Ge){var Ve=q+k[Ge][0],Qe=de+k[Ge][1],tt=this._field[0].get(Ve+1,Qe+1),St=this._field[1].get(Ve+1,Qe+1);Me=this._field[2].get(Ve+1,Qe+1),Ye=me.get(Ve+1,Qe+1,0),Fe=me.get(Ve+1,Qe+1,1),Re=me.get(Ve+1,Qe+1,2),Y.intensity&&(wt=Y.intensity.get(Ve,Qe));var wt=Y.intensity?Y.intensity.get(Ve,Qe):Me+this.objectOffset[2];$t[Ut++]=Ve,$t[Ut++]=Qe,$t[Ut++]=tt,$t[Ut++]=St,$t[Ut++]=Me,$t[Ut++]=0,$t[Ut++]=wt,$t[Ut++]=Ye,$t[Ut++]=Fe,$t[Ut++]=Re,xt[0]=Math.min(xt[0],tt+this.objectOffset[0]),xt[1]=Math.min(xt[1],St+this.objectOffset[1]),xt[2]=Math.min(xt[2],Me+this.objectOffset[2]),tr=Math.min(tr,wt),Nt[0]=Math.max(Nt[0],tt+this.objectOffset[0]),Nt[1]=Math.max(Nt[1],St+this.objectOffset[1]),Nt[2]=Math.max(Nt[2],Me+this.objectOffset[2]),Ht=Math.max(Ht,wt),Lt+=1}}}for(Y.intensityBounds&&(tr=+Y.intensityBounds[0],Ht=+Y.intensityBounds[1]),q=6;q<Ut;q+=10)$t[q]=($t[q]-tr)/(Ht-tr);this._vertexCount=Lt,this._coordinateBuffer.update($t.subarray(0,Ut)),t.freeFloat($t),t.free(me.data),this.bounds=[xt,Nt],this.intensity=Y.intensity||this._field[2],(this.intensityBounds[0]!==tr||this.intensityBounds[1]!==Ht)&&(ee=!0),this.intensityBounds=[tr,Ht]}if("levels"in Y){var Ct=Y.levels;for(Array.isArray(Ct[0])?Ct=Ct.slice():Ct=[[],[],Ct],q=0;q<3;++q)Ct[q]=Ct[q].slice(),Ct[q].sort(function(ft,yt){return ft-yt});for(q=0;q<3;++q)for(de=0;de<Ct[q].length;++de)Ct[q][de]-=this.objectOffset[q];e:for(q=0;q<3;++q){if(Ct[q].length!==this.contourLevels[q].length){ee=!0;break}for(de=0;de<Ct[q].length;++de)if(Ct[q][de]!==this.contourLevels[q][de]){ee=!0;break e}}this.contourLevels=Ct}if(ee){ye=this._field,Z=this.shape;for(var jt=[],Bt=0;Bt<3;++Bt){var Wt=this.contourLevels[Bt],Qt=[],Zt=[],cr=[0,0,0];for(q=0;q<Wt.length;++q){var Xr=d(this._field[Bt],Wt[q]);Qt.push(jt.length/5|0),Lt=0;e:for(de=0;de<Xr.cells.length;++de){var vn=Xr.cells[de];for(Ge=0;Ge<2;++Ge){var en=Xr.positions[vn[Ge]],ut=en[0],ar=Math.floor(ut)|0,rr=ut-ar,Kt=en[1],Er=Math.floor(Kt)|0,st=Kt-Er,et=!1;t:for(var ht=0;ht<3;++ht){cr[ht]=0;var vt=(Bt+ht+1)%3;for(We=0;We<2;++We){var kt=We?rr:1-rr;for(Ve=Math.min(Math.max(ar+We,0),Z[0])|0,ot=0;ot<2;++ot){var Vt=ot?st:1-st;if(Qe=Math.min(Math.max(Er+ot,0),Z[1])|0,ht<2?Me=this._field[vt].get(Ve,Qe):Me=(this.intensity.get(Ve,Qe)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(Me)||isNaN(Me)){et=!0;break t}var Pe=kt*Vt;cr[ht]+=Pe*Me}}}if(!et)jt.push(cr[0],cr[1],en[0],en[1],cr[2]),Lt+=1;else{if(Ge>0){for(var ke=0;ke<5;++ke)jt.pop();Lt-=1}continue e}}}Zt.push(Lt)}this._contourOffsets[Bt]=Qt,this._contourCounts[Bt]=Zt}var lt=t.mallocFloat(jt.length);for(q=0;q<jt.length;++q)lt[q]=jt[q];this._contourBuffer.update(lt),t.freeFloat(lt)}},I.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var Y=0;Y<3;++Y)t.freeFloat(this._field[Y].data)},I.highlight=function(Y){var H;if(!Y){this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],this.highlightLevel=[-1,-1,-1];return}for(H=0;H<3;++H)this.enableHighlight[H]?this.highlightLevel[H]=Y.level[H]:this.highlightLevel[H]=-1;var ee;for(this.snapToData?ee=Y.dataCoordinate:ee=Y.position,H=0;H<3;++H)ee[H]-=this.objectOffset[H];if(!((!this.enableDynamic[0]||ee[0]===this.dynamicLevel[0])&&(!this.enableDynamic[1]||ee[1]===this.dynamicLevel[1])&&(!this.enableDynamic[2]||ee[2]===this.dynamicLevel[2]))){for(var ne=0,Z=this.shape,q=t.mallocFloat(12*Z[0]*Z[1]),ie=0;ie<3;++ie){if(!this.enableDynamic[ie]){this.dynamicLevel[ie]=NaN,this._dynamicCounts[ie]=0;continue}this.dynamicLevel[ie]=ee[ie];var se=(ie+1)%3,ae=(ie+2)%3,oe=this._field[ie],be=this._field[se],ce=this._field[ae],de=d(oe,ee[ie]),ye=de.cells,ge=de.positions;for(this._dynamicOffsets[ie]=ne,H=0;H<ye.length;++H)for(var me=ye[H],Se=0;Se<2;++Se){var Le=ge[me[Se]],Oe=+Le[0],we=Oe|0,Ce=Math.min(we+1,Z[0])|0,Ke=Oe-we,Ye=1-Ke,Fe=+Le[1],Re=Fe|0,je=Math.min(Re+1,Z[1])|0,xt=Fe-Re,Nt=1-xt,tr=Ye*Nt,Ht=Ye*xt,Pt=Ke*Nt,$t=Ke*xt,Ut=tr*be.get(we,Re)+Ht*be.get(we,je)+Pt*be.get(Ce,Re)+$t*be.get(Ce,je),Lt=tr*ce.get(we,Re)+Ht*ce.get(we,je)+Pt*ce.get(Ce,Re)+$t*ce.get(Ce,je);if(isNaN(Ut)||isNaN(Lt)){Se&&(ne-=1);break}q[2*ne+0]=Ut,q[2*ne+1]=Lt,ne+=1}this._dynamicCounts[ie]=ne-this._dynamicOffsets[ie]}this._dynamicBuffer.update(q.subarray(0,2*ne)),t.freeFloat(q)}};function te(Y){var H=Y.gl,ee=u(H),ne=_(H),Z=A(H),q=g(H),ie=a(H),se=n(H,[{buffer:ie,size:4,stride:b,offset:0},{buffer:ie,size:3,stride:b,offset:16},{buffer:ie,size:3,stride:b,offset:28}]),ae=a(H),oe=n(H,[{buffer:ae,size:4,stride:20,offset:0},{buffer:ae,size:1,stride:20,offset:16}]),be=a(H),ce=n(H,[{buffer:be,size:2,type:H.FLOAT}]),de=r(H,1,C,H.RGBA,H.UNSIGNED_BYTE);de.minFilter=H.LINEAR,de.magFilter=H.LINEAR;var ye=new F(H,[0,0],[[0,0,0],[0,0,0]],ee,ne,ie,se,de,Z,q,ae,oe,be,ce,[0,0,0]),ge={levels:[[],[],[]]};for(var me in Y)ge[me]=Y[me];return ge.colormap=ge.colormap||"jet",ye.update(ge),ye}},{"./lib/shaders":144,"binary-search-bounds":31,"bit-twiddle":32,colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-texture2d":146,"gl-vao":150,ndarray:259,"ndarray-gradient":252,"ndarray-ops":254,"ndarray-pack":255,"surface-nets":302,"typedarray-pool":308}],146:[function(f,M,T){var e=f("ndarray"),a=f("ndarray-ops"),n=f("typedarray-pool");M.exports=g;var r=null,t=null,h=null;function s(b){r=[b.LINEAR,b.NEAREST_MIPMAP_LINEAR,b.LINEAR_MIPMAP_NEAREST,b.LINEAR_MIPMAP_NEAREST],t=[b.NEAREST,b.LINEAR,b.NEAREST_MIPMAP_NEAREST,b.NEAREST_MIPMAP_LINEAR,b.LINEAR_MIPMAP_NEAREST,b.LINEAR_MIPMAP_LINEAR],h=[b.REPEAT,b.CLAMP_TO_EDGE,b.MIRRORED_REPEAT]}function o(b){return typeof HTMLCanvasElement<"u"&&b instanceof HTMLCanvasElement||typeof HTMLImageElement<"u"&&b instanceof HTMLImageElement||typeof HTMLVideoElement<"u"&&b instanceof HTMLVideoElement||typeof ImageData<"u"&&b instanceof ImageData}var y=function(b,v){a.muls(b,v,255)};function d(b,v,k){var S=b.gl,E=S.getParameter(S.MAX_TEXTURE_SIZE);if(v<0||v>E||k<0||k>E)throw new Error("gl-texture2d: Invalid texture size");return b._shape=[v,k],b.bind(),S.texImage2D(S.TEXTURE_2D,0,b.format,v,k,0,b.format,b.type,null),b._mipLevels=[0],b}function p(b,v,k,S,E,C){this.gl=b,this.handle=v,this.format=E,this.type=C,this._shape=[k,S],this._mipLevels=[0],this._magFilter=b.NEAREST,this._minFilter=b.NEAREST,this._wrapS=b.CLAMP_TO_EDGE,this._wrapT=b.CLAMP_TO_EDGE,this._anisoSamples=1;var F=this,I=[this._wrapS,this._wrapT];Object.defineProperties(I,[{get:function(){return F._wrapS},set:function(R){return F.wrapS=R}},{get:function(){return F._wrapT},set:function(R){return F.wrapT=R}}]),this._wrapVector=I;var D=[this._shape[0],this._shape[1]];Object.defineProperties(D,[{get:function(){return F._shape[0]},set:function(R){return F.width=R}},{get:function(){return F._shape[1]},set:function(R){return F.height=R}}]),this._shapeVector=D}var c=p.prototype;Object.defineProperties(c,{minFilter:{get:function(){return this._minFilter},set:function(b){this.bind();var v=this.gl;if(this.type===v.FLOAT&&r.indexOf(b)>=0&&(v.getExtension("OES_texture_float_linear")||(b=v.NEAREST)),t.indexOf(b)<0)throw new Error("gl-texture2d: Unknown filter mode "+b);return v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,b),this._minFilter=b}},magFilter:{get:function(){return this._magFilter},set:function(b){this.bind();var v=this.gl;if(this.type===v.FLOAT&&r.indexOf(b)>=0&&(v.getExtension("OES_texture_float_linear")||(b=v.NEAREST)),t.indexOf(b)<0)throw new Error("gl-texture2d: Unknown filter mode "+b);return v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,b),this._magFilter=b}},mipSamples:{get:function(){return this._anisoSamples},set:function(b){var v=this._anisoSamples;if(this._anisoSamples=Math.max(b,1)|0,v!==this._anisoSamples){var k=this.gl.getExtension("EXT_texture_filter_anisotropic");k&&this.gl.texParameterf(this.gl.TEXTURE_2D,k.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(b){if(this.bind(),h.indexOf(b)<0)throw new Error("gl-texture2d: Unknown wrap mode "+b);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,b),this._wrapS=b}},wrapT:{get:function(){return this._wrapT},set:function(b){if(this.bind(),h.indexOf(b)<0)throw new Error("gl-texture2d: Unknown wrap mode "+b);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,b),this._wrapT=b}},wrap:{get:function(){return this._wrapVector},set:function(b){if(Array.isArray(b)||(b=[b,b]),b.length!==2)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var v=0;v<2;++v)if(h.indexOf(b[v])<0)throw new Error("gl-texture2d: Unknown wrap mode "+b);this._wrapS=b[0],this._wrapT=b[1];var k=this.gl;return this.bind(),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_S,this._wrapS),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_T,this._wrapT),b}},shape:{get:function(){return this._shapeVector},set:function(b){if(!Array.isArray(b))b=[b|0,b|0];else if(b.length!==2)throw new Error("gl-texture2d: Invalid texture shape");return d(this,b[0]|0,b[1]|0),[b[0]|0,b[1]|0]}},width:{get:function(){return this._shape[0]},set:function(b){return b=b|0,d(this,b,this._shape[1]),b}},height:{get:function(){return this._shape[1]},set:function(b){return b=b|0,d(this,this._shape[0],b),b}}}),c.bind=function(b){var v=this.gl;return b!==void 0&&v.activeTexture(v.TEXTURE0+(b|0)),v.bindTexture(v.TEXTURE_2D,this.handle),b!==void 0?b|0:v.getParameter(v.ACTIVE_TEXTURE)-v.TEXTURE0},c.dispose=function(){this.gl.deleteTexture(this.handle)},c.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var b=Math.min(this._shape[0],this._shape[1]),v=0;b>0;++v,b>>>=1)this._mipLevels.indexOf(v)<0&&this._mipLevels.push(v)},c.setPixels=function(b,v,k,S){var E=this.gl;this.bind(),Array.isArray(v)?(S=k,k=v[1]|0,v=v[0]|0):(v=v||0,k=k||0),S=S||0;var C=o(b)?b:b.raw;if(C){var F=this._mipLevels.indexOf(S)<0;F?(E.texImage2D(E.TEXTURE_2D,0,this.format,this.format,this.type,C),this._mipLevels.push(S)):E.texSubImage2D(E.TEXTURE_2D,S,v,k,this.format,this.type,C)}else if(b.shape&&b.stride&&b.data){if(b.shape.length<2||v+b.shape[1]>this._shape[1]>>>S||k+b.shape[0]>this._shape[0]>>>S||v<0||k<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");l(E,v,k,S,this.format,this.type,this._mipLevels,b)}else throw new Error("gl-texture2d: Unsupported data type")};function m(b,v){return b.length===3?v[2]===1&&v[1]===b[0]*b[2]&&v[0]===b[2]:v[0]===1&&v[1]===b[0]}function l(b,v,k,S,E,C,F,I){var D=I.dtype,R=I.shape.slice();if(R.length<2||R.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var O=0,z=0,B=m(R,I.stride.slice());if(D==="float32"?O=b.FLOAT:D==="float64"?(O=b.FLOAT,B=!1,D="float32"):D==="uint8"?O=b.UNSIGNED_BYTE:(O=b.UNSIGNED_BYTE,B=!1,D="uint8"),R.length===2)z=b.LUMINANCE,R=[R[0],R[1],1],I=e(I.data,R,[I.stride[0],I.stride[1],1],I.offset);else if(R.length===3){if(R[2]===1)z=b.ALPHA;else if(R[2]===2)z=b.LUMINANCE_ALPHA;else if(R[2]===3)z=b.RGB;else if(R[2]===4)z=b.RGBA;else throw new Error("gl-texture2d: Invalid shape for pixel coords");R[2]}else throw new Error("gl-texture2d: Invalid shape for texture");if((z===b.LUMINANCE||z===b.ALPHA)&&(E===b.LUMINANCE||E===b.ALPHA)&&(z=E),z!==E)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var G=I.size,Q=F.indexOf(S)<0;if(Q&&F.push(S),O===C&&B)I.offset===0&&I.data.length===G?Q?b.texImage2D(b.TEXTURE_2D,S,E,R[0],R[1],0,E,C,I.data):b.texSubImage2D(b.TEXTURE_2D,S,v,k,R[0],R[1],E,C,I.data):Q?b.texImage2D(b.TEXTURE_2D,S,E,R[0],R[1],0,E,C,I.data.subarray(I.offset,I.offset+G)):b.texSubImage2D(b.TEXTURE_2D,S,v,k,R[0],R[1],E,C,I.data.subarray(I.offset,I.offset+G));else{var X;C===b.FLOAT?X=n.mallocFloat32(G):X=n.mallocUint8(G);var j=e(X,R,[R[2],R[2]*R[0],1]);O===b.FLOAT&&C===b.UNSIGNED_BYTE?y(j,I):a.assign(j,I),Q?b.texImage2D(b.TEXTURE_2D,S,E,R[0],R[1],0,E,C,X.subarray(0,G)):b.texSubImage2D(b.TEXTURE_2D,S,v,k,R[0],R[1],E,C,X.subarray(0,G)),C===b.FLOAT?n.freeFloat32(X):n.freeUint8(X)}}function x(b){var v=b.createTexture();return b.bindTexture(b.TEXTURE_2D,v),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE),v}function u(b,v,k,S,E){var C=b.getParameter(b.MAX_TEXTURE_SIZE);if(v<0||v>C||k<0||k>C)throw new Error("gl-texture2d: Invalid texture shape");if(E===b.FLOAT&&!b.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var F=x(b);return b.texImage2D(b.TEXTURE_2D,0,S,v,k,0,S,E,null),new p(b,F,v,k,S,E)}function A(b,v,k,S,E,C){var F=x(b);return b.texImage2D(b.TEXTURE_2D,0,E,E,C,v),new p(b,F,k,S,E,C)}function _(b,v){var k=v.dtype,S=v.shape.slice(),E=b.getParameter(b.MAX_TEXTURE_SIZE);if(S[0]<0||S[0]>E||S[1]<0||S[1]>E)throw new Error("gl-texture2d: Invalid texture size");var C=m(S,v.stride.slice()),F=0;k==="float32"?F=b.FLOAT:k==="float64"?(F=b.FLOAT,C=!1,k="float32"):k==="uint8"?F=b.UNSIGNED_BYTE:(F=b.UNSIGNED_BYTE,C=!1,k="uint8");var I=0;if(S.length===2)I=b.LUMINANCE,S=[S[0],S[1],1],v=e(v.data,S,[v.stride[0],v.stride[1],1],v.offset);else if(S.length===3)if(S[2]===1)I=b.ALPHA;else if(S[2]===2)I=b.LUMINANCE_ALPHA;else if(S[2]===3)I=b.RGB;else if(S[2]===4)I=b.RGBA;else throw new Error("gl-texture2d: Invalid shape for pixel coords");else throw new Error("gl-texture2d: Invalid shape for texture");F===b.FLOAT&&!b.getExtension("OES_texture_float")&&(F=b.UNSIGNED_BYTE,C=!1);var D,R,O=v.size;if(C)v.offset===0&&v.data.length===O?D=v.data:D=v.data.subarray(v.offset,v.offset+O);else{var z=[S[2],S[2]*S[0],1];R=n.malloc(O,k);var B=e(R,S,z,0);(k==="float32"||k==="float64")&&F===b.UNSIGNED_BYTE?y(B,v):a.assign(B,v),D=R.subarray(0,O)}var G=x(b);return b.texImage2D(b.TEXTURE_2D,0,I,S[0],S[1],0,I,F,D),C||n.free(R),new p(b,G,S[0],S[1],I,F)}function g(b){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(r||s(b),typeof arguments[1]=="number")return u(b,arguments[1],arguments[2],arguments[3]||b.RGBA,arguments[4]||b.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return u(b,arguments[1][0]|0,arguments[1][1]|0,arguments[2]||b.RGBA,arguments[3]||b.UNSIGNED_BYTE);if(typeof arguments[1]=="object"){var v=arguments[1],k=o(v)?v:v.raw;if(k)return A(b,k,v.width|0,v.height|0,arguments[2]||b.RGBA,arguments[3]||b.UNSIGNED_BYTE);if(v.shape&&v.data&&v.stride)return _(b,v)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")}},{ndarray:259,"ndarray-ops":254,"typedarray-pool":308}],147:[function(f,M,T){function e(a,n,r){n?n.bind():a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,null);var t=a.getParameter(a.MAX_VERTEX_ATTRIBS)|0;if(r){if(r.length>t)throw new Error("gl-vao: Too many vertex attributes");for(var h=0;h<r.length;++h){var s=r[h];if(s.buffer){var o=s.buffer,y=s.size||4,d=s.type||a.FLOAT,p=!!s.normalized,c=s.stride||0,m=s.offset||0;o.bind(),a.enableVertexAttribArray(h),a.vertexAttribPointer(h,y,d,p,c,m)}else{if(typeof s=="number")a.vertexAttrib1f(h,s);else if(s.length===1)a.vertexAttrib1f(h,s[0]);else if(s.length===2)a.vertexAttrib2f(h,s[0],s[1]);else if(s.length===3)a.vertexAttrib3f(h,s[0],s[1],s[2]);else if(s.length===4)a.vertexAttrib4f(h,s[0],s[1],s[2],s[3]);else throw new Error("gl-vao: Invalid vertex attribute");a.disableVertexAttribArray(h)}}for(;h<t;++h)a.disableVertexAttribArray(h)}else{a.bindBuffer(a.ARRAY_BUFFER,null);for(var h=0;h<t;++h)a.disableVertexAttribArray(h)}}M.exports=e},{}],148:[function(f,M,T){var e=f("./do-bind.js");function a(r){this.gl=r,this._elements=null,this._attributes=null,this._elementsType=r.UNSIGNED_SHORT}a.prototype.bind=function(){e(this.gl,this._elements,this._attributes)},a.prototype.update=function(r,t,h){this._elements=t,this._attributes=r,this._elementsType=h||this.gl.UNSIGNED_SHORT},a.prototype.dispose=function(){},a.prototype.unbind=function(){},a.prototype.draw=function(r,t,h){h=h||0;var s=this.gl;this._elements?s.drawElements(r,t,this._elementsType,h):s.drawArrays(r,h,t)};function n(r){return new a(r)}M.exports=n},{"./do-bind.js":147}],149:[function(f,M,T){var e=f("./do-bind.js");function a(t,h,s,o,y,d){this.location=t,this.dimension=h,this.a=s,this.b=o,this.c=y,this.d=d}a.prototype.bind=function(t){switch(this.dimension){case 1:t.vertexAttrib1f(this.location,this.a);break;case 2:t.vertexAttrib2f(this.location,this.a,this.b);break;case 3:t.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:t.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d);break}};function n(t,h,s){this.gl=t,this._ext=h,this.handle=s,this._attribs=[],this._useElements=!1,this._elementsType=t.UNSIGNED_SHORT}n.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var t=0;t<this._attribs.length;++t)this._attribs[t].bind(this.gl)},n.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},n.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},n.prototype.update=function(t,h,s){if(this.bind(),e(this.gl,h,t),this.unbind(),this._attribs.length=0,t)for(var o=0;o<t.length;++o){var y=t[o];typeof y=="number"?this._attribs.push(new a(o,1,y)):Array.isArray(y)&&this._attribs.push(new a(o,y.length,y[0],y[1],y[2],y[3]))}this._useElements=!!h,this._elementsType=s||this.gl.UNSIGNED_SHORT},n.prototype.draw=function(t,h,s){s=s||0;var o=this.gl;this._useElements?o.drawElements(t,h,this._elementsType,s):o.drawArrays(t,s,h)};function r(t,h){return new n(t,h,h.createVertexArrayOES())}M.exports=r},{"./do-bind.js":147}],150:[function(f,M,T){var e=f("./lib/vao-native.js"),a=f("./lib/vao-emulated.js");function n(t){this.bindVertexArrayOES=t.bindVertexArray.bind(t),this.createVertexArrayOES=t.createVertexArray.bind(t),this.deleteVertexArrayOES=t.deleteVertexArray.bind(t)}function r(t,h,s,o){var y=t.createVertexArray?new n(t):t.getExtension("OES_vertex_array_object"),d;return y?d=e(t,y):d=a(t),d.update(h,s,o),d}M.exports=r},{"./lib/vao-emulated.js":148,"./lib/vao-native.js":149}],151:[function(f,M,T){M.exports=e;function e(a,n,r){return a[0]=n[0]+r[0],a[1]=n[1]+r[1],a[2]=n[2]+r[2],a}},{}],152:[function(f,M,T){M.exports=r;var e=f("./fromValues"),a=f("./normalize"),n=f("./dot");function r(t,h){var s=e(t[0],t[1],t[2]),o=e(h[0],h[1],h[2]);a(s,s),a(o,o);var y=n(s,o);return y>1?0:Math.acos(y)}},{"./dot":162,"./fromValues":168,"./normalize":179}],153:[function(f,M,T){M.exports=e;function e(a,n){return a[0]=Math.ceil(n[0]),a[1]=Math.ceil(n[1]),a[2]=Math.ceil(n[2]),a}},{}],154:[function(f,M,T){M.exports=e;function e(a){var n=new Float32Array(3);return n[0]=a[0],n[1]=a[1],n[2]=a[2],n}},{}],155:[function(f,M,T){M.exports=e;function e(a,n){return a[0]=n[0],a[1]=n[1],a[2]=n[2],a}},{}],156:[function(f,M,T){M.exports=e;function e(){var a=new Float32Array(3);return a[0]=0,a[1]=0,a[2]=0,a}},{}],157:[function(f,M,T){M.exports=e;function e(a,n,r){var t=n[0],h=n[1],s=n[2],o=r[0],y=r[1],d=r[2];return a[0]=h*d-s*y,a[1]=s*o-t*d,a[2]=t*y-h*o,a}},{}],158:[function(f,M,T){M.exports=f("./distance")},{"./distance":159}],159:[function(f,M,T){M.exports=e;function e(a,n){var r=n[0]-a[0],t=n[1]-a[1],h=n[2]-a[2];return Math.sqrt(r*r+t*t+h*h)}},{}],160:[function(f,M,T){M.exports=f("./divide")},{"./divide":161}],161:[function(f,M,T){M.exports=e;function e(a,n,r){return a[0]=n[0]/r[0],a[1]=n[1]/r[1],a[2]=n[2]/r[2],a}},{}],162:[function(f,M,T){M.exports=e;function e(a,n){return a[0]*n[0]+a[1]*n[1]+a[2]*n[2]}},{}],163:[function(f,M,T){M.exports=1e-6},{}],164:[function(f,M,T){M.exports=a;var e=f("./epsilon");function a(n,r){var t=n[0],h=n[1],s=n[2],o=r[0],y=r[1],d=r[2];return Math.abs(t-o)<=e*Math.max(1,Math.abs(t),Math.abs(o))&&Math.abs(h-y)<=e*Math.max(1,Math.abs(h),Math.abs(y))&&Math.abs(s-d)<=e*Math.max(1,Math.abs(s),Math.abs(d))}},{"./epsilon":163}],165:[function(f,M,T){M.exports=e;function e(a,n){return a[0]===n[0]&&a[1]===n[1]&&a[2]===n[2]}},{}],166:[function(f,M,T){M.exports=e;function e(a,n){return a[0]=Math.floor(n[0]),a[1]=Math.floor(n[1]),a[2]=Math.floor(n[2]),a}},{}],167:[function(f,M,T){M.exports=a;var e=f("./create")();function a(n,r,t,h,s,o){var y,d;for(r||(r=3),t||(t=0),h?d=Math.min(h*r+t,n.length):d=n.length,y=t;y<d;y+=r)e[0]=n[y],e[1]=n[y+1],e[2]=n[y+2],s(e,e,o),n[y]=e[0],n[y+1]=e[1],n[y+2]=e[2];return n}},{"./create":156}],168:[function(f,M,T){M.exports=e;function e(a,n,r){var t=new Float32Array(3);return t[0]=a,t[1]=n,t[2]=r,t}},{}],169:[function(f,M,T){M.exports={EPSILON:f("./epsilon"),create:f("./create"),clone:f("./clone"),angle:f("./angle"),fromValues:f("./fromValues"),copy:f("./copy"),set:f("./set"),equals:f("./equals"),exactEquals:f("./exactEquals"),add:f("./add"),subtract:f("./subtract"),sub:f("./sub"),multiply:f("./multiply"),mul:f("./mul"),divide:f("./divide"),div:f("./div"),min:f("./min"),max:f("./max"),floor:f("./floor"),ceil:f("./ceil"),round:f("./round"),scale:f("./scale"),scaleAndAdd:f("./scaleAndAdd"),distance:f("./distance"),dist:f("./dist"),squaredDistance:f("./squaredDistance"),sqrDist:f("./sqrDist"),length:f("./length"),len:f("./len"),squaredLength:f("./squaredLength"),sqrLen:f("./sqrLen"),negate:f("./negate"),inverse:f("./inverse"),normalize:f("./normalize"),dot:f("./dot"),cross:f("./cross"),lerp:f("./lerp"),random:f("./random"),transformMat4:f("./transformMat4"),transformMat3:f("./transformMat3"),transformQuat:f("./transformQuat"),rotateX:f("./rotateX"),rotateY:f("./rotateY"),rotateZ:f("./rotateZ"),forEach:f("./forEach")}},{"./add":151,"./angle":152,"./ceil":153,"./clone":154,"./copy":155,"./create":156,"./cross":157,"./dist":158,"./distance":159,"./div":160,"./divide":161,"./dot":162,"./epsilon":163,"./equals":164,"./exactEquals":165,"./floor":166,"./forEach":167,"./fromValues":168,"./inverse":170,"./len":171,"./length":172,"./lerp":173,"./max":174,"./min":175,"./mul":176,"./multiply":177,"./negate":178,"./normalize":179,"./random":180,"./rotateX":181,"./rotateY":182,"./rotateZ":183,"./round":184,"./scale":185,"./scaleAndAdd":186,"./set":187,"./sqrDist":188,"./sqrLen":189,"./squaredDistance":190,"./squaredLength":191,"./sub":192,"./subtract":193,"./transformMat3":194,"./transformMat4":195,"./transformQuat":196}],170:[function(f,M,T){M.exports=e;function e(a,n){return a[0]=1/n[0],a[1]=1/n[1],a[2]=1/n[2],a}},{}],171:[function(f,M,T){M.exports=f("./length")},{"./length":172}],172:[function(f,M,T){M.exports=e;function e(a){var n=a[0],r=a[1],t=a[2];return Math.sqrt(n*n+r*r+t*t)}},{}],173:[function(f,M,T){M.exports=e;function e(a,n,r,t){var h=n[0],s=n[1],o=n[2];return a[0]=h+t*(r[0]-h),a[1]=s+t*(r[1]-s),a[2]=o+t*(r[2]-o),a}},{}],174:[function(f,M,T){M.exports=e;function e(a,n,r){return a[0]=Math.max(n[0],r[0]),a[1]=Math.max(n[1],r[1]),a[2]=Math.max(n[2],r[2]),a}},{}],175:[function(f,M,T){M.exports=e;function e(a,n,r){return a[0]=Math.min(n[0],r[0]),a[1]=Math.min(n[1],r[1]),a[2]=Math.min(n[2],r[2]),a}},{}],176:[function(f,M,T){M.exports=f("./multiply")},{"./multiply":177}],177:[function(f,M,T){M.exports=e;function e(a,n,r){return a[0]=n[0]*r[0],a[1]=n[1]*r[1],a[2]=n[2]*r[2],a}},{}],178:[function(f,M,T){M.exports=e;function e(a,n){return a[0]=-n[0],a[1]=-n[1],a[2]=-n[2],a}},{}],179:[function(f,M,T){M.exports=e;function e(a,n){var r=n[0],t=n[1],h=n[2],s=r*r+t*t+h*h;return s>0&&(s=1/Math.sqrt(s),a[0]=n[0]*s,a[1]=n[1]*s,a[2]=n[2]*s),a}},{}],180:[function(f,M,T){M.exports=e;function e(a,n){n=n||1;var r=Math.random()*2*Math.PI,t=Math.random()*2-1,h=Math.sqrt(1-t*t)*n;return a[0]=Math.cos(r)*h,a[1]=Math.sin(r)*h,a[2]=t*n,a}},{}],181:[function(f,M,T){M.exports=e;function e(a,n,r,t){var h=r[1],s=r[2],o=n[1]-h,y=n[2]-s,d=Math.sin(t),p=Math.cos(t);return a[0]=n[0],a[1]=h+o*p-y*d,a[2]=s+o*d+y*p,a}},{}],182:[function(f,M,T){M.exports=e;function e(a,n,r,t){var h=r[0],s=r[2],o=n[0]-h,y=n[2]-s,d=Math.sin(t),p=Math.cos(t);return a[0]=h+y*d+o*p,a[1]=n[1],a[2]=s+y*p-o*d,a}},{}],183:[function(f,M,T){M.exports=e;function e(a,n,r,t){var h=r[0],s=r[1],o=n[0]-h,y=n[1]-s,d=Math.sin(t),p=Math.cos(t);return a[0]=h+o*p-y*d,a[1]=s+o*d+y*p,a[2]=n[2],a}},{}],184:[function(f,M,T){M.exports=e;function e(a,n){return a[0]=Math.round(n[0]),a[1]=Math.round(n[1]),a[2]=Math.round(n[2]),a}},{}],185:[function(f,M,T){M.exports=e;function e(a,n,r){return a[0]=n[0]*r,a[1]=n[1]*r,a[2]=n[2]*r,a}},{}],186:[function(f,M,T){M.exports=e;function e(a,n,r,t){return a[0]=n[0]+r[0]*t,a[1]=n[1]+r[1]*t,a[2]=n[2]+r[2]*t,a}},{}],187:[function(f,M,T){M.exports=e;function e(a,n,r,t){return a[0]=n,a[1]=r,a[2]=t,a}},{}],188:[function(f,M,T){M.exports=f("./squaredDistance")},{"./squaredDistance":190}],189:[function(f,M,T){M.exports=f("./squaredLength")},{"./squaredLength":191}],190:[function(f,M,T){M.exports=e;function e(a,n){var r=n[0]-a[0],t=n[1]-a[1],h=n[2]-a[2];return r*r+t*t+h*h}},{}],191:[function(f,M,T){M.exports=e;function e(a){var n=a[0],r=a[1],t=a[2];return n*n+r*r+t*t}},{}],192:[function(f,M,T){M.exports=f("./subtract")},{"./subtract":193}],193:[function(f,M,T){M.exports=e;function e(a,n,r){return a[0]=n[0]-r[0],a[1]=n[1]-r[1],a[2]=n[2]-r[2],a}},{}],194:[function(f,M,T){M.exports=e;function e(a,n,r){var t=n[0],h=n[1],s=n[2];return a[0]=t*r[0]+h*r[3]+s*r[6],a[1]=t*r[1]+h*r[4]+s*r[7],a[2]=t*r[2]+h*r[5]+s*r[8],a}},{}],195:[function(f,M,T){M.exports=e;function e(a,n,r){var t=n[0],h=n[1],s=n[2],o=r[3]*t+r[7]*h+r[11]*s+r[15];return o=o||1,a[0]=(r[0]*t+r[4]*h+r[8]*s+r[12])/o,a[1]=(r[1]*t+r[5]*h+r[9]*s+r[13])/o,a[2]=(r[2]*t+r[6]*h+r[10]*s+r[14])/o,a}},{}],196:[function(f,M,T){M.exports=e;function e(a,n,r){var t=n[0],h=n[1],s=n[2],o=r[0],y=r[1],d=r[2],p=r[3],c=p*t+y*s-d*h,m=p*h+d*t-o*s,l=p*s+o*h-y*t,x=-o*t-y*h-d*s;return a[0]=c*p+x*-o+m*-d-l*-y,a[1]=m*p+x*-y+l*-o-c*-d,a[2]=l*p+x*-d+c*-y-m*-o,a}},{}],197:[function(f,M,T){M.exports=e;function e(a,n,r){return a[0]=n[0]+r[0],a[1]=n[1]+r[1],a[2]=n[2]+r[2],a[3]=n[3]+r[3],a}},{}],198:[function(f,M,T){M.exports=e;function e(a){var n=new Float32Array(4);return n[0]=a[0],n[1]=a[1],n[2]=a[2],n[3]=a[3],n}},{}],199:[function(f,M,T){M.exports=e;function e(a,n){return a[0]=n[0],a[1]=n[1],a[2]=n[2],a[3]=n[3],a}},{}],200:[function(f,M,T){M.exports=e;function e(){var a=new Float32Array(4);return a[0]=0,a[1]=0,a[2]=0,a[3]=0,a}},{}],201:[function(f,M,T){M.exports=e;function e(a,n){var r=n[0]-a[0],t=n[1]-a[1],h=n[2]-a[2],s=n[3]-a[3];return Math.sqrt(r*r+t*t+h*h+s*s)}},{}],202:[function(f,M,T){M.exports=e;function e(a,n,r){return a[0]=n[0]/r[0],a[1]=n[1]/r[1],a[2]=n[2]/r[2],a[3]=n[3]/r[3],a}},{}],203:[function(f,M,T){M.exports=e;function e(a,n){return a[0]*n[0]+a[1]*n[1]+a[2]*n[2]+a[3]*n[3]}},{}],204:[function(f,M,T){M.exports=e;function e(a,n,r,t){var h=new Float32Array(4);return h[0]=a,h[1]=n,h[2]=r,h[3]=t,h}},{}],205:[function(f,M,T){M.exports={create:f("./create"),clone:f("./clone"),fromValues:f("./fromValues"),copy:f("./copy"),set:f("./set"),add:f("./add"),subtract:f("./subtract"),multiply:f("./multiply"),divide:f("./divide"),min:f("./min"),max:f("./max"),scale:f("./scale"),scaleAndAdd:f("./scaleAndAdd"),distance:f("./distance"),squaredDistance:f("./squaredDistance"),length:f("./length"),squaredLength:f("./squaredLength"),negate:f("./negate"),inverse:f("./inverse"),normalize:f("./normalize"),dot:f("./dot"),lerp:f("./lerp"),random:f("./random"),transformMat4:f("./transformMat4"),transformQuat:f("./transformQuat")}},{"./add":197,"./clone":198,"./copy":199,"./create":200,"./distance":201,"./divide":202,"./dot":203,"./fromValues":204,"./inverse":206,"./length":207,"./lerp":208,"./max":209,"./min":210,"./multiply":211,"./negate":212,"./normalize":213,"./random":214,"./scale":215,"./scaleAndAdd":216,"./set":217,"./squaredDistance":218,"./squaredLength":219,"./subtract":220,"./transformMat4":221,"./transformQuat":222}],206:[function(f,M,T){M.exports=e;function e(a,n){return a[0]=1/n[0],a[1]=1/n[1],a[2]=1/n[2],a[3]=1/n[3],a}},{}],207:[function(f,M,T){M.exports=e;function e(a){var n=a[0],r=a[1],t=a[2],h=a[3];return Math.sqrt(n*n+r*r+t*t+h*h)}},{}],208:[function(f,M,T){M.exports=e;function e(a,n,r,t){var h=n[0],s=n[1],o=n[2],y=n[3];return a[0]=h+t*(r[0]-h),a[1]=s+t*(r[1]-s),a[2]=o+t*(r[2]-o),a[3]=y+t*(r[3]-y),a}},{}],209:[function(f,M,T){M.exports=e;function e(a,n,r){return a[0]=Math.max(n[0],r[0]),a[1]=Math.max(n[1],r[1]),a[2]=Math.max(n[2],r[2]),a[3]=Math.max(n[3],r[3]),a}},{}],210:[function(f,M,T){M.exports=e;function e(a,n,r){return a[0]=Math.min(n[0],r[0]),a[1]=Math.min(n[1],r[1]),a[2]=Math.min(n[2],r[2]),a[3]=Math.min(n[3],r[3]),a}},{}],211:[function(f,M,T){M.exports=e;function e(a,n,r){return a[0]=n[0]*r[0],a[1]=n[1]*r[1],a[2]=n[2]*r[2],a[3]=n[3]*r[3],a}},{}],212:[function(f,M,T){M.exports=e;function e(a,n){return a[0]=-n[0],a[1]=-n[1],a[2]=-n[2],a[3]=-n[3],a}},{}],213:[function(f,M,T){M.exports=e;function e(a,n){var r=n[0],t=n[1],h=n[2],s=n[3],o=r*r+t*t+h*h+s*s;return o>0&&(o=1/Math.sqrt(o),a[0]=r*o,a[1]=t*o,a[2]=h*o,a[3]=s*o),a}},{}],214:[function(f,M,T){var e=f("./normalize"),a=f("./scale");M.exports=n;function n(r,t){return t=t||1,r[0]=Math.random(),r[1]=Math.random(),r[2]=Math.random(),r[3]=Math.random(),e(r,r),a(r,r,t),r}},{"./normalize":213,"./scale":215}],215:[function(f,M,T){M.exports=e;function e(a,n,r){return a[0]=n[0]*r,a[1]=n[1]*r,a[2]=n[2]*r,a[3]=n[3]*r,a}},{}],216:[function(f,M,T){M.exports=e;function e(a,n,r,t){return a[0]=n[0]+r[0]*t,a[1]=n[1]+r[1]*t,a[2]=n[2]+r[2]*t,a[3]=n[3]+r[3]*t,a}},{}],217:[function(f,M,T){M.exports=e;function e(a,n,r,t,h){return a[0]=n,a[1]=r,a[2]=t,a[3]=h,a}},{}],218:[function(f,M,T){M.exports=e;function e(a,n){var r=n[0]-a[0],t=n[1]-a[1],h=n[2]-a[2],s=n[3]-a[3];return r*r+t*t+h*h+s*s}},{}],219:[function(f,M,T){M.exports=e;function e(a){var n=a[0],r=a[1],t=a[2],h=a[3];return n*n+r*r+t*t+h*h}},{}],220:[function(f,M,T){M.exports=e;function e(a,n,r){return a[0]=n[0]-r[0],a[1]=n[1]-r[1],a[2]=n[2]-r[2],a[3]=n[3]-r[3],a}},{}],221:[function(f,M,T){M.exports=e;function e(a,n,r){var t=n[0],h=n[1],s=n[2],o=n[3];return a[0]=r[0]*t+r[4]*h+r[8]*s+r[12]*o,a[1]=r[1]*t+r[5]*h+r[9]*s+r[13]*o,a[2]=r[2]*t+r[6]*h+r[10]*s+r[14]*o,a[3]=r[3]*t+r[7]*h+r[11]*s+r[15]*o,a}},{}],222:[function(f,M,T){M.exports=e;function e(a,n,r){var t=n[0],h=n[1],s=n[2],o=r[0],y=r[1],d=r[2],p=r[3],c=p*t+y*s-d*h,m=p*h+d*t-o*s,l=p*s+o*h-y*t,x=-o*t-y*h-d*s;return a[0]=c*p+x*-o+m*-d-l*-y,a[1]=m*p+x*-y+l*-o-c*-d,a[2]=l*p+x*-d+c*-y-m*-o,a[3]=n[3],a}},{}],223:[function(f,M,T){var e=f("glsl-tokenizer"),a=f("atob-lite");M.exports=n;function n(r){for(var t=Array.isArray(r)?r:e(r),h=0;h<t.length;h++){var s=t[h];if(s.type==="preprocessor"){var o=s.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(!!o&&!!o[2]){var y=o[1],d=o[2];return(y?a(d):d).trim()}}}}},{"atob-lite":13,"glsl-tokenizer":230}],224:[function(f,M,T){M.exports=v;var e=f("./lib/literals"),a=f("./lib/operators"),n=f("./lib/builtins"),r=f("./lib/literals-300es"),t=f("./lib/builtins-300es"),h=999,s=9999,o=0,y=1,d=2,p=3,c=4,m=5,l=6,x=7,u=8,A=9,_=10,g=11,b=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"];function v(k){var S=0,E=0,C=h,F,I,D=[],R=[],O=1,z=0,B=0,G=!1,Q=!1,X="",j;k=k||{};var re=n,ue=e;k.version==="300 es"&&(re=t,ue=r);for(var K={},te={},S=0;S<re.length;S++)K[re[S]]=!0;for(var S=0;S<ue.length;S++)te[ue[S]]=!0;return function(ge){return R=[],ge!==null?H(ge):ee()};function Y(ge){ge.length&&R.push({type:b[C],data:ge,position:B,line:O,column:z})}function H(ge){S=0,ge.toString&&(ge=ge.toString()),X+=ge.replace(/\r\n/g,`
`),j=X.length;for(var me;F=X[S],S<j;){switch(me=S,C){case o:S=se();break;case y:S=ie();break;case d:S=q();break;case p:S=ae();break;case c:S=ce();break;case g:S=be();break;case m:S=de();break;case s:S=ye();break;case A:S=Z();break;case h:S=ne();break}if(me!==S)switch(X[me]){case`
`:z=0,++O;break;default:++z;break}}return E+=S,X=X.slice(S),R}function ee(ge){return D.length&&Y(D.join("")),C=_,Y("(eof)"),R}function ne(){return D=D.length?[]:D,I==="/"&&F==="*"?(B=E+S-1,C=o,I=F,S+1):I==="/"&&F==="/"?(B=E+S-1,C=y,I=F,S+1):F==="#"?(C=d,B=E+S,S):/\s/.test(F)?(C=A,B=E+S,S):(G=/\d/.test(F),Q=/[^\w_]/.test(F),B=E+S,C=G?c:Q?p:s,S)}function Z(){return/[^\s]/g.test(F)?(Y(D.join("")),C=h,S):(D.push(F),I=F,S+1)}function q(){return(F==="\r"||F===`
`)&&I!=="\\"?(Y(D.join("")),C=h,S):(D.push(F),I=F,S+1)}function ie(){return q()}function se(){return F==="/"&&I==="*"?(D.push(F),Y(D.join("")),C=h,S+1):(D.push(F),I=F,S+1)}function ae(){if(I==="."&&/\d/.test(F))return C=m,S;if(I==="/"&&F==="*")return C=o,S;if(I==="/"&&F==="/")return C=y,S;if(F==="."&&D.length){for(;oe(D););return C=m,S}if(F===";"||F===")"||F==="("){if(D.length)for(;oe(D););return Y(F),C=h,S+1}var ge=D.length===2&&F!=="=";if(/[\w_\d\s]/.test(F)||ge){for(;oe(D););return C=h,S}return D.push(F),I=F,S+1}function oe(ge){var me=0,Se,Le;do{if(Se=a.indexOf(ge.slice(0,ge.length+me).join("")),Le=a[Se],Se===-1){if(me--+ge.length>0)continue;Le=ge.slice(0,1).join("")}return Y(Le),B+=Le.length,D=D.slice(Le.length),D.length}while(1)}function be(){return/[^a-fA-F0-9]/.test(F)?(Y(D.join("")),C=h,S):(D.push(F),I=F,S+1)}function ce(){return F==="."||/[eE]/.test(F)?(D.push(F),C=m,I=F,S+1):F==="x"&&D.length===1&&D[0]==="0"?(C=g,D.push(F),I=F,S+1):/[^\d]/.test(F)?(Y(D.join("")),C=h,S):(D.push(F),I=F,S+1)}function de(){return F==="f"&&(D.push(F),I=F,S+=1),/[eE]/.test(F)||(F==="-"||F==="+")&&/[eE]/.test(I)?(D.push(F),I=F,S+1):/[^\d]/.test(F)?(Y(D.join("")),C=h,S):(D.push(F),I=F,S+1)}function ye(){if(/[^\d\w_]/.test(F)){var ge=D.join("");return te[ge]?C=u:K[ge]?C=x:C=l,Y(D.join("")),C=h,S}return D.push(F),I=F,S+1}}},{"./lib/builtins":226,"./lib/builtins-300es":225,"./lib/literals":228,"./lib/literals-300es":227,"./lib/operators":229}],225:[function(f,M,T){var e=f("./builtins");e=e.slice().filter(function(a){return!/^(gl\_|texture)/.test(a)}),M.exports=e.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},{"./builtins":226}],226:[function(f,M,T){M.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},{}],227:[function(f,M,T){var e=f("./literals");M.exports=e.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},{"./literals":228}],228:[function(f,M,T){M.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},{}],229:[function(f,M,T){M.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},{}],230:[function(f,M,T){var e=f("./index");M.exports=a;function a(n,r){var t=e(r),h=[];return h=h.concat(t(n)),h=h.concat(t(null)),h}},{"./index":224}],231:[function(f,M,T){M.exports=function(e){typeof e=="string"&&(e=[e]);for(var a=[].slice.call(arguments,1),n=[],r=0;r<e.length-1;r++)n.push(e[r],a[r]||"");return n.push(e[r]),n.join("")}},{}],232:[function(f,M,T){var e=f("is-browser");function a(){var n=!1;try{var r=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("test",null,r),window.removeEventListener("test",null,r)}catch{n=!1}return n}M.exports=e&&a()},{"is-browser":236}],233:[function(f,M,T){M.exports=p;var e=f("robust-orientation"),a=f("simplicial-complex").compareCells;function n(c,m,l){this.vertices=c,this.adjacent=m,this.boundary=l,this.lastVisited=-1}n.prototype.flip=function(){var c=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=c;var m=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=m};function r(c,m,l){this.vertices=c,this.cell=m,this.index=l}function t(c,m){return a(c.vertices,m.vertices)}function h(c){return function(){var m=this.tuple;return c.apply(this,m)}}function s(c){var m=e[c+1];return m||(m=e),h(m)}var o=[];function y(c,m,l){this.dimension=c,this.vertices=m,this.simplices=l,this.interior=l.filter(function(A){return!A.boundary}),this.tuple=new Array(c+1);for(var x=0;x<=c;++x)this.tuple[x]=this.vertices[x];var u=o[c];u||(u=o[c]=s(c)),this.orient=u}var d=y.prototype;d.handleBoundaryDegeneracy=function(c,m){var l=this.dimension,x=this.vertices.length-1,u=this.tuple,A=this.vertices,_=[c];for(c.lastVisited=-x;_.length>0;){c=_.pop();for(var g=c.adjacent,b=0;b<=l;++b){var v=g[b];if(!(!v.boundary||v.lastVisited<=-x)){for(var k=v.vertices,S=0;S<=l;++S){var E=k[S];E<0?u[S]=m:u[S]=A[E]}var C=this.orient();if(C>0)return v;v.lastVisited=-x,C===0&&_.push(v)}}}return null},d.walk=function(c,m){var l=this.vertices.length-1,x=this.dimension,u=this.vertices,A=this.tuple,_=m?this.interior.length*Math.random()|0:this.interior.length-1,g=this.interior[_];e:for(;!g.boundary;){for(var b=g.vertices,v=g.adjacent,k=0;k<=x;++k)A[k]=u[b[k]];g.lastVisited=l;for(var k=0;k<=x;++k){var S=v[k];if(!(S.lastVisited>=l)){var E=A[k];A[k]=c;var C=this.orient();if(A[k]=E,C<0){g=S;continue e}else S.boundary?S.lastVisited=-l:S.lastVisited=l}}return}return g},d.addPeaks=function(c,m){var l=this.vertices.length-1,x=this.dimension,u=this.vertices,A=this.tuple,_=this.interior,g=this.simplices,b=[m];m.lastVisited=l,m.vertices[m.vertices.indexOf(-1)]=l,m.boundary=!1,_.push(m);for(var v=[];b.length>0;){var m=b.pop(),k=m.vertices,S=m.adjacent,E=k.indexOf(l);if(!(E<0)){for(var C=0;C<=x;++C)if(C!==E){var F=S[C];if(!(!F.boundary||F.lastVisited>=l)){var I=F.vertices;if(F.lastVisited!==-l){for(var D=0,R=0;R<=x;++R)I[R]<0?(D=R,A[R]=c):A[R]=u[I[R]];var O=this.orient();if(O>0){I[D]=l,F.boundary=!1,_.push(F),b.push(F),F.lastVisited=l;continue}else F.lastVisited=-l}var z=F.adjacent,B=k.slice(),G=S.slice(),Q=new n(B,G,!0);g.push(Q);var X=z.indexOf(m);if(!(X<0)){z[X]=Q,G[E]=F,B[C]=-1,G[C]=m,S[C]=Q,Q.flip();for(var R=0;R<=x;++R){var j=B[R];if(!(j<0||j===l)){for(var re=new Array(x-1),ue=0,K=0;K<=x;++K){var te=B[K];te<0||K===R||(re[ue++]=te)}v.push(new r(re,Q,R))}}}}}}}v.sort(t);for(var C=0;C+1<v.length;C+=2){var Y=v[C],H=v[C+1],ee=Y.index,ne=H.index;ee<0||ne<0||(Y.cell.adjacent[Y.index]=H.cell,H.cell.adjacent[H.index]=Y.cell)}},d.insert=function(c,m){var l=this.vertices;l.push(c);var x=this.walk(c,m);if(!!x){for(var u=this.dimension,A=this.tuple,_=0;_<=u;++_){var g=x.vertices[_];g<0?A[_]=c:A[_]=l[g]}var b=this.orient(A);b<0||b===0&&(x=this.handleBoundaryDegeneracy(x,c),!x)||this.addPeaks(c,x)}},d.boundary=function(){for(var c=this.dimension,m=[],l=this.simplices,x=l.length,u=0;u<x;++u){var A=l[u];if(A.boundary){for(var _=new Array(c),g=A.vertices,b=0,v=0,k=0;k<=c;++k)g[k]>=0?_[b++]=g[k]:v=k&1;if(v===(c&1)){var S=_[0];_[0]=_[1],_[1]=S}m.push(_)}}return m};function p(c,m){var l=c.length;if(l===0)throw new Error("Must have at least d+1 points");var x=c[0].length;if(l<=x)throw new Error("Must input at least d+1 points");var u=c.slice(0,x+1),A=e.apply(void 0,u);if(A===0)throw new Error("Input not in general position");for(var _=new Array(x+1),g=0;g<=x;++g)_[g]=g;A<0&&(_[0]=1,_[1]=0);for(var b=new n(_,new Array(x+1),!1),v=b.adjacent,k=new Array(x+2),g=0;g<=x;++g){for(var S=_.slice(),E=0;E<=x;++E)E===g&&(S[E]=-1);var C=S[0];S[0]=S[1],S[1]=C;var F=new n(S,new Array(x+1),!0);v[g]=F,k[g]=F}k[x+1]=b;for(var g=0;g<=x;++g)for(var S=v[g].vertices,I=v[g].adjacent,E=0;E<=x;++E){var D=S[E];if(D<0){I[E]=b;continue}for(var R=0;R<=x;++R)v[R].vertices.indexOf(D)<0&&(I[E]=v[R])}for(var O=new y(x,u,k),z=!!m,g=x+1;g<l;++g)O.insert(c[g],z);return O.boundary()}},{"robust-orientation":284,"simplicial-complex":293}],234:[function(f,M,T){var e=f("binary-search-bounds"),a=0,n=1,r=2;M.exports=b;function t(v,k,S,E,C){this.mid=v,this.left=k,this.right=S,this.leftPoints=E,this.rightPoints=C,this.count=(k?k.count:0)+(S?S.count:0)+E.length}var h=t.prototype;function s(v,k){v.mid=k.mid,v.left=k.left,v.right=k.right,v.leftPoints=k.leftPoints,v.rightPoints=k.rightPoints,v.count=k.count}function o(v,k){var S=A(k);v.mid=S.mid,v.left=S.left,v.right=S.right,v.leftPoints=S.leftPoints,v.rightPoints=S.rightPoints,v.count=S.count}function y(v,k){var S=v.intervals([]);S.push(k),o(v,S)}function d(v,k){var S=v.intervals([]),E=S.indexOf(k);return E<0?a:(S.splice(E,1),o(v,S),n)}h.intervals=function(v){return v.push.apply(v,this.leftPoints),this.left&&this.left.intervals(v),this.right&&this.right.intervals(v),v},h.insert=function(v){var k=this.count-this.leftPoints.length;if(this.count+=1,v[1]<this.mid)this.left?4*(this.left.count+1)>3*(k+1)?y(this,v):this.left.insert(v):this.left=A([v]);else if(v[0]>this.mid)this.right?4*(this.right.count+1)>3*(k+1)?y(this,v):this.right.insert(v):this.right=A([v]);else{var S=e.ge(this.leftPoints,v,x),E=e.ge(this.rightPoints,v,u);this.leftPoints.splice(S,0,v),this.rightPoints.splice(E,0,v)}},h.remove=function(v){var k=this.count-this.leftPoints;if(v[1]<this.mid){if(!this.left)return a;var S=this.right?this.right.count:0;if(4*S>3*(k-1))return d(this,v);var E=this.left.remove(v);return E===r?(this.left=null,this.count-=1,n):(E===n&&(this.count-=1),E)}else if(v[0]>this.mid){if(!this.right)return a;var C=this.left?this.left.count:0;if(4*C>3*(k-1))return d(this,v);var E=this.right.remove(v);return E===r?(this.right=null,this.count-=1,n):(E===n&&(this.count-=1),E)}else{if(this.count===1)return this.leftPoints[0]===v?r:a;if(this.leftPoints.length===1&&this.leftPoints[0]===v){if(this.left&&this.right){for(var F=this,I=this.left;I.right;)F=I,I=I.right;if(F===this)I.right=this.right;else{var D=this.left,E=this.right;F.count-=I.count,F.right=I.left,I.left=D,I.right=E}s(this,I),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?s(this,this.left):s(this,this.right);return n}for(var D=e.ge(this.leftPoints,v,x);D<this.leftPoints.length&&this.leftPoints[D][0]===v[0];++D)if(this.leftPoints[D]===v){this.count-=1,this.leftPoints.splice(D,1);for(var E=e.ge(this.rightPoints,v,u);E<this.rightPoints.length&&this.rightPoints[E][1]===v[1];++E)if(this.rightPoints[E]===v)return this.rightPoints.splice(E,1),n}return a}};function p(v,k,S){for(var E=0;E<v.length&&v[E][0]<=k;++E){var C=S(v[E]);if(C)return C}}function c(v,k,S){for(var E=v.length-1;E>=0&&v[E][1]>=k;--E){var C=S(v[E]);if(C)return C}}function m(v,k){for(var S=0;S<v.length;++S){var E=k(v[S]);if(E)return E}}h.queryPoint=function(v,k){if(v<this.mid){if(this.left){var S=this.left.queryPoint(v,k);if(S)return S}return p(this.leftPoints,v,k)}else if(v>this.mid){if(this.right){var S=this.right.queryPoint(v,k);if(S)return S}return c(this.rightPoints,v,k)}else return m(this.leftPoints,k)},h.queryInterval=function(v,k,S){if(v<this.mid&&this.left){var E=this.left.queryInterval(v,k,S);if(E)return E}if(k>this.mid&&this.right){var E=this.right.queryInterval(v,k,S);if(E)return E}return k<this.mid?p(this.leftPoints,k,S):v>this.mid?c(this.rightPoints,v,S):m(this.leftPoints,S)};function l(v,k){return v-k}function x(v,k){var S=v[0]-k[0];return S||v[1]-k[1]}function u(v,k){var S=v[1]-k[1];return S||v[0]-k[0]}function A(v){if(v.length===0)return null;for(var k=[],S=0;S<v.length;++S)k.push(v[S][0],v[S][1]);k.sort(l);for(var E=k[k.length>>1],C=[],F=[],I=[],S=0;S<v.length;++S){var D=v[S];D[1]<E?C.push(D):E<D[0]?F.push(D):I.push(D)}var R=I,O=I.slice();return R.sort(x),O.sort(u),new t(E,A(C),A(F),R,O)}function _(v){this.root=v}var g=_.prototype;g.insert=function(v){this.root?this.root.insert(v):this.root=new t(v[0],null,null,[v],[v])},g.remove=function(v){if(this.root){var k=this.root.remove(v);return k===r&&(this.root=null),k!==a}return!1},g.queryPoint=function(v,k){if(this.root)return this.root.queryPoint(v,k)},g.queryInterval=function(v,k,S){if(v<=k&&this.root)return this.root.queryInterval(v,k,S)},Object.defineProperty(g,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(g,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}});function b(v){return!v||v.length===0?new _(null):new _(A(v))}},{"binary-search-bounds":31}],235:[function(f,M,T){function e(a){for(var n=new Array(a),r=0;r<a;++r)n[r]=r;return n}M.exports=e},{}],236:[function(f,M,T){M.exports=!0},{}],237:[function(f,M,T){/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */M.exports=function(n){return n!=null&&(e(n)||a(n)||!!n._isBuffer)};function e(n){return!!n.constructor&&typeof n.constructor.isBuffer=="function"&&n.constructor.isBuffer(n)}function a(n){return typeof n.readFloatLE=="function"&&typeof n.slice=="function"&&e(n.slice(0,0))}},{}],238:[function(f,M,T){M.exports=n,M.exports.isMobile=n,M.exports.default=n;var e=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,a=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function n(r){r||(r={});var t=r.ua;if(!t&&typeof navigator<"u"&&(t=navigator.userAgent),t&&t.headers&&typeof t.headers["user-agent"]=="string"&&(t=t.headers["user-agent"]),typeof t!="string")return!1;var h=r.tablet?a.test(t):e.test(t);return!h&&r.tablet&&r.featureDetect&&navigator&&navigator.maxTouchPoints>1&&t.indexOf("Macintosh")!==-1&&t.indexOf("Safari")!==-1&&(h=!0),h}},{}],239:[function(f,M,T){M.exports=function(e){for(var a=e.length,n,r=0;r<a;r++)if(n=e.charCodeAt(r),(n<9||n>13)&&n!==32&&n!==133&&n!==160&&n!==5760&&n!==6158&&(n<8192||n>8205)&&n!==8232&&n!==8233&&n!==8239&&n!==8287&&n!==8288&&n!==12288&&n!==65279)return!1;return!0}},{}],240:[function(f,M,T){function e(a,n,r){return a*(1-r)+n*r}M.exports=e},{}],241:[function(f,M,T){var e=f("./normalize"),a=f("gl-mat4/create"),n=f("gl-mat4/clone"),r=f("gl-mat4/determinant"),t=f("gl-mat4/invert"),h=f("gl-mat4/transpose"),s={length:f("gl-vec3/length"),normalize:f("gl-vec3/normalize"),dot:f("gl-vec3/dot"),cross:f("gl-vec3/cross")},o=a(),y=a(),d=[0,0,0,0],p=[[0,0,0],[0,0,0],[0,0,0]],c=[0,0,0];M.exports=function(A,_,g,b,v,k){if(_||(_=[0,0,0]),g||(g=[0,0,0]),b||(b=[0,0,0]),v||(v=[0,0,0,1]),k||(k=[0,0,0,1]),!e(o,A)||(n(y,o),y[3]=0,y[7]=0,y[11]=0,y[15]=1,Math.abs(r(y)<1e-8)))return!1;var S=o[3],E=o[7],C=o[11],F=o[12],I=o[13],D=o[14],R=o[15];if(S!==0||E!==0||C!==0){d[0]=S,d[1]=E,d[2]=C,d[3]=R;var O=t(y,y);if(!O)return!1;h(y,y),m(v,d,y)}else v[0]=v[1]=v[2]=0,v[3]=1;if(_[0]=F,_[1]=I,_[2]=D,l(p,o),g[0]=s.length(p[0]),s.normalize(p[0],p[0]),b[0]=s.dot(p[0],p[1]),x(p[1],p[1],p[0],1,-b[0]),g[1]=s.length(p[1]),s.normalize(p[1],p[1]),b[0]/=g[1],b[1]=s.dot(p[0],p[2]),x(p[2],p[2],p[0],1,-b[1]),b[2]=s.dot(p[1],p[2]),x(p[2],p[2],p[1],1,-b[2]),g[2]=s.length(p[2]),s.normalize(p[2],p[2]),b[1]/=g[2],b[2]/=g[2],s.cross(c,p[1],p[2]),s.dot(p[0],c)<0)for(var z=0;z<3;z++)g[z]*=-1,p[z][0]*=-1,p[z][1]*=-1,p[z][2]*=-1;return k[0]=.5*Math.sqrt(Math.max(1+p[0][0]-p[1][1]-p[2][2],0)),k[1]=.5*Math.sqrt(Math.max(1-p[0][0]+p[1][1]-p[2][2],0)),k[2]=.5*Math.sqrt(Math.max(1-p[0][0]-p[1][1]+p[2][2],0)),k[3]=.5*Math.sqrt(Math.max(1+p[0][0]+p[1][1]+p[2][2],0)),p[2][1]>p[1][2]&&(k[0]=-k[0]),p[0][2]>p[2][0]&&(k[1]=-k[1]),p[1][0]>p[0][1]&&(k[2]=-k[2]),!0};function m(u,A,_){var g=A[0],b=A[1],v=A[2],k=A[3];return u[0]=_[0]*g+_[4]*b+_[8]*v+_[12]*k,u[1]=_[1]*g+_[5]*b+_[9]*v+_[13]*k,u[2]=_[2]*g+_[6]*b+_[10]*v+_[14]*k,u[3]=_[3]*g+_[7]*b+_[11]*v+_[15]*k,u}function l(u,A){u[0][0]=A[0],u[0][1]=A[1],u[0][2]=A[2],u[1][0]=A[4],u[1][1]=A[5],u[1][2]=A[6],u[2][0]=A[8],u[2][1]=A[9],u[2][2]=A[10]}function x(u,A,_,g,b){u[0]=A[0]*g+_[0]*b,u[1]=A[1]*g+_[1]*b,u[2]=A[2]*g+_[2]*b}},{"./normalize":242,"gl-mat4/clone":92,"gl-mat4/create":93,"gl-mat4/determinant":94,"gl-mat4/invert":98,"gl-mat4/transpose":109,"gl-vec3/cross":157,"gl-vec3/dot":162,"gl-vec3/length":172,"gl-vec3/normalize":179}],242:[function(f,M,T){M.exports=function(a,n){var r=n[15];if(r===0)return!1;for(var t=1/r,h=0;h<16;h++)a[h]=n[h]*t;return!0}},{}],243:[function(f,M,T){var e=f("gl-vec3/lerp"),a=f("mat4-recompose"),n=f("mat4-decompose"),r=f("gl-mat4/determinant"),t=f("quat-slerp"),h=d(),s=d(),o=d();M.exports=y;function y(m,l,x,u){if(r(l)===0||r(x)===0)return!1;var A=n(l,h.translate,h.scale,h.skew,h.perspective,h.quaternion),_=n(x,s.translate,s.scale,s.skew,s.perspective,s.quaternion);return!A||!_?!1:(e(o.translate,h.translate,s.translate,u),e(o.skew,h.skew,s.skew,u),e(o.scale,h.scale,s.scale,u),e(o.perspective,h.perspective,s.perspective,u),t(o.quaternion,h.quaternion,s.quaternion,u),a(m,o.translate,o.scale,o.skew,o.perspective,o.quaternion),!0)}function d(){return{translate:p(),scale:p(1),skew:p(),perspective:c(),quaternion:c()}}function p(m){return[m||0,m||0,m||0]}function c(){return[0,0,0,1]}},{"gl-mat4/determinant":94,"gl-vec3/lerp":173,"mat4-decompose":241,"mat4-recompose":244,"quat-slerp":271}],244:[function(f,M,T){var e={identity:f("gl-mat4/identity"),translate:f("gl-mat4/translate"),multiply:f("gl-mat4/multiply"),create:f("gl-mat4/create"),scale:f("gl-mat4/scale"),fromRotationTranslation:f("gl-mat4/fromRotationTranslation")};e.create();var a=e.create();M.exports=function(r,t,h,s,o,y){return e.identity(r),e.fromRotationTranslation(r,y,t),r[3]=o[0],r[7]=o[1],r[11]=o[2],r[15]=o[3],e.identity(a),s[2]!==0&&(a[9]=s[2],e.multiply(r,r,a)),s[1]!==0&&(a[9]=0,a[8]=s[1],e.multiply(r,r,a)),s[0]!==0&&(a[8]=0,a[4]=s[0],e.multiply(r,r,a)),e.scale(r,r,h),r}},{"gl-mat4/create":93,"gl-mat4/fromRotationTranslation":96,"gl-mat4/identity":97,"gl-mat4/multiply":100,"gl-mat4/scale":107,"gl-mat4/translate":108}],245:[function(f,M,T){var e=f("binary-search-bounds"),a=f("mat4-interpolate"),n=f("gl-mat4/invert"),r=f("gl-mat4/rotateX"),t=f("gl-mat4/rotateY"),h=f("gl-mat4/rotateZ"),s=f("gl-mat4/lookAt"),o=f("gl-mat4/translate");f("gl-mat4/scale");var y=f("gl-vec3/normalize"),d=[0,0,0];M.exports=l;function p(x){this._components=x.slice(),this._time=[0],this.prevMatrix=x.slice(),this.nextMatrix=x.slice(),this.computedMatrix=x.slice(),this.computedInverse=x.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}var c=p.prototype;c.recalcMatrix=function(x){var u=this._time,A=e.le(u,x),_=this.computedMatrix;if(!(A<0)){var g=this._components;if(A===u.length-1)for(var b=16*A,v=0;v<16;++v)_[v]=g[b++];else{for(var k=u[A+1]-u[A],b=16*A,S=this.prevMatrix,E=!0,v=0;v<16;++v)S[v]=g[b++];for(var C=this.nextMatrix,v=0;v<16;++v)C[v]=g[b++],E=E&&S[v]===C[v];if(k<1e-6||E)for(var v=0;v<16;++v)_[v]=S[v];else a(_,S,C,(x-u[A])/k)}var F=this.computedUp;F[0]=_[1],F[1]=_[5],F[2]=_[9],y(F,F);var I=this.computedInverse;n(I,_);var D=this.computedEye,R=I[15];D[0]=I[12]/R,D[1]=I[13]/R,D[2]=I[14]/R;for(var O=this.computedCenter,z=Math.exp(this.computedRadius[0]),v=0;v<3;++v)O[v]=D[v]-_[2+4*v]*z}},c.idle=function(x){if(!(x<this.lastT())){for(var u=this._components,A=u.length-16,_=0;_<16;++_)u.push(u[A++]);this._time.push(x)}},c.flush=function(x){var u=e.gt(this._time,x)-2;u<0||(this._time.splice(0,u),this._components.splice(0,16*u))},c.lastT=function(){return this._time[this._time.length-1]},c.lookAt=function(x,u,A,_){this.recalcMatrix(x),u=u||this.computedEye,A=A||d,_=_||this.computedUp,this.setMatrix(x,s(this.computedMatrix,u,A,_));for(var g=0,b=0;b<3;++b)g+=Math.pow(A[b]-u[b],2);g=Math.log(Math.sqrt(g)),this.computedRadius[0]=g},c.rotate=function(x,u,A,_){this.recalcMatrix(x);var g=this.computedInverse;u&&t(g,g,u),A&&r(g,g,A),_&&h(g,g,_),this.setMatrix(x,n(this.computedMatrix,g))};var m=[0,0,0];c.pan=function(x,u,A,_){m[0]=-(u||0),m[1]=-(A||0),m[2]=-(_||0),this.recalcMatrix(x);var g=this.computedInverse;o(g,g,m),this.setMatrix(x,n(g,g))},c.translate=function(x,u,A,_){m[0]=u||0,m[1]=A||0,m[2]=_||0,this.recalcMatrix(x);var g=this.computedMatrix;o(g,g,m),this.setMatrix(x,g)},c.setMatrix=function(x,u){if(!(x<this.lastT())){this._time.push(x);for(var A=0;A<16;++A)this._components.push(u[A])}},c.setDistance=function(x,u){this.computedRadius[0]=u},c.setDistanceLimits=function(x,u){var A=this._limits;A[0]=x,A[1]=u},c.getDistanceLimits=function(x){var u=this._limits;return x?(x[0]=u[0],x[1]=u[1],x):u};function l(x){x=x||{};var u=x.matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return new p(u)}},{"binary-search-bounds":31,"gl-mat4/invert":98,"gl-mat4/lookAt":99,"gl-mat4/rotateX":104,"gl-mat4/rotateY":105,"gl-mat4/rotateZ":106,"gl-mat4/scale":107,"gl-mat4/translate":108,"gl-vec3/normalize":179,"mat4-interpolate":243}],246:[function(f,M,T){M.exports=a;var e=f("robust-orientation")[3];function a(n){var r=n.length;if(r<3){for(var c=new Array(r),t=0;t<r;++t)c[t]=t;return r===2&&n[0][0]===n[1][0]&&n[0][1]===n[1][1]?[0]:c}for(var h=new Array(r),t=0;t<r;++t)h[t]=t;h.sort(function(u,A){var _=n[u][0]-n[A][0];return _||n[u][1]-n[A][1]});for(var s=[h[0],h[1]],o=[h[0],h[1]],t=2;t<r;++t){for(var y=h[t],d=n[y],p=s.length;p>1&&e(n[s[p-2]],n[s[p-1]],d)<=0;)p-=1,s.pop();for(s.push(y),p=o.length;p>1&&e(n[o[p-2]],n[o[p-1]],d)>=0;)p-=1,o.pop();o.push(y)}for(var c=new Array(o.length+s.length-2),m=0,t=0,l=s.length;t<l;++t)c[m++]=s[t];for(var x=o.length-2;x>0;--x)c[m++]=o[x];return c}},{"robust-orientation":284}],247:[function(f,M,T){M.exports=a;var e=f("mouse-event");function a(n,r){r||(r=n,n=window);var t=0,h=0,s=0,o={shift:!1,alt:!1,control:!1,meta:!1},y=!1;function d(v){var k=!1;return"altKey"in v&&(k=k||v.altKey!==o.alt,o.alt=!!v.altKey),"shiftKey"in v&&(k=k||v.shiftKey!==o.shift,o.shift=!!v.shiftKey),"ctrlKey"in v&&(k=k||v.ctrlKey!==o.control,o.control=!!v.ctrlKey),"metaKey"in v&&(k=k||v.metaKey!==o.meta,o.meta=!!v.metaKey),k}function p(v,k){var S=e.x(k),E=e.y(k);"buttons"in k&&(v=k.buttons|0),(v!==t||S!==h||E!==s||d(k))&&(t=v|0,h=S||0,s=E||0,r&&r(t,h,s,o))}function c(v){p(0,v)}function m(){(t||h||s||o.shift||o.alt||o.meta||o.control)&&(h=s=0,t=0,o.shift=o.alt=o.control=o.meta=!1,r&&r(0,0,0,o))}function l(v){d(v)&&r&&r(t,h,s,o)}function x(v){e.buttons(v)===0?p(0,v):p(t,v)}function u(v){p(t|e.buttons(v),v)}function A(v){p(t&~e.buttons(v),v)}function _(){y||(y=!0,n.addEventListener("mousemove",x),n.addEventListener("mousedown",u),n.addEventListener("mouseup",A),n.addEventListener("mouseleave",c),n.addEventListener("mouseenter",c),n.addEventListener("mouseout",c),n.addEventListener("mouseover",c),n.addEventListener("blur",m),n.addEventListener("keyup",l),n.addEventListener("keydown",l),n.addEventListener("keypress",l),n!==window&&(window.addEventListener("blur",m),window.addEventListener("keyup",l),window.addEventListener("keydown",l),window.addEventListener("keypress",l)))}function g(){!y||(y=!1,n.removeEventListener("mousemove",x),n.removeEventListener("mousedown",u),n.removeEventListener("mouseup",A),n.removeEventListener("mouseleave",c),n.removeEventListener("mouseenter",c),n.removeEventListener("mouseout",c),n.removeEventListener("mouseover",c),n.removeEventListener("blur",m),n.removeEventListener("keyup",l),n.removeEventListener("keydown",l),n.removeEventListener("keypress",l),n!==window&&(window.removeEventListener("blur",m),window.removeEventListener("keyup",l),window.removeEventListener("keydown",l),window.removeEventListener("keypress",l)))}_();var b={element:n};return Object.defineProperties(b,{enabled:{get:function(){return y},set:function(v){v?_():g()},enumerable:!0},buttons:{get:function(){return t},enumerable:!0},x:{get:function(){return h},enumerable:!0},y:{get:function(){return s},enumerable:!0},mods:{get:function(){return o},enumerable:!0}}),b}},{"mouse-event":249}],248:[function(f,M,T){var e={left:0,top:0};M.exports=a;function a(r,t,h){t=t||r.currentTarget||r.srcElement,Array.isArray(h)||(h=[0,0]);var s=r.clientX||0,o=r.clientY||0,y=n(t);return h[0]=s-y.left,h[1]=o-y.top,h}function n(r){return r===window||r===document||r===document.body?e:r.getBoundingClientRect()}},{}],249:[function(f,M,T){function e(t){if(typeof t=="object"){if("buttons"in t)return t.buttons;if("which"in t){var h=t.which;if(h===2)return 4;if(h===3)return 2;if(h>0)return 1<<h-1}else if("button"in t){var h=t.button;if(h===1)return 4;if(h===2)return 2;if(h>=0)return 1<<h}}return 0}T.buttons=e;function a(t){return t.target||t.srcElement||window}T.element=a;function n(t){if(typeof t=="object"){if("offsetX"in t)return t.offsetX;var h=a(t),s=h.getBoundingClientRect();return t.clientX-s.left}return 0}T.x=n;function r(t){if(typeof t=="object"){if("offsetY"in t)return t.offsetY;var h=a(t),s=h.getBoundingClientRect();return t.clientY-s.top}return 0}T.y=r},{}],250:[function(f,M,T){var e=f("to-px");M.exports=a;function a(n,r,t){typeof n=="function"&&(t=!!r,r=n,n=window);var h=e("ex",n),s=function(o){t&&o.preventDefault();var y=o.deltaX||0,d=o.deltaY||0,p=o.deltaZ||0,c=o.deltaMode,m=1;switch(c){case 1:m=h;break;case 2:m=window.innerHeight;break}if(y*=m,d*=m,p*=m,y||d||p)return r(y,d,p,o)};return n.addEventListener("wheel",s),s}},{"to-px":304}],251:[function(f,M,T){var e=f("typedarray-pool");M.exports=r;var a={"false,0,1":function(h,s,o,y,d){return function(c,m,l,x){var u=c.shape[0]|0,A=c.shape[1]|0,_=c.data,g=c.offset|0,b=c.stride[0]|0,v=c.stride[1]|0,k=g,S,E=-b|0,C=0,F=-v|0,I=0,D=-b-v|0,R=0,O=b|0,z=v-b*u|0,B=0,G=0,Q=0,X=2*u|0,j=y(X),re=y(X),ue=0,K=0,te=-1,Y=-1,H=0,ee=-u|0,ne=u|0,Z=0,q=-u-1|0,ie=u-1|0,se=0,ae=0,oe=0;for(B=0;B<u;++B)j[ue++]=o(_[k],m,l,x),k+=O;if(k+=z,A>0){if(G=1,j[ue++]=o(_[k],m,l,x),k+=O,u>0)for(B=1,S=_[k],K=j[ue]=o(S,m,l,x),H=j[ue+te],Z=j[ue+ee],se=j[ue+q],(K!==H||K!==Z||K!==se)&&(C=_[k+E],I=_[k+F],R=_[k+D],h(B,G,S,C,I,R,K,H,Z,se,m,l,x),ae=re[ue]=Q++),ue+=1,k+=O,B=2;B<u;++B)S=_[k],K=j[ue]=o(S,m,l,x),H=j[ue+te],Z=j[ue+ee],se=j[ue+q],(K!==H||K!==Z||K!==se)&&(C=_[k+E],I=_[k+F],R=_[k+D],h(B,G,S,C,I,R,K,H,Z,se,m,l,x),ae=re[ue]=Q++,se!==H&&s(re[ue+te],ae,R,C,se,H,m,l,x)),ue+=1,k+=O;for(k+=z,ue=0,oe=te,te=Y,Y=oe,oe=ee,ee=ne,ne=oe,oe=q,q=ie,ie=oe,G=2;G<A;++G){if(j[ue++]=o(_[k],m,l,x),k+=O,u>0)for(B=1,S=_[k],K=j[ue]=o(S,m,l,x),H=j[ue+te],Z=j[ue+ee],se=j[ue+q],(K!==H||K!==Z||K!==se)&&(C=_[k+E],I=_[k+F],R=_[k+D],h(B,G,S,C,I,R,K,H,Z,se,m,l,x),ae=re[ue]=Q++,se!==Z&&s(re[ue+ee],ae,I,R,Z,se,m,l,x)),ue+=1,k+=O,B=2;B<u;++B)S=_[k],K=j[ue]=o(S,m,l,x),H=j[ue+te],Z=j[ue+ee],se=j[ue+q],(K!==H||K!==Z||K!==se)&&(C=_[k+E],I=_[k+F],R=_[k+D],h(B,G,S,C,I,R,K,H,Z,se,m,l,x),ae=re[ue]=Q++,se!==Z&&s(re[ue+ee],ae,I,R,Z,se,m,l,x),se!==H&&s(re[ue+te],ae,R,C,se,H,m,l,x)),ue+=1,k+=O;G&1&&(ue=0),oe=te,te=Y,Y=oe,oe=ee,ee=ne,ne=oe,oe=q,q=ie,ie=oe,k+=z}}d(re),d(j)}},"false,1,0":function(h,s,o,y,d){return function(c,m,l,x){var u=c.shape[0]|0,A=c.shape[1]|0,_=c.data,g=c.offset|0,b=c.stride[0]|0,v=c.stride[1]|0,k=g,S,E=-b|0,C=0,F=-v|0,I=0,D=-b-v|0,R=0,O=v|0,z=b-v*A|0,B=0,G=0,Q=0,X=2*A|0,j=y(X),re=y(X),ue=0,K=0,te=-1,Y=-1,H=0,ee=-A|0,ne=A|0,Z=0,q=-A-1|0,ie=A-1|0,se=0,ae=0,oe=0;for(G=0;G<A;++G)j[ue++]=o(_[k],m,l,x),k+=O;if(k+=z,u>0){if(B=1,j[ue++]=o(_[k],m,l,x),k+=O,A>0)for(G=1,S=_[k],K=j[ue]=o(S,m,l,x),Z=j[ue+ee],H=j[ue+te],se=j[ue+q],(K!==Z||K!==H||K!==se)&&(C=_[k+E],I=_[k+F],R=_[k+D],h(B,G,S,C,I,R,K,Z,H,se,m,l,x),ae=re[ue]=Q++),ue+=1,k+=O,G=2;G<A;++G)S=_[k],K=j[ue]=o(S,m,l,x),Z=j[ue+ee],H=j[ue+te],se=j[ue+q],(K!==Z||K!==H||K!==se)&&(C=_[k+E],I=_[k+F],R=_[k+D],h(B,G,S,C,I,R,K,Z,H,se,m,l,x),ae=re[ue]=Q++,se!==H&&s(re[ue+te],ae,I,R,H,se,m,l,x)),ue+=1,k+=O;for(k+=z,ue=0,oe=ee,ee=ne,ne=oe,oe=te,te=Y,Y=oe,oe=q,q=ie,ie=oe,B=2;B<u;++B){if(j[ue++]=o(_[k],m,l,x),k+=O,A>0)for(G=1,S=_[k],K=j[ue]=o(S,m,l,x),Z=j[ue+ee],H=j[ue+te],se=j[ue+q],(K!==Z||K!==H||K!==se)&&(C=_[k+E],I=_[k+F],R=_[k+D],h(B,G,S,C,I,R,K,Z,H,se,m,l,x),ae=re[ue]=Q++,se!==Z&&s(re[ue+ee],ae,R,C,se,Z,m,l,x)),ue+=1,k+=O,G=2;G<A;++G)S=_[k],K=j[ue]=o(S,m,l,x),Z=j[ue+ee],H=j[ue+te],se=j[ue+q],(K!==Z||K!==H||K!==se)&&(C=_[k+E],I=_[k+F],R=_[k+D],h(B,G,S,C,I,R,K,Z,H,se,m,l,x),ae=re[ue]=Q++,se!==H&&s(re[ue+te],ae,I,R,H,se,m,l,x),se!==Z&&s(re[ue+ee],ae,R,C,se,Z,m,l,x)),ue+=1,k+=O;B&1&&(ue=0),oe=ee,ee=ne,ne=oe,oe=te,te=Y,Y=oe,oe=q,q=ie,ie=oe,k+=z}}d(re),d(j)}}};function n(t,h,s,o,y,d){var p=[d,y].join(","),c=a[p];return c(t,h,s,e.mallocUint32,e.freeUint32)}function r(t){function h(m){throw new Error("ndarray-extract-contour: "+m)}typeof t!="object"&&h("Must specify arguments");var s=t.order;Array.isArray(s)||h("Must specify order");var o=t.arrayArguments||1;o<1&&h("Must have at least one array argument");var y=t.scalarArguments||0;y<0&&h("Scalar arg count must be > 0"),typeof t.vertex!="function"&&h("Must specify vertex creation function"),typeof t.cell!="function"&&h("Must specify cell creation function"),typeof t.phase!="function"&&h("Must specify phase function");for(var d=t.getters||[],p=new Array(o),c=0;c<o;++c)d.indexOf(c)>=0?p[c]=!0:p[c]=!1;return n(t.vertex,t.cell,t.phase,y,s,p)}},{"typedarray-pool":308}],252:[function(f,M,T){var e=f("dup"),a={zero:function(l,x,u,A){var _=l[0],g=u[0];A|=0;var b=0,v=g;for(b=0;b<_;++b)x[A]=0,A+=v},fdTemplate1:function(l,x,u,A,_,g,b){var v=l[0],k=u[0],S=g[0],E=-1*k,C=k;A|=0,b|=0;var F=0,I=k,D=S;for(F=0;F<v;++F)_[b]=.5*(x[A+E]-x[A+C]),A+=I,b+=D},fdTemplate2:function(l,x,u,A,_,g,b,v,k,S){var E=l[0],C=l[1],F=u[0],I=u[1],D=g[0],R=g[1],O=k[0],z=k[1],B=-1*F,G=F,Q=-1*I,X=I;A|=0,b|=0,S|=0;var j=0,re=0,ue=I,K=F-C*I,te=R,Y=D-C*R,H=z,ee=O-C*z;for(re=0;re<E;++re){for(j=0;j<C;++j)_[b]=.5*(x[A+B]-x[A+G]),v[S]=.5*(x[A+Q]-x[A+X]),A+=ue,b+=te,S+=H;A+=K,b+=Y,S+=ee}}},n={cdiff:function(l){var x={};return function(A,_,g){var b=A.dtype,v=A.order,k=_.dtype,S=_.order,E=g.dtype,C=g.order,F=[b,v.join(),k,S.join(),E,C.join()].join(),I=x[F];return I||(x[F]=I=l([b,v,k,S,E,C])),I(A.shape.slice(0),A.data,A.stride,A.offset|0,_.data,_.stride,_.offset|0,g.data,g.stride,g.offset|0)}},zero:function(l){var x={};return function(A){var _=A.dtype,g=A.order,b=[_,g.join()].join(),v=x[b];return v||(x[b]=v=l([_,g])),v(A.shape.slice(0),A.data,A.stride,A.offset|0)}},fdTemplate1:function(l){var x={};return function(A,_){var g=A.dtype,b=A.order,v=_.dtype,k=_.order,S=[g,b.join(),v,k.join()].join(),E=x[S];return E||(x[S]=E=l([g,b,v,k])),E(A.shape.slice(0),A.data,A.stride,A.offset|0,_.data,_.stride,_.offset|0)}},fdTemplate2:function(l){var x={};return function(A,_,g){var b=A.dtype,v=A.order,k=_.dtype,S=_.order,E=g.dtype,C=g.order,F=[b,v.join(),k,S.join(),E,C.join()].join(),I=x[F];return I||(x[F]=I=l([b,v,k,S,E,C])),I(A.shape.slice(0),A.data,A.stride,A.offset|0,_.data,_.stride,_.offset|0,g.data,g.stride,g.offset|0)}}};function r(l){var x=n[l.funcName];return x(t.bind(void 0,l))}function t(l){return a[l.funcName]}function h(l){return r({funcName:l.funcName})}var s={},o={},y=h({funcName:"cdiff"}),d=h({funcName:"zero"});function p(l){return l in s?s[l]:s[l]=h({funcName:"fdTemplate"+l})}function c(l,x,u,A){return function(_,g){var b=g.shape.slice();return b[0]>2&&b[1]>2&&A(g.pick(-1,-1).lo(1,1).hi(b[0]-2,b[1]-2),_.pick(-1,-1,0).lo(1,1).hi(b[0]-2,b[1]-2),_.pick(-1,-1,1).lo(1,1).hi(b[0]-2,b[1]-2)),b[1]>2&&(u(g.pick(0,-1).lo(1).hi(b[1]-2),_.pick(0,-1,1).lo(1).hi(b[1]-2)),x(_.pick(0,-1,0).lo(1).hi(b[1]-2))),b[1]>2&&(u(g.pick(b[0]-1,-1).lo(1).hi(b[1]-2),_.pick(b[0]-1,-1,1).lo(1).hi(b[1]-2)),x(_.pick(b[0]-1,-1,0).lo(1).hi(b[1]-2))),b[0]>2&&(u(g.pick(-1,0).lo(1).hi(b[0]-2),_.pick(-1,0,0).lo(1).hi(b[0]-2)),x(_.pick(-1,0,1).lo(1).hi(b[0]-2))),b[0]>2&&(u(g.pick(-1,b[1]-1).lo(1).hi(b[0]-2),_.pick(-1,b[1]-1,0).lo(1).hi(b[0]-2)),x(_.pick(-1,b[1]-1,1).lo(1).hi(b[0]-2))),_.set(0,0,0,0),_.set(0,0,1,0),_.set(b[0]-1,0,0,0),_.set(b[0]-1,0,1,0),_.set(0,b[1]-1,0,0),_.set(0,b[1]-1,1,0),_.set(b[0]-1,b[1]-1,0,0),_.set(b[0]-1,b[1]-1,1,0),_}}function m(l){var x=l.join(),b=o[x];if(b)return b;for(var u=l.length,A=[y,d],_=1;_<=u;++_)A.push(p(_));var g=c,b=g.apply(void 0,A);return o[x]=b,b}M.exports=function(x,u,A){if(Array.isArray(A)||(typeof A=="string"?A=e(u.dimension,A):A=e(u.dimension,"clamp")),u.size===0)return x;if(u.dimension===0)return x.set(0),x;var _=m(A);return _(x,u)}},{dup:65}],253:[function(f,M,T){function e(h,s){var o=Math.floor(s),y=s-o,d=0<=o&&o<h.shape[0],p=0<=o+1&&o+1<h.shape[0],c=d?+h.get(o):0,m=p?+h.get(o+1):0;return(1-y)*c+y*m}function a(h,s,o){var y=Math.floor(s),d=s-y,p=0<=y&&y<h.shape[0],c=0<=y+1&&y+1<h.shape[0],m=Math.floor(o),l=o-m,x=0<=m&&m<h.shape[1],u=0<=m+1&&m+1<h.shape[1],A=p&&x?h.get(y,m):0,_=p&&u?h.get(y,m+1):0,g=c&&x?h.get(y+1,m):0,b=c&&u?h.get(y+1,m+1):0;return(1-l)*((1-d)*A+d*g)+l*((1-d)*_+d*b)}function n(h,s,o,y){var d=Math.floor(s),p=s-d,c=0<=d&&d<h.shape[0],m=0<=d+1&&d+1<h.shape[0],l=Math.floor(o),x=o-l,u=0<=l&&l<h.shape[1],A=0<=l+1&&l+1<h.shape[1],_=Math.floor(y),g=y-_,b=0<=_&&_<h.shape[2],v=0<=_+1&&_+1<h.shape[2],k=c&&u&&b?h.get(d,l,_):0,S=c&&A&&b?h.get(d,l+1,_):0,E=m&&u&&b?h.get(d+1,l,_):0,C=m&&A&&b?h.get(d+1,l+1,_):0,F=c&&u&&v?h.get(d,l,_+1):0,I=c&&A&&v?h.get(d,l+1,_+1):0,D=m&&u&&v?h.get(d+1,l,_+1):0,R=m&&A&&v?h.get(d+1,l+1,_+1):0;return(1-g)*((1-x)*((1-p)*k+p*E)+x*((1-p)*S+p*C))+g*((1-x)*((1-p)*F+p*D)+x*((1-p)*I+p*R))}function r(h){var s=h.shape.length|0,o=new Array(s),y=new Array(s),d=new Array(s),p=new Array(s),c,m;for(c=0;c<s;++c)m=+arguments[c+1],o[c]=Math.floor(m),y[c]=m-o[c],d[c]=0<=o[c]&&o[c]<h.shape[c],p[c]=0<=o[c]+1&&o[c]+1<h.shape[c];var l=0,x,u,A;e:for(c=0;c<1<<s;++c){for(u=1,A=h.offset,x=0;x<s;++x)if(c&1<<x){if(!p[x])continue e;u*=y[x],A+=h.stride[x]*(o[x]+1)}else{if(!d[x])continue e;u*=1-y[x],A+=h.stride[x]*o[x]}l+=u*h.data[A]}return l}function t(h,s,o,y){switch(h.shape.length){case 0:return 0;case 1:return e(h,s);case 2:return a(h,s,o);case 3:return n(h,s,o,y);default:return r.apply(void 0,arguments)}}M.exports=t,M.exports.d1=e,M.exports.d2=a,M.exports.d3=n},{}],254:[function(f,M,T){var e={"float64,2,1,0":function(){return function(y,d,p,c,m){var l=y[0],x=y[1],u=y[2],A=p[0],_=p[1],g=p[2];c|=0;var b=0,v=0,k=0,S=g,E=_-u*g,C=A-x*_;for(k=0;k<l;++k){for(v=0;v<x;++v){for(b=0;b<u;++b)d[c]/=m,c+=S;c+=E}c+=C}}},"uint8,2,0,1,float64,2,1,0":function(){return function(y,d,p,c,m,l,x,u){var A=y[0],_=y[1],g=y[2],b=p[0],v=p[1],k=p[2],S=l[0],E=l[1],C=l[2];c|=0,x|=0;for(var F=c,I=x,D=y[0]|0;D>0;){D<64?(A=D,D=0):(A=64,D-=64);for(var R=y[1]|0;R>0;){R<64?(_=R,R=0):(_=64,R-=64),c=F+D*b+R*v,x=I+D*S+R*E;var O=0,z=0,B=0,G=k,Q=b-g*k,X=v-A*b,j=C,re=S-g*C,ue=E-A*S;for(B=0;B<_;++B){for(z=0;z<A;++z){for(O=0;O<g;++O)d[c]=m[x]*u,c+=G,x+=j;c+=Q,x+=re}c+=X,x+=ue}}}}},"float32,1,0,float32,1,0":function(){return function(y,d,p,c,m,l,x){var u=y[0],A=y[1],_=p[0],g=p[1],b=l[0],v=l[1];c|=0,x|=0;var k=0,S=0,E=g,C=_-A*g,F=v,I=b-A*v;for(S=0;S<u;++S){for(k=0;k<A;++k)d[c]=m[x],c+=E,x+=F;c+=C,x+=I}}},"float32,1,0,float32,0,1":function(){return function(y,d,p,c,m,l,x){var u=y[0],A=y[1],_=p[0],g=p[1],b=l[0],v=l[1];c|=0,x|=0;for(var k=c,S=x,E=y[1]|0;E>0;){E<64?(A=E,E=0):(A=64,E-=64);for(var C=y[0]|0;C>0;){C<64?(u=C,C=0):(u=64,C-=64),c=k+E*g+C*_,x=S+E*v+C*b;var F=0,I=0,D=g,R=_-A*g,O=v,z=b-A*v;for(I=0;I<u;++I){for(F=0;F<A;++F)d[c]=m[x],c+=D,x+=O;c+=R,x+=z}}}}},"uint8,2,0,1,uint8,1,2,0":function(){return function(y,d,p,c,m,l,x){var u=y[0],A=y[1],_=y[2],g=p[0],b=p[1],v=p[2],k=l[0],S=l[1],E=l[2];c|=0,x|=0;for(var C=c,F=x,I=y[2]|0;I>0;){I<64?(_=I,I=0):(_=64,I-=64);for(var D=y[0]|0;D>0;){D<64?(u=D,D=0):(u=64,D-=64);for(var R=y[1]|0;R>0;){R<64?(A=R,R=0):(A=64,R-=64),c=C+I*v+D*g+R*b,x=F+I*E+D*k+R*S;var O=0,z=0,B=0,G=v,Q=g-_*v,X=b-u*g,j=E,re=k-_*E,ue=S-u*k;for(B=0;B<A;++B){for(z=0;z<u;++z){for(O=0;O<_;++O)d[c]=m[x],c+=G,x+=j;c+=Q,x+=re}c+=X,x+=ue}}}}}},"uint8,2,0,1,array,2,0,1":function(){return function(y,d,p,c,m,l,x){var u=y[0],A=y[1],_=y[2],g=p[0],b=p[1],v=p[2],k=l[0],S=l[1],E=l[2];c|=0,x|=0;var C=0,F=0,I=0,D=v,R=g-_*v,O=b-u*g,z=E,B=k-_*E,G=S-u*k;for(I=0;I<A;++I){for(F=0;F<u;++F){for(C=0;C<_;++C)d[c]=m[x],c+=D,x+=z;c+=R,x+=B}c+=O,x+=G}}}};function a(o,y){var d=y.join(","),p=e[d];return p()}var n=a,r={mul:function(o){var y={};return function(p,c,m){var l=p.dtype,x=p.order,u=c.dtype,A=c.order,_=m.dtype,g=m.order,b=[l,x.join(),u,A.join(),_,g.join()].join(),v=y[b];return v||(y[b]=v=o([l,x,u,A,_,g])),v(p.shape.slice(0),p.data,p.stride,p.offset|0,c.data,c.stride,c.offset|0,m.data,m.stride,m.offset|0)}},muls:function(o){var y={};return function(p,c,m){var l=p.dtype,x=p.order,u=c.dtype,A=c.order,_=[l,x.join(),u,A.join()].join(),g=y[_];return g||(y[_]=g=o([l,x,u,A])),g(p.shape.slice(0),p.data,p.stride,p.offset|0,c.data,c.stride,c.offset|0,m)}},mulseq:function(o){var y={};return function(p,c){var m=p.dtype,l=p.order,x=[m,l.join()].join(),u=y[x];return u||(y[x]=u=o([m,l])),u(p.shape.slice(0),p.data,p.stride,p.offset|0,c)}},div:function(o){var y={};return function(p,c,m){var l=p.dtype,x=p.order,u=c.dtype,A=c.order,_=m.dtype,g=m.order,b=[l,x.join(),u,A.join(),_,g.join()].join(),v=y[b];return v||(y[b]=v=o([l,x,u,A,_,g])),v(p.shape.slice(0),p.data,p.stride,p.offset|0,c.data,c.stride,c.offset|0,m.data,m.stride,m.offset|0)}},divs:function(o){var y={};return function(p,c,m){var l=p.dtype,x=p.order,u=c.dtype,A=c.order,_=[l,x.join(),u,A.join()].join(),g=y[_];return g||(y[_]=g=o([l,x,u,A])),g(p.shape.slice(0),p.data,p.stride,p.offset|0,c.data,c.stride,c.offset|0,m)}},divseq:function(o){var y={};return function(p,c){var m=p.dtype,l=p.order,x=[m,l.join()].join(),u=y[x];return u||(y[x]=u=o([m,l])),u(p.shape.slice(0),p.data,p.stride,p.offset|0,c)}},assign:function(o){var y={};return function(p,c){var m=p.dtype,l=p.order,x=c.dtype,u=c.order,A=[m,l.join(),x,u.join()].join(),_=y[A];return _||(y[A]=_=o([m,l,x,u])),_(p.shape.slice(0),p.data,p.stride,p.offset|0,c.data,c.stride,c.offset|0)}}};function t(o){var y=r[o.funcName];return y(n.bind(void 0,o))}function h(o){return t({funcName:o.funcName})}var s={mul:"*",div:"/"};(function(){for(var o in s)T[o]=h({funcName:o}),T[o+"s"]=h({funcName:o+"s"}),T[o+"seq"]=h({funcName:o+"seq"})})(),T.assign=h({funcName:"assign"})},{}],255:[function(f,M,T){var e=f("ndarray"),a=f("./doConvert.js");M.exports=function(r,t){for(var h=[],s=r,o=1;Array.isArray(s);)h.push(s.length),o*=s.length,s=s[0];return h.length===0?e():(t||(t=e(new Float64Array(o),h)),a(t,r),t)}},{"./doConvert.js":256,ndarray:259}],256:[function(f,M,T){function e(){return function(s,o,y,d,p){var c=s[0],m=s[1],l=s[2],x=y[0],u=y[1],A=y[2],_=[0,0,0];d|=0;var g=0,b=0,v=0,k=A,S=u-l*A,E=x-m*u;for(v=0;v<c;++v){for(b=0;b<m;++b){for(g=0;g<l;++g){{var C=p,F;for(F=0;F<_.length-1;++F)C=C[_[F]];o[d]=C[_[_.length-1]]}d+=k,++_[2]}d+=S,_[2]-=l,++_[1]}d+=E,_[1]-=m,++_[0]}}}function a(){return e()}var n=a;function r(s){var o={};return function(d,p){var c=d.dtype,m=d.order,l=[c,m.join()].join(),x=o[l];return x||(o[l]=x=s([c,m])),x(d.shape.slice(0),d.data,d.stride,d.offset|0,p)}}function t(s){return r(n.bind(void 0,s))}function h(s){return t({funcName:s.funcName})}M.exports=h({funcName:"convert"})},{}],257:[function(f,M,T){var e=f("typedarray-pool");function a(y){switch(y){case"uint32":return[e.mallocUint32,e.freeUint32];default:return null}}var n={"uint32,1,0":function(y,d){return function(c,m,l,x,u,A,_,g,b,v,k){var S,E,C,F=c*u+x,I,D=y(g),R,O,z,B;for(S=c+1;S<=m;++S){for(E=S,F+=u,C=F,R=0,O=F,I=0;I<g;++I)D[R++]=l[O],O+=b;e:for(;E-- >c;){R=0,O=C-u;t:for(I=0;I<g;++I){if(z=l[O],B=D[R],z<B)break e;if(z>B)break t;O+=v,R+=k}for(R=C,O=C-u,I=0;I<g;++I)l[R]=l[O],R+=b,O+=b;C-=u}for(R=C,O=0,I=0;I<g;++I)l[R]=D[O++],R+=b}d(D)}}};function r(y,d){var p=a(d),c=[d,y].join(","),m=n[c];return p?m(p[0],p[1]):m()}var t={"uint32,1,0":function(y,d,p){return function c(m,l,x,u,A,_,g,b,v,k,S){var E=(l-m+1)/6|0,C=m+E,F=l-E,I=m+l>>1,D=I-E,R=I+E,O=C,z=D,B=I,G=R,Q=F,X=m+1,j=l-1,re=!0,ue,K,te,Y,H,ee,ne,Z,q,ie=0,se=0,ae=0,oe,be,ce,de,ye,ge,me,Se,Le,Oe,we,Ce,Ke,Ye,Fe,Re,je=b,xt=d(je),Nt=d(je);be=A*O,ce=A*z,Re=u;e:for(oe=0;oe<b;++oe){if(ne=be+Re,Z=ce+Re,ae=x[ne]-x[Z],ae>0){K=O,O=z,z=K;break e}if(ae<0)break e;Re+=k}be=A*G,ce=A*Q,Re=u;e:for(oe=0;oe<b;++oe){if(ne=be+Re,Z=ce+Re,ae=x[ne]-x[Z],ae>0){K=G,G=Q,Q=K;break e}if(ae<0)break e;Re+=k}be=A*O,ce=A*B,Re=u;e:for(oe=0;oe<b;++oe){if(ne=be+Re,Z=ce+Re,ae=x[ne]-x[Z],ae>0){K=O,O=B,B=K;break e}if(ae<0)break e;Re+=k}be=A*z,ce=A*B,Re=u;e:for(oe=0;oe<b;++oe){if(ne=be+Re,Z=ce+Re,ae=x[ne]-x[Z],ae>0){K=z,z=B,B=K;break e}if(ae<0)break e;Re+=k}be=A*O,ce=A*G,Re=u;e:for(oe=0;oe<b;++oe){if(ne=be+Re,Z=ce+Re,ae=x[ne]-x[Z],ae>0){K=O,O=G,G=K;break e}if(ae<0)break e;Re+=k}be=A*B,ce=A*G,Re=u;e:for(oe=0;oe<b;++oe){if(ne=be+Re,Z=ce+Re,ae=x[ne]-x[Z],ae>0){K=B,B=G,G=K;break e}if(ae<0)break e;Re+=k}be=A*z,ce=A*Q,Re=u;e:for(oe=0;oe<b;++oe){if(ne=be+Re,Z=ce+Re,ae=x[ne]-x[Z],ae>0){K=z,z=Q,Q=K;break e}if(ae<0)break e;Re+=k}be=A*z,ce=A*B,Re=u;e:for(oe=0;oe<b;++oe){if(ne=be+Re,Z=ce+Re,ae=x[ne]-x[Z],ae>0){K=z,z=B,B=K;break e}if(ae<0)break e;Re+=k}be=A*G,ce=A*Q,Re=u;e:for(oe=0;oe<b;++oe){if(ne=be+Re,Z=ce+Re,ae=x[ne]-x[Z],ae>0){K=G,G=Q,Q=K;break e}if(ae<0)break e;Re+=k}for(be=A*O,ce=A*z,de=A*B,ye=A*G,ge=A*Q,me=A*C,Se=A*I,Le=A*F,Fe=0,Re=u,oe=0;oe<b;++oe)ne=be+Re,Z=ce+Re,q=de+Re,Oe=ye+Re,we=ge+Re,Ce=me+Re,Ke=Se+Re,Ye=Le+Re,xt[Fe]=x[Z],Nt[Fe]=x[Oe],re=re&&xt[Fe]===Nt[Fe],te=x[ne],Y=x[q],H=x[we],x[Ce]=te,x[Ke]=Y,x[Ye]=H,++Fe,Re+=v;for(be=A*D,ce=A*m,Re=u,oe=0;oe<b;++oe)ne=be+Re,Z=ce+Re,x[ne]=x[Z],Re+=v;for(be=A*R,ce=A*l,Re=u,oe=0;oe<b;++oe)ne=be+Re,Z=ce+Re,x[ne]=x[Z],Re+=v;if(re)for(ee=X;ee<=j;++ee){ne=u+ee*A,Fe=0;e:for(oe=0;oe<b;++oe){if(ae=x[ne]-xt[Fe],ae!==0)break e;Fe+=S,ne+=k}if(ae!==0)if(ae<0){if(ee!==X)for(be=A*ee,ce=A*X,Re=u,oe=0;oe<b;++oe)ne=be+Re,Z=ce+Re,ue=x[ne],x[ne]=x[Z],x[Z]=ue,Re+=v;++X}else for(;;){ne=u+j*A,Fe=0;e:for(oe=0;oe<b;++oe){if(ae=x[ne]-xt[Fe],ae!==0)break e;Fe+=S,ne+=k}if(ae>0)j--;else if(ae<0){for(be=A*ee,ce=A*X,de=A*j,Re=u,oe=0;oe<b;++oe)ne=be+Re,Z=ce+Re,q=de+Re,ue=x[ne],x[ne]=x[Z],x[Z]=x[q],x[q]=ue,Re+=v;++X,--j;break}else{for(be=A*ee,ce=A*j,Re=u,oe=0;oe<b;++oe)ne=be+Re,Z=ce+Re,ue=x[ne],x[ne]=x[Z],x[Z]=ue,Re+=v;--j;break}}}else for(ee=X;ee<=j;++ee){ne=u+ee*A,Fe=0;e:for(oe=0;oe<b;++oe){if(ie=x[ne]-xt[Fe],ie!==0)break e;Fe+=S,ne+=k}if(ie<0){if(ee!==X)for(be=A*ee,ce=A*X,Re=u,oe=0;oe<b;++oe)ne=be+Re,Z=ce+Re,ue=x[ne],x[ne]=x[Z],x[Z]=ue,Re+=v;++X}else{ne=u+ee*A,Fe=0;e:for(oe=0;oe<b;++oe){if(se=x[ne]-Nt[Fe],se!==0)break e;Fe+=S,ne+=k}if(se>0)for(;;){ne=u+j*A,Fe=0;e:for(oe=0;oe<b;++oe){if(ae=x[ne]-Nt[Fe],ae!==0)break e;Fe+=S,ne+=k}if(ae>0){if(--j<ee)break;continue}else{ne=u+j*A,Fe=0;e:for(oe=0;oe<b;++oe){if(ae=x[ne]-xt[Fe],ae!==0)break e;Fe+=S,ne+=k}if(ae<0){for(be=A*ee,ce=A*X,de=A*j,Re=u,oe=0;oe<b;++oe)ne=be+Re,Z=ce+Re,q=de+Re,ue=x[ne],x[ne]=x[Z],x[Z]=x[q],x[q]=ue,Re+=v;++X,--j}else{for(be=A*ee,ce=A*j,Re=u,oe=0;oe<b;++oe)ne=be+Re,Z=ce+Re,ue=x[ne],x[ne]=x[Z],x[Z]=ue,Re+=v;--j}break}}}}for(be=A*m,ce=A*(X-1),Fe=0,Re=u,oe=0;oe<b;++oe)ne=be+Re,Z=ce+Re,x[ne]=x[Z],x[Z]=xt[Fe],++Fe,Re+=v;for(be=A*l,ce=A*(j+1),Fe=0,Re=u,oe=0;oe<b;++oe)ne=be+Re,Z=ce+Re,x[ne]=x[Z],x[Z]=Nt[Fe],++Fe,Re+=v;if(X-2-m<=32?y(m,X-2,x,u,A,_,g,b,v,k,S):c(m,X-2,x,u,A,_,g,b,v,k,S),l-(j+2)<=32?y(j+2,l,x,u,A,_,g,b,v,k,S):c(j+2,l,x,u,A,_,g,b,v,k,S),re){p(xt),p(Nt);return}if(X<C&&j>F){e:for(;;){for(ne=u+X*A,Fe=0,Re=u,oe=0;oe<b;++oe){if(x[ne]!==xt[Fe])break e;++Fe,ne+=v}++X}e:for(;;){for(ne=u+j*A,Fe=0,Re=u,oe=0;oe<b;++oe){if(x[ne]!==Nt[Fe])break e;++Fe,ne+=v}--j}for(ee=X;ee<=j;++ee){ne=u+ee*A,Fe=0;e:for(oe=0;oe<b;++oe){if(ie=x[ne]-xt[Fe],ie!==0)break e;Fe+=S,ne+=k}if(ie===0){if(ee!==X)for(be=A*ee,ce=A*X,Re=u,oe=0;oe<b;++oe)ne=be+Re,Z=ce+Re,ue=x[ne],x[ne]=x[Z],x[Z]=ue,Re+=v;++X}else{ne=u+ee*A,Fe=0;e:for(oe=0;oe<b;++oe){if(se=x[ne]-Nt[Fe],se!==0)break e;Fe+=S,ne+=k}if(se===0)for(;;){ne=u+j*A,Fe=0;e:for(oe=0;oe<b;++oe){if(ae=x[ne]-Nt[Fe],ae!==0)break e;Fe+=S,ne+=k}if(ae===0){if(--j<ee)break;continue}else{ne=u+j*A,Fe=0;e:for(oe=0;oe<b;++oe){if(ae=x[ne]-xt[Fe],ae!==0)break e;Fe+=S,ne+=k}if(ae<0){for(be=A*ee,ce=A*X,de=A*j,Re=u,oe=0;oe<b;++oe)ne=be+Re,Z=ce+Re,q=de+Re,ue=x[ne],x[ne]=x[Z],x[Z]=x[q],x[q]=ue,Re+=v;++X,--j}else{for(be=A*ee,ce=A*j,Re=u,oe=0;oe<b;++oe)ne=be+Re,Z=ce+Re,ue=x[ne],x[ne]=x[Z],x[Z]=ue,Re+=v;--j}break}}}}}p(xt),p(Nt),j-X<=32?y(X,j,x,u,A,_,g,b,v,k,S):c(X,j,x,u,A,_,g,b,v,k,S)}}};function h(y,d,p){var c=a(d),m=[d,y].join(","),l=t[m];return y.length>1&&c?l(p,c[0],c[1]):l(p)}var s={"uint32,1,0":function(y,d){return function(p){var c=p.data,m=p.offset|0,l=p.shape,x=p.stride,u=x[0]|0,A=l[0]|0,_=x[1]|0,g=l[1]|0,b=_,v=_,k=1;A<=32?y(0,A-1,c,m,u,_,A,g,b,v,k):d(0,A-1,c,m,u,_,A,g,b,v,k)}}};function o(y,d){var p=[d,y].join(","),c=s[p],m=r(y,d),l=h(y,d,m);return c(m,l)}M.exports=o},{"typedarray-pool":308}],258:[function(f,M,T){var e=f("./lib/compile_sort.js"),a={};function n(r){var t=r.order,h=r.dtype,s=[t,h],o=s.join(":"),y=a[o];return y||(a[o]=y=e(t,h)),y(r),r}M.exports=n},{"./lib/compile_sort.js":257}],259:[function(f,M,T){var e=f("is-buffer"),a=typeof Float64Array<"u";function n(d,p){return d[0]-p[0]}function r(){var d=this.stride,p=new Array(d.length),c;for(c=0;c<p.length;++c)p[c]=[Math.abs(d[c]),c];p.sort(n);var m=new Array(p.length);for(c=0;c<m.length;++c)m[c]=p[c][1];return m}var t={T:function(d){function p(m){this.data=m}var c=p.prototype;return c.dtype=d,c.index=function(){return-1},c.size=0,c.dimension=-1,c.shape=c.stride=c.order=[],c.lo=c.hi=c.transpose=c.step=function(){return new p(this.data)},c.get=c.set=function(){},c.pick=function(){return null},function(l){return new p(l)}},0:function(d,p){function c(l,x){this.data=l,this.offset=x}var m=c.prototype;return m.dtype=d,m.index=function(){return this.offset},m.dimension=0,m.size=1,m.shape=m.stride=m.order=[],m.lo=m.hi=m.transpose=m.step=function(){return new c(this.data,this.offset)},m.pick=function(){return p(this.data)},m.valueOf=m.get=function(){return d==="generic"?this.data.get(this.offset):this.data[this.offset]},m.set=function(x){return d==="generic"?this.data.set(this.offset,x):this.data[this.offset]=x},function(x,u,A,_){return new c(x,_)}},1:function(d,p,c){function m(x,u,A,_){this.data=x,this.shape=[u],this.stride=[A],this.offset=_|0}var l=m.prototype;return l.dtype=d,l.dimension=1,Object.defineProperty(l,"size",{get:function(){return this.shape[0]}}),l.order=[0],l.set=function(u,A){return d==="generic"?this.data.set(this.offset+this.stride[0]*u,A):this.data[this.offset+this.stride[0]*u]=A},l.get=function(u){return d==="generic"?this.data.get(this.offset+this.stride[0]*u):this.data[this.offset+this.stride[0]*u]},l.index=function(u){return this.offset+this.stride[0]*u},l.hi=function(u){return new m(this.data,typeof u!="number"||u<0?this.shape[0]:u|0,this.stride[0],this.offset)},l.lo=function(u){var A=this.offset,_=0,g=this.shape[0],b=this.stride[0];return typeof u=="number"&&u>=0&&(_=u|0,A+=b*_,g-=_),new m(this.data,g,b,A)},l.step=function(u){var A=this.shape[0],_=this.stride[0],g=this.offset,b=0,v=Math.ceil;return typeof u=="number"&&(b=u|0,b<0?(g+=_*(A-1),A=v(-A/b)):A=v(A/b),_*=b),new m(this.data,A,_,g)},l.transpose=function(u){u=u===void 0?0:u|0;var A=this.shape,_=this.stride;return new m(this.data,A[u],_[u],this.offset)},l.pick=function(u){var A=[],_=[],g=this.offset;typeof u=="number"&&u>=0?g=g+this.stride[0]*u|0:(A.push(this.shape[0]),_.push(this.stride[0]));var b=p[A.length+1];return b(this.data,A,_,g)},function(u,A,_,g){return new m(u,A[0],_[0],g)}},2:function(d,p,c){function m(x,u,A,_,g,b){this.data=x,this.shape=[u,A],this.stride=[_,g],this.offset=b|0}var l=m.prototype;return l.dtype=d,l.dimension=2,Object.defineProperty(l,"size",{get:function(){return this.shape[0]*this.shape[1]}}),Object.defineProperty(l,"order",{get:function(){return Math.abs(this.stride[0])>Math.abs(this.stride[1])?[1,0]:[0,1]}}),l.set=function(u,A,_){return d==="generic"?this.data.set(this.offset+this.stride[0]*u+this.stride[1]*A,_):this.data[this.offset+this.stride[0]*u+this.stride[1]*A]=_},l.get=function(u,A){return d==="generic"?this.data.get(this.offset+this.stride[0]*u+this.stride[1]*A):this.data[this.offset+this.stride[0]*u+this.stride[1]*A]},l.index=function(u,A){return this.offset+this.stride[0]*u+this.stride[1]*A},l.hi=function(u,A){return new m(this.data,typeof u!="number"||u<0?this.shape[0]:u|0,typeof A!="number"||A<0?this.shape[1]:A|0,this.stride[0],this.stride[1],this.offset)},l.lo=function(u,A){var _=this.offset,g=0,b=this.shape[0],v=this.shape[1],k=this.stride[0],S=this.stride[1];return typeof u=="number"&&u>=0&&(g=u|0,_+=k*g,b-=g),typeof A=="number"&&A>=0&&(g=A|0,_+=S*g,v-=g),new m(this.data,b,v,k,S,_)},l.step=function(u,A){var _=this.shape[0],g=this.shape[1],b=this.stride[0],v=this.stride[1],k=this.offset,S=0,E=Math.ceil;return typeof u=="number"&&(S=u|0,S<0?(k+=b*(_-1),_=E(-_/S)):_=E(_/S),b*=S),typeof A=="number"&&(S=A|0,S<0?(k+=v*(g-1),g=E(-g/S)):g=E(g/S),v*=S),new m(this.data,_,g,b,v,k)},l.transpose=function(u,A){u=u===void 0?0:u|0,A=A===void 0?1:A|0;var _=this.shape,g=this.stride;return new m(this.data,_[u],_[A],g[u],g[A],this.offset)},l.pick=function(u,A){var _=[],g=[],b=this.offset;typeof u=="number"&&u>=0?b=b+this.stride[0]*u|0:(_.push(this.shape[0]),g.push(this.stride[0])),typeof A=="number"&&A>=0?b=b+this.stride[1]*A|0:(_.push(this.shape[1]),g.push(this.stride[1]));var v=p[_.length+1];return v(this.data,_,g,b)},function(u,A,_,g){return new m(u,A[0],A[1],_[0],_[1],g)}},3:function(d,p,c){function m(x,u,A,_,g,b,v,k){this.data=x,this.shape=[u,A,_],this.stride=[g,b,v],this.offset=k|0}var l=m.prototype;return l.dtype=d,l.dimension=3,Object.defineProperty(l,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]}}),Object.defineProperty(l,"order",{get:function(){var u=Math.abs(this.stride[0]),A=Math.abs(this.stride[1]),_=Math.abs(this.stride[2]);return u>A?A>_?[2,1,0]:u>_?[1,2,0]:[1,0,2]:u>_?[2,0,1]:_>A?[0,1,2]:[0,2,1]}}),l.set=function(u,A,_,g){return d==="generic"?this.data.set(this.offset+this.stride[0]*u+this.stride[1]*A+this.stride[2]*_,g):this.data[this.offset+this.stride[0]*u+this.stride[1]*A+this.stride[2]*_]=g},l.get=function(u,A,_){return d==="generic"?this.data.get(this.offset+this.stride[0]*u+this.stride[1]*A+this.stride[2]*_):this.data[this.offset+this.stride[0]*u+this.stride[1]*A+this.stride[2]*_]},l.index=function(u,A,_){return this.offset+this.stride[0]*u+this.stride[1]*A+this.stride[2]*_},l.hi=function(u,A,_){return new m(this.data,typeof u!="number"||u<0?this.shape[0]:u|0,typeof A!="number"||A<0?this.shape[1]:A|0,typeof _!="number"||_<0?this.shape[2]:_|0,this.stride[0],this.stride[1],this.stride[2],this.offset)},l.lo=function(u,A,_){var g=this.offset,b=0,v=this.shape[0],k=this.shape[1],S=this.shape[2],E=this.stride[0],C=this.stride[1],F=this.stride[2];return typeof u=="number"&&u>=0&&(b=u|0,g+=E*b,v-=b),typeof A=="number"&&A>=0&&(b=A|0,g+=C*b,k-=b),typeof _=="number"&&_>=0&&(b=_|0,g+=F*b,S-=b),new m(this.data,v,k,S,E,C,F,g)},l.step=function(u,A,_){var g=this.shape[0],b=this.shape[1],v=this.shape[2],k=this.stride[0],S=this.stride[1],E=this.stride[2],C=this.offset,F=0,I=Math.ceil;return typeof u=="number"&&(F=u|0,F<0?(C+=k*(g-1),g=I(-g/F)):g=I(g/F),k*=F),typeof A=="number"&&(F=A|0,F<0?(C+=S*(b-1),b=I(-b/F)):b=I(b/F),S*=F),typeof _=="number"&&(F=_|0,F<0?(C+=E*(v-1),v=I(-v/F)):v=I(v/F),E*=F),new m(this.data,g,b,v,k,S,E,C)},l.transpose=function(u,A,_){u=u===void 0?0:u|0,A=A===void 0?1:A|0,_=_===void 0?2:_|0;var g=this.shape,b=this.stride;return new m(this.data,g[u],g[A],g[_],b[u],b[A],b[_],this.offset)},l.pick=function(u,A,_){var g=[],b=[],v=this.offset;typeof u=="number"&&u>=0?v=v+this.stride[0]*u|0:(g.push(this.shape[0]),b.push(this.stride[0])),typeof A=="number"&&A>=0?v=v+this.stride[1]*A|0:(g.push(this.shape[1]),b.push(this.stride[1])),typeof _=="number"&&_>=0?v=v+this.stride[2]*_|0:(g.push(this.shape[2]),b.push(this.stride[2]));var k=p[g.length+1];return k(this.data,g,b,v)},function(u,A,_,g){return new m(u,A[0],A[1],A[2],_[0],_[1],_[2],g)}},4:function(d,p,c){function m(x,u,A,_,g,b,v,k,S,E){this.data=x,this.shape=[u,A,_,g],this.stride=[b,v,k,S],this.offset=E|0}var l=m.prototype;return l.dtype=d,l.dimension=4,Object.defineProperty(l,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]}}),Object.defineProperty(l,"order",{get:c}),l.set=function(u,A,_,g,b){return d==="generic"?this.data.set(this.offset+this.stride[0]*u+this.stride[1]*A+this.stride[2]*_+this.stride[3]*g,b):this.data[this.offset+this.stride[0]*u+this.stride[1]*A+this.stride[2]*_+this.stride[3]*g]=b},l.get=function(u,A,_,g){return d==="generic"?this.data.get(this.offset+this.stride[0]*u+this.stride[1]*A+this.stride[2]*_+this.stride[3]*g):this.data[this.offset+this.stride[0]*u+this.stride[1]*A+this.stride[2]*_+this.stride[3]*g]},l.index=function(u,A,_,g){return this.offset+this.stride[0]*u+this.stride[1]*A+this.stride[2]*_+this.stride[3]*g},l.hi=function(u,A,_,g){return new m(this.data,typeof u!="number"||u<0?this.shape[0]:u|0,typeof A!="number"||A<0?this.shape[1]:A|0,typeof _!="number"||_<0?this.shape[2]:_|0,typeof g!="number"||g<0?this.shape[3]:g|0,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.offset)},l.lo=function(u,A,_,g){var b=this.offset,v=0,k=this.shape[0],S=this.shape[1],E=this.shape[2],C=this.shape[3],F=this.stride[0],I=this.stride[1],D=this.stride[2],R=this.stride[3];return typeof u=="number"&&u>=0&&(v=u|0,b+=F*v,k-=v),typeof A=="number"&&A>=0&&(v=A|0,b+=I*v,S-=v),typeof _=="number"&&_>=0&&(v=_|0,b+=D*v,E-=v),typeof g=="number"&&g>=0&&(v=g|0,b+=R*v,C-=v),new m(this.data,k,S,E,C,F,I,D,R,b)},l.step=function(u,A,_,g){var b=this.shape[0],v=this.shape[1],k=this.shape[2],S=this.shape[3],E=this.stride[0],C=this.stride[1],F=this.stride[2],I=this.stride[3],D=this.offset,R=0,O=Math.ceil;return typeof u=="number"&&(R=u|0,R<0?(D+=E*(b-1),b=O(-b/R)):b=O(b/R),E*=R),typeof A=="number"&&(R=A|0,R<0?(D+=C*(v-1),v=O(-v/R)):v=O(v/R),C*=R),typeof _=="number"&&(R=_|0,R<0?(D+=F*(k-1),k=O(-k/R)):k=O(k/R),F*=R),typeof g=="number"&&(R=g|0,R<0?(D+=I*(S-1),S=O(-S/R)):S=O(S/R),I*=R),new m(this.data,b,v,k,S,E,C,F,I,D)},l.transpose=function(u,A,_,g){u=u===void 0?0:u|0,A=A===void 0?1:A|0,_=_===void 0?2:_|0,g=g===void 0?3:g|0;var b=this.shape,v=this.stride;return new m(this.data,b[u],b[A],b[_],b[g],v[u],v[A],v[_],v[g],this.offset)},l.pick=function(u,A,_,g){var b=[],v=[],k=this.offset;typeof u=="number"&&u>=0?k=k+this.stride[0]*u|0:(b.push(this.shape[0]),v.push(this.stride[0])),typeof A=="number"&&A>=0?k=k+this.stride[1]*A|0:(b.push(this.shape[1]),v.push(this.stride[1])),typeof _=="number"&&_>=0?k=k+this.stride[2]*_|0:(b.push(this.shape[2]),v.push(this.stride[2])),typeof g=="number"&&g>=0?k=k+this.stride[3]*g|0:(b.push(this.shape[3]),v.push(this.stride[3]));var S=p[b.length+1];return S(this.data,b,v,k)},function(u,A,_,g){return new m(u,A[0],A[1],A[2],A[3],_[0],_[1],_[2],_[3],g)}},5:function(p,c,m){function l(u,A,_,g,b,v,k,S,E,C,F,I){this.data=u,this.shape=[A,_,g,b,v],this.stride=[k,S,E,C,F],this.offset=I|0}var x=l.prototype;return x.dtype=p,x.dimension=5,Object.defineProperty(x,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]*this.shape[4]}}),Object.defineProperty(x,"order",{get:m}),x.set=function(A,_,g,b,v,k){return p==="generic"?this.data.set(this.offset+this.stride[0]*A+this.stride[1]*_+this.stride[2]*g+this.stride[3]*b+this.stride[4]*v,k):this.data[this.offset+this.stride[0]*A+this.stride[1]*_+this.stride[2]*g+this.stride[3]*b+this.stride[4]*v]=k},x.get=function(A,_,g,b,v){return p==="generic"?this.data.get(this.offset+this.stride[0]*A+this.stride[1]*_+this.stride[2]*g+this.stride[3]*b+this.stride[4]*v):this.data[this.offset+this.stride[0]*A+this.stride[1]*_+this.stride[2]*g+this.stride[3]*b+this.stride[4]*v]},x.index=function(A,_,g,b,v){return this.offset+this.stride[0]*A+this.stride[1]*_+this.stride[2]*g+this.stride[3]*b+this.stride[4]*v},x.hi=function(A,_,g,b,v){return new l(this.data,typeof A!="number"||A<0?this.shape[0]:A|0,typeof _!="number"||_<0?this.shape[1]:_|0,typeof g!="number"||g<0?this.shape[2]:g|0,typeof b!="number"||b<0?this.shape[3]:b|0,typeof v!="number"||v<0?this.shape[4]:v|0,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.stride[4],this.offset)},x.lo=function(A,_,g,b,v){var k=this.offset,S=0,E=this.shape[0],C=this.shape[1],F=this.shape[2],I=this.shape[3],D=this.shape[4],R=this.stride[0],O=this.stride[1],z=this.stride[2],B=this.stride[3],G=this.stride[4];return typeof A=="number"&&A>=0&&(S=A|0,k+=R*S,E-=S),typeof _=="number"&&_>=0&&(S=_|0,k+=O*S,C-=S),typeof g=="number"&&g>=0&&(S=g|0,k+=z*S,F-=S),typeof b=="number"&&b>=0&&(S=b|0,k+=B*S,I-=S),typeof v=="number"&&v>=0&&(S=v|0,k+=G*S,D-=S),new l(this.data,E,C,F,I,D,R,O,z,B,G,k)},x.step=function(A,_,g,b,v){var k=this.shape[0],S=this.shape[1],E=this.shape[2],C=this.shape[3],F=this.shape[4],I=this.stride[0],D=this.stride[1],R=this.stride[2],O=this.stride[3],z=this.stride[4],B=this.offset,G=0,Q=Math.ceil;return typeof A=="number"&&(G=A|0,G<0?(B+=I*(k-1),k=Q(-k/G)):k=Q(k/G),I*=G),typeof _=="number"&&(G=_|0,G<0?(B+=D*(S-1),S=Q(-S/G)):S=Q(S/G),D*=G),typeof g=="number"&&(G=g|0,G<0?(B+=R*(E-1),E=Q(-E/G)):E=Q(E/G),R*=G),typeof b=="number"&&(G=b|0,G<0?(B+=O*(C-1),C=Q(-C/G)):C=Q(C/G),O*=G),typeof v=="number"&&(G=v|0,G<0?(B+=z*(F-1),F=Q(-F/G)):F=Q(F/G),z*=G),new l(this.data,k,S,E,C,F,I,D,R,O,z,B)},x.transpose=function(A,_,g,b,v){A=A===void 0?0:A|0,_=_===void 0?1:_|0,g=g===void 0?2:g|0,b=b===void 0?3:b|0,v=v===void 0?4:v|0;var k=this.shape,S=this.stride;return new l(this.data,k[A],k[_],k[g],k[b],k[v],S[A],S[_],S[g],S[b],S[v],this.offset)},x.pick=function(A,_,g,b,v){var k=[],S=[],E=this.offset;typeof A=="number"&&A>=0?E=E+this.stride[0]*A|0:(k.push(this.shape[0]),S.push(this.stride[0])),typeof _=="number"&&_>=0?E=E+this.stride[1]*_|0:(k.push(this.shape[1]),S.push(this.stride[1])),typeof g=="number"&&g>=0?E=E+this.stride[2]*g|0:(k.push(this.shape[2]),S.push(this.stride[2])),typeof b=="number"&&b>=0?E=E+this.stride[3]*b|0:(k.push(this.shape[3]),S.push(this.stride[3])),typeof v=="number"&&v>=0?E=E+this.stride[4]*v|0:(k.push(this.shape[4]),S.push(this.stride[4]));var C=c[k.length+1];return C(this.data,k,S,E)},function(A,_,g,b){return new l(A,_[0],_[1],_[2],_[3],_[4],g[0],g[1],g[2],g[3],g[4],b)}}};function h(d,p){var c=p===-1?"T":String(p),m=t[c];return p===-1?m(d):p===0?m(d,o[d][0]):m(d,o[d],r)}function s(d){if(e(d))return"buffer";if(a)switch(Object.prototype.toString.call(d)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(d)?"array":"generic"}var o={generic:[],buffer:[],array:[],float32:[],float64:[],int8:[],int16:[],int32:[],uint8_clamped:[],uint8:[],uint16:[],uint32:[],bigint64:[],biguint64:[]};function y(d,p,c,m){if(d===void 0){var g=o.array[0];return g([])}else typeof d=="number"&&(d=[d]);p===void 0&&(p=[d.length]);var l=p.length;if(c===void 0){c=new Array(l);for(var x=l-1,u=1;x>=0;--x)c[x]=u,u*=p[x]}if(m===void 0){m=0;for(var x=0;x<l;++x)c[x]<0&&(m-=(p[x]-1)*c[x])}for(var A=s(d),_=o[A];_.length<=l+1;)_.push(h(A,_.length-1));var g=_[l+1];return g(d,p,c,m)}M.exports=y},{"is-buffer":237}],260:[function(f,M,T){var e=f("double-bits"),a=Math.pow(2,-1074),n=-1>>>0;M.exports=r;function r(t,h){if(isNaN(t)||isNaN(h))return NaN;if(t===h)return t;if(t===0)return h<0?-a:a;var s=e.hi(t),o=e.lo(t);return h>t==t>0?o===n?(s+=1,o=0):o+=1:o===0?(o=n,s-=1):o-=1,e.pack(o,s)}},{"double-bits":64}],261:[function(f,M,T){var e=1e-6,a=1e-6;T.vertexNormals=function(n,r,t){for(var h=r.length,s=new Array(h),o=t===void 0?e:t,y=0;y<h;++y)s[y]=[0,0,0];for(var y=0;y<n.length;++y)for(var d=n[y],p=0,c=d[d.length-1],m=d[0],l=0;l<d.length;++l){p=c,c=m,m=d[(l+1)%d.length];for(var x=r[p],u=r[c],A=r[m],_=new Array(3),g=0,b=new Array(3),v=0,k=0;k<3;++k)_[k]=x[k]-u[k],g+=_[k]*_[k],b[k]=A[k]-u[k],v+=b[k]*b[k];if(g*v>o)for(var S=s[c],E=1/Math.sqrt(g*v),k=0;k<3;++k){var C=(k+1)%3,F=(k+2)%3;S[k]+=E*(b[C]*_[F]-b[F]*_[C])}}for(var y=0;y<h;++y){for(var S=s[y],I=0,k=0;k<3;++k)I+=S[k]*S[k];if(I>o)for(var E=1/Math.sqrt(I),k=0;k<3;++k)S[k]*=E;else for(var k=0;k<3;++k)S[k]=0}return s},T.faceNormals=function(n,r,t){for(var h=n.length,s=new Array(h),o=t===void 0?a:t,y=0;y<h;++y){for(var d=n[y],p=new Array(3),c=0;c<3;++c)p[c]=r[d[c]];for(var m=new Array(3),l=new Array(3),c=0;c<3;++c)m[c]=p[1][c]-p[0][c],l[c]=p[2][c]-p[0][c];for(var x=new Array(3),u=0,c=0;c<3;++c){var A=(c+1)%3,_=(c+2)%3;x[c]=m[A]*l[_]-m[_]*l[A],u+=x[c]*x[c]}u>o?u=1/Math.sqrt(u):u=0;for(var c=0;c<3;++c)x[c]*=u;s[y]=x}return s}},{}],262:[function(f,M,T){M.exports=e;function e(a,n,r,t,h,s,o,y,d,p){var c=n+s+p;if(m>0){var m=Math.sqrt(c+1);a[0]=.5*(o-d)/m,a[1]=.5*(y-t)/m,a[2]=.5*(r-s)/m,a[3]=.5*m}else{var l=Math.max(n,s,p),m=Math.sqrt(2*l-c+1);n>=l?(a[0]=.5*m,a[1]=.5*(h+r)/m,a[2]=.5*(y+t)/m,a[3]=.5*(o-d)/m):s>=l?(a[0]=.5*(r+h)/m,a[1]=.5*m,a[2]=.5*(d+o)/m,a[3]=.5*(y-t)/m):(a[0]=.5*(t+y)/m,a[1]=.5*(o+d)/m,a[2]=.5*m,a[3]=.5*(r-h)/m)}return a}},{}],263:[function(f,M,T){M.exports=p;var e=f("filtered-vector"),a=f("gl-mat4/lookAt"),n=f("gl-mat4/fromQuat"),r=f("gl-mat4/invert"),t=f("./lib/quatFromFrame");function h(c,m,l){return Math.sqrt(Math.pow(c,2)+Math.pow(m,2)+Math.pow(l,2))}function s(c,m,l,x){return Math.sqrt(Math.pow(c,2)+Math.pow(m,2)+Math.pow(l,2)+Math.pow(x,2))}function o(c,m){var l=m[0],x=m[1],u=m[2],A=m[3],_=s(l,x,u,A);_>1e-6?(c[0]=l/_,c[1]=x/_,c[2]=u/_,c[3]=A/_):(c[0]=c[1]=c[2]=0,c[3]=1)}function y(c,m,l){this.radius=e([l]),this.center=e(m),this.rotation=e(c),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var d=y.prototype;d.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},d.recalcMatrix=function(c){this.radius.curve(c),this.center.curve(c),this.rotation.curve(c);var m=this.computedRotation;o(m,m);var l=this.computedMatrix;n(l,m);var x=this.computedCenter,u=this.computedEye,A=this.computedUp,_=Math.exp(this.computedRadius[0]);u[0]=x[0]+_*l[2],u[1]=x[1]+_*l[6],u[2]=x[2]+_*l[10],A[0]=l[1],A[1]=l[5],A[2]=l[9];for(var g=0;g<3;++g){for(var b=0,v=0;v<3;++v)b+=l[g+4*v]*u[v];l[12+g]=-b}},d.getMatrix=function(c,m){this.recalcMatrix(c);var l=this.computedMatrix;if(m){for(var x=0;x<16;++x)m[x]=l[x];return m}return l},d.idle=function(c){this.center.idle(c),this.radius.idle(c),this.rotation.idle(c)},d.flush=function(c){this.center.flush(c),this.radius.flush(c),this.rotation.flush(c)},d.pan=function(c,m,l,x){m=m||0,l=l||0,x=x||0,this.recalcMatrix(c);var u=this.computedMatrix,A=u[1],_=u[5],g=u[9],b=h(A,_,g);A/=b,_/=b,g/=b;var v=u[0],k=u[4],S=u[8],E=v*A+k*_+S*g;v-=A*E,k-=_*E,S-=g*E;var C=h(v,k,S);v/=C,k/=C,S/=C,u[2],u[6],u[10];var F=v*m+A*l,I=k*m+_*l,D=S*m+g*l;this.center.move(c,F,I,D);var R=Math.exp(this.computedRadius[0]);R=Math.max(1e-4,R+x),this.radius.set(c,Math.log(R))},d.rotate=function(c,m,l,x){this.recalcMatrix(c),m=m||0,l=l||0;var u=this.computedMatrix,A=u[0],_=u[4],g=u[8],b=u[1],v=u[5],k=u[9],S=u[2],E=u[6],C=u[10],F=m*A+l*b,I=m*_+l*v,D=m*g+l*k,R=-(E*D-C*I),O=-(C*F-S*D),z=-(S*I-E*F),B=Math.sqrt(Math.max(0,1-Math.pow(R,2)-Math.pow(O,2)-Math.pow(z,2))),G=s(R,O,z,B);G>1e-6?(R/=G,O/=G,z/=G,B/=G):(R=O=z=0,B=1);var Q=this.computedRotation,X=Q[0],j=Q[1],re=Q[2],ue=Q[3],K=X*B+ue*R+j*z-re*O,te=j*B+ue*O+re*R-X*z,Y=re*B+ue*z+X*O-j*R,H=ue*B-X*R-j*O-re*z;if(x){R=S,O=E,z=C;var ee=Math.sin(x)/h(R,O,z);R*=ee,O*=ee,z*=ee,B=Math.cos(m),K=K*B+H*R+te*z-Y*O,te=te*B+H*O+Y*R-K*z,Y=Y*B+H*z+K*O-te*R,H=H*B-K*R-te*O-Y*z}var ne=s(K,te,Y,H);ne>1e-6?(K/=ne,te/=ne,Y/=ne,H/=ne):(K=te=Y=0,H=1),this.rotation.set(c,K,te,Y,H)},d.lookAt=function(c,m,l,x){this.recalcMatrix(c),l=l||this.computedCenter,m=m||this.computedEye,x=x||this.computedUp;var u=this.computedMatrix;a(u,m,l,x);var A=this.computedRotation;t(A,u[0],u[1],u[2],u[4],u[5],u[6],u[8],u[9],u[10]),o(A,A),this.rotation.set(c,A[0],A[1],A[2],A[3]);for(var _=0,g=0;g<3;++g)_+=Math.pow(l[g]-m[g],2);this.radius.set(c,.5*Math.log(Math.max(_,1e-6))),this.center.set(c,l[0],l[1],l[2])},d.translate=function(c,m,l,x){this.center.move(c,m||0,l||0,x||0)},d.setMatrix=function(c,m){var l=this.computedRotation;t(l,m[0],m[1],m[2],m[4],m[5],m[6],m[8],m[9],m[10]),o(l,l),this.rotation.set(c,l[0],l[1],l[2],l[3]);var x=this.computedMatrix;r(x,m);var u=x[15];if(Math.abs(u)>1e-6){var A=x[12]/u,_=x[13]/u,g=x[14]/u;this.recalcMatrix(c);var b=Math.exp(this.computedRadius[0]);this.center.set(c,A-x[2]*b,_-x[6]*b,g-x[10]*b),this.radius.idle(c)}else this.center.idle(c),this.radius.idle(c)},d.setDistance=function(c,m){m>0&&this.radius.set(c,Math.log(m))},d.setDistanceLimits=function(c,m){c>0?c=Math.log(c):c=-1/0,m>0?m=Math.log(m):m=1/0,m=Math.max(m,c),this.radius.bounds[0][0]=c,this.radius.bounds[1][0]=m},d.getDistanceLimits=function(c){var m=this.radius.bounds;return c?(c[0]=Math.exp(m[0][0]),c[1]=Math.exp(m[1][0]),c):[Math.exp(m[0][0]),Math.exp(m[1][0])]},d.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},d.fromJSON=function(c){var m=this.lastT(),l=c.center;l&&this.center.set(m,l[0],l[1],l[2]);var x=c.rotation;x&&this.rotation.set(m,x[0],x[1],x[2],x[3]);var u=c.distance;u&&u>0&&this.radius.set(m,Math.log(u)),this.setDistanceLimits(c.zoomMin,c.zoomMax)};function p(c){c=c||{};var m=c.center||[0,0,0],l=c.rotation||[0,0,0,1],x=c.radius||1;m=[].slice.call(m,0,3),l=[].slice.call(l,0,4),o(l,l);var u=new y(l,m,Math.log(x));return u.setDistanceLimits(c.zoomMin,c.zoomMax),("eye"in c||"up"in c)&&u.lookAt(0,c.eye,c.center,c.up),u}},{"./lib/quatFromFrame":262,"filtered-vector":68,"gl-mat4/fromQuat":95,"gl-mat4/invert":98,"gl-mat4/lookAt":99}],264:[function(f,M,T){var e=f("repeat-string");M.exports=function(n,r,t){return t=typeof t<"u"?t+"":" ",e(t,r)+n}},{"repeat-string":277}],265:[function(f,M,T){M.exports=function(a,n){n||(n=[0,""]),a=String(a);var r=parseFloat(a,10);return n[0]=r,n[1]=a.match(/[\d.\-\+]*\s*(.*)/)[1]||"",n}},{}],266:[function(f,M,T){M.exports=a;var e=f("compare-angle");function a(n,r){for(var t=r.length|0,h=n.length,s=[new Array(t),new Array(t)],o=0;o<t;++o)s[0][o]=[],s[1][o]=[];for(var o=0;o<h;++o){var y=n[o];s[0][y[0]].push(y),s[1][y[1]].push(y)}for(var d=[],o=0;o<t;++o)s[0][o].length+s[1][o].length===0&&d.push([o]);function p(_,g){var b=s[g][_[g]];b.splice(b.indexOf(_),1)}function c(_,g,b){for(var v,k,S,E=0;E<2;++E)if(s[E][g].length>0){v=s[E][g][0],S=E;break}k=v[S^1];for(var C=0;C<2;++C)for(var F=s[C][g],I=0;I<F.length;++I){var D=F[I],R=D[C^1],O=e(r[_],r[g],r[k],r[R]);O>0&&(v=D,k=R,S=C)}return b||v&&p(v,S),k}function m(_,g){var b=s[g][_][0],v=[_];p(b,g);for(var k=b[g^1];;){for(;k!==_;)v.push(k),k=c(v[v.length-2],k,!1);if(s[0][_].length+s[1][_].length===0)break;var S=v[v.length-1],E=_,C=v[1],F=c(S,E,!0);if(e(r[S],r[E],r[C],r[F])<0)break;v.push(_),k=c(S,E)}return v}function l(_,g){return g[1]===g[g.length-1]}for(var o=0;o<t;++o)for(var x=0;x<2;++x){for(var u=[];s[x][o].length>0;){s[0][o].length;var A=m(o,x);l(u,A)?u.push.apply(u,A):(u.length>0&&d.push(u),u=A)}u.length>0&&d.push(u)}return d}},{"compare-angle":54}],267:[function(f,M,T){M.exports=a;var e=f("edges-to-adjacency-list");function a(n,r){for(var t=e(n,r.length),h=new Array(r.length),s=new Array(r.length),o=[],y=0;y<r.length;++y){var d=t[y].length;s[y]=d,h[y]=!0,d<=1&&o.push(y)}for(;o.length>0;){var p=o.pop();h[p]=!1;for(var c=t[p],y=0;y<c.length;++y){var m=c[y];--s[m]===0&&o.push(m)}}for(var l=new Array(r.length),x=[],y=0;y<r.length;++y)if(h[y]){var p=x.length;l[y]=p,x.push(r[y])}else l[y]=-1;for(var u=[],y=0;y<n.length;++y){var A=n[y];h[A[0]]&&h[A[1]]&&u.push([l[A[0]],l[A[1]]])}return[u,x]}},{"edges-to-adjacency-list":66}],268:[function(f,M,T){M.exports=d;var e=f("edges-to-adjacency-list"),a=f("planar-dual"),n=f("point-in-big-polygon"),r=f("two-product"),t=f("robust-sum"),h=f("uniq"),s=f("./lib/trim-leaves");function o(p,c){for(var m=new Array(p),l=0;l<p;++l)m[l]=c;return m}function y(p){for(var c=new Array(p),m=0;m<p;++m)c[m]=[];return c}function d(p,c){var H=s(p,c);p=H[0],c=H[1];var m=c.length;p.length;for(var l=e(p,c.length),x=0;x<m;++x)if(l[x].length%2===1)throw new Error("planar-graph-to-polyline: graph must be manifold");var u=a(p,c);function A(ae){for(var oe=ae.length,be=[0],ce=0;ce<oe;++ce){var de=c[ae[ce]],ye=c[ae[(ce+1)%oe]],ge=r(-de[0],de[1]),me=r(-de[0],ye[1]),Se=r(ye[0],de[1]),Le=r(ye[0],ye[1]);be=t(be,t(t(ge,me),t(Se,Le)))}return be[be.length-1]>0}u=u.filter(A);for(var _=u.length,g=new Array(_),b=new Array(_),x=0;x<_;++x){g[x]=x;var v=new Array(_),k=u[x].map(function(oe){return c[oe]}),S=n([k]),E=0;e:for(var C=0;C<_;++C)if(v[C]=0,x!==C){for(var F=u[C],I=F.length,D=0;D<I;++D){var R=S(c[F[D]]);if(R!==0){R<0&&(v[C]=1,E+=1);continue e}}v[C]=1,E+=1}b[x]=[E,x,v]}b.sort(function(ae,oe){return oe[0]-ae[0]});for(var x=0;x<_;++x)for(var v=b[x],O=v[1],z=v[2],C=0;C<_;++C)z[C]&&(g[C]=O);for(var B=y(_),x=0;x<_;++x)B[x].push(g[x]),B[g[x]].push(x);for(var G={},Q=o(m,!1),x=0;x<_;++x)for(var F=u[x],I=F.length,C=0;C<I;++C){var X=F[C],j=F[(C+1)%I],re=Math.min(X,j)+":"+Math.max(X,j);if(re in G){var ue=G[re];B[ue].push(x),B[x].push(ue),Q[X]=Q[j]=!0}else G[re]=x}function K(ae){for(var oe=ae.length,be=0;be<oe;++be)if(!Q[ae[be]])return!1;return!0}for(var te=[],Y=o(_,-1),x=0;x<_;++x)g[x]===x&&!K(u[x])?(te.push(x),Y[x]=0):Y[x]=-1;for(var H=[];te.length>0;){var ee=te.pop(),ne=B[ee];h(ne,function(ae,oe){return ae-oe});var Z=ne.length,q=Y[ee],ie;if(q===0){var F=u[ee];ie=[F]}for(var x=0;x<Z;++x){var se=ne[x];if(!(Y[se]>=0)&&(Y[se]=q^1,te.push(se),q===0)){var F=u[se];K(F)||(F.reverse(),ie.push(F))}}q===0&&H.push(ie)}return H}},{"./lib/trim-leaves":267,"edges-to-adjacency-list":66,"planar-dual":266,"point-in-big-polygon":269,"robust-sum":289,"two-product":306,uniq:310}],269:[function(f,M,T){M.exports=c;var e=f("robust-orientation")[3],a=f("slab-decomposition"),n=f("interval-tree-1d"),r=f("binary-search-bounds");function t(){return!0}function h(m){return function(l,x){var u=m[l];return u?!!u.queryPoint(x,t):!1}}function s(m){for(var l={},x=0;x<m.length;++x){var u=m[x],A=u[0][0],_=u[0][1],g=u[1][1],b=[Math.min(_,g),Math.max(_,g)];A in l?l[A].push(b):l[A]=[b]}for(var v={},k=Object.keys(l),x=0;x<k.length;++x){var S=l[k[x]];v[k[x]]=n(S)}return h(v)}function o(m,l){return function(x){var u=r.le(l,x[0]);if(u<0)return 1;var A=m[u];if(!A)if(u>0&&l[u]===x[0])A=m[u-1];else return 1;for(var _=1;A;){var g=A.key,b=e(x,g[0],g[1]);if(g[0][0]<g[1][0])if(b<0)A=A.left;else if(b>0)_=-1,A=A.right;else return 0;else if(b>0)A=A.left;else if(b<0)_=1,A=A.right;else return 0}return _}}function y(m){return 1}function d(m){return function(x){return m(x[0],x[1])?0:1}}function p(m,l){return function(u){return m(u[0],u[1])?0:l(u)}}function c(m){for(var l=m.length,x=[],u=[],A=0;A<l;++A)for(var _=m[A],g=_.length,b=g-1,v=0;v<g;b=v++){var k=_[b],S=_[v];k[0]===S[0]?u.push([k,S]):x.push([k,S])}if(x.length===0)return u.length===0?y:d(s(u));var E=a(x),C=o(E.slabs,E.coordinates);return u.length===0?C:p(s(u),C)}},{"binary-search-bounds":31,"interval-tree-1d":234,"robust-orientation":284,"slab-decomposition":299}],270:[function(f,M,T){var e=new Float64Array(4),a=new Float64Array(4),n=new Float64Array(4);function r(t,h,s,o,y){e.length<o.length&&(e=new Float64Array(o.length),a=new Float64Array(o.length),n=new Float64Array(o.length));for(var d=0;d<o.length;++d)e[d]=t[d]-o[d],a[d]=h[d]-t[d],n[d]=s[d]-t[d];for(var p=0,c=0,m=0,l=0,x=0,u=0,d=0;d<o.length;++d){var A=a[d],_=n[d],g=e[d];p+=A*A,c+=A*_,m+=_*_,l+=g*A,x+=g*_,u+=g*g}var b=Math.abs(p*m-c*c),v=c*x-m*l,k=c*l-p*x,S;if(v+k<=b)if(v<0)k<0&&l<0?(k=0,-l>=p?(v=1,S=p+2*l+u):(v=-l/p,S=l*v+u)):(v=0,x>=0?(k=0,S=u):-x>=m?(k=1,S=m+2*x+u):(k=-x/m,S=x*k+u));else if(k<0)k=0,l>=0?(v=0,S=u):-l>=p?(v=1,S=p+2*l+u):(v=-l/p,S=l*v+u);else{var E=1/b;v*=E,k*=E,S=v*(p*v+c*k+2*l)+k*(c*v+m*k+2*x)+u}else{var C,F,I,D;v<0?(C=c+l,F=m+x,F>C?(I=F-C,D=p-2*c+m,I>=D?(v=1,k=0,S=p+2*l+u):(v=I/D,k=1-v,S=v*(p*v+c*k+2*l)+k*(c*v+m*k+2*x)+u)):(v=0,F<=0?(k=1,S=m+2*x+u):x>=0?(k=0,S=u):(k=-x/m,S=x*k+u))):k<0?(C=c+x,F=p+l,F>C?(I=F-C,D=p-2*c+m,I>=D?(k=1,v=0,S=m+2*x+u):(k=I/D,v=1-k,S=v*(p*v+c*k+2*l)+k*(c*v+m*k+2*x)+u)):(k=0,F<=0?(v=1,S=p+2*l+u):l>=0?(v=0,S=u):(v=-l/p,S=l*v+u))):(I=m+x-c-l,I<=0?(v=0,k=1,S=m+2*x+u):(D=p-2*c+m,I>=D?(v=1,k=0,S=p+2*l+u):(v=I/D,k=1-v,S=v*(p*v+c*k+2*l)+k*(c*v+m*k+2*x)+u)))}for(var R=1-v-k,d=0;d<o.length;++d)y[d]=R*t[d]+v*h[d]+k*s[d];return S<0?0:S}M.exports=r},{}],271:[function(f,M,T){M.exports=f("gl-quat/slerp")},{"gl-quat/slerp":124}],272:[function(f,M,T){var e=f("big-rat/add");M.exports=a;function a(n,r){for(var t=n.length,h=new Array(t),s=0;s<t;++s)h[s]=e(n[s],r[s]);return h}},{"big-rat/add":15}],273:[function(f,M,T){M.exports=a;var e=f("big-rat");function a(n){for(var r=new Array(n.length),t=0;t<n.length;++t)r[t]=e(n[t]);return r}},{"big-rat":18}],274:[function(f,M,T){var e=f("big-rat"),a=f("big-rat/mul");M.exports=n;function n(r,t){for(var h=e(t),s=r.length,o=new Array(s),y=0;y<s;++y)o[y]=a(r[y],h);return o}},{"big-rat":18,"big-rat/mul":27}],275:[function(f,M,T){var e=f("big-rat/sub");M.exports=a;function a(n,r){for(var t=n.length,h=new Array(t),s=0;s<t;++s)h[s]=e(n[s],r[s]);return h}},{"big-rat/sub":29}],276:[function(f,M,T){var e=f("compare-cell"),a=f("compare-oriented-cell"),n=f("cell-orientation");M.exports=r;function r(t){t.sort(a);for(var h=t.length,s=0,o=0;o<h;++o){var y=t[o],d=n(y);if(d!==0){if(s>0){var p=t[s-1];if(e(y,p)===0&&n(p)!==d){s-=1;continue}}t[s++]=y}}return t.length=s,t}},{"cell-orientation":47,"compare-cell":56,"compare-oriented-cell":57}],277:[function(f,M,T){var e="",a;M.exports=n;function n(r,t){if(typeof r!="string")throw new TypeError("expected a string");if(t===1)return r;if(t===2)return r+r;var h=r.length*t;if(a!==r||typeof a>"u")a=r,e="";else if(e.length>=h)return e.substr(0,h);for(;h>e.length&&t>1;)t&1&&(e+=r),t>>=1,r+=r;return e+=r,e=e.substr(0,h),e}},{}],278:[function(f,M,T){(function(e){(function(){M.exports=e.performance&&e.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}}).call(this)}).call(this,typeof w<"u"?w:typeof self<"u"?self:typeof window<"u"?window:{})},{}],279:[function(f,M,T){M.exports=e;function e(a){for(var n=a.length,r=a[a.length-1],t=n,h=n-2;h>=0;--h){var s=r,o=a[h];r=s+o;var y=r-s,d=o-y;d&&(a[--t]=r,r=d)}for(var p=0,h=t;h<n;++h){var s=a[h],o=r;r=s+o;var y=r-s,d=o-y;d&&(a[p++]=d)}return a[p++]=r,a.length=p,a}},{}],280:[function(f,M,T){var e=f("two-product"),a=f("robust-sum"),n=f("robust-scale"),r=f("robust-compress"),t=6;function h(l,x,u,A){return function(g){return A(l(u(g[0][0],g[1][1]),u(-g[0][1],g[1][0])))}}function s(l,x,u,A){return function(g){return A(l(x(l(u(g[1][1],g[2][2]),u(-g[1][2],g[2][1])),g[0][0]),l(x(l(u(g[1][0],g[2][2]),u(-g[1][2],g[2][0])),-g[0][1]),x(l(u(g[1][0],g[2][1]),u(-g[1][1],g[2][0])),g[0][2]))))}}function o(l,x,u,A){return function(g){return A(l(l(x(l(x(l(u(g[2][2],g[3][3]),u(-g[2][3],g[3][2])),g[1][1]),l(x(l(u(g[2][1],g[3][3]),u(-g[2][3],g[3][1])),-g[1][2]),x(l(u(g[2][1],g[3][2]),u(-g[2][2],g[3][1])),g[1][3]))),g[0][0]),x(l(x(l(u(g[2][2],g[3][3]),u(-g[2][3],g[3][2])),g[1][0]),l(x(l(u(g[2][0],g[3][3]),u(-g[2][3],g[3][0])),-g[1][2]),x(l(u(g[2][0],g[3][2]),u(-g[2][2],g[3][0])),g[1][3]))),-g[0][1])),l(x(l(x(l(u(g[2][1],g[3][3]),u(-g[2][3],g[3][1])),g[1][0]),l(x(l(u(g[2][0],g[3][3]),u(-g[2][3],g[3][0])),-g[1][1]),x(l(u(g[2][0],g[3][1]),u(-g[2][1],g[3][0])),g[1][3]))),g[0][2]),x(l(x(l(u(g[2][1],g[3][2]),u(-g[2][2],g[3][1])),g[1][0]),l(x(l(u(g[2][0],g[3][2]),u(-g[2][2],g[3][0])),-g[1][1]),x(l(u(g[2][0],g[3][1]),u(-g[2][1],g[3][0])),g[1][2]))),-g[0][3]))))}}function y(l,x,u,A){return function(g){return A(l(l(x(l(l(x(l(x(l(u(g[3][3],g[4][4]),u(-g[3][4],g[4][3])),g[2][2]),l(x(l(u(g[3][2],g[4][4]),u(-g[3][4],g[4][2])),-g[2][3]),x(l(u(g[3][2],g[4][3]),u(-g[3][3],g[4][2])),g[2][4]))),g[1][1]),x(l(x(l(u(g[3][3],g[4][4]),u(-g[3][4],g[4][3])),g[2][1]),l(x(l(u(g[3][1],g[4][4]),u(-g[3][4],g[4][1])),-g[2][3]),x(l(u(g[3][1],g[4][3]),u(-g[3][3],g[4][1])),g[2][4]))),-g[1][2])),l(x(l(x(l(u(g[3][2],g[4][4]),u(-g[3][4],g[4][2])),g[2][1]),l(x(l(u(g[3][1],g[4][4]),u(-g[3][4],g[4][1])),-g[2][2]),x(l(u(g[3][1],g[4][2]),u(-g[3][2],g[4][1])),g[2][4]))),g[1][3]),x(l(x(l(u(g[3][2],g[4][3]),u(-g[3][3],g[4][2])),g[2][1]),l(x(l(u(g[3][1],g[4][3]),u(-g[3][3],g[4][1])),-g[2][2]),x(l(u(g[3][1],g[4][2]),u(-g[3][2],g[4][1])),g[2][3]))),-g[1][4]))),g[0][0]),x(l(l(x(l(x(l(u(g[3][3],g[4][4]),u(-g[3][4],g[4][3])),g[2][2]),l(x(l(u(g[3][2],g[4][4]),u(-g[3][4],g[4][2])),-g[2][3]),x(l(u(g[3][2],g[4][3]),u(-g[3][3],g[4][2])),g[2][4]))),g[1][0]),x(l(x(l(u(g[3][3],g[4][4]),u(-g[3][4],g[4][3])),g[2][0]),l(x(l(u(g[3][0],g[4][4]),u(-g[3][4],g[4][0])),-g[2][3]),x(l(u(g[3][0],g[4][3]),u(-g[3][3],g[4][0])),g[2][4]))),-g[1][2])),l(x(l(x(l(u(g[3][2],g[4][4]),u(-g[3][4],g[4][2])),g[2][0]),l(x(l(u(g[3][0],g[4][4]),u(-g[3][4],g[4][0])),-g[2][2]),x(l(u(g[3][0],g[4][2]),u(-g[3][2],g[4][0])),g[2][4]))),g[1][3]),x(l(x(l(u(g[3][2],g[4][3]),u(-g[3][3],g[4][2])),g[2][0]),l(x(l(u(g[3][0],g[4][3]),u(-g[3][3],g[4][0])),-g[2][2]),x(l(u(g[3][0],g[4][2]),u(-g[3][2],g[4][0])),g[2][3]))),-g[1][4]))),-g[0][1])),l(x(l(l(x(l(x(l(u(g[3][3],g[4][4]),u(-g[3][4],g[4][3])),g[2][1]),l(x(l(u(g[3][1],g[4][4]),u(-g[3][4],g[4][1])),-g[2][3]),x(l(u(g[3][1],g[4][3]),u(-g[3][3],g[4][1])),g[2][4]))),g[1][0]),x(l(x(l(u(g[3][3],g[4][4]),u(-g[3][4],g[4][3])),g[2][0]),l(x(l(u(g[3][0],g[4][4]),u(-g[3][4],g[4][0])),-g[2][3]),x(l(u(g[3][0],g[4][3]),u(-g[3][3],g[4][0])),g[2][4]))),-g[1][1])),l(x(l(x(l(u(g[3][1],g[4][4]),u(-g[3][4],g[4][1])),g[2][0]),l(x(l(u(g[3][0],g[4][4]),u(-g[3][4],g[4][0])),-g[2][1]),x(l(u(g[3][0],g[4][1]),u(-g[3][1],g[4][0])),g[2][4]))),g[1][3]),x(l(x(l(u(g[3][1],g[4][3]),u(-g[3][3],g[4][1])),g[2][0]),l(x(l(u(g[3][0],g[4][3]),u(-g[3][3],g[4][0])),-g[2][1]),x(l(u(g[3][0],g[4][1]),u(-g[3][1],g[4][0])),g[2][3]))),-g[1][4]))),g[0][2]),l(x(l(l(x(l(x(l(u(g[3][2],g[4][4]),u(-g[3][4],g[4][2])),g[2][1]),l(x(l(u(g[3][1],g[4][4]),u(-g[3][4],g[4][1])),-g[2][2]),x(l(u(g[3][1],g[4][2]),u(-g[3][2],g[4][1])),g[2][4]))),g[1][0]),x(l(x(l(u(g[3][2],g[4][4]),u(-g[3][4],g[4][2])),g[2][0]),l(x(l(u(g[3][0],g[4][4]),u(-g[3][4],g[4][0])),-g[2][2]),x(l(u(g[3][0],g[4][2]),u(-g[3][2],g[4][0])),g[2][4]))),-g[1][1])),l(x(l(x(l(u(g[3][1],g[4][4]),u(-g[3][4],g[4][1])),g[2][0]),l(x(l(u(g[3][0],g[4][4]),u(-g[3][4],g[4][0])),-g[2][1]),x(l(u(g[3][0],g[4][1]),u(-g[3][1],g[4][0])),g[2][4]))),g[1][2]),x(l(x(l(u(g[3][1],g[4][2]),u(-g[3][2],g[4][1])),g[2][0]),l(x(l(u(g[3][0],g[4][2]),u(-g[3][2],g[4][0])),-g[2][1]),x(l(u(g[3][0],g[4][1]),u(-g[3][1],g[4][0])),g[2][2]))),-g[1][4]))),-g[0][3]),x(l(l(x(l(x(l(u(g[3][2],g[4][3]),u(-g[3][3],g[4][2])),g[2][1]),l(x(l(u(g[3][1],g[4][3]),u(-g[3][3],g[4][1])),-g[2][2]),x(l(u(g[3][1],g[4][2]),u(-g[3][2],g[4][1])),g[2][3]))),g[1][0]),x(l(x(l(u(g[3][2],g[4][3]),u(-g[3][3],g[4][2])),g[2][0]),l(x(l(u(g[3][0],g[4][3]),u(-g[3][3],g[4][0])),-g[2][2]),x(l(u(g[3][0],g[4][2]),u(-g[3][2],g[4][0])),g[2][3]))),-g[1][1])),l(x(l(x(l(u(g[3][1],g[4][3]),u(-g[3][3],g[4][1])),g[2][0]),l(x(l(u(g[3][0],g[4][3]),u(-g[3][3],g[4][0])),-g[2][1]),x(l(u(g[3][0],g[4][1]),u(-g[3][1],g[4][0])),g[2][3]))),g[1][2]),x(l(x(l(u(g[3][1],g[4][2]),u(-g[3][2],g[4][1])),g[2][0]),l(x(l(u(g[3][0],g[4][2]),u(-g[3][2],g[4][0])),-g[2][1]),x(l(u(g[3][0],g[4][1]),u(-g[3][1],g[4][0])),g[2][2]))),-g[1][3]))),g[0][4])))))}}function d(l){var x=l===2?h:l===3?s:l===4?o:l===5?y:void 0;return x(a,n,e,r)}var p=[function(){return[0]},function(x){return[x[0][0]]}];function c(l,x,u,A,_,g,b,v){return function(S){switch(S.length){case 0:return l(S);case 1:return x(S);case 2:return u(S);case 3:return A(S);case 4:return _(S);case 5:return g(S)}var E=b[S.length];return E||(E=b[S.length]=v(S.length)),E(S)}}function m(){for(;p.length<t;)p.push(d(p.length));M.exports=c.apply(void 0,p.concat([p,d]));for(var l=0;l<p.length;++l)M.exports[l]=p[l]}m()},{"robust-compress":279,"robust-scale":286,"robust-sum":289,"two-product":306}],281:[function(f,M,T){var e=f("two-product"),a=f("robust-sum");M.exports=n;function n(r,t){for(var h=e(r[0],t[0]),s=1;s<r.length;++s)h=a(h,e(r[s],t[s]));return h}},{"robust-sum":289,"two-product":306}],282:[function(f,M,T){var e=f("two-product"),a=f("robust-sum"),n=f("robust-subtract"),r=f("robust-scale"),t=6;function h(_){var g=_===3?d:_===4?p:_===5?c:m;return g(a,n,e,r)}function s(){return 0}function o(){return 0}function y(){return 0}function d(_,g,b,v){function k(S,E,C){var F=b(S[0],S[0]),I=v(F,E[0]),D=v(F,C[0]),R=b(E[0],E[0]),O=v(R,S[0]),z=v(R,C[0]),B=b(C[0],C[0]),G=v(B,S[0]),Q=v(B,E[0]),X=_(g(Q,z),g(O,I)),j=g(G,D),re=g(X,j);return re[re.length-1]}return k}function p(_,g,b,v){function k(S,E,C,F){var I=_(b(S[0],S[0]),b(S[1],S[1])),D=v(I,E[0]),R=v(I,C[0]),O=v(I,F[0]),z=_(b(E[0],E[0]),b(E[1],E[1])),B=v(z,S[0]),G=v(z,C[0]),Q=v(z,F[0]),X=_(b(C[0],C[0]),b(C[1],C[1])),j=v(X,S[0]),re=v(X,E[0]),ue=v(X,F[0]),K=_(b(F[0],F[0]),b(F[1],F[1])),te=v(K,S[0]),Y=v(K,E[0]),H=v(K,C[0]),ee=_(_(v(g(H,ue),E[1]),_(v(g(Y,Q),-C[1]),v(g(re,G),F[1]))),_(v(g(Y,Q),S[1]),_(v(g(te,O),-E[1]),v(g(B,D),F[1])))),ne=_(_(v(g(H,ue),S[1]),_(v(g(te,O),-C[1]),v(g(j,R),F[1]))),_(v(g(re,G),S[1]),_(v(g(j,R),-E[1]),v(g(B,D),C[1])))),Z=g(ee,ne);return Z[Z.length-1]}return k}function c(_,g,b,v){function k(S,E,C,F,I){var D=_(b(S[0],S[0]),_(b(S[1],S[1]),b(S[2],S[2]))),R=v(D,E[0]),O=v(D,C[0]),z=v(D,F[0]),B=v(D,I[0]),G=_(b(E[0],E[0]),_(b(E[1],E[1]),b(E[2],E[2]))),Q=v(G,S[0]),X=v(G,C[0]),j=v(G,F[0]),re=v(G,I[0]),ue=_(b(C[0],C[0]),_(b(C[1],C[1]),b(C[2],C[2]))),K=v(ue,S[0]),te=v(ue,E[0]),Y=v(ue,F[0]),H=v(ue,I[0]),ee=_(b(F[0],F[0]),_(b(F[1],F[1]),b(F[2],F[2]))),ne=v(ee,S[0]),Z=v(ee,E[0]),q=v(ee,C[0]),ie=v(ee,I[0]),se=_(b(I[0],I[0]),_(b(I[1],I[1]),b(I[2],I[2]))),ae=v(se,S[0]),oe=v(se,E[0]),be=v(se,C[0]),ce=v(se,F[0]),de=_(_(_(v(_(v(g(ce,ie),C[1]),_(v(g(be,H),-F[1]),v(g(q,Y),I[1]))),E[2]),_(v(_(v(g(ce,ie),E[1]),_(v(g(oe,re),-F[1]),v(g(Z,j),I[1]))),-C[2]),v(_(v(g(be,H),E[1]),_(v(g(oe,re),-C[1]),v(g(te,X),I[1]))),F[2]))),_(v(_(v(g(q,Y),E[1]),_(v(g(Z,j),-C[1]),v(g(te,X),F[1]))),-I[2]),_(v(_(v(g(ce,ie),E[1]),_(v(g(oe,re),-F[1]),v(g(Z,j),I[1]))),S[2]),v(_(v(g(ce,ie),S[1]),_(v(g(ae,B),-F[1]),v(g(ne,z),I[1]))),-E[2])))),_(_(v(_(v(g(oe,re),S[1]),_(v(g(ae,B),-E[1]),v(g(Q,R),I[1]))),F[2]),_(v(_(v(g(Z,j),S[1]),_(v(g(ne,z),-E[1]),v(g(Q,R),F[1]))),-I[2]),v(_(v(g(q,Y),E[1]),_(v(g(Z,j),-C[1]),v(g(te,X),F[1]))),S[2]))),_(v(_(v(g(q,Y),S[1]),_(v(g(ne,z),-C[1]),v(g(K,O),F[1]))),-E[2]),_(v(_(v(g(Z,j),S[1]),_(v(g(ne,z),-E[1]),v(g(Q,R),F[1]))),C[2]),v(_(v(g(te,X),S[1]),_(v(g(K,O),-E[1]),v(g(Q,R),C[1]))),-F[2]))))),ye=_(_(_(v(_(v(g(ce,ie),C[1]),_(v(g(be,H),-F[1]),v(g(q,Y),I[1]))),S[2]),v(_(v(g(ce,ie),S[1]),_(v(g(ae,B),-F[1]),v(g(ne,z),I[1]))),-C[2])),_(v(_(v(g(be,H),S[1]),_(v(g(ae,B),-C[1]),v(g(K,O),I[1]))),F[2]),v(_(v(g(q,Y),S[1]),_(v(g(ne,z),-C[1]),v(g(K,O),F[1]))),-I[2]))),_(_(v(_(v(g(be,H),E[1]),_(v(g(oe,re),-C[1]),v(g(te,X),I[1]))),S[2]),v(_(v(g(be,H),S[1]),_(v(g(ae,B),-C[1]),v(g(K,O),I[1]))),-E[2])),_(v(_(v(g(oe,re),S[1]),_(v(g(ae,B),-E[1]),v(g(Q,R),I[1]))),C[2]),v(_(v(g(te,X),S[1]),_(v(g(K,O),-E[1]),v(g(Q,R),C[1]))),-I[2])))),ge=g(de,ye);return ge[ge.length-1]}return k}function m(_,g,b,v){function k(S,E,C,F,I,D){var R=_(_(b(S[0],S[0]),b(S[1],S[1])),_(b(S[2],S[2]),b(S[3],S[3]))),O=v(R,E[0]),z=v(R,C[0]),B=v(R,F[0]),G=v(R,I[0]),Q=v(R,D[0]),X=_(_(b(E[0],E[0]),b(E[1],E[1])),_(b(E[2],E[2]),b(E[3],E[3]))),j=v(X,S[0]),re=v(X,C[0]),ue=v(X,F[0]),K=v(X,I[0]),te=v(X,D[0]),Y=_(_(b(C[0],C[0]),b(C[1],C[1])),_(b(C[2],C[2]),b(C[3],C[3]))),H=v(Y,S[0]),ee=v(Y,E[0]),ne=v(Y,F[0]),Z=v(Y,I[0]),q=v(Y,D[0]),ie=_(_(b(F[0],F[0]),b(F[1],F[1])),_(b(F[2],F[2]),b(F[3],F[3]))),se=v(ie,S[0]),ae=v(ie,E[0]),oe=v(ie,C[0]),be=v(ie,I[0]),ce=v(ie,D[0]),de=_(_(b(I[0],I[0]),b(I[1],I[1])),_(b(I[2],I[2]),b(I[3],I[3]))),ye=v(de,S[0]),ge=v(de,E[0]),me=v(de,C[0]),Se=v(de,F[0]),Le=v(de,D[0]),Oe=_(_(b(D[0],D[0]),b(D[1],D[1])),_(b(D[2],D[2]),b(D[3],D[3]))),we=v(Oe,S[0]),Ce=v(Oe,E[0]),Ke=v(Oe,C[0]),Ye=v(Oe,F[0]),Fe=v(Oe,I[0]),Re=_(_(_(v(_(_(v(_(v(g(Fe,Le),F[1]),_(v(g(Ye,ce),-I[1]),v(g(Se,be),D[1]))),C[2]),v(_(v(g(Fe,Le),C[1]),_(v(g(Ke,q),-I[1]),v(g(me,Z),D[1]))),-F[2])),_(v(_(v(g(Ye,ce),C[1]),_(v(g(Ke,q),-F[1]),v(g(oe,ne),D[1]))),I[2]),v(_(v(g(Se,be),C[1]),_(v(g(me,Z),-F[1]),v(g(oe,ne),I[1]))),-D[2]))),E[3]),_(v(_(_(v(_(v(g(Fe,Le),F[1]),_(v(g(Ye,ce),-I[1]),v(g(Se,be),D[1]))),E[2]),v(_(v(g(Fe,Le),E[1]),_(v(g(Ce,te),-I[1]),v(g(ge,K),D[1]))),-F[2])),_(v(_(v(g(Ye,ce),E[1]),_(v(g(Ce,te),-F[1]),v(g(ae,ue),D[1]))),I[2]),v(_(v(g(Se,be),E[1]),_(v(g(ge,K),-F[1]),v(g(ae,ue),I[1]))),-D[2]))),-C[3]),v(_(_(v(_(v(g(Fe,Le),C[1]),_(v(g(Ke,q),-I[1]),v(g(me,Z),D[1]))),E[2]),v(_(v(g(Fe,Le),E[1]),_(v(g(Ce,te),-I[1]),v(g(ge,K),D[1]))),-C[2])),_(v(_(v(g(Ke,q),E[1]),_(v(g(Ce,te),-C[1]),v(g(ee,re),D[1]))),I[2]),v(_(v(g(me,Z),E[1]),_(v(g(ge,K),-C[1]),v(g(ee,re),I[1]))),-D[2]))),F[3]))),_(_(v(_(_(v(_(v(g(Ye,ce),C[1]),_(v(g(Ke,q),-F[1]),v(g(oe,ne),D[1]))),E[2]),v(_(v(g(Ye,ce),E[1]),_(v(g(Ce,te),-F[1]),v(g(ae,ue),D[1]))),-C[2])),_(v(_(v(g(Ke,q),E[1]),_(v(g(Ce,te),-C[1]),v(g(ee,re),D[1]))),F[2]),v(_(v(g(oe,ne),E[1]),_(v(g(ae,ue),-C[1]),v(g(ee,re),F[1]))),-D[2]))),-I[3]),v(_(_(v(_(v(g(Se,be),C[1]),_(v(g(me,Z),-F[1]),v(g(oe,ne),I[1]))),E[2]),v(_(v(g(Se,be),E[1]),_(v(g(ge,K),-F[1]),v(g(ae,ue),I[1]))),-C[2])),_(v(_(v(g(me,Z),E[1]),_(v(g(ge,K),-C[1]),v(g(ee,re),I[1]))),F[2]),v(_(v(g(oe,ne),E[1]),_(v(g(ae,ue),-C[1]),v(g(ee,re),F[1]))),-I[2]))),D[3])),_(v(_(_(v(_(v(g(Fe,Le),F[1]),_(v(g(Ye,ce),-I[1]),v(g(Se,be),D[1]))),E[2]),v(_(v(g(Fe,Le),E[1]),_(v(g(Ce,te),-I[1]),v(g(ge,K),D[1]))),-F[2])),_(v(_(v(g(Ye,ce),E[1]),_(v(g(Ce,te),-F[1]),v(g(ae,ue),D[1]))),I[2]),v(_(v(g(Se,be),E[1]),_(v(g(ge,K),-F[1]),v(g(ae,ue),I[1]))),-D[2]))),S[3]),v(_(_(v(_(v(g(Fe,Le),F[1]),_(v(g(Ye,ce),-I[1]),v(g(Se,be),D[1]))),S[2]),v(_(v(g(Fe,Le),S[1]),_(v(g(we,Q),-I[1]),v(g(ye,G),D[1]))),-F[2])),_(v(_(v(g(Ye,ce),S[1]),_(v(g(we,Q),-F[1]),v(g(se,B),D[1]))),I[2]),v(_(v(g(Se,be),S[1]),_(v(g(ye,G),-F[1]),v(g(se,B),I[1]))),-D[2]))),-E[3])))),_(_(_(v(_(_(v(_(v(g(Fe,Le),E[1]),_(v(g(Ce,te),-I[1]),v(g(ge,K),D[1]))),S[2]),v(_(v(g(Fe,Le),S[1]),_(v(g(we,Q),-I[1]),v(g(ye,G),D[1]))),-E[2])),_(v(_(v(g(Ce,te),S[1]),_(v(g(we,Q),-E[1]),v(g(j,O),D[1]))),I[2]),v(_(v(g(ge,K),S[1]),_(v(g(ye,G),-E[1]),v(g(j,O),I[1]))),-D[2]))),F[3]),v(_(_(v(_(v(g(Ye,ce),E[1]),_(v(g(Ce,te),-F[1]),v(g(ae,ue),D[1]))),S[2]),v(_(v(g(Ye,ce),S[1]),_(v(g(we,Q),-F[1]),v(g(se,B),D[1]))),-E[2])),_(v(_(v(g(Ce,te),S[1]),_(v(g(we,Q),-E[1]),v(g(j,O),D[1]))),F[2]),v(_(v(g(ae,ue),S[1]),_(v(g(se,B),-E[1]),v(g(j,O),F[1]))),-D[2]))),-I[3])),_(v(_(_(v(_(v(g(Se,be),E[1]),_(v(g(ge,K),-F[1]),v(g(ae,ue),I[1]))),S[2]),v(_(v(g(Se,be),S[1]),_(v(g(ye,G),-F[1]),v(g(se,B),I[1]))),-E[2])),_(v(_(v(g(ge,K),S[1]),_(v(g(ye,G),-E[1]),v(g(j,O),I[1]))),F[2]),v(_(v(g(ae,ue),S[1]),_(v(g(se,B),-E[1]),v(g(j,O),F[1]))),-I[2]))),D[3]),v(_(_(v(_(v(g(Ye,ce),C[1]),_(v(g(Ke,q),-F[1]),v(g(oe,ne),D[1]))),E[2]),v(_(v(g(Ye,ce),E[1]),_(v(g(Ce,te),-F[1]),v(g(ae,ue),D[1]))),-C[2])),_(v(_(v(g(Ke,q),E[1]),_(v(g(Ce,te),-C[1]),v(g(ee,re),D[1]))),F[2]),v(_(v(g(oe,ne),E[1]),_(v(g(ae,ue),-C[1]),v(g(ee,re),F[1]))),-D[2]))),S[3]))),_(_(v(_(_(v(_(v(g(Ye,ce),C[1]),_(v(g(Ke,q),-F[1]),v(g(oe,ne),D[1]))),S[2]),v(_(v(g(Ye,ce),S[1]),_(v(g(we,Q),-F[1]),v(g(se,B),D[1]))),-C[2])),_(v(_(v(g(Ke,q),S[1]),_(v(g(we,Q),-C[1]),v(g(H,z),D[1]))),F[2]),v(_(v(g(oe,ne),S[1]),_(v(g(se,B),-C[1]),v(g(H,z),F[1]))),-D[2]))),-E[3]),v(_(_(v(_(v(g(Ye,ce),E[1]),_(v(g(Ce,te),-F[1]),v(g(ae,ue),D[1]))),S[2]),v(_(v(g(Ye,ce),S[1]),_(v(g(we,Q),-F[1]),v(g(se,B),D[1]))),-E[2])),_(v(_(v(g(Ce,te),S[1]),_(v(g(we,Q),-E[1]),v(g(j,O),D[1]))),F[2]),v(_(v(g(ae,ue),S[1]),_(v(g(se,B),-E[1]),v(g(j,O),F[1]))),-D[2]))),C[3])),_(v(_(_(v(_(v(g(Ke,q),E[1]),_(v(g(Ce,te),-C[1]),v(g(ee,re),D[1]))),S[2]),v(_(v(g(Ke,q),S[1]),_(v(g(we,Q),-C[1]),v(g(H,z),D[1]))),-E[2])),_(v(_(v(g(Ce,te),S[1]),_(v(g(we,Q),-E[1]),v(g(j,O),D[1]))),C[2]),v(_(v(g(ee,re),S[1]),_(v(g(H,z),-E[1]),v(g(j,O),C[1]))),-D[2]))),-F[3]),v(_(_(v(_(v(g(oe,ne),E[1]),_(v(g(ae,ue),-C[1]),v(g(ee,re),F[1]))),S[2]),v(_(v(g(oe,ne),S[1]),_(v(g(se,B),-C[1]),v(g(H,z),F[1]))),-E[2])),_(v(_(v(g(ae,ue),S[1]),_(v(g(se,B),-E[1]),v(g(j,O),F[1]))),C[2]),v(_(v(g(ee,re),S[1]),_(v(g(H,z),-E[1]),v(g(j,O),C[1]))),-F[2]))),D[3]))))),je=_(_(_(v(_(_(v(_(v(g(Fe,Le),F[1]),_(v(g(Ye,ce),-I[1]),v(g(Se,be),D[1]))),C[2]),v(_(v(g(Fe,Le),C[1]),_(v(g(Ke,q),-I[1]),v(g(me,Z),D[1]))),-F[2])),_(v(_(v(g(Ye,ce),C[1]),_(v(g(Ke,q),-F[1]),v(g(oe,ne),D[1]))),I[2]),v(_(v(g(Se,be),C[1]),_(v(g(me,Z),-F[1]),v(g(oe,ne),I[1]))),-D[2]))),S[3]),_(v(_(_(v(_(v(g(Fe,Le),F[1]),_(v(g(Ye,ce),-I[1]),v(g(Se,be),D[1]))),S[2]),v(_(v(g(Fe,Le),S[1]),_(v(g(we,Q),-I[1]),v(g(ye,G),D[1]))),-F[2])),_(v(_(v(g(Ye,ce),S[1]),_(v(g(we,Q),-F[1]),v(g(se,B),D[1]))),I[2]),v(_(v(g(Se,be),S[1]),_(v(g(ye,G),-F[1]),v(g(se,B),I[1]))),-D[2]))),-C[3]),v(_(_(v(_(v(g(Fe,Le),C[1]),_(v(g(Ke,q),-I[1]),v(g(me,Z),D[1]))),S[2]),v(_(v(g(Fe,Le),S[1]),_(v(g(we,Q),-I[1]),v(g(ye,G),D[1]))),-C[2])),_(v(_(v(g(Ke,q),S[1]),_(v(g(we,Q),-C[1]),v(g(H,z),D[1]))),I[2]),v(_(v(g(me,Z),S[1]),_(v(g(ye,G),-C[1]),v(g(H,z),I[1]))),-D[2]))),F[3]))),_(_(v(_(_(v(_(v(g(Ye,ce),C[1]),_(v(g(Ke,q),-F[1]),v(g(oe,ne),D[1]))),S[2]),v(_(v(g(Ye,ce),S[1]),_(v(g(we,Q),-F[1]),v(g(se,B),D[1]))),-C[2])),_(v(_(v(g(Ke,q),S[1]),_(v(g(we,Q),-C[1]),v(g(H,z),D[1]))),F[2]),v(_(v(g(oe,ne),S[1]),_(v(g(se,B),-C[1]),v(g(H,z),F[1]))),-D[2]))),-I[3]),v(_(_(v(_(v(g(Se,be),C[1]),_(v(g(me,Z),-F[1]),v(g(oe,ne),I[1]))),S[2]),v(_(v(g(Se,be),S[1]),_(v(g(ye,G),-F[1]),v(g(se,B),I[1]))),-C[2])),_(v(_(v(g(me,Z),S[1]),_(v(g(ye,G),-C[1]),v(g(H,z),I[1]))),F[2]),v(_(v(g(oe,ne),S[1]),_(v(g(se,B),-C[1]),v(g(H,z),F[1]))),-I[2]))),D[3])),_(v(_(_(v(_(v(g(Fe,Le),C[1]),_(v(g(Ke,q),-I[1]),v(g(me,Z),D[1]))),E[2]),v(_(v(g(Fe,Le),E[1]),_(v(g(Ce,te),-I[1]),v(g(ge,K),D[1]))),-C[2])),_(v(_(v(g(Ke,q),E[1]),_(v(g(Ce,te),-C[1]),v(g(ee,re),D[1]))),I[2]),v(_(v(g(me,Z),E[1]),_(v(g(ge,K),-C[1]),v(g(ee,re),I[1]))),-D[2]))),S[3]),v(_(_(v(_(v(g(Fe,Le),C[1]),_(v(g(Ke,q),-I[1]),v(g(me,Z),D[1]))),S[2]),v(_(v(g(Fe,Le),S[1]),_(v(g(we,Q),-I[1]),v(g(ye,G),D[1]))),-C[2])),_(v(_(v(g(Ke,q),S[1]),_(v(g(we,Q),-C[1]),v(g(H,z),D[1]))),I[2]),v(_(v(g(me,Z),S[1]),_(v(g(ye,G),-C[1]),v(g(H,z),I[1]))),-D[2]))),-E[3])))),_(_(_(v(_(_(v(_(v(g(Fe,Le),E[1]),_(v(g(Ce,te),-I[1]),v(g(ge,K),D[1]))),S[2]),v(_(v(g(Fe,Le),S[1]),_(v(g(we,Q),-I[1]),v(g(ye,G),D[1]))),-E[2])),_(v(_(v(g(Ce,te),S[1]),_(v(g(we,Q),-E[1]),v(g(j,O),D[1]))),I[2]),v(_(v(g(ge,K),S[1]),_(v(g(ye,G),-E[1]),v(g(j,O),I[1]))),-D[2]))),C[3]),v(_(_(v(_(v(g(Ke,q),E[1]),_(v(g(Ce,te),-C[1]),v(g(ee,re),D[1]))),S[2]),v(_(v(g(Ke,q),S[1]),_(v(g(we,Q),-C[1]),v(g(H,z),D[1]))),-E[2])),_(v(_(v(g(Ce,te),S[1]),_(v(g(we,Q),-E[1]),v(g(j,O),D[1]))),C[2]),v(_(v(g(ee,re),S[1]),_(v(g(H,z),-E[1]),v(g(j,O),C[1]))),-D[2]))),-I[3])),_(v(_(_(v(_(v(g(me,Z),E[1]),_(v(g(ge,K),-C[1]),v(g(ee,re),I[1]))),S[2]),v(_(v(g(me,Z),S[1]),_(v(g(ye,G),-C[1]),v(g(H,z),I[1]))),-E[2])),_(v(_(v(g(ge,K),S[1]),_(v(g(ye,G),-E[1]),v(g(j,O),I[1]))),C[2]),v(_(v(g(ee,re),S[1]),_(v(g(H,z),-E[1]),v(g(j,O),C[1]))),-I[2]))),D[3]),v(_(_(v(_(v(g(Se,be),C[1]),_(v(g(me,Z),-F[1]),v(g(oe,ne),I[1]))),E[2]),v(_(v(g(Se,be),E[1]),_(v(g(ge,K),-F[1]),v(g(ae,ue),I[1]))),-C[2])),_(v(_(v(g(me,Z),E[1]),_(v(g(ge,K),-C[1]),v(g(ee,re),I[1]))),F[2]),v(_(v(g(oe,ne),E[1]),_(v(g(ae,ue),-C[1]),v(g(ee,re),F[1]))),-I[2]))),S[3]))),_(_(v(_(_(v(_(v(g(Se,be),C[1]),_(v(g(me,Z),-F[1]),v(g(oe,ne),I[1]))),S[2]),v(_(v(g(Se,be),S[1]),_(v(g(ye,G),-F[1]),v(g(se,B),I[1]))),-C[2])),_(v(_(v(g(me,Z),S[1]),_(v(g(ye,G),-C[1]),v(g(H,z),I[1]))),F[2]),v(_(v(g(oe,ne),S[1]),_(v(g(se,B),-C[1]),v(g(H,z),F[1]))),-I[2]))),-E[3]),v(_(_(v(_(v(g(Se,be),E[1]),_(v(g(ge,K),-F[1]),v(g(ae,ue),I[1]))),S[2]),v(_(v(g(Se,be),S[1]),_(v(g(ye,G),-F[1]),v(g(se,B),I[1]))),-E[2])),_(v(_(v(g(ge,K),S[1]),_(v(g(ye,G),-E[1]),v(g(j,O),I[1]))),F[2]),v(_(v(g(ae,ue),S[1]),_(v(g(se,B),-E[1]),v(g(j,O),F[1]))),-I[2]))),C[3])),_(v(_(_(v(_(v(g(me,Z),E[1]),_(v(g(ge,K),-C[1]),v(g(ee,re),I[1]))),S[2]),v(_(v(g(me,Z),S[1]),_(v(g(ye,G),-C[1]),v(g(H,z),I[1]))),-E[2])),_(v(_(v(g(ge,K),S[1]),_(v(g(ye,G),-E[1]),v(g(j,O),I[1]))),C[2]),v(_(v(g(ee,re),S[1]),_(v(g(H,z),-E[1]),v(g(j,O),C[1]))),-I[2]))),-F[3]),v(_(_(v(_(v(g(oe,ne),E[1]),_(v(g(ae,ue),-C[1]),v(g(ee,re),F[1]))),S[2]),v(_(v(g(oe,ne),S[1]),_(v(g(se,B),-C[1]),v(g(H,z),F[1]))),-E[2])),_(v(_(v(g(ae,ue),S[1]),_(v(g(se,B),-E[1]),v(g(j,O),F[1]))),C[2]),v(_(v(g(ee,re),S[1]),_(v(g(H,z),-E[1]),v(g(j,O),C[1]))),-F[2]))),I[3]))))),xt=g(Re,je);return xt[xt.length-1]}return k}var l=[s,o,y];function x(_){var g=l[_.length];return g||(g=l[_.length]=h(_.length)),g.apply(void 0,_)}function u(_,g,b,v,k,S,E,C){function F(I,D,R,O,z,B){switch(arguments.length){case 0:case 1:return 0;case 2:return v(I,D);case 3:return k(I,D,R);case 4:return S(I,D,R,O);case 5:return E(I,D,R,O,z);case 6:return C(I,D,R,O,z,B)}for(var G=new Array(arguments.length),Q=0;Q<arguments.length;++Q)G[Q]=arguments[Q];return _(G)}return F}function A(){for(;l.length<=t;)l.push(h(l.length));M.exports=u.apply(void 0,[x].concat(l));for(var _=0;_<=t;++_)M.exports[_]=l[_]}A()},{"robust-scale":286,"robust-subtract":288,"robust-sum":289,"two-product":306}],283:[function(f,M,T){var e=f("robust-determinant"),a=6;function n(l){var x=l===2?h:l===3?s:l===4?o:l===5?y:d;return l<6?x(e[l]):x(e)}function r(){return[[0]]}function t(l,x){return[[x[0]],[l[0][0]]]}function h(l){return function(u,A){return[l([[+A[0],+u[0][1]],[+A[1],+u[1][1]]]),l([[+u[0][0],+A[0]],[+u[1][0],+A[1]]]),l(u)]}}function s(l){return function(u,A){return[l([[+A[0],+u[0][1],+u[0][2]],[+A[1],+u[1][1],+u[1][2]],[+A[2],+u[2][1],+u[2][2]]]),l([[+u[0][0],+A[0],+u[0][2]],[+u[1][0],+A[1],+u[1][2]],[+u[2][0],+A[2],+u[2][2]]]),l([[+u[0][0],+u[0][1],+A[0]],[+u[1][0],+u[1][1],+A[1]],[+u[2][0],+u[2][1],+A[2]]]),l(u)]}}function o(l){return function(u,A){return[l([[+A[0],+u[0][1],+u[0][2],+u[0][3]],[+A[1],+u[1][1],+u[1][2],+u[1][3]],[+A[2],+u[2][1],+u[2][2],+u[2][3]],[+A[3],+u[3][1],+u[3][2],+u[3][3]]]),l([[+u[0][0],+A[0],+u[0][2],+u[0][3]],[+u[1][0],+A[1],+u[1][2],+u[1][3]],[+u[2][0],+A[2],+u[2][2],+u[2][3]],[+u[3][0],+A[3],+u[3][2],+u[3][3]]]),l([[+u[0][0],+u[0][1],+A[0],+u[0][3]],[+u[1][0],+u[1][1],+A[1],+u[1][3]],[+u[2][0],+u[2][1],+A[2],+u[2][3]],[+u[3][0],+u[3][1],+A[3],+u[3][3]]]),l([[+u[0][0],+u[0][1],+u[0][2],+A[0]],[+u[1][0],+u[1][1],+u[1][2],+A[1]],[+u[2][0],+u[2][1],+u[2][2],+A[2]],[+u[3][0],+u[3][1],+u[3][2],+A[3]]]),l(u)]}}function y(l){return function(u,A){return[l([[+A[0],+u[0][1],+u[0][2],+u[0][3],+u[0][4]],[+A[1],+u[1][1],+u[1][2],+u[1][3],+u[1][4]],[+A[2],+u[2][1],+u[2][2],+u[2][3],+u[2][4]],[+A[3],+u[3][1],+u[3][2],+u[3][3],+u[3][4]],[+A[4],+u[4][1],+u[4][2],+u[4][3],+u[4][4]]]),l([[+u[0][0],+A[0],+u[0][2],+u[0][3],+u[0][4]],[+u[1][0],+A[1],+u[1][2],+u[1][3],+u[1][4]],[+u[2][0],+A[2],+u[2][2],+u[2][3],+u[2][4]],[+u[3][0],+A[3],+u[3][2],+u[3][3],+u[3][4]],[+u[4][0],+A[4],+u[4][2],+u[4][3],+u[4][4]]]),l([[+u[0][0],+u[0][1],+A[0],+u[0][3],+u[0][4]],[+u[1][0],+u[1][1],+A[1],+u[1][3],+u[1][4]],[+u[2][0],+u[2][1],+A[2],+u[2][3],+u[2][4]],[+u[3][0],+u[3][1],+A[3],+u[3][3],+u[3][4]],[+u[4][0],+u[4][1],+A[4],+u[4][3],+u[4][4]]]),l([[+u[0][0],+u[0][1],+u[0][2],+A[0],+u[0][4]],[+u[1][0],+u[1][1],+u[1][2],+A[1],+u[1][4]],[+u[2][0],+u[2][1],+u[2][2],+A[2],+u[2][4]],[+u[3][0],+u[3][1],+u[3][2],+A[3],+u[3][4]],[+u[4][0],+u[4][1],+u[4][2],+A[4],+u[4][4]]]),l([[+u[0][0],+u[0][1],+u[0][2],+u[0][3],+A[0]],[+u[1][0],+u[1][1],+u[1][2],+u[1][3],+A[1]],[+u[2][0],+u[2][1],+u[2][2],+u[2][3],+A[2]],[+u[3][0],+u[3][1],+u[3][2],+u[3][3],+A[3]],[+u[4][0],+u[4][1],+u[4][2],+u[4][3],+A[4]]]),l(u)]}}function d(l){return function(u,A){return[l([[+A[0],+u[0][1],+u[0][2],+u[0][3],+u[0][4],+u[0][5]],[+A[1],+u[1][1],+u[1][2],+u[1][3],+u[1][4],+u[1][5]],[+A[2],+u[2][1],+u[2][2],+u[2][3],+u[2][4],+u[2][5]],[+A[3],+u[3][1],+u[3][2],+u[3][3],+u[3][4],+u[3][5]],[+A[4],+u[4][1],+u[4][2],+u[4][3],+u[4][4],+u[4][5]],[+A[5],+u[5][1],+u[5][2],+u[5][3],+u[5][4],+u[5][5]]]),l([[+u[0][0],+A[0],+u[0][2],+u[0][3],+u[0][4],+u[0][5]],[+u[1][0],+A[1],+u[1][2],+u[1][3],+u[1][4],+u[1][5]],[+u[2][0],+A[2],+u[2][2],+u[2][3],+u[2][4],+u[2][5]],[+u[3][0],+A[3],+u[3][2],+u[3][3],+u[3][4],+u[3][5]],[+u[4][0],+A[4],+u[4][2],+u[4][3],+u[4][4],+u[4][5]],[+u[5][0],+A[5],+u[5][2],+u[5][3],+u[5][4],+u[5][5]]]),l([[+u[0][0],+u[0][1],+A[0],+u[0][3],+u[0][4],+u[0][5]],[+u[1][0],+u[1][1],+A[1],+u[1][3],+u[1][4],+u[1][5]],[+u[2][0],+u[2][1],+A[2],+u[2][3],+u[2][4],+u[2][5]],[+u[3][0],+u[3][1],+A[3],+u[3][3],+u[3][4],+u[3][5]],[+u[4][0],+u[4][1],+A[4],+u[4][3],+u[4][4],+u[4][5]],[+u[5][0],+u[5][1],+A[5],+u[5][3],+u[5][4],+u[5][5]]]),l([[+u[0][0],+u[0][1],+u[0][2],+A[0],+u[0][4],+u[0][5]],[+u[1][0],+u[1][1],+u[1][2],+A[1],+u[1][4],+u[1][5]],[+u[2][0],+u[2][1],+u[2][2],+A[2],+u[2][4],+u[2][5]],[+u[3][0],+u[3][1],+u[3][2],+A[3],+u[3][4],+u[3][5]],[+u[4][0],+u[4][1],+u[4][2],+A[4],+u[4][4],+u[4][5]],[+u[5][0],+u[5][1],+u[5][2],+A[5],+u[5][4],+u[5][5]]]),l([[+u[0][0],+u[0][1],+u[0][2],+u[0][3],+A[0],+u[0][5]],[+u[1][0],+u[1][1],+u[1][2],+u[1][3],+A[1],+u[1][5]],[+u[2][0],+u[2][1],+u[2][2],+u[2][3],+A[2],+u[2][5]],[+u[3][0],+u[3][1],+u[3][2],+u[3][3],+A[3],+u[3][5]],[+u[4][0],+u[4][1],+u[4][2],+u[4][3],+A[4],+u[4][5]],[+u[5][0],+u[5][1],+u[5][2],+u[5][3],+A[5],+u[5][5]]]),l([[+u[0][0],+u[0][1],+u[0][2],+u[0][3],+u[0][4],+A[0]],[+u[1][0],+u[1][1],+u[1][2],+u[1][3],+u[1][4],+A[1]],[+u[2][0],+u[2][1],+u[2][2],+u[2][3],+u[2][4],+A[2]],[+u[3][0],+u[3][1],+u[3][2],+u[3][3],+u[3][4],+A[3]],[+u[4][0],+u[4][1],+u[4][2],+u[4][3],+u[4][4],+A[4]],[+u[5][0],+u[5][1],+u[5][2],+u[5][3],+u[5][4],+A[5]]]),l(u)]}}var p=[r,t];function c(l,x,u,A,_,g,b,v){return function(S,E){switch(S.length){case 0:return l(S,E);case 1:return x(S,E);case 2:return u(S,E);case 3:return A(S,E);case 4:return _(S,E);case 5:return g(S,E)}var C=b[S.length];return C||(C=b[S.length]=v(S.length)),C(S,E)}}function m(){for(;p.length<a;)p.push(n(p.length));M.exports=c.apply(void 0,p.concat([p,n]));for(var l=0;l<a;++l)M.exports[l]=p[l]}m()},{"robust-determinant":280}],284:[function(f,M,T){var e=f("two-product"),a=f("robust-sum"),n=f("robust-scale"),r=f("robust-subtract"),t=5,h=11102230246251565e-32,s=(3+16*h)*h,o=(7+56*h)*h;function y(g,b,v,k){return function(E,C,F){var I=g(g(b(C[1],F[0]),b(-F[1],C[0])),g(b(E[1],C[0]),b(-C[1],E[0]))),D=g(b(E[1],F[0]),b(-F[1],E[0])),R=k(I,D);return R[R.length-1]}}function d(g,b,v,k){return function(E,C,F,I){var D=g(g(v(g(b(F[1],I[0]),b(-I[1],F[0])),C[2]),g(v(g(b(C[1],I[0]),b(-I[1],C[0])),-F[2]),v(g(b(C[1],F[0]),b(-F[1],C[0])),I[2]))),g(v(g(b(C[1],I[0]),b(-I[1],C[0])),E[2]),g(v(g(b(E[1],I[0]),b(-I[1],E[0])),-C[2]),v(g(b(E[1],C[0]),b(-C[1],E[0])),I[2])))),R=g(g(v(g(b(F[1],I[0]),b(-I[1],F[0])),E[2]),g(v(g(b(E[1],I[0]),b(-I[1],E[0])),-F[2]),v(g(b(E[1],F[0]),b(-F[1],E[0])),I[2]))),g(v(g(b(C[1],F[0]),b(-F[1],C[0])),E[2]),g(v(g(b(E[1],F[0]),b(-F[1],E[0])),-C[2]),v(g(b(E[1],C[0]),b(-C[1],E[0])),F[2])))),O=k(D,R);return O[O.length-1]}}function p(g,b,v,k){return function(E,C,F,I,D){var R=g(g(g(v(g(v(g(b(I[1],D[0]),b(-D[1],I[0])),F[2]),g(v(g(b(F[1],D[0]),b(-D[1],F[0])),-I[2]),v(g(b(F[1],I[0]),b(-I[1],F[0])),D[2]))),C[3]),g(v(g(v(g(b(I[1],D[0]),b(-D[1],I[0])),C[2]),g(v(g(b(C[1],D[0]),b(-D[1],C[0])),-I[2]),v(g(b(C[1],I[0]),b(-I[1],C[0])),D[2]))),-F[3]),v(g(v(g(b(F[1],D[0]),b(-D[1],F[0])),C[2]),g(v(g(b(C[1],D[0]),b(-D[1],C[0])),-F[2]),v(g(b(C[1],F[0]),b(-F[1],C[0])),D[2]))),I[3]))),g(v(g(v(g(b(F[1],I[0]),b(-I[1],F[0])),C[2]),g(v(g(b(C[1],I[0]),b(-I[1],C[0])),-F[2]),v(g(b(C[1],F[0]),b(-F[1],C[0])),I[2]))),-D[3]),g(v(g(v(g(b(I[1],D[0]),b(-D[1],I[0])),C[2]),g(v(g(b(C[1],D[0]),b(-D[1],C[0])),-I[2]),v(g(b(C[1],I[0]),b(-I[1],C[0])),D[2]))),E[3]),v(g(v(g(b(I[1],D[0]),b(-D[1],I[0])),E[2]),g(v(g(b(E[1],D[0]),b(-D[1],E[0])),-I[2]),v(g(b(E[1],I[0]),b(-I[1],E[0])),D[2]))),-C[3])))),g(g(v(g(v(g(b(C[1],D[0]),b(-D[1],C[0])),E[2]),g(v(g(b(E[1],D[0]),b(-D[1],E[0])),-C[2]),v(g(b(E[1],C[0]),b(-C[1],E[0])),D[2]))),I[3]),g(v(g(v(g(b(C[1],I[0]),b(-I[1],C[0])),E[2]),g(v(g(b(E[1],I[0]),b(-I[1],E[0])),-C[2]),v(g(b(E[1],C[0]),b(-C[1],E[0])),I[2]))),-D[3]),v(g(v(g(b(F[1],I[0]),b(-I[1],F[0])),C[2]),g(v(g(b(C[1],I[0]),b(-I[1],C[0])),-F[2]),v(g(b(C[1],F[0]),b(-F[1],C[0])),I[2]))),E[3]))),g(v(g(v(g(b(F[1],I[0]),b(-I[1],F[0])),E[2]),g(v(g(b(E[1],I[0]),b(-I[1],E[0])),-F[2]),v(g(b(E[1],F[0]),b(-F[1],E[0])),I[2]))),-C[3]),g(v(g(v(g(b(C[1],I[0]),b(-I[1],C[0])),E[2]),g(v(g(b(E[1],I[0]),b(-I[1],E[0])),-C[2]),v(g(b(E[1],C[0]),b(-C[1],E[0])),I[2]))),F[3]),v(g(v(g(b(C[1],F[0]),b(-F[1],C[0])),E[2]),g(v(g(b(E[1],F[0]),b(-F[1],E[0])),-C[2]),v(g(b(E[1],C[0]),b(-C[1],E[0])),F[2]))),-I[3]))))),O=g(g(g(v(g(v(g(b(I[1],D[0]),b(-D[1],I[0])),F[2]),g(v(g(b(F[1],D[0]),b(-D[1],F[0])),-I[2]),v(g(b(F[1],I[0]),b(-I[1],F[0])),D[2]))),E[3]),v(g(v(g(b(I[1],D[0]),b(-D[1],I[0])),E[2]),g(v(g(b(E[1],D[0]),b(-D[1],E[0])),-I[2]),v(g(b(E[1],I[0]),b(-I[1],E[0])),D[2]))),-F[3])),g(v(g(v(g(b(F[1],D[0]),b(-D[1],F[0])),E[2]),g(v(g(b(E[1],D[0]),b(-D[1],E[0])),-F[2]),v(g(b(E[1],F[0]),b(-F[1],E[0])),D[2]))),I[3]),v(g(v(g(b(F[1],I[0]),b(-I[1],F[0])),E[2]),g(v(g(b(E[1],I[0]),b(-I[1],E[0])),-F[2]),v(g(b(E[1],F[0]),b(-F[1],E[0])),I[2]))),-D[3]))),g(g(v(g(v(g(b(F[1],D[0]),b(-D[1],F[0])),C[2]),g(v(g(b(C[1],D[0]),b(-D[1],C[0])),-F[2]),v(g(b(C[1],F[0]),b(-F[1],C[0])),D[2]))),E[3]),v(g(v(g(b(F[1],D[0]),b(-D[1],F[0])),E[2]),g(v(g(b(E[1],D[0]),b(-D[1],E[0])),-F[2]),v(g(b(E[1],F[0]),b(-F[1],E[0])),D[2]))),-C[3])),g(v(g(v(g(b(C[1],D[0]),b(-D[1],C[0])),E[2]),g(v(g(b(E[1],D[0]),b(-D[1],E[0])),-C[2]),v(g(b(E[1],C[0]),b(-C[1],E[0])),D[2]))),F[3]),v(g(v(g(b(C[1],F[0]),b(-F[1],C[0])),E[2]),g(v(g(b(E[1],F[0]),b(-F[1],E[0])),-C[2]),v(g(b(E[1],C[0]),b(-C[1],E[0])),F[2]))),-D[3])))),z=k(R,O);return z[z.length-1]}}function c(g){var b=g===3?y:g===4?d:p;return b(a,e,n,r)}var m=c(3),l=c(4),x=[function(){return 0},function(){return 0},function(b,v){return v[0]-b[0]},function(b,v,k){var S=(b[1]-k[1])*(v[0]-k[0]),E=(b[0]-k[0])*(v[1]-k[1]),C=S-E,F;if(S>0){if(E<=0)return C;F=S+E}else if(S<0){if(E>=0)return C;F=-(S+E)}else return C;var I=s*F;return C>=I||C<=-I?C:m(b,v,k)},function(b,v,k,S){var E=b[0]-S[0],C=v[0]-S[0],F=k[0]-S[0],I=b[1]-S[1],D=v[1]-S[1],R=k[1]-S[1],O=b[2]-S[2],z=v[2]-S[2],B=k[2]-S[2],G=C*R,Q=F*D,X=F*I,j=E*R,re=E*D,ue=C*I,K=O*(G-Q)+z*(X-j)+B*(re-ue),te=(Math.abs(G)+Math.abs(Q))*Math.abs(O)+(Math.abs(X)+Math.abs(j))*Math.abs(z)+(Math.abs(re)+Math.abs(ue))*Math.abs(B),Y=o*te;return K>Y||-K>Y?K:l(b,v,k,S)}];function u(g){var b=x[g.length];return b||(b=x[g.length]=c(g.length)),b.apply(void 0,g)}function A(g,b,v,k,S,E,C){return function(I,D,R,O,z){switch(arguments.length){case 0:case 1:return 0;case 2:return k(I,D);case 3:return S(I,D,R);case 4:return E(I,D,R,O);case 5:return C(I,D,R,O,z)}for(var B=new Array(arguments.length),G=0;G<arguments.length;++G)B[G]=arguments[G];return g(B)}}function _(){for(;x.length<=t;)x.push(c(x.length));M.exports=A.apply(void 0,[u].concat(x));for(var g=0;g<=t;++g)M.exports[g]=x[g]}_()},{"robust-scale":286,"robust-subtract":288,"robust-sum":289,"two-product":306}],285:[function(f,M,T){var e=f("robust-sum"),a=f("robust-scale");M.exports=n;function n(r,t){if(r.length===1)return a(t,r[0]);if(t.length===1)return a(r,t[0]);if(r.length===0||t.length===0)return[0];var h=[0];if(r.length<t.length)for(var s=0;s<r.length;++s)h=e(h,a(t,r[s]));else for(var s=0;s<t.length;++s)h=e(h,a(r,t[s]));return h}},{"robust-scale":286,"robust-sum":289}],286:[function(f,M,T){var e=f("two-product"),a=f("two-sum");M.exports=n;function n(r,t){var h=r.length;if(h===1){var s=e(r[0],t);return s[0]?s:[s[1]]}var o=new Array(2*h),y=[.1,.1],d=[.1,.1],p=0;e(r[0],t,y),y[0]&&(o[p++]=y[0]);for(var c=1;c<h;++c){e(r[c],t,d);var m=y[1];a(m,d[0],y),y[0]&&(o[p++]=y[0]);var l=d[1],x=y[1],u=l+x,A=u-l,_=x-A;y[1]=u,_&&(o[p++]=_)}return y[1]&&(o[p++]=y[1]),p===0&&(o[p++]=0),o.length=p,o}},{"two-product":306,"two-sum":307}],287:[function(f,M,T){M.exports=n;var e=f("robust-orientation")[3];function a(r,t,h,s){for(var o=0;o<2;++o){var y=r[o],d=t[o],p=Math.min(y,d),c=Math.max(y,d),m=h[o],l=s[o],x=Math.min(m,l),u=Math.max(m,l);if(u<p||c<x)return!1}return!0}function n(r,t,h,s){var o=e(r,h,s),y=e(t,h,s);if(o>0&&y>0||o<0&&y<0)return!1;var d=e(h,r,t),p=e(s,r,t);return d>0&&p>0||d<0&&p<0?!1:o===0&&y===0&&d===0&&p===0?a(r,t,h,s):!0}},{"robust-orientation":284}],288:[function(f,M,T){M.exports=a;function e(n,r){var t=n+r,h=t-n,s=t-h,o=r-h,y=n-s,d=y+o;return d?[d,t]:[t]}function a(n,r){var t=n.length|0,h=r.length|0;if(t===1&&h===1)return e(n[0],-r[0]);var s=t+h,o=new Array(s),y=0,d=0,p=0,c=Math.abs,m=n[d],l=c(m),x=-r[p],u=c(x),A,_;l<u?(_=m,d+=1,d<t&&(m=n[d],l=c(m))):(_=x,p+=1,p<h&&(x=-r[p],u=c(x))),d<t&&l<u||p>=h?(A=m,d+=1,d<t&&(m=n[d],l=c(m))):(A=x,p+=1,p<h&&(x=-r[p],u=c(x)));for(var g=A+_,b=g-A,v=_-b,k=v,S=g,E,C,F,I,D;d<t&&p<h;)l<u?(A=m,d+=1,d<t&&(m=n[d],l=c(m))):(A=x,p+=1,p<h&&(x=-r[p],u=c(x))),_=k,g=A+_,b=g-A,v=_-b,v&&(o[y++]=v),E=S+g,C=E-S,F=E-C,I=g-C,D=S-F,k=D+I,S=E;for(;d<t;)A=m,_=k,g=A+_,b=g-A,v=_-b,v&&(o[y++]=v),E=S+g,C=E-S,F=E-C,I=g-C,D=S-F,k=D+I,S=E,d+=1,d<t&&(m=n[d]);for(;p<h;)A=x,_=k,g=A+_,b=g-A,v=_-b,v&&(o[y++]=v),E=S+g,C=E-S,F=E-C,I=g-C,D=S-F,k=D+I,S=E,p+=1,p<h&&(x=-r[p]);return k&&(o[y++]=k),S&&(o[y++]=S),y||(o[y++]=0),o.length=y,o}},{}],289:[function(f,M,T){M.exports=a;function e(n,r){var t=n+r,h=t-n,s=t-h,o=r-h,y=n-s,d=y+o;return d?[d,t]:[t]}function a(n,r){var t=n.length|0,h=r.length|0;if(t===1&&h===1)return e(n[0],r[0]);var s=t+h,o=new Array(s),y=0,d=0,p=0,c=Math.abs,m=n[d],l=c(m),x=r[p],u=c(x),A,_;l<u?(_=m,d+=1,d<t&&(m=n[d],l=c(m))):(_=x,p+=1,p<h&&(x=r[p],u=c(x))),d<t&&l<u||p>=h?(A=m,d+=1,d<t&&(m=n[d],l=c(m))):(A=x,p+=1,p<h&&(x=r[p],u=c(x)));for(var g=A+_,b=g-A,v=_-b,k=v,S=g,E,C,F,I,D;d<t&&p<h;)l<u?(A=m,d+=1,d<t&&(m=n[d],l=c(m))):(A=x,p+=1,p<h&&(x=r[p],u=c(x))),_=k,g=A+_,b=g-A,v=_-b,v&&(o[y++]=v),E=S+g,C=E-S,F=E-C,I=g-C,D=S-F,k=D+I,S=E;for(;d<t;)A=m,_=k,g=A+_,b=g-A,v=_-b,v&&(o[y++]=v),E=S+g,C=E-S,F=E-C,I=g-C,D=S-F,k=D+I,S=E,d+=1,d<t&&(m=n[d]);for(;p<h;)A=x,_=k,g=A+_,b=g-A,v=_-b,v&&(o[y++]=v),E=S+g,C=E-S,F=E-C,I=g-C,D=S-F,k=D+I,S=E,p+=1,p<h&&(x=r[p]);return k&&(o[y++]=k),S&&(o[y++]=S),y||(o[y++]=0),o.length=y,o}},{}],290:[function(f,M,T){M.exports=n;var e=f("boundary-cells"),a=f("reduce-simplicial-complex");function n(r){return a(e(r))}},{"boundary-cells":34,"reduce-simplicial-complex":276}],291:[function(f,M,T){M.exports=p;var e=f("ndarray"),a=f("typedarray-pool"),n=f("ndarray-sort"),r=f("./lib/codegen");function t(c){for(var m=c.length,l=0,x=0;x<m;++x)l=Math.max(l,c[x].length)|0;return l-1}function h(c,m){for(var l=c.length,x=a.mallocUint8(l),u=0;u<l;++u)x[u]=c[u]<m|0;return x}function s(c,m){for(var l=c.length,x=m*(m+1)/2*l|0,u=a.mallocUint32(x*2),A=0,_=0;_<l;++_)for(var g=c[_],m=g.length,b=0;b<m;++b)for(var v=0;v<b;++v){var k=g[v],S=g[b];u[A++]=Math.min(k,S)|0,u[A++]=Math.max(k,S)|0}var E=A/2|0;n(e(u,[E,2]));for(var C=2,_=2;_<A;_+=2)u[_-2]===u[_]&&u[_-1]===u[_+1]||(u[C++]=u[_],u[C++]=u[_+1]);return e(u,[C/2|0,2])}function o(c,m,l,x){for(var u=c.data,A=c.shape[0],_=a.mallocDouble(A),g=0,b=0;b<A;++b){var v=u[2*b],k=u[2*b+1];if(l[v]!==l[k]){var S=m[v],E=m[k];u[2*g]=v,u[2*g+1]=k,_[g++]=(E-x)/(E-S)}}return c.shape[0]=g,e(_,[g])}function y(c,m){var l=a.mallocInt32(m*2),x=c.shape[0],u=c.data;l[0]=0;for(var A=0,_=0;_<x;++_){var g=u[2*_];if(g!==A){for(l[2*A+1]=_;++A<g;)l[2*A]=_,l[2*A+1]=_;l[2*A]=_}}for(l[2*A+1]=x;++A<m;)l[2*A]=l[2*A+1]=x;return l}function d(c){for(var m=c.shape[0]|0,l=c.data,x=new Array(m),u=0;u<m;++u)x[u]=[l[2*u],l[2*u+1]];return x}function p(c,m,l,x){l=l||0,typeof x>"u"&&(x=t(c));var u=c.length;if(u===0||x<1)return{cells:[],vertexIds:[],vertexWeights:[]};var A=h(m,+l),_=s(c,x),g=o(_,m,A,+l),b=y(_,m.length|0),v=r(x)(c,_.data,b,A),k=d(_),S=[].slice.call(g.data,0,g.shape[0]);return a.free(A),a.free(_.data),a.free(g.data),a.free(b),{cells:v,vertexIds:k,vertexWeights:S}}},{"./lib/codegen":292,ndarray:259,"ndarray-sort":258,"typedarray-pool":308}],292:[function(f,M,T){M.exports=a;var e=[function(){function r(t,h,s,o){for(var y=t.length,d=[],p=0;p<y;++p){var c=t[p];c.length}return d}return r},function(){function r(h,s,o,y){for(var d=Math.min(o,y)|0,p=Math.max(o,y)|0,c=h[2*d],m=h[2*d+1];c<m;){var l=c+m>>1,x=s[2*l+1];if(x===p)return l;p<x?m=l:c=l+1}return c}function t(h,s,o,y){for(var d=h.length,p=[],c=0;c<d;++c){var m=h[c],l=m.length;if(l===2){var x=(y[m[0]]<<0)+(y[m[1]]<<1);if(x===0||x===3)continue;switch(x){case 0:break;case 1:p.push([r(o,s,m[0],m[1])]);break;case 2:p.push([r(o,s,m[1],m[0])]);break}}}return p}return t},function(){function r(h,s,o,y){for(var d=Math.min(o,y)|0,p=Math.max(o,y)|0,c=h[2*d],m=h[2*d+1];c<m;){var l=c+m>>1,x=s[2*l+1];if(x===p)return l;p<x?m=l:c=l+1}return c}function t(h,s,o,y){for(var d=h.length,p=[],c=0;c<d;++c){var m=h[c],l=m.length;if(l===3){var x=(y[m[0]]<<0)+(y[m[1]]<<1)+(y[m[2]]<<2);if(x===0||x===7)continue;switch(x){case 0:break;case 1:p.push([r(o,s,m[0],m[2]),r(o,s,m[0],m[1])]);break;case 2:p.push([r(o,s,m[1],m[0]),r(o,s,m[1],m[2])]);break;case 3:p.push([r(o,s,m[0],m[2]),r(o,s,m[1],m[2])]);break;case 4:p.push([r(o,s,m[2],m[1]),r(o,s,m[2],m[0])]);break;case 5:p.push([r(o,s,m[2],m[1]),r(o,s,m[0],m[1])]);break;case 6:p.push([r(o,s,m[1],m[0]),r(o,s,m[2],m[0])]);break}}else if(l===2){var x=(y[m[0]]<<0)+(y[m[1]]<<1);if(x===0||x===3)continue;switch(x){case 0:break;case 1:p.push([r(o,s,m[0],m[1])]);break;case 2:p.push([r(o,s,m[1],m[0])]);break}}}return p}return t},function(){function r(h,s,o,y){for(var d=Math.min(o,y)|0,p=Math.max(o,y)|0,c=h[2*d],m=h[2*d+1];c<m;){var l=c+m>>1,x=s[2*l+1];if(x===p)return l;p<x?m=l:c=l+1}return c}function t(h,s,o,y){for(var d=h.length,p=[],c=0;c<d;++c){var m=h[c],l=m.length;if(l===4){var x=(y[m[0]]<<0)+(y[m[1]]<<1)+(y[m[2]]<<2)+(y[m[3]]<<3);if(x===0||x===15)continue;switch(x){case 0:break;case 1:p.push([r(o,s,m[0],m[1]),r(o,s,m[0],m[2]),r(o,s,m[0],m[3])]);break;case 2:p.push([r(o,s,m[1],m[2]),r(o,s,m[1],m[0]),r(o,s,m[1],m[3])]);break;case 3:p.push([r(o,s,m[1],m[2]),r(o,s,m[0],m[2]),r(o,s,m[0],m[3])],[r(o,s,m[1],m[3]),r(o,s,m[1],m[2]),r(o,s,m[0],m[3])]);break;case 4:p.push([r(o,s,m[2],m[0]),r(o,s,m[2],m[1]),r(o,s,m[2],m[3])]);break;case 5:p.push([r(o,s,m[0],m[1]),r(o,s,m[2],m[1]),r(o,s,m[0],m[3])],[r(o,s,m[2],m[1]),r(o,s,m[2],m[3]),r(o,s,m[0],m[3])]);break;case 6:p.push([r(o,s,m[2],m[0]),r(o,s,m[1],m[0]),r(o,s,m[1],m[3])],[r(o,s,m[2],m[3]),r(o,s,m[2],m[0]),r(o,s,m[1],m[3])]);break;case 7:p.push([r(o,s,m[0],m[3]),r(o,s,m[1],m[3]),r(o,s,m[2],m[3])]);break;case 8:p.push([r(o,s,m[3],m[1]),r(o,s,m[3],m[0]),r(o,s,m[3],m[2])]);break;case 9:p.push([r(o,s,m[3],m[1]),r(o,s,m[0],m[1]),r(o,s,m[0],m[2])],[r(o,s,m[3],m[2]),r(o,s,m[3],m[1]),r(o,s,m[0],m[2])]);break;case 10:p.push([r(o,s,m[1],m[0]),r(o,s,m[3],m[0]),r(o,s,m[1],m[2])],[r(o,s,m[3],m[0]),r(o,s,m[3],m[2]),r(o,s,m[1],m[2])]);break;case 11:p.push([r(o,s,m[1],m[2]),r(o,s,m[0],m[2]),r(o,s,m[3],m[2])]);break;case 12:p.push([r(o,s,m[3],m[0]),r(o,s,m[2],m[0]),r(o,s,m[2],m[1])],[r(o,s,m[3],m[1]),r(o,s,m[3],m[0]),r(o,s,m[2],m[1])]);break;case 13:p.push([r(o,s,m[0],m[1]),r(o,s,m[2],m[1]),r(o,s,m[3],m[1])]);break;case 14:p.push([r(o,s,m[2],m[0]),r(o,s,m[1],m[0]),r(o,s,m[3],m[0])]);break}}else if(l===3){var x=(y[m[0]]<<0)+(y[m[1]]<<1)+(y[m[2]]<<2);if(x===0||x===7)continue;switch(x){case 0:break;case 1:p.push([r(o,s,m[0],m[2]),r(o,s,m[0],m[1])]);break;case 2:p.push([r(o,s,m[1],m[0]),r(o,s,m[1],m[2])]);break;case 3:p.push([r(o,s,m[0],m[2]),r(o,s,m[1],m[2])]);break;case 4:p.push([r(o,s,m[2],m[1]),r(o,s,m[2],m[0])]);break;case 5:p.push([r(o,s,m[2],m[1]),r(o,s,m[0],m[1])]);break;case 6:p.push([r(o,s,m[1],m[0]),r(o,s,m[2],m[0])]);break}}else if(l===2){var x=(y[m[0]]<<0)+(y[m[1]]<<1);if(x===0||x===3)continue;switch(x){case 0:break;case 1:p.push([r(o,s,m[0],m[1])]);break;case 2:p.push([r(o,s,m[1],m[0])]);break}}}return p}return t}];function a(n){return e[n]()}},{}],293:[function(f,M,T){var e=f("bit-twiddle"),a=f("union-find");function n(g){for(var b=0,v=Math.max,k=0,S=g.length;k<S;++k)b=v(b,g[k].length);return b-1}T.dimension=n;function r(g){for(var b=-1,v=Math.max,k=0,S=g.length;k<S;++k)for(var E=g[k],C=0,F=E.length;C<F;++C)b=v(b,E[C]);return b+1}T.countVertices=r;function t(g){for(var b=new Array(g.length),v=0,k=g.length;v<k;++v)b[v]=g[v].slice(0);return b}T.cloneCells=t;function h(g,b){var v=g.length,k=g.length-b.length,S=Math.min;if(k)return k;switch(v){case 0:return 0;case 1:return g[0]-b[0];case 2:var D=g[0]+g[1]-b[0]-b[1];return D||S(g[0],g[1])-S(b[0],b[1]);case 3:var E=g[0]+g[1],C=b[0]+b[1];if(D=E+g[2]-(C+b[2]),D)return D;var F=S(g[0],g[1]),I=S(b[0],b[1]),D=S(F,g[2])-S(I,b[2]);return D||S(F+g[2],E)-S(I+b[2],C);default:var R=g.slice(0);R.sort();var O=b.slice(0);O.sort();for(var z=0;z<v;++z)if(k=R[z]-O[z],k)return k;return 0}}T.compareCells=h;function s(g,b){return h(g[0],b[0])}function o(g,b){if(b){for(var v=g.length,k=new Array(v),S=0;S<v;++S)k[S]=[g[S],b[S]];k.sort(s);for(var S=0;S<v;++S)g[S]=k[S][0],b[S]=k[S][1];return g}else return g.sort(h),g}T.normalize=o;function y(g){if(g.length===0)return[];for(var b=1,v=g.length,k=1;k<v;++k){var S=g[k];if(h(S,g[k-1])){if(k===b){b++;continue}g[b++]=S}}return g.length=b,g}T.unique=y;function d(g,b){for(var v=0,k=g.length-1,S=-1;v<=k;){var E=v+k>>1,C=h(g[E],b);C<=0?(C===0&&(S=E),v=E+1):C>0&&(k=E-1)}return S}T.findCell=d;function p(g,b){for(var v=new Array(g.length),k=0,S=v.length;k<S;++k)v[k]=[];for(var E=[],k=0,C=b.length;k<C;++k)for(var F=b[k],I=F.length,D=1,R=1<<I;D<R;++D){E.length=e.popCount(D);for(var O=0,z=0;z<I;++z)D&1<<z&&(E[O++]=F[z]);var B=d(g,E);if(!(B<0))for(;v[B++].push(k),!(B>=g.length||h(g[B],E)!==0););}return v}T.incidence=p;function c(g,b){if(!b)return p(y(l(g,0)),g);for(var v=new Array(b),k=0;k<b;++k)v[k]=[];for(var k=0,S=g.length;k<S;++k)for(var E=g[k],C=0,F=E.length;C<F;++C)v[E[C]].push(k);return v}T.dual=c;function m(g){for(var b=[],v=0,k=g.length;v<k;++v)for(var S=g[v],E=S.length|0,C=1,F=1<<E;C<F;++C){for(var I=[],D=0;D<E;++D)C>>>D&1&&I.push(S[D]);b.push(I)}return o(b)}T.explode=m;function l(g,b){if(b<0)return[];for(var v=[],k=(1<<b+1)-1,S=0;S<g.length;++S)for(var E=g[S],C=k;C<1<<E.length;C=e.nextCombination(C)){for(var F=new Array(b+1),I=0,D=0;D<E.length;++D)C&1<<D&&(F[I++]=E[D]);v.push(F)}return o(v)}T.skeleton=l;function x(g){for(var b=[],v=0,k=g.length;v<k;++v)for(var S=g[v],E=0,C=S.length;E<C;++E){for(var F=new Array(S.length-1),I=0,D=0;I<C;++I)I!==E&&(F[D++]=S[I]);b.push(F)}return o(b)}T.boundary=x;function u(g,b){for(var v=new a(b),k=0;k<g.length;++k)for(var S=g[k],E=0;E<S.length;++E)for(var C=E+1;C<S.length;++C)v.link(S[E],S[C]);for(var F=[],I=v.ranks,k=0;k<I.length;++k)I[k]=-1;for(var k=0;k<g.length;++k){var D=v.find(g[k][0]);I[D]<0?(I[D]=F.length,F.push([g[k].slice(0)])):F[I[D]].push(g[k].slice(0))}return F}function A(g){for(var b=y(o(l(g,0))),v=new a(b.length),k=0;k<g.length;++k)for(var S=g[k],E=0;E<S.length;++E)for(var C=d(b,[S[E]]),F=E+1;F<S.length;++F)v.link(C,d(b,[S[F]]));for(var I=[],D=v.ranks,k=0;k<D.length;++k)D[k]=-1;for(var k=0;k<g.length;++k){var R=v.find(d(b,[g[k][0]]));D[R]<0?(D[R]=I.length,I.push([g[k].slice(0)])):I[D[R]].push(g[k].slice(0))}return I}function _(g,b){return b?u(g,b):A(g)}T.connectedComponents=_},{"bit-twiddle":32,"union-find":309}],294:[function(f,M,T){arguments[4][32][0].apply(T,arguments)},{dup:32}],295:[function(f,M,T){arguments[4][293][0].apply(T,arguments)},{"bit-twiddle":294,dup:293,"union-find":296}],296:[function(f,M,T){M.exports=e;function e(a){this.roots=new Array(a),this.ranks=new Array(a);for(var n=0;n<a;++n)this.roots[n]=n,this.ranks[n]=0}e.prototype.length=function(){return this.roots.length},e.prototype.makeSet=function(){var a=this.roots.length;return this.roots.push(a),this.ranks.push(0),a},e.prototype.find=function(a){for(var n=this.roots;n[a]!==a;){var r=n[a];n[a]=n[r],a=r}return a},e.prototype.link=function(a,n){var r=this.find(a),t=this.find(n);if(r!==t){var h=this.ranks,s=this.roots,o=h[r],y=h[t];o<y?s[r]=t:y<o?s[t]=r:(s[t]=r,++h[r])}}},{}],297:[function(f,M,T){M.exports=r;var e=f("robust-orientation"),a=f("simplicial-complex");function n(t,h,s){var o=Math.abs(e(t,h,s)),y=Math.sqrt(Math.pow(h[0]-s[0],2)+Math.pow(h[1]-s[1],2));return o/y}function r(t,h,s){for(var o=h.length,y=t.length,d=new Array(o),p=new Array(o),c=new Array(o),m=new Array(o),l=0;l<o;++l)d[l]=p[l]=-1,c[l]=1/0,m[l]=!1;for(var l=0;l<y;++l){var x=t[l];if(x.length!==2)throw new Error("Input must be a graph");var u=x[1],A=x[0];p[A]!==-1?p[A]=-2:p[A]=u,d[u]!==-1?d[u]=-2:d[u]=A}function _(X){if(m[X])return 1/0;var j=d[X],re=p[X];return j<0||re<0?1/0:n(h[X],h[j],h[re])}function g(X,j){var re=I[X],ue=I[j];I[X]=ue,I[j]=re,D[re]=j,D[ue]=X}function b(X){return c[I[X]]}function v(X){return X&1?X-1>>1:(X>>1)-1}function k(X){for(var j=b(X);;){var re=j,ue=2*X+1,K=2*(X+1),te=X;if(ue<O){var Y=b(ue);Y<re&&(te=ue,re=Y)}if(K<O){var H=b(K);H<re&&(te=K)}if(te===X)return X;g(X,te),X=te}}function S(X){for(var j=b(X);X>0;){var re=v(X);if(re>=0){var ue=b(re);if(j<ue){g(X,re),X=re;continue}}return X}}function E(){if(O>0){var X=I[0];return g(0,O-1),O-=1,k(0),X}return-1}function C(X,j){var re=I[X];return c[re]===j?X:(c[re]=-1/0,S(X),E(),c[re]=j,O+=1,S(O-1))}function F(X){if(!m[X]){m[X]=!0;var j=d[X],re=p[X];d[re]>=0&&(d[re]=j),p[j]>=0&&(p[j]=re),D[j]>=0&&C(D[j],_(j)),D[re]>=0&&C(D[re],_(re))}}for(var I=[],D=new Array(o),l=0;l<o;++l){var R=c[l]=_(l);R<1/0?(D[l]=I.length,I.push(l)):D[l]=-1}for(var O=I.length,l=O>>1;l>=0;--l)k(l);for(;;){var z=E();if(z<0||c[z]>s)break;F(z)}for(var B=[],l=0;l<o;++l)m[l]||(D[l]=B.length,B.push(h[l].slice()));B.length;function G(X,j){if(X[j]<0)return j;var re=j,ue=j;do{var K=X[ue];if(!m[ue]||K<0||K===ue||(ue=K,K=X[ue],!m[ue]||K<0||K===ue))break;ue=K,re=X[re]}while(re!==ue);for(var te=j;te!==ue;te=X[te])X[te]=ue;return ue}var Q=[];return t.forEach(function(X){var j=G(d,X[0]),re=G(p,X[1]);if(j>=0&&re>=0&&j!==re){var ue=D[j],K=D[re];ue!==K&&Q.push([ue,K])}}),a.unique(a.normalize(Q)),{positions:B,edges:Q}}},{"robust-orientation":284,"simplicial-complex":295}],298:[function(f,M,T){M.exports=n;var e=f("robust-orientation");function a(r,t){var h,s;if(t[0][0]<t[1][0])h=t[0],s=t[1];else if(t[0][0]>t[1][0])h=t[1],s=t[0];else{var o=Math.min(r[0][1],r[1][1]),y=Math.max(r[0][1],r[1][1]),d=Math.min(t[0][1],t[1][1]),p=Math.max(t[0][1],t[1][1]);return y<d?y-d:o>p?o-p:y-p}var c,m;r[0][1]<r[1][1]?(c=r[0],m=r[1]):(c=r[1],m=r[0]);var l=e(s,h,c);return l||(l=e(s,h,m),l)?l:m-s}function n(r,t){var h,s;if(t[0][0]<t[1][0])h=t[0],s=t[1];else if(t[0][0]>t[1][0])h=t[1],s=t[0];else return a(t,r);var o,y;if(r[0][0]<r[1][0])o=r[0],y=r[1];else if(r[0][0]>r[1][0])o=r[1],y=r[0];else return-a(r,t);var d=e(h,s,y),p=e(h,s,o);if(d<0){if(p<=0)return d}else if(d>0){if(p>=0)return d}else if(p)return p;if(d=e(y,o,s),p=e(y,o,h),d<0){if(p<=0)return d}else if(d>0){if(p>=0)return d}else if(p)return p;return s[0]-y[0]}},{"robust-orientation":284}],299:[function(f,M,T){M.exports=p;var e=f("binary-search-bounds"),a=f("functional-red-black-tree"),n=f("robust-orientation"),r=f("./lib/order-segments");function t(c,m,l){this.slabs=c,this.coordinates=m,this.horizontal=l}var h=t.prototype;function s(c,m){return c.y-m}function o(c,m){for(var l=null;c;){var x=c.key,u,A;x[0][0]<x[1][0]?(u=x[0],A=x[1]):(u=x[1],A=x[0]);var _=n(u,A,m);if(_<0)c=c.left;else if(_>0)if(m[0]!==x[1][0])l=c,c=c.right;else{var g=o(c.right,m);if(g)return g;c=c.left}else{if(m[0]!==x[1][0])return c;var g=o(c.right,m);if(g)return g;c=c.left}}return l}h.castUp=function(c){var m=e.le(this.coordinates,c[0]);if(m<0)return-1;this.slabs[m];var l=o(this.slabs[m],c),x=-1;if(l&&(x=l.value),this.coordinates[m]===c[0]){var u=null;if(l&&(u=l.key),m>0){var A=o(this.slabs[m-1],c);A&&(u?r(A.key,u)>0&&(u=A.key,x=A.value):(x=A.value,u=A.key))}var _=this.horizontal[m];if(_.length>0){var g=e.ge(_,c[1],s);if(g<_.length){var b=_[g];if(c[1]===b.y){if(b.closed)return b.index;for(;g<_.length-1&&_[g+1].y===c[1];)if(g=g+1,b=_[g],b.closed)return b.index;if(b.y===c[1]&&!b.start){if(g=g+1,g>=_.length)return x;b=_[g]}}if(b.start)if(u){var v=n(u[0],u[1],[c[0],b.y]);u[0][0]>u[1][0]&&(v=-v),v>0&&(x=b.index)}else x=b.index;else b.y!==c[1]&&(x=b.index)}}}return x};function y(c,m,l,x){this.y=c,this.index=m,this.start=l,this.closed=x}function d(c,m,l,x){this.x=c,this.segment=m,this.create=l,this.index=x}function p(c){for(var m=c.length,l=2*m,x=new Array(l),u=0;u<m;++u){var A=c[u],_=A[0][0]<A[1][0];x[2*u]=new d(A[0][0],A,_,u),x[2*u+1]=new d(A[1][0],A,!_,u)}x.sort(function(F,I){var D=F.x-I.x;return D||(D=F.create-I.create,D)?D:Math.min(F.segment[0][1],F.segment[1][1])-Math.min(I.segment[0][1],I.segment[1][1])});for(var g=a(r),b=[],v=[],k=[],u=0;u<l;){for(var S=x[u].x,E=[];u<l;){var C=x[u];if(C.x!==S)break;u+=1,C.segment[0][0]===C.x&&C.segment[1][0]===C.x?C.create&&(C.segment[0][1]<C.segment[1][1]?(E.push(new y(C.segment[0][1],C.index,!0,!0)),E.push(new y(C.segment[1][1],C.index,!1,!1))):(E.push(new y(C.segment[1][1],C.index,!0,!1)),E.push(new y(C.segment[0][1],C.index,!1,!0)))):C.create?g=g.insert(C.segment,C.index):g=g.remove(C.segment)}b.push(g.root),v.push(S),k.push(E)}return new t(b,v,k)}},{"./lib/order-segments":298,"binary-search-bounds":31,"functional-red-black-tree":69,"robust-orientation":284}],300:[function(f,M,T){var e=f("robust-dot-product"),a=f("robust-sum");M.exports=t,M.exports.positive=h,M.exports.negative=s;function n(o,y){var d=a(e(o,y),[y[y.length-1]]);return d[d.length-1]}function r(o,y,d,p){var c=p-y,m=-y/c;m<0?m=0:m>1&&(m=1);for(var l=1-m,x=o.length,u=new Array(x),A=0;A<x;++A)u[A]=m*o[A]+l*d[A];return u}function t(o,y){for(var d=[],p=[],c=n(o[o.length-1],y),m=o[o.length-1],l=o[0],x=0;x<o.length;++x,m=l){l=o[x];var u=n(l,y);if(c<0&&u>0||c>0&&u<0){var A=r(m,u,l,c);d.push(A),p.push(A.slice())}u<0?p.push(l.slice()):u>0?d.push(l.slice()):(d.push(l.slice()),p.push(l.slice())),c=u}return{positive:d,negative:p}}function h(o,y){for(var d=[],p=n(o[o.length-1],y),c=o[o.length-1],m=o[0],l=0;l<o.length;++l,c=m){m=o[l];var x=n(m,y);(p<0&&x>0||p>0&&x<0)&&d.push(r(c,x,m,p)),x>=0&&d.push(m.slice()),p=x}return d}function s(o,y){for(var d=[],p=n(o[o.length-1],y),c=o[o.length-1],m=o[0],l=0;l<o.length;++l,c=m){m=o[l];var x=n(m,y);(p<0&&x>0||p>0&&x<0)&&d.push(r(c,x,m,p)),x<=0&&d.push(m.slice()),p=x}return d}},{"robust-dot-product":281,"robust-sum":289}],301:[function(f,M,T){(function(){var e={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function a(s){return r(h(s),arguments)}function n(s,o){return a.apply(null,[s].concat(o||[]))}function r(s,o){var y=1,d=s.length,p,c="",m,l,x,u,A,_,g,b;for(m=0;m<d;m++)if(typeof s[m]=="string")c+=s[m];else if(typeof s[m]=="object"){if(x=s[m],x.keys)for(p=o[y],l=0;l<x.keys.length;l++){if(p==null)throw new Error(a('[sprintf] Cannot access property "%s" of undefined value "%s"',x.keys[l],x.keys[l-1]));p=p[x.keys[l]]}else x.param_no?p=o[x.param_no]:p=o[y++];if(e.not_type.test(x.type)&&e.not_primitive.test(x.type)&&p instanceof Function&&(p=p()),e.numeric_arg.test(x.type)&&typeof p!="number"&&isNaN(p))throw new TypeError(a("[sprintf] expecting number but found %T",p));switch(e.number.test(x.type)&&(g=p>=0),x.type){case"b":p=parseInt(p,10).toString(2);break;case"c":p=String.fromCharCode(parseInt(p,10));break;case"d":case"i":p=parseInt(p,10);break;case"j":p=JSON.stringify(p,null,x.width?parseInt(x.width):0);break;case"e":p=x.precision?parseFloat(p).toExponential(x.precision):parseFloat(p).toExponential();break;case"f":p=x.precision?parseFloat(p).toFixed(x.precision):parseFloat(p);break;case"g":p=x.precision?String(Number(p.toPrecision(x.precision))):parseFloat(p);break;case"o":p=(parseInt(p,10)>>>0).toString(8);break;case"s":p=String(p),p=x.precision?p.substring(0,x.precision):p;break;case"t":p=String(!!p),p=x.precision?p.substring(0,x.precision):p;break;case"T":p=Object.prototype.toString.call(p).slice(8,-1).toLowerCase(),p=x.precision?p.substring(0,x.precision):p;break;case"u":p=parseInt(p,10)>>>0;break;case"v":p=p.valueOf(),p=x.precision?p.substring(0,x.precision):p;break;case"x":p=(parseInt(p,10)>>>0).toString(16);break;case"X":p=(parseInt(p,10)>>>0).toString(16).toUpperCase();break}e.json.test(x.type)?c+=p:(e.number.test(x.type)&&(!g||x.sign)?(b=g?"+":"-",p=p.toString().replace(e.sign,"")):b="",A=x.pad_char?x.pad_char==="0"?"0":x.pad_char.charAt(1):" ",_=x.width-(b+p).length,u=x.width&&_>0?A.repeat(_):"",c+=x.align?b+p+u:A==="0"?b+u+p:u+b+p)}return c}var t=Object.create(null);function h(s){if(t[s])return t[s];for(var o=s,y,d=[],p=0;o;){if((y=e.text.exec(o))!==null)d.push(y[0]);else if((y=e.modulo.exec(o))!==null)d.push("%");else if((y=e.placeholder.exec(o))!==null){if(y[2]){p|=1;var c=[],m=y[2],l=[];if((l=e.key.exec(m))!==null)for(c.push(l[1]);(m=m.substring(l[0].length))!=="";)if((l=e.key_access.exec(m))!==null)c.push(l[1]);else if((l=e.index_access.exec(m))!==null)c.push(l[1]);else throw new SyntaxError("[sprintf] failed to parse named argument key");else throw new SyntaxError("[sprintf] failed to parse named argument key");y[2]=c}else p|=2;if(p===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");d.push({placeholder:y[0],param_no:y[1],keys:y[2],sign:y[3],pad_char:y[4],align:y[5],width:y[6],precision:y[7],type:y[8]})}else throw new SyntaxError("[sprintf] unexpected placeholder");o=o.substring(y[0].length)}return t[s]=d}typeof T<"u"&&(T.sprintf=a,T.vsprintf=n),typeof window<"u"&&(window.sprintf=a,window.vsprintf=n)})()},{}],302:[function(f,M,T){M.exports=s;var e=f("ndarray-extract-contour"),a=f("zero-crossings"),n={"2d":function(o,y,d){var p=o({order:y,scalarArguments:3,getters:d==="generic"?[0]:void 0,phase:function(m,l,x,u){return m>u|0},vertex:function(m,l,x,u,A,_,g,b,v,k,S,E,C){var F=(g<<0)+(b<<1)+(v<<2)+(k<<3)|0;if(!(F===0||F===15))switch(F){case 0:S.push([m-.5,l-.5]);break;case 1:S.push([m-.25-.25*(u+x-2*C)/(x-u),l-.25-.25*(A+x-2*C)/(x-A)]);break;case 2:S.push([m-.75-.25*(-u-x+2*C)/(u-x),l-.25-.25*(_+u-2*C)/(u-_)]);break;case 3:S.push([m-.5,l-.5-.5*(A+x+_+u-4*C)/(x-A+u-_)]);break;case 4:S.push([m-.25-.25*(_+A-2*C)/(A-_),l-.75-.25*(-A-x+2*C)/(A-x)]);break;case 5:S.push([m-.5-.5*(u+x+_+A-4*C)/(x-u+A-_),l-.5]);break;case 6:S.push([m-.5-.25*(-u-x+_+A)/(u-x+A-_),l-.5-.25*(-A-x+_+u)/(A-x+u-_)]);break;case 7:S.push([m-.75-.25*(_+A-2*C)/(A-_),l-.75-.25*(_+u-2*C)/(u-_)]);break;case 8:S.push([m-.75-.25*(-_-A+2*C)/(_-A),l-.75-.25*(-_-u+2*C)/(_-u)]);break;case 9:S.push([m-.5-.25*(u+x+-_-A)/(x-u+_-A),l-.5-.25*(A+x+-_-u)/(x-A+_-u)]);break;case 10:S.push([m-.5-.5*(-u-x+-_-A+4*C)/(u-x+_-A),l-.5]);break;case 11:S.push([m-.25-.25*(-_-A+2*C)/(_-A),l-.75-.25*(A+x-2*C)/(x-A)]);break;case 12:S.push([m-.5,l-.5-.5*(-A-x+-_-u+4*C)/(A-x+_-u)]);break;case 13:S.push([m-.75-.25*(u+x-2*C)/(x-u),l-.25-.25*(-_-u+2*C)/(_-u)]);break;case 14:S.push([m-.25-.25*(-u-x+2*C)/(u-x),l-.25-.25*(-A-x+2*C)/(A-x)]);break;case 15:S.push([m-.5,l-.5]);break}},cell:function(m,l,x,u,A,_,g,b,v){A?b.push([m,l]):b.push([l,m])}});return function(c,m){var l=[],x=[];return p(c,l,x,m),{positions:l,cells:x}}}};function r(o,y){var d=o.length+"d",p=n[d];if(p)return p(e,o,y)}function t(o,y){for(var d=a(o,y),p=d.length,c=new Array(p),m=new Array(p),l=0;l<p;++l)c[l]=[d[l]],m[l]=[l];return{positions:c,cells:m}}var h={};function s(o,c){if(o.dimension<=0)return{positions:[],cells:[]};if(o.dimension===1)return t(o,c);var d=o.order.join()+"-"+o.dtype,p=h[d],c=+c||0;return p||(p=h[d]=r(o.order,o.dtype)),p(o,c)}},{"ndarray-extract-contour":251,"zero-crossings":318}],303:[function(f,M,T){(function(e){(function(){M.exports=h;var a=f("vectorize-text"),n=window||e.global||{},r=n.__TEXT_CACHE||{};n.__TEXT_CACHE={};function t(s){for(var o=s.cells,y=s.positions,d=new Float32Array(o.length*6),p=0,c=0,m=0;m<o.length;++m)for(var l=o[m],x=0;x<3;++x){var u=y[l[x]];d[p++]=u[0],d[p++]=u[1]+1.4,c=Math.max(u[0],c)}return{data:d,shape:c}}function h(s,o,d){var d=d||{},p=r[s];p||(p=r[s]={" ":{data:new Float32Array(0),shape:.2}});var c=p[o];if(!c)if(o.length<=1||!/\d/.test(o))c=p[o]=t(a(o,{triangles:!0,font:s,textAlign:d.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}}));else{for(var m=o.split(/(\d|\s)/),l=new Array(m.length),x=0,u=0,A=0;A<m.length;++A)l[A]=h(s,m[A]),x+=l[A].data.length,u+=l[A].shape,A>0&&(u+=.02);for(var _=new Float32Array(x),g=0,b=-.5*u,A=0;A<l.length;++A){for(var v=l[A].data,k=0;k<v.length;k+=2)_[g++]=v[k]+b,_[g++]=v[k+1];b+=l[A].shape+.02}c=p[o]={data:_,shape:u}}return c}}).call(this)}).call(this,f("_process"))},{_process:5,"vectorize-text":311}],304:[function(f,M,T){var e=f("parse-unit");M.exports=t;var a=96;function n(h,s){var o=e(getComputedStyle(h).getPropertyValue(s));return o[0]*t(o[1],h)}function r(h,s){var o=document.createElement("div");o.style["font-size"]="128"+h,s.appendChild(o);var y=n(o,"font-size")/128;return s.removeChild(o),y}function t(h,s){switch(s=s||document.body,h=(h||"px").trim().toLowerCase(),(s===window||s===document)&&(s=document.body),h){case"%":return s.clientHeight/100;case"ch":case"ex":return r(h,s);case"em":return n(s,"font-size");case"rem":return n(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return a;case"cm":return a/2.54;case"mm":return a/25.4;case"pt":return a/72;case"pc":return a/6}return 1}},{"parse-unit":265}],305:[function(f,M,T){M.exports=m;var e=f("filtered-vector"),a=f("gl-mat4/invert"),n=f("gl-mat4/rotate"),r=f("gl-vec3/cross"),t=f("gl-vec3/normalize"),h=f("gl-vec3/dot");function s(l,x,u){return Math.sqrt(Math.pow(l,2)+Math.pow(x,2)+Math.pow(u,2))}function o(l){return Math.min(1,Math.max(-1,l))}function y(l){var x=Math.abs(l[0]),u=Math.abs(l[1]),A=Math.abs(l[2]),_=[0,0,0];x>Math.max(u,A)?_[2]=1:u>Math.max(x,A)?_[0]=1:_[1]=1;for(var g=0,b=0,v=0;v<3;++v)g+=l[v]*l[v],b+=_[v]*l[v];for(var v=0;v<3;++v)_[v]-=b/g*l[v];return t(_,_),_}function d(l,x,u,A,_,g,b,v){this.center=e(u),this.up=e(A),this.right=e(_),this.radius=e([g]),this.angle=e([b,v]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(l,x),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var k=0;k<16;++k)this.computedMatrix[k]=.5;this.recalcMatrix(0)}var p=d.prototype;p.setDistanceLimits=function(l,x){l>0?l=Math.log(l):l=-1/0,x>0?x=Math.log(x):x=1/0,x=Math.max(x,l),this.radius.bounds[0][0]=l,this.radius.bounds[1][0]=x},p.getDistanceLimits=function(l){var x=this.radius.bounds[0];return l?(l[0]=Math.exp(x[0][0]),l[1]=Math.exp(x[1][0]),l):[Math.exp(x[0][0]),Math.exp(x[1][0])]},p.recalcMatrix=function(l){this.center.curve(l),this.up.curve(l),this.right.curve(l),this.radius.curve(l),this.angle.curve(l);for(var x=this.computedUp,u=this.computedRight,A=0,_=0,g=0;g<3;++g)_+=x[g]*u[g],A+=x[g]*x[g];for(var b=Math.sqrt(A),v=0,g=0;g<3;++g)u[g]-=x[g]*_/A,v+=u[g]*u[g],x[g]/=b;for(var k=Math.sqrt(v),g=0;g<3;++g)u[g]/=k;var S=this.computedToward;r(S,x,u),t(S,S);for(var E=Math.exp(this.computedRadius[0]),C=this.computedAngle[0],F=this.computedAngle[1],I=Math.cos(C),D=Math.sin(C),R=Math.cos(F),O=Math.sin(F),z=this.computedCenter,B=I*R,G=D*R,Q=O,X=-I*O,j=-D*O,re=R,ue=this.computedEye,K=this.computedMatrix,g=0;g<3;++g){var te=B*u[g]+G*S[g]+Q*x[g];K[4*g+1]=X*u[g]+j*S[g]+re*x[g],K[4*g+2]=te,K[4*g+3]=0}var Y=K[1],H=K[5],ee=K[9],ne=K[2],Z=K[6],q=K[10],ie=H*q-ee*Z,se=ee*ne-Y*q,ae=Y*Z-H*ne,oe=s(ie,se,ae);ie/=oe,se/=oe,ae/=oe,K[0]=ie,K[4]=se,K[8]=ae;for(var g=0;g<3;++g)ue[g]=z[g]+K[2+4*g]*E;for(var g=0;g<3;++g){for(var v=0,be=0;be<3;++be)v+=K[g+4*be]*ue[be];K[12+g]=-v}K[15]=1},p.getMatrix=function(l,x){this.recalcMatrix(l);var u=this.computedMatrix;if(x){for(var A=0;A<16;++A)x[A]=u[A];return x}return u};var c=[0,0,0];p.rotate=function(l,x,u,A){if(this.angle.move(l,x,u),A){this.recalcMatrix(l);var _=this.computedMatrix;c[0]=_[2],c[1]=_[6],c[2]=_[10];for(var g=this.computedUp,b=this.computedRight,v=this.computedToward,k=0;k<3;++k)_[4*k]=g[k],_[4*k+1]=b[k],_[4*k+2]=v[k];n(_,_,A,c);for(var k=0;k<3;++k)g[k]=_[4*k],b[k]=_[4*k+1];this.up.set(l,g[0],g[1],g[2]),this.right.set(l,b[0],b[1],b[2])}},p.pan=function(l,x,u,A){x=x||0,u=u||0,A=A||0,this.recalcMatrix(l);var _=this.computedMatrix;Math.exp(this.computedRadius[0]);var g=_[1],b=_[5],v=_[9],k=s(g,b,v);g/=k,b/=k,v/=k;var S=_[0],E=_[4],C=_[8],F=S*g+E*b+C*v;S-=g*F,E-=b*F,C-=v*F;var I=s(S,E,C);S/=I,E/=I,C/=I;var D=S*x+g*u,R=E*x+b*u,O=C*x+v*u;this.center.move(l,D,R,O);var z=Math.exp(this.computedRadius[0]);z=Math.max(1e-4,z+A),this.radius.set(l,Math.log(z))},p.translate=function(l,x,u,A){this.center.move(l,x||0,u||0,A||0)},p.setMatrix=function(l,x,u,A){var _=1;typeof u=="number"&&(_=u|0),(_<0||_>3)&&(_=1);var g=(_+2)%3;x||(this.recalcMatrix(l),x=this.computedMatrix);var b=x[_],v=x[_+4],k=x[_+8];if(A){var E=Math.abs(b),C=Math.abs(v),F=Math.abs(k),I=Math.max(E,C,F);E===I?(b=b<0?-1:1,v=k=0):F===I?(k=k<0?-1:1,b=v=0):(v=v<0?-1:1,b=k=0)}else{var S=s(b,v,k);b/=S,v/=S,k/=S}var D=x[g],R=x[g+4],O=x[g+8],z=D*b+R*v+O*k;D-=b*z,R-=v*z,O-=k*z;var B=s(D,R,O);D/=B,R/=B,O/=B;var G=v*O-k*R,Q=k*D-b*O,X=b*R-v*D,j=s(G,Q,X);G/=j,Q/=j,X/=j,this.center.jump(l,ge,me,Se),this.radius.idle(l),this.up.jump(l,b,v,k),this.right.jump(l,D,R,O);var re,ue;if(_===2){var K=x[1],te=x[5],Y=x[9],H=K*D+te*R+Y*O,ee=K*G+te*Q+Y*X;ie<0?re=-Math.PI/2:re=Math.PI/2,ue=Math.atan2(ee,H)}else{var ne=x[2],Z=x[6],q=x[10],ie=ne*b+Z*v+q*k,se=ne*D+Z*R+q*O,ae=ne*G+Z*Q+q*X;re=Math.asin(o(ie)),ue=Math.atan2(ae,se)}this.angle.jump(l,ue,re),this.recalcMatrix(l);var oe=x[2],be=x[6],ce=x[10],de=this.computedMatrix;a(de,x);var ye=de[15],ge=de[12]/ye,me=de[13]/ye,Se=de[14]/ye,Le=Math.exp(this.computedRadius[0]);this.center.jump(l,ge-oe*Le,me-be*Le,Se-ce*Le)},p.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},p.idle=function(l){this.center.idle(l),this.up.idle(l),this.right.idle(l),this.radius.idle(l),this.angle.idle(l)},p.flush=function(l){this.center.flush(l),this.up.flush(l),this.right.flush(l),this.radius.flush(l),this.angle.flush(l)},p.setDistance=function(l,x){x>0&&this.radius.set(l,Math.log(x))},p.lookAt=function(l,x,u,A){this.recalcMatrix(l),x=x||this.computedEye,u=u||this.computedCenter,A=A||this.computedUp;var _=A[0],g=A[1],b=A[2],v=s(_,g,b);if(!(v<1e-6)){_/=v,g/=v,b/=v;var k=x[0]-u[0],S=x[1]-u[1],E=x[2]-u[2],C=s(k,S,E);if(!(C<1e-6)){k/=C,S/=C,E/=C;var F=this.computedRight,I=F[0],D=F[1],R=F[2],O=_*I+g*D+b*R;I-=O*_,D-=O*g,R-=O*b;var z=s(I,D,R);if(!(z<.01&&(I=g*E-b*S,D=b*k-_*E,R=_*S-g*k,z=s(I,D,R),z<1e-6))){I/=z,D/=z,R/=z,this.up.set(l,_,g,b),this.right.set(l,I,D,R),this.center.set(l,u[0],u[1],u[2]),this.radius.set(l,Math.log(C));var B=g*R-b*D,G=b*I-_*R,Q=_*D-g*I,X=s(B,G,Q);B/=X,G/=X,Q/=X;var j=_*k+g*S+b*E,re=I*k+D*S+R*E,ue=B*k+G*S+Q*E,K=Math.asin(o(j)),te=Math.atan2(ue,re),Y=this.angle._state,H=Y[Y.length-1],ee=Y[Y.length-2];H=H%(2*Math.PI);var ne=Math.abs(H+2*Math.PI-te),Z=Math.abs(H-te),q=Math.abs(H-2*Math.PI-te);ne<Z&&(H+=2*Math.PI),q<Z&&(H-=2*Math.PI),this.angle.jump(this.angle.lastT(),H,ee),this.angle.set(l,te,K)}}}};function m(l){l=l||{};var x=l.center||[0,0,0],u=l.up||[0,1,0],A=l.right||y(u),_=l.radius||1,g=l.theta||0,b=l.phi||0;if(x=[].slice.call(x,0,3),u=[].slice.call(u,0,3),t(u,u),A=[].slice.call(A,0,3),t(A,A),"eye"in l){var v=l.eye,k=[v[0]-x[0],v[1]-x[1],v[2]-x[2]];r(A,k,u),s(A[0],A[1],A[2])<1e-6?A=y(u):t(A,A),_=s(k[0],k[1],k[2]);var S=h(u,k)/_,E=h(A,k)/_;b=Math.acos(S),g=Math.acos(E)}return _=Math.log(_),new d(l.zoomMin,l.zoomMax,x,u,A,_,g,b)}},{"filtered-vector":68,"gl-mat4/invert":98,"gl-mat4/rotate":103,"gl-vec3/cross":157,"gl-vec3/dot":162,"gl-vec3/normalize":179}],306:[function(f,M,T){M.exports=a;var e=+(Math.pow(2,27)+1);function a(n,r,t){var h=n*r,s=e*n,o=s-n,y=s-o,d=n-y,p=e*r,c=p-r,m=p-c,l=r-m,x=h-y*m,u=x-d*m,A=u-y*l,_=d*l-A;return t?(t[0]=_,t[1]=h,t):[_,h]}},{}],307:[function(f,M,T){M.exports=e;function e(a,n,r){var t=a+n,h=t-a,s=t-h,o=n-h,y=a-s;return r?(r[0]=y+o,r[1]=t,r):[y+o,t]}},{}],308:[function(f,M,T){(function(e){(function(){var a=f("bit-twiddle"),n=f("dup"),r=f("buffer").Buffer;e.__TYPEDARRAY_POOL||(e.__TYPEDARRAY_POOL={UINT8:n([32,0]),UINT16:n([32,0]),UINT32:n([32,0]),BIGUINT64:n([32,0]),INT8:n([32,0]),INT16:n([32,0]),INT32:n([32,0]),BIGINT64:n([32,0]),FLOAT:n([32,0]),DOUBLE:n([32,0]),DATA:n([32,0]),UINT8C:n([32,0]),BUFFER:n([32,0])});var t=typeof Uint8ClampedArray<"u",h=typeof BigUint64Array<"u",s=typeof BigInt64Array<"u",o=e.__TYPEDARRAY_POOL;o.UINT8C||(o.UINT8C=n([32,0])),o.BIGUINT64||(o.BIGUINT64=n([32,0])),o.BIGINT64||(o.BIGINT64=n([32,0])),o.BUFFER||(o.BUFFER=n([32,0]));var y=o.DATA,d=o.BUFFER;T.free=function(D){if(r.isBuffer(D))d[a.log2(D.length)].push(D);else{if(Object.prototype.toString.call(D)!=="[object ArrayBuffer]"&&(D=D.buffer),!D)return;var R=D.length||D.byteLength,O=a.log2(R)|0;y[O].push(D)}};function p(I){if(!!I){var D=I.length||I.byteLength,R=a.log2(D);y[R].push(I)}}function c(I){p(I.buffer)}T.freeUint8=T.freeUint16=T.freeUint32=T.freeBigUint64=T.freeInt8=T.freeInt16=T.freeInt32=T.freeBigInt64=T.freeFloat32=T.freeFloat=T.freeFloat64=T.freeDouble=T.freeUint8Clamped=T.freeDataView=c,T.freeArrayBuffer=p,T.freeBuffer=function(D){d[a.log2(D.length)].push(D)},T.malloc=function(D,R){if(R===void 0||R==="arraybuffer")return m(D);switch(R){case"uint8":return l(D);case"uint16":return x(D);case"uint32":return u(D);case"int8":return A(D);case"int16":return _(D);case"int32":return g(D);case"float":case"float32":return b(D);case"double":case"float64":return v(D);case"uint8_clamped":return k(D);case"bigint64":return E(D);case"biguint64":return S(D);case"buffer":return F(D);case"data":case"dataview":return C(D);default:return null}return null};function m(D){var D=a.nextPow2(D),R=a.log2(D),O=y[R];return O.length>0?O.pop():new ArrayBuffer(D)}T.mallocArrayBuffer=m;function l(I){return new Uint8Array(m(I),0,I)}T.mallocUint8=l;function x(I){return new Uint16Array(m(2*I),0,I)}T.mallocUint16=x;function u(I){return new Uint32Array(m(4*I),0,I)}T.mallocUint32=u;function A(I){return new Int8Array(m(I),0,I)}T.mallocInt8=A;function _(I){return new Int16Array(m(2*I),0,I)}T.mallocInt16=_;function g(I){return new Int32Array(m(4*I),0,I)}T.mallocInt32=g;function b(I){return new Float32Array(m(4*I),0,I)}T.mallocFloat32=T.mallocFloat=b;function v(I){return new Float64Array(m(8*I),0,I)}T.mallocFloat64=T.mallocDouble=v;function k(I){return t?new Uint8ClampedArray(m(I),0,I):l(I)}T.mallocUint8Clamped=k;function S(I){return h?new BigUint64Array(m(8*I),0,I):null}T.mallocBigUint64=S;function E(I){return s?new BigInt64Array(m(8*I),0,I):null}T.mallocBigInt64=E;function C(I){return new DataView(m(I),0,I)}T.mallocDataView=C;function F(I){I=a.nextPow2(I);var D=a.log2(I),R=d[D];return R.length>0?R.pop():new r(I)}T.mallocBuffer=F,T.clearCache=function(){for(var D=0;D<32;++D)o.UINT8[D].length=0,o.UINT16[D].length=0,o.UINT32[D].length=0,o.INT8[D].length=0,o.INT16[D].length=0,o.INT32[D].length=0,o.FLOAT[D].length=0,o.DOUBLE[D].length=0,o.BIGUINT64[D].length=0,o.BIGINT64[D].length=0,o.UINT8C[D].length=0,y[D].length=0,d[D].length=0}}).call(this)}).call(this,typeof w<"u"?w:typeof self<"u"?self:typeof window<"u"?window:{})},{"bit-twiddle":32,buffer:3,dup:65}],309:[function(f,M,T){M.exports=e;function e(n){this.roots=new Array(n),this.ranks=new Array(n);for(var r=0;r<n;++r)this.roots[r]=r,this.ranks[r]=0}var a=e.prototype;Object.defineProperty(a,"length",{get:function(){return this.roots.length}}),a.makeSet=function(){var n=this.roots.length;return this.roots.push(n),this.ranks.push(0),n},a.find=function(n){for(var r=n,t=this.roots;t[n]!==n;)n=t[n];for(;t[r]!==n;){var h=t[r];t[r]=n,r=h}return n},a.link=function(n,r){var t=this.find(n),h=this.find(r);if(t!==h){var s=this.ranks,o=this.roots,y=s[t],d=s[h];y<d?o[t]=h:d<y?o[h]=t:(o[h]=t,++s[t])}}},{}],310:[function(f,M,T){function e(r,t){for(var h=1,s=r.length,o=r[0],y=r[0],d=1;d<s;++d)if(y=o,o=r[d],t(o,y)){if(d===h){h++;continue}r[h++]=o}return r.length=h,r}function a(r){for(var t=1,h=r.length,s=r[0],o=r[0],y=1;y<h;++y,o=s)if(o=s,s=r[y],s!==o){if(y===t){t++;continue}r[t++]=s}return r.length=t,r}function n(r,t,h){return r.length===0?r:t?(h||r.sort(t),e(r,t)):(h||r.sort(),a(r))}M.exports=n},{}],311:[function(f,M,T){M.exports=r;var e=f("./lib/vtext"),a=null,n=null;typeof document<"u"&&(a=document.createElement("canvas"),a.width=8192,a.height=1024,n=a.getContext("2d"));function r(t,h){return(typeof h!="object"||h===null)&&(h={}),e(t,h.canvas||a,h.context||n,h)}},{"./lib/vtext":312}],312:[function(f,M,T){M.exports=S,M.exports.processPixels=k;var e=f("surface-nets"),a=f("ndarray"),n=f("simplify-planar-graph"),r=f("clean-pslg"),t=f("cdt2d"),h=f("planar-graph-to-polyline"),s="b",o="b|",y="i",d="i|",p="sup",c="+",m="+1",l="sub",x="-",u="-1";function A(E,C,F,I){for(var D="<"+E+">",R="</"+E+">",O=D.length,z=R.length,B=C[0]===c||C[0]===x,G=0,Q=-z;G>-1&&(G=F.indexOf(D,G),!(G===-1||(Q=F.indexOf(R,G+O),Q===-1)||Q<=G));){for(var X=G;X<Q+z;++X)if(X<G+O||X>=Q)I[X]=null,F=F.substr(0,X)+" "+F.substr(X+1);else if(I[X]!==null){var j=I[X].indexOf(C[0]);j===-1?I[X]+=C:B&&(I[X]=I[X].substr(0,j+1)+(1+parseInt(I[X][j+1]))+I[X].substr(j+2))}var re=G+O,ue=F.substr(re,Q-re),K=ue.indexOf(D);K!==-1?G=K:G=Q+z}return I}function _(E,C,F){for(var I=C.textAlign||"start",D=C.textBaseline||"alphabetic",R=[1<<30,1<<30],O=[0,0],z=E.length,B=0;B<z;++B)for(var G=E[B],Q=0;Q<2;++Q)R[Q]=Math.min(R[Q],G[Q])|0,O[Q]=Math.max(O[Q],G[Q])|0;var X=0;switch(I){case"center":X=-.5*(R[0]+O[0]);break;case"right":case"end":X=-O[0];break;case"left":case"start":X=-R[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+I+"'")}var j=0;switch(D){case"hanging":case"top":j=-R[1];break;case"middle":j=-.5*(R[1]+O[1]);break;case"alphabetic":case"ideographic":j=-3*F;break;case"bottom":j=-O[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+D+"'")}var re=1/F;return"lineHeight"in C?re*=+C.lineHeight:"width"in C?re=C.width/(O[0]-R[0]):"height"in C&&(re=C.height/(O[1]-R[1])),E.map(function(ue){return[re*(ue[0]+X),re*(ue[1]+j)]})}function g(E,C,F,I,D,R){F=F.replace(/\n/g,""),R.breaklines===!0?F=F.replace(/\<br\>/g,`
`):F=F.replace(/\<br\>/g," ");var O="",z=[];for(H=0;H<F.length;++H)z[H]=O;R.bolds===!0&&(z=A(s,o,F,z)),R.italics===!0&&(z=A(y,d,F,z)),R.superscripts===!0&&(z=A(p,m,F,z)),R.subscripts===!0&&(z=A(l,u,F,z));var B=[],G="";for(H=0;H<F.length;++H)z[H]!==null&&(G+=F[H],B.push(z[H]));var Q=G.split(`
`),X=Q.length,j=Math.round(D*I),re=I,ue=I*2,K=0,te=X*j+ue;E.height<te&&(E.height=te),C.fillStyle="#000",C.fillRect(0,0,E.width,E.height),C.fillStyle="#fff";var Y,H,ee,ne,Z,q=0,ie="";function se(){if(ie!==""){var Se=C.measureText(ie).width;C.fillText(ie,re+ee,ue+ne),ee+=Se}}function ae(){return""+Math.round(Z)+"px "}function oe(Se,Le){var Oe=""+C.font;if(R.subscripts===!0){var we=Se.indexOf(x),Ce=Le.indexOf(x),Ke=we>-1?parseInt(Se[1+we]):0,Ye=Ce>-1?parseInt(Le[1+Ce]):0;Ke!==Ye&&(Oe=Oe.replace(ae(),"?px "),Z*=Math.pow(.75,Ye-Ke),Oe=Oe.replace("?px ",ae())),ne+=.25*j*(Ye-Ke)}if(R.superscripts===!0){var Fe=Se.indexOf(c),Re=Le.indexOf(c),je=Fe>-1?parseInt(Se[1+Fe]):0,xt=Re>-1?parseInt(Le[1+Re]):0;je!==xt&&(Oe=Oe.replace(ae(),"?px "),Z*=Math.pow(.75,xt-je),Oe=Oe.replace("?px ",ae())),ne-=.25*j*(xt-je)}if(R.bolds===!0){var Nt=Se.indexOf(o)>-1,tr=Le.indexOf(o)>-1;!Nt&&tr&&(Ht?Oe=Oe.replace("italic ","italic bold "):Oe="bold "+Oe),Nt&&!tr&&(Oe=Oe.replace("bold ",""))}if(R.italics===!0){var Ht=Se.indexOf(d)>-1,Pt=Le.indexOf(d)>-1;!Ht&&Pt&&(Oe="italic "+Oe),Ht&&!Pt&&(Oe=Oe.replace("italic ",""))}C.font=Oe}for(Y=0;Y<X;++Y){var be=Q[Y]+`
`;for(ee=0,ne=Y*j,Z=I,ie="",H=0;H<be.length;++H){var ce=H+q<B.length?B[H+q]:B[B.length-1];O===ce?ie+=be[H]:(se(),ie=be[H],ce!==void 0&&(oe(O,ce),O=ce))}se(),q+=be.length;var de=Math.round(ee+2*re)|0;K<de&&(K=de)}var ye=K,ge=ue+j*X,me=a(C.getImageData(0,0,ye,ge).data,[ge,ye,4]);return me.pick(-1,-1,0).transpose(1,0)}function b(E,C){var F=e(E,128);return C?n(F.cells,F.positions,.25):{edges:F.cells,positions:F.positions}}function v(E,C,F,I){var D=b(E,I),R=_(D.positions,C,F),O=D.edges,z=C.orientation==="ccw";if(r(R,O),C.polygons||C.polygon||C.polyline){for(var B=h(O,R),G=new Array(B.length),Q=0;Q<B.length;++Q){for(var X=B[Q],j=new Array(X.length),re=0;re<X.length;++re){for(var ue=X[re],K=new Array(ue.length),te=0;te<ue.length;++te)K[te]=R[ue[te]].slice();z&&K.reverse(),j[re]=K}G[Q]=j}return G}else return C.triangles||C.triangulate||C.triangle?{cells:t(R,O,{delaunay:!1,exterior:!1,interior:!0}),positions:R}:{edges:O,positions:R}}function k(E,C,F){try{return v(E,C,F,!0)}catch{}try{return v(E,C,F,!1)}catch{}return C.polygons||C.polyline||C.polygon?[]:C.triangles||C.triangulate||C.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}function S(E,C,F,I){var D=64,R=1.25,O={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};I&&(I.size&&I.size>0&&(D=I.size),I.lineSpacing&&I.lineSpacing>0&&(R=I.lineSpacing),I.styletags&&I.styletags.breaklines&&(O.breaklines=!!I.styletags.breaklines),I.styletags&&I.styletags.bolds&&(O.bolds=!!I.styletags.bolds),I.styletags&&I.styletags.italics&&(O.italics=!!I.styletags.italics),I.styletags&&I.styletags.subscripts&&(O.subscripts=!!I.styletags.subscripts),I.styletags&&I.styletags.superscripts&&(O.superscripts=!!I.styletags.superscripts)),F.font=[I.fontStyle,I.fontVariant,I.fontWeight,D+"px",I.font].filter(function(B){return B}).join(" "),F.textAlign="start",F.textBaseline="alphabetic",F.direction="ltr";var z=g(C,F,E,D,R,O);return k(z,I,D)}},{cdt2d:42,"clean-pslg":50,ndarray:259,"planar-graph-to-polyline":268,"simplify-planar-graph":297,"surface-nets":302}],313:[function(f,M,T){(function(){if(typeof ses<"u"&&ses.ok&&!ses.ok())return;function a(k){k.permitHostObjects___&&k.permitHostObjects___(a)}typeof ses<"u"&&(ses.weakMapPermitHostObjects=a);var n=!1;if(typeof WeakMap=="function"){var r=WeakMap;if(!(typeof navigator<"u"&&/Firefox/.test(navigator.userAgent))){var t=new r,h=Object.freeze({});if(t.set(h,1),t.get(h)!==1)n=!0;else{M.exports=WeakMap;return}}}var s=Object.getOwnPropertyNames,o=Object.defineProperty,y=Object.isExtensible,d="weakmap:",p=d+"ident:"+Math.random()+"___";if(typeof crypto<"u"&&typeof crypto.getRandomValues=="function"&&typeof ArrayBuffer=="function"&&typeof Uint8Array=="function"){var c=new ArrayBuffer(25),m=new Uint8Array(c);crypto.getRandomValues(m),p=d+"rand:"+Array.prototype.map.call(m,function(k){return(k%36).toString(36)}).join("")+"___"}function l(k){return!(k.substr(0,d.length)==d&&k.substr(k.length-3)==="___")}if(o(Object,"getOwnPropertyNames",{value:function(S){return s(S).filter(l)}}),"getPropertyNames"in Object){var x=Object.getPropertyNames;o(Object,"getPropertyNames",{value:function(S){return x(S).filter(l)}})}function u(k){if(k!==Object(k))throw new TypeError("Not an object: "+k);var S=k[p];if(S&&S.key===k)return S;if(!!y(k)){S={key:k};try{return o(k,p,{value:S,writable:!1,enumerable:!1,configurable:!1}),S}catch{return}}}(function(){var k=Object.freeze;o(Object,"freeze",{value:function(F){return u(F),k(F)}});var S=Object.seal;o(Object,"seal",{value:function(F){return u(F),S(F)}});var E=Object.preventExtensions;o(Object,"preventExtensions",{value:function(F){return u(F),E(F)}})})();function A(k){return k.prototype=null,Object.freeze(k)}var _=!1;function g(){!_&&typeof console<"u"&&(_=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}var b=0,v=function(){this instanceof v||g();var k=[],S=[],E=b++;function C(R,O){var z,B=u(R);return B?E in B?B[E]:O:(z=k.indexOf(R),z>=0?S[z]:O)}function F(R){var O=u(R);return O?E in O:k.indexOf(R)>=0}function I(R,O){var z,B=u(R);return B?B[E]=O:(z=k.indexOf(R),z>=0?S[z]=O:(z=k.length,S[z]=O,k[z]=R)),this}function D(R){var O=u(R),z,B;return O?E in O&&delete O[E]:(z=k.indexOf(R),z<0?!1:(B=k.length-1,k[z]=void 0,S[z]=S[B],k[z]=k[B],k.length=B,S.length=B,!0))}return Object.create(v.prototype,{get___:{value:A(C)},has___:{value:A(F)},set___:{value:A(I)},delete___:{value:A(D)}})};v.prototype=Object.create(Object.prototype,{get:{value:function(S,E){return this.get___(S,E)},writable:!0,configurable:!0},has:{value:function(S){return this.has___(S)},writable:!0,configurable:!0},set:{value:function(S,E){return this.set___(S,E)},writable:!0,configurable:!0},delete:{value:function(S){return this.delete___(S)},writable:!0,configurable:!0}}),typeof r=="function"?function(){n&&typeof Proxy<"u"&&(Proxy=void 0);function k(){this instanceof v||g();var S=new r,E=void 0,C=!1;function F(O,z){return E?S.has(O)?S.get(O):E.get___(O,z):S.get(O,z)}function I(O){return S.has(O)||(E?E.has___(O):!1)}var D;n?D=function(O,z){return S.set(O,z),S.has(O)||(E||(E=new v),E.set(O,z)),this}:D=function(O,z){if(C)try{S.set(O,z)}catch{E||(E=new v),E.set___(O,z)}else S.set(O,z);return this};function R(O){var z=!!S.delete(O);return E&&E.delete___(O)||z}return Object.create(v.prototype,{get___:{value:A(F)},has___:{value:A(I)},set___:{value:A(D)},delete___:{value:A(R)},permitHostObjects___:{value:A(function(O){if(O===a)C=!0;else throw new Error("bogus call to permitHostObjects___")})}})}k.prototype=v.prototype,M.exports=k,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():(typeof Proxy<"u"&&(Proxy=void 0),M.exports=v)})()},{}],314:[function(f,M,T){var e=f("./hidden-store.js");M.exports=a;function a(){var n={};return function(r){if((typeof r!="object"||r===null)&&typeof r!="function")throw new Error("Weakmap-shim: Key must be object");var t=r.valueOf(n);return t&&t.identity===n?t:e(r,n)}}},{"./hidden-store.js":315}],315:[function(f,M,T){M.exports=e;function e(a,n){var r={identity:n},t=a.valueOf;return Object.defineProperty(a,"valueOf",{value:function(h){return h!==n?t.apply(this,arguments):r},writable:!0}),r}},{}],316:[function(f,M,T){var e=f("./create-store.js");M.exports=a;function a(){var n=e();return{get:function(r,t){var h=n(r);return h.hasOwnProperty("value")?h.value:t},set:function(r,t){return n(r).value=t,this},has:function(r){return"value"in n(r)},delete:function(r){return delete n(r).value}}}},{"./create-store.js":314}],317:[function(f,M,T){function e(){return function(s,o,y,d,p,c){var m=s[0],l=y[0],x=[0],u=l;d|=0;var A=0,_=l;for(A=0;A<m;++A){{var g=o[d]-c,b=o[d+u]-c;g>=0!=b>=0&&p.push(x[0]+.5+.5*(g+b)/(g-b))}d+=_,++x[0]}}}function a(){return e()}var n=a;function r(s){var o={};return function(d,p,c){var m=d.dtype,l=d.order,x=[m,l.join()].join(),u=o[x];return u||(o[x]=u=s([m,l])),u(d.shape.slice(0),d.data,d.stride,d.offset|0,p,c)}}function t(s){return r(n.bind(void 0,s))}function h(s){return t({funcName:s.funcName})}M.exports=h({funcName:"zeroCrossings"})},{}],318:[function(f,M,T){M.exports=a;var e=f("./lib/zc-core");function a(n,r){var t=[];return r=+r||0,e(n.hi(n.shape[0]-1),t,r),t}},{"./lib/zc-core":317}]},{},[6])(6)})}).call(this)}).call(this,typeof Je<"u"?Je:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[27])(27)})}).call(this,Ae("c8ba"))},6374:function(Xe,rt,Ae){var Je=Ae("da84"),He=Object.defineProperty;Xe.exports=function(i,U){try{He(Je,i,{value:U,configurable:!0,writable:!0})}catch{Je[i]=U}return U}},6547:function(Xe,rt,Ae){var Je=Ae("e330"),He=Ae("5926"),i=Ae("577e"),U=Ae("1d80"),V=Je("".charAt),w=Je("".charCodeAt),f=Je("".slice),M=function(T){return function(e,a){var n=i(U(e)),r=He(a),t=n.length,h,s;return r<0||r>=t?T?"":void 0:(h=w(n,r),h<55296||h>56319||r+1===t||(s=w(n,r+1))<56320||s>57343?T?V(n,r):h:T?f(n,r,r+2):(h-55296<<10)+(s-56320)+65536)}};Xe.exports={codeAt:M(!1),charAt:M(!0)}},"65f0":function(Xe,rt,Ae){var Je=Ae("0b42");Xe.exports=function(He,i){return new(Je(He))(i===0?0:i)}},"68ee":function(Xe,rt,Ae){var Je=Ae("e330"),He=Ae("d039"),i=Ae("1626"),U=Ae("f5df"),V=Ae("d066"),w=Ae("8925"),f=function(){},M=[],T=V("Reflect","construct"),e=/^\s*(?:class|function)\b/,a=Je(e.exec),n=!e.exec(f),r=function(s){if(!i(s))return!1;try{return T(f,M,s),!0}catch{return!1}},t=function(s){if(!i(s))return!1;switch(U(s)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return n||!!a(e,w(s))}catch{return!0}};t.sham=!0,Xe.exports=!T||He(function(){var h;return r(r.call)||!r(Object)||!r(function(){h=!0})||h})?t:r},"69f3":function(Xe,rt,Ae){var Je=Ae("cdce"),He=Ae("da84"),i=Ae("861d"),U=Ae("9112"),V=Ae("1a2d"),w=Ae("c6cd"),f=Ae("f772"),M=Ae("d012"),T="Object already initialized",e=He.TypeError,a=He.WeakMap,n,r,t,h=function(d){return t(d)?r(d):n(d,{})},s=function(d){return function(p){var c;if(!i(p)||(c=r(p)).type!==d)throw e("Incompatible receiver, "+d+" required");return c}};if(Je||w.state){var o=w.state||(w.state=new a);o.get=o.get,o.has=o.has,o.set=o.set,n=function(d,p){if(o.has(d))throw e(T);return p.facade=d,o.set(d,p),p},r=function(d){return o.get(d)||{}},t=function(d){return o.has(d)}}else{var y=f("state");M[y]=!0,n=function(d,p){if(V(d,y))throw e(T);return p.facade=d,U(d,y,p),p},r=function(d){return V(d,y)?d[y]:{}},t=function(d){return V(d,y)}}Xe.exports={set:n,get:r,has:t,enforce:h,getterFor:s}},7234:function(Xe,rt){Xe.exports=function(Ae){return Ae==null}},7418:function(Xe,rt){rt.f=Object.getOwnPropertySymbols},7839:function(Xe,rt){Xe.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"785a":function(Xe,rt,Ae){var Je=Ae("cc12"),He=Je("span").classList,i=He&&He.constructor&&He.constructor.prototype;Xe.exports=i===Object.prototype?void 0:i},"7b0b":function(Xe,rt,Ae){var Je=Ae("1d80"),He=Object;Xe.exports=function(i){return He(Je(i))}},"7c73":function(Xe,rt,Ae){var Je=Ae("825a"),He=Ae("37e8"),i=Ae("7839"),U=Ae("d012"),V=Ae("1be4"),w=Ae("cc12"),f=Ae("f772"),M=">",T="<",e="prototype",a="script",n=f("IE_PROTO"),r=function(){},t=function(d){return T+a+M+d+T+"/"+a+M},h=function(d){d.write(t("")),d.close();var p=d.parentWindow.Object;return d=null,p},s=function(){var d=w("iframe"),p="java"+a+":",c;return d.style.display="none",V.appendChild(d),d.src=String(p),c=d.contentWindow.document,c.open(),c.write(t("document.F=Object")),c.close(),c.F},o,y=function(){try{o=new ActiveXObject("htmlfile")}catch{}y=typeof document<"u"?document.domain&&o?h(o):s():h(o);for(var d=i.length;d--;)delete y[e][i[d]];return y()};U[n]=!0,Xe.exports=Object.create||function(p,c){var m;return p!==null?(r[e]=Je(p),m=new r,r[e]=null,m[n]=p):m=y(),c===void 0?m:He.f(m,c)}},"7d7e":function(Xe,rt,Ae){var Je=Ae("40d5"),He=Function.prototype,i=He.call,U=Je&&He.bind.bind(i,i);Xe.exports=Je?U:function(V){return function(){return i.apply(V,arguments)}}},"825a":function(Xe,rt,Ae){var Je=Ae("861d"),He=String,i=TypeError;Xe.exports=function(U){if(Je(U))return U;throw i(He(U)+" is not an object")}},"83ab":function(Xe,rt,Ae){var Je=Ae("d039");Xe.exports=!Je(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},8418:function(Xe,rt,Ae){var Je=Ae("a04b"),He=Ae("9bf2"),i=Ae("5c6c");Xe.exports=function(U,V,w){var f=Je(V);f in U?He.f(U,f,i(0,w)):U[f]=w}},"861d":function(Xe,rt,Ae){var Je=Ae("1626"),He=Ae("8ea1"),i=He.all;Xe.exports=He.IS_HTMLDDA?function(U){return typeof U=="object"?U!==null:Je(U)||U===i}:function(U){return typeof U=="object"?U!==null:Je(U)}},8875:function(Xe,rt,Ae){var Je,He,i;(function(U,V){He=[],Je=V,i=typeof Je=="function"?Je.apply(rt,He):Je,i!==void 0&&(Xe.exports=i)})(typeof self<"u"?self:this,function(){function U(){var V=Object.getOwnPropertyDescriptor(document,"currentScript");if(!V&&"currentScript"in document&&document.currentScript||V&&V.get!==U&&document.currentScript)return document.currentScript;try{throw new Error}catch(o){var w=/.*at [^(]*\((.*):(.+):(.+)\)$/ig,f=/@([^@]*):(\d+):(\d+)\s*$/ig,M=w.exec(o.stack)||f.exec(o.stack),T=M&&M[1]||!1,e=M&&M[2]||!1,a=document.location.href.replace(document.location.hash,""),n,r,t,h=document.getElementsByTagName("script");T===a&&(n=document.documentElement.outerHTML,r=new RegExp("(?:[^\\n]+?\\n){0,"+(e-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),t=n.replace(r,"$1").trim());for(var s=0;s<h.length;s++)if(h[s].readyState==="interactive"||h[s].src===T||T===a&&h[s].innerHTML&&h[s].innerHTML.trim()===t)return h[s];return null}}return U})},8925:function(Xe,rt,Ae){var Je=Ae("e330"),He=Ae("1626"),i=Ae("c6cd"),U=Je(Function.toString);He(i.inspectSource)||(i.inspectSource=function(V){return U(V)}),Xe.exports=i.inspectSource},"8aa5":function(Xe,rt,Ae){var Je=Ae("6547").charAt;Xe.exports=function(He,i,U){return i+(U?Je(He,i).length:1)}},"8ea1":function(Xe,rt){var Ae=typeof document=="object"&&document.all,Je=typeof Ae>"u"&&Ae!==void 0;Xe.exports={all:Ae,IS_HTMLDDA:Je}},"90e3":function(Xe,rt,Ae){var Je=Ae("e330"),He=0,i=Math.random(),U=Je(1 .toString);Xe.exports=function(V){return"Symbol("+(V===void 0?"":V)+")_"+U(++He+i,36)}},9112:function(Xe,rt,Ae){var Je=Ae("83ab"),He=Ae("9bf2"),i=Ae("5c6c");Xe.exports=Je?function(U,V,w){return He.f(U,V,i(1,w))}:function(U,V,w){return U[V]=w,U}},9263:function(Xe,rt,Ae){var Je=Ae("c65b"),He=Ae("e330"),i=Ae("577e"),U=Ae("ad6d"),V=Ae("9f7f"),w=Ae("5692"),f=Ae("7c73"),M=Ae("69f3").get,T=Ae("fce3"),e=Ae("107c"),a=w("native-string-replace",String.prototype.replace),n=RegExp.prototype.exec,r=n,t=He("".charAt),h=He("".indexOf),s=He("".replace),o=He("".slice),y=function(){var m=/a/,l=/b*/g;return Je(n,m,"a"),Je(n,l,"a"),m.lastIndex!==0||l.lastIndex!==0}(),d=V.BROKEN_CARET,p=/()??/.exec("")[1]!==void 0,c=y||p||d||T||e;c&&(r=function(l){var x=this,u=M(x),A=i(l),_=u.raw,g,b,v,k,S,E,C;if(_)return _.lastIndex=x.lastIndex,g=Je(r,_,A),x.lastIndex=_.lastIndex,g;var F=u.groups,I=d&&x.sticky,D=Je(U,x),R=x.source,O=0,z=A;if(I&&(D=s(D,"y",""),h(D,"g")===-1&&(D+="g"),z=o(A,x.lastIndex),x.lastIndex>0&&(!x.multiline||x.multiline&&t(A,x.lastIndex-1)!==`
`)&&(R="(?: "+R+")",z=" "+z,O++),b=new RegExp("^(?:"+R+")",D)),p&&(b=new RegExp("^"+R+"$(?!\\s)",D)),y&&(v=x.lastIndex),k=Je(n,I?b:x,z),I?k?(k.input=o(k.input,O),k[0]=o(k[0],O),k.index=x.lastIndex,x.lastIndex+=k[0].length):x.lastIndex=0:y&&k&&(x.lastIndex=x.global?k.index+k[0].length:v),p&&k&&k.length>1&&Je(a,k[0],b,function(){for(S=1;S<arguments.length-2;S++)arguments[S]===void 0&&(k[S]=void 0)}),k&&F)for(k.groups=E=f(null),S=0;S<F.length;S++)C=F[S],E[C[0]]=k[C[1]];return k}),Xe.exports=r},"94ca":function(Xe,rt,Ae){var Je=Ae("d039"),He=Ae("1626"),i=/#|\.prototype\./,U=function(T,e){var a=w[V(T)];return a==M?!0:a==f?!1:He(e)?Je(e):!!e},V=U.normalize=function(T){return String(T).replace(i,".").toLowerCase()},w=U.data={},f=U.NATIVE="N",M=U.POLYFILL="P";Xe.exports=U},"99af":function(Xe,rt,Ae){var Je=Ae("23e7"),He=Ae("d039"),i=Ae("e8b5"),U=Ae("861d"),V=Ae("7b0b"),w=Ae("07fa"),f=Ae("3511"),M=Ae("8418"),T=Ae("65f0"),e=Ae("1dde"),a=Ae("b622"),n=Ae("2d00"),r=a("isConcatSpreadable"),t=n>=51||!He(function(){var y=[];return y[r]=!1,y.concat()[0]!==y}),h=e("concat"),s=function(y){if(!U(y))return!1;var d=y[r];return d!==void 0?!!d:i(y)},o=!t||!h;Je({target:"Array",proto:!0,arity:1,forced:o},{concat:function(d){var p=V(this),c=T(p,0),m=0,l,x,u,A,_;for(l=-1,u=arguments.length;l<u;l++)if(_=l===-1?p:arguments[l],s(_))for(A=w(_),f(m+A),x=0;x<A;x++,m++)x in _&&M(c,m,_[x]);else f(m+1),M(c,m++,_);return c.length=m,c}})},"9bf2":function(Xe,rt,Ae){var Je=Ae("83ab"),He=Ae("0cfb"),i=Ae("aed9"),U=Ae("825a"),V=Ae("a04b"),w=TypeError,f=Object.defineProperty,M=Object.getOwnPropertyDescriptor,T="enumerable",e="configurable",a="writable";rt.f=Je?i?function(r,t,h){if(U(r),t=V(t),U(h),typeof r=="function"&&t==="prototype"&&"value"in h&&a in h&&!h[a]){var s=M(r,t);s&&s[a]&&(r[t]=h.value,h={configurable:e in h?h[e]:s[e],enumerable:T in h?h[T]:s[T],writable:!1})}return f(r,t,h)}:f:function(r,t,h){if(U(r),t=V(t),U(h),He)try{return f(r,t,h)}catch{}if("get"in h||"set"in h)throw w("Accessors not supported");return"value"in h&&(r[t]=h.value),r}},"9f7f":function(Xe,rt,Ae){var Je=Ae("d039"),He=Ae("da84"),i=He.RegExp,U=Je(function(){var f=i("a","y");return f.lastIndex=2,f.exec("abcd")!=null}),V=U||Je(function(){return!i("a","y").sticky}),w=U||Je(function(){var f=i("^r","gy");return f.lastIndex=2,f.exec("str")!=null});Xe.exports={BROKEN_CARET:w,MISSED_STICKY:V,UNSUPPORTED_Y:U}},a04b:function(Xe,rt,Ae){var Je=Ae("c04e"),He=Ae("d9b5");Xe.exports=function(i){var U=Je(i,"string");return He(U)?U:U+""}},a4d3:function(Xe,rt,Ae){Ae("d9f5"),Ae("b4f8"),Ae("c513"),Ae("e9c4"),Ae("5a47")},a640:function(Xe,rt,Ae){var Je=Ae("d039");Xe.exports=function(He,i){var U=[][He];return!!U&&Je(function(){U.call(null,i||function(){return 1},1)})}},ac1f:function(Xe,rt,Ae){var Je=Ae("23e7"),He=Ae("9263");Je({target:"RegExp",proto:!0,forced:/./.exec!==He},{exec:He})},ad6d:function(Xe,rt,Ae){var Je=Ae("825a");Xe.exports=function(){var He=Je(this),i="";return He.hasIndices&&(i+="d"),He.global&&(i+="g"),He.ignoreCase&&(i+="i"),He.multiline&&(i+="m"),He.dotAll&&(i+="s"),He.unicode&&(i+="u"),He.unicodeSets&&(i+="v"),He.sticky&&(i+="y"),i}},aed9:function(Xe,rt,Ae){var Je=Ae("83ab"),He=Ae("d039");Xe.exports=Je&&He(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42})},b041:function(Xe,rt,Ae){var Je=Ae("00ee"),He=Ae("f5df");Xe.exports=Je?{}.toString:function(){return"[object "+He(this)+"]"}},b42e:function(Xe,rt){var Ae=Math.ceil,Je=Math.floor;Xe.exports=Math.trunc||function(i){var U=+i;return(U>0?Je:Ae)(U)}},b4f8:function(Xe,rt,Ae){var Je=Ae("23e7"),He=Ae("d066"),i=Ae("1a2d"),U=Ae("577e"),V=Ae("5692"),w=Ae("0b43"),f=V("string-to-symbol-registry"),M=V("symbol-to-string-registry");Je({target:"Symbol",stat:!0,forced:!w},{for:function(T){var e=U(T);if(i(f,e))return f[e];var a=He("Symbol")(e);return f[e]=a,M[a]=e,a}})},b622:function(Xe,rt,Ae){var Je=Ae("da84"),He=Ae("5692"),i=Ae("1a2d"),U=Ae("90e3"),V=Ae("04f8"),w=Ae("fdbf"),f=He("wks"),M=Je.Symbol,T=M&&M.for,e=w?M:M&&M.withoutSetter||U;Xe.exports=function(a){if(!i(f,a)||!(V||typeof f[a]=="string")){var n="Symbol."+a;V&&i(M,a)?f[a]=M[a]:w&&T?f[a]=T(n):f[a]=e(n)}return f[a]}},b64b:function(Xe,rt,Ae){var Je=Ae("23e7"),He=Ae("7b0b"),i=Ae("df75"),U=Ae("d039"),V=U(function(){i(1)});Je({target:"Object",stat:!0,forced:V},{keys:function(f){return i(He(f))}})},b727:function(Xe,rt,Ae){var Je=Ae("0366"),He=Ae("e330"),i=Ae("44ad"),U=Ae("7b0b"),V=Ae("07fa"),w=Ae("65f0"),f=He([].push),M=function(T){var e=T==1,a=T==2,n=T==3,r=T==4,t=T==6,h=T==7,s=T==5||t;return function(o,y,d,p){for(var c=U(o),m=i(c),l=Je(y,d),x=V(m),u=0,A=p||w,_=e?A(o,x):a||h?A(o,0):void 0,g,b;x>u;u++)if((s||u in m)&&(g=m[u],b=l(g,u,c),T))if(e)_[u]=b;else if(b)switch(T){case 3:return!0;case 5:return g;case 6:return u;case 2:f(_,g)}else switch(T){case 4:return!1;case 7:f(_,g)}return t?-1:n||r?r:_}};Xe.exports={forEach:M(0),map:M(1),filter:M(2),some:M(3),every:M(4),find:M(5),findIndex:M(6),filterReject:M(7)}},c04e:function(Xe,rt,Ae){var Je=Ae("c65b"),He=Ae("861d"),i=Ae("d9b5"),U=Ae("dc4a"),V=Ae("485a"),w=Ae("b622"),f=TypeError,M=w("toPrimitive");Xe.exports=function(T,e){if(!He(T)||i(T))return T;var a=U(T,M),n;if(a){if(e===void 0&&(e="default"),n=Je(a,T,e),!He(n)||i(n))return n;throw f("Can't convert object to primitive value")}return e===void 0&&(e="number"),V(T,e)}},c430:function(Xe,rt){Xe.exports=!1},c513:function(Xe,rt,Ae){var Je=Ae("23e7"),He=Ae("1a2d"),i=Ae("d9b5"),U=Ae("0d51"),V=Ae("5692"),w=Ae("0b43"),f=V("symbol-to-string-registry");Je({target:"Symbol",stat:!0,forced:!w},{keyFor:function(T){if(!i(T))throw TypeError(U(T)+" is not a symbol");if(He(f,T))return f[T]}})},c65b:function(Xe,rt,Ae){var Je=Ae("40d5"),He=Function.prototype.call;Xe.exports=Je?He.bind(He):function(){return He.apply(He,arguments)}},c6b6:function(Xe,rt,Ae){var Je=Ae("7d7e"),He=Je({}.toString),i=Je("".slice);Xe.exports=function(U){return i(He(U),8,-1)}},c6cd:function(Xe,rt,Ae){var Je=Ae("da84"),He=Ae("6374"),i="__core-js_shared__",U=Je[i]||He(i,{});Xe.exports=U},c8ba:function(Xe,rt){var Ae;Ae=function(){return this}();try{Ae=Ae||new Function("return this")()}catch{typeof window=="object"&&(Ae=window)}Xe.exports=Ae},ca84:function(Xe,rt,Ae){var Je=Ae("e330"),He=Ae("1a2d"),i=Ae("fc6a"),U=Ae("4d64").indexOf,V=Ae("d012"),w=Je([].push);Xe.exports=function(f,M){var T=i(f),e=0,a=[],n;for(n in T)!He(V,n)&&He(T,n)&&w(a,n);for(;M.length>e;)He(T,n=M[e++])&&(~U(a,n)||w(a,n));return a}},cb2d:function(Xe,rt,Ae){var Je=Ae("1626"),He=Ae("9bf2"),i=Ae("13d2"),U=Ae("6374");Xe.exports=function(V,w,f,M){M||(M={});var T=M.enumerable,e=M.name!==void 0?M.name:w;if(Je(f)&&i(f,e,M),M.global)T?V[w]=f:U(w,f);else{try{M.unsafe?V[w]&&(T=!0):delete V[w]}catch{}T?V[w]=f:He.f(V,w,{value:f,enumerable:!1,configurable:!M.nonConfigurable,writable:!M.nonWritable})}return V}},cc12:function(Xe,rt,Ae){var Je=Ae("da84"),He=Ae("861d"),i=Je.document,U=He(i)&&He(i.createElement);Xe.exports=function(V){return U?i.createElement(V):{}}},cca6:function(Xe,rt,Ae){var Je=Ae("23e7"),He=Ae("60da");Je({target:"Object",stat:!0,arity:2,forced:Object.assign!==He},{assign:He})},cdce:function(Xe,rt,Ae){var Je=Ae("da84"),He=Ae("1626"),i=Je.WeakMap;Xe.exports=He(i)&&/native code/.test(String(i))},d012:function(Xe,rt){Xe.exports={}},d039:function(Xe,rt){Xe.exports=function(Ae){try{return!!Ae()}catch{return!0}}},d066:function(Xe,rt,Ae){var Je=Ae("da84"),He=Ae("1626"),i=function(U){return He(U)?U:void 0};Xe.exports=function(U,V){return arguments.length<2?i(Je[U]):Je[U]&&Je[U][V]}},d1e7:function(Xe,rt,Ae){var Je={}.propertyIsEnumerable,He=Object.getOwnPropertyDescriptor,i=He&&!Je.call({1:2},1);rt.f=i?function(V){var w=He(this,V);return!!w&&w.enumerable}:Je},d3b7:function(Xe,rt,Ae){var Je=Ae("00ee"),He=Ae("cb2d"),i=Ae("b041");Je||He(Object.prototype,"toString",i,{unsafe:!0})},d44e:function(Xe,rt,Ae){var Je=Ae("9bf2").f,He=Ae("1a2d"),i=Ae("b622"),U=i("toStringTag");Xe.exports=function(V,w,f){V&&!f&&(V=V.prototype),V&&!He(V,U)&&Je(V,U,{configurable:!0,value:w})}},d58f:function(Xe,rt,Ae){var Je=Ae("59ed"),He=Ae("7b0b"),i=Ae("44ad"),U=Ae("07fa"),V=TypeError,w=function(f){return function(M,T,e,a){Je(T);var n=He(M),r=i(n),t=U(n),h=f?t-1:0,s=f?-1:1;if(e<2)for(;;){if(h in r){a=r[h],h+=s;break}if(h+=s,f?h<0:t<=h)throw V("Reduce of empty array with no initial value")}for(;f?h>=0:t>h;h+=s)h in r&&(a=T(a,r[h],h,n));return a}};Xe.exports={left:w(!1),right:w(!0)}},d784:function(Xe,rt,Ae){Ae("ac1f");var Je=Ae("e330"),He=Ae("cb2d"),i=Ae("9263"),U=Ae("d039"),V=Ae("b622"),w=Ae("9112"),f=V("species"),M=RegExp.prototype;Xe.exports=function(T,e,a,n){var r=V(T),t=!U(function(){var y={};return y[r]=function(){return 7},""[T](y)!=7}),h=t&&!U(function(){var y=!1,d=/a/;return T==="split"&&(d={},d.constructor={},d.constructor[f]=function(){return d},d.flags="",d[r]=/./[r]),d.exec=function(){return y=!0,null},d[r](""),!y});if(!t||!h||a){var s=Je(/./[r]),o=e(r,""[T],function(y,d,p,c,m){var l=Je(y),x=d.exec;return x===i||x===M.exec?t&&!m?{done:!0,value:s(d,p,c)}:{done:!0,value:l(p,d,c)}:{done:!1}});He(String.prototype,T,o[0]),He(M,r,o[1])}n&&w(M[r],"sham",!0)}},d81d:function(Xe,rt,Ae){var Je=Ae("23e7"),He=Ae("b727").map,i=Ae("1dde"),U=i("map");Je({target:"Array",proto:!0,forced:!U},{map:function(w){return He(this,w,arguments.length>1?arguments[1]:void 0)}})},d9b5:function(Xe,rt,Ae){var Je=Ae("d066"),He=Ae("1626"),i=Ae("3a9b"),U=Ae("fdbf"),V=Object;Xe.exports=U?function(w){return typeof w=="symbol"}:function(w){var f=Je("Symbol");return He(f)&&i(f.prototype,V(w))}},d9f5:function(Xe,rt,Ae){var Je=Ae("23e7"),He=Ae("da84"),i=Ae("c65b"),U=Ae("e330"),V=Ae("c430"),w=Ae("83ab"),f=Ae("04f8"),M=Ae("d039"),T=Ae("1a2d"),e=Ae("3a9b"),a=Ae("825a"),n=Ae("fc6a"),r=Ae("a04b"),t=Ae("577e"),h=Ae("5c6c"),s=Ae("7c73"),o=Ae("df75"),y=Ae("241c"),d=Ae("057f"),p=Ae("7418"),c=Ae("06cf"),m=Ae("9bf2"),l=Ae("37e8"),x=Ae("d1e7"),u=Ae("cb2d"),A=Ae("5692"),_=Ae("f772"),g=Ae("d012"),b=Ae("90e3"),v=Ae("b622"),k=Ae("e538"),S=Ae("e065"),E=Ae("57b9"),C=Ae("d44e"),F=Ae("69f3"),I=Ae("b727").forEach,D=_("hidden"),R="Symbol",O="prototype",z=F.set,B=F.getterFor(R),G=Object[O],Q=He.Symbol,X=Q&&Q[O],j=He.TypeError,re=He.QObject,ue=c.f,K=m.f,te=d.f,Y=x.f,H=U([].push),ee=A("symbols"),ne=A("op-symbols"),Z=A("wks"),q=!re||!re[O]||!re[O].findChild,ie=w&&M(function(){return s(K({},"a",{get:function(){return K(this,"a",{value:7}).a}})).a!=7})?function(me,Se,Le){var Oe=ue(G,Se);Oe&&delete G[Se],K(me,Se,Le),Oe&&me!==G&&K(G,Se,Oe)}:K,se=function(me,Se){var Le=ee[me]=s(X);return z(Le,{type:R,tag:me,description:Se}),w||(Le.description=Se),Le},ae=function(Se,Le,Oe){Se===G&&ae(ne,Le,Oe),a(Se);var we=r(Le);return a(Oe),T(ee,we)?(Oe.enumerable?(T(Se,D)&&Se[D][we]&&(Se[D][we]=!1),Oe=s(Oe,{enumerable:h(0,!1)})):(T(Se,D)||K(Se,D,h(1,{})),Se[D][we]=!0),ie(Se,we,Oe)):K(Se,we,Oe)},oe=function(Se,Le){a(Se);var Oe=n(Le),we=o(Oe).concat(ge(Oe));return I(we,function(Ce){(!w||i(ce,Oe,Ce))&&ae(Se,Ce,Oe[Ce])}),Se},be=function(Se,Le){return Le===void 0?s(Se):oe(s(Se),Le)},ce=function(Se){var Le=r(Se),Oe=i(Y,this,Le);return this===G&&T(ee,Le)&&!T(ne,Le)?!1:Oe||!T(this,Le)||!T(ee,Le)||T(this,D)&&this[D][Le]?Oe:!0},de=function(Se,Le){var Oe=n(Se),we=r(Le);if(!(Oe===G&&T(ee,we)&&!T(ne,we))){var Ce=ue(Oe,we);return Ce&&T(ee,we)&&!(T(Oe,D)&&Oe[D][we])&&(Ce.enumerable=!0),Ce}},ye=function(Se){var Le=te(n(Se)),Oe=[];return I(Le,function(we){!T(ee,we)&&!T(g,we)&&H(Oe,we)}),Oe},ge=function(me){var Se=me===G,Le=te(Se?ne:n(me)),Oe=[];return I(Le,function(we){T(ee,we)&&(!Se||T(G,we))&&H(Oe,ee[we])}),Oe};f||(Q=function(){if(e(X,this))throw j("Symbol is not a constructor");var Se=!arguments.length||arguments[0]===void 0?void 0:t(arguments[0]),Le=b(Se),Oe=function(we){this===G&&i(Oe,ne,we),T(this,D)&&T(this[D],Le)&&(this[D][Le]=!1),ie(this,Le,h(1,we))};return w&&q&&ie(G,Le,{configurable:!0,set:Oe}),se(Le,Se)},X=Q[O],u(X,"toString",function(){return B(this).tag}),u(Q,"withoutSetter",function(me){return se(b(me),me)}),x.f=ce,m.f=ae,l.f=oe,c.f=de,y.f=d.f=ye,p.f=ge,k.f=function(me){return se(v(me),me)},w&&(K(X,"description",{configurable:!0,get:function(){return B(this).description}}),V||u(G,"propertyIsEnumerable",ce,{unsafe:!0}))),Je({global:!0,constructor:!0,wrap:!0,forced:!f,sham:!f},{Symbol:Q}),I(o(Z),function(me){S(me)}),Je({target:R,stat:!0,forced:!f},{useSetter:function(){q=!0},useSimple:function(){q=!1}}),Je({target:"Object",stat:!0,forced:!f,sham:!w},{create:be,defineProperty:ae,defineProperties:oe,getOwnPropertyDescriptor:de}),Je({target:"Object",stat:!0,forced:!f},{getOwnPropertyNames:ye}),E(),C(Q,R),g[D]=!0},da84:function(Xe,rt,Ae){(function(Je){var He=function(i){return i&&i.Math==Math&&i};Xe.exports=He(typeof globalThis=="object"&&globalThis)||He(typeof window=="object"&&window)||He(typeof self=="object"&&self)||He(typeof Je=="object"&&Je)||function(){return this}()||Function("return this")()}).call(this,Ae("c8ba"))},dbb4:function(Xe,rt,Ae){var Je=Ae("23e7"),He=Ae("83ab"),i=Ae("56ef"),U=Ae("fc6a"),V=Ae("06cf"),w=Ae("8418");Je({target:"Object",stat:!0,sham:!He},{getOwnPropertyDescriptors:function(M){for(var T=U(M),e=V.f,a=i(T),n={},r=0,t,h;a.length>r;)h=e(T,t=a[r++]),h!==void 0&&w(n,t,h);return n}})},dc4a:function(Xe,rt,Ae){var Je=Ae("59ed"),He=Ae("7234");Xe.exports=function(i,U){var V=i[U];return He(V)?void 0:Je(V)}},df75:function(Xe,rt,Ae){var Je=Ae("ca84"),He=Ae("7839");Xe.exports=Object.keys||function(U){return Je(U,He)}},e065:function(Xe,rt,Ae){var Je=Ae("428f"),He=Ae("1a2d"),i=Ae("e538"),U=Ae("9bf2").f;Xe.exports=function(V){var w=Je.Symbol||(Je.Symbol={});He(w,V)||U(w,V,{value:i.f(V)})}},e330:function(Xe,rt,Ae){var Je=Ae("c6b6"),He=Ae("7d7e");Xe.exports=function(i){if(Je(i)==="Function")return He(i)}},e439:function(Xe,rt,Ae){var Je=Ae("23e7"),He=Ae("d039"),i=Ae("fc6a"),U=Ae("06cf").f,V=Ae("83ab"),w=He(function(){U(1)}),f=!V||w;Je({target:"Object",stat:!0,forced:f,sham:!V},{getOwnPropertyDescriptor:function(T,e){return U(i(T),e)}})},e538:function(Xe,rt,Ae){var Je=Ae("b622");rt.f=Je},e893:function(Xe,rt,Ae){var Je=Ae("1a2d"),He=Ae("56ef"),i=Ae("06cf"),U=Ae("9bf2");Xe.exports=function(V,w,f){for(var M=He(w),T=U.f,e=i.f,a=0;a<M.length;a++){var n=M[a];!Je(V,n)&&!(f&&Je(f,n))&&T(V,n,e(w,n))}}},e8b5:function(Xe,rt,Ae){var Je=Ae("c6b6");Xe.exports=Array.isArray||function(i){return Je(i)=="Array"}},e9c4:function(Xe,rt,Ae){var Je=Ae("23e7"),He=Ae("d066"),i=Ae("2ba4"),U=Ae("c65b"),V=Ae("e330"),w=Ae("d039"),f=Ae("e8b5"),M=Ae("1626"),T=Ae("861d"),e=Ae("d9b5"),a=Ae("f36a"),n=Ae("04f8"),r=He("JSON","stringify"),t=V(/./.exec),h=V("".charAt),s=V("".charCodeAt),o=V("".replace),y=V(1 .toString),d=/[\uD800-\uDFFF]/g,p=/^[\uD800-\uDBFF]$/,c=/^[\uDC00-\uDFFF]$/,m=!n||w(function(){var A=He("Symbol")();return r([A])!="[null]"||r({a:A})!="{}"||r(Object(A))!="{}"}),l=w(function(){return r("\uDF06\uD834")!=='"\\udf06\\ud834"'||r("\uDEAD")!=='"\\udead"'}),x=function(A,_){var g=a(arguments),b=_;if(!(!T(_)&&A===void 0||e(A)))return f(_)||(_=function(v,k){if(M(b)&&(k=U(b,this,v,k)),!e(k))return k}),g[1]=_,i(r,null,g)},u=function(A,_,g){var b=h(g,_-1),v=h(g,_+1);return t(p,A)&&!t(c,v)||t(c,A)&&!t(p,b)?"\\u"+y(s(A,0),16):A};r&&Je({target:"JSON",stat:!0,arity:3,forced:m||l},{stringify:function(_,g,b){var v=a(arguments),k=i(m?x:r,null,v);return l&&typeof k=="string"?o(k,d,u):k}})},f36a:function(Xe,rt,Ae){var Je=Ae("e330");Xe.exports=Je([].slice)},f5df:function(Xe,rt,Ae){var Je=Ae("00ee"),He=Ae("1626"),i=Ae("c6b6"),U=Ae("b622"),V=U("toStringTag"),w=Object,f=i(function(){return arguments}())=="Arguments",M=function(T,e){try{return T[e]}catch{}};Xe.exports=Je?i:function(T){var e,a,n;return T===void 0?"Undefined":T===null?"Null":typeof(a=M(e=w(T),V))=="string"?a:f?i(e):(n=i(e))=="Object"&&He(e.callee)?"Arguments":n}},f772:function(Xe,rt,Ae){var Je=Ae("5692"),He=Ae("90e3"),i=Je("keys");Xe.exports=function(U){return i[U]||(i[U]=He(U))}},f7fe:function(Xe,rt,Ae){(function(Je){var He="Expected a function",i=NaN,U="[object Symbol]",V=/^\s+|\s+$/g,w=/^[-+]0x[0-9a-f]+$/i,f=/^0b[01]+$/i,M=/^0o[0-7]+$/i,T=parseInt,e=typeof Je=="object"&&Je&&Je.Object===Object&&Je,a=typeof self=="object"&&self&&self.Object===Object&&self,n=e||a||Function("return this")(),r=Object.prototype,t=r.toString,h=Math.max,s=Math.min,o=function(){return n.Date.now()};function y(l,x,u){var A,_,g,b,v,k,S=0,E=!1,C=!1,F=!0;if(typeof l!="function")throw new TypeError(He);x=m(x)||0,d(u)&&(E=!!u.leading,C="maxWait"in u,g=C?h(m(u.maxWait)||0,x):g,F="trailing"in u?!!u.trailing:F);function I(j){var re=A,ue=_;return A=_=void 0,S=j,b=l.apply(ue,re),b}function D(j){return S=j,v=setTimeout(z,x),E?I(j):b}function R(j){var re=j-k,ue=j-S,K=x-re;return C?s(K,g-ue):K}function O(j){var re=j-k,ue=j-S;return k===void 0||re>=x||re<0||C&&ue>=g}function z(){var j=o();if(O(j))return B(j);v=setTimeout(z,R(j))}function B(j){return v=void 0,F&&A?I(j):(A=_=void 0,b)}function G(){v!==void 0&&clearTimeout(v),S=0,A=k=_=v=void 0}function Q(){return v===void 0?b:B(o())}function X(){var j=o(),re=O(j);if(A=arguments,_=this,k=j,re){if(v===void 0)return D(k);if(C)return v=setTimeout(z,x),I(k)}return v===void 0&&(v=setTimeout(z,x)),b}return X.cancel=G,X.flush=Q,X}function d(l){var x=typeof l;return!!l&&(x=="object"||x=="function")}function p(l){return!!l&&typeof l=="object"}function c(l){return typeof l=="symbol"||p(l)&&t.call(l)==U}function m(l){if(typeof l=="number")return l;if(c(l))return i;if(d(l)){var x=typeof l.valueOf=="function"?l.valueOf():l;l=d(x)?x+"":x}if(typeof l!="string")return l===0?l:+l;l=l.replace(V,"");var u=f.test(l);return u||M.test(l)?T(l.slice(2),u?2:8):w.test(l)?i:+l}Xe.exports=y}).call(this,Ae("c8ba"))},fae3:function(Xe,rt,Ae){if(Ae.r(rt),Ae.d(rt,"Plotly",function(){return u}),typeof window<"u"){var Je=window.document.currentScript;{var He=Ae("8875");Je=He(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:He})}var i=Je&&Je.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);i&&(Ae.p=i[1])}var U=function(){var _=this,g=_._self._c;return g("div",{directives:[{name:"resize",rawName:"v-resize:debounce.100",value:_.onResize,expression:"onResize",arg:"debounce",modifiers:{100:!0}}],attrs:{id:_.id}})},V=[];Ae("b64b"),Ae("a4d3"),Ae("4de4"),Ae("d3b7"),Ae("e439"),Ae("14d9"),Ae("159b"),Ae("dbb4");function w(A,_,g){return _ in A?Object.defineProperty(A,_,{value:g,enumerable:!0,configurable:!0,writable:!0}):A[_]=g,A}function f(A,_){var g=Object.keys(A);if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(A);_&&(b=b.filter(function(v){return Object.getOwnPropertyDescriptor(A,v).enumerable})),g.push.apply(g,b)}return g}function M(A){for(var _=1;_<arguments.length;_++){var g=arguments[_]!=null?arguments[_]:{};_%2?f(Object(g),!0).forEach(function(b){w(A,b,g[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(A,Object.getOwnPropertyDescriptors(g)):f(Object(g)).forEach(function(b){Object.defineProperty(A,b,Object.getOwnPropertyDescriptor(g,b))})}return A}Ae("e9c4"),Ae("13d5"),Ae("cca6");var T=Ae("61cc"),e=Ae.n(T);Ae("d81d"),Ae("99af");var a=["AfterExport","AfterPlot","Animated","AnimatingFrame","AnimationInterrupted","AutoSize","BeforeExport","ButtonClicked","Click","ClickAnnotation","Deselect","DoubleClick","Framework","Hover","LegendClick","LegendDoubleClick","Relayout","Restyle","Redraw","Selected","Selecting","SliderChange","SliderEnd","SliderStart","Transitioning","TransitionInterrupted","Unhover"],n=a.map(function(A){return A.toLocaleLowerCase()}).map(function(A){return{completeName:"plotly_"+A,handler:function(g){return function(){for(var b=arguments.length,v=new Array(b),k=0;k<b;k++)v[k]=arguments[k];g.$emit.apply(g,[A].concat(v))}}}}),r=n,t=["restyle","relayout","update","addTraces","deleteTraces","moveTraces","extendTraces","prependTraces","purge"],h=t.reduce(function(A,_){return A[_]=function(){for(var g=arguments.length,b=new Array(g),v=0;v<g;v++)b[v]=arguments[v];return e.a[_].apply(e.a,[this.$el].concat(b))},A},{}),s=h;Ae("ac1f"),Ae("5319");function o(A){var _=Object.create(null);return function(b){var v=_[b];return v||(_[b]=A(b))}}var y=/-(\w)/g,d=o(function(A){return A.replace(y,function(_,g){return g?g.toUpperCase():""})}),p={};typeof window<"u"&&(p.resize=Ae("428d"));var c={name:"plotly",inheritAttrs:!1,directives:p,props:{data:{type:Array},layout:{type:Object},id:{type:String,required:!1,default:null}},data:function(){return{scheduled:null,innerLayout:M({},this.layout)}},mounted:function(){var _=this;e.a.newPlot(this.$el,this.data,this.innerLayout,this.options),r.forEach(function(g){_.$el.on(g.completeName,g.handler(_))})},watch:{data:{handler:function(){this.schedule({replot:!0})},deep:!0},options:{handler:function(_,g){JSON.stringify(_)!==JSON.stringify(g)&&this.schedule({replot:!0})},deep:!0},layout:function(_){this.innerLayout=M({},_),this.schedule({replot:!1})}},computed:{options:function(){var _=this,g=Object.keys(this.$attrs).reduce(function(b,v){return b[d(v)]=_.$attrs[v],b},{});return M({responsive:!1},g)}},beforeDestroy:function(){var _=this;r.forEach(function(g){return _.$el.removeAllListeners(g.completeName)}),e.a.purge(this.$el)},methods:M(M({},s),{},{onResize:function(){e.a.Plots.resize(this.$el)},schedule:function(_){var g=this,b=this.scheduled;if(b){b.replot=b.replot||_.replot;return}this.scheduled=_,this.$nextTick(function(){var v=g.scheduled.replot;if(g.scheduled=null,v){g.react();return}g.relayout(g.innerLayout)})},toImage:function(_){var g=Object.assign(this.getPrintOptions(),_);return e.a.toImage(this.$el,g)},downloadImage:function(_){var g="plot--".concat(new Date().toISOString()),b=Object.assign(this.getPrintOptions(),{filename:g},_);return e.a.downloadImage(this.$el,b)},getPrintOptions:function(){var _=this.$el;return{format:"png",width:_.clientWidth,height:_.clientHeight}},react:function(){e.a.react(this.$el,this.data,this.innerLayout,this.options)}})},m=c;function l(A,_,g,b,v,k,S,E){var C=typeof A=="function"?A.options:A;_&&(C.render=_,C.staticRenderFns=g,C._compiled=!0),b&&(C.functional=!0),k&&(C._scopeId="data-v-"+k);var F;if(S?(F=function(R){R=R||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!R&&typeof __VUE_SSR_CONTEXT__<"u"&&(R=__VUE_SSR_CONTEXT__),v&&v.call(this,R),R&&R._registeredComponents&&R._registeredComponents.add(S)},C._ssrRegister=F):v&&(F=E?function(){v.call(this,(C.functional?this.parent:this).$root.$options.shadowRoot)}:v),F)if(C.functional){C._injectStyles=F;var I=C.render;C.render=function(O,z){return F.call(z),I(O,z)}}else{var D=C.beforeCreate;C.beforeCreate=D?[].concat(D,F):[F]}return{exports:A,options:C}}var x=l(m,U,V,!1,null,null,null),u=x.exports},fc6a:function(Xe,rt,Ae){var Je=Ae("44ad"),He=Ae("1d80");Xe.exports=function(i){return Je(He(i))}},fce3:function(Xe,rt,Ae){var Je=Ae("d039"),He=Ae("da84"),i=He.RegExp;Xe.exports=Je(function(){var U=i(".","s");return!(U.dotAll&&U.exec(`
`)&&U.flags==="s")})},fdbc:function(Xe,rt){Xe.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(Xe,rt,Ae){var Je=Ae("04f8");Xe.exports=Je&&!Symbol.sham&&typeof Symbol.iterator=="symbol"}})})(zv);function Bf(pt={},Xe={},rt={},Ae=!1){return{name:pt.name,mixins:[wc],props:{plotlyOptions:{type:Object,default:function(){return{}}}},render(He){const i=new ru(this.$props),U=i.getRowKeys(),V=i.getColKeys(),w=Ae?V:U;w.length===0&&w.push([]);const f=Ae?U:V;f.length===0&&f.push([]);let M=this.$props.aggregatorName;const T=this.$props.aggregators[M]([])().numInputs||0;T!==0&&(M+=` of ${this.$props.vals.slice(0,T).join(", ")}`);const e=w.map(h=>{const s=[],o=[];for(const d of f){const p=parseFloat(i.getAggregator(Ae?d:h,Ae?h:d).value());s.push(isFinite(p)?p:null),o.push(d.join("-")||" ")}const y={name:h.join("-")||M};return Xe.type==="pie"?(y.values=s,y.labels=o.length>1?o:[M]):(y.x=Ae?s:o,y.y=Ae?o:s),Object.assign(y,Xe)});let a=M;const n=Ae?this.$props.rows.join("-"):this.$props.cols.join("-"),r=Ae?this.$props.cols.join("-"):this.$props.rows.join("-");n!==""&&(a+=` vs ${n}`),r!==""&&(a+=` by ${r}`);const t={title:a,hovermode:"closest",width:window.innerWidth/1.5,height:window.innerHeight/1.4-50};if(Xe.type==="pie"){const h=Math.ceil(Math.sqrt(e.length)),s=Math.ceil(e.length/h);t.grid={columns:h,rows:s},e.forEach((o,y)=>{o.domain={row:Math.floor(y/h),column:y-h*Math.floor(y/h)},e.length>1&&(o.title=o.name)}),e[0].labels.length===1&&(t.showlegend=!1)}else t.xaxis={title:Ae?M:null,automargin:!0},t.yaxis={title:Ae?null:M,automargin:!0};return He(zv.exports.Plotly,{props:{data:e,layout:Object.assign({},t,rt,this.$props.plotlyOptions)}})}}}function L0(pt={}){return{name:pt.name,mixins:[wc],props:{plotlyOptions:{type:Object,default:function(){return{}}}},render(rt){const Ae=new ru(this.$props),Je=Ae.getRowKeys(),He=Ae.getColKeys();Je.length===0&&Je.push([]),He.length===0&&He.push([]);const i={x:[],y:[],text:[],type:"scatter",mode:"markers"};Je.map(V=>{He.map(w=>{const f=Ae.getAggregator(V,w).value();f!==null&&(i.x.push(w.join("-")),i.y.push(V.join("-")),i.text.push(f))})});const U={title:this.$props.rows.join("-")+" vs "+this.$props.cols.join("-"),hovermode:"closest",xaxis:{title:this.$props.cols.join("-"),automargin:!0},yaxis:{title:this.$props.rows.join("-"),automargin:!0},width:window.innerWidth/1.5,height:window.innerHeight/1.4-50};return rt(zv.exports.Plotly,{props:{data:[i],layout:Object.assign({},U,this.$props.plotlyOptions)}})}}}const Ov={"Grouped Column Chart":Bf({name:"vue-grouped-column-chart"},{type:"bar"},{barmode:"group"}),"Stacked Column Chart":Bf({name:"vue-stacked-column-chart"},{type:"bar"},{barmode:"relative"}),"Grouped Bar Chart":Bf({name:"groupd-bar-chart"},{type:"bar",orientation:"h"},{barmode:"group"},!0),"Stacked Bar Chart":Bf({name:"vue-stacked-bar-chart"},{type:"bar",orientation:"h"},{barmode:"relative"},!0),"Line Chart":Bf({name:"vue-line-chart"}),"Dot Chart":Bf({name:"vue-dot-chart"},{mode:"markers"},{},!0),"Area Chart":Bf({name:"vue-area-chart"},{stackgroup:1}),"Scatter Chart":L0({name:"vue-scatter-chart"}),"Multiple Pie Chart":Bf({name:"vue-multiple-pie-chart"},{type:"pie",scalegroup:1,hoverinfo:"label+value",textinfo:"none"},{},!0)};var Up={exports:{}};/**!
 * Sortable 1.10.2
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function Gh(pt){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Gh=function(Xe){return typeof Xe}:Gh=function(Xe){return Xe&&typeof Symbol=="function"&&Xe.constructor===Symbol&&Xe!==Symbol.prototype?"symbol":typeof Xe},Gh(pt)}function P0(pt,Xe,rt){return Xe in pt?Object.defineProperty(pt,Xe,{value:rt,enumerable:!0,configurable:!0,writable:!0}):pt[Xe]=rt,pt}function bu(){return bu=Object.assign||function(pt){for(var Xe=1;Xe<arguments.length;Xe++){var rt=arguments[Xe];for(var Ae in rt)Object.prototype.hasOwnProperty.call(rt,Ae)&&(pt[Ae]=rt[Ae])}return pt},bu.apply(this,arguments)}function Uf(pt){for(var Xe=1;Xe<arguments.length;Xe++){var rt=arguments[Xe]!=null?arguments[Xe]:{},Ae=Object.keys(rt);typeof Object.getOwnPropertySymbols=="function"&&(Ae=Ae.concat(Object.getOwnPropertySymbols(rt).filter(function(Je){return Object.getOwnPropertyDescriptor(rt,Je).enumerable}))),Ae.forEach(function(Je){P0(pt,Je,rt[Je])})}return pt}function D0(pt,Xe){if(pt==null)return{};var rt={},Ae=Object.keys(pt),Je,He;for(He=0;He<Ae.length;He++)Je=Ae[He],!(Xe.indexOf(Je)>=0)&&(rt[Je]=pt[Je]);return rt}function R0(pt,Xe){if(pt==null)return{};var rt=D0(pt,Xe),Ae,Je;if(Object.getOwnPropertySymbols){var He=Object.getOwnPropertySymbols(pt);for(Je=0;Je<He.length;Je++)Ae=He[Je],!(Xe.indexOf(Ae)>=0)&&(!Object.prototype.propertyIsEnumerable.call(pt,Ae)||(rt[Ae]=pt[Ae]))}return rt}function I0(pt){return F0(pt)||z0(pt)||O0()}function F0(pt){if(Array.isArray(pt)){for(var Xe=0,rt=new Array(pt.length);Xe<pt.length;Xe++)rt[Xe]=pt[Xe];return rt}}function z0(pt){if(Symbol.iterator in Object(pt)||Object.prototype.toString.call(pt)==="[object Arguments]")return Array.from(pt)}function O0(){throw new TypeError("Invalid attempt to spread non-iterable instance")}var N0="1.10.2";function Cf(pt){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(pt)}var kf=Cf(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),rh=Cf(/Edge/i),Vp=Cf(/firefox/i),Nv=Cf(/safari/i)&&!Cf(/chrome/i)&&!Cf(/android/i),Hp=Cf(/iP(ad|od|hone)/i),B0=Cf(/chrome/i)&&Cf(/android/i),Gp={capture:!1,passive:!1};function Ji(pt,Xe,rt){pt.addEventListener(Xe,rt,!kf&&Gp)}function Wi(pt,Xe,rt){pt.removeEventListener(Xe,rt,!kf&&Gp)}function Yh(pt,Xe){if(!!Xe){if(Xe[0]===">"&&(Xe=Xe.substring(1)),pt)try{if(pt.matches)return pt.matches(Xe);if(pt.msMatchesSelector)return pt.msMatchesSelector(Xe);if(pt.webkitMatchesSelector)return pt.webkitMatchesSelector(Xe)}catch{return!1}return!1}}function U0(pt){return pt.host&&pt!==document&&pt.host.nodeType?pt.host:pt.parentNode}function zu(pt,Xe,rt,Ae){if(pt){rt=rt||document;do{if(Xe!=null&&(Xe[0]===">"?pt.parentNode===rt&&Yh(pt,Xe):Yh(pt,Xe))||Ae&&pt===rt)return pt;if(pt===rt)break}while(pt=U0(pt))}return null}var Yp=/\s+/g;function Zo(pt,Xe,rt){if(pt&&Xe)if(pt.classList)pt.classList[rt?"add":"remove"](Xe);else{var Ae=(" "+pt.className+" ").replace(Yp," ").replace(" "+Xe+" "," ");pt.className=(Ae+(rt?" "+Xe:"")).replace(Yp," ")}}function ui(pt,Xe,rt){var Ae=pt&&pt.style;if(Ae){if(rt===void 0)return document.defaultView&&document.defaultView.getComputedStyle?rt=document.defaultView.getComputedStyle(pt,""):pt.currentStyle&&(rt=pt.currentStyle),Xe===void 0?rt:rt[Xe];!(Xe in Ae)&&Xe.indexOf("webkit")===-1&&(Xe="-webkit-"+Xe),Ae[Xe]=rt+(typeof rt=="string"?"":"px")}}function ic(pt,Xe){var rt="";if(typeof pt=="string")rt=pt;else do{var Ae=ui(pt,"transform");Ae&&Ae!=="none"&&(rt=Ae+" "+rt)}while(!Xe&&(pt=pt.parentNode));var Je=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return Je&&new Je(rt)}function Wp(pt,Xe,rt){if(pt){var Ae=pt.getElementsByTagName(Xe),Je=0,He=Ae.length;if(rt)for(;Je<He;Je++)rt(Ae[Je],Je);return Ae}return[]}function lf(){var pt=document.scrollingElement;return pt||document.documentElement}function is(pt,Xe,rt,Ae,Je){if(!(!pt.getBoundingClientRect&&pt!==window)){var He,i,U,V,w,f,M;if(pt!==window&&pt!==lf()?(He=pt.getBoundingClientRect(),i=He.top,U=He.left,V=He.bottom,w=He.right,f=He.height,M=He.width):(i=0,U=0,V=window.innerHeight,w=window.innerWidth,f=window.innerHeight,M=window.innerWidth),(Xe||rt)&&pt!==window&&(Je=Je||pt.parentNode,!kf))do if(Je&&Je.getBoundingClientRect&&(ui(Je,"transform")!=="none"||rt&&ui(Je,"position")!=="static")){var T=Je.getBoundingClientRect();i-=T.top+parseInt(ui(Je,"border-top-width")),U-=T.left+parseInt(ui(Je,"border-left-width")),V=i+He.height,w=U+He.width;break}while(Je=Je.parentNode);if(Ae&&pt!==window){var e=ic(Je||pt),a=e&&e.a,n=e&&e.d;e&&(i/=n,U/=a,M/=a,f/=n,V=i+f,w=U+M)}return{top:i,left:U,bottom:V,right:w,width:M,height:f}}}function jp(pt,Xe,rt){for(var Ae=Vf(pt,!0),Je=is(pt)[Xe];Ae;){var He=is(Ae)[rt],i=void 0;if(rt==="top"||rt==="left"?i=Je>=He:i=Je<=He,!i)return Ae;if(Ae===lf())break;Ae=Vf(Ae,!1)}return!1}function Wh(pt,Xe,rt){for(var Ae=0,Je=0,He=pt.children;Je<He.length;){if(He[Je].style.display!=="none"&&He[Je]!==bi.ghost&&He[Je]!==bi.dragged&&zu(He[Je],rt.draggable,pt,!1)){if(Ae===Xe)return He[Je];Ae++}Je++}return null}function Bv(pt,Xe){for(var rt=pt.lastElementChild;rt&&(rt===bi.ghost||ui(rt,"display")==="none"||Xe&&!Yh(rt,Xe));)rt=rt.previousElementSibling;return rt||null}function os(pt,Xe){var rt=0;if(!pt||!pt.parentNode)return-1;for(;pt=pt.previousElementSibling;)pt.nodeName.toUpperCase()!=="TEMPLATE"&&pt!==bi.clone&&(!Xe||Yh(pt,Xe))&&rt++;return rt}function Xp(pt){var Xe=0,rt=0,Ae=lf();if(pt)do{var Je=ic(pt),He=Je.a,i=Je.d;Xe+=pt.scrollLeft*He,rt+=pt.scrollTop*i}while(pt!==Ae&&(pt=pt.parentNode));return[Xe,rt]}function V0(pt,Xe){for(var rt in pt)if(!!pt.hasOwnProperty(rt)){for(var Ae in Xe)if(Xe.hasOwnProperty(Ae)&&Xe[Ae]===pt[rt][Ae])return Number(rt)}return-1}function Vf(pt,Xe){if(!pt||!pt.getBoundingClientRect)return lf();var rt=pt,Ae=!1;do if(rt.clientWidth<rt.scrollWidth||rt.clientHeight<rt.scrollHeight){var Je=ui(rt);if(rt.clientWidth<rt.scrollWidth&&(Je.overflowX=="auto"||Je.overflowX=="scroll")||rt.clientHeight<rt.scrollHeight&&(Je.overflowY=="auto"||Je.overflowY=="scroll")){if(!rt.getBoundingClientRect||rt===document.body)return lf();if(Ae||Xe)return rt;Ae=!0}}while(rt=rt.parentNode);return lf()}function H0(pt,Xe){if(pt&&Xe)for(var rt in Xe)Xe.hasOwnProperty(rt)&&(pt[rt]=Xe[rt]);return pt}function Uv(pt,Xe){return Math.round(pt.top)===Math.round(Xe.top)&&Math.round(pt.left)===Math.round(Xe.left)&&Math.round(pt.height)===Math.round(Xe.height)&&Math.round(pt.width)===Math.round(Xe.width)}var nh;function Zp(pt,Xe){return function(){if(!nh){var rt=arguments,Ae=this;rt.length===1?pt.call(Ae,rt[0]):pt.apply(Ae,rt),nh=setTimeout(function(){nh=void 0},Xe)}}}function G0(){clearTimeout(nh),nh=void 0}function Kp(pt,Xe,rt){pt.scrollLeft+=Xe,pt.scrollTop+=rt}function Vv(pt){var Xe=window.Polymer,rt=window.jQuery||window.Zepto;return Xe&&Xe.dom?Xe.dom(pt).cloneNode(!0):rt?rt(pt).clone(!0)[0]:pt.cloneNode(!0)}function Jp(pt,Xe){ui(pt,"position","absolute"),ui(pt,"top",Xe.top),ui(pt,"left",Xe.left),ui(pt,"width",Xe.width),ui(pt,"height",Xe.height)}function Hv(pt){ui(pt,"position",""),ui(pt,"top",""),ui(pt,"left",""),ui(pt,"width",""),ui(pt,"height","")}var fl="Sortable"+new Date().getTime();function Y0(){var pt=[],Xe;return{captureAnimationState:function(){if(pt=[],!!this.options.animation){var Ae=[].slice.call(this.el.children);Ae.forEach(function(Je){if(!(ui(Je,"display")==="none"||Je===bi.ghost)){pt.push({target:Je,rect:is(Je)});var He=Uf({},pt[pt.length-1].rect);if(Je.thisAnimationDuration){var i=ic(Je,!0);i&&(He.top-=i.f,He.left-=i.e)}Je.fromRect=He}})}},addAnimationState:function(Ae){pt.push(Ae)},removeAnimationState:function(Ae){pt.splice(V0(pt,{target:Ae}),1)},animateAll:function(Ae){var Je=this;if(!this.options.animation){clearTimeout(Xe),typeof Ae=="function"&&Ae();return}var He=!1,i=0;pt.forEach(function(U){var V=0,w=U.target,f=w.fromRect,M=is(w),T=w.prevFromRect,e=w.prevToRect,a=U.rect,n=ic(w,!0);n&&(M.top-=n.f,M.left-=n.e),w.toRect=M,w.thisAnimationDuration&&Uv(T,M)&&!Uv(f,M)&&(a.top-M.top)/(a.left-M.left)===(f.top-M.top)/(f.left-M.left)&&(V=j0(a,T,e,Je.options)),Uv(M,f)||(w.prevFromRect=f,w.prevToRect=M,V||(V=Je.options.animation),Je.animate(w,a,M,V)),V&&(He=!0,i=Math.max(i,V),clearTimeout(w.animationResetTimer),w.animationResetTimer=setTimeout(function(){w.animationTime=0,w.prevFromRect=null,w.fromRect=null,w.prevToRect=null,w.thisAnimationDuration=null},V),w.thisAnimationDuration=V)}),clearTimeout(Xe),He?Xe=setTimeout(function(){typeof Ae=="function"&&Ae()},i):typeof Ae=="function"&&Ae(),pt=[]},animate:function(Ae,Je,He,i){if(i){ui(Ae,"transition",""),ui(Ae,"transform","");var U=ic(this.el),V=U&&U.a,w=U&&U.d,f=(Je.left-He.left)/(V||1),M=(Je.top-He.top)/(w||1);Ae.animatingX=!!f,Ae.animatingY=!!M,ui(Ae,"transform","translate3d("+f+"px,"+M+"px,0)"),W0(Ae),ui(Ae,"transition","transform "+i+"ms"+(this.options.easing?" "+this.options.easing:"")),ui(Ae,"transform","translate3d(0,0,0)"),typeof Ae.animated=="number"&&clearTimeout(Ae.animated),Ae.animated=setTimeout(function(){ui(Ae,"transition",""),ui(Ae,"transform",""),Ae.animated=!1,Ae.animatingX=!1,Ae.animatingY=!1},i)}}}}function W0(pt){return pt.offsetWidth}function j0(pt,Xe,rt,Ae){return Math.sqrt(Math.pow(Xe.top-pt.top,2)+Math.pow(Xe.left-pt.left,2))/Math.sqrt(Math.pow(Xe.top-rt.top,2)+Math.pow(Xe.left-rt.left,2))*Ae.animation}var ah=[],Gv={initializeByDefault:!0},ih={mount:function(Xe){for(var rt in Gv)Gv.hasOwnProperty(rt)&&!(rt in Xe)&&(Xe[rt]=Gv[rt]);ah.push(Xe)},pluginEvent:function(Xe,rt,Ae){var Je=this;this.eventCanceled=!1,Ae.cancel=function(){Je.eventCanceled=!0};var He=Xe+"Global";ah.forEach(function(i){!rt[i.pluginName]||(rt[i.pluginName][He]&&rt[i.pluginName][He](Uf({sortable:rt},Ae)),rt.options[i.pluginName]&&rt[i.pluginName][Xe]&&rt[i.pluginName][Xe](Uf({sortable:rt},Ae)))})},initializePlugins:function(Xe,rt,Ae,Je){ah.forEach(function(U){var V=U.pluginName;if(!(!Xe.options[V]&&!U.initializeByDefault)){var w=new U(Xe,rt,Xe.options);w.sortable=Xe,w.options=Xe.options,Xe[V]=w,bu(Ae,w.defaults)}});for(var He in Xe.options)if(!!Xe.options.hasOwnProperty(He)){var i=this.modifyOption(Xe,He,Xe.options[He]);typeof i<"u"&&(Xe.options[He]=i)}},getEventProperties:function(Xe,rt){var Ae={};return ah.forEach(function(Je){typeof Je.eventProperties=="function"&&bu(Ae,Je.eventProperties.call(rt[Je.pluginName],Xe))}),Ae},modifyOption:function(Xe,rt,Ae){var Je;return ah.forEach(function(He){!Xe[He.pluginName]||He.optionListeners&&typeof He.optionListeners[rt]=="function"&&(Je=He.optionListeners[rt].call(Xe[He.pluginName],Ae))}),Je}};function oh(pt){var Xe=pt.sortable,rt=pt.rootEl,Ae=pt.name,Je=pt.targetEl,He=pt.cloneEl,i=pt.toEl,U=pt.fromEl,V=pt.oldIndex,w=pt.newIndex,f=pt.oldDraggableIndex,M=pt.newDraggableIndex,T=pt.originalEvent,e=pt.putSortable,a=pt.extraEventProperties;if(Xe=Xe||rt&&rt[fl],!!Xe){var n,r=Xe.options,t="on"+Ae.charAt(0).toUpperCase()+Ae.substr(1);window.CustomEvent&&!kf&&!rh?n=new CustomEvent(Ae,{bubbles:!0,cancelable:!0}):(n=document.createEvent("Event"),n.initEvent(Ae,!0,!0)),n.to=i||rt,n.from=U||rt,n.item=Je||rt,n.clone=He,n.oldIndex=V,n.newIndex=w,n.oldDraggableIndex=f,n.newDraggableIndex=M,n.originalEvent=T,n.pullMode=e?e.lastPutMode:void 0;var h=Uf({},a,ih.getEventProperties(Ae,Xe));for(var s in h)n[s]=h[s];rt&&rt.dispatchEvent(n),r[t]&&r[t].call(Xe,n)}}var Bl=function(Xe,rt){var Ae=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Je=Ae.evt,He=R0(Ae,["evt"]);ih.pluginEvent.bind(bi)(Xe,rt,Uf({dragEl:Va,parentEl:bs,ghostEl:Di,rootEl:Ko,nextEl:oc,lastDownEl:jh,cloneEl:ss,cloneHidden:Hf,dragStarted:lh,putSortable:qs,activeSortable:bi.active,originalEvent:Je,oldIndex:_c,oldDraggableIndex:sh,newIndex:nu,newDraggableIndex:Gf,hideGhostForTarget:nd,unhideGhostForTarget:ad,cloneNowHidden:function(){Hf=!0},cloneNowShown:function(){Hf=!1},dispatchSortableEvent:function(U){El({sortable:rt,name:U,originalEvent:Je})}},He))};function El(pt){oh(Uf({putSortable:qs,cloneEl:ss,targetEl:Va,rootEl:Ko,oldIndex:_c,oldDraggableIndex:sh,newIndex:nu,newDraggableIndex:Gf},pt))}var Va,bs,Di,Ko,oc,jh,ss,Hf,_c,nu,sh,Gf,Xh,qs,Tc=!1,Zh=!1,Kh=[],sc,Ou,Yv,Wv,Qp,$p,lh,Ac,uh,fh=!1,Jh=!1,Qh,cl,jv=[],Xv=!1,$h=[],qh=typeof document<"u",ev=Hp,qp=rh||kf?"cssFloat":"float",X0=qh&&!B0&&!Hp&&"draggable"in document.createElement("div"),ed=function(){if(!!qh){if(kf)return!1;var pt=document.createElement("x");return pt.style.cssText="pointer-events:auto",pt.style.pointerEvents==="auto"}}(),td=function(Xe,rt){var Ae=ui(Xe),Je=parseInt(Ae.width)-parseInt(Ae.paddingLeft)-parseInt(Ae.paddingRight)-parseInt(Ae.borderLeftWidth)-parseInt(Ae.borderRightWidth),He=Wh(Xe,0,rt),i=Wh(Xe,1,rt),U=He&&ui(He),V=i&&ui(i),w=U&&parseInt(U.marginLeft)+parseInt(U.marginRight)+is(He).width,f=V&&parseInt(V.marginLeft)+parseInt(V.marginRight)+is(i).width;if(Ae.display==="flex")return Ae.flexDirection==="column"||Ae.flexDirection==="column-reverse"?"vertical":"horizontal";if(Ae.display==="grid")return Ae.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(He&&U.float&&U.float!=="none"){var M=U.float==="left"?"left":"right";return i&&(V.clear==="both"||V.clear===M)?"vertical":"horizontal"}return He&&(U.display==="block"||U.display==="flex"||U.display==="table"||U.display==="grid"||w>=Je&&Ae[qp]==="none"||i&&Ae[qp]==="none"&&w+f>Je)?"vertical":"horizontal"},Z0=function(Xe,rt,Ae){var Je=Ae?Xe.left:Xe.top,He=Ae?Xe.right:Xe.bottom,i=Ae?Xe.width:Xe.height,U=Ae?rt.left:rt.top,V=Ae?rt.right:rt.bottom,w=Ae?rt.width:rt.height;return Je===U||He===V||Je+i/2===U+w/2},K0=function(Xe,rt){var Ae;return Kh.some(function(Je){if(!Bv(Je)){var He=is(Je),i=Je[fl].options.emptyInsertThreshold,U=Xe>=He.left-i&&Xe<=He.right+i,V=rt>=He.top-i&&rt<=He.bottom+i;if(i&&U&&V)return Ae=Je}}),Ae},rd=function(Xe){function rt(He,i){return function(U,V,w,f){var M=U.options.group.name&&V.options.group.name&&U.options.group.name===V.options.group.name;if(He==null&&(i||M))return!0;if(He==null||He===!1)return!1;if(i&&He==="clone")return He;if(typeof He=="function")return rt(He(U,V,w,f),i)(U,V,w,f);var T=(i?U:V).options.group.name;return He===!0||typeof He=="string"&&He===T||He.join&&He.indexOf(T)>-1}}var Ae={},Je=Xe.group;(!Je||Gh(Je)!="object")&&(Je={name:Je}),Ae.name=Je.name,Ae.checkPull=rt(Je.pull,!0),Ae.checkPut=rt(Je.put),Ae.revertClone=Je.revertClone,Xe.group=Ae},nd=function(){!ed&&Di&&ui(Di,"display","none")},ad=function(){!ed&&Di&&ui(Di,"display","")};qh&&document.addEventListener("click",function(pt){if(Zh)return pt.preventDefault(),pt.stopPropagation&&pt.stopPropagation(),pt.stopImmediatePropagation&&pt.stopImmediatePropagation(),Zh=!1,!1},!0);var lc=function(Xe){if(Va){Xe=Xe.touches?Xe.touches[0]:Xe;var rt=K0(Xe.clientX,Xe.clientY);if(rt){var Ae={};for(var Je in Xe)Xe.hasOwnProperty(Je)&&(Ae[Je]=Xe[Je]);Ae.target=Ae.rootEl=rt,Ae.preventDefault=void 0,Ae.stopPropagation=void 0,rt[fl]._onDragOver(Ae)}}},J0=function(Xe){Va&&Va.parentNode[fl]._isOutsideThisEl(Xe.target)};function bi(pt,Xe){if(!(pt&&pt.nodeType&&pt.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(pt));this.el=pt,this.options=Xe=bu({},Xe),pt[fl]=this;var rt={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(pt.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return td(pt,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(i,U){i.setData("Text",U.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:bi.supportPointer!==!1&&"PointerEvent"in window,emptyInsertThreshold:5};ih.initializePlugins(this,pt,rt);for(var Ae in rt)!(Ae in Xe)&&(Xe[Ae]=rt[Ae]);rd(Xe);for(var Je in this)Je.charAt(0)==="_"&&typeof this[Je]=="function"&&(this[Je]=this[Je].bind(this));this.nativeDraggable=Xe.forceFallback?!1:X0,this.nativeDraggable&&(this.options.touchStartThreshold=1),Xe.supportPointer?Ji(pt,"pointerdown",this._onTapStart):(Ji(pt,"mousedown",this._onTapStart),Ji(pt,"touchstart",this._onTapStart)),this.nativeDraggable&&(Ji(pt,"dragover",this),Ji(pt,"dragenter",this)),Kh.push(this.el),Xe.store&&Xe.store.get&&this.sort(Xe.store.get(this)||[]),bu(this,Y0())}bi.prototype={constructor:bi,_isOutsideThisEl:function(Xe){!this.el.contains(Xe)&&Xe!==this.el&&(Ac=null)},_getDirection:function(Xe,rt){return typeof this.options.direction=="function"?this.options.direction.call(this,Xe,rt,Va):this.options.direction},_onTapStart:function(Xe){if(!!Xe.cancelable){var rt=this,Ae=this.el,Je=this.options,He=Je.preventOnFilter,i=Xe.type,U=Xe.touches&&Xe.touches[0]||Xe.pointerType&&Xe.pointerType==="touch"&&Xe,V=(U||Xe).target,w=Xe.target.shadowRoot&&(Xe.path&&Xe.path[0]||Xe.composedPath&&Xe.composedPath()[0])||V,f=Je.filter;if(ng(Ae),!Va&&!(/mousedown|pointerdown/.test(i)&&Xe.button!==0||Je.disabled)&&!w.isContentEditable&&(V=zu(V,Je.draggable,Ae,!1),!(V&&V.animated)&&jh!==V)){if(_c=os(V),sh=os(V,Je.draggable),typeof f=="function"){if(f.call(this,Xe,V,this)){El({sortable:rt,rootEl:w,name:"filter",targetEl:V,toEl:Ae,fromEl:Ae}),Bl("filter",rt,{evt:Xe}),He&&Xe.cancelable&&Xe.preventDefault();return}}else if(f&&(f=f.split(",").some(function(M){if(M=zu(w,M.trim(),Ae,!1),M)return El({sortable:rt,rootEl:M,name:"filter",targetEl:V,fromEl:Ae,toEl:Ae}),Bl("filter",rt,{evt:Xe}),!0}),f)){He&&Xe.cancelable&&Xe.preventDefault();return}Je.handle&&!zu(w,Je.handle,Ae,!1)||this._prepareDragStart(Xe,U,V)}}},_prepareDragStart:function(Xe,rt,Ae){var Je=this,He=Je.el,i=Je.options,U=He.ownerDocument,V;if(Ae&&!Va&&Ae.parentNode===He){var w=is(Ae);if(Ko=He,Va=Ae,bs=Va.parentNode,oc=Va.nextSibling,jh=Ae,Xh=i.group,bi.dragged=Va,sc={target:Va,clientX:(rt||Xe).clientX,clientY:(rt||Xe).clientY},Qp=sc.clientX-w.left,$p=sc.clientY-w.top,this._lastX=(rt||Xe).clientX,this._lastY=(rt||Xe).clientY,Va.style["will-change"]="all",V=function(){if(Bl("delayEnded",Je,{evt:Xe}),bi.eventCanceled){Je._onDrop();return}Je._disableDelayedDragEvents(),!Vp&&Je.nativeDraggable&&(Va.draggable=!0),Je._triggerDragStart(Xe,rt),El({sortable:Je,name:"choose",originalEvent:Xe}),Zo(Va,i.chosenClass,!0)},i.ignore.split(",").forEach(function(f){Wp(Va,f.trim(),Kv)}),Ji(U,"dragover",lc),Ji(U,"mousemove",lc),Ji(U,"touchmove",lc),Ji(U,"mouseup",Je._onDrop),Ji(U,"touchend",Je._onDrop),Ji(U,"touchcancel",Je._onDrop),Vp&&this.nativeDraggable&&(this.options.touchStartThreshold=4,Va.draggable=!0),Bl("delayStart",this,{evt:Xe}),i.delay&&(!i.delayOnTouchOnly||rt)&&(!this.nativeDraggable||!(rh||kf))){if(bi.eventCanceled){this._onDrop();return}Ji(U,"mouseup",Je._disableDelayedDrag),Ji(U,"touchend",Je._disableDelayedDrag),Ji(U,"touchcancel",Je._disableDelayedDrag),Ji(U,"mousemove",Je._delayedDragTouchMoveHandler),Ji(U,"touchmove",Je._delayedDragTouchMoveHandler),i.supportPointer&&Ji(U,"pointermove",Je._delayedDragTouchMoveHandler),Je._dragStartTimer=setTimeout(V,i.delay)}else V()}},_delayedDragTouchMoveHandler:function(Xe){var rt=Xe.touches?Xe.touches[0]:Xe;Math.max(Math.abs(rt.clientX-this._lastX),Math.abs(rt.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){Va&&Kv(Va),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var Xe=this.el.ownerDocument;Wi(Xe,"mouseup",this._disableDelayedDrag),Wi(Xe,"touchend",this._disableDelayedDrag),Wi(Xe,"touchcancel",this._disableDelayedDrag),Wi(Xe,"mousemove",this._delayedDragTouchMoveHandler),Wi(Xe,"touchmove",this._delayedDragTouchMoveHandler),Wi(Xe,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(Xe,rt){rt=rt||Xe.pointerType=="touch"&&Xe,!this.nativeDraggable||rt?this.options.supportPointer?Ji(document,"pointermove",this._onTouchMove):rt?Ji(document,"touchmove",this._onTouchMove):Ji(document,"mousemove",this._onTouchMove):(Ji(Va,"dragend",this),Ji(Ko,"dragstart",this._onDragStart));try{document.selection?tv(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(Xe,rt){if(Tc=!1,Ko&&Va){Bl("dragStarted",this,{evt:rt}),this.nativeDraggable&&Ji(document,"dragover",J0);var Ae=this.options;!Xe&&Zo(Va,Ae.dragClass,!1),Zo(Va,Ae.ghostClass,!0),bi.active=this,Xe&&this._appendGhost(),El({sortable:this,name:"start",originalEvent:rt})}else this._nulling()},_emulateDragOver:function(){if(Ou){this._lastX=Ou.clientX,this._lastY=Ou.clientY,nd();for(var Xe=document.elementFromPoint(Ou.clientX,Ou.clientY),rt=Xe;Xe&&Xe.shadowRoot&&(Xe=Xe.shadowRoot.elementFromPoint(Ou.clientX,Ou.clientY),Xe!==rt);)rt=Xe;if(Va.parentNode[fl]._isOutsideThisEl(Xe),rt)do{if(rt[fl]){var Ae=void 0;if(Ae=rt[fl]._onDragOver({clientX:Ou.clientX,clientY:Ou.clientY,target:Xe,rootEl:rt}),Ae&&!this.options.dragoverBubble)break}Xe=rt}while(rt=rt.parentNode);ad()}},_onTouchMove:function(Xe){if(sc){var rt=this.options,Ae=rt.fallbackTolerance,Je=rt.fallbackOffset,He=Xe.touches?Xe.touches[0]:Xe,i=Di&&ic(Di,!0),U=Di&&i&&i.a,V=Di&&i&&i.d,w=ev&&cl&&Xp(cl),f=(He.clientX-sc.clientX+Je.x)/(U||1)+(w?w[0]-jv[0]:0)/(U||1),M=(He.clientY-sc.clientY+Je.y)/(V||1)+(w?w[1]-jv[1]:0)/(V||1);if(!bi.active&&!Tc){if(Ae&&Math.max(Math.abs(He.clientX-this._lastX),Math.abs(He.clientY-this._lastY))<Ae)return;this._onDragStart(Xe,!0)}if(Di){i?(i.e+=f-(Yv||0),i.f+=M-(Wv||0)):i={a:1,b:0,c:0,d:1,e:f,f:M};var T="matrix(".concat(i.a,",").concat(i.b,",").concat(i.c,",").concat(i.d,",").concat(i.e,",").concat(i.f,")");ui(Di,"webkitTransform",T),ui(Di,"mozTransform",T),ui(Di,"msTransform",T),ui(Di,"transform",T),Yv=f,Wv=M,Ou=He}Xe.cancelable&&Xe.preventDefault()}},_appendGhost:function(){if(!Di){var Xe=this.options.fallbackOnBody?document.body:Ko,rt=is(Va,!0,ev,!0,Xe),Ae=this.options;if(ev){for(cl=Xe;ui(cl,"position")==="static"&&ui(cl,"transform")==="none"&&cl!==document;)cl=cl.parentNode;cl!==document.body&&cl!==document.documentElement?(cl===document&&(cl=lf()),rt.top+=cl.scrollTop,rt.left+=cl.scrollLeft):cl=lf(),jv=Xp(cl)}Di=Va.cloneNode(!0),Zo(Di,Ae.ghostClass,!1),Zo(Di,Ae.fallbackClass,!0),Zo(Di,Ae.dragClass,!0),ui(Di,"transition",""),ui(Di,"transform",""),ui(Di,"box-sizing","border-box"),ui(Di,"margin",0),ui(Di,"top",rt.top),ui(Di,"left",rt.left),ui(Di,"width",rt.width),ui(Di,"height",rt.height),ui(Di,"opacity","0.8"),ui(Di,"position",ev?"absolute":"fixed"),ui(Di,"zIndex","100000"),ui(Di,"pointerEvents","none"),bi.ghost=Di,Xe.appendChild(Di),ui(Di,"transform-origin",Qp/parseInt(Di.style.width)*100+"% "+$p/parseInt(Di.style.height)*100+"%")}},_onDragStart:function(Xe,rt){var Ae=this,Je=Xe.dataTransfer,He=Ae.options;if(Bl("dragStart",this,{evt:Xe}),bi.eventCanceled){this._onDrop();return}Bl("setupClone",this),bi.eventCanceled||(ss=Vv(Va),ss.draggable=!1,ss.style["will-change"]="",this._hideClone(),Zo(ss,this.options.chosenClass,!1),bi.clone=ss),Ae.cloneId=tv(function(){Bl("clone",Ae),!bi.eventCanceled&&(Ae.options.removeCloneOnHide||Ko.insertBefore(ss,Va),Ae._hideClone(),El({sortable:Ae,name:"clone"}))}),!rt&&Zo(Va,He.dragClass,!0),rt?(Zh=!0,Ae._loopId=setInterval(Ae._emulateDragOver,50)):(Wi(document,"mouseup",Ae._onDrop),Wi(document,"touchend",Ae._onDrop),Wi(document,"touchcancel",Ae._onDrop),Je&&(Je.effectAllowed="move",He.setData&&He.setData.call(Ae,Je,Va)),Ji(document,"drop",Ae),ui(Va,"transform","translateZ(0)")),Tc=!0,Ae._dragStartId=tv(Ae._dragStarted.bind(Ae,rt,Xe)),Ji(document,"selectstart",Ae),lh=!0,Nv&&ui(document.body,"user-select","none")},_onDragOver:function(Xe){var rt=this.el,Ae=Xe.target,Je,He,i,U=this.options,V=U.group,w=bi.active,f=Xh===V,M=U.sort,T=qs||w,e,a=this,n=!1;if(Xv)return;function r(v,k){Bl(v,a,Uf({evt:Xe,isOwner:f,axis:e?"vertical":"horizontal",revert:i,dragRect:Je,targetRect:He,canSort:M,fromSortable:T,target:Ae,completed:h,onMove:function(E,C){return Zv(Ko,rt,Va,Je,E,is(E),Xe,C)},changed:s},k))}function t(){r("dragOverAnimationCapture"),a.captureAnimationState(),a!==T&&T.captureAnimationState()}function h(v){return r("dragOverCompleted",{insertion:v}),v&&(f?w._hideClone():w._showClone(a),a!==T&&(Zo(Va,qs?qs.options.ghostClass:w.options.ghostClass,!1),Zo(Va,U.ghostClass,!0)),qs!==a&&a!==bi.active?qs=a:a===bi.active&&qs&&(qs=null),T===a&&(a._ignoreWhileAnimating=Ae),a.animateAll(function(){r("dragOverAnimationComplete"),a._ignoreWhileAnimating=null}),a!==T&&(T.animateAll(),T._ignoreWhileAnimating=null)),(Ae===Va&&!Va.animated||Ae===rt&&!Ae.animated)&&(Ac=null),!U.dragoverBubble&&!Xe.rootEl&&Ae!==document&&(Va.parentNode[fl]._isOutsideThisEl(Xe.target),!v&&lc(Xe)),!U.dragoverBubble&&Xe.stopPropagation&&Xe.stopPropagation(),n=!0}function s(){nu=os(Va),Gf=os(Va,U.draggable),El({sortable:a,name:"change",toEl:rt,newIndex:nu,newDraggableIndex:Gf,originalEvent:Xe})}if(Xe.preventDefault!==void 0&&Xe.cancelable&&Xe.preventDefault(),Ae=zu(Ae,U.draggable,rt,!0),r("dragOver"),bi.eventCanceled)return n;if(Va.contains(Xe.target)||Ae.animated&&Ae.animatingX&&Ae.animatingY||a._ignoreWhileAnimating===Ae)return h(!1);if(Zh=!1,w&&!U.disabled&&(f?M||(i=!Ko.contains(Va)):qs===this||(this.lastPutMode=Xh.checkPull(this,w,Va,Xe))&&V.checkPut(this,w,Va,Xe))){if(e=this._getDirection(Xe,Ae)==="vertical",Je=is(Va),r("dragOverValid"),bi.eventCanceled)return n;if(i)return bs=Ko,t(),this._hideClone(),r("revert"),bi.eventCanceled||(oc?Ko.insertBefore(Va,oc):Ko.appendChild(Va)),h(!0);var o=Bv(rt,U.draggable);if(!o||q0(Xe,e,this)&&!o.animated){if(o===Va)return h(!1);if(o&&rt===Xe.target&&(Ae=o),Ae&&(He=is(Ae)),Zv(Ko,rt,Va,Je,Ae,He,Xe,!!Ae)!==!1)return t(),rt.appendChild(Va),bs=rt,s(),h(!0)}else if(Ae.parentNode===rt){He=is(Ae);var y=0,d,p=Va.parentNode!==rt,c=!Z0(Va.animated&&Va.toRect||Je,Ae.animated&&Ae.toRect||He,e),m=e?"top":"left",l=jp(Ae,"top","top")||jp(Va,"top","top"),x=l?l.scrollTop:void 0;Ac!==Ae&&(d=He[m],fh=!1,Jh=!c&&U.invertSwap||p),y=eg(Xe,Ae,He,e,c?1:U.swapThreshold,U.invertedSwapThreshold==null?U.swapThreshold:U.invertedSwapThreshold,Jh,Ac===Ae);var u;if(y!==0){var A=os(Va);do A-=y,u=bs.children[A];while(u&&(ui(u,"display")==="none"||u===Di))}if(y===0||u===Ae)return h(!1);Ac=Ae,uh=y;var _=Ae.nextElementSibling,g=!1;g=y===1;var b=Zv(Ko,rt,Va,Je,Ae,He,Xe,g);if(b!==!1)return(b===1||b===-1)&&(g=b===1),Xv=!0,setTimeout($0,30),t(),g&&!_?rt.appendChild(Va):Ae.parentNode.insertBefore(Va,g?_:Ae),l&&Kp(l,0,x-l.scrollTop),bs=Va.parentNode,d!==void 0&&!Jh&&(Qh=Math.abs(d-is(Ae)[m])),s(),h(!0)}if(rt.contains(Va))return h(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){Wi(document,"mousemove",this._onTouchMove),Wi(document,"touchmove",this._onTouchMove),Wi(document,"pointermove",this._onTouchMove),Wi(document,"dragover",lc),Wi(document,"mousemove",lc),Wi(document,"touchmove",lc)},_offUpEvents:function(){var Xe=this.el.ownerDocument;Wi(Xe,"mouseup",this._onDrop),Wi(Xe,"touchend",this._onDrop),Wi(Xe,"pointerup",this._onDrop),Wi(Xe,"touchcancel",this._onDrop),Wi(document,"selectstart",this)},_onDrop:function(Xe){var rt=this.el,Ae=this.options;if(nu=os(Va),Gf=os(Va,Ae.draggable),Bl("drop",this,{evt:Xe}),bs=Va&&Va.parentNode,nu=os(Va),Gf=os(Va,Ae.draggable),bi.eventCanceled){this._nulling();return}Tc=!1,Jh=!1,fh=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Jv(this.cloneId),Jv(this._dragStartId),this.nativeDraggable&&(Wi(document,"drop",this),Wi(rt,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Nv&&ui(document.body,"user-select",""),ui(Va,"transform",""),Xe&&(lh&&(Xe.cancelable&&Xe.preventDefault(),!Ae.dropBubble&&Xe.stopPropagation()),Di&&Di.parentNode&&Di.parentNode.removeChild(Di),(Ko===bs||qs&&qs.lastPutMode!=="clone")&&ss&&ss.parentNode&&ss.parentNode.removeChild(ss),Va&&(this.nativeDraggable&&Wi(Va,"dragend",this),Kv(Va),Va.style["will-change"]="",lh&&!Tc&&Zo(Va,qs?qs.options.ghostClass:this.options.ghostClass,!1),Zo(Va,this.options.chosenClass,!1),El({sortable:this,name:"unchoose",toEl:bs,newIndex:null,newDraggableIndex:null,originalEvent:Xe}),Ko!==bs?(nu>=0&&(El({rootEl:bs,name:"add",toEl:bs,fromEl:Ko,originalEvent:Xe}),El({sortable:this,name:"remove",toEl:bs,originalEvent:Xe}),El({rootEl:bs,name:"sort",toEl:bs,fromEl:Ko,originalEvent:Xe}),El({sortable:this,name:"sort",toEl:bs,originalEvent:Xe})),qs&&qs.save()):nu!==_c&&nu>=0&&(El({sortable:this,name:"update",toEl:bs,originalEvent:Xe}),El({sortable:this,name:"sort",toEl:bs,originalEvent:Xe})),bi.active&&((nu==null||nu===-1)&&(nu=_c,Gf=sh),El({sortable:this,name:"end",toEl:bs,originalEvent:Xe}),this.save()))),this._nulling()},_nulling:function(){Bl("nulling",this),Ko=Va=bs=Di=oc=ss=jh=Hf=sc=Ou=lh=nu=Gf=_c=sh=Ac=uh=qs=Xh=bi.dragged=bi.ghost=bi.clone=bi.active=null,$h.forEach(function(Xe){Xe.checked=!0}),$h.length=Yv=Wv=0},handleEvent:function(Xe){switch(Xe.type){case"drop":case"dragend":this._onDrop(Xe);break;case"dragenter":case"dragover":Va&&(this._onDragOver(Xe),Q0(Xe));break;case"selectstart":Xe.preventDefault();break}},toArray:function(){for(var Xe=[],rt,Ae=this.el.children,Je=0,He=Ae.length,i=this.options;Je<He;Je++)rt=Ae[Je],zu(rt,i.draggable,this.el,!1)&&Xe.push(rt.getAttribute(i.dataIdAttr)||rg(rt));return Xe},sort:function(Xe){var rt={},Ae=this.el;this.toArray().forEach(function(Je,He){var i=Ae.children[He];zu(i,this.options.draggable,Ae,!1)&&(rt[Je]=i)},this),Xe.forEach(function(Je){rt[Je]&&(Ae.removeChild(rt[Je]),Ae.appendChild(rt[Je]))})},save:function(){var Xe=this.options.store;Xe&&Xe.set&&Xe.set(this)},closest:function(Xe,rt){return zu(Xe,rt||this.options.draggable,this.el,!1)},option:function(Xe,rt){var Ae=this.options;if(rt===void 0)return Ae[Xe];var Je=ih.modifyOption(this,Xe,rt);typeof Je<"u"?Ae[Xe]=Je:Ae[Xe]=rt,Xe==="group"&&rd(Ae)},destroy:function(){Bl("destroy",this);var Xe=this.el;Xe[fl]=null,Wi(Xe,"mousedown",this._onTapStart),Wi(Xe,"touchstart",this._onTapStart),Wi(Xe,"pointerdown",this._onTapStart),this.nativeDraggable&&(Wi(Xe,"dragover",this),Wi(Xe,"dragenter",this)),Array.prototype.forEach.call(Xe.querySelectorAll("[draggable]"),function(rt){rt.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Kh.splice(Kh.indexOf(this.el),1),this.el=Xe=null},_hideClone:function(){if(!Hf){if(Bl("hideClone",this),bi.eventCanceled)return;ui(ss,"display","none"),this.options.removeCloneOnHide&&ss.parentNode&&ss.parentNode.removeChild(ss),Hf=!0}},_showClone:function(Xe){if(Xe.lastPutMode!=="clone"){this._hideClone();return}if(Hf){if(Bl("showClone",this),bi.eventCanceled)return;Ko.contains(Va)&&!this.options.group.revertClone?Ko.insertBefore(ss,Va):oc?Ko.insertBefore(ss,oc):Ko.appendChild(ss),this.options.group.revertClone&&this.animate(Va,ss),ui(ss,"display",""),Hf=!1}}};function Q0(pt){pt.dataTransfer&&(pt.dataTransfer.dropEffect="move"),pt.cancelable&&pt.preventDefault()}function Zv(pt,Xe,rt,Ae,Je,He,i,U){var V,w=pt[fl],f=w.options.onMove,M;return window.CustomEvent&&!kf&&!rh?V=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(V=document.createEvent("Event"),V.initEvent("move",!0,!0)),V.to=Xe,V.from=pt,V.dragged=rt,V.draggedRect=Ae,V.related=Je||Xe,V.relatedRect=He||is(Xe),V.willInsertAfter=U,V.originalEvent=i,pt.dispatchEvent(V),f&&(M=f.call(w,V,i)),M}function Kv(pt){pt.draggable=!1}function $0(){Xv=!1}function q0(pt,Xe,rt){var Ae=is(Bv(rt.el,rt.options.draggable)),Je=10;return Xe?pt.clientX>Ae.right+Je||pt.clientX<=Ae.right&&pt.clientY>Ae.bottom&&pt.clientX>=Ae.left:pt.clientX>Ae.right&&pt.clientY>Ae.top||pt.clientX<=Ae.right&&pt.clientY>Ae.bottom+Je}function eg(pt,Xe,rt,Ae,Je,He,i,U){var V=Ae?pt.clientY:pt.clientX,w=Ae?rt.height:rt.width,f=Ae?rt.top:rt.left,M=Ae?rt.bottom:rt.right,T=!1;if(!i){if(U&&Qh<w*Je){if(!fh&&(uh===1?V>f+w*He/2:V<M-w*He/2)&&(fh=!0),fh)T=!0;else if(uh===1?V<f+Qh:V>M-Qh)return-uh}else if(V>f+w*(1-Je)/2&&V<M-w*(1-Je)/2)return tg(Xe)}return T=T||i,T&&(V<f+w*He/2||V>M-w*He/2)?V>f+w/2?1:-1:0}function tg(pt){return os(Va)<os(pt)?1:-1}function rg(pt){for(var Xe=pt.tagName+pt.className+pt.src+pt.href+pt.textContent,rt=Xe.length,Ae=0;rt--;)Ae+=Xe.charCodeAt(rt);return Ae.toString(36)}function ng(pt){$h.length=0;for(var Xe=pt.getElementsByTagName("input"),rt=Xe.length;rt--;){var Ae=Xe[rt];Ae.checked&&$h.push(Ae)}}function tv(pt){return setTimeout(pt,0)}function Jv(pt){return clearTimeout(pt)}qh&&Ji(document,"touchmove",function(pt){(bi.active||Tc)&&pt.cancelable&&pt.preventDefault()}),bi.utils={on:Ji,off:Wi,css:ui,find:Wp,is:function(Xe,rt){return!!zu(Xe,rt,Xe,!1)},extend:H0,throttle:Zp,closest:zu,toggleClass:Zo,clone:Vv,index:os,nextTick:tv,cancelNextTick:Jv,detectDirection:td,getChild:Wh},bi.get=function(pt){return pt[fl]},bi.mount=function(){for(var pt=arguments.length,Xe=new Array(pt),rt=0;rt<pt;rt++)Xe[rt]=arguments[rt];Xe[0].constructor===Array&&(Xe=Xe[0]),Xe.forEach(function(Ae){if(!Ae.prototype||!Ae.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(Ae));Ae.utils&&(bi.utils=Uf({},bi.utils,Ae.utils)),ih.mount(Ae)})},bi.create=function(pt,Xe){return new bi(pt,Xe)},bi.version=N0;var ws=[],ch,Qv,$v=!1,qv,ep,rv,hh;function ag(){function pt(){this.defaults={scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var Xe in this)Xe.charAt(0)==="_"&&typeof this[Xe]=="function"&&(this[Xe]=this[Xe].bind(this))}return pt.prototype={dragStarted:function(rt){var Ae=rt.originalEvent;this.sortable.nativeDraggable?Ji(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Ji(document,"pointermove",this._handleFallbackAutoScroll):Ae.touches?Ji(document,"touchmove",this._handleFallbackAutoScroll):Ji(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(rt){var Ae=rt.originalEvent;!this.options.dragOverBubble&&!Ae.rootEl&&this._handleAutoScroll(Ae)},drop:function(){this.sortable.nativeDraggable?Wi(document,"dragover",this._handleAutoScroll):(Wi(document,"pointermove",this._handleFallbackAutoScroll),Wi(document,"touchmove",this._handleFallbackAutoScroll),Wi(document,"mousemove",this._handleFallbackAutoScroll)),id(),nv(),G0()},nulling:function(){rv=Qv=ch=$v=hh=qv=ep=null,ws.length=0},_handleFallbackAutoScroll:function(rt){this._handleAutoScroll(rt,!0)},_handleAutoScroll:function(rt,Ae){var Je=this,He=(rt.touches?rt.touches[0]:rt).clientX,i=(rt.touches?rt.touches[0]:rt).clientY,U=document.elementFromPoint(He,i);if(rv=rt,Ae||rh||kf||Nv){tp(rt,this.options,U,Ae);var V=Vf(U,!0);$v&&(!hh||He!==qv||i!==ep)&&(hh&&id(),hh=setInterval(function(){var w=Vf(document.elementFromPoint(He,i),!0);w!==V&&(V=w,nv()),tp(rt,Je.options,w,Ae)},10),qv=He,ep=i)}else{if(!this.options.bubbleScroll||Vf(U,!0)===lf()){nv();return}tp(rt,this.options,Vf(U,!1),!1)}}},bu(pt,{pluginName:"scroll",initializeByDefault:!0})}function nv(){ws.forEach(function(pt){clearInterval(pt.pid)}),ws=[]}function id(){clearInterval(hh)}var tp=Zp(function(pt,Xe,rt,Ae){if(!!Xe.scroll){var Je=(pt.touches?pt.touches[0]:pt).clientX,He=(pt.touches?pt.touches[0]:pt).clientY,i=Xe.scrollSensitivity,U=Xe.scrollSpeed,V=lf(),w=!1,f;Qv!==rt&&(Qv=rt,nv(),ch=Xe.scroll,f=Xe.scrollFn,ch===!0&&(ch=Vf(rt,!0)));var M=0,T=ch;do{var e=T,a=is(e),n=a.top,r=a.bottom,t=a.left,h=a.right,s=a.width,o=a.height,y=void 0,d=void 0,p=e.scrollWidth,c=e.scrollHeight,m=ui(e),l=e.scrollLeft,x=e.scrollTop;e===V?(y=s<p&&(m.overflowX==="auto"||m.overflowX==="scroll"||m.overflowX==="visible"),d=o<c&&(m.overflowY==="auto"||m.overflowY==="scroll"||m.overflowY==="visible")):(y=s<p&&(m.overflowX==="auto"||m.overflowX==="scroll"),d=o<c&&(m.overflowY==="auto"||m.overflowY==="scroll"));var u=y&&(Math.abs(h-Je)<=i&&l+s<p)-(Math.abs(t-Je)<=i&&!!l),A=d&&(Math.abs(r-He)<=i&&x+o<c)-(Math.abs(n-He)<=i&&!!x);if(!ws[M])for(var _=0;_<=M;_++)ws[_]||(ws[_]={});(ws[M].vx!=u||ws[M].vy!=A||ws[M].el!==e)&&(ws[M].el=e,ws[M].vx=u,ws[M].vy=A,clearInterval(ws[M].pid),(u!=0||A!=0)&&(w=!0,ws[M].pid=setInterval(function(){Ae&&this.layer===0&&bi.active._onTouchMove(rv);var g=ws[this.layer].vy?ws[this.layer].vy*U:0,b=ws[this.layer].vx?ws[this.layer].vx*U:0;typeof f=="function"&&f.call(bi.dragged.parentNode[fl],b,g,pt,rv,ws[this.layer].el)!=="continue"||Kp(ws[this.layer].el,b,g)}.bind({layer:M}),24))),M++}while(Xe.bubbleScroll&&T!==V&&(T=Vf(T,!1)));$v=w}},30),od=function(Xe){var rt=Xe.originalEvent,Ae=Xe.putSortable,Je=Xe.dragEl,He=Xe.activeSortable,i=Xe.dispatchSortableEvent,U=Xe.hideGhostForTarget,V=Xe.unhideGhostForTarget;if(!!rt){var w=Ae||He;U();var f=rt.changedTouches&&rt.changedTouches.length?rt.changedTouches[0]:rt,M=document.elementFromPoint(f.clientX,f.clientY);V(),w&&!w.el.contains(M)&&(i("spill"),this.onSpill({dragEl:Je,putSortable:Ae}))}};function rp(){}rp.prototype={startIndex:null,dragStart:function(Xe){var rt=Xe.oldDraggableIndex;this.startIndex=rt},onSpill:function(Xe){var rt=Xe.dragEl,Ae=Xe.putSortable;this.sortable.captureAnimationState(),Ae&&Ae.captureAnimationState();var Je=Wh(this.sortable.el,this.startIndex,this.options);Je?this.sortable.el.insertBefore(rt,Je):this.sortable.el.appendChild(rt),this.sortable.animateAll(),Ae&&Ae.animateAll()},drop:od},bu(rp,{pluginName:"revertOnSpill"});function np(){}np.prototype={onSpill:function(Xe){var rt=Xe.dragEl,Ae=Xe.putSortable,Je=Ae||this.sortable;Je.captureAnimationState(),rt.parentNode&&rt.parentNode.removeChild(rt),Je.animateAll()},drop:od},bu(np,{pluginName:"removeOnSpill"});var wu;function ig(){function pt(){this.defaults={swapClass:"sortable-swap-highlight"}}return pt.prototype={dragStart:function(rt){var Ae=rt.dragEl;wu=Ae},dragOverValid:function(rt){var Ae=rt.completed,Je=rt.target,He=rt.onMove,i=rt.activeSortable,U=rt.changed,V=rt.cancel;if(!!i.options.swap){var w=this.sortable.el,f=this.options;if(Je&&Je!==w){var M=wu;He(Je)!==!1?(Zo(Je,f.swapClass,!0),wu=Je):wu=null,M&&M!==wu&&Zo(M,f.swapClass,!1)}U(),Ae(!0),V()}},drop:function(rt){var Ae=rt.activeSortable,Je=rt.putSortable,He=rt.dragEl,i=Je||this.sortable,U=this.options;wu&&Zo(wu,U.swapClass,!1),wu&&(U.swap||Je&&Je.options.swap)&&He!==wu&&(i.captureAnimationState(),i!==Ae&&Ae.captureAnimationState(),og(He,wu),i.animateAll(),i!==Ae&&Ae.animateAll())},nulling:function(){wu=null}},bu(pt,{pluginName:"swap",eventProperties:function(){return{swapItem:wu}}})}function og(pt,Xe){var rt=pt.parentNode,Ae=Xe.parentNode,Je,He;!rt||!Ae||rt.isEqualNode(Xe)||Ae.isEqualNode(pt)||(Je=os(pt),He=os(Xe),rt.isEqualNode(Ae)&&Je<He&&He++,rt.insertBefore(Xe,rt.children[Je]),Ae.insertBefore(pt,Ae.children[He]))}var Ai=[],au=[],vh,Nu,ph=!1,iu=!1,Mc=!1,Ro,dh,av;function sg(){function pt(Xe){for(var rt in this)rt.charAt(0)==="_"&&typeof this[rt]=="function"&&(this[rt]=this[rt].bind(this));Xe.options.supportPointer?Ji(document,"pointerup",this._deselectMultiDrag):(Ji(document,"mouseup",this._deselectMultiDrag),Ji(document,"touchend",this._deselectMultiDrag)),Ji(document,"keydown",this._checkKeyDown),Ji(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(Je,He){var i="";Ai.length&&Nu===Xe?Ai.forEach(function(U,V){i+=(V?", ":"")+U.textContent}):i=He.textContent,Je.setData("Text",i)}}}return pt.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(rt){var Ae=rt.dragEl;Ro=Ae},delayEnded:function(){this.isMultiDrag=~Ai.indexOf(Ro)},setupClone:function(rt){var Ae=rt.sortable,Je=rt.cancel;if(!!this.isMultiDrag){for(var He=0;He<Ai.length;He++)au.push(Vv(Ai[He])),au[He].sortableIndex=Ai[He].sortableIndex,au[He].draggable=!1,au[He].style["will-change"]="",Zo(au[He],this.options.selectedClass,!1),Ai[He]===Ro&&Zo(au[He],this.options.chosenClass,!1);Ae._hideClone(),Je()}},clone:function(rt){var Ae=rt.sortable,Je=rt.rootEl,He=rt.dispatchSortableEvent,i=rt.cancel;!this.isMultiDrag||this.options.removeCloneOnHide||Ai.length&&Nu===Ae&&(sd(!0,Je),He("clone"),i())},showClone:function(rt){var Ae=rt.cloneNowShown,Je=rt.rootEl,He=rt.cancel;!this.isMultiDrag||(sd(!1,Je),au.forEach(function(i){ui(i,"display","")}),Ae(),av=!1,He())},hideClone:function(rt){var Ae=this;rt.sortable;var Je=rt.cloneNowHidden,He=rt.cancel;!this.isMultiDrag||(au.forEach(function(i){ui(i,"display","none"),Ae.options.removeCloneOnHide&&i.parentNode&&i.parentNode.removeChild(i)}),Je(),av=!0,He())},dragStartGlobal:function(rt){rt.sortable,!this.isMultiDrag&&Nu&&Nu.multiDrag._deselectMultiDrag(),Ai.forEach(function(Ae){Ae.sortableIndex=os(Ae)}),Ai=Ai.sort(function(Ae,Je){return Ae.sortableIndex-Je.sortableIndex}),Mc=!0},dragStarted:function(rt){var Ae=this,Je=rt.sortable;if(!!this.isMultiDrag){if(this.options.sort&&(Je.captureAnimationState(),this.options.animation)){Ai.forEach(function(i){i!==Ro&&ui(i,"position","absolute")});var He=is(Ro,!1,!0,!0);Ai.forEach(function(i){i!==Ro&&Jp(i,He)}),iu=!0,ph=!0}Je.animateAll(function(){iu=!1,ph=!1,Ae.options.animation&&Ai.forEach(function(i){Hv(i)}),Ae.options.sort&&iv()})}},dragOver:function(rt){var Ae=rt.target,Je=rt.completed,He=rt.cancel;iu&&~Ai.indexOf(Ae)&&(Je(!1),He())},revert:function(rt){var Ae=rt.fromSortable,Je=rt.rootEl,He=rt.sortable,i=rt.dragRect;Ai.length>1&&(Ai.forEach(function(U){He.addAnimationState({target:U,rect:iu?is(U):i}),Hv(U),U.fromRect=i,Ae.removeAnimationState(U)}),iu=!1,lg(!this.options.removeCloneOnHide,Je))},dragOverCompleted:function(rt){var Ae=rt.sortable,Je=rt.isOwner,He=rt.insertion,i=rt.activeSortable,U=rt.parentEl,V=rt.putSortable,w=this.options;if(He){if(Je&&i._hideClone(),ph=!1,w.animation&&Ai.length>1&&(iu||!Je&&!i.options.sort&&!V)){var f=is(Ro,!1,!0,!0);Ai.forEach(function(T){T!==Ro&&(Jp(T,f),U.appendChild(T))}),iu=!0}if(!Je)if(iu||iv(),Ai.length>1){var M=av;i._showClone(Ae),i.options.animation&&!av&&M&&au.forEach(function(T){i.addAnimationState({target:T,rect:dh}),T.fromRect=dh,T.thisAnimationDuration=null})}else i._showClone(Ae)}},dragOverAnimationCapture:function(rt){var Ae=rt.dragRect,Je=rt.isOwner,He=rt.activeSortable;if(Ai.forEach(function(U){U.thisAnimationDuration=null}),He.options.animation&&!Je&&He.multiDrag.isMultiDrag){dh=bu({},Ae);var i=ic(Ro,!0);dh.top-=i.f,dh.left-=i.e}},dragOverAnimationComplete:function(){iu&&(iu=!1,iv())},drop:function(rt){var Ae=rt.originalEvent,Je=rt.rootEl,He=rt.parentEl,i=rt.sortable,U=rt.dispatchSortableEvent,V=rt.oldIndex,w=rt.putSortable,f=w||this.sortable;if(!!Ae){var M=this.options,T=He.children;if(!Mc)if(M.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),Zo(Ro,M.selectedClass,!~Ai.indexOf(Ro)),~Ai.indexOf(Ro))Ai.splice(Ai.indexOf(Ro),1),vh=null,oh({sortable:i,rootEl:Je,name:"deselect",targetEl:Ro,originalEvt:Ae});else{if(Ai.push(Ro),oh({sortable:i,rootEl:Je,name:"select",targetEl:Ro,originalEvt:Ae}),Ae.shiftKey&&vh&&i.el.contains(vh)){var e=os(vh),a=os(Ro);if(~e&&~a&&e!==a){var n,r;for(a>e?(r=e,n=a):(r=a,n=e+1);r<n;r++)~Ai.indexOf(T[r])||(Zo(T[r],M.selectedClass,!0),Ai.push(T[r]),oh({sortable:i,rootEl:Je,name:"select",targetEl:T[r],originalEvt:Ae}))}}else vh=Ro;Nu=f}if(Mc&&this.isMultiDrag){if((He[fl].options.sort||He!==Je)&&Ai.length>1){var t=is(Ro),h=os(Ro,":not(."+this.options.selectedClass+")");if(!ph&&M.animation&&(Ro.thisAnimationDuration=null),f.captureAnimationState(),!ph&&(M.animation&&(Ro.fromRect=t,Ai.forEach(function(o){if(o.thisAnimationDuration=null,o!==Ro){var y=iu?is(o):t;o.fromRect=y,f.addAnimationState({target:o,rect:y})}})),iv(),Ai.forEach(function(o){T[h]?He.insertBefore(o,T[h]):He.appendChild(o),h++}),V===os(Ro))){var s=!1;Ai.forEach(function(o){if(o.sortableIndex!==os(o)){s=!0;return}}),s&&U("update")}Ai.forEach(function(o){Hv(o)}),f.animateAll()}Nu=f}(Je===He||w&&w.lastPutMode!=="clone")&&au.forEach(function(o){o.parentNode&&o.parentNode.removeChild(o)})}},nullingGlobal:function(){this.isMultiDrag=Mc=!1,au.length=0},destroyGlobal:function(){this._deselectMultiDrag(),Wi(document,"pointerup",this._deselectMultiDrag),Wi(document,"mouseup",this._deselectMultiDrag),Wi(document,"touchend",this._deselectMultiDrag),Wi(document,"keydown",this._checkKeyDown),Wi(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(rt){if(!(typeof Mc<"u"&&Mc)&&Nu===this.sortable&&!(rt&&zu(rt.target,this.options.draggable,this.sortable.el,!1))&&!(rt&&rt.button!==0))for(;Ai.length;){var Ae=Ai[0];Zo(Ae,this.options.selectedClass,!1),Ai.shift(),oh({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:Ae,originalEvt:rt})}},_checkKeyDown:function(rt){rt.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(rt){rt.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},bu(pt,{pluginName:"multiDrag",utils:{select:function(rt){var Ae=rt.parentNode[fl];!Ae||!Ae.options.multiDrag||~Ai.indexOf(rt)||(Nu&&Nu!==Ae&&(Nu.multiDrag._deselectMultiDrag(),Nu=Ae),Zo(rt,Ae.options.selectedClass,!0),Ai.push(rt))},deselect:function(rt){var Ae=rt.parentNode[fl],Je=Ai.indexOf(rt);!Ae||!Ae.options.multiDrag||!~Je||(Zo(rt,Ae.options.selectedClass,!1),Ai.splice(Je,1))}},eventProperties:function(){var rt=this,Ae=[],Je=[];return Ai.forEach(function(He){Ae.push({multiDragElement:He,index:He.sortableIndex});var i;iu&&He!==Ro?i=-1:iu?i=os(He,":not(."+rt.options.selectedClass+")"):i=os(He),Je.push({multiDragElement:He,index:i})}),{items:I0(Ai),clones:[].concat(au),oldIndicies:Ae,newIndicies:Je}},optionListeners:{multiDragKey:function(rt){return rt=rt.toLowerCase(),rt==="ctrl"?rt="Control":rt.length>1&&(rt=rt.charAt(0).toUpperCase()+rt.substr(1)),rt}}})}function lg(pt,Xe){Ai.forEach(function(rt,Ae){var Je=Xe.children[rt.sortableIndex+(pt?Number(Ae):0)];Je?Xe.insertBefore(rt,Je):Xe.appendChild(rt)})}function sd(pt,Xe){au.forEach(function(rt,Ae){var Je=Xe.children[rt.sortableIndex+(pt?Number(Ae):0)];Je?Xe.insertBefore(rt,Je):Xe.appendChild(rt)})}function iv(){Ai.forEach(function(pt){pt!==Ro&&pt.parentNode&&pt.parentNode.removeChild(pt)})}bi.mount(new ag),bi.mount(np,rp);const ug=k0(Object.freeze(Object.defineProperty({__proto__:null,default:bi,MultiDrag:sg,Sortable:bi,Swap:ig},Symbol.toStringTag,{value:"Module"})));(function(pt,Xe){(function(Ae,Je){pt.exports=Je(ug)})(typeof self<"u"?self:E0,function(rt){return function(Ae){var Je={};function He(i){if(Je[i])return Je[i].exports;var U=Je[i]={i,l:!1,exports:{}};return Ae[i].call(U.exports,U,U.exports,He),U.l=!0,U.exports}return He.m=Ae,He.c=Je,He.d=function(i,U,V){He.o(i,U)||Object.defineProperty(i,U,{enumerable:!0,get:V})},He.r=function(i){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},He.t=function(i,U){if(U&1&&(i=He(i)),U&8||U&4&&typeof i=="object"&&i&&i.__esModule)return i;var V=Object.create(null);if(He.r(V),Object.defineProperty(V,"default",{enumerable:!0,value:i}),U&2&&typeof i!="string")for(var w in i)He.d(V,w,function(f){return i[f]}.bind(null,w));return V},He.n=function(i){var U=i&&i.__esModule?function(){return i.default}:function(){return i};return He.d(U,"a",U),U},He.o=function(i,U){return Object.prototype.hasOwnProperty.call(i,U)},He.p="",He(He.s="fb15")}({"01f9":function(Ae,Je,He){var i=He("2d00"),U=He("5ca1"),V=He("2aba"),w=He("32e9"),f=He("84f2"),M=He("41a0"),T=He("7f20"),e=He("38fd"),a=He("2b4c")("iterator"),n=!([].keys&&"next"in[].keys()),r="@@iterator",t="keys",h="values",s=function(){return this};Ae.exports=function(o,y,d,p,c,m,l){M(d,y,p);var x=function(I){if(!n&&I in g)return g[I];switch(I){case t:return function(){return new d(this,I)};case h:return function(){return new d(this,I)}}return function(){return new d(this,I)}},u=y+" Iterator",A=c==h,_=!1,g=o.prototype,b=g[a]||g[r]||c&&g[c],v=b||x(c),k=c?A?x("entries"):v:void 0,S=y=="Array"&&g.entries||b,E,C,F;if(S&&(F=e(S.call(new o)),F!==Object.prototype&&F.next&&(T(F,u,!0),!i&&typeof F[a]!="function"&&w(F,a,s))),A&&b&&b.name!==h&&(_=!0,v=function(){return b.call(this)}),(!i||l)&&(n||_||!g[a])&&w(g,a,v),f[y]=v,f[u]=s,c)if(E={values:A?v:x(h),keys:m?v:x(t),entries:k},l)for(C in E)C in g||V(g,C,E[C]);else U(U.P+U.F*(n||_),y,E);return E}},"02f4":function(Ae,Je,He){var i=He("4588"),U=He("be13");Ae.exports=function(V){return function(w,f){var M=String(U(w)),T=i(f),e=M.length,a,n;return T<0||T>=e?V?"":void 0:(a=M.charCodeAt(T),a<55296||a>56319||T+1===e||(n=M.charCodeAt(T+1))<56320||n>57343?V?M.charAt(T):a:V?M.slice(T,T+2):(a-55296<<10)+(n-56320)+65536)}}},"0390":function(Ae,Je,He){var i=He("02f4")(!0);Ae.exports=function(U,V,w){return V+(w?i(U,V).length:1)}},"0bfb":function(Ae,Je,He){var i=He("cb7c");Ae.exports=function(){var U=i(this),V="";return U.global&&(V+="g"),U.ignoreCase&&(V+="i"),U.multiline&&(V+="m"),U.unicode&&(V+="u"),U.sticky&&(V+="y"),V}},"0d58":function(Ae,Je,He){var i=He("ce10"),U=He("e11e");Ae.exports=Object.keys||function(w){return i(w,U)}},1495:function(Ae,Je,He){var i=He("86cc"),U=He("cb7c"),V=He("0d58");Ae.exports=He("9e1e")?Object.defineProperties:function(f,M){U(f);for(var T=V(M),e=T.length,a=0,n;e>a;)i.f(f,n=T[a++],M[n]);return f}},"214f":function(Ae,Je,He){He("b0c5");var i=He("2aba"),U=He("32e9"),V=He("79e5"),w=He("be13"),f=He("2b4c"),M=He("520a"),T=f("species"),e=!V(function(){var n=/./;return n.exec=function(){var r=[];return r.groups={a:"7"},r},"".replace(n,"$<a>")!=="7"}),a=function(){var n=/(?:)/,r=n.exec;n.exec=function(){return r.apply(this,arguments)};var t="ab".split(n);return t.length===2&&t[0]==="a"&&t[1]==="b"}();Ae.exports=function(n,r,t){var h=f(n),s=!V(function(){var m={};return m[h]=function(){return 7},""[n](m)!=7}),o=s?!V(function(){var m=!1,l=/a/;return l.exec=function(){return m=!0,null},n==="split"&&(l.constructor={},l.constructor[T]=function(){return l}),l[h](""),!m}):void 0;if(!s||!o||n==="replace"&&!e||n==="split"&&!a){var y=/./[h],d=t(w,h,""[n],function(l,x,u,A,_){return x.exec===M?s&&!_?{done:!0,value:y.call(x,u,A)}:{done:!0,value:l.call(u,x,A)}:{done:!1}}),p=d[0],c=d[1];i(String.prototype,n,p),U(RegExp.prototype,h,r==2?function(m,l){return c.call(m,this,l)}:function(m){return c.call(m,this)})}}},"230e":function(Ae,Je,He){var i=He("d3f4"),U=He("7726").document,V=i(U)&&i(U.createElement);Ae.exports=function(w){return V?U.createElement(w):{}}},"23c6":function(Ae,Je,He){var i=He("2d95"),U=He("2b4c")("toStringTag"),V=i(function(){return arguments}())=="Arguments",w=function(f,M){try{return f[M]}catch{}};Ae.exports=function(f){var M,T,e;return f===void 0?"Undefined":f===null?"Null":typeof(T=w(M=Object(f),U))=="string"?T:V?i(M):(e=i(M))=="Object"&&typeof M.callee=="function"?"Arguments":e}},2621:function(Ae,Je){Je.f=Object.getOwnPropertySymbols},"2aba":function(Ae,Je,He){var i=He("7726"),U=He("32e9"),V=He("69a8"),w=He("ca5a")("src"),f=He("fa5b"),M="toString",T=(""+f).split(M);He("8378").inspectSource=function(e){return f.call(e)},(Ae.exports=function(e,a,n,r){var t=typeof n=="function";t&&(V(n,"name")||U(n,"name",a)),e[a]!==n&&(t&&(V(n,w)||U(n,w,e[a]?""+e[a]:T.join(String(a)))),e===i?e[a]=n:r?e[a]?e[a]=n:U(e,a,n):(delete e[a],U(e,a,n)))})(Function.prototype,M,function(){return typeof this=="function"&&this[w]||f.call(this)})},"2aeb":function(Ae,Je,He){var i=He("cb7c"),U=He("1495"),V=He("e11e"),w=He("613b")("IE_PROTO"),f=function(){},M="prototype",T=function(){var e=He("230e")("iframe"),a=V.length,n="<",r=">",t;for(e.style.display="none",He("fab2").appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write(n+"script"+r+"document.F=Object"+n+"/script"+r),t.close(),T=t.F;a--;)delete T[M][V[a]];return T()};Ae.exports=Object.create||function(a,n){var r;return a!==null?(f[M]=i(a),r=new f,f[M]=null,r[w]=a):r=T(),n===void 0?r:U(r,n)}},"2b4c":function(Ae,Je,He){var i=He("5537")("wks"),U=He("ca5a"),V=He("7726").Symbol,w=typeof V=="function",f=Ae.exports=function(M){return i[M]||(i[M]=w&&V[M]||(w?V:U)("Symbol."+M))};f.store=i},"2d00":function(Ae,Je){Ae.exports=!1},"2d95":function(Ae,Je){var He={}.toString;Ae.exports=function(i){return He.call(i).slice(8,-1)}},"2fdb":function(Ae,Je,He){var i=He("5ca1"),U=He("d2c8"),V="includes";i(i.P+i.F*He("5147")(V),"String",{includes:function(f){return!!~U(this,f,V).indexOf(f,arguments.length>1?arguments[1]:void 0)}})},"32e9":function(Ae,Je,He){var i=He("86cc"),U=He("4630");Ae.exports=He("9e1e")?function(V,w,f){return i.f(V,w,U(1,f))}:function(V,w,f){return V[w]=f,V}},"38fd":function(Ae,Je,He){var i=He("69a8"),U=He("4bf8"),V=He("613b")("IE_PROTO"),w=Object.prototype;Ae.exports=Object.getPrototypeOf||function(f){return f=U(f),i(f,V)?f[V]:typeof f.constructor=="function"&&f instanceof f.constructor?f.constructor.prototype:f instanceof Object?w:null}},"41a0":function(Ae,Je,He){var i=He("2aeb"),U=He("4630"),V=He("7f20"),w={};He("32e9")(w,He("2b4c")("iterator"),function(){return this}),Ae.exports=function(f,M,T){f.prototype=i(w,{next:U(1,T)}),V(f,M+" Iterator")}},"456d":function(Ae,Je,He){var i=He("4bf8"),U=He("0d58");He("5eda")("keys",function(){return function(w){return U(i(w))}})},4588:function(Ae,Je){var He=Math.ceil,i=Math.floor;Ae.exports=function(U){return isNaN(U=+U)?0:(U>0?i:He)(U)}},4630:function(Ae,Je){Ae.exports=function(He,i){return{enumerable:!(He&1),configurable:!(He&2),writable:!(He&4),value:i}}},"4bf8":function(Ae,Je,He){var i=He("be13");Ae.exports=function(U){return Object(i(U))}},5147:function(Ae,Je,He){var i=He("2b4c")("match");Ae.exports=function(U){var V=/./;try{"/./"[U](V)}catch{try{return V[i]=!1,!"/./"[U](V)}catch{}}return!0}},"520a":function(Ae,Je,He){var i=He("0bfb"),U=RegExp.prototype.exec,V=String.prototype.replace,w=U,f="lastIndex",M=function(){var a=/a/,n=/b*/g;return U.call(a,"a"),U.call(n,"a"),a[f]!==0||n[f]!==0}(),T=/()??/.exec("")[1]!==void 0,e=M||T;e&&(w=function(n){var r=this,t,h,s,o;return T&&(h=new RegExp("^"+r.source+"$(?!\\s)",i.call(r))),M&&(t=r[f]),s=U.call(r,n),M&&s&&(r[f]=r.global?s.index+s[0].length:t),T&&s&&s.length>1&&V.call(s[0],h,function(){for(o=1;o<arguments.length-2;o++)arguments[o]===void 0&&(s[o]=void 0)}),s}),Ae.exports=w},"52a7":function(Ae,Je){Je.f={}.propertyIsEnumerable},5537:function(Ae,Je,He){var i=He("8378"),U=He("7726"),V="__core-js_shared__",w=U[V]||(U[V]={});(Ae.exports=function(f,M){return w[f]||(w[f]=M!==void 0?M:{})})("versions",[]).push({version:i.version,mode:He("2d00")?"pure":"global",copyright:"\xA9 2019 Denis Pushkarev (zloirock.ru)"})},"5ca1":function(Ae,Je,He){var i=He("7726"),U=He("8378"),V=He("32e9"),w=He("2aba"),f=He("9b43"),M="prototype",T=function(e,a,n){var r=e&T.F,t=e&T.G,h=e&T.S,s=e&T.P,o=e&T.B,y=t?i:h?i[a]||(i[a]={}):(i[a]||{})[M],d=t?U:U[a]||(U[a]={}),p=d[M]||(d[M]={}),c,m,l,x;t&&(n=a);for(c in n)m=!r&&y&&y[c]!==void 0,l=(m?y:n)[c],x=o&&m?f(l,i):s&&typeof l=="function"?f(Function.call,l):l,y&&w(y,c,l,e&T.U),d[c]!=l&&V(d,c,x),s&&p[c]!=l&&(p[c]=l)};i.core=U,T.F=1,T.G=2,T.S=4,T.P=8,T.B=16,T.W=32,T.U=64,T.R=128,Ae.exports=T},"5eda":function(Ae,Je,He){var i=He("5ca1"),U=He("8378"),V=He("79e5");Ae.exports=function(w,f){var M=(U.Object||{})[w]||Object[w],T={};T[w]=f(M),i(i.S+i.F*V(function(){M(1)}),"Object",T)}},"5f1b":function(Ae,Je,He){var i=He("23c6"),U=RegExp.prototype.exec;Ae.exports=function(V,w){var f=V.exec;if(typeof f=="function"){var M=f.call(V,w);if(typeof M!="object")throw new TypeError("RegExp exec method returned something other than an Object or null");return M}if(i(V)!=="RegExp")throw new TypeError("RegExp#exec called on incompatible receiver");return U.call(V,w)}},"613b":function(Ae,Je,He){var i=He("5537")("keys"),U=He("ca5a");Ae.exports=function(V){return i[V]||(i[V]=U(V))}},"626a":function(Ae,Je,He){var i=He("2d95");Ae.exports=Object("z").propertyIsEnumerable(0)?Object:function(U){return i(U)=="String"?U.split(""):Object(U)}},6762:function(Ae,Je,He){var i=He("5ca1"),U=He("c366")(!0);i(i.P,"Array",{includes:function(w){return U(this,w,arguments.length>1?arguments[1]:void 0)}}),He("9c6c")("includes")},6821:function(Ae,Je,He){var i=He("626a"),U=He("be13");Ae.exports=function(V){return i(U(V))}},"69a8":function(Ae,Je){var He={}.hasOwnProperty;Ae.exports=function(i,U){return He.call(i,U)}},"6a99":function(Ae,Je,He){var i=He("d3f4");Ae.exports=function(U,V){if(!i(U))return U;var w,f;if(V&&typeof(w=U.toString)=="function"&&!i(f=w.call(U))||typeof(w=U.valueOf)=="function"&&!i(f=w.call(U))||!V&&typeof(w=U.toString)=="function"&&!i(f=w.call(U)))return f;throw TypeError("Can't convert object to primitive value")}},7333:function(Ae,Je,He){var i=He("0d58"),U=He("2621"),V=He("52a7"),w=He("4bf8"),f=He("626a"),M=Object.assign;Ae.exports=!M||He("79e5")(function(){var T={},e={},a=Symbol(),n="abcdefghijklmnopqrst";return T[a]=7,n.split("").forEach(function(r){e[r]=r}),M({},T)[a]!=7||Object.keys(M({},e)).join("")!=n})?function(e,a){for(var n=w(e),r=arguments.length,t=1,h=U.f,s=V.f;r>t;)for(var o=f(arguments[t++]),y=h?i(o).concat(h(o)):i(o),d=y.length,p=0,c;d>p;)s.call(o,c=y[p++])&&(n[c]=o[c]);return n}:M},7726:function(Ae,Je){var He=Ae.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=He)},"77f1":function(Ae,Je,He){var i=He("4588"),U=Math.max,V=Math.min;Ae.exports=function(w,f){return w=i(w),w<0?U(w+f,0):V(w,f)}},"79e5":function(Ae,Je){Ae.exports=function(He){try{return!!He()}catch{return!0}}},"7f20":function(Ae,Je,He){var i=He("86cc").f,U=He("69a8"),V=He("2b4c")("toStringTag");Ae.exports=function(w,f,M){w&&!U(w=M?w:w.prototype,V)&&i(w,V,{configurable:!0,value:f})}},8378:function(Ae,Je){var He=Ae.exports={version:"2.6.5"};typeof __e=="number"&&(__e=He)},"84f2":function(Ae,Je){Ae.exports={}},"86cc":function(Ae,Je,He){var i=He("cb7c"),U=He("c69a"),V=He("6a99"),w=Object.defineProperty;Je.f=He("9e1e")?Object.defineProperty:function(M,T,e){if(i(M),T=V(T,!0),i(e),U)try{return w(M,T,e)}catch{}if("get"in e||"set"in e)throw TypeError("Accessors not supported!");return"value"in e&&(M[T]=e.value),M}},"9b43":function(Ae,Je,He){var i=He("d8e8");Ae.exports=function(U,V,w){if(i(U),V===void 0)return U;switch(w){case 1:return function(f){return U.call(V,f)};case 2:return function(f,M){return U.call(V,f,M)};case 3:return function(f,M,T){return U.call(V,f,M,T)}}return function(){return U.apply(V,arguments)}}},"9c6c":function(Ae,Je,He){var i=He("2b4c")("unscopables"),U=Array.prototype;U[i]==null&&He("32e9")(U,i,{}),Ae.exports=function(V){U[i][V]=!0}},"9def":function(Ae,Je,He){var i=He("4588"),U=Math.min;Ae.exports=function(V){return V>0?U(i(V),9007199254740991):0}},"9e1e":function(Ae,Je,He){Ae.exports=!He("79e5")(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})},a352:function(Ae,Je){Ae.exports=rt},a481:function(Ae,Je,He){var i=He("cb7c"),U=He("4bf8"),V=He("9def"),w=He("4588"),f=He("0390"),M=He("5f1b"),T=Math.max,e=Math.min,a=Math.floor,n=/\$([$&`']|\d\d?|<[^>]*>)/g,r=/\$([$&`']|\d\d?)/g,t=function(h){return h===void 0?h:String(h)};He("214f")("replace",2,function(h,s,o,y){return[function(c,m){var l=h(this),x=c==null?void 0:c[s];return x!==void 0?x.call(c,l,m):o.call(String(l),c,m)},function(p,c){var m=y(o,p,this,c);if(m.done)return m.value;var l=i(p),x=String(this),u=typeof c=="function";u||(c=String(c));var A=l.global;if(A){var _=l.unicode;l.lastIndex=0}for(var g=[];;){var b=M(l,x);if(b===null||(g.push(b),!A))break;var v=String(b[0]);v===""&&(l.lastIndex=f(x,V(l.lastIndex),_))}for(var k="",S=0,E=0;E<g.length;E++){b=g[E];for(var C=String(b[0]),F=T(e(w(b.index),x.length),0),I=[],D=1;D<b.length;D++)I.push(t(b[D]));var R=b.groups;if(u){var O=[C].concat(I,F,x);R!==void 0&&O.push(R);var z=String(c.apply(void 0,O))}else z=d(C,x,F,I,R,c);F>=S&&(k+=x.slice(S,F)+z,S=F+C.length)}return k+x.slice(S)}];function d(p,c,m,l,x,u){var A=m+p.length,_=l.length,g=r;return x!==void 0&&(x=U(x),g=n),o.call(u,g,function(b,v){var k;switch(v.charAt(0)){case"$":return"$";case"&":return p;case"`":return c.slice(0,m);case"'":return c.slice(A);case"<":k=x[v.slice(1,-1)];break;default:var S=+v;if(S===0)return b;if(S>_){var E=a(S/10);return E===0?b:E<=_?l[E-1]===void 0?v.charAt(1):l[E-1]+v.charAt(1):b}k=l[S-1]}return k===void 0?"":k})}})},aae3:function(Ae,Je,He){var i=He("d3f4"),U=He("2d95"),V=He("2b4c")("match");Ae.exports=function(w){var f;return i(w)&&((f=w[V])!==void 0?!!f:U(w)=="RegExp")}},ac6a:function(Ae,Je,He){for(var i=He("cadf"),U=He("0d58"),V=He("2aba"),w=He("7726"),f=He("32e9"),M=He("84f2"),T=He("2b4c"),e=T("iterator"),a=T("toStringTag"),n=M.Array,r={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},t=U(r),h=0;h<t.length;h++){var s=t[h],o=r[s],y=w[s],d=y&&y.prototype,p;if(d&&(d[e]||f(d,e,n),d[a]||f(d,a,s),M[s]=n,o))for(p in i)d[p]||V(d,p,i[p],!0)}},b0c5:function(Ae,Je,He){var i=He("520a");He("5ca1")({target:"RegExp",proto:!0,forced:i!==/./.exec},{exec:i})},be13:function(Ae,Je){Ae.exports=function(He){if(He==null)throw TypeError("Can't call method on  "+He);return He}},c366:function(Ae,Je,He){var i=He("6821"),U=He("9def"),V=He("77f1");Ae.exports=function(w){return function(f,M,T){var e=i(f),a=U(e.length),n=V(T,a),r;if(w&&M!=M){for(;a>n;)if(r=e[n++],r!=r)return!0}else for(;a>n;n++)if((w||n in e)&&e[n]===M)return w||n||0;return!w&&-1}}},c649:function(Ae,Je,He){(function(i){He.d(Je,"c",function(){return e}),He.d(Je,"a",function(){return M}),He.d(Je,"b",function(){return V}),He.d(Je,"d",function(){return T}),He("a481");function U(){return typeof window<"u"?window.console:i.console}var V=U();function w(a){var n=Object.create(null);return function(t){var h=n[t];return h||(n[t]=a(t))}}var f=/-(\w)/g,M=w(function(a){return a.replace(f,function(n,r){return r?r.toUpperCase():""})});function T(a){a.parentElement!==null&&a.parentElement.removeChild(a)}function e(a,n,r){var t=r===0?a.children[0]:a.children[r-1].nextSibling;a.insertBefore(n,t)}}).call(this,He("c8ba"))},c69a:function(Ae,Je,He){Ae.exports=!He("9e1e")&&!He("79e5")(function(){return Object.defineProperty(He("230e")("div"),"a",{get:function(){return 7}}).a!=7})},c8ba:function(Ae,Je){var He;He=function(){return this}();try{He=He||new Function("return this")()}catch{typeof window=="object"&&(He=window)}Ae.exports=He},ca5a:function(Ae,Je){var He=0,i=Math.random();Ae.exports=function(U){return"Symbol(".concat(U===void 0?"":U,")_",(++He+i).toString(36))}},cadf:function(Ae,Je,He){var i=He("9c6c"),U=He("d53b"),V=He("84f2"),w=He("6821");Ae.exports=He("01f9")(Array,"Array",function(f,M){this._t=w(f),this._i=0,this._k=M},function(){var f=this._t,M=this._k,T=this._i++;return!f||T>=f.length?(this._t=void 0,U(1)):M=="keys"?U(0,T):M=="values"?U(0,f[T]):U(0,[T,f[T]])},"values"),V.Arguments=V.Array,i("keys"),i("values"),i("entries")},cb7c:function(Ae,Je,He){var i=He("d3f4");Ae.exports=function(U){if(!i(U))throw TypeError(U+" is not an object!");return U}},ce10:function(Ae,Je,He){var i=He("69a8"),U=He("6821"),V=He("c366")(!1),w=He("613b")("IE_PROTO");Ae.exports=function(f,M){var T=U(f),e=0,a=[],n;for(n in T)n!=w&&i(T,n)&&a.push(n);for(;M.length>e;)i(T,n=M[e++])&&(~V(a,n)||a.push(n));return a}},d2c8:function(Ae,Je,He){var i=He("aae3"),U=He("be13");Ae.exports=function(V,w,f){if(i(w))throw TypeError("String#"+f+" doesn't accept regex!");return String(U(V))}},d3f4:function(Ae,Je){Ae.exports=function(He){return typeof He=="object"?He!==null:typeof He=="function"}},d53b:function(Ae,Je){Ae.exports=function(He,i){return{value:i,done:!!He}}},d8e8:function(Ae,Je){Ae.exports=function(He){if(typeof He!="function")throw TypeError(He+" is not a function!");return He}},e11e:function(Ae,Je){Ae.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},f559:function(Ae,Je,He){var i=He("5ca1"),U=He("9def"),V=He("d2c8"),w="startsWith",f=""[w];i(i.P+i.F*He("5147")(w),"String",{startsWith:function(T){var e=V(this,T,w),a=U(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),n=String(T);return f?f.call(e,n,a):e.slice(a,a+n.length)===n}})},f6fd:function(Ae,Je){(function(He){var i="currentScript",U=He.getElementsByTagName("script");i in He||Object.defineProperty(He,i,{get:function(){try{throw new Error}catch(f){var V,w=(/.*at [^\(]*\((.*):.+:.+\)$/ig.exec(f.stack)||[!1])[1];for(V in U)if(U[V].src==w||U[V].readyState=="interactive")return U[V];return null}}})})(document)},f751:function(Ae,Je,He){var i=He("5ca1");i(i.S+i.F,"Object",{assign:He("7333")})},fa5b:function(Ae,Je,He){Ae.exports=He("5537")("native-function-to-string",Function.toString)},fab2:function(Ae,Je,He){var i=He("7726").document;Ae.exports=i&&i.documentElement},fb15:function(Ae,Je,He){if(He.r(Je),typeof window<"u"){He("f6fd");var i;(i=window.document.currentScript)&&(i=i.src.match(/(.+\/)[^/]+\.js(\?.*)?$/))&&(He.p=i[1])}He("f751"),He("f559"),He("ac6a"),He("cadf"),He("456d");function U(C){if(Array.isArray(C))return C}function V(C,F){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(C)))){var I=[],D=!0,R=!1,O=void 0;try{for(var z=C[Symbol.iterator](),B;!(D=(B=z.next()).done)&&(I.push(B.value),!(F&&I.length===F));D=!0);}catch(G){R=!0,O=G}finally{try{!D&&z.return!=null&&z.return()}finally{if(R)throw O}}return I}}function w(C,F){(F==null||F>C.length)&&(F=C.length);for(var I=0,D=new Array(F);I<F;I++)D[I]=C[I];return D}function f(C,F){if(!!C){if(typeof C=="string")return w(C,F);var I=Object.prototype.toString.call(C).slice(8,-1);if(I==="Object"&&C.constructor&&(I=C.constructor.name),I==="Map"||I==="Set")return Array.from(C);if(I==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(I))return w(C,F)}}function M(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function T(C,F){return U(C)||V(C,F)||f(C,F)||M()}He("6762"),He("2fdb");function e(C){if(Array.isArray(C))return w(C)}function a(C){if(typeof Symbol<"u"&&Symbol.iterator in Object(C))return Array.from(C)}function n(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function r(C){return e(C)||a(C)||f(C)||n()}var t=He("a352"),h=He.n(t),s=He("c649");function o(C,F,I){return I===void 0||(C=C||{},C[F]=I),C}function y(C,F){return C.map(function(I){return I.elm}).indexOf(F)}function d(C,F,I,D){if(!C)return[];var R=C.map(function(B){return B.elm}),O=F.length-D,z=r(F).map(function(B,G){return G>=O?R.length:R.indexOf(B)});return I?z.filter(function(B){return B!==-1}):z}function p(C,F){var I=this;this.$nextTick(function(){return I.$emit(C.toLowerCase(),F)})}function c(C){var F=this;return function(I){F.realList!==null&&F["onDrag"+C](I),p.call(F,C,I)}}function m(C){return["transition-group","TransitionGroup"].includes(C)}function l(C){if(!C||C.length!==1)return!1;var F=T(C,1),I=F[0].componentOptions;return I?m(I.tag):!1}function x(C,F,I){return C[I]||(F[I]?F[I]():void 0)}function u(C,F,I){var D=0,R=0,O=x(F,I,"header");O&&(D=O.length,C=C?[].concat(r(O),r(C)):r(O));var z=x(F,I,"footer");return z&&(R=z.length,C=C?[].concat(r(C),r(z)):r(z)),{children:C,headerOffset:D,footerOffset:R}}function A(C,F){var I=null,D=function(Q,X){I=o(I,Q,X)},R=Object.keys(C).filter(function(G){return G==="id"||G.startsWith("data-")}).reduce(function(G,Q){return G[Q]=C[Q],G},{});if(D("attrs",R),!F)return I;var O=F.on,z=F.props,B=F.attrs;return D("on",O),D("props",z),Object.assign(I.attrs,B),I}var _=["Start","Add","Remove","Update","End"],g=["Choose","Unchoose","Sort","Filter","Clone"],b=["Move"].concat(_,g).map(function(C){return"on"+C}),v=null,k={options:Object,list:{type:Array,required:!1,default:null},value:{type:Array,required:!1,default:null},noTransitionOnDrag:{type:Boolean,default:!1},clone:{type:Function,default:function(F){return F}},element:{type:String,default:"div"},tag:{type:String,default:null},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},S={name:"draggable",inheritAttrs:!1,props:k,data:function(){return{transitionMode:!1,noneFunctionalComponentMode:!1}},render:function(F){var I=this.$slots.default;this.transitionMode=l(I);var D=u(I,this.$slots,this.$scopedSlots),R=D.children,O=D.headerOffset,z=D.footerOffset;this.headerOffset=O,this.footerOffset=z;var B=A(this.$attrs,this.componentData);return F(this.getTag(),B,R)},created:function(){this.list!==null&&this.value!==null&&s.b.error("Value and list props are mutually exclusive! Please set one or another."),this.element!=="div"&&s.b.warn("Element props is deprecated please use tag props instead. See https://github.com/SortableJS/Vue.Draggable/blob/master/documentation/migrate.md#element-props"),this.options!==void 0&&s.b.warn("Options props is deprecated, add sortable options directly as vue.draggable item, or use v-bind. See https://github.com/SortableJS/Vue.Draggable/blob/master/documentation/migrate.md#options-props")},mounted:function(){var F=this;if(this.noneFunctionalComponentMode=this.getTag().toLowerCase()!==this.$el.nodeName.toLowerCase()&&!this.getIsFunctional(),this.noneFunctionalComponentMode&&this.transitionMode)throw new Error("Transition-group inside component is not supported. Please alter tag value or remove transition-group. Current tag value: ".concat(this.getTag()));var I={};_.forEach(function(O){I["on"+O]=c.call(F,O)}),g.forEach(function(O){I["on"+O]=p.bind(F,O)});var D=Object.keys(this.$attrs).reduce(function(O,z){return O[Object(s.a)(z)]=F.$attrs[z],O},{}),R=Object.assign({},this.options,D,I,{onMove:function(z,B){return F.onDragMove(z,B)}});!("draggable"in R)&&(R.draggable=">*"),this._sortable=new h.a(this.rootContainer,R),this.computeIndexes()},beforeDestroy:function(){this._sortable!==void 0&&this._sortable.destroy()},computed:{rootContainer:function(){return this.transitionMode?this.$el.children[0]:this.$el},realList:function(){return this.list?this.list:this.value}},watch:{options:{handler:function(F){this.updateOptions(F)},deep:!0},$attrs:{handler:function(F){this.updateOptions(F)},deep:!0},realList:function(){this.computeIndexes()}},methods:{getIsFunctional:function(){var F=this._vnode.fnOptions;return F&&F.functional},getTag:function(){return this.tag||this.element},updateOptions:function(F){for(var I in F){var D=Object(s.a)(I);b.indexOf(D)===-1&&this._sortable.option(D,F[I])}},getChildrenNodes:function(){if(this.noneFunctionalComponentMode)return this.$children[0].$slots.default;var F=this.$slots.default;return this.transitionMode?F[0].child.$slots.default:F},computeIndexes:function(){var F=this;this.$nextTick(function(){F.visibleIndexes=d(F.getChildrenNodes(),F.rootContainer.children,F.transitionMode,F.footerOffset)})},getUnderlyingVm:function(F){var I=y(this.getChildrenNodes()||[],F);if(I===-1)return null;var D=this.realList[I];return{index:I,element:D}},getUnderlyingPotencialDraggableComponent:function(F){var I=F.__vue__;return!I||!I.$options||!m(I.$options._componentTag)?!("realList"in I)&&I.$children.length===1&&"realList"in I.$children[0]?I.$children[0]:I:I.$parent},emitChanges:function(F){var I=this;this.$nextTick(function(){I.$emit("change",F)})},alterList:function(F){if(this.list){F(this.list);return}var I=r(this.value);F(I),this.$emit("input",I)},spliceList:function(){var F=arguments,I=function(R){return R.splice.apply(R,r(F))};this.alterList(I)},updatePosition:function(F,I){var D=function(O){return O.splice(I,0,O.splice(F,1)[0])};this.alterList(D)},getRelatedContextFromMoveEvent:function(F){var I=F.to,D=F.related,R=this.getUnderlyingPotencialDraggableComponent(I);if(!R)return{component:R};var O=R.realList,z={list:O,component:R};if(I!==D&&O&&R.getUnderlyingVm){var B=R.getUnderlyingVm(D);if(B)return Object.assign(B,z)}return z},getVmIndex:function(F){var I=this.visibleIndexes,D=I.length;return F>D-1?D:I[F]},getComponent:function(){return this.$slots.default[0].componentInstance},resetTransitionData:function(F){if(!(!this.noTransitionOnDrag||!this.transitionMode)){var I=this.getChildrenNodes();I[F].data=null;var D=this.getComponent();D.children=[],D.kept=void 0}},onDragStart:function(F){this.context=this.getUnderlyingVm(F.item),F.item._underlying_vm_=this.clone(this.context.element),v=F.item},onDragAdd:function(F){var I=F.item._underlying_vm_;if(I!==void 0){Object(s.d)(F.item);var D=this.getVmIndex(F.newIndex);this.spliceList(D,0,I),this.computeIndexes();var R={element:I,newIndex:D};this.emitChanges({added:R})}},onDragRemove:function(F){if(Object(s.c)(this.rootContainer,F.item,F.oldIndex),F.pullMode==="clone"){Object(s.d)(F.clone);return}var I=this.context.index;this.spliceList(I,1);var D={element:this.context.element,oldIndex:I};this.resetTransitionData(I),this.emitChanges({removed:D})},onDragUpdate:function(F){Object(s.d)(F.item),Object(s.c)(F.from,F.item,F.oldIndex);var I=this.context.index,D=this.getVmIndex(F.newIndex);this.updatePosition(I,D);var R={element:this.context.element,oldIndex:I,newIndex:D};this.emitChanges({moved:R})},updateProperty:function(F,I){F.hasOwnProperty(I)&&(F[I]+=this.headerOffset)},computeFutureIndex:function(F,I){if(!F.element)return 0;var D=r(I.to.children).filter(function(B){return B.style.display!=="none"}),R=D.indexOf(I.related),O=F.component.getVmIndex(R),z=D.indexOf(v)!==-1;return z||!I.willInsertAfter?O:O+1},onDragMove:function(F,I){var D=this.move;if(!D||!this.realList)return!0;var R=this.getRelatedContextFromMoveEvent(F),O=this.context,z=this.computeFutureIndex(R,F);Object.assign(O,{futureIndex:z});var B=Object.assign({},F,{relatedContext:R,draggedContext:O});return D(B,I)},onDragEnd:function(){this.computeIndexes(),v=null}}};typeof window<"u"&&"Vue"in window&&window.Vue.component("draggable",S);var E=S;Je.default=E}}).default})})(Up);const fg=C0(Up.exports),ld={name:"vue-pivottable-ui",mixins:[wc],model:{prop:"config",event:"onRefresh"},props:{async:{type:Boolean,default:!1},hiddenAttributes:{type:Array,default:function(){return[]}},hiddenFromAggregators:{type:Array,default:function(){return[]}},hiddenFromDragDrop:{type:Array,default:function(){return[]}},sortonlyFromDragDrop:{type:Array,default:function(){return[]}},disabledFromDragDrop:{type:Array,default:function(){return[]}},menuLimit:{type:Number,default:500},config:{type:Object,default:function(){return{}}}},computed:{appliedFilter(){return this.propsData.valueFilter},rendererItems(){return this.renderers||Object.assign({},Iv,Ov)},aggregatorItems(){return this.aggregators||eh},numValsAllowed(){return this.aggregatorItems[this.propsData.aggregatorName]([])().numInputs||0},rowAttrs(){return this.propsData.rows.filter(pt=>!this.hiddenAttributes.includes(pt)&&!this.hiddenFromDragDrop.includes(pt))},colAttrs(){return this.propsData.cols.filter(pt=>!this.hiddenAttributes.includes(pt)&&!this.hiddenFromDragDrop.includes(pt))},unusedAttrs(){return this.propsData.attributes.filter(pt=>!this.propsData.rows.includes(pt)&&!this.propsData.cols.includes(pt)&&!this.hiddenAttributes.includes(pt)&&!this.hiddenFromDragDrop.includes(pt)).sort(Np(this.unusedOrder))}},data(){return{propsData:{aggregatorName:"",rendererName:"",rowOrder:"key_a_to_z",colOrder:"key_a_to_z",vals:[],cols:[],rows:[],attributes:[],valueFilter:{},renderer:null},pivotData:[],openStatus:{},attrValues:{},unusedOrder:[],zIndices:{},maxZIndex:1e3,openDropdown:!1,materializedInput:[],sortIcons:{key_a_to_z:{rowSymbol:"\u2195",colSymbol:"\u2194",next:"value_a_to_z"},value_a_to_z:{rowSymbol:"\u2193",colSymbol:"\u2192",next:"value_z_to_a"},value_z_to_a:{rowSymbol:"\u2191",colSymbol:"\u2190",next:"key_a_to_z"}}}},beforeUpdated(pt){this.materializeInput(pt.data)},watch:{rowOrder:{handler(pt){this.propsData.rowOrder=pt}},colOrder:{handler(pt){this.propsData.colOrder=pt}},cols:{handler(pt){this.propsData.cols=pt}},rows:{handler(pt){this.propsData.rows=pt}},rendererName:{handler(pt){this.propsData.rendererName=pt}},appliedFilter:{handler(pt,Xe){this.$emit("update:valueFilter",pt)},immediate:!0,deep:!0},valueFilter:{handler(pt){this.propsData.valueFilter=pt},immediate:!0,deep:!0},data:{handler(pt){this.init()},immediate:!0,deep:!0},attributes:{handler(pt){this.propsData.attributes=pt.length>0?pt:Object.keys(this.attrValues)},deep:!0},propsData:{handler(pt){if(this.pivotData.length===0)return;const Xe={derivedAttributes:this.derivedAttributes,hiddenAttributes:this.hiddenAttributes,hiddenFromAggregators:this.hiddenFromAggregators,hiddenFromDragDrop:this.hiddenFromDragDrop,sortonlyFromDragDrop:this.sortonlyFromDragDrop,disabledFromDragDrop:this.disabledFromDragDrop,menuLimit:this.menuLimit,attributes:pt.attributes,unusedAttrs:this.unusedAttrs,sorters:this.sorters,data:this.materializedInput,rowOrder:pt.rowOrder,colOrder:pt.colOrder,valueFilter:pt.valueFilter,rows:pt.rows,cols:pt.cols,rendererName:pt.rendererName,aggregatorName:pt.aggregatorName,aggregators:this.aggregatorItems,vals:pt.vals};this.$emit("onRefresh",Xe)},immediate:!1,deep:!0}},methods:{init(){this.materializeInput(this.data),this.propsData.vals=this.vals.slice(),this.propsData.rows=this.rows,this.propsData.cols=this.cols,this.propsData.rowOrder=this.rowOrder,this.propsData.colOrder=this.colOrder,this.propsData.rendererName=this.rendererName,this.propsData.aggregatorName=this.aggregatorName,this.propsData.attributes=this.attributes.length>0?this.attributes:Object.keys(this.attrValues),this.unusedOrder=this.unusedAttrs,Object.keys(this.attrValues).forEach(pt=>{let Xe={};const rt=this.valueFilter&&this.valueFilter[pt];rt&&Object.keys(rt).length&&(Xe=this.valueFilter[pt]),this.updateValueFilter({attribute:pt,valueFilter:Xe})})},assignValue(pt){this.$set(this.propsData.valueFilter,pt,{})},propUpdater(pt){return Xe=>{this.propsData[pt]=Xe}},updateValueFilter({attribute:pt,valueFilter:Xe}){this.$set(this.propsData.valueFilter,pt,Xe)},moveFilterBoxToTop({attribute:pt}){this.maxZIndex+=1,this.zIndices[pt]=this.maxZIndex+1},openFilterBox({attribute:pt,open:Xe}){this.$set(this.openStatus,pt,Xe)},closeFilterBox(pt){this.openStatus={}},materializeInput(pt){if(this.pivotData===pt)return;this.pivotData=pt;const Xe={},rt=[];let Ae=0;ru.forEachRecord(this.pivotData,this.derivedAttributes,function(Je){rt.push(Je);for(const He of Object.keys(Je))He in Xe||(Xe[He]={},Ae>0&&(Xe[He].null=Ae));for(const He in Xe){const i=He in Je?Je[He]:"null";i in Xe[He]||(Xe[He][i]=0),Xe[He][i]++}Ae++}),this.materializedInput=rt,this.attrValues=Xe},makeDnDCell(pt,Xe,rt,Ae){const Je=this.$scopedSlots.pvtAttr;return Ae(fg,{attrs:{draggable:"li[data-id]",group:"sharted",ghostClass:".pvtPlaceholder",filter:".pvtFilterBox",preventOnFilter:!1,tag:"td"},props:{value:pt},staticClass:rt,on:{sort:Xe.bind(this)}},[pt.map(He=>Ae(S0,{scopedSlots:Je?{pvtAttr:i=>Ae("slot",Je(i))}:void 0,props:{sortable:this.sortonlyFromDragDrop.includes(He)||!this.disabledFromDragDrop.includes(He),draggable:!this.sortonlyFromDragDrop.includes(He)&&!this.disabledFromDragDrop.includes(He),name:He,key:He,attrValues:this.attrValues[He],sorter:Uh(this.sorters,He),menuLimit:this.menuLimit,zIndex:this.zIndices[He]||this.maxZIndex,valueFilter:this.propsData.valueFilter[He],open:this.openStatus[He],async:this.async,unused:this.unusedAttrs.includes(He),localeStrings:this.locales[this.locale].localeStrings},domProps:{},on:{"update:filter":this.updateValueFilter,"moveToTop:filterbox":this.moveFilterBoxToTop,"open:filterbox":this.openFilterBox,"no:filterbox":()=>this.$emit("no:filterbox")}}))])},rendererCell(pt,Xe){return this.$slots.rendererCell?Xe("td",{staticClass:["pvtRenderers pvtVals pvtText"]},this.$slots.rendererCell):Xe("td",{staticClass:["pvtRenderers"]},[Xe(Fv,{props:{values:Object.keys(this.rendererItems),value:pt},on:{input:rt=>{this.propUpdater("rendererName")(rt),this.propUpdater("renderer",this.rendererItems[this.rendererName])}}})])},aggregatorCell(pt,Xe,rt){return this.$slots.aggregatorCell?rt("td",{staticClass:["pvtVals pvtText"]},this.$slots.aggregatorCell):rt("td",{staticClass:["pvtVals"]},[rt("div",[rt(Fv,{props:{values:Object.keys(this.aggregatorItems),value:pt},on:{input:Ae=>{this.propUpdater("aggregatorName")(Ae)}}}),rt("a",{staticClass:["pvtRowOrder"],attrs:{role:"button"},on:{click:()=>{this.propUpdater("rowOrder")(this.sortIcons[this.propsData.rowOrder].next)}}},this.sortIcons[this.propsData.rowOrder].rowSymbol),rt("a",{staticClass:["pvtColOrder"],attrs:{role:"button"},on:{click:()=>{this.propUpdater("colOrder")(this.sortIcons[this.propsData.colOrder].next)}}},this.sortIcons[this.propsData.colOrder].colSymbol)]),this.numValsAllowed>0?new Array(this.numValsAllowed).fill().map((Ae,Je)=>[rt(Fv,{props:{values:Object.keys(this.attrValues).filter(He=>!this.hiddenAttributes.includes(He)&&!this.hiddenFromAggregators.includes(He)),value:Xe[Je]},on:{input:He=>{this.propsData.vals.splice(Je,1,He)}}})]):void 0])},outputCell(pt,Xe,rt){return rt("td",{staticClass:["pvtOutput"]},[Xe?rt(Ov[pt.rendererName],{props:pt}):rt(Hh,{props:Object.assign(pt,{tableMaxWidth:this.tableMaxWidth})})])}},render(pt){if(this.data.length<1)return;const Xe=this.$scopedSlots.output,rt=this.$slots.output,Ae=this.propsData.rendererName,Je=this.propsData.aggregatorName,He=this.propsData.vals,i=this.makeDnDCell(this.unusedAttrs,n=>{const r=n.item.getAttribute("data-id");this.sortonlyFromDragDrop.includes(r)&&(!n.from.classList.contains("pvtUnused")||!n.to.classList.contains("pvtUnused"))||(n.from.classList.contains("pvtUnused")&&(this.openFilterBox({attribute:r,open:!1}),this.unusedOrder.splice(n.oldIndex,1),this.$emit("dragged:unused",r)),n.to.classList.contains("pvtUnused")&&(this.openFilterBox({attribute:r,open:!1}),this.unusedOrder.splice(n.newIndex,0,r),this.$emit("dropped:unused",r)))},"pvtAxisContainer pvtUnused pvtHorizList",pt),U=this.makeDnDCell(this.colAttrs,n=>{const r=n.item.getAttribute("data-id");this.sortonlyFromDragDrop.includes(r)&&(!n.from.classList.contains("pvtCols")||!n.to.classList.contains("pvtCols"))||(n.from.classList.contains("pvtCols")&&(this.propsData.cols.splice(n.oldIndex,1),this.$emit("dragged:cols",r)),n.to.classList.contains("pvtCols")&&(this.propsData.cols.splice(n.newIndex,0,r),this.$emit("dropped:cols",r)))},"pvtAxisContainer pvtHorizList pvtCols",pt),V=this.makeDnDCell(this.rowAttrs,n=>{const r=n.item.getAttribute("data-id");this.sortonlyFromDragDrop.includes(r)&&(!n.from.classList.contains("pvtRows")||!n.to.classList.contains("pvtRows"))||(n.from.classList.contains("pvtRows")&&(this.propsData.rows.splice(n.oldIndex,1),this.$emit("dragged:rows",r)),n.to.classList.contains("pvtRows")&&(this.propsData.rows.splice(n.newIndex,0,r),this.$emit("dropped:rows",r)))},"pvtAxisContainer pvtVertList pvtRows",pt),w=Object.assign({},this.$props,{localeStrings:this.localeStrings,data:this.materializedInput,rowOrder:this.propsData.rowOrder,colOrder:this.propsData.colOrder,valueFilter:this.propsData.valueFilter,rows:this.propsData.rows,cols:this.propsData.cols,aggregators:this.aggregatorItems,rendererName:Ae,aggregatorName:Je,vals:He});let f=null;try{f=new ru(w)}catch(n){if(console&&console.error(n.stack))return this.computeError(pt)}const M=this.rendererCell(Ae,pt),T=this.aggregatorCell(Je,He,pt),e=this.outputCell(w,Ae.indexOf("Chart")>-1,pt),a=this.$slots.colGroup;return pt("table",{staticClass:["pvtUi"]},[a,pt("tbody",{on:{click:this.closeFilterBox}},[pt("tr",[M,i]),pt("tr",[T,U]),pt("tr",[V,rt?pt("td",{staticClass:"pvtOutput"},rt):void 0,Xe&&!rt?pt("td",{staticClass:"pvtOutput"},Xe({pivotData:f})):void 0,!rt&&!Xe?e:void 0])])])},renderError(pt,Xe){return this.uiRenderError(pt)}},cg={aggregatorTemplates:Xo,aggregators:eh,derivers:T0,locales:Bp,naturalSort:ac,numberFormat:Nh,getSort:Uh,sortAs:Np,PivotData:ru},hg={TableRenderer:Iv,PlotlyRenderer:Ov},ap={VuePivottable:Hh,VuePivottableUi:ld};typeof window<"u"&&window.Vue&&window.Vue.use(Hh);const vg=pt=>{for(const Xe in ap)pt.component(ap[Xe].name,ap[Xe])};sf.PivotUtilities=cg,sf.Renderer=hg,sf.VuePivottable=Hh,sf.VuePivottableUi=ld,sf.default=vg,Object.defineProperties(sf,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
